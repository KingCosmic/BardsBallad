!function(){function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register([],(function(t,n){"use strict";return{execute:function(){var r=document.createElement("style");function o(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}r.textContent='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:initial;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:initial}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;white-space:nowrap}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.-start-3{inset-inline-start:-.75rem}.bottom-0{bottom:0}.bottom-4{bottom:1rem}.bottom-6{bottom:1.5rem}.end-0{inset-inline-end:0}.left-0{left:0}.left-full{left:100%}.right-0{right:0}.right-4{right:1rem}.right-6{right:1.5rem}.top-0{top:0}.top-1\\/2{top:50%}.top-4{top:1rem}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-40{z-index:40}.z-50{z-index:50}.m-10{margin:2.5rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-4{margin-bottom:1rem;margin-top:1rem}.mb-1{margin-bottom:.25rem}.mb-10{margin-bottom:2.5rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mb-px{margin-bottom:1px}.me-2{margin-inline-end:.5rem}.me-2\\.5{margin-inline-end:.625rem}.ml-1{margin-left:.25rem}.ml-1\\.5{margin-left:.375rem}.ml-2{margin-left:.5rem}.ml-auto{margin-left:auto}.mr-2{margin-right:.5rem}.mr-2\\.5{margin-right:.625rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.ms-1{margin-inline-start:.25rem}.ms-2{margin-inline-start:.5rem}.ms-2\\.5{margin-inline-start:.625rem}.ms-3{margin-inline-start:.75rem}.ms-6{margin-inline-start:1.5rem}.ms-auto{margin-inline-start:auto}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.h-0{height:0}.h-11{height:2.75rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-2{height:.5rem}.h-2\\.5{height:.625rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-\\[52px\\]{height:52px}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.h-screen-dynamic{height:calc(var(--vh, 1vh)*100)}.max-h-12{max-height:3rem}.max-h-60{max-height:15rem}.max-h-96{max-height:24rem}.max-h-full{max-height:100%}.max-h-screen{max-height:100vh}.min-h-\\[200px\\]{min-height:200px}.min-h-\\[40px\\]{min-height:40px}.w-0{width:0}.w-12{width:3rem}.w-14{width:3.5rem}.w-2{width:.5rem}.w-2\\.5{width:.625rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-32{width:8rem}.w-4{width:1rem}.w-44{width:11rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-\\[52px\\]{width:52px}.w-full{width:100%}.w-screen{width:100vw}.min-w-0{min-width:0}.min-w-96{min-width:24rem}.max-w-2xl{max-width:42rem}.max-w-5xl{max-width:64rem}.max-w-96,.max-w-sm{max-width:24rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.-translate-x-\\[100\\%\\],.-translate-x-full{--tw-translate-x:-100%}.-translate-x-\\[100\\%\\],.-translate-x-full,.-translate-y-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y:-50%}.translate-x-full{--tw-translate-x:100%}.rotate-180,.translate-x-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate:180deg}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-default{cursor:default}.cursor-move{cursor:move}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;user-select:none}.resize{resize:both}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-y-2{row-gap:.5rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.25rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.25rem*var(--tw-space-x-reverse))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(1rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(1rem*var(--tw-space-x-reverse))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.25rem*var(--tw-space-y-reverse));margin-top:calc(.25rem*(1 - var(--tw-space-y-reverse)))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.5rem*var(--tw-space-y-reverse));margin-top:calc(.5rem*(1 - var(--tw-space-y-reverse)))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(1rem*var(--tw-space-y-reverse));margin-top:calc(1rem*(1 - var(--tw-space-y-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-neutral-100>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(245 245 245/var(--tw-divide-opacity,1))}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.overflow-y-scroll{overflow-y:scroll}.truncate{overflow:hidden;text-overflow:ellipsis}.truncate,.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-b{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.rounded-e-lg{border-end-end-radius:.5rem;border-start-end-radius:.5rem}.rounded-l-lg{border-bottom-left-radius:.5rem;border-top-left-radius:.5rem}.rounded-r-lg{border-bottom-right-radius:.5rem;border-top-right-radius:.5rem}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-4{border-left-width:4px}.border-r{border-right-width:1px}.border-s{border-inline-start-width:1px}.border-t{border-top-width:1px}.border-t-0{border-top-width:0}.border-solid{border-style:solid}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-fantasy-accent{--tw-border-opacity:1;border-color:rgb(255 165 0/var(--tw-border-opacity,1))}.border-fantasy-accent\\/30{border-color:rgba(255,165,0,.3)}.border-fantasy-border{border-color:rgba(255,165,0,.2)}.border-fantasy-medium{--tw-border-opacity:1;border-color:rgb(45 59 82/var(--tw-border-opacity,1))}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity,1))}.border-green-200{--tw-border-opacity:1;border-color:rgb(187 247 208/var(--tw-border-opacity,1))}.border-indigo-500{--tw-border-opacity:1;border-color:rgb(99 102 241/var(--tw-border-opacity,1))}.border-neutral-200{--tw-border-opacity:1;border-color:rgb(229 229 229/var(--tw-border-opacity,1))}.border-neutral-300{--tw-border-opacity:1;border-color:rgb(212 212 212/var(--tw-border-opacity,1))}.border-neutral-500{--tw-border-opacity:1;border-color:rgb(115 115 115/var(--tw-border-opacity,1))}.border-neutral-600{--tw-border-opacity:1;border-color:rgb(82 82 82/var(--tw-border-opacity,1))}.border-neutral-700{--tw-border-opacity:1;border-color:rgb(64 64 64/var(--tw-border-opacity,1))}.border-orange-200{--tw-border-opacity:1;border-color:rgb(254 215 170/var(--tw-border-opacity,1))}.border-red-500{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity,1))}.border-red-600{--tw-border-opacity:1;border-color:rgb(220 38 38/var(--tw-border-opacity,1))}.border-white\\/10{border-color:rgba(255,255,255,.1)}.border-white\\/20{border-color:rgba(255,255,255,.2)}.border-white\\/60{border-color:rgba(255,255,255,.6)}.border-yellow-400{--tw-border-opacity:1;border-color:rgb(250 204 21/var(--tw-border-opacity,1))}.bg-\\[\\#065f46\\]{--tw-bg-opacity:1;background-color:rgb(6 95 70/var(--tw-bg-opacity,1))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity,1))}.bg-black\\/70{background-color:rgba(0,0,0,.7)}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246/var(--tw-bg-opacity,1))}.bg-blue-500\\/20{background-color:rgba(59,130,246,.2)}.bg-blue-700{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity,1))}.bg-fantasy-accent{--tw-bg-opacity:1;background-color:rgb(255 165 0/var(--tw-bg-opacity,1))}.bg-fantasy-accent\\/20{background-color:rgba(255,165,0,.2)}.bg-fantasy-accent\\/40{background-color:rgba(255,165,0,.4)}.bg-fantasy-dark{--tw-bg-opacity:1;background-color:rgb(26 35 50/var(--tw-bg-opacity,1))}.bg-fantasy-glass{background-color:rgba(15,23,35,.9)}.bg-fantasy-light{--tw-bg-opacity:1;background-color:rgb(30 42 58/var(--tw-bg-opacity,1))}.bg-fantasy-medium{--tw-bg-opacity:1;background-color:rgb(45 59 82/var(--tw-bg-opacity,1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity,1))}.bg-green-400{--tw-bg-opacity:1;background-color:rgb(74 222 128/var(--tw-bg-opacity,1))}.bg-green-600{--tw-bg-opacity:1;background-color:rgb(22 163 74/var(--tw-bg-opacity,1))}.bg-neutral-200{--tw-bg-opacity:1;background-color:rgb(229 229 229/var(--tw-bg-opacity,1))}.bg-neutral-400{--tw-bg-opacity:1;background-color:rgb(163 163 163/var(--tw-bg-opacity,1))}.bg-neutral-50{--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity,1))}.bg-neutral-700{--tw-bg-opacity:1;background-color:rgb(64 64 64/var(--tw-bg-opacity,1))}.bg-neutral-800{--tw-bg-opacity:1;background-color:rgb(38 38 38/var(--tw-bg-opacity,1))}.bg-neutral-950{--tw-bg-opacity:1;background-color:rgb(10 10 10/var(--tw-bg-opacity,1))}.bg-red-400{--tw-bg-opacity:1;background-color:rgb(248 113 113/var(--tw-bg-opacity,1))}.bg-red-50{--tw-bg-opacity:1;background-color:rgb(254 242 242/var(--tw-bg-opacity,1))}.bg-red-600{--tw-bg-opacity:1;background-color:rgb(220 38 38/var(--tw-bg-opacity,1))}.bg-transparent{background-color:initial}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.bg-white\\/10{background-color:rgba(255,255,255,.1)}.bg-opacity-60{--tw-bg-opacity:.6}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-none{background-image:none}.from-blue-500{--tw-gradient-from:#3b82f6 var(--tw-gradient-from-position);--tw-gradient-to:#3b82f600 var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.from-fantasy-accent-light{--tw-gradient-from:gold var(--tw-gradient-from-position);--tw-gradient-to:#ffd70000 var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.from-fantasy-accent\\/20{--tw-gradient-from:#ffa50033 var(--tw-gradient-from-position);--tw-gradient-to:#ffa50000 var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.from-green-900{--tw-gradient-from:#14532d var(--tw-gradient-from-position);--tw-gradient-to:#14532d00 var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.to-fantasy-accent{--tw-gradient-to:orange var(--tw-gradient-to-position)}.to-fantasy-accent-dark{--tw-gradient-to:#ff8c00 var(--tw-gradient-to-position)}.to-fantasy-accent-dark\\/10{--tw-gradient-to:#ff8c001a var(--tw-gradient-to-position)}.to-fantasy-border{--tw-gradient-to:#ffa50033 var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to:#0000 var(--tw-gradient-to-position)}.bg-\\[length\\:0\\%_2px\\]{background-size:0 2px}.bg-left-bottom{background-position:0 100%}.bg-no-repeat{background-repeat:no-repeat}.fill-fantasy-accent{fill:orange}.fill-fantasy-text-muted{fill:#9ca3af}.p-0{padding:0}.p-0\\.5{padding:.125rem}.p-1{padding:.25rem}.p-10{padding:2.5rem}.p-2{padding:.5rem}.p-2\\.5{padding:.625rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\\.5{padding-bottom:.125rem;padding-top:.125rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-2\\.5{padding-bottom:.625rem;padding-top:.625rem}.py-3{padding-bottom:.75rem;padding-top:.75rem}.py-4{padding-top:1rem}.pb-4,.py-4{padding-bottom:1rem}.pl-2{padding-left:.5rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-\\[10px\\]{font-size:10px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-extralight{font-weight:200}.font-light{font-weight:300}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.font-thin{font-weight:100}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.capitalize{text-transform:capitalize}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.tracking-tight{letter-spacing:-.025em}.tracking-wider{letter-spacing:.05em}.text-\\[\\#10b981\\]{--tw-text-opacity:1;color:rgb(16 185 129/var(--tw-text-opacity,1))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity,1))}.text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216/var(--tw-text-opacity,1))}.text-fantasy-accent{--tw-text-opacity:1;color:rgb(255 165 0/var(--tw-text-opacity,1))}.text-fantasy-accent-dark{--tw-text-opacity:1;color:rgb(255 140 0/var(--tw-text-opacity,1))}.text-fantasy-accent\\/60{color:rgba(255,165,0,.6)}.text-fantasy-accent\\/70{color:rgba(255,165,0,.7)}.text-fantasy-accent\\/80{color:rgba(255,165,0,.8)}.text-fantasy-dark{--tw-text-opacity:1;color:rgb(26 35 50/var(--tw-text-opacity,1))}.text-fantasy-text{--tw-text-opacity:1;color:rgb(232 234 237/var(--tw-text-opacity,1))}.text-fantasy-text-muted{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity,1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74/var(--tw-text-opacity,1))}.text-neutral-100{--tw-text-opacity:1;color:rgb(245 245 245/var(--tw-text-opacity,1))}.text-neutral-200{--tw-text-opacity:1;color:rgb(229 229 229/var(--tw-text-opacity,1))}.text-neutral-300{--tw-text-opacity:1;color:rgb(212 212 212/var(--tw-text-opacity,1))}.text-neutral-400{--tw-text-opacity:1;color:rgb(163 163 163/var(--tw-text-opacity,1))}.text-neutral-50{--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.text-neutral-500{--tw-text-opacity:1;color:rgb(115 115 115/var(--tw-text-opacity,1))}.text-neutral-700{--tw-text-opacity:1;color:rgb(64 64 64/var(--tw-text-opacity,1))}.text-neutral-800{--tw-text-opacity:1;color:rgb(38 38 38/var(--tw-text-opacity,1))}.text-neutral-900{--tw-text-opacity:1;color:rgb(23 23 23/var(--tw-text-opacity,1))}.text-neutral-950{--tw-text-opacity:1;color:rgb(10 10 10/var(--tw-text-opacity,1))}.text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12/var(--tw-text-opacity,1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity,1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38/var(--tw-text-opacity,1))}.text-red-700{--tw-text-opacity:1;color:rgb(185 28 28/var(--tw-text-opacity,1))}.text-red-900{--tw-text-opacity:1;color:rgb(127 29 29/var(--tw-text-opacity,1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.text-white\\/60{color:rgba(255,255,255,.6)}.underline{text-decoration-line:underline}.line-through{text-decoration-line:line-through}.placeholder-fantasy-text-muted::placeholder{--tw-placeholder-opacity:1;color:rgb(156 163 175/var(--tw-placeholder-opacity,1))}.placeholder-red-700::placeholder{--tw-placeholder-opacity:1;color:rgb(185 28 28/var(--tw-placeholder-opacity,1))}.opacity-50{opacity:.5}.opacity-65{opacity:.65}.opacity-80{opacity:.8}.shadow{--tw-shadow:0 1px 3px 0 #0000001a,0 1px 2px -1px #0000001a;--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-2xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px #00000040;--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color)}.shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.shadow-lg,.shadow-md{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-sm{--tw-shadow:0 1px 2px 0 #0000000d;--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.shadow-sm,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.shadow-black{--tw-shadow-color:#000;--tw-shadow:var(--tw-shadow-colored)}.shadow-fantasy-accent\\/30{--tw-shadow-color:#ffa5004d;--tw-shadow:var(--tw-shadow-colored)}.shadow-green-400\\/60{--tw-shadow-color:#4ade8099;--tw-shadow:var(--tw-shadow-colored)}.shadow-red-400\\/60{--tw-shadow-color:#f8717199;--tw-shadow:var(--tw-shadow-colored)}.ring-1{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.ring-1,.ring-8{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.ring-8{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(8px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.ring-black{--tw-ring-opacity:1;--tw-ring-color:rgb(0 0 0/var(--tw-ring-opacity,1))}.ring-fantasy-dark{--tw-ring-opacity:1;--tw-ring-color:rgb(26 35 50/var(--tw-ring-opacity,1))}.ring-opacity-5{--tw-ring-opacity:.05}.ring-offset-fantasy-text-muted{--tw-ring-offset-color:#9ca3af}.blur{--tw-blur:blur(8px)}.blur,.drop-shadow-lg{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-lg{--tw-drop-shadow:drop-shadow(0 10px 8px #0000000a) drop-shadow(0 4px 3px #0000001a)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-lg{--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-100{transition-duration:.1s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.duration-75{transition-duration:75ms}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.\\[key\\:string\\]{key:string}.\\[local_id\\:string\\]{local_id:string}:root{--background:#111;--brand-50:#111;--brand-100:#111;--brand-200:#111;--brand-300:#111;--brand-400:#111;--brand-500:#111;--brand-600:#111;--brand-700:#111;--brand-800:#111;--brand-900:#111;--brand-950:#111;--neutral-50:#111;--neutral-100:#111;--neutral-200:#111;--neutral-300:#111;--neutral-400:#111;--neutral-500:#111;--neutral-600:#111;--neutral-700:#111;--neutral-800:#111;--neutral-900:#111;--neutral-950:#111;--orange-50:#111;--orange-100:#111;--orange-200:#111;--orange-300:#111;--orange-400:#111;--orange-500:#111;--orange-600:#111;--orange-700:#111;--orange-800:#111;--orange-900:#111;--orange-950:#111;--red-50:#111;--red-100:#111;--red-200:#111;--red-300:#111;--red-400:#111;--red-500:#111;--red-600:#111;--red-700:#111;--red-800:#111;--red-900:#111;--red-950:#111;--blue-50:#111;--blue-100:#111;--blue-200:#111;--blue-300:#111;--blue-400:#111;--blue-500:#111;--blue-600:#111;--blue-700:#111;--blue-800:#111;--blue-900:#111;--blue-950:#111;--green-50:#111;--green-100:#111;--green-200:#111;--green-300:#111;--green-400:#111;--green-500:#111;--green-600:#111;--green-700:#111;--green-800:#111;--green-900:#111;--green-950:#111}::-webkit-scrollbar{height:4px;width:4px}::-webkit-scrollbar-track{background:rgba(0,0,0,0);border-radius:5px}::-webkit-scrollbar-thumb{background:var(--neutral-600);border-radius:5px}::-webkit-scrollbar-thumb:hover{background:var(--neutral-400)}.fantasy-gradient{background:linear-gradient(135deg,#1a2332,#2d3b52 50%,#1e2a3a)}.fantasy-card-gradient{background:linear-gradient(145deg,rgba(45,59,82,.8),rgba(30,42,58,.9))}.fantasy-accent-gradient{background:linear-gradient(135deg,orange,#ff8c00)}.fantasy-add-gradient{background:linear-gradient(145deg,rgba(255,165,0,.1),rgba(255,140,0,.05))}.fantasy-atmospheric:before{background:radial-gradient(circle at 20% 80%,rgba(255,165,0,.1) 0,rgba(0,0,0,0) 50%),radial-gradient(circle at 80% 20%,rgba(70,130,180,.1) 0,rgba(0,0,0,0) 50%);bottom:0;content:"";left:0;pointer-events:none;position:fixed;right:0;top:0;z-index:0}.particle{animation:float 8s linear infinite;background:rgba(255,215,0,.6);border-radius:50%;height:2px;position:absolute;transform:translateY(-1vh);width:2px}@keyframes float{0%{opacity:0;transform:translateY(101vh) translate(0)}10%{opacity:1}90%{opacity:1}to{opacity:0;transform:translateY(-10px) translate(100px)}}.card-top-border:before{background:linear-gradient(90deg,rgba(0,0,0,0),orange,rgba(0,0,0,0));border-radius:16px 16px 0 0;content:"";height:3px;left:0;opacity:0;position:absolute;right:0;top:0;transition:opacity .3s ease}.card-top-border:hover:before{opacity:1}.placeholder\\:text-fantasy-text-muted::placeholder{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.hover\\:-translate-y-0\\.5:hover{--tw-translate-y:-.125rem}.hover\\:-translate-y-0\\.5:hover,.hover\\:-translate-y-1:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:-translate-y-1:hover{--tw-translate-y:-.25rem}.hover\\:-translate-y-2:hover{--tw-translate-y:-.5rem}.hover\\:-translate-y-2:hover,.hover\\:translate-x-1:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:translate-x-1:hover{--tw-translate-x:.25rem}.hover\\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05}.hover\\:scale-105:hover,.hover\\:scale-\\[1\\.02\\]:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:scale-\\[1\\.02\\]:hover{--tw-scale-x:1.02;--tw-scale-y:1.02}.hover\\:transform:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:border-fantasy-accent\\/40:hover{border-color:rgba(255,165,0,.4)}.hover\\:border-fantasy-accent\\/60:hover{border-color:rgba(255,165,0,.6)}.hover\\:border-fantasy-border\\/40:hover{border-color:rgba(255,165,0,.4)}.hover\\:bg-blue-800:hover{--tw-bg-opacity:1;background-color:rgb(30 64 175/var(--tw-bg-opacity,1))}.hover\\:bg-fantasy-accent:hover{--tw-bg-opacity:1;background-color:rgb(255 165 0/var(--tw-bg-opacity,1))}.hover\\:bg-fantasy-accent-dark:hover{--tw-bg-opacity:1;background-color:rgb(255 140 0/var(--tw-bg-opacity,1))}.hover\\:bg-fantasy-accent\\/10:hover{background-color:rgba(255,165,0,.1)}.hover\\:bg-fantasy-accent\\/20:hover{background-color:rgba(255,165,0,.2)}.hover\\:bg-fantasy-dark:hover{--tw-bg-opacity:1;background-color:rgb(26 35 50/var(--tw-bg-opacity,1))}.hover\\:bg-fantasy-light:hover{--tw-bg-opacity:1;background-color:rgb(30 42 58/var(--tw-bg-opacity,1))}.hover\\:bg-fantasy-text:hover{--tw-bg-opacity:1;background-color:rgb(232 234 237/var(--tw-bg-opacity,1))}.hover\\:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity,1))}.hover\\:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity,1))}.hover\\:bg-green-100:hover{--tw-bg-opacity:1;background-color:rgb(220 252 231/var(--tw-bg-opacity,1))}.hover\\:bg-neutral-100:hover{--tw-bg-opacity:1;background-color:rgb(245 245 245/var(--tw-bg-opacity,1))}.hover\\:bg-neutral-200:hover{--tw-bg-opacity:1;background-color:rgb(229 229 229/var(--tw-bg-opacity,1))}.hover\\:bg-neutral-50:hover{--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity,1))}.hover\\:bg-neutral-700:hover{--tw-bg-opacity:1;background-color:rgb(64 64 64/var(--tw-bg-opacity,1))}.hover\\:bg-neutral-800:hover{--tw-bg-opacity:1;background-color:rgb(38 38 38/var(--tw-bg-opacity,1))}.hover\\:bg-orange-100:hover{--tw-bg-opacity:1;background-color:rgb(255 237 213/var(--tw-bg-opacity,1))}.hover\\:bg-red-600:hover{--tw-bg-opacity:1;background-color:rgb(220 38 38/var(--tw-bg-opacity,1))}.hover\\:bg-white\\/20:hover{background-color:rgba(255,255,255,.2)}.hover\\:fill-fantasy-text:hover{fill:#e8eaed}.hover\\:text-blue-700:hover{--tw-text-opacity:1;color:rgb(29 78 216/var(--tw-text-opacity,1))}.hover\\:text-fantasy-accent:hover{--tw-text-opacity:1;color:rgb(255 165 0/var(--tw-text-opacity,1))}.hover\\:text-fantasy-text:hover{--tw-text-opacity:1;color:rgb(232 234 237/var(--tw-text-opacity,1))}.hover\\:text-neutral-50:hover{--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.hover\\:text-neutral-900:hover{--tw-text-opacity:1;color:rgb(23 23 23/var(--tw-text-opacity,1))}.hover\\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.hover\\:shadow-lg:hover,.hover\\:shadow-xl:hover{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.hover\\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.hover\\:shadow-fantasy-accent\\/20:hover{--tw-shadow-color:#ffa50033;--tw-shadow:var(--tw-shadow-colored)}.hover\\:shadow-fantasy-accent\\/40:hover{--tw-shadow-color:#ffa50066;--tw-shadow:var(--tw-shadow-colored)}.hover\\:shadow-fantasy-dark\\/40:hover{--tw-shadow-color:#1a233266;--tw-shadow:var(--tw-shadow-colored)}.focus\\:z-10:focus{z-index:10}.focus\\:border-blue-500:focus{--tw-border-opacity:1;border-color:rgb(59 130 246/var(--tw-border-opacity,1))}.focus\\:border-fantasy-accent:focus{--tw-border-opacity:1;border-color:rgb(255 165 0/var(--tw-border-opacity,1))}.focus\\:border-red-500:focus{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity,1))}.focus\\:text-blue-700:focus{--tw-text-opacity:1;color:rgb(29 78 216/var(--tw-text-opacity,1))}.focus\\:outline-none:focus{outline:2px solid #0000;outline-offset:2px}.focus\\:ring-1:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.focus\\:ring-1:focus,.focus\\:ring-2:focus{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.focus\\:ring-4:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\\:ring-blue-300:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(147 197 253/var(--tw-ring-opacity,1))}.focus\\:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246/var(--tw-ring-opacity,1))}.focus\\:ring-fantasy-accent:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(255 165 0/var(--tw-ring-opacity,1))}.focus\\:ring-fantasy-accent-dark:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(255 140 0/var(--tw-ring-opacity,1))}.focus\\:ring-gray-100:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(243 244 246/var(--tw-ring-opacity,1))}.focus\\:ring-neutral-100:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(245 245 245/var(--tw-ring-opacity,1))}.focus\\:ring-neutral-300:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(212 212 212/var(--tw-ring-opacity,1))}.focus\\:ring-red-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(239 68 68/var(--tw-ring-opacity,1))}.focus\\:ring-offset-2:focus{--tw-ring-offset-width:2px}.group:hover .group-hover\\:rotate-45{--tw-rotate:45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\\:bg-\\[length\\:100\\%_2px\\]{background-size:100% 2px}.group:hover .group-hover\\:text-fantasy-light{--tw-text-opacity:1;color:rgb(30 42 58/var(--tw-text-opacity,1))}.group:hover .group-hover\\:text-green-700{--tw-text-opacity:1;color:rgb(21 128 61/var(--tw-text-opacity,1))}.group:hover .group-hover\\:text-neutral-400{--tw-text-opacity:1;color:rgb(163 163 163/var(--tw-text-opacity,1))}.group:hover .group-hover\\:text-neutral-700{--tw-text-opacity:1;color:rgb(64 64 64/var(--tw-text-opacity,1))}.group:hover .group-hover\\:text-neutral-900{--tw-text-opacity:1;color:rgb(23 23 23/var(--tw-text-opacity,1))}.group:hover .group-hover\\:text-orange-700{--tw-text-opacity:1;color:rgb(194 65 12/var(--tw-text-opacity,1))}.group:hover .group-hover\\:text-red-700{--tw-text-opacity:1;color:rgb(185 28 28/var(--tw-text-opacity,1))}@media (min-width:640px){.sm\\:ml-64{margin-left:16rem}.sm\\:mr-64{margin-right:16rem}.sm\\:hidden{display:none}.sm\\:h-12{height:3rem}.sm\\:w-64{width:16rem}.sm\\:translate-x-0{--tw-translate-x:0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}}@media (min-width:768px){.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.md\\:bg-transparent{background-color:initial}.md\\:p-0{padding:0}.md\\:p-5{padding:1.25rem}.md\\:text-base{font-size:1rem;line-height:1.5rem}.md\\:text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216/var(--tw-text-opacity,1))}}@media (min-width:1024px){.lg\\:mr-64{margin-right:16rem}.lg\\:grid{display:grid}.lg\\:w-\\[calc\\(100vw-36rem\\)\\]{width:calc(100vw - 36rem)}.lg\\:-translate-x-0{--tw-translate-x:-0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:p-10{padding:2.5rem}.lg\\:text-lg{font-size:1.125rem;line-height:1.75rem}}@media (min-width:1280px){.xl\\:flex{display:flex}.xl\\:grid{display:grid}.xl\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}.rtl\\:rotate-180:where([dir=rtl],[dir=rtl] *){--tw-rotate:180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rtl\\:space-x-reverse:where([dir=rtl],[dir=rtl] *)>:not([hidden])~:not([hidden]){--tw-space-x-reverse:1}.rtl\\:text-right:where([dir=rtl],[dir=rtl] *){text-align:right}@media (prefers-color-scheme:dark){.dark\\:border-gray-600{--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity,1))}.dark\\:border-green-600{--tw-border-opacity:1;border-color:rgb(22 163 74/var(--tw-border-opacity,1))}.dark\\:border-neutral-600{--tw-border-opacity:1;border-color:rgb(82 82 82/var(--tw-border-opacity,1))}.dark\\:border-neutral-700{--tw-border-opacity:1;border-color:rgb(64 64 64/var(--tw-border-opacity,1))}.dark\\:border-orange-600{--tw-border-opacity:1;border-color:rgb(234 88 12/var(--tw-border-opacity,1))}.dark\\:border-red-500{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity,1))}.dark\\:bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235/var(--tw-bg-opacity,1))}.dark\\:bg-fantasy-accent{--tw-bg-opacity:1;background-color:rgb(255 165 0/var(--tw-bg-opacity,1))}.dark\\:bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity,1))}.dark\\:bg-green-800{--tw-bg-opacity:1;background-color:rgb(22 101 52/var(--tw-bg-opacity,1))}.dark\\:bg-neutral-500{--tw-bg-opacity:1;background-color:rgb(115 115 115/var(--tw-bg-opacity,1))}.dark\\:bg-neutral-700{--tw-bg-opacity:1;background-color:rgb(64 64 64/var(--tw-bg-opacity,1))}.dark\\:bg-neutral-800{--tw-bg-opacity:1;background-color:rgb(38 38 38/var(--tw-bg-opacity,1))}.dark\\:bg-neutral-950{--tw-bg-opacity:1;background-color:rgb(10 10 10/var(--tw-bg-opacity,1))}.dark\\:bg-orange-800{--tw-bg-opacity:1;background-color:rgb(154 52 18/var(--tw-bg-opacity,1))}.dark\\:text-blue-300{--tw-text-opacity:1;color:rgb(147 197 253/var(--tw-text-opacity,1))}.dark\\:text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity,1))}.dark\\:text-green-400{--tw-text-opacity:1;color:rgb(74 222 128/var(--tw-text-opacity,1))}.dark\\:text-neutral-200{--tw-text-opacity:1;color:rgb(229 229 229/var(--tw-text-opacity,1))}.dark\\:text-neutral-300{--tw-text-opacity:1;color:rgb(212 212 212/var(--tw-text-opacity,1))}.dark\\:text-neutral-400{--tw-text-opacity:1;color:rgb(163 163 163/var(--tw-text-opacity,1))}.dark\\:text-neutral-50{--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.dark\\:text-orange-400{--tw-text-opacity:1;color:rgb(251 146 60/var(--tw-text-opacity,1))}.dark\\:text-red-400{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity,1))}.dark\\:text-red-500{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity,1))}.dark\\:text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.dark\\:placeholder-red-500::placeholder{--tw-placeholder-opacity:1;color:rgb(239 68 68/var(--tw-placeholder-opacity,1))}.dark\\:placeholder\\:text-neutral-300::placeholder{--tw-text-opacity:1;color:rgb(212 212 212/var(--tw-text-opacity,1))}.dark\\:hover\\:border-neutral-600:hover{--tw-border-opacity:1;border-color:rgb(82 82 82/var(--tw-border-opacity,1))}.dark\\:hover\\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity,1))}.dark\\:hover\\:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity,1))}.dark\\:hover\\:bg-green-700:hover{--tw-bg-opacity:1;background-color:rgb(21 128 61/var(--tw-bg-opacity,1))}.dark\\:hover\\:bg-neutral-200:hover{--tw-bg-opacity:1;background-color:rgb(229 229 229/var(--tw-bg-opacity,1))}.dark\\:hover\\:bg-neutral-600:hover{--tw-bg-opacity:1;background-color:rgb(82 82 82/var(--tw-bg-opacity,1))}.dark\\:hover\\:bg-neutral-700:hover{--tw-bg-opacity:1;background-color:rgb(64 64 64/var(--tw-bg-opacity,1))}.dark\\:hover\\:bg-orange-700:hover{--tw-bg-opacity:1;background-color:rgb(194 65 12/var(--tw-bg-opacity,1))}.dark\\:hover\\:text-neutral-50:hover{--tw-text-opacity:1;color:rgb(250 250 250/var(--tw-text-opacity,1))}.dark\\:hover\\:text-neutral-950:hover{--tw-text-opacity:1;color:rgb(10 10 10/var(--tw-text-opacity,1))}.dark\\:hover\\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.dark\\:focus\\:ring-blue-800:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(30 64 175/var(--tw-ring-opacity,1))}.dark\\:focus\\:ring-gray-700:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(55 65 81/var(--tw-ring-opacity,1))}.dark\\:focus\\:ring-neutral-400:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(163 163 163/var(--tw-ring-opacity,1))}.dark\\:focus\\:ring-neutral-700:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(64 64 64/var(--tw-ring-opacity,1))}.group:hover .dark\\:group-hover\\:text-green-300{--tw-text-opacity:1;color:rgb(134 239 172/var(--tw-text-opacity,1))}.group:hover .dark\\:group-hover\\:text-neutral-300{--tw-text-opacity:1;color:rgb(212 212 212/var(--tw-text-opacity,1))}.group:hover .dark\\:group-hover\\:text-neutral-500{--tw-text-opacity:1;color:rgb(115 115 115/var(--tw-text-opacity,1))}.group:hover .dark\\:group-hover\\:text-orange-300{--tw-text-opacity:1;color:rgb(253 186 116/var(--tw-text-opacity,1))}.group:hover .dark\\:group-hover\\:text-red-300{--tw-text-opacity:1;color:rgb(252 165 165/var(--tw-text-opacity,1))}.group:hover .dark\\:group-hover\\:text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}}@media (min-width:768px){@media (prefers-color-scheme:dark){.md\\:dark\\:text-blue-500{--tw-text-opacity:1;color:rgb(59 130 246/var(--tw-text-opacity,1))}}}.react-flow{direction:ltr;--xy-edge-stroke-default:#b1b1b7;--xy-edge-stroke-width-default:1;--xy-edge-stroke-selected-default:#555;--xy-connectionline-stroke-default:#b1b1b7;--xy-connectionline-stroke-width-default:1;--xy-attribution-background-color-default:#ffffff80;--xy-minimap-background-color-default:#fff;--xy-minimap-mask-background-color-default:#f0f0f099;--xy-minimap-mask-stroke-color-default:#0000;--xy-minimap-mask-stroke-width-default:1;--xy-minimap-node-background-color-default:#e2e2e2;--xy-minimap-node-stroke-color-default:#0000;--xy-minimap-node-stroke-width-default:2;--xy-background-color-default:#0000;--xy-background-pattern-dots-color-default:#91919a;--xy-background-pattern-lines-color-default:#eee;--xy-background-pattern-cross-color-default:#e2e2e2;background-color:var(--xy-background-color,var(--xy-background-color-default));--xy-node-color-default:inherit;--xy-node-border-default:1px solid #1a192b;--xy-node-background-color-default:#fff;--xy-node-group-background-color-default:#f0f0f040;--xy-node-boxshadow-hover-default:0 1px 4px 1px #00000014;--xy-node-boxshadow-selected-default:0 0 0 .5px #1a192b;--xy-node-border-radius-default:3px;--xy-handle-background-color-default:#1a192b;--xy-handle-border-color-default:#fff;--xy-selection-background-color-default:#0059dc14;--xy-selection-border-default:1px dotted #0059dccc;--xy-controls-button-background-color-default:#fefefe;--xy-controls-button-background-color-hover-default:#f4f4f4;--xy-controls-button-color-default:inherit;--xy-controls-button-color-hover-default:inherit;--xy-controls-button-border-color-default:#eee;--xy-controls-box-shadow-default:0 0 2px 1px #00000014;--xy-edge-label-background-color-default:#fff;--xy-edge-label-color-default:inherit;--xy-resize-background-color-default:#3367d9}.react-flow.dark{--xy-edge-stroke-default:#3e3e3e;--xy-edge-stroke-width-default:1;--xy-edge-stroke-selected-default:#727272;--xy-connectionline-stroke-default:#b1b1b7;--xy-connectionline-stroke-width-default:1;--xy-attribution-background-color-default:#96969640;--xy-minimap-background-color-default:#141414;--xy-minimap-mask-background-color-default:#3c3c3c99;--xy-minimap-mask-stroke-color-default:#0000;--xy-minimap-mask-stroke-width-default:1;--xy-minimap-node-background-color-default:#2b2b2b;--xy-minimap-node-stroke-color-default:#0000;--xy-minimap-node-stroke-width-default:2;--xy-background-color-default:#141414;--xy-background-pattern-dots-color-default:#777;--xy-background-pattern-lines-color-default:#777;--xy-background-pattern-cross-color-default:#777;--xy-node-color-default:#f8f8f8;--xy-node-border-default:1px solid #3c3c3c;--xy-node-background-color-default:#1e1e1e;--xy-node-group-background-color-default:#f0f0f040;--xy-node-boxshadow-hover-default:0 1px 4px 1px #ffffff14;--xy-node-boxshadow-selected-default:0 0 0 .5px #999;--xy-handle-background-color-default:#bebebe;--xy-handle-border-color-default:#1e1e1e;--xy-selection-background-color-default:#c8c8dc14;--xy-selection-border-default:1px dotted #c8c8dccc;--xy-controls-button-background-color-default:#2b2b2b;--xy-controls-button-background-color-hover-default:#3e3e3e;--xy-controls-button-color-default:#f8f8f8;--xy-controls-button-color-hover-default:#fff;--xy-controls-button-border-color-default:#5b5b5b;--xy-controls-box-shadow-default:0 0 2px 1px #00000014;--xy-edge-label-background-color-default:#141414;--xy-edge-label-color-default:#f8f8f8}.react-flow__background{background-color:var(--xy-background-color,var(--xy-background-color-props,var(--xy-background-color-default)));pointer-events:none;z-index:-1}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__pane.draggable{cursor:grab}.react-flow__pane.dragging{cursor:grabbing}.react-flow__pane.selection{cursor:pointer}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow__edge-path{stroke:var(--xy-edge-stroke,var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width,var(--xy-edge-stroke-width-default));fill:none}.react-flow__connection-path{stroke:var(--xy-connectionline-stroke,var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width,var(--xy-connectionline-stroke-width-default));fill:none}.react-flow .react-flow__edges{position:absolute}.react-flow .react-flow__edges svg{overflow:visible;pointer-events:none;position:absolute}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.selectable{cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selectable:focus .react-flow__edge-path,.react-flow__edge.selectable:focus-visible .react-flow__edge-path,.react-flow__edge.selected .react-flow__edge-path{stroke:var(--xy-edge-stroke-selected,var(--xy-edge-stroke-selected-default))}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.react-flow__connectionline{overflow:visible;position:absolute;z-index:1001}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;cursor:default;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;user-select:none}.react-flow__node.selectable{cursor:pointer}.react-flow__node.draggable{cursor:grab;pointer-events:all}.react-flow__node.draggable.dragging{cursor:grabbing}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{background-color:var(--xy-handle-background-color,var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color,var(--xy-handle-border-color-default));border-radius:100%;height:6px;min-height:5px;min-width:5px;pointer-events:none;position:absolute;width:6px}.react-flow__handle.connectingfrom{pointer-events:all}.react-flow__handle.connectionindicator{cursor:crosshair;pointer-events:all}.react-flow__handle-bottom{bottom:0;left:50%;top:auto;transform:translate(-50%,50%)}.react-flow__handle-top{left:50%;top:0;transform:translate(-50%,-50%)}.react-flow__handle-left{left:0;top:50%;transform:translate(-50%,-50%)}.react-flow__handle-right{right:0;top:50%;transform:translate(50%,-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{margin:15px;position:absolute;z-index:5}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.bottom.center,.react-flow__panel.top.center{left:50%;transform:translate(-50%)}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.left.center,.react-flow__panel.right.center{top:50%;transform:translateY(-50%)}.react-flow__attribution{background:var(--xy-attribution-background-color,var(--xy-attribution-background-color-default));font-size:10px;margin:0;padding:2px 3px}.react-flow__attribution a{color:#999;text-decoration:none}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{pointer-events:none}.react-flow__edgelabel-renderer,.react-flow__viewport-portal{height:100%;left:0;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:100%}.react-flow__minimap{background:var( --xy-minimap-background-color-props,var(--xy-minimap-background-color,var(--xy-minimap-background-color-default)) )}.react-flow__minimap-svg{display:block}.react-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props,var(--xy-minimap-mask-background-color,var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props,var(--xy-minimap-mask-stroke-color,var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props,var(--xy-minimap-mask-stroke-width,var(--xy-minimap-mask-stroke-width-default)) )}.react-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props,var(--xy-minimap-node-background-color,var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props,var(--xy-minimap-node-stroke-color,var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props,var(--xy-minimap-node-stroke-width,var(--xy-minimap-node-stroke-width-default)) )}.react-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props,var(--xy-background-pattern-color,var(--xy-background-pattern-dots-color-default)) )}.react-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props,var(--xy-background-pattern-color,var(--xy-background-pattern-lines-color-default)) )}.react-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props,var(--xy-background-pattern-color,var(--xy-background-pattern-cross-color-default)) )}.react-flow__controls{box-shadow:var(--xy-controls-box-shadow,var(--xy-controls-box-shadow-default));display:flex;flex-direction:column}.react-flow__controls.horizontal{flex-direction:row}.react-flow__controls-button{align-items:center;background:var(--xy-controls-button-background-color,var(--xy-controls-button-background-color-default));border:none;border-bottom:1px solid var( --xy-controls-button-border-color-props,var(--xy-controls-button-border-color,var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props,var(--xy-controls-button-color,var(--xy-controls-button-color-default)) );cursor:pointer;display:flex;height:26px;justify-content:center;padding:4px;-webkit-user-select:none;user-select:none;width:26px}.react-flow__controls-button svg{max-height:12px;max-width:12px;width:100%;fill:currentColor}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background-color:var(--xy-node-background-color,var(--xy-node-background-color-default));border:var(--xy-node-border,var(--xy-node-border-default));border-radius:var(--xy-node-border-radius,var(--xy-node-border-radius-default));color:var(--xy-node-color,var(--xy-node-color-default));font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover,var(--xy-node-boxshadow-hover-default))}.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible,.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected,var(--xy-node-boxshadow-selected-default))}.react-flow__node-group{background-color:var(--xy-node-group-background-color,var(--xy-node-group-background-color-default))}.react-flow__nodesselection-rect,.react-flow__selection{background:var(--xy-selection-background-color,var(--xy-selection-background-color-default));border:var(--xy-selection-border,var(--xy-selection-border-default))}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props,var(--xy-controls-button-background-color-hover,var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props,var(--xy-controls-button-color-hover,var(--xy-controls-button-color-hover-default)) )}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__controls-button:last-child{border-bottom:none}.react-flow__controls.horizontal .react-flow__controls-button{border-bottom:none;border-right:1px solid var( --xy-controls-button-border-color-props,var(--xy-controls-button-border-color,var(--xy-controls-button-border-color-default)) )}.react-flow__controls.horizontal .react-flow__controls-button:last-child{border-right:none}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.bottom,.react-flow__resize-control.top{cursor:ns-resize}.react-flow__resize-control.bottom.right,.react-flow__resize-control.top.left{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{background-color:var(--xy-resize-background-color,var(--xy-resize-background-color-default));border:1px solid #fff;border-radius:1px;height:4px;transform:translate(-50%,-50%);width:4px}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.bottom.left,.react-flow__resize-control.handle.top.left{left:0}.react-flow__resize-control.handle.bottom.right,.react-flow__resize-control.handle.top.right{left:100%}.react-flow__resize-control.line{border-color:var(--xy-resize-background-color,var(--xy-resize-background-color-default));border-style:solid;border-width:0}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{height:100%;top:0;transform:translate(-50%);width:1px}.react-flow__resize-control.line.left{border-left-width:1px;left:0}.react-flow__resize-control.line.right{border-right-width:1px;left:100%}.react-flow__resize-control.line.bottom,.react-flow__resize-control.line.top{height:1px;left:0;transform:translateY(-50%);width:100%}.react-flow__resize-control.line.top{border-top-width:1px;top:0}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.react-flow__edge-textbg{fill:var(--xy-edge-label-background-color,var(--xy-edge-label-background-color-default))}.react-flow__edge-text{fill:var(--xy-edge-label-color,var(--xy-edge-label-color-default))}\n/*$vite$:1*/',document.head.appendChild(r);var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var l={exports:{}},c={},u={exports:{}},d={},f=Symbol.for("react.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),k=Symbol.iterator;var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,j={};function C(e,t,n){this.props=e,this.context=t,this.refs=j,this.updater=n||S}function N(){}function A(e,t,n){this.props=e,this.context=t,this.refs=j,this.updater=n||S}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},N.prototype=C.prototype;var O=A.prototype=new N;O.constructor=A,E(O,C.prototype),O.isPureReactComponent=!0;var R=Array.isArray,P=Object.prototype.hasOwnProperty,T={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)P.call(t,r)&&!I.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:f,type:e,key:i,ref:a,props:o,_owner:T.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===f}var L=/\/+/g;function B(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function F(e,t,n,r,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case f:case h:a=!0}}if(a)return o=o(a=e),e=""===r?"."+B(a,0):r,R(o)?(n="",null!=e&&(n=e.replace(L,"$&/")+"/"),F(o,t,n,"",(function(e){return e}))):null!=o&&(D(o)&&(o=function(e,t){return{$$typeof:f,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(L,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=""===r?".":r+":",R(e))for(var s=0;s<e.length;s++){var l=r+B(i=e[s],s);a+=F(i,t,n,l,o)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=k&&e[k]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),s=0;!(i=e.next()).done;)a+=F(i=i.value,t,n,l=r+B(i,s++),o);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function z(e,t,n){if(null==e)return e;var r=[],o=0;return F(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function $(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var U={current:null},W={transition:null},H={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:W,ReactCurrentOwner:T};function V(){throw Error("act(...) is not supported in production builds of React.")}d.Children={map:z,forEach:function(e,t,n){z(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return z(e,(function(){t++})),t},toArray:function(e){return z(e,(function(e){return e}))||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},d.Component=C,d.Fragment=p,d.Profiler=m,d.PureComponent=A,d.StrictMode=g,d.Suspense=w,d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,d.act=V,d.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=E({},e.props),o=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=T.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)P.call(t,l)&&!I.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:f,type:e.type,key:o,ref:i,props:r,_owner:a}},d.createContext=function(e){return(e={$$typeof:y,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:v,_context:e},e.Consumer=e},d.createElement=M,d.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},d.createRef=function(){return{current:null}},d.forwardRef=function(e){return{$$typeof:b,render:e}},d.isValidElement=D,d.lazy=function(e){return{$$typeof:_,_payload:{_status:-1,_result:e},_init:$}},d.memo=function(e,t){return{$$typeof:x,type:e,compare:void 0===t?null:t}},d.startTransition=function(e){var t=W.transition;W.transition={};try{e()}finally{W.transition=t}},d.unstable_act=V,d.useCallback=function(e,t){return U.current.useCallback(e,t)},d.useContext=function(e){return U.current.useContext(e)},d.useDebugValue=function(){},d.useDeferredValue=function(e){return U.current.useDeferredValue(e)},d.useEffect=function(e,t){return U.current.useEffect(e,t)},d.useId=function(){return U.current.useId()},d.useImperativeHandle=function(e,t,n){return U.current.useImperativeHandle(e,t,n)},d.useInsertionEffect=function(e,t){return U.current.useInsertionEffect(e,t)},d.useLayoutEffect=function(e,t){return U.current.useLayoutEffect(e,t)},d.useMemo=function(e,t){return U.current.useMemo(e,t)},d.useReducer=function(e,t,n){return U.current.useReducer(e,t,n)},d.useRef=function(e){return U.current.useRef(e)},d.useState=function(e){return U.current.useState(e)},d.useSyncExternalStore=function(e,t,n){return U.current.useSyncExternalStore(e,t,n)},d.useTransition=function(){return U.current.useTransition()},d.version="18.3.1",u.exports=d;var q=u.exports;const K=a(q),Z=o({__proto__:null,default:K},[q]);
/**
       * @license React
       * react-jsx-runtime.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */
var Y=q,G=Symbol.for("react.element"),X=Symbol.for("react.fragment"),J=Object.prototype.hasOwnProperty,Q=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ee={key:!0,ref:!0,__self:!0,__source:!0};function te(e,t,n){var r,o={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)J.call(t,r)&&!ee.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:G,type:e,key:i,ref:a,props:o,_owner:Q.current}}c.Fragment=X,c.jsx=te,c.jsxs=te,l.exports=c;var ne=l.exports,re={exports:{}},oe={},ie={exports:{}},ae={};
/**
       * @license React
       * scheduler.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var o=n(c);null!==o;){if(null===o.callback)r(c);else{if(!(o.startTime<=e))break;r(c),o.sortIndex=o.expirationTime,t(l,o)}o=n(c)}}function w(e){if(g=!1,b(e),!p)if(null!==n(l))p=!0,P(x);else{var t=n(c);null!==t&&T(w,t.startTime-e)}}function x(t,o){p=!1,g&&(g=!1,v(E),E=-1),h=!0;var i=f;try{for(b(o),d=n(l);null!==d&&(!(d.expirationTime>o)||t&&!N());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=o);o=e.unstable_now(),"function"==typeof s?d.callback=s:d===n(l)&&r(l),b(o)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var m=n(c);null!==m&&T(w,m.startTime-o),u=!1}return u}finally{d=null,f=i,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,S=null,E=-1,j=5,C=-1;function N(){return!(e.unstable_now()-C<j)}function A(){if(null!==S){var t=e.unstable_now();C=t;var n=!0;try{n=S(!0,t)}finally{n?_():(k=!1,S=null)}}else k=!1}if("function"==typeof y)_=function(){y(A)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=A,_=function(){R.postMessage(null)}}else _=function(){m(A,0)};function P(e){S=e,k||(k=!0,_())}function T(t,n){E=m((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,P(x))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,o,i){var a=e.unstable_now();switch("object"==typeof i&&null!==i?i="number"==typeof(i=i.delay)&&0<i?a+i:a:i=a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:u++,callback:o,priorityLevel:r,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(g?(v(E),E=-1):g=!0,T(w,i-a))):(r.sortIndex=s,t(l,r),p||h||(p=!0,P(x))),r},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}(ae),ie.exports=ae;var se=ie.exports,le=q,ce=se;
/**
       * @license React
       * react-dom.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var de=new Set,fe={};function he(e,t){pe(e,t),pe(e+"Capture",t)}function pe(e,t){for(fe[e]=t,e=0;e<t.length;e++)de.add(t[e])}var ge=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),me=Object.prototype.hasOwnProperty,ve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ye={},be={};function we(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){xe[e]=new we(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];xe[t]=new we(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){xe[e]=new we(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){xe[e]=new we(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){xe[e]=new we(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){xe[e]=new we(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){xe[e]=new we(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){xe[e]=new we(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){xe[e]=new we(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _e=/[\-:]([a-z])/g;function ke(e){return e[1].toUpperCase()}function Se(e,t,n,r){var o=xe.hasOwnProperty(t)?xe[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!me.call(be,e)||!me.call(ye,e)&&(ve.test(e)?be[e]=!0:(ye[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_e,ke);xe[t]=new we(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_e,ke);xe[t]=new we(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_e,ke);xe[t]=new we(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){xe[e]=new we(e,1,!1,e.toLowerCase(),null,!1,!1)})),xe.xlinkHref=new we("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){xe[e]=new we(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Ee=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,je=Symbol.for("react.element"),Ce=Symbol.for("react.portal"),Ne=Symbol.for("react.fragment"),Ae=Symbol.for("react.strict_mode"),Oe=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),Fe=Symbol.iterator;function ze(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Fe&&e[Fe]||e["@@iterator"])?e:null}var $e,Ue=Object.assign;function We(e){if(void 0===$e)try{throw Error()}catch(cU){var t=cU.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||""}return"\n"+$e+e}var He=!1;function Ve(e,t){if(!e||He)return"";He=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(oU){var r=oU}Reflect.construct(e,[],t)}else{try{t.call()}catch(oU){r=oU}e.call(t.prototype)}else{try{throw Error()}catch(oU){r=oU}e()}}catch(oU){if(oU&&r&&"string"==typeof oU.stack){for(var o=oU.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{He=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?We(e):""}function qe(e){switch(e.tag){case 5:return We(e.type);case 16:return We("Lazy");case 13:return We("Suspense");case 19:return We("SuspenseList");case 0:case 2:case 15:return e=Ve(e.type,!1);case 11:return e=Ve(e.type.render,!1);case 1:return e=Ve(e.type,!0);default:return""}}function Ke(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ne:return"Fragment";case Ce:return"Portal";case Oe:return"Profiler";case Ae:return"StrictMode";case Ie:return"Suspense";case Me:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Pe:return(e.displayName||"Context")+".Consumer";case Re:return(e._context.displayName||"Context")+".Provider";case Te:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case De:return null!==(t=e.displayName||null)?t:Ke(e.type)||"Memo";case Le:t=e._payload,e=e._init;try{return Ke(e(t))}catch(cU){}}return null}function Ze(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ke(t);case 8:return t===Ae?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Ye(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ge(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Xe(e){e._valueTracker||(e._valueTracker=function(e){var t=Ge(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ge(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Qe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(gU){return e.body}}function et(e,t){var n=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function tt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function nt(e,t){null!=(t=t.checked)&&Se(e,"checked",t,!1)}function rt(e,t){nt(e,t);var n=Ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?it(e,t.type,n):t.hasOwnProperty("defaultValue")&&it(e,t.type,Ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ot(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function it(e,t,n){"number"===t&&Qe(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var at=Array.isArray;function st(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ye(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function lt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ue(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ct(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ue(92));if(at(n)){if(1<n.length)throw Error(ue(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ye(n)}}function ut(e,t){var n=Ye(t.value),r=Ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function dt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ft(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ft(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pt,gt=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((pt=pt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function mt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];function bt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||vt.hasOwnProperty(e)&&vt[e]?(""+t).trim():t+"px"}function wt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=bt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(vt).forEach((function(e){yt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vt[t]=vt[e]}))}));var xt=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(e,t){if(t){if(xt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ue(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ue(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ue(62))}}function kt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=null;function Et(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,Ct=null,Nt=null;function At(e){if(e=Si(e)){if("function"!=typeof jt)throw Error(ue(280));var t=e.stateNode;t&&(t=ji(t),jt(e.stateNode,e.type,t))}}function Ot(e){Ct?Nt?Nt.push(e):Nt=[e]:Ct=e}function Rt(){if(Ct){var e=Ct,t=Nt;if(Nt=Ct=null,At(e),t)for(e=0;e<t.length;e++)At(t[e])}}function Pt(e,t){return e(t)}function Tt(){}var It=!1;function Mt(e,t,n){if(It)return e(t,n);It=!0;try{return Pt(e,t,n)}finally{It=!1,(null!==Ct||null!==Nt)&&(Tt(),Rt())}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=ji(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ue(231,t,typeof n));return n}var Lt=!1;if(ge)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(rU){Lt=!1}function Ft(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(pU){this.onError(pU)}}var zt=!1,$t=null,Ut=!1,Wt=null,Ht={onError:function(e){zt=!0,$t=e}};function Vt(e,t,n,r,o,i,a,s,l){zt=!1,$t=null,Ft.apply(Ht,arguments)}function qt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Kt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Zt(e){if(qt(e)!==e)throw Error(ue(188))}function Yt(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=qt(e)))throw Error(ue(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Zt(o),e;if(i===r)return Zt(o),t;i=i.sibling}throw Error(ue(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(3!==n.tag)throw Error(ue(188));return n.stateNode.current===n?e:t}(e),null!==e?Gt(e):null}function Gt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Gt(e);if(null!==t)return t;e=e.sibling}return null}var Xt=ce.unstable_scheduleCallback,Jt=ce.unstable_cancelCallback,Qt=ce.unstable_shouldYield,en=ce.unstable_requestPaint,tn=ce.unstable_now,nn=ce.unstable_getCurrentPriorityLevel,rn=ce.unstable_ImmediatePriority,on=ce.unstable_UserBlockingPriority,an=ce.unstable_NormalPriority,sn=ce.unstable_LowPriority,ln=ce.unstable_IdlePriority,cn=null,un=null;var dn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(fn(e)/hn|0)|0},fn=Math.log,hn=Math.LN2;var pn=64,gn=4194304;function mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=mn(s):0!==(i&=a)&&(r=mn(i))}else 0!==(a=n&~o)?r=mn(a):0!==i&&(r=mn(i));if(0===r)return 0;if(0!==t&&t!==r&&!(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&4194240&i))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-dn(t)),r|=e[n],t&=~o;return r}function yn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function bn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function wn(){var e=pn;return!(4194240&(pn<<=1))&&(pn=64),e}function xn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _n(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-dn(t)]=n}function kn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Sn=0;function En(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var jn,Cn,Nn,An,On,Rn=!1,Pn=[],Tn=null,In=null,Mn=null,Dn=new Map,Ln=new Map,Bn=[],Fn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zn(e,t){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(t.pointerId)}}function $n(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Si(t))&&Cn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Un(e){var t=ki(e.target);if(null!==t){var n=qt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Kt(n)))return e.blockedOn=t,void On(e.priority,(function(){Nn(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Wn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=er(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Si(n))&&Cn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);St=r,n.target.dispatchEvent(r),St=null,t.shift()}return!0}function Hn(e,t,n){Wn(e)&&n.delete(t)}function Vn(){Rn=!1,null!==Tn&&Wn(Tn)&&(Tn=null),null!==In&&Wn(In)&&(In=null),null!==Mn&&Wn(Mn)&&(Mn=null),Dn.forEach(Hn),Ln.forEach(Hn)}function qn(e,t){e.blockedOn===t&&(e.blockedOn=null,Rn||(Rn=!0,ce.unstable_scheduleCallback(ce.unstable_NormalPriority,Vn)))}function Kn(e){function t(t){return qn(t,e)}if(0<Pn.length){qn(Pn[0],e);for(var n=1;n<Pn.length;n++){var r=Pn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tn&&qn(Tn,e),null!==In&&qn(In,e),null!==Mn&&qn(Mn,e),Dn.forEach(t),Ln.forEach(t),n=0;n<Bn.length;n++)(r=Bn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Bn.length&&null===(n=Bn[0]).blockedOn;)Un(n),null===n.blockedOn&&Bn.shift()}var Zn=Ee.ReactCurrentBatchConfig,Yn=!0;function Gn(e,t,n,r){var o=Sn,i=Zn.transition;Zn.transition=null;try{Sn=1,Jn(e,t,n,r)}finally{Sn=o,Zn.transition=i}}function Xn(e,t,n,r){var o=Sn,i=Zn.transition;Zn.transition=null;try{Sn=4,Jn(e,t,n,r)}finally{Sn=o,Zn.transition=i}}function Jn(e,t,n,r){if(Yn){var o=er(e,t,n,r);if(null===o)Yo(e,t,r,Qn,n),zn(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Tn=$n(Tn,e,t,n,r,o),!0;case"dragenter":return In=$n(In,e,t,n,r,o),!0;case"mouseover":return Mn=$n(Mn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Dn.set(i,$n(Dn.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ln.set(i,$n(Ln.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(zn(e,r),4&t&&-1<Fn.indexOf(e)){for(;null!==o;){var i=Si(o);if(null!==i&&jn(i),null===(i=er(e,t,n,r))&&Yo(e,t,r,Qn,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Yo(e,t,r,null,n)}}var Qn=null;function er(e,t,n,r){if(Qn=null,null!==(e=ki(e=Et(r))))if(null===(t=qt(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Kt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qn=e,null}function tr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nn()){case rn:return 1;case on:return 4;case an:case sn:return 16;case ln:return 536870912;default:return 16}default:return 16}}var nr=null,rr=null,or=null;function ir(){if(or)return or;var e,t,n=rr,r=n.length,o="value"in nr?nr.value:nr.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return or=o.slice(e,1<t?1-t:void 0)}function ar(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sr(){return!0}function lr(){return!1}function cr(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?sr:lr,this.isPropagationStopped=lr,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),t}var ur,dr,fr,hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=cr(hr),gr=Ue({},hr,{view:0,detail:0}),mr=cr(gr),vr=Ue({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fr&&(fr&&"mousemove"===e.type?(ur=e.screenX-fr.screenX,dr=e.screenY-fr.screenY):dr=ur=0,fr=e),ur)},movementY:function(e){return"movementY"in e?e.movementY:dr}}),yr=cr(vr),br=cr(Ue({},vr,{dataTransfer:0})),wr=cr(Ue({},gr,{relatedTarget:0})),xr=cr(Ue({},hr,{animationName:0,elapsedTime:0,pseudoElement:0})),_r=Ue({},hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kr=cr(_r),Sr=cr(Ue({},hr,{data:0})),Er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function Ar(){return Nr}var Or=Ue({},gr,{key:function(e){if(e.key){var t=Er[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ar(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(e){return"keypress"===e.type?ar(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ar(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rr=cr(Or),Pr=cr(Ue({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tr=cr(Ue({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar})),Ir=cr(Ue({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mr=Ue({},vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=cr(Mr),Lr=[9,13,27,32],Br=ge&&"CompositionEvent"in window,Fr=null;ge&&"documentMode"in document&&(Fr=document.documentMode);var zr=ge&&"TextEvent"in window&&!Fr,$r=ge&&(!Br||Fr&&8<Fr&&11>=Fr),Ur=String.fromCharCode(32),Wr=!1;function Hr(e,t){switch(e){case"keyup":return-1!==Lr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var qr=!1;var Kr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kr[e.type]:"textarea"===t}function Yr(e,t,n,r){Ot(r),0<(t=Xo(t,"onChange")).length&&(n=new pr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gr=null,Xr=null;function Jr(e){Wo(e,0)}function Qr(e){if(Je(Ei(e)))return e}function eo(e,t){if("change"===e)return t}var to=!1;if(ge){var no;if(ge){var ro="oninput"in document;if(!ro){var oo=document.createElement("div");oo.setAttribute("oninput","return;"),ro="function"==typeof oo.oninput}no=ro}else no=!1;to=no&&(!document.documentMode||9<document.documentMode)}function io(){Gr&&(Gr.detachEvent("onpropertychange",ao),Xr=Gr=null)}function ao(e){if("value"===e.propertyName&&Qr(Xr)){var t=[];Yr(t,Xr,e,Et(e)),Mt(Jr,t)}}function so(e,t,n){"focusin"===e?(io(),Xr=n,(Gr=t).attachEvent("onpropertychange",ao)):"focusout"===e&&io()}function lo(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qr(Xr)}function co(e,t){if("click"===e)return Qr(t)}function uo(e,t){if("input"===e||"change"===e)return Qr(t)}var fo="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ho(e,t){if(fo(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!me.call(t,o)||!fo(e[o],t[o]))return!1}return!0}function po(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function go(e,t){var n,r=po(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=po(r)}}function mo(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mo(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vo(){for(var e=window,t=Qe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(sU){n=!1}if(!n)break;t=Qe((e=t.contentWindow).document)}return t}function yo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function bo(e){var t=vo(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mo(n.ownerDocument.documentElement,n)){if(null!==r&&yo(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=go(n,i);var a=go(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wo=ge&&"documentMode"in document&&11>=document.documentMode,xo=null,_o=null,ko=null,So=!1;function Eo(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;So||null==xo||xo!==Qe(r)||("selectionStart"in(r=xo)&&yo(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ko&&ho(ko,r)||(ko=r,0<(r=Xo(_o,"onSelect")).length&&(t=new pr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xo)))}function jo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Co={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},No={},Ao={};function Oo(e){if(No[e])return No[e];if(!Co[e])return e;var t,n=Co[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ao)return No[e]=n[t];return e}ge&&(Ao=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);var Ro=Oo("animationend"),Po=Oo("animationiteration"),To=Oo("animationstart"),Io=Oo("transitionend"),Mo=new Map,Do="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(e,t){Mo.set(e,t),he(t,[e])}for(var Bo=0;Bo<Do.length;Bo++){var Fo=Do[Bo];Lo(Fo.toLowerCase(),"on"+(Fo[0].toUpperCase()+Fo.slice(1)))}Lo(Ro,"onAnimationEnd"),Lo(Po,"onAnimationIteration"),Lo(To,"onAnimationStart"),Lo("dblclick","onDoubleClick"),Lo("focusin","onFocus"),Lo("focusout","onBlur"),Lo(Io,"onTransitionEnd"),pe("onMouseEnter",["mouseout","mouseover"]),pe("onMouseLeave",["mouseout","mouseover"]),pe("onPointerEnter",["pointerout","pointerover"]),pe("onPointerLeave",["pointerout","pointerover"]),he("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),he("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),he("onBeforeInput",["compositionend","keypress","textInput","paste"]),he("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),he("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),he("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$o=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function Uo(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,a,s,l){if(Vt.apply(this,arguments),zt){if(!zt)throw Error(ue(198));var c=$t;zt=!1,$t=null,Ut||(Ut=!0,Wt=c)}}(r,t,void 0,e),e.currentTarget=null}function Wo(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Uo(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Uo(o,s,c),i=l}}}if(Ut)throw e=Wt,Ut=!1,Wt=null,e}function Ho(e,t){var n=t[wi];void 0===n&&(n=t[wi]=new Set);var r=e+"__bubble";n.has(r)||(Zo(t,e,2,!1),n.add(r))}function Vo(e,t,n){var r=0;t&&(r|=4),Zo(n,e,r,t)}var qo="_reactListening"+Math.random().toString(36).slice(2);function Ko(e){if(!e[qo]){e[qo]=!0,de.forEach((function(t){"selectionchange"!==t&&($o.has(t)||Vo(t,!1,e),Vo(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qo]||(t[qo]=!0,Vo("selectionchange",!1,t))}}function Zo(e,t,n,r){switch(tr(t)){case 1:var o=Gn;break;case 4:o=Xn;break;default:o=Jn}n=o.bind(null,t,n,e),o=void 0,!Lt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Yo(e,t,n,r,o){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=ki(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Mt((function(){var r=i,o=Et(n),a=[];e:{var s=Mo.get(e);if(void 0!==s){var l=pr,c=e;switch(e){case"keypress":if(0===ar(n))break e;case"keydown":case"keyup":l=Rr;break;case"focusin":c="focus",l=wr;break;case"focusout":c="blur",l=wr;break;case"beforeblur":case"afterblur":l=wr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=br;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tr;break;case Ro:case Po:case To:l=xr;break;case Io:l=Ir;break;case"scroll":l=mr;break;case"wheel":l=Dr;break;case"copy":case"cut":case"paste":l=kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pr}var u=!!(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var h,p=r;null!==p;){var g=(h=p).stateNode;if(5===h.tag&&null!==g&&(h=g,null!==f&&(null!=(g=Dt(p,f))&&u.push(Go(p,g,h)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===St||!(c=n.relatedTarget||n.fromElement)||!ki(c)&&!c[bi])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ki(c):null)&&(c!==(d=qt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=yr,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pr,g="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?s:Ei(l),h=null==c?s:Ei(c),(s=new u(g,p+"leave",l,n,o)).target=d,s.relatedTarget=h,g=null,ki(o)===r&&((u=new u(f,p+"enter",c,n,o)).target=h,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Jo(h))p++;for(h=0,g=f;g;g=Jo(g))h++;for(;0<p-h;)u=Jo(u),p--;for(;0<h-p;)f=Jo(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Jo(u),f=Jo(f)}u=null}else u=null;null!==l&&Qo(a,s,l,u,!1),null!==c&&null!==d&&Qo(a,d,c,u,!0)}if("select"===(l=(s=r?Ei(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=eo;else if(Zr(s))if(to)m=uo;else{m=lo;var v=so}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=co);switch(m&&(m=m(e,r))?Yr(a,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&it(s,"number",s.value)),v=r?Ei(r):window,e){case"focusin":(Zr(v)||"true"===v.contentEditable)&&(xo=v,_o=r,ko=null);break;case"focusout":ko=_o=xo=null;break;case"mousedown":So=!0;break;case"contextmenu":case"mouseup":case"dragend":So=!1,Eo(a,n,o);break;case"selectionchange":if(wo)break;case"keydown":case"keyup":Eo(a,n,o)}var y;if(Br)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qr?Hr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&($r&&"ko"!==n.locale&&(qr||"onCompositionStart"!==b?"onCompositionEnd"===b&&qr&&(y=ir()):(rr="value"in(nr=o)?nr.value:nr.textContent,qr=!0)),0<(v=Xo(r,b)).length&&(b=new Sr(b,e,null,n,o),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vr(n))&&(b.data=y))),(y=zr?function(e,t){switch(e){case"compositionend":return Vr(t);case"keypress":return 32!==t.which?null:(Wr=!0,Ur);case"textInput":return(e=t.data)===Ur&&Wr?null:e;default:return null}}(e,n):function(e,t){if(qr)return"compositionend"===e||!Br&&Hr(e,t)?(e=ir(),or=rr=nr=null,qr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $r&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xo(r,"onBeforeInput")).length&&(o=new Sr("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}Wo(a,t)}))}function Go(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xo(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Dt(e,n))&&r.unshift(Go(e,i,o)),null!=(i=Dt(e,t))&&r.push(Go(e,i,o))),e=e.return}return r}function Jo(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qo(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Dt(n,i))&&a.unshift(Go(n,l,s)):o||null!=(l=Dt(n,i))&&a.push(Go(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ei=/\r\n?/g,ti=/\u0000|\uFFFD/g;function ni(e){return("string"==typeof e?e:""+e).replace(ei,"\n").replace(ti,"")}function ri(e,t,n){if(t=ni(t),ni(e)!==t&&n)throw Error(ue(425))}function oi(){}var ii=null,ai=null;function si(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var li="function"==typeof setTimeout?setTimeout:void 0,ci="function"==typeof clearTimeout?clearTimeout:void 0,ui="function"==typeof Promise?Promise:void 0,di="function"==typeof queueMicrotask?queueMicrotask:void 0!==ui?function(e){return ui.resolve(null).then(e).catch(fi)}:li;function fi(e){setTimeout((function(){throw e}))}function hi(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Kn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Kn(t)}function pi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function gi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),vi="__reactFiber$"+mi,yi="__reactProps$"+mi,bi="__reactContainer$"+mi,wi="__reactEvents$"+mi,xi="__reactListeners$"+mi,_i="__reactHandles$"+mi;function ki(e){var t=e[vi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bi]||n[vi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=gi(e);null!==e;){if(n=e[vi])return n;e=gi(e)}return t}n=(e=n).parentNode}return null}function Si(e){return!(e=e[vi]||e[bi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ue(33))}function ji(e){return e[yi]||null}var Ci=[],Ni=-1;function Ai(e){return{current:e}}function Oi(e){0>Ni||(e.current=Ci[Ni],Ci[Ni]=null,Ni--)}function Ri(e,t){Ni++,Ci[Ni]=e.current,e.current=t}var Pi={},Ti=Ai(Pi),Ii=Ai(!1),Mi=Pi;function Di(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Li(e){return null!=(e=e.childContextTypes)}function Bi(){Oi(Ii),Oi(Ti)}function Fi(e,t,n){if(Ti.current!==Pi)throw Error(ue(168));Ri(Ti,t),Ri(Ii,n)}function zi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(ue(108,Ze(e)||"Unknown",o));return Ue({},n,r)}function $i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Mi=Ti.current,Ri(Ti,e),Ri(Ii,Ii.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(ue(169));n?(e=zi(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,Oi(Ii),Oi(Ti),Ri(Ti,e)):Oi(Ii),Ri(Ii,n)}var Wi=null,Hi=!1,Vi=!1;function qi(e){null===Wi?Wi=[e]:Wi.push(e)}function Ki(){if(!Vi&&null!==Wi){Vi=!0;var e=0,t=Sn;try{var n=Wi;for(Sn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Wi=null,Hi=!1}catch(J$){throw null!==Wi&&(Wi=Wi.slice(e+1)),Xt(rn,Ki),J$}finally{Sn=t,Vi=!1}}return null}var Zi=[],Yi=0,Gi=null,Xi=0,Ji=[],Qi=0,ea=null,ta=1,na="";function ra(e,t){Zi[Yi++]=Xi,Zi[Yi++]=Gi,Gi=e,Xi=t}function oa(e,t,n){Ji[Qi++]=ta,Ji[Qi++]=na,Ji[Qi++]=ea,ea=e;var r=ta;e=na;var o=32-dn(r)-1;r&=~(1<<o),n+=1;var i=32-dn(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,ta=1<<32-dn(t)+o|n<<o|r,na=i+e}else ta=1<<i|n<<o|r,na=e}function ia(e){null!==e.return&&(ra(e,1),oa(e,1,0))}function aa(e){for(;e===Gi;)Gi=Zi[--Yi],Zi[Yi]=null,Xi=Zi[--Yi],Zi[Yi]=null;for(;e===ea;)ea=Ji[--Qi],Ji[Qi]=null,na=Ji[--Qi],Ji[Qi]=null,ta=Ji[--Qi],Ji[Qi]=null}var sa=null,la=null,ca=!1,ua=null;function da(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function fa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,sa=e,la=pi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,sa=e,la=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ea?{id:ta,overflow:na}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,sa=e,la=null,!0);default:return!1}}function ha(e){return!(!(1&e.mode)||128&e.flags)}function pa(e){if(ca){var t=la;if(t){var n=t;if(!fa(e,t)){if(ha(e))throw Error(ue(418));t=pi(n.nextSibling);var r=sa;t&&fa(e,t)?da(r,n):(e.flags=-4097&e.flags|2,ca=!1,sa=e)}}else{if(ha(e))throw Error(ue(418));e.flags=-4097&e.flags|2,ca=!1,sa=e}}}function ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;sa=e}function ma(e){if(e!==sa)return!1;if(!ca)return ga(e),ca=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!si(e.type,e.memoizedProps)),t&&(t=la)){if(ha(e))throw va(),Error(ue(418));for(;t;)da(e,t),t=pi(t.nextSibling)}if(ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){la=pi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}la=null}}else la=sa?pi(e.stateNode.nextSibling):null;return!0}function va(){for(var e=la;e;)e=pi(e.nextSibling)}function ya(){la=sa=null,ca=!1}function ba(e){null===ua?ua=[e]:ua.push(e)}var wa=Ee.ReactCurrentBatchConfig;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(ue(284));if(!n._owner)throw Error(ue(290,e))}return e}function _a(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ka(e){return(0,e._init)(e._payload)}function Sa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Lu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===Ne?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===Le&&ka(i)===t.type)?((r=o(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Bu(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=Fu(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case je:return(n=Bu(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case Ce:return(t=Uu(t,e.mode,n)).return=e,t;case Le:return d(e,(0,t._init)(t._payload),n)}if(at(t)||ze(t))return(t=Fu(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case je:return n.key===o?l(e,t,n,r):null;case Ce:return n.key===o?c(e,t,n,r):null;case Le:return f(e,t,(o=n._init)(n._payload),r)}if(at(n)||ze(n))return null!==o?null:u(e,t,n,r,null);_a(e,n)}return null}function h(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case je:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case Ce:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case Le:return h(e,t,n,(0,r._init)(r._payload),o)}if(at(r)||ze(r))return u(t,e=e.get(n)||null,r,o,null);_a(t,r)}return null}function p(o,a,s,l){for(var c=null,u=null,p=a,g=a=0,m=null;null!==p&&g<s.length;g++){p.index>g?(m=p,p=null):m=p.sibling;var v=f(o,p,s[g],l);if(null===v){null===p&&(p=m);break}e&&p&&null===v.alternate&&t(o,p),a=i(v,a,g),null===u?c=v:u.sibling=v,u=v,p=m}if(g===s.length)return n(o,p),ca&&ra(o,g),c;if(null===p){for(;g<s.length;g++)null!==(p=d(o,s[g],l))&&(a=i(p,a,g),null===u?c=p:u.sibling=p,u=p);return ca&&ra(o,g),c}for(p=r(o,p);g<s.length;g++)null!==(m=h(p,o,g,s[g],l))&&(e&&null!==m.alternate&&p.delete(null===m.key?g:m.key),a=i(m,a,g),null===u?c=m:u.sibling=m,u=m);return e&&p.forEach((function(e){return t(o,e)})),ca&&ra(o,g),c}function g(o,a,s,l){var c=ze(s);if("function"!=typeof c)throw Error(ue(150));if(null==(s=c.call(s)))throw Error(ue(151));for(var u=c=null,p=a,g=a=0,m=null,v=s.next();null!==p&&!v.done;g++,v=s.next()){p.index>g?(m=p,p=null):m=p.sibling;var y=f(o,p,v.value,l);if(null===y){null===p&&(p=m);break}e&&p&&null===y.alternate&&t(o,p),a=i(y,a,g),null===u?c=y:u.sibling=y,u=y,p=m}if(v.done)return n(o,p),ca&&ra(o,g),c;if(null===p){for(;!v.done;g++,v=s.next())null!==(v=d(o,v.value,l))&&(a=i(v,a,g),null===u?c=v:u.sibling=v,u=v);return ca&&ra(o,g),c}for(p=r(o,p);!v.done;g++,v=s.next())null!==(v=h(p,o,g,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=i(v,a,g),null===u?c=v:u.sibling=v,u=v);return e&&p.forEach((function(e){return t(o,e)})),ca&&ra(o,g),c}return function e(r,i,s,l){if("object"==typeof s&&null!==s&&s.type===Ne&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case je:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===Ne){if(7===u.tag){n(r,u.sibling),(i=o(u,s.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===Le&&ka(c)===u.type){n(r,u.sibling),(i=o(u,s.props)).ref=xa(r,u,s),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===Ne?((i=Fu(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=Bu(s.type,s.key,s.props,null,r.mode,l)).ref=xa(r,i,s),l.return=r,r=l)}return a(r);case Ce:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=o(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uu(s,r.mode,l)).return=r,r=i}return a(r);case Le:return e(r,i,(u=s._init)(s._payload),l)}if(at(s))return p(r,i,s,l);if(ze(s))return g(r,i,s,l);_a(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,s)).return=r,r=i):(n(r,i),(i=$u(s,r.mode,l)).return=r,r=i),a(r)):n(r,i)}}var Ea=Sa(!0),ja=Sa(!1),Ca=Ai(null),Na=null,Aa=null,Oa=null;function Ra(){Oa=Aa=Na=null}function Pa(e){var t=Ca.current;Oi(Ca),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){Na=e,Oa=Aa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(kl=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(Oa!==e)if(e={context:e,memoizedValue:t,next:null},null===Aa){if(null===Na)throw Error(ue(308));Aa=e,Na.dependencies={lanes:0,firstContext:e}}else Aa=Aa.next=e;return t}var Da=null;function La(e){null===Da?Da=[e]:Da.push(e)}function Ba(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,La(t)):(n.next=o.next,o.next=n),t.interleaved=n,Fa(e,r)}function Fa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var za=!1;function $a(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ha(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Pc){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Fa(e,n)}return null===(o=r.interleaved)?(t.next=t,La(r)):(t.next=o.next,o.next=t),r.interleaved=t,Fa(e,n)}function Va(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,kn(e,n)}}function qa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ka(e,t,n,r){var o=e.updateQueue;za=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(f=t,h=n,g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=g.payload)?p.call(h,d,f):p))break e;d=Ue({},d,f);break e;case 2:za=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,a|=f;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(f=s).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);zc|=a,e.lanes=a,e.memoizedState=d}}function Za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(ue(191,o));o.call(r)}}}var Ya={},Ga=Ai(Ya),Xa=Ai(Ya),Ja=Ai(Ya);function Qa(e){if(e===Ya)throw Error(ue(174));return e}function es(e,t){switch(Ri(Ja,t),Ri(Xa,e),Ri(Ga,Ya),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ht(null,"");break;default:t=ht(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Oi(Ga),Ri(Ga,t)}function ts(){Oi(Ga),Oi(Xa),Oi(Ja)}function ns(e){Qa(Ja.current);var t=Qa(Ga.current),n=ht(t,e.type);t!==n&&(Ri(Xa,e),Ri(Ga,n))}function rs(e){Xa.current===e&&(Oi(Ga),Oi(Xa))}var os=Ai(0);function is(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var as=[];function ss(){for(var e=0;e<as.length;e++)as[e]._workInProgressVersionPrimary=null;as.length=0}var ls=Ee.ReactCurrentDispatcher,cs=Ee.ReactCurrentBatchConfig,us=0,ds=null,fs=null,hs=null,ps=!1,gs=!1,ms=0,vs=0;function ys(){throw Error(ue(321))}function bs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fo(e[n],t[n]))return!1;return!0}function ws(e,t,n,r,o,i){if(us=i,ds=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ls.current=null===e||null===e.memoizedState?rl:ol,e=n(r,o),gs){i=0;do{if(gs=!1,ms=0,25<=i)throw Error(ue(301));i+=1,hs=fs=null,t.updateQueue=null,ls.current=il,e=n(r,o)}while(gs)}if(ls.current=nl,t=null!==fs&&null!==fs.next,us=0,hs=fs=ds=null,ps=!1,t)throw Error(ue(300));return e}function xs(){var e=0!==ms;return ms=0,e}function _s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===hs?ds.memoizedState=hs=e:hs=hs.next=e,hs}function ks(){if(null===fs){var e=ds.alternate;e=null!==e?e.memoizedState:null}else e=fs.next;var t=null===hs?ds.memoizedState:hs.next;if(null!==t)hs=t,fs=e;else{if(null===e)throw Error(ue(310));e={memoizedState:(fs=e).memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},null===hs?ds.memoizedState=hs=e:hs=hs.next=e}return hs}function Ss(e,t){return"function"==typeof t?t(e):t}function Es(e){var t=ks(),n=t.queue;if(null===n)throw Error(ue(311));n.lastRenderedReducer=e;var r=fs,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var s=a=null,l=null,c=i;do{var u=c.lane;if((us&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=d,a=r):l=l.next=d,ds.lanes|=u,zc|=u}c=c.next}while(null!==c&&c!==i);null===l?a=r:l.next=s,fo(r,t.memoizedState)||(kl=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,ds.lanes|=i,zc|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function js(e){var t=ks(),n=t.queue;if(null===n)throw Error(ue(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{i=e(i,a.action),a=a.next}while(a!==o);fo(i,t.memoizedState)||(kl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Cs(){}function Ns(e,t){var n=ds,r=ks(),o=t(),i=!fo(r.memoizedState,o);if(i&&(r.memoizedState=o,kl=!0),r=r.queue,zs(Rs.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==hs&&1&hs.memoizedState.tag){if(n.flags|=2048,Ms(9,Os.bind(null,n,r,o,t),void 0,null),null===Tc)throw Error(ue(349));30&us||As(n,t,o)}return o}function As(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Os(e,t,n,r){t.value=n,t.getSnapshot=r,Ps(t)&&Ts(e)}function Rs(e,t,n){return n((function(){Ps(t)&&Ts(e)}))}function Ps(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fo(e,n)}catch(sU){return!0}}function Ts(e){var t=Fa(e,1);null!==t&&au(t,e,1,-1)}function Is(e){var t=_s();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:e},t.queue=e,e=e.dispatch=Js.bind(null,ds,e),[t.memoizedState,e]}function Ms(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ds(){return ks().memoizedState}function Ls(e,t,n,r){var o=_s();ds.flags|=e,o.memoizedState=Ms(1|t,n,void 0,void 0===r?null:r)}function Bs(e,t,n,r){var o=ks();r=void 0===r?null:r;var i=void 0;if(null!==fs){var a=fs.memoizedState;if(i=a.destroy,null!==r&&bs(r,a.deps))return void(o.memoizedState=Ms(t,n,i,r))}ds.flags|=e,o.memoizedState=Ms(1|t,n,i,r)}function Fs(e,t){return Ls(8390656,8,e,t)}function zs(e,t){return Bs(2048,8,e,t)}function $s(e,t){return Bs(4,2,e,t)}function Us(e,t){return Bs(4,4,e,t)}function Ws(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hs(e,t,n){return n=null!=n?n.concat([e]):null,Bs(4,4,Ws.bind(null,t,e),n)}function Vs(){}function qs(e,t){var n=ks();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ks(e,t){var n=ks();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 21&us?(fo(n,t)||(n=wn(),ds.lanes|=n,zc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,kl=!0),e.memoizedState=n)}function Ys(e,t){var n=Sn;Sn=0!==n&&4>n?n:4,e(!0);var r=cs.transition;cs.transition={};try{e(!1),t()}finally{Sn=n,cs.transition=r}}function Gs(){return ks().memoizedState}function Xs(e,t,n){var r=iu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qs(e))el(t,n);else if(null!==(n=Ba(e,t,n,r))){au(n,e,r,ou()),tl(n,t,r)}}function Js(e,t,n){var r=iu(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qs(e))el(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,fo(s,a)){var l=t.interleaved;return null===l?(o.next=o,La(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(oU){}null!==(n=Ba(e,t,o,r))&&(au(n,e,r,o=ou()),tl(n,t,r))}}function Qs(e){var t=e.alternate;return e===ds||null!==t&&t===ds}function el(e,t){gs=ps=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tl(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,kn(e,n)}}var nl={readContext:Ma,useCallback:ys,useContext:ys,useEffect:ys,useImperativeHandle:ys,useInsertionEffect:ys,useLayoutEffect:ys,useMemo:ys,useReducer:ys,useRef:ys,useState:ys,useDebugValue:ys,useDeferredValue:ys,useTransition:ys,useMutableSource:ys,useSyncExternalStore:ys,useId:ys,unstable_isNewReconciler:!1},rl={readContext:Ma,useCallback:function(e,t){return _s().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Fs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ls(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=_s();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_s();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xs.bind(null,ds,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_s().memoizedState=e},useState:Is,useDebugValue:Vs,useDeferredValue:function(e){return _s().memoizedState=e},useTransition:function(){var e=Is(!1),t=e[0];return e=Ys.bind(null,e[1]),_s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ds,o=_s();if(ca){if(void 0===n)throw Error(ue(407));n=n()}else{if(n=t(),null===Tc)throw Error(ue(349));30&us||As(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Fs(Rs.bind(null,r,i,e),[e]),r.flags|=2048,Ms(9,Os.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=_s(),t=Tc.identifierPrefix;if(ca){var n=na;t=":"+t+"R"+(n=(ta&~(1<<32-dn(ta)-1)).toString(32)+n),0<(n=ms++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ol={readContext:Ma,useCallback:qs,useContext:Ma,useEffect:zs,useImperativeHandle:Hs,useInsertionEffect:$s,useLayoutEffect:Us,useMemo:Ks,useReducer:Es,useRef:Ds,useState:function(){return Es(Ss)},useDebugValue:Vs,useDeferredValue:function(e){return Zs(ks(),fs.memoizedState,e)},useTransition:function(){return[Es(Ss)[0],ks().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ns,useId:Gs,unstable_isNewReconciler:!1},il={readContext:Ma,useCallback:qs,useContext:Ma,useEffect:zs,useImperativeHandle:Hs,useInsertionEffect:$s,useLayoutEffect:Us,useMemo:Ks,useReducer:js,useRef:Ds,useState:function(){return js(Ss)},useDebugValue:Vs,useDeferredValue:function(e){var t=ks();return null===fs?t.memoizedState=e:Zs(t,fs.memoizedState,e)},useTransition:function(){return[js(Ss)[0],ks().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ns,useId:Gs,unstable_isNewReconciler:!1};function al(e,t){if(e&&e.defaultProps){for(var n in t=Ue({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Ue({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ll={isMounted:function(e){return!!(e=e._reactInternals)&&qt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ou(),o=iu(e),i=Wa(r,o);i.payload=t,null!=n&&(i.callback=n),null!==(t=Ha(e,i,o))&&(au(t,e,o,r),Va(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ou(),o=iu(e),i=Wa(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=Ha(e,i,o))&&(au(t,e,o,r),Va(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ou(),r=iu(e),o=Wa(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=Ha(e,o,r))&&(au(t,e,r,n),Va(t,e,r))}};function cl(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ho(n,r)||!ho(o,i))}function ul(e,t,n){var r=!1,o=Pi,i=t.contextType;return"object"==typeof i&&null!==i?i=Ma(i):(o=Li(t)?Mi:Ti.current,i=(r=null!=(r=t.contextTypes))?Di(e,o):Pi),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ll,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function dl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ll.enqueueReplaceState(t,t.state,null)}function fl(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},$a(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=Ma(i):(i=Li(t)?Mi:Ti.current,o.context=Di(e,i)),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(sl(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ll.enqueueReplaceState(o,o.state,null),Ka(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function hl(e,t){try{var n="",r=t;do{n+=qe(r),r=r.return}while(r);var o=n}catch(uU){o="\nError generating stack: "+uU.message+"\n"+uU.stack}return{value:e,source:t,stack:o,digest:null}}function pl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function gl(e,t){try{console.error(t.value)}catch(cU){setTimeout((function(){throw cU}))}}var ml="function"==typeof WeakMap?WeakMap:Map;function vl(e,t,n){(n=Wa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zc||(Zc=!0,Yc=r),gl(0,t)},n}function yl(e,t,n){(n=Wa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){gl(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){gl(0,t),"function"!=typeof r&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function bl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ml;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function wl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xl(e,t,n,r,o){return 1&e.mode?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Wa(-1,1)).tag=2,Ha(n,t,1))),n.lanes|=1),e)}var _l=Ee.ReactCurrentOwner,kl=!1;function Sl(e,t,n,r){t.child=null===e?ja(t,null,n,r):Ea(t,e.child,n,r)}function El(e,t,n,r,o){n=n.render;var i=t.ref;return Ia(t,o),r=ws(e,t,n,r,i,o),n=xs(),null===e||kl?(ca&&n&&ia(t),t.flags|=1,Sl(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Zl(e,t,o))}function jl(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||Du(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Cl(e,t,i,r,o))}if(i=e.child,!(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ho)(a,r)&&e.ref===t.ref)return Zl(e,t,o)}return t.flags|=1,(e=Lu(i,r)).ref=t.ref,e.return=t,t.child=e}function Cl(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(ho(i,r)&&e.ref===t.ref){if(kl=!1,t.pendingProps=r=i,!(e.lanes&o))return t.lanes=e.lanes,Zl(e,t,o);131072&e.flags&&(kl=!0)}}return Ol(e,t,n,r,o)}function Nl(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(Lc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ri(Lc,Dc),Dc|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(Lc,Dc),Dc|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ri(Lc,Dc),Dc|=r;return Sl(e,t,o,n),t.child}function Al(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ol(e,t,n,r,o){var i=Li(n)?Mi:Ti.current;return i=Di(t,i),Ia(t,o),n=ws(e,t,n,r,i,o),r=xs(),null===e||kl?(ca&&r&&ia(t),t.flags|=1,Sl(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Zl(e,t,o))}function Rl(e,t,n,r,o){if(Li(n)){var i=!0;$i(t)}else i=!1;if(Ia(t,o),null===t.stateNode)Kl(e,t),ul(t,n,r),fl(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ma(c):c=Di(t,c=Li(n)?Mi:Ti.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&dl(t,a,r,c),za=!1;var f=t.memoizedState;a.state=f,Ka(t,r,a,o),l=t.memoizedState,s!==r||f!==l||Ii.current||za?("function"==typeof u&&(sl(t,n,u,r),l=t.memoizedState),(s=za||cl(t,n,s,r,f,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ua(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:al(t.type,s),a.props=c,d=t.pendingProps,f=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=Ma(l):l=Di(t,l=Li(n)?Mi:Ti.current);var h=n.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||f!==l)&&dl(t,a,r,l),za=!1,f=t.memoizedState,a.state=f,Ka(t,r,a,o);var p=t.memoizedState;s!==d||f!==p||Ii.current||za?("function"==typeof h&&(sl(t,n,h,r),p=t.memoizedState),(c=za||cl(t,n,c,r,f,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Pl(e,t,n,r,i,o)}function Pl(e,t,n,r,o,i){Al(e,t);var a=!!(128&t.flags);if(!r&&!a)return o&&Ui(t,n,!1),Zl(e,t,i);r=t.stateNode,_l.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ea(t,e.child,null,i),t.child=Ea(t,null,s,i)):Sl(e,t,s,i),t.memoizedState=r.state,o&&Ui(t,n,!0),t.child}function Tl(e){var t=e.stateNode;t.pendingContext?Fi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(0,t.context,!1),es(e,t.containerInfo)}function Il(e,t,n,r,o){return ya(),ba(o),t.flags|=256,Sl(e,t,n,r),t.child}var Ml,Dl,Ll,Bl,Fl={dehydrated:null,treeContext:null,retryLane:0};function zl(e){return{baseLanes:e,cachePool:null,transitions:null}}function $l(e,t,n){var r,o=t.pendingProps,i=os.current,a=!1,s=!!(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&!!(2&i)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ri(os,1&i),null===e)return pa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=o.children,e=o.fallback,a?(o=t.mode,a=t.child,s={mode:"hidden",children:s},1&o||null===a?a=zu(s,o,0,null):(a.childLanes=0,a.pendingProps=s),e=Fu(e,o,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=zl(n),t.memoizedState=Fl,e):Ul(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,a){if(n)return 256&t.flags?(t.flags&=-257,Wl(e,t,a,r=pl(Error(ue(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=zu({mode:"visible",children:r.children},o,0,null),(i=Fu(i,o,a,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,1&t.mode&&Ea(t,e.child,null,a),t.child.memoizedState=zl(a),t.memoizedState=Fl,i);if(!(1&t.mode))return Wl(e,t,a,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,Wl(e,t,a,r=pl(i=Error(ue(419)),r,void 0))}if(s=!!(a&e.childLanes),kl||s){if(null!==(r=Tc)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=o&(r.suspendedLanes|a)?0:o)&&o!==i.retryLane&&(i.retryLane=o,Fa(e,o),au(r,e,o,-1))}return bu(),Wl(e,t,a,r=pl(Error(ue(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Ru.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,la=pi(o.nextSibling),sa=t,ca=!0,ua=null,null!==e&&(Ji[Qi++]=ta,Ji[Qi++]=na,Ji[Qi++]=ea,ta=e.id,na=e.overflow,ea=t),t=Ul(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,i,n);if(a){a=o.fallback,s=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:o.children};return 1&s||t.child===i?(o=Lu(i,l)).subtreeFlags=14680064&i.subtreeFlags:((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null),null!==r?a=Lu(r,a):(a=Fu(a,s,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,s=null===(s=e.child.memoizedState)?zl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Fl,o}return e=(a=e.child).sibling,o=Lu(a,{mode:"visible",children:o.children}),!(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ul(e,t){return(t=zu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wl(e,t,n,r){return null!==r&&ba(r),Ea(t,e.child,null,n),(e=Ul(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Vl(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function ql(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Sl(e,t,r.children,n),2&(r=os.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hl(e,n,t);else if(19===e.tag)Hl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ri(os,r),1&t.mode)switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===is(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Vl(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===is(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Vl(t,!0,n,null,i);break;case"together":Vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Kl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zc|=t.lanes,!(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ue(153));if(null!==t.child){for(n=Lu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yl(e,t){if(!ca)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xl(e,t,n){var r=t.pendingProps;switch(aa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gl(t),null;case 1:case 17:return Li(t.type)&&Bi(),Gl(t),null;case 3:return r=t.stateNode,ts(),Oi(Ii),Oi(Ti),ss(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ua&&(uu(ua),ua=null))),Dl(e,t),Gl(t),null;case 5:rs(t);var o=Qa(Ja.current);if(n=t.type,null!==e&&null!=t.stateNode)Ll(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ue(166));return Gl(t),null}if(e=Qa(Ga.current),ma(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[vi]=t,r[yi]=i,e=!!(1&t.mode),n){case"dialog":Ho("cancel",r),Ho("close",r);break;case"iframe":case"object":case"embed":Ho("load",r);break;case"video":case"audio":for(o=0;o<zo.length;o++)Ho(zo[o],r);break;case"source":Ho("error",r);break;case"img":case"image":case"link":Ho("error",r),Ho("load",r);break;case"details":Ho("toggle",r);break;case"input":tt(r,i),Ho("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ho("invalid",r);break;case"textarea":ct(r,i),Ho("invalid",r)}for(var a in _t(n,i),o=null,i)if(i.hasOwnProperty(a)){var s=i[a];"children"===a?"string"==typeof s?r.textContent!==s&&(!0!==i.suppressHydrationWarning&&ri(r.textContent,s,e),o=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(!0!==i.suppressHydrationWarning&&ri(r.textContent,s,e),o=["children",""+s]):fe.hasOwnProperty(a)&&null!=s&&"onScroll"===a&&Ho("scroll",r)}switch(n){case"input":Xe(r),ot(r,i,!0);break;case"textarea":Xe(r),dt(r);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(r.onclick=oi)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ft(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[vi]=t,e[yi]=r,Ml(e,t,!1,!1),t.stateNode=e;e:{switch(a=kt(n,r),n){case"dialog":Ho("cancel",e),Ho("close",e),o=r;break;case"iframe":case"object":case"embed":Ho("load",e),o=r;break;case"video":case"audio":for(o=0;o<zo.length;o++)Ho(zo[o],e);o=r;break;case"source":Ho("error",e),o=r;break;case"img":case"image":case"link":Ho("error",e),Ho("load",e),o=r;break;case"details":Ho("toggle",e),o=r;break;case"input":tt(e,r),o=et(e,r),Ho("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ue({},r,{value:void 0}),Ho("invalid",e);break;case"textarea":ct(e,r),o=lt(e,r),Ho("invalid",e)}for(i in _t(n,o),s=o)if(s.hasOwnProperty(i)){var l=s[i];"style"===i?wt(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&gt(e,l):"children"===i?"string"==typeof l?("textarea"!==n||""!==l)&&mt(e,l):"number"==typeof l&&mt(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(fe.hasOwnProperty(i)?null!=l&&"onScroll"===i&&Ho("scroll",e):null!=l&&Se(e,i,l,a))}switch(n){case"input":Xe(e),ot(e,r,!1);break;case"textarea":Xe(e),dt(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?st(e,!!r.multiple,i,!1):null!=r.defaultValue&&st(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=oi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gl(t),null;case 6:if(e&&null!=t.stateNode)Bl(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ue(166));if(n=Qa(Ja.current),Qa(Ga.current),ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[vi]=t,(i=r.nodeValue!==n)&&null!==(e=sa))switch(e.tag){case 3:ri(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ri(r.nodeValue,n,!!(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[vi]=t,t.stateNode=r}return Gl(t),null;case 13:if(Oi(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ca&&null!==la&&1&t.mode&&!(128&t.flags))va(),ya(),t.flags|=98560,i=!1;else if(i=ma(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(ue(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(ue(317));i[vi]=t}else ya(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gl(t),i=!1}else null!==ua&&(uu(ua),ua=null),i=!0;if(!i)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&os.current?0===Bc&&(Bc=3):bu())),null!==t.updateQueue&&(t.flags|=4),Gl(t),null);case 4:return ts(),Dl(e,t),null===e&&Ko(t.stateNode.containerInfo),Gl(t),null;case 10:return Pa(t.type._context),Gl(t),null;case 19:if(Oi(os),null===(i=t.memoizedState))return Gl(t),null;if(r=!!(128&t.flags),null===(a=i.rendering))if(r)Yl(i,!1);else{if(0!==Bc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=is(e))){for(t.flags|=128,Yl(i,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(a=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ri(os,1&os.current|2),t.child}e=e.sibling}null!==i.tail&&tn()>qc&&(t.flags|=128,r=!0,Yl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=is(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Yl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!ca)return Gl(t),null}else 2*tn()-i.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Yl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=i.last)?n.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=tn(),t.sibling=null,n=os.current,Ri(os,r?1&n|2:1&n),t):(Gl(t),null);case 22:case 23:return gu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Dc)&&(Gl(t),6&t.subtreeFlags&&(t.flags|=8192)):Gl(t),null;case 24:case 25:return null}throw Error(ue(156,t.tag))}function Jl(e,t){switch(aa(t),t.tag){case 1:return Li(t.type)&&Bi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ts(),Oi(Ii),Oi(Ti),ss(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return rs(t),null;case 13:if(Oi(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ue(340));ya()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Oi(os),null;case 4:return ts(),null;case 10:return Pa(t.type._context),null;case 22:case 23:return gu(),null;default:return null}}Ml=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Dl=function(){},Ll=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Qa(Ga.current);var i,a=null;switch(n){case"input":o=et(e,o),r=et(e,r),a=[];break;case"select":o=Ue({},o,{value:void 0}),r=Ue({},r,{value:void 0}),a=[];break;case"textarea":o=lt(e,o),r=lt(e,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=oi)}for(c in _t(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var s=o[c];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(fe.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(s=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(fe.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ho("scroll",e),a||s===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Bl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ql=!1,ec=!1,tc="function"==typeof WeakSet?WeakSet:Set,nc=null;function rc(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(sU){Nu(e,t,sU)}else n.current=null}function oc(e,t,n){try{n()}catch(sU){Nu(e,t,sU)}}var ic=!1;function ac(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&oc(t,n,i)}o=o.next}while(o!==r)}}function sc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function cc(e){var t=e.alternate;null!==t&&(e.alternate=null,cc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[vi],delete t[yi],delete t[wi],delete t[xi],delete t[_i])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uc(e){return 5===e.tag||3===e.tag||4===e.tag}function dc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||uc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=oi));else if(4!==r&&null!==(e=e.child))for(fc(e,t,n),e=e.sibling;null!==e;)fc(e,t,n),e=e.sibling}function hc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hc(e,t,n),e=e.sibling;null!==e;)hc(e,t,n),e=e.sibling}var pc=null,gc=!1;function mc(e,t,n){for(n=n.child;null!==n;)vc(e,t,n),n=n.sibling}function vc(e,t,n){if(un&&"function"==typeof un.onCommitFiberUnmount)try{un.onCommitFiberUnmount(cn,n)}catch(aU){}switch(n.tag){case 5:ec||rc(n,t);case 6:var r=pc,o=gc;pc=null,mc(e,t,n),gc=o,null!==(pc=r)&&(gc?(e=pc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pc.removeChild(n.stateNode));break;case 18:null!==pc&&(gc?(e=pc,n=n.stateNode,8===e.nodeType?hi(e.parentNode,n):1===e.nodeType&&hi(e,n),Kn(e)):hi(pc,n.stateNode));break;case 4:r=pc,o=gc,pc=n.stateNode.containerInfo,gc=!0,mc(e,t,n),pc=r,gc=o;break;case 0:case 11:case 14:case 15:if(!ec&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(2&i||4&i)&&oc(n,t,a),o=o.next}while(o!==r)}mc(e,t,n);break;case 1:if(!ec&&(rc(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(aU){Nu(n,t,aU)}mc(e,t,n);break;case 21:mc(e,t,n);break;case 22:1&n.mode?(ec=(r=ec)||null!==n.memoizedState,mc(e,t,n),ec=r):mc(e,t,n);break;default:mc(e,t,n)}}function yc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tc),t.forEach((function(t){var r=Pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function bc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,a=t,s=a;e:for(;null!==s;){switch(s.tag){case 5:pc=s.stateNode,gc=!1;break e;case 3:case 4:pc=s.stateNode.containerInfo,gc=!0;break e}s=s.return}if(null===pc)throw Error(ue(160));vc(i,a,o),pc=null,gc=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(oU){Nu(o,t,oU)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)wc(t,e),t=t.sibling}function wc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bc(t,e),xc(e),4&r){try{ac(3,e,e.return),sc(3,e)}catch(G$){Nu(e,e.return,G$)}try{ac(5,e,e.return)}catch(G$){Nu(e,e.return,G$)}}break;case 1:bc(t,e),xc(e),512&r&&null!==n&&rc(n,n.return);break;case 5:if(bc(t,e),xc(e),512&r&&null!==n&&rc(n,n.return),32&e.flags){var o=e.stateNode;try{mt(o,"")}catch(G$){Nu(e,e.return,G$)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,a=null!==n?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===i.type&&null!=i.name&&nt(o,i),kt(s,a);var c=kt(s,i);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?wt(o,d):"dangerouslySetInnerHTML"===u?gt(o,d):"children"===u?mt(o,d):Se(o,u,d,c)}switch(s){case"input":rt(o,i);break;case"textarea":ut(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?st(o,!!i.multiple,h,!1):f!==!!i.multiple&&(null!=i.defaultValue?st(o,!!i.multiple,i.defaultValue,!0):st(o,!!i.multiple,i.multiple?[]:"",!1))}o[yi]=i}catch(G$){Nu(e,e.return,G$)}}break;case 6:if(bc(t,e),xc(e),4&r){if(null===e.stateNode)throw Error(ue(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(G$){Nu(e,e.return,G$)}}break;case 3:if(bc(t,e),xc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kn(t.containerInfo)}catch(G$){Nu(e,e.return,G$)}break;case 4:default:bc(t,e),xc(e);break;case 13:bc(t,e),xc(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Vc=tn())),4&r&&yc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(ec=(c=ec)||u,bc(t,e),ec=c):bc(t,e),xc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(nc=e,u=e.child;null!==u;){for(d=nc=u;null!==nc;){switch(h=(f=nc).child,f.tag){case 0:case 11:case 14:case 15:ac(4,f,f.return);break;case 1:rc(f,f.return);var p=f.stateNode;if("function"==typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(G$){Nu(r,n,G$)}}break;case 5:rc(f,f.return);break;case 22:if(null!==f.memoizedState){Ec(d);continue}}null!==h?(h.return=f,nc=h):Ec(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{o=d.stateNode,c?"function"==typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,s.style.display=bt("display",a))}catch(G$){Nu(e,e.return,G$)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(G$){Nu(e,e.return,G$)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bc(t,e),xc(e),4&r&&yc(e);case 21:}}function xc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(uc(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(mt(o,""),r.flags&=-33),hc(e,dc(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;fc(e,dc(e),i);break;default:throw Error(ue(161))}}catch(wU){Nu(e,e.return,wU)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _c(e,t,n){nc=e,kc(e)}function kc(e,t,n){for(var r=!!(1&e.mode);null!==nc;){var o=nc,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Ql;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||ec;s=Ql;var c=ec;if(Ql=a,(ec=l)&&!c)for(nc=o;null!==nc;)l=(a=nc).child,22===a.tag&&null!==a.memoizedState?jc(o):null!==l?(l.return=a,nc=l):jc(o);for(;null!==i;)nc=i,kc(i),i=i.sibling;nc=o,Ql=s,ec=c}Sc(e)}else 8772&o.subtreeFlags&&null!==i?(i.return=o,nc=i):Sc(e)}}function Sc(e){for(;null!==nc;){var t=nc;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:ec||sc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!ec)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:al(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Za(t,i,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Za(t,a,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Kn(d)}}}break;default:throw Error(ue(163))}ec||512&t.flags&&lc(t)}catch(Q$){Nu(t,t.return,Q$)}}if(t===e){nc=null;break}if(null!==(n=t.sibling)){n.return=t.return,nc=n;break}nc=t.return}}function Ec(e){for(;null!==nc;){var t=nc;if(t===e){nc=null;break}var n=t.sibling;if(null!==n){n.return=t.return,nc=n;break}nc=t.return}}function jc(e){for(;null!==nc;){var t=nc;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sc(4,t)}catch(wU){Nu(t,n,wU)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(wU){Nu(t,o,wU)}}var i=t.return;try{lc(t)}catch(wU){Nu(t,i,wU)}break;case 5:var a=t.return;try{lc(t)}catch(wU){Nu(t,a,wU)}}}catch(wU){Nu(t,t.return,wU)}if(t===e){nc=null;break}var s=t.sibling;if(null!==s){s.return=t.return,nc=s;break}nc=t.return}}var Cc,Nc=Math.ceil,Ac=Ee.ReactCurrentDispatcher,Oc=Ee.ReactCurrentOwner,Rc=Ee.ReactCurrentBatchConfig,Pc=0,Tc=null,Ic=null,Mc=0,Dc=0,Lc=Ai(0),Bc=0,Fc=null,zc=0,$c=0,Uc=0,Wc=null,Hc=null,Vc=0,qc=1/0,Kc=null,Zc=!1,Yc=null,Gc=null,Xc=!1,Jc=null,Qc=0,eu=0,tu=null,nu=-1,ru=0;function ou(){return 6&Pc?tn():-1!==nu?nu:nu=tn()}function iu(e){return 1&e.mode?2&Pc&&0!==Mc?Mc&-Mc:null!==wa.transition?(0===ru&&(ru=wn()),ru):0!==(e=Sn)?e:e=void 0===(e=window.event)?16:tr(e.type):1}function au(e,t,n,r){if(50<eu)throw eu=0,tu=null,Error(ue(185));_n(e,n,r),2&Pc&&e===Tc||(e===Tc&&(!(2&Pc)&&($c|=n),4===Bc&&du(e,Mc)),su(e,r),1===n&&0===Pc&&!(1&t.mode)&&(qc=tn()+500,Hi&&Ki()))}function su(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-dn(i),s=1<<a,l=o[a];-1===l?s&n&&!(s&r)||(o[a]=yn(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=vn(e,e===Tc?Mc:0);if(0===r)null!==n&&Jt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Jt(n),1===t)0===e.tag?function(e){Hi=!0,qi(e)}(fu.bind(null,e)):qi(fu.bind(null,e)),di((function(){!(6&Pc)&&Ki()})),n=null;else{switch(En(r)){case 1:n=rn;break;case 4:n=on;break;case 16:default:n=an;break;case 536870912:n=ln}n=Tu(n,lu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lu(e,t){if(nu=-1,ru=0,6&Pc)throw Error(ue(327));var n=e.callbackNode;if(ju()&&e.callbackNode!==n)return null;var r=vn(e,e===Tc?Mc:0);if(0===r)return null;if(30&r||r&e.expiredLanes||t)t=wu(e,r);else{t=r;var o=Pc;Pc|=2;var i=yu();for(Tc===e&&Mc===t||(Kc=null,qc=tn()+500,mu(e,t));;)try{_u();break}catch(aU){vu(e,aU)}Ra(),Ac.current=i,Pc=o,null!==Ic?t=0:(Tc=null,Mc=0,t=Bc)}if(0!==t){if(2===t&&(0!==(o=bn(e))&&(r=o,t=cu(e,o))),1===t)throw n=Fc,mu(e,0),du(e,r),su(e,tn()),n;if(6===t)du(e,r);else{if(o=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!fo(i(),o))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)||(t=wu(e,r),2===t&&(i=bn(e),0!==i&&(r=i,t=cu(e,i))),1!==t)))throw n=Fc,mu(e,0),du(e,r),su(e,tn()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ue(345));case 2:case 5:Eu(e,Hc,Kc);break;case 3:if(du(e,r),(130023424&r)===r&&10<(t=Vc+500-tn())){if(0!==vn(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ou(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=li(Eu.bind(null,e,Hc,Kc),t);break}Eu(e,Hc,Kc);break;case 4:if(du(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-dn(r);i=1<<a,(a=t[a])>o&&(o=a),r&=~i}if(r=o,10<(r=(120>(r=tn()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nc(r/1960))-r)){e.timeoutHandle=li(Eu.bind(null,e,Hc,Kc),r);break}Eu(e,Hc,Kc);break;default:throw Error(ue(329))}}}return su(e,tn()),e.callbackNode===n?lu.bind(null,e):null}function cu(e,t){var n=Wc;return e.current.memoizedState.isDehydrated&&(mu(e,t).flags|=256),2!==(e=wu(e,t))&&(t=Hc,Hc=n,null!==t&&uu(t)),e}function uu(e){null===Hc?Hc=e:Hc.push.apply(Hc,e)}function du(e,t){for(t&=~Uc,t&=~$c,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dn(t),r=1<<n;e[n]=-1,t&=~r}}function fu(e){if(6&Pc)throw Error(ue(327));ju();var t=vn(e,0);if(!(1&t))return su(e,tn()),null;var n=wu(e,t);if(0!==e.tag&&2===n){var r=bn(e);0!==r&&(t=r,n=cu(e,r))}if(1===n)throw n=Fc,mu(e,0),du(e,t),su(e,tn()),n;if(6===n)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,Hc,Kc),su(e,tn()),null}function hu(e,t){var n=Pc;Pc|=1;try{return e(t)}finally{0===(Pc=n)&&(qc=tn()+500,Hi&&Ki())}}function pu(e){null!==Jc&&0===Jc.tag&&!(6&Pc)&&ju();var t=Pc;Pc|=1;var n=Rc.transition,r=Sn;try{if(Rc.transition=null,Sn=1,e)return e()}finally{Sn=r,Rc.transition=n,!(6&(Pc=t))&&Ki()}}function gu(){Dc=Lc.current,Oi(Lc)}function mu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ci(n)),null!==Ic)for(n=Ic.return;null!==n;){var r=n;switch(aa(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Bi();break;case 3:ts(),Oi(Ii),Oi(Ti),ss();break;case 5:rs(r);break;case 4:ts();break;case 13:case 19:Oi(os);break;case 10:Pa(r.type._context);break;case 22:case 23:gu()}n=n.return}if(Tc=e,Ic=e=Lu(e.current,null),Mc=Dc=t,Bc=0,Fc=null,Uc=$c=zc=0,Hc=Wc=null,null!==Da){for(t=0;t<Da.length;t++)if(null!==(r=(n=Da[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Da=null}return e}function vu(e,t){for(;;){var n=Ic;try{if(Ra(),ls.current=nl,ps){for(var r=ds.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ps=!1}if(us=0,hs=fs=ds=null,gs=!1,ms=0,Oc.current=null,null===n||null===n.return){Bc=1,Fc=t,Ic=null;break}e:{var i=e,a=n.return,s=n,l=t;if(t=Mc,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=s,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=wl(a);if(null!==h){h.flags&=-257,xl(h,a,s,0,t),1&h.mode&&bl(i,c,t),l=c;var p=(t=h).updateQueue;if(null===p){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}if(!(1&t)){bl(i,c,t),bu();break e}l=Error(ue(426))}else if(ca&&1&s.mode){var m=wl(a);if(null!==m){!(65536&m.flags)&&(m.flags|=256),xl(m,a,s,0,t),ba(hl(l,s));break e}}i=l=hl(l,s),4!==Bc&&(Bc=2),null===Wc?Wc=[i]:Wc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,qa(i,vl(0,l,t));break e;case 1:s=l;var v=i.type,y=i.stateNode;if(!(128&i.flags||"function"!=typeof v.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==Gc&&Gc.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,qa(i,yl(i,s,t));break e}}i=i.return}while(null!==i)}Su(n)}catch(b){t=b,Ic===n&&null!==n&&(Ic=n=n.return);continue}break}}function yu(){var e=Ac.current;return Ac.current=nl,null===e?nl:e}function bu(){0!==Bc&&3!==Bc&&2!==Bc||(Bc=4),null===Tc||!(268435455&zc)&&!(268435455&$c)||du(Tc,Mc)}function wu(e,t){var n=Pc;Pc|=2;var r=yu();for(Tc===e&&Mc===t||(Kc=null,mu(e,t));;)try{xu();break}catch(J$){vu(e,J$)}if(Ra(),Pc=n,Ac.current=r,null!==Ic)throw Error(ue(261));return Tc=null,Mc=0,Bc}function xu(){for(;null!==Ic;)ku(Ic)}function _u(){for(;null!==Ic&&!Qt();)ku(Ic)}function ku(e){var t=Cc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?Su(e):Ic=t,Oc.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Jl(n,t)))return n.flags&=32767,void(Ic=n);if(null===e)return Bc=6,void(Ic=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Xl(n,t,Dc)))return void(Ic=n);if(null!==(t=t.sibling))return void(Ic=t);Ic=t=e}while(null!==t);0===Bc&&(Bc=5)}function Eu(e,t,n){var r=Sn,o=Rc.transition;try{Rc.transition=null,Sn=1,function(e,t,n,r){do{ju()}while(null!==Jc);if(6&Pc)throw Error(ue(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-dn(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,i),e===Tc&&(Ic=Tc=null,Mc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Xc||(Xc=!0,Tu(an,(function(){return ju(),null}))),i=!!(15990&n.flags),!!(15990&n.subtreeFlags)||i){i=Rc.transition,Rc.transition=null;var a=Sn;Sn=1;var s=Pc;Pc|=4,Oc.current=null,function(e,t){if(ii=Yn,yo(e=vo())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(OU){n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||0!==o&&3!==d.nodeType||(s=a+o),d!==i||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(h=d.firstChild);)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===o&&(s=a),f===i&&++u===r&&(l=a),null!==(h=d.nextSibling))break;f=(d=f).parentNode}d=h}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ai={focusedElem:e,selectionRange:n},Yn=!1,nc=t;null!==nc;)if(e=(t=nc).child,1028&t.subtreeFlags&&null!==e)e.return=t,nc=e;else for(;null!==nc;){t=nc;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,m=p.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:al(t.type,g),m);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(ue(163))}}catch(OU){Nu(t,t.return,OU)}if(null!==(e=t.sibling)){e.return=t.return,nc=e;break}nc=t.return}p=ic,ic=!1}(e,n),wc(n,e),bo(ai),Yn=!!ii,ai=ii=null,e.current=n,_c(n),en(),Pc=s,Sn=a,Rc.transition=i}else e.current=n;if(Xc&&(Xc=!1,Jc=e,Qc=o),i=e.pendingLanes,0===i&&(Gc=null),function(e){if(un&&"function"==typeof un.onCommitFiberRoot)try{un.onCommitFiberRoot(cn,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),su(e,tn()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Zc)throw Zc=!1,e=Yc,Yc=null,e;!!(1&Qc)&&0!==e.tag&&ju(),i=e.pendingLanes,1&i?e===tu?eu++:(eu=0,tu=e):eu=0,Ki()}(e,t,n,r)}finally{Rc.transition=o,Sn=r}return null}function ju(){if(null!==Jc){var e=En(Qc),t=Rc.transition,n=Sn;try{if(Rc.transition=null,Sn=16>e?16:e,null===Jc)var r=!1;else{if(e=Jc,Jc=null,Qc=0,6&Pc)throw Error(ue(331));var o=Pc;for(Pc|=4,nc=e.current;null!==nc;){var i=nc,a=i.child;if(16&nc.flags){var s=i.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(nc=c;null!==nc;){var u=nc;switch(u.tag){case 0:case 11:case 15:ac(8,u,i)}var d=u.child;if(null!==d)d.return=u,nc=d;else for(;null!==nc;){var f=(u=nc).sibling,h=u.return;if(cc(u),u===c){nc=null;break}if(null!==f){f.return=h,nc=f;break}nc=h}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}nc=i}}if(2064&i.subtreeFlags&&null!==a)a.return=i,nc=a;else e:for(;null!==nc;){if(2048&(i=nc).flags)switch(i.tag){case 0:case 11:case 15:ac(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,nc=v;break e}nc=i.return}}var y=e.current;for(nc=y;null!==nc;){var b=(a=nc).child;if(2064&a.subtreeFlags&&null!==b)b.return=a,nc=b;else e:for(a=y;null!==nc;){if(2048&(s=nc).flags)try{switch(s.tag){case 0:case 11:case 15:sc(9,s)}}catch(x){Nu(s,s.return,x)}if(s===a){nc=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,nc=w;break e}nc=s.return}}if(Pc=o,Ki(),un&&"function"==typeof un.onPostCommitFiberRoot)try{un.onPostCommitFiberRoot(cn,e)}catch(x){}r=!0}return r}finally{Sn=n,Rc.transition=t}}return!1}function Cu(e,t,n){e=Ha(e,t=vl(0,t=hl(n,t),1),1),t=ou(),null!==e&&(_n(e,1,t),su(e,t))}function Nu(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Gc||!Gc.has(r))){t=Ha(t,e=yl(t,e=hl(n,e),1),1),e=ou(),null!==t&&(_n(t,1,e),su(t,e));break}}t=t.return}}function Au(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ou(),e.pingedLanes|=e.suspendedLanes&n,Tc===e&&(Mc&n)===n&&(4===Bc||3===Bc&&(130023424&Mc)===Mc&&500>tn()-Vc?mu(e,0):Uc|=n),su(e,t)}function Ou(e,t){0===t&&(1&e.mode?(t=gn,!(130023424&(gn<<=1))&&(gn=4194304)):t=1);var n=ou();null!==(e=Fa(e,t))&&(_n(e,t,n),su(e,n))}function Ru(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ou(e,n)}function Pu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ue(314))}null!==r&&r.delete(t),Ou(e,n)}function Tu(e,t){return Xt(e,t)}function Iu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Iu(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bu(e,t,n,r,o,i){var a=2;if(r=e,"function"==typeof e)Du(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ne:return Fu(n.children,o,i,t);case Ae:a=8,o|=8;break;case Oe:return(e=Mu(12,n,t,2|o)).elementType=Oe,e.lanes=i,e;case Ie:return(e=Mu(13,n,t,o)).elementType=Ie,e.lanes=i,e;case Me:return(e=Mu(19,n,t,o)).elementType=Me,e.lanes=i,e;case Be:return zu(n,o,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Re:a=10;break e;case Pe:a=9;break e;case Te:a=11;break e;case De:a=14;break e;case Le:a=16,r=null;break e}throw Error(ue(130,null==e?e:typeof e,""))}return(t=Mu(a,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Fu(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function zu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=Be,e.lanes=n,e.stateNode={isHidden:!1},e}function $u(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wu(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xn(0),this.expirationTimes=xn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xn(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Hu(e,t,n,r,o,i,a,s,l){return e=new Wu(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Mu(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$a(i),e}function Vu(e){if(!e)return Pi;e:{if(qt(e=e._reactInternals)!==e||1!==e.tag)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ue(171))}if(1===e.tag){var n=e.type;if(Li(n))return zi(e,n,t)}return t}function qu(e,t,n,r,o,i,a,s,l){return(e=Hu(n,r,!0,e,0,i,0,s,l)).context=Vu(null),n=e.current,(i=Wa(r=ou(),o=iu(n))).callback=null!=t?t:null,Ha(n,i,o),e.current.lanes=o,_n(e,o,r),su(e,r),e}function Ku(e,t,n,r){var o=t.current,i=ou(),a=iu(o);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Wa(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ha(o,t,a))&&(au(e,o,a,i),Va(e,o,a)),a}function Zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}Cc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)kl=!0;else{if(!(e.lanes&n||128&t.flags))return kl=!1,function(e,t,n){switch(t.tag){case 3:Tl(t),ya();break;case 5:ns(t);break;case 1:Li(t.type)&&$i(t);break;case 4:es(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ri(Ca,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ri(os,1&os.current),t.flags|=128,null):n&t.child.childLanes?$l(e,t,n):(Ri(os,1&os.current),null!==(e=Zl(e,t,n))?e.sibling:null);Ri(os,1&os.current);break;case 19:if(r=!!(n&t.childLanes),128&e.flags){if(r)return ql(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ri(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,Nl(e,t,n)}return Zl(e,t,n)}(e,t,n);kl=!!(131072&e.flags)}else kl=!1,ca&&1048576&t.flags&&oa(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Kl(e,t),e=t.pendingProps;var o=Di(t,Ti.current);Ia(t,n),o=ws(null,t,r,e,o,n);var i=xs();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(i=!0,$i(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,$a(t),o.updater=ll,t.stateNode=o,o._reactInternals=t,fl(t,r,e,n),t=Pl(null,t,r,!0,i,n)):(t.tag=0,ca&&i&&ia(t),Sl(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Kl(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return Du(e)?1:0;if(null!=e){if((e=e.$$typeof)===Te)return 11;if(e===De)return 14}return 2}(r),e=al(r,e),o){case 0:t=Ol(null,t,r,e,n);break e;case 1:t=Rl(null,t,r,e,n);break e;case 11:t=El(null,t,r,e,n);break e;case 14:t=jl(null,t,r,al(r.type,e),n);break e}throw Error(ue(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ol(e,t,r,o=t.elementType===r?o:al(r,o),n);case 1:return r=t.type,o=t.pendingProps,Rl(e,t,r,o=t.elementType===r?o:al(r,o),n);case 3:e:{if(Tl(t),null===e)throw Error(ue(387));r=t.pendingProps,o=(i=t.memoizedState).element,Ua(e,t),Ka(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Il(e,t,r,n,o=hl(Error(ue(423)),t));break e}if(r!==o){t=Il(e,t,r,n,o=hl(Error(ue(424)),t));break e}for(la=pi(t.stateNode.containerInfo.firstChild),sa=t,ca=!0,ua=null,n=ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ya(),r===o){t=Zl(e,t,n);break e}Sl(e,t,r,n)}t=t.child}return t;case 5:return ns(t),null===e&&pa(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,si(r,o)?a=null:null!==i&&si(r,i)&&(t.flags|=32),Al(e,t),Sl(e,t,a,n),t.child;case 6:return null===e&&pa(t),null;case 13:return $l(e,t,n);case 4:return es(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ea(t,null,r,n):Sl(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,El(e,t,r,o=t.elementType===r?o:al(r,o),n);case 7:return Sl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,Ri(Ca,r._currentValue),r._currentValue=a,null!==i)if(fo(i.value,a)){if(i.children===o.children&&!Ii.current){t=Zl(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){a=i.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=Wa(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ta(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===i.tag)a=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(a=i.return))throw Error(ue(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Ta(a,n,t),a=i.sibling}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===t){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}Sl(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ia(t,n),r=r(o=Ma(o)),t.flags|=1,Sl(e,t,r,n),t.child;case 14:return o=al(r=t.type,t.pendingProps),jl(e,t,r,o=al(r.type,o),n);case 15:return Cl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:al(r,o),Kl(e,t),t.tag=1,Li(r)?(e=!0,$i(t)):e=!1,Ia(t,n),ul(t,r,o),fl(t,r,o,n),Pl(null,t,r,!0,e,n);case 19:return ql(e,t,n);case 22:return Nl(e,t,n)}throw Error(ue(156,t.tag))};var Xu="function"==typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function ed(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function td(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nd(){}function rd(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"==typeof o){var s=o;o=function(){var e=Zu(a);s.call(e)}}Ku(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"==typeof r){var i=r;r=function(){var e=Zu(a);i.call(e)}}var a=qu(t,r,e,0,null,!1,0,"",nd);return e._reactRootContainer=a,e[bi]=a.current,Ko(8===e.nodeType?e.parentNode:e),pu(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var s=r;r=function(){var e=Zu(l);s.call(e)}}var l=Hu(e,0,!1,null,0,!1,0,"",nd);return e._reactRootContainer=l,e[bi]=l.current,Ko(8===e.nodeType?e.parentNode:e),pu((function(){Ku(t,l,n,r)})),l}(n,t,e,o,r);return Zu(a)}Qu.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ue(409));Ku(e,t,null,null)},Qu.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pu((function(){Ku(null,e,null,null)})),t[bi]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=An();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bn.length&&0!==t&&t<Bn[n].priority;n++);Bn.splice(n,0,e),0===n&&Un(e)}},jn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mn(t.pendingLanes);0!==n&&(kn(t,1|n),su(t,tn()),!(6&Pc)&&(qc=tn()+500,Ki()))}break;case 13:pu((function(){var t=Fa(e,1);if(null!==t){var n=ou();au(t,e,1,n)}})),Gu(e,1)}},Cn=function(e){if(13===e.tag){var t=Fa(e,134217728);if(null!==t)au(t,e,134217728,ou());Gu(e,134217728)}},Nn=function(e){if(13===e.tag){var t=iu(e),n=Fa(e,t);if(null!==n)au(n,e,t,ou());Gu(e,t)}},An=function(){return Sn},On=function(e,t){var n=Sn;try{return Sn=e,t()}finally{Sn=n}},jt=function(e,t,n){switch(t){case"input":if(rt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ji(r);if(!o)throw Error(ue(90));Je(r),rt(r,o)}}}break;case"textarea":ut(e,n);break;case"select":null!=(t=n.value)&&st(e,!!n.multiple,t,!1)}},Pt=hu,Tt=pu;var od={usingClientEntryPoint:!1,Events:[Si,Ei,ji,Ot,Rt,hu]},id={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ad={bundleType:id.bundleType,version:id.version,rendererPackageName:id.rendererPackageName,rendererConfig:id.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Yt(e))?null:e.stateNode},findFiberByHostInstance:id.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{cn=sd.inject(ad),un=sd}catch(rU){}}oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=od,oe.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ed(t))throw Error(ue(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ce,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},oe.createRoot=function(e,t){if(!ed(e))throw Error(ue(299));var n=!1,r="",o=Xu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Hu(e,1,!1,null,0,n,0,r,o),e[bi]=t.current,Ko(8===e.nodeType?e.parentNode:e),new Ju(t)},oe.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ue(188));throw e=Object.keys(e).join(","),Error(ue(268,e))}return e=null===(e=Yt(t))?null:e.stateNode},oe.flushSync=function(e){return pu(e)},oe.hydrate=function(e,t,n){if(!td(t))throw Error(ue(200));return rd(null,e,t,!0,n)},oe.hydrateRoot=function(e,t,n){if(!ed(e))throw Error(ue(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",a=Xu;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,o,0,i,a),e[bi]=t.current,Ko(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Qu(t)},oe.render=function(e,t,n){if(!td(t))throw Error(ue(200));return rd(null,e,t,!1,n)},oe.unmountComponentAtNode=function(e){if(!td(e))throw Error(ue(40));return!!e._reactRootContainer&&(pu((function(){rd(null,null,e,!1,(function(){e._reactRootContainer=null,e[bi]=null}))})),!0)},oe.unstable_batchedUpdates=hu,oe.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!td(n))throw Error(ue(200));if(null==e||void 0===e._reactInternals)throw Error(ue(38));return rd(e,t,n,!1,r)},oe.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),re.exports=oe;var ld=re.exports;const cd=a(ld);var ud,dd=ld;ud=dd.createRoot,dd.hydrateRoot;var fd={};Object.defineProperty(fd,"__esModule",{value:!0}),fd.parse=function(e,t){const n=new yd,r=e.length;if(r<2)return n;const o=(null==t?void 0:t.decode)||xd;let i=0;do{const t=e.indexOf("=",i);if(-1===t)break;const a=e.indexOf(";",i),s=-1===a?r:a;if(t>s){i=e.lastIndexOf(";",t-1)+1;continue}const l=bd(e,i,t),c=wd(e,t,l),u=e.slice(l,c);if(void 0===n[u]){let r=bd(e,t+1,s),i=wd(e,s,r);const a=o(e.slice(r,i));n[u]=a}i=s+1}while(i<r);return n},fd.serialize=function(e,t,n){const r=(null==n?void 0:n.encode)||encodeURIComponent;if(!hd.test(e))throw new TypeError(`argument name is invalid: ${e}`);const o=r(t);if(!pd.test(o))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+o;if(!n)return i;if(void 0!==n.maxAge){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!gd.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!md.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!function(e){return"[object Date]"===vd.call(e)}(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(i+="; HttpOnly");n.secure&&(i+="; Secure");n.partitioned&&(i+="; Partitioned");if(n.priority){switch("string"==typeof n.priority?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}}if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}}return i};const hd=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,pd=/^[\u0021-\u003A\u003C-\u007E]*$/,gd=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,md=/^[\u0020-\u003A\u003D-\u007E]*$/,vd=Object.prototype.toString,yd=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function bd(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function wd(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function xd(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(J$){return e}}var _d="popstate";function kd(e={}){return function(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,s="POP",l=null,c=u();null==c&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function d(){s="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:s,location:g.location,delta:t})}function f(e,t){s="PUSH";let n=Cd(g.location,e,t);c=u()+1;let r=jd(n,c),d=g.createHref(n);try{a.pushState(r,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;o.location.assign(d)}i&&l&&l({action:s,location:g.location,delta:1})}function h(e,t){s="REPLACE";let n=Cd(g.location,e,t);c=u();let r=jd(n,c),o=g.createHref(n);a.replaceState(r,"",o),i&&l&&l({action:s,location:g.location,delta:0})}function p(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);Sd(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:Nd(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let g={get action(){return s},get location(){return e(o,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(_d,d),l=e,()=>{o.removeEventListener(_d,d),l=null}},createHref:e=>t(o,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:h,go:e=>a.go(e)};return g}((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return Cd("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:Nd(t)}),0,e)}function Sd(e,t){if(!1===e||null==e)throw new Error(t)}function Ed(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(J$){}}}function jd(e,t){return{usr:e.state,key:e.key,idx:t}}function Cd(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Ad(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function Nd({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function Ad(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Od(e,t,n="/"){return function(e,t,n,r){let o="string"==typeof t?Ad(t):t,i=Hd(o.pathname||"/",n);if(null==i)return null;let a=Rd(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let l=0;null==s&&l<a.length;++l){let e=Wd(i);s=$d(a[l],e,r)}return s}(e,t,n,!1)}function Rd(e,t=[],n=[],r=""){let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(Sd(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let s=Zd([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(Sd(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${s}".`),Rd(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:zd(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of Pd(e.path))o(e,t,r);else o(e,t)})),t}function Pd(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=Pd(r.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}var Td=/^:[\w-]+$/,Id=3,Md=2,Dd=1,Ld=10,Bd=-2,Fd=e=>"*"===e;function zd(e,t){let n=e.split("/"),r=n.length;return n.some(Fd)&&(r+=Bd),t&&(r+=Md),n.filter((e=>!Fd(e))).reduce(((e,t)=>e+(Td.test(t)?Id:""===t?Dd:Ld)),r)}function $d(e,t,n=!1){let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=Ud({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=Ud({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:Zd([i,u.pathname]),pathnameBase:Yd(Zd([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=Zd([i,u.pathnameBase]))}return a}function Ud(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){Ed("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1),l=r.reduce(((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=s[r]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const o=s[r];return e[t]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function Wd(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return Ed(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Hd(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Vd(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qd(e){let t=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function Kd(e,t,n,r=!1){let o;"string"==typeof e?o=Ad(e):(o={...e},Sd(!o.pathname||!o.pathname.includes("?"),Vd("?","pathname","search",o)),Sd(!o.pathname||!o.pathname.includes("#"),Vd("#","pathname","hash",o)),Sd(!o.search||!o.search.includes("#"),Vd("#","search","hash",o)));let i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(null==s)i=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:o=""}="string"==typeof e?Ad(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:Gd(r),hash:Xd(o)}}(o,i),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Zd=e=>e.join("/").replace(/\/\/+/g,"/"),Yd=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gd=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Xd=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Jd=["POST","PUT","PATCH","DELETE"];new Set(Jd);var Qd=["GET",...Jd];new Set(Qd);var ef=q.createContext(null);ef.displayName="DataRouter";var tf=q.createContext(null);tf.displayName="DataRouterState";var nf=q.createContext({isTransitioning:!1});nf.displayName="ViewTransition",q.createContext(new Map).displayName="Fetchers",q.createContext(null).displayName="Await";var rf=q.createContext(null);rf.displayName="Navigation";var of=q.createContext(null);of.displayName="Location";var af=q.createContext({outlet:null,matches:[],isDataRoute:!1});af.displayName="Route";var sf=q.createContext(null);function lf(){return null!=q.useContext(of)}function cf(){return Sd(lf(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(of).location}sf.displayName="RouteError";var uf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function df(e){q.useContext(rf).static||q.useLayoutEffect(e)}function ff(){let{isDataRoute:e}=q.useContext(af);return e?function(){let{router:e}=function(e){let t=q.useContext(ef);return Sd(t,xf(e)),t}("useNavigate"),t=_f("useNavigate"),n=q.useRef(!1);df((()=>{n.current=!0}));let r=q.useCallback((async(r,o={})=>{Ed(n.current,uf),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))}),[e,t]);return r}():function(){Sd(lf(),"useNavigate() may be used only in the context of a <Router> component.");let e=q.useContext(ef),{basename:t,navigator:n}=q.useContext(rf),{matches:r}=q.useContext(af),{pathname:o}=cf(),i=JSON.stringify(qd(r)),a=q.useRef(!1);df((()=>{a.current=!0}));let s=q.useCallback(((r,s={})=>{if(Ed(a.current,uf),!a.current)return;if("number"==typeof r)return void n.go(r);let l=Kd(r,JSON.parse(i),o,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Zd([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)}),[t,n,i,o,e]);return s}()}var hf=q.createContext(null);function pf(){let{matches:e}=q.useContext(af),t=e[e.length-1];return t?t.params:{}}function gf(e,{relative:t}={}){let{matches:n}=q.useContext(af),{pathname:r}=cf(),o=JSON.stringify(qd(n));return q.useMemo((()=>Kd(e,JSON.parse(o),r,"path"===t)),[e,o,r,t])}function mf(e,t,n,r){Sd(lf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:i}=q.useContext(rf),{matches:a}=q.useContext(af),s=a[a.length-1],l=s?s.params:{},c=s?s.pathname:"/",u=s?s.pathnameBase:"/",d=s&&s.route;{let e=d&&d.path||"";Sf(c,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,h=cf();if(t){var p;let e="string"==typeof t?Ad(t):t;Sd("/"===u||(null===(p=e.pathname)||void 0===p?void 0:p.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=h;let g=f.pathname||"/",m=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=!i&&n&&n.matches&&n.matches.length>0?n.matches:Od(e,{pathname:m});Ed(d||null!=v,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ed(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],n=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,o=null==n?void 0:n.errors;if(null!=o){let e=r.findIndex((e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id])));Sd(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let i=!1,a=-1;if(n)for(let s=0;s<r.length;s++){let e=r[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=s),e.route.id){let{loaderData:t,errors:o}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!o||void 0===o[e.route.id]);if(e.route.lazy||s){i=!0,r=a>=0?r.slice(0,a+1):[r[0]];break}}}return r.reduceRight(((e,s,l)=>{let c,u=!1,d=null,f=null;n&&(c=o&&s.route.id?o[s.route.id]:void 0,d=s.route.errorElement||yf,i&&(a<0&&0===l?(Sf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,f=null):a===l&&(u=!0,f=s.route.hydrateFallbackElement||null)));let h=t.concat(r.slice(0,l+1)),p=()=>{let t;return t=c?d:u?f:s.route.Component?q.createElement(s.route.Component,null):s.route.element?s.route.element:e,q.createElement(wf,{match:s,routeContext:{outlet:e,matches:h,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===l)?q.createElement(bf,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()}),null)}(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Zd([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Zd([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&y?q.createElement(of.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},y):y}function vf(){let e=function(){var e;let t=q.useContext(sf),n=function(e){let t=q.useContext(tf);return Sd(t,xf(e)),t}("useRouteError"),r=_f("useRouteError");if(void 0!==t)return t;return null===(e=n.errors)||void 0===e?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:i},"ErrorBoundary")," or"," ",q.createElement("code",{style:i},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:o},n):null,a)}var yf=q.createElement(vf,null),bf=class extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?q.createElement(af.Provider,{value:this.props.routeContext},q.createElement(sf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wf({routeContext:e,match:t,children:n}){let r=q.useContext(ef);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(af.Provider,{value:e},n)}function xf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _f(e){let t=function(e){let t=q.useContext(af);return Sd(t,xf(e)),t}(e),n=t.matches[t.matches.length-1];return Sd(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var kf={};function Sf(e,t,n){t||kf[e]||(kf[e]=!0,Ed(!1,n))}function Ef(e){return function(e){let t=q.useContext(af).outlet;return t?q.createElement(hf.Provider,{value:e},t):t}(e.context)}function jf(e){Sd(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Cf({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:i=!1}){Sd(!lf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),s=q.useMemo((()=>({basename:a,navigator:o,static:i,future:{}})),[a,o,i]);"string"==typeof n&&(n=Ad(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,h=q.useMemo((()=>{let e=Hd(l,a);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:f},navigationType:r}}),[a,l,c,u,d,f,r]);return Ed(null!=h,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==h?null:q.createElement(rf.Provider,{value:s},q.createElement(of.Provider,{children:t,value:h}))}function Nf({children:e,location:t}){return mf(Af(e),t)}function Af(e,t=[]){let n=[];return q.Children.forEach(e,((e,r)=>{if(!q.isValidElement(e))return;let o=[...t,r];if(e.type===q.Fragment)return void n.push.apply(n,Af(e.props.children,o));Sd(e.type===jf,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Sd(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Af(e.props.children,o)),n.push(i)})),n}q.memo((function({routes:e,future:t,state:n}){return mf(e,void 0,n,t)}));var Of="get",Rf="application/x-www-form-urlencoded";function Pf(e){return null!=e&&"string"==typeof e.tagName}var Tf=null;var If=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mf(e){return null==e||If.has(e)?e:(Ed(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rf}"`),null)}function Df(e,t){let n,r,o,i,a;if(Pf(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?Hd(a,t):null,n=e.getAttribute("method")||Of,o=Mf(e.getAttribute("enctype"))||Rf,i=new FormData(e)}else if(function(e){return Pf(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Pf(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(r=s?Hd(s,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Of,o=Mf(e.getAttribute("formenctype"))||Mf(a.getAttribute("enctype"))||Rf,i=new FormData(a,e),!function(){if(null===Tf)try{new FormData(document.createElement("form"),0),Tf=!1}catch(J$){Tf=!0}return Tf}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,r)}}else{if(Pf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Of,r=null,o=Rf,a=e}var s;return i&&"text/plain"===o&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:i,body:a}}function Lf(e,t){if(!1===e||null==e)throw new Error(t)}function Bf(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Ff(e,t,r){return function(e,t){let n=new Set;return new Set(t),e.reduce(((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e}),[])}((await Promise.all(e.map((async e=>{let o=t.routes[e.route.id];if(o){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await n.import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}(o,r);return e.links?e.links():[]}return[]})))).flat(1).filter(Bf).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}function zf(e,t,n,r,o,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter(((e,t)=>a(e,t)||s(e,t))):"data"===i?t.filter(((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||s(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0})):[]}function $f(e,t,{includeHydrateFallback:n}={}){return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o})).flat(1),[...new Set(r)];var r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uf(){let e=q.useContext(ef);return Lf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}var Wf=q.createContext(void 0);function Hf(){let e=q.useContext(Wf);return Lf(e,"You must render this element inside a <HydratedRouter> element"),e}function Vf(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function qf({page:e,...t}){let{router:n}=Uf(),r=q.useMemo((()=>Od(n.routes,e,n.basename)),[n.routes,e,n.basename]);return r?q.createElement(Kf,{page:e,matches:r,...t}):null}function Kf({page:e,matches:t,...n}){let r=cf(),{manifest:o,routeModules:i}=Hf(),{basename:a}=Uf(),{loaderData:s,matches:l}=function(){let e=q.useContext(tf);return Lf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=q.useMemo((()=>zf(e,t,l,o,r,"data")),[e,t,l,o,r]),u=q.useMemo((()=>zf(e,t,l,o,r,"assets")),[e,t,l,o,r]),d=q.useMemo((()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach((e=>{var t;let r=o.routes[e.route.id];r&&r.hasLoader&&(!c.some((t=>t.route.id===e.route.id))&&e.route.id in s&&null!==(t=i[e.route.id])&&void 0!==t&&t.shouldRevalidate||r.hasClientLoader?l=!0:n.add(e.route.id))})),0===n.size)return[];let u=function(e,t){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===Hd(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}(e,a);return l&&n.size>0&&u.searchParams.set("_routes",t.filter((e=>n.has(e.route.id))).map((e=>e.route.id)).join(",")),[u.pathname+u.search]}),[a,s,r,o,c,t,e,i]),f=q.useMemo((()=>$f(u,o)),[u,o]),h=function(e){let{manifest:t,routeModules:n}=Hf(),[r,o]=q.useState([]);return q.useEffect((()=>{let r=!1;return Ff(e,t,n).then((e=>{r||o(e)})),()=>{r=!0}}),[e,t,n]),r}(u);return q.createElement(q.Fragment,null,d.map((e=>q.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n}))),f.map((e=>q.createElement("link",{key:e,rel:"modulepreload",href:e,...n}))),h.map((({key:e,link:t})=>q.createElement("link",{key:e,...t}))))}function Zf(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}Wf.displayName="FrameworkContext";var Yf="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Yf&&(window.__reactRouterVersion="7.6.0")}catch(J$){}function Gf({basename:e,children:t,window:n}){let r=q.useRef();null==r.current&&(r.current=kd({window:n,v5Compat:!0}));let o=r.current,[i,a]=q.useState({action:o.action,location:o.location}),s=q.useCallback((e=>{q.startTransition((()=>a(e)))}),[a]);return q.useLayoutEffect((()=>o.listen(s)),[o,s]),q.createElement(Cf,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:o})}var Xf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jf=q.forwardRef((function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:i,state:a,target:s,to:l,preventScrollReset:c,viewTransition:u,...d},f){let h,{basename:p}=q.useContext(rf),g="string"==typeof l&&Xf.test(l),m=!1;if("string"==typeof l&&g&&(h=l,Yf))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=Hd(t.pathname,p);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:m=!0}catch(J$){Ed(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(e,{relative:t}={}){Sd(lf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=q.useContext(rf),{hash:o,pathname:i,search:a}=gf(e,{relative:t}),s=i;return"/"!==n&&(s="/"===i?n:Zd([n,i])),r.createHref({pathname:s,search:a,hash:o})}(l,{relative:r}),[y,b,w]=function(e,t){let n=q.useContext(Wf),[r,o]=q.useState(!1),[i,a]=q.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,f=q.useRef(null);q.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),q.useEffect((()=>{if(r){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let h=()=>{o(!0)},p=()=>{o(!1),a(!1)};return n?"intent"!==e?[i,f,{}]:[i,f,{onFocus:Vf(s,h),onBlur:Vf(l,p),onMouseEnter:Vf(c,h),onMouseLeave:Vf(u,p),onTouchStart:Vf(d,h)}]:[!1,f,{}]}(n,d),x=function(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:i,viewTransition:a}={}){let s=ff(),l=cf(),c=gf(e,{relative:i});return q.useCallback((u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:Nd(l)===Nd(c);s(e,{replace:t,state:r,preventScrollReset:o,relative:i,viewTransition:a})}}),[l,s,c,n,r,t,e,o,i,a])}(l,{replace:i,state:a,target:s,preventScrollReset:c,relative:r,viewTransition:u});let _=q.createElement("a",{...d,...w,href:h||v,onClick:m||o?e:function(t){e&&e(t),t.defaultPrevented||x(t)},ref:Zf(f,b),target:s,"data-discover":g||"render"!==t?void 0:"true"});return y&&!g?q.createElement(q.Fragment,null,_,q.createElement(qf,{page:v})):_}));Jf.displayName="Link";var Qf=q.forwardRef((function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:i,viewTransition:a,children:s,...l},c){let u=gf(i,{relative:l.relative}),d=cf(),f=q.useContext(tf),{navigator:h,basename:p}=q.useContext(rf),g=null!=f&&function(e,t={}){let n=q.useContext(nf);Sd(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=th("useViewTransitionState"),o=gf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Hd(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Hd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=Ud(o.pathname,a)||null!=Ud(o.pathname,i)}(u)&&!0===a,m=h.encodeLocation?h.encodeLocation(u).pathname:u.pathname,v=d.pathname,y=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(v=v.toLowerCase(),y=y?y.toLowerCase():null,m=m.toLowerCase()),y&&p&&(y=Hd(y,p)||y);const b="/"!==m&&m.endsWith("/")?m.length-1:m.length;let w,x=v===m||!r&&v.startsWith(m)&&"/"===v.charAt(b),_=null!=y&&(y===m||!r&&y.startsWith(m)&&"/"===y.charAt(m.length)),k={isActive:x,isPending:_,isTransitioning:g},S=x?e:void 0;w="function"==typeof n?n(k):[n,x?"active":null,_?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let E="function"==typeof o?o(k):o;return q.createElement(Jf,{...l,"aria-current":S,className:w,ref:c,style:E,to:i,viewTransition:a},"function"==typeof s?s(k):s)}));Qf.displayName="NavLink";var eh=q.forwardRef((({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:i,method:a=Of,action:s,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},h)=>{let p=function(){let{router:e}=th("useSubmit"),{basename:t}=q.useContext(rf),n=_f("useRouteId");return q.useCallback((async(r,o={})=>{let{action:i,method:a,encType:s,formData:l,body:c}=Df(r,t);if(!1===o.navigate){let t=o.fetcherKey||rh();await e.fetch(t,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||a,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||a,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})}),[e,t,n])}(),g=function(e,{relative:t}={}){let{basename:n}=q.useContext(rf),r=q.useContext(af);Sd(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),i={...gf(e||".",{relative:t})},a=cf();if(null==e){i.search=a.search;let e=new URLSearchParams(i.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();i.search=n?`?${n}`:""}}e&&"."!==e||!o.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:Zd([n,i.pathname]));return Nd(i)}(s,{relative:c}),m="get"===a.toLowerCase()?"get":"post",v="string"==typeof s&&Xf.test(s);return q.createElement("form",{ref:h,method:m,action:g,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,s=(null==r?void 0:r.getAttribute("formmethod"))||a;p(r||e.currentTarget,{fetcherKey:t,method:s,navigate:n,replace:o,state:i,relative:c,preventScrollReset:u,viewTransition:d})},...f,"data-discover":v||"render"!==e?void 0:"true"})}));function th(e){let t=q.useContext(ef);return Sd(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}eh.displayName="Form";var nh=0,rh=()=>`__${String(++nh)}__`;var oh={};Object.defineProperty(oh,"__esModule",{value:!0});var ih=oh.newRidgeState=void 0;const ah=q,sh="undefined"!=typeof window||"undefined"!=typeof document?ah.useLayoutEffect:ah.useEffect,lh=(e,t)=>e===t,ch={};ih=oh.newRidgeState=function(e,t){let n=[],r=e;function o(e,o){const i=r;r=e instanceof Function?e(r):e,setTimeout((()=>{var e;n.forEach((e=>e(r,i))),null==o||o(r,i),null===(e=null==t?void 0:t.onSet)||void 0===e||e.call(t,r,i)}))}function i(e){return n.push(e),()=>{n=n.filter((t=>t!==e))}}function a(){const[e,t]=(0,ah.useState)(r);var n;return sh((()=>i(n)),[n=t]),[e,o]}return{use:a,useSelector:function(e,t=lh){const[n]=a();return function(e,t=lh){const n=(0,ah.useRef)(ch);let r=n.current;return sh((()=>{n.current=r})),n.current!==ch&&t(e,n.current)||(r=e),r}(e(n),t)},useValue:()=>a()[0],get:()=>r,set:o,reset:()=>o(e),subscribe:i}};let uh=0;const dh=ih([]);function fh(e,t){const n=uh++;return dh.set((r=>[...r,{id:n,tag:e,Component:t}])),n}function hh(e){dh.set((t=>t.filter((t=>t.id!==e))))}const ph=()=>{const e=dh.useValue();return ne.jsx("div",{style:{zIndex:9999},children:e.map((({id:e,Component:t})=>ne.jsx(t,{id:e},e)))})},gh=ih(!1),mh=()=>gh.set(!0),vh=()=>gh.set(!1);class yh extends Error{}function bh(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return atob(t)}}function wh(e,t){if("string"!=typeof e)throw new yh("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,r=e.split(".")[n];if("string"!=typeof r)throw new yh(`Invalid token specified: missing part #${n+1}`);let o;try{o=bh(r)}catch(J$){throw new yh(`Invalid token specified: invalid base64 for part #${n+1} (${J$.message})`)}try{return JSON.parse(o)}catch(J$){throw new yh(`Invalid token specified: invalid json for part #${n+1} (${J$.message})`)}}function xh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}yh.prototype.name="InvalidTokenError";var _h={exports:{}};
/*!
          localForage -- Offline Storage, Improved
          Version 1.10.0
          https://localforage.github.io/localForage
          (c) 2013-2017 Mozilla, Apache License 2.0
      */!function(e){e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(!s&&xh)return xh(a);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return o(n||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var i=xh,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}function d(e){1!==c.push(e)||r||n()}t.exports=d}).call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(J$){return i.reject(e,J$)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=p(a);"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(J$){n.status="error",n.value=J$}return n}function g(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,c=new this(o);++l<n;)u(e[l],l);return c;function u(e,o){function l(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(c,a))}t.resolve(e).then(l,(function(e){r||(r=!0,i.reject(c,e))}))}}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)l(e[a]);return s;function l(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=g,c.reject=m,c.all=v,c.race=y},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(J$){return}}var a=i();function s(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(J$){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(J$){if("TypeError"!==J$.name)throw J$;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function f(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,m={},v=Object.prototype.toString,y="readonly",b="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function x(e){return new c((function(t){var n=e.transaction(p,b),r=l([""]);n.objectStore(p).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function _(e){return"boolean"==typeof g?c.resolve(g):x(e).then((function(e){return g=e}))}function k(e){var t=m[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function S(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function j(e,t){return new c((function(n,r){if(m[e.name]=m[e.name]||D(),e.db){if(!t)return n(e.db);k(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(p)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),S(e)}}))}function C(e){return j(e,!1)}function N(e){return j(e,!0)}function A(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function O(e){return new c((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function R(e){return l([w(atob(e.data))],{type:e.type})}function P(e){return e&&e.__local_forage_encoded_blob}function T(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function I(e){k(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,A(e)?N(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw E(e,t),t}))}function M(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),N(e)})).then((function(){return I(e).then((function(){M(e,t,n,r-1)}))})).catch(n);n(i)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=m[n.name];o||(o=D(),m[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=T);var i=[];function a(){return c.resolve()}for(var s=0;s<o.forages.length;s++){var l=o.forages[s];l!==t&&i.push(l._initReady().catch(a))}var u=o.forages.slice(0);return c.all(i).then((function(){return n.db=o.db,C(n)})).then((function(e){return n.db=e,A(n,t._defaultConfig.version)?N(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function B(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){M(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),P(e)&&(e=R(e)),t(e)},a.onerror=function(){r(a.error)}}catch(J$){r(J$)}}))})).catch(r)}));return u(r,t),r}function F(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){M(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;P(r)&&(r=R(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(J$){r(J$)}}))})).catch(r)}));return u(r,t),r}function z(e,t,n){var r=this;e=f(e);var o=new c((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===v.call(t)?_(i.db).then((function(e){return e?t:O(t)})):t})).then((function(t){M(r._dbInfo,b,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=l.error?l.error:l.transaction.error;o(e)}}catch(J$){o(J$)}}))})).catch(o)}));return u(o,n),o}function $(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){M(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(J$){r(J$)}}))})).catch(r)}));return u(r,t),r}function U(e){var t=this,n=new c((function(e,n){t.ready().then((function(){M(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(J$){n(J$)}}))})).catch(n)}));return u(n,e),n}function W(e){var t=this,n=new c((function(e,n){t.ready().then((function(){M(t._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(J$){n(J$)}}))})).catch(n)}));return u(n,e),n}function H(e,t){var n=this,r=new c((function(t,r){e<0?t(null):n.ready().then((function(){M(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,l=a.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(J$){r(J$)}}))})).catch(r)}));return u(r,t),r}function V(e){var t=this,n=new c((function(e,n){t.ready().then((function(){M(t._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(J$){n(J$)}}))})).catch(n)}));return u(n,e),n}function q(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):C(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;k(e);var r=m[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}var l=new c((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return l.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,S(n._dbInfo)}})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}})):i.then((function(t){k(e);var n=m[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var i=new c((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return i.then((function(e){n.db=e;for(var t=0;t<r.length;t++)S(r[t]._dbInfo)})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}))}else r=c.reject("Invalid arguments");return u(r,t),r}var K={_driver:"asyncStorage",_initStorage:L,_support:s(),iterate:F,getItem:B,setItem:z,removeItem:$,clear:U,length:W,key:H,keys:V,dropInstance:q};function Z(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G="~~local_forage_type~",X=/^~~local_forage_type~([^~]+)~/,J="__lfsc__:",Q=J.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",le="ui32",ce="fl32",ue="fl64",de=Q+ee.length,fe=Object.prototype.toString;function he(e){var t,n,r,o,i,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(t=0;t<s;t+=4)n=Y.indexOf(e[t]),r=Y.indexOf(e[t+1]),o=Y.indexOf(e[t+2]),i=Y.indexOf(e[t+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|o>>2,u[l++]=(3&o)<<6|63&i;return c}function pe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=Y[n[t]>>2],r+=Y[(3&n[t])<<4|n[t+1]>>4],r+=Y[(15&n[t+1])<<2|n[t+2]>>6],r+=Y[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ge(e,t){var n="";if(e&&(n=fe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===fe.call(e.buffer))){var r,o=J;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=se:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=le:"[object Float32Array]"===n?o+=ce:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+pe(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=G+e.type+"~"+pe(this.result);t(J+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(J$){console.error("Couldn't convert value into a JSON string: ",e),t(null,J$)}}function me(e){if(e.substring(0,Q)!==J)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Q,de);if(r===te&&X.test(n)){var o=n.match(X);t=o[1],n=n.substring(o[0].length)}var i=he(n);switch(r){case ee:return i;case te:return l([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case le:return new Uint32Array(i);case ce:return new Float32Array(i);case ue:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ve={serialize:ge,deserialize:me,stringToBuffer:he,bufferToString:pe};function ye(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function be(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new c((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(J$){return r(J$)}n.db.transaction((function(o){ye(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ve,o}function we(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):ye(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function xe(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function _e(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var l=i.item(s),c=l.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=e(c,l.key,s+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function ke(e,t,n,r){var o=this;e=f(e);var i=new c((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,l=o._dbInfo;l.serializer.serialize(t,(function(t,c){c?a(c):l.db.transaction((function(n){we(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(ke.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return u(i,n),i}function Se(e,t,n){return ke.apply(this,[e,t,n,1])}function Ee(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function je(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ce(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ne(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ae(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Oe(e){return new c((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Re(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return r=e.name?new c((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Oe(r))})).then((function(e){return new c((function(t,n){e.db.transaction((function(r){function o(e){return new c((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));c.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),u(r,t),r}var Pe={_driver:"webSQLStorage",_initStorage:be,_support:Z(),iterate:_e,getItem:xe,setItem:Se,removeItem:Ee,clear:je,length:Ce,key:Ne,keys:Ae,dropInstance:Re};function Te(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(J$){return!1}}function Ie(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Me(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(J$){return!0}}function De(){return!Me()||localStorage.length>0}function Le(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Ie(e,t._defaultConfig),De()?(t._dbInfo=n,n.serializer=ve,c.resolve()):c.reject()}function Be(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function Fe(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function ze(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var l=localStorage.key(s);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(o),a++)))return c}}}));return u(r,t),r}function $e(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function We(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function He(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function Ve(e,t,n){var r=this;e=f(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(J$){"QuotaExceededError"!==J$.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==J$.name||i(J$),i(J$)}}))}))}));return u(o,n),o}function qe(e,t){if(t=h.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new c((function(t){e.storeName?t(Ie(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),u(r,t),r}var Ke={_driver:"localStorageWrapper",_initStorage:Le,_support:Te(),iterate:ze,getItem:Fe,setItem:Ve,removeItem:He,clear:Be,length:We,key:$e,keys:Ue,dropInstance:qe},Ze=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var n=e.length,r=0;r<n;){if(Ze(e[r],t))return!0;r++}return!1},Ge=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Xe={},Je={},Qe={INDEXEDDB:K,WEBSQL:Pe,LOCALSTORAGE:Ke},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ge(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),Qe)if(Qe.hasOwnProperty(n)){var r=Qe[n],i=r._driver;this[n]=i,Xe[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new c((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var l=i[a];if((!Ye(tt,l)||e[l])&&"function"!=typeof e[l])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var f=function(n){Xe[r]&&console.info("Redefining LocalForage driver: "+r),Xe[r]=e,Je[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(J$){n(J$)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Xe[e]?c.resolve(Xe[e]):c.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=c.resolve(ve);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ge(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=c.reject(s),r._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=c.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Je[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4)}(_h);const kh=a(_h.exports),Sh={SecureStorage:"ionicSecureStorage",IndexedDB:kh.INDEXEDDB,LocalStorage:kh.LOCALSTORAGE},Eh={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[Sh.SecureStorage,Sh.IndexedDB,Sh.LocalStorage]};let jh=class{constructor(e=Eh){this._db=null,this._secureStorageDriver=null;const t=Object.assign({},Eh,e||{});this._config=t}async create(){const e=kh.createInstance(this._config);return this._db=e,await e.setDriver(this._config.driverOrder||[]),this}async defineDriver(e){return e._driver===Sh.SecureStorage&&(this._secureStorageDriver=e),kh.defineDriver(e)}get driver(){var e;return(null===(e=this._db)||void 0===e?void 0:e.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(e){return this.assertDb().getItem(e)}set(e,t){return this.assertDb().setItem(e,t)}remove(e){return this.assertDb().removeItem(e)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(e){return this.assertDb().iterate(e)}setEncryptionKey(e){var t;if(!this._secureStorageDriver)throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available");null===(t=this._secureStorageDriver)||void 0===t||t.setEncryptionKey(e)}};class Ch{constructor(t){e(this,"store",void 0),e(this,"isCreated",!1),this.store=new jh({name:t}),this.createStorage()}async createStorage(){await this.store.create(),this.isCreated=!0}get(e){return this.store.get(e)}set(e,t){return this.store.set(e,t)}remove(e){return this.store.remove(e)}clear(){return this.store.clear()}keys(){return this.store.keys()}length(){return this.store.length()}forEach(e){return this.store.forEach(e)}}const Nh=new Ch("settings"),Ah=new Ch("auth"),Oh=new Ch("sync"),Rh=new Ch("misc"),Ph=ih({isLoggedIn:!1,user:null,synced_characters:[]}),Th=async e=>{await Ah.set("token",e);const t=wh(e);return Ph.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]}),t},Ih=e=>{Ph.set((t=>({...t,synced_characters:e}))),Oh.set("synced_characters",e)};function Mh(e,t){if(!e||"center"===t)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};switch(t){case"top":return{top:e.top-12+"px",left:`${e.left}px`,transform:"translate(0, -100%)"};case"bottom":default:return{top:`${e.bottom+12}px`,left:`${e.left}px`,transform:"translate(0, 0)"};case"left":return{top:`${e.top}px`,left:e.left-12+"px",transform:"translate(-100%, 0)"};case"right":return{top:`${e.top}px`,left:`${e.right+12}px`,transform:"translate(0, 0)"}}}(async()=>{const e=await Ah.get("token");if(e){const t=wh(e);Ph.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]})}})();const Dh=({steps:e,onFinish:t})=>{const[n,r]=q.useState(0),o=function(e,t){const[n,r]=q.useState(null),o=q.useRef(null);return q.useEffect((()=>{let t=null;const n=()=>{if(e){if(t=document.querySelector(e),t){const e=t.getBoundingClientRect();r((t=>t&&JSON.stringify(t)===JSON.stringify(e)?t:e))}o.current=requestAnimationFrame(n)}};return e&&n(),()=>{o.current&&cancelAnimationFrame(o.current)}}),[e,t]),n}(e[n].selector,!0),i=ff(),a=e[n];return o?cd.createPortal(ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 pointer-events-auto"}),ne.jsx("div",{className:"fixed border-2 border-yellow-400 pointer-events-auto z-50 rounded-lg transition-all duration-300",style:{top:o.top+window.scrollY,left:o.left+window.scrollX,width:o.width,height:o.height}}),ne.jsxs("div",{className:"fixed z-50 p-4 bg-white text-black rounded shadow-xl max-w-xs",style:Mh(o,a.position||"bottom"),children:[ne.jsx("p",{className:"mb-2",children:a.content}),!a.waitForClick&&ne.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded",onClick:()=>{a.navTo&&i(a.navTo),n+1<e.length?r(n+1):t()},children:n+1<e.length?"Next":"Finish"})]})]}),document.body):null},Lh=[{id:"step1",selector:"#nav-Home",content:"Welcome to the app! This is the home page, where you can see our latest news and updates.",position:"bottom"},{id:"step2",selector:"#nav-Characters",content:"This is the character manager, where you can create and manage your characters. You can also import characters from json files.",position:"bottom",navTo:"characters"},{id:"step3",selector:"#nav-Library",content:"Library is where you can find all the systems you have downloaded. You can also create your own systems here.",position:"bottom",navTo:"library"},{id:"step4",selector:"#nav-Settings",content:"And this is the settings page, where you can change your settings and preferences. You can also manage your account here.",position:"top",navTo:"settings"},{id:"step5",selector:"#nav-Marketplace",content:"This is the marketplace, where you can find systems to use. You can search for systems by name or filter by license type.",position:"bottom",navTo:"marketplace"}],Bh=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()
/**
       * @license lucide-react v0.469.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */;var Fh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
       * @license lucide-react v0.469.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */const zh=q.forwardRef((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:a,...s},l)=>q.createElement("svg",{ref:l,...Fh,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Bh("lucide",o),...s},[...a.map((([e,t])=>q.createElement(e,t))),...Array.isArray(i)?i:[i]]))),$h=(e,t)=>{const n=q.forwardRef((({className:n,...r},o)=>{return q.createElement(zh,{ref:o,iconNode:t,className:Bh(`lucide-${i=e,i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var i}));return n.displayName=`${e}`,n},Uh=$h("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Wh=$h("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Hh=$h("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vh=$h("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),qh=$h("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kh=$h("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Zh=$h("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Yh={success:"bg-green-600 text-white",error:"bg-red-600 text-white"},Gh=({id:e,message:t,type:n="success",onClose:r})=>ne.jsxs("div",{className:`rounded-lg shadow-lg px-4 py-3 flex items-center justify-between w-72 ${Yh[n]}`,children:[ne.jsx("span",{children:t}),ne.jsx("button",{onClick:r,children:ne.jsx(Zh,{className:"w-4 h-4 ml-2 opacity-80 hover:opacity-100"})})]}),Xh=[];
/**
       * @license lucide-react v0.469.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */for(let e=0;e<256;++e)Xh.push((e+256).toString(16).slice(1));let Jh;const Qh=new Uint8Array(16);const ep={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function tp(e,t,n){var r,o,i,a;if(ep.randomUUID&&!e)return ep.randomUUID();const s=null!==(r=null!==(o=(e=e||{}).random)&&void 0!==o?o:null===(i=(a=e).rng)||void 0===i?void 0:i.call(a))&&void 0!==r?r:function(){if(!Jh){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Jh=crypto.getRandomValues.bind(crypto)}return Jh(Qh)}();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=15&s[6]|64,s[8]=63&s[8]|128,function(e,t=0){return(Xh[e[t+0]]+Xh[e[t+1]]+Xh[e[t+2]]+Xh[e[t+3]]+"-"+Xh[e[t+4]]+Xh[e[t+5]]+"-"+Xh[e[t+6]]+Xh[e[t+7]]+"-"+Xh[e[t+8]]+Xh[e[t+9]]+"-"+Xh[e[t+10]]+Xh[e[t+11]]+Xh[e[t+12]]+Xh[e[t+13]]+Xh[e[t+14]]+Xh[e[t+15]]).toLowerCase()}(s)}const np=ih([]),rp=e=>{np.set((t=>t.filter((t=>t.id!==e))))},op=(e,t="success",n=3e3)=>{const r=tp();np.set((n=>[...n,{id:r,message:e,type:t}])),setTimeout((()=>rp(r)),n)},ip=()=>{const e=np.useValue();return ne.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map((e=>ne.jsx(Gh,{...e,onClose:()=>rp(e.id)},e.id)))})},ap={primary:"fantasy-accent-gradient text-fantasy-dark transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40 border-none",light:"text-neutral-900 bg-white border-neutral-300 hover:bg-neutral-100 focus:ring-neutral-100 dark:bg-neutral-800 dark:text-white dark:border-neutral-600 dark:hover:bg-neutral-700 dark:hover:border-neutral-600 dark:focus:ring-neutral-700",danger:"border-red-600 text-red-600 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-red-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition",disabled:"border-neutral-600 bg-neutral-400 text-fantasy-text-muted cursor-not-allowed opacity-50"},sp=({children:e,className:t="",color:n,disabled:r=!1,onClick:o,id:i})=>ne.jsx("button",{id:i,type:"button",className:`${r?ap.disabled:ap[n]} me-2.5 focus:ring-4 border focus:outline-none font-medium rounded-lg transition text-sm px-4 py-2 text-center ${t}`,onClick:r?void 0:o,children:e}),lp=({children:e,isOpen:t,onClose:n,className:r=""})=>ne.jsx("div",{tabIndex:-1,"aria-hidden":"true",className:(t?"flex":"hidden")+" bg-black/70 absolute top-0 right-0 left-0 bottom-0 z-50 justify-center items-center w-screen max-h-screen",onClick:n,children:ne.jsx("div",{className:"relative min-w-96 max-w-2xl",onClick:e=>e.stopPropagation(),children:ne.jsx("div",{className:`relative rounded-lg shadow bg-fantasy-light border border-fantasy-border ${r}`,children:e})})}),cp=({children:e,className:t=""})=>ne.jsx("div",{className:t||"p-4 md:p-5 space-y-4 max-h-96 overflow-y-auto",children:e}),up=({children:e})=>ne.jsx("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-neutral-700",children:e}),dp=({title:e,onClose:t})=>ne.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-neutral-700",children:[ne.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e}),t&&ne.jsxs("button",{type:"button",onClick:t,className:"text-neutral-400 bg-transparent hover:bg-neutral-200 hover:text-neutral-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-neutral-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[ne.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),ne.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),fp=({yes:e,no:t})=>ne.jsxs(lp,{isOpen:!0,onClose:t,children:[ne.jsx(dp,{title:"Welcome Adventurer",onClose:t}),ne.jsx(cp,{children:ne.jsxs("div",{className:"flex flex-col gap-2",children:[ne.jsx("p",{children:"Welcome to BardsBallad we're a System Agnostic TTRPG Character Manager"}),ne.jsx("p",{children:"Seems you're new here. Would you like to take a tour?"})]})}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"light",onClick:t,children:"No Thank You"}),ne.jsx(sp,{color:"primary",onClick:e,children:"Yes Please!"})]})]}),hp=q.forwardRef((({id:e,label:t,placeholder:n,value:r,onChange:o,isValid:i,errorMessage:a,style:s,minNumber:l,maxNumber:c,type:u="text"},d)=>{const f=i?"":"text-red-700 dark:text-red-500",h=i?"border border-neutral-600":"bg-red-50 border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500",p=i?"":"text-red-600 dark:text-red-500";return ne.jsxs("div",{className:"mb-6",style:s,ref:d,children:[ne.jsx("label",{htmlFor:e,className:`${f} block mb-2 text-sm font-medium`,children:t}),ne.jsx("input",{id:e,type:u,value:r,min:l,max:c,onChange:e=>o(e.target.value),placeholder:n,className:`${h} text-sm rounded-lg block w-full p-2.5 dark:bg-neutral-700 dark:placeholder:text-neutral-300`}),ne.jsx("p",{className:`${p} mt-2 text-sm`,children:i?"":a})]})}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var pp;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(pp||(pp={}));class gp extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const mp=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},o=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),i=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))},a=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=o,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==o(),n.isPluginAvailable=e=>{const t=a.get(e);return!!(null==t?void 0:t.platforms.has(o()))||!!i(e)},n.registerPlugin=(e,s={})=>{const l=a.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=o(),u=i(e);let d;const f=r=>{let o;const i=(...i)=>{const a=(async()=>(!d&&c in s?d=d="function"==typeof s[c]?await s[c]():s[c]:null!==t&&!d&&"web"in s&&(d=d="function"==typeof s.web?await s.web():s.web),d))().then((t=>{const a=((t,r)=>{var o,i;if(!u){if(t)return null===(i=t[r])||void 0===i?void 0:i.bind(t);throw new gp(`"${e}" plugin is not implemented on ${c}`,pp.Unimplemented)}{const i=null==u?void 0:u.methods.find((e=>r===e.name));if(i)return"promise"===i.rtype?t=>n.nativePromise(e,r.toString(),t):(t,o)=>n.nativeCallback(e,r.toString(),t,o);if(t)return null===(o=t[r])||void 0===o?void 0:o.bind(t)}})(t,r);if(a){const e=a(...i);return o=null==e?void 0:e.remove,e}throw new gp(`"${e}.${r}()" is not implemented on ${c}`,pp.Unimplemented)}));return"addListener"===r&&(a.remove=async()=>o()),a};return i.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(i,"name",{value:r,writable:!1,configurable:!1}),i},h=f("addListener"),p=f("removeListener"),g=(e,t)=>{const n=h({eventName:e},t),r=async()=>{const r=await n;p({eventName:e,callbackId:r},t)},o=new Promise((e=>n.then((()=>e({remove:r})))));return o.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},o},m=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return u?g:h;case"removeListener":return p;default:return f(t)}}});return r[e]=m,a.set(e,{name:e,proxy:m,platforms:new Set([...Object.keys(s),...u?[c]:[]])}),m},n.Exception=gp,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},vp=e=>e.Capacitor=mp(e),yp=vp("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),bp=yp.registerPlugin;class wp{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach((e=>e(t)));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new yp.Exception(e,pp.Unimplemented)}unavailable(e="not available"){return new yp.Exception(e,pp.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach((t=>{this.notifyListeners(e,t)})))}}t("W",wp);const xp=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),_p=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class kp extends wp{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=_p(n).trim(),r=_p(r).trim(),t[n]=r})),t}async setCookie(e){try{const t=xp(e.key),n=xp(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${o}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}bp("CapacitorCookies",{web:()=>new kp});const Sp=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=((e={})=>{const t=Object.keys(e),n=Object.keys(e).map((e=>e.toLocaleLowerCase())),r=n.reduce(((n,r,o)=>(n[r]=e[t[o]],n)),{});return r})(e.headers),o=r["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,n)=>{t.append(n,e)}));else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(o.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class Ep extends wp{async request(e){const t=Sp(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce(((e,n)=>{const[r,o]=n;let i,a;return Array.isArray(o)?(a="",o.forEach((e=>{i=t?encodeURIComponent(e):e,a+=`${r}=${i}&`})),a.slice(0,-1)):(i=t?encodeURIComponent(o):o,a=`${r}=${i}`),`${e}&${a}`}),"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,o=await fetch(r,t),i=o.headers.get("content-type")||"";let a,s,{responseType:l="text"}=o.ok?e:{};switch(i.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await o.blob(),a=await(async e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)})))(s);break;case"json":a=await o.json();break;default:a=await o.text()}const c={};return o.headers.forEach(((e,t)=>{c[t]=e})),{data:a,headers:c,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}bp("CapacitorHttp",{web:()=>new Ep});const jp=bp("Device",{web:()=>function(e){function t(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return Promise.resolve().then((n=>{for(const e of n||[])"rejected"===e.status&&t(e.reason);return e().catch(t)}))}((()=>n.import("./web-legacy-BlRGsJZx.js"))).then((e=>new e.DeviceWeb))});async function Cp(){return window.Capacitor&&window.Capacitor.isNativePlatform?await async function(){const e=await jp.getInfo();return`${e.manufacturer||"Unknown"} ${e.model||"Device"}`}():function(){const e=navigator.userAgent;return`Web-${navigator.platform}-${navigator.language}-${e.slice(0,15)}`}()}var Np={exports:{}};!function(e){e.exports=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,n){for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:i,o=Object.keys,a=Array.isArray;function s(e,t){return"object"!=typeof t||o(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(e,t){return c.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach((function(n){h(e,n,t[n])}))}var f=Object.defineProperty;function h(e,t,n,r){f(e,t,s(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor,m=[].slice;function v(e,t,n){return m.call(e,t,n)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function x(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var i=x(e,t[r]);n.push(i)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return null==s?void 0:x(s,t.substr(a+1))}}function _(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)_(e,t[r],n[r])}else{var i,s,l=t.indexOf(".");-1!==l?(i=t.substr(0,l),""===(s=t.substr(l+1))?void 0===n?a(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=n:_(l=(l=e[i])&&u(e,i)?l:e[i]={},s,n)):void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function k(e){var t,n={};for(t in e)u(e,t)&&(n[t]=e[t]);return n}var S=[].concat;function E(e){return S.apply([],e)}var j="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return r[e]})),C=new Set(j.map((function(e){return r[e]}))),N=null;function A(e){return N=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=N.get(t);if(n)return n;if(a(t)){n=[],N.set(t,n);for(var r=0,o=t.length;r<o;++r)n.push(e(t[r]))}else if(C.has(t.constructor))n=t;else{var i,s=l(t);for(i in n=s===Object.prototype?{}:Object.create(s),N.set(t,n),t)u(t,i)&&(n[i]=e(t[i]))}return n}(e),N=null,e}var O={}.toString;function R(e){return O.call(e).slice(8,-1)}var P="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",T="symbol"==typeof P?function(e){var t;return null!=e&&(t=e[P])&&t.apply(e)}:function(){return null};function I(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var M={};function D(e){var t,n,r,o;if(1===arguments.length){if(a(e))return e.slice();if(this===M&&"string"==typeof e)return[e];if(o=T(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var L="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},B=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],F=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(B),z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,t){this.name=e,this.message=t}function U(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function W(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=U(e,t)}function H(e,t){this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=U(e,this.failures)}p($).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(W).from($),p(H).from($);var V=F.reduce((function(e,t){return e[t]=t+"Error",e}),{}),q=$,K=F.reduce((function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=z[t]||n,this.inner=null)}return p(r).from(q),e[t]=r,e}),{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var Z=B.reduce((function(e,t){return e[t+"Error"]=K[t],e}),{}),Y=F.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=K[t]),e}),{});function G(){}function X(e){return e}function J(e,t){return null==e||e===X?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ee(e,t){return e===G?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Q(o,this.onerror):o),void 0!==i?i:n}}function te(e,t){return e===G?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function ne(e,t){return e===G?t:function(n){var r=e.apply(this,arguments);s(n,r);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Q(o,this.onsuccess):o),i&&(this.onerror=this.onerror?Q(i,this.onerror):i),void 0===r?void 0===n?void 0:n:s(r,n)}}function re(e,t){return e===G?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function oe(e,t){return e===G?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}Y.ModifyError=W,Y.DexieError=$,Y.BulkError=H;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ae(e){ie=e}var se={},le=100,ce=(j="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),B=j[0],F=j[1],j=j[2],F=F&&F.then,B&&B.constructor),ue=!!j,de=function(e,t){be.push([e,t]),he&&(queueMicrotask(Ae),he=!1)},fe=!0,he=!0,pe=[],ge=[],me=X,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:G,pgp:!1,env:{},finalize:G},ye=ve,be=[],we=0,xe=[];function _e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ye;if("function"!=typeof e){if(e!==se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ee(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n((function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Oe();n&&"function"==typeof n.then?e(t,(function(e,t){n instanceof _e?n._then(e,t):n.then(e,t)})):(t._state=!0,t._value=n,je(t)),r&&Re()}}),Ee.bind(null,t))}catch(n){Ee(t,n)}}(this,e)}var ke={get:function(){var e=ye,t=Fe;function n(n,r){var o=this,i=!e.global&&(e!==ye||t!==Fe),a=i&&!We(),s=new _e((function(t,s){Ce(o,new Se(Ye(n,e,i,a),Ye(r,e,i,a),t,s,e))}));return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=se,n},set:function(e){h(this,"then",e&&e.prototype===se?ke:{get:function(){return e},set:ke.set})}};function Se(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function Ee(e,t){var n,r;ge.push(t),null===e._state&&(n=e._lib&&Oe(),t=me(t),e._state=!1,e._value=t,r=e,pe.some((function(e){return e._value===r._value}))||pe.push(r),je(e),n&&Re())}function je(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ce(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===we&&(++we,de((function(){0==--we&&Pe()}),[]))}function Ce(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,de(Ne,[n,e,t])}else e._listeners.push(t)}function Ne(e,t,n){try{var r,o=t._value;!t._state&&ge.length&&(ge=[]),r=ie&&t._consoleTask?t._consoleTask.run((function(){return e(o)})):e(o),t._state||-1!==ge.indexOf(o)||function(e){for(var t=pe.length;t;)if(pe[--t]._value===e._value)return pe.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--we&&Pe(),--n.psd.ref||n.psd.finalize()}}function Ae(){Ze(ve,(function(){Oe()&&Re()}))}function Oe(){var e=fe;return he=fe=!1,e}function Re(){var e,t,n;do{for(;0<be.length;)for(e=be,be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<be.length);he=fe=!0}function Pe(){var e=pe;pe=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=xe.slice(0),n=t.length;n;)t[--n]()}function Te(e){return new _e(se,!1,e)}function Ie(e,t){var n=ye;return function(){var r=Oe(),o=ye;try{return qe(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{qe(o,!1),r&&Re()}}}d(_e.prototype,{then:ke,_then:function(e,t){Ce(this,new Se(null,null,e,t,ye))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return(e instanceof t?n:Te)(e)})):this.then(null,(function(e){return(e&&e.name===t?n:Te)(e)}))},finally:function(e){return this.then((function(t){return _e.resolve(e()).then((function(){return t}))}),(function(t){return _e.resolve(e()).then((function(){return Te(t)}))}))},timeout:function(e,t){var n=this;return e<1/0?new _e((function(r,o){var i=setTimeout((function(){return o(new K.Timeout(t))}),e);n.then(r,o).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(_e.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=Ke(),d(_e,{all:function(){var e=D.apply(null,arguments).map(He);return new _e((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(o,i){return _e.resolve(o).then((function(n){e[i]=n,--r||t(e)}),n)}))}))},resolve:function(e){return e instanceof _e?e:e&&"function"==typeof e.then?new _e((function(t,n){e.then(t,n)})):new _e(se,!0,e)},reject:Te,race:function(){var e=D.apply(null,arguments).map(He);return new _e((function(t,n){e.map((function(e){return _e.resolve(e).then(t,n)}))}))},PSD:{get:function(){return ye},set:function(e){return ye=e}},totalEchoes:{get:function(){return Fe}},newPSD:$e,usePSD:Ze,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return me},set:function(e){me=e}},follow:function(e,t){return new _e((function(n,r){return $e((function(t,n){var r=ye;r.unhandleds=[],r.onunhandled=n,r.finalize=Q((function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},xe.push((function t(){e(),xe.splice(xe.indexOf(t),1)})),++we,de((function(){0==--we&&Pe()}),[])}),r.finalize),e()}),t,n,r)}))}}),ce&&(ce.allSettled&&h(_e,"allSettled",(function(){var e=D.apply(null,arguments).map(He);return new _e((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,o){return _e.resolve(e).then((function(e){return r[o]={status:"fulfilled",value:e}}),(function(e){return r[o]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),ce.any&&"undefined"!=typeof AggregateError&&h(_e,"any",(function(){var e=D.apply(null,arguments).map(He);return new _e((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach((function(e,i){return _e.resolve(e).then((function(e){return t(e)}),(function(e){o[i]=e,--r||n(new AggregateError(o))}))}))}))})),ce.withResolvers&&(_e.withResolvers=ce.withResolvers));var Me={awaits:0,echoes:0,id:0},De=0,Le=[],Be=0,Fe=0,ze=0;function $e(e,t,n,r){var o=ye,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++ze,ve.env,i.env=ue?{Promise:_e,PromiseProp:{value:_e,configurable:!0,writable:!0},all:_e.all,race:_e.race,allSettled:_e.allSettled,any:_e.any,resolve:_e.resolve,reject:_e.reject}:{},t&&s(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ze(i,e,n,r),0===i.ref&&i.finalize(),r}function Ue(){return Me.id||(Me.id=++De),++Me.awaits,Me.echoes+=le,Me.id}function We(){return!!Me.awaits&&(0==--Me.awaits&&(Me.id=0),Me.echoes=Me.awaits*le,!0)}function He(e){return Me.echoes&&e&&e.constructor===ce?(Ue(),e.then((function(e){return We(),e}),(function(e){return We(),Xe(e)}))):e}function Ve(){var e=Le[Le.length-1];Le.pop(),qe(e,!1)}function qe(e,t){var n,o=ye;(t?!Me.echoes||Be++&&e===ye:!Be||--Be&&e===ye)||queueMicrotask(t?function(e){++Fe,Me.echoes&&0!=--Me.echoes||(Me.echoes=Me.awaits=Me.id=0),Le.push(ye),qe(e,!0)}.bind(null,e):Ve),e!==ye&&(ye=e,o===ve&&(ve.env=Ke()),ue&&(n=ve.env.Promise,t=e.env,(o.global||e.global)&&(Object.defineProperty(r,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ke(){var e=r.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ze(e,t,n,r,o){var i=ye;try{return qe(e,!0),t(n,r,o)}finally{qe(i,!1)}}function Ye(e,t,n,r){return"function"!=typeof e?e:function(){var o=ye;n&&Ue(),qe(t,!0);try{return e.apply(this,arguments)}finally{qe(o,!1),r&&queueMicrotask(We)}}}function Ge(e){Promise===ce&&0===Me.echoes?0===Be?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+F).indexOf("[native code]")&&(Ue=We=G);var Xe=_e.reject,Je=String.fromCharCode(65535),Qe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",ot="readwrite";function it(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var at={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function st(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=A(t))[e],t}}function lt(){throw K.Type()}function ct(e,t){try{var n=ut(e),r=ut(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===r?0:n<r?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,i=0;i<o;++i){var a=ct(e[i],t[i]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=R(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ft=(ht.prototype._trans=function(e,t,n){var r=this._tx||ye.trans,o=this.name,i=ie&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,n,r){if(!r.schema[o])throw new K.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}var s=Oe();try{var l=r&&r.db._novip===this.db._novip?r===ye.trans?r._promise(e,a,n):$e((function(){return r._promise(e,a,n)}),{trans:r,transless:ye.transless||ye}):function t(n,r,o,i){if(n.idbdb&&(n._state.openComplete||ye.letThrough||n._vip)){var a=n._createTransaction(r,o,n._dbSchema);try{a.create(),n._state.PR1398_maxLoop=3}catch(e){return e.name===V.InvalidState&&n.isOpen()&&0<--n._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then((function(){return t(n,r,o,i)}))):Xe(e)}return a._promise(r,(function(e,t){return $e((function(){return ye.trans=a,i(e,t,a)}))})).then((function(e){if("readwrite"===r)try{a.idbtrans.commit()}catch(e){}return"readonly"===r?e:a._completion.then((function(){return e}))}))}if(n._state.openComplete)return Xe(new K.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return Xe(new K.DatabaseClosed);n.open().catch(G)}return n._state.dbReadyPromise.then((function(){return t(n,r,o,i)}))}(this.db,e,[this.name],a);return i&&(l._consoleTask=i,l=l.catch((function(e){return console.trace(e),Xe(e)}))),l}finally{s&&Re()}},ht.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Xe(new K.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},ht.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&t.every((function(t){return 0<=e.keyPath.indexOf(t)}))){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort((function(e,t){return e.keyPath.length-t.keyPath.length}))[0];if(n&&this.db._maxKey!==Je){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map((function(t){return e[t]})))}!n&&ie&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function s(e,t){return 0===ct(e,t)}var l=t.reduce((function(t,n){var r=t[0],o=t[1],l=(t=i[n],e[n]);return[r||t,r||!t?it(o,t&&t.multi?function(e){return e=x(e,n),a(e)&&e.some((function(e){return s(l,e)}))}:function(e){return s(l,x(e,n))}):o]}),[null,null]);return r=l[0],l=l[1],r?this.where(r.name).equals(e[r.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},ht.prototype.filter=function(e){return this.toCollection().and(e)},ht.prototype.count=function(e){return this.toCollection().count(e)},ht.prototype.offset=function(e){return this.toCollection().offset(e)},ht.prototype.limit=function(e){return this.toCollection().limit(e)},ht.prototype.each=function(e){return this.toCollection().each(e)},ht.prototype.toArray=function(e){return this.toCollection().toArray(e)},ht.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ht.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"[".concat(e.join("+"),"]"):e))},ht.prototype.reverse=function(){return this.toCollection().reverse()},ht.prototype.mapToClass=function(t){var n,r=this.db,o=this.name;function i(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(i,n=t),Object.defineProperty(i.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),i.prototype.table=function(){return o},t=i);for(var a=new Set,s=t.prototype;s;s=l(s))Object.getOwnPropertyNames(s).forEach((function(e){return a.add(e)}));function c(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!a.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},ht.prototype.defineClass=function(){return this.mapToClass((function(e){s(this,e)}))},ht.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=st(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{_(e,i,t)}catch(t){}return t}))},ht.prototype.update=function(e,t){return"object"!=typeof e||a(e)?this.where(":id").equals(e).modify(t):void 0===(e=x(e,this.schema.primKey.keyPath))?Xe(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},ht.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=st(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{_(e,i,t)}catch(t){}return t}))},ht.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?_e.reject(e.failures[0]):void 0}))},ht.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:at})})).then((function(e){return e.numFailures?_e.reject(e.failures[0]):void 0}))},ht.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},ht.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&o)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:s,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult;if(e=e.failures,0===t)return i?n:o;throw new H("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),e)}))}))},ht.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&o)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:s,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult;if(e=e.failures,0===t)return i?n:o;throw new H("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),e)}))}))},ht.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map((function(e){return e.key})),o=e.map((function(e){return e.changes})),i=[];return this._trans("readwrite",(function(a){return n.getMany({trans:a,keys:r,cache:"clone"}).then((function(s){var l=[],c=[];e.forEach((function(e,n){var r=e.key,o=e.changes,a=s[n];if(a){for(var u=0,d=Object.keys(o);u<d.length;u++){var f=d[u],h=o[f];if(f===t.schema.primKey.keyPath){if(0!==ct(h,r))throw new K.Constraint("Cannot update primary key in bulkUpdate()")}else _(a,f,h)}i.push(n),l.push(r),c.push(a)}}));var u=l.length;return n.mutate({trans:a,type:"put",keys:l,values:c,updates:{keys:r,changeSpecs:o}}).then((function(e){var n=e.numFailures,r=e.failures;if(0===n)return u;for(var o=0,a=Object.keys(r);o<a.length;o++){var s,l=a[o],c=i[Number(l)];null!=c&&(s=r[l],delete r[l],r[c]=s)}throw new H("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)}))}))}))},ht.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,o=e.lastResult;if(e=e.failures,0===r)return o;throw new H("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)}))},ht);function ht(){}function pt(e){function t(t,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return n[t].subscribe.apply(null,i),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(e,r,i){if("object"!=typeof e){var l;r=r||re;var c={subscribers:[],fire:i=i||G,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter((function(t){return t!==e})),c.fire=c.subscribers.reduce(r,i)}};return n[e]=t[e]=c}o(l=e).forEach((function(e){var t=l[e];if(a(t))s(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new K.InvalidArgument("Invalid event config");var n=s(e,X,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function gt(e,t){return p(t).from({prototype:e}),t}function mt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vt(e,t){e.filter=it(e.filter,t)}function yt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return it(r(),t())}:t,e.justLimit=n&&!r}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function wt(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function xt(e,t,n,r){var o=e.replayFilter?it(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(e,n,r){var a,s;o&&!o(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))||("[object ArrayBuffer]"==(s=""+(a=n.primaryKey))&&(s=""+new Uint8Array(a)),u(i,s)||(i[s]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(a,n),_t(wt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return _t(wt(e,r,n),it(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function _t(e,t,n,r){var o=Ie(r?function(e,t,o){return n(r(e),t,o)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=G}),(function(t){e.fail(t),n=G}))||o(e.value,e,(function(e){return n=e})),n()}))}))}var kt=(St.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var r=t.add;if(a(r))return n(n([],a(e)?e:[],!0),r).sort();if("number"==typeof r)return(Number(e)||0)+r;if("bigint"==typeof r)try{return BigInt(e)+r}catch(e){return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(void 0!==t.remove){var o=t.remove;if(a(o))return a(e)?e.filter((function(e){return!o.includes(e)})).sort():[];if("number"==typeof o)return Number(e)-o;if("bigint"==typeof o)try{return BigInt(e)-o}catch(e){return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return(r=null===(r=t.replacePrefix)||void 0===r?void 0:r[0])&&"string"==typeof e&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e},St);function St(e){this["@@propmod"]=e}var Et=(jt.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Xe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},jt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},jt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=it(t.algorithm,e)},jt.prototype._iterate=function(e,t){return xt(this._ctx,e,t,this._ctx.table.core)},jt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},jt.prototype.raw=function(){return this._ctx.valueMapper=null,this},jt.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return xt(t,e,n,t.table.core)}))},jt.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(mt(n,!0))return r.count({trans:e,query:{index:bt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var o=0;return xt(n,(function(){return++o,!1}),e,r).then((function(){return o}))})).then(e)},jt.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){return ct(i(e,o),i(t,o))*a}return this.toArray((function(e){return e.sort(s)})).then(t)},jt.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&mt(n,!0)&&0<n.limit){var r=n.valueMapper,o=bt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then((function(e){return e=e.result,r?e.map(r):e}))}var i=[];return xt(n,(function(e){return i.push(e)}),e,n.table.core).then((function(){return i}))}),e)},jt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,mt(t)?yt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n((function(){e.advance(t),t=0})),!1)}})):yt(t,(function(){var t=e;return function(){return--t<0}}))),this},jt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),yt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}}),!0),this},jt.prototype.until=function(e,t){return vt(this._ctx,(function(n,r,o){return!e(n.value)||(r(o),t)})),this},jt.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},jt.prototype.last=function(e){return this.reverse().first(e)},jt.prototype.filter=function(e){var t;return vt(this._ctx,(function(t){return e(t.value)})),(t=this._ctx).isMatch=it(t.isMatch,e),this},jt.prototype.and=function(e){return this.filter(e)},jt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},jt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},jt.prototype.desc=function(){return this.reverse()},jt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},jt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},jt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},jt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},jt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&mt(t,!0)&&0<t.limit)return this._read((function(e){var n=bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},jt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},jt.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},jt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},jt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return vt(this._ctx,(function(e){var n=e.primaryKey.toString();return e=u(t,n),t[n]=!0,!e})),this},jt.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i,a,s;s="function"==typeof e?e:(i=o(e),a=i.length,function(t){for(var n=!1,r=0;r<a;++r){var o=i[r],s=e[o],l=x(t,o);s instanceof kt?(_(t,o,s.execute(l)),n=!0):l!==s&&(_(t,o,s),n=!0)}return n});var l,c=n.table.core,u=(l=c.schema.primaryKey).outbound,d=l.extractKey,f=200;function h(e,t){var n=t.failures;t=t.numFailures,g+=e-t;for(var r=0,i=o(n);r<i.length;r++){var a=i[r];p.push(n[a])}}(l=t.db._options.modifyChunkSize)&&(f="object"==typeof l?l[c.name]||l["*"]||200:l);var p=[],g=0,m=[];return t.clone().primaryKeys().then((function(t){function o(n){var a=Math.min(f,t.length-n);return c.getMany({trans:r,keys:t.slice(n,n+a),cache:"immutable"}).then((function(l){for(var p=[],g=[],m=u?[]:null,v=[],y=0;y<a;++y){var b=l[y],w={value:A(b),primKey:t[n+y]};!1!==s.call(w,w.value,w)&&(null==w.value?v.push(t[n+y]):u||0===ct(d(b),d(w.value))?(g.push(w.value),u&&m.push(t[n+y])):(v.push(t[n+y]),p.push(w.value)))}return Promise.resolve(0<p.length&&c.mutate({trans:r,type:"add",values:p}).then((function(e){for(var t in e.failures)v.splice(parseInt(t),1);h(p.length,e)}))).then((function(){return(0<g.length||i&&"object"==typeof e)&&c.mutate({trans:r,type:"put",keys:m,values:g,criteria:i,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<n}).then((function(e){return h(g.length,e)}))})).then((function(){return(0<v.length||i&&e===Ct)&&c.mutate({trans:r,type:"delete",keys:v,criteria:i,isAdditionalChunk:0<n}).then((function(e){return h(v.length,e)}))})).then((function(){return t.length>n+a&&o(n+f)}))}))}var i=mt(n)&&n.limit===1/0&&("function"!=typeof e||e===Ct)&&{index:n.index,range:n.range};return o(0).then((function(){if(0<p.length)throw new W("Error modifying one or more objects",p,g,m);return t.length}))}))}))},jt.prototype.delete=function(){var e=this._ctx,t=e.range;return mt(e)&&(e.isPrimKey||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((function(e){var n=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new W("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-e);return t-e}))}))})):this.modify(Ct)},jt);function jt(){}var Ct=function(e,t){return t.value=null};function Nt(e,t){return e<t?-1:e===t?0:1}function At(e,t){return t<e?-1:e===t?0:1}function Ot(e,t,n){return(e=e instanceof Mt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Rt(e){return new e.Collection(e,(function(){return It("")})).limit(0)}function Pt(e,t,n,r){var o,i,a,s,l,c,u,d=n.length;if(!n.every((function(e){return"string"==typeof e})))return Ot(e,et);function f(e){o="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},i="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},a="next"===e?Nt:At;var t=n.map((function(e){return{lower:i(e),upper:o(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),u="next"===(c=e)?"":r}f("next"),(e=new e.Collection(e,(function(){return Tt(s[0],l[d-1]+r)})))._ondirectionchange=function(e){f(e)};var h=0;return e._addAlgorithm((function(e,n,r){var o=e.key;if("string"!=typeof o)return!1;var f=i(o);if(t(f,l,h))return!0;for(var p=null,g=h;g<d;++g){var m=function(e,t,n,r,o,i){for(var a=Math.min(e.length,r.length),s=-1,l=0;l<a;++l){var c=t[l];if(c!==r[l])return o(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):o(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):0<=s?e.substr(0,s)+t[s]+n.substr(s+1):null;o(e[l],c)<0&&(s=l)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}(o,f,s[g],l[g],a,c);null===m&&null===p?h=g+1:(null===p||0<a(p,m))&&(p=m)}return n(null!==p?function(){e.continue(p+u)}:r),!1})),e}function Tt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function It(e){return{type:1,lower:e,upper:e}}var Mt=(Object.defineProperty(Dt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Rt(this):new this.Collection(this,(function(){return Tt(e,t,!n,!r)}))}catch(e){return Ot(this,Qe)}},Dt.prototype.equals=function(e){return null==e?Ot(this,Qe):new this.Collection(this,(function(){return It(e)}))},Dt.prototype.above=function(e){return null==e?Ot(this,Qe):new this.Collection(this,(function(){return Tt(e,void 0,!0)}))},Dt.prototype.aboveOrEqual=function(e){return null==e?Ot(this,Qe):new this.Collection(this,(function(){return Tt(e,void 0,!1)}))},Dt.prototype.below=function(e){return null==e?Ot(this,Qe):new this.Collection(this,(function(){return Tt(void 0,e,!1,!0)}))},Dt.prototype.belowOrEqual=function(e){return null==e?Ot(this,Qe):new this.Collection(this,(function(){return Tt(void 0,e)}))},Dt.prototype.startsWith=function(e){return"string"!=typeof e?Ot(this,et):this.between(e,e+Je,!0,!0)},Dt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Pt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Je)},Dt.prototype.equalsIgnoreCase=function(e){return Pt(this,(function(e,t){return e===t[0]}),[e],"")},Dt.prototype.anyOfIgnoreCase=function(){var e=D.apply(M,arguments);return 0===e.length?Rt(this):Pt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},Dt.prototype.startsWithAnyOfIgnoreCase=function(){var e=D.apply(M,arguments);return 0===e.length?Rt(this):Pt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Je)},Dt.prototype.anyOf=function(){var e=this,t=D.apply(M,arguments),n=this._cmp;try{t.sort(n)}catch(r){return Ot(this,Qe)}if(0===t.length)return Rt(this);var r=new this.Collection(this,(function(){return Tt(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm((function(e,r,i){for(var a=e.key;0<n(a,t[o]);)if(++o===t.length)return r(i),!1;return 0===n(a,t[o])||(r((function(){e.continue(t[o])})),!1)})),r},Dt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dt.prototype.noneOf=function(){var e=D.apply(M,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ot(this,Qe)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Dt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,s=this._max;if(0===e.length)return Rt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0})))return Ot(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var l,c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=o;function f(e,t){return d(e[0],t[0])}try{(l=e.reduce((function(e,t){for(var n=0,o=e.length;n<o;++n){var i=e[n];if(r(t[0],i[1])<0&&0<r(t[1],i[0])){i[0]=a(i[0],t[0]),i[1]=s(i[1],t[1]);break}}return n===o&&e.push(t),e}),[])).sort(f)}catch(e){return Ot(this,Qe)}var h=0,p=u?function(e){return 0<o(e,l[h][1])}:function(e){return 0<=o(e,l[h][1])},g=c?function(e){return 0<i(e,l[h][0])}:function(e){return 0<=i(e,l[h][0])},m=p;return(e=new this.Collection(this,(function(){return Tt(l[0][0],l[l.length-1][1],!c,!u)})))._ondirectionchange=function(e){d="next"===e?(m=p,o):(m=g,i),l.sort(f)},e._addAlgorithm((function(e,t,r){for(var i,a=e.key;m(a);)if(++h===l.length)return t(r),!1;return!p(i=a)&&!g(i)||(0===n._cmp(a,l[h][1])||0===n._cmp(a,l[h][0])||t((function(){d===o?e.continue(l[h][0]):e.continue(l[h][1])})),!1)})),e},Dt.prototype.startsWithAnyOf=function(){var e=D.apply(M,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Rt(this):this.inAnyRange(e.map((function(e){return[e,e+Je]}))):Ot(this,"startsWithAnyOf() only works with strings")},Dt);function Dt(){}function Lt(e){return Ie((function(t){return Bt(t),e(t.target.error),!1}))}function Bt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ft="storagemutated",zt="x-storagemutated-1",$t=pt(null,Ft),Ut=(Wt.prototype._lock=function(){return b(!ye.global),++this._reculock,1!==this._reculock||ye.global||(ye.lockOwnerFor=this),this},Wt.prototype._unlock=function(){if(b(!ye.global),0==--this._reculock)for(ye.global||(ye.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ze(e[1],e[0])}catch(e){}}return this},Wt.prototype._locked=function(){return this._reculock&&ye.lockOwnerFor!==this},Wt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new K.DatabaseClosed(r);case"MissingAPIError":throw new K.MissingAPI(r.message,r);default:throw new K.OpenFailed(r)}if(!this.active)throw new K.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ie((function(n){Bt(n),t._reject(e.error)})),e.onabort=Ie((function(n){Bt(n),t.active&&t._reject(new K.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Ie((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&$t.storagemutated.fire(e.mutatedParts)})),this},Wt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Xe(new K.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new K.TransactionInactive);if(this._locked())return new _e((function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},ye])}));if(n)return $e((function(){var e=new _e((function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var o=new _e((function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return o._lib=!0,o},Wt.prototype._root=function(){return this.parent?this.parent._root():this},Wt.prototype.waitFor=function(e){var t,n=this._root(),r=_e.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return r})):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var o=n._waitingFor;return new _e((function(e,t){r.then((function(t){return n._waitingQueue.push(Ie(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Ie(t.bind(null,e)))})).finally((function(){n._waitingFor===o&&(n._waitingFor=null)}))}))},Wt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},Wt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var n=this.schema[e];if(!n)throw new K.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Wt);function Wt(){}function Ht(e,t,n,r,o,i,a){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+Vt(t)}}function Vt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function qt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce((function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e}),{}))};var r}var Kt=function(e){try{return e.only([[]]),Kt=function(){return[[]]},[[]]}catch(e){return Kt=function(){return Je},Je}};function Zt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return x(e,t)}:function(t){return x(t,e)};var t}function Yt(e){return[].slice.call(e)}var Gt=0;function Xt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Jt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,o=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!e)}function o(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,o=e.type,i=e.keys,a=e.values,s=e.range;return new Promise((function(e,l){e=Ie(e);var c=t.objectStore(n),u=null==c.keyPath,d="put"===o||"add"===o;if(!d&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var f,h=(i||a||{length:1}).length;if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(e){++v,Bt(e)}var g=[],m=[],v=0;if("deleteRange"===o){if(4===s.type)return e({numFailures:v,failures:m,results:[],lastResult:void 0});3===s.type?g.push(f=c.clear()):g.push(f=c.delete(r(s)))}else{var y=(u=d?u?[a,i]:[a,null]:[i,null])[0],b=u[1];if(d)for(var w=0;w<h;++w)g.push(f=b&&void 0!==b[w]?c[o](y[w],b[w]):c[o](y[w])),f.onerror=p;else for(w=0;w<h;++w)g.push(f=c[o](y[w])),f.onerror=p}function x(t){t=t.target.result,g.forEach((function(e,t){return null!=e.error&&(m[t]=e.error)})),e({numFailures:v,failures:m,results:"delete"===o?i:g.map((function(e){return e.result})),lastResult:t})}f.onerror=function(e){p(e),x(e)},f.onsuccess=x}))},getMany:function(e){var t=e.trans,r=e.keys;return new Promise((function(e,o){e=Ie(e);for(var i,a=t.objectStore(n),s=r.length,l=new Array(s),c=0,u=0,d=function(t){t=t.target,l[t._pos]=t.result,++u===c&&e(l)},f=Lt(o),h=0;h<s;++h)null!=r[h]&&((i=a.get(r[h]))._pos=h,i.onsuccess=d,i.onerror=f,++c);0===c&&e(l)}))},get:function(e){var t=e.trans,r=e.key;return new Promise((function(e,o){e=Ie(e);var i=t.objectStore(n).get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=Lt(o)}))},query:(t=u,function(e){return new Promise((function(o,i){o=Ie(o);var a,s,l,c=e.trans,u=e.values,d=e.limit,f=e.query,h=d===1/0?void 0:d,p=f.index;if(f=f.range,c=c.objectStore(n),p=p.isPrimaryKey?c:c.index(p.name),f=r(f),0===d)return o({result:[]});t?((h=u?p.getAll(f,h):p.getAllKeys(f,h)).onsuccess=function(e){return o({result:e.target.result})},h.onerror=Lt(i)):(a=0,s=!u&&"openKeyCursor"in p?p.openKeyCursor(f):p.openCursor(f),l=[],s.onsuccess=function(e){var t=s.result;return t?(l.push(u?t.value:t.primaryKey),++a===d?o({result:l}):void t.continue()):o({result:l})},s.onerror=Lt(i))}))}),openCursor:function(e){var t=e.trans,o=e.values,i=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,l){e=Ie(e);var c=i.index,u=i.range,d=t.objectStore(n),f=(d=c.isPrimaryKey?d:d.index(c.name),c=a?s?"prevunique":"prev":s?"nextunique":"next",!o&&"openKeyCursor"in d?d.openKeyCursor(r(u),c):d.openCursor(r(u),c));f.onerror=Lt(l),f.onsuccess=Ie((function(n){var r,o,i,a,s=f.result;s?(s.___id=++Gt,s.done=!1,r=s.continue.bind(s),o=(o=s.continuePrimaryKey)&&o.bind(s),i=s.advance.bind(s),a=function(){throw new Error("Cursor not stopped")},s.trans=t,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw new Error("Cursor not started")},s.fail=Ie(l),s.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},s.start=function(e){function t(){if(f.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw new Error("Cursor behind last entry")},s.stop()}var n=new Promise((function(e,t){e=Ie(e),f.onerror=Lt(t),s.fail=t,s.stop=function(t){s.stop=s.continue=s.continuePrimaryKey=s.advance=a,e(t)}}));return f.onsuccess=Ie((function(e){f.onsuccess=t,t()})),s.continue=r,s.continuePrimaryKey=o,s.advance=i,t(),n},e(s)):e(null)}),l)}))},count:function(e){var t=e.query,o=e.trans,i=t.index,a=t.range;return new Promise((function(e,t){var s=o.objectStore(n),l=i.isPrimaryKey?s:s.index(i.name);(l=(s=r(a))?l.count(s):l.count()).onsuccess=Ie((function(t){return e(t.target.result)})),l.onerror=Lt(t)}))}}}var i,s,l,c=(s=n,l=Yt((i=e).objectStoreNames),{schema:{name:i.name,tables:l.map((function(e){return s.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=a(t),o={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Zt(t)},indexes:Yt(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:a(e),keyPath:e,unique:n,multiEntry:r,extractKey:Zt(e)},o[Xt(e)]=r})),getIndexByKeyPath:function(e){return o[Xt(e)]}},o[":id"]=n.primaryKey,null!=t&&(o[Xt(t)]=n.primaryKey),n}))},hasGetAll:0<l.length&&"getAll"in s.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),u=(n=c.schema,c.hasGetAll),d=(c=n.tables.map(o),{});return c.forEach((function(e){return d[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Kt(t),schema:n}}function Qt(e,n,r,o){var i=r.IDBKeyRange;return r.indexedDB,{dbcore:(o=Jt(n,i,o),e.dbcore.reduce((function(e,n){return n=n.create,t(t({},e),n(e))}),o))}}function en(e,t){var n=t.db;t=Qt(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function tn(e,t,n,r){n.forEach((function(n){var o=r[n];t.forEach((function(t){var r=function e(t,n){return g(t,n)||(t=l(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,n,{get:function(){return this.table(n)},set:function(e){f(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))}))}))}function nn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function rn(e,t){return e._cfg.version-t._cfg.version}function on(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=qt("$meta",hn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var s=a._reject.bind(a),l=ye.transless||ye;$e((function(){return ye.trans=a,ye.transless=l,0!==t?(en(e,n),c=t,((r=a).storeNames.includes("$meta")?r.table("$meta").get("version").then((function(e){return null!=e?e:c})):_e.resolve(c)).then((function(t){return i=t,s=a,l=n,c=[],t=(r=e)._versions,u=r._dbSchema=dn(0,r.idbdb,l),0!==(t=t.filter((function(e){return e._cfg.version>=i}))).length?(t.forEach((function(e){c.push((function(){var t=u,n=e._cfg.dbschema;fn(r,t,l),fn(r,n,l),u=r._dbSchema=n;var a=sn(t,n);a.add.forEach((function(e){ln(l,e[0],e[1].primKey,e[1].indexes)})),a.change.forEach((function(e){if(e.recreate)throw new K.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach((function(e){return un(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),un(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>i){en(r,l),s._memoizedTables={};var d=k(n);a.del.forEach((function(e){d[e]=t[e]})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],o(d),d),s.schema=d;var f,h=L(c);return h&&Ue(),a=_e.follow((function(){var e;(f=c(s))&&h&&(e=We.bind(null,null),f.then(e,e))})),f&&"function"==typeof f.then?_e.resolve(f):a.then((function(){return f}))}})),c.push((function(t){var n,o,i=e._cfg.dbschema;n=i,o=t,[].slice.call(o.db.objectStoreNames).forEach((function(e){return null==n[e]&&o.db.deleteObjectStore(e)})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),s.schema=r._dbSchema})),c.push((function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter((function(e){return"$meta"!==e}))):t.objectStore("$meta").put(e._cfg.version,"version"))}))})),function e(){return c.length?_e.resolve(c.shift()(s.idbtrans)).then(e):_e.resolve()}().then((function(){cn(u,l)}))):_e.resolve();var r,i,s,l,c,u})).catch(s)):(o(i).forEach((function(e){ln(n,e,i[e].primKey,i[e].indexes)})),en(e,n),void _e.follow((function(){return e.on.populate.fire(a)})).catch(s));var r,c}))}function an(e,t){cn(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=dn(0,e.idbdb,t);fn(e,e._dbSchema,t);for(var r=0,o=sn(n,e._dbSchema).change;r<o.length;r++){var i=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach((function(t){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),un(n,t)}))}(o[r]);if("object"==typeof i)return i.value}}function sn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],i=t[n];if(o){var a={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto)a.recreate=!0,r.change.push(a);else{var s=o.idxByName,l=i.idxByName,c=void 0;for(c in s)l[c]||a.del.push(c);for(c in l){var u=s[c],d=l[c];u?u.src!==d.src&&a.change.push(d):a.add.push(d)}(0<a.del.length||0<a.add.length||0<a.change.length)&&r.change.push(a)}}else r.add.push([n,i])}return r}function ln(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return un(o,e)})),o}function cn(e,t){o(e).forEach((function(n){t.db.objectStoreNames.contains(n)||(ie&&console.debug("Dexie: Creating missing table",n),ln(t,n,e[n].primKey,e[n].indexes))}))}function un(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function dn(e,t,n){var r={};return v(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),o=Ht(Vt(s=t.keyPath),s||"",!0,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),i=[],a=0;a<t.indexNames.length;++a){var s=(l=t.index(t.indexNames[a])).keyPath,l=Ht(l.name,s,!!l.unique,!!l.multiEntry,!1,s&&"string"!=typeof s,!1);i.push(l)}r[e]=qt(e,o,i)})),r}function fn(e,t,n){for(var o=n.db.objectStoreNames,i=0;i<o.length;++i){var a=o[i],s=n.objectStore(a);e._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var c=s.indexNames[l],u=s.index(c).keyPath,d="string"==typeof u?u:"["+v(u).join("+")+"]";!t[a]||(u=t[a].idxByName[d])&&(u.name=c,delete t[a].idxByName[d],t[a].idxByName[c]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function hn(e){return e.split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Ht(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)}))}var pn=(gn.prototype._parseStoresSpec=function(e,t){o(e).forEach((function(n){if(null!==e[n]){var r=hn(e[n]),o=r.shift();if(o.unique=!0,o.multi)throw new K.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")})),t[n]=qt(n,o,r)}}))},gn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach((function(e){s(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)})),t._dbSchema=r,nn(t,[t._allTables,t,t.Transaction.prototype]),tn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(r),r),t._storeNames=o(r),this},gn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=oe(this._cfg.contentUpgrade||G,e),this},gn);function gn(){}function mn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new tr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function vn(e){return e&&"function"==typeof e.databases}function yn(e){return $e((function(){return ye.letThrough=!0,e()}))}function bn(e){return!("from"in e)}var wn=function(e,t){if(!this){var n=new wn;return e&&"d"in e&&s(n,e),n}s(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function xn(e,t,n){var r=ct(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(bn(e))return s(e,{from:t,to:n,d:1});var o=e.l;if(r=e.r,ct(n,e.from)<0)return o?xn(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},En(e);if(0<ct(t,e.to))return r?xn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},En(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ct(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,o&&!e.l&&_n(e,o),r&&n&&_n(e,r)}}function _n(e,t){bn(t)||function e(t,n){var r=n.from,o=n.to,i=n.l;n=n.r,xn(t,r,o),i&&e(t,i),n&&e(t,n)}(e,t)}function kn(e,t){var n=Sn(t),r=n.next();if(r.done)return!1;for(var o=r.value,i=Sn(e),a=i.next(o.from),s=a.value;!r.done&&!a.done;){if(ct(s.from,o.to)<=0&&0<=ct(s.to,o.from))return!0;ct(o.from,s.from)<0?o=(r=n.next(s.from)).value:s=(a=i.next(o.from)).value}return!1}function Sn(e){var t=bn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function En(e){var n,r,o=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),i=1<o?"r":o<-1?"l":"";i&&(n="r"==i?"l":"r",r=t({},e),o=e[i],e.from=o.from,e.to=o.to,e[i]=o[i],r[i]=o[n],(e[n]=r).d=jn(r)),e.d=jn(e)}function jn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Cn(e,t){return o(t).forEach((function(n){e[n]?_n(e[n],t[n]):e[n]=function e(t){var n,r,o={};for(n in t)u(t,n)&&(r=t[n],o[n]=!r||"object"!=typeof r||C.has(r.constructor)?r:e(r));return o}(t[n])})),e}function Nn(e,t){return e.all||t.all||Object.keys(e).some((function(n){return t[n]&&kn(t[n],e[n])}))}d(wn.prototype,((F={add:function(e){return _n(this,e),this},addKey:function(e){return xn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return xn(t,e,e)})),this},hasKey:function(e){var t=Sn(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[P]=function(){return Sn(this)},F));var An={},On={},Rn=!1;function Pn(e){Cn(On,e),Rn||(Rn=!0,setTimeout((function(){Rn=!1,Tn(On,!(On={}))}),0))}function Tn(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(An);r<o.length;r++)In(a=o[r],e,n,t);else for(var i in e){var a,s=/^idb\:\/\/(.*)\/(.*)\//.exec(i);s&&(i=s[1],s=s[2],(a=An["idb://".concat(i,"/").concat(s)])&&In(a,e,n,t))}n.forEach((function(e){return e()}))}function In(e,t,n,r){for(var o=[],i=0,a=Object.entries(e.queries.query);i<a.length;i++){for(var s=a[i],l=s[0],c=[],u=0,d=s[1];u<d.length;u++){var f=d[u];Nn(t,f.obsSet)?f.subscribers.forEach((function(e){return n.add(e)})):r&&c.push(f)}r&&o.push([l,c])}if(r)for(var h=0,p=o;h<p.length;h++){var g=p[h];l=g[0],c=g[1],e.queries.query[l]=c}}function Mn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Xe(t.dbOpenError):e}));t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function s(){if(t.openCanceller!==r)throw new K.DatabaseClosed("db.open() was cancelled")}function l(){return new _e((function(r,c){if(s(),!n)throw new K.MissingAPI;var u=e.name,h=t.autoSchema||!i?n.open(u):n.open(u,i);if(!h)throw new K.MissingAPI;h.onerror=Lt(c),h.onblocked=Ie(e._fireOnBlocked),h.onupgradeneeded=Ie((function(r){var o;d=h.transaction,t.autoSchema&&!e._options.allowEmptyDB?(h.onerror=Bt,d.abort(),h.result.close(),(o=n.deleteDatabase(u)).onsuccess=o.onerror=Ie((function(){c(new K.NoSuchDatabase("Database ".concat(u," doesnt exist")))}))):(d.onerror=Lt(c),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,f=r<1,e.idbdb=h.result,a&&an(e,d),on(e,r/10,d,c))}),c),h.onsuccess=Ie((function(){d=null;var n,s,c,p,g,m=e.idbdb=h.result,y=v(m.objectStoreNames);if(0<y.length)try{var b=m.transaction(1===(p=y).length?p[0]:p,"readonly");if(t.autoSchema)s=m,c=b,(n=e).verno=s.version/10,c=n._dbSchema=dn(0,s,c),n._storeNames=v(s.objectStoreNames,0),tn(n,[n._allTables],o(c),c);else if(fn(e,e._dbSchema,b),((g=sn(dn(0,(g=e).idbdb,b),g._dbSchema)).add.length||g.change.some((function(e){return e.add.length||e.change.length})))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),m.close(),i=m.version+1,a=!0,r(l());en(e,b)}catch(n){}tt.push(e),m.onversionchange=Ie((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),m.onclose=Ie((function(t){e.on("close").fire(t)})),f&&(g=e._deps,b=u,m=g.indexedDB,g=g.IDBKeyRange,vn(m)||b===nt||mn(m,g).put({name:b}).catch(G)),r()}),c)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(0<i)return i=0,l()}return _e.reject(e)}))}var c,u=t.dbReadyResolve,d=null,f=!1;return _e.race([r,("undefined"==typeof navigator?_e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()})).finally((function(){return clearInterval(c)})):Promise.resolve()).then(l)]).then((function(){return s(),t.onReadyBeingFired=[],_e.resolve(yn((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(oe,G);return t.onReadyBeingFired=[],_e.resolve(yn((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)})).catch((function(n){t.dbOpenError=n;try{d&&d.abort()}catch(n){}return r===t.openCanceller&&e._close(),Xe(n)})).finally((function(){t.openComplete=!0,u()})).then((function(){var t;return f&&(t={},e.tables.forEach((function(n){n.schema.indexes.forEach((function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new wn(-1/0,[[[]]]))})),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new wn(-1/0,[[[]]])})),$t(Ft).fire(t),Tn(t,!0)),e}))}function Dn(e){function t(t){return e.next(t)}var n=o(t),r=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t);return t=o.value,o.done?t:t&&"function"==typeof t.then?t.then(n,r):a(t)?Promise.all(t).then(n,r):n(t)}}return o(t)()}function Ln(e,t,n){for(var r=a(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}var Bn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),o=r.schema,i={},a=[];function s(e,n,r){var o=Xt(e),l=i[o]=i[o]||[],c=null==e?0:"string"==typeof e?1:e.length,u=0<n;return u=t(t({},r),{name:u?"".concat(o,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:n,keyLength:c,extractKey:Zt(e),unique:!u&&r.unique}),l.push(u),u.isPrimaryKey||a.push(u),1<c&&s(2===c?e[0]:e.slice(0,c-1),n+1,r),l.sort((function(e,t){return e.keyTail-t.keyTail})),u}n=s(o.primaryKey.keyPath,0,o.primaryKey),i[":id"]=[n];for(var l=0,c=o.indexes;l<c.length;l++){var u=c[l];s(u.keyPath,0,u)}function d(n){var r,o=n.query.index;return o.isVirtual?t(t({},n),{query:{index:o.lowLevelIndex,range:(r=n.query.range,o=o.keyTail,{type:1===r.type?2:r.type,lower:Ln(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,o),lowerOpen:!0,upper:Ln(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,o),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},o),{primaryKey:n,indexes:a,getIndexByKeyPath:function(e){return(e=i[Xt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,o=n.keyTail,i=n.isVirtual,a=n.keyLength;return i?r.openCursor(d(t)).then((function(e){return e&&s(e)})):r.openCursor(t);function s(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Ln(r,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Ln(t,e.MAX_KEY,o),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}}})}})}};function Fn(e,t,n,r){return n=n||{},r=r||"",o(e).forEach((function(o){var i,a,s;u(t,o)?(i=e[o],a=t[o],"object"==typeof i&&"object"==typeof a&&i&&a?(s=R(i))!==R(a)?n[r+o]=t[o]:"Object"===s?Fn(i,a,n,r+o+"."):i!==a&&(n[r+o]=t[o]):i!==a&&(n[r+o]=t[o])):n[r+o]=void 0})),o(t).forEach((function(o){u(e,o)||(n[r+o]=t[o])})),n}function zn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var $n={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(r){var o=e.table(r),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var a=ye.trans,s=a.table(r).hook,l=s.deleting,c=s.creating,d=s.updating;switch(e.type){case"add":if(c.fire===G)break;return a._promise("readwrite",(function(){return f(e)}),!0);case"put":if(c.fire===G&&d.fire===G)break;return a._promise("readwrite",(function(){return f(e)}),!0);case"delete":if(l.fire===G)break;return a._promise("readwrite",(function(){return f(e)}),!0);case"deleteRange":if(l.fire===G)break;return a._promise("readwrite",(function(){return function e(n,r,a){return o.query({trans:n,values:!1,query:{index:i,range:r},limit:a}).then((function(o){var i=o.result;return f({type:"delete",keys:i,trans:n}).then((function(o){return 0<o.numFailures?Promise.reject(o.failures[0]):i.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:i[i.length-1],lowerOpen:!0}),a)}))}))}(e.trans,e.range,1e4)}),!0)}return o.mutate(e);function f(e){var r,a,s,f=ye.trans,h=e.keys||zn(i,e);if(!h)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:h}):t({},e)).type&&(e.values=n([],e.values)),e.keys&&(e.keys=n([],e.keys)),r=o,s=h,("add"===(a=e).type?Promise.resolve([]):r.getMany({trans:a.trans,keys:s,cache:"immutable"})).then((function(t){var n=h.map((function(n,r){var o,a,s,h=t[r],p={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(p,n,h,f):"add"===e.type||void 0===h?(o=c.fire.call(p,n,e.values[r],f),null==n&&null!=o&&(e.keys[r]=n=o,i.outbound||_(e.values[r],i.keyPath,n))):(o=Fn(h,e.values[r]),(a=d.fire.call(p,o,n,h,f))&&(s=e.values[r],Object.keys(a).forEach((function(e){u(s,e)?s[e]=a[e]:_(s,e,a[e])})))),p}));return o.mutate(e).then((function(r){for(var o=r.failures,i=r.results,a=r.numFailures,s=(r=r.lastResult,0);s<h.length;++s){var l=(i||h)[s],c=n[s];null==l?c.onerror&&c.onerror(o[s]):c.onsuccess&&c.onsuccess("put"===e.type&&t[s]?e.values[s]:l)}return{failures:o,results:i,numFailures:a,lastResult:r}})).catch((function(e){return n.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}};function Un(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],o=0,i=0;o<t.keys.length&&i<e.length;++o)0===ct(t.keys[o],e[i])&&(r.push(n?A(t.values[o]):t.values[o]),++i);return r.length===e.length?r:null}catch(e){return null}}var Wn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Un(e.keys,e.trans._cache,"clone"===e.cache);return t?_e.resolve(t):r.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?A(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Hn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Vn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new wn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(ye.subscr&&"readonly"!==n)throw new K.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ye.querier));return e.transaction(t,n,r)},table:function(i){var s=e.table(i),l=s.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,f=c.outbound,h=c.autoIncrement&&u.filter((function(e){return e.compound&&e.keyPath.includes(c.keyPath)})),p=t(t({},s),{mutate:function(t){function o(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),g[e]||(g[e]=new wn)}var u,d,f,p=t.trans,g=t.mutatedParts||(t.mutatedParts={}),m=o(""),v=o(":dels"),y=t.type,b="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[zn(c,t).filter((function(e){return e})),t.values]:[],w=b[0],x=b[1];return b=t.trans._cache,a(w)?(m.addKeys(w),(b="delete"===y||w.length===x.length?Un(w,b):null)||v.addKeys(w),(b||x)&&(u=o,d=b,f=x,l.indexes.forEach((function(e){var t=u(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&a(n)?n.forEach((function(e){return t.addKey(e)})):t.addKey(n)}(d||f).forEach((function(e,t){var o=d&&n(d[t]);0!==ct(o,t=f&&n(f[t]))&&(null!=o&&r(o),null!=t&&r(t))}))})))):w?(x={from:null!==(x=w.lower)&&void 0!==x?x:e.MIN_KEY,to:null!==(x=w.upper)&&void 0!==x?x:e.MAX_KEY},v.add(x),m.add(x)):(m.add(r),v.add(r),l.indexes.forEach((function(e){return o(e.name).add(r)}))),s.mutate(t).then((function(e){return!w||"add"!==t.type&&"put"!==t.type||(m.addKeys(e.results),h&&h.forEach((function(n){for(var r=t.values.map((function(e){return n.extractKey(e)})),i=n.keyPath.findIndex((function(e){return e===c.keyPath})),a=0,s=e.results.length;a<s;++a)r[a][i]=e.results[a];o(n.name).addKeys(r)}))),p.mutatedParts=Cn(p.mutatedParts||{},g),e}))}}),g=(u=function(t){t=(n=t.query).index;var n=n.range;return[t,new wn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[c,new wn(e.key)]},getMany:function(e){return[c,(new wn).addKeys(e.keys)]},count:u,query:u,openCursor:u});return o(g).forEach((function(e){p[e]=function(o){var a=!!(p=ye.subscr),l=Hn(ye,s)&&Vn(e,o)?o.obsSet={}:p;if(a){var c=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),l[e]||(l[e]=new wn)},u=c(""),h=c(":dels"),p=(a=(p=g[e](o))[0],p[1]);if(("query"===e&&a.isPrimaryKey&&!o.values?h:c(a.name||"")).add(p),!a.isPrimaryKey){if("count"!==e){var m="query"===e&&f&&o.values&&s.query(t(t({},o),{values:!1}));return s[e].apply(this,arguments).then((function(t){if("query"===e){if(f&&o.values)return m.then((function(e){return e=e.result,u.addKeys(e),t}));var n=o.values?t.result.map(d):t.result;(o.values?u:h).addKeys(n)}else if("openCursor"===e){var r=t,i=o.values;return r&&Object.create(r,{key:{get:function(){return h.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return h.addKey(e),e}},value:{get:function(){return i&&u.addKey(r.primaryKey),r.value}}})}return t}))}h.add(r)}}return s[e].apply(this,arguments)}})),p}})}};function Kn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===o?null:(n=t({},n),a(n.keys)&&(n.keys=n.keys.filter((function(e,t){return!(t in r.failures)}))),"values"in n&&a(n.values)&&(n.values=n.values.filter((function(e,t){return!(t in r.failures)}))),n)}function Zn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ct(n,r.lower):0<=ct(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var n,r}function Yn(e,t,n,r,o,i){if(!n||0===n.length)return e;var s=t.query.index,l=s.multiEntry,c=t.query.range,u=r.schema.primaryKey.extractKey,d=s.extractKey,f=(s.lowLevelIndex||s).extractKey;return n=n.reduce((function(e,n){var r=e,o=[];if("add"===n.type||"put"===n.type)for(var i=new wn,s=n.values.length-1;0<=s;--s){var f,h=n.values[s],p=u(h);i.hasKey(p)||(f=d(h),(l&&a(f)?f.some((function(e){return Zn(e,c)})):Zn(f,c))&&(i.addKey(p),o.push(h)))}switch(n.type){case"add":var g=(new wn).addKeys(t.values?e.map((function(e){return u(e)})):e);r=e.concat(t.values?o.filter((function(e){return e=u(e),!g.hasKey(e)&&(g.addKey(e),!0)})):o.map((function(e){return u(e)})).filter((function(e){return!g.hasKey(e)&&(g.addKey(e),!0)})));break;case"put":var m=(new wn).addKeys(n.values.map((function(e){return u(e)})));r=e.filter((function(e){return!m.hasKey(t.values?u(e):e)})).concat(t.values?o:o.map((function(e){return u(e)})));break;case"delete":var v=(new wn).addKeys(n.keys);r=e.filter((function(e){return!v.hasKey(t.values?u(e):e)}));break;case"deleteRange":var y=n.range;r=e.filter((function(e){return!Zn(u(e),y)}))}return r}),e),n===e?e:(n.sort((function(e,t){return ct(f(e),f(t))||ct(u(e),u(t))})),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(o.dirty=!0)),i?Object.freeze(n):n)}function Gn(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Xn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Jn(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",(function(){var r,o;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,o=t,setTimeout((function(){0===r.subscribers.size&&I(o,r)}),3e3))}))}var Qn={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,o){var i,a,s=e.transaction(t,r,o);return"readwrite"===r&&(a=(i=new AbortController).signal,o=function(o){return function(){if(i.abort(),"readwrite"===r){for(var a=new Set,l=0,c=t;l<c.length;l++){var u=c[l],d=An["idb://".concat(n,"/").concat(u)];if(d){var f=e.table(u),h=d.optimisticOps.filter((function(e){return e.trans===s}));if(s._explicit&&o&&s.mutatedParts)for(var p=0,g=Object.values(d.queries.query);p<g.length;p++)for(var m=0,v=(w=g[p]).slice();m<v.length;m++)Nn((x=v[m]).obsSet,s.mutatedParts)&&(I(w,x),x.subscribers.forEach((function(e){return a.add(e)})));else if(0<h.length){d.optimisticOps=d.optimisticOps.filter((function(e){return e.trans!==s}));for(var y=0,b=Object.values(d.queries.query);y<b.length;y++)for(var w,x,_,k=0,S=(w=b[y]).slice();k<S.length;k++)null!=(x=S[k]).res&&s.mutatedParts&&(o&&!x.dirty?(_=Object.isFrozen(x.res),_=Yn(x.res,x.req,h,f,x,_),x.dirty?(I(w,x),x.subscribers.forEach((function(e){return a.add(e)}))):_!==x.res&&(x.res=_,x.promise=_e.resolve({result:_}))):(x.dirty&&I(w,x),x.subscribers.forEach((function(e){return a.add(e)}))))}}}a.forEach((function(e){return e()}))}}},s.addEventListener("abort",o(!1),{signal:a}),s.addEventListener("error",o(!1),{signal:a}),s.addEventListener("complete",o(!0),{signal:a})),s},table:function(r){var o=e.table(r),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var a=ye.trans;if(i.outbound||"disabled"===a.db._options.cache||a.explicit||"readwrite"!==a.idbtrans.mode)return o.mutate(e);var s=An["idb://".concat(n,"/").concat(r)];return s?(a=o.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||zn(i,e).some((function(e){return null==e})))?(s.optimisticOps.push(e),e.mutatedParts&&Pn(e.mutatedParts),a.then((function(t){0<t.numFailures&&(I(s.optimisticOps,e),(t=Kn(0,e,t))&&s.optimisticOps.push(t),e.mutatedParts&&Pn(e.mutatedParts))})),a.catch((function(){I(s.optimisticOps,e),e.mutatedParts&&Pn(e.mutatedParts)}))):a.then((function(n){var r=Kn(0,t(t({},e),{values:e.values.map((function(e,r){var o;return n.failures[r]||_(e=null!==(o=i.keyPath)&&void 0!==o&&o.includes(".")?A(e):t({},e),i.keyPath,n.results[r]),e}))}),n);s.optimisticOps.push(r),queueMicrotask((function(){return e.mutatedParts&&Pn(e.mutatedParts)}))})),a):o.mutate(e)},query:function(e){if(!Hn(ye,o)||!Vn("query",e))return o.query(e);var t="immutable"===(null===(s=ye.trans)||void 0===s?void 0:s.db._options.cache),i=(c=ye).requery,a=c.signal,s=function(e,t,n,r){var o=An["idb://".concat(e,"/").concat(t)];if(!o)return[];if(!(t=o.queries[n]))return[null,!1,o,null];var i=t[(r.query?r.query.index.name:null)||""];if(!i)return[null,!1,o,null];switch(n){case"query":var a=i.find((function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Gn(e.req.query.range,r.query.range)}));return a?[a,!0,o,i]:[i.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Xn(e.req.query.range,r.query.range)})),!1,o,i];case"count":return a=i.find((function(e){return Gn(e.req.query.range,r.query.range)})),[a,!!a,o,i]}}(n,r,"query",e),l=s[0],c=s[1],u=s[2],d=s[3];return l&&c?l.obsSet=e.obsSet:(c=o.query(e).then((function(e){var n=e.result;if(l&&(l.res=n),t){for(var r=0,o=n.length;r<o;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=A(n);return e})).catch((function(e){return d&&l&&I(d,l),Promise.reject(e)})),l={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(l):(d=[l],(u=u||(An["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),Jn(l,d,i,a),l.promise.then((function(n){return{result:Yn(n.result,e,null==u?void 0:u.optimisticOps,o,l,t)}}))}})}})}};function er(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var tr=(nr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new K.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(rn),n.stores({}),this._state.autoSchema=!1,n)},nr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ye.letThrough||this._vip)?e():new _e((function(e,n){if(t._state.openComplete)return n(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new K.DatabaseClosed);t.open().catch(G)}t._state.dbReadyPromise.then(e,n)})).then(e)},nr.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:o}),e.sort((function(e,t){return e.level-t.level})),this},nr.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},nr.prototype.open=function(){var e=this;return Ze(ve,(function(){return Mn(e)}))},nr.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new _e((function(t){e.dbReadyResolve=t})),e.openCanceller=new _e((function(t,n){e.cancelOpen=n})))},nr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new K.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new K.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new _e((function(o,i){function a(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ie((function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,vn(r)||n===nt||mn(r,e).delete(n).catch(G),o()})),n.onerror=Lt(i),n.onblocked=t._fireOnBlocked}if(n)throw new K.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()}))},nr.prototype.backendDB=function(){return this.idbdb},nr.prototype.isOpen=function(){return null!==this.idbdb},nr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nr.prototype,"tables",{get:function(){var e=this;return o(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),nr.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new K.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[e,E(o),n]}.apply(this,arguments);return this._transaction.apply(this,e)},nr.prototype._transaction=function(e,t,n){var r=this,o=ye.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var i,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==e||e===rt)i=rt;else{if("rw"!=e&&e!=ot)throw new K.InvalidArgument("Invalid transaction mode: "+e);i=ot}if(o){if(o.mode===rt&&i===ot){if(!s)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach((function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!s)throw new K.SubTransaction("Table "+e+" not included in parent transaction.");o=null}})),s&&o&&!o.active&&(o=null)}}catch(n){return o?o._promise(null,(function(e,t){t(n)})):Xe(n)}var l=function e(t,n,r,o,i){return _e.resolve().then((function(){var a=ye.transless||ye,s=t._createTransaction(n,r,t._dbSchema,o);if(s.explicit=!0,a={trans:s,transless:a},o)s.idbtrans=o.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(a){return a.name===V.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,n,r,null,i)}))):Xe(a)}var l,c=L(i);return c&&Ue(),a=_e.follow((function(){var e;(l=i.call(s,s))&&(c?(e=We.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Dn(l)))}),a),(l&&"function"==typeof l.then?_e.resolve(l).then((function(e){return s.active?e:Xe(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):a.then((function(){return l}))).then((function(e){return o&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),Xe(e)}))}))}.bind(null,this,i,a,o,n);return o?o._promise(i,l,"lock"):ye.trans?Ze(ye.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},nr.prototype.table=function(e){if(!u(this._allTables,e))throw new K.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nr);function nr(e,n){var r=this;this._middlewares={},this.verno=0;var o=nr.dependencies;this._options=n=t({addons:nr.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},o=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,s,l,c,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new _e((function(e){u.dbReadyResolve=e})),u.openCanceller=new _e((function(e,t){u.cancelOpen=t})),this._state=u,this.name=e,this.on=pt(this,"populate","blocked","versionchange","close",{ready:[oe,G]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(function(e){return function(t,n){nr.vip((function(){var o,i=r._state;i.openComplete?(i.dbOpenError||_e.resolve().then(t),n&&e(t)):i.onReadyBeingFired?(i.onReadyBeingFired.push(t),n&&e(t)):(e(t),o=r,n||e((function e(){o.on.ready.unsubscribe(t),o.on.ready.unsubscribe(e)})))}))}})),this.Collection=(i=this,gt(Et.prototype,(function(e,t){this.db=i;var n=at,r=null;if(t)try{n=t()}catch(e){r=e}var o=e._ctx;e=(t=o.table).hook.reading.fire,this._ctx={table:t,index:o.index,isPrimKey:!o.index||t.schema.primKey.keyPath&&o.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:e!==X?e:null}}))),this.Table=(a=this,gt(ft.prototype,(function(e,t,n){this.db=a,this._tx=n,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:pt(null,{creating:[ee,G],reading:[J,X],updating:[ne,G],deleting:[te,G]})}))),this.Transaction=(s=this,gt(Ut.prototype,(function(e,t,n,r,o){var i=this;this.db=s,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=pt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _e((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),Xe(e)}))}))),this.Version=(l=this,gt(pn.prototype,(function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(c=this,gt(Mt.prototype,(function(e,t,n){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new K.MissingAPI}))),this.on("versionchange",(function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=Kt(n.IDBKeyRange),this._createTransaction=function(e,t,n,o){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Wn),this.use(Qn),this.use(qn),this.use(Bn),this.use($n);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return er(r.table(e),d)};var o=Reflect.get(e,t,n);return o instanceof ft?er(o,d):"tables"===t?o.map((function(e){return er(e,d)})):"_createTransaction"===t?function(){return er(o.apply(this,arguments),d)}:o}});this.vip=d,o.forEach((function(e){return e(r)}))}F="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var rr,or=(ir.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},ir.prototype[F]=function(){return this},ir);function ir(e){this._subscribe=e}try{rr={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(j){rr={indexedDB:null,IDBKeyRange:null}}function ar(e){var t,n=!1,r=new or((function(r){var o,i=L(e),a=!1,s={},l={},c={get closed(){return a},unsubscribe:function(){a||(a=!0,o&&o.abort(),d&&$t.storagemutated.unsubscribe(h))}};r.start&&r.start(c);var d=!1,f=function(){return Ge(p)},h=function(e){Cn(s,e),Nn(l,s)&&f()},p=function(){var c,p,g;!a&&rr.indexedDB&&(s={},c={},o&&o.abort(),o=new AbortController,g=function(t){var n=Oe();try{i&&Ue();var r=$e(e,t);return r=i?r.finally(We):r}finally{n&&Re()}}(p={subscr:c,signal:o.signal,requery:f,querier:e,trans:null}),Promise.resolve(g).then((function(e){n=!0,t=e,a||p.signal.aborted||(s={},function(e){for(var t in e)if(u(e,t))return;return 1}(l=c)||d||($t(Ft,h),d=!0),Ge((function(){return!a&&r.next&&r.next(e)})))}),(function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||Ge((function(){a||r.error&&r.error(e)}))})))};return setTimeout(f,0),c}));return r.hasValue=function(){return n},r.getValue=function(){return t},r}var sr=tr;function lr(e){var t=ur;try{ur=!0,$t.storagemutated.fire(e),Tn(e,!0)}finally{ur=t}}d(sr,t(t({},Y),{delete:function(e){return new sr(e,{addons:[]}).delete()},exists:function(e){return new sr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return n=(t=sr.dependencies).indexedDB,t=t.IDBKeyRange,(vn(n)?Promise.resolve(n.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==nt}))})):mn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Xe(new K.MissingAPI)}var t,n},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return ye.trans?Ze(ye.transless,e):e()},vip:yn,async:function(e){return function(){try{var t=Dn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:_e.resolve(t)}catch(t){return Xe(t)}}},spawn:function(e,t,n){try{var r=Dn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:_e.resolve(r)}catch(e){return Xe(e)}},currentTransaction:{get:function(){return ye.trans||null}},waitFor:function(e,t){return t=_e.resolve("function"==typeof e?sr.ignoreTransaction(e):e).timeout(t||6e4),ye.trans?ye.trans.waitFor(t):t},Promise:_e,debug:{get:function(){return ie},set:function(e){ae(e)}},derive:p,extend:s,props:d,override:y,Events:pt,on:$t,liveQuery:ar,extendObservabilitySet:Cn,getByKeyPath:x,setByKeyPath:_,delByKeyPath:function(e,t){"string"==typeof t?_(e,t,void 0):"length"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:k,deepClone:A,getObjectDiff:Fn,cmp:ct,asap:w,minKey:-1/0,addons:[],connections:tt,errnames:V,dependencies:rr,cache:An,semVer:"4.0.11",version:"4.0.11".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),sr.maxKey=Kt(sr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&($t(Ft,(function(e){ur||(e=new CustomEvent(zt,{detail:e}),ur=!0,dispatchEvent(e),ur=!1)})),addEventListener(zt,(function(e){e=e.detail,ur||lr(e)})));var cr,ur=!1,dr=function(){};return"undefined"!=typeof BroadcastChannel&&((dr=function(){(cr=new BroadcastChannel(zt)).onmessage=function(e){return e.data&&lr(e.data)}})(),"function"==typeof cr.unref&&cr.unref(),$t(Ft,(function(e){ur||cr.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!tr.disableBfCache&&e.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),null!=cr&&cr.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(e){!tr.disableBfCache&&e.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),dr(),lr({all:new wn(-1/0,[[]])}))}))),_e.rejectionMapper=function(e,t){return!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Z[e.name]?e:(t=new Z[e.name](t||e.message,e),"stack"in e&&h(t,"stack",{get:function(){return this.inner.stack}}),t)},ae(ie),t(tr,Object.freeze({__proto__:null,Dexie:tr,liveQuery:ar,Entity:lt,cmp:ct,PropModification:kt,replacePrefix:function(e,t){return new kt({replacePrefix:[e,t]})},add:function(e){return new kt({add:e})},remove:function(e){return new kt({remove:e})},default:tr,RangeSet:wn,mergeRanges:_n,rangesOverlap:kn}),{default:tr}),tr}()}(Np);const Ap=a(Np.exports),Op=Symbol.for("Dexie"),Rp=globalThis[Op]||(globalThis[Op]=Ap);if(Ap.semVer!==Rp.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ap.semVer} and ${Rp.semVer}`);const{liveQuery:Pp,mergeRanges:Tp,rangesOverlap:Ip,RangeSet:Mp,cmp:Dp,Entity:Lp,PropModification:Bp,replacePrefix:Fp,add:zp,remove:$p}=Rp;var Up,Wp;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Up||(Up={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Wp||(Wp={}));const Hp=Up.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vp=e=>{switch(typeof e){case"undefined":return Hp.undefined;case"string":return Hp.string;case"number":return isNaN(e)?Hp.nan:Hp.number;case"boolean":return Hp.boolean;case"function":return Hp.function;case"bigint":return Hp.bigint;case"symbol":return Hp.symbol;case"object":return Array.isArray(e)?Hp.array:null===e?Hp.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Hp.promise:"undefined"!=typeof Map&&e instanceof Map?Hp.map:"undefined"!=typeof Set&&e instanceof Set?Hp.set:"undefined"!=typeof Date&&e instanceof Date?Hp.date:Hp.object;default:return Hp.unknown}},qp=Up.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Kp extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const o of e.issues)if("invalid_union"===o.code)o.unionErrors.map(r);else if("invalid_return_type"===o.code)r(o.returnTypeError);else if("invalid_arguments"===o.code)r(o.argumentsError);else if(0===o.path.length)n._errors.push(t(o));else{let e=n,r=0;for(;r<o.path.length;){const n=o.path[r];r===o.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(o))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof Kp))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Up.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Kp.create=e=>new Kp(e);const Zp=(e,t)=>{let n;switch(e.code){case qp.invalid_type:n=e.received===Hp.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case qp.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Up.jsonStringifyReplacer)}`;break;case qp.unrecognized_keys:n=`Unrecognized key(s) in object: ${Up.joinValues(e.keys,", ")}`;break;case qp.invalid_union:n="Invalid input";break;case qp.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Up.joinValues(e.options)}`;break;case qp.invalid_enum_value:n=`Invalid enum value. Expected ${Up.joinValues(e.options)}, received '${e.received}'`;break;case qp.invalid_arguments:n="Invalid function arguments";break;case qp.invalid_return_type:n="Invalid function return type";break;case qp.invalid_date:n="Invalid date";break;case qp.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Up.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case qp.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case qp.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case qp.custom:n="Invalid input";break;case qp.invalid_intersection_types:n="Intersection results could not be merged";break;case qp.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case qp.not_finite:n="Number must be finite";break;default:n=t.defaultError,Up.assertNever(e)}return{message:n}};let Yp=Zp;function Gp(){return Yp}const Xp=e=>{const{data:t,path:n,errorMaps:r,issueData:o}=e,i=[...n,...o.path||[]],a={...o,path:i};if(void 0!==o.message)return{...o,path:i,message:o.message};let s="";const l=r.filter((e=>!!e)).slice().reverse();for(const c of l)s=c(a,{data:t,defaultError:s}).message;return{...o,path:i,message:s}};function Jp(e,t){const n=Gp(),r=Xp({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Zp?void 0:Zp].filter((e=>!!e))});e.common.issues.push(r)}class Qp{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return eg;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return Qp.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:o}=r;if("aborted"===t.status)return eg;if("aborted"===o.status)return eg;"dirty"===t.status&&e.dirty(),"dirty"===o.status&&e.dirty(),"__proto__"===t.value||void 0===o.value&&!r.alwaysSet||(n[t.value]=o.value)}return{status:e.value,value:n}}}const eg=Object.freeze({status:"aborted"}),tg=e=>({status:"dirty",value:e}),ng=e=>({status:"valid",value:e}),rg=e=>"aborted"===e.status,og=e=>"dirty"===e.status,ig=e=>"valid"===e.status,ag=e=>"undefined"!=typeof Promise&&e instanceof Promise;function sg(e,t,n,r){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function lg(e,t,n,r,o){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var cg,ug,dg;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(cg||(cg={}));class fg{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hg=(e,t)=>{if(ig(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Kp(e.common.issues);return this._error=t,this._error}}};function pg(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:o}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:o};return{errorMap:(t,o)=>{var i,a;const{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:o.defaultError}:void 0===o.data?{message:null!==(i=null!=s?s:r)&&void 0!==i?i:o.defaultError}:"invalid_type"!==t.code?{message:o.defaultError}:{message:null!==(a=null!=s?s:n)&&void 0!==a?a:o.defaultError}},description:o}}class gg{get description(){return this._def.description}_getType(e){return Vp(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Vp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qp,ctx:{common:e.parent.common,data:e.data,parsedType:Vp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ag(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vp(e)},o=this._parseSync({data:e,path:r.path,parent:r});return hg(r,o)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vp(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return ig(t)?{value:t.value}:{issues:r.common.issues}}catch(o){(null===(n=null===(t=null==o?void 0:o.message)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then((e=>ig(e)?{value:e.value}:{issues:r.common.issues}))}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Vp(e)},r=this._parse({data:e,path:n.path,parent:n}),o=await(ag(r)?r:Promise.resolve(r));return hg(n,o)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const o=e(t),i=()=>r.addIssue({code:qp.custom,...n(t)});return"undefined"!=typeof Promise&&o instanceof Promise?o.then((e=>!!e||(i(),!1))):!!o||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new gm({schema:this,typeName:Nm.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return mm.create(this,this._def)}nullable(){return vm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gg.create(this)}promise(){return pm.create(this,this._def)}or(e){return Qg.create([this,e],this._def)}and(e){return rm.create(this,e,this._def)}transform(e){return new gm({...pg(this._def),schema:this,typeName:Nm.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ym({...pg(this._def),innerType:this,defaultValue:t,typeName:Nm.ZodDefault})}brand(){return new _m({typeName:Nm.ZodBranded,type:this,...pg(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new bm({...pg(this._def),innerType:this,catchValue:t,typeName:Nm.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return km.create(this,e)}readonly(){return Sm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const mg=/^c[^\s-]{8,}$/i,vg=/^[0-9a-z]+$/,yg=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bg=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wg=/^[a-z0-9_-]{21}$/i,xg=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_g=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,kg=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Sg;const Eg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Cg=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ng=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ag=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Og=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Rg="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Pg=new RegExp(`^${Rg}$`);function Tg(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Ig(e){let t=`${Rg}T${Tg(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Mg(e,t){if(!xg.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),o=JSON.parse(atob(r));return"object"==typeof o&&null!==o&&(!(!o.typ||!o.alg)&&(!t||o.alg===t))}catch(n){return!1}}function Dg(e,t){return!("v4"!==t&&t||!jg.test(e))||!("v6"!==t&&t||!Ng.test(e))}class Lg extends gg{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Hp.string){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.string,received:t.parsedType}),eg}const t=new Qp;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const r=e.data.length>a.value,o=e.data.length<a.value;(r||o)&&(n=this._getOrReturnCtx(e,n),r?Jp(n,{code:qp.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&Jp(n,{code:qp.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)kg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"email",code:qp.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)Sg||(Sg=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Sg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"emoji",code:qp.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)bg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"uuid",code:qp.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)wg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"nanoid",code:qp.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)mg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"cuid",code:qp.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)vg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"cuid2",code:qp.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)yg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"ulid",code:qp.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(i){n=this._getOrReturnCtx(e,n),Jp(n,{validation:"url",code:qp.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"regex",code:qp.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){Ig(a).test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){Pg.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){new RegExp(`^${Tg(a)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?_g.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"duration",code:qp.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?(r=e.data,("v4"!==(o=a.version)&&o||!Eg.test(r))&&("v6"!==o&&o||!Cg.test(r))&&(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"ip",code:qp.invalid_string,message:a.message}),t.dirty())):"jwt"===a.kind?Mg(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"jwt",code:qp.invalid_string,message:a.message}),t.dirty()):"cidr"===a.kind?Dg(e.data,a.version)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"cidr",code:qp.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?Ag.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"base64",code:qp.invalid_string,message:a.message}),t.dirty()):"base64url"===a.kind?Og.test(e.data)||(n=this._getOrReturnCtx(e,n),Jp(n,{validation:"base64url",code:qp.invalid_string,message:a.message}),t.dirty()):Up.assertNever(a);var r,o;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:qp.invalid_string,...cg.errToObj(n)})}_addCheck(e){return new Lg({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...cg.errToObj(e)})}url(e){return this._addCheck({kind:"url",...cg.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...cg.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...cg.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...cg.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...cg.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...cg.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...cg.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...cg.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...cg.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...cg.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...cg.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...cg.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...cg.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...cg.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...cg.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...cg.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...cg.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...cg.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...cg.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...cg.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...cg.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...cg.errToObj(t)})}nonempty(e){return this.min(1,cg.errToObj(e))}trim(){return new Lg({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Lg({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Lg({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Bg(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,o=n>r?n:r;return parseInt(e.toFixed(o).replace(".",""))%parseInt(t.toFixed(o).replace(".",""))/Math.pow(10,o)}Lg.create=e=>{var t;return new Lg({checks:[],typeName:Nm.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...pg(e)})};class Fg extends gg{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Hp.number){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.number,received:t.parsedType}),eg}let t;const n=new Qp;for(const r of this._def.checks)if("int"===r.kind)Up.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Bg(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.not_finite,message:r.message}),n.dirty()):Up.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,cg.toString(t))}gt(e,t){return this.setLimit("min",e,!1,cg.toString(t))}lte(e,t){return this.setLimit("max",e,!0,cg.toString(t))}lt(e,t){return this.setLimit("max",e,!1,cg.toString(t))}setLimit(e,t,n,r){return new Fg({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:cg.toString(r)}]})}_addCheck(e){return new Fg({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:cg.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:cg.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:cg.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:cg.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:cg.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:cg.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:cg.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:cg.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:cg.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Up.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Fg.create=e=>new Fg({checks:[],typeName:Nm.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...pg(e)});class zg extends gg{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(r){return this._getInvalidInput(e)}if(this._getType(e)!==Hp.bigint)return this._getInvalidInput(e);let t;const n=new Qp;for(const o of this._def.checks)if("min"===o.kind){(o.inclusive?e.data<o.value:e.data<=o.value)&&(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty())}else if("max"===o.kind){(o.inclusive?e.data>o.value:e.data>=o.value)&&(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty())}else"multipleOf"===o.kind?e.data%o.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Jp(t,{code:qp.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):Up.assertNever(o);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.bigint,received:t.parsedType}),eg}gte(e,t){return this.setLimit("min",e,!0,cg.toString(t))}gt(e,t){return this.setLimit("min",e,!1,cg.toString(t))}lte(e,t){return this.setLimit("max",e,!0,cg.toString(t))}lt(e,t){return this.setLimit("max",e,!1,cg.toString(t))}setLimit(e,t,n,r){return new zg({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:cg.toString(r)}]})}_addCheck(e){return new zg({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:cg.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:cg.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:cg.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:cg.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:cg.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}zg.create=e=>{var t;return new zg({checks:[],typeName:Nm.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...pg(e)})};class $g extends gg{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Hp.boolean){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.boolean,received:t.parsedType}),eg}return ng(e.data)}}$g.create=e=>new $g({typeName:Nm.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...pg(e)});class Ug extends gg{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Hp.date){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.date,received:t.parsedType}),eg}if(isNaN(e.data.getTime())){return Jp(this._getOrReturnCtx(e),{code:qp.invalid_date}),eg}const t=new Qp;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),Jp(n,{code:qp.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):Up.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ug({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:cg.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:cg.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ug.create=e=>new Ug({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Nm.ZodDate,...pg(e)});class Wg extends gg{_parse(e){if(this._getType(e)!==Hp.symbol){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.symbol,received:t.parsedType}),eg}return ng(e.data)}}Wg.create=e=>new Wg({typeName:Nm.ZodSymbol,...pg(e)});class Hg extends gg{_parse(e){if(this._getType(e)!==Hp.undefined){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.undefined,received:t.parsedType}),eg}return ng(e.data)}}Hg.create=e=>new Hg({typeName:Nm.ZodUndefined,...pg(e)});class Vg extends gg{_parse(e){if(this._getType(e)!==Hp.null){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.null,received:t.parsedType}),eg}return ng(e.data)}}Vg.create=e=>new Vg({typeName:Nm.ZodNull,...pg(e)});class qg extends gg{constructor(){super(...arguments),this._any=!0}_parse(e){return ng(e.data)}}qg.create=e=>new qg({typeName:Nm.ZodAny,...pg(e)});class Kg extends gg{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ng(e.data)}}Kg.create=e=>new Kg({typeName:Nm.ZodUnknown,...pg(e)});class Zg extends gg{_parse(e){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.never,received:t.parsedType}),eg}}Zg.create=e=>new Zg({typeName:Nm.ZodNever,...pg(e)});class Yg extends gg{_parse(e){if(this._getType(e)!==Hp.undefined){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.void,received:t.parsedType}),eg}return ng(e.data)}}Yg.create=e=>new Yg({typeName:Nm.ZodVoid,...pg(e)});class Gg extends gg{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==Hp.array)return Jp(t,{code:qp.invalid_type,expected:Hp.array,received:t.parsedType}),eg;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(e||o)&&(Jp(t,{code:e?qp.too_big:qp.too_small,minimum:o?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(Jp(t,{code:qp.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(Jp(t,{code:qp.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new fg(t,e,t.path,n))))).then((e=>Qp.mergeArray(n,e)));const o=[...t.data].map(((e,n)=>r.type._parseSync(new fg(t,e,t.path,n))));return Qp.mergeArray(n,o)}get element(){return this._def.type}min(e,t){return new Gg({...this._def,minLength:{value:e,message:cg.toString(t)}})}max(e,t){return new Gg({...this._def,maxLength:{value:e,message:cg.toString(t)}})}length(e,t){return new Gg({...this._def,exactLength:{value:e,message:cg.toString(t)}})}nonempty(e){return this.min(1,e)}}function Xg(e){if(e instanceof Jg){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=mm.create(Xg(r))}return new Jg({...e._def,shape:()=>t})}return e instanceof Gg?new Gg({...e._def,type:Xg(e.element)}):e instanceof mm?mm.create(Xg(e.unwrap())):e instanceof vm?vm.create(Xg(e.unwrap())):e instanceof om?om.create(e.items.map((e=>Xg(e)))):e}Gg.create=(e,t)=>new Gg({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Nm.ZodArray,...pg(t)});class Jg extends gg{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Up.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Hp.object){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.object,received:t.parsedType}),eg}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof Zg&&"strip"===this._def.unknownKeys))for(const s in n.data)o.includes(s)||i.push(s);const a=[];for(const s of o){const e=r[s],t=n.data[s];a.push({key:{status:"valid",value:s},value:e._parse(new fg(n,t,n.path,s)),alwaysSet:s in n.data})}if(this._def.catchall instanceof Zg){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of i)a.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)i.length>0&&(Jp(n,{code:qp.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new fg(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>Qp.mergeObjectSync(t,e))):Qp.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return cg.errToObj,new Jg({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,o,i,a;const s=null!==(i=null===(o=(r=this._def).errorMap)||void 0===o?void 0:o.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=cg.errToObj(e).message)&&void 0!==a?a:s}:{message:s}}}:{}})}strip(){return new Jg({...this._def,unknownKeys:"strip"})}passthrough(){return new Jg({...this._def,unknownKeys:"passthrough"})}extend(e){return new Jg({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Jg({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Nm.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Jg({...this._def,catchall:e})}pick(e){const t={};return Up.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Jg({...this._def,shape:()=>t})}omit(e){const t={};return Up.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Jg({...this._def,shape:()=>t})}deepPartial(){return Xg(this)}partial(e){const t={};return Up.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new Jg({...this._def,shape:()=>t})}required(e){const t={};return Up.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof mm;)e=e._def.innerType;t[n]=e}})),new Jg({...this._def,shape:()=>t})}keyof(){return dm(Up.objectKeys(this.shape))}}Jg.create=(e,t)=>new Jg({shape:()=>e,unknownKeys:"strip",catchall:Zg.create(),typeName:Nm.ZodObject,...pg(t)}),Jg.strictCreate=(e,t)=>new Jg({shape:()=>e,unknownKeys:"strict",catchall:Zg.create(),typeName:Nm.ZodObject,...pg(t)}),Jg.lazycreate=(e,t)=>new Jg({shape:e,unknownKeys:"strip",catchall:Zg.create(),typeName:Nm.ZodObject,...pg(t)});class Qg extends gg{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map((e=>new Kp(e.ctx.common.issues)));return Jp(t,{code:qp.invalid_union,unionErrors:n}),eg}));{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},o=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const o=r.map((e=>new Kp(e)));return Jp(t,{code:qp.invalid_union,unionErrors:o}),eg}}get options(){return this._def.options}}Qg.create=(e,t)=>new Qg({options:e,typeName:Nm.ZodUnion,...pg(t)});const em=e=>e instanceof cm?em(e.schema):e instanceof gm?em(e.innerType()):e instanceof um?[e.value]:e instanceof fm?e.options:e instanceof hm?Up.objectValues(e.enum):e instanceof ym?em(e._def.innerType):e instanceof Hg?[void 0]:e instanceof Vg?[null]:e instanceof mm?[void 0,...em(e.unwrap())]:e instanceof vm?[null,...em(e.unwrap())]:e instanceof _m||e instanceof Sm?em(e.unwrap()):e instanceof bm?em(e._def.innerType):[];class tm extends gg{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Hp.object)return Jp(t,{code:qp.invalid_type,expected:Hp.object,received:t.parsedType}),eg;const n=this.discriminator,r=t.data[n],o=this.optionsMap.get(r);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(Jp(t,{code:qp.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),eg)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const o of t){const t=em(o.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(r.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);r.set(n,o)}}return new tm({typeName:Nm.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...pg(n)})}}function nm(e,t){const n=Vp(e),r=Vp(t);if(e===t)return{valid:!0,data:e};if(n===Hp.object&&r===Hp.object){const n=Up.objectKeys(t),r=Up.objectKeys(e).filter((e=>-1!==n.indexOf(e))),o={...e,...t};for(const i of r){const n=nm(e[i],t[i]);if(!n.valid)return{valid:!1};o[i]=n.data}return{valid:!0,data:o}}if(n===Hp.array&&r===Hp.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const o=nm(e[r],t[r]);if(!o.valid)return{valid:!1};n.push(o.data)}return{valid:!0,data:n}}return n===Hp.date&&r===Hp.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class rm extends gg{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(rg(e)||rg(r))return eg;const o=nm(e.value,r.value);return o.valid?((og(e)||og(r))&&t.dirty(),{status:t.value,value:o.data}):(Jp(n,{code:qp.invalid_intersection_types}),eg)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}rm.create=(e,t,n)=>new rm({left:e,right:t,typeName:Nm.ZodIntersection,...pg(n)});class om extends gg{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Hp.array)return Jp(n,{code:qp.invalid_type,expected:Hp.array,received:n.parsedType}),eg;if(n.data.length<this._def.items.length)return Jp(n,{code:qp.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),eg;!this._def.rest&&n.data.length>this._def.items.length&&(Jp(n,{code:qp.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new fg(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>Qp.mergeArray(t,e))):Qp.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new om({...this._def,rest:e})}}om.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new om({items:e,typeName:Nm.ZodTuple,rest:null,...pg(t)})};class im extends gg{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Hp.object)return Jp(n,{code:qp.invalid_type,expected:Hp.object,received:n.parsedType}),eg;const r=[],o=this._def.keyType,i=this._def.valueType;for(const a in n.data)r.push({key:o._parse(new fg(n,a,n.path,a)),value:i._parse(new fg(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Qp.mergeObjectAsync(t,r):Qp.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new im(t instanceof gg?{keyType:e,valueType:t,typeName:Nm.ZodRecord,...pg(n)}:{keyType:Lg.create(),valueType:e,typeName:Nm.ZodRecord,...pg(t)})}}class am extends gg{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Hp.map)return Jp(n,{code:qp.invalid_type,expected:Hp.map,received:n.parsedType}),eg;const r=this._def.keyType,o=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:r._parse(new fg(n,e,n.path,[i,"key"])),value:o._parse(new fg(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,o=await n.value;if("aborted"===r.status||"aborted"===o.status)return eg;"dirty"!==r.status&&"dirty"!==o.status||t.dirty(),e.set(r.value,o.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const r=n.key,o=n.value;if("aborted"===r.status||"aborted"===o.status)return eg;"dirty"!==r.status&&"dirty"!==o.status||t.dirty(),e.set(r.value,o.value)}return{status:t.value,value:e}}}}am.create=(e,t,n)=>new am({valueType:t,keyType:e,typeName:Nm.ZodMap,...pg(n)});class sm extends gg{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Hp.set)return Jp(n,{code:qp.invalid_type,expected:Hp.set,received:n.parsedType}),eg;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(Jp(n,{code:qp.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(Jp(n,{code:qp.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const o=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return eg;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>o._parse(new fg(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new sm({...this._def,minSize:{value:e,message:cg.toString(t)}})}max(e,t){return new sm({...this._def,maxSize:{value:e,message:cg.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}sm.create=(e,t)=>new sm({valueType:e,minSize:null,maxSize:null,typeName:Nm.ZodSet,...pg(t)});class lm extends gg{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Hp.function)return Jp(t,{code:qp.invalid_type,expected:Hp.function,received:t.parsedType}),eg;function n(e,n){return Xp({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Gp(),Zp].filter((e=>!!e)),issueData:{code:qp.invalid_arguments,argumentsError:n}})}function r(e,n){return Xp({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Gp(),Zp].filter((e=>!!e)),issueData:{code:qp.invalid_return_type,returnTypeError:n}})}const o={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof pm){const e=this;return ng((async function(...t){const a=new Kp([]),s=await e._def.args.parseAsync(t,o).catch((e=>{throw a.addIssue(n(t,e)),a})),l=await Reflect.apply(i,this,s),c=await e._def.returns._def.type.parseAsync(l,o).catch((e=>{throw a.addIssue(r(l,e)),a}));return c}))}{const e=this;return ng((function(...t){const a=e._def.args.safeParse(t,o);if(!a.success)throw new Kp([n(t,a.error)]);const s=Reflect.apply(i,this,a.data),l=e._def.returns.safeParse(s,o);if(!l.success)throw new Kp([r(s,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new lm({...this._def,args:om.create(e).rest(Kg.create())})}returns(e){return new lm({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new lm({args:e||om.create([]).rest(Kg.create()),returns:t||Kg.create(),typeName:Nm.ZodFunction,...pg(n)})}}class cm extends gg{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}cm.create=(e,t)=>new cm({getter:e,typeName:Nm.ZodLazy,...pg(t)});class um extends gg{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Jp(t,{received:t.data,code:qp.invalid_literal,expected:this._def.value}),eg}return{status:"valid",value:e.data}}get value(){return this._def.value}}function dm(e,t){return new fm({values:e,typeName:Nm.ZodEnum,...pg(t)})}um.create=(e,t)=>new um({value:e,typeName:Nm.ZodLiteral,...pg(t)});class fm extends gg{constructor(){super(...arguments),ug.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return Jp(t,{expected:Up.joinValues(n),received:t.parsedType,code:qp.invalid_type}),eg}if(sg(this,ug)||lg(this,ug,new Set(this._def.values)),!sg(this,ug).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Jp(t,{received:t.data,code:qp.invalid_enum_value,options:n}),eg}return ng(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return fm.create(e,{...this._def,...t})}exclude(e,t=this._def){return fm.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}ug=new WeakMap,fm.create=dm;class hm extends gg{constructor(){super(...arguments),dg.set(this,void 0)}_parse(e){const t=Up.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Hp.string&&n.parsedType!==Hp.number){const e=Up.objectValues(t);return Jp(n,{expected:Up.joinValues(e),received:n.parsedType,code:qp.invalid_type}),eg}if(sg(this,dg)||lg(this,dg,new Set(Up.getValidEnumValues(this._def.values))),!sg(this,dg).has(e.data)){const e=Up.objectValues(t);return Jp(n,{received:n.data,code:qp.invalid_enum_value,options:e}),eg}return ng(e.data)}get enum(){return this._def.values}}dg=new WeakMap,hm.create=(e,t)=>new hm({values:e,typeName:Nm.ZodNativeEnum,...pg(t)});class pm extends gg{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Hp.promise&&!1===t.common.async)return Jp(t,{code:qp.invalid_type,expected:Hp.promise,received:t.parsedType}),eg;const n=t.parsedType===Hp.promise?t.data:Promise.resolve(t.data);return ng(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}pm.create=(e,t)=>new pm({type:e,typeName:Nm.ZodPromise,...pg(t)});class gm extends gg{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Nm.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,o={addIssue:e=>{Jp(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===r.type){const e=r.transform(n.data,o);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return eg;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?eg:"dirty"===r.status||"dirty"===t.value?tg(r.value):r}));{if("aborted"===t.value)return eg;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?eg:"dirty"===r.status||"dirty"===t.value?tg(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,o);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?eg:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?eg:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ig(e))return e;const i=r.transform(e.value,o);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>ig(e)?Promise.resolve(r.transform(e.value,o)).then((e=>({status:t.value,value:e}))):e))}Up.assertNever(r)}}gm.create=(e,t,n)=>new gm({schema:e,typeName:Nm.ZodEffects,effect:t,...pg(n)}),gm.createWithPreprocess=(e,t,n)=>new gm({schema:t,effect:{type:"preprocess",transform:e},typeName:Nm.ZodEffects,...pg(n)});class mm extends gg{_parse(e){return this._getType(e)===Hp.undefined?ng(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mm.create=(e,t)=>new mm({innerType:e,typeName:Nm.ZodOptional,...pg(t)});class vm extends gg{_parse(e){return this._getType(e)===Hp.null?ng(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vm.create=(e,t)=>new vm({innerType:e,typeName:Nm.ZodNullable,...pg(t)});class ym extends gg{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Hp.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ym.create=(e,t)=>new ym({innerType:e,typeName:Nm.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...pg(t)});class bm extends gg{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ag(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Kp(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new Kp(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}bm.create=(e,t)=>new bm({innerType:e,typeName:Nm.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...pg(t)});class wm extends gg{_parse(e){if(this._getType(e)!==Hp.nan){const t=this._getOrReturnCtx(e);return Jp(t,{code:qp.invalid_type,expected:Hp.nan,received:t.parsedType}),eg}return{status:"valid",value:e.data}}}wm.create=e=>new wm({typeName:Nm.ZodNaN,...pg(e)});const xm=Symbol("zod_brand");class _m extends gg{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class km extends gg{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?eg:"dirty"===e.status?(t.dirty(),tg(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?eg:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new km({in:e,out:t,typeName:Nm.ZodPipeline})}}class Sm extends gg{_parse(e){const t=this._def.innerType._parse(e),n=e=>(ig(e)&&(e.value=Object.freeze(e.value)),e);return ag(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function Em(e,t){const n="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof n?{message:n}:n}function jm(e,t={},n){return e?qg.create().superRefine(((r,o)=>{var i,a;const s=e(r);if(s instanceof Promise)return s.then((e=>{var i,a;if(!e){const e=Em(t,r),s=null===(a=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===a||a;o.addIssue({code:"custom",...e,fatal:s})}}));if(!s){const e=Em(t,r),s=null===(a=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===a||a;o.addIssue({code:"custom",...e,fatal:s})}})):qg.create()}Sm.create=(e,t)=>new Sm({innerType:e,typeName:Nm.ZodReadonly,...pg(t)});const Cm={object:Jg.lazycreate};var Nm;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Nm||(Nm={}));const Am=Lg.create,Om=Fg.create,Rm=wm.create,Pm=zg.create,Tm=$g.create,Im=Ug.create,Mm=Wg.create,Dm=Hg.create,Lm=Vg.create,Bm=qg.create,Fm=Kg.create,zm=Zg.create,$m=Yg.create,Um=Gg.create,Wm=Jg.create,Hm=Jg.strictCreate,Vm=Qg.create,qm=tm.create,Km=rm.create,Zm=om.create,Ym=im.create,Gm=am.create,Xm=sm.create,Jm=lm.create,Qm=cm.create,ev=um.create,tv=fm.create,nv=hm.create,rv=pm.create,ov=gm.create,iv=mm.create,av=vm.create,sv=gm.createWithPreprocess,lv=km.create,cv={string:e=>Lg.create({...e,coerce:!0}),number:e=>Fg.create({...e,coerce:!0}),boolean:e=>$g.create({...e,coerce:!0}),bigint:e=>zg.create({...e,coerce:!0}),date:e=>Ug.create({...e,coerce:!0})},uv=eg;var dv=Object.freeze({__proto__:null,defaultErrorMap:Zp,setErrorMap:function(e){Yp=e},getErrorMap:Gp,makeIssue:Xp,EMPTY_PATH:[],addIssueToContext:Jp,ParseStatus:Qp,INVALID:eg,DIRTY:tg,OK:ng,isAborted:rg,isDirty:og,isValid:ig,isAsync:ag,get util(){return Up},get objectUtil(){return Wp},ZodParsedType:Hp,getParsedType:Vp,ZodType:gg,datetimeRegex:Ig,ZodString:Lg,ZodNumber:Fg,ZodBigInt:zg,ZodBoolean:$g,ZodDate:Ug,ZodSymbol:Wg,ZodUndefined:Hg,ZodNull:Vg,ZodAny:qg,ZodUnknown:Kg,ZodNever:Zg,ZodVoid:Yg,ZodArray:Gg,ZodObject:Jg,ZodUnion:Qg,ZodDiscriminatedUnion:tm,ZodIntersection:rm,ZodTuple:om,ZodRecord:im,ZodMap:am,ZodSet:sm,ZodFunction:lm,ZodLazy:cm,ZodLiteral:um,ZodEnum:fm,ZodNativeEnum:hm,ZodPromise:pm,ZodEffects:gm,ZodTransformer:gm,ZodOptional:mm,ZodNullable:vm,ZodDefault:ym,ZodCatch:bm,ZodNaN:wm,BRAND:xm,ZodBranded:_m,ZodPipeline:km,ZodReadonly:Sm,custom:jm,Schema:gg,ZodSchema:gg,late:Cm,get ZodFirstPartyTypeKind(){return Nm},coerce:cv,any:Bm,array:Um,bigint:Pm,boolean:Tm,date:Im,discriminatedUnion:qm,effect:ov,enum:tv,function:Jm,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>jm((t=>t instanceof e),t),intersection:Km,lazy:Qm,literal:ev,map:Gm,nan:Rm,nativeEnum:nv,never:zm,null:Lm,nullable:av,number:Om,object:Wm,oboolean:()=>Tm().optional(),onumber:()=>Om().optional(),optional:iv,ostring:()=>Am().optional(),pipeline:lv,preprocess:sv,promise:rv,record:Ym,set:Xm,strictObject:Hm,string:Am,symbol:Mm,transformer:ov,tuple:Zm,undefined:Dm,union:Vm,unknown:Fm,void:$m,NEVER:uv,ZodIssueCode:qp,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Kp});const fv=dv.object({id:dv.string({invalid_type_error:"id must be a string"}).max(100,"id cannot be longer than 100 characters").optional(),local_id:dv.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:dv.string(),name:dv.string(),forked_from:dv.string().nullable().optional(),version:dv.string().optional(),created_at:dv.string().datetime({offset:!0}),updated_at:dv.string().datetime({offset:!0})}),hv=new Rp("bardsballad");async function pv(e,t){const[n,r,o,i]=await Promise.all([hv.characters.toArray(),hv.systems.toArray(),hv.subscriptions.toArray(),hv.versions.toArray()]),a=new Map;let s=[];n.forEach((n=>{const[r,...o]=n.local_id.split("-");if("none"!==n.user_id||"none"!==r)return;const i=`${t}-${o.join("-")}`;a.set(n.local_id,i),s.push({...n,user_id:e,local_id:i})}));let l=[];r.forEach((n=>{const[r,...i]=n.local_id.split("-"),s="none"===n.user_id,c=o.find((e=>e.resource_id===n.local_id));if(!s&&!c)return;const u=`${t}-${i.join("-")}`;a.set(n.local_id,u),l.push({...n,user_id:e,local_id:u})}));let c=[];i.forEach((n=>{const[r,...i]=n.local_id.split("-"),s="none"===n.user_id,l=o.find((e=>e.version_id===n.local_id));if(!s&&!l)return;const u=`${t}-${i.join("-")}`;a.set(n.local_id,u),c.push({...n,user_id:e,local_id:u})}));let u=[];o.forEach((n=>{const[r,...o]=n.local_id.split("-");if(!("none"===n.user_id))return;const i=`${t}-${o.join("-")}`;a.set(n.local_id,i),u.push({...n,user_id:e,local_id:i})})),s=s.map((e=>({...e,system:{local_id:a.get(e.system.local_id),version_id:a.get(e.system.version_id)}}))),u=u.map((e=>({...e,resource_id:a.get(e.resource_id),version_id:a.get(e.version_id)}))),c=c.map((e=>({...e,reference_id:a.get(e.reference_id)}))),await Promise.all([hv.subscriptions.clear(),hv.versions.clear(),hv.systems.clear(),hv.characters.clear()]),hv.characters.bulkPut(s),hv.systems.bulkPut(l),hv.versions.bulkPut(c),hv.subscriptions.bulkPut(u)}function gv(e,t){return function(){return e.apply(t,arguments)}}hv.version(1).stores({characters:"local_id, updatedAt, id",systems:"local_id, id",datapacks:"local_id, id",subscriptions:"local_id, user_id, resource_id, version_id",versions:"local_id, reference_id, id",typeHashes:"local_id"});const{toString:mv}=Object.prototype,{getPrototypeOf:vv}=Object,{iterator:yv,toStringTag:bv}=Symbol,wv=(xv=Object.create(null),e=>{const t=mv.call(e);return xv[t]||(xv[t]=t.slice(8,-1).toLowerCase())});var xv;const _v=e=>(e=e.toLowerCase(),t=>wv(t)===e),kv=e=>t=>typeof t===e,{isArray:Sv}=Array,Ev=kv("undefined");const jv=_v("ArrayBuffer");const Cv=kv("string"),Nv=kv("function"),Av=kv("number"),Ov=e=>null!==e&&"object"==typeof e,Rv=e=>{if("object"!==wv(e))return!1;const t=vv(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||bv in e||yv in e)},Pv=_v("Date"),Tv=_v("File"),Iv=_v("Blob"),Mv=_v("FileList"),Dv=_v("URLSearchParams"),[Lv,Bv,Fv,zv]=["ReadableStream","Request","Response","Headers"].map(_v);function $v(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),Sv(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(r=0;r<i;r++)a=o[r],t.call(null,e[a],a,e)}}function Uv(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const Wv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Hv=e=>!Ev(e)&&e!==Wv;const Vv=(qv="undefined"!=typeof Uint8Array&&vv(Uint8Array),e=>qv&&e instanceof qv);var qv;const Kv=_v("HTMLFormElement"),Zv=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Yv=_v("RegExp"),Gv=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};$v(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)};const Xv=_v("AsyncFunction"),Jv=(Qv="function"==typeof setImmediate,ey=Nv(Wv.postMessage),Qv?setImmediate:ey?(ty=`axios@${Math.random()}`,ny=[],Wv.addEventListener("message",(({source:e,data:t})=>{e===Wv&&t===ty&&ny.length&&ny.shift()()}),!1),e=>{ny.push(e),Wv.postMessage(ty,"*")}):e=>setTimeout(e));var Qv,ey,ty,ny;const ry="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Wv):"undefined"!=typeof process&&process.nextTick||Jv,oy={isArray:Sv,isArrayBuffer:jv,isBuffer:function(e){return null!==e&&!Ev(e)&&null!==e.constructor&&!Ev(e.constructor)&&Nv(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Nv(e.append)&&("formdata"===(t=wv(e))||"object"===t&&Nv(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&jv(e.buffer),t},isString:Cv,isNumber:Av,isBoolean:e=>!0===e||!1===e,isObject:Ov,isPlainObject:Rv,isReadableStream:Lv,isRequest:Bv,isResponse:Fv,isHeaders:zv,isUndefined:Ev,isDate:Pv,isFile:Tv,isBlob:Iv,isRegExp:Yv,isFunction:Nv,isStream:e=>Ov(e)&&Nv(e.pipe),isURLSearchParams:Dv,isTypedArray:Vv,isFileList:Mv,forEach:$v,merge:function e(){const{caseless:t}=Hv(this)&&this||{},n={},r=(r,o)=>{const i=t&&Uv(n,o)||o;Rv(n[i])&&Rv(r)?n[i]=e(n[i],r):Rv(r)?n[i]=e({},r):Sv(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&$v(arguments[o],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>($v(t,((t,r)=>{n&&Nv(t)?e[r]=gv(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&vv(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:wv,kindOfTest:_v,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Sv(e))return e;let t=e.length;if(!Av(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[yv]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Kv,hasOwnProperty:Zv,hasOwnProp:Zv,reduceDescriptors:Gv,freezeMethods:e=>{Gv(e,((t,n)=>{if(Nv(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Nv(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Sv(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Uv,global:Wv,isContextDefined:Hv,isSpecCompliantForm:function(e){return!!(e&&Nv(e.append)&&"FormData"===e[bv]&&e[yv])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ov(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=Sv(e)?[]:{};return $v(e,((e,t)=>{const i=n(e,r+1);!Ev(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:Xv,isThenable:e=>e&&(Ov(e)||Nv(e))&&Nv(e.then)&&Nv(e.catch),setImmediate:Jv,asap:ry,isIterable:e=>null!=e&&Nv(e[yv])};function iy(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}oy.inherits(iy,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oy.toJSONObject(this.config),code:this.code,status:this.status}}});const ay=iy.prototype,sy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{sy[e]={value:e}})),Object.defineProperties(iy,sy),Object.defineProperty(ay,"isAxiosError",{value:!0}),iy.from=(e,t,n,r,o,i)=>{const a=Object.create(ay);return oy.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),iy.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};function ly(e){return oy.isPlainObject(e)||oy.isArray(e)}function cy(e){return oy.endsWith(e,"[]")?e.slice(0,-2):e}function uy(e,t,n){return e?e.concat(t).map((function(e,t){return e=cy(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const dy=oy.toFlatObject(oy,{},null,(function(e){return/^is[A-Z]/.test(e)}));function fy(e,t,n){if(!oy.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=oy.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!oy.isUndefined(t[e])}))).metaTokens,o=n.visitor||c,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&oy.isSpecCompliantForm(t);if(!oy.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(oy.isDate(e))return e.toISOString();if(!s&&oy.isBlob(e))throw new iy("Blob is not supported. Use a Buffer instead.");return oy.isArrayBuffer(e)||oy.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,o){let s=e;if(e&&!o&&"object"==typeof e)if(oy.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(oy.isArray(e)&&function(e){return oy.isArray(e)&&!e.some(ly)}(e)||(oy.isFileList(e)||oy.endsWith(n,"[]"))&&(s=oy.toArray(e)))return n=cy(n),s.forEach((function(e,r){!oy.isUndefined(e)&&null!==e&&t.append(!0===a?uy([n],r,i):null===a?n:n+"[]",l(e))})),!1;return!!ly(e)||(t.append(uy(o,n,i),l(e)),!1)}const u=[],d=Object.assign(dy,{defaultVisitor:c,convertValue:l,isVisitable:ly});if(!oy.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!oy.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),oy.forEach(n,(function(n,i){!0===(!(oy.isUndefined(n)||null===n)&&o.call(t,n,oy.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function hy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function py(e,t){this._pairs=[],e&&fy(e,this,t)}const gy=py.prototype;function my(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vy(e,t,n){if(!t)return e;const r=n&&n.encode||my;oy.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):oy.isURLSearchParams(t)?t.toString():new py(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}gy.append=function(e,t){this._pairs.push([e,t])},gy.toString=function(e){const t=e?function(t){return e.call(this,t,hy)}:hy;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class yy{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oy.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const by={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wy={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:py,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},xy="undefined"!=typeof window&&"undefined"!=typeof document,_y="object"==typeof navigator&&navigator||void 0,ky=xy&&(!_y||["ReactNative","NativeScript","NS"].indexOf(_y.product)<0),Sy="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ey=xy&&window.location.href||"http://localhost",jy={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xy,hasStandardBrowserEnv:ky,hasStandardBrowserWebWorkerEnv:Sy,navigator:_y,origin:Ey},Symbol.toStringTag,{value:"Module"})),...wy};function Cy(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&oy.isArray(r)?r.length:i,s)return oy.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&oy.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&oy.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(oy.isFormData(e)&&oy.isFunction(e.entries)){const n={};return oy.forEachEntry(e,((e,r)=>{t(function(e){return oy.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Ny={transitional:by,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=oy.isObject(e);o&&oy.isHTMLForm(e)&&(e=new FormData(e));if(oy.isFormData(e))return r?JSON.stringify(Cy(e)):e;if(oy.isArrayBuffer(e)||oy.isBuffer(e)||oy.isStream(e)||oy.isFile(e)||oy.isBlob(e)||oy.isReadableStream(e))return e;if(oy.isArrayBufferView(e))return e.buffer;if(oy.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return fy(e,new jy.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return jy.isNode&&oy.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=oy.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return fy(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(oy.isString(e))try{return(t||JSON.parse)(e),oy.trim(e)}catch(J$){if("SyntaxError"!==J$.name)throw J$}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ny.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(oy.isResponse(e)||oy.isReadableStream(e))return e;if(e&&oy.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(J$){if(n){if("SyntaxError"===J$.name)throw iy.from(J$,iy.ERR_BAD_RESPONSE,this,null,this.response);throw J$}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jy.classes.FormData,Blob:jy.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oy.forEach(["delete","get","head","post","put","patch"],(e=>{Ny.headers[e]={}}));const Ay=oy.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Oy=Symbol("internals");function Ry(e){return e&&String(e).trim().toLowerCase()}function Py(e){return!1===e||null==e?e:oy.isArray(e)?e.map(Py):String(e)}function Ty(e,t,n,r,o){return oy.isFunction(r)?r.call(this,t,n):(o&&(t=n),oy.isString(t)?oy.isString(r)?-1!==t.indexOf(r):oy.isRegExp(r)?r.test(t):void 0:void 0)}let Iy=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Ry(t);if(!o)throw new Error("header name must be a non-empty string");const i=oy.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Py(e))}const i=(e,t)=>oy.forEach(e,((e,n)=>o(e,n,t)));if(oy.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(oy.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Ay[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(oy.isObject(e)&&oy.isIterable(e)){let n,r,o={};for(const t of e){if(!oy.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[r=t[0]]=(n=o[r])?oy.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(o,t)}else null!=e&&o(t,e,n);return this}get(e,t){if(e=Ry(e)){const n=oy.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(oy.isFunction(t))return t.call(this,e,n);if(oy.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ry(e)){const n=oy.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ty(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Ry(e)){const o=oy.findKey(n,e);!o||t&&!Ty(0,n[o],o,t)||(delete n[o],r=!0)}}return oy.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!Ty(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return oy.forEach(this,((r,o)=>{const i=oy.findKey(n,o);if(i)return t[i]=Py(r),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Py(r),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return oy.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&oy.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Oy]=this[Oy]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ry(e);t[r]||(!function(e,t){const n=oy.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return oy.isArray(e)?e.forEach(r):r(e),this}};function My(e,t){const n=this||Ny,r=t||n,o=Iy.from(r.headers);let i=r.data;return oy.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function Dy(e){return!(!e||!e.__CANCEL__)}function Ly(e,t,n){iy.call(this,null==e?"canceled":e,iy.ERR_CANCELED,t,n),this.name="CanceledError"}function By(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new iy("Request failed with status code "+n.status,[iy.ERR_BAD_REQUEST,iy.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Iy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),oy.reduceDescriptors(Iy.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),oy.freezeMethods(Iy),oy.inherits(Ly,iy,{__CANCEL__:!0});const Fy=(e,t,n=3)=>{let r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[a];o||(o=l),n[i]=s,r[i]=l;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-o<t)return;const f=c&&l-c;return f?Math.round(1e3*d/f):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const a=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-o;s>=i?a(e,t):(n=e,r||(r=setTimeout((()=>{r=null,a(n)}),i-s)))},()=>n&&a(n)]}((n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,s=i-r,l=o(s);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},zy=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},$y=e=>(...t)=>oy.asap((()=>e(...t))),Uy=jy.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,jy.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(jy.origin),jy.navigator&&/(msie|trident)/i.test(jy.navigator.userAgent)):()=>!0,Wy=jy.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];oy.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),oy.isString(r)&&a.push("path="+r),oy.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Hy(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Vy=e=>e instanceof Iy?{...e}:e;function qy(e,t){t=t||{};const n={};function r(e,t,n,r){return oy.isPlainObject(e)&&oy.isPlainObject(t)?oy.merge.call({caseless:r},e,t):oy.isPlainObject(t)?oy.merge({},t):oy.isArray(t)?t.slice():t}function o(e,t,n,o){return oy.isUndefined(t)?oy.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!oy.isUndefined(t))return r(void 0,t)}function a(e,t){return oy.isUndefined(t)?oy.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,n)=>o(Vy(e),Vy(t),0,!0)};return oy.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=l[r]||o,a=i(e[r],t[r],r);oy.isUndefined(a)&&i!==s||(n[r]=a)})),n}const Ky=e=>{const t=qy({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=Iy.from(s),t.url=vy(Hy(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),oy.isFormData(r))if(jy.hasStandardBrowserEnv||jy.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(jy.hasStandardBrowserEnv&&(o&&oy.isFunction(o)&&(o=o(t)),o||!1!==o&&Uy(t.url))){const e=i&&a&&Wy.read(a);e&&s.set(i,e)}return t},Zy="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Ky(e);let o=r.data;const i=Iy.from(r.headers).normalize();let a,s,l,c,u,{responseType:d,onUploadProgress:f,onDownloadProgress:h}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const r=Iy.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());By((function(e){t(e),p()}),(function(e){n(e),p()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new iy("Request aborted",iy.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new iy("Network Error",iy.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||by;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new iy(t,o.clarifyTimeoutError?iy.ETIMEDOUT:iy.ECONNABORTED,e,g)),g=null},void 0===o&&i.setContentType(null),"setRequestHeader"in g&&oy.forEach(i.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),oy.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),d&&"json"!==d&&(g.responseType=r.responseType),h&&([l,u]=Fy(h,!0),g.addEventListener("progress",l)),f&&g.upload&&([s,c]=Fy(f),g.upload.addEventListener("progress",s),g.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{g&&(n(!t||t.type?new Ly(null,e,g):t),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===jy.protocols.indexOf(v)?n(new iy("Unsupported protocol "+v+":",iy.ERR_BAD_REQUEST,e)):g.send(o||null)}))},Yy=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof iy?t:new Ly(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new iy(`timeout ${t} of ms exceeded`,iy.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=r;return s.unsubscribe=()=>oy.asap(a),s}},Gy=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},Xy=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Jy=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of Xy(e))yield*Gy(n,t)}(e,t);let i,a=0,s=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},Qy="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,eb=Qy&&"function"==typeof ReadableStream,tb=Qy&&("function"==typeof TextEncoder?(nb=new TextEncoder,e=>nb.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var nb;const rb=(e,...t)=>{try{return!!e(...t)}catch(J$){return!1}},ob=eb&&rb((()=>{let e=!1;const t=new Request(jy.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ib=eb&&rb((()=>oy.isReadableStream(new Response("").body))),ab={stream:ib&&(e=>e.body)};var sb;Qy&&(sb=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ab[e]&&(ab[e]=oy.isFunction(sb[e])?t=>t[e]():(t,n)=>{throw new iy(`Response type '${e}' is not supported`,iy.ERR_NOT_SUPPORT,n)})})));const lb=async(e,t)=>{const n=oy.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(oy.isBlob(e))return e.size;if(oy.isSpecCompliantForm(e)){const t=new Request(jy.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return oy.isArrayBufferView(e)||oy.isArrayBuffer(e)?e.byteLength:(oy.isURLSearchParams(e)&&(e+=""),oy.isString(e)?(await tb(e)).byteLength:void 0)})(t):n},cb=Qy&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:f}=Ky(e);c=c?(c+"").toLowerCase():"text";let h,p=Yy([o,i&&i.toAbortSignal()],a);const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(l&&ob&&"get"!==n&&"head"!==n&&0!==(m=await lb(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(oy.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=zy(m,Fy($y(l)));r=Jy(n.body,65536,e,t)}}oy.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;h=new Request(t,{...f,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(h);const a=ib&&("stream"===c||"response"===c);if(ib&&(s||a&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=oy.toFiniteNumber(i.headers.get("content-length")),[n,r]=s&&zy(t,Fy($y(s),!0))||[];i=new Response(Jy(i.body,65536,n,(()=>{r&&r(),g&&g()})),e)}c=c||"text";let v=await ab[oy.findKey(ab,c)||"text"](i,e);return!a&&g&&g(),await new Promise(((t,n)=>{By(t,n,{data:v,headers:Iy.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:h})}))}catch(v){if(g&&g(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new iy("Network Error",iy.ERR_NETWORK,e,h),{cause:v.cause||v});throw iy.from(v,v&&v.code,e,h)}}),ub={http:null,xhr:Zy,fetch:cb};oy.forEach(ub,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(J$){}Object.defineProperty(e,"adapterName",{value:t})}}));const db=e=>`- ${e}`,fb=e=>oy.isFunction(e)||null===e||!1===e,hb=e=>{e=oy.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!fb(n)&&(r=ub[(t=String(n)).toLowerCase()],void 0===r))throw new iy(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new iy("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(db).join("\n"):" "+db(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function pb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ly(null,e)}function gb(e){pb(e),e.headers=Iy.from(e.headers),e.data=My.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return hb(e.adapter||Ny.adapter)(e).then((function(t){return pb(e),t.data=My.call(e,e.transformResponse,t),t.headers=Iy.from(t.headers),t}),(function(t){return Dy(t)||(pb(e),t&&t.response&&(t.response.data=My.call(e,e.transformResponse,t.response),t.response.headers=Iy.from(t.response.headers))),Promise.reject(t)}))}const mb="1.9.0",vb={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{vb[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const yb={};vb.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new iy(r(o," has been removed"+(t?" in "+t:"")),iy.ERR_DEPRECATED);return t&&!yb[o]&&(yb[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},vb.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const bb={assertOptions:function(e,t,n){if("object"!=typeof e)throw new iy("options must be an object",iy.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new iy("option "+i+" must be "+n,iy.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new iy("Unknown option "+i,iy.ERR_BAD_OPTION)}},validators:vb},wb=bb.validators;let xb=class{constructor(e){this.defaults=e||{},this.interceptors={request:new yy,response:new yy}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(J$){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=qy(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&bb.assertOptions(n,{silentJSONParsing:wb.transitional(wb.boolean),forcedJSONParsing:wb.transitional(wb.boolean),clarifyTimeoutError:wb.transitional(wb.boolean)},!1),null!=r&&(oy.isFunction(r)?t.paramsSerializer={serialize:r}:bb.assertOptions(r,{encode:wb.function,serialize:wb.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bb.assertOptions(t,{baseUrl:wb.spelling("baseURL"),withXsrfToken:wb.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&oy.merge(o.common,o[t.method]);o&&oy.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=Iy.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[gb.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let f=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{f=e(f)}catch(h){t.call(this,h);break}}try{c=gb.call(this,f)}catch(h){return Promise.reject(h)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return vy(Hy((e=qy(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};oy.forEach(["delete","get","head","options"],(function(e){xb.prototype[e]=function(t,n){return this.request(qy(n||{},{method:e,url:t,data:(n||{}).data}))}})),oy.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(qy(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}xb.prototype[e]=t(),xb.prototype[e+"Form"]=t(!0)}));const _b={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_b).forEach((([e,t])=>{_b[t]=e}));const kb=function e(t){const n=new xb(t),r=gv(xb.prototype.request,n);return oy.extend(r,xb.prototype,n,{allOwnKeys:!0}),oy.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(qy(t,n))},r}(Ny);kb.Axios=xb,kb.CanceledError=Ly,kb.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new Ly(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;const n=new e((function(e){t=e}));return{token:n,cancel:t}}},kb.isCancel=Dy,kb.VERSION=mb,kb.toFormData=fy,kb.AxiosError=iy,kb.Cancel=kb.CanceledError,kb.all=function(e){return Promise.all(e)},kb.spread=function(e){return function(t){return e.apply(null,t)}},kb.isAxiosError=function(e){return oy.isObject(e)&&!0===e.isAxiosError},kb.mergeConfig=qy,kb.AxiosHeaders=Iy,kb.formToJSON=e=>Cy(oy.isHTMLForm(e)?new FormData(e):e),kb.getAdapter=hb,kb.HttpStatusCode=_b,kb.default=kb;const{Axios:Sb,AxiosError:Eb,CanceledError:jb,isCancel:Cb,CancelToken:Nb,VERSION:Ab,all:Ob,Cancel:Rb,isAxiosError:Pb,spread:Tb,toFormData:Ib,AxiosHeaders:Mb,HttpStatusCode:Db,formToJSON:Lb,getAdapter:Bb,mergeConfig:Fb}=kb;const zb={MIN:10<<24,MAX:184549375},$b={MIN:-1408237568,MAX:-1407188993},Ub={MIN:-1062731776,MAX:-1062666241};const Wb=kb.create({baseURL:function(){const e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e)return!0;if(!/^(\d{1,3}\.){3}\d{1,3}$/.test(e))return!1;try{const t=function(e){if(!e||!/^(\d{1,3}\.){3}\d{1,3}$/.test(e))throw new Error("Invalid IPv4 address format");const t=e.split(".").map(Number);if(t.some((e=>e<0||e>255)))throw new Error("IP octets must be between 0 and 255");return t[0]<<24|t[1]<<16|t[2]<<8|t[3]}(e);return t>=zb.MIN&&t<=zb.MAX||t>=$b.MIN&&t<=$b.MAX||t>=Ub.MIN&&t<=Ub.MAX}catch(t){return!1}}()?`http://${window.location.hostname}:3000/v1`:"https://api.bardsballad.com/v1"});Wb.interceptors.request.use((async e=>{const t=await Ah.get("token"),n=await Ah.get("apiKey");return t&&(e.headers.Authorization=`Bearer ${t}`,e.headers["x-api-key"]=n||""),e})),Wb.interceptors.response.use((e=>{const t=e.headers.authorization,n=e.headers["x-api-key"];if(t){const e=t.replace("Bearer ","");Th(e)}if(n&&Ah.set("apiKey",n),e.data&&"object"==typeof e.data&&"data"in e.data){const{error:t,data:n}=e.data;t&&""!==t.trim()&&(op(t,"error"),console.warn("API Error:",t)),e.data=n}return e}),(e=>{if(e.response&&e.response.data){const{error:t,data:n}=e.response.data;t&&""!==t.trim()&&op(t,"error")}return Promise.reject(e)}));const Hb=({id:e})=>{const[t,n]=q.useState(!1),[r,o]=q.useState(""),[i,a]=q.useState(""),[s,l]=q.useState(""),[c,u]=q.useState(""),[d,f]=q.useState(!1),[h,p]=q.useState(),[g,m]=q.useState(""),v=q.useMemo((()=>t?"Sign Up":"Login"),[t]),y=q.useCallback((()=>hh(e)),[e]),b=async()=>await(async(e,t,n)=>{const r=await Wb.post("/auth/register",{username:e,email:t,password:n,deviceName:await Cp()});if(400===r.status)return{success:!1,error:r.data};if(403===r.status)return{success:!1,error:"Invalid username/email or password"};const{accessToken:o,apiKey:i,deviceId:a}=r.data;if(!(o&&i&&a))return op("please report this code: #RRFV","error"),{success:!1,error:"please report this code: #RRFV"};const s=await Th(o);return Ah.set("apiKey",i),Ah.set("deviceId",a),pv(s.id,a),{success:!0}})(r,i,s),w=async()=>await(async(e,t)=>{const n=await Wb.post("/auth/login",{username:e,password:t,deviceName:await Cp(),deviceId:await Ah.get("deviceId")});if(400===n.status)return"string"==typeof n.data?{success:!1,error:"Required parameters are missing"}:n.data.existing?{success:!1,error:"Username and/or email already taken"}:{success:!1,error:"Input validation failed"};if(500===n.status)return{success:!1,error:"Failed to create user"};const{accessToken:r,apiKey:o,deviceId:i}=n.data;if(!(r&&o&&i))return op("please report this code: #RRFV","error"),{success:!1,error:"please report this code: #RRFV"};const a=await Th(r);return Ah.set("apiKey",o),Ah.set("deviceId",i),pv(a.id,i),{success:!0}})(r,s);return ne.jsxs(lp,{isOpen:!0,onClose:y,className:"",children:[ne.jsx(dp,{title:v,onClose:y}),ne.jsxs(cp,{children:[d?ne.jsx("h1",{children:"Loading..."}):!0===h?ne.jsxs(ne.Fragment,{children:[ne.jsx("h1",{children:"Authentication successful!"}),ne.jsx(sp,{color:"primary",onClick:y,children:"Close"})]}):!1===h?ne.jsxs(ne.Fragment,{children:[ne.jsx("h1",{children:g}),ne.jsx(sp,{color:"light",onClick:()=>{m(""),p(void 0)},children:"Try Again"})]}):ne.jsxs(ne.Fragment,{children:[ne.jsx(hp,{id:"username",label:t?"Username":"Username or Email",placeholder:"Username",value:r,onChange:o,isValid:!0,errorMessage:""}),t&&ne.jsx(hp,{id:"email",label:"Email",placeholder:"support@bardsballad.com",value:i,onChange:a,isValid:!0,errorMessage:""}),ne.jsx(hp,{id:"password",label:"Password",type:"password",placeholder:"OogaBooga1234",value:s,onChange:l,isValid:!0,errorMessage:""}),t&&ne.jsx(hp,{id:"confirm-password",label:"Confirm Password",type:"password",placeholder:"OogaBooga1234",value:c,onChange:u,isValid:0===c.length||c===s,errorMessage:"Passwords don't match"}),ne.jsx(sp,{id:"signup",color:"primary",onClick:async()=>{const e=t?b:w;try{f(!0);const{success:t,error:n}=await e();f(!1),p(t),n&&m(n)}catch(J$){f(!1),p(!1),m("Error occured during authentication, try again please.")}},children:v}),ne.jsx("div",{className:"flex flex-col mt-4 items-center justify-center text-sm",children:ne.jsxs("h3",{children:[ne.jsx("span",{className:"cursor-default dark:text-neutral-300",children:t?"Already have an account?":"Don't have an account?"}),ne.jsx("span",{className:"group text-fantasy-accent transition-all duration-100 ease-in-out cursor-pointer",onClick:()=>n(!t),children:ne.jsx("span",{className:"bg-left-bottom ml-1 bg-gradient-to-r from-fantasy-accent-light to-fantasy-accent-dark bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:t?"Login":"Sign Up"})})]})})]}),ne.jsx("div",{className:"text-neutral-500 flex text-center flex-col mt-4 items-center text-sm",children:ne.jsxs("p",{className:"cursor-default",children:["By ",t?"signing up":"logging in",", you agree to our"," ",ne.jsx("a",{className:"group text-fantasy-accent transition-all duration-100 ease-in-out",href:"https://bardsballad.com/terms-of-service",target:"_blank",rel:"noopener noreferrer",children:ne.jsxs("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-fantasy-accent-light to-fantasy-accent-dark bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:["Terms of Service"," "]})}),"and"," ",ne.jsx("a",{className:"group text-fantasy-accent transition-all duration-100 ease-in-out",href:"https://bardsballad.com/privacy-policy",target:"_blank",rel:"noopener noreferrer",children:ne.jsx("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-fantasy-accent-light to-fantasy-accent-dark bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:"Privacy Policy"})})]})})]})]})},Vb=[{icon:"",name:"Home",path:""},{icon:"",name:"Marketplace",path:"marketplace"},{icon:"",name:"Characters",path:"characters"},{icon:"",name:"Library",path:"library"},{icon:"",name:"Garbage",path:"garbage"}],qb=[{icon:()=>ne.jsx("svg",{className:"flex-shrink-0 w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 21",children:ne.jsx("path",{d:"m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"})}),name:"Settings",path:"settings"}],Kb=()=>{const e=gh.useValue(),t=Ph.useValue(),[n,r]=q.useState(!1),o=q.useRef(!1);return q.useEffect((()=>{if(o.current)return;o.current=!0;return(async()=>{await Rh.get("onboarding-completed")||fh("onboarding",(({id:e})=>ne.jsx(fp,{yes:()=>{hh(e),mh(),r(!0)},no:()=>{hh(e),Rh.set("onboarding-completed",!0)}})))})(),()=>{var e;e="onboarding",dh.set((t=>t.filter((t=>t.tag!==e))))}}),[]),ne.jsxs("div",{className:"w-screen h-screen-dynamic transition-colors overflow-x-hidden fantasy-gradient fantasy-atmospheric text-fantasy-text",children:[ne.jsx("div",{className:"fixed inset-0 pointer-events-none z-10",id:"particleContainer"}),ne.jsx(ip,{}),n&&ne.jsx(Dh,{steps:Lh,onFinish:()=>{Rh.set("onboarding-completed",!0),r(!1)}}),ne.jsx("div",{onClick:vh,className:(e?"":"-translate-x-full")+" bg-neutral-950 opacity-65 fixed top-0 left-0 z-40 w-screen sm:w-64 h-screen-dynamic sm:translate-x-0"}),ne.jsx("aside",{onClick:vh,className:(e?"":"-translate-x-full")+" bg-fantasy-glass backdrop-blur-lg border-r border-fantasy-border shadow-2xl fixed top-0 left-0 z-40 w-64 h-screen-dynamic transition-transform sm:translate-x-0","aria-label":"Sidebar",children:ne.jsxs("div",{className:"h-full flex flex-col justify-between px-3 py-4 overflow-y-auto",onClick:e=>e.stopPropagation(),children:[ne.jsxs("div",{children:[ne.jsxs("div",{className:"flex items-center mb-10 text-fantasy-accent font-bold text-lg",children:[ne.jsx("svg",{className:"h-11 sm:h-12 mr-2.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 442 442",children:ne.jsx("g",{children:ne.jsxs("g",{children:[ne.jsx("path",{className:"fill-fantasy-accent",d:"M221,442c-59.03,0-114.53-22.99-156.27-64.73S0,280.03,0,221,22.99,106.47,64.73,64.73C106.47,22.99,161.97,0,221,0s114.53,22.99,156.27,64.73c41.74,41.74,64.73,97.24,64.73,156.27s-22.99,114.53-64.73,156.27-97.24,64.73-156.27,64.73ZM221,12C105.76,12,12,105.76,12,221s93.76,209,209,209,209-93.76,209-209S336.24,12,221,12Z"}),ne.jsx("path",{className:"fill-fantasy-accent",d:"M343,318c-10.28-3.95-23-4-30,1-8.96,6.4-14,18-27.89,17-13.33-.96-18.11-10-18.11-10,0,0,13-1,21-8,6.58-5.76,12-12,11-24-.91-10.96-8.94-16-18-16-14,0-22,11-22,11,0,0-3-11,10-30,14.43-21.09,37.58-34.03,45-50,13-28,8.03-51,8.03-51l5.18-5.04.76.92s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-3.19-3.94,7.19-6.99,2.42,2.93s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-4.83-5.96,7.26-7.07,3.43,4.15s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-5.83-7.19.83-.81s3.33,2.68,6-1c2.93-4.04-2-7-2-7l-13-15s-1-4-5-3c-4.95,1.24-4,5-4,5l-.34.22-6.66-8.22s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l4.32,5.24-8.36,5.3-5.4-6.66s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l3.05,3.69-8.25,5.23-4.8-5.92s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l2.44,2.96-91.7,58.17s-7.97,4.6-15.3,9c-5,3-9-4-9-4l-3-2-2.44,2s4.89,6.76,4.44,9c-1,5-5,1-5,1l-6-7-4-3-2,3,7.43,9s2.62,3,.57,5-6-3-6-3l-9.95-12-4.05-2-2,2,11,14s4,5,1,7-7-4-7-4l-14-18-5-2-1,3,14.89,23s4.11,4,.11,7c-3.39,2.55-6.85-1.6-6.85-1.6l-21.54-28-5.61-2.4-1,3,20,28s6.35,6.71,1,9c-7,3-11.75-4-11.75-4l-24.25-30-4-2-1,3,23.1,33s5.13,7,2.05,10c-3.08,3-8.92-2.5-8.92-2.5l-29.23-37.5-4-2-1,3,32.9,47s4.1,5,2.1,7c-3.23,3.23-6-1-6-1l-38-51-6-1-3,4s65.82,92,73,99,9.9,1,14,3,5.41,7.59,1,12c-6,6-11-1-11-1,0,0-68.15-92-78.4-106-10.26-14-15.22-27.04-16.6-38-2-16,2.57-39,20-43s33.07.64,42,13c13,18,18.46,26.33,29,34,11,8,33.57,10.15,49-4,12-11,9.91-29,9.91-29,0,0,20.47-10.15,26.09-27,7-21-8.5-37.38-3-59,3.12-12.27,14-22,28-22,18.03,0,23.78,11,23.78,11,0,0-5.65,0-10.78,5s-5.64,11.45-2,16c4,5,13,5,19,0,6.61-5.51,5.06-14,5.06-14,0,0,5.94-4,11.94,4,4.38,5.84,4.04,14.63,15,16,8,1,16-8,14-16-1.21-4.85-5.49-7.87-10-4-7,6,3.08,13.26-3,15-7,2-9-11-16-17-5.93-5.08-11-6-11-6,0,0-1-19-19-22-17.31-2.88-30.74,2.36-41,14-10.26,11.64-12.05,26-10,37s10.13,29,5,42-23.11,20-23.11,20c0,0-.89-11-5.89-17-6.46-7.75-13-13-27-12-10.02.72-23.05,11-21,25s17,15,17,15c0,0-9.27,9.07-27,4-14-4-14.89-13.18-30-22-20.23-11.82-37-6-42-3-4.62,2.77-18.99,11.98-19,40,0,24,13,40,13,40l-23,12s-6,2-8,7c-1.53,3.83,2,8,2,8l95,122s6.82,11,14,11c6,0,13-6,13-6,0,0,24.27-16,50.94-57s22.56-77.58,22.56-77.58l74.5-51.42s8-5,6-8c-1.76-2.64-9,3-9,3,0,0-116.44,74.29-119,76-3,2-4-2-4-2,0,0-2-6-6-10-2.7-2.7-6.08-3.16-7-5-1-2,1-4,3-5l108.67-73s8.99-8,25.33-5c8.31,1.53,15,8,15,8,0,0,7.97,8,9,18s-1.13,20-5.23,30-8.2,15-18.46,23c-10.26,8-25.2,13.19-37.31,20-16,9-22.84,24.61-27,35-2,5-4.18,20,3,31s24,15,24,15c0,0,3.85,5,10,9s14.02,5.61,22,5c13-1,16.25-8.83,24-14,6-4,16.18-4,24.38,1,8.2,5,15.62,16.58,15.62,28,0,12-1.8,19-10,27s-15.54,11-34,11-29-1-38-7c-11.91-7.94-12.92-15.81-24-28-10-11-21.69-15-34-15-8,0-15.49,1.49-24,10-7,7-7,18-7,18,0,0-4,2-10,9-5.14,5.99-10,13-17,14-10.58,1.51-17.59-2-17.59-2,0,0,1.62-3,.59-5s-3.9-3-8-3-6.74,4.26-2,9c3,3,6.52,5.77,17,7,17,2,22.94-7.94,28-13,7-7,11-8,11-8,0,0,2,5,7,8,3.15,1.89,10,3,15,1,5.95-2.38,7-10,4-15-2.78-4.63-12-5-12-5,0,0,3-8,16-6,8.95,1.38,13.96,5.04,28,18,13,12,30.32,14.88,50,16,35,2,47.44,0,59.74-10,12.31-10,15.54-33.28,13.26-44s-10.59-20-21-24ZM274,66c-7,4-12-2-11-7,.78-3.92,4-7,12-8,0,0,5.14,11.49-1,15ZM147,132c-1.05-6.32,3-16,13-17s12,6,12,12c0,10.44-7,16-7,16-9,0-17-5-18-11ZM164,252c0,10.49-8.51,19-19,19s-19-8.51-19-19,8.51-19,19-19,19,8.51,19,19ZM347,107s7.18,5.73,8,9c.49,1.94.03,3.42-.57,4.43l-12.11-14.93c3.12-.83,4.68,1.5,4.68,1.5ZM335.77,109.21l13.37,16.2-7.54,6.66-14.23-17.55c3.21-2.03,6.11-3.86,8.41-5.3ZM321.04,118.52l15.13,18.33-7.46,6.58-15.94-19.66c2.74-1.74,5.54-3.52,8.27-5.25ZM310,142c-8.3-6.64-18-5-18-5,0,0,6.33-4.04,14.44-9.21l16.85,20.42-4.29,3.79s-4-6-9-10ZM261,299s2-7,9-12,15-5,19-2c5.06,3.79,5.41,11.18,3,16-2,4-9.11,10.32-17,9-12-2-14-11-14-11ZM198,374c4.47,0,7,4,6,7-1.14,3.42-7,3-10,1-2.35-1.57-4-6-4-6,0,0,3-2,8-2Z"})]})})}),ne.jsx("p",{children:"BardsBallad"})]}),ne.jsx("ul",{className:"space-y-2",children:Vb.map((e=>ne.jsx("li",{children:ne.jsx(Qf,{id:`nav-${e.name}`,to:e.path,onClick:vh,children:({isActive:t,isPending:n})=>ne.jsxs("div",{className:"nav-item flex items-center px-4 py-3 rounded-lg cursor-pointer transition-all duration-300 "+(t?"bg-fantasy-accent/20 border-l-4 border-fantasy-accent":"hover:bg-fantasy-accent/10 hover:translate-x-1"),children:[ne.jsx("span",{className:"mr-3 text-base",children:e.icon}),ne.jsx("p",{children:e.name})]})})},e.name)))})]}),ne.jsxs("div",{children:[ne.jsxs("div",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl p-4 mt-5 text-sm leading-relaxed",role:"alert",children:[ne.jsx("span",{className:"bg-fantasy-accent text-fantasy-dark px-2 py-0.5 rounded text-sm font-bold mb-2 inline-block",children:"Beta"}),ne.jsx("p",{children:"We're happy you're using the BardsBallad Beta! If you run into any problems please reach out to us through one of the platforms below!"})]}),ne.jsxs("div",{className:"flex items-center my-2 gap-2 px-1",children:[ne.jsx("a",{href:"https://discord.gg/a5qSfxv",target:"_blank",className:"hover:bg-fantasy-accent/10 p-1 rounded",children:ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 fill-fantasy-text-muted hover:fill-fantasy-text transition-colors",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M464 66.52A50 50 0 00414.12 17L97.64 16A49.65 49.65 0 0048 65.52V392c0 27.3 22.28 48 49.64 48H368l-13-44 109 100zM324.65 329.81s-8.72-10.39-16-19.32C340.39 301.55 352.5 282 352.5 282a139 139 0 01-27.85 14.25 173.31 173.31 0 01-35.11 10.39 170.05 170.05 0 01-62.72-.24 184.45 184.45 0 01-35.59-10.4 141.46 141.46 0 01-17.68-8.21c-.73-.48-1.45-.72-2.18-1.21-.49-.24-.73-.48-1-.48-4.36-2.42-6.78-4.11-6.78-4.11s11.62 19.09 42.38 28.26c-7.27 9.18-16.23 19.81-16.23 19.81-53.51-1.69-73.85-36.47-73.85-36.47 0-77.06 34.87-139.62 34.87-139.62 34.87-25.85 67.8-25.12 67.8-25.12l2.42 2.9c-43.59 12.32-63.44 31.4-63.44 31.4s5.32-2.9 14.28-6.77c25.91-11.35 46.5-14.25 55-15.21a24 24 0 014.12-.49 205.62 205.62 0 0148.91-.48 201.62 201.62 0 0172.89 22.95s-19.13-18.15-60.3-30.45l3.39-3.86s33.17-.73 67.81 25.16c0 0 34.87 62.56 34.87 139.62 0-.28-20.35 34.5-73.86 36.19z"}),ne.jsx("path",{d:"M212.05 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.8 0 24.7-11.83 24.7-26.57.25-14.76-10.9-26.57-24.7-26.57zM300.43 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.81 0 24.7-11.83 24.7-26.57S314 218 300.43 218z"})]})}),ne.jsx("a",{href:"https://github.com/KingCosmic/BardsBallad",target:"_blank",className:"hover:bg-fantasy-accent/10 p-1 rounded",children:ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 fill-fantasy-text-muted hover:fill-fantasy-text transition-colors",viewBox:"0 0 512 512",children:ne.jsx("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"})})}),ne.jsx("a",{href:"mailto:support@bardsballad.com",target:"_blank",className:"hover:bg-fantasy-accent/10 p-1 rounded",children:ne.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 fill-fantasy-text-muted hover:fill-fantasy-text transition-colors",xmlns:"http://www.w3.org/2000/svg",children:[ne.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),ne.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),ne.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",ne.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 5.25L3 6V18L3.75 18.75H20.25L21 18V6L20.25 5.25H3.75ZM4.5 7.6955V17.25H19.5V7.69525L11.9999 14.5136L4.5 7.6955ZM18.3099 6.75H5.68986L11.9999 12.4864L18.3099 6.75Z"})," "]})]})})]}),ne.jsxs("ul",{className:"pt-4 mt-2 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:[!t.isLoggedIn&&ne.jsx("li",{className:"w-full",children:ne.jsx("button",{className:"w-full fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>fh("auth",(({id:e})=>ne.jsx(Hb,{id:e}))),children:"Login / Register"})}),qb.map((e=>ne.jsx("li",{children:ne.jsx(Qf,{id:`nav-${e.name}`,to:e.path,onClick:vh,children:({isActive:t,isPending:n})=>ne.jsxs("div",{className:"nav-item flex items-center px-4 py-3 rounded-lg cursor-pointer transition-all duration-300 "+(t?"bg-fantasy-accent/20 border-l-4 border-fantasy-accent":"hover:bg-fantasy-accent/10 hover:translate-x-1"),children:[ne.jsx("span",{className:"mr-3 text-base",children:e.icon()}),ne.jsx("p",{children:e.name})]})})},e.name)))]})]})]})}),ne.jsx("div",{className:"sm:ml-64 h-screen-dynamic p-8 lg:p-10",children:ne.jsx(Ef,{})}),ne.jsx(ph,{})]})},Zb=()=>ne.jsxs("button",{onClick:mh,type:"button",className:"sm:hidden bg-fantasy-glass border border-fantasy-border rounded-lg p-4 mr-4 backdrop-blur-lg text-fantasy-accent text-lg transition-all duration-300 hover:bg-fantasy-accent/20 hover:scale-105",children:[ne.jsx("span",{className:"sr-only",children:"Open sidebar"}),ne.jsx("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:ne.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})})]}),Yb=({title:e,subtitle:t="",options:n,hasSidebar:r=!1})=>ne.jsxs("div",{className:"flex flex-row justify-between mb-8 "+(r?"lg:w-[calc(100vw-36rem)]":""),children:[ne.jsxs("div",{className:"flex flex-row items-start",children:[ne.jsx(Zb,{}),ne.jsxs("div",{children:[ne.jsx("h1",{className:"text-3xl font-light text-fantasy-text mb-2 drop-shadow-lg",children:e}),ne.jsx("p",{className:"text-sm text-fantasy-accent/80",children:t})]})]}),ne.jsx("div",{className:"flex flex-row-reverse items-center",children:(null==n?void 0:n.length)&&ne.jsx("ul",{className:"flex flex-row gap-2",children:null==n?void 0:n.map((({Content:e,onClick:t},n)=>ne.jsx("li",{onClick:t,className:"flex justify-center items-center bg-fantasy-dark text-fantasy-text border border-fantasy-border p-4 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-dark/40 cursor-pointer",children:ne.jsx(e,{})},n)))})})]}),Gb=[{title:"Added Eruda debugging support, and started work on theme system.",date:"Released on January 21st, 2025",description:"Check your settings for themes and to enable Eruda!"},{title:"Editor Released!",date:"Released on January 16th, 2025",description:"We've released the Editor portion of BarsBallad, this will allow you to make your own systems! It includes visual drag and drop creation of character of tabs, and a custom visual code editor."},{title:"Beta Release",date:"Released on August 14th, 2024",description:"We're releasing BardsBallad into open beta! Please share all feedback through discord and github and share us with your friends!"}],Xb=({title:e,isLatest:t,date:n,description:r})=>ne.jsxs("li",{className:"mb-10 ms-6",children:[ne.jsx("span",{className:"absolute flex items-center justify-center w-6 h-6 rounded-full -start-3 ring-8 ring-fantasy-dark bg-fantasy-medium",children:ne.jsx("svg",{className:"w-2.5 h-2.5 text-fantasy-accent","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:ne.jsx("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})})}),ne.jsxs("h3",{className:"flex items-center mb-1 text-lg font-semibold text-fantasy-text",children:[e,t?ne.jsxs(ne.Fragment,{children:[" ",ne.jsx("span",{className:"bg-fantasy-accent text-fantasy-dark text-sm font-medium me-2 px-2.5 py-0.5 rounded ms-3",children:"Latest"})]}):null]}),ne.jsx("time",{className:"block mb-2 text-sm font-normal leading-none text-fantasy-text-muted",children:n}),ne.jsx("p",{className:"mb-4 text-base font-normal text-fantasy-text-muted",children:r})]}),Jb=()=>ne.jsxs("div",{children:[ne.jsx(Yb,{title:"Home"}),ne.jsx("ol",{className:"relative m-10 border-s border-fantasy-border",children:Gb.map(((e,t)=>ne.jsx(Xb,{title:e.title,isLatest:0===t,date:e.date,description:e.description},e.title)))})]}),Qb=q.forwardRef((({id:e,label:t,value:n,onChange:r,children:o,style:i,containerClassName:a,labelClassName:s,className:l},c)=>ne.jsxs("div",{className:a||"mb-6",style:i,ref:c,children:[ne.jsx("label",{htmlFor:e,className:`block mb-2 text-sm font-medium text-neutral-900 dark:text-white ${s}`,children:t}),ne.jsx("select",{id:e,className:`${l} block w-full p-3 bg-fantasy-dark text-fantasy-text border border-fantasy-border rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-dark/40 cursor-pointer`,value:n,onChange:e=>r(e.target.value),children:o})]}))),ew=q.createContext({});function tw(){return q.useContext(ew)}const nw=({localData:e,children:t})=>{const n=tw();return ne.jsx(ew.Provider,{value:{...n,...e},children:t})};function rw(e){return e.nodes.find((e=>"entry"===e.type))}function ow(e,t){return e.nodes.find((e=>e.id===t))}const iw={process:(e,t)=>{const n=function(e,t){if(!t)return;return t.split("/").reduce(((e,t)=>{if(e)return Array.isArray(e)?(e=e.find((e=>e.name===t)))||void 0:e[t]}),e)}(e.getCharacter(),`data/${t.data.path}`);return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}};function aw(e,t,n){const r=t.split("/");if(!r.length)return e;const o=r.pop(),i=r.reduce(((e,t)=>{if(e)return Array.isArray(e)?(e=e.find((e=>e.name===t)))||void 0:e[t]}),e);if(!i)return e;if(Array.isArray(i)){const t=i.findIndex((e=>e.name===o));if(-1===t)return e;i[t]=n}else i[o]=n;return e}var sw=Symbol.for("immer-nothing"),lw=Symbol.for("immer-draftable"),cw=Symbol.for("immer-state");function uw(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dw=Object.getPrototypeOf;function fw(e){return!!e&&!!e[cw]}function hw(e){var t;return!!e&&(gw(e)||Array.isArray(e)||!!e[lw]||!(null===(t=e.constructor)||void 0===t||!t[lw])||ww(e)||xw(e))}var pw=Object.prototype.constructor.toString();function gw(e){if(!e||"object"!=typeof e)return!1;const t=dw(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===pw}function mw(e,t){0===vw(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function vw(e){const t=e[cw];return t?t.type_:Array.isArray(e)?1:ww(e)?2:xw(e)?3:0}function yw(e,t){return 2===vw(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bw(e,t,n){const r=vw(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function ww(e){return e instanceof Map}function xw(e){return e instanceof Set}function _w(e){return e.copy_||e.base_}function kw(e,t){if(ww(e))return new Map(e);if(xw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=gw(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[cw];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(dw(e),t)}{const t=dw(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function Sw(e,t=!1){return jw(e)||fw(e)||!hw(e)||(vw(e)>1&&(e.set=e.add=e.clear=e.delete=Ew),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>Sw(t,!0)))),e}function Ew(){uw(2)}function jw(e){return Object.isFrozen(e)}var Cw,Nw={};function Aw(e){const t=Nw[e];return t||uw(0),t}function Ow(){return Cw}function Rw(e,t){t&&(Aw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Pw(e){Tw(e),e.drafts_.forEach(Mw),e.drafts_=null}function Tw(e){e===Cw&&(Cw=e.parent_)}function Iw(e){return Cw={drafts_:[],parent_:Cw,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Mw(e){const t=e[cw];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Dw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[cw].modified_&&(Pw(t),uw(4)),hw(e)&&(e=Lw(t,e),t.parent_||Fw(t,e)),t.patches_&&Aw("Patches").generateReplacementPatches_(n[cw].base_,e,t.patches_,t.inversePatches_)):e=Lw(t,n,[]),Pw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==sw?e:void 0}function Lw(e,t,n){if(jw(t))return t;const r=t[cw];if(!r)return mw(t,((o,i)=>Bw(e,r,t,o,i,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Fw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let o=t,i=!1;3===r.type_&&(o=new Set(t),t.clear(),i=!0),mw(o,((o,a)=>Bw(e,r,t,o,a,n,i))),Fw(e,t,!1),n&&e.patches_&&Aw("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Bw(e,t,n,r,o,i,a){if(fw(o)){const a=Lw(e,o,i&&t&&3!==t.type_&&!yw(t.assigned_,r)?i.concat(r):void 0);if(bw(n,r,a),!fw(a))return;e.canAutoFreeze_=!1}else a&&n.add(o);if(hw(o)&&!jw(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Lw(e,o),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||Fw(e,o)}}function Fw(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Sw(t,n)}var zw={get(e,t){if(t===cw)return e;const n=_w(e);if(!yw(n,t))return function(e,t,n){var r;const o=Ww(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!hw(r)?r:r===Uw(e.base_,t)?(Vw(e),e.copy_[t]=qw(r,e)):r},has:(e,t)=>t in _w(e),ownKeys:e=>Reflect.ownKeys(_w(e)),set(e,t,n){const r=Ww(_w(e),t);if(null!=r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Uw(_w(e),t),o=null==r?void 0:r[cw];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||yw(e.base_,t)))return!0;Vw(e),Hw(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Uw(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Vw(e),Hw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=_w(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){uw(11)},getPrototypeOf:e=>dw(e.base_),setPrototypeOf(){uw(12)}},$w={};function Uw(e,t){const n=e[cw];return(n?_w(n):e)[t]}function Ww(e,t){if(!(t in e))return;let n=dw(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=dw(n)}}function Hw(e){e.modified_||(e.modified_=!0,e.parent_&&Hw(e.parent_))}function Vw(e){e.copy_||(e.copy_=kw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}mw(zw,((e,t)=>{$w[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),$w.deleteProperty=function(e,t){return $w.set.call(this,e,t,void 0)},$w.set=function(e,t,n){return zw.set.call(this,e[0],t,n,e[0])};function qw(e,t){const n=ww(e)?Aw("MapSet").proxyMap_(e,t):xw(e)?Aw("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ow(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=zw;n&&(o=[r],i=$w);const{revoke:a,proxy:s}=Proxy.revocable(o,i);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:Ow()).drafts_.push(n),n}function Kw(e){if(!hw(e)||jw(e))return e;const t=e[cw];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=kw(e,t.scope_.immer_.useStrictShallowCopy_)}else n=kw(e,!0);return mw(n,((e,t)=>{bw(n,e,Kw(t))})),t&&(t.finalized_=!1),n}var Zw=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...o){return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!=typeof t&&uw(6),void 0!==n&&"function"!=typeof n&&uw(7),hw(e)){const o=Iw(this),i=qw(e,void 0);let a=!0;try{r=t(i),a=!1}finally{a?Pw(o):Tw(o)}return Rw(o,n),Dw(r,o)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===sw&&(r=void 0),this.autoFreeze_&&Sw(r,!0),n){const t=[],o=[];Aw("Patches").generateReplacementPatches_(e,r,t,o),n(t,o)}return r}uw(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;const o=this.produce(e,t,((e,t)=>{n=e,r=t}));return[o,n,r]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){hw(e)||uw(8),fw(e)&&(e=function(e){fw(e)||uw(10);return Kw(e)}(e));const t=Iw(this),n=qw(e,void 0);return n[cw].isManual_=!0,Tw(t),n}finishDraft(e,t){const n=e&&e[cw];n&&n.isManual_||uw(9);const{scope_:r}=n;return Rw(r,t),Dw(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Aw("Patches").applyPatches_;return fw(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},Yw=Zw.produce;Zw.produceWithPatches.bind(Zw),Zw.setAutoFreeze.bind(Zw),Zw.setUseStrictShallowCopy.bind(Zw),Zw.applyPatches.bind(Zw),Zw.createDraft.bind(Zw),Zw.finishDraft.bind(Zw);const Gw={process:(e,t)=>{const n=e.getCharacter(),r=e.getParam(t.id,"input"),o=Yw(n,(e=>aw(e,`data/${t.data.path}`,r)));return e.setCharacter(o),e.getConnectingNodeForHandle(t,"next","output")}};function Xw(e=[],t){const n=[];return n.push({id:"1",type:"entry",data:{params:e},position:{x:100,y:100}}),t&&n.push({id:"2",type:"output",data:{param:t},position:{x:250,y:100}}),n}function Jw(e=[],t=[],n){const r=e.findIndex((e=>"entry"===e.type));if(-1===r)return e;if(e[r].data.params=t,!n)return e;const o=e.findIndex((e=>"output"===e.type));return-1===o||(e[o].data.param=n),e}function Qw(e,t){if("string"==typeof t)return ex(e,{type:t,isArray:!1,options:[],isOutputAnArray:!1,inputs:[],outputType:"none"});let n={_type:{...t}};for(let r=0;r<t.properties.length;r++){const o=t.properties[r];let i=o.typeData;n[o.key]=ex(e,i)}return n}function ex(e,t){if(t.isArray)return[];switch(t.type){case"string":return"Lorem Ipsum";case"number":return 1;case"boolean":return!1;case"enum":return t.options?[t.options[0]]:["undefined options"];case"blueprint":return{nodes:Xw(t.inputs,"none"!==t.outputType?{name:"output",type:t.outputType||"none",isArray:t.isOutputAnArray||!1}:void 0),edges:[]};default:const n=e.find((e=>e.name===t.type));return n?Qw(e,n):`Type ${t.type} not found.`}}const tx={process:(e,t)=>{const n=t.data.spreadType;let r={_type:n};for(let o=0;o<n.properties.length;o++){const i=n.properties[o];let a=e.getParam(t.id,i.key);void 0===a&&(a=ex(e.getSystem().types,i.typeData)),r[i.key]=a}return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},nx={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",Math.floor(n)),e.getConnectingNodeForHandle(t,"next","output")}},rx=()=>ne.jsx("div",{className:"h-px w-full bg-neutral-200 dark:bg-neutral-700"}),ox=({id:e,label:t,value:n,onChange:r})=>ne.jsxs("div",{children:[ne.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-fantasy-text",children:t}),ne.jsx("textarea",{id:e,rows:4,value:n,onChange:e=>r(e.target.value),className:"block p-2.5 w-full text-sm placeholder-fantasy-text-muted text-fantasy-text bg-fantasy-dark rounded-lg border border-fantasy-border focus:ring-fantasy-accent focus:border-fantasy-accent"})]}),ix=({id:e,label:t,checked:n,onChange:r})=>ne.jsxs("div",{className:"flex items-center",children:[ne.jsx("input",{id:e,type:"checkbox",checked:n,onChange:()=>r(!n),className:"w-4 h-4 rounded focus:ring-2 focus:ring-fantasy-accent ring-offset-fantasy-text-muted border-fantasy-border"}),ne.jsx("label",{htmlFor:e,className:"ms-2 text-sm font-medium text-fantasy-text",children:t})]});function ax(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=ax(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var sx={value:()=>{}};function lx(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new cx(r)}function cx(e){this._=e}function ux(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function dx(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=sx,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}cx.prototype=lx.prototype={constructor:cx,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)o[n]=dx(o[n],e.name,t);else if(null==t)for(n in o)o[n]=dx(o[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=ux(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new cx(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var fx="http://www.w3.org/1999/xhtml";const hx={svg:"http://www.w3.org/2000/svg",xhtml:fx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function px(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),hx.hasOwnProperty(t)?{space:hx[t],local:e}:e}function gx(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fx&&t.documentElement.namespaceURI===fx?t.createElement(e):t.createElementNS(n,e)}}function mx(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vx(e){var t=px(e);return(t.local?mx:gx)(t)}function yx(){}function bx(e){return null==e?yx:function(){return this.querySelector(e)}}function wx(){return[]}function xx(e){return null==e?wx:function(){return this.querySelectorAll(e)}}function _x(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function kx(e){return function(){return this.matches(e)}}function Sx(e){return function(t){return t.matches(e)}}var Ex=Array.prototype.find;function jx(){return this.firstElementChild}var Cx=Array.prototype.filter;function Nx(){return Array.from(this.children)}function Ax(e){return new Array(e.length)}function Ox(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Rx(e,t,n,r,o,i){for(var a,s=0,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new Ox(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function Px(e,t,n,r,o,i,a){var s,l,c,u=new Map,d=t.length,f=i.length,h=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(h[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?o[s]=l:u.set(c,l));for(s=0;s<f;++s)c=a.call(e,i[s],s,i)+"",(l=u.get(c))?(r[s]=l,l.__data__=i[s],u.delete(c)):n[s]=new Ox(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(h[s])===l&&(o[s]=l)}function Tx(e){return e.__data__}function Ix(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Mx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dx(e){return function(){this.removeAttribute(e)}}function Lx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bx(e,t){return function(){this.setAttribute(e,t)}}function Fx(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zx(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function $x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ux(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wx(e){return function(){this.style.removeProperty(e)}}function Hx(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Vx(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function qx(e,t){return e.style.getPropertyValue(t)||Ux(e).getComputedStyle(e,null).getPropertyValue(t)}function Kx(e){return function(){delete this[e]}}function Zx(e,t){return function(){this[e]=t}}function Yx(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Gx(e){return e.trim().split(/^|\s+/)}function Xx(e){return e.classList||new Jx(e)}function Jx(e){this._node=e,this._names=Gx(e.getAttribute("class")||"")}function Qx(e,t){for(var n=Xx(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function e_(e,t){for(var n=Xx(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function t_(e){return function(){Qx(this,e)}}function n_(e){return function(){e_(this,e)}}function r_(e,t){return function(){(t.apply(this,arguments)?Qx:e_)(this,e)}}function o_(){this.textContent=""}function i_(e){return function(){this.textContent=e}}function a_(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function s_(){this.innerHTML=""}function l_(e){return function(){this.innerHTML=e}}function c_(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function u_(){this.nextSibling&&this.parentNode.appendChild(this)}function d_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function f_(){return null}function h_(){var e=this.parentNode;e&&e.removeChild(this)}function p_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function g_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function m_(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function v_(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function y_(e,t,n){var r=Ux(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function b_(e,t){return function(){return y_(this,e,t)}}function w_(e,t){return function(){return y_(this,e,t.apply(this,arguments))}}Ox.prototype={constructor:Ox,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Jx.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var x_=[null];function __(e,t){this._groups=e,this._parents=t}function k_(){return new __([[document.documentElement]],x_)}function S_(e){return"string"==typeof e?new __([[document.querySelector(e)]],[document.documentElement]):new __([[e]],x_)}function E_(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}__.prototype=k_.prototype={constructor:__,select:function(e){"function"!=typeof e&&(e=bx(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=s[u])&&(a=e.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),c[u]=a);return new __(r,this._parents)},selectAll:function(e){e="function"==typeof e?_x(e):xx(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),o.push(a));return new __(r,o)},selectChild:function(e){return this.select(null==e?jx:function(e){return function(){return Ex.call(this.children,e)}}("function"==typeof e?e:Sx(e)))},selectChildren:function(e){return this.selectAll(null==e?Nx:function(e){return function(){return Cx.call(this.children,e)}}("function"==typeof e?e:Sx(e)))},filter:function(e){"function"!=typeof e&&(e=kx(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new __(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Tx);var n=t?Px:Rx,r=this._parents,o=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=o[c],f=d.length,h=Ix(e.call(u,u&&u.__data__,c,r)),p=h.length,g=s[c]=new Array(p),m=a[c]=new Array(p);n(u,d,g,m,l[c]=new Array(f),h,t);for(var v,y,b=0,w=0;b<p;++b)if(v=g[b]){for(b>=w&&(w=b+1);!(y=m[w])&&++w<p;);v._next=y||null}}return(a=new __(a,r))._enter=s,a._exit=l,a},enter:function(){return new __(this._enter||this._groups.map(Ax),this._parents)},exit:function(){return new __(this._exit||this._groups.map(Ax),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var c,u=n[l],d=r[l],f=u.length,h=s[l]=new Array(f),p=0;p<f;++p)(c=u[p]||d[p])&&(h[p]=c);for(;l<o;++l)s[l]=n[l];return new __(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Mx);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,c=o[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new __(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=px(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Lx:Dx:"function"==typeof t?n.local?$x:zx:n.local?Fx:Bx)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Wx:"function"==typeof t?Vx:Hx)(e,t,null==n?"":n)):qx(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Kx:"function"==typeof t?Yx:Zx)(e,t)):this.node()[e]},classed:function(e,t){var n=Gx(e+"");if(arguments.length<2){for(var r=Xx(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?r_:t?t_:n_)(n,t))},text:function(e){return arguments.length?this.each(null==e?o_:("function"==typeof e?a_:i_)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?s_:("function"==typeof e?c_:l_)(e)):this.node().innerHTML},raise:function(){return this.each(u_)},lower:function(){return this.each(d_)},append:function(e){var t="function"==typeof e?e:vx(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:vx(e),r=null==t?f_:"function"==typeof t?t:bx(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(h_)},clone:function(e){return this.select(e?g_:p_)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?v_:m_,r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?w_:b_)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const j_={passive:!1},C_={capture:!0,passive:!1};function N_(e){e.stopImmediatePropagation()}function A_(e){e.preventDefault(),e.stopImmediatePropagation()}function O_(e){var t=e.document.documentElement,n=S_(e).on("dragstart.drag",A_,C_);"onselectstart"in t?n.on("selectstart.drag",A_,C_):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function R_(e,t){var n=e.document.documentElement,r=S_(e).on("dragstart.drag",null);t&&(r.on("click.drag",A_,C_),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const P_=e=>()=>e;function T_(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function I_(e){return!e.ctrlKey&&!e.button}function M_(){return this.parentNode}function D_(e,t){return null==t?{x:e.x,y:e.y}:t}function L_(){return navigator.maxTouchPoints||"ontouchstart"in this}function B_(){var e,t,n,r,o=I_,i=M_,a=D_,s=L_,l={},c=lx("start","drag","end"),u=0,d=0;function f(e){e.on("mousedown.drag",h).filter(s).on("touchstart.drag",m).on("touchmove.drag",v,j_).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,s){if(!r&&o.call(this,a,s)){var l=b(this,i.call(this,a,s),a,s,"mouse");l&&(S_(a.view).on("mousemove.drag",p,C_).on("mouseup.drag",g,C_),O_(a.view),N_(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function p(r){if(A_(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}l.mouse("drag",r)}function g(e){S_(e.view).on("mousemove.drag mouseup.drag",null),R_(e.view,n),A_(e),l.mouse("end",e)}function m(e,t){if(o.call(this,e,t)){var n,r,a=e.changedTouches,s=i.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=b(this,s,e,t,a[n].identifier,a[n]))&&(N_(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(A_(e),n("drag",e,r[t]))}function y(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(n=l[o[t].identifier])&&(N_(e),n("end",e,o[t]))}function b(e,t,n,r,o,i){var s,d,h,p=c.copy(),g=E_(i||n,t);if(null!=(h=a.call(e,new T_("beforestart",{sourceEvent:n,target:f,identifier:o,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return s=h.x-g[0]||0,d=h.y-g[1]||0,function n(i,a,c){var m,v=g;switch(i){case"start":l[o]=n,m=u++;break;case"end":delete l[o],--u;case"drag":g=E_(c||a,t),m=u}p.call(i,e,new T_(i,{sourceEvent:a,subject:h,target:f,identifier:o,active:m,x:g[0]+s,y:g[1]+d,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:P_(!!e),f):o},f.container=function(e){return arguments.length?(i="function"==typeof e?e:P_(e),f):i},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:P_(e),f):a},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:P_(!!e),f):s},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function F_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function z_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $_(){}T_.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var U_=.7,W_=1/U_,H_="\\s*([+-]?\\d+)\\s*",V_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",q_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K_=/^#([0-9a-f]{3,8})$/,Z_=new RegExp(`^rgb\\(${H_},${H_},${H_}\\)$`),Y_=new RegExp(`^rgb\\(${q_},${q_},${q_}\\)$`),G_=new RegExp(`^rgba\\(${H_},${H_},${H_},${V_}\\)$`),X_=new RegExp(`^rgba\\(${q_},${q_},${q_},${V_}\\)$`),J_=new RegExp(`^hsl\\(${V_},${q_},${q_}\\)$`),Q_=new RegExp(`^hsla\\(${V_},${q_},${q_},${V_}\\)$`),ek={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function tk(){return this.rgb().formatHex()}function nk(){return this.rgb().formatRgb()}function rk(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=K_.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ok(t):3===n?new sk(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ik(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ik(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Z_.exec(e))?new sk(t[1],t[2],t[3],1):(t=Y_.exec(e))?new sk(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=G_.exec(e))?ik(t[1],t[2],t[3],t[4]):(t=X_.exec(e))?ik(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=J_.exec(e))?hk(t[1],t[2]/100,t[3]/100,1):(t=Q_.exec(e))?hk(t[1],t[2]/100,t[3]/100,t[4]):ek.hasOwnProperty(e)?ok(ek[e]):"transparent"===e?new sk(NaN,NaN,NaN,0):null}function ok(e){return new sk(e>>16&255,e>>8&255,255&e,1)}function ik(e,t,n,r){return r<=0&&(e=t=n=NaN),new sk(e,t,n,r)}function ak(e,t,n,r){return 1===arguments.length?function(e){return e instanceof $_||(e=rk(e)),e?new sk((e=e.rgb()).r,e.g,e.b,e.opacity):new sk}(e):new sk(e,t,n,null==r?1:r)}function sk(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function lk(){return`#${fk(this.r)}${fk(this.g)}${fk(this.b)}`}function ck(){const e=uk(this.opacity);return`${1===e?"rgb(":"rgba("}${dk(this.r)}, ${dk(this.g)}, ${dk(this.b)}${1===e?")":`, ${e})`}`}function uk(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dk(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fk(e){return((e=dk(e))<16?"0":"")+e.toString(16)}function hk(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gk(e,t,n,r)}function pk(e){if(e instanceof gk)return new gk(e.h,e.s,e.l,e.opacity);if(e instanceof $_||(e=rk(e)),!e)return new gk;if(e instanceof gk)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new gk(a,s,l,e.opacity)}function gk(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function mk(e){return(e=(e||0)%360)<0?e+360:e}function vk(e){return Math.max(0,Math.min(1,e||0))}function yk(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}F_($_,rk,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tk,formatHex:tk,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return pk(this).formatHsl()},formatRgb:nk,toString:nk}),F_(sk,ak,z_($_,{brighter(e){return e=null==e?W_:Math.pow(W_,e),new sk(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?U_:Math.pow(U_,e),new sk(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sk(dk(this.r),dk(this.g),dk(this.b),uk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lk,formatHex:lk,formatHex8:function(){return`#${fk(this.r)}${fk(this.g)}${fk(this.b)}${fk(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ck,toString:ck})),F_(gk,(function(e,t,n,r){return 1===arguments.length?pk(e):new gk(e,t,n,null==r?1:r)}),z_($_,{brighter(e){return e=null==e?W_:Math.pow(W_,e),new gk(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?U_:Math.pow(U_,e),new gk(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new sk(yk(e>=240?e-240:e+120,o,r),yk(e,o,r),yk(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new gk(mk(this.h),vk(this.s),vk(this.l),uk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uk(this.opacity);return`${1===e?"hsl(":"hsla("}${mk(this.h)}, ${100*vk(this.s)}%, ${100*vk(this.l)}%${1===e?")":`, ${e})`}`}}));const bk=e=>()=>e;function wk(e){return 1==(e=+e)?xk:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):bk(isNaN(t)?n:t)}}function xk(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):bk(isNaN(e)?t:e)}const _k=function e(t){var n=wk(t);function r(e,t){var r=n((e=ak(e)).r,(t=ak(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=xk(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function kk(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Sk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ek=new RegExp(Sk.source,"g");function jk(e,t){var n,r,o,i=Sk.lastIndex=Ek.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Sk.exec(e))&&(r=Ek.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:kk(n,r)})),i=Ek.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}var Ck,Nk=180/Math.PI,Ak={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ok(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Nk,skewX:Math.atan(l)*Nk,scaleX:a,scaleY:s}}function Rk(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,r,o,i,a,s){if(e!==o||r!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:kk(e,o)},{i:l-2,x:kk(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:kk(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:kk(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,s,l),function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:kk(e,n)},{i:s-2,x:kk(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var Pk=Rk((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ak:Ok(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Tk=Rk((function(e){return null==e?Ak:(Ck||(Ck=document.createElementNS("http://www.w3.org/2000/svg","g")),Ck.setAttribute("transform",e),(e=Ck.transform.baseVal.consolidate())?Ok((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ak)}),", ",")",")");function Ik(e){return((e=Math.exp(e))+1/e)/2}const Mk=function e(t,n,r){function o(e,o){var i,a,s=e[0],l=e[1],c=e[2],u=o[0],d=o[1],f=o[2],h=u-s,p=d-l,g=h*h+p*p;if(g<1e-12)a=Math.log(f/c)/t,i=function(e){return[s+e*h,l+e*p,c*Math.exp(t*e*a)]};else{var m=Math.sqrt(g),v=(f*f-c*c+r*g)/(2*c*n*m),y=(f*f-c*c-r*g)/(2*f*n*m),b=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(y*y+1)-y);a=(w-b)/t,i=function(e){var r=e*a,o=Ik(b),i=c/(n*m)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+i*h,l+i*p,c*o/Ik(t*r+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var Dk,Lk,Bk=0,Fk=0,zk=0,$k=0,Uk=0,Wk=0,Hk="object"==typeof performance&&performance.now?performance:Date,Vk="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qk(){return Uk||(Vk(Kk),Uk=Hk.now()+Wk)}function Kk(){Uk=0}function Zk(){this._call=this._time=this._next=null}function Yk(e,t,n){var r=new Zk;return r.restart(e,t,n),r}function Gk(){Uk=($k=Hk.now())+Wk,Bk=Fk=0;try{!function(){qk(),++Bk;for(var e,t=Dk;t;)(e=Uk-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Bk}()}finally{Bk=0,function(){var e,t,n=Dk,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Dk=t);Lk=e,Jk(r)}(),Uk=0}}function Xk(){var e=Hk.now(),t=e-$k;t>1e3&&(Wk-=t,$k=e)}function Jk(e){Bk||(Fk&&(Fk=clearTimeout(Fk)),e-Uk>24?(e<1/0&&(Fk=setTimeout(Gk,e-Hk.now()-Wk)),zk&&(zk=clearInterval(zk))):(zk||($k=Hk.now(),zk=setInterval(Xk,1e3)),Bk=1,Vk(Gk)))}function Qk(e,t,n){var r=new Zk;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}Zk.prototype=Yk.prototype={constructor:Zk,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?qk():+n)+(null==t?0:+t),this._next||Lk===this||(Lk?Lk._next=this:Dk=this,Lk=this),this._call=e,this._time=n,Jk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jk())}};var eS=lx("start","end","cancel","interrupt"),tS=[];function nS(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var c,u,d,f;if(1!==n.state)return l();for(c in o)if((f=o[c]).name===n.name){if(3===f.state)return Qk(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(Qk((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=Yk(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:eS,tween:tS,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function rS(e,t){var n=iS(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function oS(e,t){var n=iS(e,t);if(n.state>3)throw new Error("too late; already running");return n}function iS(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function aS(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}function sS(e,t){var n,r;return function(){var o=oS(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function lS(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=oS(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=s;break}l===c&&o.push(s)}i.tween=o}}function cS(e,t,n){var r=e._id;return e.each((function(){var e=oS(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return iS(e,r).value[t]}}function uS(e,t){var n;return("number"==typeof t?kk:t instanceof rk?_k:(n=rk(t))?(t=n,_k):jk)(e,t)}function dS(e){return function(){this.removeAttribute(e)}}function fS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hS(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function pS(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function gS(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttribute(e)}}function mS(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function vS(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function yS(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function bS(e,t){return function(){rS(this,e).delay=+t.apply(this,arguments)}}function wS(e,t){return t=+t,function(){rS(this,e).delay=t}}function xS(e,t){return function(){oS(this,e).duration=+t.apply(this,arguments)}}function _S(e,t){return t=+t,function(){oS(this,e).duration=t}}var kS=k_.prototype.constructor;function SS(e){return function(){this.style.removeProperty(e)}}var ES=0;function jS(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function CS(){return++ES}var NS=k_.prototype;jS.prototype={constructor:jS,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=bx(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,l,c=r[a],u=c.length,d=i[a]=new Array(u),f=0;f<u;++f)(s=c[f])&&(l=e.call(s,s.__data__,f,c))&&("__data__"in s&&(l.__data__=s.__data__),d[f]=l,nS(d[f],t,n,f,d,iS(s,n)));return new jS(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=xx(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,c=r[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var f,h=e.call(l,l.__data__,d,c),p=iS(l,n),g=0,m=h.length;g<m;++g)(f=h[g])&&nS(f,t,n,g,h,p);i.push(h),a.push(l)}return new jS(i,a,t,n)},selectChild:NS.selectChild,selectChildren:NS.selectChildren,filter:function(e){"function"!=typeof e&&(e=kx(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new jS(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=t[s],u=n[s],d=c.length,f=a[s]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(f[h]=l);for(;s<r;++s)a[s]=t[s];return new jS(a,this._parents,this._name,this._id)},selection:function(){return new kS(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=CS(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=iS(a,t);nS(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new jS(r,this._parents,e,n)},call:NS.call,nodes:NS.nodes,node:NS.node,size:NS.size,empty:NS.empty,each:NS.each,on:function(e,t){var n=this._id;return arguments.length<2?iS(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?rS:oS;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=px(e),r="transform"===n?Tk:uS;return this.attrTween(e,"function"==typeof t?(n.local?mS:gS)(n,r,cS(this,"attr."+e,t)):null==t?(n.local?fS:dS)(n):(n.local?pS:hS)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=px(e);return this.tween(n,(r.local?vS:yS)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Pk:uS;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=qx(this,e),a=(this.style.removeProperty(e),qx(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,SS(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var a=qx(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=qx(this,e)),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}(e,r,cS(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var l=oS(this,e),c=l.on,u=null==l.value[a]?i||(i=SS(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(s,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var a=qx(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(cS(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=iS(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?sS:lS)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?bS:wS)(t,e)):iS(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?xS:_S)(t,e)):iS(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){oS(this,e).ease=t}}(t,e)):iS(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;oS(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,a){var s={value:a},l={value:function(){0==--o&&i()}};n.each((function(){var n=oS(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:NS[Symbol.iterator]};var AS={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function OS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}k_.prototype.interrupt=function(e){return this.each((function(){aS(this,e)}))},k_.prototype.transition=function(e){var t,n;e instanceof jS?(t=e._id,e=e._name):(t=CS(),(n=AS).time=qk(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)(a=s[c])&&nS(a,e,t,c,s,n||OS(a,t));return new jS(r,this._parents,e,t)};const RS=e=>()=>e;function PS(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function TS(e,t,n){this.k=e,this.x=t,this.y=n}TS.prototype={constructor:TS,scale:function(e){return 1===e?this:new TS(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new TS(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var IS=new TS(1,0,0);function MS(e){for(;!e.__zoom;)if(!(e=e.parentNode))return IS;return e.__zoom}function DS(e){e.stopImmediatePropagation()}function LS(e){e.preventDefault(),e.stopImmediatePropagation()}function BS(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function FS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function zS(){return this.__zoom||IS}function $S(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function US(){return navigator.maxTouchPoints||"ontouchstart"in this}function WS(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function HS(){var e,t,n,r=BS,o=FS,i=WS,a=$S,s=US,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Mk,f=lx("start","zoom","end"),h=0,p=10;function g(e){e.property("__zoom",zS).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",E).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new TS(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new TS(e.k,r,o)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",(function(){w(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,a=w(e,i).event(r),s=o.apply(e,i),l=null==n?y(s):"function"==typeof n?n.apply(e,i):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,f="function"==typeof t?t.apply(e,i):t,h=d(u.invert(l).concat(c/u.k),f.invert(l).concat(c/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=c/t[2];e=new TS(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function w(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function _(e,...t){if(r.apply(this,arguments)){var n=w(this,t).event(e),o=this.__zoom,s=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,a.apply(this,arguments)))),u=E_(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=o.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(o.k===s)return;n.mouse=[u,o.invert(u)],aS(this),n.start()}LS(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",i(v(m(o,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function k(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,a=w(this,t,!0).event(e),s=S_(e.view).on("mousemove.zoom",(function(e){if(LS(e),!a.moved){var t=e.clientX-u,n=e.clientY-d;a.moved=t*t+n*n>h}a.event(e).zoom("mouse",i(v(a.that.__zoom,a.mouse[0]=E_(e,o),a.mouse[1]),a.extent,c))}),!0).on("mouseup.zoom",(function(e){s.on("mousemove.zoom mouseup.zoom",null),R_(e.view,a.moved),LS(e),a.event(e).end()}),!0),l=E_(e,o),u=e.clientX,d=e.clientY;O_(e.view),DS(e),a.mouse=[l,this.__zoom.invert(l)],aS(this),a.start()}}function S(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,a=E_(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),d=i(v(m(n,l),a,s),o.apply(this,t),c);LS(e),u>0?S_(this).transition().duration(u).call(b,d,a,e):S_(this).call(g.transform,d,a,e)}}function E(n,...o){if(r.apply(this,arguments)){var i,a,s,l,c=n.touches,u=c.length,d=w(this,o,n.changedTouches.length===u).event(n);for(DS(n),a=0;a<u;++a)l=[l=E_(s=c[a],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),500)),aS(this),d.start())}}function j(e,...t){if(this.__zooming){var n,r,o,a,s=w(this,t).event(e),l=e.changedTouches,u=l.length;for(LS(e),n=0;n<u;++n)o=E_(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=o:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=o);if(r=s.that.__zoom,s.touch1){var d=s.touch0[0],f=s.touch0[1],h=s.touch1[0],p=s.touch1[1],g=(g=h[0]-d[0])*g+(g=h[1]-d[1])*g,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;r=m(r,Math.sqrt(g/y)),o=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;o=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(v(r,o,a),s.extent,c))}}function C(e,...r){if(this.__zooming){var o,i,a=w(this,r).event(e),s=e.changedTouches,l=s.length;for(DS(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),o=0;o<l;++o)i=s[o],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=E_(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<p)){var c=S_(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",zS),e!==o?b(e,t,n,r):o.interrupt().each((function(){w(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return i(v(m(r,l),a,s),e,c)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)}),null,r)},g.translateTo=function(e,t,n,r,a){g.transform(e,(function(){var e=o.apply(this,arguments),a=this.__zoom,s=null==r?y(e):"function"==typeof r?r.apply(this,arguments):r;return i(IS.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),r,a)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=S_(this.that).datum();f.call(e,this.that,new PS(e,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:f}),t)}},g.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:RS(+e),g):a},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:RS(!!e),g):r},g.touchable=function(e){return arguments.length?(s="function"==typeof e?e:RS(!!e),g):s},g.extent=function(e){return arguments.length?(o="function"==typeof e?e:RS([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=f.on.apply(f,arguments);return e===f?g:e},g.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,g):Math.sqrt(h)},g.tapDistance=function(e){return arguments.length?(p=+e,g):p},g}MS.prototype=TS.prototype;const VS=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",qS=e=>`Node type "${e}" not found. Using fallback type "default".`,KS=()=>"The React Flow parent container needs a width and a height to render the graph.",ZS=()=>"Only child nodes can use a parent extent.",YS=e=>`Marker type "${e}" doesn't exist.`,GS=(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,XS=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",JS=e=>`Edge type "${e}" not found. Using fallback type "default".`,QS=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,eE=()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",tE=()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.",nE=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],rE=["Enter"," ","Escape"];var oE,iE,aE,sE,lE,cE;(iE=oE||(oE={})).Strict="strict",iE.Loose="loose",(sE=aE||(aE={})).Free="free",sE.Vertical="vertical",sE.Horizontal="horizontal",(cE=lE||(lE={})).Partial="partial",cE.Full="full";const uE={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var dE,fE,hE,pE,gE,mE;(fE=dE||(dE={})).Bezier="default",fE.Straight="straight",fE.Step="step",fE.SmoothStep="smoothstep",fE.SimpleBezier="simplebezier",(pE=hE||(hE={})).Arrow="arrow",pE.ArrowClosed="arrowclosed",(mE=gE||(gE={})).Left="left",mE.Top="top",mE.Right="right",mE.Bottom="bottom";const vE={[gE.Left]:gE.Right,[gE.Right]:gE.Left,[gE.Top]:gE.Bottom,[gE.Bottom]:gE.Top};function yE(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function bE(e,t,n){if(!n)return;const r=[];e.forEach(((e,n)=>{null!=t&&t.has(n)||r.push(e)})),r.length&&n(r)}function wE(e){return null===e?null:e?"valid":"invalid"}const xE=e=>"id"in e&&"source"in e&&"target"in e,_E=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),kE=(e,t=[0,0])=>{var n;const{width:r,height:o}=XE(e),i=null!==(n=e.origin)&&void 0!==n?n:t,a=r*i[0],s=o*i[1];return{x:e.position.x-a,y:e.position.y-s}},SE=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=BE(e);n=IE(n,t)}})),DE(n)},EE=(e,t,[n,r,o]=[0,0,1],i=!1,a=!1)=>{const s={...VE(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(const g of e.values()){var c,u,d,f,h,p;const{measured:e,selectable:t=!0,hidden:n=!1}=g;if(a&&!t||n)continue;const r=null!==(c=null!==(u=null!==(d=e.width)&&void 0!==d?d:g.width)&&void 0!==u?u:g.initialWidth)&&void 0!==c?c:null,o=null!==(f=null!==(h=null!==(p=e.height)&&void 0!==p?p:g.height)&&void 0!==h?h:g.initialHeight)&&void 0!==f?f:null,m=zE(s,LE(g)),v=(null!=r?r:0)*(null!=o?o:0),y=i&&m>0;(!g.internals.handleBounds||y||m>=v||g.dragging)&&l.push(g)}return l};async function jE({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},a){var s,l,c;if(0===e.size)return Promise.resolve(!0);const u=function(e,t){const n=new Map,r=null!=t&&t.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!e.measured.width||!e.measured.height||!(null==t?void 0:t.includeHiddenNodes)&&e.hidden||r&&!r.has(e.id)||n.set(e.id,e)})),n}(e,a),d=SE(u),f=ZE(d,t,n,null!==(s=null==a?void 0:a.minZoom)&&void 0!==s?s:o,null!==(l=null==a?void 0:a.maxZoom)&&void 0!==l?l:i,null!==(c=null==a?void 0:a.padding)&&void 0!==c?c:.1);return await r.setViewport(f,{duration:null==a?void 0:a.duration}),Promise.resolve(!0)}function CE({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){var a,s,l;const c=n.get(e),u=c.parentId?n.get(c.parentId):void 0,{x:d,y:f}=u?u.internals.positionAbsolute:{x:0,y:0},h=null!==(a=c.origin)&&void 0!==a?a:r;let p=o;if("parent"!==c.extent||c.expandParent)u&&GE(c.extent)&&(p=[[c.extent[0][0]+d,c.extent[0][1]+f],[c.extent[1][0]+d,c.extent[1][1]+f]]);else if(u){const e=u.measured.width,t=u.measured.height;e&&t&&(p=[[d,f],[d+e,f+t]])}else null==i||i("005",ZS());const g=GE(p)?OE(t,p,c.measured):t;return void 0!==c.measured.width&&void 0!==c.measured.height||null==i||i("015",tE()),{position:{x:g.x-d+(null!==(s=c.measured.width)&&void 0!==s?s:0)*h[0],y:g.y-f+(null!==(l=c.measured.height)&&void 0!==l?l:0)*h[1]},positionAbsolute:g}}async function NE({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map((e=>e.id))),a=[];for(const f of n){if(!1===f.deletable)continue;const e=i.has(f.id),t=!e&&f.parentId&&a.find((e=>e.id===f.parentId));(e||t)&&a.push(f)}const s=new Set(t.map((e=>e.id))),l=r.filter((e=>!1!==e.deletable)),c=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(a,l),u=c;for(const f of l){s.has(f.id)&&!u.find((e=>e.id===f.id))&&u.push(f)}if(!o)return{edges:u,nodes:a};const d=await o({nodes:a,edges:u});return"boolean"==typeof d?d?{edges:u,nodes:a}:{edges:[],nodes:[]}:d}const AE=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),OE=(e={x:0,y:0},t,n)=>{var r,o;return{x:AE(e.x,t[0][0],t[1][0]-(null!==(r=null==n?void 0:n.width)&&void 0!==r?r:0)),y:AE(e.y,t[0][1],t[1][1]-(null!==(o=null==n?void 0:n.height)&&void 0!==o?o:0))}};function RE(e,t,n){const{width:r,height:o}=XE(n),{x:i,y:a}=n.internals.positionAbsolute;return OE(e,[[i,a],[i+r,a+o]],t)}const PE=(e,t,n)=>e<t?AE(Math.abs(e-t),1,t)/t:e>n?-AE(Math.abs(e-n),1,t)/t:0,TE=(e,t,n=15,r=40)=>[PE(e.x,r,t.width-r)*n,PE(e.y,r,t.height-r)*n],IE=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ME=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),DE=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),LE=(e,t=[0,0])=>{var n,r,o,i,a,s,l,c;const{x:u,y:d}=_E(e)?e.internals.positionAbsolute:kE(e,t);return{x:u,y:d,width:null!==(n=null!==(r=null!==(o=null===(i=e.measured)||void 0===i?void 0:i.width)&&void 0!==o?o:e.width)&&void 0!==r?r:e.initialWidth)&&void 0!==n?n:0,height:null!==(a=null!==(s=null!==(l=null===(c=e.measured)||void 0===c?void 0:c.height)&&void 0!==l?l:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==a?a:0}},BE=(e,t=[0,0])=>{var n,r,o,i,a,s,l,c;const{x:u,y:d}=_E(e)?e.internals.positionAbsolute:kE(e,t);return{x:u,y:d,x2:u+(null!==(n=null!==(r=null!==(o=null===(i=e.measured)||void 0===i?void 0:i.width)&&void 0!==o?o:e.width)&&void 0!==r?r:e.initialWidth)&&void 0!==n?n:0),y2:d+(null!==(a=null!==(s=null!==(l=null===(c=e.measured)||void 0===c?void 0:c.height)&&void 0!==l?l:e.height)&&void 0!==s?s:e.initialHeight)&&void 0!==a?a:0)}},FE=(e,t)=>DE(IE(ME(e),ME(t))),zE=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},$E=e=>UE(e.width)&&UE(e.height)&&UE(e.x)&&UE(e.y),UE=e=>!isNaN(e)&&isFinite(e),WE=(e,t)=>{},HE=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),VE=({x:e,y:t},[n,r,o],i=!1,a=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return i?HE(s,a):s},qE=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function KE(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const ZE=(e,t,n,r,o,i)=>{const a=function(e,t,n){if("string"==typeof e||"number"==typeof e){const r=KE(e,n),o=KE(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){var r,o,i,a,s,l,c,u;const d=KE(null!==(r=null!==(o=e.top)&&void 0!==o?o:e.y)&&void 0!==r?r:0,n),f=KE(null!==(i=null!==(a=e.bottom)&&void 0!==a?a:e.y)&&void 0!==i?i:0,n),h=KE(null!==(s=null!==(l=e.left)&&void 0!==l?l:e.x)&&void 0!==s?s:0,t),p=KE(null!==(c=null!==(u=e.right)&&void 0!==u?u:e.x)&&void 0!==c?c:0,t);return{top:d,right:p,bottom:f,left:h,x:h+p,y:d+f}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=(t-a.x)/e.width,l=(n-a.y)/e.height,c=Math.min(s,l),u=AE(c,r,o),d=t/2-(e.x+e.width/2)*u,f=n/2-(e.y+e.height/2)*u,h=function(e,t,n,r,o,i){const{x:a,y:s}=qE(e,[t,n,r]),{x:l,y:c}=qE({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=o-l,d=i-c;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(u),bottom:Math.floor(d)}}(e,d,f,u,t,n),p=Math.min(h.left-a.left,0),g=Math.min(h.top-a.top,0);return{x:d-p+Math.min(h.right-a.right,0),y:f-g+Math.min(h.bottom-a.bottom,0),zoom:u}},YE=()=>{var e;return"undefined"!=typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0};function GE(e){return void 0!==e&&"parent"!==e}function XE(e){var t,n,r,o,i,a,s,l;return{width:null!==(t=null!==(n=null!==(r=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(i=null!==(a=null!==(s=null===(l=e.measured)||void 0===l?void 0:l.height)&&void 0!==s?s:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0}}function JE(e){var t,n,r,o,i,a;return void 0!==(null!==(t=null!==(n=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==(null!==(o=null!==(i=null===(a=e.measured)||void 0===a?void 0:a.height)&&void 0!==i?i:e.height)&&void 0!==o?o:e.initialHeight)}function QE(e,t={width:0,height:0},n,r,o){const i={...e},a=r.get(n);if(a){var s,l;const e=a.origin||o;i.x+=a.internals.positionAbsolute.x-(null!==(s=t.width)&&void 0!==s?s:0)*e[0],i.y+=a.internals.positionAbsolute.y-(null!==(l=t.height)&&void 0!==l?l:0)*e[1]}return i}function ej(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function tj(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){var i,a;const{x:s,y:l}=sj(e),c=VE({x:s-(null!==(i=null==o?void 0:o.left)&&void 0!==i?i:0),y:l-(null!==(a=null==o?void 0:o.top)&&void 0!==a?a:0)},r),{x:u,y:d}=n?HE(c,t):c;return{xSnapped:u,ySnapped:d,...c}}const nj=e=>({width:e.offsetWidth,height:e.offsetHeight}),rj=e=>{var t,n;return(null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},oj=["INPUT","SELECT","TEXTAREA"];function ij(e){var t;const n=(null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target;if(1!==(null==n?void 0:n.nodeType))return!1;return oj.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const aj=e=>"clientX"in e,sj=(e,t)=>{var n,r,o,i;const a=aj(e),s=a?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,l=a?e.clientY:null===(r=e.touches)||void 0===r?void 0:r[0].clientY;return{x:s-(null!==(o=null==t?void 0:t.left)&&void 0!==o?o:0),y:l-(null!==(i=null==t?void 0:t.top)&&void 0!==i?i:0)}},lj=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...nj(t)}})):null};function cj({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=.125*e+.375*o+.375*a+.125*n,c=.125*t+.375*i+.375*s+.125*r;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function uj(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function dj({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case gE.Left:return[t-uj(t-r,i),n];case gE.Right:return[t+uj(r-t,i),n];case gE.Top:return[t,n-uj(n-o,i)];case gE.Bottom:return[t,n+uj(o-n,i)]}}function fj({sourceX:e,sourceY:t,sourcePosition:n=gE.Bottom,targetX:r,targetY:o,targetPosition:i=gE.Top,curvature:a=.25}){const[s,l]=dj({pos:n,x1:e,y1:t,x2:r,y2:o,c:a}),[c,u]=dj({pos:i,x1:r,y1:o,x2:e,y2:t,c:a}),[d,f,h,p]=cj({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${r},${o}`,d,f,h,p]}function hj({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,a=Math.abs(r-t)/2;return[i,r<t?r+a:r-a,o,a]}function pj({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=IE(BE(e),BE(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return zE(a,DE(i))>0}const gj=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,mj=(e,t)=>{if(!e.source||!e.target)return t;let n;return n=xE(e)?{...e}:{...e,id:gj(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function vj({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,a,s]=hj({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,a,s]}const yj={[gE.Left]:{x:-1,y:0},[gE.Right]:{x:1,y:0},[gE.Top]:{x:0,y:-1},[gE.Bottom]:{x:0,y:1}},bj=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function wj({source:e,sourcePosition:t=gE.Bottom,target:n,targetPosition:r=gE.Top,center:o,offset:i}){const a=yj[t],s=yj[r],l={x:e.x+a.x*i,y:e.y+a.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},u=(({source:e,sourcePosition:t=gE.Bottom,target:n})=>t===gE.Left||t===gE.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:t,target:c}),d=0!==u.x?"x":"y",f=u[d];let h,p,g=[];const m={x:0,y:0},v={x:0,y:0},[y,b,w,x]=hj({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]==-1){var _,k;h=null!==(_=o.x)&&void 0!==_?_:y,p=null!==(k=o.y)&&void 0!==k?k:b;const e=[{x:h,y:l.y},{x:h,y:c.y}],t=[{x:l.x,y:p},{x:c.x,y:p}];g=a[d]===f?"x"===d?e:t:"x"===d?t:e}else{const o=[{x:l.x,y:c.y}],u=[{x:c.x,y:l.y}];if(g="x"===d?a.x===f?u:o:a.y===f?o:u,t===r){const t=Math.abs(e[d]-n[d]);if(t<=i){const r=Math.min(i-1,i-t);a[d]===f?m[d]=(l[d]>e[d]?-1:1)*r:v[d]=(c[d]>n[d]?-1:1)*r}}if(t!==r){const e="x"===d?"y":"x",t=a[d]===s[e],n=l[e]>c[e],r=l[e]<c[e];(1===a[d]&&(!t&&n||t&&r)||1!==a[d]&&(!t&&r||t&&n))&&(g="x"===d?o:u)}const y={x:l.x+m.x,y:l.y+m.y},b={x:c.x+v.x,y:c.y+v.y};Math.max(Math.abs(y.x-g[0].x),Math.abs(b.x-g[0].x))>=Math.max(Math.abs(y.y-g[0].y),Math.abs(b.y-g[0].y))?(h=(y.x+b.x)/2,p=g[0].y):(h=g[0].x,p=(y.y+b.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...g,{x:c.x+v.x,y:c.y+v.y},n],h,p,w,x]}function xj({sourceX:e,sourceY:t,sourcePosition:n=gE.Bottom,targetX:r,targetY:o,targetPosition:i=gE.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[u,d,f,h,p]=wj({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:s,y:l},offset:c}),g=u.reduce(((e,t,n)=>{let r="";return r=n>0&&n<u.length-1?function(e,t,n,r){const o=Math.min(bj(e,t)/2,bj(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+o*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+o*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${i},${a+o*(e.y<n.y?-1:1)}Q ${i},${a} ${i+o*s},${a}`}(u[n-1],t,u[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=r}),"");return[g,d,f,h,p]}function _j(e){var t;return e&&!!(e.internals.handleBounds||null!==(t=e.handles)&&void 0!==t&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function kj(e){if(!e)return null;const t=[],n=[];for(const i of e){var r,o;i.width=null!==(r=i.width)&&void 0!==r?r:1,i.height=null!==(o=i.height)&&void 0!==o?o:1,"source"===i.type?t.push(i):"target"===i.type&&n.push(i)}return{source:t,target:n}}function Sj(e,t,n=gE.Left,r=!1){var o,i,a;const s=(null!==(o=null==t?void 0:t.x)&&void 0!==o?o:0)+e.internals.positionAbsolute.x,l=(null!==(i=null==t?void 0:t.y)&&void 0!==i?i:0)+e.internals.positionAbsolute.y,{width:c,height:u}=null!=t?t:XE(e);if(r)return{x:s+c/2,y:l+u/2};switch(null!==(a=null==t?void 0:t.position)&&void 0!==a?a:n){case gE.Top:return{x:s+c/2,y:l};case gE.Right:return{x:s+c,y:l+u/2};case gE.Bottom:return{x:s+c/2,y:l+u};case gE.Left:return{x:s,y:l+u/2}}}function Ej(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function jj(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}const Cj={nodeOrigin:[0,0],nodeExtent:nE,elevateNodesOnSelect:!0,defaults:{}},Nj={...Cj,checkEquality:!0};function Aj(e,t){const n={...e};for(const r in t)void 0!==t[r]&&(n[r]=t[r]);return n}function Oj(e,t,n,r){const o=Aj(Nj,r);let i=e.length>0;const a=new Map(t),s=null!=o&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const f of e){var l;let e=a.get(f.id);if(o.checkEquality&&f===(null===(l=e)||void 0===l?void 0:l.internals.userNode))t.set(f.id,e);else{var c,u,d;const n=kE(f,o.nodeOrigin),r=GE(f.extent)?f.extent:o.nodeExtent,i=OE(n,r,XE(f));e={...o.defaults,...f,measured:{width:null===(c=f.measured)||void 0===c?void 0:c.width,height:null===(u=f.measured)||void 0===u?void 0:u.height},internals:{positionAbsolute:i,handleBounds:f.measured?null===(d=e)||void 0===d?void 0:d.internals.handleBounds:void 0,z:Pj(f,s),userNode:f}},t.set(f.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),f.parentId&&Rj(e,t,n,r)}return i}function Rj(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:a}=Aj(Cj,r),s=e.parentId,l=t.get(s);if(!l)return void console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const c=o?1e3:0,{x:u,y:d,z:f}=function(e,t,n,r,o){var i;const{x:a,y:s}=t.internals.positionAbsolute,l=XE(e),c=kE(e,n),u=GE(e.extent)?OE(c,e.extent,l):c;let d=OE({x:a+u.x,y:s+u.y},r,l);"parent"===e.extent&&(d=RE(d,l,t));const f=Pj(e,o),h=null!==(i=t.internals.z)&&void 0!==i?i:0;return{x:d.x,y:d.y,z:h>f?h:f}}(e,l,i,a,c),{positionAbsolute:h}=e.internals,p=u!==h.x||d!==h.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:u,y:d}:h,z:f}})}function Pj(e,t){return(UE(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Tj(e,t,n,r=[0,0]){const o=[],i=new Map;for(const l of e){var a,s;const e=t.get(l.parentId);if(!e)continue;const n=null!==(a=null===(s=i.get(l.parentId))||void 0===s?void 0:s.expandedRect)&&void 0!==a?a:LE(e),r=FE(n,l.rect);i.set(l.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach((({expandedRect:t,parent:i},a)=>{var s;const l=i.internals.positionAbsolute,c=XE(i),u=null!==(s=i.origin)&&void 0!==s?s:r,d=t.x<l.x?Math.round(Math.abs(l.x-t.x)):0,f=t.y<l.y?Math.round(Math.abs(l.y-t.y)):0,h=Math.max(c.width,Math.round(t.width)),p=Math.max(c.height,Math.round(t.height)),g=(h-c.width)*u[0],m=(p-c.height)*u[1];var v;(d>0||f>0||g||m)&&(o.push({id:a,type:"position",position:{x:i.position.x-d+g,y:i.position.y-f+m}}),null===(v=n.get(a))||void 0===v||v.forEach((t=>{e.some((e=>e.id===t.id))||o.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+f}})})));(c.width<t.width||c.height<t.height||d||f)&&o.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:h+(d?u[0]*d-g:0),height:p+(f?u[1]*f-m:0)}})})),o}function Ij(e,t,n,r,o,i){let a=o;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${o}-${e}`;const l=r.get(a)||new Map;if(r.set(a,l.set(n,t)),i){a=`${o}-${e}-${i}`;const s=r.get(a)||new Map;r.set(a,s.set(n,t))}}function Mj(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:o,sourceHandle:i=null,targetHandle:a=null}=r,s={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:a},l=`${n}-${i}--${o}-${a}`;Ij("source",s,`${o}-${a}--${n}-${i}`,e,n,i),Ij("target",s,l,e,o,a),t.set(r.id,r)}}function Dj(e,t){if(null===e||null===t)return!1;const n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].id!==r[o].id||n[o].type!==r[o].type||!Object.is(n[o].data,r[o].data))return!1;return!0}function Lj(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Lj(n,t))}function Bj(e,t,n){let r=e;do{var o,i,a;if(null!==(o=r)&&void 0!==o&&null!==(i=o.matches)&&void 0!==i&&i.call(o,t))return!0;if(r===n)return!1;r=null===(a=r)||void 0===a?void 0:a.parentElement}while(r);return!1}function Fj({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,i;const a=[];for(const[c,u]of t){var s;const e=null===(s=n.get(c))||void 0===s?void 0:s.internals.userNode;e&&a.push({...e,position:u.position,dragging:r})}if(!e)return[a[0],a];const l=null===(o=n.get(e))||void 0===o?void 0:o.internals.userNode;return[l?{...l,position:(null===(i=t.get(e))||void 0===i?void 0:i.position)||l.position,dragging:r}:a[0],a]}function zj({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},u=null,d=!1,f=null,h=!1;return{update:function({noDragClassName:p,handleSelector:g,domNode:m,isSelectable:v,nodeId:y,nodeClickDistance:b=0}){function w({x:e,y:n},o){const{nodeLookup:a,nodeExtent:l,snapGrid:c,snapToGrid:u,nodeOrigin:d,onNodeDrag:f,onSelectionDrag:h,onError:p,updateNodePositions:g}=t();i={x:e,y:n};let m=!1,v={x:0,y:0,x2:0,y2:0};if(s.size>1&&l){const e=SE(s);v=ME(e)}for(const[t,r]of s){if(!a.has(t))continue;let o={x:e-r.distance.x,y:n-r.distance.y};u&&(o=HE(o,c));let i=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(s.size>1&&l&&!r.extent){const{positionAbsolute:e}=r.internals,t=e.x-v.x+l[0][0],n=e.x+r.measured.width-v.x2+l[1][0];i=[[t,e.y-v.y+l[0][1]],[n,e.y+r.measured.height-v.y2+l[1][1]]]}const{position:f,positionAbsolute:h}=CE({nodeId:t,nextPosition:o,nodeLookup:a,nodeExtent:i,nodeOrigin:d,onError:p});m=m||r.position.x!==f.x||r.position.y!==f.y,r.position=f,r.internals.positionAbsolute=h}if(m&&(g(s,!0),o&&(r||f||!y&&h))){const[e,t]=Fj({nodeId:y,dragItems:s,nodeLookup:a});null==r||r(o,s,e,t),null==f||f(o,e,t),y||null==h||h(o,t)}}async function x(){if(!u)return;const{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o)return l=!1,void cancelAnimationFrame(a);const[s,d]=TE(c,u,r);var f,h;0===s&&0===d||(i.x=(null!==(f=i.x)&&void 0!==f?f:0)-s/e[2],i.y=(null!==(h=i.y)&&void 0!==h?h:0)-d/e[2],await n({x:s,y:d})&&w(i,null));a=requestAnimationFrame(x)}function _(r){const{nodeLookup:o,multiSelectionActive:a,nodesDraggable:l,transform:c,snapGrid:f,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:b}=t();var w;(d=!0,p&&v||a||!y)||(null!==(w=o.get(y))&&void 0!==w&&w.selected||b());v&&p&&y&&(null==e||e(y));const x=tj(r.sourceEvent,{transform:c,snapGrid:f,snapToGrid:h,containerBounds:u});if(i=x,s=function(e,t,n,r){const o=new Map;for(const[s,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!Lj(l,e))&&(l.draggable||t&&void 0===l.draggable)){const t=e.get(s);var i,a;t&&o.set(s,{id:s,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!==(i=t.measured.width)&&void 0!==i?i:0,height:null!==(a=t.measured.height)&&void 0!==a?a:0}})}return o}(o,l,x,y),s.size>0&&(n||g||!y&&m)){const[e,t]=Fj({nodeId:y,dragItems:s,nodeLookup:o});null==n||n(r.sourceEvent,s,e,t),null==g||g(r.sourceEvent,e,t),y||null==m||m(r.sourceEvent,t)}}f=S_(m);const k=B_().clickDistance(b).on("start",(e=>{const{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:a,snapToGrid:s}=t();u=(null==n?void 0:n.getBoundingClientRect())||null,h=!1,0===r&&_(e);const l=tj(e.sourceEvent,{transform:o,snapGrid:a,snapToGrid:s,containerBounds:u});i=l,c=sj(e.sourceEvent,u)})).on("drag",(e=>{const{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:a,nodeDragThreshold:f,nodeLookup:p}=t(),g=tj(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:a,containerBounds:u});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||y&&!p.has(y))&&(h=!0),!h){if(!l&&n&&d&&(l=!0,x()),!d){var m,v;const t=g.xSnapped-(null!==(m=i.x)&&void 0!==m?m:0),n=g.ySnapped-(null!==(v=i.y)&&void 0!==v?v:0);Math.sqrt(t*t+n*n)>f&&_(e)}(i.x!==g.xSnapped||i.y!==g.ySnapped)&&s&&d&&(c=sj(e.sourceEvent,u),w(g,e.sourceEvent))}})).on("end",(e=>{if(d&&!h&&(l=!1,d=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:n,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:a}=t();if(r(s,!1),o||i||!y&&a){const[t,r]=Fj({nodeId:y,dragItems:s,nodeLookup:n,dragging:!1});null==o||o(e.sourceEvent,s,t,r),null==i||i(e.sourceEvent,t,r),y||null==a||a(e.sourceEvent,r)}}})).filter((e=>{const t=e.target;return!e.button&&(!p||!Bj(t,`.${p}`,m))&&(!g||Bj(t,g,m))}));f.call(k)},destroy:function(){var e;null===(e=f)||void 0===e||e.on(".drag",null)}}}function $j(e,t,n,r){let o=[],i=1/0;const a=function(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())zE(o,LE(i))>0&&r.push(i);return r}(e,n,t+250);for(const f of a){var s,l,c,u;const n=[...null!==(s=null===(l=f.internals.handleBounds)||void 0===l?void 0:l.source)&&void 0!==s?s:[],...null!==(c=null===(u=f.internals.handleBounds)||void 0===u?void 0:u.target)&&void 0!==c?c:[]];for(const a of n){if(r.nodeId===a.nodeId&&r.type===a.type&&r.id===a.id)continue;const{x:n,y:s}=Sj(f,a,a.position,!0),l=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(s-e.y,2));l>t||(l<i?(o=[{...a,x:n,y:s}],i=l):l===i&&o.push({...a,x:n,y:s}))}}if(!o.length)return null;if(o.length>1){var d;const e="source"===r.type?"target":"source";return null!==(d=o.find((t=>t.type===e)))&&void 0!==d?d:o[0]}return o[0]}function Uj(e,t,n,r,o,i=!1){var a,s,l,c,u,d;const f=r.get(e);if(!f)return null;const h="strict"===o?null===(a=f.internals.handleBounds)||void 0===a?void 0:a[t]:[...null!==(s=null===(l=f.internals.handleBounds)||void 0===l?void 0:l.source)&&void 0!==s?s:[],...null!==(c=null===(u=f.internals.handleBounds)||void 0===u?void 0:u.target)&&void 0!==c?c:[]],p=null!==(d=n?null==h?void 0:h.find((e=>e.id===n)):null==h?void 0:h[0])&&void 0!==d?d:null;return p&&i?{...p,...Sj(f,p,p.position,!0)}:p}function Wj(e,t){return e||(null!=t&&t.classList.contains("target")?"target":null!=t&&t.classList.contains("source")?"source":null)}const Hj=()=>!0;function Vj(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:c=Hj,nodeLookup:u}){const d="target"===i,f=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:h,y:p}=sj(e),g=a.elementFromPoint(h,p),m=null!=g&&g.classList.contains(`${s}-flow__handle`)?g:f,v={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const e=Wj(void 0,m),t=m.getAttribute("data-nodeid"),i=m.getAttribute("data-handleid"),a=m.classList.contains("connectable"),s=m.classList.contains("connectableend");if(!t||!e)return v;const l={source:d?t:r,sourceHandle:d?i:o,target:d?r:t,targetHandle:d?o:i};v.connection=l;const f=a&&s&&(n===oE.Strict?d&&"source"===e||!d&&"target"===e:t!==r||i!==o);v.isValid=f&&c(l),v.toHandle=Uj(t,e,i,u,n,!1)}return v}const qj={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:g,onConnectEnd:m,isValidConnection:v=Hj,onReconnectEnd:y,updateConnection:b,getTransform:w,getFromHandle:x,autoPanSpeed:_}){const k=rj(e.target);let S,E=0;const{x:j,y:C}=sj(e),N=null==k?void 0:k.elementFromPoint(j,C),A=Wj(i,N),O=null==s?void 0:s.getBoundingClientRect();if(!O||!A)return;const R=Uj(o,A,r,l,t);if(!R)return;let P=sj(e,O),T=!1,I=null,M=!1,D=null;function L(){if(!u||!O)return;const[e,t]=TE(P,O,_);f({x:e,y:t}),E=requestAnimationFrame(L)}const B={...R,nodeId:o,type:A,position:R.position},F=l.get(o),z={inProgress:!0,isValid:null,from:Sj(F,B,gE.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:F,to:P,toHandle:null,toPosition:vE[B.position],toNode:null};b(z);let $=z;function U(e){if(!x()||!B)return void W(e);const i=w();P=sj(e,O),S=$j(VE(P,i,!1,[1,1]),n,l,B),T||(L(),T=!0);const s=Vj(e,{handle:S,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:a?"target":"source",isValidConnection:v,doc:k,lib:c,flowId:d,nodeLookup:l});D=s.handleDomNode,I=s.connection,M=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!S,s.isValid);const u={...$,isValid:M,to:S&&M?qE({x:S.x,y:S.y},i):P,toHandle:s.toHandle,toPosition:M&&s.toHandle?s.toHandle.position:vE[B.position],toNode:s.toHandle?l.get(s.toHandle.nodeId):null};M&&S&&$.toHandle&&u.toHandle&&$.toHandle.type===u.toHandle.type&&$.toHandle.nodeId===u.toHandle.nodeId&&$.toHandle.id===u.toHandle.id&&$.to.x===u.to.x&&$.to.y===u.to.y||(b(u),$=u)}function W(e){(S||D)&&I&&M&&(null==g||g(I));const{inProgress:t,...n}=$,r={...n,toPosition:$.toHandle?$.toPosition:null};null==m||m(e,r),i&&(null==y||y(e,r)),h(),cancelAnimationFrame(E),T=!1,M=!1,I=null,D=null,k.removeEventListener("mousemove",U),k.removeEventListener("mouseup",W),k.removeEventListener("touchmove",U),k.removeEventListener("touchend",W)}null==p||p(e,{nodeId:o,handleId:r,handleType:A}),k.addEventListener("mousemove",U),k.addEventListener("mouseup",W),k.addEventListener("touchmove",U),k.addEventListener("touchend",W)},isValid:Vj};const Kj=e=>({x:e.x,y:e.y,zoom:e.k}),Zj=({x:e,y:t,zoom:n})=>IS.translate(e,t).scale(n),Yj=(e,t)=>e.target.closest(`.${t}`),Gj=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Xj=(e,t=0,n=()=>{})=>{const r="number"==typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Jj=e=>{const t=e.ctrlKey&&YE()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function Qj({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=HS().clickDistance(!UE(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),h=S_(e).call(f);y({x:i.x,y:i.y,zoom:AE(i.zoom,t,n)},[[0,0],[d.width,d.height]],o);const p=h.on("wheel.zoom"),g=h.on("dblclick.zoom");function m(e,t){return h?new Promise((n=>{null==f||f.transform(Xj(h,null==t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function v(){f.on("zoom",null)}async function y(e,t,n){const r=Zj(e),o=null==f?void 0:f.constrain()(r,t,n);return o&&await m(o),new Promise((e=>e(o)))}return f.wheelDelta(Jj),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:i,panOnScrollMode:d,panOnScrollSpeed:m,preventScrolling:y,zoomOnPinch:b,zoomOnScroll:w,zoomOnDoubleClick:x,zoomActivationKeyPressed:_,lib:k,onTransformChange:S}){r&&!u.isZoomingOrPanning&&v();const E=o&&!_&&!r?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Yj(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&a){const e=E_(u),t=Jj(u),o=d*Math.pow(2,t);return void r.scaleTo(n,o,e,u)}const f=1===u.deltaMode?20:1;let h=o===aE.Vertical?0:u.deltaX*f,p=o===aE.Horizontal?0:u.deltaY*f;!YE()&&u.shiftKey&&o!==aE.Vertical&&(h=u.deltaY*f,p=0),r.translateBy(n,-h/d*i,-p/d*i,{internal:!0});const g=Kj(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,null==s||s(u,g)),e.isPanScrolling&&(null==l||l(u,g),e.panScrollTimeout=setTimeout((()=>{null==c||c(u,g),e.isPanScrolling=!1}),150))}}({zoomPanValues:u,noWheelClassName:e,d3Selection:h,d3Zoom:f,panOnScrollMode:d,panOnScrollSpeed:m,zoomOnPinch:b,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const i="wheel"===r.type,a=!t&&i&&!r.ctrlKey,s=Yj(r,e);if(r.ctrlKey&&i&&s&&r.preventDefault(),a||s)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:y,d3ZoomHandler:p});if(h.on("wheel.zoom",E,{passive:!1}),!r){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,i,a;if(null!==(o=r.sourceEvent)&&void 0!==o&&o.internal)return;const s=Kj(r.transform);e.mouseButton=(null===(i=r.sourceEvent)||void 0===i?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,"mousedown"===(null===(a=r.sourceEvent)||void 0===a?void 0:a.type)&&t(!0),n&&(null==n||n(r.sourceEvent,s))}}({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:s});f.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var a,s,l;e.usedRightMouseButton=!(!n||!Gj(t,null!==(a=e.mouseButton)&&void 0!==a?a:0)),null!==(s=i.sourceEvent)&&void 0!==s&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),!o||null!==(l=i.sourceEvent)&&void 0!==l&&l.internal||null==o||o(i.sourceEvent,Kj(i.transform))}}({zoomPanValues:u,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:S});f.on("zoom",t);const r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return a=>{var s,l,c,u;if((null===(s=a.sourceEvent)||void 0===s||!s.internal)&&(e.isZoomingOrPanning=!1,i&&Gj(t,null!==(l=e.mouseButton)&&void 0!==l?l:0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&(c=e.prevViewport,u=a.transform,c.x!==u.x||c.y!==u.y||c.zoom!==u.k))){const t=Kj(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout((()=>{null==o||o(a.sourceEvent,t)}),n?150:0)}}}({zoomPanValues:u,panOnDrag:i,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:c});f.on("end",r)}const j=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return u=>{var d;const f=e||t,h=n&&u.ctrlKey;if(1===u.button&&"mousedown"===u.type&&(Yj(u,`${c}-flow__node`)||Yj(u,`${c}-flow__edge`)))return!0;if(!(r||f||o||i||n))return!1;if(a)return!1;if(Yj(u,s)&&"wheel"===u.type)return!1;if(Yj(u,l)&&("wheel"!==u.type||o&&"wheel"===u.type&&!e))return!1;if(!n&&u.ctrlKey&&"wheel"===u.type)return!1;if(!n&&"touchstart"===u.type&&(null===(d=u.touches)||void 0===d?void 0:d.length)>1)return u.preventDefault(),!1;if(!f&&!o&&!h&&"wheel"===u.type)return!1;if(!r&&("mousedown"===u.type||"touchstart"===u.type))return!1;if(Array.isArray(r)&&!r.includes(u.button)&&"mousedown"===u.type)return!1;const p=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||"wheel"===u.type)&&p}}({zoomActivationKeyPressed:_,panOnDrag:i,zoomOnScroll:w,panOnScroll:o,zoomOnDoubleClick:x,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:k});f.filter(j),x?h.on("dblclick.zoom",g):h.on("dblclick.zoom",null)},destroy:v,setViewport:async function(e,t){const n=Zj(e);return await m(n,t),new Promise((e=>e(n)))},setViewportConstrained:y,getViewport:function(){const e=h?MS(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise((n=>{null==f||f.scaleTo(Xj(h,null==t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise((n=>{null==f||f.scaleBy(Xj(h,null==t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){null==f||f.scaleExtent(e)},setTranslateExtent:function(e){null==f||f.translateExtent(e)},syncViewport:function(e){if(h){const t=Zj(e),n=h.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||null==f||f.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){const t=!UE(e)||e<0?0:e;null==f||f.clickDistance(t)}}}var eC,tC;function nC(e,t){return Math.max(0,t-e)}function rC(e,t){return Math.max(0,e-t)}function oC(e,t,n){return Math.max(0,t-e,e-n)}function iC(e,t){return e?!t:t}(tC=eC||(eC={})).Line="line",tC.Handle="handle";const aC={width:0,height:0,x:0,y:0},sC={...aC,pointerX:0,pointerY:0,aspectRatio:1};function lC(e,t,n){var r,o;const i=t.position.x+e.position.x,a=t.position.y+e.position.y,s=null!==(r=e.measured.width)&&void 0!==r?r:0,l=null!==(o=e.measured.height)&&void 0!==o?o:0,c=n[0]*s,u=n[1]*l;return[[i-c,a-u],[i+s-c,a+l-u]]}function cC({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=S_(e);return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:s,resizeDirection:l,onResizeStart:c,onResize:u,onResizeEnd:d,shouldResize:f}){let h={...aC},p={...sC};const g=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let m,v,y,b,w=null,x=[];const _=B_().on("start",(e=>{var r,o,i,a,s;const{nodeLookup:l,transform:u,snapGrid:d,snapToGrid:f,nodeOrigin:g,paneDomNode:_}=n();if(m=l.get(t),!m)return;w=null!==(r=null==_?void 0:_.getBoundingClientRect())&&void 0!==r?r:null;const{xSnapped:k,ySnapped:S}=tj(e.sourceEvent,{transform:u,snapGrid:d,snapToGrid:f,containerBounds:w});h={width:null!==(o=m.measured.width)&&void 0!==o?o:0,height:null!==(i=m.measured.height)&&void 0!==i?i:0,x:null!==(a=m.position.x)&&void 0!==a?a:0,y:null!==(s=m.position.y)&&void 0!==s?s:0},p={...h,pointerX:k,pointerY:S,aspectRatio:h.width/h.height},v=void 0,m.parentId&&("parent"===m.extent||m.expandParent)&&(v=l.get(m.parentId),y=v&&"parent"===m.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(v):void 0),x=[],b=void 0;for(const[n,c]of l)if(c.parentId===t&&(x.push({id:n,position:{...c.position},extent:c.extent}),"parent"===c.extent||c.expandParent)){var E;const e=lC(c,m,null!==(E=c.origin)&&void 0!==E?E:g);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}null==c||c(e,{...h})})).on("drag",(e=>{var t;const{transform:o,snapGrid:i,snapToGrid:c,nodeOrigin:d}=n(),_=tj(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:c,containerBounds:w}),k=[];if(!m)return;const{x:S,y:E,width:j,height:C}=h,N={},A=null!==(t=m.origin)&&void 0!==t?t:d,{width:O,height:R,x:P,y:T}=function(e,t,n,r,o,i,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:h,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:v,maxHeight:y}=r,{x:b,y:w,width:x,height:_,aspectRatio:k}=e;let S=Math.floor(u?h-e.pointerX:0),E=Math.floor(d?p-e.pointerY:0);const j=x+(l?-S:S),C=_+(c?-E:E),N=-i[0]*x,A=-i[1]*_;let O=oC(j,g,m),R=oC(C,v,y);if(a){let e=0,t=0;l&&S<0?e=nC(b+S+N,a[0][0]):!l&&S>0&&(e=rC(b+j+N,a[1][0])),c&&E<0?t=nC(w+E+A,a[0][1]):!c&&E>0&&(t=rC(w+C+A,a[1][1])),O=Math.max(O,e),R=Math.max(R,t)}if(s){let e=0,t=0;l&&S>0?e=rC(b+S,s[0][0]):!l&&S<0&&(e=nC(b+j,s[1][0])),c&&E>0?t=rC(w+E,s[0][1]):!c&&E<0&&(t=nC(w+C,s[1][1])),O=Math.max(O,e),R=Math.max(R,t)}if(o){if(u){const e=oC(j/k,v,y)*k;if(O=Math.max(O,e),a){let e=0;e=!l&&!c||l&&!c&&f?rC(w+A+j/k,a[1][1])*k:nC(w+A+(l?S:-S)/k,a[0][1])*k,O=Math.max(O,e)}if(s){let e=0;e=!l&&!c||l&&!c&&f?nC(w+j/k,s[1][1])*k:rC(w+(l?S:-S)/k,s[0][1])*k,O=Math.max(O,e)}}if(d){const e=oC(C*k,g,m)/k;if(R=Math.max(R,e),a){let e=0;e=!l&&!c||c&&!l&&f?rC(b+C*k+N,a[1][0])/k:nC(b+(c?E:-E)*k+N,a[0][0])/k,R=Math.max(R,e)}if(s){let e=0;e=!l&&!c||c&&!l&&f?nC(b+C*k,s[1][0])/k:rC(b+(c?E:-E)*k,s[0][0])/k,R=Math.max(R,e)}}}E+=E<0?R:-R,S+=S<0?O:-O,o&&(f?j>C*k?E=(iC(l,c)?-S:S)/k:S=(iC(l,c)?-E:E)*k:u?(E=S/k,c=l):(S=E*k,l=c));const P=l?b+S:b,T=c?w+E:w;return{width:x+(l?-S:S),height:_+(c?-E:E),x:i[0]*S*(l?-1:1)+P,y:i[1]*E*(c?-1:1)+T}}(p,g,_,a,s,A,y,b),I=O!==j,M=R!==C,D=P!==S&&I,L=T!==E&&M;if(!(D||L||I||M))return;if((D||L||1===A[0]||1===A[1])&&(N.x=D?P:h.x,N.y=L?T:h.y,h.x=N.x,h.y=N.y,x.length>0)){const e=P-S,t=T-E;for(const n of x)n.position={x:n.position.x-e+A[0]*(O-j),y:n.position.y-t+A[1]*(R-C)},k.push(n)}if((I||M)&&(N.width=!I||l&&"horizontal"!==l?h.width:O,N.height=!M||l&&"vertical"!==l?h.height:R,h.width=N.width,h.height=N.height),v&&m.expandParent){var B,F;const e=A[0]*(null!==(B=N.width)&&void 0!==B?B:0);N.x&&N.x<e&&(h.x=e,p.x=p.x-(N.x-e));const t=A[1]*(null!==(F=N.height)&&void 0!==F?F:0);N.y&&N.y<t&&(h.y=t,p.y=p.y-(N.y-t))}const z=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const a=e-t,s=n-r,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&o&&(l[0]=-1*l[0]),s&&i&&(l[1]=-1*l[1]),l}({width:h.width,prevWidth:j,height:h.height,prevHeight:C,affectsX:g.affectsX,affectsY:g.affectsY}),$={...h,direction:z};!1!==(null==f?void 0:f(e,$))&&(null==u||u(e,$),r(N,k))})).on("end",(e=>{null==d||d(e,{...h}),null==o||o({...h})}));i.call(_)},destroy:function(){i.on(".drag",null)}}}var uC={exports:{}},dC={},fC={exports:{}},hC={},pC=q;var gC="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},mC=pC.useState,vC=pC.useEffect,yC=pC.useLayoutEffect,bC=pC.useDebugValue;function wC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gC(e,n)}catch(r){return!0}}var xC="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=mC({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return yC((function(){o.value=n,o.getSnapshot=t,wC(o)&&i({inst:o})}),[e,n,t]),vC((function(){return wC(o)&&i({inst:o}),e((function(){wC(o)&&i({inst:o})}))}),[e]),bC(n),n};hC.useSyncExternalStore=void 0!==pC.useSyncExternalStore?pC.useSyncExternalStore:xC,fC.exports=hC;var _C=fC.exports,kC=q,SC=_C;
/**
       * @license React
       * use-sync-external-store-shim/with-selector.production.js
       *
       * Copyright (c) Meta Platforms, Inc. and affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */var EC="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},jC=SC.useSyncExternalStore,CC=kC.useRef,NC=kC.useEffect,AC=kC.useMemo,OC=kC.useDebugValue;dC.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=CC(null);if(null===i.current){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=AC((function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==o&&a.hasValue){var t=a.value;if(o(t,e))return s=t}return s=e}if(t=s,EC(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(i=e,t):(i=e,s=n)}var i,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,o]);var s=jC(e,i[0],i[1]);return NC((function(){a.hasValue=!0,a.value=s}),[s]),OC(s),s},uC.exports=dC;const RC=a(uC.exports),PC={LEGACY:!0},TC=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{"production"!==(PC?"production":void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,i);return i},{useDebugValue:IC}=K,{useSyncExternalStoreWithSelector:MC}=RC,DC=e=>e;function LC(e,t=DC,n){const r=MC(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return IC(r),r}const BC=(e,t)=>{const n=(e=>e?TC(e):TC)(e),r=(e,r=t)=>LC(n,e,r);return Object.assign(r,n),r};function FC(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const zC=q.createContext(null),$C=zC.Provider,UC=VS();function WC(e,t){const n=q.useContext(zC);if(null===n)throw new Error(UC);return LC(n,e,t)}function HC(){const e=q.useContext(zC);if(null===e)throw new Error(UC);return q.useMemo((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const VC={display:"none"},qC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},KC="react-flow__node-desc",ZC="react-flow__edge-desc",YC=e=>e.ariaLiveMessage;function GC({rfId:e}){const t=WC(YC);return ne.jsx("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:qC,children:t})}function XC({rfId:e,disableKeyboardA11y:t}){return ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{id:`${KC}-${e}`,style:VC,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),ne.jsx("div",{id:`${ZC}-${e}`,style:VC,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&ne.jsx(GC,{rfId:e})]})}const JC=e=>e.userSelectionActive?"none":"all",QC=q.forwardRef((({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const a=WC(JC),s=`${e}`.split("-");return ne.jsx("div",{className:ax(["react-flow__panel",n,...s]),style:{...r,pointerEvents:a},ref:i,...o,children:t})}));function eN({proOptions:e,position:t="bottom-right"}){return null!=e&&e.hideAttribution?null:ne.jsx(QC,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:ne.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}QC.displayName="Panel";const tN=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},nN=e=>e.id;function rN(e,t){return FC(e.selectedNodes.map(nN),t.selectedNodes.map(nN))&&FC(e.selectedEdges.map(nN),t.selectedEdges.map(nN))}function oN({onSelectionChange:e}){const t=HC(),{selectedNodes:n,selectedEdges:r}=WC(tN,rN);return q.useEffect((()=>{const o={nodes:n,edges:r};null==e||e(o),t.getState().onSelectionChangeHandlers.forEach((e=>e(o)))}),[n,r,e]),null}const iN=e=>!!e.onSelectionChangeHandlers;function aN({onSelectionChange:e}){const t=WC(iN);return e||t?ne.jsx(oN,{onSelectionChange:e}):null}const sN=[0,0],lN={x:0,y:0,zoom:1},cN=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],uN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),dN={translateExtent:nE,nodeOrigin:sN,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function fN(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=WC(uN,FC),u=HC();q.useEffect((()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=dN,s()})),[]);const d=q.useRef(dN);return q.useEffect((()=>{for(const s of cN){const l=e[s];l!==d.current[s]&&(void 0!==e[s]&&("nodes"===s?t(l):"edges"===s?n(l):"minZoom"===s?r(l):"maxZoom"===s?o(l):"translateExtent"===s?i(l):"nodeExtent"===s?a(l):"paneClickDistance"===s?c(l):"fitView"===s?u.setState({fitViewQueued:l}):"fitViewOptions"===s?u.setState({fitViewOptions:l}):u.setState({[s]:l})))}d.current=e}),cN.map((t=>e[t]))),null}function hN(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const pN="undefined"!=typeof document?document:null;function gN(e=null,t={target:pN,actInsideInputWithModifier:!0}){const[n,r]=q.useState(!1),o=q.useRef(!1),i=q.useRef(new Set([])),[a,s]=q.useMemo((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return q.useEffect((()=>{const n=(null==t?void 0:t.target)||pN;if(null!==e){const e=e=>{o.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!o.current||o.current&&!t.actInsideInputWithModifier)&&ij(e))return!1;const n=vN(e.code,s);if(i.current.add(e[n]),mN(a,i.current,!1)){var l;const n=(null===(l=e.composedPath)||void 0===l||null===(l=l.call(e))||void 0===l?void 0:l[0])||e.target,i="BUTTON"===(null==n?void 0:n.nodeName)||"A"===(null==n?void 0:n.nodeName);!1===t.preventDefault||!o.current&&i||e.preventDefault(),r(!0)}},l=e=>{const t=vN(e.code,s);mN(a,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(e[t]),"Meta"===e.key&&i.current.clear(),o.current=!1},c=()=>{i.current.clear(),r(!1)};return null==n||n.addEventListener("keydown",e),null==n||n.addEventListener("keyup",l),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{null==n||n.removeEventListener("keydown",e),null==n||n.removeEventListener("keyup",l),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}}),[e,r]),n}function mN(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function vN(e,t){return t.includes(e)?"code":"key"}function yN(e,t){const n=[],r=new Map,o=[];for(const i of e)if("add"!==i.type)if("remove"===i.type||"replace"===i.type)r.set(i.id,[i]);else{const e=r.get(i.id);e?e.push(i):r.set(i.id,[i])}else o.push(i);for(const i of t){const e=r.get(i.id);if(!e){n.push(i);continue}if("remove"===e[0].type)continue;if("replace"===e[0].type){n.push({...e[0].item});continue}const t={...i};for(const n of e)bN(n,t);n.push(t)}return o.length&&o.forEach((e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})})),n}function bN(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":var n;if(void 0!==e.dimensions)null!==(n=t.measured)&&void 0!==n||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height));"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function wN(e,t){return yN(e,t)}function xN(e,t){return yN(e,t)}function _N(e,t){return{id:e,type:"select",selected:t}}function kN(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const e=t.has(o);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),r.push(_N(i.id,e)))}return r}function SN({items:e=[],lookup:t}){const n=[],r=new Map(e.map((e=>[e.id,e])));for(const[a,s]of e.entries()){var o,i;const e=t.get(s.id),r=null!==(o=null==e||null===(i=e.internals)||void 0===i?void 0:i.userNode)&&void 0!==o?o:e;void 0!==r&&r!==s&&n.push({id:s.id,item:s,type:"replace"}),void 0===r&&n.push({item:s,type:"add",index:a})}for(const[a]of t){void 0===r.get(a)&&n.push({id:a,type:"remove"})}return n}function EN(e){return{id:e.id,type:"remove"}}const jN=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function CN(e){return q.forwardRef(e)}const NN="undefined"!=typeof window?q.useLayoutEffect:q.useEffect;function AN(e){const[t,n]=q.useState(BigInt(0)),[r]=q.useState((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return NN((()=>{const t=r.get();t.length&&(e(t),r.reset())}),[t]),r}const ON=q.createContext(null);function RN({children:e}){const t=HC(),n=AN(q.useCallback((e=>{const{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:a,fitViewQueued:s}=t.getState();let l=n;for(const t of e)l="function"==typeof t?t(l):t;if(o)r(l);else{const e=SN({items:l,lookup:a});e.length>0?null==i||i(e):s&&window.requestAnimationFrame((()=>{const{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)}))}}),[])),r=AN(q.useCallback((e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:a}=t.getState();let s=n;for(const t of e)s="function"==typeof t?t(s):t;o?r(s):i&&i(SN({items:s,lookup:a}))}),[])),o=q.useMemo((()=>({nodeQueue:n,edgeQueue:r})),[]);return ne.jsx(ON.Provider,{value:o,children:e})}const PN=e=>!!e.panZoom;function TN(){const e=(()=>{const e=HC();return q.useMemo((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:null==n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var r,o,i;const{transform:[a,s,l],panZoom:c}=e.getState();return c?(await c.setViewport({x:null!==(r=t.x)&&void 0!==r?r:a,y:null!==(o=t.y)&&void 0!==o?o:s,zoom:null!==(i=t.zoom)&&void 0!==i?i:l},{duration:null==n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:a,panZoom:s}=e.getState(),l=void 0!==(null==r?void 0:r.zoom)?r.zoom:a,c=o/2-t*l,u=i/2-n*l;return s?(await s.setViewport({x:c,y:u,zoom:l},{duration:null==r?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var r;const{width:o,height:i,minZoom:a,maxZoom:s,panZoom:l}=e.getState(),c=ZE(t,o,i,a,s,null!==(r=null==n?void 0:n.padding)&&void 0!==r?r:.1);return l?(await l.setViewport(c,{duration:null==n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{var r,o;const{transform:i,snapGrid:a,snapToGrid:s,domNode:l}=e.getState();if(!l)return t;const{x:c,y:u}=l.getBoundingClientRect(),d={x:t.x-c,y:t.y-u},f=null!==(r=n.snapGrid)&&void 0!==r?r:a,h=null!==(o=n.snapToGrid)&&void 0!==o?o:s;return VE(d,i,h,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),a=qE(t,n);return{x:a.x+o,y:a.y+i}}})),[])})(),t=HC(),n=function(){const e=q.useContext(ON);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),r=WC(PN),o=q.useMemo((()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},i=e=>{var n,r,o,i;const{nodeLookup:a,nodeOrigin:s}=t.getState(),l=jN(e)?e:a.get(e.id),c=l.parentId?QE(l.position,l.measured,l.parentId,a,s):l.position,u={...l,position:c,width:null!==(n=null===(r=l.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:l.width,height:null!==(o=null===(i=l.measured)||void 0===i?void 0:i.height)&&void 0!==o?o:l.height};return LE(u)},a=(e,t,n={replace:!1})=>{r((r=>r.map((r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&jN(e)?e:{...r,...e}}return r}))))},s=(e,t,n={replace:!1})=>{o((r=>r.map((r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&xE(e)?e:{...r,...e}}return r}))))};return{getNodes:()=>t.getState().nodes.map((e=>({...e}))),getNode:t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,i,a]=r;return{nodes:e.map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:o,y:i,zoom:a}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:r,edges:o,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:u}=t.getState(),{nodes:d,edges:f}=await NE({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:o,onBeforeDelete:u}),h=f.length>0,p=d.length>0;if(h){const e=f.map(EN);null==a||a(f),l(e)}if(p){const e=d.map(EN);null==i||i(d),s(e)}return(p||h)&&(null==c||c({nodes:d,edges:f})),{deletedNodes:d,deletedEdges:f}},getIntersectingNodes:(e,n=!0,r)=>{const o=$E(e),a=o?e:i(e),s=void 0!==r;return a?(r||t.getState().nodes).filter((r=>{const i=t.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;const l=LE(s?r:i),c=zE(l,a);return n&&c>0||c>=a.width*a.height})):[]},isNodeIntersecting:(e,t,n=!0)=>{const r=$E(e)?e:i(e);if(!r)return!1;const o=zE(r,t);return n&&o>0||o>=r.width*r.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,(e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}}),n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,(e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return((e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const r="string"==typeof n;let o=t.nodeLookup||r?void 0:n;t.nodeLookup&&(o=r?t.nodeLookup.get(n):_E(n)?n:t.nodeLookup.get(n.id));const i=o?BE(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return IE(e,i)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return DE(n)})(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>{var o,i;return Array.from(null!==(o=null===(i=t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`))||void 0===i?void 0:i.values())&&void 0!==o?o:[])},getNodeConnections:({type:e,handleId:n,nodeId:r})=>{var o,i;return Array.from(null!==(o=null===(i=t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`))||void 0===i?void 0:i.values())&&void 0!==o?o:[])},fitView:async e=>{var r;const o=null!==(r=t.getState().fitViewResolver)&&void 0!==r?r:function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return{promise:n,resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:o}),n.nodeQueue.push((e=>[...e])),o.promise}}}),[]);return q.useMemo((()=>({...o,...e,viewportInitialized:r})),[r])}const IN=e=>e.selected,MN={actInsideInputWithModifier:!1},DN="undefined"!=typeof window?window:void 0;const LN={position:"absolute",width:"100%",height:"100%",top:0,left:0},BN=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function FN({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=aE.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:c,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:h=!0,children:p,noWheelClassName:g,noPanClassName:m,onViewportChange:v,isControlledViewport:y,paneClickDistance:b}){const w=HC(),x=q.useRef(null),{userSelectionActive:_,lib:k}=WC(BN,FC),S=gN(f),E=q.useRef();!function(e){const t=HC();q.useEffect((()=>{const n=()=>{if(!e.current)return!1;const n=nj(e.current);var r,o;0!==n.height&&0!==n.width||null===(r=(o=t.getState()).onError)||void 0===r||r.call(o,"004",KS()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(x);const j=q.useCallback((e=>{null==v||v({x:e[0],y:e[1],zoom:e[2]}),y||w.setState({transform:e})}),[v,y]);return q.useEffect((()=>{if(x.current){E.current=Qj({domNode:x.current,minZoom:u,maxZoom:d,translateExtent:c,viewport:l,paneClickDistance:b,onDraggingChange:e=>w.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=w.getState();null==r||r(e,t),null==n||n(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=w.getState();null==r||r(e,t),null==n||n(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=w.getState();null==r||r(e,t),null==n||n(t)}});const{x:e,y:t,zoom:n}=E.current.getViewport();return w.setState({panZoom:E.current,transform:[e,t,n],domNode:x.current.closest(".react-flow")}),()=>{var e;null===(e=E.current)||void 0===e||e.destroy()}}}),[]),q.useEffect((()=>{var l;null===(l=E.current)||void 0===l||l.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:S,preventScrolling:h,noPanClassName:m,userSelectionActive:_,noWheelClassName:g,lib:k,onTransformChange:j})}),[e,t,n,r,o,i,a,s,S,h,m,_,g,k,j]),ne.jsx("div",{className:"react-flow__renderer",ref:x,style:LN,children:p})}const zN=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function $N(){const{userSelectionActive:e,userSelectionRect:t}=WC(zN,FC);return e&&t?ne.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const UN=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},WN=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function HN({isSelecting:e,selectionKeyPressed:t,selectionMode:n=lE.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:h}){const p=HC(),{userSelectionActive:g,elementsSelectable:m,dragging:v,connectionInProgress:y}=WC(WN,FC),b=m&&(e||g),w=q.useRef(null),x=q.useRef(),_=q.useRef(new Set),k=q.useRef(new Set),S=q.useRef(!1),E=q.useRef(!1),j=e=>{S.current||y?S.current=!1:(null==s||s(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1}))},C=c?e=>c(e):void 0,N=!0===r||Array.isArray(r)&&r.includes(0);return ne.jsxs("div",{className:ax(["react-flow__pane",{draggable:N,dragging:v,selection:e}]),onClick:b?void 0:UN(j,w),onContextMenu:UN((e=>{Array.isArray(r)&&null!=r&&r.includes(2)?e.preventDefault():null==l||l(e)}),w),onWheel:UN(C,w),onPointerEnter:b?void 0:u,onPointerDown:b?t=>{var n,r;const{resetSelectedElements:o,domNode:a}=p.getState();if(x.current=null==a?void 0:a.getBoundingClientRect(),!m||!e||0!==t.button||t.target!==w.current||!x.current)return;null===(n=t.target)||void 0===n||null===(r=n.setPointerCapture)||void 0===r||r.call(n,t.pointerId),E.current=!0,S.current=!1;const{x:s,y:l}=sj(t.nativeEvent,x.current);o(),p.setState({userSelectionRect:{width:0,height:0,startX:s,startY:l,x:s,y:l}}),null==i||i(t)}:d,onPointerMove:b?e=>{var t;const{userSelectionRect:r,transform:o,nodeLookup:i,edgeLookup:a,connectionLookup:s,triggerNodeChanges:l,triggerEdgeChanges:c,defaultEdgeOptions:u}=p.getState();if(!x.current||!r)return;S.current=!0;const{x:d,y:f}=sj(e.nativeEvent,x.current),{startX:h,startY:g}=r,m={startX:h,startY:g,x:d<h?d:h,y:f<g?f:g,width:Math.abs(d-h),height:Math.abs(f-g)},v=_.current,y=k.current;_.current=new Set(EE(i,m,o,n===lE.Partial,!0).map((e=>e.id))),k.current=new Set;const b=null===(t=null==u?void 0:u.selectable)||void 0===t||t;for(const n of _.current){const e=s.get(n);if(e)for(const{edgeId:t}of e.values()){var w;const e=a.get(t);e&&(null!==(w=e.selectable)&&void 0!==w?w:b)&&k.current.add(t)}}if(!ej(v,_.current)){l(kN(i,_.current,!0))}if(!ej(y,k.current)){c(kN(a,k.current))}p.setState({userSelectionRect:m,userSelectionActive:!0,nodesSelectionActive:!1})}:d,onPointerUp:b?e=>{var n,r;if(0!==e.button||!E.current)return;null===(n=e.target)||void 0===n||null===(r=n.releasePointerCapture)||void 0===r||r.call(n,e.pointerId);const{userSelectionRect:i}=p.getState();!g&&i&&e.target===w.current&&(null==j||j(e)),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),null==a||a(e),(t||o)&&(S.current=!1),E.current=!1}:void 0,onPointerLeave:f,ref:w,style:LN,children:[h,ne.jsx($N,{})]})}function VN({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(i({nodes:[c],edges:[]}),requestAnimationFrame((()=>{var e;return null==r||null===(e=r.current)||void 0===e?void 0:e.blur()}))):o([e])):null==l||l("012",QS(e))}function qN({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:a}){const s=HC(),[l,c]=q.useState(!1),u=q.useRef();return q.useEffect((()=>{u.current=zj({getStoreItems:()=>s.getState(),onNodeMouseDown:t=>{VN({id:t,store:s,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})}),[]),q.useEffect((()=>{var s;if(t)null===(s=u.current)||void 0===s||s.destroy();else if(e.current){var l;return null===(l=u.current)||void 0===l||l.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:a}),()=>{var e;null===(e=u.current)||void 0===e||e.destroy()}}}),[n,r,t,i,e,o]),l}function KN(){const e=HC(),t=q.useCallback((t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(i),f=r?o[0]:5,h=r?o[1]:5,p=t.direction.x*f*t.factor,g=t.direction.y*h*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};r&&(t=HE(t,o));const{position:i,positionAbsolute:s}=CE({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:a});e.position=i,e.internals.positionAbsolute=s,u.set(e.id,e)}s(u)}),[]);return t}const ZN=q.createContext(null),YN=ZN.Provider;ZN.Consumer;const GN=()=>q.useContext(ZN),XN=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const JN=q.memo(CN((function({type:e="source",position:t=gE.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:a,onConnect:s,children:l,className:c,onMouseDown:u,onTouchStart:d,...f},h){const p=a||null,g="target"===e,m=HC(),v=GN(),{connectOnClick:y,noPanClassName:b,rfId:w}=WC(XN,FC),{connectingFrom:x,connectingTo:_,clickConnecting:k,isPossibleEndHandle:S,connectionInProcess:E,clickConnectionInProcess:j,valid:C}=WC(((e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:a}=r,{fromHandle:s,toHandle:l,isValid:c}=a,u=(null==l?void 0:l.nodeId)===e&&(null==l?void 0:l.id)===t&&(null==l?void 0:l.type)===n;return{connectingFrom:(null==s?void 0:s.nodeId)===e&&(null==s?void 0:s.id)===t&&(null==s?void 0:s.type)===n,connectingTo:u,clickConnecting:(null==o?void 0:o.nodeId)===e&&(null==o?void 0:o.id)===t&&(null==o?void 0:o.type)===n,isPossibleEndHandle:i===oE.Strict?(null==s?void 0:s.type)!==n:e!==(null==s?void 0:s.nodeId)||t!==(null==s?void 0:s.id),connectionInProcess:!!s,clickConnectionInProcess:!!o,valid:u&&c}})(v,p,e),FC);var N,A;v||null===(N=(A=m.getState()).onError)||void 0===N||N.call(A,"010",XS());const O=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=m.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=m.getState();t(mj(o,e))}null==n||n(o),null==s||s(o)},R=e=>{if(!v)return;const t=aj(e.nativeEvent);if(o&&(t&&0===e.button||!t)){const t=m.getState();qj.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:g,handleId:p,nodeId:v,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:O,isValidConnection:n||t.isValidConnection,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?null==u||u(e):null==d||d(e)};return ne.jsx("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${w}-${v}-${p}-${e}`,className:ax(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,c,{source:!g,target:g,connectable:r,connectablestart:o,connectableend:i,clickconnecting:k,connectingfrom:x,connectingto:_,valid:C,connectionindicator:r&&(!E||S)&&(E||j?i:o)}]),onMouseDown:R,onTouchStart:R,onClick:y?t=>{const{onClickConnectStart:r,onClickConnectEnd:i,connectionClickStartHandle:a,connectionMode:s,isValidConnection:l,lib:c,rfId:u,nodeLookup:d,connection:f}=m.getState();if(!v||!a&&!o)return;if(!a)return null==r||r(t.nativeEvent,{nodeId:v,handleId:p,handleType:e}),void m.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});const h=rj(t.target),g=n||l,{connection:y,isValid:b}=qj.isValid(t.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:s,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:g,flowId:u,doc:h,lib:c,nodeLookup:d});b&&y&&O(y);const w=structuredClone(f);delete w.inProgress,w.toPosition=w.toHandle?w.toHandle.position:null,null==i||i(t,w),m.setState({connectionClickStartHandle:null})}:void 0,ref:h,...f,children:l})})));const QN={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},eA={input:function({data:e,isConnectable:t,sourcePosition:n=gE.Bottom}){return ne.jsxs(ne.Fragment,{children:[null==e?void 0:e.label,ne.jsx(JN,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=gE.Top,sourcePosition:r=gE.Bottom}){return ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label,ne.jsx(JN,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=gE.Top}){return ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label]})},group:function(){return null}};const tA=e=>{const{width:t,height:n,x:r,y:o}=SE(e.nodeLookup,{filter:e=>!!e.selected});return{width:UE(t)?t:null,height:UE(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function nA({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=HC(),{width:o,height:i,transformString:a,userSelectionActive:s}=WC(tA,FC),l=KN(),c=q.useRef(null);if(q.useEffect((()=>{var e;n||(null===(e=c.current)||void 0===e||e.focus({preventScroll:!0}))}),[n]),qN({nodeRef:c}),s||!o||!i)return null;const u=e?t=>{const n=r.getState().nodes.filter((e=>e.selected));e(t,n)}:void 0;return ne.jsx("div",{className:ax(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:ne.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(QN,e.key)&&(e.preventDefault(),l({direction:QN[e.key],factor:e.shiftKey?4:1}))},style:{width:o,height:i}})})}const rA="undefined"!=typeof window?window:void 0,oA=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function iA({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:g,zoomActivationKeyCode:m,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:w,panOnScrollSpeed:x,panOnScrollMode:_,zoomOnDoubleClick:k,panOnDrag:S,defaultViewport:E,translateExtent:j,minZoom:C,maxZoom:N,preventScrolling:A,onSelectionContextMenu:O,noWheelClassName:R,noPanClassName:P,disableKeyboardA11y:T,onViewportChange:I,isControlledViewport:M}){const{nodesSelectionActive:D,userSelectionActive:L}=WC(oA),B=gN(c,{target:rA}),F=gN(g,{target:rA}),z=F||S,$=F||w,U=u&&!0!==z,W=B||L||U;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=HC(),{deleteElements:r}=TN(),o=gN(e,MN),i=gN(t,{target:DN});q.useEffect((()=>{if(o){const{edges:e,nodes:t}=n.getState();r({nodes:t.filter(IN),edges:e.filter(IN)}),n.setState({nodesSelectionActive:!1})}}),[o]),q.useEffect((()=>{n.setState({multiSelectionActive:i})}),[i])}({deleteKeyCode:l,multiSelectionKeyCode:p}),ne.jsx(FN,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:b,panOnScroll:$,panOnScrollSpeed:x,panOnScrollMode:_,zoomOnDoubleClick:k,panOnDrag:!B&&z,defaultViewport:E,translateExtent:j,minZoom:C,maxZoom:N,zoomActivationKeyCode:m,preventScrolling:A,noWheelClassName:R,noPanClassName:P,onViewportChange:I,isControlledViewport:M,paneClickDistance:s,children:ne.jsxs(HN,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:z,isSelecting:!!W,selectionMode:d,selectionKeyPressed:B,selectionOnDrag:U,children:[e,D&&ne.jsx(nA,{onSelectionContextMenu:O,noPanClassName:P,disableKeyboardA11y:T})]})})}iA.displayName="FlowRenderer";const aA=q.memo(iA);function sA(e){const t=WC(q.useCallback((e=>t=>e?EE(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),FC);return t}const lA=e=>e.updateNodeInternals;function cA({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:a,nodesDraggable:s,elementsSelectable:l,nodesConnectable:c,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:p,rfId:g,nodeTypes:m,nodeClickDistance:v,onError:y}){var b,w;const{node:x,internals:_,isParent:k}=WC((t=>{const n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}}),FC);let S=x.type||"default",E=(null==m?void 0:m[S])||eA[S];void 0===E&&(null==y||y("003",qS(S)),S="default",E=eA.default);const j=!!(x.draggable||s&&void 0===x.draggable),C=!!(x.selectable||l&&void 0===x.selectable),N=!!(x.connectable||c&&void 0===x.connectable),A=!!(x.focusable||u&&void 0===x.focusable),O=HC(),R=JE(x),P=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=HC(),i=q.useRef(null),a=q.useRef(null),s=q.useRef(e.sourcePosition),l=q.useRef(e.targetPosition),c=q.useRef(t),u=n&&!!e.internals.handleBounds;return q.useEffect((()=>{!i.current||e.hidden||u&&a.current===i.current||(a.current&&(null==r||r.unobserve(a.current)),null==r||r.observe(i.current),a.current=i.current)}),[u,e.hidden]),q.useEffect((()=>()=>{a.current&&(null==r||r.unobserve(a.current),a.current=null)}),[]),q.useEffect((()=>{if(i.current){const n=c.current!==t,r=s.current!==e.sourcePosition,a=l.current!==e.targetPosition;(n||r||a)&&(c.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}}),[e.id,t,e.sourcePosition,e.targetPosition]),i}({node:x,nodeType:S,hasDimensions:R,resizeObserver:d}),T=qN({nodeRef:P,disabled:x.hidden||!j,noDragClassName:f,handleSelector:x.dragHandle,nodeId:e,isSelectable:C,nodeClickDistance:v}),I=KN();if(x.hidden)return null;const M=XE(x),D=function(e){var t,n,r,o,i,a,s,l,c,u;return void 0===e.internals.handleBounds?{width:null!==(i=null!==(a=e.width)&&void 0!==a?a:e.initialWidth)&&void 0!==i?i:null===(s=e.style)||void 0===s?void 0:s.width,height:null!==(l=null!==(c=e.height)&&void 0!==c?c:e.initialHeight)&&void 0!==l?l:null===(u=e.style)||void 0===u?void 0:u.height}:{width:null!==(t=e.width)&&void 0!==t?t:null===(n=e.style)||void 0===n?void 0:n.width,height:null!==(r=e.height)&&void 0!==r?r:null===(o=e.style)||void 0===o?void 0:o.height}}(x),L=C||j||t||n||r||o,B=n?e=>n(e,{..._.userNode}):void 0,F=r?e=>r(e,{..._.userNode}):void 0,z=o?e=>o(e,{..._.userNode}):void 0,$=i?e=>i(e,{..._.userNode}):void 0,U=a?e=>a(e,{..._.userNode}):void 0;return ne.jsx("div",{className:ax(["react-flow__node",`react-flow__node-${S}`,{[h]:j},x.className,{selected:x.selected,selectable:C,parent:k,draggable:j,dragging:T}]),ref:P,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:L?"all":"none",visibility:R?"visible":"hidden",...x.style,...D},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:F,onMouseLeave:z,onContextMenu:$,onClick:n=>{const{selectNodesOnDrag:r,nodeDragThreshold:o}=O.getState();C&&(!r||!j||o>0)&&VN({id:e,store:O,nodeRef:P}),t&&t(n,{..._.userNode})},onDoubleClick:U,onKeyDown:A?t=>{if(!ij(t.nativeEvent)&&!p)if(rE.includes(t.key)&&C){const n="Escape"===t.key;VN({id:e,store:O,unselect:n,nodeRef:P})}else j&&x.selected&&Object.prototype.hasOwnProperty.call(QN,t.key)&&(t.preventDefault(),O.setState({ariaLiveMessage:`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~_.positionAbsolute.x}, y: ${~~_.positionAbsolute.y}`}),I({direction:QN[t.key],factor:t.shiftKey?4:1}))}:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":p?void 0:`${KC}-${g}`,"aria-label":x.ariaLabel,children:ne.jsx(YN,{value:e,children:ne.jsx(E,{id:e,data:x.data,type:S,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:null!==(b=x.selected)&&void 0!==b&&b,selectable:C,draggable:j,deletable:null===(w=x.deletable)||void 0===w||w,isConnectable:N,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:T,dragHandle:x.dragHandle,zIndex:_.z,parentId:x.parentId,...M})})})}const uA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function dA(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=WC(uA,FC),a=sA(e.onlyRenderVisibleElements),s=function(){const e=WC(lA),[t]=q.useState((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return q.useEffect((()=>()=>{null==t||t.disconnect()}),[t]),t}();return ne.jsx("div",{className:"react-flow__nodes",style:LN,children:a.map((a=>ne.jsx(cA,{id:a,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},a)))})}dA.displayName="NodeRenderer";const fA=q.memo(dA);const hA={[hE.Arrow]:({color:e="none",strokeWidth:t=1})=>ne.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[hE.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>ne.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const pA=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const l=function(e){const t=HC();return q.useMemo((()=>{var n,r;return Object.prototype.hasOwnProperty.call(hA,e)?hA[e]:(null===(n=(r=t.getState()).onError)||void 0===n||n.call(r,"009",YS(e)),null)}),[e])}(t);return l?ne.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:ne.jsx(l,{color:n,strokeWidth:a})}):null},gA=({defaultColor:e,rfId:t})=>{const n=WC((e=>e.edges)),r=WC((e=>e.defaultEdgeOptions)),o=q.useMemo((()=>{const o=function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce(((e,a)=>([a.markerStart||r,a.markerEnd||o].forEach((r=>{if(r&&"object"==typeof r){const o=jj(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(n,{id:t,defaultColor:e,defaultMarkerStart:null==r?void 0:r.markerStart,defaultMarkerEnd:null==r?void 0:r.markerEnd});return o}),[n,r,t,e]);return o.length?ne.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:ne.jsx("defs",{children:o.map((e=>ne.jsx(pA,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};gA.displayName="MarkerDefinitions";var mA=q.memo(gA);function vA({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...u}){const[d,f]=q.useState({x:1,y:0,width:0,height:0}),h=ax(["react-flow__edge-textwrapper",c]),p=q.useRef(null);return q.useEffect((()=>{if(p.current){const e=p.current.getBBox();f({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),n?ne.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...u,children:[o&&ne.jsx("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),ne.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:p,style:r,children:n}),l]}):null}vA.displayName="EdgeText";const yA=q.memo(vA);function bA({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,interactionWidth:c=20,...u}){return ne.jsxs(ne.Fragment,{children:[ne.jsx("path",{...u,d:e,fill:"none",className:ax(["react-flow__edge-path",u.className])}),c&&ne.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}),r&&UE(t)&&UE(n)?ne.jsx(yA,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l}):null]})}function wA({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===gE.Left||e===gE.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function xA({sourceX:e,sourceY:t,sourcePosition:n=gE.Bottom,targetX:r,targetY:o,targetPosition:i=gE.Top}){const[a,s]=wA({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=wA({pos:i,x1:r,y1:o,x2:e,y2:t}),[u,d,f,h]=cj({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${s} ${l},${c} ${r},${o}`,u,d,f,h]}function _A(e){return q.memo((({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a,targetPosition:s,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:v})=>{const[y,b,w]=xA({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s}),x=e.isInternal?void 0:t;return ne.jsx(bA,{id:x,path:y,labelX:b,labelY:w,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:v})}))}const kA=_A({isInternal:!1}),SA=_A({isInternal:!0});function EA(e){return q.memo((({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:h=gE.Bottom,targetPosition:p=gE.Top,markerEnd:g,markerStart:m,pathOptions:v,interactionWidth:y})=>{const[b,w,x]=xj({sourceX:n,sourceY:r,sourcePosition:h,targetX:o,targetY:i,targetPosition:p,borderRadius:null==v?void 0:v.borderRadius,offset:null==v?void 0:v.offset}),_=e.isInternal?void 0:t;return ne.jsx(bA,{id:_,path:b,labelX:w,labelY:x,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:m,interactionWidth:y})}))}kA.displayName="SimpleBezierEdge",SA.displayName="SimpleBezierEdgeInternal";const jA=EA({isInternal:!1}),CA=EA({isInternal:!0});function NA(e){return q.memo((({id:t,...n})=>{var r;const o=e.isInternal?void 0:t;return ne.jsx(jA,{...n,id:o,pathOptions:q.useMemo((()=>{var e;return{borderRadius:0,offset:null===(e=n.pathOptions)||void 0===e?void 0:e.offset}}),[null===(r=n.pathOptions)||void 0===r?void 0:r.offset])})}))}jA.displayName="SmoothStepEdge",CA.displayName="SmoothStepEdgeInternal";const AA=NA({isInternal:!1}),OA=NA({isInternal:!0});function RA(e){return q.memo((({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[m,v,y]=vj({sourceX:n,sourceY:r,targetX:o,targetY:i}),b=e.isInternal?void 0:t;return ne.jsx(bA,{id:b,path:m,labelX:v,labelY:y,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})}))}AA.displayName="StepEdge",OA.displayName="StepEdgeInternal";const PA=RA({isInternal:!1}),TA=RA({isInternal:!0});function IA(e){return q.memo((({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a=gE.Bottom,targetPosition:s=gE.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,pathOptions:v,interactionWidth:y})=>{const[b,w,x]=fj({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s,curvature:null==v?void 0:v.curvature}),_=e.isInternal?void 0:t;return ne.jsx(bA,{id:_,path:b,labelX:w,labelY:x,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:y})}))}PA.displayName="StraightEdge",TA.displayName="StraightEdgeInternal";const MA=IA({isInternal:!1}),DA=IA({isInternal:!0});MA.displayName="BezierEdge",DA.displayName="BezierEdgeInternal";const LA={default:DA,straight:TA,step:OA,smoothstep:CA,simplebezier:SA},BA={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},FA=(e,t,n)=>n===gE.Left?e-t:n===gE.Right?e+t:e,zA=(e,t,n)=>n===gE.Top?e-t:n===gE.Bottom?e+t:e,$A="react-flow__edgeupdater";function UA({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:a,type:s}){return ne.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:a,className:ax([$A,`${$A}-${s}`]),cx:FA(t,r,e),cy:zA(n,r,e),r:r,stroke:"transparent",fill:"transparent"})}function WA({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:a,sourcePosition:s,targetPosition:l,onReconnect:c,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){const p=HC(),g=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:r,domNode:o,isValidConnection:i,connectionMode:a,connectionRadius:s,lib:l,onConnectStart:h,onConnectEnd:g,cancelConnection:m,nodeLookup:v,rfId:y,panBy:b,updateConnection:w}=p.getState(),x="target"===t.type;f(!0),null==u||u(e,n,t.type);qj.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:a,connectionRadius:s,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:x,edgeUpdaterType:t.type,lib:l,flowId:y,cancelConnection:m,panBy:b,isValidConnection:i,onConnect:e=>null==c?void 0:c(n,e),onConnectStart:h,onConnectEnd:g,onReconnectEnd:(e,r)=>{f(!1),null==d||d(e,n,t.type,r)},updateConnection:w,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle})},m=()=>h(!0),v=()=>h(!1);return ne.jsxs(ne.Fragment,{children:[(!0===e||"source"===e)&&ne.jsx(UA,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:e=>{var t;return g(e,{nodeId:n.target,id:null!==(t=n.targetHandle)&&void 0!==t?t:null,type:"target"})},onMouseEnter:m,onMouseOut:v,type:"source"}),(!0===e||"target"===e)&&ne.jsx(UA,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:e=>{var t;return g(e,{nodeId:n.source,id:null!==(t=n.sourceHandle)&&void 0!==t?t:null,type:"source"})},onMouseEnter:m,onMouseOut:v,type:"target"})]})}function HA({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,rfId:p,edgeTypes:g,noPanClassName:m,onError:v,disableKeyboardA11y:y}){var b;let w=WC((t=>t.edgeLookup.get(e)));const x=WC((e=>e.defaultEdgeOptions));w=x?{...x,...w}:w;let _=w.type||"default",k=(null==g?void 0:g[_])||LA[_];void 0===k&&(null==v||v("011",JS(_)),_="default",k=LA.default);const S=!!(w.focusable||t&&void 0===w.focusable),E=void 0!==d&&(w.reconnectable||n&&void 0===w.reconnectable),j=!!(w.selectable||r&&void 0===w.selectable),C=q.useRef(null),[N,A]=q.useState(!1),[O,R]=q.useState(!1),P=HC(),{zIndex:T,sourceX:I,sourceY:M,targetX:D,targetY:L,sourcePosition:B,targetPosition:F}=WC(q.useCallback((t=>{const n=t.nodeLookup.get(w.source),r=t.nodeLookup.get(w.target);if(!n||!r)return{zIndex:w.zIndex,...BA};const o=function(e){var t,n,r,o;const{sourceNode:i,targetNode:a}=e;if(!_j(i)||!_j(a))return null;const s=i.internals.handleBounds||kj(i.handles),l=a.internals.handleBounds||kj(a.handles),c=Ej(null!==(t=null==s?void 0:s.source)&&void 0!==t?t:[],e.sourceHandle),u=Ej(e.connectionMode===oE.Strict?null!==(n=null==l?void 0:l.target)&&void 0!==n?n:[]:(null!==(r=null==l?void 0:l.target)&&void 0!==r?r:[]).concat(null!==(o=null==l?void 0:l.source)&&void 0!==o?o:[]),e.targetHandle);var d;if(!c||!u)return null===(d=e.onError)||void 0===d||d.call(e,"008",GS(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const f=(null==c?void 0:c.position)||gE.Bottom,h=(null==u?void 0:u.position)||gE.Top,p=Sj(i,c,f),g=Sj(a,u,h);return{sourceX:p.x,sourceY:p.y,targetX:g.x,targetY:g.y,sourcePosition:f,targetPosition:h}}({id:e,sourceNode:n,targetNode:r,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:t.connectionMode,onError:v}),i=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?a:0)}({selected:w.selected,zIndex:w.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect});return{zIndex:i,...o||BA}}),[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),FC),z=q.useMemo((()=>w.markerStart?`url('#${jj(w.markerStart,p)}')`:void 0),[w.markerStart,p]),$=q.useMemo((()=>w.markerEnd?`url('#${jj(w.markerEnd,p)}')`:void 0),[w.markerEnd,p]);if(w.hidden||null===I||null===M||null===D||null===L)return null;const U=i?e=>{i(e,{...w})}:void 0,W=a?e=>{a(e,{...w})}:void 0,H=s?e=>{s(e,{...w})}:void 0,V=l?e=>{l(e,{...w})}:void 0,K=c?e=>{c(e,{...w})}:void 0;return ne.jsx("svg",{style:{zIndex:T},children:ne.jsxs("g",{className:ax(["react-flow__edge",`react-flow__edge-${_}`,w.className,m,{selected:w.selected,animated:w.animated,inactive:!j&&!o,updating:N,selectable:j}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:i}=P.getState();var a;j&&(P.setState({nodesSelectionActive:!1}),w.selected&&i?(r({nodes:[],edges:[w]}),null===(a=C.current)||void 0===a||a.blur()):n([e]));o&&o(t,w)},onDoubleClick:U,onContextMenu:W,onMouseEnter:H,onMouseMove:V,onMouseLeave:K,onKeyDown:S?t=>{if(!y&&rE.includes(t.key)&&j){const{unselectNodesAndEdges:r,addSelectedEdges:o}=P.getState();var n;if("Escape"===t.key)null===(n=C.current)||void 0===n||n.blur(),r({edges:[w]});else o([e])}}:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===w.ariaLabel?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,"aria-describedby":S?`${ZC}-${p}`:void 0,ref:C,children:[!O&&ne.jsx(k,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:j,deletable:null===(b=w.deletable)||void 0===b||b,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:I,sourceY:M,targetX:D,targetY:L,sourcePosition:B,targetPosition:F,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:z,markerEnd:$,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),E&&ne.jsx(WA,{edge:w,isReconnectable:E,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,sourceX:I,sourceY:M,targetX:D,targetY:L,sourcePosition:B,targetPosition:F,setUpdateHover:A,setReconnecting:R})]})})}const VA=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function qA({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:g}){const{edgesFocusable:m,edgesReconnectable:v,elementsSelectable:y,onError:b}=WC(VA,FC),w=function(e){const t=WC(q.useCallback((t=>{if(!e)return t.edges.map((e=>e.id));const n=[];if(t.width&&t.height)for(const e of t.edges){const r=t.nodeLookup.get(e.source),o=t.nodeLookup.get(e.target);r&&o&&pj({sourceNode:r,targetNode:o,width:t.width,height:t.height,transform:t.transform})&&n.push(e.id)}return n}),[e]),FC);return t}(t);return ne.jsxs("div",{className:"react-flow__edges",children:[ne.jsx(mA,{defaultColor:e,rfId:n}),w.map((e=>ne.jsx(HA,{id:e,edgesFocusable:m,edgesReconnectable:v,elementsSelectable:y,noPanClassName:o,onReconnect:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:g},e)))]})}qA.displayName="EdgeRenderer";const KA=q.memo(qA),ZA=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function YA({children:e}){const t=WC(ZA);return ne.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const GA=e=>{var t;return null===(t=e.panZoom)||void 0===t?void 0:t.syncViewport};function XA(e){return e.connection.inProgress?{...e.connection,to:VE(e.connection.to,e.transform)}:{...e.connection}}function JA(e){return WC(XA,FC)}const QA=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function eO({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:a,isValid:s,inProgress:l}=WC(QA,FC);return!!(i&&o&&l)?ne.jsx("svg",{style:e,width:i,height:a,className:"react-flow__connectionline react-flow__container",children:ne.jsx("g",{className:ax(["react-flow__connection",wE(s)]),children:ne.jsx(tO,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const tO=({style:e,type:t=dE.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:a,fromHandle:s,fromPosition:l,to:c,toNode:u,toHandle:d,toPosition:f}=JA();if(!o)return;if(n)return ne.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:i.x,fromY:i.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:f,connectionStatus:wE(r),toNode:u,toHandle:d});let h="";const p={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:f};switch(t){case dE.Bezier:[h]=fj(p);break;case dE.SimpleBezier:[h]=xA(p);break;case dE.Step:[h]=xj({...p,borderRadius:0});break;case dE.SmoothStep:[h]=xj(p);break;default:[h]=vj(p)}return ne.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};tO.displayName="ConnectionLine";const nO={};function rO(e=nO){q.useRef(e),HC(),q.useEffect((()=>{}),[e])}function oO({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:g,connectionLineComponent:m,connectionLineContainerStyle:v,selectionKeyCode:y,selectionOnDrag:b,selectionMode:w,multiSelectionKeyCode:x,panActivationKeyCode:_,zoomActivationKeyCode:k,deleteKeyCode:S,onlyRenderVisibleElements:E,elementsSelectable:j,defaultViewport:C,translateExtent:N,minZoom:A,maxZoom:O,preventScrolling:R,defaultMarkerColor:P,zoomOnScroll:T,zoomOnPinch:I,panOnScroll:M,panOnScrollSpeed:D,panOnScrollMode:L,zoomOnDoubleClick:B,panOnDrag:F,onPaneClick:z,onPaneMouseEnter:$,onPaneMouseMove:U,onPaneMouseLeave:W,onPaneScroll:H,onPaneContextMenu:V,paneClickDistance:K,nodeClickDistance:Z,onEdgeContextMenu:Y,onEdgeMouseEnter:G,onEdgeMouseMove:X,onEdgeMouseLeave:J,reconnectRadius:Q,onReconnect:ee,onReconnectStart:te,onReconnectEnd:re,noDragClassName:oe,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,nodeExtent:le,rfId:ce,viewport:ue,onViewportChange:de}){return rO(e),rO(t),HC(),q.useRef(!1),q.useEffect((()=>{}),[]),function(e){const t=TN(),n=q.useRef(!1);q.useEffect((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(n),function(e){const t=WC(GA),n=HC();q.useEffect((()=>{e&&(null==t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(ue),ne.jsx(aA,{onPaneClick:z,onPaneMouseEnter:$,onPaneMouseMove:U,onPaneMouseLeave:W,onPaneContextMenu:V,onPaneScroll:H,paneClickDistance:K,deleteKeyCode:S,selectionKeyCode:y,selectionOnDrag:b,selectionMode:w,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:x,panActivationKeyCode:_,zoomActivationKeyCode:k,elementsSelectable:j,zoomOnScroll:T,zoomOnPinch:I,zoomOnDoubleClick:B,panOnScroll:M,panOnScrollSpeed:D,panOnScrollMode:L,panOnDrag:F,defaultViewport:C,translateExtent:N,minZoom:A,maxZoom:O,onSelectionContextMenu:d,preventScrolling:R,noDragClassName:oe,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,onViewportChange:de,isControlledViewport:!!ue,children:ne.jsxs(YA,{children:[ne.jsx(KA,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:a,onReconnect:ee,onReconnectStart:te,onReconnectEnd:re,onlyRenderVisibleElements:E,onEdgeContextMenu:Y,onEdgeMouseEnter:G,onEdgeMouseMove:X,onEdgeMouseLeave:J,reconnectRadius:Q,defaultMarkerColor:P,noPanClassName:ae,disableKeyboardA11y:se,rfId:ce}),ne.jsx(eO,{style:g,type:p,component:m,containerStyle:v}),ne.jsx("div",{className:"react-flow__edgelabel-renderer"}),ne.jsx(fA,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:u,nodeClickDistance:Z,onlyRenderVisibleElements:E,noPanClassName:ae,noDragClassName:oe,disableKeyboardA11y:se,nodeExtent:le,rfId:ce}),ne.jsx("div",{className:"react-flow__viewport-portal"})]})})}oO.displayName="GraphView";const iO=q.memo(oO),aO=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:d}={})=>{var f,h;const p=new Map,g=new Map,m=new Map,v=new Map,y=null!==(f=null!=r?r:t)&&void 0!==f?f:[],b=null!==(h=null!=n?n:e)&&void 0!==h?h:[],w=null!=u?u:[0,0],x=null!=d?d:nE;Mj(m,v,y);const _=Oj(b,p,g,{nodeOrigin:w,nodeExtent:x,elevateNodesOnSelect:!1});let k=[0,0,1];if(a&&o&&i){var S;const e=SE(p,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=ZE(e,o,i,l,c,null!==(S=null==s?void 0:s.padding)&&void 0!==S?S:.1);k=[t,n,r]}return{rfId:"1",width:0,height:0,transform:k,nodes:b,nodesInitialized:_,nodeLookup:p,parentLookup:g,edges:y,edgeLookup:v,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:l,maxZoom:c,translateExtent:nE,nodeExtent:x,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:oE.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:w,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:null!=a&&a,fitViewOptions:s,fitViewResolver:null,connection:{...uE},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:WE,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},sO=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:d})=>{return f=(f,h)=>{async function p(){const{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:i,minZoom:a,maxZoom:s}=h();t&&(await jE({nodes:e,width:o,height:i,panZoom:t,minZoom:a,maxZoom:s},n),null==r||r.resolve(!0),f({fitViewResolver:null}))}return{...aO({nodes:e,edges:t,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:d,defaultNodes:n,defaultEdges:r}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:i}=h(),a=Oj(e,t,n,{nodeOrigin:r,nodeExtent:d,elevateNodesOnSelect:o,checkEquality:!0});i&&a?(p(),f({nodes:e,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):f({nodes:e,nodesInitialized:a})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=h();Mj(t,n,e),f({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=h();t(e),f({hasDefaultNodes:!0})}if(t){const{setEdges:e}=h();e(t),f({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:i,nodeExtent:a,debug:s,fitViewQueued:l}=h(),{changes:c,updatedInternals:u}=function(e,t,n,r,o,i){const a=null==r?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(a),{m22:u}=new window.DOMMatrixReadOnly(c.transform),d=[];for(const f of e.values()){const e=t.get(f.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),s=!0;continue}const r=nj(f.nodeElement),a=e.measured.width!==r.width||e.measured.height!==r.height;if(r.width&&r.height&&(a||!e.internals.handleBounds||f.force)){const c=f.nodeElement.getBoundingClientRect(),h=GE(e.extent)?e.extent:i;let{positionAbsolute:p}=e.internals;e.parentId&&"parent"===e.extent?p=RE(p,r,t.get(e.parentId)):h&&(p=OE(p,h,r));const g={...e,measured:r,internals:{...e.internals,positionAbsolute:p,handleBounds:{source:lj("source",f.nodeElement,c,u,e.id),target:lj("target",f.nodeElement,c,u,e.id)}}};t.set(e.id,g),e.parentId&&Rj(g,t,n,{nodeOrigin:o}),s=!0,a&&(l.push({id:e.id,type:"dimensions",dimensions:r}),e.expandParent&&e.parentId&&d.push({id:e.id,parentId:e.parentId,rect:LE(g,o)}))}}if(d.length>0){const e=Tj(d,t,n,o);l.push(...e)}return{changes:l,updatedInternals:s}}(e,n,r,o,i,a);u&&(function(e,t,n){const r=Aj(Cj,n);for(const o of e.values())if(o.parentId)Rj(o,e,t,r);else{const e=kE(o,r.nodeOrigin),t=GE(o.extent)?o.extent:r.nodeExtent,n=OE(e,t,XE(o));o.internals.positionAbsolute=n}}(n,r,{nodeOrigin:i,nodeExtent:a}),l?(p(),f({fitViewQueued:!1,fitViewOptions:void 0})):f({}),(null==c?void 0:c.length)>0&&(s&&console.log("React Flow: trigger node changes",c),null==t||t(c)))},updateNodePositions:(e,t=!1)=>{const n=[],r=[],{nodeLookup:o,triggerNodeChanges:i}=h();for(const[l,c]of e){const e=o.get(l),i=!!(null!=e&&e.expandParent&&null!=e&&e.parentId&&null!=c&&c.position),u={id:l,type:"position",position:i?{x:Math.max(0,c.position.x),y:Math.max(0,c.position.y)}:c.position,dragging:t};var a,s;i&&e.parentId&&n.push({id:l,parentId:e.parentId,rect:{...c.internals.positionAbsolute,width:null!==(a=c.measured.width)&&void 0!==a?a:0,height:null!==(s=c.measured.height)&&void 0!==s?s:0}}),r.push(u)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=h(),i=Tj(n,o,e,t);r.push(...i)}i(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=h();null!=e&&e.length&&(o&&n(wN(e,r)),i&&console.log("React Flow: trigger node changes",e),null==t||t(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=h();null!=e&&e.length&&(o&&n(xN(e,r)),i&&console.log("React Flow: trigger edge changes",e),null==t||t(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=h();t?o(e.map((e=>_N(e,!0)))):(o(kN(r,new Set([...e]),!0)),i(kN(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=h();t?i(e.map((e=>_N(e,!0)))):(i(kN(n,new Set([...e]))),o(kN(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:a}=h(),s=t||n,l=(e||r).map((e=>{const t=o.get(e.id);return t&&(t.selected=!1),_N(e.id,!1)})),c=s.map((e=>_N(e.id,!1)));i(l),a(c)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=h();null==t||t.setScaleExtent([e,n]),f({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=h();null==t||t.setScaleExtent([n,e]),f({maxZoom:e})},setTranslateExtent:e=>{var t;null===(t=h().panZoom)||void 0===t||t.setTranslateExtent(e),f({translateExtent:e})},setPaneClickDistance:e=>{var t;null===(t=h().panZoom)||void 0===t||t.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=h();if(!o)return;const i=t.reduce(((e,t)=>t.selected?[...e,_N(t.id,!1)]:e),[]),a=e.reduce(((e,t)=>t.selected?[...e,_N(t.id,!1)]:e),[]);n(i),r(a)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:i,nodeExtent:a}=h();e[0][0]===a[0][0]&&e[0][1]===a[0][1]&&e[1][0]===a[1][0]&&e[1][1]===a[1][1]||(Oj(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1}),f({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=h();return async function({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},cancelConnection:()=>{f({connection:{...uE}})},updateConnection:e=>{f({connection:e})},reset:()=>f({...aO()})}},h=Object.is,f?BC(f,h):BC;var f,h};function lO({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,initialMinZoom:a,initialMaxZoom:s,initialFitViewOptions:l,fitView:c,nodeOrigin:u,nodeExtent:d,children:f}){const[h]=q.useState((()=>sO({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:c,minZoom:a,maxZoom:s,fitViewOptions:l,nodeOrigin:u,nodeExtent:d})));return ne.jsx($C,{value:h,children:ne.jsx(RN,{children:f})})}function cO({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:a,fitView:s,fitViewOptions:l,minZoom:c,maxZoom:u,nodeOrigin:d,nodeExtent:f}){return q.useContext(zC)?ne.jsx(ne.Fragment,{children:e}):ne.jsx(lO,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:a,fitView:s,initialFitViewOptions:l,initialMinZoom:c,initialMaxZoom:u,nodeOrigin:d,nodeExtent:f,children:e})}const uO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var dO=CN((function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:a,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:m,onClickConnectEnd:v,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:x,onNodeDoubleClick:_,onNodeDragStart:k,onNodeDrag:S,onNodeDragStop:E,onNodesDelete:j,onEdgesDelete:C,onDelete:N,onSelectionChange:A,onSelectionDragStart:O,onSelectionDrag:R,onSelectionDragStop:P,onSelectionContextMenu:T,onSelectionStart:I,onSelectionEnd:M,onBeforeDelete:D,connectionMode:L,connectionLineType:B=dE.Bezier,connectionLineStyle:F,connectionLineComponent:z,connectionLineContainerStyle:$,deleteKeyCode:U="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:H=!1,selectionMode:V=lE.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:Z=(YE()?"Meta":"Control"),zoomActivationKeyCode:Y=(YE()?"Meta":"Control"),snapToGrid:G,snapGrid:X,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:Q,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:re,nodeOrigin:oe=sN,edgesFocusable:ie,edgesReconnectable:ae,elementsSelectable:se=!0,defaultViewport:le=lN,minZoom:ce=.5,maxZoom:ue=2,translateExtent:de=nE,preventScrolling:fe=!0,nodeExtent:he,defaultMarkerColor:pe="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:me=!0,panOnScroll:ve=!1,panOnScrollSpeed:ye=.5,panOnScrollMode:be=aE.Free,zoomOnDoubleClick:we=!0,panOnDrag:xe=!0,onPaneClick:_e,onPaneMouseEnter:ke,onPaneMouseMove:Se,onPaneMouseLeave:Ee,onPaneScroll:je,onPaneContextMenu:Ce,paneClickDistance:Ne=0,nodeClickDistance:Ae=0,children:Oe,onReconnect:Re,onReconnectStart:Pe,onReconnectEnd:Te,onEdgeContextMenu:Ie,onEdgeDoubleClick:Me,onEdgeMouseEnter:De,onEdgeMouseMove:Le,onEdgeMouseLeave:Be,reconnectRadius:Fe=10,onNodesChange:ze,onEdgesChange:$e,noDragClassName:Ue="nodrag",noWheelClassName:We="nowheel",noPanClassName:He="nopan",fitView:Ve,fitViewOptions:qe,connectOnClick:Ke,attributionPosition:Ze,proOptions:Ye,defaultEdgeOptions:Ge,elevateNodesOnSelect:Xe,elevateEdgesOnSelect:Je,disableKeyboardA11y:Qe=!1,autoPanOnConnect:et,autoPanOnNodeDrag:tt,autoPanSpeed:nt,connectionRadius:rt,isValidConnection:ot,onError:it,style:at,id:st,nodeDragThreshold:lt,viewport:ct,onViewportChange:ut,width:dt,height:ft,colorMode:ht="light",debug:pt,onScroll:gt,...mt},vt){const yt=st||"1",bt=function(e){var t;const[n,r]=q.useState("system"===e?null:e);return q.useEffect((()=>{if("system"!==e)return void r(e);const t=hN(),n=()=>r(null!=t&&t.matches?"dark":"light");return n(),null==t||t.addEventListener("change",n),()=>{null==t||t.removeEventListener("change",n)}}),[e]),null!==n?n:null!==(t=hN())&&void 0!==t&&t.matches?"dark":"light"}(ht),wt=q.useCallback((e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),null==gt||gt(e)}),[gt]);return ne.jsx("div",{"data-testid":"rf__wrapper",...mt,onScroll:wt,style:{...at,...uO},ref:vt,className:ax(["react-flow",o,bt]),id:st,children:ne.jsxs(cO,{nodes:e,edges:t,width:dt,height:ft,fitView:Ve,fitViewOptions:qe,minZoom:ce,maxZoom:ue,nodeOrigin:oe,nodeExtent:he,children:[ne.jsx(iO,{onInit:c,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:x,onNodeDoubleClick:_,nodeTypes:i,edgeTypes:a,connectionLineType:B,connectionLineStyle:F,connectionLineComponent:z,connectionLineContainerStyle:$,selectionKeyCode:W,selectionOnDrag:H,selectionMode:V,deleteKeyCode:U,multiSelectionKeyCode:Z,panActivationKeyCode:K,zoomActivationKeyCode:Y,onlyRenderVisibleElements:J,defaultViewport:le,translateExtent:de,minZoom:ce,maxZoom:ue,preventScrolling:fe,zoomOnScroll:ge,zoomOnPinch:me,zoomOnDoubleClick:we,panOnScroll:ve,panOnScrollSpeed:ye,panOnScrollMode:be,panOnDrag:xe,onPaneClick:_e,onPaneMouseEnter:ke,onPaneMouseMove:Se,onPaneMouseLeave:Ee,onPaneScroll:je,onPaneContextMenu:Ce,paneClickDistance:Ne,nodeClickDistance:Ae,onSelectionContextMenu:T,onSelectionStart:I,onSelectionEnd:M,onReconnect:Re,onReconnectStart:Pe,onReconnectEnd:Te,onEdgeContextMenu:Ie,onEdgeDoubleClick:Me,onEdgeMouseEnter:De,onEdgeMouseMove:Le,onEdgeMouseLeave:Be,reconnectRadius:Fe,defaultMarkerColor:pe,noDragClassName:Ue,noWheelClassName:We,noPanClassName:He,rfId:yt,disableKeyboardA11y:Qe,nodeExtent:he,viewport:ct,onViewportChange:ut}),ne.jsx(fN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:m,onClickConnectEnd:v,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:re,edgesFocusable:ie,edgesReconnectable:ae,elementsSelectable:se,elevateNodesOnSelect:Xe,elevateEdgesOnSelect:Je,minZoom:ce,maxZoom:ue,nodeExtent:he,onNodesChange:ze,onEdgesChange:$e,snapToGrid:G,snapGrid:X,connectionMode:L,translateExtent:de,connectOnClick:Ke,defaultEdgeOptions:Ge,fitView:Ve,fitViewOptions:qe,onNodesDelete:j,onEdgesDelete:C,onDelete:N,onNodeDragStart:k,onNodeDrag:S,onNodeDragStop:E,onSelectionDrag:R,onSelectionDragStart:O,onSelectionDragStop:P,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:He,nodeOrigin:oe,rfId:yt,autoPanOnConnect:et,autoPanOnNodeDrag:tt,autoPanSpeed:nt,onError:it,connectionRadius:rt,isValidConnection:ot,selectNodesOnDrag:Q,nodeDragThreshold:lt,onBeforeDelete:D,paneClickDistance:Ne,debug:pt}),ne.jsx(aN,{onSelectionChange:A}),Oe,ne.jsx(eN,{proOptions:Ye,position:Ze}),ne.jsx(XC,{rfId:yt,disableKeyboardA11y:Qe})]})})}));function fO(){const e=HC();return q.useCallback((t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),o=Array.isArray(t)?t:[t],i=new Map;o.forEach((e=>{const t=null==n?void 0:n.querySelector(`.react-flow__node[data-id="${e}"]`);t&&i.set(e,{id:e,nodeElement:t,force:!0})})),requestAnimationFrame((()=>r(i,{triggerFitView:!1})))}),[])}const hO=eE();function pO({id:e,handleType:t,handleId:n,onConnect:r,onDisconnect:o}={}){const i=GN(),a=null!=e?e:i;if(!a)throw new Error(hO);const s=q.useRef(null),l=WC((e=>e.connectionLookup.get(`${a}${t?n?`-${t}-${n}`:`-${t}`:""}`)),yE);return q.useEffect((()=>{if(s.current&&s.current!==l){const e=null!=l?l:new Map;bE(s.current,e,o),bE(e,s.current,r)}s.current=null!=l?l:new Map}),[l,r,o]),q.useMemo((()=>{var e;return Array.from(null!==(e=null==l?void 0:l.values())&&void 0!==e?e:[])}),[l])}function gO(e){const t=WC(q.useCallback((t=>{var n;const r=[],o=Array.isArray(e),i=o?e:[e];for(const e of i){const n=t.nodeLookup.get(e);n&&r.push({id:n.id,type:n.type,data:n.data})}return o?r:null!==(n=r[0])&&void 0!==n?n:null}),[e]),Dj);return t}function mO({dimensions:e,lineWidth:t,variant:n,className:r}){return ne.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ax(["react-flow__background-pattern",n,r])})}function vO({radius:e,className:t}){return ne.jsx("circle",{cx:e,cy:e,r:e,className:ax(["react-flow__background-pattern","dots",t])})}var yO,bO;(bO=yO||(yO={})).Lines="lines",bO.Dots="dots",bO.Cross="cross";const wO={[yO.Dots]:1,[yO.Lines]:1,[yO.Cross]:6},xO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function _O({id:e,variant:t=yO.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:a,bgColor:s,style:l,className:c,patternClassName:u}){const d=q.useRef(null),{transform:f,patternId:h}=WC(xO,FC),p=r||wO[t],g=t===yO.Dots,m=t===yO.Cross,v=Array.isArray(n)?n:[n,n],y=[v[0]*f[2]||1,v[1]*f[2]||1],b=p*f[2],w=Array.isArray(i)?i:[i,i],x=m?[b,b]:y,_=[w[0]*f[2]||1+x[0]/2,w[1]*f[2]||1+x[1]/2],k=`${h}${e||""}`;return ne.jsxs("svg",{className:ax(["react-flow__background",c]),style:{...l,...LN,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:d,"data-testid":"rf__background",children:[ne.jsx("pattern",{id:k,x:f[0]%y[0],y:f[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:g?ne.jsx(vO,{radius:b/2,className:u}):ne.jsx(mO,{dimensions:x,lineWidth:o,variant:t,className:u})}),ne.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}_O.displayName="Background";const kO=q.memo(_O);function SO(){return ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:ne.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function EO(){return ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:ne.jsx("path",{d:"M0 0h32v4.2H0z"})})}function jO(){return ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:ne.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function CO(){return ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:ne.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function NO(){return ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:ne.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function AO({children:e,className:t,...n}){return ne.jsx("button",{type:"button",className:ax(["react-flow__controls-button",t]),...n,children:e})}const OO=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function RO({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:a,onFitView:s,onInteractiveChange:l,className:c,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":h="React Flow controls"}){const p=HC(),{isInteractive:g,minZoomReached:m,maxZoomReached:v}=WC(OO,FC),{zoomIn:y,zoomOut:b,fitView:w}=TN(),x="horizontal"===f?"horizontal":"vertical";return ne.jsxs(QC,{className:ax(["react-flow__controls",x,c]),position:d,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&ne.jsxs(ne.Fragment,{children:[ne.jsx(AO,{onClick:()=>{y(),null==i||i()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v,children:ne.jsx(SO,{})}),ne.jsx(AO,{onClick:()=>{b(),null==a||a()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:m,children:ne.jsx(EO,{})})]}),n&&ne.jsx(AO,{className:"react-flow__controls-fitview",onClick:()=>{w(o),null==s||s()},title:"fit view","aria-label":"fit view",children:ne.jsx(jO,{})}),r&&ne.jsx(AO,{className:"react-flow__controls-interactive",onClick:()=>{p.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),null==l||l(!g)},title:"toggle interactivity","aria-label":"toggle interactivity",children:g?ne.jsx(NO,{}):ne.jsx(CO,{})}),u]})}RO.displayName="Controls";const PO=q.memo(RO);const TO=q.memo((function({id:e,x:t,y:n,width:r,height:o,style:i,color:a,strokeColor:s,strokeWidth:l,className:c,borderRadius:u,shapeRendering:d,selected:f,onClick:h}){const{background:p,backgroundColor:g}=i||{},m=a||p||g;return ne.jsx("rect",{className:ax(["react-flow__minimap-node",{selected:f},c]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:m,stroke:s,strokeWidth:l},shapeRendering:d,onClick:h?t=>h(t,e):void 0})})),IO=e=>e.nodes.map((e=>e.id)),MO=e=>e instanceof Function?e:()=>e;const DO=q.memo((function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:a,NodeComponent:s,onClick:l}){const{node:c,x:u,y:d,width:f,height:h}=WC((t=>{const{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:i}=n.positionAbsolute,{width:a,height:s}=XE(r);return{node:r,x:o,y:i,width:a,height:s}}),FC);return c&&!c.hidden&&JE(c)?ne.jsx(s,{x:u,y:d,width:f,height:h,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:o,strokeColor:n(c),strokeWidth:i,shapeRendering:a,onClick:l,id:c.id}):null}));var LO=q.memo((function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=TO,onClick:a}){const s=WC(IO,FC),l=MO(t),c=MO(e),u=MO(n),d="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return ne.jsx(ne.Fragment,{children:s.map((e=>ne.jsx(DO,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:a,shapeRendering:d},e)))})}));const BO=e=>!e.hidden,FO=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?FE(SE(e.nodeLookup,{filter:BO}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function zO({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:l,maskColor:c,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:g=!1,zoomable:m=!1,ariaLabel:v="React Flow mini map",inversePan:y,zoomStep:b=10,offsetScale:w=5}){var x,_;const k=HC(),S=q.useRef(null),{boundingRect:E,viewBB:j,rfId:C,panZoom:N,translateExtent:A,flowWidth:O,flowHeight:R}=WC(FO,FC),P=null!==(x=null==e?void 0:e.width)&&void 0!==x?x:200,T=null!==(_=null==e?void 0:e.height)&&void 0!==_?_:150,I=E.width/P,M=E.height/T,D=Math.max(I,M),L=D*P,B=D*T,F=w*D,z=E.x-(L-E.width)/2-F,$=E.y-(B-E.height)/2-F,U=L+2*F,W=B+2*F,H=`react-flow__minimap-desc-${C}`,V=q.useRef(0),K=q.useRef();V.current=D,q.useEffect((()=>{if(S.current&&N)return K.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=S_(e);return{update:function({translateExtent:e,width:i,height:a,zoomStep:s=10,pannable:l=!0,zoomable:c=!0,inversePan:u=!1}){let d=[0,0];const f=HS().on("start",(e=>{var t,n;"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[null!==(t=e.sourceEvent.clientX)&&void 0!==t?t:e.sourceEvent.touches[0].clientX,null!==(n=e.sourceEvent.clientY)&&void 0!==n?n:e.sourceEvent.touches[0].clientY])})).on("zoom",l?o=>{var s,l;const c=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;const f=[null!==(s=o.sourceEvent.clientX)&&void 0!==s?s:o.sourceEvent.touches[0].clientX,null!==(l=o.sourceEvent.clientY)&&void 0!==l?l:o.sourceEvent.touches[0].clientY],h=[f[0]-d[0],f[1]-d[1]];d=f;const p=r()*Math.max(c[2],Math.log(c[2]))*(u?-1:1),g={x:c[0]-h[0]*p,y:c[1]-h[1]*p},m=[[0,0],[i,a]];t.setViewportConstrained({x:g.x,y:g.y,zoom:c[2]},m,e)}:null).on("zoom.wheel",c?e=>{const r=n();if("wheel"!==e.sourceEvent.type||!t)return;const o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,i=r[2]*Math.pow(2,o);t.scaleTo(i)}:null);o.call(f,{})},destroy:function(){o.on("zoom",null)},pointer:E_}}({domNode:S.current,panZoom:N,getTransform:()=>k.getState().transform,getViewScale:()=>V.current}),()=>{var e;null===(e=K.current)||void 0===e||e.destroy()}}),[N]),q.useEffect((()=>{var e;null===(e=K.current)||void 0===e||e.update({translateExtent:A,width:O,height:R,inversePan:y,pannable:g,zoomStep:b,zoomable:m})}),[g,m,y,b,A,O,R]);const Z=h?e=>{var t;const[n,r]=(null===(t=K.current)||void 0===t?void 0:t.pointer(e))||[0,0];h(e,{x:n,y:r})}:void 0,Y=p?q.useCallback(((e,t)=>{const n=k.getState().nodeLookup.get(t).internals.userNode;p(e,n)}),[]):void 0;return ne.jsx(QC,{position:f,style:{...e,"--xy-minimap-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof c?c:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof u?u:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof d?d*D:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof a?a:void 0},className:ax(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:ne.jsxs("svg",{width:P,height:T,viewBox:`${z} ${$} ${U} ${W}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":H,ref:S,onClick:Z,children:[v&&ne.jsx("title",{id:H,children:v}),ne.jsx(LO,{onClick:Y,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:a,nodeComponent:s}),ne.jsx("path",{className:"react-flow__minimap-mask",d:`M${z-F},${$-F}h${U+2*F}v${W+2*F}h${-U-2*F}z\n        M${j.x},${j.y}h${j.width}v${j.height}h${-j.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}zO.displayName="MiniMap";const $O=q.memo(zO);function UO({id:e,top:t,left:n,right:r,bottom:o,...i}){const{getNode:a,setNodes:s,addNodes:l,setEdges:c}=TN(),u=q.useCallback((()=>{const t=a(e);if(!t)return;const n={x:t.position.x+50,y:t.position.y+50};l({...t,selected:!1,dragging:!1,id:`${t.id}-copy`,position:n})}),[e,a,l]),d=q.useMemo((()=>{var t;return(null===(t=a(e))||void 0===t?void 0:t.type)||""}),[e,a]),f=q.useCallback((()=>{s((t=>t.filter((t=>t.id!==e)))),c((t=>t.filter((t=>t.source!==e))))}),[e,s,c]);return ne.jsx("div",{style:{position:"absolute",top:t,left:n,right:r,bottom:o,zIndex:9999},className:"context-menu",...i,children:ne.jsxs("div",{children:[ne.jsxs("p",{children:["node: ",e]}),["entry","output"].includes(d)?ne.jsx(ne.Fragment,{}):ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{color:"medium",onClick:u,children:"duplicate"}),ne.jsx("p",{color:"danger",onClick:f,children:"delete"})]})]})})}function WO(e,t){return Math.floor(Math.random()*(t-e+1))+e}function HO({top:e,left:t,right:n,bottom:r,rawX:o,rawY:i,...a}){const{addNodes:s,getNodes:l,screenToFlowPosition:c}=TN(),u=q.useCallback((e=>{const t=l(),{x:n,y:r}=c({x:o,y:i});let a=""+WO(1,2e3);for(;t.find((e=>e.id===a));)a=""+WO(1,2e3);const u=function(e){switch(e){case"get_system_data":case"get_page_data":case"get_character_data":case"set_system_data":case"set_page_data":case"set_character_data":return{path:"",type:"unknown"};case"open_modal":return{type:"edit_object",title:"edit object",inputType:""};case"create_data_from_type":return{spreadType:{name:"",properties:[]}};case"spread_object":case"add_to_array":case"array_remove":case"array_update":case"array_get":case"filter":case"map":return{inputType:"unknown"};case"string_new":case"new_enum":return{value:""};case"string_includes":case"string_compare":case"string_concat":return{string1:"",string2:""};case"number_to_string":case"floor":return{number:0};case"new_number":return{value:0};case"add":case"subtract":case"divide":case"multiply":return{number1:0,number2:0};case"enum_compare":return{input:""};case"boolean_new":return{value:!1};case"boolean_branch":return{boolean:!1};case"boolean_inverse":return{};case"blueprint_run":return{params:[],returnType:"none",inputs:{},outputs:{}};default:return null}}(e);u&&s({id:a,type:e,data:u,position:{x:n,y:r},selected:!1,dragging:!1})}),[s,l,c]),[d,f]=q.useState(-1);return ne.jsx("div",{className:"absolute bg-black shadow-lg rounded-md p-2 text-sm context-menu",style:{top:e-50,left:t,right:n,bottom:r,zIndex:9999},...a,children:ne.jsxs("ul",{children:[ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(1),onMouseLeave:()=>f(-1),children:["Character",1===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("get_character_data"),children:"Get Character Data"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("set_character_data"),children:"Set Character Data"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(2),onMouseLeave:()=>f(-1),children:["Page",2===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("get_page_data"),children:"Get Page Data"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("set_page_data"),children:"Set Page Data"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(3),onMouseLeave:()=>f(-1),children:["System",3===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("get_system_data"),children:"Get System Data"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("set_system_data"),children:"Set System Data"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(4),onMouseLeave:()=>f(-1),children:["Array",4===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("array_get"),children:"Get Item"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("add_to_array"),children:"Add Item"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("array_remove"),children:"Remove Item"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("array_update"),children:"Update Item"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("filter"),children:"Filter"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("map"),children:"Map"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(5),onMouseLeave:()=>f(-1),children:["Object",5===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("spread_object"),children:"Spread Object"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("create_data_from_type"),children:"Create Object From Type"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(6),onMouseLeave:()=>f(-1),children:["String",6===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("string_new"),children:"New String"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("string_includes"),children:"Includes"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("string_compare"),children:"Compare"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("string_concat"),children:"Concat"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(7),onMouseLeave:()=>f(-1),children:["Numbers",7===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("new_number"),children:"New Number"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("divide"),children:"Divide"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("add"),children:"Add"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("subtract"),children:"Subtract"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("multiply"),children:"Multiply"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("floor"),children:"Floor"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("number_to_string"),children:"Number To String"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(8),onMouseLeave:()=>f(-1),children:["Enums",8===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("new_enum"),children:"New Enum"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("enum_compare"),children:"Compare Enum"})]})]}),ne.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>f(9),onMouseLeave:()=>f(-1),children:["Booleans",9===d&&ne.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("boolean_new"),children:"New Boolean"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("boolean_branch"),children:"Branch"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>u("boolean_inverse"),children:"Inverse"})]})]}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>u("open_modal"),children:"Open Modal"}),ne.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>u("blueprint_run"),children:"Run Blueprint"})]})})}q.memo((function({nodeId:e,position:t,variant:n=eC.Handle,className:r,style:o={},children:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:f,shouldResize:h,onResizeStart:p,onResize:g,onResizeEnd:m}){const v=GN(),y="string"==typeof e?e:v,b=HC(),w=q.useRef(null),x=n===eC.Line?"right":"bottom-right",_=null!=t?t:x,k=q.useRef(null);q.useEffect((()=>{if(w.current&&y)return k.current||(k.current=cC({domNode:w.current,nodeId:y,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:i}=b.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:i}=b.getState(),a=[],s={x:e.x,y:e.y},l=r.get(y);if(l&&l.expandParent&&l.parentId){var c,u,d,h,p,g,m;const t=null!==(c=l.origin)&&void 0!==c?c:i,n=null!==(u=null!==(d=e.width)&&void 0!==d?d:l.measured.width)&&void 0!==u?u:0,f=null!==(h=null!==(p=e.height)&&void 0!==p?p:l.measured.height)&&void 0!==h?h:0,v=Tj([{id:l.id,parentId:l.parentId,rect:{width:n,height:f,...QE({x:null!==(g=e.x)&&void 0!==g?g:l.position.x,y:null!==(m=e.y)&&void 0!==m?m:l.position.y},{width:n,height:f},l.parentId,r,t)}}],r,o,i);a.push(...v),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*f,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:y,type:"position",position:{...s}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:y,type:"dimensions",resizing:!0,setAttributes:!f||("horizontal"===f?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const f of t){const e={...f,type:"position"};a.push(e)}n(a)},onEnd:({width:e,height:t})=>{const n={id:y,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}};b.getState().triggerNodeChanges([n])}})),k.current.update({controlPosition:_,boundaries:{minWidth:s,minHeight:l,maxWidth:c,maxHeight:u},keepAspectRatio:d,resizeDirection:f,onResizeStart:p,onResize:g,onResizeEnd:m,shouldResize:h}),()=>{var e;null===(e=k.current)||void 0===e||e.destroy()}}),[_,s,l,c,u,d,p,g,m,h]);const S=_.split("-"),E=n===eC.Line?"borderColor":"backgroundColor",j=a?{...o,[E]:a}:o;return ne.jsx("div",{className:ax(["react-flow__resize-control","nodrag",...S,n,r]),ref:w,style:j,children:i})}));const VO=ih({characterPage:"Info",modalsPage:"Start",creatorPage:"Start",tab:"character",versionId:""});function qO(e){VO.set((t=>({...t,creatorPage:e})))}function KO(e){VO.set((t=>({...t,characterPage:e})))}function ZO(e){VO.set((t=>({...t,modalsPage:e})))}function YO(e){VO.set((t=>({...t,tab:e})))}const GO=({children:e,title:t})=>ne.jsxs("a",{className:"block max-w-sm p-6 bg-white border border-neutral-200 rounded-lg shadow hover:bg-neutral-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700",children:[ne.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-neutral-900 dark:text-white",children:t}),ne.jsx("div",{className:"font-normal text-neutral-700 dark:text-neutral-400",children:e})]}),XO=async()=>`${await Ah.get("deviceId")||"none"}-${tp()}`,JO=async e=>{const t=await Promise.all(hv.tables.map((t=>t.get(e))));for(let n=0;n<t.length;n++)if(t[n])return!1;return!0},QO=async(e,t,n=!1)=>{try{const{user:r}=Ph.get(),o=r?r.id:"none";let i=null!=t?t:await XO();if(!n)for(;!(await JO(i));)i=await XO();const a={...e,user_id:o,local_id:i,id:n?e.id:void 0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return await hv.versions.put(a),a}catch(J$){console.log("Error creating versioned resource:",J$)}};function eR(e,t,n){return function(e,t,n){var r,o;"function"==typeof e?(r=t||[],o=n):(r=[],o=t);var i=K.useRef({hasResult:!1,result:o,error:null}),a=K.useReducer((function(e){return e+1}),0);a[0];var s=a[1],l=K.useMemo((function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe)throw e===t?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof t.hasValue||t.hasValue()))if("function"==typeof t.getValue)i.current.result=t.getValue(),i.current.hasResult=!0;else{var n=t.subscribe((function(e){i.current.result=e,i.current.hasResult=!0}));"function"==typeof n?n():n.unsubscribe()}return t}),r);if(K.useDebugValue(i.current.result),K.useEffect((function(){var e=l.subscribe((function(e){var t=i.current;null===t.error&&t.result===e||(t.error=null,t.result=e,t.hasResult=!0,s())}),(function(e){var t=i.current;t.error!==e&&(t.error=e,s())}));return"function"==typeof e?e:e.unsubscribe.bind(e)}),r),i.current.error)throw i.current.error;return i.current.result}((function(){return Pp(e)}),t||[],n)}function tR(e){const[t]=q.useMemo((()=>(null==e?void 0:e.split("|"))||[""]),[e]),n=eR((async()=>({hasLooked:!0,edits:await hv.versions.get(null!=e?e:"")})),[e]);q.useEffect((()=>{(async()=>{if(!e)return;if(!n)return;if(n.hasLooked&&n.edits)return;const r=await hv.versions.get(t);r&&await QO(r,e)})()}),[n,e]);return q.useMemo((()=>n&&n.edits?{...n.edits,data:n.edits.data}:void 0),[n])}const nR=q.memo((function({id:e,data:{spreadType:t}}){const{updateNodeData:n}=TN(),r=tR(VO.useValue().versionId);return ne.jsxs(GO,{title:"Create Object From Type",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(Qb,{id:`type-${e}`,label:"Type",value:t.name,onChange:t=>n(e,{spreadType:null==r?void 0:r.data.types.find((e=>e.name===t))}),children:null==r?void 0:r.data.types.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),t.properties.map((e=>ne.jsxs("p",{style:{marginTop:5},children:["(",e.typeData.type,e.typeData.isArray?"[]":"",") ",e.key]},e.key))),ne.jsxs("p",{style:{textAlign:"right"},children:["(",t.name,") output"]}),t.properties.map(((e,t)=>ne.jsx(JN,{type:"target",id:`${e.key}-${e.typeData.type}${e.typeData.isArray?"(Array)":""}`,position:gE.Left,style:{top:129+26*t,bottom:"auto"}},e.key))),ne.jsx(JN,{type:"source",id:`output-${t.name}`,position:gE.Right,style:{top:129+24*t.properties.length,bottom:"auto"}})]})})),rR=q.memo((({id:e,data:{params:t}})=>{const{updateNodeData:n}=TN(),r=fO(),o=tR(VO.useValue().versionId);return q.useEffect((()=>{let i={};for(let e=0;e<t.length;e++){const n=t[e];i[`${n.name}-${n.type}`]=null==o?void 0:o.data.types.find((e=>e.name===n.type))}n(e,{outputs:i}),r(e)}),[t,o]),ne.jsxs(GO,{title:"Entry",children:[ne.jsx(JN,{type:"source",id:"start-node",position:gE.Right,style:{top:30,bottom:"auto"}}),t.map((e=>ne.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",e.type,e.isArray?"[]":"",") ",e.name]},e.name))),t.map(((e,t)=>ne.jsx(JN,{type:"source",id:`${e.name}-${e.type}`,position:gE.Right,style:{top:85+25*t,bottom:"auto"}},e.name)))]})}));function oR(e,t){var n;if(!e)return"unknown";if(!t)return"unknown";const r=t.split("/"),o=r.pop();if(!o)return"unknown";const i=r.reduce(((e,t)=>{if(e)return Array.isArray(e)?(e=e.find((e=>e.name===t)))||void 0:e[t]}),e);if(!i)return;const a=null===(n=i._type)||void 0===n?void 0:n.properties.find((e=>e.key===o));return i._type&&a&&a.typeData.type?a.typeData.isArray?`${a.typeData.type}(Array)`:a.typeData.type:"unknown"}const iR=q.memo((function({id:e,data:{path:t,type:n,outputs:r}}){const{updateNodeData:o}=TN(),i=fO(),a=tR(VO.useValue().versionId),s=q.useCallback((t=>{const n=oR((null==a?void 0:a.data.defaultCharacterData)||{},t),r=n.split("(")[0];o(e,{path:t,type:n,outputs:{[`output-${n}`]:null==a?void 0:a.data.types.find((e=>e.name===r))}}),i(e)}),[e,o,i,a]);return ne.jsxs(GO,{title:"Get Character Data",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(hp,{id:`get-character-${e}`,label:"Path",value:t,onChange:s,isValid:!0,errorMessage:""}),ne.jsxs("p",{children:["Calculated type ",n]}),"unknown"!==n?ne.jsx(JN,{type:"source",id:`output-${n}`,position:gE.Right,style:{bottom:20,top:"auto"}}):null]})}));const aR=q.memo((function({id:e,data:{chosenState:t}}){var n;const{updateNodeData:r}=TN(),o=fO(),i=VO.useValue(),a=tR(i.versionId),s=pO(),l=q.useMemo((()=>s.filter((t=>t.source!==e)).map((e=>e.source))),[s]),c=gO(l),u=q.useMemo((()=>"editor"===i.tab?null==a?void 0:a.data.pages.find((e=>e.name===i.characterPage)):"creator"===i.tab?null==a?void 0:a.data.creator.find((e=>e.name===i.creatorPage)):void 0),[a,i]);return q.useEffect((()=>{let n={};t||(t=(null==u?void 0:u.state[0])||null),t&&(n[`${t.name}-${t.type.type}${t.type.isArray?"(Array)":""}`]=(null==a?void 0:a.data.types.find((e=>e.name===t.type.type)))||null),r(e,{chosenState:t,outputs:n}),o(e)}),[s,c,a,u]),ne.jsxs(GO,{title:"Get Page State",children:[ne.jsx(Qb,{id:`set-state-${e}`,label:"State to grab",value:(null===(n=t)||void 0===n?void 0:n.name)||"",onChange:t=>{const n=null==u?void 0:u.state.find((e=>e.name===t));r(e,{chosenState:n,outputs:{[`${n.name}-${n.type.type}${n.type.isArray?"(Array)":""}`]:null==a?void 0:a.data.types.find((e=>e.name===n.type.type))}}),o(e)},children:null==u?void 0:u.state.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),t?ne.jsxs("p",{className:"text-right",children:[t.type.type,t.type.isArray?"[]":""]}):ne.jsx("p",{className:"text-right",children:"select a page state to get."}),ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),t&&ne.jsx(JN,{type:"source",id:`${t.name}-${t.type.type}${t.type.isArray?"(Array)":""}`,position:gE.Right,style:{top:122,bottom:"auto"}})]})}));const sR=q.memo((function({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=TN(),o=fO(),i=tR(VO.useValue().versionId),a=q.useCallback((t=>{var n;const a=null==i||null===(n=i.data.data.find((e=>e.name===t)))||void 0===n?void 0:n.typeData,s=a?`${a.type}${a.isArray?"(Array)":""}`:"unknown";r(e,{path:t,type:s}),o(e)}),[e,r,o,i]);return q.useEffect((()=>{var n,a;if(t)return;const s=null==i||null===(n=i.data.data[0])||void 0===n?void 0:n.name,l=null==i||null===(a=i.data.data[0])||void 0===a?void 0:a.typeData,c=l?`${l.type}${l.isArray?"(Array)":""}`:"unknown";r(e,{path:s,type:c}),o(e)}),[]),ne.jsxs(GO,{title:"Get System Data",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(Qb,{id:`get-system-${e}`,label:"Data",value:t,onChange:a,children:null==i?void 0:i.data.data.map((e=>ne.jsx("option",{value:e.name,children:e.name})))}),ne.jsxs("p",{children:["Calculated type ",n]}),"unknown"!==n?ne.jsx(JN,{type:"source",id:`output-${n}`,position:gE.Right,style:{bottom:20,top:"auto"}}):null]})})),lR=q.memo((({id:e,data:{type:t,title:n,inputType:r}})=>{const{updateNodeData:o}=TN(),i=fO(),a=tR(VO.useValue().versionId);return pO({handleType:"target",handleId:"data-any",onConnect:t=>{const n=t[0];if(!n)return;if(!n.sourceHandle)return;const r=n.sourceHandle.split("-")[1];r&&(o(e,{inputType:r}),i(e))},onDisconnect:()=>{o(e,{inputType:"unknown"}),i(e)}}),ne.jsxs(GO,{title:"Open Modal",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsxs(Qb,{id:"modal-type",label:"Modal Type",value:t,onChange:t=>o(e,{type:t}),children:[ne.jsx("option",{value:"edit_object",children:"Edit Object"}),ne.jsx("option",{value:"edit_number",children:"Edit Number"}),ne.jsx("option",{value:"edit_string",children:"Edit String"}),null==a?void 0:a.data.modals.map((e=>ne.jsx("option",{value:e.name,children:e.name})))]}),ne.jsx(hp,{id:"modal-title",label:"Modal Title",value:n,onChange:t=>o(e,{title:t}),isValid:!0,errorMessage:""}),ne.jsxs("p",{style:{marginTop:10},children:["input data (",r,")"]}),ne.jsx(JN,{type:"target",id:"data-any",position:gE.Left,style:{top:145,bottom:"auto"}}),ne.jsx("p",{style:{textAlign:"right"},children:"on save"}),ne.jsx(JN,{type:"source",id:"save-node",position:gE.Right,style:{top:168,bottom:"auto"}}),ne.jsxs("p",{style:{textAlign:"right"},children:["data (",r,")"]}),ne.jsx(JN,{type:"source",id:`newdata-${r}`,position:gE.Right,style:{top:192,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:10,textAlign:"right"},children:"on delete"}),ne.jsx(JN,{type:"source",id:"delete-node",position:gE.Right,style:{top:222,bottom:"auto"}})]})}));const cR=q.memo((function({id:e,data:{param:t,inputType:n}}){const{updateNodeData:r}=TN(),o=fO(),i=`${t.name}-${t.isArray?"array":t.type}`;return pO({handleType:"target",handleId:i,onConnect:t=>{const n=t[0];if(!n)return;if(!n.sourceHandle)return;const i=n.sourceHandle.split("-")[1];if(!i)return;const a=i.split("(")[0];a&&(r(e,{inputType:a}),o(e))},onDisconnect:()=>{r(e,{inputType:"any"}),o(e)}}),ne.jsxs(GO,{title:"Output",children:[ne.jsx(JN,{type:"target",id:"end-node",position:gE.Left,style:{top:28,bottom:"auto"}}),ne.jsx("p",{style:{textAlign:"left",marginTop:5},children:t.isArray?`${n}${t.isArray?"(Array)":""}`:t.type}),ne.jsx(JN,{type:"target",id:i,position:gE.Left,style:{top:85,bottom:"auto"}})]})}));const uR=q.memo((function({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=TN(),o=fO(),i=tR(VO.useValue().versionId),a=q.useCallback((t=>{const n=oR((null==i?void 0:i.data.defaultCharacterData)||{},t);r(e,{path:t,type:n}),o(e)}),[e,r,o,i]);return ne.jsxs(GO,{title:"Set Character Data",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(hp,{id:`set-character-${e}`,label:"Path",value:t,onChange:a,isValid:!0,errorMessage:""}),ne.jsxs("p",{children:["Calculated type ",n]}),"unknown"!==n?ne.jsx(JN,{type:"target",id:`input-${n}`,position:gE.Left,style:{bottom:20,top:"auto"}}):null]})}));const dR=q.memo((function({id:e,data:{chosenState:t}}){var n;const{updateNodeData:r}=TN(),o=fO(),i=VO.useValue(),a=tR(i.versionId),s=q.useMemo((()=>"editor"===i.tab?null==a?void 0:a.data.pages.find((e=>e.name===i.characterPage)):"creator"===i.tab?null==a?void 0:a.data.creator.find((e=>e.name===i.creatorPage)):void 0),[a,i]);return q.useEffect((()=>{t||(t=(null==s?void 0:s.state[0])||null),r(e,{chosenState:t})}),[s,t]),ne.jsxs(GO,{title:"Set Page State",children:[ne.jsx(Qb,{id:`set-state-${e}`,label:"State to change",value:(null===(n=t)||void 0===n?void 0:n.name)||"",onChange:t=>{r(e,{chosenState:null==s?void 0:s.state.find((e=>e.name===t))}),o(e)},children:null==s?void 0:s.state.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),t?ne.jsxs("p",{children:[t.type.type,t.type.isArray?"[]":""]}):ne.jsx("p",{children:"select a page state to set."}),ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),t&&ne.jsx(JN,{type:"target",id:`${t.name}-${t.type.type}${t.type.isArray?"(Array)":""}`,position:gE.Left,style:{top:122,bottom:"auto"}})]})}));const fR=q.memo((function({id:e,data:t}){const{updateNodeData:n}=TN();return ne.jsxs(GO,{title:"Set System Data",children:[ne.jsx(hp,{id:"path",label:"Path",placeholder:"path/to/data",value:t.path,onChange:t=>n(e,{path:t}),isValid:!0,errorMessage:""}),ne.jsxs("p",{children:["Calculated type ","unknown"]}),ne.jsx(JN,{type:"target",position:gE.Left}),ne.jsx(JN,{type:"source",position:gE.Right})]})}));const hR=q.memo((function({id:e,data:{inputType:t}}){var n,r;const{updateNodeData:o}=TN(),i=fO();tR(VO.useValue().versionId);const a=pO(),s=q.useMemo((()=>a.filter((t=>t.source!==e)).map((e=>e.source))),[a]),l=gO(s);return q.useEffect((()=>{var n;let r={};for(let t=0;t<a.length;t++){var s,c,u;const n=a[t];if("output"===(n.source===e?"output":"input"))continue;const o=l.find((e=>e.id===n.source));if(null==o||!o.data||null==o||!o.data.outputs)continue;const i=(null==o||null===(s=o.data)||void 0===s?void 0:s.outputs)[null!==(c=n.sourceHandle)&&void 0!==c?c:""];r[null!==(u=n.targetHandle)&&void 0!==u?u:""]=i}const d=null!==(n=r["input-object"])&&void 0!==n?n:{name:"unknown",properties:[]};let f={};for(let e=0;e<(null==t||null===(h=t.properties)||void 0===h?void 0:h.length);e++){var h;const n=t.properties[e];f[`${n.key}-${n.typeData.type}${n.typeData.isArray?"(Array)":""}`]={name:n.typeData.type}}o(e,{inputs:r,inputType:d,outputs:f}),i(e)}),[a,l]),ne.jsxs(GO,{title:"Spread Object",children:[ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",null==t?void 0:t.name]}),ne.jsx("p",{style:{textAlign:"right"},children:"Spread"}),null==t||null===(n=t.properties)||void 0===n?void 0:n.map((e=>ne.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",e.typeData.type,e.typeData.isArray?"[]":"",") ",e.key]},e.key))),ne.jsx(JN,{type:"target",id:"input-object",position:gE.Left,style:{top:80,bottom:"auto"}}),null==t||null===(r=t.properties)||void 0===r?void 0:r.map(((e,t)=>ne.jsx(JN,{type:"source",id:`${e.key}-${e.typeData.type}${e.typeData.isArray?"(Array)":""}`,position:gE.Right,style:{top:130+26*t,bottom:"auto"}},e.key)))]})}));const pR=q.memo((function({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=TN();return ne.jsxs(GO,{title:"String Includes",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"String 1"}),ne.jsx("p",{style:{marginTop:5},children:"String 2"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) Included?"}),ne.jsx(JN,{type:"target",id:"string1-string",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"string2-string",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-boolean",position:gE.Right,style:{top:136,bottom:"auto"}})]})}));const gR=q.memo((function(e){return ne.jsxs(GO,{title:"String Compare",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"String 1"}),ne.jsx("p",{style:{marginTop:5},children:"String 2"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),ne.jsx(JN,{type:"target",id:"string1-string",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"string2-string",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-boolean",position:gE.Right,style:{top:136,bottom:"auto"}})]})}));const mR=q.memo((function({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=TN();return ne.jsxs(GO,{title:"Concat String",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"String 1"}),ne.jsx("p",{style:{marginTop:5},children:"String 2"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(string) concated string"}),ne.jsx(JN,{type:"target",id:"string1-string",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"string2-string",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-string",position:gE.Right,style:{top:136,bottom:"auto"}})]})}));const vR=q.memo((function({id:e,data:{inputType:t}}){const{updateNodeData:n}=TN(),r=fO(),o=tR(VO.useValue().versionId);return pO({handleType:"target",handleId:"base-array",onConnect:t=>{const o=t[0];if(!o)return;if(!o.sourceHandle)return;const i=o.sourceHandle.split("-")[1];if(!i)return;const a=i.split("(")[0];a&&(n(e,{inputType:a}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),q.useEffect((()=>{o&&r(e)}),[o,t]),ne.jsxs(GO,{title:"Remove Item In Array",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{style:{marginTop:5},children:"name (string)"}),ne.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),ne.jsx(JN,{type:"target",id:"base-array",position:gE.Left,style:{top:80,bottom:"auto"}}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",id:"name-string",position:gE.Left,style:{top:106,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`output-${t}(Array)`,position:gE.Right,style:{top:130,bottom:"auto"}})]})]})}));const yR=q.memo((function({id:e,data:{inputType:t}}){const{updateNodeData:n}=TN(),r=fO(),o=tR(VO.useValue().versionId);return pO({handleType:"target",handleId:"base-array",onConnect:t=>{const o=t[0];if(!o)return;if(!o.sourceHandle)return;const i=o.sourceHandle.split("-")[1];if(!i)return;const a=i.split("(")[0];a&&(n(e,{inputType:a}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),q.useEffect((()=>{o&&r(e)}),[o,t]),ne.jsxs(GO,{title:"Add Item To Array",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsxs("p",{style:{marginTop:5},children:["new Item (",t,")"]}),ne.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),ne.jsx(JN,{type:"target",id:"base-array",position:gE.Left,style:{top:80,bottom:"auto"}}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",id:`newItem-${t}`,position:gE.Left,style:{top:106,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`output-${t}(Array)`,position:gE.Right,style:{top:130,bottom:"auto"}})]})]})}));const bR=q.memo((function({id:e,data:{inputType:t}}){const{updateNodeData:n}=TN(),r=fO(),o=tR(VO.useValue().versionId);return pO({handleType:"target",handleId:"input-array",onConnect:t=>{const o=t[0];if(!o)return;if(!o.sourceHandle)return;const i=o.sourceHandle.split("-")[1];if(!i)return;const a=i.split("(")[0];a&&(n(e,{inputType:a}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),q.useEffect((()=>{o&&r(e)}),[o,t]),ne.jsxs(GO,{title:"Filter Array",children:[ne.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),ne.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),ne.jsx("p",{style:{textAlign:"left",marginTop:5},children:"Filtered? (boolean)"}),ne.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"Filtered Array"})]}),ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"input-array",position:gE.Left,style:{top:65,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"loop-node",position:gE.Right,style:{top:90,bottom:"auto"}}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",id:"loopcompleted-node",position:gE.Left,style:{top:125,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"filtered?-boolean",position:gE.Left,style:{top:150,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`output-${t}`,position:gE.Right,style:{top:188,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"completed-node",position:gE.Right,style:{top:228,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`filterd-${t}(Array)`,position:gE.Right,style:{top:255,bottom:"auto"}})]})]})}));const wR=q.memo((function({id:e,data:{inputType:t,mapType:n}}){const{updateNodeData:r}=TN(),o=fO(),i=tR(VO.useValue().versionId);return pO({handleType:"target",handleId:"input-array",onConnect:t=>{const n=t[0];if(!n)return;if(!n.sourceHandle)return;const i=n.sourceHandle.split("-")[1];if(!i)return;const a=i.split("(")[0];a&&(r(e,{inputType:a}),o(e))},onDisconnect:()=>{r(e,{inputType:"unknown"}),o(e)}}),ne.jsxs(GO,{title:"Map Array",children:[ne.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),ne.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),ne.jsx(Qb,{id:`map-type-${e}`,label:"Input Type",value:n,onChange:t=>{r(e,{mapType:t}),o(e)},children:null==i?void 0:i.data.types.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),ne.jsxs("p",{style:{textAlign:"left",marginTop:5},children:["item (",n,")"]}),ne.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"New Array"})]}),ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"input-array",position:gE.Left,style:{top:65,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"loop-node",position:gE.Right,style:{top:90,bottom:"auto"}}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",id:"loopcompleted-node",position:gE.Left,style:{top:125,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:`newitem-${t}`,position:gE.Left,style:{top:150,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`output-${t}`,position:gE.Right,style:{top:188,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"completed-node",position:gE.Right,style:{top:228,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`filterd-${n}(Array)`,position:gE.Right,style:{top:255,bottom:"auto"}})]})]})}));const xR=q.memo((function({id:e,data:{inputType:t}}){const{updateNodeData:n}=TN(),r=fO(),o=tR(VO.useValue().versionId);return pO({handleType:"target",handleId:"base-array",onConnect:t=>{const o=t[0];if(!o)return;if(!o.sourceHandle)return;const i=o.sourceHandle.split("-")[1];if(!i)return;const a=i.split("(")[0];a&&(n(e,{inputType:a}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),q.useEffect((()=>{o&&r(e)}),[o,t]),ne.jsxs(GO,{title:"Update Item In Array",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{style:{marginTop:5},children:"name (string)"}),ne.jsxs("p",{style:{marginTop:10},children:["new Item (",t,")"]}),ne.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),ne.jsx(JN,{type:"target",id:"base-array",position:gE.Left,style:{top:80,bottom:"auto"}}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",id:"name-string",position:gE.Left,style:{top:106,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:`newItem-${t}`,position:gE.Left,style:{top:138,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`output-${t}(Array)`,position:gE.Right,style:{top:162,bottom:"auto"}})]})]})})),_R=dv.object({type:dv.string(),gen:dv.any().optional(),useTextArea:dv.boolean().optional(),isArray:dv.boolean().optional(),options:dv.array(dv.string()).optional(),outputType:dv.string().optional(),isOutputAnArray:dv.boolean().optional(),inputs:dv.array(dv.any()).optional()}),kR=dv.object({name:dv.string(),typeData:_R,data:dv.any()}),SR=dv.object({name:dv.string(),blueprint:dv.object({nodes:dv.array(dv.any()),edges:dv.array(dv.any())}),lexical:dv.string(),state:dv.array(dv.object({name:dv.string(),type:_R,value:dv.any()}))}),ER=dv.object({name:dv.string(),properties:dv.array(dv.object({key:dv.string(),typeData:_R}))}),jR=dv.object({name:dv.string(),description:dv.string(),blueprint:dv.object({nodes:dv.array(dv.any()),edges:dv.array(dv.any())})});dv.object({creator:dv.array(SR),modals:dv.array(SR),pages:dv.array(SR),version:dv.string(),data:dv.array(kR),defaultCharacterData:dv.any(),types:dv.array(ER),actions:dv.array(jR)});const CR=dv.object({id:dv.string({invalid_type_error:"id must be a string"}).max(100,"id cannot be longer than 100 characters").optional(),local_id:dv.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:dv.string(),name:dv.string(),forked_from:dv.string().nullable().optional(),version:dv.string().optional(),created_at:dv.string().datetime({offset:!0}),updated_at:dv.string().datetime({offset:!0}),deleted_at:dv.string().datetime({offset:!0}).nullable().optional()});const NR=q.memo((function({id:e,data:{inputType:t}}){const{updateNodeData:n}=TN(),r=fO(),o=tR(VO.useValue().versionId),i=pO(),a=q.useMemo((()=>i.filter((t=>t.source!==e)).map((e=>e.source))),[i]),s=gO(a);return q.useEffect((()=>{var t;let a={};for(let n=0;n<i.length;n++){var l,c,u;const t=i[n];if("output"===(t.source===e?"output":"input"))continue;const r=s.find((e=>e.id===t.source));if(null==r||!r.data||null==r||!r.data.outputs)continue;console.log(t.sourceHandle);const o=(null==r||null===(l=r.data)||void 0===l?void 0:l.outputs)[null!==(c=t.sourceHandle)&&void 0!==c?c:""];console.log(o),a[null!==(u=t.targetHandle)&&void 0!==u?u:""]=o}console.log(a);const d=(null!==(t=a["base-array"])&&void 0!==t?t:{name:"unknown"}).name;n(e,{inputs:a,inputType:d,outputs:{[`output-${d}`]:null==o?void 0:o.data.types.find((e=>e.name===d))}}),r(e)}),[i,s,CR]),q.useEffect((()=>{o&&r(e)}),[o,t]),ne.jsxs(GO,{title:"Get Item In Array",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{style:{marginTop:5},children:"name (string)"}),ne.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t," Item"]})]}),ne.jsx(JN,{type:"target",id:"base-array",position:gE.Left,style:{top:80,bottom:"auto"}}),"unknown"!==t&&ne.jsxs(ne.Fragment,{children:[ne.jsx(JN,{type:"target",id:"name-string",position:gE.Left,style:{top:106,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:`output-${t}`,position:gE.Right,style:{top:130,bottom:"auto"}})]})]})}));const AR=q.memo((function({id:e,data:{value:t}}){const{updateNodeData:n}=TN();return ne.jsxs(GO,{title:"Number",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(hp,{id:`number-${e}`,label:"String Value",value:t.toString(),onChange:t=>n(e,{value:t}),isValid:!0,errorMessage:""}),ne.jsx(JN,{type:"source",id:"output-number",position:gE.Right,style:{top:100,bottom:"auto"}})]})}));const OR=q.memo((function(e){return ne.jsxs(GO,{title:"Subtract",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"number 1"}),ne.jsx("p",{style:{marginTop:5},children:"number 2"}),ne.jsx("p",{style:{marginTop:5},children:"output"}),ne.jsx(JN,{type:"target",id:"number1-number",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"number2-number",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-number",position:gE.Right,style:{top:135,bottom:"auto"}})]})}));const RR=q.memo((function(e){return ne.jsxs(GO,{title:"Divide",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"number 1"}),ne.jsx("p",{style:{marginTop:5},children:"number 2"}),ne.jsx("p",{style:{marginTop:5},children:"output"}),ne.jsx(JN,{type:"target",id:"number1-number",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"number2-number",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-number",position:gE.Right,style:{top:135,bottom:"auto"}})]})}));const PR=q.memo((function(e){return ne.jsxs(GO,{title:"Floor",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"number"}),ne.jsx("p",{style:{marginTop:5},children:"output"}),ne.jsx(JN,{type:"target",id:"input-number",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-number",position:gE.Right,style:{top:110,bottom:"auto"}})]})}));const TR=q.memo((function(e){return ne.jsxs(GO,{title:"Add",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"number 1"}),ne.jsx("p",{style:{marginTop:5},children:"number 2"}),ne.jsx("p",{style:{marginTop:5},children:"output"}),ne.jsx(JN,{type:"target",id:"number1-number",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"number2-number",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-number",position:gE.Right,style:{top:135,bottom:"auto"}})]})}));const IR=q.memo((function(e){return ne.jsxs(GO,{title:"Multiply",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"number 1"}),ne.jsx("p",{style:{marginTop:5},children:"number 2"}),ne.jsx("p",{style:{marginTop:5},children:"output"}),ne.jsx(JN,{type:"target",id:"number1-number",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"number2-number",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-number",position:gE.Right,style:{top:135,bottom:"auto"}})]})}));const MR=q.memo((function(e){return ne.jsxs(GO,{title:"Number To String",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"number"}),ne.jsx("p",{style:{marginTop:5,textAlign:"right"},children:"string"}),ne.jsx(JN,{type:"target",id:"input-number",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-string",position:gE.Right,style:{top:110,bottom:"auto"}})]})}));const DR=q.memo((function(e){return ne.jsxs(GO,{title:"Enum Compare",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"Enum 1"}),ne.jsx("p",{style:{marginTop:5},children:"Enum 2"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),ne.jsx(JN,{type:"target",id:"enum1-enum",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"target",id:"enum2-enum",position:gE.Left,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"output-boolean",position:gE.Right,style:{top:136,bottom:"auto"}})]})}));const LR=q.memo((function({id:e,data:{value:t}}){const{updateNodeData:n}=TN();return ne.jsxs(GO,{title:"Enum",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(hp,{id:`enum-${e}`,label:"String Value",value:t,onChange:t=>n(e,{value:t}),isValid:!0,errorMessage:""}),ne.jsx(JN,{type:"source",id:"output-enum",position:gE.Right,style:{top:100,bottom:"auto"}})]})}));const BR=q.memo((function(e){return ne.jsxs(GO,{title:"Branch",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"true"}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"false"}),ne.jsx(JN,{type:"target",id:"input-boolean",position:gE.Left,style:{top:85,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"true-node",position:gE.Right,style:{top:110,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"false-node",position:gE.Right,style:{top:136,bottom:"auto"}})]})}));const FR=q.memo((function(e){return ne.jsxs(GO,{title:"Inverse Boolean",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),ne.jsx(JN,{type:"target",id:"input-boolean",position:gE.Left,style:{top:80,bottom:"auto"}}),ne.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) output"}),ne.jsx(JN,{type:"source",id:"output-boolean",position:gE.Right,style:{top:55,bottom:"auto"}})]})}));const zR=q.memo((function({id:e,data:{value:t}}){const{updateNodeData:n}=TN();return ne.jsxs(GO,{title:"String",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(hp,{id:`string-${e}`,label:"String Value",value:t,onChange:t=>n(e,{value:t}),isValid:!0,errorMessage:""}),ne.jsx(JN,{type:"source",id:"output-string",position:gE.Right,style:{top:100,bottom:"auto"}})]})}));const $R=q.memo((function({id:e,data:{value:t}}){const{updateNodeData:n}=TN();return ne.jsxs(GO,{title:"Boolean",children:[ne.jsx(JN,{type:"target",id:"prev-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx(ix,{id:`boolean-${e}`,label:"Value",checked:t,onChange:t=>n(e,{value:t})}),ne.jsx(JN,{type:"source",id:"output-boolean",position:gE.Right,style:{top:100,bottom:"auto"}})]})}));function UR(e){const t=e.nodes.find((e=>"output"===e.type));return t.data.inputType}const WR=q.memo((({id:e,data:{params:t,returnType:n,inputs:r,outputs:o}})=>{const{updateNodeData:i}=TN(),a=fO(),s=pO(),l=q.useMemo((()=>s.filter((t=>t.source!==e)).map((e=>e.source))),[s]),c=gO(l);return q.useEffect((()=>{var t;let n={};for(let i=0;i<s.length;i++){var r;const t=s[i];if("output"===(t.source===e?"output":"input"))continue;const o=c.find((e=>e.id===t.source));if(null!=o&&o.data||null!=o&&o.data.outputs)continue;const a=(null==o||null===(r=o.data)||void 0===r?void 0:r.outputs)[t.sourceHandle||""];n[t.targetHandle||""]=a}const o=null===(t=n["data-blueprint"])||void 0===t?void 0:t.data;let l=[],u="none";o&&(l=function(e){return rw(e).data.params}(o),u=UR(o)),i(e,{inputs:n,params:l,returnType:u}),a(e)}),[s,c]),ne.jsxs(GO,{title:"Run Blueprint",children:[ne.jsx(JN,{type:"target",id:"from-node",position:gE.Left,style:{top:30,bottom:"auto"}}),ne.jsx(JN,{type:"source",id:"next-node",position:gE.Right,style:{top:30,bottom:"auto"}}),ne.jsx("p",{style:{marginTop:10},children:"blueprint"}),ne.jsx(JN,{type:"target",id:"data-blueprint",position:gE.Left,style:{top:60,bottom:"auto"}}),t.map(((e,t)=>{const n=`${e.type}${e.isArray?"(Array)":""}`;return ne.jsxs("div",{children:[ne.jsxs("p",{children:[e.name," ",n]}),ne.jsx(JN,{type:"target",id:`${e.name}-${n}`,position:gE.Left,style:{top:70+10*t,bottom:"auto"}})]},e.name)})),"none"!==n&&ne.jsxs("div",{children:[ne.jsxs("p",{children:["output ",n]}),ne.jsx(JN,{type:"source",id:`output-${n}`,position:gE.Right,style:{top:80+10*t.length,bottom:"auto"}})]})]})})),HR={entry:rR,output:cR,get_character_data:iR,set_character_data:uR,get_page_data:aR,set_page_data:dR,get_system_data:sR,set_system_data:fR,add_to_array:yR,array_remove:vR,array_update:xR,array_get:NR,filter:bR,map:wR,spread_object:hR,create_data_from_type:nR,string_new:zR,string_includes:pR,string_compare:gR,string_concat:mR,new_number:AR,number_to_string:MR,divide:RR,add:TR,subtract:OR,multiply:IR,floor:PR,new_enum:LR,enum_compare:DR,boolean_new:$R,boolean_branch:BR,boolean_inverse:FR,open_modal:lR,blueprint_run:WR};const VR=e=>{if(!e.sourceHandle||!e.targetHandle)return!1;const t=e.sourceHandle.split("-")[1],n=e.targetHandle.split("-")[1];return!(!t||!n)&&("object"===n&&!["string","number","boolean","enum","blueprint"].includes(t)||(!("array"!==n||!t.endsWith("(Array)"))||("any"===n||"any"===t||t===n)))},qR=({id:e,data:t,onSave:n})=>{const[r,o]=q.useState(null),[i,a]=q.useState(null),s=q.useRef(null),{nodes:l,edges:c,onNodesChange:u,onEdgesChange:d,onConnect:f}=function(e){const[t,n]=q.useState([]),[r,o]=q.useState([]);return q.useEffect((()=>{n(e.nodes),o(e.edges)}),[e]),{nodes:t,edges:r,onNodesChange:function(e){n(wN(e,t))},onEdgesChange:function(e){o(xN(e,r))},onConnect:function(e){o(mj(e,r))}}}(t),h=q.useCallback(((e,t)=>{if(e.preventDefault(),!s||!s.current)return;const n=s.current.getBoundingClientRect();o({id:t.id,top:e.clientY<n.height-200&&e.clientY,left:e.clientX<n.width-200&&e.clientX,right:e.clientX>=n.width-200&&n.width-e.clientX,bottom:e.clientY>=n.height-200&&n.height-e.clientY}),a(null)}),[o]),p=q.useCallback((async({nodes:e,edges:t})=>!e.find((e=>["entry","output"].includes(e.type)))),[]),g=q.useCallback((e=>{if(e.preventDefault(),!s||!s.current)return;const t=s.current.getBoundingClientRect();a({top:e.clientY<t.height-200&&e.clientY,left:e.clientX<t.width-200&&e.clientX,right:e.clientX>=t.width-200&&t.width-e.clientX,bottom:e.clientY>=t.height-200&&t.height-e.clientY,rawX:e.clientX,rawY:e.clientY}),o(null)}),[a]),m=q.useCallback((()=>{o(null),a(null)}),[o,a]);return ne.jsx("div",{className:"flex z-50 absolute top-0 left-0 w-screen h-screen",children:ne.jsxs(dO,{ref:s,nodes:l,edges:c,onNodesChange:u,onEdgesChange:d,onConnect:f,onBeforeDelete:p,isValidConnection:VR,onPaneClick:m,onNodeContextMenu:h,onPaneContextMenu:g,nodeTypes:HR,colorMode:"system",children:[ne.jsx($O,{}),ne.jsx(kO,{}),ne.jsx(PO,{}),r&&ne.jsx(UO,{onClick:m,...r}),i&&ne.jsx(HO,{onClick:m,...i}),ne.jsxs(QC,{position:"top-right",children:[ne.jsx(sp,{color:"danger",onClick:()=>hh(e),children:"Close"}),ne.jsx(sp,{color:"primary",onClick:()=>{n({nodes:l,edges:c}),hh(e)},children:"Confirm"})]})]})})};function KR({id:e,title:t,onDelete:n,onSave:r,data:o,types:i,type:a,typeData:s}){const[l,c]=q.useState(null),u=q.useCallback((()=>hh(e)),[e]),d=(e,t,n)=>{c(Yw(t,(t=>(e?aw(t,e,n):t=n,t))))};return q.useEffect((()=>{c(o||null)}),[o,c]),l?ne.jsxs(lp,{isOpen:!0,onClose:u,children:[ne.jsx(dp,{title:t,onClose:u}),ne.jsx(cp,{children:a&&s?YR(i,a,l,l,s,"",d):ZR(l,i,d)}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:()=>{n&&n(),u()},children:n?"Delete":"Close"}),ne.jsx(sp,{color:"primary",onClick:()=>{r(l),u()},children:"Update"})]})]}):ne.jsx(ne.Fragment,{})}function ZR(e,t,n){return ne.jsx("div",{children:e._type.properties.map((r=>{const o=r.key,i=e[o];let a=r.typeData.type;return ne.jsx("div",{children:YR(t,a,i,e,r.typeData,o,n)},o)}))})}function YR(e,t,n,r,o,i,a){var s;const l=e.find((e=>e.name===t));if(t&&o.isArray)return ne.jsx(GR,{types:e,type:l,title:i,data:n,onAdd:e=>a(i,r,[...n,e]),onChange:(e,t)=>a(e,r,t),onDelete:e=>a(i,r,n.filter((t=>t.name!==e)))});switch(t){case"string":return o.useTextArea?ne.jsx(ox,{id:i,label:i,value:n,onChange:e=>a(i,r,e)}):ne.jsx(hp,{id:i,label:i,isValid:!0,errorMessage:"",value:n,onChange:e=>a(i,r,e)});case"number":return ne.jsx(hp,{id:i,label:i,isValid:!0,errorMessage:"",value:n,onChange:e=>a(i,r,+e)});case"boolean":return ne.jsx(ix,{id:i,label:i,checked:n,onChange:e=>a(i,r,e)});case"enum":return ne.jsx(Qb,{id:i,label:i,value:n,onChange:e=>a(i,r,e),children:null===(s=o.options)||void 0===s?void 0:s.map((e=>ne.jsx("option",{value:e,children:e},e)))});case"blueprint":return ne.jsxs(sp,{color:"light",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:n,onSave:e=>a(i,r,e)}))),children:["Edit ",i]},i);default:return ne.jsxs("div",{className:"mb-2",children:[ne.jsx("p",{className:"my-2",children:i}),ne.jsx(rx,{}),ne.jsx("div",{className:"h-2"}),l.properties.map((t=>{var o;return YR(e,t.typeData.type,null!==(o=n[t.key])&&void 0!==o?o:"",r,t.typeData,t.key,((e,t,n)=>{a(`${i}/${e}`,t,n)}))}))]},i)}}function GR({title:e,data:t,type:n,types:r,onAdd:o,onChange:i,onDelete:a}){const[s,l]=q.useState(null);return ne.jsxs("div",{className:"mt-3",children:[ne.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[ne.jsx("p",{children:e}),ne.jsx("p",{onClick:()=>o(Qw(r,n)),children:"Add"})]}),ne.jsx(rx,{}),ne.jsx("div",{className:"flex flex-col gap-1 mt-3",children:t.map((n=>ne.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>fh("edit-object",(({id:o})=>ne.jsx(KR,{id:o,title:`Edit ${n.name}`,types:r,onDelete:()=>a(n.name),onSave:r=>{const o=[...t],a=o.findIndex((e=>e.name===n.name));o[a]=r,i(`${e}`,o)},data:n}))),children:ne.jsx("p",{children:n.name})},n.name)))})]},null==s?void 0:s.name)}function XR({id:e,data:t,title:n="Edit Number",onSave:r}){const[o,i]=q.useState("");q.useEffect((()=>{t&&i(t)}),[t]);const a=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:a,children:[ne.jsx(dp,{title:n,onClose:a}),ne.jsx(cp,{children:ne.jsx(hp,{type:"number",id:"name",label:"Name",placeholder:"baba yaga",value:o,onChange:i,isValid:!0,errorMessage:""})}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:a,children:"Delete"}),ne.jsx(sp,{color:"primary",onClick:()=>{o&&(r(o),a())},children:"Update"})]})]})}function JR({id:e,data:t,title:n="Edit string",onSave:r,onDelete:o}){const[i,a]=q.useState(t),s=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:s,children:[ne.jsx(dp,{title:n,onClose:s}),ne.jsx(cp,{children:ne.jsx(hp,{id:"name",label:"String",placeholder:"baba yaga",value:i,onChange:a,isValid:!0,errorMessage:""})}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:s,children:o?"Delete":"Close"}),ne.jsx(sp,{color:"primary",onClick:()=>{i&&(r(i),s())},children:"Update"})]})]})}var QR,eP={exports:{}},tP={exports:{}},nP={exports:{}},rP={},oP={};var iP,aP,sP,lP,cP={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function uP(){return iP||(iP=1,cP.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-u)-1,h>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=f,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=f,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},cP.write=function(e,t,n,r,o,i){var a,s,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*g}),cP}
/*!
       * The buffer module from node.js, for the browser.
       *
       * @author   Feross Aboukhadijeh <https://feross.org>
       * @license  MIT
       */function dP(){return aP||(aP=1,function(e){const t=function(){if(QR)return oP;QR=1,oP.byteLength=function(e){var t=i(e),n=t[0],r=t[1];return 3*(n+r)/4-r},oP.toByteArray=function(e){var r,o,a=i(e),s=a[0],l=a[1],c=new n(function(e,t,n){return 3*(t+n)/4-n}(0,s,l)),u=0,d=l>0?s-4:s;for(o=0;o<d;o+=4)r=t[e.charCodeAt(o)]<<18|t[e.charCodeAt(o+1)]<<12|t[e.charCodeAt(o+2)]<<6|t[e.charCodeAt(o+3)],c[u++]=r>>16&255,c[u++]=r>>8&255,c[u++]=255&r;return 2===l&&(r=t[e.charCodeAt(o)]<<2|t[e.charCodeAt(o+1)]>>4,c[u++]=255&r),1===l&&(r=t[e.charCodeAt(o)]<<10|t[e.charCodeAt(o+1)]<<4|t[e.charCodeAt(o+2)]>>2,c[u++]=r>>8&255,c[u++]=255&r),c},oP.fromByteArray=function(t){for(var n,r=t.length,o=r%3,i=[],s=16383,l=0,c=r-o;l<c;l+=s)i.push(a(t,l,l+s>c?c:l+s));return 1===o?(n=t[r-1],i.push(e[n>>2]+e[n<<4&63]+"==")):2===o&&(n=(t[r-2]<<8)+t[r-1],i.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"=")),i.join("")};for(var e=[],t=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)e[o]=r[o],t[r.charCodeAt(o)]=o;function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(t,n,r){for(var o,i,a=[],s=n;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(e[(i=o)>>18&63]+e[i>>12&63]+e[i>>6&63]+e[63&i]);return a.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,oP}(),n=uP(),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|h(e,t);let r=i(n);const o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);const o=function(e){if(a.isBuffer(e)){const t=0|f(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Z(e.length)?i(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),i(e<0?0:0|f(e))}function u(e){const t=e.length<0?0:0|f(e.length),n=i(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(o)return r?-1:H(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,o){let i,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let r=-1;for(i=n;i<s;i++)if(c(e,i)===c(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===l)return r*a}else-1!==r&&(i-=i-r),r=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){let n=!0;for(let r=0;r<l;r++)if(c(e,i+r)!==c(t,r)){n=!1;break}if(n)return i}return-1}function y(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=t.length;let a;for(r>i/2&&(r=i/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(Z(r))return a;e[n+a]=r}return a}function b(e,t,n,r){return q(H(t,e.length-n),e,n,r)}function w(e,t,n,r){return q(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return q(V(t),e,n,r)}function _(e,t,n,r){return q(function(e,t){let n,r,o;const i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function k(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function S(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;for(;o<n;){const t=e[o];let i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=n){let n,r,s,l;switch(a){case 1:t<128&&(i=t);break;case 2:n=e[o+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(i=l));break;case 3:n=e[o+1],r=e[o+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:n=e[o+1],r=e[o+2],s=e[o+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(i=l))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(J$){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(K(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=a.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))o+t.length>r.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!a.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,o){if(K(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const l=Math.min(i,s),c=this.slice(r,o),u=e.slice(t,n);for(let a=0;a<l;++a)if(c[a]!==u[a]){i=c[a],s=u[a];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function j(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function C(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function N(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let i=t;i<n;++i)o+=Y[e[i]];return o}function A(e,t,n){const r=e.slice(t,n);let o="";for(let i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,o){z(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function T(e,t,n,r,o){z(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function I(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,r,o,i){return t=+t,r>>>=0,i||I(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function D(e,t,r,o,i){return t=+t,r>>>=0,i||I(e,0,r,8),n.write(e,t,r,o,52,8),r+8}a.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=G((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||U(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),a.prototype.readBigUInt64BE=G((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||U(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=G((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||U(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),a.prototype.readBigInt64BE=G((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||U(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=G((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=G((function(e,t=0){return T(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let o=0,i=1,a=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=G((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=G((function(e,t=0){return T(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const i=a.isBuffer(e)?e:a.from(e,r),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%s]}return this};const L={};function B(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function z(e,t,n,r,o,i){if(e>n||e<t){const n="bigint"==typeof t?"n":"";let r;throw r=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`,new L.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){$(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||U(t,e.length-(n+1))}(r,o,i)}function $(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function U(e,t,n){if(Math.floor(e)!==e)throw $(e,n),new L.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}B("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),B("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),B("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=F(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=F(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function H(e,t){let n;t=t||1/0;const r=e.length;let o=null;const i=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function G(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}}(rP)),rP}function fP(){if(lP)return sP;lP=1;class e extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}return sP={AggregateError:e,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error:Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Boolean:Boolean,Uint8Array:Uint8Array},sP}var hP,pP,gP,mP,vP={exports:{}};function yP(){return pP?hP:(pP=1,hP={format:(e,...t)=>e.replace(/%([sdifj])/g,(function(...[e,n]){const r=t.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"==typeof r){return`${r.constructor!==Object?r.constructor.name:""} {}`.trim()}return r.toString()})),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}})}function bP(){if(mP)return gP;mP=1;const{format:e,inspect:t}=yP(),{AggregateError:n}=fP(),r=globalThis.AggregateError||n,o=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,s={};function l(e,t){if(!e)throw new s.ERR_INTERNAL_ASSERTION(t)}function c(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function u(t,n,r){r||(r=Error);class i extends r{constructor(...r){super(function(t,n,r){if("function"==typeof n)return l(n.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n.length}).`),n(...r);const o=(n.match(/%[dfijoOs]/g)||[]).length;return l(o===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${o}).`),0===r.length?n:e(n,...r)}(t,n,r))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=t,i.prototype[o]=!0,s[t]=i}function d(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class f extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new s.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}return u("ERR_ASSERTION","%s",Error),u("ERR_INVALID_ARG_TYPE",((e,n,r)=>{l("string"==typeof e,"'name' must be a string"),Array.isArray(n)||(n=[n]);let o="The ";e.endsWith(" argument")?o+=`${e} `:o+=`"${e}" ${e.includes(".")?"property":"argument"} `,o+="must be ";const s=[],c=[],u=[];for(const t of n)l("string"==typeof t,"All expected entries have to be of type string"),i.includes(t)?s.push(t.toLowerCase()):a.test(t)?c.push(t):(l("object"!==t,'The value "object" should be written as "Object"'),u.push(t));if(c.length>0){const e=s.indexOf("object");-1!==e&&(s.splice(s,e,1),c.push("Object"))}if(s.length>0){switch(s.length){case 1:o+=`of type ${s[0]}`;break;case 2:o+=`one of type ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();o+=`one of type ${s.join(", ")}, or ${e}`}}(c.length>0||u.length>0)&&(o+=" or ")}if(c.length>0){switch(c.length){case 1:o+=`an instance of ${c[0]}`;break;case 2:o+=`an instance of ${c[0]} or ${c[1]}`;break;default:{const e=c.pop();o+=`an instance of ${c.join(", ")}, or ${e}`}}u.length>0&&(o+=" or ")}switch(u.length){case 0:break;case 1:u[0].toLowerCase()!==u[0]&&(o+="an "),o+=`${u[0]}`;break;case 2:o+=`one of ${u[0]} or ${u[1]}`;break;default:{const e=u.pop();o+=`one of ${u.join(", ")}, or ${e}`}}if(null==r)o+=`. Received ${r}`;else if("function"==typeof r&&r.name)o+=`. Received function ${r.name}`;else if("object"==typeof r){var d;if(null!==(d=r.constructor)&&void 0!==d&&d.name)o+=`. Received an instance of ${r.constructor.name}`;else{o+=`. Received ${t(r,{depth:-1})}`}}else{let e=t(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),o+=`. Received type ${typeof r} (${e})`}return o}),TypeError),u("ERR_INVALID_ARG_VALUE",((e,n,r="is invalid")=>{let o=t(n);o.length>128&&(o=o.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${o}`}),TypeError),u("ERR_INVALID_RETURN_VALUE",((e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`}),TypeError),u("ERR_MISSING_ARGS",((...e)=>{let t;l(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`}),TypeError),u("ERR_OUT_OF_RANGE",((e,n,r)=>{let o;if(l(n,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32)o=c(String(r));else if("bigint"==typeof r){o=String(r);const e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(o=c(o)),o+="n"}else o=t(r);return`The value of "${e}" is out of range. It must be ${n}. Received ${o}`}),RangeError),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),u("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),u("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),u("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),u("ERR_STREAM_WRITE_AFTER_END","write after end",Error),u("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),gP={AbortError:f,aggregateTwoErrors:d((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new r([t,e],t.message);return n.code=t.code,n}return e||t})),hideStackFrames:d,codes:s}}var wP,xP={exports:{}};function _P(){if(wP)return xP.exports;wP=1;const{AbortController:e,AbortSignal:t}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;return xP.exports=e,xP.exports.AbortSignal=t,xP.exports.default=e,xP.exports}var kP,SP,EP={exports:{}};function jP(){if(kP)return EP.exports;kP=1;var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}EP.exports=o,EP.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}p(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&p(e,"error",t,n)}(e,o,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,i,l;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),l=i[t]),void 0===l)l=i[t]=n,++e._eventsCount;else if("function"==typeof l?l=i[t]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(o=s(e))>0&&l.length>o&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,function(e){console&&console.warn&&console.warn(e)}(c)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=c.bind(r);return o.listener=n,r.wrapFn=o,o}function d(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function p(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}return Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return s(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=h(l,c);for(r=0;r<c;++r)n(u[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,o,i,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},EP.exports}function CP(){return SP||(SP=1,function(e){const t=dP(),{format:n,inspect:r}=yP(),{codes:{ERR_INVALID_ARG_TYPE:o}}=bP(),{kResistStopPropagation:i,AggregateError:a,SymbolDispose:s}=fP(),l=globalThis.AbortSignal||_P().AbortSignal,c=globalThis.AbortController||_P().AbortController,u=Object.getPrototypeOf((async function(){})).constructor,d=globalThis.Blob||t.Blob,f=void 0!==d?function(e){return e instanceof d}:function(e){return!1},h=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new o(t,"AbortSignal",e)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return{promise:n,resolve:e,reject:t}},promisify:e=>new Promise(((t,n)=>{e(((e,...r)=>e?n(e):t(...r)))})),debuglog:()=>function(){},format:n,inspect:r,types:{isAsyncFunction:e=>e instanceof u,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:f,deprecate:(e,t)=>e,addAbortListener:jP().addAbortListener||function(e,t){if(void 0===e)throw new o("signal","AbortSignal",e);let n;return h(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new o(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask((()=>t())):(e.addEventListener("abort",t,{__proto__:null,once:!0,[i]:!0}),n=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[s](){var e;null===(e=n)||void 0===e||e()}}},AbortSignalAny:l.any||function(e){if(1===e.length)return e[0];const t=new c,n=()=>t.abort();return e.forEach((e=>{h(e,"signals"),e.addEventListener("abort",n,{once:!0})})),t.signal.addEventListener("abort",(()=>{e.forEach((e=>e.removeEventListener("abort",n)))}),{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(vP)),vP.exports}var NP,AP,OP={};function RP(){if(AP)return NP;AP=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:o,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:s,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:u,String:d,StringPrototypeToUpperCase:f,StringPrototypeTrim:h}=fP(),{hideStackFrames:p,codes:{ERR_SOCKET_BAD_PORT:g,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:y,ERR_UNKNOWN_SIGNAL:b}}=bP(),{normalizeEncoding:w}=CP(),{isAsyncFunction:x,isArrayBufferView:_}=CP().types,k={};const S=/^[0-7]+$/;const E=p(((e,t,n=s,r=a)=>{if("number"!=typeof e)throw new m(t,"number",e);if(!o(e))throw new y(t,"an integer",e);if(e<n||e>r)throw new y(t,`>= ${n} && <= ${r}`,e)})),j=p(((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new m(t,"number",e);if(!o(e))throw new y(t,"an integer",e);if(e<n||e>r)throw new y(t,`>= ${n} && <= ${r}`,e)})),C=p(((e,t,n=!1)=>{if("number"!=typeof e)throw new m(t,"number",e);if(!o(e))throw new y(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new y(t,`>= ${r} && <= ${i}`,e)}));function N(e,t){if("string"!=typeof e)throw new m(t,"string",e)}const A=p(((e,o,i)=>{if(!t(i,e)){const t=n(r(i,(e=>"string"==typeof e?`'${e}'`:d(e))),", ");throw new v(o,e,"must be one of: "+t)}}));function O(e,t){if("boolean"!=typeof e)throw new m(t,"boolean",e)}function R(e,t,n){return null!=e&&c(e,t)?e[t]:n}const P=p(((t,n,r=null)=>{const o=R(r,"allowArray",!1),i=R(r,"allowFunction",!1);if(!R(r,"nullable",!1)&&null===t||!o&&e(t)||"object"!=typeof t&&(!i||"function"!=typeof t))throw new m(n,"Object",t)})),T=p(((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new m(t,"a dictionary",e)})),I=p(((t,n,r=0)=>{if(!e(t))throw new m(n,"Array",t);if(t.length<r){throw new v(n,t,`must be longer than ${r}`)}}));const M=p(((e,t="buffer")=>{if(!_(e))throw new m(t,["Buffer","TypedArray","DataView"],e)}));const D=p(((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new m(t,"AbortSignal",e)})),L=p(((e,t)=>{if("function"!=typeof e)throw new m(t,"Function",e)})),B=p(((e,t)=>{if("function"!=typeof e||x(e))throw new m(t,"Function",e)})),F=p(((e,t)=>{if(void 0!==e)throw new m(t,"undefined",e)}));const z=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function $(e,t){if(void 0===e||!u(z,e))throw new v(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return NP={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===u(S,e))throw new v(t,e,"must be a 32-bit unsigned integer or an octal string");e=l(e,8)}return C(e,t),e},validateArray:I,validateStringArray:function(e,t){I(e,t);for(let n=0;n<e.length;n++)N(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){I(e,t);for(let n=0;n<e.length;n++)O(e[n],`${t}[${n}]`)},validateAbortSignalArray:function(e,t){I(e,t);for(let n=0;n<e.length;n++){const r=e[n],o=`${t}[${n}]`;if(null==r)throw new m(o,"AbortSignal",r);D(r,o)}},validateBoolean:O,validateBuffer:M,validateDictionary:T,validateEncoding:function(e,t){const n=w(t),r=e.length;if("hex"===n&&r%2!=0)throw new v("encoding",t,`is invalid for data of length ${r}`)},validateFunction:L,validateInt32:j,validateInteger:E,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new m(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&i(e))throw new y(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:P,validateOneOf:A,validatePlainFunction:B,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===h(e).length||+e!=+e>>>0||e>65535||0===e&&!n)throw new g(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(N(e,t),void 0===k[e]){if(void 0!==k[f(e)])throw new b(e+" (signals must use all capital letters)");throw new b(e)}},validateString:N,validateUint32:C,validateUndefined:F,validateUnion:function(e,r,o){if(!t(o,e))throw new m(r,`('${n(o,"|")}')`,e)},validateAbortSignal:D,validateLinkHeaderValue:function(t){if("string"==typeof t)return $(t,"hints"),t;if(e(t)){const e=t.length;let n="";if(0===e)return n;for(let r=0;r<e;r++){const o=t[r];$(o,"hints"),n+=o,r!==e-1&&(n+=", ")}return n}throw new v("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}},NP}var PP,TP,IP,MP,DP,LP,BP,FP,zP={exports:{}},$P={exports:{}};function UP(){if(PP)return $P.exports;PP=1;var e,t,n=$P.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(J$){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(J$){e=r}try{t="function"==typeof clearTimeout?clearTimeout:o}catch(J$){t=o}}();var a,s=[],l=!1,c=-1;function u(){l&&a&&(l=!1,a.length?s=a.concat(s):c=-1,s.length&&d())}function d(){if(!l){var e=i(u);l=!0;for(var n=s.length;n;){for(a=s,s=[];++c<n;)a&&a[c].run();c=-1,n=s.length}a=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{return t(e)}catch(J$){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}return n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new f(e,t)),1!==s.length||l||i(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},$P.exports}function WP(){if(IP)return TP;IP=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=fP(),r=n("nodejs.stream.destroyed"),o=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),a=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function u(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function d(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function f(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function h(e){return!(!e||f(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function p(e){return!(!e||f(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function g(e){return!(!e||f(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function m(e){if(!f(e))return null;const t=e._writableState,n=e._readableState,o=t||n;return!!(e.destroyed||e[r]||null!=o&&o.destroyed)}function v(e){if(!d(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function y(e,t){if(!u(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function b(e){return e&&null!=e[i]?e[i]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!m(e)&&(u(e)&&e.readable&&!y(e))}function w(e){return e&&null!=e[a]?e[a]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!m(e)&&(d(e)&&e.writable&&!v(e))}function x(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function _(e){return"boolean"==typeof e._sent100&&x(e)}return TP={isDestroyed:m,kIsDestroyed:r,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[s])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:s,isErrored:function(e){var t,n,r,i,a,s,l,c,u,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(i=null!==(a=null!==(s=e[o])&&void 0!==s?s:e.readableErrored)&&void 0!==a?a:e.writableErrored)&&void 0!==i?i:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(c=e._writableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==n?n:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:o,isReadable:b,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:a,isClosed:function(e){if(!f(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&x(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return f(e)?!!m(e)||(!1===(null==t?void 0:t.readable)||!b(e))&&(!1===(null==t?void 0:t.writable)||!w(e)):null},isIterable:function(n,r){return null!=n&&(!0===r?"function"==typeof n[e]:!1===r?"function"==typeof n[t]:"function"==typeof n[e]||"function"==typeof n[t])},isReadableNodeStream:u,isReadableStream:h,isReadableEnded:function(e){if(!u(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:y,isReadableErrored:function(e){var t,n;return f(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:f,isWebStream:function(e){return h(e)||p(e)||g(e)},isWritable:w,isWritableNodeStream:d,isWritableStream:p,isWritableEnded:v,isWritableFinished:function(e,t){if(!d(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return f(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:_,willEmitClose:function(e){if(!f(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&_(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:g},TP}function HP(){if(MP)return zP.exports;MP=1;const e=UP(),{AbortError:t,codes:n}=bP(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:o}=n,{kEmptyObject:i,once:a}=CP(),{validateAbortSignal:s,validateFunction:l,validateObject:c,validateBoolean:u}=RP(),{Promise:d,PromisePrototypeThen:f,SymbolDispose:h}=fP(),{isClosed:p,isReadable:g,isReadableNodeStream:m,isReadableStream:v,isReadableFinished:y,isReadableErrored:b,isWritable:w,isWritableNodeStream:x,isWritableStream:_,isWritableFinished:k,isWritableErrored:S,isNodeStream:E,willEmitClose:j,kIsClosedPromise:C}=WP();let N;const A=()=>{};function O(n,u,d){var O,R;if(2===arguments.length?(d=u,u=i):null==u?u=i:c(u,"options"),l(d,"callback"),s(u.signal,"options.signal"),d=a(d),v(n)||_(n))return function(n,r,o){let i=!1,s=A;if(r.signal)if(s=()=>{i=!0,o.call(n,new t(void 0,{cause:r.signal.reason}))},r.signal.aborted)e.nextTick(s);else{N=N||CP().addAbortListener;const e=N(r.signal,s),t=o;o=a(((...r)=>{e[h](),t.apply(n,r)}))}const l=(...t)=>{i||e.nextTick((()=>o.apply(n,t)))};return f(n[C].promise,l,l),A}(n,u,d);if(!E(n))throw new r("stream",["ReadableStream","WritableStream","Stream"],n);const P=null!==(O=u.readable)&&void 0!==O?O:m(n),T=null!==(R=u.writable)&&void 0!==R?R:x(n),I=n._writableState,M=n._readableState,D=()=>{n.writable||F()};let L=j(n)&&m(n)===P&&x(n)===T,B=k(n,!1);const F=()=>{B=!0,n.destroyed&&(L=!1),(!L||n.readable&&!P)&&(P&&!z||d.call(n))};let z=y(n,!1);const $=()=>{z=!0,n.destroyed&&(L=!1),(!L||n.writable&&!T)&&(T&&!B||d.call(n))},U=e=>{d.call(n,e)};let W=p(n);const H=()=>{W=!0;const e=S(n)||b(n);return e&&"boolean"!=typeof e?d.call(n,e):P&&!z&&m(n,!0)&&!y(n,!1)?d.call(n,new o):!T||B||k(n,!1)?void d.call(n):d.call(n,new o)},V=()=>{W=!0;const e=S(n)||b(n);if(e&&"boolean"!=typeof e)return d.call(n,e);d.call(n)},q=()=>{n.req.on("finish",F)};!function(e){return e.setHeader&&"function"==typeof e.abort}(n)?T&&!I&&(n.on("end",D),n.on("close",D)):(n.on("complete",F),L||n.on("abort",H),n.req?q():n.on("request",q)),L||"boolean"!=typeof n.aborted||n.on("aborted",H),n.on("end",$),n.on("finish",F),!1!==u.error&&n.on("error",U),n.on("close",H),W?e.nextTick(H):null!=I&&I.errorEmitted||null!=M&&M.errorEmitted?L||e.nextTick(V):(P||L&&!g(n)||!B&&!1!==w(n))&&(T||L&&!w(n)||!z&&!1!==g(n))?M&&n.req&&n.aborted&&e.nextTick(V):e.nextTick(V);const K=()=>{d=A,n.removeListener("aborted",H),n.removeListener("complete",F),n.removeListener("abort",H),n.removeListener("request",q),n.req&&n.req.removeListener("finish",F),n.removeListener("end",D),n.removeListener("close",D),n.removeListener("finish",F),n.removeListener("end",$),n.removeListener("error",U),n.removeListener("close",H)};if(u.signal&&!W){const r=()=>{const e=d;K(),e.call(n,new t(void 0,{cause:u.signal.reason}))};if(u.signal.aborted)e.nextTick(r);else{N=N||CP().addAbortListener;const e=N(u.signal,r),t=d;d=a(((...r)=>{e[h](),t.apply(n,r)}))}}return K}return zP.exports=O,zP.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=i),null!==(n=t)&&void 0!==n&&n.cleanup&&(u(t.cleanup,"cleanup"),r=t.cleanup),new d(((n,o)=>{const i=O(e,t,(e=>{r&&i(),e?o(e):n()}))}))},zP.exports}function VP(){if(LP)return DP;LP=1;const e=UP(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=bP(),{Symbol:o}=fP(),{kIsDestroyed:i,isDestroyed:a,isFinished:s,isServerRequest:l}=WP(),c=o("kDestroy"),u=o("kConstruct");function d(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function f(t,n,r){let o=!1;function i(n){if(o)return;o=!0;const i=t._readableState,a=t._writableState;d(n,a,i),a&&(a.closed=!0),i&&(i.closed=!0),"function"==typeof r&&r(n),n?e.nextTick(h,t,n):e.nextTick(p,t)}try{t._destroy(n||null,i)}catch(n){i(n)}}function h(e,t){g(e,t),p(e)}function p(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function g(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function m(t,n,r){const o=t._readableState,i=t._writableState;if(null!=i&&i.destroyed||null!=o&&o.destroyed)return this;null!=o&&o.autoDestroy||null!=i&&i.autoDestroy?t.destroy(n):n&&(n.stack,i&&!i.errored&&(i.errored=n),o&&!o.errored&&(o.errored=n),r?e.nextTick(g,t,n):g(t,n))}function v(t){let r=!1;function o(o){if(r)return void m(t,null!=o?o:new n);r=!0;const i=t._readableState,a=t._writableState,s=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),s.destroyed?t.emit(c,o):o?m(t,o,!0):e.nextTick(y,t)}try{t._construct((t=>{e.nextTick(o,t)}))}catch(i){e.nextTick(o,i)}}function y(e){e.emit(u)}function b(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function w(e){e.emit("close")}function x(t,n){t.emit("error",n),e.nextTick(w,t)}return DP={construct:function(t,n){if("function"!=typeof t._construct)return;const r=t._readableState,o=t._writableState;r&&(r.constructed=!1),o&&(o.constructed=!1),t.once(u,n),t.listenerCount(u)>1||e.nextTick(v,t)},destroyer:function(t,n){t&&!a(t)&&(n||s(t)||(n=new r),l(t)?(t.socket=null,t.destroy(n)):b(t)?t.abort():b(t.req)?t.req.abort():"function"==typeof t.destroy?t.destroy(n):"function"==typeof t.close?t.close():n?e.nextTick(x,t,n):e.nextTick(w,t),t.destroyed||(t[i]=!0))},destroy:function(e,n){const r=this._readableState,o=this._writableState,i=o||r;return null!=o&&o.destroyed||null!=r&&r.destroyed?("function"==typeof n&&n(),this):(d(e,o,r),o&&(o.destroyed=!0),r&&(r.destroyed=!0),i.constructed?f(this,e,n):this.once(c,(function(r){f(this,t(r,e),n)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:m},DP}function qP(){if(FP)return BP;FP=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=fP(),{EventEmitter:n}=jP();function r(e){n.call(this,e)}function o(t,n,r){if("function"==typeof t.prependListener)return t.prependListener(n,r);t._events&&t._events[n]?e(t._events[n])?t._events[n].unshift(r):t._events[n]=[r,t._events[n]]:t.on(n,r)}return t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(e,t){const r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",c));let s=!1;function l(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===n.listenerCount(this,"error")&&this.emit("error",e)}function d(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",l),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return o(r,"error",u),o(e,"error",u),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e},BP={Stream:r,prependListener:o}}var KP,ZP,YP,GP,XP,JP={exports:{}};function QP(){return KP||(KP=1,function(e){const{SymbolDispose:t}=fP(),{AbortError:n,codes:r}=bP(),{isNodeStream:o,isWebStream:i,kControllerErrorFunction:a}=WP(),s=HP(),{ERR_INVALID_ARG_TYPE:l}=r;let c;e.exports.addAbortSignal=function(t,n){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new l(t,"AbortSignal",e)})(t,"signal"),!o(n)&&!i(n))throw new l("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,r){if("object"!=typeof e||!("aborted"in e))return r;const i=o(r)?()=>{r.destroy(new n(void 0,{cause:e.reason}))}:()=>{r[a](new n(void 0,{cause:e.reason}))};if(e.aborted)i();else{c=c||CP().addAbortListener;const n=c(e,i);s(r,n[t])}return r}}(JP)),JP.exports}function eT(){if(YP)return ZP;YP=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=fP(),{Buffer:o}=dP(),{inspect:i}=CP();return ZP=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return o.alloc(0);const t=o.allocUnsafe(e>>>0);let r=this.head,i=0;for(;r;)n(t,r.data,i),i+=r.data.length,r=r.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[t](){for(let e=this.head;e;e=e.next)yield e.data}_getString(t){let n="",r=this.head,o=0;do{const i=r.data;if(!(t>i.length)){t===i.length?(n+=i,++o,r.next?this.head=r.next:this.head=this.tail=null):(n+=e(i,0,t),this.head=r,r.data=e(i,t));break}n+=i,t-=i.length,++o}while(null!==(r=r.next));return this.length-=o,n}_getBuffer(e){const t=o.allocUnsafe(e),i=e;let a=this.head,s=0;do{const o=a.data;if(!(e>o.length)){e===o.length?(n(t,o,i-e),++s,a.next?this.head=a.next:this.head=this.tail=null):(n(t,new r(o.buffer,o.byteOffset,e),i-e),this.head=a,a.data=o.slice(e));break}n(t,o,i-e),e-=o.length,++s}while(null!==(a=a.next));return this.length-=s,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return i(this,{...t,depth:0,customInspect:!1})}},ZP}function tT(){if(XP)return GP;XP=1;const{MathFloor:e,NumberIsInteger:t}=fP(),{validateInteger:n}=RP(),{ERR_INVALID_ARG_VALUE:r}=bP().codes;let o=16384,i=16;function a(e){return e?i:o}return GP={getHighWaterMark:function(n,o,i,s){const l=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(o,s,i);if(null!=l){if(!t(l)||l<0){throw new r(s?`options.${i}`:"options.highWaterMark",l)}return e(l)}return a(n.objectMode)},getDefaultHighWaterMark:a,setDefaultHighWaterMark:function(e,t){n(t,"value",0),e?i=t:o=t}},GP}var nT,rT,oT,iT,aT,sT,lT,cT,uT,dT,fT,hT,pT,gT,mT,vT,yT,bT,wT,xT,_T,kT,ST,ET,jT,CT={},NT={exports:{}};function AT(){if(rT)return CT;rT=1;var e=(nT||(nT=1,function(e,t){var n=dP(),r=n.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=i),i.prototype=Object.create(r.prototype),o(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=r(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}(NT,NT.exports)),NT.exports).Buffer,t=e.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(n){var r;switch(this.encoding=function(n){var r=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(n);if("string"!=typeof r&&(e.isEncoding===t||!t(n)))throw new Error("Unknown encoding: "+n);return r||n}(n),this.encoding){case"utf16le":this.text=i,this.end=a,r=4;break;case"utf8":this.fillLast=o,r=4;break;case"base64":this.text=s,this.end=l,r=3;break;default:return this.write=c,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(r)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function i(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function s(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function c(e){return e.toString(this.encoding)}function u(e){return e&&e.length?this.write(e):""}return CT.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},n.prototype.text=function(e,t){var n=function(e,t,n){var o=t.length-1;if(o<n)return 0;var i=r(t[o]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--o<n||-2===i)return 0;if(i=r(t[o]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--o<n||-2===i)return 0;if(i=r(t[o]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var o=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},CT}function OT(){if(iT)return oT;iT=1;const e=UP(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=fP(),{Buffer:o}=dP(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:a}=bP().codes;return oT=function(s,l,c){let u,d;if("string"==typeof l||l instanceof o)return new s({objectMode:!0,...c,read(){this.push(l),this.push(null)}});if(l&&l[n])d=!0,u=l[n]();else{if(!l||!l[r])throw new i("iterable",["Iterable"],l);d=!1,u=l[r]()}const f=new s({objectMode:!0,highWaterMark:1,...c});let h=!1;return f._read=function(){h||(h=!0,async function(){for(;;){try{const{value:e,done:t}=d?await u.next():u.next();if(t)f.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw h=!1,new a;if(f.push(t))continue;h=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(n,r){t(async function(e){const t=null!=e,n="function"==typeof u.throw;if(t&&n){const{value:t,done:n}=await u.throw(e);if(await t,n)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(n),(()=>e.nextTick(r,n)),(t=>e.nextTick(r,t||n)))},f},oT}function RT(){if(sT)return aT;sT=1;const e=UP(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:o,ObjectDefineProperties:i,ObjectKeys:a,ObjectSetPrototypeOf:s,Promise:l,SafeSet:c,SymbolAsyncDispose:u,SymbolAsyncIterator:d,Symbol:f}=fP();aT=H,H.ReadableState=W;const{EventEmitter:h}=jP(),{Stream:p,prependListener:g}=qP(),{Buffer:m}=dP(),{addAbortSignal:v}=QP(),y=HP();let b=CP().debuglog("stream",(e=>{b=e}));const w=eT(),x=VP(),{getHighWaterMark:_,getDefaultHighWaterMark:k}=tT(),{aggregateTwoErrors:S,codes:{ERR_INVALID_ARG_TYPE:E,ERR_METHOD_NOT_IMPLEMENTED:j,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:N,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:A},AbortError:O}=bP(),{validateObject:R}=RP(),P=f("kPaused"),{StringDecoder:T}=AT(),I=OT();s(H.prototype,p.prototype),s(H,p);const M=()=>{},{errorOrDestroy:D}=x,L=1,B=16,F=32,z=2048,$=4096;function U(e){return{enumerable:!1,get(){return!!(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function W(e,t,n){"boolean"!=typeof n&&(n=t instanceof IT()),this.state=z|$|B|F,e&&e.objectMode&&(this.state|=L),n&&e&&e.readableObjectMode&&(this.state|=L),this.highWaterMark=e?_(this,e,"readableHighWaterMark",n):k(!1),this.buffer=new w,this.length=0,this.pipes=[],this.flowing=null,this[P]=null,e&&!1===e.emitClose&&(this.state&=-2049),e&&!1===e.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new T(e.encoding),this.encoding=e.encoding)}function H(e){if(!(this instanceof H))return new H(e);const t=this instanceof IT();this._readableState=new W(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&v(e.signal,this)),p.call(this,e),x.construct(this,(()=>{this._readableState.needReadable&&G(this,this._readableState)}))}function V(e,t,n,r){b("readableAddChunk",t);const o=e._readableState;let i;if(o.state&L||("string"==typeof t?(n=n||o.defaultEncoding,o.encoding!==n&&(r&&o.encoding?t=m.from(t,n).toString(o.encoding):(t=m.from(t,n),n=""))):t instanceof m?n="":p._isUint8Array(t)?(t=p._uint8ArrayToBuffer(t),n=""):null!=t&&(i=new E("chunk",["string","Buffer","Uint8Array"],t))),i)D(e,i);else if(null===t)o.state&=-9,function(e,t){if(b("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Z(e):(t.needReadable=!1,t.emittedReadable=!0,Y(e))}(e,o);else if(o.state&L||t&&t.length>0)if(r)if(4&o.state)D(e,new A);else{if(o.destroyed||o.errored)return!1;q(e,o,t,!0)}else if(o.ended)D(e,new N);else{if(o.destroyed||o.errored)return!1;o.state&=-9,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?q(e,o,t,!1):G(e,o)):q(e,o,t,!1)}else r||(o.state&=-9,G(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function q(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),64&t.state&&Z(e)),G(e,t)}i(W.prototype,{objectMode:U(L),ended:U(2),endEmitted:U(4),reading:U(8),constructed:U(B),sync:U(F),needReadable:U(64),emittedReadable:U(128),readableListening:U(256),resumeScheduled:U(512),errorEmitted:U(1024),emitClose:U(z),autoDestroy:U($),destroyed:U(8192),closed:U(16384),closeEmitted:U(32768),multiAwaitDrain:U(65536),readingMore:U(1<<17),dataEmitted:U(1<<18)}),H.prototype.destroy=x.destroy,H.prototype._undestroy=x.undestroy,H.prototype._destroy=function(e,t){t(e)},H.prototype[h.captureRejectionSymbol]=function(e){this.destroy(e)},H.prototype[u]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new O,this.destroy(e)),new l(((t,n)=>y(this,(r=>r&&r!==e?n(r):t(null)))))},H.prototype.push=function(e,t){return V(this,e,t,!1)},H.prototype.unshift=function(e,t){return V(this,e,t,!0)},H.prototype.isPaused=function(){const e=this._readableState;return!0===e[P]||!1===e.flowing},H.prototype.setEncoding=function(e){const t=new T(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const o of n)r+=t.write(o);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};function K(e,t){return e<=0||0===t.length&&t.ended?0:t.state&L?1:r(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function Z(t){const n=t._readableState;b("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(b("emitReadable",n.flowing),n.emittedReadable=!0,e.nextTick(Y,t))}function Y(e){const t=e._readableState;b("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,te(e)}function G(t,n){!n.readingMore&&n.constructed&&(n.readingMore=!0,e.nextTick(X,t,n))}function X(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(b("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function J(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[P]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function Q(e){b("readable nexttick read 0"),e.read(0)}function ee(e,t){b("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),te(e),t.flowing&&!t.reading&&e.read(0)}function te(e){const t=e._readableState;for(b("flow",t.flowing);t.flowing&&null!==e.read(););}function ne(e,t){"function"!=typeof e.read&&(e=H.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=M;function o(t){this===e?(r(),r=M):r=t}e.on("readable",o);const i=y(e,{writable:!1},(e=>{n=e?S(n,e):null,r(),r=M}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new l(o)}}}catch(a){throw n=S(n,a),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",o),i()):x.destroyer(e,null)}}(e,t);return n.stream=e,n}function re(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function oe(t){const n=t._readableState;b("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,e.nextTick(ie,n,t))}function ie(t,n){if(b("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&0===t.length)if(t.endEmitted=!0,n.emit("end"),n.writable&&!1===n.allowHalfOpen)e.nextTick(ae,n);else if(t.autoDestroy){const e=n._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&n.destroy()}}function ae(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let se;function le(){return void 0===se&&(se={}),se}return H.prototype.read=function(e){b("read",e),void 0===e?e=NaN:n(e)||(e=o(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new C("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return b("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?oe(this):Z(this),null;if(0===(e=K(e,t))&&t.ended)return 0===t.length&&oe(this),null;let i,a=!!(64&t.state);if(b("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&(a=!0,b("length less than watermark",a)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)a=!1,b("reading, ended or constructing",a);else if(a){b("do read"),t.state|=8|F,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(s){D(this,s)}t.state&=-33,t.reading||(e=K(r,t))}return i=e>0?re(e,t):null,null===i?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&oe(this)),null===i||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",i)),i},H.prototype._read=function(e){throw new j("_read()")},H.prototype.pipe=function(t,n){const r=this,o=this._readableState;1===o.pipes.length&&(o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new c(o.awaitDrainWriters?[o.awaitDrainWriters]:[]))),o.pipes.push(t),b("pipe count=%d opts=%j",o.pipes.length,n);const i=(!n||!1!==n.end)&&t!==e.stdout&&t!==e.stderr?s:v;function a(e,n){b("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,function(){b("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),l&&t.removeListener("drain",l);t.removeListener("error",h),t.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",v),r.removeListener("data",f),u=!0,l&&o.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}())}function s(){b("onend"),t.end()}let l;o.endEmitted?e.nextTick(i):r.once("end",i),t.on("unpipe",a);let u=!1;function d(){u||(1===o.pipes.length&&o.pipes[0]===t?(b("false write response, pause",0),o.awaitDrainWriters=t,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(t)&&(b("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(t)),r.pause()),l||(l=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(b("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(b("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(r,t),t.on("drain",l))}function f(e){b("ondata");const n=t.write(e);b("dest.write",n),!1===n&&d()}function h(e){if(b("onerror",e),v(),t.removeListener("error",h),0===t.listenerCount("error")){const n=t._writableState||t._readableState;n&&!n.errorEmitted?D(t,e):t.emit("error",e)}}function p(){t.removeListener("finish",m),v()}function m(){b("onfinish"),t.removeListener("close",p),v()}function v(){b("unpipe"),r.unpipe(t)}return r.on("data",f),g(t,"error",h),t.once("close",p),t.once("finish",m),t.emit("pipe",r),!0===t.writableNeedDrain?d():o.flowing||(b("pipe resume"),r.resume()),t},H.prototype.unpipe=function(e){const n=this._readableState;if(0===n.pipes.length)return this;if(!e){const e=n.pipes;n.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=t(n.pipes,e);return-1===r||(n.pipes.splice(r,1),0===n.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},H.prototype.on=function(t,n){const r=p.prototype.on.call(this,t,n),o=this._readableState;return"data"===t?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===t&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,b("on readable",o.length,o.reading),o.length?Z(this):o.reading||e.nextTick(Q,this))),r},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(t,n){const r=p.prototype.removeListener.call(this,t,n);return"readable"===t&&e.nextTick(J,this),r},H.prototype.off=H.prototype.removeListener,H.prototype.removeAllListeners=function(t){const n=p.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(J,this),n},H.prototype.resume=function(){const t=this._readableState;return t.flowing||(b("resume"),t.flowing=!t.readableListening,function(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(ee,t,n))}(this,t)),t[P]=!1,this},H.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[P]=!0,this},H.prototype.wrap=function(e){let t=!1;e.on("data",(n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{D(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=a(e);for(let r=1;r<n.length;r++){const t=n[r];void 0===this[t]&&"function"==typeof e[t]&&(this[t]=e[t].bind(e))}return this},H.prototype[d]=function(){return ne(this)},H.prototype.iterator=function(e){return void 0!==e&&R(e,"options"),ne(this,e)},i(H.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),i(W.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[P]},set(e){this[P]=!!e}}}),H._fromList=re,H.from=function(e,t){return I(H,e,t)},H.fromWeb=function(e,t){return le().newStreamReadableFromReadableStream(e,t)},H.toWeb=function(e,t){return le().newReadableStreamFromStreamReadable(e,t)},H.wrap=function(e,t){var n,r;return new H({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){x.destroyer(e,t),n(t)}}).wrap(e)},aT}function PT(){if(cT)return lT;cT=1;const e=UP(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:o,ObjectDefineProperties:i,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:s,Symbol:l,SymbolHasInstance:c}=fP();lT=R,R.WritableState=A;const{EventEmitter:u}=jP(),d=qP().Stream,{Buffer:f}=dP(),h=VP(),{addAbortSignal:p}=QP(),{getHighWaterMark:g,getDefaultHighWaterMark:m}=tT(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:y,ERR_MULTIPLE_CALLBACK:b,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:x,ERR_STREAM_ALREADY_FINISHED:_,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:S,ERR_UNKNOWN_ENCODING:E}=bP().codes,{errorOrDestroy:j}=h;function C(){}a(R.prototype,d.prototype),a(R,d);const N=l("kOnFinished");function A(e,t,n){"boolean"!=typeof n&&(n=t instanceof IT()),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?g(this,e,"writableHighWaterMark",n):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const r=!(!e||!1!==e.decodeStrings);this.decodeStrings=!r,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=M.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[N]=[]}function O(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function R(e){const t=this instanceof IT();if(!t&&!r(R,this))return new R(e);this._writableState=new A(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&p(e.signal,this)),d.call(this,e),h.construct(this,(()=>{const e=this._writableState;e.writing||F(this,e),U(this,e)}))}function P(t,n,r,o){const i=t._writableState;if("function"==typeof r)o=r,r=i.defaultEncoding;else{if(r){if("buffer"!==r&&!f.isEncoding(r))throw new E(r)}else r=i.defaultEncoding;"function"!=typeof o&&(o=C)}if(null===n)throw new k;if(!i.objectMode)if("string"==typeof n)!1!==i.decodeStrings&&(n=f.from(n,r),r="buffer");else if(n instanceof f)r="buffer";else{if(!d._isUint8Array(n))throw new v("chunk",["string","Buffer","Uint8Array"],n);n=d._uint8ArrayToBuffer(n),r="buffer"}let a;return i.ending?a=new S:i.destroyed&&(a=new x("write")),a?(e.nextTick(o,a),j(t,a,!0),a):(i.pendingcb++,function(e,t,n,r,o){const i=t.objectMode?1:n.length;t.length+=i;const a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:o}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&o!==C&&(t.allNoop=!1)):(t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1);return a&&!t.errored&&!t.destroyed}(t,i,n,r,o))}function T(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new x("write")):n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function I(e,t,n,r){--t.pendingcb,r(n),B(t),j(e,n)}function M(t,n){const r=t._writableState,o=r.sync,i=r.writecb;"function"==typeof i?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,n?(n.stack,r.errored||(r.errored=n),t._readableState&&!t._readableState.errored&&(t._readableState.errored=n),o?e.nextTick(I,t,r,n,i):I(t,r,n,i)):(r.buffered.length>r.bufferedIndex&&F(t,r),o?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},e.nextTick(D,r.afterWriteTickInfo)):L(t,r,1,i))):j(t,new b)}function D({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,L(e,t,n,r)}function L(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&B(t),U(e,t)}function B(e){if(e.writing)return;for(let o=e.bufferedIndex;o<e.buffered.length;++o){var t;const{chunk:n,callback:r}=e.buffered[o],i=e.objectMode?1:n.length;e.length-=i,r(null!==(t=e.errored)&&void 0!==t?t:new x("write"))}const n=e[N].splice(0);for(let o=0;o<n.length;o++){var r;n[o](null!==(r=e.errored)&&void 0!==r?r:new x("end"))}O(e)}function F(e,n){if(n.corked||n.bufferProcessing||n.destroyed||!n.constructed)return;const{buffered:r,bufferedIndex:o,objectMode:i}=n,a=r.length-o;if(!a)return;let s=o;if(n.bufferProcessing=!0,a>1&&e._writev){n.pendingcb-=a-1;const o=n.allNoop?C:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)},i=n.allNoop&&0===s?r:t(r,s);i.allBuffers=n.allBuffers,T(e,n,!0,n.length,i,"",o),O(n)}else{do{const{chunk:t,encoding:o,callback:a}=r[s];r[s++]=null;T(e,n,!1,i?1:t.length,t,o,a)}while(s<r.length&&!n.writing);s===r.length?O(n):s>256?(r.splice(0,s),n.bufferedIndex=0):n.bufferedIndex=s}n.bufferProcessing=!1}function z(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function $(t,n){n.prefinished||n.finalCalled||("function"!=typeof t._final||n.destroyed?(n.prefinished=!0,t.emit("prefinish")):(n.finalCalled=!0,function(t,n){let r=!1;function o(o){if(r)j(t,null!=o?o:b());else if(r=!0,n.pendingcb--,o){const e=n[N].splice(0);for(let t=0;t<e.length;t++)e[t](o);j(t,o,n.sync)}else z(n)&&(n.prefinished=!0,t.emit("prefinish"),n.pendingcb++,e.nextTick(W,t,n))}n.sync=!0,n.pendingcb++;try{t._final(o)}catch(i){o(i)}n.sync=!1}(t,n)))}function U(t,n,r){z(n)&&($(t,n),0===n.pendingcb&&(r?(n.pendingcb++,e.nextTick(((e,t)=>{z(t)?W(e,t):t.pendingcb--}),t,n)):z(n)&&(n.pendingcb++,W(t,n))))}function W(e,t){t.pendingcb--,t.finished=!0;const n=t[N].splice(0);for(let r=0;r<n.length;r++)n[r]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}A.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},o(A.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),o(R,c,{__proto__:null,value:function(e){return!!r(this,e)||this===R&&(e&&e._writableState instanceof A)}}),R.prototype.pipe=function(){j(this,new w)},R.prototype.write=function(e,t,n){return!0===P(this,e,t,n)},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||F(this,e))},R.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=s(e)),!f.isEncoding(e))throw new E(e);return this._writableState.defaultEncoding=e,this},R.prototype._write=function(e,t,n){if(!this._writev)throw new y("_write()");this._writev([{chunk:e,encoding:t}],n)},R.prototype._writev=null,R.prototype.end=function(t,r,o){const i=this._writableState;let a;if("function"==typeof t?(o=t,t=null,r=null):"function"==typeof r&&(o=r,r=null),null!=t){const e=P(this,t,r);e instanceof n&&(a=e)}return i.corked&&(i.corked=1,this.uncork()),a||(i.errored||i.ending?i.finished?a=new _("end"):i.destroyed&&(a=new x("end")):(i.ending=!0,U(this,i,!0),i.ended=!0)),"function"==typeof o&&(a||i.finished?e.nextTick(o,a):i[N].push(o)),this},i(R.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const H=h.destroy;let V;function q(){return void 0===V&&(V={}),V}return R.prototype.destroy=function(t,n){const r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[N].length)&&e.nextTick(B,r),H.call(this,t,n),this},R.prototype._undestroy=h.undestroy,R.prototype._destroy=function(e,t){t(e)},R.prototype[u.captureRejectionSymbol]=function(e){this.destroy(e)},R.fromWeb=function(e,t){return q().newStreamWritableFromWritableStream(e,t)},R.toWeb=function(e){return q().newWritableStreamFromStreamWritable(e)},lT}function TT(){if(dT)return uT;dT=1;const e=UP(),t=dP(),{isReadable:n,isWritable:r,isIterable:o,isNodeStream:i,isReadableNodeStream:a,isWritableNodeStream:s,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:u}=WP(),d=HP(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p}}=bP(),{destroyer:g}=VP(),m=IT(),v=RT(),y=PT(),{createDeferredPromise:b}=CP(),w=OT(),x=globalThis.Blob||t.Blob,_=void 0!==x?function(e){return e instanceof x}:function(e){return!1},k=globalThis.AbortController||_P().AbortController,{FunctionPrototypeCall:S}=fP();class E extends m{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function j(e){const t=e.readable&&"function"!=typeof e.readable.read?v.wrap(e.readable):e.readable,o=e.writable;let i,a,s,l,c,u=!!n(t),h=!!r(o);function p(e){const t=l;l=null,t?t(e):e&&c.destroy(e)}return c=new E({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==o||!o.writableObjectMode),readable:u,writable:h}),h&&(d(o,(e=>{h=!1,e&&g(t,e),p(e)})),c._write=function(e,t,n){o.write(e,t)?n():i=n},c._final=function(e){o.end(),a=e},o.on("drain",(function(){if(i){const e=i;i=null,e()}})),o.on("finish",(function(){if(a){const e=a;a=null,e()}}))),u&&(d(t,(e=>{u=!1,e&&g(t,e),p(e)})),t.on("readable",(function(){if(s){const e=s;s=null,e()}})),t.on("end",(function(){c.push(null)})),c._read=function(){for(;;){const e=t.read();if(null===e)return void(s=c._read);if(!c.push(e))return}}),c._destroy=function(e,n){e||null===l||(e=new f),s=null,i=null,a=null,null===l?n(e):(l=n,g(o,e),g(t,e))},c}return uT=function t(n,r){if(l(n))return n;if(a(n))return j({readable:n});if(s(n))return j({writable:n});if(i(n))return j({writable:!1,readable:!1});if(c(n))return j({readable:v.fromWeb(n)});if(u(n))return j({writable:y.fromWeb(n)});if("function"==typeof n){const{value:t,write:i,final:a,destroy:s}=function(t){let{promise:n,resolve:r}=b();const o=new k,i=o.signal,a=t(async function*(){for(;;){const t=n;n=null;const{chunk:o,done:a,cb:s}=await t;if(e.nextTick(s),a)return;if(i.aborted)throw new f(void 0,{cause:i.reason});({promise:n,resolve:r}=b()),yield o}}(),{signal:i});return{value:a,write(e,t,n){const o=r;r=null,o({chunk:e,done:!1,cb:n})},final(e){const t=r;r=null,t({done:!0,cb:e})},destroy(e,t){o.abort(),t(e)}}}(n);if(o(t))return w(E,t,{objectMode:!0,write:i,final:a,destroy:s});const l=null==t?void 0:t.then;if("function"==typeof l){let n;const r=S(l,t,(e=>{if(null!=e)throw new p("nully","body",e)}),(e=>{g(n,e)}));return n=new E({objectMode:!0,readable:!1,write:i,final(t){a((async()=>{try{await r,e.nextTick(t,null)}catch(n){e.nextTick(t,n)}}))},destroy:s})}throw new p("Iterable, AsyncIterable or AsyncFunction",r,t)}if(_(n))return t(n.arrayBuffer());if(o(n))return w(E,n,{objectMode:!0,writable:!1});if(c(null==n?void 0:n.readable)&&u(null==n?void 0:n.writable))return E.fromWeb(n);if("object"==typeof(null==n?void 0:n.writable)||"object"==typeof(null==n?void 0:n.readable)){return j({readable:null!=n&&n.readable?a(null==n?void 0:n.readable)?null==n?void 0:n.readable:t(n.readable):void 0,writable:null!=n&&n.writable?s(null==n?void 0:n.writable)?null==n?void 0:n.writable:t(n.writable):void 0})}const d=null==n?void 0:n.then;if("function"==typeof d){let e;return S(d,n,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{g(e,t)})),e=new E({objectMode:!0,writable:!1,read(){}})}throw new h(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],n)},uT}function IT(){if(hT)return fT;hT=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=fP();fT=a;const o=RT(),i=PT();r(a.prototype,o.prototype),r(a,o);{const e=n(i.prototype);for(let t=0;t<e.length;t++){const n=e[t];a.prototype[n]||(a.prototype[n]=i.prototype[n])}}function a(e){if(!(this instanceof a))return new a(e);o.call(this,e),i.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let s,l;function c(){return void 0===s&&(s={}),s}return e(a.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),a.fromWeb=function(e,t){return c().newStreamDuplexFromReadableWritablePair(e,t)},a.toWeb=function(e){return c().newReadableWritablePairFromDuplex(e)},a.from=function(e){return l||(l=TT()),l(e,"body")},fT}function MT(){if(gT)return pT;gT=1;const{ObjectSetPrototypeOf:e,Symbol:t}=fP();pT=a;const{ERR_METHOD_NOT_IMPLEMENTED:n}=bP().codes,r=IT(),{getHighWaterMark:o}=tT();e(a.prototype,r.prototype),e(a,r);const i=t("kCallback");function a(e){if(!(this instanceof a))return new a(e);const t=e?o(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),r.call(this,e),this._readableState.sync=!1,this[i]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function s(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())}))}function l(){this._final!==s&&s.call(this)}return a.prototype._final=s,a.prototype._transform=function(e,t,r){throw new n("_transform()")},a.prototype._write=function(e,t,n){const r=this._readableState,o=this._writableState,a=r.length;this._transform(e,t,((e,t)=>{e?n(e):(null!=t&&this.push(t),o.ended||a===r.length||r.length<r.highWaterMark?n():this[i]=n)}))},a.prototype._read=function(){if(this[i]){const e=this[i];this[i]=null,e()}},pT}function DT(){if(vT)return mT;vT=1;const{ObjectSetPrototypeOf:e}=fP();mT=n;const t=MT();function n(e){if(!(this instanceof n))return new n(e);t.call(this,e)}return e(n.prototype,t.prototype),e(n,t),n.prototype._transform=function(e,t,n){n(null,e)},mT}function LT(){if(bT)return yT;bT=1;const e=UP(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:o}=fP(),i=HP(),{once:a}=CP(),s=VP(),l=IT(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:p},AbortError:g}=bP(),{validateFunction:m,validateAbortSignal:v}=RP(),{isIterable:y,isReadable:b,isReadableNodeStream:w,isNodeStream:x,isTransformStream:_,isWebStream:k,isReadableStream:S,isReadableFinished:E}=WP(),j=globalThis.AbortController||_P().AbortController;let C,N,A;function O(e,t,n){let r=!1;e.on("close",(()=>{r=!0}));return{destroy:t=>{r||(r=!0,s.destroyer(e,t||new h("pipe")))},cleanup:i(e,{readable:t,writable:n},(e=>{r=!e}))}}function R(e){if(y(e))return e;if(w(e))return async function*(e){N||(N=RT());yield*N.prototype[r].call(e)}(e);throw new u("val",["Readable","Iterable","AsyncIterable"],e)}async function P(e,t,r,{end:o}){let a,s=null;const l=e=>{if(e&&(a=e),s){const e=s;s=null,e()}},u=()=>new n(((e,t)=>{a?t(a):s=()=>{a?t(a):e()}}));t.on("drain",l);const d=i(t,{readable:!1},l);try{t.writableNeedDrain&&await u();for await(const n of e)t.write(n)||await u();o&&(t.end(),await u()),r()}catch(f){r(a!==f?c(a,f):f)}finally{d(),t.off("drain",l)}}async function T(e,t,n,{end:r}){_(t)&&(t=t.writable);const o=t.getWriter();try{for await(const t of e)await o.ready,o.write(t).catch((()=>{}));await o.ready,r&&await o.close(),n()}catch(i){try{await o.abort(i),n(i)}catch(i){n(i)}}}function I(n,r,i){if(1===n.length&&t(n[0])&&(n=n[0]),n.length<2)throw new f("streams");const a=new j,s=a.signal,c=null==i?void 0:i.signal,h=[];function p(){F(new g)}let m,E,N;v(c,"options.signal"),A=A||CP().addAbortListener,c&&(m=A(c,p));const I=[];let D,L=0;function B(e){F(e,0==--L)}function F(t,n){var i;if(!t||E&&"ERR_STREAM_PREMATURE_CLOSE"!==E.code||(E=t),E||n){for(;I.length;)I.shift()(E);null===(i=m)||void 0===i||i[o](),a.abort(),n&&(E||h.forEach((e=>e())),e.nextTick(r,E,N))}}for(let U=0;U<n.length;U++){const W=n[U],H=U<n.length-1,V=U>0,q=H||!1!==(null==i?void 0:i.end),K=U===n.length-1;if(x(W)){if(q){const{destroy:Y,cleanup:G}=O(W,H,V);I.push(Y),b(W)&&K&&h.push(G)}function Z(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&B(e)}W.on("error",Z),b(W)&&K&&h.push((()=>{W.removeListener("error",Z)}))}if(0===U)if("function"==typeof W){if(D=W({signal:s}),!y(D))throw new d("Iterable, AsyncIterable or Stream","source",D)}else D=y(W)||w(W)||_(W)?W:l.from(W);else if("function"==typeof W){var z;if(_(D))D=R(null===(z=D)||void 0===z?void 0:z.readable);else D=R(D);if(D=W(D,{signal:s}),H){if(!y(D,!0))throw new d("AsyncIterable",`transform[${U-1}]`,D)}else{var $;C||(C=DT());const X=new C({objectMode:!0}),J=null===($=D)||void 0===$?void 0:$.then;if("function"==typeof J)L++,J.call(D,(t=>{N=t,null!=t&&X.write(t),q&&X.end(),e.nextTick(B)}),(t=>{X.destroy(t),e.nextTick(B,t)}));else if(y(D,!0))L++,P(D,X,B,{end:q});else{if(!S(D)&&!_(D))throw new d("AsyncIterable or Promise","destination",D);{const te=D.readable||D;L++,P(te,X,B,{end:q})}}D=X;const{destroy:Q,cleanup:ee}=O(D,!1,!0);I.push(Q),K&&h.push(ee)}}else if(x(W)){if(w(D)){L+=2;const ne=M(D,W,B,{end:q});b(W)&&K&&h.push(ne)}else if(_(D)||S(D)){const re=D.readable||D;L++,P(re,W,B,{end:q})}else{if(!y(D))throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],D);L++,P(D,W,B,{end:q})}D=W}else if(k(W)){if(w(D))L++,T(R(D),W,B,{end:q});else if(S(D)||y(D))L++,T(D,W,B,{end:q});else{if(!_(D))throw new u("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],D);L++,T(D.readable,W,B,{end:q})}D=W}else D=l.from(W)}return(null!=s&&s.aborted||null!=c&&c.aborted)&&e.nextTick(p),D}function M(t,n,r,{end:o}){let a=!1;if(n.on("close",(()=>{a||r(new p)})),t.pipe(n,{end:!1}),o){function s(){a=!0,n.end()}E(t)?e.nextTick(s):t.once("end",s)}else r();return i(t,{readable:!0,writable:!1},(e=>{const n=t._readableState;e&&"ERR_STREAM_PREMATURE_CLOSE"===e.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?t.once("end",r).once("error",r):r(e)})),i(n,{readable:!1,writable:!0},r)}return yT={pipelineImpl:I,pipeline:function(...e){return I(e,a(function(e){return m(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}}function BT(){if(xT)return wT;xT=1;const{pipeline:e}=LT(),t=IT(),{destroyer:n}=VP(),{isNodeStream:r,isReadable:o,isWritable:i,isWebStream:a,isTransformStream:s,isWritableStream:l,isReadableStream:c}=WP(),{AbortError:u,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:f}}=bP(),h=HP();return wT=function(...p){if(0===p.length)throw new f("streams");if(1===p.length)return t.from(p[0]);const g=[...p];if("function"==typeof p[0]&&(p[0]=t.from(p[0])),"function"==typeof p[p.length-1]){const e=p.length-1;p[e]=t.from(p[e])}for(let e=0;e<p.length;++e)if(r(p[e])||a(p[e])){if(e<p.length-1&&!(o(p[e])||c(p[e])||s(p[e])))throw new d(`streams[${e}]`,g[e],"must be readable");if(e>0&&!(i(p[e])||l(p[e])||s(p[e])))throw new d(`streams[${e}]`,g[e],"must be writable")}let m,v,y,b,w;const x=p[0],_=e(p,(function(e){const t=b;b=null,t?t(e):e?w.destroy(e):S||k||w.destroy()})),k=!!(i(x)||l(x)||s(x)),S=!!(o(_)||c(_)||s(_));if(w=new t({writableObjectMode:!(null==x||!x.writableObjectMode),readableObjectMode:!(null==_||!_.readableObjectMode),writable:k,readable:S}),k){if(r(x))w._write=function(e,t,n){x.write(e,t)?n():m=n},w._final=function(e){x.end(),v=e},x.on("drain",(function(){if(m){const e=m;m=null,e()}}));else if(a(x)){const e=(s(x)?x.writable:x).getWriter();w._write=async function(t,n,r){try{await e.ready,e.write(t).catch((()=>{})),r()}catch(o){r(o)}},w._final=async function(t){try{await e.ready,e.close().catch((()=>{})),v=t}catch(n){t(n)}}}const e=s(_)?_.readable:_;h(e,(()=>{if(v){const e=v;v=null,e()}}))}if(S)if(r(_))_.on("readable",(function(){if(y){const e=y;y=null,e()}})),_.on("end",(function(){w.push(null)})),w._read=function(){for(;;){const e=_.read();if(null===e)return void(y=w._read);if(!w.push(e))return}};else if(a(_)){const e=(s(_)?_.readable:_).getReader();w._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!w.push(t))return;if(n)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===b||(e=new u),y=null,m=null,v=null,null===b?t(e):(b=t,r(_)&&n(_,e))},w},wT}function FT(){if(ST)return kT;ST=1;const{ArrayPrototypePop:e,Promise:t}=fP(),{isIterable:n,isNodeStream:r,isWebStream:o}=WP(),{pipelineImpl:i}=LT(),{finished:a}=HP();return zT(),kT={finished:a,pipeline:function(...a){return new t(((t,s)=>{let l,c;const u=a[a.length-1];if(u&&"object"==typeof u&&!r(u)&&!n(u)&&!o(u)){const t=e(a);l=t.signal,c=t.end}i(a,((e,n)=>{e?s(e):t(n)}),{signal:l,end:c})}))}},kT}function zT(){if(ET)return nP.exports;ET=1;const{Buffer:e}=dP(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=fP(),{promisify:{custom:o}}=CP(),{streamReturningOperators:i,promiseReturningOperators:a}=function(){if(_T)return OP;_T=1;const e=globalThis.AbortController||_P().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:o},AbortError:i}=bP(),{validateAbortSignal:a,validateInteger:s,validateObject:l}=RP(),c=fP().Symbol("kWeak"),u=fP().Symbol("kResistStopPropagation"),{finished:d}=HP(),f=BT(),{addAbortSignalNoValidate:h}=QP(),{isWritable:p,isNodeStream:g}=WP(),{deprecate:m}=CP(),{ArrayPrototypePush:v,Boolean:y,MathFloor:b,Number:w,NumberIsNaN:x,Promise:_,PromiseReject:k,PromiseResolve:S,PromisePrototypeThen:E,Symbol:j}=fP(),C=j("kEmpty"),N=j("kEof");function A(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);null!=t&&l(t,"options"),null!=(null==t?void 0:t.signal)&&a(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=b(t.concurrency));let o=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(o=b(t.highWaterMark)),s(r,"options.concurrency",1),s(o,"options.highWaterMark",0),o+=r,async function*(){const n=CP().AbortSignalAny([null==t?void 0:t.signal].filter(y)),a=this,s=[],l={signal:n};let c,u,d=!1,f=0;function h(){d=!0,p()}function p(){f-=1,g()}function g(){u&&!d&&f<r&&s.length<o&&(u(),u=null)}!async function(){try{for await(let g of a){if(d)return;if(n.aborted)throw new i;try{if(g=e(g,l),g===C)continue;g=S(g)}catch(t){g=k(t)}f+=1,E(g,p,h),s.push(g),c&&(c(),c=null),!d&&(s.length>=o||f>=r)&&await new _((e=>{u=e}))}s.push(N)}catch(t){const e=k(t);E(e,p,h),s.push(e)}finally{d=!0,c&&(c(),c=null)}}();try{for(;;){for(;s.length>0;){const e=await s[0];if(e===N)return;if(n.aborted)throw new i;e!==C&&(yield e),s.shift(),g()}await new _((e=>{c=e}))}}finally{d=!0,u&&(u(),u=null)}}.call(this)}async function O(e,t=void 0){for await(const n of R.call(this,e,t))return!0;return!1}function R(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);return A.call(this,(async function(t,n){return await e(t,n)?t:C}),t)}class P extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function T(e){if(e=w(e),x(e))return 0;if(e<0)throw new o("number",">= 0",e);return e}return OP.streamReturningOperators={asIndexedPairs:m((function(e=void 0){return null!=e&&l(e,"options"),null!=(null==e?void 0:e.signal)&&a(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new i({cause:e.signal.reason});yield[t++,r]}}.call(this)}),"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&l(t,"options"),null!=(null==t?void 0:t.signal)&&a(t.signal,"options.signal"),e=T(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new i;for await(const o of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new i;e--<=0&&(yield o)}}.call(this)},filter:R,flatMap:function(e,t){const n=A.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:A,take:function(e,t=void 0){return null!=t&&l(t,"options"),null!=(null==t?void 0:t.signal)&&a(t.signal,"options.signal"),e=T(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new i;for await(const o of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new i;if(e-- >0&&(yield o),e<=0)return}}.call(this)},compose:function(e,n){if(null!=n&&l(n,"options"),null!=(null==n?void 0:n.signal)&&a(n.signal,"options.signal"),g(e)&&!p(e))throw new t("stream",e,"must be writable");const r=f(this,e);return null!=n&&n.signal&&h(n.signal,r),r}},OP.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);return!(await O.call(this,(async(...t)=>!(await e(...t))),t))},forEach:async function(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);for await(const n of A.call(this,(async function(t,n){return await e(t,n),C}),t));},reduce:async function(t,r,o){var s;if("function"!=typeof t)throw new n("reducer",["Function","AsyncFunction"],t);null!=o&&l(o,"options"),null!=(null==o?void 0:o.signal)&&a(o.signal,"options.signal");let f=arguments.length>1;if(null!=o&&null!==(s=o.signal)&&void 0!==s&&s.aborted){const e=new i(void 0,{cause:o.signal.reason});throw this.once("error",(()=>{})),await d(this.destroy(e)),e}const h=new e,p=h.signal;if(null!=o&&o.signal){const e={once:!0,[c]:this,[u]:!0};o.signal.addEventListener("abort",(()=>h.abort()),e)}let g=!1;try{for await(const e of this){var m;if(g=!0,null!=o&&null!==(m=o.signal)&&void 0!==m&&m.aborted)throw new i;f?r=await t(r,e,{signal:p}):(r=e,f=!0)}if(!g&&!f)throw new P}finally{h.abort()}return r},toArray:async function(e){null!=e&&l(e,"options"),null!=(null==e?void 0:e.signal)&&a(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new i(void 0,{cause:e.signal.reason});v(t,r)}return t},some:O,find:async function(e,t){for await(const n of R.call(this,e,t))return n}},OP}(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=bP(),l=BT(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:u}=tT(),{pipeline:d}=LT(),{destroyer:f}=VP(),h=HP(),p=FT(),g=WP(),m=nP.exports=qP().Stream;m.isDestroyed=g.isDestroyed,m.isDisturbed=g.isDisturbed,m.isErrored=g.isErrored,m.isReadable=g.isReadable,m.isWritable=g.isWritable,m.Readable=RT();for(const y of n(i)){const b=i[y];function w(...e){if(new.target)throw s();return m.Readable.from(r(b,this,e))}t(w,"name",{__proto__:null,value:b.name}),t(w,"length",{__proto__:null,value:b.length}),t(m.Readable.prototype,y,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const x of n(a)){const _=a[x];function k(...e){if(new.target)throw s();return r(_,this,e)}t(k,"name",{__proto__:null,value:_.name}),t(k,"length",{__proto__:null,value:_.length}),t(m.Readable.prototype,x,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}m.Writable=PT(),m.Duplex=IT(),m.Transform=MT(),m.PassThrough=DT(),m.pipeline=d;const{addAbortSignal:v}=QP();return m.addAbortSignal=v,m.finished=h,m.destroy=f,m.compose=l,m.setDefaultHighWaterMark=c,m.getDefaultHighWaterMark=u,t(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>p}),t(d,o,{__proto__:null,enumerable:!0,get:()=>p.pipeline}),t(h,o,{__proto__:null,enumerable:!0,get:()=>p.finished}),m.Stream=m,m._isUint8Array=function(e){return e instanceof Uint8Array},m._uint8ArrayToBuffer=function(t){return e.from(t.buffer,t.byteOffset,t.byteLength)},nP.exports}function $T(){return jT||(jT=1,function(e){const t=zT(),n=FT(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>n}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(tP)),tP.exports}
/*!
       LZ-UTF8 v0.6.3

       Copyright (c) 2021, Rotem Dan
       Released under the MIT license.

       Build date: 2022-07-06 

       Please report any issue at https://github.com/rotemdan/lzutf8.js/issues
      */!function(e){var t;!function(t){t.runningInNodeJS=function(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node},t.runningInMainNodeJSModule=function(){return t.runningInNodeJS()&&require.main===e},t.commonJSAvailable=function(){return!0},t.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},t.runningInNodeChildProcess=function(){return t.runningInNodeJS()&&"function"==typeof process.send},t.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&"object"==typeof document&&("http:"!==document.location.protocol&&"https:"!==document.location.protocol)},t.webWorkersAvailable=function(){return"function"==typeof Worker&&!t.runningInNullOrigin()&&(!t.runningInNodeJS()&&!(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0))},t.log=function(e,t){void 0===t&&(t=!1),"object"==typeof console&&(console.log(e),t&&"object"==typeof document&&(document.body.innerHTML+=e+"<br/>"))},t.createErrorMessage=function(e,n){if(void 0===n&&(n="Unhandled exception"),null==e)return n;if(n+=": ","object"==typeof e.content){if(t.runningInNodeJS())return n+e.content.stack;var r=JSON.stringify(e.content);return"{}"!==r?n+r:n+e.content}return"string"==typeof e.content?n+e.content:n+e},t.printExceptionAndStackTraceToConsole=function(e,n){void 0===n&&(n="Unhandled exception"),t.log(t.createErrorMessage(e,n))},t.getGlobalObject=function(){return"object"==typeof i?i:"object"==typeof window?window:"object"==typeof self?self:{}},t.toString=Object.prototype.toString,t.commonJSAvailable()&&(e.exports=t)}(t||(t={})),function(){if("function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var e=function(e,t){var n=function(e,t,n){return e<t?t:e>n?n:e};e|=0,t|=0,arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var r=(t=n(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)},t=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],n=void 0;if("object"==typeof window?n=window:"object"==typeof self&&(n=self),void 0!==n)for(var r=0;r<t.length;r++)n[t[r]]&&(n[t[r]].prototype.subarray=e)}}(),function(e){var t=function(){function t(){}return t.compressAsync=function(t,n,r){var o=new e.Timer,i=new e.Compressor;if(!r)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof t)t=e.encodeUTF8(t);else if(null==t||!(t instanceof Uint8Array))return void r(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var a=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],l=function(t){if(t<a.length){var c=void 0;try{c=i.compressBlock(a[t])}catch(J$){return void r(void 0,J$)}s.push(c),o.getElapsedTime()<=20?l(t+1):(e.enqueueImmediate((function(){return l(t+1)})),o.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate((function(){var t;try{t=e.CompressionCommon.encodeCompressedBytes(u,n.outputEncoding)}catch(J$){return void r(void 0,J$)}e.enqueueImmediate((function(){return r(t)}))}))}};e.enqueueImmediate((function(){return l(0)}))},t.createCompressionStream=function(){var t=new e.Compressor,n=new($T().Transform)({decodeStrings:!0,highWaterMark:65536});return n._transform=function(r,o,i){var a;try{a=e.BufferTools.uint8ArrayToBuffer(t.compressBlock(e.BufferTools.bufferToUint8Array(r)))}catch(J$){return void n.emit("error",J$)}n.push(a),i()},n},t}();e.AsyncCompressor=t}(t||(t={})),function(e){var t=function(){function t(){}return t.decompressAsync=function(t,n,r){if(!r)throw new TypeError("decompressAsync: No callback argument given");var o=new e.Timer;try{t=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding)}catch(J$){return void r(void 0,J$)}var i=new e.Decompressor,a=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],l=function(t){if(t<a.length){var c=void 0;try{c=i.decompressBlock(a[t])}catch(J$){return void r(void 0,J$)}s.push(c),o.getElapsedTime()<=20?l(t+1):(e.enqueueImmediate((function(){return l(t+1)})),o.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate((function(){var t;try{t=e.CompressionCommon.encodeDecompressedBytes(u,n.outputEncoding)}catch(J$){return void r(void 0,J$)}e.enqueueImmediate((function(){return r(t)}))}))}};e.enqueueImmediate((function(){return l(0)}))},t.createDecompressionStream=function(){var t=new e.Decompressor,n=new($T().Transform)({decodeStrings:!0,highWaterMark:65536});return n._transform=function(r,o,i){var a;try{a=e.BufferTools.uint8ArrayToBuffer(t.decompressBlock(e.BufferTools.bufferToUint8Array(r)))}catch(J$){return void n.emit("error",J$)}n.push(a),i()},n},t}();e.AsyncDecompressor=t}(t||(t={})),function(e){var t;!function(t){t.compressAsync=function(e,n,r){if("ByteArray"!=n.inputEncoding||e instanceof Uint8Array){var o={token:Math.random().toString(),type:"compress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(e){var n=e.data;n&&n.token==o.token&&(t.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",i),t.globalWorker.postMessage(o,[])}else r(void 0,new TypeError("compressAsync: input is not a Uint8Array"))},t.decompressAsync=function(e,n,r){var o={token:Math.random().toString(),type:"decompress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},i=function(e){var n=e.data;n&&n.token==o.token&&(t.globalWorker.removeEventListener("message",i),"error"==n.type?r(void 0,new Error(n.error)):r(n.data))};t.globalWorker.addEventListener("message",i),t.globalWorker.postMessage(o,[])},t.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&null!=self.addEventListener&&(self.addEventListener("message",(function(t){var n=t.data;if("compress"==n.type){var r=void 0;try{r=e.compress(n.data,{outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(o={token:n.token,type:"compressionResult",data:r,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}else if("decompress"==n.type){var o,i=void 0;try{i=e.decompress(n.data,{inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(o={token:n.token,type:"decompressionResult",data:i,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}})),self.addEventListener("error",(function(t){e.log(e.createErrorMessage(t.error,"Unexpected LZUTF8 WebWorker exception"))})))},t.createGlobalWorkerIfNeeded=function(){if(t.globalWorker)return!0;if(!e.webWorkersAvailable())return!1;if(!t.scriptURI&&"object"==typeof document){var n=document.getElementById("lzutf8");null!=n&&(t.scriptURI=n.getAttribute("src")||void 0)}return!!t.scriptURI&&(t.globalWorker=new Worker(t.scriptURI),!0)},t.terminate=function(){t.globalWorker&&(t.globalWorker.terminate(),t.globalWorker=void 0)}}(t=e.WebWorker||(e.WebWorker={})),t.installWebWorkerIfNeeded()}(t||(t={})),function(e){var t=function(){function e(e,t,n){this.container=e,this.startPosition=t,this.length=n}return e.prototype.get=function(e){return this.container[this.startPosition+e]},e.prototype.getInReversedOrder=function(e){return this.container[this.startPosition+this.length-1-e]},e.prototype.set=function(e,t){this.container[this.startPosition+e]=t},e}();e.ArraySegment=t}(t||(t={})),function(e){var t;(t=e.ArrayTools||(e.ArrayTools={})).copyElements=function(e,t,n,r,o){for(;o--;)n[r++]=e[t++]},t.zeroElements=function(e,t,n){for(;n--;)e[t++]=0},t.countNonzeroValuesInArray=function(e){for(var t=0,n=0;n<e.length;n++)e[n]&&t++;return t},t.truncateStartingElements=function(e,t){if(e.length<=t)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var n=e.length-t,r=0;r<t;r++)e[r]=e[n+r];e.length=t},t.doubleByteArrayCapacity=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},t.concatUint8Arrays=function(e){for(var t=0,n=0,r=e;n<r.length;n++)t+=(l=r[n]).length;for(var o=new Uint8Array(t),i=0,a=0,s=e;a<s.length;a++){var l=s[a];o.set(l,i),i+=l.length}return o},t.splitByteArray=function(e,t){for(var n=[],r=0;r<e.length;){var o=Math.min(t,e.length-r);n.push(e.subarray(r,r+o)),r+=o}return n}}(t||(t={})),function(e){var t;(t=e.BufferTools||(e.BufferTools={})).convertToUint8ArrayIfNeeded=function(e){return"function"==typeof Buffer&&Buffer.isBuffer(e)?t.bufferToUint8Array(e):e},t.uint8ArrayToBuffer=function(e){if(Buffer.prototype instanceof Uint8Array){var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Object.setPrototypeOf(t,Buffer.prototype),t}for(var n=e.length,r=new Buffer(n),o=0;o<n;o++)r[o]=e[o];return r},t.bufferToUint8Array=function(e){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e[r];return n}}(t||(t={})),function(e){var t;(t=e.CompressionCommon||(e.CompressionCommon={})).getCroppedBuffer=function(e,t,n,r){void 0===r&&(r=0);var o=new Uint8Array(n+r);return o.set(e.subarray(t,t+n)),o},t.getCroppedAndAppendedByteArray=function(t,n,r,o){return e.ArrayTools.concatUint8Arrays([t.subarray(n,n+r),o])},t.detectCompressionSourceEncoding=function(e){if(null==e)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof e)return"String";if(e instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(e))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},t.encodeCompressedBytes=function(t,n){switch(n){case"ByteArray":return t;case"Buffer":return e.BufferTools.uint8ArrayToBuffer(t);case"Base64":return e.encodeBase64(t);case"BinaryString":return e.encodeBinaryString(t);case"StorageBinaryString":return e.encodeStorageBinaryString(t);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},t.decodeCompressedBytes=function(t,n){if(null==n)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(n){case"ByteArray":case"Buffer":var r=e.BufferTools.convertToUint8ArrayIfNeeded(t);if(!(r instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return r;case"Base64":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return e.decodeBase64(t);case"BinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return e.decodeBinaryString(t);case"StorageBinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return e.decodeStorageBinaryString(t);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(n,"'"))}},t.encodeDecompressedBytes=function(t,n){switch(n){case"String":return e.decodeUTF8(t);case"ByteArray":return t;case"Buffer":if("function"!=typeof Buffer)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return e.BufferTools.uint8ArrayToBuffer(t);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(t||(t={})),function(e){var t;!function(t){var n,r=[];t.enqueueImmediate=function(e){r.push(e),1===r.length&&n()},t.initializeScheduler=function(){var t=function(){for(var t=0,n=r;t<n.length;t++){var o=n[t];try{o.call(void 0)}catch(i){e.printExceptionAndStackTraceToConsole(i,"enqueueImmediate exception")}}r.length=0};if(e.runningInNodeJS())n=function(){return setImmediate((function(){return t()}))};else if("object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var o,i="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",(function(e){e.data===i&&t()})),o=e.runningInNullOrigin()?"*":window.location.href,n=function(){return window.postMessage(i,o)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var a=new MessageChannel;a.port1.onmessage=function(){return t()},n=function(){return a.port2.postMessage(0)}}else n=function(){return setTimeout((function(){return t()}),0)}},t.initializeScheduler()}(t=e.EventLoop||(e.EventLoop={})),e.enqueueImmediate=function(e){return t.enqueueImmediate(e)}}(t||(t={})),function(e){var t;(t=e.ObjectTools||(e.ObjectTools={})).override=function(e,n){return t.extend(e,n)},t.extend=function(e,t){if(null==e)throw new TypeError("obj is null or undefined");if("object"!=typeof e)throw new TypeError("obj is not an object");if(null==t&&(t={}),"object"!=typeof t)throw new TypeError("newProperties is not an object");if(null!=t)for(var n in t)e[n]=t[n];return e}}(t||(t={})),function(e){e.getRandomIntegerInRange=function(e,t){return e+Math.floor(Math.random()*(t-e))},e.getRandomUTF16StringOfLength=function(t){for(var n="",r=0;r<t;r++){var o=void 0;do{o=e.getRandomIntegerInRange(0,1114112)}while(o>=55296&&o<=57343);n+=e.Encoding.CodePoint.decodeToString(o)}return n}}(t||(t={})),function(e){var t=function(){function e(e){void 0===e&&(e=1024),this.outputBufferCapacity=e,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return e.prototype.appendCharCode=function(e){this.outputBuffer[this.outputPosition++]=e,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},e.prototype.appendCharCodes=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e[t])},e.prototype.appendString=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e.charCodeAt(t))},e.prototype.appendCodePoint=function(e){if(e<=65535)this.appendCharCode(e);else{if(!(e<=1114111))throw new Error("appendCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"));this.appendCharCode(55296+(e-65536>>>10)),this.appendCharCode(56320+(e-65536&1023))}},e.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},e.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},e}();e.StringBuilder=t}(t||(t={})),function(e){var t=function(){function t(){this.restart()}return t.prototype.restart=function(){this.startTime=t.getTimestamp()},t.prototype.getElapsedTime=function(){return t.getTimestamp()-this.startTime},t.prototype.getElapsedTimeAndRestart=function(){var e=this.getElapsedTime();return this.restart(),e},t.prototype.logAndRestart=function(t,n){void 0===n&&(n=!0);var r=this.getElapsedTime(),o="".concat(t,": ").concat(r.toFixed(3),"ms");return e.log(o,n),this.restart(),r},t.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},t.getMicrosecondTimestamp=function(){return Math.floor(1e3*t.getTimestamp())},t.createGlobalTimestampFunction=function(){if("object"==typeof process&&"function"==typeof process.hrtime){var e=0;this.timestampFunc=function(){var t=process.hrtime(),n=1e3*t[0]+t[1]/1e6;return e+n},e=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var t=Date.now(),n=new chrome.Interval;n.start(),this.timestampFunc=function(){return t+n.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var r=Date.now()-performance.now();this.timestampFunc=function(){return r+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},t}();e.Timer=t}(t||(t={})),function(e){var t=function(){function t(t){void 0===t&&(t=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,t&&"function"==typeof Uint32Array?this.prefixHashTable=new e.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new e.CompressorSimpleHashTable(this.PrefixHashTableSize)}return t.prototype.compressBlock=function(t){if(null==t)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof t&&(t=e.encodeUTF8(t)),t=e.BufferTools.convertToUint8ArrayIfNeeded(t),this.compressUtf8Block(t)},t.prototype.compressUtf8Block=function(e){if(!e||0==e.length)return new Uint8Array(0);var t=this.cropAndAddNewBytesToInputBuffer(e),n=this.inputBuffer,r=this.inputBuffer.length;this.outputBuffer=new Uint8Array(e.length),this.outputBufferPosition=0;for(var o=0,i=t;i<r;i++){var a=n[i],s=i<o;if(i>r-this.MinimumSequenceLength)s||this.outputRawByte(a);else{var l=this.getBucketIndexForPrefix(i);if(!s){var c=this.findLongestMatch(i,l);null!=c&&(this.outputPointerBytes(c.length,c.distance),o=i+c.length,s=!0)}s||this.outputRawByte(a);var u=this.inputBufferStreamOffset+i;this.prefixHashTable.addValueToBucket(l,u)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},t.prototype.findLongestMatch=function(e,t){var n=this.prefixHashTable.getArraySegmentForBucketIndex(t,this.reusableArraySegmentObject);if(null==n)return null;for(var r,o=this.inputBuffer,i=0,a=0;a<n.length;a++){var s=n.getInReversedOrder(a)-this.inputBufferStreamOffset,l=e-s,c=void 0;if(c=void 0===r?this.MinimumSequenceLength-1:r<128&&l>=128?i+(i>>>1):i,l>this.MaximumMatchDistance||c>=this.MaximumSequenceLength||e+c>=o.length)break;if(o[s+c]===o[e+c])for(var u=0;;u++){if(e+u===o.length||o[s+u]!==o[e+u]){u>c&&(r=l,i=u);break}if(u===this.MaximumSequenceLength)return{distance:l,length:this.MaximumSequenceLength}}}return void 0!==r?{distance:r,length:i}:null},t.prototype.getBucketIndexForPrefix=function(e){return(7880599*this.inputBuffer[e]+39601*this.inputBuffer[e+1]+199*this.inputBuffer[e+2]+this.inputBuffer[e+3])%this.PrefixHashTableSize},t.prototype.outputPointerBytes=function(e,t){t<128?(this.outputRawByte(192|e),this.outputRawByte(t)):(this.outputRawByte(224|e),this.outputRawByte(t>>>8),this.outputRawByte(255&t))},t.prototype.outputRawByte=function(e){this.outputBuffer[this.outputBufferPosition++]=e},t.prototype.cropAndAddNewBytesToInputBuffer=function(t){if(void 0===this.inputBuffer)return this.inputBuffer=t,0;var n=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),r=this.inputBuffer.length-n;return this.inputBuffer=e.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,r,n,t),this.inputBufferStreamOffset+=r,n},t}();e.Compressor=t}(t||(t={})),function(e){var t=function(){function t(e){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*e),this.storage=new Uint32Array(2*e),this.storageIndex=1}return t.prototype.addValueToBucket=function(t,n){t<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var r,o=this.bucketLocators[t];if(0===o)o=this.storageIndex,r=1,this.storage[this.storageIndex]=n,this.storageIndex+=this.minimumBucketCapacity;else{(r=this.bucketLocators[t+1])===this.maximumBucketCapacity-1&&(r=this.truncateBucketToNewerElements(o,r,this.maximumBucketCapacity/2));var i=o+r;0===this.storage[i]?(this.storage[i]=n,i===this.storageIndex&&(this.storageIndex+=r)):(e.ArrayTools.copyElements(this.storage,o,this.storage,this.storageIndex,r),o=this.storageIndex,this.storageIndex+=r,this.storage[this.storageIndex++]=n,this.storageIndex+=r),r++}this.bucketLocators[t]=o,this.bucketLocators[t+1]=r},t.prototype.truncateBucketToNewerElements=function(t,n,r){var o=t+n-r;return e.ArrayTools.copyElements(this.storage,o,this.storage,t,r),e.ArrayTools.zeroElements(this.storage,t+r,n-r),r},t.prototype.compact=function(){var t=this.bucketLocators,n=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var r=0;r<t.length;r+=2){var o=t[r+1];0!==o&&(this.bucketLocators[r]=this.storageIndex,this.bucketLocators[r+1]=o,this.storageIndex+=Math.max(Math.min(2*o,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(8*this.storageIndex);for(r=0;r<t.length;r+=2){var i=t[r];if(0!==i){var a=this.bucketLocators[r],s=this.bucketLocators[r+1];e.ArrayTools.copyElements(n,i,this.storage,a,s)}}},t.prototype.getArraySegmentForBucketIndex=function(t,n){t<<=1;var r=this.bucketLocators[t];return 0===r?null:(void 0===n&&(n=new e.ArraySegment(this.storage,r,this.bucketLocators[t+1])),n)},t.prototype.getUsedBucketCount=function(){return Math.floor(e.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.bucketLocators.length;t+=2)e+=this.bucketLocators[t+1];return e},t}();e.CompressorCustomHashTable=t}(t||(t={})),function(e){var t=function(){function t(e){this.maximumBucketCapacity=64,this.buckets=new Array(e)}return t.prototype.addValueToBucket=function(t,n){var r=this.buckets[t];void 0===r?this.buckets[t]=[n]:(r.length===this.maximumBucketCapacity-1&&e.ArrayTools.truncateStartingElements(r,this.maximumBucketCapacity/2),r.push(n))},t.prototype.getArraySegmentForBucketIndex=function(t,n){var r=this.buckets[t];return void 0===r?null:(void 0===n&&(n=new e.ArraySegment(r,0,r.length)),n)},t.prototype.getUsedBucketCount=function(){return e.ArrayTools.countNonzeroValuesInArray(this.buckets)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.buckets.length;t++)void 0!==this.buckets[t]&&(e+=this.buckets[t].length);return e},t}();e.CompressorSimpleHashTable=t}(t||(t={})),function(e){var t=function(){function t(){this.MaximumMatchDistance=32767,this.outputPosition=0}return t.prototype.decompressBlockToString=function(t){return t=e.BufferTools.convertToUint8ArrayIfNeeded(t),e.decodeUTF8(this.decompressBlock(t))},t.prototype.decompressBlock=function(t){this.inputBufferRemainder&&(t=e.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,t]),this.inputBufferRemainder=void 0);for(var n=this.cropOutputBufferToWindowAndInitialize(Math.max(4*t.length,1024)),r=0,o=t.length;r<o;r++){var i=t[r];if(i>>>6==3){var a=i>>>5;if(r==o-1||r==o-2&&7==a){this.inputBufferRemainder=t.subarray(r);break}if(t[r+1]>>>7==1)this.outputByte(i);else{var s=31&i,l=void 0;6==a?(l=t[r+1],r+=1):(l=t[r+1]<<8|t[r+2],r+=2);for(var c=this.outputPosition-l,u=0;u<s;u++)this.outputByte(this.outputBuffer[c+u])}}else this.outputByte(i)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),e.CompressionCommon.getCroppedBuffer(this.outputBuffer,n,this.outputPosition-n)},t.prototype.outputByte=function(t){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=e.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=t},t.prototype.cropOutputBufferToWindowAndInitialize=function(t){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(t),0;var n=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=e.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-n,n,t),this.outputPosition=n,this.outputBufferRemainder){for(var r=0;r<this.outputBufferRemainder.length;r++)this.outputByte(this.outputBufferRemainder[r]);this.outputBufferRemainder=void 0}return n},t.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var e=1;e<=4&&this.outputPosition-e>=0;e++){var t=this.outputBuffer[this.outputPosition-e];if(e<4&&t>>>3==30||e<3&&t>>>4==14||e<2&&t>>>5==6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-e,this.outputPosition),void(this.outputPosition-=e)}},t}();e.Decompressor=t}(t||(t={})),function(e){var t,n,r,o;t=e.Encoding||(e.Encoding={}),n=t.Base64||(t.Base64={}),r=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),o=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),n.encode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(t).toString("base64"):n.encodeWithJS(t):""},n.decode=function(t){return t?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(t,"base64")):n.decodeWithJS(t):new Uint8Array(0)},n.encodeWithJS=function(t,n){if(void 0===n&&(n=!0),!t||0==t.length)return"";for(var o,i=r,a=new e.StringBuilder,s=0,l=t.length;s<l;s+=3)s<=l-3?(o=t[s]<<16|t[s+1]<<8|t[s+2],a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),a.appendCharCode(i[63&o]),o=0):s===l-2?(o=t[s]<<16|t[s+1]<<8,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),a.appendCharCode(i[o>>>6&63]),n&&a.appendCharCode(61)):s===l-1&&(o=t[s]<<16,a.appendCharCode(i[o>>>18&63]),a.appendCharCode(i[o>>>12&63]),n&&(a.appendCharCode(61),a.appendCharCode(61)));return a.getOutputString()},n.decodeWithJS=function(e,t){if(!e||0==e.length)return new Uint8Array(0);var n=e.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?e+="==":3===n&&(e+="="),t||(t=new Uint8Array(e.length));for(var r=0,i=e.length,a=0;a<i;a+=4){var s=o[e.charCodeAt(a)]<<18|o[e.charCodeAt(a+1)]<<12|o[e.charCodeAt(a+2)]<<6|o[e.charCodeAt(a+3)];t[r++]=s>>>16&255,t[r++]=s>>>8&255,t[r++]=255&s}return 61==e.charCodeAt(i-1)&&r--,61==e.charCodeAt(i-2)&&r--,t.subarray(0,r)}}(t||(t={})),function(e){var t,n;t=e.Encoding||(e.Encoding={}),(n=t.BinaryString||(t.BinaryString={})).encode=function(t){if(null==t)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===t.length)return"";for(var n=t.length,r=new e.StringBuilder,o=0,i=1,a=0;a<n;a+=2){var s=void 0;s=a==n-1?t[a]<<8:t[a]<<8|t[a+1],r.appendCharCode(o<<16-i|s>>>i),o=s&(1<<i)-1,15===i?(r.appendCharCode(o),o=0,i=1):i+=1,a>=n-2&&r.appendCharCode(o<<16-i)}return r.appendCharCode(32768|n%2),r.getOutputString()},n.decode=function(e){if("string"!=typeof e)throw new TypeError("BinaryString.decode: invalid input type");if(""==e)return new Uint8Array(0);for(var t=new Uint8Array(3*e.length),n=0,r=function(e){t[n++]=e>>>8,t[n++]=255&e},o=0,i=0,a=0;a<e.length;a++){var s=e.charCodeAt(a);s>=32768?(32769==s&&n--,i=0):(0==i?o=s:(r(o<<i|s>>>15-i),o=s&(1<<15-i)-1),15==i?i=0:i+=1)}return t.subarray(0,n)}}(t||(t={})),function(e){var t,n;t=e.Encoding||(e.Encoding={}),(n=t.CodePoint||(t.CodePoint={})).encodeFromString=function(e,t){var n=e.charCodeAt(t);if(n<55296||n>56319)return n;var r=e.charCodeAt(t+1);if(r>=56320&&r<=57343)return r-56320+(n-55296<<10)+65536;throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(n,", followed by ").concat(r,", which is not a trailing surrogate character code."))},n.decodeToString=function(e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return String.fromCharCode(55296+(e-65536>>>10),56320+(e-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(e," cannot be encoded in UTF-16"))}}(t||(t={})),function(e){var t,n,r;t=e.Encoding||(e.Encoding={}),n=t.DecimalString||(t.DecimalString={}),r=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"],n.encode=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r[e[n]]);return t.join(" ")}}(t||(t={})),function(e){var t,n;t=e.Encoding||(e.Encoding={}),(n=t.StorageBinaryString||(t.StorageBinaryString={})).encode=function(e){return t.BinaryString.encode(e).replace(/\0/g,"")},n.decode=function(e){return t.BinaryString.decode(e.replace(/\u8002/g,"\0"))}}(t||(t={})),function(e){var t,n,r,o;t=e.Encoding||(e.Encoding={}),(n=t.UTF8||(t.UTF8={})).encode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(t,"utf8")):n.createNativeTextEncoderAndDecoderIfAvailable()?r.encode(t):n.encodeWithJS(t):new Uint8Array(0)},n.decode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(t).toString("utf8"):n.createNativeTextEncoderAndDecoderIfAvailable()?o.decode(t):n.decodeWithJS(t):""},n.encodeWithJS=function(e,n){if(!e||0==e.length)return new Uint8Array(0);n||(n=new Uint8Array(4*e.length));for(var r=0,o=0;o<e.length;o++){var i=t.CodePoint.encodeFromString(e,o);if(i<=127)n[r++]=i;else if(i<=2047)n[r++]=192|i>>>6,n[r++]=128|63&i;else if(i<=65535)n[r++]=224|i>>>12,n[r++]=128|i>>>6&63,n[r++]=128|63&i;else{if(!(i<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");n[r++]=240|i>>>18,n[r++]=128|i>>>12&63,n[r++]=128|i>>>6&63,n[r++]=128|63&i,o++}}return n.subarray(0,r)},n.decodeWithJS=function(t,n,r){if(void 0===n&&(n=0),!t||0==t.length)return"";void 0===r&&(r=t.length);for(var o,i,a=new e.StringBuilder,s=n,l=r;s<l;){if((i=t[s])>>>7==0)o=i,s+=1;else if(i>>>5==6){if(s+1>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(31&i)<<6|63&t[s+1],s+=2}else if(i>>>4==14){if(s+2>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(15&i)<<12|(63&t[s+1])<<6|63&t[s+2],s+=3}else{if(i>>>3!=30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+s);if(s+3>=r)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(7&i)<<18|(63&t[s+1])<<12|(63&t[s+2])<<6|63&t[s+3],s+=4}a.appendCodePoint(o)}return a.getOutputString()},n.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!r||"function"==typeof TextEncoder&&(r=new TextEncoder("utf-8"),o=new TextDecoder("utf-8"),!0)}}(t||(t={})),function(e){e.compress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("compress: undefined or null input received");var r=e.CompressionCommon.detectCompressionSourceEncoding(t);n=e.ObjectTools.override({inputEncoding:r,outputEncoding:"ByteArray"},n);var o=(new e.Compressor).compressBlock(t);return e.CompressionCommon.encodeCompressedBytes(o,n.outputEncoding)},e.decompress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("decompress: undefined or null input received");n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},n);var r=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding),o=(new e.Decompressor).decompressBlock(r);return e.CompressionCommon.encodeDecompressedBytes(o,n.outputEncoding)},e.compressAsync=function(t,n,r){var o;null==r&&(r=function(){});try{o=e.CompressionCommon.detectCompressionSourceEncoding(t)}catch(J$){return void r(void 0,J$)}n=e.ObjectTools.override({inputEncoding:o,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},n),e.enqueueImmediate((function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.compressAsync(t,n,r):e.AsyncCompressor.compressAsync(t,n,r)}))},e.decompressAsync=function(t,n,r){if(null==r&&(r=function(){}),null!=t){n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},n);var o=e.BufferTools.convertToUint8ArrayIfNeeded(t);e.EventLoop.enqueueImmediate((function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.decompressAsync(o,n,r):e.AsyncDecompressor.decompressAsync(t,n,r)}))}else r(void 0,new TypeError("decompressAsync: undefined or null input received"))},e.createCompressionStream=function(){return e.AsyncCompressor.createCompressionStream()},e.createDecompressionStream=function(){return e.AsyncDecompressor.createDecompressionStream()},e.encodeUTF8=function(t){return e.Encoding.UTF8.encode(t)},e.decodeUTF8=function(t){return e.Encoding.UTF8.decode(t)},e.encodeBase64=function(t){return e.Encoding.Base64.encode(t)},e.decodeBase64=function(t){return e.Encoding.Base64.decode(t)},e.encodeBinaryString=function(t){return e.Encoding.BinaryString.encode(t)},e.decodeBinaryString=function(t){return e.Encoding.BinaryString.decode(t)},e.encodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.encode(t)},e.decodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.decode(t)}}(t||(t={}))}(eP);const UT=a(eP.exports),WT=({id:e,state:t,title:n="Unknown Modal",updateState:r,onSave:o,onDelete:i})=>{const{page:a,character:s,system:l}=t,c=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:c,children:[ne.jsx(dp,{title:n,onClose:c}),ne.jsx(cp,{children:ne.jsx(HT,{page:a,character:s,system:l,updateState:r})}),ne.jsx(up,{children:ne.jsx(sp,{color:"light",onClick:c,children:"close"})})]})};function HT({page:e,character:t,system:n,updateState:r}){const o=q.useMemo((()=>e.lexical?JSON.parse(UT.decompress(UT.decodeBase64(e.lexical))):{}),[e.lexical]);return ne.jsx(q$,{data:o,state:{character:t,system:n,page:e},updateState:r})}const VT=[{type:"edit_object",renderElement:(e,t,n,r,o,i)=>{const a=t.getSystem();return ne.jsx(KR,{id:e,title:n,data:r,types:a.types,onSave:o,onDelete:i})}},{type:"edit_number",renderElement:(e,t,n,r,o,i)=>ne.jsx(XR,{id:e,title:n,data:r,onSave:o})},{type:"edit_string",renderElement:(e,t,n,r,o,i)=>ne.jsx(JR,{id:e,title:n,data:r,onSave:o})}],qT={process:(e,t)=>{const n=e.getParam(t.id,"data"),r=e.getSystem(),o=[...VT,...r.modals.map((e=>({type:e.name,renderElement:(t,n,r,o,i,a)=>ne.jsx(WT,{id:t,state:{...n.getState(),page:e},title:r,updateState:n.callback,onSave:i})})))];fh("blueprint-opened-modal",(({id:r})=>o.find((e=>e.type===t.data.type)).renderElement(r,e,t.data.title,n,(n=>{e.setParam(t.id,"newdata",n),e.processNodes(e.getConnectingNodeForHandle(t,"save","output"))}),(()=>{e.processNodes(e.getConnectingNodeForHandle(t,"delete","output"))}))))}},KT={process:(e,t)=>{const n=e.getPage(),r=t.data.chosenState;if(!r)return;const o=n.state.findIndex((e=>e.name===r.name));if(-1===o)return;const i=e.getParam(t.id,r.name),a=Yw(n,(e=>(e.state[o]={...e.state[o],value:i},e)));return e.setPage(a),e.getConnectingNodeForHandle(t,"next","output")}};const ZT={process:(e,t)=>{var n;const r=e.getPage().state.find((e=>e.name===t.data.chosenState.name));if(!r)return;const o=null!==(n=r.value)&&void 0!==n?n:function(e,t){if(["string","number"].includes(t.type))return ex(e.types,t);if(t.isArray)return[];const n=e.types.find((e=>e.name===t.type));if(!n)return;let r={_type:{...n}};for(let o=0;o<n.properties.length;o++){const t=n.properties[o];let i=t.typeData;r[t.key]=ex(e.types,i)}return r}(e.getSystem(),r.type);return e.setParam(t.id,t.data.chosenState.name,o),e.getConnectingNodeForHandle(t,"next","output")}},YT={entry:{process:(e,t)=>{const n=e.input;for(let r in n){const o=n[r];e.setParam(t.id,r,o)}return e.getConnectingNodeForHandle(t,"start","output")}},output:{process:(e,t)=>{const{name:n}=t.data.param,r=e.getParam(t.id,n);e.setOutput(r)}},get_character_data:iw,set_character_data:Gw,get_system_data:{process:(e,t)=>{const n=e.getSystem().data.find((e=>e.name===t.data.path));return e.setParam(t.id,"output",null==n?void 0:n.data),e.getConnectingNodeForHandle(t,"next","output")}},get_page_data:ZT,set_page_data:KT,number_to_string:{process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",n.toString()),e.getConnectingNodeForHandle(t,"next","output")}},add_to_array:{process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),o=n.findIndex((e=>e.name===r.name)),i=-1===o?n.concat([r]):n.concat([]);return e.setParam(t.id,"output",i),e.getConnectingNodeForHandle(t,"next","output")}},array_get:{process:(e,t)=>{const n=e.getParam(t.id,"base")||[],r=e.getParam(t.id,"name")||"",o=n.findIndex((e=>e.name===r));return e.setParam(t.id,"output",n[o]),e.getConnectingNodeForHandle(t,"next","output")}},array_remove:{process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"name"),o=n.findIndex((e=>e.name===r));let i=n.concat();return-1!==o&&i.splice(o,1),e.setParam(t.id,"output",i),e.getConnectingNodeForHandle(t,"next","output")}},array_update:{process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),o=e.getParam(t.id,"name"),i=n.findIndex((e=>e.name===o));let a=n.concat();return-1!==i&&(a[i]=r),e.setParam(t.id,"output",a),e.getConnectingNodeForHandle(t,"next","output")}},filter:{init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),o=e.getParam(t.id,"input");if(0!==r){if(e.getParam(t.id,"filtered?")){const i=[...n.get("newArray"),o[r-1]];n.set("newArray",i),e.setParam(t.id,"filterd",i)}}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",o[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},map:{init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),o=e.getParam(t.id,"input");if(0!==r){const r=e.getParam(t.id,"newitem");if(r){const o=[...n.get("newArray"),r];n.set("newArray",o),e.setParam(t.id,"filterd",o)}}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",o[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},string_new:{process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},string_includes:{process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n.includes(r)),e.getConnectingNodeForHandle(t,"next","output")}},string_compare:{process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},string_concat:{process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},spread_object:{process:(e,t)=>{const n=e.getParam(t.id,"input");for(let r in n){const o=n[r];e.setParam(t.id,r,o)}return e.getConnectingNodeForHandle(t,"next","output")}},create_data_from_type:tx,new_number:{process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},divide:{process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n/r),e.getConnectingNodeForHandle(t,"next","output")}},add:{process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},subtract:{process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n-r),e.getConnectingNodeForHandle(t,"next","output")}},floor:nx,multiply:{process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n*r),e.getConnectingNodeForHandle(t,"next","output")}},new_enum:{process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},enum_compare:{process:(e,t)=>{const n=e.getParam(t.id,"enum1"),r=e.getParam(t.id,"enum2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},boolean_new:{process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},boolean_branch:{process:(e,t)=>e.getParam(t.id,"input")?e.getConnectingNodeForHandle(t,"true","output"):e.getConnectingNodeForHandle(t,"false","output")},boolean_inverse:{process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",!n),e.getConnectingNodeForHandle(t,"next","output")}},open_modal:qT};class GT{constructor(t){e(this,"blueprint",void 0),e(this,"state",void 0),e(this,"input",{}),e(this,"nodeState",new Map),e(this,"params",new Map),e(this,"output",null),e(this,"callback",(()=>{})),this.blueprint=t}processBlueprint(e,t,n){const r=rw(this.blueprint);this.state=t,this.input=e,this.callback=n;return this.processNodes(r)}processNodes(e){const t=this.processNode(e);return t?this.processNodes(t):(this.callback(this.state),this.getOutput())}processNode(e){if(!e)return;const t=(n=e.type||"",YT[n]||{process:()=>{}});var n;!this.nodeState.get(e.id)&&t.init&&(this.nodeState.set(e.id,new Map),t.init(this,e));return t.process(this,e)}getConnectingNodeForHandle(e,t,n){const r=this.blueprint.edges.find((r=>{var o,i;return("input"===n?r.target===e.id:r.source===e.id)&&((null===(o=r.sourceHandle)||void 0===o?void 0:o.split("-")[0])===t&&"output"===n||(null===(i=r.sourceHandle)||void 0===i?void 0:i.split("-")[0])===t&&"input"===n)}));if(r)return"output"===n?ow(this.blueprint,r.target):"input"===n?ow(this.blueprint,r.source):void 0}getPossibleParamsForNode(e,t){return this.blueprint.edges.filter((n=>"input"===t?n.target===e:n.source===e)).map((e=>{var n,r;return"input"===t?null===(n=e.targetHandle)||void 0===n?void 0:n.split("-")[0]:null===(r=e.sourceHandle)||void 0===r?void 0:r.split("-")[0]}))}getParamType(e,t){var n;const r=this.blueprint.edges.filter((n=>{var r;return n.target===e&&(null===(r=n.targetHandle)||void 0===r?void 0:r.split("-")[0])===t})),o=r.find((e=>void 0!==this.params.get(e.id)));return null==o||null===(n=o.targetHandle)||void 0===n?void 0:n.split("-")[1]}getParam(e,t){const n=this.blueprint.edges.filter((n=>{var r;return n.target===e&&(null===(r=n.targetHandle)||void 0===r?void 0:r.split("-")[0])===t})),r=n.find((e=>void 0!==this.params.get(e.id)));return this.params.get((null==r?void 0:r.id)||"")}setParam(e,t,n){const r=this.blueprint.edges.filter((n=>{var r;return n.source===e&&(null===(r=n.sourceHandle)||void 0===r?void 0:r.split("-")[0])===t}));for(let o=0;o<r.length;o++)this.params.set(r[o].id,n);return this.params}getState(){return this.state}getCharacter(){return this.state.character}setCharacter(e){this.state.character=e}getSystem(){return this.state.system}setSystem(e){this.state.system=e}getPage(){return this.state.page}setPage(e){this.state.page=e}getOutput(){return this.output}setOutput(e){this.output=e}}const XT={"no style":{background:"",border:"",hover:""},light:{background:"bg-white dark:bg-neutral-800",border:"border border-neutral-200 dark:border-neutral-600",hover:"cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700"},primary:{background:"bg-white dark:bg-fantasy-accent",border:"border border-fantasy-border",hover:"cursor-pointer hover:bg-fantasy-accent-dark"},accent:{background:"bg-white dark:bg-accent-800",border:"border border-accent-200 dark:border-accent-600",hover:"cursor-pointer hover:bg-accent-100 dark:hover:bg-accent-700"},confirmation:{background:"bg-white dark:bg-green-800",border:"border border-green-200 dark:border-green-600",hover:"cursor-pointer hover:bg-green-100 dark:hover:bg-green-700"},warning:{background:"bg-white dark:bg-orange-800",border:"border border-orange-200 dark:border-orange-600",hover:"cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-700"}},JT={0:"0px",px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},QT={spacing:{...JT},size:{auto:"auto",full:"100%",half:"50%",third:"33%",...JT}};function eI(e,t,n){var r;let o,i=null!==(r=n.initialDeps)&&void 0!==r?r:[];function a(){var r,a,s,l;let c;n.key&&(null==(r=n.debug)?void 0:r.call(n))&&(c=Date.now());const u=e(),d=u.length!==i.length||u.some(((e,t)=>i[t]!==e));if(!d)return o;let f;if(i=u,n.key&&(null==(a=n.debug)?void 0:a.call(n))&&(f=Date.now()),o=t(...u),n.key&&(null==(s=n.debug)?void 0:s.call(n))){const e=Math.round(100*(Date.now()-c))/100,t=Math.round(100*(Date.now()-f))/100,r=t/16,o=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c ${o(t,5)} /${o(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*r,120))}deg 100% 31%);`,null==n?void 0:n.key)}return null==(l=null==n?void 0:n.onChange)||l.call(n,o),o}return a.updateDeps=e=>{i=e},a}function tI(e,t){if(void 0===e)throw new Error("Unexpected undefined");return e}const nI=(e,t,n)=>{let r;return function(...o){e.clearTimeout(r),r=e.setTimeout((()=>t.apply(this,o)),n)}},rI=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},oI=e=>e,iI=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let o=t;o<=n;o++)r.push(o);return r},aI=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const o=e=>{const{width:n,height:r}=e;t({width:Math.round(n),height:Math.round(r)})};if(o(rI(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver((t=>{const r=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void o({width:t.inlineSize,height:t.blockSize})}o(rI(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()}));return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},sI={passive:!0},lI="undefined"==typeof window||"onscrollend"in window,cI=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let o=0;const i=e.options.useScrollendEvent&&lI?()=>{}:nI(r,(()=>{t(o,!1)}),e.options.isScrollingResetDelay),a=r=>()=>{const{horizontal:a,isRtl:s}=e.options;o=a?n.scrollLeft*(s?-1:1):n.scrollTop,i(),t(o,r)},s=a(!0),l=a(!1);l(),n.addEventListener("scroll",s,sI);const c=e.options.useScrollendEvent&&lI;return c&&n.addEventListener("scrollend",l,sI),()=>{n.removeEventListener("scroll",s),c&&n.removeEventListener("scrollend",l)}},uI=(e,t,n)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},dI=(e,{adjustments:t=0,behavior:n},r)=>{var o,i;const a=e+t;null==(i=null==(o=r.scrollElement)?void 0:o.scrollTo)||i.call(o,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class fI{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver((e=>{e.forEach((e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()}))})):null);return{disconnect:()=>{var n;null==(n=t())||n.disconnect(),e=null},observe:e=>{var n;return null==(n=t())?void 0:n.observe(e,{box:"border-box"})},unobserve:e=>{var n;return null==(n=t())?void 0:n.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach((([t,n])=>{void 0===n&&delete e[t]})),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:oI,rangeExtractor:iI,onChange:()=>{},measureElement:uI,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,n;null==(n=(t=this.options).onChange)||n.call(t,this,e)},this.maybeNotify=eI((()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null])),(e=>{this.notify(e)}),{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach((e=>e())),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();var n;if(this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement)this.targetWindow=this.scrollElement.ownerDocument.defaultView;else this.targetWindow=null!==(n=null==(e=this.scrollElement)?void 0:e.window)&&void 0!==n?n:null;this.elementsCache.forEach((e=>{this.observer.observe(e)})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,(e=>{this.scrollRect=e,this.maybeNotify()}))),this.unsubs.push(this.options.observeElementOffset(this,((e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})))}},this.getSize=()=>{var e;return this.options.enabled?(this.scrollRect=null!==(e=this.scrollRect)&&void 0!==e?e:this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0)},this.getScrollOffset=()=>{var e;return this.options.enabled?(this.scrollOffset=null!==(e=this.scrollOffset)&&void 0!==e?e:"function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset,this.scrollOffset):(this.scrollOffset=null,0)},this.getFurthestMeasurement=(e,t)=>{const n=new Map,r=new Map;for(let o=t-1;o>=0;o--){const t=e[o];if(n.has(t.lane))continue;const i=r.get(t.lane);if(null==i||t.end>i.end?r.set(t.lane,t):t.end<i.end&&n.set(t.lane,!0),n.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort(((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end))[0]:void 0},this.getMeasurementOptions=eI((()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled]),((e,t,n,r,o)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:o})),{key:!1}),this.getMeasurements=eI((()=>[this.getMeasurementOptions(),this.itemSizeCache]),(({count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:o},i)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((e=>{this.itemSizeCache.set(e.key,e.size)})));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const s=this.measurementsCache.slice(0,a);for(let l=a;l<e;l++){const e=r(l),o=1===this.options.lanes?s[l-1]:this.getFurthestMeasurement(s,l),a=o?o.end+this.options.gap:t+n,c=i.get(e),u="number"==typeof c?c:this.options.estimateSize(l),d=a+u,f=o?o.lane:l%this.options.lanes;s[l]={index:l,start:a,size:u,end:d,key:e,lane:f}}return this.measurementsCache=s,s}),{key:!1,debug:()=>this.options.debug}),this.calculateRange=eI((()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes]),((e,t,n,r)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const o=e.length-1,i=t=>e[t].start;if(e.length<=r)return{startIndex:0,endIndex:o};let a=hI(0,o,i,n),s=a;if(1===r)for(;s<o&&e[s].end<n+t;)s++;else if(r>1){const i=Array(r).fill(0);for(;s<o&&i.some((e=>e<n+t));){const t=e[s];i[t.lane]=t.end,s++}const l=Array(r).fill(n+t);for(;a>=0&&l.some((e=>e>=n));){const t=e[a];l[t.lane]=t.start,a--}a=Math.max(0,a-a%r),s=Math.min(o,s+(r-1-s%r))}return{startIndex:a,endIndex:s}}({measurements:e,outerSize:t,scrollOffset:n,lanes:r}):null),{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=eI((()=>{let e=null,t=null;const n=this.calculateRange();return n&&(e=n.startIndex,t=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]}),((e,t,n,r,o)=>null===r||null===o?[]:e({startIndex:r,endIndex:o,overscan:t,count:n})),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const n=this.indexFromElement(e),r=this.measurementsCache[n];if(!r)return;const o=r.key,i=this.elementsCache.get(o);i!==e&&(i&&this.observer.unobserve(i),this.observer.observe(e),this.elementsCache.set(o,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{var n;const r=this.measurementsCache[e];if(!r)return;const o=t-(null!==(n=this.itemSizeCache.get(r.key))&&void 0!==n?n:r.size);0!==o&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(r,o,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach(((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))}))},this.getVirtualItems=eI((()=>[this.getVirtualIndexes(),this.getMeasurements()]),((e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const o=t[e[r]];n.push(o)}return n}),{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return tI(t[hI(0,t.length-1,(e=>tI(t[e]).start),e)])},this.getOffsetForAlignment=(e,t,n=0)=>{const r=this.getSize(),o=this.getScrollOffset();"auto"===t&&(t=e>=o+r?"end":"start"),"center"===t?e+=(n-r)/2:"end"===t&&(e-=r);const i=this.getTotalSize()-r;return Math.max(Math.min(i,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const r=this.getSize(),o=this.getScrollOffset();if("auto"===t)if(n.end>=o+r-this.options.scrollPaddingEnd)t="end";else{if(!(n.start<=o+this.options.scrollPaddingStart))return[o,t];t="start"}const i="end"===t?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,t,n.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:n}={})=>{this.cancelScrollToIndex(),"smooth"===n&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:t="auto",behavior:n}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===n&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(e,t);if(!r)return;const[o,i]=r;this._scrollToOffset(o,{adjustments:void 0,behavior:n}),"smooth"!==n&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout((()=>{this.scrollToIndexTimeoutId=null;if(this.elementsCache.has(this.options.getItemKey(e))){const t=this.getOffsetForIndex(e,i);if(!t)return;const[r]=t;((e,t)=>Math.abs(e-t)<=1)(r,this.getScrollOffset())||this.scrollToIndex(e,{align:i,behavior:n})}else this.scrollToIndex(e,{align:i,behavior:n})})))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let n;if(0===t.length)n=this.options.paddingStart;else if(1===this.options.lanes){var r;n=null!==(r=null==(e=t[t.length-1])?void 0:e.end)&&void 0!==r?r:0}else{const e=Array(this.options.lanes).fill(null);let r=t.length-1;for(;r>=0&&e.some((e=>null===e));){const n=t[r];null===e[n.lane]&&(e[n.lane]=n.end),r--}n=Math.max(...e.filter((e=>null!==e)))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const hI=(e,t,n,r)=>{for(;e<=t;){const o=(e+t)/2|0,i=n(o);if(i<r)e=o+1;else{if(!(i>r))return o;t=o-1}}return e>0?e-1:0};const pI="undefined"!=typeof document?q.useLayoutEffect:q.useEffect;function gI(e){return function(e){const t=q.useReducer((()=>({})),{})[1],n={...e,onChange:(n,r)=>{var o;r?ld.flushSync(t):t(),null==(o=e.onChange)||o.call(e,n,r)}},[r]=q.useState((()=>new fI(n)));return r.setOptions(n),pI((()=>r._didMount()),[]),pI((()=>r._willUpdate())),r}({observeElementRect:aI,observeElementOffset:cI,scrollToFn:dI,...e})}const mI=e=>{var t,n;const r=tw(),o=q.useMemo((()=>{var t;return null!==(t=new GT(e.blueprint).processBlueprint(r,e.state,(()=>{})))&&void 0!==t?t:[]}),[r,e.state]),i=q.useMemo((()=>{if(!e.dynamicVisibility)return e.isVisible;return new GT(e.visibilityBlueprint).processBlueprint(r,e.state,(()=>{}))||!1}),[r,e.state]),a=q.useCallback((()=>{if(!e.isInteractive)return;new GT(e.onPress).processBlueprint(r,e.state,e.updateState)}),[e.onPress,r,e.state,e.updateState]),s=q.useMemo((()=>{var t;return XT[e.background]?null===(t=XT[e.background])||void 0===t?void 0:t.background:""}),[e.background]),l=q.useMemo((()=>{var t;return XT[e.border]?null===(t=XT[e.border])||void 0===t?void 0:t.border:""}),[e.border]),c=q.useMemo((()=>{var t;return e.isInteractive?null===(t=XT[e.hover])||void 0===t?void 0:t.hover:""}),[e.isInteractive]),u=q.useRef(null),d=gI({count:o.length,getScrollElement:()=>u.current,estimateSize:()=>35,overscan:4});return ne.jsx("div",{ref:u,style:{display:i?e.display:"none",position:e.isList?"relative":e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:QT.spacing[e.gap],marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],paddingTop:QT.spacing[e.paddingTop],paddingRight:QT.spacing[e.paddingRight],paddingBottom:QT.spacing[e.paddingBottom],paddingLeft:QT.spacing[e.paddingLeft],height:e.isList?`${d.getTotalSize()+8*o.length}px`:QT.size[e.height],width:e.isList?"100%":QT.size[e.width],maxHeight:QT.size[e.maxHeight],maxWidth:QT.size[e.maxWidth],minHeight:QT.size[e.minHeight],minWidth:QT.size[e.minWidth]},className:`${s} ${l} ${c}`,onClick:a,children:e.isList?ne.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${null!==(t=null===(n=o[0])||void 0===n?void 0:n.start)&&void 0!==t?t:8}px)`,display:e.display,flexDirection:e.flexDirection,gap:QT.spacing[e.gap]},children:d.getVirtualItems().map((t=>{const n=o[t.index];return ne.jsx("div",{"data-index":t.index,ref:d.measureElement,children:ne.jsx(nw,{localData:{[e.dataName]:n},children:e.children})},t.key)}))}):e.children})},vI={colors:{base:{text:"text-neutral-800 dark:text-neutral-200",hover:"group-hover:text-neutral-700 dark:group-hover:text-neutral-300"},light:{text:"text-neutral-500 dark:text-neutral-400",hover:"group-hover:text-neutral-400 dark:group-hover:text-neutral-500"},primary:{text:"text-fantasy-accent",hover:"group-hover:text-fantasy-light"},accent:{text:"text-accent-600 dark:text-accent-400 hover:text-accent-700 dark:hover:text-accent-300",hover:"group-hover:text-accent-700 dark:group-hover:text-accent-300"},confirmation:{text:"text-green-600 dark:text-green-400",hover:"group-hover:text-green-700 dark:group-hover:text-green-300"},warning:{text:"text-orange-600 dark:text-orange-400",hover:"group-hover:text-orange-700 dark:group-hover:text-orange-300"},danger:{text:"text-red-600 dark:text-red-400",hover:"group-hover:text-red-700 dark:group-hover:text-red-300"}},weight:{thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},sizes:{xs:{fontSize:"0.75rem",lineHeight:"1rem"},sm:{fontSize:"0.875rem",lineHeight:"1.25rem"},base:{fontSize:"1rem",lineHeight:"1.5rem"},lg:{fontSize:"1.125rem",lineHeight:"1.75rem"},xl:{fontSize:"1.25rem",lineHeight:"1.75rem"},"2xl":{fontSize:"1.5rem",lineHeight:"2rem"},"3xl":{fontSize:"1.875rem",lineHeight:"2.25rem"},"4xl":{fontSize:"2.25rem",lineHeight:"2.5rem"},"5xl":{fontSize:"3rem",lineHeight:"1"},"6xl":{fontSize:"3.75rem",lineHeight:"1"},"7xl":{fontSize:"4.5rem",lineHeight:"1"},"8xl":{fontSize:"6rem",lineHeight:"1"},"9xl":{fontSize:"8rem",lineHeight:"1"}}},yI=e=>{const t=tw(),n=q.useMemo((()=>{if(!e.useBlueprintValue)return e.text;return new GT(e.blueprint).processBlueprint(t,e.state,(()=>{}))||""}),[e.blueprint,t,e.useBlueprintValue,e.text]),r=q.useMemo((()=>{var t;return vI.colors[e.color]?null===(t=vI.colors[e.color])||void 0===t?void 0:t.text:""}),[e.color]),o=q.useMemo((()=>vI.weight[e.fontWeight]?vI.weight[e.fontWeight]:""),[e.fontWeight]);return ne.jsx("p",{style:{textAlign:e.textAlign,...vI.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],paddingTop:QT.spacing[e.paddingTop],paddingRight:QT.spacing[e.paddingRight],paddingBottom:QT.spacing[e.paddingBottom],paddingLeft:QT.spacing[e.paddingLeft]},className:`${r} ${o}`,children:n})};function bI(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function wI(e){return!!e&&!!e[aM]}function xI(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===lM}(e)||Array.isArray(e)||!!e[iM]||!!(null===(t=e.constructor)||void 0===t?void 0:t[iM])||CI(e)||NI(e))}function _I(e,t,n){void 0===n&&(n=!1),0===kI(e)?(n?Object.keys:cM)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function kI(e){var t=e[aM];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:CI(e)?2:NI(e)?3:0}function SI(e,t){return 2===kI(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function EI(e,t){return 2===kI(e)?e.get(t):e[t]}function jI(e,t,n){var r=kI(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function CI(e){return tM&&e instanceof Map}function NI(e){return nM&&e instanceof Set}function AI(e){return e.o||e.t}function OI(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=uM(e);delete t[aM];for(var n=cM(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function RI(e,t){return void 0===t&&(t=!1),TI(e)||wI(e)||!xI(e)||(kI(e)>1&&(e.set=e.add=e.clear=e.delete=PI),Object.freeze(e),t&&_I(e,(function(e,t){return RI(t,!0)}),!0)),e}function PI(){bI(2)}function TI(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function II(e){var t=dM[e];return t||bI(18,e),t}function MI(e,t){dM[e]||(dM[e]=t)}function DI(){return QI}function LI(e,t){t&&(II("Patches"),e.u=[],e.s=[],e.v=t)}function BI(e){FI(e),e.p.forEach($I),e.p=null}function FI(e){e===QI&&(QI=e.l)}function zI(e){return QI={p:[],l:QI,h:e,m:!0,_:0}}function $I(e){var t=e[aM];0===t.i||1===t.i?t.j():t.g=!0}function UI(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||II("ES5").S(t,e,r),r?(n[aM].P&&(BI(t),bI(4)),xI(e)&&(e=WI(t,e),t.l||VI(t,e)),t.u&&II("Patches").M(n[aM].t,e,t.u,t.s)):e=WI(t,n,[]),BI(t),t.u&&t.v(t.u,t.s),e!==oM?e:void 0}function WI(e,t,n){if(TI(t))return t;var r=t[aM];if(!r)return _I(t,(function(o,i){return HI(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return VI(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=OI(r.k):r.o,i=o,a=!1;3===r.i&&(i=new Set(o),o.clear(),a=!0),_I(i,(function(t,i){return HI(e,r,o,t,i,n,a)})),VI(e,o,!1),n&&e.u&&II("Patches").N(r,n,e.u,e.s)}return r.o}function HI(e,t,n,r,o,i,a){if(wI(o)){var s=WI(e,o,i&&t&&3!==t.i&&!SI(t.R,r)?i.concat(r):void 0);if(jI(n,r,s),!wI(s))return;e.m=!1}else a&&n.add(o);if(xI(o)&&!TI(o)){if(!e.h.D&&e._<1)return;WI(e,o),t&&t.A.l||VI(e,o)}}function VI(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&RI(t,n)}function qI(e,t){var n=e[aM];return(n?AI(n):e)[t]}function KI(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ZI(e){e.P||(e.P=!0,e.l&&ZI(e.l))}function YI(e){e.o||(e.o=OI(e.t))}function GI(e,t,n){var r=CI(t)?II("MapSet").F(t,n):NI(t)?II("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:DI(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=fM;n&&(o=[r],i=hM);var a=Proxy.revocable(o,i),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(t,n):II("ES5").J(t,n);return(n?n.A:DI()).p.push(r),r}function XI(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return OI(e)}var JI,QI,eM="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),tM="undefined"!=typeof Map,nM="undefined"!=typeof Set,rM="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,oM=eM?Symbol.for("immer-nothing"):((JI={})["immer-nothing"]=!0,JI),iM=eM?Symbol.for("immer-draftable"):"__$immer_draftable",aM=eM?Symbol.for("immer-state"):"__$immer_state",sM="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",lM=""+Object.prototype.constructor,cM="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,uM=Object.getOwnPropertyDescriptors||function(e){var t={};return cM(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},dM={},fM={get:function(e,t){if(t===aM)return e;var n,r,o,i=AI(e);if(!SI(i,t))return n=e,(o=KI(i,t))?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(n.k):void 0;var a=i[t];return e.I||!xI(a)?a:a===qI(e.t,t)?(YI(e),e.o[t]=GI(e.A.h,a,e)):a},has:function(e,t){return t in AI(e)},ownKeys:function(e){return Reflect.ownKeys(AI(e))},set:function(e,t,n){var r=KI(AI(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=qI(AI(e),t),i=null==o?void 0:o[aM];if(i&&i.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,o)&&(void 0!==n||SI(e.t,t)))return!0;YI(e),ZI(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==qI(e.t,t)||t in e.t?(e.R[t]=!1,YI(e),ZI(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=AI(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){bI(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bI(12)}},hM={};_I(fM,(function(e,t){hM[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),hM.deleteProperty=function(e,t){return hM.set.call(this,e,t,void 0)},hM.set=function(e,t,n){return fM.set.call(this,e[0],t,n,e[0])};var pM=function(){function e(e){var t=this;this.O=rM,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&bI(6),void 0!==r&&"function"!=typeof r&&bI(7),xI(e)){var s=zI(t),l=GI(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?BI(s):FI(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return LI(s,r),UI(e,s)}),(function(e){throw BI(s),e})):(LI(s,r),UI(a,s))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===oM&&(a=void 0),t.D&&RI(a,!0),r){var u=[],d=[];II("Patches").M(e,a,u,d),r(u,d)}return a}bI(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,i=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,o]})):[i,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){xI(e)||bI(8),wI(e)&&(e=function(e){return wI(e)||bI(22,e),function e(t){if(!xI(t))return t;var n,r=t[aM],o=kI(t);if(r){if(!r.P&&(r.i<4||!II("ES5").K(r)))return r.t;r.I=!0,n=XI(t,o),r.I=!1}else n=XI(t,o);return _I(n,(function(t,o){r&&EI(r.t,t)===o||jI(n,t,e(o))})),3===o?new Set(n):n}(e)}(e));var t=zI(this),n=GI(this,e,void 0);return n[aM].C=!0,FI(t),n},t.finishDraft=function(e,t){var n=(e&&e[aM]).A;return LI(n,t),UI(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!rM&&bI(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=II("Patches").$;return wI(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),gM=new pM,mM=gM.produce,vM=gM.produceWithPatches.bind(gM);gM.setAutoFreeze.bind(gM),gM.setUseProxies.bind(gM);var yM=gM.applyPatches.bind(gM);gM.createDraft.bind(gM),gM.finishDraft.bind(gM);var bM=function(){this.__data__=[],this.size=0};var wM=function(e,t){return e===t||e!=e&&t!=t},xM=wM;var _M=function(e,t){for(var n=e.length;n--;)if(xM(e[n][0],t))return n;return-1},kM=_M,SM=Array.prototype.splice;var EM=function(e){var t=this.__data__,n=kM(t,e);return!(n<0)&&(n==t.length-1?t.pop():SM.call(t,n,1),--this.size,!0)},jM=_M;var CM=function(e){var t=this.__data__,n=jM(t,e);return n<0?void 0:t[n][1]},NM=_M;var AM=_M;var OM=function(e,t){var n=this.__data__,r=AM(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},RM=bM,PM=EM,TM=CM,IM=function(e){return NM(this.__data__,e)>-1},MM=OM;function DM(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}DM.prototype.clear=RM,DM.prototype.delete=PM,DM.prototype.get=TM,DM.prototype.has=IM,DM.prototype.set=MM;var LM=DM,BM=LM;var FM=function(){this.__data__=new BM,this.size=0};var zM=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var $M=function(e){return this.__data__.get(e)};var UM=function(e){return this.__data__.has(e)},WM="object"==typeof i&&i&&i.Object===Object&&i,HM=WM,VM="object"==typeof self&&self&&self.Object===Object&&self,qM=HM||VM||Function("return this")(),KM=qM.Symbol,ZM=KM,YM=Object.prototype,GM=YM.hasOwnProperty,XM=YM.toString,JM=ZM?ZM.toStringTag:void 0;var QM=function(e){var t=GM.call(e,JM),n=e[JM];try{e[JM]=void 0;var r=!0}catch(J$){}var o=XM.call(e);return r&&(t?e[JM]=n:delete e[JM]),o},eD=Object.prototype.toString;var tD=QM,nD=function(e){return eD.call(e)},rD=KM?KM.toStringTag:void 0;var oD=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rD&&rD in Object(e)?tD(e):nD(e)};var iD=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},aD=oD,sD=iD;var lD=function(e){if(!sD(e))return!1;var t=aD(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const cD=a(lD);var uD,dD=qM["__core-js_shared__"],fD=(uD=/[^.]+$/.exec(dD&&dD.keys&&dD.keys.IE_PROTO||""))?"Symbol(src)_1."+uD:"";var hD=function(e){return!!fD&&fD in e},pD=Function.prototype.toString;var gD=function(e){if(null!=e){try{return pD.call(e)}catch(J$){}try{return e+""}catch(J$){}}return""},mD=lD,vD=hD,yD=iD,bD=gD,wD=/^\[object .+?Constructor\]$/,xD=Function.prototype,_D=Object.prototype,kD=xD.toString,SD=_D.hasOwnProperty,ED=RegExp("^"+kD.call(SD).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var jD=function(e){return!(!yD(e)||vD(e))&&(mD(e)?ED:wD).test(bD(e))},CD=function(e,t){return null==e?void 0:e[t]};var ND=function(e,t){var n=CD(e,t);return jD(n)?n:void 0},AD=ND(qM,"Map"),OD=ND(Object,"create"),RD=OD;var PD=function(){this.__data__=RD?RD(null):{},this.size=0};var TD=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ID=OD,MD=Object.prototype.hasOwnProperty;var DD=function(e){var t=this.__data__;if(ID){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return MD.call(t,e)?t[e]:void 0},LD=OD,BD=Object.prototype.hasOwnProperty;var FD=OD;var zD=PD,$D=TD,UD=DD,WD=function(e){var t=this.__data__;return LD?void 0!==t[e]:BD.call(t,e)},HD=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=FD&&void 0===t?"__lodash_hash_undefined__":t,this};function VD(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}VD.prototype.clear=zD,VD.prototype.delete=$D,VD.prototype.get=UD,VD.prototype.has=WD,VD.prototype.set=HD;var qD=VD,KD=LM,ZD=AD;var YD=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var GD=function(e,t){var n=e.__data__;return YD(t)?n["string"==typeof t?"string":"hash"]:n.map},XD=GD;var JD=GD;var QD=GD;var eL=GD;var tL=function(e,t){var n=eL(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},nL=function(){this.size=0,this.__data__={hash:new qD,map:new(ZD||KD),string:new qD}},rL=function(e){var t=XD(this,e).delete(e);return this.size-=t?1:0,t},oL=function(e){return JD(this,e).get(e)},iL=function(e){return QD(this,e).has(e)},aL=tL;function sL(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sL.prototype.clear=nL,sL.prototype.delete=rL,sL.prototype.get=oL,sL.prototype.has=iL,sL.prototype.set=aL;var lL=sL,cL=LM,uL=AD,dL=lL;var fL=LM,hL=FM,pL=zM,gL=$M,mL=UM,vL=function(e,t){var n=this.__data__;if(n instanceof cL){var r=n.__data__;if(!uL||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new dL(r)}return n.set(e,t),this.size=n.size,this};function yL(e){var t=this.__data__=new fL(e);this.size=t.size}yL.prototype.clear=hL,yL.prototype.delete=pL,yL.prototype.get=gL,yL.prototype.has=mL,yL.prototype.set=vL;var bL=yL;var wL=lL,xL=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},_L=function(e){return this.__data__.has(e)};function kL(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new wL;++t<n;)this.add(e[t])}kL.prototype.add=kL.prototype.push=xL,kL.prototype.has=_L;var SL=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var EL=function(e,t){return e.has(t)},jL=kL,CL=SL,NL=EL;var AL=function(e,t,n,r,o,i){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,h=2&n?new jL:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var p=e[d],g=t[d];if(r)var m=a?r(g,p,d,t,e,i):r(p,g,d,e,t,i);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!CL(t,(function(e,t){if(!NL(h,t)&&(p===e||o(p,e,n,r,i)))return h.push(t)}))){f=!1;break}}else if(p!==g&&!o(p,g,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f};var OL=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var RL=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},PL=qM.Uint8Array,TL=wM,IL=AL,ML=OL,DL=RL,LL=KM?KM.prototype:void 0,BL=LL?LL.valueOf:void 0;var FL=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new PL(e),new PL(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return TL(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ML;case"[object Set]":var l=1&r;if(s||(s=DL),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=IL(s(e),s(t),r,o,i,a);return a.delete(e),u;case"[object Symbol]":if(BL)return BL.call(e)==BL.call(t)}return!1};var zL=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},$L=Array.isArray,UL=zL,WL=$L;var HL=function(e,t,n){var r=t(e);return WL(e)?r:UL(r,n(e))};var VL=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var qL=VL,KL=function(){return[]},ZL=Object.prototype.propertyIsEnumerable,YL=Object.getOwnPropertySymbols,GL=YL?function(e){return null==e?[]:(e=Object(e),qL(YL(e),(function(t){return ZL.call(e,t)})))}:KL;var XL=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var JL=function(e){return null!=e&&"object"==typeof e},QL=oD,eB=JL;var tB=function(e){return eB(e)&&"[object Arguments]"==QL(e)},nB=JL,rB=Object.prototype,oB=rB.hasOwnProperty,iB=rB.propertyIsEnumerable,aB=tB(function(){return arguments}())?tB:function(e){return nB(e)&&oB.call(e,"callee")&&!iB.call(e,"callee")},sB=aB,lB={exports:{}};var cB=function(){return!1};!function(e,t){var n=qM,r=cB,o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;e.exports=s}(lB,lB.exports);var uB=lB.exports,dB=/^(?:0|[1-9]\d*)$/;var fB=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&dB.test(e))&&e>-1&&e%1==0&&e<t};var hB=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},pB=oD,gB=hB,mB=JL,vB={};vB["[object Float32Array]"]=vB["[object Float64Array]"]=vB["[object Int8Array]"]=vB["[object Int16Array]"]=vB["[object Int32Array]"]=vB["[object Uint8Array]"]=vB["[object Uint8ClampedArray]"]=vB["[object Uint16Array]"]=vB["[object Uint32Array]"]=!0,vB["[object Arguments]"]=vB["[object Array]"]=vB["[object ArrayBuffer]"]=vB["[object Boolean]"]=vB["[object DataView]"]=vB["[object Date]"]=vB["[object Error]"]=vB["[object Function]"]=vB["[object Map]"]=vB["[object Number]"]=vB["[object Object]"]=vB["[object RegExp]"]=vB["[object Set]"]=vB["[object String]"]=vB["[object WeakMap]"]=!1;var yB=function(e){return mB(e)&&gB(e.length)&&!!vB[pB(e)]};var bB=function(e){return function(t){return e(t)}},wB={exports:{}};!function(e,t){var n=WM,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,i=o&&o.exports===r&&n.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(J$){}}();e.exports=a}(wB,wB.exports);var xB=wB.exports,_B=yB,kB=bB,SB=xB&&xB.isTypedArray,EB=SB?kB(SB):_B,jB=XL,CB=sB,NB=$L,AB=uB,OB=fB,RB=EB,PB=Object.prototype.hasOwnProperty;var TB=function(e,t){var n=NB(e),r=!n&&CB(e),o=!n&&!r&&AB(e),i=!n&&!r&&!o&&RB(e),a=n||r||o||i,s=a?jB(e.length,String):[],l=s.length;for(var c in e)!t&&!PB.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||OB(c,l))||s.push(c);return s},IB=Object.prototype;var MB=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||IB)};var DB=function(e,t){return function(n){return e(t(n))}},LB=DB(Object.keys,Object),BB=MB,FB=LB,zB=Object.prototype.hasOwnProperty;var $B=lD,UB=hB;var WB=TB,HB=function(e){if(!BB(e))return FB(e);var t=[];for(var n in Object(e))zB.call(e,n)&&"constructor"!=n&&t.push(n);return t},VB=function(e){return null!=e&&UB(e.length)&&!$B(e)};var qB=HL,KB=GL,ZB=function(e){return VB(e)?WB(e):HB(e)};var YB=function(e){return qB(e,ZB,KB)},GB=Object.prototype.hasOwnProperty;var XB=function(e,t,n,r,o,i){var a=1&n,s=YB(e),l=s.length;if(l!=YB(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:GB.call(t,u)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var h=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],m=t[u];if(r)var v=a?r(m,g,u,t,e,i):r(g,m,u,e,t,i);if(!(void 0===v?g===m||o(g,m,n,r,i):v)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return i.delete(e),i.delete(t),h},JB=ND(qM,"DataView"),QB=AD,eF=ND(qM,"Promise"),tF=ND(qM,"Set"),nF=ND(qM,"WeakMap"),rF=oD,oF=gD,iF="[object Map]",aF="[object Promise]",sF="[object Set]",lF="[object WeakMap]",cF="[object DataView]",uF=oF(JB),dF=oF(QB),fF=oF(eF),hF=oF(tF),pF=oF(nF),gF=rF;(JB&&gF(new JB(new ArrayBuffer(1)))!=cF||QB&&gF(new QB)!=iF||eF&&gF(eF.resolve())!=aF||tF&&gF(new tF)!=sF||nF&&gF(new nF)!=lF)&&(gF=function(e){var t=rF(e),n="[object Object]"==t?e.constructor:void 0,r=n?oF(n):"";if(r)switch(r){case uF:return cF;case dF:return iF;case fF:return aF;case hF:return sF;case pF:return lF}return t});var mF=bL,vF=AL,yF=FL,bF=XB,wF=gF,xF=$L,_F=uB,kF=EB,SF="[object Arguments]",EF="[object Array]",jF="[object Object]",CF=Object.prototype.hasOwnProperty;var NF=function(e,t,n,r,o,i){var a=xF(e),s=xF(t),l=a?EF:wF(e),c=s?EF:wF(t),u=(l=l==SF?jF:l)==jF,d=(c=c==SF?jF:c)==jF,f=l==c;if(f&&_F(e)){if(!_F(t))return!1;a=!0,u=!1}if(f&&!u)return i||(i=new mF),a||kF(e)?vF(e,t,n,r,o,i):yF(e,t,l,n,r,o,i);if(!(1&n)){var h=u&&CF.call(e,"__wrapped__"),p=d&&CF.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return i||(i=new mF),o(g,m,n,r,i)}}return!!f&&(i||(i=new mF),bF(e,t,n,r,o,i))},AF=JL;var OF=function e(t,n,r,o,i){return t===n||(null==t||null==n||!AF(t)&&!AF(n)?t!=t&&n!=n:NF(t,n,r,o,e,i))},RF=OF;const PF=a((function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?RF(e,t,void 0,n):!!r}));const TF=a((function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var c=i[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(o=n?n.call(r,u,d,c):void 0)||void 0===o&&u!==d)return!1}return!0}));function IF(e,t){if(!e)throw new Error("Invariant failed")}"undefined"!=typeof window&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/utils"]="0.2.5");var MF="ROOT",DF="canvas-ROOT",LF="The component type specified for this node (%node_type%) does not exist in the resolver";function BF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BF(Object(n),!0).forEach((function(t){UF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $F(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ez(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UF(e,t,n){return(t=ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WF(e){return WF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WF(e)}function HF(e,t){return HF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},HF(e,t)}function VF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qF(){return qF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},qF.apply(this,arguments)}function KF(e,t){return YF(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||XF(e,t)||QF()}function ZF(e){return function(e){if(Array.isArray(e))return JF(e)}(e)||GF(e)||XF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YF(e){if(Array.isArray(e))return e}function GF(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function XF(e,t){if(e){if("string"==typeof e)return JF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JF(e,t):void 0}}function JF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QF(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ez(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var tz={UNDO:"HISTORY_UNDO",REDO:"HISTORY_REDO",THROTTLE:"HISTORY_THROTTLE",IGNORE:"HISTORY_IGNORE",MERGE:"HISTORY_MERGE",CLEAR:"HISTORY_CLEAR"},nz=function(){function e(){zF(this,e),UF(this,"timeline",[]),UF(this,"pointer",-1)}return $F(e,[{key:"add",value:function(e,t){0===e.length&&0===t.length||(this.pointer=this.pointer+1,this.timeline.length=this.pointer,this.timeline[this.pointer]={patches:e,inversePatches:t,timestamp:Date.now()})}},{key:"throttleAdd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;if(0!==e.length||0!==t.length){if(this.timeline.length&&this.pointer>=0){var r=this.timeline[this.pointer],o=r.patches,i=r.inversePatches,a=r.timestamp;if((new Date).getTime()-a<n)return void(this.timeline[this.pointer]={timestamp:a,patches:[].concat(ZF(o),ZF(e)),inversePatches:[].concat(ZF(t),ZF(i))})}this.add(e,t)}}},{key:"merge",value:function(e,t){if(0!==e.length||0!==t.length)if(this.timeline.length&&this.pointer>=0){var n=this.timeline[this.pointer],r=n.inversePatches;this.timeline[this.pointer]={timestamp:n.timestamp,patches:[].concat(ZF(n.patches),ZF(e)),inversePatches:[].concat(ZF(t),ZF(r))}}else this.add(e,t)}},{key:"clear",value:function(){this.timeline=[],this.pointer=-1}},{key:"canUndo",value:function(){return this.pointer>=0}},{key:"canRedo",value:function(){return this.pointer<this.timeline.length-1}},{key:"undo",value:function(e){if(this.canUndo()){var t=this.timeline[this.pointer].inversePatches;return this.pointer=this.pointer-1,yM(e,t)}}},{key:"redo",value:function(e){if(this.canRedo())return this.pointer=this.pointer+1,yM(e,this.timeline[this.pointer].patches)}}]),e}();function rz(e,t,n){var r=Object.keys(e()).reduce((function(n,r){return FF(FF({},n),{},UF({},r,(function(){var n;return(n=e(t()))[r].apply(n,arguments)})))}),{});return FF(FF({},r),{},{history:{canUndo:function(){return n.canUndo()},canRedo:function(){return n.canRedo()}}})}(function(){function e(e,t){function n(){this.constructor=e}o(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.o||(e.R=new Map,e.o=new Map(e.t))}function n(e){e.o||(e.o=new Set,e.t.forEach((function(t){if(xI(t)){var n=GI(e.A.h,t,e);e.p.set(t,n),e.o.add(n)}else e.o.add(t)})))}function r(e){e.g&&bI(3,JSON.stringify(AI(e)))}var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},i=function(){function n(e,t){return this[aM]={i:2,l:t,A:t?t.A:DI(),P:!1,I:!1,o:void 0,R:void 0,t:e,k:this,C:!1,g:!1},this}e(n,Map);var o=n.prototype;return Object.defineProperty(o,"size",{get:function(){return AI(this[aM]).size}}),o.has=function(e){return AI(this[aM]).has(e)},o.set=function(e,n){var o=this[aM];return r(o),AI(o).has(e)&&AI(o).get(e)===n||(t(o),ZI(o),o.R.set(e,!0),o.o.set(e,n),o.R.set(e,!0)),this},o.delete=function(e){if(!this.has(e))return!1;var n=this[aM];return r(n),t(n),ZI(n),n.t.has(e)?n.R.set(e,!1):n.R.delete(e),n.o.delete(e),!0},o.clear=function(){var e=this[aM];r(e),AI(e).size&&(t(e),ZI(e),e.R=new Map,_I(e.t,(function(t){e.R.set(t,!1)})),e.o.clear())},o.forEach=function(e,t){var n=this;AI(this[aM]).forEach((function(r,o){e.call(t,n.get(o),o,n)}))},o.get=function(e){var n=this[aM];r(n);var o=AI(n).get(e);if(n.I||!xI(o))return o;if(o!==n.t.get(e))return o;var i=GI(n.A.h,o,n);return t(n),n.o.set(e,i),i},o.keys=function(){return AI(this[aM]).keys()},o.values=function(){var e,t=this,n=this.keys();return(e={})[sM]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},o.entries=function(){var e,t=this,n=this.keys();return(e={})[sM]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},o[sM]=function(){return this.entries()},n}(),a=function(){function t(e,t){return this[aM]={i:3,l:t,A:t?t.A:DI(),P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var o=t.prototype;return Object.defineProperty(o,"size",{get:function(){return AI(this[aM]).size}}),o.has=function(e){var t=this[aM];return r(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},o.add=function(e){var t=this[aM];return r(t),this.has(e)||(n(t),ZI(t),t.o.add(e)),this},o.delete=function(e){if(!this.has(e))return!1;var t=this[aM];return r(t),n(t),ZI(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},o.clear=function(){var e=this[aM];r(e),AI(e).size&&(n(e),ZI(e),e.o.clear())},o.values=function(){var e=this[aM];return r(e),n(e),e.o.values()},o.entries=function(){var e=this[aM];return r(e),n(e),e.o.entries()},o.keys=function(){return this.values()},o[sM]=function(){return this.values()},o.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();MI("MapSet",{F:function(e,t){return new i(e,t)},T:function(e,t){return new a(e,t)}})})(),function(){function e(t){if(!xI(t))return t;if(Array.isArray(t))return t.map(e);if(CI(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(NI(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return SI(t,iM)&&(n[iM]=t[iM]),n}function t(t){return wI(t)?e(t):t}var n="add";MI("Patches",{$:function(t,r){return r.forEach((function(r){for(var o=r.path,i=r.op,a=t,s=0;s<o.length-1;s++){var l=kI(a),c=o[s];"string"!=typeof c&&"number"!=typeof c&&(c=""+c),0!==l&&1!==l||"__proto__"!==c&&"constructor"!==c||bI(24),"function"==typeof a&&"prototype"===c&&bI(24),"object"!=typeof(a=EI(a,c))&&bI(15,o.join("/"))}var u=kI(a),d=e(r.value),f=o[o.length-1];switch(i){case"replace":switch(u){case 2:return a.set(f,d);case 3:bI(16);default:return a[f]=d}case n:switch(u){case 1:return"-"===f?a.push(d):a.splice(f,0,d);case 2:return a.set(f,d);case 3:return a.add(d);default:return a[f]=d}case"remove":switch(u){case 1:return a.splice(f,1);case 2:return a.delete(f);case 3:return a.delete(r.value);default:return delete a[f]}default:bI(17,i)}})),t},N:function(e,r,o,i){switch(e.i){case 0:case 4:case 2:return s=r,l=o,c=i,u=(a=e).t,d=a.o,void _I(a.R,(function(e,r){var o=EI(u,e),i=EI(d,e),a=r?SI(u,e)?"replace":n:"remove";if(o!==i||"replace"!==a){var f=s.concat(e);l.push("remove"===a?{op:a,path:f}:{op:a,path:f,value:i}),c.push(a===n?{op:"remove",path:f}:"remove"===a?{op:n,path:f,value:t(o)}:{op:"replace",path:f,value:t(o)})}}));case 5:case 1:return function(e,r,o,i){var a=e.t,s=e.R,l=e.o;if(l.length<a.length){var c=[l,a];a=c[0],l=c[1];var u=[i,o];o=u[0],i=u[1]}for(var d=0;d<a.length;d++)if(s[d]&&l[d]!==a[d]){var f=r.concat([d]);o.push({op:"replace",path:f,value:t(l[d])}),i.push({op:"replace",path:f,value:t(a[d])})}for(var h=a.length;h<l.length;h++){var p=r.concat([h]);o.push({op:n,path:p,value:t(l[h])})}a.length<l.length&&i.push({op:"replace",path:r.concat(["length"]),value:a.length})}(e,r,o,i);case 3:return function(e,t,r,o){var i=e.t,a=e.o,s=0;i.forEach((function(e){if(!a.has(e)){var i=t.concat([s]);r.push({op:"remove",path:i,value:e}),o.unshift({op:n,path:i,value:e})}s++})),s=0,a.forEach((function(e){if(!i.has(e)){var a=t.concat([s]);r.push({op:n,path:a,value:e}),o.unshift({op:"remove",path:a,value:e})}s++}))}(e,r,o,i)}var a,s,l,c,u,d},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===oM?void 0:t}),r.push({op:"replace",path:[],value:e})}})}();var oz=function(){function e(t){zF(this,e),UF(this,"getState",void 0),UF(this,"subscribers",[]),this.getState=t}return $F(e,[{key:"subscribe",value:function(e,t,n){var r=this,o=new iz((function(){return e(r.getState())}),t,n);return this.subscribers.push(o),this.unsubscribe.bind(this,o)}},{key:"unsubscribe",value:function(e){if(this.subscribers.length){var t=this.subscribers.indexOf(e);if(t>-1)return this.subscribers.splice(t,1)}}},{key:"notify",value:function(){this.subscribers.forEach((function(e){return e.collect()}))}}]),e}(),iz=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];zF(this,e),UF(this,"collected",void 0),UF(this,"collector",void 0),UF(this,"onChange",void 0),UF(this,"id",void 0),this.collector=t,this.onChange=n,r&&this.collect()}return $F(e,[{key:"collect",value:function(){try{var e=this.collector();PF(e,this.collected)||(this.collected=e,this.onChange&&this.onChange(this.collected))}catch(e){console.warn(e)}}}]),e}(),az=function(e){var t=e.getBoundingClientRect(),n=t.x,r=t.y,o=t.top,i=t.left,a=t.bottom,s=t.right,l=t.width,c=t.height,u=window.getComputedStyle(e),d={left:parseInt(u.marginLeft),right:parseInt(u.marginRight),bottom:parseInt(u.marginBottom),top:parseInt(u.marginTop)},f={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight),bottom:parseInt(u.paddingBottom),top:parseInt(u.paddingTop)};return{x:n,y:r,top:o,left:i,bottom:a,right:s,width:l,height:c,outerWidth:Math.round(l+d.left+d.right),outerHeight:Math.round(c+d.top+d.bottom),margin:d,padding:f,inFlow:e.parentElement&&!!function(t){var n=getComputedStyle(t);if(!(u.overflow&&"visible"!==u.overflow||"none"!==n.float||"grid"===n.display||"flex"===n.display&&"column"!==n["flex-direction"])){switch(u.position){case"static":case"relative":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(u.display){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}(e.parentElement)}};var sz,lz=function(){return((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))(arguments.length>0&&void 0!==arguments[0]?arguments[0]:10)},cz=function(){function e(){zF(this,e),UF(this,"isEnabled",!0),UF(this,"elementIdMap",new WeakMap),UF(this,"registry",new Map)}return $F(e,[{key:"getElementId",value:function(e){var t=this.elementIdMap.get(e);if(t)return t;var n=lz();return this.elementIdMap.set(e,n),n}},{key:"getConnectorId",value:function(e,t){var n=this.getElementId(e);return"".concat(t,"--").concat(n)}},{key:"register",value:function(e,t){var n=this,r=this.getByElement(e,t.name);if(r){if(TF(t.required,r.required))return r;this.getByElement(e,t.name).disable()}var o=null,i=this.getConnectorId(e,t.name);return this.registry.set(i,{id:i,required:t.required,enable:function(){o&&o(),o=t.connector(e,t.required,t.options)},disable:function(){o&&o()},remove:function(){return n.remove(i)}}),this.isEnabled&&this.registry.get(i).enable(),this.registry.get(i)}},{key:"get",value:function(e){return this.registry.get(e)}},{key:"remove",value:function(e){var t=this.get(e);t&&(t.disable(),this.registry.delete(t.id))}},{key:"enable",value:function(){this.isEnabled=!0,this.registry.forEach((function(e){e.enable()}))}},{key:"disable",value:function(){this.isEnabled=!1,this.registry.forEach((function(e){e.disable()}))}},{key:"getByElement",value:function(e,t){return this.get(this.getConnectorId(e,t))}},{key:"removeByElement",value:function(e,t){return this.remove(this.getConnectorId(e,t))}},{key:"clear",value:function(){this.disable(),this.elementIdMap=new WeakMap,this.registry=new Map}}]),e}();!function(e){e[e.HandlerDisabled=0]="HandlerDisabled",e[e.HandlerEnabled=1]="HandlerEnabled"}(sz||(sz={}));var uz=function(){function e(t){zF(this,e),UF(this,"options",void 0),UF(this,"registry",new cz),UF(this,"subscribers",new Set),this.options=t}return $F(e,[{key:"listen",value:function(e){var t=this;return this.subscribers.add(e),function(){return t.subscribers.delete(e)}}},{key:"disable",value:function(){this.onDisable&&this.onDisable(),this.registry.disable(),this.subscribers.forEach((function(e){e(sz.HandlerDisabled)}))}},{key:"enable",value:function(){this.onEnable&&this.onEnable(),this.registry.enable(),this.subscribers.forEach((function(e){e(sz.HandlerEnabled)}))}},{key:"cleanup",value:function(){this.disable(),this.subscribers.clear(),this.registry.clear()}},{key:"addCraftEventListener",value:function(e,t,n,r){var o=function(r){(function(e,t,n){e.craft||(e.craft={stopPropagation:function(){},blockedEvents:{}});for(var r=e.craft&&e.craft.blockedEvents[t]||[],o=0;o<r.length;o++){var i=r[o];if(n!==i&&n.contains(i))return!0}return!1})(r,t,e)||(r.craft.stopPropagation=function(){r.craft.blockedEvents[t]||(r.craft.blockedEvents[t]=[]),r.craft.blockedEvents[t].push(e)},n(r))};return e.addEventListener(t,o,r),function(){return e.removeEventListener(t,o,r)}}},{key:"createConnectorsUsage",value:function(){var e=this,t=this.handlers(),n=new Set,r=!1,o=new Map;return{connectors:Object.entries(t).reduce((function(t,i){var a=KF(i,2),s=a[0],l=a[1];return FF(FF({},t),{},UF({},s,(function(t,i,a){var c=function(){var r=e.registry.register(t,{required:i,name:s,options:a,connector:l});return n.add(r.id),r};return o.set(e.registry.getConnectorId(t,s),c),r&&c(),t})))}),{}),register:function(){r=!0,o.forEach((function(e){e()}))},cleanup:function(){r=!1,n.forEach((function(t){return e.registry.remove(t)}))}}}},{key:"derive",value:function(e,t){return new e(this,t)}},{key:"createProxyHandlers",value:function(e,t){var n=[],r=e.handlers(),o=new Proxy(r,{get:function(e,t,o){return t in r==0?Reflect.get(e,t,o):function(e){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=r[t].apply(r,[e].concat(i));s&&n.push(s)}}});return t(o),function(){n.forEach((function(e){e()}))}}},{key:"reflect",value:function(e){return this.createProxyHandlers(this,e)}}]),e}(),dz=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HF(e,t)}(r,uz);var e,t,n=(e=r,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(J$){return!1}}(),function(){var n,r=WF(e);if(t){var o=WF(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VF(e)}(this,n)});function r(e,t){var o;return zF(this,r),UF(VF(o=n.call(this,t)),"derived",void 0),UF(VF(o),"unsubscribeParentHandlerListener",void 0),o.derived=e,o.options=t,o.unsubscribeParentHandlerListener=o.derived.listen((function(e){switch(e){case sz.HandlerEnabled:return o.enable();case sz.HandlerDisabled:return o.disable();default:return}})),o}return $F(r,[{key:"inherit",value:function(e){return this.createProxyHandlers(this.derived,e)}},{key:"cleanup",value:function(){qF(WF(r.prototype),"cleanup",this).call(this),this.unsubscribeParentHandlerListener()}}]),r}();function fz(e,t){t&&("function"==typeof e?e(t):e.current=t)}function hz(e){return(t=null,...n)=>{if(!q.isValidElement(t)){if(!t)return;const r=t;return r&&e(r,...n),r}const r=t;return function(e){if("string"!=typeof e.type)throw new Error}(r),function(e,t){const n=e.ref;return IF("string"!=typeof n),q.cloneElement(e,n?{ref:e=>{fz(n,e),fz(t,e)}}:{ref:t})}(r,e)}}function pz(e){return Object.keys(e).reduce(((t,n)=>(t[n]=hz(((...t)=>e[n](...t))),t)),{})}const gz=({style:e,className:t,parentDom:n})=>{const r=K.createElement("div",{className:t,style:{position:"fixed",display:"block",opacity:1,borderStyle:"solid",borderWidth:"1px",borderColor:"transparent",zIndex:99999,...e}});return n&&n.ownerDocument!==document?cd.createPortal(r,n.ownerDocument.body):r};var mz=function(e,t){var n="Deprecation warning: ".concat(e," will be deprecated in future relases."),r=t.suggest,o=t.doc;r&&(n+=" Please use ".concat(r," instead.")),o&&(n+="(".concat(o,")")),console.warn(n)},vz=function(){return"undefined"!=typeof window},yz=ND;!function(){try{var e=yz(Object,"defineProperty");return e({},"",{}),e}catch(J$){}}();var bz={exports:{}};!function(e,t){var n=qM,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,i=o&&o.exports===r?n.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}(bz,bz.exports);var wz=KM?KM.prototype:void 0;wz&&wz.valueOf;xB&&xB.isMap;xB&&xB.isSet,"undefined"!=typeof window&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/core"]="0.2.12");const xz=K.createContext(null),_z=({id:e,related:t=!1,children:n})=>K.createElement(xz.Provider,{value:{id:e,related:t}},n);function kz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kz(Object(n),!0).forEach((function(t){Nz(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ez(e){return Ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ez(e)}function jz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cz(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fz(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nz(e,t,n){return(t=Fz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Az(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rz(e,t)}function Oz(e){return Oz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oz(e)}function Rz(e,t){return Rz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rz(e,t)}function Pz(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Tz(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oz(e);if(t){var o=Oz(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tz(e)}(this,n)}}function Mz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||Lz(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dz(e){return function(e){if(Array.isArray(e))return Bz(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lz(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lz(e,t){if(e){if("string"==typeof e)return Bz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bz(e,t):void 0}}function Bz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fz(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}const zz=q.createContext(null);var $z=q.createContext(null),Uz=function(){return q.useContext($z)};function Wz(e){var t=Uz(),n=q.useContext(zz);IF(n);var r=function(e,t){const{subscribe:n,getState:r,actions:o,query:i}=e,a=q.useRef(!0),s=q.useRef(null),l=q.useRef(t);l.current=t;const c=q.useCallback((e=>({...e,actions:o,query:i})),[o,i]);a.current&&t&&(s.current=t(r(),i),a.current=!1);const[u,d]=q.useState(c(s.current));return q.useEffect((()=>{let e;return l.current&&(e=n((e=>l.current(e,i)),(e=>{d(c(e))}))),()=>{e&&e()}}),[c,i,n]),u}(n,e),o=q.useMemo((function(){return t&&t.createConnectorsUsage()}),[t]);q.useEffect((function(){return o.register(),function(){o.cleanup()}}),[o]);var i=q.useMemo((function(){return o&&pz(o.connectors)}),[o]);return Sz(Sz({},r),{},{connectors:i,inContext:!!n,store:n})}var Hz=["actions","query","connectors"];function Vz(e){var t=q.useContext(xz);IF(t);var n=t.id,r=t.related,o=Wz((function(t){return n&&t.nodes[n]&&e&&e(t.nodes[n])})),i=o.actions,a=o.connectors,s=Pz(o,Hz),l=q.useMemo((function(){return pz({connect:function(e){return a.connect(e,n)},drag:function(e){return a.drag(e,n)}})}),[a,n]),c=q.useMemo((function(){return{setProp:function(e,t){t?i.history.throttle(t).setProp(n,e):i.setProp(n,e)},setCustom:function(e,t){t?i.history.throttle(t).setCustom(n,e):i.setCustom(n,e)},setHidden:function(e){return i.setHidden(n,e)}}}),[i,n]);return Sz(Sz({},s),{},{id:n,related:r,inNodeContext:!!t,actions:c,connectors:l})}var qz=["id","related","actions","inNodeContext","connectors"];function Kz(e){var t=Vz(e),n=t.id,r=t.related,o=t.actions,i=t.inNodeContext,a=t.connectors;return Sz(Sz({},Pz(t,qz)),{},{actions:o,id:n,related:r,setProp:function(e,t){return mz("useNode().setProp()",{suggest:"useNode().actions.setProp()"}),o.setProp(e,t)},inNodeContext:i,connectors:a})}const Zz=({render:e})=>{const{connectors:{connect:t,drag:n}}=Kz();return"string"==typeof e.type?t(n(K.cloneElement(e))):e},Yz=()=>{const{type:e,props:t,nodes:n,hydrationTimestamp:r}=Vz((e=>({type:e.data.type,props:e.data.props,nodes:e.data.nodes,hydrationTimestamp:e._hydrationTimestamp})));return q.useMemo((()=>{let r=t.children;n&&n.length>0&&(r=K.createElement(K.Fragment,null,n.map((e=>K.createElement(Xz,{id:e,key:e})))));const o=K.createElement(e,t,r);return"string"==typeof e?K.createElement(Zz,{render:o}):o}),[e,t,r,n])},Gz=({render:e})=>{const{hidden:t}=Vz((e=>({hidden:e.data.hidden}))),{onRender:n}=Wz((e=>({onRender:e.options.onRender})));return t?null:K.createElement(n,{render:e||K.createElement(Yz,null)})},Xz=({id:e,render:t})=>K.createElement(_z,{id:e},K.createElement(Gz,{render:t})),Jz={is:"div",canvas:!1,custom:{},hidden:!1},Qz={is:"type",canvas:"isCanvas"};function e$({id:e,children:t,...n}){const{is:r}={...Jz,...n},{query:o,actions:i}=Wz(),{id:a,inNodeContext:s}=Vz(),[l]=q.useState((()=>{IF(!!e);const l=o.node(a).get();if(s){const s=l.data.linkedNodes[e]?o.node(l.data.linkedNodes[e]).get():null;if(s&&s.data.type===r)return s.id;const c=K.createElement(e$,n,t),u=o.parseReactElement(c).toNodeTree();return i.history.ignore().addLinkedNodeFromTree(u,a,e),u.rootNodeId}return null}));return l?K.createElement(Xz,{id:l}):null}const t$=()=>mz("<Canvas />",{suggest:"<Element canvas={true} />"});function n$({...e}){return q.useEffect((()=>t$()),[]),K.createElement(e$,{...e,canvas:!0})}const r$=()=>{const{timestamp:e}=Wz((e=>({timestamp:e.nodes[MF]&&e.nodes[MF]._hydrationTimestamp})));return e?K.createElement(Xz,{id:MF,key:e}):null},o$=({children:e,json:t,data:n})=>{const{actions:r,query:o}=Wz();t&&mz("<Frame json={...} />",{suggest:"<Frame data={...} />"});const i=q.useRef(!1);if(!i.current){const a=n||t;if(a)r.history.ignore().deserialize(a);else if(e){const t=K.Children.only(e),n=o.parseReactElement(t).toNodeTree(((e,n)=>(n===t&&(e.id=MF),e)));r.history.ignore().addNodeTree(n)}i.current=!0}return K.createElement(r$,null)};var i$;!function(e){e[e.Any=0]="Any",e[e.Id=1]="Id",e[e.Obj=2]="Obj"}(i$||(i$={}));const a$=e=>{const{addLinkedNodeFromTree:t,setDOM:n,setNodeEvent:r,replaceNodes:o,reset:i,...a}=e;return a};function s$(e){const{connectors:t,actions:n,query:r,store:o,...i}=Wz(e),a=a$(n);return{connectors:t,actions:q.useMemo((()=>({...a,history:{...a.history,ignore:(...e)=>a$(a.history.ignore(...e)),throttle:(...e)=>a$(a.history.throttle(...e))}})),[a]),query:r,store:o,...i}}var l$=function(e){return Object.fromEntries?Object.fromEntries(e):e.reduce((function(e,t){var n=Mz(t,2),r=n[0],o=n[1];return Sz(Sz({},e),{},Nz({},r,o))}),{})},c$=function(e,t,n){var r=Array.isArray(t)?t:[t],o=Sz({existOnly:!1,idOnly:!1},n||{}),i=r.filter((function(e){return!!e})).map((function(t){return"string"==typeof t?{node:e[t],exists:!!e[t]}:"object"!==Ez(t)||o.idOnly?{node:null,exists:!1}:{node:t,exists:!!e[t.id]}}));return o.existOnly&&IF(0===i.filter((function(e){return!e.exists})).length),i},u$=["history"],d$=null,f$=function(e,t){if("string"==typeof t)return t;var n,r=function(e,t){var n=function(e){if(d$&&d$.resolver===e)return d$.reversed;d$={resolver:e,reversed:new Map};for(var t=0,n=Object.entries(e);t<n.length;t++){var r=Mz(n[t],2);d$.reversed.set(r[1],r[0])}return d$.reversed}(e).get(t);return void 0!==n?n:null}(e,t);return IF(r,LF.replace("%node_type%",(n=t).name||n.displayName)),r};const h$=(e,t)=>"string"==typeof e?e:{resolvedName:f$(t,e)},p$=(e,t)=>{let{type:n,isCanvas:r,props:o}=e;return o=Object.keys(o).reduce(((e,n)=>{const r=o[n];return null==r||"function"==typeof r||(e[n]="children"===n&&"string"!=typeof r?q.Children.map(r,(e=>"string"==typeof e?e:p$(e,t))):"function"==typeof r.type?p$(r,t):r),e}),{}),{type:h$(n,t),isCanvas:!!r,props:o}};function g$(e,t){IF("string"==typeof t);var n=e.nodes[t],r=function(t){return g$(e,t)};return{isCanvas:function(){return!!n.data.isCanvas},isRoot:function(){return n.id===MF},isLinkedNode:function(){return n.data.parent&&r(n.data.parent).linkedNodes().includes(n.id)},isTopLevelNode:function(){return this.isRoot()||this.isLinkedNode()},isDeletable:function(){return!this.isTopLevelNode()},isParentOfTopLevelNodes:function(){return n.data.linkedNodes&&Object.keys(n.data.linkedNodes).length>0},isParentOfTopLevelCanvas:function(){return mz("query.node(id).isParentOfTopLevelCanvas",{suggest:"query.node(id).isParentOfTopLevelNodes"}),this.isParentOfTopLevelNodes()},isSelected:function(){return e.events.selected.has(t)},isHovered:function(){return e.events.hovered.has(t)},isDragged:function(){return e.events.dragged.has(t)},get:function(){return n},ancestors:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e.nodes[r];return a?(o.push(r),a.data.parent?((t||!t&&0===i)&&(o=n(a.data.parent,o,i+1)),o):o):o}(n.data.parent)},descendants:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return function t(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(n||!n&&0===s)&&e.nodes[i]?("childNodes"!==o&&r(i).linkedNodes().forEach((function(e){a.push(e),a=t(e,a,s+1)})),"linkedNodes"!==o&&r(i).childNodes().forEach((function(e){a.push(e),a=t(e,a,s+1)})),a):a}(t)},linkedNodes:function(){return Object.values(n.data.linkedNodes||{})},childNodes:function(){return n.data.nodes||[]},isDraggable:function(t){try{var o=n;return IF(!this.isTopLevelNode()),IF(g$(e,o.data.parent).isCanvas()),IF(o.rules.canDrag(o,r)),!0}catch(e){return t&&t(e),!1}},isDroppable:function(t,o){var i=c$(e.nodes,t),a=n;try{IF(this.isCanvas()),IF(a.rules.canMoveIn(i.map((function(e){return e.node})),a,r));var s={};return i.forEach((function(t){var n=t.node,o=t.exists;if(IF(n.rules.canDrop(a,n,r)),o){IF(!r(n.id).isTopLevelNode()),IF(!r(n.id).descendants(!0).includes(a.id)&&a.id!==n.id);var i=n.data.parent&&e.nodes[n.data.parent];IF(i.data.isCanvas),IF(i||!i&&!e.nodes[n.id]),i.id!==a.id&&(s[i.id]||(s[i.id]=[]),s[i.id].push(n))}})),Object.keys(s).forEach((function(t){var n=e.nodes[t];IF(n.rules.canMoveOut(s[t],n,r))})),!0}catch(e){return o&&o(e),!1}},toSerializedNode:function(){return((e,t)=>{const{type:n,props:r,isCanvas:o,name:i,...a}=e;return{...p$({type:n,isCanvas:o,props:r},t),...a}})(n.data,e.options.resolver)},toNodeTree:function(e){var n=[t].concat(Dz(this.descendants(!0,e))).reduce((function(e,t){return e[t]=r(t).get(),e}),{});return{rootNodeId:t,nodes:n}},decendants:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return mz("query.node(id).decendants",{suggest:"query.node(id).descendants"}),this.descendants(e)},isTopLevelCanvas:function(){return!this.isRoot()&&!n.data.parent}}}function m$(e,t,n,r){for(var o={parent:e,index:0,where:"before"},i=0,a=0,s=0,l=0,c=0,u=0,d=0,f=t.length;d<f;d++){var h=t[d];if(u=h.top+h.outerHeight,l=h.left+h.outerWidth/2,c=h.top+h.outerHeight/2,!(a&&h.left>a||s&&c>=s||i&&h.left+h.outerWidth<i))if(o.index=d,h.inFlow){if(r<c){o.where="before";break}o.where="after"}else r<u&&(s=u),n<l?(a=l,o.where="before"):(i=l,o.where="after")}return o}var v$=function(e){return"string"==typeof e?e:e.name};function y$(e,t){var n=e.data.type,r={id:e.id||lz(),_hydrationTimestamp:Date.now(),data:Sz({type:n,name:v$(n),displayName:v$(n),props:{},custom:{},parent:null,isCanvas:!1,hidden:!1,nodes:[],linkedNodes:{}},e.data),info:{},related:{},events:{selected:!1,dragged:!1,hovered:!1},rules:{canDrag:function(){return!0},canDrop:function(){return!0},canMoveIn:function(){return!0},canMoveOut:function(){return!0}},dom:null};if(r.data.type===e$||r.data.type===n$){var o=Sz(Sz({},Jz),r.data.props);r.data.props=Object.keys(r.data.props).reduce((function(e,t){return Object.keys(Jz).includes(t)?r.data[Qz[t]||t]=o[t]:e[t]=r.data.props[t],e}),{}),r.data.name=v$(n=r.data.type),r.data.displayName=v$(n),r.data.type===n$&&(r.data.isCanvas=!0,t$())}t&&t(r);var i=n.craft;if(i){if(r.data.displayName=i.displayName||i.name||r.data.displayName,r.data.props=Sz(Sz({},i.props||i.defaultProps||{}),r.data.props),r.data.custom=Sz(Sz({},i.custom||{}),r.data.custom),null!=i.isCanvas&&(r.data.isCanvas=i.isCanvas),i.rules&&Object.keys(i.rules).forEach((function(e){["canDrag","canDrop","canMoveIn","canMoveOut"].includes(e)&&(r.rules[e]=i.rules[e])})),i.related){var a={id:r.id,related:!0};Object.keys(i.related).forEach((function(e){r.related[e]=function(t){return K.createElement(_z,a,K.createElement(i.related[e],t))}}))}i.info&&(r.info=i.info)}return r}const b$=(e,t,n)=>{let{type:r,props:o}=e;const i=((e,t)=>"object"==typeof e&&e.resolvedName?"Canvas"===e.resolvedName?n$:t[e.resolvedName]:"string"==typeof e?e:null)(r,t);if(!i)return;o=Object.keys(o).reduce(((e,n)=>{const r=o[n];return e[n]=null==r?null:"object"==typeof r&&r.resolvedName?b$(r,t):"children"===n&&Array.isArray(r)?r.map((e=>"string"==typeof e?e:b$(e,t))):r,e}),{});const a={...K.createElement(i,{...o})};return{...a,name:f$(t,a.type)}},w$=(e,t)=>{if(t.length<1)return{[e.id]:e};const n=t.map((({rootNodeId:e})=>e)),r={...e,data:{...e.data,nodes:n}};return t.reduce(((t,n)=>{const r=n.nodes[n.rootNodeId];return{...t,...n.nodes,[r.id]:{...r,data:{...r.data,parent:e.id}}}}),{[e.id]:r})};function x$(e){const t=e&&e.options,n=()=>x$(e);return{getDropPlaceholder:(t,r,o,i=t=>e.nodes[t.id].dom)=>{const a=e.nodes[r],s=n().node(a.id).isCanvas()?a:e.nodes[a.data.parent];if(!s)return;const l=s.data.nodes||[],c=m$(s,l?l.reduce(((t,n)=>{const r=i(e.nodes[n]);if(r){const e={id:n,...az(r)};t.push(e)}return t}),[]):[],o.x,o.y),u=l.length&&e.nodes[l[c.index]],d={placement:{...c,currentNode:u},error:null};return c$(e.nodes,t).forEach((({node:e,exists:t})=>{t&&n().node(e.id).isDraggable((e=>d.error=e))})),n().node(s.id).isDroppable(t,(e=>d.error=e)),d},getOptions:()=>t,getNodes:()=>e.nodes,node:t=>g$(e,t),getSerializedNodes(){const t=Object.keys(e.nodes).map((e=>[e,this.node(e).toSerializedNode()]));return l$(t)},getEvent:t=>function(e,t){var n=e.events[t];return{contains:function(e){return n.has(e)},isEmpty:function(){return 0===this.all().length},first:function(){return this.all()[0]},last:function(){var e=this.all();return e[e.length-1]},all:function(){return Array.from(n)},size:function(){return this.all().length},at:function(e){return this.all()[e]},raw:function(){return n}}}(e,t),serialize(){return JSON.stringify(this.getSerializedNodes())},parseReactElement:t=>({toNodeTree(r){let o=function(e,t){let n=e;return"string"==typeof n&&(n=K.createElement(q.Fragment,{},n)),y$({data:{type:n.type,props:{...n.props}}},(e=>{t&&t(e,n)}))}(t,((t,n)=>{const o=f$(e.options.resolver,t.data.type);t.data.displayName=t.data.displayName||o,t.data.name=o,r&&r(t,n)})),i=[];return t.props&&t.props.children&&(i=K.Children.toArray(t.props.children).reduce(((e,t)=>(K.isValidElement(t)&&e.push(n().parseReactElement(t).toNodeTree(r)),e)),[])),((e,t)=>({rootNodeId:e.id,nodes:w$(e,t)}))(o,i)}}),parseSerializedNode:t=>({toNode(r){const o=((e,t)=>{const{type:n,props:r,...o}=e;IF(void 0!==n&&"string"==typeof n||void 0!==n&&void 0!==n.resolvedName,"An Error occurred while deserializing components: Cannot find component <%displayName% /> in resolver map. Please check your resolver in <Editor />\n\nAvailable components in resolver: %availableComponents%\n\nMore info: https://craft.js.org/r/docs/api/editor#props".replace("%displayName%",e.displayName).replace("%availableComponents%",Object.keys(t).join(", ")));const{type:i,name:a,props:s}=b$(e,t),{parent:l,custom:c,displayName:u,isCanvas:d,nodes:f,hidden:h}=o;return{type:i,name:a,displayName:u||a,props:s,custom:c||{},isCanvas:!!d,hidden:!!h,parent:l,linkedNodes:o.linkedNodes||o._childCanvas||{},nodes:f||[]}})(t,e.options.resolver);IF(o.type);const i="string"==typeof r&&r;return i&&mz("query.parseSerializedNode(...).toNode(id)",{suggest:"query.parseSerializedNode(...).toNode(node => node.id = id)"}),n().parseFreshNode({...i?{id:i}:{},data:o}).toNode(!i&&r)}}),parseFreshNode:t=>({toNode:n=>y$(t,(t=>{t.data.parent===DF&&(t.data.parent=MF);const r=f$(e.options.resolver,t.data.type);IF(null!==r),t.data.displayName=t.data.displayName||r,t.data.name=r,n&&n(t)}))}),createNode(e,t){mz(`query.createNode(${e})`,{suggest:`query.parseReactElement(${e}).toNodeTree()`});const n=this.parseReactElement(e).toNodeTree(),r=n.nodes[n.rootNodeId];return t?(t.id&&(r.id=t.id),t.data&&(r.data={...r.data,...t.data}),r):r},getState:()=>e}}var _$=function(){Az(t,uz);var e=Iz(t);function t(){return jz(this,t),e.apply(this,arguments)}return Cz(t,[{key:"handlers",value:function(){return{connect:function(e,t){},select:function(e,t){},hover:function(e,t){},drag:function(e,t){},drop:function(e,t){},create:function(e,t,n){}}}}]),t}();!function(){Az(t,dz);var e=Iz(t);function t(){return jz(this,t),e.apply(this,arguments)}Cz(t)}();var k$=function(e){e.preventDefault()},S$=function(){function e(t,n){jz(this,e),Nz(this,"store",void 0),Nz(this,"dragTarget",void 0),Nz(this,"currentDropTargetId",void 0),Nz(this,"currentDropTargetCanvasAncestorId",void 0),Nz(this,"currentIndicator",null),Nz(this,"currentTargetId",void 0),Nz(this,"currentTargetChildDimensions",void 0),Nz(this,"dragError",void 0),Nz(this,"draggedNodes",void 0),Nz(this,"onScrollListener",void 0),this.store=t,this.dragTarget=n,this.currentDropTargetId=null,this.currentDropTargetCanvasAncestorId=null,this.currentTargetId=null,this.currentTargetChildDimensions=null,this.currentIndicator=null,this.dragError=null,this.draggedNodes=this.getDraggedNodes(),this.validateDraggedNodes(),this.onScrollListener=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollListener,!0),window.addEventListener("dragover",k$,!1)}return Cz(e,[{key:"cleanup",value:function(){window.removeEventListener("scroll",this.onScrollListener,!0),window.removeEventListener("dragover",k$,!1)}},{key:"onScroll",value:function(e){var t=e.target,n=this.store.query.node(MF).get();t instanceof Element&&n&&n.dom&&t.contains(n.dom)&&(this.currentTargetChildDimensions=null)}},{key:"getDraggedNodes",value:function(){return c$(this.store.query.getNodes(),"new"===this.dragTarget.type?this.dragTarget.tree.nodes[this.dragTarget.tree.rootNodeId]:this.dragTarget.nodes)}},{key:"validateDraggedNodes",value:function(){var e=this;"new"!==this.dragTarget.type&&this.draggedNodes.forEach((function(t){t.exists&&e.store.query.node(t.node.id).isDraggable((function(t){e.dragError=t}))}))}},{key:"isNearBorders",value:function(t,n,r){return t.top+e.BORDER_OFFSET>r||t.bottom-e.BORDER_OFFSET<r||t.left+e.BORDER_OFFSET>n||t.right-e.BORDER_OFFSET<n}},{key:"isDiff",value:function(e){return!this.currentIndicator||this.currentIndicator.placement.parent.id!==e.parent.id||this.currentIndicator.placement.index!==e.index||this.currentIndicator.placement.where!==e.where}},{key:"getChildDimensions",value:function(e){var t=this,n=this.currentTargetChildDimensions;return this.currentTargetId===e.id&&n?n:e.data.nodes.reduce((function(e,n){var r=t.store.query.node(n).get().dom;return r&&e.push(Sz({id:n},az(r))),e}),[])}},{key:"getCanvasAncestor",value:function(e){var t=this;if(e===this.currentDropTargetId&&this.currentDropTargetCanvasAncestorId){var n=this.store.query.node(this.currentDropTargetCanvasAncestorId).get();if(n)return n}return function e(n){var r=t.store.query.node(n).get();return r&&r.data.isCanvas?r:r.data.parent?e(r.data.parent):null}(e)}},{key:"computeIndicator",value:function(e,t,n){var r=this.getCanvasAncestor(e);if(r&&(this.currentDropTargetId=e,this.currentDropTargetCanvasAncestorId=r.id,r.data.parent&&this.isNearBorders(az(r.dom),t,n)&&!this.store.query.node(r.id).isLinkedNode()&&(r=this.store.query.node(r.data.parent).get()),r)){this.currentTargetChildDimensions=this.getChildDimensions(r),this.currentTargetId=r.id;var o=m$(r,this.currentTargetChildDimensions,t,n);if(this.isDiff(o)){var i=this.dragError;i||this.store.query.node(r.id).isDroppable(this.draggedNodes.map((function(e){return e.node})),(function(e){i=e}));var a=r.data.nodes[o.index],s=a&&this.store.query.node(a).get();return this.currentIndicator={placement:Sz(Sz({},o),{},{currentNode:s}),error:i},this.currentIndicator}}}},{key:"getIndicator",value:function(){return this.currentIndicator}}]),e}();Nz(S$,"BORDER_OFFSET",10);var E$=function(e,t){if(1===t.length||arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var n=t[0].getBoundingClientRect(),r=n.width,o=n.height,i=t[0].cloneNode(!0);return i.style.position="absolute",i.style.left="-100%",i.style.top="-100%",i.style.width="".concat(r,"px"),i.style.height="".concat(o,"px"),i.style.pointerEvents="none",i.classList.add("drag-shadow"),document.body.appendChild(i),e.dataTransfer.setDragImage(i,0,0),i}var a=document.createElement("div");return a.style.position="absolute",a.style.left="-100%",a.style.top="-100%",a.style.width="100%",a.style.height="100%",a.style.pointerEvents="none",a.classList.add("drag-shadow-container"),t.forEach((function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height,o=t.top,i=t.left,s=e.cloneNode(!0);s.style.position="absolute",s.style.left="".concat(i,"px"),s.style.top="".concat(o,"px"),s.style.width="".concat(n,"px"),s.style.height="".concat(r,"px"),s.classList.add("drag-shadow"),a.appendChild(s)})),document.body.appendChild(a),e.dataTransfer.setDragImage(a,e.clientX,e.clientY),a},j$=function(){Az(t,_$);var e=Iz(t);function t(){var n;jz(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Nz(Tz(n=e.call.apply(e,[this].concat(o))),"draggedElementShadow",void 0),Nz(Tz(n),"dragTarget",void 0),Nz(Tz(n),"positioner",null),Nz(Tz(n),"currentSelectedElementIds",[]),n}return Cz(t,[{key:"onDisable",value:function(){this.options.store.actions.clearEvents()}},{key:"handlers",value:function(){var e=this,n=this.options.store;return{connect:function(t,r){return n.actions.setDOM(r,t),e.reflect((function(e){e.select(t,r),e.hover(t,r),e.drop(t,r)}))},select:function(t,r){var o=e.addCraftEventListener(t,"mousedown",(function(t){t.craft.stopPropagation();var o=[];if(r){var i=n.query,a=i.getEvent("selected").all();(e.options.isMultiSelectEnabled(t)||a.includes(r))&&(o=a.filter((function(e){var t=i.node(e).descendants(!0),n=i.node(e).ancestors(!0);return!t.includes(r)&&!n.includes(r)}))),o.includes(r)||o.push(r)}n.actions.setNodeEvent("selected",o)})),i=e.addCraftEventListener(t,"click",(function(t){t.craft.stopPropagation();var o=n.query.getEvent("selected").all(),i=e.options.isMultiSelectEnabled(t),a=e.currentSelectedElementIds.includes(r),s=Dz(o);i&&a?(s.splice(s.indexOf(r),1),n.actions.setNodeEvent("selected",s)):!i&&o.length>1&&n.actions.setNodeEvent("selected",s=[r]),e.currentSelectedElementIds=s}));return function(){o(),i()}},hover:function(t,r){var o=e.addCraftEventListener(t,"mouseover",(function(e){e.craft.stopPropagation(),n.actions.setNodeEvent("hovered",r)})),i=null;return e.options.removeHoverOnMouseleave&&(i=e.addCraftEventListener(t,"mouseleave",(function(e){e.craft.stopPropagation(),n.actions.setNodeEvent("hovered",null)}))),function(){o(),i&&i()}},drop:function(t,r){var o=e.addCraftEventListener(t,"dragover",(function(t){if(t.craft.stopPropagation(),t.preventDefault(),e.positioner){var o=e.positioner.computeIndicator(r,t.clientX,t.clientY);o&&n.actions.setIndicator(o)}})),i=e.addCraftEventListener(t,"dragenter",(function(e){e.craft.stopPropagation(),e.preventDefault()}));return function(){i(),o()}},drag:function(r,o){if(!n.query.node(o).isDraggable())return function(){};r.setAttribute("draggable","true");var i=e.addCraftEventListener(r,"dragstart",(function(r){r.craft.stopPropagation();var i=n.query,a=n.actions,s=i.getEvent("selected").all(),l=e.options.isMultiSelectEnabled(r);e.currentSelectedElementIds.includes(o)||(s=l?[].concat(Dz(s),[o]):[o],n.actions.setNodeEvent("selected",s)),a.setNodeEvent("dragged",s);var c=s.map((function(e){return i.node(e).get().dom}));e.draggedElementShadow=E$(r,c,t.forceSingleDragShadow),e.dragTarget={type:"existing",nodes:s},e.positioner=new S$(e.options.store,e.dragTarget)})),a=e.addCraftEventListener(r,"dragend",(function(t){t.craft.stopPropagation(),e.dropElement((function(e,t){"new"!==e.type&&n.actions.move(e.nodes,t.placement.parent.id,t.placement.index+("after"===t.placement.where?1:0))}))}));return function(){r.setAttribute("draggable","false"),i(),a()}},create:function(r,o,i){r.setAttribute("draggable","true");var a=e.addCraftEventListener(r,"dragstart",(function(r){var i;if(r.craft.stopPropagation(),"function"==typeof o){var a=o();i=K.isValidElement(a)?n.query.parseReactElement(a).toNodeTree():a}else i=n.query.parseReactElement(o).toNodeTree();e.draggedElementShadow=E$(r,[r.currentTarget],t.forceSingleDragShadow),e.dragTarget={type:"new",tree:i},e.positioner=new S$(e.options.store,e.dragTarget)})),s=e.addCraftEventListener(r,"dragend",(function(t){t.craft.stopPropagation(),e.dropElement((function(e,t){"existing"!==e.type&&(n.actions.addNodeTree(e.tree,t.placement.parent.id,t.placement.index+("after"===t.placement.where?1:0)),i&&cD(i.onCreate)&&i.onCreate(e.tree))}))}));return function(){r.removeAttribute("draggable"),a(),s()}}}}},{key:"dropElement",value:function(e){var t=this.options.store;if(this.positioner){var n=this.draggedElementShadow,r=this.positioner.getIndicator();this.dragTarget&&r&&!r.error&&e(this.dragTarget,r),n&&(n.parentNode.removeChild(n),this.draggedElementShadow=null),this.dragTarget=null,t.actions.setIndicator(null),t.actions.setNodeEvent("dragged",null),this.positioner.cleanup(),this.positioner=null}}}]),t}();function C$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=0,i=0,a=0,s=0,l=e.where;return n?n.inFlow?(a=n.outerWidth,s=r,o="before"===l?n.top:n.bottom,i=n.left):(a=r,s=n.outerHeight,o=n.top,i="before"===l?n.left:n.left+n.outerWidth):t&&(o=t.top+t.padding.top,i=t.left+t.padding.left,a=t.outerWidth-t.padding.right-t.padding.left-t.margin.left-t.margin.right,s=r),{top:"".concat(o,"px"),left:"".concat(i,"px"),width:"".concat(a,"px"),height:"".concat(s,"px")}}Nz(j$,"forceSingleDragShadow",vz()&&/Chrome/i.test(window.navigator.userAgent)&&vz()&&/Linux/i.test(window.navigator.userAgent));const N$=()=>{var e;const{indicator:t,indicatorOptions:n,enabled:r}=Wz((e=>({indicator:e.indicator,indicatorOptions:e.options.indicator,enabled:e.options.enabled}))),o=Uz();return q.useEffect((()=>{o&&(r?o.enable():o.disable())}),[r,o]),t?K.createElement(gz,{className:n.className,style:{...C$(t.placement,az(t.placement.parent.dom),t.placement.currentNode&&az(t.placement.currentNode.dom),n.thickness),backgroundColor:t.error?n.error:n.success,transition:n.transition||"0.2s ease-in",...null!==(e=n.style)&&void 0!==e?e:{}},parentDom:t.placement.parent.dom}):null},A$=({children:e})=>{const t=q.useContext(zz),n=q.useMemo((()=>t.query.getOptions().handlers(t)),[t]);return n?K.createElement($z.Provider,{value:n},K.createElement(N$,null),e):null},O$={nodes:{},events:{dragged:new Set,selected:new Set,hovered:new Set},indicator:null,options:{onNodesChange:()=>null,onRender:({render:e})=>e,onBeforeMoveEnd:()=>null,resolver:{},enabled:!0,indicator:{error:"red",success:"rgb(98, 196, 98)"},handlers:e=>new j$({store:e,removeHoverOnMouseleave:!1,isMultiSelectEnabled:e=>!!e.metaKey}),normalizeNodes:()=>{}}},R$={methods:function(e,t){return Sz(Sz({},function(e,t){var n=function(t,n,o){if(function n(r,o){var i=t.nodes[r];"string"!=typeof i.data.type&&IF(e.options.resolver[i.data.name],LF.replace("%node_type%","".concat(i.data.type.name))),e.nodes[r]=Sz(Sz({},i),{},{data:Sz(Sz({},i.data),{},{parent:o})}),i.data.nodes.length>0&&(delete e.nodes[r].data.props.children,i.data.nodes.forEach((function(e){return n(e,i.id)}))),Object.values(i.data.linkedNodes).forEach((function(e){return n(e,i.id)}))}(t.rootNodeId,n),n||t.rootNodeId!==MF){var i=r(n);if("child"!==o.type)i.data.linkedNodes[o.id]=t.rootNodeId;else{var a=o.index;null!=a?i.data.nodes.splice(a,0,t.rootNodeId):i.data.nodes.push(t.rootNodeId)}}},r=function(t){IF(t);var n=e.nodes[t];return IF(n),n},o=function t(n){var r=e.nodes[n],o=e.nodes[r.data.parent];if(r.data.nodes&&Dz(r.data.nodes).forEach((function(e){return t(e)})),r.data.linkedNodes&&Object.values(r.data.linkedNodes).map((function(e){return t(e)})),o.data.nodes.includes(n)){var i=o.data.nodes;i.splice(i.indexOf(n),1)}else{var a=Object.keys(o.data.linkedNodes).find((function(e){return o.data.linkedNodes[e]===e}));a&&delete o.data.linkedNodes[a]}!function(e,t){Object.keys(e.events).forEach((function(n){var r=e.events[n];r&&r.has&&r.has(t)&&(e.events[n]=new Set(Array.from(r).filter((function(e){return t!==e}))))}))}(e,n),delete e.nodes[n]};return{addLinkedNodeFromTree:function(e,t,i){var a=r(t).data.linkedNodes[i];a&&o(a),n(e,t,{type:"linked",id:i})},add:function(e,t,r){var o=[e];Array.isArray(e)&&(mz("actions.add(node: Node[])",{suggest:"actions.add(node: Node)"}),o=e),o.forEach((function(e){n({nodes:Nz({},e.id,e),rootNodeId:e.id},t,{type:"child",index:r})}))},addNodeTree:function(e,t,r){n(e,t,{type:"child",index:r})},delete:function(n){c$(e.nodes,n,{existOnly:!0,idOnly:!0}).forEach((function(e){var n=e.node;IF(!t.node(n.id).isTopLevelNode()),o(n.id)}))},deserialize:function(e){var n="string"==typeof e?JSON.parse(e):e,r=Object.keys(n).map((function(e){var r=e;return e===DF&&(r=MF),[r,t.parseSerializedNode(n[e]).toNode((function(e){return e.id=r}))]}));this.replaceNodes(l$(r))},move:function(n,r,o){var i=c$(e.nodes,n,{existOnly:!0}),a=e.nodes[r],s=new Set;i.forEach((function(n,i){var l=n.node,c=l.id,u=l.data.parent;t.node(r).isDroppable([c],(function(e){throw new Error(e)})),e.options.onBeforeMoveEnd(l,a,e.nodes[u]);var d=e.nodes[u].data.nodes;s.add(d);var f=d.indexOf(c);d[f]="$$",a.data.nodes.splice(o+i,0,c),e.nodes[c].data.parent=r})),s.forEach((function(e){var t=e.length;Dz(e).reverse().forEach((function(n,r){"$$"===n&&e.splice(t-1-r,1)}))}))},replaceNodes:function(t){this.clearEvents(),e.nodes=t},clearEvents:function(){this.setNodeEvent("selected",null),this.setNodeEvent("hovered",null),this.setNodeEvent("dragged",null),this.setIndicator(null)},reset:function(){this.clearEvents(),this.replaceNodes({})},setOptions:function(t){t(e.options)},setNodeEvent:function(t,n){if(e.events[t].forEach((function(n){e.nodes[n]&&(e.nodes[n].events[t]=!1)})),e.events[t]=new Set,n){var r=c$(e.nodes,n,{idOnly:!0,existOnly:!0}),o=new Set(r.map((function(e){return e.node.id})));o.forEach((function(n){e.nodes[n].events[t]=!0})),e.events[t]=o}},setCustom:function(t,n){c$(e.nodes,t,{idOnly:!0,existOnly:!0}).forEach((function(t){return n(e.nodes[t.node.id].data.custom)}))},setDOM:function(t,n){e.nodes[t]&&(e.nodes[t].dom=n)},setIndicator:function(t){t&&(!t.placement.parent.dom||t.placement.currentNode&&!t.placement.currentNode.dom)||(e.indicator=t)},setHidden:function(t,n){e.nodes[t].data.hidden=n},setProp:function(t,n){c$(e.nodes,t,{idOnly:!0,existOnly:!0}).forEach((function(t){return n(e.nodes[t.node.id].data.props)}))},selectNode:function(t){if(t){var n=c$(e.nodes,t,{idOnly:!0,existOnly:!0});this.setNodeEvent("selected",n.map((function(e){return e.node.id})))}else this.setNodeEvent("selected",null);this.setNodeEvent("hovered",null)}}}(e,t)),{},{setState:function(t){var n=Pz(this,u$);t(e,n)}})},ignoreHistoryForActions:["setDOM","setNodeEvent","selectNode","clearEvents","setOptions","setIndicator"],normalizeHistory:e=>{Object.keys(e.events).forEach((t=>{Array.from(e.events[t]||[]).forEach((n=>{e.nodes[n]||e.events[t].delete(n)}))})),Object.keys(e.nodes).forEach((t=>{const n=e.nodes[t];Object.keys(n.events).forEach((t=>{n.events[t]&&e.events[t]&&!e.events[t].has(n.id)&&(n.events[t]=!1)}))}))}},P$=(e,t)=>function(e,t,n,r){var o,i=q.useMemo((function(){return new nz}),[]),a=q.useRef([]),s=q.useRef((function(){}));"function"==typeof e?o=e:(o=e.methods,a.current=e.ignoreHistoryForActions,s.current=e.normalizeHistory);var l=q.useRef(r);l.current=r;var c=q.useRef(t),u=q.useMemo((function(){var e=s.current,t=a.current,r=l.current;return function(a,s){var l,c=n&&rz(n,(function(){return a}),i),u=KF(vM(a,(function(e){var t,n;switch(s.type){case tz.UNDO:return i.undo(e);case tz.REDO:return i.redo(e);case tz.CLEAR:return i.clear(),FF({},e);case tz.IGNORE:case tz.MERGE:case tz.THROTTLE:var r,a=YF(n=s.payload)||GF(n)||XF(n)||QF(),l=a[0],u=a.slice(1);(r=o(e,c))[l].apply(r,ZF(u));break;default:(t=o(e,c))[s.type].apply(t,ZF(s.payload))}})),3),d=u[0],f=u[1],h=u[2];return l=d,r&&r(d,a,{type:s.type,params:s.payload,patches:f},c,(function(e){var t=vM(d,e);l=t[0],f=[].concat(ZF(f),ZF(t[1])),h=[].concat(ZF(t[2]),ZF(h))})),[tz.UNDO,tz.REDO].includes(s.type)&&e&&(l=mM(l,e)),[].concat(ZF(t),[tz.UNDO,tz.REDO,tz.IGNORE,tz.CLEAR]).includes(s.type)||(s.type===tz.THROTTLE?i.throttleAdd(f,h,s.config&&s.config.rate):s.type===tz.MERGE?i.merge(f,h):i.add(f,h)),l}}),[i,o,n]),d=q.useCallback((function(){return c.current}),[]),f=q.useMemo((function(){return new oz(d)}),[d]),h=q.useCallback((function(e){var t=u(c.current,e);c.current=t,f.notify()}),[u,f]);q.useEffect((function(){f.notify()}),[f]);var p=q.useMemo((function(){return n?rz(n,(function(){return c.current}),i):[]}),[i,n]),g=q.useMemo((function(){var e=Object.keys(o(null,null)),t=a.current;return FF(FF({},e.reduce((function(e,t){return e[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h({type:t,payload:n})},e}),{})),{},{history:{undo:function(){return h({type:tz.UNDO})},redo:function(){return h({type:tz.REDO})},clear:function(){return h({type:tz.CLEAR})},throttle:function(n){return FF({},e.filter((function(e){return!t.includes(e)})).reduce((function(e,t){return e[t]=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return h({type:tz.THROTTLE,payload:[t].concat(r),config:{rate:n}})},e}),{}))},ignore:function(){return FF({},e.filter((function(e){return!t.includes(e)})).reduce((function(e,t){return e[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h({type:tz.IGNORE,payload:[t].concat(n)})},e}),{}))},merge:function(){return FF({},e.filter((function(e){return!t.includes(e)})).reduce((function(e,t){return e[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h({type:tz.MERGE,payload:[t].concat(n)})},e}),{}))}}})}),[h,o]);return q.useMemo((function(){return{getState:d,subscribe:function(e,t,n){return f.subscribe(e,t,n)},actions:g,query:p,history:i}}),[g,p,f,d,i])}(R$,{...O$,options:{...O$.options,...e}},x$,t),T$=({children:e,...t})=>{void 0!==t.resolver&&IF("object"==typeof t.resolver&&!Array.isArray(t.resolver)&&null!==t.resolver);const n=q.useRef(t),r=P$(n.current,((e,t,n,r,o)=>{if(!n)return;const{patches:i,...a}=n;for(let s=0;s<i.length;s++){const{path:n}=i[s],l=n.length>2&&"nodes"===n[0]&&"data"===n[2];if([tz.IGNORE,tz.THROTTLE].includes(a.type)&&a.params&&(a.type=a.params[0]),["setState","deserialize"].includes(a.type)||l){o((n=>{e.options.normalizeNodes&&e.options.normalizeNodes(n,t,a,r)}));break}}}));return q.useEffect((()=>{r&&void 0!==t.enabled&&r.query.getOptions().enabled!==t.enabled&&r.actions.setOptions((e=>{e.enabled=t.enabled}))}),[r,t.enabled]),q.useEffect((()=>{r.subscribe((e=>({json:r.query.serialize()})),(()=>{r.query.getOptions().onNodesChange(r.query)}))}),[r]),r?q.createElement(zz.Provider,{value:r},q.createElement(A$,null,e)):null};function I$(){const{connectors:{connect:e,drag:t}}=Kz();return ne.jsx("div",{ref:n=>e(t(n)),style:{height:1,width:"100%",backgroundColor:"white"}})}function M$(e){return ne.jsx("div",{style:{height:1,width:"100%",backgroundColor:"white"}})}I$.craft={rules:{canDrag:e=>"Drag"!==e.data.props.text},related:{settings:function(){const{actions:{setProp:e}}=Kz((e=>({})));return ne.jsx("div",{})}}};const D$=({filters:e,placeholder:t,onSearch:n})=>{const[r,o]=q.useState(!1);return ne.jsx("form",{className:"bg-fantasy-glass rounded-lg border border-fantasy-border",children:ne.jsxs("div",{className:"flex relative",children:[ne.jsx("label",{htmlFor:"search-dropdown",className:"sr-only",children:"Search"}),ne.jsxs("div",{className:"flex relative w-full",children:[ne.jsxs("button",{type:"submit",className:"p-2.5 text-sm font-medium h-full text-fantasy-text",children:[ne.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),ne.jsx("span",{className:"sr-only",children:"Search"})]}),ne.jsx("input",{type:"search",id:"search-dropdown",className:"block p-2.5 w-full bg-transparent z-20 text-sm text-fantasy-text placeholder:text-fantasy-text-muted focus:ring-fantasy-accent focus:ring-1 focus:outline-none focus:ring-fantasy-accent-dark",placeholder:t})]}),ne.jsxs("button",{id:"dropdown-button",className:"shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center rounded-e-lg border-l border-fantasy-medium hover:bg-fantasy-light focus:ring-1 focus:outline-none focus:ring-fantasy-accent-dark",type:"button",onClick:()=>o(!r),children:["All"," ",ne.jsx("svg",{className:"w-2.5 h-2.5 ms-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),ne.jsx("div",{id:"dropdown",className:(r?"":"hidden")+" absolute top-full end-0 mt-3 z-10 bg-neutral-50 divide-y divide-neutral-100 rounded-lg shadow-sm w-44",children:ne.jsx("ul",{className:"py-2 text-sm text-neutral-700 dark:text-neutral-200","aria-labelledby":"dropdown-button",children:e.map((e=>ne.jsx("li",{children:ne.jsx("button",{type:"button",className:"inline-flex w-full px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-neutral-50",children:e.title})},e.title)))})})]})})};function L$({placeholder:e}){const{connectors:{connect:t,drag:n}}=Kz();return ne.jsx("div",{ref:e=>t(n(e)),children:ne.jsx(D$,{filters:[],placeholder:e,onSearch:()=>{}})})}function B$(){return ne.jsx(D$,{filters:[],placeholder:"testing",onSearch:()=>{}})}function F$({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:o}){const[i,a]=q.useState(""),[s,l]=q.useState(""),[c,u]=q.useState({nodes:[],edges:[]});return q.useEffect((()=>{e&&(a(e.name),l(e.icon),u(e.blueprint))}),[e]),ne.jsxs(lp,{isOpen:t,onClose:n,children:[ne.jsx(dp,{title:"Edit Button State",onClose:n}),ne.jsxs(cp,{children:[ne.jsx(hp,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:i,onChange:e=>a(e),isValid:!0,errorMessage:"Names must be unique"}),ne.jsx("p",{onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:c,onSave:e=>u(e)}))),children:"On Click Action"})]}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:()=>{o(),n()},children:"Delete"}),ne.jsx(sp,{color:"primary",onClick:()=>{r({name:i,icon:s,blueprint:c}),n()},children:"Update"})]})]})}L$.craft={rules:{},related:{settings:function(){const{actions:{setProp:e},placeholder:t,blueprint:n}=Kz((e=>({placeholder:e.data.props.placeholder,blueprint:e.data.props.blueprint})));return ne.jsx(ne.Fragment,{children:ne.jsx(hp,{id:"searchbar-placeholder",label:"Placeholder",value:t,onChange:t=>e((e=>e.placeholder=t)),isValid:!0,errorMessage:""})})}}};const z$=q.forwardRef((({buttons:e,onClick:t,isOpen:n=!1},r)=>ne.jsxs("div",{className:"absolute right-6 bottom-6 group",ref:r,children:[ne.jsx("div",{className:(n?"flex":"hidden")+" flex-col items-center mb-4 space-y-2",children:null==e?void 0:e.map((e=>ne.jsxs("button",{onClick:e.onClick,type:"button",className:"relative w-[52px] h-[52px] text-neutral-500 bg-white rounded-lg border border-neutral-200 hover:text-neutral-900 dark:border-neutral-600 shadow-sm dark:hover:text-white dark:text-neutral-400 hover:bg-neutral-50 dark:bg-neutral-700 dark:hover:bg-neutral-600 focus:ring-4 focus:ring-neutral-300 focus:outline-none dark:focus:ring-neutral-400",children:[ne.jsx("svg",{className:"w-5 h-5 mx-auto","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:ne.jsx("path",{d:"M14.419 10.581a3.564 3.564 0 0 0-2.574 1.1l-4.756-2.49a3.54 3.54 0 0 0 .072-.71 3.55 3.55 0 0 0-.043-.428L11.67 6.1a3.56 3.56 0 1 0-.831-2.265c.006.143.02.286.043.428L6.33 6.218a3.573 3.573 0 1 0-.175 4.743l4.756 2.491a3.58 3.58 0 1 0 3.508-2.871Z"})}),ne.jsx("span",{className:"absolute block mb-px text-sm font-medium -translate-x-[100%] -translate-y-1/2 -start-3 top-1/2 shadow-black",children:e.name})]},e.name)))}),ne.jsxs("button",{id:"floating-action-button",onClick:()=>t?t():null,type:"button",className:"flex items-center justify-center border border-fantasy-border text-fantasy-text bg-fantasy-glass rounded-lg w-14 h-14 transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40",children:[ne.jsx("svg",{className:`${!t&&"group-hover:rotate-45 transition-transform"} w-5 h-5`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Open actions menu"})]})]})));function $$({buttons:e}){const{connectors:{connect:t,drag:n}}=Kz();return ne.jsx(z$,{ref:e=>t(n(e)),buttons:null==e?void 0:e.map((e=>({name:e.name,icon:e.icon,onClick:()=>{}}))),isOpen:!0})}function U$({blueprint:e,isList:t,buttons:n,state:r,updateState:o}){const i=tw(),[a,s]=q.useState(!1),l=q.useCallback((()=>{if(t)return s(!a);new GT(e).processBlueprint(i,r,o)}),[e,i,r,o,a,t]);return ne.jsx(z$,{isOpen:a,onClick:l,buttons:null==n?void 0:n.map((e=>({name:e.name,icon:e.icon,onClick:()=>new GT(e.blueprint).processBlueprint(i,r,o)})))})}const W$={defaultProps:{isList:!1,buttons:[],blueprint:{nodes:Xw(),edges:[]}},related:{settings:function(){const{actions:{setProp:e},isList:t,buttons:n,blueprint:r}=Kz((e=>({isList:e.data.props.isList,buttons:e.data.props.buttons,blueprint:e.data.props.blueprint}))),[o,i]=q.useState(null);return ne.jsxs("div",{children:[ne.jsx(ix,{id:"isList",label:"is List?",checked:t,onChange:t=>e((e=>e.isList=t))}),t?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[ne.jsx("h5",{style:{marginLeft:10},children:"Buttons"}),ne.jsx("div",{children:ne.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:()=>e((e=>(e.buttons.find((e=>"new button"===e.name))||e.buttons.push({name:"new button",icon:"",blueprint:{nodes:Xw(),edges:[]}}),e))),children:[ne.jsx("svg",{className:"group-hover:rotate-45 transition-transform w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Icon description"})]})})]}),ne.jsx(rx,{}),n.map((e=>ne.jsx("p",{onClick:()=>i(e),children:e.name},e.name))),ne.jsx(F$,{data:o,isOpen:null!==o,requestClose:()=>i(null),onSave:t=>e((e=>{for(let n=0;n<e.buttons.length;n++)e.buttons[n].name===o.name&&(e.buttons[n]=t);return e})),onDelete:()=>e((e=>e.buttons=e.buttons.filter((e=>e.name!==o.name))))})]}):ne.jsx("p",{onClick:()=>fh("blueprint",(({id:t})=>ne.jsx(qR,{id:t,data:r,onSave:t=>e((e=>e.blueprint=t))}))),children:"On Click"})]})}}};$$.craft=W$;const H$=e=>{const t=tw(),[n,r]=q.useState("default"),o=q.useMemo((()=>{var n;if(!e.dynamicOptions)return e.options;return null!==(n=new GT(e.optionsBlueprint).processBlueprint(t,e.state,e.updateState))&&void 0!==n?n:[]}),[t,e.state,e.updateState]),i=q.useCallback((n=>{new GT(e.onChange).processBlueprint({...t,selectedValue:n},e.state,e.updateState)}),[e.onChange,t,e.state,e.updateState]);return ne.jsxs(Qb,{style:{marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],width:QT.size[e.width],maxWidth:QT.size[e.maxWidth],minWidth:QT.size[e.minWidth]},id:e.label,label:e.label,value:n,onChange:e=>{r(e),i(o.find((t=>t.name===e)))},children:[ne.jsx("option",{disabled:!0,value:"default",children:"Select an option..."}),o.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))]})},V$=e=>{const t=tw(),n=q.useMemo((()=>new GT(e.getValue).processBlueprint(t,e.state,e.updateState)),[e.getValue,t,e.state,e.updateState]),r=q.useCallback((n=>{new GT(e.onChange).processBlueprint({...t,"field value":n},e.state,e.updateState)}),[e.onChange,t,e.state,e.updateState]);return ne.jsx(hp,{style:{marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],width:QT.size[e.width],maxWidth:QT.size[e.maxWidth],minWidth:QT.size[e.minWidth]},id:e.label,label:e.label,type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,value:n,onChange:e=>r(e),isValid:!0,errorMessage:""})},q$=({data:e,style:t,state:n,updateState:r})=>ne.jsx("div",{style:t,children:ne.jsx(nw,{localData:[],children:ne.jsx(K$,{node:e.ROOT,data:e,state:n,updateState:r})})}),K$=({node:e,data:t,state:n,updateState:r})=>{const o="object"==typeof e.type?e.type.resolvedName:e.type,i=e.nodes.map((e=>ne.jsx(K$,{node:t[e],data:t,state:n,updateState:r},e)));switch(o){case"Container":return ne.jsx(mI,{...e.props,state:n,updateState:r,children:i});case"Text":return ne.jsx(yI,{...e.props,state:n,updateState:r});case"DesignerDivider":return ne.jsx(M$,{...e.props,state:n,updateState:r});case"FAB":return ne.jsx(U$,{...e.props,state:n,updateState:r});case"Select":return ne.jsx(H$,{...e.props,state:n,updateState:r});case"TextInput":return ne.jsx(V$,{...e.props,state:n,updateState:r});case"Searchbar":return ne.jsx(B$,{});default:return ne.jsxs("h1",{children:["No component for type ",o]})}};function Z$(){const e=eR((async()=>(await hv.characters.toArray()).filter((e=>!e.deleted_at))),[]);return{characters:e||[],isLoading:void 0===e}}const Y$=dv.object({id:dv.string({invalid_type_error:"id must be a string"}).optional(),local_id:dv.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:dv.string({invalid_type_error:"user_id must be a string"}),name:dv.string(),data:dv.object({}),system:dv.object({local_id:dv.string(),version_id:dv.string()}),version:dv.string().optional(),datapacks:dv.array(dv.object({pack_id:dv.string(),version_id:dv.string()})),created_at:dv.string().datetime({offset:!0}),updated_at:dv.string().datetime({offset:!0}),deleted_at:dv.string().datetime({offset:!0}).optional()});var G$,X$="undefined"!=typeof window?window:void 0,J$="undefined"!=typeof globalThis?globalThis:X$,Q$=Array.prototype,eU=Q$.forEach,tU=Q$.indexOf,nU=null==J$?void 0:J$.navigator,rU=null==J$?void 0:J$.document,oU=null==J$?void 0:J$.location,iU=null==J$?void 0:J$.fetch,aU=null!=J$&&J$.XMLHttpRequest&&"withCredentials"in new J$.XMLHttpRequest?J$.XMLHttpRequest:void 0,sU=null==J$?void 0:J$.AbortController,lU=null==nU?void 0:nU.userAgent,cU=null!=X$?X$:{},uU={DEBUG:!1,LIB_VERSION:"1.240.5"},dU="$copy_autocapture",fU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(G$||(G$={}));var hU=["fatal","error","warning","log","info","debug"];function pU(e,t){return-1!==e.indexOf(t)}var gU=function(e){return e.trim()},mU=function(e){return e.replace(/^\$/,"")},vU=Array.isArray,yU=Object.prototype,bU=yU.hasOwnProperty,wU=yU.toString,xU=vU||function(e){return"[object Array]"===wU.call(e)},_U=e=>"function"==typeof e,kU=e=>e===Object(e)&&!xU(e),SU=e=>{if(kU(e)){for(var t in e)if(bU.call(e,t))return!1;return!0}return!1},EU=e=>void 0===e,jU=e=>"[object String]"==wU.call(e),CU=e=>jU(e)&&0===e.trim().length,NU=e=>null===e,AU=e=>EU(e)||NU(e),OU=e=>"[object Number]"==wU.call(e),RU=e=>"[object Boolean]"===wU.call(e),PU=e=>pU(fU,e),TU=e=>{var t={t:function(t){if(X$&&(uU.DEBUG||cU.POSTHOG_DEBUG)&&!EU(X$.console)&&X$.console){for(var n=("__rrweb_original__"in X$.console[t]?X$.console[t].__rrweb_original__:X$.console[t]),r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];n(e,...o)}},info:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.t("log",...n)},warn:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.t("warn",...n)},error:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.t("error",...n)},critical:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.error(e,...n)},uninitializedWarning:e=>{t.error("You must initialize PostHog before calling "+e)},createLogger:t=>TU(e+" "+t)};return t},IU=TU("[PostHog.js]"),MU=IU.createLogger,DU=MU("[ExternalScriptsLoader]"),LU=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return DU.warn(t+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=null==rU?void 0:rU.querySelectorAll("script");if(r)for(var o=0;o<r.length;o++)if(r[o].src===t)return n();var i=()=>{if(!rU)return n("document not found");var r=rU.createElement("script");if(r.type="text/javascript",r.crossOrigin="anonymous",r.src=t,r.onload=e=>n(void 0,e),r.onerror=e=>n(e),e.config.prepare_external_dependency_script&&(r=e.config.prepare_external_dependency_script(r)),!r)return n("prepare_external_dependency_script returned null");var o,i=rU.querySelectorAll("body > script");i.length>0?null==(o=i[0].parentNode)||o.insertBefore(r,i[0]):rU.body.appendChild(r)};null!=rU&&rU.body?i():null==rU||rU.addEventListener("DOMContentLoaded",i)};function BU(){return BU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BU.apply(this,arguments)}function FU(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}cU.__PosthogExtensions__=cU.__PosthogExtensions__||{},cU.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{var r="/static/"+t+".js?v="+e.version;if("remote-config"===t&&(r="/array/"+e.config.token+"/config.js"),"toolbar"===t){var o=3e5;r=r+"&t="+Math.floor(Date.now()/o)*o}var i=e.requestRouter.endpointFor("assets",r);LU(e,i,n)},cU.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{var r=e.requestRouter.endpointFor("api",t);LU(e,r,n)};var zU={};function $U(e,t,n){if(xU(e))if(eU&&e.forEach===eU)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var r=0,o=e.length;r<o;r++)if(r in e&&t.call(n,e[r],r)===zU)return}function UU(e,t,n){if(!AU(e)){if(xU(e))return $U(e,t,n);if((e=>e instanceof FormData)(e)){for(var r of e.entries())if(t.call(n,r[1],r[0])===zU)return}else for(var o in e)if(bU.call(e,o)&&t.call(n,e[o],o)===zU)return}}var WU=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $U(n,(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},HU=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $U(n,(function(t){$U(t,(function(t){e.push(t)}))})),e};function VU(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var qU=function(e){try{return e()}catch(e){return}},KU=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(e){IU.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),IU.critical(e)}}},ZU=function(e){var t={};return UU(e,(function(e,n){(jU(e)&&e.length>0||OU(e))&&(t[n]=e)})),t};var YU=["herokuapp.com","vercel.app","netlify.app"];function GU(e){var t=null==e?void 0:e.hostname;if(!jU(t))return!1;var n=t.split(".").slice(-2).join(".");for(var r of YU)if(n===r)return!1;return!0}function XU(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function JU(e,t,n,r){var{capture:o=!1,passive:i=!0}=null!=r?r:{};null==e||e.addEventListener(t,n,{capture:o,passive:i})}var QU="$people_distinct_id",eW="__alias",tW="__timers",nW="$autocapture_disabled_server_side",rW="$heatmaps_enabled_server_side",oW="$exception_capture_enabled_server_side",iW="$web_vitals_enabled_server_side",aW="$dead_clicks_enabled_server_side",sW="$web_vitals_allowed_metrics",lW="$session_recording_enabled_server_side",cW="$console_log_recording_enabled_server_side",uW="$session_recording_network_payload_capture",dW="$session_recording_masking",fW="$session_recording_canvas_recording",hW="$replay_sample_rate",pW="$replay_minimum_duration",gW="$replay_script_config",mW="$sesid",vW="$session_is_sampled",yW="$session_recording_url_trigger_activated_session",bW="$session_recording_event_trigger_activated_session",wW="$enabled_feature_flags",xW="$early_access_features",_W="$feature_flag_details",kW="$stored_person_properties",SW="$stored_group_properties",EW="$surveys",jW="$surveys_activated",CW="$flag_call_reported",NW="$user_state",AW="$client_session_props",OW="$capture_rate_limit",RW="$initial_campaign_params",PW="$initial_referrer_info",TW="$initial_person_info",IW="$epp",MW="__POSTHOG_TOOLBAR__",DW="$posthog_cookieless",LW=[QU,eW,"__cmpns",tW,lW,rW,mW,wW,NW,xW,_W,SW,kW,EW,CW,AW,OW,RW,PW,IW];function BW(e){return e instanceof Element&&(e.id===MW||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function FW(e){return!!e&&1===e.nodeType}function zW(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function $W(e){return!!e&&3===e.nodeType}function UW(e){return!!e&&11===e.nodeType}function WW(e){return e?gU(e).split(/\s+/):[]}function HW(e){var t=null==X$?void 0:X$.location.href;return!!(t&&e&&e.some((e=>t.match(e))))}function VW(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return WW(t)}function qW(e){return AU(e)?null:gU(e).split(/(\s+)/).filter((e=>iH(e))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function KW(e){var t="";return XW(e)&&!JW(e)&&e.childNodes&&e.childNodes.length&&UU(e.childNodes,(function(e){var n;$W(e)&&e.textContent&&(t+=null!==(n=qW(e.textContent))&&void 0!==n?n:"")})),gU(t)}function ZW(e){return EU(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var YW=["a","button","form","input","select","textarea","label"];function GW(e){var t=e.parentNode;return!(!t||!FW(t))&&t}function XW(e){for(var t=e;t.parentNode&&!zW(t,"body");t=t.parentNode){var n=VW(t);if(pU(n,"ph-sensitive")||pU(n,"ph-no-capture"))return!1}if(pU(VW(e),"ph-include"))return!0;var r=e.type||"";if(jU(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var o=e.name||e.id||"";return!jU(o)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(o.replace(/[^a-zA-Z0-9]/g,""))}function JW(e){return!!(zW(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||zW(e,"select")||zW(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var QW="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",eH=new RegExp("^(?:"+QW+")$"),tH=new RegExp(QW),nH="\\d{3}-?\\d{2}-?\\d{4}",rH=new RegExp("^("+nH+")$"),oH=new RegExp("("+nH+")");function iH(e,t){if(void 0===t&&(t=!0),AU(e))return!1;if(jU(e)){if(e=gU(e),(t?eH:tH).test((e||"").replace(/[- ]/g,"")))return!1;if((t?rH:oH).test(e))return!1}return!0}function aH(e){var t=KW(e);return iH(t=(t+" "+sH(e)).trim())?t:""}function sH(e){var t="";return e&&e.childNodes&&e.childNodes.length&&UU(e.childNodes,(function(e){var n;if(e&&"span"===(null==(n=e.tagName)?void 0:n.toLowerCase()))try{var r=KW(e);t=(t+" "+r).trim(),e.childNodes&&e.childNodes.length&&(t=(t+" "+sH(e)).trim())}catch(e){IU.error("[AutoCapture]",e)}})),t}function lH(e){return function(e){var t=e.map((e=>{var t,n,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class)for(var o of(e.attr_class.sort(),e.attr_class))r+="."+o.replace(/"/g,"");var i=BU({},e.text?{text:e.text}:{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),a={};return VU(i).sort(((e,t)=>{var[n]=e,[r]=t;return n.localeCompare(r)})).forEach((e=>{var[t,n]=e;return a[cH(t.toString())]=cH(n.toString())})),(r+=":")+VU(i).map((e=>{var[t,n]=e;return t+'="'+n+'"'})).join("")}));return t.join(";")}(function(e){return e.map((e=>{var t,n,r={text:null==(t=e.$el_text)?void 0:t.slice(0,400),tag_name:e.tag_name,href:null==(n=e.attr__href)?void 0:n.slice(0,2048),attr_class:uH(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return VU(e).filter((e=>{var[t]=e;return 0===t.indexOf("attr__")})).forEach((e=>{var[t,n]=e;return r.attributes[t]=n})),r}))}(e))}function cH(e){return e.replace(/"|\\"/g,'\\"')}function uH(e){var t=e.attr__class;return t?xU(t)?t:WW(t):void 0}class dH{constructor(){this.clicks=[]}isRageClick(e,t,n){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&n-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}var fH=["localhost","127.0.0.1"],hH=e=>{var t=null==rU?void 0:rU.createElement("a");return EU(t)?null:(t.href=e,t)},pH=function(e,t){for(var n,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),o=0;o<r.length;o++){var i=r[o].split("=");if(i[0]===t){n=i;break}}if(!xU(n)||n.length<2)return"";var a=n[1];try{a=decodeURIComponent(a)}catch(e){IU.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")},gH=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),o=r[0]||"",i=r[1],a=o.split("?"),s=a[1],l=a[0],c=(s||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");xU(f)&&(t.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var h=l;return null!=s&&(h+="?"+u.join("&")),null!=i&&(h+="#"+i),h},mH=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},vH=MU("[AutoCapture]");function yH(e,t){return t.length>e?t.slice(0,e)+"...":t}function bH(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!FW(t));return t}function wH(e,t){for(var n,r,{e:o,maskAllElementAttributes:i,maskAllText:a,elementAttributeIgnoreList:s,elementsChainAsString:l}=t,c=[e],u=e;u.parentNode&&!zW(u,"body");)UW(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],h={},p=!1,g=!1;if(UU(c,(e=>{var t=XW(e);"a"===e.tagName.toLowerCase()&&(p=e.getAttribute("href"),p=t&&p&&iH(p)&&p),pU(VW(e),"ph-no-capture")&&(g=!0),f.push(function(e,t,n,r){var o=e.tagName.toLowerCase(),i={tag_name:o};YW.indexOf(o)>-1&&!n&&("a"===o.toLowerCase()||"button"===o.toLowerCase()?i.$el_text=yH(1024,aH(e)):i.$el_text=yH(1024,KW(e)));var a=VW(e);a.length>0&&(i.classes=a.filter((function(e){return""!==e}))),UU(e.attributes,(function(n){var o;if((!JW(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==r||!r.includes(n.name))&&!t&&iH(n.value)&&(o=n.name,!jU(o)||"_ngcontent"!==o.substring(0,10)&&"_nghost"!==o.substring(0,7))){var a=n.value;"class"===n.name&&(a=WW(a).join(" ")),i["attr__"+n.name]=yH(1024,a)}}));for(var s=1,l=1,c=e;c=bH(c);)s++,c.tagName===e.tagName&&l++;return i.nth_child=s,i.nth_of_type=l,i}(e,i,a,s));var n=function(e){if(!XW(e))return{};var t={};return UU(e.attributes,(function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),r=e.value;n&&r&&iH(r)&&(t[n]=r)}})),t}(e);WU(h,n)})),g)return{props:{},explicitNoCapture:g};if(a||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?f[0].$el_text=aH(e):f[0].$el_text=KW(e)),p){var m,v;f[0].attr__href=p;var y=null==(m=hH(p))?void 0:m.host,b=null==X$||null==(v=X$.location)?void 0:v.host;y&&b&&y!==b&&(d=p)}return{props:WU({$event_type:o.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:lH(f)},null!=(n=f[0])&&n.$el_text?{$el_text:null==(r=f[0])?void 0:r.$el_text}:{},d&&"click"===o.type?{$external_click_url:d}:{},h)}}class xH{constructor(e){this.i=!1,this.o=null,this.rageclicks=new dH,this.h=!1,this.instance=e,this.m=null}get S(){var e,t,n=kU(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=null==(e=n.url_allowlist)?void 0:e.map((e=>new RegExp(e))),n.url_ignorelist=null==(t=n.url_ignorelist)?void 0:t.map((e=>new RegExp(e))),n}$(){if(this.isBrowserSupported()){if(X$&&rU){var e=e=>{e=e||(null==X$?void 0:X$.event);try{this.k(e)}catch(e){vH.error("Failed to capture event",e)}};if(JU(rU,"submit",e,{capture:!0}),JU(rU,"change",e,{capture:!0}),JU(rU,"click",e,{capture:!0}),this.S.capture_copied_text){var t=e=>{e=e||(null==X$?void 0:X$.event),this.k(e,dU)};JU(rU,"copy",t,{capture:!0}),JU(rU,"cut",t,{capture:!0})}}}else vH.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[nW]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var t,n=[];return null==(t=this.m)||t.forEach((t=>{var r=null==rU?void 0:rU.querySelectorAll(t);null==r||r.forEach((r=>{e===r&&n.push(t)}))})),n}get isEnabled(){var e,t,n=null==(e=this.instance.persistence)?void 0:e.props[nW],r=this.o;if(NU(r)&&!RU(n)&&!this.instance.config.advanced_disable_decide)return!1;var o=null!==(t=this.o)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!o}k(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var n,r=ZW(e);$W(r)&&(r=r.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!=(n=this.rageclicks)&&n.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.k(e,"$rageclick");var o=t===dU;if(r&&function(e,t,n,r,o){var i,a,s;if(void 0===n&&(n=void 0),!X$||!e||zW(e,"html")||!FW(e))return!1;if(null!=(i=n)&&i.url_allowlist&&!HW(n.url_allowlist))return!1;if(null!=(a=n)&&a.url_ignorelist&&HW(n.url_ignorelist))return!1;if(null!=(s=n)&&s.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some((e=>t.type===e)))return!1}for(var c=!1,u=[e],d=!0,f=e;f.parentNode&&!zW(f,"body");)if(UW(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=GW(f)))break;if(r||YW.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var h=X$.getComputedStyle(d);h&&"pointer"===h.getPropertyValue("cursor")&&(c=!0)}u.push(d),f=d}if(!function(e,t){var n=null==t?void 0:t.element_allowlist;if(EU(n))return!0;var r=function(e){if(n.some((t=>e.tagName.toLowerCase()===t)))return{v:!0}};for(var o of e){var i=r(o);if("object"==typeof i)return i.v}return!1}(u,n))return!1;if(!function(e,t){var n=null==t?void 0:t.css_selector_allowlist;if(EU(n))return!0;var r=function(e){if(n.some((t=>e.matches(t))))return{v:!0}};for(var o of e){var i=r(o);if("object"==typeof i)return i.v}return!1}(u,n))return!1;var p=X$.getComputedStyle(e);if(p&&"pointer"===p.getPropertyValue("cursor")&&"click"===t.type)return!0;var g=e.tagName.toLowerCase();switch(g){case"html":return!1;case"form":return(o||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(o||["change","click"]).indexOf(t.type)>=0;default:return c?(o||["click"]).indexOf(t.type)>=0:(o||["click"]).indexOf(t.type)>=0&&(YW.indexOf(g)>-1||"true"===e.getAttribute("contenteditable"))}}(r,e,this.S,o,o?["copy","cut"]:void 0)){var{props:i,explicitNoCapture:a}=wH(r,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var s=this.getElementSelectors(r);if(s&&s.length>0&&(i.$element_selectors=s),t===dU){var l,c=qW(null==X$||null==(l=X$.getSelection())?void 0:l.toString()),u=e.type||"clipboard";if(!c)return!1;i.$selected_content=c,i.$copy_type=u}return this.instance.capture(t,i),!0}}}isBrowserSupported(){return _U(null==rU?void 0:rU.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return OU(e)&&isFinite(e)&&Math.floor(e)===e});var _H="0123456789abcdef";class kH{constructor(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,n,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||e<0||t<0||n<0||r<0||e>0xffffffffffff||t>4095||n>1073741823||r>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=e/Math.pow(2,40),o[1]=e/Math.pow(2,32),o[2]=e/Math.pow(2,24),o[3]=e/Math.pow(2,16),o[4]=e/Math.pow(2,8),o[5]=e,o[6]=112|t>>>8,o[7]=t,o[8]=128|n>>>24,o[9]=n>>>16,o[10]=n>>>8,o[11]=n,o[12]=r>>>24,o[13]=r>>>16,o[14]=r>>>8,o[15]=r,new kH(o)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+_H.charAt(this.bytes[t]>>>4)+_H.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new kH(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}class SH{constructor(){this.I=0,this.P=0,this.R=new CH}generate(){var e=this.generateOrAbort();if(EU(e)){this.I=0;var t=this.generateOrAbort();if(EU(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.I)this.I=e,this.T();else{if(!(e+1e4>this.I))return;this.P++,this.P>4398046511103&&(this.I++,this.T())}return kH.fromFieldsV7(this.I,Math.trunc(this.P/Math.pow(2,30)),this.P&Math.pow(2,30)-1,this.R.nextUint32())}T(){this.P=1024*this.R.nextUint32()+(1023&this.R.nextUint32())}}var EH,jH=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};X$&&!EU(X$.crypto)&&crypto.getRandomValues&&(jH=e=>crypto.getRandomValues(e));class CH{constructor(){this.M=new Uint32Array(8),this.C=1/0}nextUint32(){return this.C>=this.M.length&&(jH(this.M),this.C=0),this.M[this.C++]}}var NH=()=>AH().toString(),AH=()=>(EH||(EH=new SH)).generate(),OH="",RH=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var PH,TH={O:()=>!!rU,F:function(e){IU.error("cookieStore error: "+e)},A:function(e){if(rU){try{for(var t=e+"=",n=rU.cookie.split(";").filter((e=>e.length)),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}}catch(e){}return null}},D:function(e){var t;try{t=JSON.parse(TH.A(e))||{}}catch(e){}return t},j:function(e,t,n,r,o){if(rU)try{var i="",a="",s=function(e,t){if(t){var n=function(e,t){if(void 0===t&&(t=rU),OH)return OH;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),r=Math.min(n.length,8),o="dmn_chk_"+NH(),i=new RegExp("(^|;)\\s*"+o+"=1");!OH&&r--;){var a=n.slice(r).join("."),s=o+"=1;domain=."+a;t.cookie=s,i.test(t.cookie)&&(t.cookie=s+";expires=Thu, 01 Jan 1970 00:00:00 GMT",OH=a)}return OH}(e);if(!n){var r=(e=>{var t=e.match(RH);return t?t[0]:""})(e);r!==n&&IU.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}(rU.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),i="; expires="+l.toUTCString()}o&&(a="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+i+"; SameSite=Lax; path=/"+s+a;return c.length>3686.4&&IU.warn("cookieStore warning: large cookie, len="+c.length),rU.cookie=c,c}catch(e){return}},L:function(e,t){try{TH.j(e,"",-1,t)}catch(e){return}}},IH=null,MH={O:function(){if(!NU(IH))return IH;var e=!0;if(EU(X$))e=!1;else try{var t="__mplssupport__";MH.j(t,"xyz"),'"xyz"'!==MH.A(t)&&(e=!1),MH.L(t)}catch(X$){e=!1}return e||IU.error("localStorage unsupported; falling back to cookie store"),IH=e,e},F:function(e){IU.error("localStorage error: "+e)},A:function(e){try{return null==X$?void 0:X$.localStorage.getItem(e)}catch(e){MH.F(e)}return null},D:function(e){try{return JSON.parse(MH.A(e))||{}}catch(e){}return null},j:function(e,t){try{null==X$||X$.localStorage.setItem(e,JSON.stringify(t))}catch(e){MH.F(e)}},L:function(e){try{null==X$||X$.localStorage.removeItem(e)}catch(e){MH.F(e)}}},DH=["distinct_id",mW,vW,IW,TW],LH=BU({},MH,{D:function(e){try{var t={};try{t=TH.D(e)||{}}catch(e){}var n=WU(t,JSON.parse(MH.A(e)||"{}"));return MH.j(e,n),n}catch(e){}return null},j:function(e,t,n,r,o,i){try{MH.j(e,t,void 0,void 0,i);var a={};DH.forEach((e=>{t[e]&&(a[e]=t[e])})),Object.keys(a).length&&TH.j(e,a,n,r,o,i)}catch(e){MH.F(e)}},L:function(e,t){try{null==X$||X$.localStorage.removeItem(e),TH.L(e,t)}catch(e){MH.F(e)}}}),BH={},FH={O:function(){return!0},F:function(e){IU.error("memoryStorage error: "+e)},A:function(e){return BH[e]||null},D:function(e){return BH[e]||null},j:function(e,t){BH[e]=t},L:function(e){delete BH[e]}},zH=null,$H={O:function(){if(!NU(zH))return zH;if(zH=!0,EU(X$))zH=!1;else try{var e="__support__";$H.j(e,"xyz"),'"xyz"'!==$H.A(e)&&(zH=!1),$H.L(e)}catch(e){zH=!1}return zH},F:function(e){IU.error("sessionStorage error: ",e)},A:function(e){try{return null==X$?void 0:X$.sessionStorage.getItem(e)}catch(e){$H.F(e)}return null},D:function(e){try{return JSON.parse($H.A(e))||null}catch(e){}return null},j:function(e,t){try{null==X$||X$.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){$H.F(e)}},L:function(e){try{null==X$||X$.sessionStorage.removeItem(e)}catch(e){$H.F(e)}}};!function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"}(PH||(PH={}));class UH{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.N()?PH.DENIED:this.U}isOptedOut(){return this.consent===PH.DENIED||this.consent===PH.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.q.j(this.B,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.q.L(this.B,this.S.cross_subdomain_cookie)}get B(){var{token:e,opt_out_capturing_cookie_prefix:t}=this._instance.config;return(t||"__ph_opt_in_out_")+e}get U(){var e=this.q.A(this.B);return"1"===e?PH.GRANTED:"0"===e?PH.DENIED:PH.PENDING}get q(){if(!this.H){var e=this.S.opt_out_capturing_persistence_type;this.H="localStorage"===e?MH:TH;var t="localStorage"===e?TH:MH;t.A(this.B)&&(this.H.A(this.B)||this.optInOut("1"===t.A(this.B)),t.L(this.B,this.S.cross_subdomain_cookie))}return this.H}N(){return!!this.S.respect_dnt&&!!XU([null==nU?void 0:nU.doNotTrack,null==nU?void 0:nU.msDoNotTrack,cU.doNotTrack],(e=>pU([!0,1,"1","yes"],e)))}}var WH=MU("[Dead Clicks]"),HH=()=>!0,VH=e=>{var t,n=!(null==(t=e.instance.persistence)||!t.get_property(aW)),r=e.instance.config.capture_dead_clicks;return RU(r)?r:n};class qH{get lazyLoadedDeadClicksAutocapture(){return this.W}constructor(e,t,n){this.instance=e,this.isEnabled=t,this.onCapture=n,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[aW]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.G((()=>{this.J()}))}G(e){var t,n;null!=(t=cU.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(n=cU.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this.instance,"dead-clicks-autocapture",(t=>{t?WH.error("failed to load script",t):e()}))}J(){var e;if(rU){if(!this.W&&null!=(e=cU.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=kU(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.W=cU.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.W.start(rU),WH.info("starting...")}}else WH.error("`document` not found. Cannot start.")}stop(){this.W&&(this.W.stop(),this.W=void 0,WH.info("stopping..."))}}var KH=MU("[ExceptionAutocapture]");class ZH{constructor(e){var t;this.V=()=>{var e;if(X$&&this.isEnabled&&null!=(e=cU.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=cU.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,n=cU.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,r=cU.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.K&&this.S.capture_unhandled_errors&&(this.K=t(this.captureException.bind(this))),!this.Y&&this.S.capture_unhandled_rejections&&(this.Y=n(this.captureException.bind(this))),!this.X&&this.S.capture_console_errors&&(this.X=r(this.captureException.bind(this)))}catch(e){KH.error("failed to start",e),this.Z()}}},this._instance=e,this.tt=!(null==(t=this._instance.persistence)||!t.props[oW]),this.S=this.it(),this.startIfEnabled()}it(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return kU(e)?t=BU({},t,e):(EU(e)?this.tt:e)&&(t=BU({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(KH.info("enabled"),this.G(this.V))}G(e){var t,n;null!=(t=cU.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(n=cU.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"exception-autocapture",(t=>{if(t)return KH.error("failed to load script",t);e()}))}Z(){var e,t,n;null==(e=this.K)||e.call(this),this.K=void 0,null==(t=this.Y)||t.call(this),this.Y=void 0,null==(n=this.X)||n.call(this),this.X=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.tt=!!t||!1,this.S=this.it(),this._instance.persistence&&this._instance.persistence.register({[oW]:this.tt}),this.startIfEnabled()}captureException(e){var t=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=t+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id(),this._instance.exceptions.sendExceptionEvent(e)}}function YH(e){return!EU(Event)&&GH(e,Event)}function GH(e,t){try{return e instanceof t}catch(e){return!1}}function XH(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return GH(e,Error)}}function JH(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function QH(e){return JH(e,"DOMError")}var eV=/\(error: (.*)\)/,tV="?";function nV(e,t,n,r){var o={platform:"web:javascript",filename:e,function:"<anonymous>"===t?tV:t,in_app:!0};return EU(n)||(o.lineno=n),EU(r)||(o.colno=r),o}var rV=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,oV=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,iV=/\((\S*)(?::(\d+))(?::(\d+))\)/,aV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,sV=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,lV=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return function(e,t){void 0===t&&(t=0);for(var n=[],o=e.split("\n"),i=t;i<o.length;i++){var a=o[i];if(!(a.length>1024)){var s=eV.test(a)?a.replace(eV,"$1"):a;if(!s.match(/\S*Error: /)){for(var l of r){var c=l(s);if(c){n.push(c);break}}if(n.length>=50)break}}}return function(e){if(!e.length)return[];var t=Array.from(e);return t.reverse(),t.slice(0,50).map((e=>BU({},e,{filename:e.filename||cV(t).filename,function:e.function||tV})))}(n)}}([30,e=>{var t=rV.exec(e);if(t){var[,n,r,o]=t;return nV(n,tV,+r,+o)}var i=oV.exec(e);if(i){if(i[2]&&0===i[2].indexOf("eval")){var a=iV.exec(i[2]);a&&(i[2]=a[1],i[3]=a[2],i[4]=a[3])}var[s,l]=hV(i[1]||tV,i[2]);return nV(l,s,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}}],[50,e=>{var t=aV.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=sV.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],o=t[1]||tV;return[o,r]=hV(o,r),nV(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]);function cV(e){return e[e.length-1]||{}}var uV,dV,fV,hV=(e,t)=>{var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:tV,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},pV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function gV(e,t){void 0===t&&(t=0);var n=e.stacktrace||e.stack||"",r=function(e){return e&&mV.test(e.message)?1:0}(e);try{var o=lV,i=function(e,t){var n=function(e){var t=globalThis._posthogChunkIds;if(!t)return{};var n=Object.keys(t);return fV&&n.length===dV||(dV=n.length,fV=n.reduce(((n,r)=>{uV||(uV={});var o=uV[r];if(o)n[o[0]]=o[1];else for(var i=e(r),a=i.length-1;a>=0;a--){var s=i[a],l=null==s?void 0:s.filename,c=t[r];if(l&&c){n[l]=c,uV[r]=[l,c];break}}return n}),{})),fV}(t);return e.forEach((e=>{e.filename&&(e.chunk_id=n[e.filename])})),e}(o(n,r),o);return i.slice(0,i.length-t)}catch(e){}return[]}var mV=/Minified React error #\d+;/i;function vV(e,t){var n=function(e,t){var n,r,o=gV(e),i=null===(n=null==t?void 0:t.handled)||void 0===n||n,a=null!==(r=null==t?void 0:t.synthetic)&&void 0!==r&&r;return{type:null!=t&&t.overrideExceptionType?t.overrideExceptionType:e.name,value:function(e){var t=e.message;return t.error&&"string"==typeof t.error.message?String(t.error.message):String(t)}(e),stacktrace:{frames:o,type:"raw"},mechanism:{handled:i,synthetic:a}}}(e,t);return e.cause&&XH(e.cause)&&e.cause!==e?[n,...vV(e.cause,{handled:null==t?void 0:t.handled,synthetic:null==t?void 0:t.synthetic})]:[n]}function yV(e,t){return{$exception_list:vV(e,t),$exception_level:"error"}}function bV(e,t){var n,r,o,i=null===(n=null==t?void 0:t.handled)||void 0===n||n,a=null===(r=null==t?void 0:t.synthetic)||void 0===r||r,s={type:null!=t&&t.overrideExceptionType?t.overrideExceptionType:null!==(o=null==t?void 0:t.defaultExceptionType)&&void 0!==o?o:"Error",value:e||(null==t?void 0:t.defaultExceptionMessage),mechanism:{handled:i,synthetic:a}};if(null!=t&&t.syntheticException){var l=gV(t.syntheticException,1);l.length&&(s.stacktrace={frames:l,type:"raw"})}return{$exception_list:[s],$exception_level:"error"}}function wV(e){return jU(e)&&!CU(e)&&hU.indexOf(e)>=0}function xV(e,t){var{error:n,event:r}=e,o={$exception_list:[]},i=n||r;if(QH(i)||function(e){return JH(e,"DOMException")}(i)){var a=i;if(function(e){return"stack"in e}(i))o=yV(i,t);else{var s=a.name||(QH(a)?"DOMError":"DOMException"),l=a.message?s+": "+a.message:s;o=bV(l,BU({},t,{overrideExceptionType:QH(a)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in a&&(o.$exception_DOMException_code=""+a.code),o}if(function(e){return JH(e,"ErrorEvent")}(i)&&i.error)return yV(i.error,t);if(XH(i))return yV(i,t);if(function(e){return JH(e,"Object")}(i)||YH(i))return function(e,t){var n,r,o=null===(n=null==t?void 0:t.handled)||void 0===n||n,i=null===(r=null==t?void 0:t.synthetic)||void 0===r||r,a=null!=t&&t.overrideExceptionType?t.overrideExceptionType:YH(e)?e.constructor.name:"Error",s="Non-Error 'exception' captured with keys: "+function(e,t){void 0===t&&(t=40);var n=Object.keys(e);if(n.sort(),!n.length)return"[object has no keys]";for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>t))return r===n.length||o.length<=t?o:o.slice(0,t)+"..."}return""}(e),l={type:a,value:s,mechanism:{handled:o,synthetic:i}};if(null!=t&&t.syntheticException){var c=gV(null==t?void 0:t.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:wV(e.level)?e.level:"error"}}(i,t);if(EU(n)&&jU(r)){var c="Error",u=r,d=r.match(pV);return d&&(c=d[1],u=d[2]),bV(u,BU({},t,{overrideExceptionType:c,defaultExceptionMessage:u}))}return bV(i,t)}function _V(e,t,n){try{if(!(t in e))return()=>{};var r=e[t],o=n(r);return _U(o)&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}class kV{constructor(e){var t;this._instance=e,this.et=(null==X$||null==(t=X$.location)?void 0:t.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(IU.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.rt&&this.rt(),this.rt=void 0,IU.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(X$&&X$.history){var n=this;null!=(e=X$.history.pushState)&&e.__posthog_wrapped__||_V(X$.history,"pushState",(e=>function(t,r,o){e.call(this,t,r,o),n.st("pushState")})),null!=(t=X$.history.replaceState)&&t.__posthog_wrapped__||_V(X$.history,"replaceState",(e=>function(t,r,o){e.call(this,t,r,o),n.st("replaceState")})),this.nt()}}st(e){try{var t,n=null==X$||null==(t=X$.location)?void 0:t.pathname;if(!n)return;n!==this.et&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.et=n}catch(X$){IU.error("Error capturing "+e+" pageview",X$)}}nt(){if(!this.rt){var e=()=>{this.st("popstate")};JU(X$,"popstate",e),this.rt=()=>{X$&&X$.removeEventListener("popstate",e)}}}}function SV(e){var t,n;return(null==(t=JSON.stringify(e,(n=[],function(e,t){if(kU(t)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(t)?"[Circular]":(n.push(t),t)}return t})))?void 0:t.length)||0}function EV(e,t){if(void 0===t&&(t=6606028.8),e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),o=e.data.slice(n);return[EV({size:SV(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),EV({size:SV(o),data:o,sessionId:e.sessionId,windowId:e.windowId})].flatMap((e=>e))}return[e]}var jV=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(jV||{}),CV=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(CV||{}),NV="[SessionRecording]",AV="redacted",OV={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},RV=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],PV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],TV=["/s/","/e/","/i/"];function IV(e,t,n,r){if(AU(e))return e;var o=(null==t?void 0:t["content-length"])||function(e){return new Blob([e]).size}(e);return jU(o)&&(o=parseInt(o)),o>n?NV+" "+r+" body too large to record ("+o+" bytes)":e}function MV(e,t){if(AU(e))return e;var n=e;return iH(n,!1)||(n=NV+" "+t+" body "+AV),UU(PV,(e=>{var r,o;null!=(r=n)&&r.length&&-1!==(null==(o=n)?void 0:o.indexOf(e))&&(n=NV+" "+t+" body "+AV+" as might contain: "+e)})),n}function DV(e,t,n,r,o){return t>n&&(IU.warn("min cannot be greater than max."),t=n),OU(e)?e>n?(r&&IU.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r&&IU.warn(r+" cannot be less than min: "+t+". Using min value instead."),t):e:(r&&IU.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+o),DV(o||n,t,n,r))}class LV{constructor(e,t){var n,r;void 0===t&&(t={}),this.ot=100,this.lt=10,this.ut={},this.ht={},this.dt=()=>{Object.keys(this.ut).forEach((e=>{this.ut[e]=this.ut[e]+this.lt,this.ut[e]>=this.ot&&delete this.ut[e]}))},this.vt=e=>{var t=this._rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[this._rrweb.mirror.getId(n),n]}return[e,t]},this.ct=e=>{var t,n,r,o,i,a,s,l;return(null!==(t=null==(n=e.removes)?void 0:n.length)&&void 0!==t?t:0)+(null!==(r=null==(o=e.attributes)?void 0:o.length)&&void 0!==r?r:0)+(null!==(i=null==(a=e.texts)?void 0:a.length)&&void 0!==i?i:0)+(null!==(s=null==(l=e.adds)?void 0:l.length)&&void 0!==s?s:0)},this.throttleMutations=e=>{if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=this.ct(t);t.attributes&&(t.attributes=t.attributes.filter((e=>{var t,n,r,[o,i]=this.vt(e.id);return 0!==this.ut[o]&&(this.ut[o]=null!==(t=this.ut[o])&&void 0!==t?t:this.ot,this.ut[o]=Math.max(this.ut[o]-1,0),0===this.ut[o]&&(this.ht[o]||(this.ht[o]=!0,null==(n=(r=this.ft).onBlockedNode)||n.call(r,o,i))),e)})));var r=this.ct(t);return 0!==r||n===r?e:void 0},this._rrweb=e,this.ft=t,this.lt=DV(null!==(n=this.ft.refillRate)&&void 0!==n?n:this.lt,0,100,"mutation throttling refill rate"),this.ot=DV(null!==(r=this.ft.bucketSize)&&void 0!==r?r:this.ot,0,100,"mutation throttling bucket size"),setInterval((()=>{this.dt()}),1e3)}}var BV=Uint8Array,FV=Uint16Array,zV=Uint32Array,$V=new BV([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),UV=new BV([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),WV=new BV([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HV=function(e,t){for(var n=new FV(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new zV(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return[n,o]},VV=HV($V,2),qV=VV[0],KV=VV[1];qV[28]=258,KV[258]=28;for(var ZV=HV(UV,0)[1],YV=new FV(32768),GV=0;GV<32768;++GV){var XV=(43690&GV)>>>1|(21845&GV)<<1;XV=(61680&(XV=(52428&XV)>>>2|(13107&XV)<<2))>>>4|(3855&XV)<<4,YV[GV]=((65280&XV)>>>8|(255&XV)<<8)>>>1}var JV=function(e,t,n){for(var r=e.length,o=0,i=new FV(t);o<r;++o)++i[e[o]-1];var a,s=new FV(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;for(a=new FV(r),o=0;o<r;++o)a[o]=YV[s[e[o]-1]++]>>>15-e[o];return a},QV=new BV(288);for(GV=0;GV<144;++GV)QV[GV]=8;for(GV=144;GV<256;++GV)QV[GV]=9;for(GV=256;GV<280;++GV)QV[GV]=7;for(GV=280;GV<288;++GV)QV[GV]=8;var eq=new BV(32);for(GV=0;GV<32;++GV)eq[GV]=5;var tq=JV(QV,9),nq=JV(eq,5),rq=function(e){return(e/8|0)+(7&e&&1)},oq=function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof FV?FV:e instanceof zV?zV:BV)(n-t);return r.set(e.subarray(t,n)),r},iq=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},aq=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},sq=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,i=n.slice();if(!o)return[new BV(0),0];if(1==o){var a=new BV(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=o-1;)s=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};var f=i[0].s;for(r=1;r<o;++r)i[r].s>f&&(f=i[r].s);var h=new FV(f+1),p=lq(n[u-1],h,0);if(p>t){r=0;var g=0,m=p-t,v=1<<m;for(i.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));r<o;++r){var y=i[r].s;if(!(h[y]>t))break;g+=v-(1<<p-h[y]),h[y]=t}for(g>>>=m;g>0;){var b=i[r].s;h[b]<t?g-=1<<t-h[b]++-1:++r}for(;r>=0&&g;--r){var w=i[r].s;h[w]==t&&(--h[w],++g)}p=t}return[new BV(h),p]},lq=function(e,t,n){return-1==e.s?Math.max(lq(e.l,t,n+1),lq(e.r,t,n+1)):t[e.s]=n},cq=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new FV(++t),r=0,o=e[0],i=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=e[s]}return[n.subarray(0,r),t]},uq=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},dq=function(e,t,n){var r=n.length,o=rq(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<r;++i)e[o+i+4]=n[i];return 8*(o+4+r)},fq=function(e,t,n,r,o,i,a,s,l,c,u){iq(t,u++,n),++o[256];for(var d=sq(o,15),f=d[0],h=d[1],p=sq(i,15),g=p[0],m=p[1],v=cq(f),y=v[0],b=v[1],w=cq(g),x=w[0],_=w[1],k=new FV(19),S=0;S<y.length;++S)k[31&y[S]]++;for(S=0;S<x.length;++S)k[31&x[S]]++;for(var E=sq(k,7),j=E[0],C=E[1],N=19;N>4&&!j[WV[N-1]];--N);var A,O,R,P,T=c+5<<3,I=uq(o,QV)+uq(i,eq)+a,M=uq(o,f)+uq(i,g)+a+14+3*N+uq(k,j)+(2*k[16]+3*k[17]+7*k[18]);if(T<=I&&T<=M)return dq(t,u,e.subarray(l,l+c));if(iq(t,u,1+(M<I)),u+=2,M<I){A=JV(f,h),O=f,R=JV(g,m),P=g;var D=JV(j,C);for(iq(t,u,b-257),iq(t,u+5,_-1),iq(t,u+10,N-4),u+=14,S=0;S<N;++S)iq(t,u+3*S,j[WV[S]]);u+=3*N;for(var L=[y,x],B=0;B<2;++B){var F=L[B];for(S=0;S<F.length;++S){var z=31&F[S];iq(t,u,D[z]),u+=j[z],z>15&&(iq(t,u,F[S]>>>5&127),u+=F[S]>>>12)}}}else A=tq,O=QV,R=nq,P=eq;for(S=0;S<s;++S)if(r[S]>255){z=r[S]>>>18&31,aq(t,u,A[z+257]),u+=O[z+257],z>7&&(iq(t,u,r[S]>>>23&31),u+=$V[z]);var $=31&r[S];aq(t,u,R[$]),u+=P[$],$>3&&(aq(t,u,r[S]>>>5&8191),u+=UV[$])}else aq(t,u,A[r[S]]),u+=O[r[S]];return aq(t,u,A[256]),u+O[256]},hq=new zV([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pq=function(){for(var e=new zV(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),gq=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function mq(e,t){void 0===t&&(t={});var n=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=pq[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}}(),r=e.length;n.p(e);var o=function(e,t,n,r){return function(e,t,n,r,o){var i=e.length,a=new BV(r+i+5*(1+Math.floor(i/7e3))+o),s=a.subarray(r,a.length-o),l=0;if(!t||i<8)for(var c=0;c<=i;c+=65535){var u=c+65535;u<i?l=dq(s,l,e.subarray(c,u)):(s[c]=!0,l=dq(s,l,e.subarray(c,i)))}else{for(var d=hq[t-1],f=d>>>13,h=8191&d,p=(1<<n)-1,g=new FV(32768),m=new FV(p+1),v=Math.ceil(n/3),y=2*v,b=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<y)&p},w=new zV(25e3),x=new FV(288),_=new FV(32),k=0,S=0,E=(c=0,0),j=0,C=0;c<i;++c){var N=b(c),A=32767&c,O=m[N];if(g[A]=O,m[N]=A,j<=c){var R=i-c;if((k>7e3||E>24576)&&R>423){l=fq(e,s,0,w,x,_,S,E,C,c-C,l),E=k=S=0,C=c;for(var P=0;P<286;++P)x[P]=0;for(P=0;P<30;++P)_[P]=0}var T=2,I=0,M=h,D=A-O&32767;if(R>2&&N==b(c-D))for(var L=Math.min(f,R)-1,B=Math.min(32767,c),F=Math.min(258,R);D<=B&&--M&&A!=O;){if(e[c+T]==e[c+T-D]){for(var z=0;z<F&&e[c+z]==e[c+z-D];++z);if(z>T){if(T=z,I=D,z>L)break;var $=Math.min(D,z-2),U=0;for(P=0;P<$;++P){var W=c-D+P+32768&32767,H=W-g[W]+32768&32767;H>U&&(U=H,O=W)}}}D+=(A=O)-(O=g[A])+32768&32767}if(I){w[E++]=268435456|KV[T]<<18|ZV[I];var V=31&KV[T],q=31&ZV[I];S+=$V[V]+UV[q],++x[257+V],++_[q],j=c+T,++k}else w[E++]=e[c],++x[e[c]]}}l=fq(e,s,!0,w,x,_,S,E,C,c-C,l)}return oq(a,0,r+rq(l)+o)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r)}(e,t,function(e){return 10+(e.filename&&e.filename.length+1||0)}(t),8),i=o.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&gq(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(o,t),gq(o,i-8,n.d()),gq(o,i-4,r),o}function vq(e,t){var n=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new BV(e.length+(e.length>>>1)),o=0,i=function(e){r[o++]=e},a=0;a<n;++a){if(o+5>r.length){var s=new BV(o+8+(n-a<<1));s.set(r),r=s}var l=e.charCodeAt(a);l<128||t?i(l):l<2048?(i(192|l>>>6),i(128|63&l)):l>55295&&l<57344?(i(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++a))>>>18),i(128|l>>>12&63),i(128|l>>>6&63),i(128|63&l)):(i(224|l>>>12),i(128|l>>>6&63),i(128|63&l))}return oq(r,0,o)}var yq="disabled",bq="sampled",wq="active",xq="buffering",_q="paused",kq="trigger",Sq=kq+"_activated",Eq=kq+"_pending",jq=kq+"_"+yq;function Cq(e,t){return t.some((t=>"regex"===t.matching&&new RegExp(t.url).test(e)))}class Nq{constructor(e){this.gt=e}triggerStatus(e){var t=this.gt.map((t=>t.triggerStatus(e)));return t.includes(Sq)?Sq:t.includes(Eq)?Eq:jq}stop(){this.gt.forEach((e=>e.stop()))}}class Aq{constructor(e){this.gt=e}triggerStatus(e){var t=new Set;for(var n of this.gt)t.add(n.triggerStatus(e));switch(t.delete(jq),t.size){case 0:return jq;case 1:return Array.from(t)[0];default:return Eq}}stop(){this.gt.forEach((e=>e.stop()))}}class Oq{triggerStatus(){return Eq}stop(){}}class Rq{constructor(e){this._t=[],this.bt=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var t,n;this._t=(null==(t=e.sessionRecording)?void 0:t.urlTriggers)||[],this.bt=(null==(n=e.sessionRecording)?void 0:n.urlBlocklist)||[]}wt(e){var t;return 0===this._t.length?jq:(null==(t=this._instance)?void 0:t.get_property(yW))===e?Sq:Eq}triggerStatus(e){var t=this.wt(e),n=t===Sq?Sq:t===Eq?Eq:jq;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:n}),n}checkUrlTriggerConditions(e,t,n){if(void 0!==X$&&X$.location.href){var r=X$.location.href,o=this.urlBlocked,i=Cq(r,this.bt);o&&i||(i&&!o?e():!i&&o&&t(),Cq(r,this._t)&&n("url"))}}stop(){}}class Pq{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.yt=()=>{},this._instance=e}triggerStatus(){var e=Eq;return AU(this.linkedFlag)&&(e=jq),this.linkedFlagSeen&&(e=Sq),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,t){var n;if(this.linkedFlag=(null==(n=e.sessionRecording)?void 0:n.linkedFlag)||null,!AU(this.linkedFlag)&&!this.linkedFlagSeen){var r=jU(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,o=jU(this.linkedFlag)?null:this.linkedFlag.variant;this.yt=this._instance.onFeatureFlags(((e,n)=>{var i=kU(n)&&r in n&&(o?n[r]===o:!0===n[r]);i&&t(r,o),this.linkedFlagSeen=i}))}}stop(){this.yt()}}class Tq{constructor(e){this.St=[],this._instance=e}onRemoteConfig(e){var t;this.St=(null==(t=e.sessionRecording)?void 0:t.eventTriggers)||[]}$t(e){var t;return 0===this.St.length?jq:(null==(t=this._instance)?void 0:t.get_property(bW))===e?Sq:Eq}triggerStatus(e){var t=this.$t(e),n=t===Sq?Sq:t===Eq?Eq:jq;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:n}),n}stop(){}}function Iq(e){return e.isRecordingEnabled?xq:yq}function Mq(e){if(!e.receivedDecide)return xq;if(!e.isRecordingEnabled)return yq;if(e.urlTriggerMatching.urlBlocked)return _q;var t=!0===e.isSampled,n=new Nq([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?bq:n===Sq?wq:n===Eq?xq:!1===e.isSampled?yq:wq}function Dq(e){if(!e.receivedDecide)return xq;if(!e.isRecordingEnabled)return yq;if(e.urlTriggerMatching.urlBlocked)return _q;var t=new Aq([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),n=t!==jq,r=RU(e.isSampled);return n&&t===Eq?xq:n&&t===jq||r&&!e.isSampled?yq:!0===e.isSampled?bq:wq}var Lq="[SessionRecording]",Bq=MU(Lq);function Fq(){var e,t;return null==cU||null==(e=cU.__PosthogExtensions__)||null==(t=e.rrweb)?void 0:t.record}var zq=[CV.MouseMove,CV.MouseInteraction,CV.Scroll,CV.ViewportResize,CV.Input,CV.TouchMove,CV.MediaInteraction,CV.Drag],$q=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function Uq(e){return function(e){for(var t="",n=0;n<e.length;){var r=e[n++];t+=String.fromCharCode(r)}return t}(mq(vq(JSON.stringify(e))))}function Wq(e){return e.type===jV.Custom&&"sessionIdle"===e.data.tag}class Hq{get sessionId(){return this.kt}get xt(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Et}get It(){if(!this._instance.sessionManager)throw new Error(Lq+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Pt(){var e,t;return this.Rt.triggerStatus(this.sessionId)===Eq?6e4:null!==(e=null==(t=this._instance.config.session_recording)?void 0:t.full_snapshot_interval_millis)&&void 0!==e?e:3e5}get Tt(){var e=this._instance.get_property(vW);return RU(e)?e:null}get Mt(){var e,t,n=null==(e=this.M)?void 0:e.data[(null==(t=this.M)?void 0:t.data.length)-1],{sessionStartTimestamp:r}=this.It.checkAndGetSessionAndWindowId(!0);return n?n.timestamp-r:null}get Ct(){var e=!!this._instance.get_property(lW),t=!this._instance.config.disable_session_recording;return X$&&e&&t}get Ot(){var e=!!this._instance.get_property(cW),t=this._instance.config.enable_recording_console_log;return null!=t?t:e}get Ft(){var e,t,n,r,o,i,a=this._instance.config.session_recording.captureCanvas,s=this._instance.get_property(fW),l=null!==(e=null!==(t=null==a?void 0:a.recordCanvas)&&void 0!==t?t:null==s?void 0:s.enabled)&&void 0!==e&&e,c=null!==(n=null!==(r=null==a?void 0:a.canvasFps)&&void 0!==r?r:null==s?void 0:s.fps)&&void 0!==n?n:4,u=null!==(o=null!==(i=null==a?void 0:a.canvasQuality)&&void 0!==i?i:null==s?void 0:s.quality)&&void 0!==o?o:.4;if("string"==typeof u){var d=parseFloat(u);u=isNaN(d)?.4:d}return{enabled:l,fps:DV(c,0,12,"canvas recording fps",4),quality:DV(u,0,1,"canvas recording quality",.4)}}get At(){var e,t,n=this._instance.get_property(uW),r={recordHeaders:null==(e=this._instance.config.session_recording)?void 0:e.recordHeaders,recordBody:null==(t=this._instance.config.session_recording)?void 0:t.recordBody},o=(null==r?void 0:r.recordHeaders)||(null==n?void 0:n.recordHeaders),i=(null==r?void 0:r.recordBody)||(null==n?void 0:n.recordBody),a=kU(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,s=!!(RU(a)?a:null==n?void 0:n.capturePerformance);return o||i||s?{recordHeaders:o,recordBody:i,recordPerformance:s}:void 0}get Dt(){var e,t,n,r,o,i,a=this._instance.get_property(dW),s={maskAllInputs:null==(e=this._instance.config.session_recording)?void 0:e.maskAllInputs,maskTextSelector:null==(t=this._instance.config.session_recording)?void 0:t.maskTextSelector,blockSelector:null==(n=this._instance.config.session_recording)?void 0:n.blockSelector},l=null!==(r=null==s?void 0:s.maskAllInputs)&&void 0!==r?r:null==a?void 0:a.maskAllInputs,c=null!==(o=null==s?void 0:s.maskTextSelector)&&void 0!==o?o:null==a?void 0:a.maskTextSelector,u=null!==(i=null==s?void 0:s.blockSelector)&&void 0!==i?i:null==a?void 0:a.blockSelector;return EU(l)&&EU(c)&&EU(u)?void 0:{maskAllInputs:null==l||l,maskTextSelector:c,blockSelector:u}}get jt(){var e=this._instance.get_property(hW);return OU(e)?e:null}get Lt(){var e=this._instance.get_property(pW);return OU(e)?e:null}get status(){return this.Nt?this.zt({receivedDecide:this.Nt,isRecordingEnabled:this.Ct,isSampled:this.Tt,urlTriggerMatching:this.Ut,eventTriggerMatching:this.qt,linkedFlagMatching:this.Bt,sessionId:this.sessionId}):xq}constructor(e){if(this.zt=Iq,this.Nt=!1,this.Ht=[],this.Wt="unknown",this.Gt=Date.now(),this.Rt=new Oq,this.Jt=void 0,this.Vt=void 0,this.Kt=void 0,this.Yt=void 0,this.Xt=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.Qt=()=>{this.Zt()},this.ti=()=>{this.ii("browser offline",{})},this.ei=()=>{this.ii("browser online",{})},this.ri=()=>{if(null!=rU&&rU.visibilityState){var e="window "+rU.visibilityState;this.ii(e,{})}},this._instance=e,this.Et=!1,this.si="/s/",this.ni=void 0,this.Nt=!1,!this._instance.sessionManager)throw Bq.error("started without valid sessionManager"),new Error(Lq+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Lq+" cannot be used with __preview_experimental_cookieless_mode.");this.Bt=new Pq(this._instance),this.Ut=new Rq(this._instance),this.qt=new Tq(this._instance);var{sessionId:t,windowId:n}=this.It.checkAndGetSessionAndWindowId();this.kt=t,this.oi=n,this.M=this.ai(),this.xt>=this.It.sessionTimeoutMs&&Bq.warn("session_idle_threshold_ms ("+this.xt+") is greater than the session timeout ("+this.It.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.Ct?(this.li(e),JU(X$,"beforeunload",this.Qt),JU(X$,"offline",this.ti),JU(X$,"online",this.ei),JU(X$,"visibilitychange",this.ri),this.ui(),this.hi(),AU(this.Jt)&&(this.Jt=this._instance.on("eventCaptured",(e=>{try{if("$pageview"===e.event){var t=null!=e&&e.properties.$current_url?this.di(null==e?void 0:e.properties.$current_url):"";if(!t)return;this.ii("$pageview",{href:t})}}catch(e){Bq.error("Could not add $pageview to rrweb session",e)}}))),this.Vt||(this.Vt=this.It.onSessionId(((e,t,n)=>{var r,o,i,a;n&&(this.ii("$session_id_change",{sessionId:e,windowId:t,changeReason:n}),null==(r=this._instance)||null==(o=r.persistence)||o.unregister(bW),null==(i=this._instance)||null==(a=i.persistence)||a.unregister(yW))})))):this.stopRecording()}stopRecording(){var e,t,n,r;this.Et&&this.ni&&(this.ni(),this.ni=void 0,this.Et=!1,null==X$||X$.removeEventListener("beforeunload",this.Qt),null==X$||X$.removeEventListener("offline",this.ti),null==X$||X$.removeEventListener("online",this.ei),null==X$||X$.removeEventListener("visibilitychange",this.ri),this.ai(),clearInterval(this.vi),null==(e=this.Jt)||e.call(this),this.Jt=void 0,null==(t=this.Xt)||t.call(this),this.Xt=void 0,null==(n=this.Vt)||n.call(this),this.Vt=void 0,null==(r=this.Yt)||r.call(this),this.Yt=void 0,this.qt.stop(),this.Ut.stop(),this.Bt.stop(),Bq.info("stopped"))}ci(){var e;null==(e=this._instance.persistence)||e.unregister(vW)}fi(e){var t,n=this.kt!==e,r=this.jt;if(OU(r)){var o=this.Tt,i=n||!RU(o),a=i?function(e,t){return function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}(e)%100<DV(100*t,0,100)}(e,r):o;i&&(a?this.pi(bq):Bq.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ii("samplingDecisionMade",{sampleRate:r,isSampled:a})),null==(t=this._instance.persistence)||t.register({[vW]:a})}else this.ci()}onRemoteConfig(e){var t,n,r,o;this.ii("$remote_config_received",e),this.gi(e),null!=(t=e.sessionRecording)&&t.endpoint&&(this.si=null==(o=e.sessionRecording)?void 0:o.endpoint),this.ui(),"any"===(null==(n=e.sessionRecording)?void 0:n.triggerMatchType)?(this.zt=Mq,this.Rt=new Nq([this.qt,this.Ut])):(this.zt=Dq,this.Rt=new Aq([this.qt,this.Ut])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:null==(r=e.sessionRecording)?void 0:r.triggerMatchType}),this.Ut.onRemoteConfig(e),this.qt.onRemoteConfig(e),this.Bt.onRemoteConfig(e,((e,t)=>{this.pi("linked_flag_matched",{flag:e,variant:t})})),this.Nt=!0,this.startIfEnabledOrStop()}ui(){OU(this.jt)&&AU(this.Yt)&&(this.Yt=this.It.onSessionId((e=>{this.fi(e)})))}gi(e){if(this._instance.persistence){var t,n=this._instance.persistence,r=()=>{var t,r,o,i,a,s,l,c,u,d=null==(t=e.sessionRecording)?void 0:t.sampleRate,f=AU(d)?null:parseFloat(d);AU(f)&&this.ci();var h=null==(r=e.sessionRecording)?void 0:r.minimumDurationMilliseconds;n.register({[lW]:!!e.sessionRecording,[cW]:null==(o=e.sessionRecording)?void 0:o.consoleLogRecordingEnabled,[uW]:BU({capturePerformance:e.capturePerformance},null==(i=e.sessionRecording)?void 0:i.networkPayloadCapture),[dW]:null==(a=e.sessionRecording)?void 0:a.masking,[fW]:{enabled:null==(s=e.sessionRecording)?void 0:s.recordCanvas,fps:null==(l=e.sessionRecording)?void 0:l.canvasFps,quality:null==(c=e.sessionRecording)?void 0:c.canvasQuality},[hW]:f,[pW]:EU(h)?null:h,[gW]:null==(u=e.sessionRecording)?void 0:u.scriptConfig})};r(),null==(t=this.Kt)||t.call(this),this.Kt=this.It.onSessionId(r)}}log(e,t){var n;void 0===t&&(t="log"),null==(n=this._instance.sessionRecording)||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:t,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}li(e){var t;EU(Object.assign)||EU(Array.from)||(this.Et||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())||(this.Et=!0,this.It.checkAndGetSessionAndWindowId(),Fq()?this.mi():null==(t=cU.__PosthogExtensions__)||null==t.loadExternalDependency||t.loadExternalDependency(this._instance,this.bi,(e=>{if(e)return Bq.error("could not load recorder",e);this.mi()})),Bq.info("starting"),this.status===wq&&this.pi(e||"recording_initialized"))}get bi(){var e,t,n;return(null==(e=this._instance)||null==(t=e.persistence)||null==(n=t.get_property(gW))?void 0:n.script)||"recorder"}wi(e){var t;return 3===e.type&&-1!==zq.indexOf(null==(t=e.data)?void 0:t.source)}yi(e){var t=this.wi(e);t||this.Wt||e.timestamp-this.Gt>this.xt&&(this.Wt=!0,clearInterval(this.vi),this.ii("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.Gt,threshold:this.xt,bufferLength:this.M.data.length,bufferSize:this.M.size}),this.Zt());var n=!1;if(t&&(this.Gt=e.timestamp,this.Wt)){var r="unknown"===this.Wt;this.Wt=!1,r||(this.ii("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)}if(!this.Wt){var{windowId:o,sessionId:i}=this.It.checkAndGetSessionAndWindowId(!t,e.timestamp),a=this.kt!==i,s=this.oi!==o;this.oi=o,this.kt=i,a||s?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):n&&this.Si()}}$i(e){try{return e.rrwebMethod(),!0}catch(X$){return this.Ht.length<10?this.Ht.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Bq.warn("could not emit queued rrweb event.",X$,e),!1}}ii(e,t){return this.$i($q((()=>Fq().addCustomEvent(e,t))))}ki(){return this.$i($q((()=>Fq().takeFullSnapshot())))}mi(){var e,t,n,r,o={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this._instance.config.session_recording;for(var[a,s]of Object.entries(i||{}))a in o&&("maskInputOptions"===a?o.maskInputOptions=BU({password:!0},s):o[a]=s);this.Ft&&this.Ft.enabled&&(o.recordCanvas=!0,o.sampling={canvas:this.Ft.fps},o.dataURLOptions={type:"image/webp",quality:this.Ft.quality}),this.Dt&&(o.maskAllInputs=null===(t=this.Dt.maskAllInputs)||void 0===t||t,o.maskTextSelector=null!==(n=this.Dt.maskTextSelector)&&void 0!==n?n:void 0,o.blockSelector=null!==(r=this.Dt.blockSelector)&&void 0!==r?r:void 0);var l=Fq();if(l){this.xi=null!==(e=this.xi)&&void 0!==e?e:new LV(l,{refillRate:this._instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this._instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(e,t)=>{var n="Too many mutations on node '"+e+"'. Rate limiting. This could be due to SVG animations or something similar";Bq.info(n,{node:t}),this.log(Lq+" "+n,"warn")}});var c=this.Ei();this.ni=l(BU({emit:e=>{this.onRRwebEmit(e)},plugins:c},o)),this.Gt=Date.now(),this.Wt=RU(this.Wt)?this.Wt:"unknown",this.ii("$session_options",{sessionRecordingOptions:o,activePlugins:c.map((e=>null==e?void 0:e.name))}),this.ii("$posthog_config",{config:this._instance.config})}else Bq.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Si(){if(this.vi&&clearInterval(this.vi),!0!==this.Wt){var e=this.Pt;e&&(this.vi=setInterval((()=>{this.ki()}),e))}}Ei(){var e,t,n,r,o=[],i=null==(e=cU.__PosthogExtensions__)||null==(t=e.rrwebPlugins)?void 0:t.getRecordConsolePlugin;i&&this.Ot&&o.push(i());var a=null==(n=cU.__PosthogExtensions__)||null==(r=n.rrwebPlugins)?void 0:r.getRecordNetworkPlugin;return this.At&&_U(a)&&(!fH.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?o.push(a(((e,t)=>{var n,r,o,i={payloadSizeLimitBytes:OV.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...OV.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...OV.payloadHostDenyList]},a=!1!==e.session_recording.recordHeaders&&t.recordHeaders,s=!1!==e.session_recording.recordBody&&t.recordBody,l=!1!==e.capture_performance&&t.recordPerformance,c=(n=i,o=Math.min(1e6,null!==(r=n.payloadSizeLimitBytes)&&void 0!==r?r:1e6),e=>(null!=e&&e.requestBody&&(e.requestBody=IV(e.requestBody,e.requestHeaders,o,"Request")),null!=e&&e.responseBody&&(e.responseBody=IV(e.responseBody,e.responseHeaders,o,"Response")),e)),u=t=>{return c(((e,t)=>{var n,r=hH(e.name),o=0===t.indexOf("http")?null==(n=hH(t))?void 0:n.pathname:t;"/"===o&&(o="");var i=null==r?void 0:r.pathname.replace(o||"","");if(!(r&&i&&TV.some((e=>0===i.indexOf(e)))))return e})((r=(n=t).requestHeaders,AU(r)||UU(Object.keys(null!=r?r:{}),(e=>{RV.includes(e.toLowerCase())&&(r[e]=AV)})),n),e.api_host));var n,r},d=_U(e.session_recording.maskNetworkRequestFn);return d&&_U(e.session_recording.maskCapturedNetworkRequestFn)&&IU.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=t=>{var n=e.session_recording.maskNetworkRequestFn({url:t.name});return BU({},t,{name:null==n?void 0:n.url})}),i.maskRequestFn=_U(e.session_recording.maskCapturedNetworkRequestFn)?t=>{var n,r=u(t);return r&&null!==(n=null==e.session_recording.maskCapturedNetworkRequestFn?void 0:e.session_recording.maskCapturedNetworkRequestFn(r))&&void 0!==n?n:void 0}:e=>function(e){if(!EU(e))return e.requestBody=MV(e.requestBody,"Request"),e.responseBody=MV(e.responseBody,"Response"),e}(u(e)),BU({},OV,i,{recordHeaders:a,recordBody:s,recordPerformance:l,recordInitialRequests:l})})(this._instance.config,this.At))):Bq.info("NetworkCapture not started because we are on localhost.")),o}onRRwebEmit(e){var t;if(this.Ii(),e&&kU(e)){if(e.type===jV.Meta){var n=this.di(e.data.href);if(this.Pi=n,!n)return;e.data.href=n}else this.Ri();if(this.Ut.checkUrlTriggerConditions((()=>this.Ti()),(()=>this.Mi()),(e=>this.Ci(e))),!this.Ut.urlBlocked||(r=e).type===jV.Custom&&"recording paused"===r.data.tag){var r;e.type===jV.FullSnapshot&&this.Si(),e.type===jV.FullSnapshot&&this.Nt&&this.Rt.triggerStatus(this.sessionId)===Eq&&this.ai();var o=this.xi?this.xi.throttleMutations(e):e;if(o){var i=function(e){var t=e;if(t&&kU(t)&&6===t.type&&kU(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var n=[],r=0;r<t.data.payload.payload.length;r++)t.data.payload.payload[r]&&t.data.payload.payload[r].length>2e3?n.push(t.data.payload.payload[r].slice(0,2e3)+"...[truncated]"):n.push(t.data.payload.payload[r]);return t.data.payload.payload=n,e}return e}(o);if(this.yi(i),!0!==this.Wt||Wq(i)){if(Wq(i)){var a=i.data.payload;if(a){var s=a.lastActivityTimestamp,l=a.threshold;i.timestamp=s+l}}var c=null===(t=this._instance.config.session_recording.compress_events)||void 0===t||t?function(e){if(SV(e)<1024)return e;try{if(e.type===jV.FullSnapshot)return BU({},e,{data:Uq(e.data),cv:"2024-10"});if(e.type===jV.IncrementalSnapshot&&e.data.source===CV.Mutation)return BU({},e,{cv:"2024-10",data:BU({},e.data,{texts:Uq(e.data.texts),attributes:Uq(e.data.attributes),removes:Uq(e.data.removes),adds:Uq(e.data.adds)})});if(e.type===jV.IncrementalSnapshot&&e.data.source===CV.StyleSheetRule)return BU({},e,{cv:"2024-10",data:BU({},e.data,{adds:e.data.adds?Uq(e.data.adds):void 0,removes:e.data.removes?Uq(e.data.removes):void 0})})}catch(e){Bq.error("could not compress event - will use uncompressed event",e)}return e}(i):i,u={$snapshot_bytes:SV(c),$snapshot_data:c,$session_id:this.kt,$window_id:this.oi};this.status!==yq?this.Oi(u):this.ai()}}}}}Ri(){if(!this._instance.config.capture_pageview&&X$){var e=this.di(X$.location.href);this.Pi!==e&&(this.ii("$url_changed",{href:e}),this.Pi=e)}}Ii(){if(this.Ht.length){var e=[...this.Ht];this.Ht=[],e.forEach((e=>{Date.now()-e.enqueuedAt<=2e3&&this.$i(e)}))}}di(e){var t=this._instance.config.session_recording;if(t.maskNetworkRequestFn){var n,r={url:e};return null==(n=r=t.maskNetworkRequestFn(r))?void 0:n.url}return e}ai(){return this.M={size:0,data:[],sessionId:this.kt,windowId:this.oi},this.M}Zt(){this.Fi&&(clearTimeout(this.Fi),this.Fi=void 0);var e=this.Lt,t=this.Mt,n=OU(t)&&t>=0,r=OU(e)&&n&&t<e;return this.status===xq||this.status===_q||this.status===yq||r?(this.Fi=setTimeout((()=>{this.Zt()}),2e3),this.M):(this.M.data.length>0&&EV(this.M).forEach((e=>{this.Ai({$snapshot_bytes:e.size,$snapshot_data:e.data,$session_id:e.sessionId,$window_id:e.windowId,$lib:"web",$lib_version:uU.LIB_VERSION})})),this.ai())}Oi(e){var t,n=2+((null==(t=this.M)?void 0:t.data.length)||0);!this.Wt&&(this.M.size+e.$snapshot_bytes+n>943718.4||this.M.sessionId!==this.kt)&&(this.M=this.Zt()),this.M.size+=e.$snapshot_bytes,this.M.data.push(e.$snapshot_data),this.Fi||this.Wt||(this.Fi=setTimeout((()=>{this.Zt()}),2e3))}Ai(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.si),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}Ci(e){var t,n;this.Rt.triggerStatus(this.sessionId)===Eq&&(null==(t=this._instance)||null==(n=t.persistence)||n.register({["url"===e?yW:bW]:this.kt}),this.Zt(),this.pi(e+"_trigger_matched"))}Ti(){this.Ut.urlBlocked||(this.Ut.urlBlocked=!0,clearInterval(this.vi),Bq.info("recording paused due to URL blocker"),this.ii("recording paused",{reason:"url blocker"}))}Mi(){this.Ut.urlBlocked&&(this.Ut.urlBlocked=!1,this.ki(),this.Si(),this.ii("recording resumed",{reason:"left blocked url"}),Bq.info("recording resumed"))}hi(){0!==this.qt.St.length&&AU(this.Xt)&&(this.Xt=this._instance.on("eventCaptured",(e=>{try{this.qt.St.includes(e.event)&&this.Ci("event")}catch(e){Bq.error("Could not activate event trigger",e)}})))}overrideLinkedFlag(){this.Bt.linkedFlagSeen=!0,this.ki(),this.pi("linked_flag_overridden")}overrideSampling(){var e;null==(e=this._instance.persistence)||e.register({[vW]:!0}),this.ki(),this.pi("sampling_overridden")}overrideTrigger(e){this.Ci(e)}pi(e,t){this._instance.register_for_session({$session_recording_start_reason:e}),Bq.info(e.replace("_"," "),t),pU(["recording_initialized","session_id_changed"],e)||this.ii(e,t)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.It.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.M.data.length,$sdk_debug_replay_internal_buffer_size:this.M.size,$sdk_debug_current_session_duration:this.Mt,$sdk_debug_session_start:e}}}var Vq=MU("[SegmentIntegration]");var qq="posthog-js";function Kq(e,t){var{organization:n,projectId:r,prefix:o,severityAllowList:i=["error"]}=void 0===t?{}:t;return t=>{var a,s,l,c,u;if("*"!==i&&!i.includes(t.level)||!e.__loaded)return t;t.tags||(t.tags={});var d=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=d,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var f=(null==(a=t.exception)?void 0:a.values)||[],h=f.map((e=>BU({},e,{stacktrace:e.stacktrace?BU({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map((e=>BU({},e,{platform:"web:javascript"})))}):void 0}))),p={$exception_message:(null==(s=f[0])?void 0:s.value)||t.message,$exception_type:null==(l=f[0])?void 0:l.type,$exception_personURL:d,$exception_level:t.level,$exception_list:h,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(c=f[0])?void 0:c.value)||t.message,$sentry_exception_type:null==(u=f[0])?void 0:u.type,$sentry_tags:t.tags};return n&&r&&(p.$sentry_url=(o||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+t.event_id),e.exceptions.sendExceptionEvent(p),t}}class Zq{constructor(e,t,n,r,o){this.name=qq,this.setupOnce=function(i){i(Kq(e,{organization:t,projectId:n,prefix:r,severityAllowList:o}))}}}var Yq,Gq=null!=X$&&X$.location?mH(X$.location.hash,"__posthog")||mH(location.hash,"state"):null,Xq="_postHogToolbarParams",Jq=MU("[Toolbar]");!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(Yq||(Yq={}));class Qq{constructor(e){this.instance=e}ji(e){cU.ph_toolbar_state=e}Li(){var e;return null!==(e=cU.ph_toolbar_state)&&void 0!==e?e:Yq.UNINITIALIZED}maybeLoadToolbar(e,t,n){var r,o;if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===n&&(n=void 0),!X$||!rU)return!1;e=null!==(r=e)&&void 0!==r?r:X$.location,n=null!==(o=n)&&void 0!==o?o:X$.history;try{if(!t){try{X$.localStorage.setItem("test","test"),X$.localStorage.removeItem("test")}catch(e){return!1}t=null==X$?void 0:X$.localStorage}var i,a=Gq||mH(e.hash,"__posthog")||mH(e.hash,"state"),s=a?qU((()=>JSON.parse(atob(decodeURIComponent(a)))))||qU((()=>JSON.parse(decodeURIComponent(a)))):null;return s&&"ph_authorize"===s.action?((i=s).source="url",i&&Object.keys(i).length>0&&(s.desiredHash?e.hash=s.desiredHash:n?n.replaceState(n.state,"",e.pathname+e.search):e.hash="")):((i=JSON.parse(t.getItem(Xq)||"{}")).source="localstorage",delete i.userIntent),!(!i.token||this.instance.config.token!==i.token||(this.loadToolbar(i),0))}catch(e){return!1}}Ni(e){var t=cU.ph_load_toolbar||cU.ph_load_editor;!AU(t)&&_U(t)?t(e,this.instance):Jq.warn("No toolbar load function found")}loadToolbar(e){var t=!(null==rU||!rU.getElementById(MW));if(!X$||t)return!1;var n="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,r=BU({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});if(X$.localStorage.setItem(Xq,JSON.stringify(BU({},r,{source:void 0}))),this.Li()===Yq.LOADED)this.Ni(r);else if(this.Li()===Yq.UNINITIALIZED){var o;this.ji(Yq.LOADING),null==(o=cU.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this.instance,"toolbar",(e=>{if(e)return Jq.error("[Toolbar] Failed to load",e),void this.ji(Yq.UNINITIALIZED);this.ji(Yq.LOADED),this.Ni(r)})),JU(X$,"turbolinks:load",(()=>{this.ji(Yq.UNINITIALIZED),this.loadToolbar(r)}))}return!0}zi(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,n){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===n&&(n=void 0),this.maybeLoadToolbar(e,t,n)}}var eK=MU("[TracingHeaders]");class tK{constructor(e){this.Ui=void 0,this.qi=void 0,this.V=()=>{var e,t,n,r;EU(this.Ui)&&(null==(e=cU.__PosthogExtensions__)||null==(t=e.tracingHeadersPatchFns)||t._patchXHR(this._instance.sessionManager)),EU(this.qi)&&(null==(n=cU.__PosthogExtensions__)||null==(r=n.tracingHeadersPatchFns)||r._patchFetch(this._instance.sessionManager))},this._instance=e}G(e){var t,n;null!=(t=cU.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(n=cU.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"tracing-headers",(t=>{if(t)return eK.error("failed to load script",t);e()}))}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.G(this.V):(null==(e=this.Ui)||e.call(this),null==(t=this.qi)||t.call(this),this.Ui=void 0,this.qi=void 0)}}var nK=MU("[Web Vitals]"),rK=9e5;class oK{constructor(e){var t;this.Bi=!1,this.i=!1,this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Hi=()=>{clearTimeout(this.Wi),0!==this.M.metrics.length&&(this._instance.capture("$web_vitals",this.M.metrics.reduce(((e,t)=>BU({},e,{["$web_vitals_"+t.name+"_event"]:BU({},t),["$web_vitals_"+t.name+"_value"]:t.value})),{})),this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Gi=e=>{var t,n=null==(t=this._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(EU(n))nK.error("Could not read session ID. Dropping metrics!");else{this.M=this.M||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var r=this.Ji();EU(r)||(AU(null==e?void 0:e.name)||AU(null==e?void 0:e.value)?nK.error("Invalid metric received",e):this.Vi&&e.value>=this.Vi?nK.error("Ignoring metric with value >= "+this.Vi,e):(this.M.url!==r&&(this.Hi(),this.Wi=setTimeout(this.Hi,this.flushToCaptureTimeoutMs)),EU(this.M.url)&&(this.M.url=r),this.M.firstMetricTimestamp=EU(this.M.firstMetricTimestamp)?Date.now():this.M.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.M.metrics.push(BU({},e,{$current_url:r,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),this.M.metrics.length===this.allowedMetrics.length&&this.Hi()))}},this.V=()=>{var e,t,n,r,o=cU.__PosthogExtensions__;EU(o)||EU(o.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:n,onINP:r}=o.postHogWebVitalsCallbacks),e&&t&&n&&r?(this.allowedMetrics.indexOf("LCP")>-1&&e(this.Gi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this.Gi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&n(this.Gi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&r(this.Gi.bind(this)),this.i=!0):nK.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Bi=!(null==(t=this._instance.persistence)||!t.props[iW]),this.startIfEnabled()}get allowedMetrics(){var e,t,n=kU(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return EU(n)?(null==(t=this._instance.persistence)?void 0:t.props[sW])||["CLS","FCP","INP","LCP"]:n}get flushToCaptureTimeoutMs(){return(kU(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Vi(){var e=kU(this._instance.config.capture_performance)&&OU(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:rK;return 0<e&&e<=6e4?rK:e}get isEnabled(){var e=null==oU?void 0:oU.protocol;if("http:"!==e&&"https:"!==e)return nK.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=kU(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:RU(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return RU(t)?t:this.Bi}startIfEnabled(){this.isEnabled&&!this.i&&(nK.info("enabled, starting..."),this.G(this.V))}onRemoteConfig(e){var t=kU(e.capturePerformance)&&!!e.capturePerformance.web_vitals,n=kU(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[iW]:t}),this._instance.persistence.register({[sW]:n})),this.Bi=t,this.startIfEnabled()}G(e){var t,n;null!=(t=cU.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks&&e(),null==(n=cU.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"web-vitals",(t=>{t?nK.error("failed to load script",t):e()}))}Ji(){var e=X$?X$.location.href:void 0;return e||nK.error("Could not determine current URL"),e}}var iK=MU("[Heatmaps]");function aK(e){return kU(e)&&"clientX"in e&&"clientY"in e&&OU(e.clientX)&&OU(e.clientY)}class sK{constructor(e){var t;this.rageclicks=new dH,this.Bi=!1,this.i=!1,this.Ki=null,this.instance=e,this.Bi=!(null==(t=this.instance.persistence)||!t.props[rW])}get flushIntervalMilliseconds(){var e=5e3;return kU(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return EU(this.instance.config.capture_heatmaps)?EU(this.instance.config.enable_heatmaps)?this.Bi:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this.i)return;iK.info("starting..."),this.Yi(),this.Ki=setInterval(this.Xi.bind(this),this.flushIntervalMilliseconds)}else{var e,t;clearInterval(null!==(e=this.Ki)&&void 0!==e?e:void 0),null==(t=this.Qi)||t.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[rW]:t}),this.Bi=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.M;return this.M=void 0,e}Zi(e){this.te(e.originalEvent,"deadclick")}Yi(){X$&&rU&&(JU(X$,"beforeunload",this.Xi.bind(this)),JU(rU,"click",(e=>this.te(e||(null==X$?void 0:X$.event))),{capture:!0}),JU(rU,"mousemove",(e=>this.ie(e||(null==X$?void 0:X$.event))),{capture:!0}),this.Qi=new qH(this.instance,HH,this.Zi.bind(this)),this.Qi.startIfEnabled(),this.i=!0)}ee(e,t){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),o=this.instance.scrollManager.scrollElement(),i=function(e,t,n){for(var r=e;r&&FW(r)&&!zW(r,"body");){if(r===n)return!1;if(pU(t,null==X$?void 0:X$.getComputedStyle(r).position))return!0;r=GW(r)}return!1}(ZW(e),["fixed","sticky"],o);return{x:e.clientX+(i?0:r),y:e.clientY+(i?0:n),target_fixed:i,type:t}}te(e,t){var n;if(void 0===t&&(t="click"),!BW(e.target)&&aK(e)){var r=this.ee(e,t);null!=(n=this.rageclicks)&&n.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.re(BU({},r,{type:"rageclick"})),this.re(r)}}ie(e){!BW(e.target)&&aK(e)&&(clearTimeout(this.se),this.se=setTimeout((()=>{this.re(this.ee(e,"mousemove"))}),500))}re(e){if(X$){var t=X$.location.href;this.M=this.M||{},this.M[t]||(this.M[t]=[]),this.M[t].push(e)}}Xi(){this.M&&!SU(this.M)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class lK{constructor(e){this._instance=e}doPageView(e,t){var n,r=this.ne(e,t);return this.oe={pathname:null!==(n=null==X$?void 0:X$.location.pathname)&&void 0!==n?n:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var t;return this.ne(e,null==(t=this.oe)?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null==(e=this.oe)?void 0:e.pageViewId}}ne(e,t){var n=this.oe;if(!n)return{$pageview_id:t};var r={$pageview_id:t,$prev_pageview_id:n.pageViewId},o=this._instance.scrollManager.getContext();if(o&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:i,lastScrollY:a,maxScrollY:s,maxContentHeight:l,lastContentY:c,maxContentY:u}=o;if(!(EU(i)||EU(a)||EU(s)||EU(l)||EU(c)||EU(u))){i=Math.ceil(i),a=Math.ceil(a),s=Math.ceil(s),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u);var d=i<=1?1:DV(a/i,0,1),f=i<=1?1:DV(s/i,0,1),h=l<=1?1:DV(c/l,0,1),p=l<=1?1:DV(u/l,0,1);r=WU(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:s,$prev_pageview_max_scroll_percentage:f,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:h,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:p})}}return n.pathname&&(r.$prev_pageview_pathname=n.pathname),n.timestamp&&(r.$prev_pageview_duration=(e.getTime()-n.timestamp.getTime())/1e3),r}}class cK{constructor(e){this._instance=e}sendExceptionEvent(e){this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var uK="Mobile",dK="iOS",fK="Android",hK="Tablet",pK=fK+" "+hK,gK="iPad",mK="Apple",vK=mK+" Watch",yK="Safari",bK="BlackBerry",wK="Samsung",xK=wK+"Browser",_K=wK+" Internet",kK="Chrome",SK=kK+" OS",EK=kK+" "+dK,jK="Internet Explorer",CK=jK+" "+uK,NK="Opera",AK=NK+" Mini",OK="Edge",RK="Microsoft "+OK,PK="Firefox",TK=PK+" "+dK,IK="Nintendo",MK="PlayStation",DK="Xbox",LK=fK+" "+uK,BK=uK+" "+yK,FK="Windows",zK=FK+" Phone",$K="Nokia",UK="Ouya",WK="Generic",HK=WK+" "+uK.toLowerCase(),VK=WK+" "+hK.toLowerCase(),qK="Konqueror",KK="(\\d+(\\.\\d+)?)",ZK=new RegExp("Version/"+KK),YK=new RegExp(DK,"i"),GK=new RegExp(MK+" \\w+","i"),XK=new RegExp(IK+" \\w+","i"),JK=new RegExp(bK+"|PlayBook|BB10","i"),QK={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},eZ=function(e,t){return t=t||"",pU(e," OPR/")&&pU(e,"Mini")?AK:pU(e," OPR/")?NK:JK.test(e)?bK:pU(e,"IE"+uK)||pU(e,"WPDesktop")?CK:pU(e,xK)?_K:pU(e,OK)||pU(e,"Edg/")?RK:pU(e,"FBIOS")?"Facebook "+uK:pU(e,"UCWEB")||pU(e,"UCBrowser")?"UC Browser":pU(e,"CriOS")?EK:pU(e,"CrMo")||pU(e,kK)?kK:pU(e,fK)&&pU(e,yK)?LK:pU(e,"FxiOS")?TK:pU(e.toLowerCase(),qK.toLowerCase())?qK:((e,t)=>t&&pU(t,mK)||function(e){return pU(e,yK)&&!pU(e,kK)&&!pU(e,fK)}(e))(e,t)?pU(e,uK)?BK:yK:pU(e,PK)?PK:pU(e,"MSIE")||pU(e,"Trident/")?jK:pU(e,"Gecko")?PK:""},tZ={[CK]:[new RegExp("rv:"+KK)],[RK]:[new RegExp(OK+"?\\/"+KK)],[kK]:[new RegExp("("+kK+"|CrMo)\\/"+KK)],[EK]:[new RegExp("CriOS\\/"+KK)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+KK)],[yK]:[ZK],[BK]:[ZK],[NK]:[new RegExp("(Opera|OPR)\\/"+KK)],[PK]:[new RegExp(PK+"\\/"+KK)],[TK]:[new RegExp("FxiOS\\/"+KK)],[qK]:[new RegExp("Konqueror[:/]?"+KK,"i")],[bK]:[new RegExp(bK+" "+KK),ZK],[LK]:[new RegExp("android\\s"+KK,"i")],[_K]:[new RegExp(xK+"\\/"+KK)],[jK]:[new RegExp("(rv:|MSIE )"+KK)],Mozilla:[new RegExp("rv:"+KK)]},nZ=function(e,t){var n=eZ(e,t),r=tZ[n];if(EU(r))return null;for(var o=0;o<r.length;o++){var i=r[o],a=e.match(i);if(a)return parseFloat(a[a.length-2])}return null},rZ=[[new RegExp(DK+"; "+DK+" (.*?)[);]","i"),e=>[DK,e&&e[1]||""]],[new RegExp(IK,"i"),[IK,""]],[new RegExp(MK,"i"),[MK,""]],[JK,[bK,""]],[new RegExp(FK,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[zK,""];if(new RegExp(uK).test(t)&&!/IEMobile\b/.test(t))return[FK+" "+uK,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],o=QK[r]||"";return/arm/i.test(t)&&(o="RT"),[FK,o]}return[FK,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[dK,t.join(".")]}return[dK,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=EU(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+fK+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+fK+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[fK,t.join(".")]}return[fK,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[SK,""]],[/Linux|debian/i,["Linux",""]]],oZ=function(e){return XK.test(e)?IK:GK.test(e)?MK:YK.test(e)?DK:new RegExp(UK,"i").test(e)?UK:new RegExp("("+zK+"|WPDesktop)","i").test(e)?zK:/iPad/.test(e)?gK:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?vK:JK.test(e)?bK:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp($K,"i").test(e)?$K:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(uK).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?fK:pK:fK:new RegExp("(pda|"+uK+")","i").test(e)?HK:new RegExp(hK,"i").test(e)&&!new RegExp(hK+" pc","i").test(e)?VK:""},iZ="https?://(.*)",aZ=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],sZ=HU(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],aZ),lZ="<masked>";function cZ(e,t,n){if(!rU)return{};var r=t?HU([],aZ,n||[]):[];return uZ(gH(rU.URL,r,lZ),e)}function uZ(e,t){var n=sZ.concat(t||[]),r={};return UU(n,(function(t){var n=pH(e,t);r[t]=n||null})),r}function dZ(e){var t=function(e){return e?0===e.search(iZ+"google.([^/?]*)")?"google":0===e.search(iZ+"bing.com")?"bing":0===e.search(iZ+"yahoo.com")?"yahoo":0===e.search(iZ+"duckduckgo.com")?"duckduckgo":null:null}(e),n="yahoo"!=t?"q":"p",r={};if(!NU(t)){r.$search_engine=t;var o=rU?pH(rU.referrer,n):"";o.length&&(r.ph_keyword=o)}return r}function fZ(){return navigator.language||navigator.userLanguage}function hZ(){return(null==rU?void 0:rU.referrer)||"$direct"}function pZ(e,t){var n=e?HU([],aZ,t||[]):[],r=null==oU?void 0:oU.href.substring(0,1e3);return{r:hZ().substring(0,1e3),u:r?gH(r,n,lZ):void 0}}function gZ(e){var t,{r:n,u:r}=e,o={$referrer:n,$referring_domain:null==n?void 0:"$direct"==n?"$direct":null==(t=hH(n))?void 0:t.host};if(r){o.$current_url=r;var i=hH(r);o.$host=null==i?void 0:i.host,o.$pathname=null==i?void 0:i.pathname;var a=uZ(r);WU(o,a)}if(n){var s=dZ(n);WU(o,s)}return o}function mZ(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(G$){return}}function vZ(){try{return(new Date).getTimezoneOffset()}catch(G$){return}}function yZ(e,t){if(!lU)return{};var n,r,o,i=e?HU([],aZ,t||[]):[],[a,s]=function(e){for(var t=0;t<rZ.length;t++){var[n,r]=rZ[t],o=n.exec(e),i=o&&(_U(r)?r(o,e):r);if(i)return i}return["",""]}(lU);return WU(ZU({$os:a,$os_version:s,$browser:eZ(lU,navigator.vendor),$device:oZ(lU),$device_type:(r=lU,o=oZ(r),o===gK||o===pK||"Kobo"===o||"Kindle Fire"===o||o===VK?hK:o===IK||o===DK||o===MK||o===UK?"Console":o===vK?"Wearable":o?uK:"Desktop"),$timezone:mZ(),$timezone_offset:vZ()}),{$current_url:gH(null==oU?void 0:oU.href,i,lZ),$host:null==oU?void 0:oU.host,$pathname:null==oU?void 0:oU.pathname,$raw_user_agent:lU.length>1e3?lU.substring(0,997)+"...":lU,$browser_version:nZ(lU,navigator.vendor),$browser_language:fZ(),$browser_language_prefix:(n=fZ(),"string"==typeof n?n.split("-")[0]:void 0),$screen_height:null==X$?void 0:X$.screen.height,$screen_width:null==X$?void 0:X$.screen.width,$viewport_height:null==X$?void 0:X$.innerHeight,$viewport_width:null==X$?void 0:X$.innerWidth,$lib:"web",$lib_version:uU.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var bZ,wZ=MU("[FeatureFlags]"),xZ="$active_feature_flags",_Z="$override_feature_flags",kZ="$feature_flag_payloads",SZ="$override_feature_flag_payloads",EZ="$feature_flag_request_id",jZ=e=>{var t={};for(var[n,r]of VU(e||{}))r&&(t[n]=r);return t};!function(e){e.FeatureFlags="feature_flags",e.Recordings="recordings"}(bZ||(bZ={}));class CZ{constructor(e){this.ae=!1,this.le=!1,this.ue=!1,this.he=!1,this.de=!1,this.ve=!1,this.ce=!1,this._instance=e,this.featureFlagEventHandlers=[]}decide(){if(this._instance.config.__preview_remote_config)this.ve=!0;else{var e=!this.fe&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.pe({disableFlags:e})}}get hasLoadedFlags(){return this.le}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(_W),t=this._instance.get_property(_Z),n=this._instance.get_property(SZ);if(!n&&!t)return e||{};var r=WU({},e||{}),o=[...new Set([...Object.keys(n||{}),...Object.keys(t||{})])];for(var i of o){var a,s,l=r[i],c=null==t?void 0:t[i],u=EU(c)?null!==(a=null==l?void 0:l.enabled)&&void 0!==a&&a:!!c,d=EU(c)?l.variant:"string"==typeof c?c:void 0,f=null==n?void 0:n[i],h=BU({},l,{enabled:u,variant:u?null!=d?d:null==l?void 0:l.variant:void 0});u!==(null==l?void 0:l.enabled)&&(h.original_enabled=null==l?void 0:l.enabled),d!==(null==l?void 0:l.variant)&&(h.original_variant=null==l?void 0:l.variant),f&&(h.metadata=BU({},null==l?void 0:l.metadata,{payload:f,original_payload:null==l||null==(s=l.metadata)?void 0:s.payload})),r[i]=h}return this.ae||(wZ.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:n,finalDetails:r}),this.ae=!0),r}getFlagVariants(){var e=this._instance.get_property(wW),t=this._instance.get_property(_Z);if(!t)return e||{};for(var n=WU({},e),r=Object.keys(t),o=0;o<r.length;o++)n[r[o]]=t[r[o]];return this.ae||(wZ.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this.ae=!0),n}getFlagPayloads(){var e=this._instance.get_property(kZ),t=this._instance.get_property(SZ);if(!t)return e||{};for(var n=WU({},e||{}),r=Object.keys(t),o=0;o<r.length;o++)n[r[o]]=t[r[o]];return this.ae||(wZ.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:n}),this.ae=!0),n}reloadFeatureFlags(){this.he||this._instance.config.advanced_disable_feature_flags||this.fe||(this.fe=setTimeout((()=>{this.pe()}),5))}ge(){clearTimeout(this.fe),this.fe=void 0}ensureFlagsLoaded(){this.le||this.ue||this.fe||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.he=e}pe(e){var t;if(this.ge(),!this._instance.config.advanced_disable_decide)if(this.ue)this.de=!0;else{var n={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:BU({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(kW)||{}),group_properties:this._instance.get_property(SW)};(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(n.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config;r&&(n.timezone=mZ()),this.ue=!0,this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api",r?"/flags/?v=2":"/decide/?v=4"),data:n,compression:this._instance.config.disable_compression?void 0:G$.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:e=>{var t,r,o,i=!0;200===e.statusCode&&(this.de||(this.$anon_distinct_id=void 0),i=!1),this.ue=!1,this.ve||(this.ve=!0,this._instance.me(null!==(o=e.json)&&void 0!==o?o:{})),n.disable_flags&&!this.de||(this.ce=!i,e.json&&null!=(t=e.json.quotaLimited)&&t.includes(bZ.FeatureFlags)?wZ.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(this.receivedFeatureFlags(null!==(r=e.json)&&void 0!==r?r:{},i),this.de&&(this.de=!1,this.pe())))}})}}getFeatureFlag(e,t){if(void 0===t&&(t={}),this.le||this.getFlags()&&this.getFlags().length>0){var n=this.getFlagVariants()[e],r=""+n,o=this._instance.get_property(EZ)||void 0,i=this._instance.get_property(CW)||{};if((t.send_event||!("send_event"in t))&&(!(e in i)||!i[e].includes(r))){var a,s,l,c,u,d,f,h,p,g,m;xU(i[e])?i[e].push(r):i[e]=[r],null==(a=this._instance.persistence)||a.register({[CW]:i});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:n,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:o,$feature_flag_bootstrapped_response:(null==(s=this._instance.config.bootstrap)||null==(l=s.featureFlags)?void 0:l[e])||null,$feature_flag_bootstrapped_payload:(null==(c=this._instance.config.bootstrap)||null==(u=c.featureFlagPayloads)?void 0:u[e])||null,$used_bootstrap_value:!this.ce};EU(null==v||null==(d=v.metadata)?void 0:d.version)||(y.$feature_flag_version=v.metadata.version);var b,w=null!==(f=null==v||null==(h=v.reason)?void 0:h.description)&&void 0!==f?f:null==v||null==(p=v.reason)?void 0:p.code;w&&(y.$feature_flag_reason=w),null!=v&&null!=(g=v.metadata)&&g.id&&(y.$feature_flag_id=v.metadata.id),EU(null==v?void 0:v.original_variant)&&EU(null==v?void 0:v.original_enabled)||(y.$feature_flag_original_response=EU(v.original_variant)?v.original_enabled:v.original_variant),null!=v&&null!=(m=v.metadata)&&m.original_payload&&(y.$feature_flag_original_payload=null==v||null==(b=v.metadata)?void 0:b.original_payload),this._instance.capture("$feature_flag_called",y)}return n}wZ.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var n=this._instance.config.token;this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api","/decide/?v=4"),data:{distinct_id:this._instance.get_distinct_id(),token:n},compression:this._instance.config.disable_compression?void 0:G$.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:n=>{var r,o=null==(r=n.json)?void 0:r.featureFlagPayloads;t((null==o?void 0:o[e])||void 0)}})}isFeatureEnabled(e,t){if(void 0===t&&(t={}),this.le||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);wZ.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((t=>t!==e))}receivedFeatureFlags(e,t){if(this._instance.persistence){this.le=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads(),o=this.getFlagsWithDetails();!function(e,t,n,r,o){void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o={});var i=(e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map((e=>{var n;return[e,null!==(n=t[e].variant)&&void 0!==n?n:t[e].enabled]}))),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter((e=>t[e].enabled)).filter((e=>{var n;return null==(n=t[e].metadata)?void 0:n.payload})).map((e=>{var n;return[e,null==(n=t[e].metadata)?void 0:n.payload]})))):wZ.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e})(e),a=i.flags,s=i.featureFlags,l=i.featureFlagPayloads;if(s){var c=e.requestId;if(xU(s)){wZ.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var u={};if(s)for(var d=0;d<s.length;d++)u[s[d]]=!0;t&&t.register({[xZ]:s,[wW]:u})}else{var f=s,h=l,p=a;e.errorsWhileComputingFlags&&(f=BU({},n,f),h=BU({},r,h),p=BU({},o,p)),t&&t.register(BU({[xZ]:Object.keys(jZ(f)),[wW]:f||{},[kZ]:h||{},[_W]:p||{}},c?{[EZ]:c}:{}))}}}(e,this._instance.persistence,n,r,o),this.be(t)}}override(e,t){void 0===t&&(t=!1),wZ.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return wZ.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(_Z),this._instance.persistence.unregister(SZ),void this.be();if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t,n=e;if(this.ae=Boolean(null!==(t=n.suppressWarning)&&void 0!==t&&t),"flags"in n)if(!1===n.flags)this._instance.persistence.unregister(_Z);else if(n.flags)if(xU(n.flags)){for(var r={},o=0;o<n.flags.length;o++)r[n.flags[o]]=!0;this._instance.persistence.register({[_Z]:r})}else this._instance.persistence.register({[_Z]:n.flags});return"payloads"in n&&(!1===n.payloads?this._instance.persistence.unregister(SZ):n.payloads&&this._instance.persistence.register({[SZ]:n.payloads})),void this.be()}this.be()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.le){var{flags:t,flagVariants:n}=this.we();e(t,n)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t){var n,r=(this._instance.get_property(xW)||[]).find((t=>t.flagKey===e)),o={["$feature_enrollment/"+e]:t},i={$feature_flag:e,$feature_enrollment:t,$set:o};r&&(i.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",i),this.setPersonPropertiesForFlags(o,!1);var a=BU({},this.getFlagVariants(),{[e]:t});null==(n=this._instance.persistence)||n.register({[xZ]:Object.keys(jZ(a)),[wW]:a}),this.be()}getEarlyAccessFeatures(e,t,n){void 0===t&&(t=!1);var r=this._instance.get_property(xW),o=n?"&"+n.map((e=>"stage="+e)).join("&"):"";if(r&&!t)return e(r);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+o),method:"GET",callback:t=>{var n;if(t.json){var r=t.json.earlyAccessFeatures;return null==(n=this._instance.persistence)||n.register({[xW]:r}),e(r)}}})}we(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((e=>t[e])),flagVariants:Object.keys(t).filter((e=>t[e])).reduce(((e,n)=>(e[n]=t[n],e)),{})}}be(e){var{flags:t,flagVariants:n}=this.we();this.featureFlagEventHandlers.forEach((r=>r(t,n,{errorsLoading:e})))}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0);var n=this._instance.get_property(kW)||{};this._instance.register({[kW]:BU({},n,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(kW)}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0);var n=this._instance.get_property(SW)||{};0!==Object.keys(n).length&&Object.keys(n).forEach((t=>{n[t]=BU({},n[t],e[t]),delete e[t]})),this._instance.register({[SW]:BU({},n,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(SW)||{};this._instance.register({[SW]:BU({},t,{[e]:{}})})}else this._instance.unregister(SW)}}var NZ=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class AZ{constructor(e){this.S=e,this.props={},this.ye=!1,this.Se=(e=>{var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"})(e),this.q=this.$e(e),this.load(),e.debug&&IU.info("Persistence loaded",e.persistence,BU({},this.props)),this.update_config(e,e),this.save()}$e(e){-1===NZ.indexOf(e.persistence.toLowerCase())&&(IU.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&MH.O()?MH:"localstorage+cookie"===t&&LH.O()?LH:"sessionstorage"===t&&$H.O()?$H:"memory"===t?FH:"cookie"===t?TH:LH.O()?LH:TH}properties(){var e={};return UU(this.props,(function(t,n){if(n===wW&&kU(t))for(var r=Object.keys(t),o=0;o<r.length;o++)e["$feature/"+r[o]]=t[r[o]];else a=n,s=!1,(NU(i=LW)?s:tU&&i.indexOf===tU?-1!=i.indexOf(a):(UU(i,(function(e){if(s||(s=e===a))return zU})),s))||(e[n]=t);var i,a,s})),e}load(){if(!this.ke){var e=this.q.D(this.Se);e&&(this.props=WU({},e))}}save(){this.ke||this.q.j(this.Se,this.props,this.xe,this.Ee,this.Ie,this.S.debug)}remove(){this.q.L(this.Se,!1),this.q.L(this.Se,!0)}clear(){this.remove(),this.props={}}register_once(e,t,n){if(kU(e)){EU(t)&&(t="None"),this.xe=EU(n)?this.Pe:n;var r=!1;if(UU(e,((e,n)=>{this.props.hasOwnProperty(n)&&this.props[n]!==t||(this.props[n]=e,r=!0)})),r)return this.save(),!0}return!1}register(e,t){if(kU(e)){this.xe=EU(t)?this.Pe:t;var n=!1;if(UU(e,((t,r)=>{e.hasOwnProperty(r)&&this.props[r]!==t&&(this.props[r]=t,n=!0)})),n)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.ye){var e=cZ(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);SU(ZU(e))||this.register(e),this.ye=!0}}update_search_keyword(){var e;this.register((e=null==rU?void 0:rU.referrer)?dZ(e):{})}update_referrer_info(){var e;this.register_once({$referrer:hZ(),$referring_domain:null!=rU&&rU.referrer&&(null==(e=hH(rU.referrer))?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[RW]||this.props[PW]||this.register_once({[TW]:pZ(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};UU([PW,RW],(t=>{var n=this.props[t];n&&UU(n,(function(t,n){e["$initial_"+mU(n)]=t}))}));var t,n,r=this.props[TW];if(r){var o=(t=gZ(r),n={},UU(t,(function(e,t){n["$initial_"+mU(t)]=e})),n);WU(e,o)}return e}safe_merge(e){return UU(this.props,(function(t,n){n in e||(e[n]=t)})),e}update_config(e,t){if(this.Pe=this.xe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var n=this.$e(e),r=this.props;this.clear(),this.q=n,this.props=r,this.save()}}set_disabled(e){this.ke=e,this.ke?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ee&&(this.Ee=e,this.remove(),this.save())}set_secure(e){e!==this.Ie&&(this.Ie=e,this.remove(),this.save())}set_event_timer(e,t){var n=this.props[tW]||{};n[e]=t,this.props[tW]=n,this.save()}remove_event_timer(e){var t=(this.props[tW]||{})[e];return EU(t)||(delete this.props[tW][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}class OZ{constructor(){this.Re={},this.Re={}}on(e,t){return this.Re[e]||(this.Re[e]=[]),this.Re[e].push(t),()=>{this.Re[e]=this.Re[e].filter((e=>e!==t))}}emit(e,t){for(var n of this.Re[e]||[])n(t);for(var r of this.Re["*"]||[])r(e,t)}}var RZ=function(e,t){if(!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(e){return!1}};class PZ{constructor(e){this.Te=new OZ,this.Me=(e,t)=>this.Ce(e,t)&&this.Oe(e,t)&&this.Fe(e,t),this.Ce=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event),this._instance=e,this.Ae=new Set,this.De=new Set}init(){var e,t;EU(null==(e=this._instance)?void 0:e.je)||(null==(t=this._instance)||t.je(((e,t)=>{this.on(e,t)})))}register(e){var t,n;if(!EU(null==(t=this._instance)?void 0:t.je)&&(e.forEach((e=>{var t,n;null==(t=this.De)||t.add(e),null==(n=e.steps)||n.forEach((e=>{var t;null==(t=this.Ae)||t.add((null==e?void 0:e.event)||"")}))})),null!=(n=this._instance)&&n.autocapture)){var r,o=new Set;e.forEach((e=>{var t;null==(t=e.steps)||t.forEach((e=>{null!=e&&e.selector&&o.add(null==e?void 0:e.selector)}))})),null==(r=this._instance)||r.autocapture.setElementSelectors(o)}}on(e,t){var n;null!=t&&0!=e.length&&(this.Ae.has(e)||this.Ae.has(null==t?void 0:t.event))&&this.De&&(null==(n=this.De)?void 0:n.size)>0&&this.De.forEach((e=>{this.Le(t,e)&&this.Te.emit("actionCaptured",e.name)}))}Ne(e){this.onAction("actionCaptured",(t=>e(t)))}Le(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var n of t.steps)if(this.Me(e,n))return!0;return!1}onAction(e,t){return this.Te.on(e,t)}Oe(e,t){if(null!=t&&t.url){var n,r=null==e||null==(n=e.properties)?void 0:n.$current_url;if(!r||"string"!=typeof r)return!1;if(!PZ.ze(r,null==t?void 0:t.url,(null==t?void 0:t.url_matching)||"contains"))return!1}return!0}static ze(e,t,n){switch(n){case"regex":return!!X$&&RZ(e,t);case"exact":return t===e;case"contains":var r=PZ.Ue(t).replace(/_/g,".").replace(/%/g,".*");return RZ(e,r);default:return!1}}static Ue(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Fe(e,t){if((null!=t&&t.href||null!=t&&t.tag_name||null!=t&&t.text)&&!this.qe(e).some((e=>!(null!=t&&t.href&&!PZ.ze(e.href||"",null==t?void 0:t.href,(null==t?void 0:t.href_matching)||"exact")||null!=t&&t.tag_name&&e.tag_name!==(null==t?void 0:t.tag_name)||null!=t&&t.text&&!PZ.ze(e.text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")&&!PZ.ze(e.$el_text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")))))return!1;if(null!=t&&t.selector){var n,r=null==e||null==(n=e.properties)?void 0:n.$element_selectors;if(!r)return!1;if(!r.includes(null==t?void 0:t.selector))return!1}return!0}qe(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}var TZ=MU("[Surveys]");class IZ{constructor(e){this._instance=e,this.Be=new Map,this.He=new Map}register(e){var t;EU(null==(t=this._instance)?void 0:t.je)||(this.We(e),this.Ge(e))}Ge(e){var t=e.filter((e=>{var t,n,r,o;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(n=e.conditions)||null==(r=n.actions)||null==(o=r.values)?void 0:o.length)>0}));0!==t.length&&(null==this.Je&&(this.Je=new PZ(this._instance),this.Je.init(),this.Je.Ne((e=>{this.onAction(e)}))),t.forEach((e=>{var t,n,r,o,i,a,s,l,c,u;e.conditions&&null!=(t=e.conditions)&&t.actions&&null!=(n=e.conditions)&&null!=(r=n.actions)&&r.values&&(null==(o=e.conditions)||null==(i=o.actions)||null==(a=i.values)?void 0:a.length)>0&&(null==(s=this.Je)||s.register(e.conditions.actions.values),null==(l=e.conditions)||null==(c=l.actions)||null==(u=c.values)||u.forEach((t=>{if(t&&t.name){var n=this.He.get(t.name);n&&n.push(e.id),this.He.set(t.name,n||[e.id])}})))})))}We(e){var t;0!==e.filter((e=>{var t,n,r,o;return(null==(t=e.conditions)?void 0:t.events)&&(null==(n=e.conditions)||null==(r=n.events)||null==(o=r.values)?void 0:o.length)>0})).length&&(null==(t=this._instance)||t.je(((e,t)=>{this.onEvent(e,t)})),e.forEach((e=>{var t,n,r;null==(t=e.conditions)||null==(n=t.events)||null==(r=n.values)||r.forEach((t=>{if(t&&t.name){var n=this.Be.get(t.name);n&&n.push(e.id),this.Be.set(t.name,n||[e.id])}}))})))}onEvent(e,t){var n,r,o=(null==(n=this._instance)||null==(r=n.persistence)?void 0:r.props[jW])||[];if("survey shown"===e&&t&&o.length>0){var i;TZ.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:o});var a=null==t||null==(i=t.properties)?void 0:i.$survey_id;if(a){var s=o.indexOf(a);s>=0&&(o.splice(s,1),this.Ve(o))}}else this.Be.has(e)&&(TZ.info("survey event matched, updating activated surveys",{event:e,surveys:this.Be.get(e)}),this.Ve(o.concat(this.Be.get(e)||[])))}onAction(e){var t,n,r=(null==(t=this._instance)||null==(n=t.persistence)?void 0:n.props[jW])||[];this.He.has(e)&&this.Ve(r.concat(this.He.get(e)||[]))}Ve(e){var t,n;null==(t=this._instance)||null==(n=t.persistence)||n.register({[jW]:[...new Set(e)]})}getSurveys(){var e,t;return(null==(e=this._instance)||null==(t=e.persistence)?void 0:t.props[jW])||[]}getEventToSurveys(){return this.Be}Ke(){return this.Je}}class MZ{constructor(e){this.Ye=null,this.Xe=!1,this.Qe=!1,this.Ze=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var t=e.surveys;if(AU(t))return TZ.warn("Decide not loaded yet. Not loading surveys.");var n=xU(t);this.tr=n?t.length>0:t,TZ.info("decide response received, hasSurveys: "+this.tr),this.tr&&this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);(null!=n&&n.startsWith("seenSurvey_")||null!=n&&n.startsWith("inProgressSurvey_"))&&e.push(n)}e.forEach((e=>localStorage.removeItem(e)))}loadIfEnabled(){if(!this.Ye)if(this.Qe)TZ.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)TZ.info("Disabled. Not loading surveys.");else if(this.tr){var e=null==cU?void 0:cU.__PosthogExtensions__;if(e){this.Qe=!0;try{var t=e.generateSurveys;if(t)return void this.ir(t);var n=e.loadExternalDependency;if(!n)return void this.er("PostHog loadExternalDependency extension not found.");n(this._instance,"surveys",(t=>{t||!e.generateSurveys?this.er("Could not load surveys script",t):this.ir(e.generateSurveys)}))}catch(e){throw this.er("Error initializing surveys",e),e}finally{this.Qe=!1}}else TZ.error("PostHog Extensions not found.")}else TZ.info("No surveys to load.")}ir(e){this.Ye=e(this._instance),this._surveyEventReceiver=new IZ(this._instance),TZ.info("Surveys loaded successfully"),this.rr({isLoaded:!0})}er(e,t){TZ.error(e,t),this.rr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.Ze.push(e),this.Ye&&this.rr({isLoaded:!0}),()=>{this.Ze=this.Ze.filter((t=>t!==e))}}getSurveys(e,t){if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return TZ.info("Disabled. Not loading surveys."),e([]);var n=this._instance.get_property(EW);if(n&&!t)return e(n,{isLoaded:!0});if(this.Xe)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Xe=!0,this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:t=>{var n;this.Xe=!1;var r=t.statusCode;if(200!==r||!t.json){var o="Surveys API could not be loaded, status: "+r;return TZ.error(o),e([],{isLoaded:!1,error:o})}var i,a=t.json.surveys||[],s=a.filter((e=>function(e){return!(!e.start_date||e.end_date)}(e)&&(function(e){var t,n,r;return!(null==(t=e.conditions)||null==(n=t.events)||null==(r=n.values)||!r.length)}(e)||function(e){var t,n,r;return!(null==(t=e.conditions)||null==(n=t.actions)||null==(r=n.values)||!r.length)}(e))));return s.length>0&&(null==(i=this._surveyEventReceiver)||i.register(s)),null==(n=this._instance.persistence)||n.register({[EW]:a}),e(a,{isLoaded:!0})}})}catch(e){throw this.Xe=!1,e}}rr(e){for(var t of this.Ze)try{e.isLoaded?this.getSurveys(t):t([],e)}catch(e){TZ.error("Error in survey callback",e)}}getActiveMatchingSurveys(e,t){if(void 0===t&&(t=!1),!AU(this.Ye))return this.Ye.getActiveMatchingSurveys(e,t);TZ.warn("init was not called")}sr(e){var t=null;return this.getSurveys((n=>{var r;t=null!==(r=n.find((t=>t.id===e)))&&void 0!==r?r:null})),t}nr(e){if(AU(this.Ye))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this.sr(e):e;return t?this.Ye.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(AU(this.Ye))return TZ.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.nr(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return AU(this.Ye)?(TZ.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((n=>{this.getSurveys((t=>{var r,o=null!==(r=t.find((t=>t.id===e)))&&void 0!==r?r:null;if(o){var i=this.nr(o);n({visible:i.eligible,disabledReason:i.reason})}else n({visible:!1,disabledReason:"Survey not found"})}),t)}))}renderSurvey(e,t){if(AU(this.Ye))TZ.warn("init was not called");else{var n=this.sr(e),r=null==rU?void 0:rU.querySelector(t);n?r?this.Ye.renderSurvey(n,r):TZ.warn("Survey element not found"):TZ.warn("Survey not found")}}}var DZ=MU("[RateLimiter]");class LZ{constructor(e){var t,n;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach((e=>{DZ.info((e||"events")+" is quota limited."),this.serverLimits[e]=(new Date).getTime()+6e4}))}catch(e){return void DZ.warn('could not rate limit - continuing. Error: "'+(null==e?void 0:e.message)+'"',{text:t})}},this.instance=e,this.captureEventsPerSecond=(null==(t=e.config.rate_limiting)?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(n=e.config.rate_limiting)?void 0:n.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var t,n,r;void 0===e&&(e=!1);var o=(new Date).getTime(),i=null!==(t=null==(n=this.instance.persistence)?void 0:n.get_property(OW))&&void 0!==t?t:{tokens:this.captureEventsBurstLimit,last:o};i.tokens+=(o-i.last)/1e3*this.captureEventsPerSecond,i.last=o,i.tokens>this.captureEventsBurstLimit&&(i.tokens=this.captureEventsBurstLimit);var a=i.tokens<1;return a||e||(i.tokens=Math.max(0,i.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,null==(r=this.instance.persistence)||r.set_property(OW,i),{isRateLimited:a,remainingTokens:i.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var BZ=MU("[RemoteConfig]");class FZ{constructor(e){this._instance=e}get remoteConfig(){var e,t;return null==(e=cU._POSTHOG_REMOTE_CONFIG)||null==(t=e[this._instance.config.token])?void 0:t.config}ar(e){var t,n;null!=(t=cU.__PosthogExtensions__)&&t.loadExternalDependency?null==(n=cU.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"remote-config",(()=>e(this.remoteConfig))):(BZ.error("PostHog Extensions not found. Cannot load remote config."),e())}lr(e){this._instance._e({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return BZ.info("Using preloaded remote config",this.remoteConfig),void this.me(this.remoteConfig);if(this._instance.config.advanced_disable_decide)return void BZ.warn("Remote config is disabled. Falling back to local config.");this.ar((e=>{if(!e)return BZ.info("No config found after loading remote JS config. Falling back to JSON."),void this.lr((e=>{this.me(e)}));this.me(e)}))}catch(G$){BZ.error("Error loading remote config",G$)}}me(e){e?this._instance.config.__preview_remote_config?(this._instance.me(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):BZ.info("__preview_remote_config is disabled. Logging config instead",e):BZ.error("Failed to fetch remote config from PostHog.")}}var zZ=!!aU||!!iU,$Z="text/plain",UZ=(e,t)=>{var[n,r]=e.split("?"),o=BU({},t);null==r||r.split("&").forEach((e=>{var[t]=e.split("=");delete o[t]}));var i=function(e,t){var n,r;void 0===t&&(t="&");var o=[];return UU(e,(function(e,t){EU(e)||EU(t)||"undefined"===t||(n=encodeURIComponent((e=>e instanceof File)(e)?e.name:e.toString()),r=encodeURIComponent(t),o[o.length]=r+"="+n)})),o.join(t)}(o);return n+"?"+(i?(r?r+"&":"")+i:r)},WZ=(e,t)=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t),t),HZ=e=>{var{data:t,compression:n}=e;if(t){if(n===G$.GZipJS){var r=mq(vq(WZ(t)),{mtime:0}),o=new Blob([r],{type:$Z});return{contentType:$Z,body:o,estimatedSize:o.size}}if(n===G$.Base64){var i=function(e){var t,n,r,o,i,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,l=0,c="",u=[];if(!e)return e;e=function(e){var t,n,r,o,i="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,o=0;o<r;o++){var a=e.charCodeAt(o),s=null;a<128?n++:s=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),NU(s)||(n>t&&(i+=e.substring(t,n)),i+=s,t=n=o+1)}return n>t&&(i+=e.substring(t,e.length)),i}(e);do{t=(i=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,n=i>>12&63,r=i>>6&63,o=63&i,u[l++]=a.charAt(t)+a.charAt(n)+a.charAt(r)+a.charAt(o)}while(s<e.length);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(WZ(t)),a=(e=>"data="+encodeURIComponent("string"==typeof e?e:WZ(e)))(i);return{contentType:"application/x-www-form-urlencoded",body:a,estimatedSize:new Blob([a]).size}}var s=WZ(t);return{contentType:"application/json",body:s,estimatedSize:new Blob([s]).size}}},VZ=[];iU&&VZ.push({transport:"fetch",method:e=>{var t,n,{contentType:r,body:o,estimatedSize:i}=null!==(t=HZ(e))&&void 0!==t?t:{},a=new Headers;UU(e.headers,(function(e,t){a.append(t,e)})),r&&a.append("Content-Type",r);var s=e.url,l=null;if(sU){var c=new sU;l={signal:c.signal,timeout:setTimeout((()=>c.abort()),e.timeout)}}iU(s,BU({method:(null==e?void 0:e.method)||"GET",headers:a,keepalive:"POST"===e.method&&(i||0)<52428.8,body:o,signal:null==(n=l)?void 0:n.signal},e.fetchOptions)).then((t=>t.text().then((n=>{var r={statusCode:t.status,text:n};if(200===t.status)try{r.json=JSON.parse(n)}catch(e){IU.error(e)}null==e.callback||e.callback(r)})))).catch((t=>{IU.error(t),null==e.callback||e.callback({statusCode:0,text:t})})).finally((()=>l?clearTimeout(l.timeout):null))}}),aU&&VZ.push({transport:"XHR",method:e=>{var t,n=new aU;n.open(e.method||"GET",e.url,!0);var{contentType:r,body:o}=null!==(t=HZ(e))&&void 0!==t?t:{};UU(e.headers,(function(e,t){n.setRequestHeader(t,e)})),r&&n.setRequestHeader("Content-Type",r),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(4===n.readyState){var t={statusCode:n.status,text:n.responseText};if(200===n.status)try{t.json=JSON.parse(n.responseText)}catch(e){}null==e.callback||e.callback(t)}},n.send(o)}}),null!=nU&&nU.sendBeacon&&VZ.push({transport:"sendBeacon",method:e=>{var t=UZ(e.url,{beacon:"1"});try{var n,{contentType:r,body:o}=null!==(n=HZ(e))&&void 0!==n?n:{},i="string"==typeof o?new Blob([o],{type:r}):o;nU.sendBeacon(t,i)}catch(e){}}});var qZ=3e3;class KZ{constructor(e,t){this.ur=!0,this.hr=[],this.dr=DV((null==t?void 0:t.flush_interval_ms)||qZ,250,5e3,"flush interval",qZ),this.vr=e}enqueue(e){this.hr.push(e),this.cr||this.pr()}unload(){this.gr();var e=this.hr.length>0?this._r():{},t=Object.values(e);[...t.filter((e=>0===e.url.indexOf("/e"))),...t.filter((e=>0!==e.url.indexOf("/e")))].map((e=>{this.vr(BU({},e,{transport:"sendBeacon"}))}))}enable(){this.ur=!1,this.pr()}pr(){var e=this;this.ur||(this.cr=setTimeout((()=>{if(this.gr(),this.hr.length>0){var t=this._r(),n=function(n){var r=t[n],o=(new Date).getTime();r.data&&xU(r.data)&&UU(r.data,(e=>{e.offset=Math.abs(e.timestamp-o),delete e.timestamp})),e.vr(r)};for(var r in t)n(r)}}),this.dr))}gr(){clearTimeout(this.cr),this.cr=void 0}_r(){var e={};return UU(this.hr,(t=>{var n,r=t,o=(r?r.batchKey:null)||r.url;EU(e[o])&&(e[o]=BU({},r,{data:[]})),null==(n=e[o].data)||n.push(r.data)})),this.hr=[],e}}var ZZ=["retriesPerformedSoFar"];class YZ{constructor(e){this.mr=!1,this.br=3e3,this.hr=[],this._instance=e,this.hr=[],this.wr=!0,!EU(X$)&&"onLine"in X$.navigator&&(this.wr=X$.navigator.onLine,JU(X$,"online",(()=>{this.wr=!0,this.Xi()})),JU(X$,"offline",(()=>{this.wr=!1})))}get length(){return this.hr.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,n=FU(e,ZZ);OU(t)&&t>0&&(n.url=UZ(n.url,{retry_count:t})),this._instance._e(BU({},n,{callback:e=>{200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.yr(BU({retriesPerformedSoFar:t},n)):null==n.callback||n.callback(e)}}))}yr(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n=function(e){var t=3e3*Math.pow(2,e),n=t/2,r=Math.min(18e5,t),o=(Math.random()-.5)*(r-n);return Math.ceil(r+o)}(t),r=Date.now()+n;this.hr.push({retryAt:r,requestOptions:e});var o="Enqueued failed request for retry in "+n;navigator.onLine||(o+=" (Browser is offline)"),IU.warn(o),this.mr||(this.mr=!0,this.Sr())}Sr(){this.$r&&clearTimeout(this.$r),this.$r=setTimeout((()=>{this.wr&&this.hr.length>0&&this.Xi(),this.Sr()}),this.br)}Xi(){var e=Date.now(),t=[],n=this.hr.filter((n=>n.retryAt<e||(t.push(n),!1)));if(this.hr=t,n.length>0)for(var{requestOptions:r}of n)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.$r&&(clearTimeout(this.$r),this.$r=void 0),this.hr))try{this._instance._e(BU({},e,{transport:"sendBeacon"}))}catch(e){IU.error(e)}this.hr=[]}}class GZ{constructor(e){this.kr=()=>{var e,t,n,r;this.Er||(this.Er={});var o=this.scrollElement(),i=this.scrollY(),a=o?Math.max(0,o.scrollHeight-o.clientHeight):0,s=i+((null==o?void 0:o.clientHeight)||0),l=(null==o?void 0:o.scrollHeight)||0;this.Er.lastScrollY=Math.ceil(i),this.Er.maxScrollY=Math.max(i,null!==(e=this.Er.maxScrollY)&&void 0!==e?e:0),this.Er.maxScrollHeight=Math.max(a,null!==(t=this.Er.maxScrollHeight)&&void 0!==t?t:0),this.Er.lastContentY=s,this.Er.maxContentY=Math.max(s,null!==(n=this.Er.maxContentY)&&void 0!==n?n:0),this.Er.maxContentHeight=Math.max(l,null!==(r=this.Er.maxContentHeight)&&void 0!==r?r:0)},this._instance=e}getContext(){return this.Er}resetContext(){var e=this.Er;return setTimeout(this.kr,0),e}startMeasuringScrollPosition(){JU(X$,"scroll",this.kr,{capture:!0}),JU(X$,"scrollend",this.kr,{capture:!0}),JU(X$,"resize",this.kr)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==X$?void 0:X$.document.documentElement;var e=xU(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var n=null==X$?void 0:X$.document.querySelector(t);if(n)return n}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return X$&&(X$.scrollY||X$.pageYOffset||X$.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return X$&&(X$.scrollX||X$.pageXOffset||X$.document.documentElement.scrollLeft)||0}}var XZ=e=>pZ(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties);class JZ{constructor(e,t,n,r){this.Ir=e=>{var t=this.Pr();if(!t||t.sessionId!==e){var n={sessionId:e,props:this.Rr(this._instance)};this.Tr.register({[AW]:n})}},this._instance=e,this.Mr=t,this.Tr=n,this.Rr=r||XZ,this.Mr.onSessionId(this.Ir)}Pr(){return this.Tr.props[AW]}getSetOnceProps(){var e,t=null==(e=this.Pr())?void 0:e.props;return t?"r"in t?gZ(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return UU(ZU(this.getSetOnceProps()),((t,n)=>{"$current_url"===n&&(n="url"),e["$session_entry_"+mU(n)]=t})),e}}var QZ=MU("[SessionId]");class eY{constructor(e,t,n){var r;if(this.Cr=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Tr=e.persistence,this.oi=void 0,this.kt=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Or=t||NH,this.Fr=n||NH;var o=this.S.persistence_name||this.S.token,i=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*DV(i,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ar(),this.Dr="ph_"+o+"_window_id",this.jr="ph_"+o+"_primary_window_exists",this.Lr()){var a=$H.D(this.Dr),s=$H.D(this.jr);a&&!s?this.oi=a:$H.L(this.Dr),$H.j(this.jr,!0)}if(null!=(r=this.S.bootstrap)&&r.sessionID)try{var l=(()=>{var e=this.S.bootstrap.sessionID.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)})();this.Nr(this.S.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){QZ.error("Invalid sessionID in bootstrap",e)}this.zr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return EU(this.Cr)&&(this.Cr=[]),this.Cr.push(e),this.kt&&e(this.kt,this.oi),()=>{this.Cr=this.Cr.filter((t=>t!==e))}}Lr(){return"memory"!==this.S.persistence&&!this.Tr.ke&&$H.O()}Ur(e){e!==this.oi&&(this.oi=e,this.Lr()&&$H.j(this.Dr,e))}qr(){return this.oi?this.oi:this.Lr()?$H.D(this.Dr):null}Nr(e,t,n){e===this.kt&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this.kt=e,this.Tr.register({[mW]:[t,e,n]}))}Br(){if(this.kt&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.kt,this._sessionStartTimestamp];var e=this.Tr.props[mW];return xU(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Nr(null,null,null)}zr(){JU(X$,"beforeunload",(()=>{this.Lr()&&$H.L(this.jr)}),{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var n=t||(new Date).getTime(),[r,o,i]=this.Br(),a=this.qr(),s=OU(i)&&i>0&&Math.abs(n-i)>864e5,l=!1,c=!o,u=!e&&Math.abs(n-r)>this.sessionTimeoutMs;c||u||s?(o=this.Or(),a=this.Fr(),QZ.info("new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:s}}),i=n,l=!0):a||(a=this.Fr(),l=!0);var d=0===r||!e||s?n:r,f=0===i?(new Date).getTime():i;return this.Ur(a),this.Nr(o,d,f),e||this.Ar(),l&&this.Cr.forEach((e=>e(o,a,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:s}:void 0))),{sessionId:o,windowId:a,sessionStartTimestamp:f,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:s}:void 0,lastActivityTimestamp:r}}Ar(){clearTimeout(this.Hr),this.Hr=setTimeout((()=>{this.resetSessionId()}),1.1*this.sessionTimeoutMs)}}var tY=["$set_once","$set"],nY=MU("[SiteApps]");class rY{constructor(e){this._instance=e,this.Wr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Gr(e,t){if(t){var n=this.globalsForEvent(t);this.Wr.push(n),this.Wr.length>1e3&&(this.Wr=this.Wr.slice(10))}}get siteAppLoaders(){var e,t;return null==(e=cU._POSTHOG_REMOTE_CONFIG)||null==(t=e[this._instance.config.token])?void 0:t.siteApps}init(){if(this.isEnabled){var e=this._instance.je(this.Gr.bind(this));this.Jr=()=>{e(),this.Wr=[],this.Jr=void 0}}}globalsForEvent(e){var t,n,r,o,i,a,s;if(!e)throw new Error("Event payload is required");var l={},c=this._instance.get_property("$groups")||[],u=this._instance.get_property("$stored_group_properties")||{};for(var[d,f]of Object.entries(u))l[d]={id:c[d],type:d,properties:f};var{$set_once:h,$set:p}=e;return{event:BU({},FU(e,tY),{properties:BU({},e.properties,p?{$set:BU({},null!==(t=null==(n=e.properties)?void 0:n.$set)&&void 0!==t?t:{},p)}:{},h?{$set_once:BU({},null!==(r=null==(o=e.properties)?void 0:o.$set_once)&&void 0!==r?r:{},h)}:{}),elements_chain:null!==(i=null==(a=e.properties)?void 0:a.$elements_chain)&&void 0!==i?i:"",distinct_id:null==(s=e.properties)?void 0:s.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t=this.apps[e.id],n=()=>{var n;!t.errored&&this.Wr.length&&(nY.info("Processing "+this.Wr.length+" events for site app with id "+e.id),this.Wr.forEach((e=>null==t.processEvent?void 0:t.processEvent(e))),t.processedBuffer=!0),Object.values(this.apps).every((e=>e.processedBuffer||e.errored))&&(null==(n=this.Jr)||n.call(this))},r=!1,o=o=>{t.errored=!o,t.loaded=!0,nY.info("Site app with id "+e.id+" "+(o?"loaded":"errored")),r&&n()};try{var{processEvent:i}=e.init({posthog:this._instance,callback:e=>{o(e)}});i&&(t.processEvent=i),r=!0}catch(t){nY.error("Error while initializing PostHog app with config id "+e.id,t),o(!1)}if(r&&t.loaded)try{n()}catch(n){nY.error("Error while processing buffered events PostHog app with config id "+e.id,n),t.errored=!0}}Vr(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var n of e)this.setupSiteApp(n)}Kr(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var n of Object.values(this.apps))try{null==n.processEvent||n.processEvent(t)}catch(t){nY.error("Error while processing event "+e.event+" for site app "+n.id,t)}}}onRemoteConfig(e){var t,n,r,o=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this.Vr(),void this._instance.on("eventCaptured",(e=>this.Kr(e)))):void nY.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(n=this.Jr)||n.call(this),null!=(r=e.siteApps)&&r.length)if(this.isEnabled){var i=function(e,t){var n;cU["__$$ph_site_app_"+e]=o._instance,null==(n=cU.__PosthogExtensions__)||null==n.loadSiteApp||n.loadSiteApp(o._instance,t,(t=>{if(t)return nY.error("Error while initializing PostHog app with config id "+e,t)}))};for(var{id:a,url:s}of e.siteApps)i(a,s)}else nY.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var oY,iY=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","bytespider"],aY=function(e,t){if(!e)return!1;var n=e.toLowerCase();return iY.concat(t||[]).some((e=>{var t=e.toLowerCase();return-1!==n.indexOf(t)}))},sY=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&aY(n,t))return!0;try{var r=null==e?void 0:e.userAgentData;if(null!=r&&r.brands&&r.brands.some((e=>aY(null==e?void 0:e.brand,t))))return!0}catch(e){}return!!e.webdriver};function lY(e,t,n){return WZ({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}!function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"}(oY||(oY={}));var cY="i.posthog.com";class uY{constructor(e){this.Yr={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get uiHost(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+cY,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this.Yr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=oY.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=oY.EU:this.Yr[this.apiHost]=oY.CUSTOM),this.Yr[this.apiHost]}endpointFor(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if(this.region===oY.CUSTOM)return this.apiHost+t;var n=cY+t;switch(e){case"assets":return"https://"+this.region+"-assets."+n;case"api":return"https://"+this.region+"."+n}}}var dY={icontains:(e,t)=>!!X$&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!X$&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!X$&&RZ(t.href,e),not_regex:(e,t)=>!!X$&&!RZ(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class fY{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getWebExperiments((e=>{fY.Xr("retrieved web experiments from the server"),t.Qr=new Map,e.forEach((e=>{if(e.feature_flag_key){var n;t.Qr&&(fY.Xr("setting flag key ",e.feature_flag_key," to web experiment ",e),null==(n=t.Qr)||n.set(e.feature_flag_key,e));var r=t._instance.getFeatureFlag(e.feature_flag_key);jU(r)&&e.variants[r]&&t.Zr(e.name,r,e.variants[r].transforms)}else if(e.variants)for(var o in e.variants){var i=e.variants[o];fY.ts(i)&&t.Zr(e.name,o,i.transforms)}}))}),e)},this._instance=e,this._instance.onFeatureFlags((e=>{this.onFeatureFlags(e)}))}onFeatureFlags(e){if(this._is_bot())fY.Xr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(AU(this.Qr))return this.Qr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();fY.Xr("applying feature flags",e),e.forEach((e=>{var t;if(this.Qr&&null!=(t=this.Qr)&&t.has(e)){var n,r=this._instance.getFeatureFlag(e),o=null==(n=this.Qr)?void 0:n.get(e);r&&null!=o&&o.variants[r]&&this.Zr(o.name,r,o.variants[r].transforms)}}))}}previewWebExperiment(){var e=fY.getWindowLocation();if(null!=e&&e.search){var t=pH(null==e?void 0:e.search,"__experiment_id"),n=pH(null==e?void 0:e.search,"__experiment_variant");t&&n&&(fY.Xr("previewing web experiments "+t+" && "+n),this.getWebExperiments((e=>{this.es(parseInt(t),n,e)}),!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,n){if(this._instance.config.disable_web_experiments&&!n)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!t)return e(r);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:t=>{if(200!==t.statusCode||!t.json)return e([]);var n=t.json.experiments||[];return e(n)}})}es(e,t,n){var r=n.filter((t=>t.id===e));r&&r.length>0&&(fY.Xr("Previewing web experiment ["+r[0].name+"] with variant ["+t+"]"),this.Zr(r[0].name,t,r[0].variants[t].transforms))}static ts(e){return!AU(e.conditions)&&fY.rs(e)&&fY.ss(e)}static rs(e){var t;if(AU(e.conditions)||AU(null==(t=e.conditions)?void 0:t.url))return!0;var n,r,o,i=fY.getWindowLocation();return!!i&&(null==(n=e.conditions)||!n.url||dY[null!==(r=null==(o=e.conditions)?void 0:o.urlMatchType)&&void 0!==r?r:"icontains"](e.conditions.url,i))}static getWindowLocation(){return null==X$?void 0:X$.location}static ss(e){var t;if(AU(e.conditions)||AU(null==(t=e.conditions)?void 0:t.utm))return!0;var n=cZ();if(n.utm_source){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b=null==(r=e.conditions)||null==(o=r.utm)||!o.utm_campaign||(null==(i=e.conditions)||null==(a=i.utm)?void 0:a.utm_campaign)==n.utm_campaign,w=null==(s=e.conditions)||null==(l=s.utm)||!l.utm_source||(null==(c=e.conditions)||null==(u=c.utm)?void 0:u.utm_source)==n.utm_source,x=null==(d=e.conditions)||null==(f=d.utm)||!f.utm_medium||(null==(h=e.conditions)||null==(p=h.utm)?void 0:p.utm_medium)==n.utm_medium,_=null==(g=e.conditions)||null==(m=g.utm)||!m.utm_term||(null==(v=e.conditions)||null==(y=v.utm)?void 0:y.utm_term)==n.utm_term;return b&&x&&_&&w}return!1}static Xr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];IU.info("[WebExperiments] "+e,n)}Zr(e,t,n){this._is_bot()?fY.Xr("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?n.forEach((n=>{if(n.selector){var r;fY.Xr("applying transform of variant "+t+" for experiment "+e+" ",n);var o=null==(r=document)?void 0:r.querySelectorAll(n.selector);null==o||o.forEach((e=>{var t=e;n.html&&(t.innerHTML=n.html),n.css&&t.setAttribute("style",n.css)}))}})):fY.Xr("Control variants leave the page unmodified.")}_is_bot(){return nU&&this._instance?sY(nU,this._instance.config.custom_blocked_useragents):void 0}}var hY,pY,gY,mY,vY,yY,bY={},wY=()=>{},xY="posthog",_Y=!zZ&&-1===(null==lU?void 0:lU.indexOf("MSIE"))&&-1===(null==lU?void 0:lU.indexOf("Mozilla")),kY=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:GU(null==rU?void 0:rU.location),persistence:"localStorage+cookie",persistence_name:"",loaded:wY,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:oU&&jU(null==oU?void 0:oU.search)&&-1!==oU.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==X$||null==(e=X$.location)?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;IU.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:qZ},_onCapture:wY}},SY=e=>{var t={};EU(e.process_person)||(t.person_profiles=e.process_person),EU(e.xhr_headers)||(t.request_headers=e.xhr_headers),EU(e.cookie_name)||(t.persistence_name=e.cookie_name),EU(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),EU(e.store_google)||(t.save_campaign_params=e.store_google),EU(e.verbose)||(t.debug=e.verbose);var n=WU({},t,e);return xU(e.property_blacklist)&&(EU(e.property_denylist)?n.property_denylist=e.property_blacklist:xU(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:IU.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class EY{constructor(){this.__forceAllowLocalhost=!1}get ns(){return this.__forceAllowLocalhost}set ns(e){IU.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class jY{get decideEndpointWasHit(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}constructor(){this.webPerformance=new EY,this.os=!1,this.version=uU.LIB_VERSION,this.ls=new OZ,this.config=kY(),this.SentryIntegration=Zq,this.sentryIntegration=e=>function(e,t){var n=Kq(e,t);return{name:qq,processEvent:e=>n(e)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.us=!1,this.hs=null,this.ds=null,this.vs=null,this.featureFlags=new CZ(this),this.toolbar=new Qq(this),this.scrollManager=new GZ(this),this.pageViewManager=new lK(this),this.surveys=new MZ(this),this.experiments=new fY(this),this.exceptions=new cK(this),this.rateLimiter=new LZ(this),this.requestRouter=new uY(this),this.consent=new UH(this),this.people={set:(e,t,n)=>{var r=jU(e)?{[e]:t}:e;this.setPersonProperties(r),null==n||n({})},set_once:(e,t,n)=>{var r=jU(e)?{[e]:t}:e;this.setPersonProperties(void 0,r),null==n||n({})}},this.on("eventCaptured",(e=>IU.info('send "'+(null==e?void 0:e.event)+'"',e)))}init(e,t,n){if(n&&n!==xY){var r,o=null!==(r=bY[n])&&void 0!==r?r:new jY;return o._init(e,t,n),bY[n]=o,bY[xY][n]=o,o}return this._init(e,t,n)}_init(e,t,n){var r,o;if(void 0===t&&(t={}),EU(e)||CU(e))return IU.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return IU.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.cs=[],t.person_profiles&&(this.ds=t.person_profiles),this.set_config(WU({},kY(),SY(t),{name:n,token:e})),this.config.on_xhr_error&&IU.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:G$.GZipJS,this.persistence=new AZ(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new AZ(BU({},this.config,{persistence:"sessionStorage"}));var i=BU({},this.persistence.props),a=BU({},this.sessionPersistence.props);if(this.fs=new KZ((e=>this.ps(e)),this.config.request_queue_config),this.gs=new YZ(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new eY(this),this.sessionPropsManager=new JZ(this,this.sessionManager,this.persistence)),new tK(this).startIfEnabledOrStop(),this.siteApps=new rY(this),null==(r=this.siteApps)||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new Hq(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new xH(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new sK(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new oK(this),this.exceptionObserver=new ZH(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new qH(this,VH),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new kV(this),this.historyAutocapture.startIfEnabled(),uU.DEBUG=uU.DEBUG||this.config.debug,uU.DEBUG&&IU.info("Starting in debug mode",{this:this,config:t,thisC:BU({},this.config),p:i,s:a}),this._s(),void 0!==(null==(o=t.bootstrap)?void 0:o.distinctID)){var s,l,c=this.config.get_device_id(NH()),u=null!=(s=t.bootstrap)&&s.isIdentifiedID?c:t.bootstrap.distinctID;this.persistence.set_property(NW,null!=(l=t.bootstrap)&&l.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:u})}if(this.bs()){var d,f,h=Object.keys((null==(d=t.bootstrap)?void 0:d.featureFlags)||{}).filter((e=>{var n,r;return!(null==(n=t.bootstrap)||null==(r=n.featureFlags)||!r[e])})).reduce(((e,n)=>{var r,o;return e[n]=(null==(r=t.bootstrap)||null==(o=r.featureFlags)?void 0:o[n])||!1,e}),{}),p=Object.keys((null==(f=t.bootstrap)?void 0:f.featureFlagPayloads)||{}).filter((e=>h[e])).reduce(((e,n)=>{var r,o,i,a;return null!=(r=t.bootstrap)&&null!=(o=r.featureFlagPayloads)&&o[n]&&(e[n]=null==(i=t.bootstrap)||null==(a=i.featureFlagPayloads)?void 0:a[n]),e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:h,featureFlagPayloads:p})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:DW,$device_id:null},"");else if(!this.get_distinct_id()){var g=this.config.get_device_id(NH());this.register_once({distinct_id:g,$device_id:g},""),this.persistence.set_property(NW,"anonymous")}return JU(X$,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?function(e,t){var n=e.config.segment;if(!n)return t();!function(e,t){var n=e.config.segment;if(!n)return t();var r=n=>{var r=()=>n.anonymousId()||NH();e.config.get_device_id=r,n.id()&&(e.register({distinct_id:n.id(),$device_id:r()}),e.persistence.set_property(NW,"identified")),t()},o=n.user();"then"in o&&_U(o.then)?o.then((e=>r(e))):r(o)}(e,(()=>{n.register((e=>{Promise&&Promise.resolve||Vq.warn("This browser does not have Promise support, and can not use the segment integration");var t=(t,n)=>{var r;if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(Vq.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(Vq.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var o=e.Di(n,null!==(r=t.event.properties)&&void 0!==r?r:{},new Date);return t.event.properties=Object.assign({},o,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>t(e,e.event.event),page:e=>t(e,"$pageview"),identify:e=>t(e,"$identify"),screen:e=>t(e,"$screen")}})(e)).then((()=>{t()}))}))}(this,(()=>this.ws())):this.ws(),_U(this.config._onCapture)&&this.config._onCapture!==wY&&(IU.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(e=>this.config._onCapture(e.event,e)))),this}me(e){var t,n,r,o,i,a,s,l;if(!rU||!rU.body)return IU.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this.me(e)}),500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=pU(e.supportedCompression,G$.GZipJS)?G$.GZipJS:pU(e.supportedCompression,G$.Base64)?G$.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ds?this.ds:"identified_only"}),null==(n=this.siteApps)||n.onRemoteConfig(e),null==(r=this.sessionRecording)||r.onRemoteConfig(e),null==(o=this.autocapture)||o.onRemoteConfig(e),null==(i=this.heatmaps)||i.onRemoteConfig(e),this.surveys.onRemoteConfig(e),null==(a=this.webVitalsAutocapture)||a.onRemoteConfig(e),null==(s=this.exceptionObserver)||s.onRemoteConfig(e),null==(l=this.deadClicksAutocapture)||l.onRemoteConfig(e)}ws(){try{this.config.loaded(this)}catch(G$){IU.critical("`loaded` function failed",G$)}this.ys(),this.config.capture_pageview&&setTimeout((()=>{this.consent.isOptedIn()&&this.Ss()}),1),new FZ(this).load(),this.featureFlags.decide()}ys(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null==(e=this.fs)||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||$U(this.__request_queue,(e=>this.ps(e))),this.__request_queue=[],this.ys()}_handle_unload(){var e,t;this.config.request_batching?(this.$s()&&this.capture("$pageleave"),null==(e=this.fs)||e.unload(),null==(t=this.gs)||t.unload()):this.$s()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_e(e){this.__loaded&&(_Y?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=UZ(e.url,{ip:this.config.ip?1:0}),e.headers=BU({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,n,r,o=BU({},e);o.timeout=o.timeout||6e4,o.url=UZ(o.url,{_:(new Date).getTime().toString(),ver:uU.LIB_VERSION,compression:o.compression});var i=null!==(t=o.transport)&&void 0!==t?t:"fetch",a=null!==(n=null==(r=XU(VZ,(e=>e.transport===i)))?void 0:r.method)&&void 0!==n?n:VZ[0].method;if(!a)throw new Error("No available transport method");a(o)})(BU({},e,{callback:t=>{var n,r;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null==(n=(r=this.config).on_request_error)||n.call(r,t)),null==e.callback||e.callback(t)}}))))}ps(e){this.gs?this.gs.retriableRequest(e):this._e(e)}_execute_array(e){var t,n=[],r=[],o=[];$U(e,(e=>{e&&(t=e[0],xU(t)?o.push(e):_U(e)?e.call(this):xU(e)&&"alias"===t?n.push(e):xU(e)&&-1!==t.indexOf("capture")&&_U(this[t])?o.push(e):r.push(e))}));var i=function(e,t){$U(e,(function(e){if(xU(e[0])){var n=t;UU(e,(function(e){n=n[e[0]].apply(n,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};i(n,this),i(r,this),i(o,this)}bs(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,n){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.fs){if(!this.consent.isOptedOut())if(!EU(e)&&jU(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==o||!o.isRateLimited){null!=t&&t.$current_url&&!jU(null==t?void 0:t.$current_url)&&(IU.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var i=new Date,a=(null==n?void 0:n.timestamp)||i,s=NH(),l={uuid:s,event:e,properties:this.Di(e,t||{},a,s)};o&&(l.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),(null==n?void 0:n.$set)&&(l.$set=null==n?void 0:n.$set);var c=this.ks(null==n?void 0:n.$set_once);c&&(l.$set_once=c),(l=function(e,t){return n=e,r=e=>jU(e)&&!NU(t)?e.slice(0,t):e,o=new Set,function e(t,n){return t!==Object(t)?r?r(t):t:o.has(t)?void 0:(o.add(t),xU(t)?(i=[],$U(t,(t=>{i.push(e(t))}))):(i={},UU(t,((t,n)=>{o.has(t)||(i[n]=e(t,n))}))),i);var i}(n);var n,r,o}(l,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,EU(null==n?void 0:n.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=i);var u=BU({},l.properties.$set,l.$set);if(SU(u)||this.setPersonPropertiesForFlags(u),!AU(this.config.before_send)){var d=this.xs(l);if(!d)return;l=d}this.ls.emit("eventCaptured",l);var f={method:"POST",url:null!==(r=null==n?void 0:n._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this.ps(f):this.fs.enqueue(f),l}IU.critical("This capture call is ignored due to client rate limiting.")}}else IU.error("No event name provided to posthog.capture")}else IU.uninitializedWarning("posthog.capture")}je(e){return this.on("eventCaptured",(t=>e(t.event,t)))}Di(e,t,n,r){if(n=n||new Date,!this.persistence||!this.sessionPersistence)return t;var o=this.persistence.remove_event_timer(e),i=BU({},t);if(i.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(i.$cookieless_mode=!0),"$snapshot"===e){var a=BU({},this.persistence.properties(),this.sessionPersistence.properties());return i.distinct_id=a.distinct_id,(!jU(i.distinct_id)&&!OU(i.distinct_id)||CU(i.distinct_id))&&IU.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),i}var s,l=yZ(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:c,windowId:u}=this.sessionManager.checkAndGetSessionAndWindowId();i.$session_id=c,i.$window_id=u}this.sessionPropsManager&&WU(i,this.sessionPropsManager.getSessionProps());try{var d;this.sessionRecording&&WU(i,this.sessionRecording.sdkDebugProperties),i.$sdk_debug_retry_queue_size=null==(d=this.gs)?void 0:d.length}catch(e){i.$sdk_debug_error_capturing_properties=String(e)}if(this.requestRouter.region===oY.CUSTOM&&(i.$lib_custom_api_host=this.config.api_host),s="$pageview"===e?this.pageViewManager.doPageView(n,r):"$pageleave"===e?this.pageViewManager.doPageLeave(n):this.pageViewManager.doEvent(),i=WU(i,s),"$pageview"===e&&rU&&(i.title=rU.title),!EU(o)){var f=n.getTime()-o;i.$duration=parseFloat((f/1e3).toFixed(3))}lU&&this.config.opt_out_useragent_filter&&(i.$browser_type=this._is_bot()?"bot":"browser"),(i=WU({},l,this.persistence.properties(),this.sessionPersistence.properties(),i)).$is_identified=this._isIdentified(),xU(this.config.property_denylist)?UU(this.config.property_denylist,(function(e){delete i[e]})):IU.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var h=this.config.sanitize_properties;h&&(IU.error("sanitize_properties is deprecated. Use before_send instead"),i=h(i,e));var p=this.Es();return i.$process_person_profile=p,p&&this.Is("_calculate_event_properties"),i}ks(e){var t;if(!this.persistence||!this.Es())return e;if(this.os)return e;var n=this.persistence.get_initial_props(),r=null==(t=this.sessionPropsManager)?void 0:t.getSetOnceProps(),o=WU({},n,r||{},e||{}),i=this.config.sanitize_properties;return i&&(IU.error("sanitize_properties is deprecated. Use before_send instead"),o=i(o,"$set_once")),this.os=!0,SU(o)?void 0:o}register(e,t){var n;null==(n=this.persistence)||n.register(e,t)}register_once(e,t,n){var r;null==(r=this.persistence)||r.register_once(e,t,n)}register_for_session(e){var t;null==(t=this.sessionPersistence)||t.register(e)}unregister(e){var t;null==(t=this.persistence)||t.unregister(e)}unregister_for_session(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)}Ps(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}getEarlyAccessFeatures(e,t,n){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,n)}on(e,t){return this.ls.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,n;return null!==(t=null==(n=this.sessionManager)?void 0:n.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,n){if(!this.__loaded||!this.persistence)return IU.uninitializedWarning("posthog.identify");if(OU(e)&&(e=e.toString(),IU.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))IU.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(this.Is("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var o=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}e!==r&&e!==this.get_property(eW)&&(this.unregister(eW),this.register({distinct_id:e}));var i="anonymous"===(this.persistence.get_property(NW)||"anonymous");e!==r&&i?(this.persistence.set_property(NW,"identified"),this.setPersonPropertiesForFlags(BU({},n||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:n||{}}),this.vs=lY(e,t,n),this.featureFlags.setAnonymousDistinctId(r)):(t||n)&&this.setPersonProperties(t,n),e!==r&&(this.reloadFeatureFlags(),this.unregister(CW))}}else IU.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.Is("posthog.setPersonProperties")){var n=lY(this.get_distinct_id(),e,t);this.vs!==n?(this.setPersonPropertiesForFlags(BU({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.vs=n):IU.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,n){if(e&&t){if(this.Is("posthog.group")){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:BU({},r,{[e]:t})}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags({[e]:n})),r[e]===t||n||this.reloadFeatureFlags()}}else IU.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0),this.Is("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,n,r,o;if(IU.info("reset"),!this.__loaded)return IU.uninitializedWarning("posthog.reset");var i=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(n=this.sessionPersistence)||n.clear(),this.surveys.reset(),null==(r=this.persistence)||r.set_property(NW,"anonymous"),null==(o=this.sessionManager)||o.resetSessionId(),this.vs=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:DW,$device_id:null},"");else{var a=this.config.get_device_id(NH());this.register_once({distinct_id:a,$device_id:e?a:i},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:n}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(null!=e&&e.withTimestamp&&n){var o,i=null!==(o=e.timestampLookBack)&&void 0!==o?o:10;if(!n)return r;r+="?t="+Math.max(Math.floor(((new Date).getTime()-n)/1e3)-i,0)}return r}alias(e,t){return e===this.get_property(QU)?(IU.critical("Attempting to create alias for existing People user - aborting."),-2):this.Is("posthog.alias")?(EU(t)&&(t=this.get_distinct_id()),e!==t?(this.Ps(eW,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(IU.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t,n,r,o,i=BU({},this.config);kU(e)&&(WU(this.config,SY(e)),null==(t=this.persistence)||t.update_config(this.config,i),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new AZ(BU({},this.config,{persistence:"sessionStorage"})),MH.O()&&"true"===MH.A("ph_debug")&&(this.config.debug=!0),this.config.debug&&(uU.DEBUG=!0,IU.info("set_config",JSON.stringify({config:e,oldConfig:i,newConfig:BU({},this.config)},null,2))),null==(n=this.sessionRecording)||n.startIfEnabledOrStop(),null==(r=this.autocapture)||r.startIfEnabled(),null==(o=this.heatmaps)||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._s())}startSessionRecording(e){var t,n,r,o,i,a=!0===e,s={sampling:a||!(null==e||!e.sampling),linked_flag:a||!(null==e||!e.linked_flag),url_trigger:a||!(null==e||!e.url_trigger),event_trigger:a||!(null==e||!e.event_trigger)};Object.values(s).some(Boolean)&&(null==(t=this.sessionManager)||t.checkAndGetSessionAndWindowId(),s.sampling&&(null==(n=this.sessionRecording)||n.overrideSampling()),s.linked_flag&&(null==(r=this.sessionRecording)||r.overrideLinkedFlag()),s.url_trigger&&(null==(o=this.sessionRecording)||o.overrideTrigger("url")),s.event_trigger&&(null==(i=this.sessionRecording)||i.overrideTrigger("event")));this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null==(e=this.sessionRecording)||!e.started)}captureException(e,t){var n=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(BU({},xV((e=>e instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:n}),t))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null==(t=this.persistence)?void 0:t.props[e]}getSessionProperty(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]}toString(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:xY;return t!==xY&&(t=xY+"."+t),t}_isIdentified(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(NW))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(NW))}Es(){var e,t,n,r;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&SU(this.getGroups())&&(null==(e=this.persistence)||null==(t=e.props)||!t[eW])&&(null==(n=this.persistence)||null==(r=n.props)||!r[IW]))}$s(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.Es()||this.Is("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Is(e){return"never"===this.config.person_profiles?(IU.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Ps(IW,!0),!0)}_s(){var e,t,n,r,o=this.consent.isOptedOut(),i=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||o&&!!i;(null==(e=this.persistence)?void 0:e.ke)!==a&&(null==(n=this.persistence)||n.set_disabled(a)),(null==(t=this.sessionPersistence)?void 0:t.ke)!==a&&(null==(r=this.sessionPersistence)||r.set_disabled(a))}opt_in_capturing(e){var t;this.consent.optInOut(!0),this._s(),(EU(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(t=null==e?void 0:e.captureEventName)&&void 0!==t?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Ss()}opt_out_capturing(){this.consent.optInOut(!1),this._s()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return nU?sY(nU,this.config.custom_blocked_useragents):void 0}Ss(){rU&&("visible"===rU.visibilityState?this.us||(this.us=!0,this.capture("$pageview",{title:rU.title},{send_instantly:!0}),this.hs&&(rU.removeEventListener("visibilitychange",this.hs),this.hs=null)):this.hs||(this.hs=this.Ss.bind(this),JU(rU,"visibilitychange",this.hs)))}debug(e){!1===e?(null==X$||X$.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==X$||X$.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}xs(e){if(AU(this.config.before_send))return e;var t=xU(this.config.before_send)?this.config.before_send:[this.config.before_send],n=e;for(var r of t){if(n=r(n),AU(n)){var o="Event '"+e.event+"' was rejected in beforeSend function";return PU(e.event)?IU.warn(o+". This can cause unexpected behavior."):IU.info(o),null}n.properties&&!SU(n.properties)||IU.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return n}getPageViewId(){var e;return null==(e=this.pageViewManager.oe)?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,n){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(n)})}}!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=KU(e.prototype[t[n]])}(jY,["identify"]),function(e){e.Button="button",e.Tab="tab",e.Selector="selector"}(hY||(hY={})),function(e){e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}(pY||(pY={})),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(gY||(gY={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(mY||(mY={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(vY||(vY={})),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}(yY||(yY={}));var CY,NY=(CY=bY[xY]=new jY,function(){function e(){e.done||(e.done=!0,_Y=!1,UU(bY,(function(e){e._dom_loaded()})))}null!=rU&&rU.addEventListener?"complete"===rU.readyState?e():JU(rU,"DOMContentLoaded",e,{capture:!1}):X$&&IU.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),CY),AY=q.createContext({client:NY});function OY(e,t,n){if(void 0===n&&(n=new WeakMap),e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(n.has(e)&&n.get(e)===t)return!0;n.set(e,t);var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var i=0,a=r;i<a.length;i++){var s=a[i];if(!o.includes(s))return!1;if(!OY(e[s],t[s],n))return!1}return!0}function RY(e){var t=e.children,n=e.client,r=e.apiKey,o=e.options,i=q.useRef(null),a=q.useMemo((function(){return n?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),o&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),NY)}),[n,r,JSON.stringify(o)]);return q.useEffect((function(){if(!n){var e=i.current;e?(r!==e.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),o&&!OY(o,e.options)&&NY.set_config(o),i.current={apiKey:r,options:null!=o?o:{}}):(NY.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),NY.init(r,o),i.current={apiKey:r,options:null!=o?o:{}})}}),[n,r,JSON.stringify(o)]),K.createElement(AY.Provider,{value:{client:a}},t)}var PY=function(e,t){return PY=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},PY(e,t)};var TY=function(e){return"function"==typeof e},IY={componentStack:null,error:null},MY="[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element.";!function(e){function t(t){var n=e.call(this,t)||this;return n.state=IY,n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}PY(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.componentDidCatch=function(e,t){var n,r=t.componentStack,o=this.props.additionalProperties;this.setState({error:e,componentStack:r}),TY(o)?n=o(e):"object"==typeof o&&(n=o),this.context.client.captureException(e,n)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.fallback,r=this.state;if(null==r.componentStack)return TY(t)?t():t;var o=TY(n)?K.createElement(n,{error:r.error,componentStack:r.componentStack}):n;return K.isValidElement(o)?o:(console.warn(MY),K.createElement(K.Fragment,null))},t.contextType=AY}(K.Component);const DY=e=>e.slice(-10);function LY(){return"undefined"!=typeof window}function BY(e){return $Y(e)?(e.nodeName||"").toLowerCase():"#document"}function FY(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function zY(e){var t;return null==(t=($Y(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function $Y(e){return!!LY()&&(e instanceof Node||e instanceof FY(e).Node)}function UY(e){return!!LY()&&(e instanceof Element||e instanceof FY(e).Element)}function WY(e){return!!LY()&&(e instanceof HTMLElement||e instanceof FY(e).HTMLElement)}function HY(e){return!(!LY()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof FY(e).ShadowRoot)}function VY(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=XY(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function qY(e){return["table","td","th"].includes(BY(e))}function KY(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(J$){return!1}}))}function ZY(e){const t=YY(),n=UY(e)?XY(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function YY(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function GY(e){return["html","body","#document"].includes(BY(e))}function XY(e){return FY(e).getComputedStyle(e)}function JY(e){return UY(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function QY(e){if("html"===BY(e))return e;const t=e.assignedSlot||e.parentNode||HY(e)&&e.host||zY(e);return HY(t)?t.host:t}function eG(e){const t=QY(e);return GY(t)?e.ownerDocument?e.ownerDocument.body:e.body:WY(t)&&VY(t)?t:eG(t)}function tG(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=eG(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=FY(o);if(i){const e=nG(a);return t.concat(a,a.visualViewport||[],VY(o)?o:[],e&&n?tG(e):[])}return t.concat(o,tG(o,[],n))}function nG(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const rG=Math.min,oG=Math.max,iG=Math.round,aG=Math.floor,sG=e=>({x:e,y:e}),lG={left:"right",right:"left",bottom:"top",top:"bottom"},cG={start:"end",end:"start"};function uG(e,t,n){return oG(e,rG(t,n))}function dG(e,t){return"function"==typeof e?e(t):e}function fG(e){return e.split("-")[0]}function hG(e){return e.split("-")[1]}function pG(e){return"x"===e?"y":"x"}function gG(e){return"y"===e?"height":"width"}function mG(e){return["top","bottom"].includes(fG(e))?"y":"x"}function vG(e){return pG(mG(e))}function yG(e){return e.replace(/start|end/g,(e=>cG[e]))}function bG(e){return e.replace(/left|right|bottom|top/g,(e=>lG[e]))}function wG(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}const xG="data-floating-ui-focusable";function _G(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&HY(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function kG(e){return"composedPath"in e?e.composedPath()[0]:e.target}function SG(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function EG(e){return(null==e?void 0:e.ownerDocument)||document}function jG(e,t,n){void 0===n&&(n=!0);let r=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),o=r;for(;o.length;)o=n?e.filter((e=>{var t;return null==(t=o)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})):e,r=r.concat(o);return r}function CG(e,t){return["mouse","pen"].includes(e)}var NG="undefined"!=typeof document?q.useLayoutEffect:q.useEffect;const AG={...Z}.useInsertionEffect||(e=>e());function OG(e){const t=q.useRef((()=>{}));return AG((()=>{t.current=e})),q.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function RG(e,t,n){let{reference:r,floating:o}=e;const i=mG(t),a=vG(t),s=gG(a),l=fG(t),c="y"===i,u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let h;switch(l){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(hG(t)){case"start":h[a]-=f*(n&&c?-1:1);break;case"end":h[a]+=f*(n&&c?-1:1)}return h}async function PG(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=dG(t,e),p=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(h),g=s[f?"floating"===d?"reference":"floating":d],m=wG(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=wG(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:y,strategy:l}):v);return{top:(m.top-w.top+p.top)/b.y,bottom:(w.bottom-m.bottom+p.bottom)/b.y,left:(m.left-w.left+p.left)/b.x,right:(w.right-m.right+p.right)/b.x}}function TG(e){const t=XY(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=WY(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=iG(n)!==i||iG(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function IG(e){return UY(e)?e:e.contextElement}function MG(e){const t=IG(e);if(!WY(t))return sG(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=TG(t);let a=(i?iG(n.width):n.width)/r,s=(i?iG(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const DG=sG(0);function LG(e){const t=FY(e);return YY()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:DG}function BG(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=IG(e);let a=sG(1);t&&(r?UY(r)&&(a=MG(r)):a=MG(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==FY(e))&&t}(i,n,r)?LG(i):sG(0);let l=(o.left+s.x)/a.x,c=(o.top+s.y)/a.y,u=o.width/a.x,d=o.height/a.y;if(i){const e=FY(i),t=r&&UY(r)?FY(r):r;let n=e,o=nG(n);for(;o&&r&&t!==n;){const e=MG(o),t=o.getBoundingClientRect(),r=XY(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=i,c+=a,n=FY(o),o=nG(n)}}return wG({width:u,height:d,x:l,y:c})}function FG(e,t){const n=JY(e).scrollLeft;return t?t.left+n:BG(zY(e)).left+n}function zG(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:FG(e,r)),y:r.top+t.scrollTop}}function $G(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=FY(e),r=zY(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const e=YY();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=zY(e),n=JY(e),r=e.ownerDocument.body,o=oG(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=oG(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+FG(e);const s=-n.scrollTop;return"rtl"===XY(r).direction&&(a+=oG(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}(zY(e));else if(UY(t))r=function(e,t){const n=BG(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=WY(e)?MG(e):sG(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=LG(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return wG(r)}function UG(e,t){const n=QY(e);return!(n===t||!UY(n)||GY(n))&&("fixed"===XY(n).position||UG(n,t))}function WG(e,t,n){const r=WY(t),o=zY(t),i="fixed"===n,a=BG(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=sG(0);function c(){l.x=FG(o)}if(r||!r&&!i)if(("body"!==BY(t)||VY(o))&&(s=JY(t)),r){const e=BG(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&c();i&&!r&&o&&c();const u=!o||r||i?sG(0):zG(o,s);return{x:a.left+s.scrollLeft-l.x-u.x,y:a.top+s.scrollTop-l.y-u.y,width:a.width,height:a.height}}function HG(e){return"static"===XY(e).position}function VG(e,t){if(!WY(e)||"fixed"===XY(e).position)return null;if(t)return t(e);let n=e.offsetParent;return zY(e)===n&&(n=n.ownerDocument.body),n}function qG(e,t){const n=FY(e);if(KY(e))return n;if(!WY(e)){let t=QY(e);for(;t&&!GY(t);){if(UY(t)&&!HG(t))return t;t=QY(t)}return n}let r=VG(e,t);for(;r&&qY(r)&&HG(r);)r=VG(r,t);return r&&GY(r)&&HG(r)&&!ZY(r)?n:r||function(e){let t=QY(e);for(;WY(t)&&!GY(t);){if(ZY(t))return t;if(KY(t))return null;t=QY(t)}return null}(e)||n}const KG={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,a=zY(r),s=!!t&&KY(t.floating);if(r===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},c=sG(1);const u=sG(0),d=WY(r);if((d||!d&&!i)&&(("body"!==BY(r)||VY(a))&&(l=JY(r)),WY(r))){const e=BG(r);c=MG(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const f=!a||d||i?sG(0):zG(a,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}},getDocumentElement:zY,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i="clippingAncestors"===n?KY(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=tG(e,[],!1).filter((e=>UY(e)&&"body"!==BY(e))),o=null;const i="fixed"===XY(e).position;let a=i?QY(e):e;for(;UY(a)&&!GY(a);){const t=XY(a),n=ZY(a);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||VY(a)&&!n&&UG(e,a))?r=r.filter((e=>e!==a)):o=t,a=QY(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[...i,r],s=a[0],l=a.reduce(((e,n)=>{const r=$G(t,n,o);return e.top=oG(r.top,e.top),e.right=rG(r.right,e.right),e.bottom=rG(r.bottom,e.bottom),e.left=oG(r.left,e.left),e}),$G(t,s,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:qG,getElementRects:async function(e){const t=this.getOffsetParent||qG,n=this.getDimensions,r=await n(e.floating);return{reference:WG(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=TG(e);return{width:t,height:n}},getScale:MG,isElement:UY,isRTL:function(e){return"rtl"===XY(e).direction}};function ZG(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function YG(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=IG(e),u=o||i?[...c?tG(c):[],...tG(t)]:[];u.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=c&&s?function(e,t){let n,r=null;const o=zY(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(s||t(),!f||!h)return;const p={rootMargin:-aG(d)+"px "+-aG(o.clientWidth-(u+f))+"px "+-aG(o.clientHeight-(d+h))+"px "+-aG(u)+"px",threshold:oG(0,rG(1,l))||1};let g=!0;function m(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return a();r?a(!1,r):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}1!==r||ZG(c,e.getBoundingClientRect())||a(),g=!1}try{r=new IntersectionObserver(m,{...p,root:o.ownerDocument})}catch(iV){r=new IntersectionObserver(m,p)}r.observe(e)}(!0),i}(c,n):null;let f,h=-1,p=null;a&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let g=l?BG(e):null;return l&&function t(){const r=BG(e);g&&!ZG(g,r)&&n();g=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(f)}}const GG=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=fG(n),s=hG(n),l="y"===mG(n),c=["left","top"].includes(a)?-1:1,u=i&&l?-1:1,d=dG(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof p&&(h="end"===s?-1*p:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},XG=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=dG(e,t),c={x:n,y:r},u=await PG(t,l),d=mG(fG(o)),f=pG(d);let h=c[f],p=c[d];if(i){const e="y"===f?"bottom":"right";h=uG(h+u["y"===f?"top":"left"],h,h-u[e])}if(a){const e="y"===d?"bottom":"right";p=uG(p+u["y"===d?"top":"left"],p,p-u[e])}const g=s.fn({...t,[f]:h,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[d]:a}}}}}},JG=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=dG(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const v=fG(o),y=mG(s),b=fG(s)===s,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=f||(b||!g?[bG(s)]:function(e){const t=bG(e);return[yG(e),t,yG(t)]}(s)),_="none"!==p;!f&&_&&x.push(...function(e,t,n,r){const o=hG(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}(fG(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(yG)))),i}(s,g,p,w));const k=[s,...x],S=await PG(t,m),E=[];let j=(null==(r=i.flip)?void 0:r.overflows)||[];if(u&&E.push(S[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=hG(e),o=vG(e),i=gG(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=bG(a)),[a,bG(a)]}(o,a,w);E.push(S[e[0]],S[e[1]])}if(j=[...j,{placement:o,overflows:E}],!E.every((e=>e<=0))){var C,N;const e=((null==(C=i.flip)?void 0:C.index)||0)+1,t=k[e];if(t){var A;const n="alignment"===d&&y!==mG(t),r=(null==(A=j[0])?void 0:A.overflows[0])>0;if(!n||r)return{data:{index:e,overflows:j},reset:{placement:t}}}let n=null==(N=j.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:N.placement;if(!n)switch(h){case"bestFit":{var O;const e=null==(O=j.filter((e=>{if(_){const t=mG(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:O[0];e&&(n=e);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}},QG=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:a,elements:s}=t,{apply:l=()=>{},...c}=dG(e,t),u=await PG(t,c),d=fG(o),f=hG(o),h="y"===mG(o),{width:p,height:g}=i.floating;let m,v;"top"===d||"bottom"===d?(m=d,v=f===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(v=d,m="end"===f?"top":"bottom");const y=g-u.top-u.bottom,b=p-u.left-u.right,w=rG(g-u[m],y),x=rG(p-u[v],b),_=!t.middlewareData.shift;let k=w,S=x;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(S=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=y),_&&!f){const e=oG(u.left,0),t=oG(u.right,0),n=oG(u.top,0),r=oG(u.bottom,0);h?S=p-2*(0!==e||0!==t?e+t:oG(u.left,u.right)):k=g-2*(0!==n||0!==r?n+r:oG(u.top,u.bottom))}await l({...t,availableWidth:S,availableHeight:k});const E=await a.getDimensions(s.floating);return p!==E.width||g!==E.height?{reset:{rects:!0}}:{}}}},eX=(e,t,n)=>{const r=new Map,o={platform:KG,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=RG(c,r,l),f=r,h={},p=0;for(let g=0;g<s.length;g++){const{name:n,fn:i}=s[g],{x:m,y:v,data:y,reset:b}=await i({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=m?m:u,d=null!=v?v:d,h={...h,[n]:{...h[n],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:u,y:d}=RG(c,f,l))),g=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}})(e,t,{...o,platform:i})};var tX="undefined"!=typeof document?q.useLayoutEffect:q.useEffect;function nX(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!nX(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!nX(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function rX(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function oX(e,t){const n=rX(e);return Math.round(t*n)/n}function iX(e){const t=q.useRef(e);return tX((()=>{t.current=e})),t}const aX=(e,t)=>({...GG(e),options:[e,t]}),sX=(e,t)=>({...XG(e),options:[e,t]}),lX=(e,t)=>({...JG(e),options:[e,t]}),cX=(e,t)=>({...QG(e),options:[e,t]}),uX="data-floating-ui-focusable",dX="active",fX="selected",hX={...Z};let pX=!1,gX=0;const mX=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+gX++;const vX=hX.useId||function(){const[e,t]=q.useState((()=>pX?mX():void 0));return NG((()=>{null==e&&t(mX())}),[]),q.useEffect((()=>{pX=!0}),[]),e};const yX=q.createContext(null),bX=q.createContext(null),wX=()=>{var e;return(null==(e=q.useContext(yX))?void 0:e.id)||null},xX=()=>q.useContext(bX);function _X(e){return WY(e.target)&&"BUTTON"===e.target.tagName}function kX(e){return function(e){return WY(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}(e)}function SX(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=e,{enabled:a=!0,event:s="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0,stickIfOpen:d=!0}=t,f=q.useRef(),h=q.useRef(!1),p=q.useMemo((()=>({onPointerDown(e){f.current=e.pointerType},onMouseDown(e){const t=f.current;0===e.button&&"click"!==s&&(CG(t)&&c||(!n||!l||o.current.openEvent&&d&&"mousedown"!==o.current.openEvent.type?(e.preventDefault(),r(!0,e.nativeEvent,"click")):r(!1,e.nativeEvent,"click")))},onClick(e){const t=f.current;"mousedown"===s&&f.current?f.current=void 0:CG(t)&&c||(!n||!l||o.current.openEvent&&d&&"click"!==o.current.openEvent.type?r(!0,e.nativeEvent,"click"):r(!1,e.nativeEvent,"click"))},onKeyDown(e){f.current=void 0,e.defaultPrevented||!u||_X(e)||(" "!==e.key||kX(i)||(e.preventDefault(),h.current=!0),function(e){return WY(e.target)&&"A"===e.target.tagName}(e)||"Enter"===e.key&&r(!n||!l,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!u||_X(e)||kX(i)||" "===e.key&&h.current&&(h.current=!1,r(!n||!l,e.nativeEvent,"click"))}})),[o,i,s,c,u,r,n,d,l]);return q.useMemo((()=>a?{reference:p}:{}),[a,p])}const EX={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},jX={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},CX=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function NX(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,g=xX(),m=OG("function"==typeof l?l:()=>!1),v="function"==typeof l?m:l,y=q.useRef(!1),b=q.useRef(!1),{escapeKey:w,outsidePress:x}=CX(h),{escapeKey:_,outsidePress:k}=CX(p),S=q.useRef(!1),E=OG((e=>{var t;if(!n||!a||!s||"Escape"!==e.key)return;if(S.current)return;const o=null==(t=i.current.floatingContext)?void 0:t.nodeId,l=g?jG(g.nodesRef.current,o):[];if(!w&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),j=OG((e=>{var t;const n=()=>{var t;E(e),null==(t=kG(e))||t.removeEventListener("keydown",n)};null==(t=kG(e))||t.addEventListener("keydown",n)})),C=OG((e=>{var t;const n=y.current;y.current=!1;const a=b.current;if(b.current=!1,"click"===c&&a)return;if(n)return;if("function"==typeof v&&!v(e))return;const s=kG(e),l="["+("data-floating-ui-"+"inert"+"]");const u=EG(o.floating).querySelectorAll(l);let d=UY(s)?s:null;for(;d&&!GY(d);){const e=QY(d);if(GY(e)||!UY(e))break;d=e}if(u.length&&UY(s)&&!s.matches("html,body")&&!_G(s,o.floating)&&Array.from(u).every((e=>!_G(d,e))))return;if(WY(s)&&O){const t=GY(s),n=XY(s),r=/auto|scroll/,o=t||r.test(n.overflowX),i=t||r.test(n.overflowY),a=o&&s.clientWidth>0&&s.scrollWidth>s.clientWidth,l=i&&s.clientHeight>0&&s.scrollHeight>s.clientHeight,c="rtl"===n.direction,u=l&&(c?e.offsetX<=s.offsetWidth-s.clientWidth:e.offsetX>s.clientWidth),d=a&&e.offsetY>s.clientHeight;if(u||d)return}const f=null==(t=i.current.floatingContext)?void 0:t.nodeId,h=g&&jG(g.nodesRef.current,f).some((t=>{var n;return SG(e,null==(n=t.context)?void 0:n.elements.floating)}));if(SG(e,o.floating)||SG(e,o.domReference)||h)return;const p=g?jG(g.nodesRef.current,f):[];if(p.length>0){let e=!0;if(p.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),N=OG((e=>{var t;const n=()=>{var t;C(e),null==(t=kG(e))||t.removeEventListener(c,n)};null==(t=kG(e))||t.addEventListener(c,n)}));q.useEffect((()=>{if(!n||!a)return;i.current.__escapeKeyBubbles=w,i.current.__outsidePressBubbles=x;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function l(){window.clearTimeout(e),S.current=!0}function u(){e=window.setTimeout((()=>{S.current=!1}),YY()?5:0)}const d=EG(o.floating);s&&(d.addEventListener("keydown",_?j:E,_),d.addEventListener("compositionstart",l),d.addEventListener("compositionend",u)),v&&d.addEventListener(c,k?N:C,k);let h=[];return f&&(UY(o.domReference)&&(h=tG(o.domReference)),UY(o.floating)&&(h=h.concat(tG(o.floating))),!UY(o.reference)&&o.reference&&o.reference.contextElement&&(h=h.concat(tG(o.reference.contextElement)))),h=h.filter((e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})),h.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{s&&(d.removeEventListener("keydown",_?j:E,_),d.removeEventListener("compositionstart",l),d.removeEventListener("compositionend",u)),v&&d.removeEventListener(c,k?N:C,k),h.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[i,o,s,v,c,n,r,f,a,w,x,E,_,j,C,k,N]),q.useEffect((()=>{y.current=!1}),[v,c]);const A=q.useMemo((()=>({onKeyDown:E,...u&&{[EX[d]]:e=>{r(!1,e.nativeEvent,"reference-press")},..."click"!==d&&{onClick(e){r(!1,e.nativeEvent,"reference-press")}}}})),[E,r,u,d]),O=q.useMemo((()=>({onKeyDown:E,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[jX[c]]:()=>{y.current=!0}})),[E,c]);return q.useMemo((()=>a?{reference:A,floating:O}:{}),[a,A,O])}function AX(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=vX(),i=q.useRef({}),[a]=q.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;null==(r=e.get(t))||r.delete(n)}}}())),s=null!=wX(),[l,c]=q.useState(r.reference),u=OG(((e,t,r)=>{i.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)})),d=q.useMemo((()=>({setPositionReference:c})),[]),f=q.useMemo((()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference})),[l,r.reference,r.floating]);return q.useMemo((()=>({dataRef:i,open:t,onOpenChange:u,elements:f,events:a,floatingId:o,refs:d})),[t,u,f,a,o,d])}function OX(e){void 0===e&&(e={});const{nodeId:t}=e,n=AX({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,a]=q.useState(null),[s,l]=q.useState(null),c=(null==o?void 0:o.domReference)||i,u=q.useRef(null),d=xX();NG((()=>{c&&(u.current=c)}),[c]);const f=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,d]=q.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=q.useState(r);nX(f,r)||h(r);const[p,g]=q.useState(null),[m,v]=q.useState(null),y=q.useCallback((e=>{e!==_.current&&(_.current=e,g(e))}),[]),b=q.useCallback((e=>{e!==k.current&&(k.current=e,v(e))}),[]),w=i||p,x=a||m,_=q.useRef(null),k=q.useRef(null),S=q.useRef(u),E=null!=l,j=iX(l),C=iX(o),N=iX(c),A=q.useCallback((()=>{if(!_.current||!k.current)return;const e={placement:t,strategy:n,middleware:f};C.current&&(e.platform=C.current),eX(_.current,k.current,e).then((e=>{const t={...e,isPositioned:!1!==N.current};O.current&&!nX(S.current,t)&&(S.current=t,ld.flushSync((()=>{d(t)})))}))}),[f,t,n,C,N]);tX((()=>{!1===c&&S.current.isPositioned&&(S.current.isPositioned=!1,d((e=>({...e,isPositioned:!1}))))}),[c]);const O=q.useRef(!1);tX((()=>(O.current=!0,()=>{O.current=!1})),[]),tX((()=>{if(w&&(_.current=w),x&&(k.current=x),w&&x){if(j.current)return j.current(w,x,A);A()}}),[w,x,A,j,E]);const R=q.useMemo((()=>({reference:_,floating:k,setReference:y,setFloating:b})),[y,b]),P=q.useMemo((()=>({reference:w,floating:x})),[w,x]),T=q.useMemo((()=>{const e={position:n,left:0,top:0};if(!P.floating)return e;const t=oX(P.floating,u.x),r=oX(P.floating,u.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...rX(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,s,P.floating,u.x,u.y]);return q.useMemo((()=>({...u,update:A,refs:R,elements:P,floatingStyles:T})),[u,A,R,P,T])}({...e,elements:{...o,...s&&{reference:s}}}),h=q.useCallback((e=>{const t=UY(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;l(t),f.refs.setReference(t)}),[f.refs]),p=q.useCallback((e=>{(UY(e)||null===e)&&(u.current=e,a(e)),(UY(f.refs.reference.current)||null===f.refs.reference.current||null!==e&&!UY(e))&&f.refs.setReference(e)}),[f.refs]),g=q.useMemo((()=>({...f.refs,setReference:p,setPositionReference:h,domReference:u})),[f.refs,p,h]),m=q.useMemo((()=>({...f.elements,domReference:c})),[f.elements,c]),v=q.useMemo((()=>({...f,...r,refs:g,elements:m,nodeId:t})),[f,g,m,t,r]);return NG((()=>{r.dataRef.current.floatingContext=v;const e=null==d?void 0:d.nodesRef.current.find((e=>e.id===t));e&&(e.context=v)})),q.useMemo((()=>({...f,context:v,refs:g,elements:m})),[f,g,m,v])}function RX(e,t,n){const r=new Map,o="item"===n;let i=e;if(o&&e){const{[dX]:t,[fX]:n,...r}=e;i=r}return{..."floating"===n&&{tabIndex:-1,[uX]:""},...i,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,i]=t;var a;o&&[dX,fX].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof i&&(null==(a=r.get(n))||a.push(i),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return null==(e=r.get(n))?void 0:e.map((e=>e(...o))).find((e=>void 0!==e))})):e[n]=i)})),e):e),{})}}function PX(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),o=q.useCallback((t=>RX(t,e,"reference")),t),i=q.useCallback((t=>RX(t,e,"floating")),n),a=q.useCallback((t=>RX(t,e,"item")),r);return q.useMemo((()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a})),[o,i,a])}const TX=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function IX(e,t){var n,r;void 0===t&&(t={});const{open:o,elements:i,floatingId:a}=e,{enabled:s=!0,role:l="dialog"}=t,c=vX(),u=(null==(n=i.domReference)?void 0:n.id)||c,d=q.useMemo((()=>{var e,t;return(null==(e=(t=i.floating)?t.hasAttribute(xG)?t:t.querySelector("["+xG+"]")||t:null)?void 0:e.id)||a}),[i.floating,a]),f=null!=(r=TX.get(l))?r:l,h=null!=wX(),p=q.useMemo((()=>"tooltip"===f||"label"===l?{["aria-"+("label"===l?"labelledby":"describedby")]:o?d:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":"alertdialog"===f?"dialog":f,"aria-controls":o?d:void 0,..."listbox"===f&&{role:"combobox"},..."menu"===f&&{id:u},..."menu"===f&&h&&{role:"menuitem"},..."select"===l&&{"aria-autocomplete":"none"},..."combobox"===l&&{"aria-autocomplete":"list"}}),[f,d,h,o,u,l]),g=q.useMemo((()=>{const e={id:d,...f&&{role:f}};return"tooltip"===f||"label"===l?e:{...e,..."menu"===f&&{"aria-labelledby":u}}}),[f,d,u,l]),m=q.useCallback((e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:d+"-fui-option"}};switch(l){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,"aria-selected":n}}return{}}),[d,l]);return q.useMemo((()=>s?{reference:p,floating:g,item:m}:{}),[s,p,g,m])}const MX=({options:e=[],value:t=[],onChange:n=()=>{},placeholder:r="Select options...",searchable:o=!0,maxHeight:i=200,className:a=""})=>{const[s,l]=q.useState(!1),[c,u]=q.useState(""),d=q.useRef(null),{refs:f,floatingStyles:h,context:p}=OX({open:s,onOpenChange:l,middleware:[aX(4),lX(),sX({padding:8}),cX({apply({rects:e,elements:t}){Object.assign(t.floating.style,{width:`${Math.max(e.reference.width,200)}px`,maxHeight:`${i}px`})}})],whileElementsMounted:YG}),g=e.filter((e=>e.label.toLowerCase().includes(c.toLowerCase())));q.useEffect((()=>{s&&o&&d.current&&d.current.focus()}),[s,o]),q.useEffect((()=>{const e=e=>{f.floating.current&&!f.floating.current.contains(e.target)&&f.domReference.current&&!f.domReference.current.contains(e.target)&&l(!1)};if(s)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[s,f]);const m=e.filter((e=>t.includes(e.value))).map((e=>e.label));return ne.jsxs("div",{className:`relative ${a}`,children:[ne.jsx("div",{ref:f.setReference,onClick:()=>l(!s),className:"min-h-[40px] px-3 py-2 border border-fantasy-border rounded-md bg-fantasy-dark cursor-pointer hover:border-fantasy-border/40 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:0===m.length?ne.jsx("span",{className:"text-fantasy-text-muted",children:r}):m.map(((r,o)=>ne.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-fantasy-accent/40 text-fantasy-text rounded text-sm",children:[r,ne.jsx("button",{onClick:o=>{const i=e.find((e=>e.label===r));i&&((e,r)=>{r.stopPropagation();const o=t.filter((t=>t!==e));n(o)})(i.value,o)},className:"hover:bg-fantasy-accent-dark rounded-full p-0.5 transition-colors",children:ne.jsx(Zh,{size:12})})]},o)))}),ne.jsx(Wh,{size:20,className:"text-fantasy-text-muted transition-transform "+(s?"rotate-180":"")})]})}),s&&ne.jsxs("div",{ref:f.setFloating,style:h,className:"z-50 bg-fantasy-dark border border-fantasy-border rounded-md shadow-lg overflow-hidden",children:[o&&ne.jsx("div",{className:"p-2 border-b border-fantasy-border",children:ne.jsx("input",{ref:d,type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Search options...",className:"w-full px-2 py-1 border border-fantasy-border rounded text-sm focus:outline-none focus:ring-1 focus:ring-fantasy-accent"})}),ne.jsx("div",{className:"overflow-y-auto",style:{maxHeight:i-(o?50:0)},children:0===g.length?ne.jsx("div",{className:"px-3 py-2 text-fantasy-text-muted text-sm",children:c?"No options found":"No options available"}):g.map((e=>{const r=t.includes(e.value);return ne.jsxs("div",{onClick:()=>(e=>{const r=t.includes(e.value)?t.filter((t=>t!==e.value)):[...t,e.value];n(r)})(e),className:"px-3 py-2 cursor-pointer hover:bg-fantasy-light flex items-center gap-2 "+(r?"bg-fantasy-glass":""),children:[ne.jsx("div",{className:"w-4 h-4 border rounded flex items-center justify-center "+(r?"bg-fantasy-accent border-fantasy-border":"border-fantasy-border"),children:r&&ne.jsx(Uh,{size:12,className:"text-fantasy-text"})}),ne.jsx("span",{className:"text-sm "+(r?"text-fantasy-accent-dark font-medium":"text-fantasy-text"),children:e.label})]},e.value)}))})]})]})},DX=async e=>{try{return await hv.versions.get(e)}catch(J$){return void console.log("Error getting subscription:",J$)}},LX=async(e,t)=>{switch(e){case"system":return await(async e=>{try{return await hv.systems.get(e)}catch(J$){console.log("Error deleting system:",J$)}})(t);case"datapack":return await(async e=>{try{return await hv.datapacks.get(e)}catch(J$){console.log("Error getting datapack:",J$)}})(t)}},BX=(e=[])=>{const t=eR((async()=>{const t=await hv.subscriptions.toArray();if(!t)return[];const n=t.filter((t=>!t.deleted_at&&!e.includes(t.resource_type))).sort(((e,t)=>new Date(e.subscribed_at)>new Date(t.subscribed_at)?-1:1)),r={},o={};for(let e=0;e<n.length;e++){const t=n[e];if(o[t.resource_id])continue;if(!r[t.resource_id]){const e=await LX(t.resource_type,t.resource_id);if(!e){o[t.resource_id]=!0;continue}r[t.resource_id]={item_id:t.resource_id,item:e,type:t.resource_type,versions:[],subscriptions:[],hashes:{}}}const i=await DX(t.version_id),a=await hv.typeHashes.get(t.version_id);r[t.resource_id].subscriptions.push(t),i&&r[t.resource_id].versions.push(i),a&&(r[t.resource_id].hashes[t.version_id]=a.hashes)}return Object.values(r).map((e=>({...e,versions:e.versions.sort(((e,t)=>{if(!e||!t)return 0;return new Date(e.created_at)>new Date(t.created_at)?1:0}))})))}),[]);return{subscriptions:t,isLoading:void 0===t}};function FX({id:e}){var t,n;const{characters:r}=Z$(),{subscriptions:o}=BX(["theme"]),i=q.useMemo((()=>(o||[]).filter((e=>"system"===e.type))),[o]),a=q.useContext(AY).client,[s,l]=q.useState(),[c,u]=q.useState(),[d,f]=q.useState([]),h=q.useMemo((()=>(o||[]).filter((e=>!("datapack"!==e.type||!s||!c))).map((e=>({label:e.item.name,value:e.versions.filter((t=>{if(!s||!c)return!1;const n=s.hashes[c.local_id],r=e.hashes[t.local_id];for(let e=0;e<r.length;e++){const t=r[e],o=n.find((e=>e.name===t.name));if(!o)return!1;if(t.hash!==o.hash)return!1}return!0}))[0]})))),[o,s]),[p,g]=q.useState(0),[m,v]=q.useState({local_id:"",user_id:"none",name:"",data:null!==(t=null==c?void 0:c.data.defaultCharacterData)&&void 0!==t?t:{},system:{local_id:"",version_id:""},datapacks:[],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});q.useEffect((()=>{const e=i[0];if(!e||e.item_id===(null==s?void 0:s.item_id))return;l(e);let t=e.versions[0];t&&t.local_id!==(null==c?void 0:c.local_id)&&(u(t),v({...m,data:structuredClone(t.data.defaultCharacterData),system:{local_id:e.item_id,version_id:t.local_id},datapacks:[]}))}),[i]);const y=q.useCallback((()=>hh(e)),[e]);return s?ne.jsxs(lp,{isOpen:!0,onClose:y,children:[ne.jsx(dp,{title:"Create Character",onClose:y}),ne.jsx(cp,{children:0===p&&ne.jsxs(ne.Fragment,{children:[ne.jsx(hp,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:m.name,onChange:e=>v({...m,name:e}),isValid:!r.find((e=>e.name===m.name)),errorMessage:"Names must be unique"}),ne.jsx(Qb,{id:"character-system",label:"Tabletop System",value:s.item_id,onChange:e=>{const t=i.find((t=>t.item_id===e));if(!t)return;const n=t.versions[0];n&&(l(t),u(n),v({...m,data:structuredClone(n.data.defaultCharacterData),system:{local_id:t.item_id,version_id:n.local_id}}))},children:i.map((e=>ne.jsx("option",{value:e.item_id,children:e.item.name},e.item_id)))}),ne.jsx(Qb,{id:"character-system-version",label:"System Version",value:null!==(n=null==c?void 0:c.local_id)&&void 0!==n?n:"",onChange:e=>{const t=s.versions.find((t=>t.local_id===e));t&&(u(t),v({...m,data:structuredClone(t.data.defaultCharacterData),system:{local_id:s.item_id,version_id:t.local_id}}))},children:s.versions.map((e=>ne.jsx("option",{value:e.local_id,children:DY(e.local_id)},e.local_id)))}),ne.jsx("p",{children:"Datapacks"}),ne.jsx(MX,{options:h,value:d,onChange:e=>f(e)})]})}),ne.jsxs(up,{children:[ne.jsx("nav",{className:"flex flex-grow mr-4","aria-label":"Breadcrumb",children:ne.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse",children:[ne.jsx("li",{className:"inline-flex items-center cursor-pointer",onClick:()=>g(0),children:ne.jsxs("p",{className:"inline-flex items-center text-sm font-medium text-fantasy-text-muted hover:text-fantasy-text",children:[ne.jsx("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:ne.jsx("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})}),"Basics"]})}),null==c?void 0:c.data.creator.map(((e,t)=>p<t+1?ne.jsx(ne.Fragment,{}):ne.jsx("li",{className:"cursor-pointer",onClick:()=>g(t+1),children:ne.jsxs("div",{className:"flex items-center",children:[ne.jsx("svg",{className:"rtl:rotate-180 w-3 h-3 text-fantasy-text-muted mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})}),ne.jsx("p",{className:"ms-1 text-sm font-medium text-fantasy-text-muted hover:bg-fantasy-text",children:e.name})]})},t)))]})}),ne.jsx(sp,{id:"create-character-button",color:"primary",disabled:0===m.name.length,onClick:async()=>{await(async(e,t,n,r)=>{try{const{user:o}=Ph.get(),i=(null==o?void 0:o.id)||"none";let a=await XO();for(;!(await JO(a));)a=await XO();const s={local_id:a,user_id:i,name:e,data:t,system:n,datapacks:r,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},l=Y$.safeParse(s);if(!l.success)return void console.log("Invalid character data:",l.error.format());let c=await Oh.get("updated_characters")||[];return c.includes(s.local_id)||await Oh.set("updated_characters",[...c,s.local_id]),await hv.characters.add(s)}catch(J$){op("Error creating Character.","error"),console.log("Error creating character:",J$)}})(m.name,m.data,m.system,d.map((e=>({pack_id:e.reference_id,version_id:e.local_id})))),l(i[0]),y(),a.capture("character_created",{character_name:m.name})},children:"Create"})]})]}):ne.jsxs(lp,{isOpen:!0,onClose:y,children:[ne.jsx(dp,{title:"Error grabbing system",onClose:y}),ne.jsx(cp,{children:ne.jsx("h3",{children:"There was an error grabbing a default system, please subscribe to a system from the marketplace or import something!"})}),ne.jsx(up,{children:ne.jsx(sp,{color:"primary",onClick:y,children:"Close"})})]})}const zX=(e,t,n)=>{const r=new Blob([JSON.stringify({type:e,...t},null,2)],{type:"application/json"}),o=URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download=`${n}.json`,i.click(),URL.revokeObjectURL(o),i.remove()};const $X=({label:e,options:t,containerClassName:n=""})=>{const[r,o]=q.useState(!1),{refs:i,floatingStyles:a,context:s}=OX({open:r,onOpenChange:o,middleware:[aX(4),lX(),sX()]}),l=SX(s),c=NX(s),u=IX(s,{role:"menu"}),{getReferenceProps:d,getFloatingProps:f}=PX([l,c,u]);return ne.jsxs("div",{className:"inline-flex relative",children:[ne.jsx("button",{ref:i.setReference,...d(),className:`bg-white/10 text-fantasy-text border border-white/20 px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:bg-white/20 ${n}`,children:e}),r&&ne.jsx("div",{ref:i.setFloating,style:a,...f(),className:"absolute z-50 mt-1 flex flex-col w-48 rounded-lg shadow-lg bg-fantasy-medium border border-fantasy-border",children:t.map(((e,t)=>ne.jsx("div",{onClick:()=>(e=>{e.onClick(),o(!1)})(e),className:"text-fantasy-text hover:bg-fantasy-dark rounded-lg px-4 py-2 text-sm font-medium cursor-pointer",children:e.label},t)))})]})},UX=async e=>{Ih(e);const t=await Wb.post("/characters/change-synced",{characterIds:e});return Ih(e),t.data},WX=({id:e,title:t,type:n,message:r,onConfirm:o})=>{const i=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:i,children:[ne.jsx(dp,{title:t,onClose:i}),ne.jsx(cp,{className:"text-center",children:ne.jsxs("div",{className:"p-4",children:[ne.jsx("p",{className:"text-lg font-medium mb-2",children:r}),ne.jsx("p",{className:"text-sm font-semibold text-red-500",children:"This action cannot be undone."})]})}),ne.jsx(up,{children:ne.jsx(sp,{color:n,onClick:()=>{o(),i()},children:"Confirm"})})]})},HX=({id:e,label:t,onChange:n})=>{const[r,o]=q.useState("");return ne.jsxs("div",{children:[ne.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:`${t} - ${null!=r?r:"none"}`}),ne.jsx("input",{type:"file",id:"file-upload",name:"file-name",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){const e=new FileReader;e.onload=e=>{var t;const i=null===(t=e.target)||void 0===t?void 0:t.result;o(r.name),n(i)},e.readAsText(r)}}})]})},VX=({id:e,title:t,onSave:n})=>{const[r,o]=q.useState(""),i=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:i,children:[ne.jsx(dp,{title:t,onClose:i}),ne.jsx(cp,{children:ne.jsx(HX,{id:"upload",label:"Upload file",onChange:o})}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:i,children:"Cancel"}),ne.jsx(sp,{color:"primary",disabled:!1,onClick:()=>{n(r),i()},children:"Update"})]})]})};function qX({id:e,type:t,ImportModal:n,CreateModal:r}){const o=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:o,children:[ne.jsx(dp,{title:"Import Or Create?",onClose:o}),ne.jsx(cp,{children:ne.jsxs("p",{children:["Would you like to import or create a ",t,"?"]})}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"light",onClick:()=>{fh(`import-${t}`,(({id:e})=>ne.jsx(n,{id:e}))),o()},children:"Import"}),ne.jsx(sp,{color:"light",onClick:()=>{fh(`create-${t}`,(({id:e})=>ne.jsx(r,{id:e}))),o()},children:"Create"})]})]})}const KX="bg-green-400 shadow-green-400/60",ZX="bg-red-400 shadow-red-400/60",YX=()=>{const{characters:e,isLoading:t}=Z$();!function(){const e=eR((async()=>await hv.systems.toArray()),[])}(),function(){const e=eR((async()=>(await hv.versions.toArray()).filter((e=>{const t=e.deleted_at,n=void 0!==e.local_id.split("|")[1];return!t&&!n}))),[])}();const{isLoggedIn:n,user:r,synced_characters:o}=Ph.useValue(),[i,a]=q.useState(!1),[s,l]=q.useState(!1),c=ff();if(t)return ne.jsx(ne.Fragment,{});const u=e=>{var t;const i=[{label:"export",onClick:()=>zX("character",e,`${e.name}-export`)},{label:"rename",onClick:()=>fh("edit-string",(({id:t})=>ne.jsx(JR,{id:t,title:"Rename Character",data:e.name,onSave:t=>(async(e,t)=>{try{let n=await Oh.get("updated_characters")||[];return n.includes(e)||await Oh.set("updated_characters",[...n,e]),await hv.characters.update(e,{name:t,updated_at:(new Date).toISOString()})}catch(J$){console.log("Error renaming character:",J$)}})(e.local_id,t)})))},{label:"delete",onClick:()=>fh("confirm",(({id:t})=>ne.jsx(WX,{id:t,title:"Delete Character",type:"danger",message:"Are you sure you want to delete this character?",onConfirm:()=>(async e=>{try{let t=await Oh.get("updated_characters")||[];return t.includes(e)||await Oh.set("updated_characters",[...t,e]),await hv.characters.update(e,{deleted_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})}catch(J$){console.log("Error deleting character:",J$)}})(e.local_id)})))}];if((null!==(t=null==r?void 0:r.role)&&void 0!==t?t:0)>=200||!n)return i;const a=o.includes(e.local_id);return i.unshift({label:a?"UnSync":"Sync",onClick:()=>{let t=[];o.includes(e.local_id)?t=o.filter((t=>t!==e.local_id)):length<3&&(t=[...o,e.local_id]),UX(t)}}),i};return ne.jsxs("div",{children:[ne.jsx(Yb,{title:"Your Adventuring Party",subtitle:"Manage your heroes and their epic journeys"}),ne.jsx("div",{className:"p-4",children:ne.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[ne.jsxs("div",{className:"fantasy-add-gradient border-2 border-dashed border-fantasy-accent/30 rounded-2xl p-10 text-center cursor-pointer transition-all duration-300 min-h-[200px] flex flex-col justify-center items-center hover:border-fantasy-accent/60 hover:fantasy-add-gradient hover:-translate-y-1",onClick:()=>fh("import-or-create",(({id:e})=>ne.jsx(qX,{id:e,type:"character",ImportModal:({id:e})=>ne.jsx(VX,{id:e,title:"Import Character",onSave:async e=>{try{const t=JSON.parse(e);t&&await(async e=>{try{let t=e.local_id||`deviceId-${tp()}`;if(void 0!==await hv.characters.get({id:e.id||""}))return void console.log("Character already exists in the database");if(void 0!==await hv.characters.get({local_id:t}))return void console.log("Character already exists in the database");if(!(await hv.systems.get({local_id:e.system.local_id})))return void console.log("System not found in the database");const n={...e,updated_at:(new Date).toISOString()};{const e=Y$.safeParse(n);if(!e.success)return void console.log("Invalid character data:",e.error.format())}return await hv.characters.add(n)}catch(J$){console.log("Error creating system:",J$)}})(t),op("Unable to parse character.","error")}catch(J$){op("Error parsing / importing character.","error"),console.error(J$)}}}),CreateModal:({id:e})=>ne.jsx(FX,{id:e})}))),children:[ne.jsx("div",{className:"text-5xl text-fantasy-accent/60 mb-4",children:""}),ne.jsx("div",{className:"text-fantasy-accent/80 text-base font-medium",children:"Create New Hero"})]}),e.length?e.map(((t,n)=>ne.jsxs("div",{style:{zIndex:""+(e.length-n)},className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[ne.jsx("div",{className:`absolute top-4 right-4 w-2 h-2 rounded-full shadow-lg ${o.includes(t.local_id)?KX:ZX}`}),ne.jsxs("div",{className:"flex items-center mb-4",children:[ne.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:t.name[0]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:t.name}),ne.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[ne.jsx("span",{children:" Ranger"}),ne.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:DY(t.system.local_id)})]})]})]}),ne.jsxs("div",{className:"flex gap-4 my-4",children:[ne.jsxs("div",{className:"text-center flex-1",children:[ne.jsx("div",{className:"text-lg font-bold text-fantasy-accent",children:"12"}),ne.jsx("div",{className:"text-[10px] text-white/60 uppercase tracking-wider",children:"Level"})]}),ne.jsxs("div",{className:"text-center flex-1",children:[ne.jsx("div",{className:"text-lg font-bold text-fantasy-accent",children:"347"}),ne.jsx("div",{className:"text-[10px] text-white/60 uppercase tracking-wider",children:"XP"})]}),ne.jsxs("div",{className:"text-center flex-1",children:[ne.jsx("div",{className:"text-lg font-bold text-fantasy-accent",children:"5"}),ne.jsx("div",{className:"text-[10px] text-white/60 uppercase tracking-wider",children:"Quests"})]})]}),ne.jsxs("div",{className:"flex gap-2 mt-4",children:[ne.jsx("button",{className:"flex-1 fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>c(t.local_id),children:"Continue Adventure"}),ne.jsx($X,{label:"",options:u(t)})]})]},t.local_id))):ne.jsx("h5",{children:"Doesn't look like you have any characters yet? Try creating one!"})]})})]})};var GX=Object.getOwnPropertyNames,XX=Object.getOwnPropertySymbols,JX=Object.prototype.hasOwnProperty;function QX(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function eJ(e){return function(t,n,r){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r);var o=r.cache,i=o.get(t),a=o.get(n);if(i&&a)return i===n&&a===t;o.set(t,n),o.set(n,t);var s=e(t,n,r);return o.delete(t),o.delete(n),s}}function tJ(e){return GX(e).concat(XX(e))}var nJ=Object.hasOwn||function(e,t){return JX.call(e,t)};function rJ(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var oJ=Object.getOwnPropertyDescriptor,iJ=Object.keys;function aJ(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function sJ(e,t){return rJ(e.getTime(),t.getTime())}function lJ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function cJ(e,t){return e===t}function uJ(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var o,i,a=new Array(r),s=e.entries(),l=0;(o=s.next())&&!o.done;){for(var c=t.entries(),u=!1,d=0;(i=c.next())&&!i.done;)if(a[d])d++;else{var f=o.value,h=i.value;if(n.equals(f[0],h[0],l,d,e,t,n)&&n.equals(f[1],h[1],f[0],h[0],e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1;l++}return!0}var dJ=rJ;function fJ(e,t,n){var r=iJ(e),o=r.length;if(iJ(t).length!==o)return!1;for(;o-- >0;)if(!bJ(e,t,n,r[o]))return!1;return!0}function hJ(e,t,n){var r,o,i,a=tJ(e),s=a.length;if(tJ(t).length!==s)return!1;for(;s-- >0;){if(!bJ(e,t,n,r=a[s]))return!1;if(o=oJ(e,r),i=oJ(t,r),(o||i)&&(!o||!i||o.configurable!==i.configurable||o.enumerable!==i.enumerable||o.writable!==i.writable))return!1}return!0}function pJ(e,t){return rJ(e.valueOf(),t.valueOf())}function gJ(e,t){return e.source===t.source&&e.flags===t.flags}function mJ(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var o,i,a=new Array(r),s=e.values();(o=s.next())&&!o.done;){for(var l=t.values(),c=!1,u=0;(i=l.next())&&!i.done;){if(!a[u]&&n.equals(o.value,i.value,o.value,i.value,e,t,n)){c=a[u]=!0;break}u++}if(!c)return!1}return!0}function vJ(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function yJ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function bJ(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||nJ(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var wJ=Array.isArray,xJ="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,_J=Object.assign,kJ=Object.prototype.toString.call.bind(Object.prototype.toString);var SJ=EJ();function EJ(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,o=e.createInternalComparator,i=e.createState,a=e.strict,s=void 0!==a&&a,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?hJ:aJ,areDatesEqual:sJ,areErrorsEqual:lJ,areFunctionsEqual:cJ,areMapsEqual:r?QX(uJ,hJ):uJ,areNumbersEqual:dJ,areObjectsEqual:r?hJ:fJ,arePrimitiveWrappersEqual:pJ,areRegExpsEqual:gJ,areSetsEqual:r?QX(mJ,hJ):mJ,areTypedArraysEqual:r?hJ:vJ,areUrlsEqual:yJ};if(n&&(o=_J({},o,n(o))),t){var i=eJ(o.areArraysEqual),a=eJ(o.areMapsEqual),s=eJ(o.areObjectsEqual),l=eJ(o.areSetsEqual);o=_J({},o,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return o}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,o=e.areFunctionsEqual,i=e.areMapsEqual,a=e.areNumbersEqual,s=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(e,h,p){if(e===h)return!0;if(null==e||null==h)return!1;var g=typeof e;if(g!==typeof h)return!1;if("object"!==g)return"number"===g?a(e,h,p):"function"===g&&o(e,h,p);var m=e.constructor;if(m!==h.constructor)return!1;if(m===Object)return s(e,h,p);if(wJ(e))return t(e,h,p);if(null!=xJ&&xJ(e))return d(e,h,p);if(m===Date)return n(e,h,p);if(m===RegExp)return c(e,h,p);if(m===Map)return i(e,h,p);if(m===Set)return u(e,h,p);var v=kJ(e);return"[object Date]"===v?n(e,h,p):"[object RegExp]"===v?c(e,h,p):"[object Map]"===v?i(e,h,p):"[object Set]"===v?u(e,h,p):"[object Object]"===v?"function"!=typeof e.then&&"function"!=typeof h.then&&s(e,h,p):"[object URL]"===v?f(e,h,p):"[object Error]"===v?r(e,h,p):"[object Arguments]"===v?s(e,h,p):("[object Boolean]"===v||"[object Number]"===v||"[object String]"===v)&&l(e,h,p)}}(l),u=o?o(c):(t=c,function(e,n,r,o,i,a,s){return t(e,n,s)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,i=e.strict;if(r)return function(e,a){var s=r(),l=s.cache,c=void 0===l?t?new WeakMap:void 0:l,u=s.meta;return n(e,a,{cache:c,equals:o,meta:u,strict:i})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:o,meta:void 0,strict:i})};var a={cache:void 0,equals:o,meta:void 0,strict:i};return function(e,t){return n(e,t,a)}}({circular:r,comparator:c,createState:i,equals:u,strict:s})}EJ({strict:!0}),EJ({circular:!0}),EJ({circular:!0,strict:!0}),EJ({createInternalComparator:function(){return rJ}}),EJ({strict:!0,createInternalComparator:function(){return rJ}}),EJ({circular:!0,createInternalComparator:function(){return rJ}}),EJ({circular:!0,createInternalComparator:function(){return rJ},strict:!0});const jJ=({actions:e,system:t,character:n,updateState:r})=>ne.jsx("aside",{className:"bg-fantasy-glass backdrop-blur-lg border-l border-fantasy-border shadow-2xl fixed top-0 right-0 z-40 w-64 h-screen transition-transform translate-x-full lg:-translate-x-0","aria-label":"Character Sidebar",children:ne.jsxs("div",{className:"h-full flex flex-col px-3 py-4 overflow-y-auto",children:[ne.jsx("div",{className:"py-4 mb-4 border-b border-neutral-200 dark:border-neutral-700",children:ne.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"Quick Actions"})}),ne.jsx("div",{className:"flex flex-col gap-2",children:null==e?void 0:e.map((e=>ne.jsxs("div",{className:"fantasy-card-gradient border border-fantasy-border rounded px-4 py-2 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",onClick:()=>{new GT(e.blueprint).processBlueprint({},{system:t,character:n,page:{name:"null page",blueprint:{nodes:[],edges:[]},lexical:"",state:[]}},r)},children:[ne.jsx("p",{className:"text-neutral-100",children:e.name}),ne.jsx("p",{className:"text-sm text-neutral-300",children:e.description})]},e.name)))})]})}),CJ=()=>{const{id:e}=pf(),t=eR((()=>hv.characters.get(n||"")),[n=e]);var n;const[r,o]=q.useState(null),i=q.useCallback((e=>{if(!t||!r)return;const n=e.system.pages.findIndex((t=>t.name===e.page.name));SJ(t,e.character)&&SJ(r,e.system)&&SJ(e.system.pages[n],e.page)||((async(e,t)=>{try{let n=await Oh.get("updated_characters")||[];return n.includes(e)||await Oh.set("updated_characters",[...n,e]),await hv.characters.update(e,{data:t,updated_at:(new Date).toISOString()})}catch(J$){console.log("Error updating character data:",J$)}})(t.local_id,e.character.data),o({...e.system,pages:e.system.pages.map((t=>t.name===e.page.name?e.page:t))}))}),[t,r]);return q.useEffect((()=>{(async()=>{if(!t)return;const e=await DX(t.system.version_id);if(!e)return op(`Error grabbing system, version: ${t.system.version_id}`,"error");if(SJ(r,e.data))return;let n=[];for(let r=0;r<t.datapacks.length;r++){const e=t.datapacks[r],o=await DX(e.version_id);if(!o)return op(`Error grabbing datapack, version: ${e.version_id}`,"error");n=[...n,...o.data.packData]}const i=e.data.data.map((e=>{const t=n.flat().filter((t=>t.name===e.name)).flatMap((e=>e.data));return{...e,data:[...e.data,...t]}}));o({...e.data,data:i})})()}),[t]),t?r?ne.jsxs("div",{className:"flex flex-col h-full w-full",children:[ne.jsx("p",{id:"loading-text",className:"hidden",children:"loading..."}),ne.jsx(Yb,{title:t.name,subtitle:"Chaotic / Neutral",hasSidebar:!0}),ne.jsxs("div",{className:"p-4 lg:mr-64 flex flex-col flex-grow overflow-hidden xl:grid grid-cols-2",children:[ne.jsx("div",{className:"relative w-full h-full flex flex-col flex-grow overflow-hidden",children:ne.jsx("div",{className:"overflow-y-scroll p-2 max-h-full",children:ne.jsx(NJ,{className:"first-tab-selector",system:r,character:t,updateState:i})})}),ne.jsx("div",{className:"relative hidden flex-col xl:flex flex-grow overflow-hidden",children:ne.jsx("div",{className:"overflow-y-scroll p-2 max-h-full",children:ne.jsx(NJ,{className:"second-tab-selector",system:r,character:t,updateState:i})})})]}),ne.jsx(jJ,{actions:r.actions,system:r,character:t,updateState:i})]}):ne.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading system data..."}):ne.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading character data..."})},NJ=({system:e,character:t,updateState:n,className:r})=>{const[o,i]=q.useState(e.pages[0].name);return ne.jsxs(ne.Fragment,{children:[ne.jsx(Qb,{className:r,id:"tab-selector",label:"",value:o,onChange:i,children:e.pages.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),e.pages.map((r=>ne.jsx(AJ,{character:t,system:e,page:r,currentTab:o,updateState:n},r.name)))]})};function AJ({page:e,character:t,system:n,currentTab:r,updateState:o}){const i=q.useMemo((()=>e.lexical?JSON.parse(UT.decompress(UT.decodeBase64(e.lexical))):{}),[e.lexical]);return r!==e.name?ne.jsx(ne.Fragment,{}):ne.jsx(q$,{data:i,state:{character:t,system:n,page:e},updateState:o})}const OJ=dv.object({id:dv.string({invalid_type_error:"id must be a string"}).optional(),local_id:dv.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:dv.string(),data:dv.any(),reference_id:dv.string({invalid_type_error:"reference_id must be a string"}),reference_type:dv.enum(["system","datapack"]),version:dv.string().optional(),created_at:dv.string().datetime({offset:!0}),updated_at:dv.string().datetime({offset:!0}),deleted_at:dv.string().datetime({offset:!0}).nullable().optional()}),RJ=async(e,t,n=!1)=>{switch(e){case"system":return await(async(e,t=!1)=>{try{return t?await hv.systems.delete(e):await hv.systems.update(e,{updated_at:(new Date).toISOString()})}catch(J$){console.log("Error deleting system:",J$)}})(t,n);case"datapack":return await(async(e,t=!1)=>{try{return t?await hv.datapacks.delete(e):await hv.datapacks.update(e,{updated_at:(new Date).toISOString()})}catch(J$){console.log("Error deleting datapack:",J$)}})(t,n)}},PJ=async(e,t)=>{try{return await hv.typeHashes.put({local_id:e,hashes:t})}catch(J$){console.log("Error creating system:",J$)}},TJ=dv.object({id:dv.string({invalid_type_error:"id must be a string"}).optional(),local_id:dv.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:dv.string({invalid_type_error:"user_id must be a string"}),resource_type:dv.enum(["system","theme","datapack"]),resource_id:dv.string({invalid_type_error:"resource_id must be a string"}),version_id:dv.string(),auto_update:dv.boolean().optional().default(!0),version:dv.string().optional(),subscribed_at:dv.string().datetime({offset:!0}),updated_at:dv.string().datetime({offset:!0}),deleted_at:dv.string().datetime({offset:!0}).nullable().optional()}),IJ=async(e,t,n,r)=>{try{const{user:o}=Ph.get(),i=(null==o?void 0:o.id)||"none";let a=await XO();for(;!(await JO(a));)a=await XO();const s={local_id:a,user_id:i,resource_type:e,resource_id:t,version_id:n,auto_update:r,subscribed_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},l=TJ.safeParse(s);return l.success?(await hv.subscriptions.add(s),s):void console.log("Invalid subscription data:",l.error.format())}catch(J$){console.log("Error creating subscription:",J$)}},MJ=async(e,t=!1)=>{try{return await hv.versions.delete(e)}catch(J$){console.log("Error deleting version:",J$)}},DJ=async(e,t)=>{switch(e){case"system":return await(async e=>{try{let t=await XO();for(;!(await JO(t));)t=await XO();const{user:n}=Ph.get(),r=n?n.id:"none",o={...e,local_id:t,user_id:r,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),deleted_at:null},i=CR.safeParse(o);return i.success?(await hv.systems.add(o),o):void console.log("Invalid character data:",i.error.format())}catch(J$){console.log("Error creating system:",J$)}})(t);case"datapack":return await(async e=>{try{let t=await XO();for(;!(await JO(t));)t=await XO();const{user:n}=Ph.get(),r=n?n.id:"none",o={...e,local_id:t,user_id:r,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},i=fv.safeParse(o);return i.success?(await hv.datapacks.add(o),o):void console.log("Invalid datapack data:",i.error.format())}catch(J$){console.log("Error creating datapack:",J$)}})(t)}},LJ=({label:e,options:t,onClick:n,containerClassName:r=""})=>{const[o,i]=q.useState(!1),{refs:a,floatingStyles:s,context:l}=OX({open:o,onOpenChange:i,middleware:[aX(4),lX(),sX()]}),c=SX(l),u=NX(l),d=IX(l,{role:"menu"}),{getReferenceProps:f,getFloatingProps:h}=PX([c,u,d]);return ne.jsxs("div",{className:"inline-flex relative",children:[ne.jsx("button",{onClick:()=>{n()},className:`px-4 py-2 bg-white/10 text-fantasy-text border border-white/60 rounded-l-lg text-xs font-medium transition-all duration-300 hover:bg-white/20 ${r}`,children:e}),ne.jsx("button",{ref:a.setReference,...f(),className:"px-2 py-2 bg-white/10 text-fantasy-text rounded-r-lg border border-white/20 text-xs font-medium transition-all duration-300 hover:bg-white/20",children:ne.jsx(Wh,{size:16})}),o&&ne.jsx("div",{ref:a.setFloating,style:s,...h(),className:"absolute z-50 mt-1 flex flex-col w-48 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:t.map(((e,t)=>ne.jsx("div",{onClick:()=>(e=>{e.onClick(),i(!1)})(e),className:"bg-neutral-50 text-neutral-950 dark:bg-neutral-800 dark:text-neutral-50 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-lg px-4 py-2 text-sm font-medium cursor-pointer",children:e.label},t)))})]})},BJ=async e=>{try{return await hv.subscriptions.update(e,{deleted_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})}catch(J$){console.log("Error deleting subscription:",J$)}};var FJ={exports:{}};const zJ=s(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));
/**
       * [js-sha256]{@link https://github.com/emn178/js-sha256}
       *
       * @version 0.11.1
       * @author Chen, Yi-Cyuan [emn178@gmail.com]
       * @copyright Chen, Yi-Cyuan 2014-2025
       * @license MIT
       */
!function(e){!function(){var t="input is invalid type",n="object"==typeof window,r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var o=!n&&"object"==typeof self,a=!r.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&"renderer"!=process.type;a?r=i:o&&(r=self);var s=!r.JS_SHA256_NO_COMMON_JS&&e.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,c="0123456789abcdef".split(""),u=[-2147483648,8388608,32768,128],d=[24,16,8,0],f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=["hex","array","digest","arrayBuffer"],p=[];!r.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!l||!r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var g=function(e,t){return function(n){return new w(t,!0).update(n)[e]()}},m=function(e){var t=g("hex",e);a&&(t=v(t,e)),t.create=function(){return new w(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<h.length;++n){var r=h[n];t[r]=g(r,e)}return t},v=function(e,n){var o,i=zJ,a=zJ.Buffer,s=n?"sha224":"sha256";o=a.from&&!r.JS_SHA256_NO_BUFFER_FROM?a.from:function(e){return new a(e)};return function(n){if("string"==typeof n)return i.createHash(s).update(n,"utf8").digest("hex");if(null==n)throw new Error(t);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===a?i.createHash(s).update(o(n)).digest("hex"):e(n)}},y=function(e,t){return function(n,r){return new x(n,t,!0).update(r)[e]()}},b=function(e){var t=y("hex",e);t.create=function(t){return new x(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<h.length;++n){var r=h[n];t[r]=y(r,e)}return t};function w(e,t){t?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function x(e,n,r){var o,i=typeof e;if("string"===i){var a,s=[],c=e.length,u=0;for(o=0;o<c;++o)(a=e.charCodeAt(o))<128?s[u++]=a:a<2048?(s[u++]=192|a>>>6,s[u++]=128|63&a):a<55296||a>=57344?(s[u++]=224|a>>>12,s[u++]=128|a>>>6&63,s[u++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++o)),s[u++]=240|a>>>18,s[u++]=128|a>>>12&63,s[u++]=128|a>>>6&63,s[u++]=128|63&a);e=s}else{if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||l&&ArrayBuffer.isView(e)))throw new Error(t)}e.length>64&&(e=new w(n,!0).update(e).array());var d=[],f=[];for(o=0;o<64;++o){var h=e[o]||0;d[o]=92^h,f[o]=54^h}w.call(this,n,r),this.update(f),this.oKeyPad=d,this.inner=!0,this.sharedMemory=r}w.prototype.update=function(e){if(!this.finalized){var n,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(t);if(null===e)throw new Error(t);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||l&&ArrayBuffer.isView(e)))throw new Error(t);n=!0}for(var o,i,a=0,s=e.length,c=this.blocks;a<s;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,this.block=c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),n)for(i=this.start;a<s&&i<64;++a)c[i>>>2]|=e[a]<<d[3&i++];else for(i=this.start;a<s&&i<64;++a)(o=e.charCodeAt(a))<128?c[i>>>2]|=o<<d[3&i++]:o<2048?(c[i>>>2]|=(192|o>>>6)<<d[3&i++],c[i>>>2]|=(128|63&o)<<d[3&i++]):o<55296||o>=57344?(c[i>>>2]|=(224|o>>>12)<<d[3&i++],c[i>>>2]|=(128|o>>>6&63)<<d[3&i++],c[i>>>2]|=(128|63&o)<<d[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++a)),c[i>>>2]|=(240|o>>>18)<<d[3&i++],c[i>>>2]|=(128|o>>>12&63)<<d[3&i++],c[i>>>2]|=(128|o>>>6&63)<<d[3&i++],c[i>>>2]|=(128|63&o)<<d[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=c[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=u[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var e,t,n,r,o,i,a,s,l,c=this.h0,u=this.h1,d=this.h2,h=this.h3,p=this.h4,g=this.h5,m=this.h6,v=this.h7,y=this.blocks;for(e=16;e<64;++e)t=((o=y[e-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,n=((o=y[e-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,y[e]=y[e-16]+t+y[e-7]+n|0;for(l=u&d,e=0;e<64;e+=4)this.first?(this.is224?(i=300032,v=(o=y[0]-1413257819)-150054599|0,h=o+24177077|0):(i=704751109,v=(o=y[0]-210244248)-1521486534|0,h=o+143694565|0),this.first=!1):(t=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),r=(i=c&u)^c&d^l,v=h+(o=v+(n=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&g^~p&m)+f[e]+y[e])|0,h=o+(t+r)|0),t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),r=(a=h&c)^h&u^i,m=d+(o=m+(n=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&p^~v&g)+f[e+1]+y[e+1])|0,t=((d=o+(t+r)|0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(s=d&h)^d&c^a,g=u+(o=g+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&v^~m&p)+f[e+2]+y[e+2])|0,t=((u=o+(t+r)|0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),r=(l=u&d)^u&h^s,p=c+(o=p+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&m^~g&v)+f[e+3]+y[e+3])|0,c=o+(t+r)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+c|0,this.h1=this.h1+u|0,this.h2=this.h2+d|0,this.h3=this.h3+h|0,this.h4=this.h4+p|0,this.h5=this.h5+g|0,this.h6=this.h6+m|0,this.h7=this.h7+v|0},w.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,a=this.h6,s=this.h7,l=c[e>>>28&15]+c[e>>>24&15]+c[e>>>20&15]+c[e>>>16&15]+c[e>>>12&15]+c[e>>>8&15]+c[e>>>4&15]+c[15&e]+c[t>>>28&15]+c[t>>>24&15]+c[t>>>20&15]+c[t>>>16&15]+c[t>>>12&15]+c[t>>>8&15]+c[t>>>4&15]+c[15&t]+c[n>>>28&15]+c[n>>>24&15]+c[n>>>20&15]+c[n>>>16&15]+c[n>>>12&15]+c[n>>>8&15]+c[n>>>4&15]+c[15&n]+c[r>>>28&15]+c[r>>>24&15]+c[r>>>20&15]+c[r>>>16&15]+c[r>>>12&15]+c[r>>>8&15]+c[r>>>4&15]+c[15&r]+c[o>>>28&15]+c[o>>>24&15]+c[o>>>20&15]+c[o>>>16&15]+c[o>>>12&15]+c[o>>>8&15]+c[o>>>4&15]+c[15&o]+c[i>>>28&15]+c[i>>>24&15]+c[i>>>20&15]+c[i>>>16&15]+c[i>>>12&15]+c[i>>>8&15]+c[i>>>4&15]+c[15&i]+c[a>>>28&15]+c[a>>>24&15]+c[a>>>20&15]+c[a>>>16&15]+c[a>>>12&15]+c[a>>>8&15]+c[a>>>4&15]+c[15&a];return this.is224||(l+=c[s>>>28&15]+c[s>>>24&15]+c[s>>>20&15]+c[s>>>16&15]+c[s>>>12&15]+c[s>>>8&15]+c[s>>>4&15]+c[15&s]),l},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,a=this.h6,s=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,o>>>24&255,o>>>16&255,o>>>8&255,255&o,i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a];return this.is224||l.push(s>>>24&255,s>>>16&255,s>>>8&255,255&s),l},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},x.prototype=new w,x.prototype.finalize=function(){if(w.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();w.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),w.prototype.finalize.call(this)}};var _=m();_.sha256=_,_.sha224=m(!0),_.sha256.hmac=b(),_.sha224.hmac=b(!0),s?e.exports=_:(r.sha256=_.sha256,r.sha224=_.sha224)}()}(FJ);var $J=FJ.exports;const UJ=e=>({name:e.name,hash:$J.sha256(e.properties.sort(((e,t)=>e.key.localeCompare(t.key))).map((e=>JSON.stringify(e))).join("/"))}),WJ=async(e,t)=>{const n=await DJ(t.reference_type,e);if(!n)return op("Error creating forked content, try again.","error");const r=await(async(e,t,n)=>{try{let r=await XO();for(;!(await JO(r));)r=await XO();const{user:o}=Ph.get(),i={local_id:r,user_id:(null==o?void 0:o.id)||"none",data:n,reference_id:t,reference_type:e,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},a=OJ.safeParse(i);return a.success?(await hv.versions.add(i),i):void console.log("Invalid subscription data:",a.error.format())}catch(J$){console.log("Error creating subscription:",J$)}})(t.reference_type,n.local_id,t.data);if(!r)return RJ(t.reference_type,n.local_id,!0),op("Error creating new version data for forked content, cleaning up...","error");if(!(await PJ(r.local_id,r.data.types.map(UJ))))return RJ(t.reference_type,n.local_id,!0),MJ(r.local_id,!0),op("Error creating hashes for forked content, cleaning up...","error");return await IJ(t.reference_type,n.local_id,r.local_id,!1)?void 0:(RJ(t.reference_type,n.local_id,!0),MJ(r.local_id,!0),hv.typeHashes.delete(r.local_id),op("Error creating subscription for forked content, cleaning up...","error"))},HJ=({subs:e,itemData:t})=>{let n=ff();const{user:r}=Ph.useValue(),[o,i]=q.useState(!1),a=r&&t.user_id&&r.id===t.user_id||!r&&"none"===t.user_id;return ne.jsxs("div",{className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ne.jsxs("div",{className:"flex items-center gap-3",children:[ne.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-fantasy-accent-dark rounded-lg flex items-center justify-center",children:ne.jsx("span",{className:"text-xl font-bold text-fantasy-text",children:t.name[0]})}),ne.jsx("div",{children:ne.jsx("div",{className:"text-lg font-semibold text-fantasy-text",children:t.name})})]}),ne.jsxs("div",{className:"bg-fantasy-dark border border-fantasy-medium text-fantasy-text rounded-md text-xs font-medium px-1 py-2",children:[e.length," versions"]})]}),ne.jsxs("div",{className:"mb-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ne.jsxs("span",{className:"text-sm text-fantasy-text-muted",children:["Latest: ",new Date(e[0].subscribed_at).toLocaleDateString()," - ",new Date(e[0].subscribed_at).toLocaleTimeString()]}),ne.jsx("button",{className:"bg-none border-none text-fantasy-accent cursor-pointer text-xs p-0 underline ml-auto",onClick:()=>i(!o),children:"Show all versions"})]}),ne.jsx("div",{className:"transition-all overflow-hidden "+(o?"max-h-60 overflow-y-auto border border-fantasy-border mt-2 rounded-md":"max-h-12"),children:e.map(((e,r)=>ne.jsxs("div",{className:`flex items-center justify-between p-2 transition-all border-b border-solid border-fantasy-medium ${o?"p-3":"h-12"} ${r>0?"":"bg-gradient-to-r from-green-900 to-transparent"}`,children:[ne.jsxs("div",{className:"flex flex-col gap-1",children:[ne.jsx("div",{className:"text-sm text-neutral-200",children:DY(e.version_id)}),ne.jsxs("div",{className:"text-xs text-neutral-400",children:[new Date(e.subscribed_at).toLocaleDateString()," - ",new Date(e.subscribed_at).toLocaleTimeString()]})]}),ne.jsx("div",{className:`px-1 py-2 rounded text-xs font-medium ${r>0?"":"bg-[#065f46] text-[#10b981]"} ${o?"hidden":""}`,children:r>0?"Active":"Latest"}),ne.jsx("div",{className:""+(o?"":"hidden"),children:ne.jsx($X,{label:"",options:[{label:a?"Edit":"Fork",onClick:async()=>{if(a)return n(`/library/${e.resource_type}/${e.version_id}`);const r=await DX(e.version_id);return r?WJ(t,r):op("Error grabbing data to fork.","error")}},{label:"Export",onClick:async()=>{const n=await DX(e.version_id);if(!n)return op("Error grabbing version data to export.","error");zX(n.reference_type,{item:t,version:n},`${t.name}-${n.local_id}`)}},{label:"Delete",onClick:()=>fh("delete-subscription",(({id:t})=>ne.jsx(WX,{id:t,title:"Delete Subscription",type:"danger",message:"Are you sure you want to delete this subscription?",onConfirm:()=>BJ(e.local_id)})))}]})})]},r)))})]}),ne.jsx("div",{className:"flex transition-all "+(o?"h-0 w-0 overflow-hidden":""),children:ne.jsx(LJ,{label:a?"Edit":"Fork",onClick:async()=>{const r=await DX(e[0].version_id);return r?a?n(`/library/${r.reference_type}/${r.local_id}`):WJ(t,r):op("Error grabbing version info.","error")},options:[{label:"Export",onClick:async()=>{const n=await DX(e[0].version_id);if(!n)return op("Error grabbing version info.","error");zX(n.reference_type,{item:t,version:n},`${t.name}-${n.local_id}`)}},{label:"Delete",onClick:()=>fh("delete-subscription",(({id:t})=>ne.jsx(WX,{id:t,title:"Delete Subscription",type:"danger",message:"Are you sure you want to delete this subscription?",onConfirm:()=>BJ(e[0].local_id)})))}]})})]})},VJ=({id:e,onCreate:t})=>{const[n,r]=q.useState(""),[o,i]=q.useState("system"),{subscriptions:a}=BX(),[s,l]=q.useState(),[c,u]=q.useState();q.useEffect((()=>{const e=null==a?void 0:a.find((e=>"system"===e.type));if(!e)return console.log("no system.");let t=e.versions[0];return t?e.item_id===(null==s?void 0:s.item_id)&&t.local_id===(null==t?void 0:t.local_id)?console.log("same version and system"):(l(e),void u(t)):console.log("no version.")}),[a]);const d=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:d,children:[ne.jsx(dp,{title:"Create Subscription",onClose:d}),ne.jsxs(cp,{children:[ne.jsx(hp,{id:"name",label:"Name",placeholder:"baba yaga",value:n,onChange:r,isValid:!0,errorMessage:""}),ne.jsxs(Qb,{id:"susbcription-type",label:"Type",value:o,onChange:e=>{i(e)},children:[ne.jsx("option",{value:"system",children:"System"}),ne.jsx("option",{value:"datapack",children:"Data Pack"}),ne.jsx("option",{value:"theme",disabled:!0,children:"Theme"})]}),"datapack"===o?ne.jsxs(ne.Fragment,{children:[ne.jsx(Qb,{id:"basedOff-system",label:"System",value:(null==s?void 0:s.item_id)||"",onChange:e=>{const t=null==a?void 0:a.find((t=>t.item_id===e&&"system"===t.type));if(!t)return console.log("could not find matching system");l(t);const n=t.versions[0];n&&u(n)},children:null==a?void 0:a.filter((e=>"system"===e.type)).map((e=>ne.jsx("option",{value:e.item_id,children:e.item.name},e.item_id)))}),ne.jsx(Qb,{id:"basedOff-version",label:"Version",value:(null==c?void 0:c.local_id)||"",onChange:e=>{const t=null==s?void 0:s.versions.find((t=>t.local_id===e));if(!t)return console.log("could not find matching version");u(t)},children:null==s?void 0:s.versions.map((e=>ne.jsx("option",{value:e.local_id,children:DY(e.local_id)},e.local_id)))})]}):null]}),ne.jsx(up,{children:ne.jsx(sp,{color:"primary",onClick:async()=>{let e={},r=[];switch(o){case"system":e={creator:[],modals:[],pages:[],version:"",data:[],defaultCharacterData:{_type:{name:"CharacterData",properties:[]}},types:[],actions:[]};break;case"datapack":if(!c||!c.data)return console.log("no version data");e={types:c.data.types,packData:c.data.data.map((e=>{var t;return{...e,data:e.typeData.isArray?[]:Qw(c.data.types,null===(t=c.data)||void 0===t?void 0:t.types.find((t=>t.name===e.typeData.type)))}}))},r=c.data.types.map(UJ)}const i=await(async(e,t,n)=>{try{let r=await XO();for(;!(await JO(r));)r=await XO();const{user:o}=Ph.get(),i=o?o.id:"none",a={name:e,local_id:r,user_id:i,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},s=fv.safeParse(a);if(!s.success)return void console.log("Invalid pack data:",s.error.format());switch(t){case"system":await hv.systems.add(a);break;case"datapack":await hv.datapacks.add(a)}let l=await XO();for(;!(await JO(l));)l=await XO();const c={data:n,local_id:l,reference_id:r,reference_type:t,user_id:i,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},u=OJ.safeParse(c);if(!u.success)return void console.log("Invalid Version data:",u.error.format());await hv.versions.add(c);let d=await XO();for(;!(await JO(d));)d=await XO();const f={local_id:d,user_id:i,resource_type:t,resource_id:r,version_id:l,auto_update:!1,subscribed_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null};return await hv.subscriptions.add(f),f}catch(J$){op("Error creating subscription data. If this continues please post a issue in our discord.","error"),console.log("Error creating pack or version or creating subscription:",J$)}})(n,o,e);i&&["datapack","system"].includes(o)&&PJ(i.version_id,r),t({name:n,type:o}),d()},children:"Update"})})]})},qJ=()=>{const{subscriptions:e}=BX(),[t,n]=q.useState(!1);return ne.jsxs("div",{children:[ne.jsx(Yb,{title:"Your Collection",subtitle:"Manage your extra content"}),ne.jsxs("div",{className:"px-4",children:[e?ne.jsxs("h5",{className:"flex flex-col gap-4",children:[ne.jsxs("div",{children:[ne.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Systems"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter((e=>"system"===e.type)).map((e=>ne.jsx(HJ,{itemData:e.item,subs:e.subscriptions},e.item_id)))})]}),ne.jsxs("div",{children:[ne.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Datapacks"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter((e=>"datapack"===e.type)).map((e=>ne.jsx(HJ,{itemData:e.item,subs:e.subscriptions},e.item_id)))})]}),ne.jsxs("div",{children:[ne.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Themes"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter((e=>"theme"===e.type)).map((e=>ne.jsx(HJ,{itemData:e.item,subs:e.subscriptions},e.item_id)))})]})]}):ne.jsx("h5",{className:"mb-4 text-xl",children:"Loading..."}),ne.jsx(z$,{isOpen:t,onClick:()=>n(!t),buttons:[{name:"Create",icon:"",onClick:()=>fh("create-subscription",(({id:e})=>ne.jsx(VJ,{id:e,onCreate:()=>{}})))},{name:"Import",icon:"",onClick:()=>fh("import-system",(({id:e})=>ne.jsx(VX,{id:e,title:"Import System",onSave:async e=>{try{const t=JSON.parse(e);switch(t.type){case"system":return await(async(e,t)=>{try{let n=await XO();for(;!(await JO(n));)n=await XO();const{user:r}=Ph.get(),o=r?r.id:"none",i={...e,local_id:n,user_id:o,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},a=CR.safeParse(i);if(!a.success)return void console.log("Invalid system data:",a.error.format());await hv.systems.add(i);let s=await XO();for(;!(await JO(s));)s=await XO();const l={...t,local_id:s,reference_id:n,user_id:o,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},c=OJ.safeParse(l);if(!c.success)return RJ("system",n,!0),void console.log("Invalid Version data:",c.error.format());await hv.versions.add(l),PJ(l.local_id,l.data.types);let u=await XO();for(;!(await JO(u));)u=await XO();await hv.subscriptions.add({local_id:u,user_id:o,resource_type:"system",resource_id:n,version_id:s,auto_update:!1,subscribed_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null})}catch(J$){console.log("Error importing system or version or creating subscription:",J$)}})(t.item,t.version);case"datapack":return await(async(e,t)=>{try{let n=await XO();for(;!(await JO(n));)n=await XO();const{user:r}=Ph.get(),o=r?r.id:"none",i={...e,local_id:n,user_id:o,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},a=fv.safeParse(i);if(!a.success)return void console.log("Invalid pack data:",a.error.format());await hv.datapacks.add(i);let s=await XO();for(;!(await JO(s));)s=await XO();const l={...t,local_id:s,reference_id:n,user_id:o,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null},c=OJ.safeParse(l);if(!c.success)return RJ("datapack",n,!0),void console.log("Invalid Version data:",c.error.format());await hv.versions.add(l),PJ(l.local_id,l.data.types);let u=await XO();for(;!(await JO(u));)u=await XO();await hv.subscriptions.add({local_id:u,user_id:o,resource_type:"datapack",resource_id:n,version_id:s,auto_update:!1,subscribed_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),deleted_at:null})}catch(J$){console.log("Error importing system or version or creating subscription:",J$)}})(t.item,t.version)}}catch(J$){console.error(J$)}}})))}]})]})]})};function KJ({id:e,types:t,onDelete:n,onSave:r,data:o}){const[i,a]=q.useState({name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"}),[s,l]=q.useState(t.find((e=>e.name===i.typeData.type))||null),c=(e,t,n)=>{a(Yw(t,(t=>(aw(t,e,n),t))))};q.useEffect((()=>{const e=o||{name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"};a(e),l(t.find((t=>t.name===e.typeData.type))||null)}),[o,a,l]);const u=q.useCallback((()=>hh(e)),[e]);return o?ne.jsxs(lp,{isOpen:!0,onClose:u,children:[ne.jsx(dp,{title:`Edit ${o.name}`,onClose:u}),ne.jsxs(cp,{children:[ne.jsx(hp,{id:"data-name",label:"Name",isValid:!0,errorMessage:"",value:i.name,onChange:e=>a({...i,name:e})}),ne.jsxs(Qb,{id:"data-type",label:"Type",value:(null==s?void 0:s.name)||"",onChange:e=>{const n=t.find((t=>t.name===e))||null;l(n),a({...i,data:i.typeData.isArray?[]:Qw(t,n||e),typeData:{...i.typeData,type:e}})},children:[ne.jsx("option",{value:"string",children:"string"}),ne.jsx("option",{value:"number",children:"number"}),ne.jsx("option",{value:"boolean",children:"boolean"}),ne.jsx("option",{value:"enum",children:"enum"}),t.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))]}),s&&ne.jsx("div",{children:ne.jsx(ix,{id:"is-array",label:"Is Array?",checked:i.typeData.isArray,onChange:e=>{a(e?{...i,data:[],typeData:{...i.typeData,isArray:e}}:{...i,data:Qw(t,i.typeData.type),typeData:{...i.typeData,isArray:e}})}})}),ne.jsx("div",{className:"h-2"}),s&&i.typeData.isArray?ne.jsx(YJ,{types:t,type:s,title:"data",data:i.data,onAdd:e=>{c("data",i,[...i.data,e])},onChange:(e,t)=>c(e,i,t),onDelete:e=>c("data",i,i.data.filter((t=>t.name!==e)))}):ZJ(s||{name:i.typeData.type,properties:[]},i.data||i,i,i.typeData,"value",c)]}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:()=>{n&&n(),u()},children:n?"Delete":"Close"}),ne.jsx(sp,{color:"primary",onClick:()=>{r(i),u()},children:"Update"})]})]}):ne.jsx(ne.Fragment,{})}function ZJ(e,t,n,r,o,i){var a;switch(e.name){case"string":return r.useTextArea?ne.jsx(ox,{id:o,label:o,value:t,onChange:e=>i("data",n,e)}):ne.jsx(hp,{id:o,label:o,isValid:!0,errorMessage:"",value:t,onChange:e=>i("data",n,e)});case"number":return ne.jsx(hp,{id:o,label:o,isValid:!0,errorMessage:"",value:t,onChange:e=>i("data",n,+e)});case"boolean":return ne.jsx(ix,{id:o,label:o,checked:t,onChange:e=>i("data",n,e)});case"enum":return ne.jsx(Qb,{id:o,label:o,value:t,onChange:e=>i("data",n,e),children:null===(a=r.options)||void 0===a?void 0:a.map((e=>ne.jsx("option",{value:e,children:e},e)))});case"blueprint":return ne.jsx("div",{children:"TODO"});default:return ne.jsx("div",{children:e.properties.map((e=>ZJ({name:e.typeData.type,properties:[]},t[e.key]||"",n,e.typeData,e.key,((t,n,r)=>{i(`data/${e.key}`,n,r)}))))},o)}}function YJ({types:e,title:t,data:n,type:r,onAdd:o,onChange:i,onDelete:a}){return ne.jsxs("div",{children:[ne.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[ne.jsx("p",{children:t}),ne.jsx("p",{onClick:()=>o(Qw(e,r)),children:"Add"})]}),ne.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),ne.jsx("div",{className:"flex flex-col gap-1 mt-3",children:n.map((n=>ne.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>fh("edit-object",(({id:r})=>ne.jsx(KR,{id:r,title:"Edit Data",types:e,onDelete:()=>a(n.name),onSave:e=>i(`${t}/${n.name}`,e),data:n}))),children:ne.jsx("p",{children:n.name})},n.name)))})]})}const GJ=async(e,t)=>Yw(e,(e=>{const n="character"===t?e.pages:"builder"===t?e.creator:e.modals;if(-1!==n.findIndex((e=>"New Page"===e.name)))return;let r={name:"New Page",blueprint:{nodes:Xw(),edges:[]},lexical:"",state:[]};n.push(r)})),XJ=async(e,t,n,r,o)=>Yw(e,(e=>{const i="character"===t?e.pages:"builder"===t?e.creator:e.modals,a=i.findIndex((e=>e.name===n));if(-1===a)return;if(i[a].state.find((e=>e.name===r)))return;let s={name:r,type:o,value:void 0};i[a].state.push(s)})),JJ=(e,t,n)=>Yw(e,(e=>{const r="character"===t?e.pages:"builder"===t?e.creator:e.modals,o=r.findIndex((e=>e.name===n));-1!==o&&r.slice(o,1)})),QJ=async(e,t,n)=>Yw(e,(e=>{for(let r=0;r<e.types.length;r++){const o=e.types[r];if(o.name!==t)continue;const i=o.properties.findIndex((e=>e.key===n));if(-1===i)return;o.properties.splice(i,1)}})),eQ=async(e,t,n,r)=>Yw(e,(e=>{const o=("character"===t?e.pages:"builder"===t?e.creator:e.modals).find((e=>e.name===n));o&&(o.name=r)})),tQ=async(e,t,n)=>Yw(e,(e=>{const r=e.types.findIndex((e=>e.name===t));-1!==r&&(e.types[r].name=n)})),nQ=async(e,t)=>Yw(e,(e=>{e.defaultCharacterData=t})),rQ=async(e,t,n,r)=>Yw(e,(e=>{const o="character"===t?e.pages:"builder"===t?e.creator:e.modals,i=o.findIndex((e=>e.name===n));-1!==i&&(o[i].blueprint=r)})),oQ=async(e,t,n,r,o)=>Yw(e,(e=>{const i="character"===t?e.pages:"builder"===t?e.creator:e.modals;for(let t=0;t<i.length;t++){const e=i[t];if(e.name!==n)continue;const a=e.state.findIndex((e=>e.name===r));if(-1===a)return;r!==o.name?(e.state.splice(a,1),e.state.push(o)):e.state[a]=o}})),iQ=async(e,t,n,r)=>Yw(e,(e=>{for(let o=0;o<e.types.length;o++){const i=e.types[o];if(i.name!==t)continue;const a=i.properties.findIndex((e=>e.key===n));if(-1===a)return;n!==r.key?(i.properties.splice(a,1),i.properties.push(r)):i.properties[a]=r}}));async function aQ(e,t){if(!(await hv.versions.get(e)))return void console.warn("No doc found for ID:",e);const n=await t;if(n)try{return await hv.versions.update(e,{data:n})}catch(r){console.log("Error updating version resource:",r)}else console.warn("No data returned from mutaiton")}const sQ=({editsId:e,versionedResource:t})=>ne.jsx(ne.Fragment,{children:ne.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[ne.jsx("div",{className:"fantasy-add-gradient border-2 border-dashed border-fantasy-accent/30 rounded-2xl p-6 text-center cursor-pointer transition-all duration-300 flex flex-col justify-center items-center hover:border-fantasy-accent/60 hover:fantasy-add-gradient hover:-translate-y-1",onClick:()=>{const n={...t.data.defaultCharacterData,newKey:"new value",_type:{name:t.data.defaultCharacterData._type.name||"",properties:[{key:"newKey",typeData:{type:"string",useTextarea:!1,isArray:!1}},...t.data.defaultCharacterData._type.properties||[]]}};aQ(e,nQ(t.data,n))},children:ne.jsx("div",{className:"text-fantasy-accent/80 text-base font-medium",children:"Create New Property"})}),t.data.defaultCharacterData._type.properties.map((n=>{const r=n.key,o=t.data.defaultCharacterData[r],i=n.typeData;let a=o._type?void 0:i.type;return ne.jsx("div",{className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",onClick:()=>fh("edit-character-schema",(({id:n})=>{const a={name:r,typeData:i,data:o};return ne.jsx(KJ,{id:n,types:t.data.types,onDelete:()=>{const n=Yw(t.data.defaultCharacterData,(e=>{delete e[a.name||""],e._type.properties=e._type.properties.filter((e=>e.key!==(null==a?void 0:a.name)))}));aQ(e,nQ(t.data,n))},onSave:n=>{const r=n.name,o=n.typeData,i=n.data,s=Yw(t.data.defaultCharacterData,(e=>{delete e[(null==a?void 0:a.name)||""],e[r]=i;for(let t=0;t<e._type.properties.length;t++){const n=e._type.properties[t];n.key===(null==a?void 0:a.name)&&(n.key=r,n.typeData=o)}}));aQ(e,nQ(t.data,s))},data:a})})),children:ne.jsxs("p",{children:[r," - ",a," ",i.isArray?"(Array)":""]})},r)}))]})}),lQ=({editsId:e,versionedResource:t})=>{const[n,r]=q.useState(null);return ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:"flex flex-col gap-1",children:t.data.data.map((r=>ne.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>fh("edit-system-data",(({id:r})=>ne.jsx(KJ,{id:r,types:t.data.types,onDelete:()=>aQ(e,(async(e,t)=>Yw(e,(e=>{const n=e.data.findIndex((e=>e.name===t));-1!==n&&e.data.splice(n,1)})))(t.data,n.name)),onSave:r=>aQ(e,(async(e,t,n)=>Yw(e,(e=>{const r=e.data.findIndex((e=>e.name===t));-1!==r&&(t!==n.name?(e.data.splice(r,1),e.data.push(n)):e.data[r]=n)})))(t.data,n.name,r)),data:n}))),children:ne.jsxs("p",{children:[r.name," - ",r.typeData.type," ",r.typeData.isArray?"(Array)":""]})},r.name)))}),ne.jsx(z$,{onClick:()=>aQ(e,(async e=>Yw(e,(e=>{-1===e.data.findIndex((e=>"New Data"===e.name))&&e.data.push({name:"New Data",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1},data:"lorem ipsum"})})))(t.data))})]})};function cQ({id:e,data:t,onSave:n,onDelete:r}){var o;const i=tR(VO.useValue().versionId),[a,s]=q.useState({name:"New Param",type:"string",isArray:!1});q.useEffect((()=>{t&&s(t)}),[t]);const l=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:l,children:[ne.jsx(dp,{title:"Edit Blueprint Param",onClose:l}),ne.jsxs(cp,{children:[ne.jsx(hp,{id:"name",label:"Name",placeholder:"baba yaga",value:a.name,onChange:e=>s({...a,name:e}),isValid:!0,errorMessage:""}),ne.jsxs(Qb,{id:"type",label:"Type",value:a.type,onChange:e=>s({...a,type:e}),children:[ne.jsx("option",{value:"none",children:"none"}),ne.jsx("option",{value:"string",children:"string"}),ne.jsx("option",{value:"number",children:"number"}),ne.jsx("option",{value:"boolean",children:"boolean"}),ne.jsx("option",{value:"enum",children:"enum"}),ne.jsx("option",{value:"blueprint",children:"blueprint"}),null==i||null===(o=i.data)||void 0===o?void 0:o.types.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))]}),ne.jsx(ix,{id:"is-array",label:"Is Array?",checked:a.isArray,onChange:e=>s({...a,isArray:e})})]}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:()=>{r(),l()},children:"Delete"}),ne.jsx(sp,{color:"primary",onClick:()=>{if(!t)return l();n(a),l()},children:"Update"})]})]})}const uQ=({id:e,data:t,onSave:n,onDelete:r})=>{var o,i,a;const[s,l]=q.useState(""),[c,u]=q.useState({type:"",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}),d=tR(VO.useValue().versionId),f=q.useMemo((()=>null==d?void 0:d.data.types.find((e=>e.name===(null==t?void 0:t.typeName)))),[t,d]);q.useEffect((()=>{t&&(l(t.key),u({useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[],...t.typeData}))}),[t]);const h=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:h,children:[ne.jsx(dp,{title:"Edit Type Property",onClose:h}),ne.jsxs(cp,{children:[ne.jsx(hp,{id:"key",label:"key",placeholder:"baba yaga",value:s,onChange:l,isValid:!0,errorMessage:""}),ne.jsxs(Qb,{id:"type",label:"Type",value:c.type,onChange:e=>u({...c,type:e}),children:[ne.jsx("option",{value:"string",children:"string"}),ne.jsx("option",{value:"number",children:"number"}),ne.jsx("option",{value:"boolean",children:"boolean"}),ne.jsx("option",{value:"enum",children:"enum"}),ne.jsx("option",{value:"blueprint",children:"blueprint"}),null==d?void 0:d.data.types.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))]}),ne.jsx(ix,{id:"is-array",label:"Is Array?",checked:c.isArray,onChange:e=>u({...c,isArray:e})}),"string"===c.type&&!c.isArray&&ne.jsx(ix,{id:"use-textarea",label:"Use Textarea?",checked:c.useTextArea,onChange:e=>u({...c,useTextArea:e})}),"enum"===c.type&&ne.jsxs("div",{children:[ne.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[ne.jsx("p",{children:"Options"}),ne.jsx("div",{onClick:()=>{var e;const t=null===(e=c.options)||void 0===e?void 0:e.findIndex((e=>"New Option"===e));-1===t&&u({...c,options:[...c.options||[],"New Option"]})},children:ne.jsx("p",{children:"Add"})})]}),ne.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),ne.jsx("div",{children:null===(o=c.options)||void 0===o?void 0:o.map((e=>ne.jsx("div",{onClick:()=>fh("edit-string",(({id:t})=>ne.jsx(JR,{id:t,data:e,title:"Edit Property Name",onSave:t=>{let n=[...c.options||[]];const r=n.findIndex((t=>t===e));-1!==r&&(n[r]=t,u({...c,options:n}))}}))),children:ne.jsx("p",{children:e})},e)))})]}),"blueprint"===c.type&&ne.jsxs("div",{className:"mt-4",children:[ne.jsxs("div",{className:"flex flex-col",children:[ne.jsxs(Qb,{id:"output-type",label:"Output Type",value:c.outputType||"none",onChange:e=>u({...c,outputType:e}),children:[ne.jsx("option",{value:"none",children:"none"}),ne.jsx("option",{value:"string",children:"string"}),ne.jsx("option",{value:"number",children:"number"}),ne.jsx("option",{value:"boolean",children:"boolean"}),ne.jsx("option",{value:"enum",children:"enum"}),ne.jsx("option",{value:"blueprint",children:"blueprint"}),null==d||null===(i=d.data)||void 0===i?void 0:i.types.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))]}),ne.jsx(ix,{id:"is-output-an-array",label:"Is Array?",checked:c.isOutputAnArray,onChange:e=>u({...c,isOutputAnArray:e})})]}),ne.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[ne.jsx("p",{children:"Inputs"}),ne.jsx("div",{onClick:()=>{var e;const t=null===(e=c.inputs)||void 0===e?void 0:e.findIndex((e=>"New Input"===e.name));-1===t&&u({...c,inputs:[...c.inputs||[],{name:"New Input",type:"string",isArray:!1}]})},children:ne.jsx("p",{children:"Add"})})]}),ne.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),ne.jsx("div",{children:null===(a=c.inputs)||void 0===a?void 0:a.map((e=>ne.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>fh("edit-blueprint-param",(({id:t})=>ne.jsx(cQ,{id:t,data:e,onSave:t=>{let n=[...c.inputs||[]];const r=n.findIndex((t=>t.name===e.name));-1!==r&&(n[r]=t,u({...c,inputs:n}))},onDelete:()=>{var t;const n=null===(t=c.inputs)||void 0===t?void 0:t.filter((t=>t.name!==e.name));u({...c,inputs:n})}}))),children:ne.jsxs("p",{children:[e.name," - ",e.type,e.isArray?"(Array)":""]})},e.name)))})]})]}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:()=>{r(),h()},disabled:1===(null==f?void 0:f.properties.length),children:"Delete"}),ne.jsx(sp,{color:"primary",onClick:()=>{if(!s)return h();if(!c)return h();n({key:s,typeData:c}),h()},children:"Update"})]})]})},dQ=({children:e})=>ne.jsx("div",{children:e}),fQ=({children:e,id:t,title:n,isOpen:r,toggleState:o})=>ne.jsxs("div",{className:"bg-fantasy-glass",children:[ne.jsx("h2",{children:ne.jsxs("button",{type:"button",onClick:()=>o(!r),className:"flex items-center justify-between w-full p-5 font-medium rtl:text-right border border-fantasy-border hover:bg-fantasy-dark gap-3 "+(r?"bg-fantasy-dark text-fantasy-text":"text-fantasy-text-muted"),children:[ne.jsx("span",{children:n}),ne.jsx("svg",{"data-accordion-icon":!0,className:(r?"":"rotate-180")+" w-3 h-3 shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),ne.jsx("div",{className:(r?"flex":"hidden")+" w-full",children:ne.jsx("div",{className:"p-5 w-full border border-t-0 border-fantasy-border",children:e})})]}),hQ=({editsId:e,versionedResource:t})=>{const[n,r]=q.useState(-1);return ne.jsxs(ne.Fragment,{children:[ne.jsx(dQ,{children:t.data.types.map(((o,i)=>ne.jsxs(fQ,{id:o.name,title:o.name,isOpen:n===i,toggleState:e=>r(e?i:-1),children:[ne.jsxs("div",{children:[ne.jsx(sp,{color:"light",onClick:()=>fh("edit-string",(({id:n})=>ne.jsx(JR,{id:n,data:o.name,onSave:n=>aQ(e,tQ(t.data,o.name,n))}))),children:"Edit Name"}),ne.jsx(sp,{color:"light",onClick:async()=>{let n={key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}};await aQ(e,(async(e,t,n)=>Yw(e,(e=>{const r=e.types.findIndex((e=>e.name===t));-1!==r&&-1===e.types[r].properties.findIndex((e=>e.key===n.key))&&e.types[r].properties.push(n)})))(t.data,o.name,n)),fh("edit-type",(({id:r})=>ne.jsx(uQ,{id:r,data:{...n,typeName:o.name},onSave:r=>aQ(e,iQ(t.data,o.name,n.key,r)),onDelete:()=>aQ(e,QJ(t.data,o.name,n.key))})))},children:"Add Property"}),ne.jsx(sp,{color:"danger",onClick:()=>aQ(e,(async(e,t)=>Yw(e,(e=>{const n=e.types.findIndex((e=>e.name===t));-1!==n&&e.types.splice(n,1)})))(t.data,o.name)),children:"Delete Type"})]}),ne.jsx("div",{className:"flex flex-col gap-1 mt-3",children:o.properties.map((n=>{var r;return ne.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>fh("edit-type",(({id:r})=>ne.jsx(uQ,{id:r,data:{...n,typeName:o.name},onSave:r=>aQ(e,iQ(t.data,o.name,n.key,r)),onDelete:()=>aQ(e,QJ(t.data,o.name,n.key))}))),children:ne.jsxs("p",{children:[n.key," - ",n.typeData.type," ",n.typeData.isArray?"(Array)":""," ",null===(r=n.typeData.options)||void 0===r?void 0:r.join(",")]})},n.key)}))})]},o.name)))}),ne.jsx(z$,{onClick:async()=>{await aQ(e,(async(e,t)=>Yw(e,(e=>{-1===e.types.findIndex((e=>e.name===t))&&e.types.push({name:t,properties:[{key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}}]})})))(t.data,"New Type")),fh("edit-string",(({id:n})=>ne.jsx(JR,{id:n,data:"New Type",onSave:n=>aQ(e,tQ(t.data,"New Type",n))})))}})]})};function pQ(e){const{query:t}=s$();return gQ(t,e)}function gQ(e,t){const n=e.node(t).get();if(!n.data.parent)return[];const r=e.node(n.data.parent).get();return[...r.data.props.local||[],...gQ(e,r.id)]}function mQ(e){const{connectors:{connect:t,drag:n}}=Kz(),r=q.useMemo((()=>{var t;return XT[e.background]?null===(t=XT[e.background])||void 0===t?void 0:t.background:""}),[e.background]),o=q.useMemo((()=>{var t;return XT[e.border]?null===(t=XT[e.border])||void 0===t?void 0:t.border:""}),[e.border]),i=q.useMemo((()=>{var t;return e.isInteractive?null===(t=XT[e.hover])||void 0===t?void 0:t.hover:""}),[e.isInteractive]);return ne.jsx("div",{ref:e=>t(n(e)),style:{display:e.display,position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:QT.spacing[e.gap],marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],paddingTop:QT.spacing[e.paddingTop],paddingRight:QT.spacing[e.paddingRight],paddingBottom:QT.spacing[e.paddingBottom],paddingLeft:QT.spacing[e.paddingLeft],height:QT.size[e.height],width:QT.size[e.width],maxHeight:QT.size[e.maxHeight],maxWidth:QT.size[e.maxWidth],minHeight:QT.size[e.minHeight],minWidth:QT.size[e.minWidth]},className:`${r} ${o} ${i}`,children:e.children?e.children:e.showPlaceholder?ne.jsx("div",{children:"Add An Item!"}):null})}const vQ={defaultProps:{showPlaceholder:!0,dynamicVisibility:!1,visibilityBlueprint:{nodes:Xw([],{name:"isVisible",type:"boolean",isArray:!1}),edges:[]},isVisible:!0,isList:!1,dataName:"listItem",blueprint:{nodes:Xw([],{name:"listItem",type:"any",isArray:!0}),edges:[]},local:[],isInteractive:!1,onPress:{nodes:Xw([]),edges:[]},display:"flex",position:"static",top:"0px",right:"0px",bottom:"0px",left:"0px",flexDirection:"column",alignItems:"normal",justifyContent:"initial",gap:"0",rows:0,columns:0,marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"4",paddingRight:"4",paddingBottom:"4",paddingLeft:"4",height:"auto",width:"auto",maxHeight:"none",maxWidth:"none",minHeight:"none",minWidth:"none",background:"no style",border:"no style",hover:"no style"},rules:{canMoveIn:(e,t,n)=>!t.data.props.isList||0===t.data.nodes.length},related:{settings:function(){const{id:e,actions:{setProp:t},showPlaceholder:n,isVisible:r,dynamicVisibility:o,visibilityBlueprint:i,isList:a,dataName:s,blueprint:l,isInteractive:c,onPress:u,display:d,position:f,top:h,right:p,bottom:g,left:m,flexDirection:v,alignItems:y,justifyContent:b,gap:w,rows:x,columns:_,marginTop:k,marginRight:S,marginBottom:E,marginLeft:j,paddingTop:C,paddingRight:N,paddingBottom:A,paddingLeft:O,height:R,width:P,maxHeight:T,maxWidth:I,minHeight:M,minWidth:D,background:L,border:B,hover:F}=Kz((e=>({showPlaceholder:e.data.props.showPlaceholder,isVisible:e.data.props.isVisible,dynamicVisibility:e.data.props.dynamicVisibility,visibilityBlueprint:e.data.props.visibilityBlueprint,isList:e.data.props.isList,dataName:e.data.props.dataName,blueprint:e.data.props.blueprint,isInteractive:e.data.props.isInteractive,onPress:e.data.props.onPress,display:e.data.props.display,position:e.data.props.position,top:e.data.props.top,right:e.data.props.right,bottom:e.data.props.bottom,left:e.data.props.left,flexDirection:e.data.props.flexDirection,alignItems:e.data.props.alignItems,justifyContent:e.data.props.justifyContent,gap:e.data.props.gap,rows:e.data.props.rows,columns:e.data.props.columns,marginTop:e.data.props.marginTop,marginRight:e.data.props.marginRight,marginBottom:e.data.props.marginBottom,marginLeft:e.data.props.marginLeft,paddingTop:e.data.props.paddingTop,paddingRight:e.data.props.paddingRight,paddingBottom:e.data.props.paddingBottom,paddingLeft:e.data.props.paddingLeft,height:e.data.props.height,width:e.data.props.width,maxHeight:e.data.props.maxHeight,maxWidth:e.data.props.maxWidth,minHeight:e.data.props.minHeight,minWidth:e.data.props.minWidth,background:e.data.props.background,border:e.data.props.border,hover:e.data.props.hover}))),[z,$]=q.useState(-1),U=pQ(e);return q.useEffect((()=>{t((e=>(e.blueprint={edges:e.blueprint.edges,nodes:Jw(e.blueprint.nodes,U)},e.visibilityBlueprint={edges:e.visibilityBlueprint.edges,nodes:Jw(e.visibilityBlueprint.nodes,U)},e.onPress={edges:e.onPress.edges,nodes:Jw(e.onPress.nodes,U)},e)))}),[U]),ne.jsxs(dQ,{children:[ne.jsx(ix,{id:"show-placeholder",label:"Visible?",checked:n,onChange:e=>t((t=>t.showPlaceholder=e))}),ne.jsxs(fQ,{id:"visibility",title:"Visibility",isOpen:0===z,toggleState:e=>$(e?0:-1),children:[ne.jsx(ix,{id:"dynamic-visiblity",label:"Dynamic Visibility?",checked:o,onChange:e=>t((t=>t.dynamicVisibility=e))}),o?ne.jsx("p",{onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:i,onSave:e=>t((t=>t.visibilityBlueprint=e))}))),children:"Visibility Blueprint"}):ne.jsx(ix,{id:"is-visible",label:"Visible?",checked:r,onChange:e=>t((t=>t.isVisible=e))})]}),ne.jsxs(fQ,{id:"list",title:"List",isOpen:1===z,toggleState:e=>$(e?1:-1),children:[ne.jsx(ix,{id:"is-list",label:"Is Dynamic List",checked:a,onChange:e=>{t((t=>(t.isList=e,t.local=e?[{name:s,type:UR(l),isArray:!1}]:[],t)))}}),ne.jsx(hp,{id:"variable-name",label:"Variable Name",isValid:!0,errorMessage:"",value:s,onChange:e=>{t((t=>{t.dataName=e;const n=t.local.findIndex((e=>e.name===s));if(-1!==n)return t.local[n].name=e,t}))}}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:l,onSave:e=>{t((t=>{t.blueprint=e;const n=t.local.findIndex((e=>e.name===s));if(-1!==n)return t.local[n].type=UR(e),t}))}}))),children:"List Data Blueprint"})]}),ne.jsxs(fQ,{id:"input",title:"Input",isOpen:2===z,toggleState:e=>$(e?2:-1),children:[ne.jsx(ix,{id:"is-interactive",label:"Is Interactive?",checked:c,onChange:e=>t((t=>t.isInteractive=e))}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:u,onSave:e=>{t((t=>t.onPress=e))}}))),children:"On Press Blueprint"})]}),ne.jsxs(fQ,{id:"layout",title:"Layout",isOpen:3===z,toggleState:e=>$(e?3:-1),children:[ne.jsxs(Qb,{id:"display",label:"Display",value:d,onChange:e=>t((t=>t.display=e)),children:[ne.jsx("option",{value:"block",children:"Block"}),ne.jsx("option",{value:"flex",children:"Flex"}),ne.jsx("option",{value:"grid",children:"Grid"})]}),ne.jsxs(Qb,{id:"position",label:"Position",value:f,onChange:e=>t((t=>t.position=e)),children:[ne.jsx("option",{value:"static",children:"Static"}),ne.jsx("option",{value:"relative",children:"Relative"}),ne.jsx("option",{value:"absolute",children:"Absolute"}),ne.jsx("option",{value:"fixed",children:"Fixed"}),ne.jsx("option",{value:"sticky",children:"Sticky"})]}),"static"!==f?ne.jsxs(ne.Fragment,{children:[ne.jsx(hp,{id:"top",label:"Top",isValid:!0,errorMessage:"",value:h,onChange:e=>t((t=>t.top=e))}),ne.jsx(hp,{id:"right",label:"Right",isValid:!0,errorMessage:"",value:p,onChange:e=>t((t=>t.right=e))}),ne.jsx(hp,{id:"bottom",label:"Bottom",isValid:!0,errorMessage:"",value:g,onChange:e=>t((t=>t.bottom=e))}),ne.jsx(hp,{id:"left",label:"Left",isValid:!0,errorMessage:"",value:m,onChange:e=>t((t=>t.left=e))})]}):null,"grid"===d?ne.jsxs(ne.Fragment,{children:[ne.jsx(hp,{id:"columns",label:"Columns",isValid:!0,errorMessage:"",value:_,onChange:e=>t((t=>t.columns=e))}),ne.jsx(hp,{id:"rows",label:"Rows",isValid:!0,errorMessage:"",value:x,onChange:e=>t((t=>t.rows=e))})]}):null,["flex","grid"].includes(d)?ne.jsxs(ne.Fragment,{children:[ne.jsxs(Qb,{id:"flex-direction",label:"Flex Direction",value:v,onChange:e=>t((t=>t.flexDirection=e)),children:[ne.jsx("option",{value:"row",children:"Row"}),ne.jsx("option",{value:"column",children:"Column"}),ne.jsx("option",{value:"row-reverse",children:"Reverse Row"}),ne.jsx("option",{value:"column-reverse",children:"Reverse Column"})]}),ne.jsxs(Qb,{id:"align-items",label:"Align Items",value:y,onChange:e=>t((t=>t.alignItems=e)),children:[ne.jsx("option",{value:"initial",children:"Initial"}),ne.jsx("option",{value:"inherit",children:"Inherit"}),ne.jsx("option",{value:"normal",children:"Normal"}),ne.jsx("option",{value:"stretch",children:"Stretch"}),ne.jsx("option",{value:"center",children:"Center"}),ne.jsx("option",{value:"flex-start",children:"Flex-Start"}),ne.jsx("option",{value:"flex-end",children:"Flex-End"}),ne.jsx("option",{value:"start",children:"Start"}),ne.jsx("option",{value:"end",children:"End"}),ne.jsx("option",{value:"baseline",children:"Baseline"})]}),ne.jsxs(Qb,{id:"justify-content",label:"Justify Content",value:b,onChange:e=>t((t=>t.justifyContent=e)),children:[ne.jsx("option",{value:"initial",children:"Initial"}),ne.jsx("option",{value:"inherit",children:"Inherit"}),ne.jsx("option",{value:"stretch",children:"Stretch"}),ne.jsx("option",{value:"center",children:"Center"}),ne.jsx("option",{value:"flex-start",children:"Flex-Start"}),ne.jsx("option",{value:"flex-end",children:"Flex-End"}),ne.jsx("option",{value:"space-between",children:"Space-Between"}),ne.jsx("option",{value:"space-around",children:"Space-Around"}),ne.jsx("option",{value:"space-evenly",children:"Space-Evenly"})]}),ne.jsx(Qb,{id:"container-gap",label:"Gap",value:w,onChange:e=>t((t=>t.gap=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))})]}):null]}),ne.jsxs(fQ,{id:"spacing",title:"Spacing",isOpen:4===z,toggleState:e=>$(e?4:-1),children:[ne.jsx(Qb,{id:"margin-top",label:"Margin Top",value:k,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-right",label:"Margin Right",value:S,onChange:e=>t((t=>t.marginRight=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-bottom",label:"Margin Bottom",value:E,onChange:e=>t((t=>t.marginBottom=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-left",label:"Margin Left",value:j,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-top",label:"Padding Top",value:C,onChange:e=>t((t=>t.paddingTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-right",label:"Padding Right",value:N,onChange:e=>t((t=>t.paddingRight=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-bottom",label:"Padding Bottom",value:A,onChange:e=>t((t=>t.paddingBottom=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-left",label:"Padding Left",value:O,onChange:e=>t((t=>t.paddingLeft=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"width",label:"Width",value:P,onChange:e=>t((t=>t.width=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"height",label:"Height",value:R,onChange:e=>t((t=>t.height=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"max-width",label:"Max Width",value:I,onChange:e=>t((t=>t.maxWidth=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"max-height",label:"Max Height",value:T,onChange:e=>t((t=>t.maxHeight=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"min-width",label:"Min Width",value:D,onChange:e=>t((t=>t.minWidth=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"min-height",label:"Min Height",value:M,onChange:e=>t((t=>t.minHeight=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))})]}),ne.jsxs(fQ,{id:"styling",title:"Styling",isOpen:5===z,toggleState:e=>$(e?5:-1),children:[ne.jsx(Qb,{id:"container-background",label:"Background",value:L,onChange:e=>t((t=>t.background=e)),children:Object.keys(XT).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"container-border",label:"Border",value:B,onChange:e=>t((t=>t.border=e)),children:Object.keys(XT).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"container-hover",label:"Hover",value:F,onChange:e=>t((t=>t.hover=e)),children:Object.keys(XT).map((e=>ne.jsx("option",{value:e,children:e},e)))})]})]})}}};function yQ(e){const{connectors:{connect:t,drag:n}}=Kz(),r=q.useMemo((()=>{var t;return vI.colors[e.color]?null===(t=vI.colors[e.color])||void 0===t?void 0:t.text:""}),[e.color]),o=q.useMemo((()=>vI.weight[e.fontWeight]?vI.weight[e.fontWeight]:""),[e.fontWeight]);return ne.jsx("p",{ref:e=>t(n(e)),style:{textAlign:e.textAlign,...vI.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],paddingTop:QT.spacing[e.paddingTop],paddingRight:QT.spacing[e.paddingRight],paddingBottom:QT.spacing[e.paddingBottom],paddingLeft:QT.spacing[e.paddingLeft]},className:`${r} ${o}`,children:e.text})}mQ.craft=vQ;const bQ={defaultProps:{useBlueprintValue:!1,blueprint:{nodes:Xw([],{name:"output",type:"string",isArray:!1}),edges:[]},text:"hello world",color:"base",fontSize:"base",textAlign:"left",textDecoration:"none",textTransform:"none",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"0",paddingRight:"0",paddingBottom:"0",paddingLeft:"0"},rules:{},related:{settings:function(){const{id:e,actions:{setProp:t},useBlueprintValue:n,blueprint:r,text:o,color:i,fontSize:a,fontWeight:s,textAlign:l,textDecoration:c,textTransform:u,marginTop:d,marginRight:f,marginBottom:h,marginLeft:p,paddingTop:g,paddingRight:m,paddingBottom:v,paddingLeft:y}=Kz((e=>({useBlueprintValue:e.data.props.useBlueprintValue||!1,blueprint:e.data.props.blueprint,text:e.data.props.text||"",color:e.data.props.color,fontFamily:e.data.props.fontFamily,fontSize:e.data.props.fontSize,fontWeight:e.data.props.fontWeight,fontStyle:e.data.props.fontStyle,letterSpacing:e.data.props.letterSpacing,lineHeight:e.data.props.lineHeight,textAlign:e.data.props.textAlign||"left",textDecoration:e.data.props.textDecoration||"none",textTransform:e.data.props.textTransform||"none",marginTop:e.data.props.marginTop||"0px",marginRight:e.data.props.marginRight||"0px",marginBottom:e.data.props.marginBottom||"0px",marginLeft:e.data.props.marginLeft||"0px",paddingTop:e.data.props.paddingTop||"0px",paddingRight:e.data.props.paddingRight||"0px",paddingBottom:e.data.props.paddingBottom||"0px",paddingLeft:e.data.props.paddingLeft||"0px"}))),[b,w]=q.useState(-1),x=pQ(e);return q.useEffect((()=>{t((e=>(e.blueprint={edges:e.blueprint.edges,nodes:Jw(e.blueprint.nodes,x)},e)))}),[]),ne.jsxs(dQ,{children:[ne.jsxs(fQ,{id:"content",title:"Content",isOpen:0===b,toggleState:e=>w(e?0:-1),children:[ne.jsx(ix,{id:"use-blueprint-value",label:"Use Blueprint Value?",checked:n,onChange:e=>t((t=>t.useBlueprintValue=e))}),n?ne.jsx(sp,{color:"primary",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:r,onSave:e=>{t((t=>t.blueprint=e))}}))),children:"Edit Blueprint Value"}):ne.jsx(hp,{id:"text",label:"Text",placeholder:"lorem ipsum",value:o,onChange:e=>t((t=>t.text=e)),isValid:!0,errorMessage:""})]}),ne.jsxs(fQ,{id:"content-styling",title:"Content Styling",isOpen:1===b,toggleState:e=>w(e?1:-1),children:[ne.jsx(Qb,{id:"color",label:"Color",value:i,onChange:e=>t((t=>t.color=e)),children:Object.keys(vI.colors).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"font-size",label:"Font Size",value:a,onChange:e=>t((t=>t.fontSize=e)),children:Object.keys(vI.sizes).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"font-weight",label:"Font Weight",value:s,onChange:e=>t((t=>t.fontWeight=e)),children:Object.keys(vI.weight).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsxs(Qb,{id:"text-align",label:"Text Align",value:l,onChange:e=>t((t=>t.textAlign=e)),children:[ne.jsx("option",{value:"left",children:"Left"}),ne.jsx("option",{value:"center",children:"Center"}),ne.jsx("option",{value:"right",children:"Right"})]}),ne.jsxs(Qb,{id:"text-decoration",label:"Text Decoration",value:c,onChange:e=>t((t=>t.textDecoration=e)),children:[ne.jsx("option",{value:"none",children:"None"}),ne.jsx("option",{value:"underline",children:"Underline"}),ne.jsx("option",{value:"line-through",children:"Line-Through"})]}),ne.jsxs(Qb,{id:"text-transform",label:"Text Transform",value:u,onChange:e=>t((t=>t.textTransform=e)),children:[ne.jsx("option",{value:"none",children:"None"}),ne.jsx("option",{value:"uppercase",children:"Uppercase"}),ne.jsx("option",{value:"lowercase",children:"Lowercase"})]})]}),ne.jsxs(fQ,{id:"spacing",title:"Spacing",isOpen:2===b,toggleState:e=>w(e?2:-1),children:[ne.jsx(Qb,{id:"margin-top",label:"Margin Top",value:d,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-right",label:"Margin Right",value:f,onChange:e=>t((t=>t.marginRight=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-bottom",label:"Margin Bottom",value:h,onChange:e=>t((t=>t.marginBottom=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-left",label:"Margin Left",value:p,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-top",label:"Padding Top",value:g,onChange:e=>t((t=>t.paddingTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-right",label:"Padding Right",value:m,onChange:e=>t((t=>t.paddingRight=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-bottom",label:"Padding Bottom",value:v,onChange:e=>t((t=>t.paddingBottom=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"padding-left",label:"Padding Left",value:y,onChange:e=>t((t=>t.paddingLeft=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))})]})]})}}};yQ.craft=bQ;const wQ=({versionedResource:e})=>{const t=VO.useValue(),{actions:n}=s$();return q.useEffect((()=>{var r;let o=null===(r=e.data.pages.find((e=>e.name===t.characterPage)))||void 0===r?void 0:r.lexical;o||(o="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ=="),n.deserialize(UT.decompress(UT.decodeBase64(o)))}),[t.characterPage]),ne.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:ne.jsx(o$,{children:ne.jsx(e$,{is:mQ,canvas:!0,children:ne.jsx(yQ,{text:"Testing the world"})})})})},xQ=({})=>ne.jsx(ne.Fragment,{children:ne.jsx("p",{children:"TODO"})});function _Q({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:o}){const i=tR(VO.useValue().versionId),[a,s]=q.useState(""),[l,c]=q.useState(""),[u,d]=q.useState(!1);return q.useEffect((()=>{e&&(s(e.name),c(e.type.type),d(e.type.isArray||!1))}),[e]),i?ne.jsxs(lp,{isOpen:t,onClose:n,children:[ne.jsx(dp,{title:"Add Page State",onClose:n}),ne.jsxs(cp,{children:[ne.jsx(hp,{id:"var-name",label:"Variable Name",value:a,onChange:s,isValid:!0,errorMessage:""}),ne.jsxs(Qb,{id:"var-type",label:"Type",value:l,onChange:c,children:[ne.jsx("option",{value:"string",children:"string"}),ne.jsx("option",{value:"number",children:"number"}),ne.jsx("option",{value:"boolean",children:"boolean"}),ne.jsx("option",{value:"enum",children:"enum"}),i.data.types.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))]}),ne.jsx(ix,{id:"is-array",label:"Is Array?",checked:u,onChange:d})]}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"danger",onClick:()=>{o(),n()},children:"Delete"}),ne.jsx(sp,{color:"primary",onClick:()=>{if(!a)return n();if(!l)return n();if(!e)return n();r({name:a,type:{type:l,isArray:u,useTextArea:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}}),n()},children:"Confirm"})]})]}):ne.jsx(ne.Fragment,{})}const kQ=()=>{const{nodes:e,actions:t,isActive:n}=s$((e=>({nodes:e.nodes,isActive:e.events.selected}))),[r,o]=K.useState({}),[i,a]=K.useState(""),{connectors:{select:s}}=s$(),l=c=>{var u;const d=e[c];if(!d)return null;const f=r[c],h=d.data.nodes&&d.data.nodes.length>0,p=n.has(c);return ne.jsxs("div",{className:"select-none",children:[ne.jsxs("div",{ref:e=>s(e,c),className:`\n            flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors duration-200 hover:bg-secondary/80\n            ${p?"bg-blue-500/20 text-blue-700 dark:text-blue-300":""}\n            ${i!==c||p?"":"bg-secondary/50"}\n          `,onMouseEnter:()=>a(c),onMouseLeave:()=>a(""),children:[h?ne.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{o((t=>({...t,[e]:!t[e]})))})(c)},className:"w-4 h-4 flex items-center justify-center hover:bg-secondary/80 rounded",children:f?ne.jsx(Wh,{className:"w-4 h-4"}):ne.jsx(Hh,{className:"w-4 h-4"})}):ne.jsx("div",{className:"w-4"}),ne.jsx("button",{onClick:e=>{e.stopPropagation(),t.setHidden(c,!d.data.hidden)},className:"text-foreground/80 hover:text-foreground",children:d.data.hidden?ne.jsx(Vh,{className:"w-4 h-4"}):ne.jsx(qh,{className:"w-4 h-4"})}),ne.jsx("span",{className:"text-sm font-medium",children:(null===(u=d.data.custom)||void 0===u?void 0:u.displayName)||d.data.displayName||d.data.name})]}),h&&f&&ne.jsx("div",{className:"ml-1.5 border-l border-border/50 pl-2 mt-1",children:d.data.nodes.map((e=>l(e)))})]},c)},c=Object.keys(e).filter((t=>!e[t].data.parent));return ne.jsxs("div",{className:"p-4 space-y-2",children:[ne.jsxs("div",{className:"text-sm font-medium flex items-center gap-2 px-2",children:[ne.jsx(Kh,{className:"w-4 h-4"}),"Layers"]}),ne.jsx("div",{className:"space-y-1",children:c.map((e=>l(e)))})]})};function SQ(){const e=VO.useValue(),t=tR(e.versionId),n=q.useMemo((()=>null==t?void 0:t.data.pages.find((t=>t.name===e.characterPage))),[t,e.characterPage]),[r,o]=q.useState("components"),[i,a]=q.useState(null),{connectors:s}=s$(),{selected:l,actions:c}=s$(((e,t)=>{const[n]=e.events.selected;let r;return n&&(r={id:n,name:e.nodes[n].data.name,settings:e.nodes[n].related&&e.nodes[n].related.settings,isDeletable:t.node(n).isDeletable()}),{selected:r}}));return t?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[ne.jsx(Qb,{id:"page",label:"Page",value:e.characterPage,onChange:KO,children:t.data.pages.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),ne.jsxs("button",{type:"button",onClick:()=>aQ(e.versionId,GJ(t.data,"character")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[ne.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),ne.jsxs(Qb,{id:"designer-tab",label:"",value:r,onChange:o,children:[ne.jsx("option",{value:"components",children:"Components"}),ne.jsx("option",{value:"details",children:"Details"}),ne.jsx("option",{value:"state",children:"Page Info"})]}),ne.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),"components"===r?ne.jsxs(ne.Fragment,{children:[ne.jsx("h4",{className:"",children:"Components"}),ne.jsxs("div",{className:"flex flex-col my-4",children:[ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>s.create(e,ne.jsx(e$,{is:mQ,canvas:!0})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>s.create(e,ne.jsx(yQ,{text:"Hi World"})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),ne.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>s.create(e,ne.jsx(L$,{placeholder:"Search...",blueprint:{nodes:Xw([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>s.create(e,ne.jsx(I$,{})),children:[ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>s.create(e,ne.jsx($$,{isList:!1,buttons:[],blueprint:{nodes:Xw(),edges:[]}})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):"details"===r&&l?ne.jsxs(ne.Fragment,{children:[l.settings&&K.createElement(l.settings),l.isDeletable?ne.jsx(sp,{className:"mt-4",color:"danger",onClick:()=>{c.delete(l.id)},children:"Delete"}):null]}):"state"===r?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[ne.jsx(sp,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{aQ(t.local_id,JJ(t.data,"character",e.characterPage))},children:"Delete"}),ne.jsx(sp,{color:"primary",onClick:()=>fh("rename-modal",(({id:n})=>ne.jsx(JR,{id:n,title:"Rename Page",data:e.characterPage,onSave:async n=>{await aQ(e.versionId,eQ(t.data,"character",e.characterPage,n)),KO(n)}}))),children:"Rename"})]}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:r})=>ne.jsx(qR,{id:r,data:n.blueprint,onSave:n=>aQ(t.local_id,rQ(t.data,"character",e.characterPage,n))}))),children:"Edit Page Blueprint"}),ne.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[ne.jsx("div",{style:{display:"flex",alignItems:"center"},children:ne.jsx("h5",{children:"Page State"})}),ne.jsxs("button",{onClick:()=>aQ(t.local_id,XJ(t.data,"character",e.characterPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],outputType:"string",isOutputAnArray:!1,inputs:[]})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[ne.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),ne.jsx(rx,{}),ne.jsx("div",{children:null==n?void 0:n.state.map((e=>ne.jsx("div",{onClick:()=>a(e),children:ne.jsxs("p",{children:[e.name," | ",e.type.type,e.type.isArray?"(Array)":""]})},e.name)))}),ne.jsx(_Q,{isOpen:null!==i,requestClose:()=>a(null),data:i,onSave:n=>aQ(t.local_id,oQ(t.data,"character",e.characterPage,i.name,{...n,value:void 0})),onDelete:()=>{}})]}):null,"state"!==r?ne.jsx(kQ,{}):null]}):ne.jsx(ne.Fragment,{})}function EQ(e){var t;const{connectors:{connect:n,drag:r}}=Kz(),o=q.useMemo((()=>[]),[]);return ne.jsx(Qb,{ref:e=>n(r(e)),style:{marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],width:QT.size[e.width],maxWidth:QT.size[e.maxWidth],minWidth:QT.size[e.minWidth]},id:e.label,label:e.label,value:null===(t=o[0])||void 0===t?void 0:t.name,onChange:()=>{},children:o.map((e=>ne.jsx("option",{children:e.name},e.name)))})}const jQ={defaultProps:{label:"Select",dynamicOptions:!1,optionsBlueprint:{nodes:Xw([],{name:"options",type:"any",isArray:!0}),edges:[]},options:[],onChange:{nodes:Xw([{name:"selectedValue",type:"object",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:function(){const{id:e,actions:{setProp:t},label:n,dynamicOptions:r,optionsBlueprint:o,onChange:i,marginTop:a,marginRight:s,marginBottom:l,marginLeft:c,width:u,maxWidth:d,minWidth:f}=Kz((e=>({label:e.data.props.label,dynamicOptions:e.data.props.dynamicOptions,optionsBlueprint:e.data.props.optionsBlueprint,options:e.data.props.options,onChange:e.data.props.onChange,marginTop:e.data.props.marginTop,marginRight:e.data.props.marginRight,marginBottom:e.data.props.marginBottom,marginLeft:e.data.props.marginLeft,width:e.data.props.width,maxWidth:e.data.props.maxWidth,minWidth:e.data.props.minWidth}))),[h,p]=q.useState(-1),g=pQ(e);return q.useEffect((()=>{t((e=>(e.optionsBlueprint={edges:e.optionsBlueprint.edges,nodes:Jw(e.optionsBlueprint.nodes,g)},e.onChange={edges:e.onChange.edges,nodes:Jw(e.onChange.nodes,g)},e)))}),[g]),ne.jsxs(dQ,{children:[ne.jsx(fQ,{id:"label",title:"Label",isOpen:0===h,toggleState:e=>p(e?0:-1),children:ne.jsx(hp,{id:"label",label:"Update Label",value:n,onChange:e=>t((t=>t.label=e)),isValid:!0,errorMessage:""})}),ne.jsxs(fQ,{id:"options",title:"Options",isOpen:1===h,toggleState:e=>p(e?1:-1),children:[ne.jsx(ix,{id:"dynamic-options",label:"Dynamic Options?",checked:r,onChange:e=>t((t=>t.dynamicOptions=e))}),r?ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:o,onSave:e=>{t((t=>(t.optionsBlueprint=e,t.onChange={edges:t.onChange.edges,nodes:Jw(t.onChange.nodes,[...g,{name:"selectedValue",type:UR(e),isArray:!1}])},t)))}}))),children:"Options Blueprint"}):ne.jsx("p",{children:"TODO: handle options."}),ne.jsx("div",{className:"h-2"}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:i,onSave:e=>{t((t=>t.onChange=e))}}))),children:"onChange Blueprint"})]}),ne.jsxs(fQ,{id:"spacing",title:"Spacing",isOpen:2===h,toggleState:e=>p(e?2:-1),children:[ne.jsx(Qb,{id:"margin-top",label:"Margin Top",value:a,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-right",label:"Margin Right",value:s,onChange:e=>t((t=>t.marginRight=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-bottom",label:"Margin Bottom",value:l,onChange:e=>t((t=>t.marginBottom=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-left",label:"Margin Left",value:c,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"width",label:"Width",value:u,onChange:e=>t((t=>t.width=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"max-width",label:"Max Width",value:d,onChange:e=>t((t=>t.maxWidth=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"min-width",label:"Min Width",value:f,onChange:e=>t((t=>t.minWidth=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))})]})]})}}};function CQ(e){const{connectors:{connect:t,drag:n}}=Kz();return ne.jsx(hp,{ref:e=>t(n(e)),style:{marginTop:QT.spacing[e.marginTop],marginRight:QT.spacing[e.marginRight],marginBottom:QT.spacing[e.marginBottom],marginLeft:QT.spacing[e.marginLeft],width:QT.size[e.width],maxWidth:QT.size[e.maxWidth],minWidth:QT.size[e.minWidth]},type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,isValid:!0,errorMessage:"",id:e.label,label:e.label,value:"",onChange:()=>{}})}EQ.craft=jQ;const NQ={defaultProps:{label:"Select",type:"text",minNumber:0,maxNumber:100,getValue:{nodes:Xw([],{name:"value",type:"string",isArray:!1}),edges:[]},onChange:{nodes:Xw([{name:"field value",type:"string",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:function(){const{id:e,actions:{setProp:t},label:n,type:r,minNumber:o,maxNumber:i,getValue:a,onChange:s,marginTop:l,marginRight:c,marginBottom:u,marginLeft:d,width:f,maxWidth:h,minWidth:p}=Kz((e=>({label:e.data.props.label,type:e.data.props.type,minNumber:e.data.props.minNumber,maxNumber:e.data.props.maxNumber,getValue:e.data.props.getValue,onChange:e.data.props.onChange,marginTop:e.data.props.marginTop,marginRight:e.data.props.marginRight,marginBottom:e.data.props.marginBottom,marginLeft:e.data.props.marginLeft,width:e.data.props.width,maxWidth:e.data.props.maxWidth,minWidth:e.data.props.minWidth}))),[g,m]=q.useState(-1),v=pQ(e);return q.useEffect((()=>{t((e=>{e.getValue={edges:e.getValue.edges,nodes:Jw(e.getValue.nodes,v,{name:"value",type:"text"===r?"string":"number",isArray:!1})},e.onChange={edges:e.onChange.edges,nodes:Jw(e.onChange.nodes,[...v,{name:"field value",type:"text"===r?"string":"number",isArray:!1}])}}))}),[v]),ne.jsxs(dQ,{children:[ne.jsx(fQ,{id:"label",title:"Label",isOpen:0===g,toggleState:e=>m(e?0:-1),children:ne.jsx(hp,{id:"label",label:"Update Label",value:n,onChange:e=>t((t=>t.label=e)),isValid:!0,errorMessage:""})}),ne.jsxs(fQ,{id:"data",title:"Data",isOpen:1===g,toggleState:e=>m(e?1:-1),children:[ne.jsx(Qb,{id:"input-type",label:"Type",value:r,onChange:e=>{t((t=>(t.type=e,t.getValue.nodes=Jw(t.getValue.nodes,v,{name:"value",type:"text"===e?"string":"number",isArray:!1}),t.onChange.nodes=Jw(t.onChange.nodes,[...v,{name:"field value",type:"text"===e?"string":"number",isArray:!1}]),t)))},children:["text","number"].map((e=>ne.jsx("option",{value:e,children:e},e)))}),"number"===r&&ne.jsxs(ne.Fragment,{children:[ne.jsx(hp,{id:"min-number",label:"Min Number",type:"number",value:o,onChange:e=>t((t=>t.minNumber=e)),isValid:!0,errorMessage:""}),ne.jsx(hp,{id:"max-number",label:"Max Number",type:"number",value:i,onChange:e=>t((t=>t.maxNumber=e)),isValid:!0,errorMessage:""})]}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:a,onSave:e=>{t((t=>t.getValue=e))}}))),children:"Get Value Blueprint"}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:e})=>ne.jsx(qR,{id:e,data:s,onSave:e=>{t((t=>t.onChange=e))}}))),children:"onChange Blueprint"})]}),ne.jsxs(fQ,{id:"spacing",title:"Spacing",isOpen:2===g,toggleState:e=>m(e?2:-1),children:[ne.jsx(Qb,{id:"margin-top",label:"Margin Top",value:l,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-right",label:"Margin Right",value:c,onChange:e=>t((t=>t.marginRight=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-bottom",label:"Margin Bottom",value:u,onChange:e=>t((t=>t.marginBottom=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"margin-left",label:"Margin Left",value:d,onChange:e=>t((t=>t.marginTop=e)),children:Object.keys(QT.spacing).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"width",label:"Width",value:f,onChange:e=>t((t=>t.width=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"max-width",label:"Max Width",value:h,onChange:e=>t((t=>t.maxWidth=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))}),ne.jsx(Qb,{id:"min-width",label:"Min Width",value:p,onChange:e=>t((t=>t.minWidth=e)),children:Object.keys(QT.size).map((e=>ne.jsx("option",{value:e,children:e},e)))})]})]})}}};CQ.craft=NQ;const AQ=()=>{const e=VO.useValue(),t=tR(e.versionId),n=q.useMemo((()=>null==t?void 0:t.data.creator.find((t=>t.name===e.creatorPage))),[t,e.creatorPage]),[r,o]=q.useState("components"),[i,a]=q.useState(null),[s,l]=q.useState(null),{connectors:c}=s$(),{selected:u,actions:d}=s$(((e,t)=>{const[n]=e.events.selected;let r;return n&&(r={id:n,name:e.nodes[n].data.name,settings:e.nodes[n].related&&e.nodes[n].related.settings,isDeletable:t.node(n).isDeletable()}),{selected:r}}));return t?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[ne.jsx(Qb,{id:"page",label:"Page",value:e.creatorPage,onChange:qO,children:t.data.creator.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),ne.jsxs("button",{type:"button",onClick:()=>aQ(t.local_id,GJ(t.data,"builder")),className:"ml-2 text-fantasy-accent border border-fantasy-accent hover:bg-fantasy-accent hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[ne.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),ne.jsxs(Qb,{id:"designer-tab",label:"",value:r,onChange:o,children:[ne.jsx("option",{value:"components",children:"Components"}),ne.jsx("option",{value:"details",children:"Details"}),ne.jsx("option",{value:"state",children:"Page Info"})]}),ne.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),"components"===r?ne.jsxs(ne.Fragment,{children:[ne.jsx("h4",{className:"",children:"Components"}),ne.jsxs("div",{className:"flex flex-col my-4",children:[ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(e$,{is:mQ,canvas:!0})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(yQ,{text:"Hi World"})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),ne.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(L$,{placeholder:"Search...",blueprint:{nodes:Xw([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(EQ,{})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Select"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(CQ,{})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text Input"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(I$,{})),children:[ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx($$,{isList:!1,buttons:[],blueprint:{nodes:Xw(),edges:[]}})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):"details"===r&&u?ne.jsxs(ne.Fragment,{children:[u.settings&&K.createElement(u.settings),u.isDeletable?ne.jsx(sp,{className:"mt-4",color:"danger",onClick:()=>{d.delete(u.id)},children:"Delete"}):null]}):"state"===r?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[ne.jsx(sp,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{aQ(t.local_id,JJ(t.data,"builder",e.creatorPage))},children:"Delete"}),ne.jsx(sp,{color:"light",onClick:()=>fh("rename-page",(({id:n})=>ne.jsx(JR,{id:n,title:"Rename Page",data:e.characterPage,onSave:async n=>{await aQ(e.versionId,eQ(t.data,"character",e.characterPage,n)),qO(n)}}))),children:"Rename"})]}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:r})=>ne.jsx(qR,{id:r,data:n.blueprint,onSave:n=>aQ(t.local_id,rQ(t.data,"builder",e.creatorPage,n))}))),children:"Edit Page Blueprint"}),ne.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[ne.jsx("div",{style:{display:"flex",alignItems:"center"},children:ne.jsx("h5",{children:"Page State"})}),ne.jsxs("button",{onClick:()=>aQ(t.local_id,XJ(t.data,"builder",e.creatorPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],inputs:[],outputType:"none",isOutputAnArray:!1})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[ne.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),ne.jsx(rx,{}),ne.jsx("div",{className:"pt-2 flex flex-col gap-y-2",children:null==n?void 0:n.state.map((e=>ne.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>a(e),children:ne.jsxs("p",{children:[e.name," | ",e.type.type,e.type.isArray?"(Array)":""]})},e.name)))}),ne.jsx(_Q,{isOpen:null!==i,requestClose:()=>a(null),data:i,onSave:n=>aQ(t.local_id,oQ(t.data,"builder",e.creatorPage,i.name,{...n,value:void 0})),onDelete:()=>{}})]}):null,"state"!==r?ne.jsx(kQ,{}):null]}):ne.jsx(ne.Fragment,{})};function OQ({versionEdits:e}){const t=VO.useValue(),n=q.useMemo((()=>null==e?void 0:e.data.modals.find((e=>e.name===t.modalsPage))),[e,t.modalsPage]),[r,o]=q.useState("components"),[i,a]=q.useState(null),{selected:s,actions:l,connectors:c}=s$(((e,t)=>{const[n]=e.events.selected;let r;return n&&(r={id:n,name:e.nodes[n].data.name,settings:e.nodes[n].related&&e.nodes[n].related.settings,isDeletable:t.node(n).isDeletable()}),{selected:r}}));return e?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[ne.jsx(Qb,{id:"page",label:"Page",value:t.modalsPage,onChange:ZO,children:e.data.modals.map((e=>ne.jsx("option",{value:e.name,children:e.name},e.name)))}),ne.jsxs("button",{type:"button",onClick:()=>aQ(t.versionId,GJ(e.data,"modal")),className:"ml-2 text-fantasy-accent border border-fantasy-border hover:bg-fantasy-accent-dark focus:ring-4 focus:outline-none focus:ring-fantasy-accent font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2",children:[ne.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),ne.jsxs(Qb,{id:"designer-tab",label:"",value:r,onChange:o,children:[ne.jsx("option",{value:"components",children:"Components"}),ne.jsx("option",{value:"details",children:"Details"}),ne.jsx("option",{value:"state",children:"Page Info"})]}),ne.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),"components"===r?ne.jsxs(ne.Fragment,{children:[ne.jsx("h4",{className:"",children:"Components"}),ne.jsxs("div",{className:"flex flex-col my-4",children:[ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(e$,{is:mQ,canvas:!0})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(yQ,{text:"Hi World"})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),ne.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(L$,{placeholder:"Search...",blueprint:{nodes:Xw([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx(I$,{})),children:[ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),ne.jsxs("div",{className:"flex items-center p-4 border",ref:e=>c.create(e,ne.jsx($$,{isList:!1,buttons:[],blueprint:{nodes:Xw(),edges:[]}})),children:[ne.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[ne.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),ne.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),ne.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):"details"===r&&s?ne.jsxs(ne.Fragment,{children:[s.settings&&K.createElement(s.settings),s.isDeletable?ne.jsx(sp,{className:"mt-4",color:"danger",onClick:()=>{l.delete(s.id)},children:"Delete"}):null]}):"state"===r?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[ne.jsx(sp,{color:"danger",disabled:e.data.pages.length<=1,onClick:()=>{aQ(t.versionId,JJ(e.data,"modal",t.modalsPage))},children:"Delete"}),ne.jsx(sp,{color:"primary",onClick:()=>fh("rename-modal",(({id:n})=>ne.jsx(JR,{id:n,title:"Rename Page",data:t.modalsPage,onSave:async n=>{await aQ(t.versionId,eQ(e.data,"modal",t.modalsPage,n)),ZO(n)}}))),children:"Rename"})]}),ne.jsx(sp,{color:"light",onClick:()=>fh("blueprint",(({id:r})=>ne.jsx(qR,{id:r,data:n.blueprint,onSave:n=>aQ(e.local_id,rQ(e.data,"modal",t.modalsPage,n))}))),children:"Edit Page Blueprint"}),ne.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[ne.jsx("div",{style:{display:"flex",alignItems:"center"},children:ne.jsx("h5",{children:"Page State"})}),ne.jsxs("button",{onClick:()=>aQ(e.local_id,XJ(e.data,"modal",t.modalsPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],outputType:"string",isOutputAnArray:!1,inputs:[]})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[ne.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:ne.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),ne.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),ne.jsx(rx,{}),ne.jsx("div",{children:null==n?void 0:n.state.map((e=>ne.jsx("div",{onClick:()=>a(e),children:ne.jsxs("p",{children:[e.name," | ",e.type.type,e.type.isArray?"(Array)":""]})},e.name)))}),ne.jsx(_Q,{isOpen:null!==i,requestClose:()=>a(null),data:i,onSave:n=>aQ(e.local_id,oQ(e.data,"modal",t.modalsPage,i.name,{...n,value:void 0})),onDelete:()=>{}})]}):null,"state"!==r?ne.jsx(kQ,{}):null]}):ne.jsx("p",{children:"loading..."})}function RQ(){const e=VO.useValue(),t=tR(e.versionId);return t?ne.jsx("aside",{className:"bg-fantasy-glass backdrop-blur-lg border-l border-fantasy-border shadow-2xl fixed top-0 right-0 z-40 w-64 h-screen transition-transform translate-x-full lg:-translate-x-0","aria-label":"Editor Sidebar",children:ne.jsxs("div",{className:"h-full flex flex-col px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-neutral-950",children:[ne.jsx("div",{className:"py-4 mb-4 border-b border-neutral-200 dark:border-neutral-700",children:ne.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"Details"})}),"character"===e.tab?ne.jsx("p",{children:"Default Character data, used for types in GetCharacterData nodes and such."}):"data"===e.tab?ne.jsx("p",{children:"Custom data for the system (Items, classes, etc.)"}):"types"===e.tab?ne.jsx("p",{children:"The data types for everything in this system."}):"editor"===e.tab?ne.jsx(SQ,{}):"creator"===e.tab?ne.jsx(AQ,{}):"modals"===e.tab?ne.jsx(OQ,{versionEdits:t}):"actions"===e.tab&&ne.jsx("p",{children:"Quick actions such as long rest, reset spell slots, ect."})]})}):ne.jsx(ne.Fragment,{})}const PQ=({versionedResource:e})=>{const t=VO.useValue(),{actions:n}=s$();return q.useEffect((()=>{var r;let o=null===(r=e.data.creator.find((e=>e.name===t.creatorPage)))||void 0===r?void 0:r.lexical;o||(o="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ=="),n.deserialize(UT.decompress(UT.decodeBase64(o)))}),[t.creatorPage]),ne.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:ne.jsx(o$,{children:ne.jsx(e$,{is:mQ,canvas:!0,children:ne.jsx(yQ,{text:"Testing the world"})})})})};function TQ(e){const t=eR((()=>hv.versions.get(e||"")),[e]);if(t)return{...t,data:null==t?void 0:t.data}}const IQ=({versionedResource:e})=>{const t=VO.useValue(),{actions:n}=s$();return q.useEffect((()=>{var r;const o=e.data.modals.find((e=>e.name===t.modalsPage));if(!o)return void console.warn("Modal page not found:",t.modalsPage);let i=null!==(r=o.lexical)&&void 0!==r?r:"eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==";n.deserialize(UT.decompress(UT.decodeBase64(i)))}),[t.modalsPage]),ne.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:ne.jsx(o$,{children:ne.jsx(e$,{is:mQ,canvas:!0,children:ne.jsx(yQ,{text:"Testing the world"})})})})},MQ=({editsId:e,versionedResource:t})=>{var n;return ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:"flex flex-col gap-2",children:null===(n=t.data.actions)||void 0===n?void 0:n.map(((n,r)=>ne.jsxs("div",{className:"flex bg-neutral-700 rounded border border-neutral-600 p-3",children:[ne.jsxs("div",{className:"flex flex-col flex-grow gap-1",children:[ne.jsx("p",{children:n.name}),ne.jsx("p",{children:n.description})]}),ne.jsx(LJ,{label:"Edit",onClick:()=>fh("blueprint",(({id:r})=>ne.jsx(qR,{id:r,data:n.blueprint,onSave:r=>aQ(e,(async(e,t,n)=>Yw(e,(e=>{e.actions||(e.actions=[]);const r=e.actions.findIndex((e=>e.name===t));-1!==r&&(e.actions[r].blueprint=n)})))(t.data,n.name,r))}))),options:[{label:"Rename",onClick:()=>fh("edit-string",(({id:r})=>ne.jsx(JR,{id:r,title:"Edit Action Name",data:n.name,onSave:r=>aQ(e,(async(e,t,n)=>Yw(e,(e=>{e.actions||(e.actions=[]);const r=e.actions.findIndex((e=>e.name===t));-1!==r&&(e.actions[r].name=n)})))(t.data,n.name,r))})))},{label:"Change Description",onClick:()=>fh("edit-string",(({id:r})=>ne.jsx(JR,{id:r,title:"Edit Action Description",data:n.description,onSave:r=>aQ(e,(async(e,t,n)=>Yw(e,(e=>{e.actions||(e.actions=[]);const r=e.actions.findIndex((e=>e.name===t));-1!==r&&(e.actions[r].description=n)})))(t.data,n.name,r))})))},{label:"delete",onClick:()=>fh("confirm",(({id:r})=>ne.jsx(WX,{id:r,title:"Delete Action",type:"danger",message:"Are you sure you want to delete this action?",onConfirm:()=>aQ(e,(async(e,t)=>Yw(e,(e=>{e.actions||(e.actions=[]);const n=e.actions.findIndex((e=>e.name===t));-1!==n&&e.actions.splice(n,1)})))(t.data,n.name))})))}]})]},r)))}),ne.jsx(z$,{onClick:async()=>{await aQ(e,(async(e,t)=>Yw(e,(e=>{e.actions||(e.actions=[]),e.actions.find((e=>e.name===t))||e.actions.push({name:t,description:"A new action!",blueprint:{nodes:Xw(),edges:[]}})})))(t.data,"New Action"))}})]})},DQ=({id:e,original:t,edits:n,edits_id:r})=>{const o=q.useCallback((()=>hh(e)),[e]);let i=ff();return ne.jsxs(lp,{isOpen:!0,onClose:o,children:[ne.jsx(dp,{title:"Save New Version",onClose:o}),ne.jsxs(cp,{children:[ne.jsx("p",{children:'All of your changes are saved to a hidden "edits" copy of this version as you make them. This only saves your changes to a new public copy so that characters can use them.'}),ne.jsx("p",{children:"Are you sure you'd like to save your changes to a new version."})]}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"light",onClick:o,children:"Close"}),ne.jsx(sp,{color:"primary",onClick:async()=>{const e=await QO(n);if(!e)return op("Error creating new version from edits","error");if(!(await IJ(e.reference_type,e.reference_id,e.local_id,!1)))return MJ(e.local_id,!0),op("Error creating subscription to new version, cleaning up...","error");t?await QO(t,r,!0):op("Error finding original??? Please open a ticket for this :).","error"),op("Success Creating "),i("/library"),o()},children:"Confirm"})]})]})},LQ=()=>{const{id:e}=pf();ff();const t=q.useMemo((()=>e?`${e}|edits`:void 0),[e]),n=TQ(e),r=tR(t),o=eR((()=>hv.systems.get(i||"")),[i=null==r?void 0:r.reference_id]);var i;const a=VO.useValue();q.useEffect((()=>{if(!t||t===a.versionId)return;const e=(null==r?void 0:r.data.pages[0].name)||"",n=(null==r?void 0:r.data.creator[0].name)||"",o=(null==r?void 0:r.data.modals[0].name)||"";VO.set((r=>({...r,versionId:t,characterPage:e,creatorPage:n,modalsPage:o})))}),[t,a,r]),q.useEffect((()=>{let e=!1,t={characterPage:a.characterPage,creatorPage:a.creatorPage,modalsPage:a.modalsPage};var n,o,i;null!=r&&r.data.pages.find((e=>e.name===a.characterPage))||(t.characterPage=(null==r||null===(n=r.data.pages[0])||void 0===n?void 0:n.name)||"",e=!0);null!=r&&r.data.creator.find((e=>e.name===a.creatorPage))||(t.creatorPage=(null==r||null===(o=r.data.creator[0])||void 0===o?void 0:o.name)||"",e=!0);null!=r&&r.data.modals.find((e=>e.name===a.modalsPage))||(t.modalsPage=(null==r||null===(i=r.data.modals[0])||void 0===i?void 0:i.name)||"",e=!0);e&&VO.set((e=>({...e,...t})))}),[a,r]);const s=q.useMemo((()=>({Container:mQ,Text:yQ,Select:EQ,TextInput:CQ,FAB:$$,Searchbar:L$,DesignerDivider:I$})),[mQ,yQ,EQ,CQ,$$,L$,I$]);return t?n?r?o?ne.jsx(T$,{resolver:s,onNodesChange:e=>{r&&aQ(r.local_id,(async(e,t)=>{if("{}"===t)return;const n=UT.encodeBase64(UT.compress(t)),r=VO.get(),o=await hv.versions.get(e);return o?Yw(o.data,(e=>{const t="editor"===r.tab?e.pages:"creator"===r.tab?e.creator:e.modals,o="editor"===r.tab?r.characterPage:"creator"===r.tab?r.creatorPage:r.modalsPage,i=t.findIndex((e=>e.name===o));-1!==i&&(t[i].lexical=n)})):void 0})(r.local_id,e.serialize()))},children:ne.jsxs("div",{className:"flex flex-col h-full overflow-y-scroll",children:[ne.jsx(Yb,{title:o.name,subtitle:`Version: ${DY(n.local_id)}`,options:[{onClick:()=>fh("save-new-version",(({id:e})=>ne.jsx(DQ,{id:e,original:n,edits:r,edits_id:t}))),Content:()=>ne.jsx("p",{children:"Save Version"})}],hasSidebar:!0}),ne.jsxs("div",{className:"p-4 sm:mr-64 relative flex flex-col flex-grow",children:[ne.jsxs(Qb,{id:"tab-selector",label:"",value:a.tab,onChange:YO,children:[ne.jsx("option",{value:"character",children:"Character Schema"}),ne.jsx("option",{value:"data",children:"System Data"}),ne.jsx("option",{value:"types",children:"Data Types"}),ne.jsx("option",{value:"functions",children:"Blueprints"}),ne.jsx("option",{value:"editor",children:"Editor UI"}),ne.jsx("option",{value:"creator",children:"Builder UI"}),ne.jsx("option",{value:"modals",children:"Modals"}),ne.jsx("option",{value:"actions",children:"Character Actions"})]}),"character"===a.tab?ne.jsx(sQ,{editsId:t,versionedResource:r}):"data"===a.tab?ne.jsx(lQ,{editsId:t,versionedResource:r}):"types"===a.tab?ne.jsx(hQ,{editsId:t,versionedResource:r}):"functions"===a.tab?ne.jsx(xQ,{versionedResource:r}):"editor"===a.tab?ne.jsx(wQ,{versionedResource:r}):"creator"===a.tab?ne.jsx(PQ,{versionedResource:r}):"modals"===a.tab?ne.jsx(IQ,{versionedResource:r}):"actions"===a.tab&&ne.jsx(MQ,{editsId:t,versionedResource:r})]}),ne.jsx(RQ,{})]})}):ne.jsx(ne.Fragment,{children:"Loading System..."}):ne.jsx(ne.Fragment,{children:"Loading Edits..."}):ne.jsx(ne.Fragment,{children:"Loading Original..."}):ne.jsx(ne.Fragment,{children:"id not defined..."})},BQ=ih([{name:"BardsBallad",light:{background:"#121217",brand:{50:"#fcf9f0",100:"#f9f2db",200:"#f2e1b6",300:"#eacc87",400:"#e3b667",500:"#d99736",600:"#cb802b",700:"#a86426",800:"#875025",900:"#6d4221",950:"#3b210f"},neutral:{50:"#f8f9fb",100:"#f0f1f5",200:"#d9dbe3",300:"#babdcf",400:"#9499b3",500:"#6e7499",600:"#575e7f",700:"#464d66",800:"#393d50",900:"#2e3240",950:"#191c27"},orange:{50:"#fff7eb",100:"#ffe9c6",200:"#ffcd87",300:"#ffac4a",400:"#ff8a16",500:"#e67300",600:"#c35e00",700:"#9e4c00",800:"#7a3b00",900:"#5e2f00",950:"#351a00"},red:{50:"#fff5f5",100:"#ffe5e5",200:"#ffbdbd",300:"#ff8f8f",400:"#ff5c5c",500:"#ff3030",600:"#e52626",700:"#b31f1f",800:"#8c1919",900:"#6a1414",950:"#410d0d"},blue:{50:"#f3faff",100:"#e2f3ff",200:"#bce1ff",300:"#82cbff",400:"#41b2ff",500:"#1f93e6",600:"#166eb3",700:"#125892",800:"#0f4776",900:"#0d3a5e",950:"#07233b"},green:{50:"#f3fcf5",100:"#e4f8e8",200:"#c3edcb",300:"#92d8a4",400:"#57be75",500:"#35a257",600:"#298548",700:"#236e3b",800:"#1c552f",900:"#164429",950:"#0b2617"}}},{name:"ValentinesDay",light:{background:"#442835",brand:{50:"#fff7f9",100:"#ffeef2",200:"#fed7e2",300:"#fbb6ce",400:"#f687b3",500:"#ed64a6",600:"#d53f8c",700:"#b83280",800:"#97266d",900:"#702459",950:"#521640"},neutral:{50:"#fdf7f9",100:"#faf0f3",200:"#f4d9e1",300:"#e8b8ca",400:"#d68aa8",500:"#b76d89",600:"#91536b",700:"#734256",800:"#5b3544",900:"#442835",950:"#2b1821"},orange:{50:"#fff8f1",100:"#ffe8d8",200:"#ffd0ae",300:"#ffaf7e",400:"#ff8552",500:"#f75e28",600:"#d9471a",700:"#b43716",800:"#8c2c13",900:"#6c2311",950:"#3e1409"},red:{50:"#fff5f5",100:"#ffe3e3",200:"#ffbaba",300:"#ff8989",400:"#ff5c5c",500:"#fc2626",600:"#d21f1f",700:"#aa1919",800:"#851515",900:"#661010",950:"#400909"},blue:{50:"#f5f8ff",100:"#ebf2ff",200:"#cbdcff",300:"#a2bfff",400:"#799fff",500:"#567dff",600:"#455fd4",700:"#394aa9",800:"#303b85",900:"#262e66",950:"#171a40"},green:{50:"#f5fdf7",100:"#e7f8eb",200:"#c6edcf",300:"#95dca7",400:"#5fc67d",500:"#3ca75e",600:"#2e8749",700:"#266e3d",800:"#205530",900:"#1a4226",950:"#0d2615"}}}]),FQ=ih({theme:"BardsBallad",scheme:"dark",isErudaActive:!1},{onSet:(e,t)=>{Nh.set("settings",e),t.isErudaActive&&!e.isErudaActive?(()=>{const e=document.getElementById("eruda-script");e&&(eruda.destroy(),e.remove())})():!t.isErudaActive&&e.isErudaActive&&(()=>{let e=document.createElement("script");e.id="eruda-script",e.src="https://cdn.jsdelivr.net/npm/eruda",document.body.append(e),e.onload=()=>{eruda.init()}})(),e.theme===t.theme&&e.scheme===t.scheme||UQ()}});(async()=>{const e=await Nh.get("settings");e&&FQ.set(e)})();const zQ=e=>{FQ.set((t=>({...t,isErudaActive:e})))},$Q=e=>{FQ.set((t=>({...t,theme:e})))},UQ=()=>{const e=BQ.get(),t=FQ.get(),n=e.find((e=>e.name===t.theme));if(n){document.documentElement.style.setProperty("--background",n.light.background);for(let e in n.light.brand)document.documentElement.style.setProperty(`--brand-${e}`,n.light.brand[e]);for(let e in n.light.neutral)document.documentElement.style.setProperty(`--neutral-${e}`,n.light.neutral[e]);for(let e in n.light.orange)document.documentElement.style.setProperty(`--orange-${e}`,n.light.orange[e]);for(let e in n.light.red)document.documentElement.style.setProperty(`--red-${e}`,n.light.red[e]);for(let e in n.light.blue)document.documentElement.style.setProperty(`--blue-${e}`,n.light.blue[e]);for(let e in n.light.green)document.documentElement.style.setProperty(`--green-${e}`,n.light.green[e])}},WQ=1,HQ=4,VQ=8,qQ=16,KQ=32;function ZQ(e,t){return(e&t)===t}function YQ(e){return ZQ(e,WQ)?"Free":ZQ(e,HQ)?"Premium":ZQ(e,VQ)?"Ambassador":ZQ(e,qQ)?"Developer":ZQ(e,KQ)?"Admin":void 0}const GQ=()=>ne.jsx("p",{children:"No tab found for this id."}),XQ=({tabs:e,props:t})=>{var n;const[r,o]=q.useState(e[0].id);return ne.jsxs("div",{className:"w-full mt-5",children:[ne.jsx("div",{className:"flex space-x-2 border-b border-neutral-700",children:e.map((e=>ne.jsx("button",{onClick:()=>{o(e.id)},className:"py-2 px-4 text-sm font-medium transition-colors border-fantasy-accent "+(r===e.id?"border-b-2 text-fantasy-accent":"text-fantasy-text-muted hover:text-fantasy-accent"),children:e.label},e.id)))}),ne.jsx("div",{className:"p-4",children:(null===(n=e.find((e=>e.id===r)))||void 0===n?void 0:n.Content(t))||ne.jsx(GQ,{})})]})},JQ=async()=>{Ah.clear(),Oh.clear(),Ph.set({isLoggedIn:!1,user:null,synced_characters:[]}),await Promise.all(hv.tables.map((e=>e.clear())))},QQ=async()=>{Oh.clear(),await Promise.all(hv.tables.map((e=>e.clear())))},e0=async()=>{const e=(await Wb.get("/discord/getLoginLink")).data;if(!e)return op("No url in login link response?","error");window.open(e,"_self")},t0=[{id:"profile",label:"Profile",Content:({isLoggedIn:e,user:t})=>ne.jsx("div",{className:"max-w-5xl mx-auto",children:e&&t?ne.jsxs("div",{className:"my-2 flex flex-col gap-4 lg:grid lg:grid-cols-2 rtl:space-x-reverse flex-wrap",children:[ne.jsx("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-neutral-500 border",children:ne.jsxs("div",{className:"flex items-center",children:[ne.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:t.username[0]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:t.username}),ne.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[ne.jsx("span",{children:t.email}),ne.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:YQ(t.role)})]})]})]})}),ne.jsxs("div",{className:"flex flex-col w-full bg-fantasy-dark p-4 rounded-lg border-fantasy-border border",children:[ne.jsx("p",{className:"text-lg",children:"Subscription"}),ne.jsxs("p",{className:"mb-4",children:["Current Tier: ",YQ(t.role)]}),ne.jsx(sp,{color:"primary",onClick:async()=>{let e="";const n=ZQ(t.role,HQ),r=ZQ(t.role,WQ)||ZQ(t.role,HQ);if(r&&!n){const{url:t}=await(async()=>await Wb.get("/stripe/create-checkout-session").then((e=>e.data)))();e=t}else if(r&&n){const{url:t}=await(async()=>await Wb.get("/stripe/create-portal-session").then((e=>e.data)))();e=t}window.open(e,"_self")},children:ZQ(t.role,WQ)?"Subscribe":ZQ(t.role,HQ)?"Manage Subscription":"Thank you for everything!"})]}),!t.discord_id&&ne.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-indigo-500 border",children:[ne.jsx("p",{className:"text-lg",children:"Discord Integration"}),ne.jsx("p",{className:"mb-4",children:"Link your Discord account to access additional features"}),ne.jsx(sp,{color:"primary",onClick:e0,children:"Connect Discord Account"})]}),ne.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-red-500 border",children:[ne.jsx("p",{className:"text-lg",children:"Danger Zone"}),ne.jsx("p",{className:"mb-4 text-red-500",children:"All local data is cleared (unsynced data will be lost)"}),ne.jsx(sp,{color:"danger",onClick:()=>fh("confirm",(({id:e})=>ne.jsx(WX,{id:e,title:"Logout",type:"danger",message:"All local data is cleared (unsynced data will be lost)",onConfirm:JQ}))),children:"Logout"})]})]}):ne.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[ne.jsx("p",{className:"text-lg",children:"You are not logged in"}),ne.jsx("p",{className:"mb-4",children:"Login to access your profile"}),ne.jsx(sp,{color:"light",onClick:()=>fh("auth",(({id:e})=>ne.jsx(Hb,{id:e}))),children:"Login / Register"})]})})},{id:"general",label:"General",Content:({settings:e,themes:t})=>ne.jsx(Qb,{id:"theme",label:"Theme",value:e.theme,onChange:$Q,children:t.map((e=>ne.jsx("option",{value:e.name,children:e.name})))})},{id:"developer",label:"Developer",Content:({settings:e})=>ne.jsxs(ne.Fragment,{children:[ne.jsxs("p",{className:"my-2",children:[ne.jsx("a",{className:"underline",href:"https://eruda.liriliri.io/",target:"_blank",children:"Eruda"})," allows access to the development console on mobile."]}),ne.jsx(ix,{id:"use-eruda",label:"Load Eruda",checked:e.isErudaActive,onChange:zQ}),ne.jsx("p",{className:"my-2",children:"Clear Local Storage"}),ne.jsx(sp,{color:"danger",onClick:QQ,children:"Clear Local Storage"})]})}],n0=()=>{const e=BQ.useValue(),t=FQ.useValue(),{isLoggedIn:n,user:r}=Ph.useValue();return ne.jsxs("div",{children:[ne.jsx(Yb,{title:"Settings"}),ne.jsx(XQ,{tabs:t0,props:{themes:e,settings:t,isLoggedIn:n,user:r}})]})},r0=()=>{const e=ff();return q.useEffect((()=>{(async()=>{const e=await Wb.get("/stripe/sync-stripe-data"),{newAccessToken:t}=e.data;t&&Th(t)})()}),[]),ne.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[ne.jsx("h1",{children:"Subscription Successful!"}),ne.jsx("p",{children:"Thank you for subscribing to Bard's Ballad. Your subscription was processed successfully."}),ne.jsx("p",{children:"We hope you enjoy all the premium features and content!"}),ne.jsx("button",{onClick:()=>{e("/settings")},style:{marginTop:"1rem",padding:"0.5rem 1rem",fontSize:"1rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Back to Settings"})]})},o0=ih({isOnline:navigator.onLine}),i0=e=>o0.set((t=>({...t,isOnline:e}))),a0=q.createContext({}),s0=({id:e,data:t,title:n="Item Name"})=>{const[r,o]=q.useState([]),[i,a]=q.useState(!0),[s,l]=q.useState(r[0]),[c,u]=q.useState(!1);q.useEffect((()=>{(async()=>{if(!t)return o([]);const e=await(async e=>{try{return(await Wb.get(`/marketplace/${e}/versions`)).data}catch(t){return[]}})(t.resource_id);o(e),l(e[0])})()}),[]);const d=q.useCallback((()=>hh(e)),[e]);return t?ne.jsxs(lp,{isOpen:!0,onClose:d,children:[ne.jsx(dp,{title:"Install System",onClose:d}),ne.jsxs(cp,{children:[ne.jsxs("div",{className:"text-center",children:[ne.jsx("h4",{className:"text-fantasy-accent font-medium text-2xl",children:t.name}),ne.jsx("p",{className:"text-sm text-fantasy-text-muted mt-1",children:"Compatible with 0.0.1"})]}),ne.jsxs("div",{className:"p-6 text-center fantasy-card-gradient text-fantasy-text border border-white/10 rounded-lg transition-all duration-300 hover:bg-white/20",children:[ne.jsx("p",{children:t.description}),ne.jsxs("div",{className:"flex flex-wrap gap-3 justify-center mt-2",children:[ne.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Advanced Character Sheets"}),ne.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Automated Dice Rolling"}),ne.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Spell Compendium"}),ne.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Combat Tracker"})]})]}),ne.jsxs("div",{children:[ne.jsx("h4",{className:"text-lg",children:"Supported Datapacks"}),ne.jsx("div",{className:"flex gap-6 overflow-x-auto py-4",children:[1,2,3,4,5,6,7,8,9,10].map((()=>ne.jsx("div",{className:"fantasy-card-gradient border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:ne.jsx("div",{className:"flex items-center justify-between",children:ne.jsxs("div",{className:"flex items-center gap-3",children:[ne.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-fantasy-border rounded-lg flex items-center justify-center",children:ne.jsx("span",{className:"text-xl font-bold text-fantasy-text",children:"T"})}),ne.jsx("div",{className:"w-32",children:ne.jsx("div",{className:"text-lg font-semibold text-fantasy-text",children:"Test Pack"})})]})})})))})]}),ne.jsx("div",{className:"flex items-center justify-center w-full",children:ne.jsx("div",{className:"flex flex-row justify-center gap-2",children:r.length?ne.jsxs(ne.Fragment,{children:[ne.jsx(ix,{id:"auto-update",label:"Auto Update",checked:i,onChange:a}),ne.jsx($X,{label:DY(s.item_id),options:r.map((e=>({label:DY(e.item_id),onClick:()=>l(e)})))})]}):ne.jsx("p",{children:"loading versions..."})})})]}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"light",onClick:d,children:"Cancel"}),ne.jsx(sp,{color:"primary",onClick:async()=>{try{u(!0);const{baseData:e,versionData:t}=await(async e=>{try{return(await Wb.get(`/marketplace/subscribe/${e}`)).data}catch(t){return null}})(s.item_id);if(!e||!t)return op("Failed to fetch item data.","error");const n=await(async e=>{try{if(await hv.systems.get(e.local_id))return null;const t=CR.safeParse(e);return t.success?(await hv.systems.add(e),e):(console.log("Invalid system data:",t.error.format()),null)}catch(J$){return console.log("Error saving system:",J$),null}})(e);if(!n)return op("Failed to create system.","error");const r=await(async e=>{try{if(await hv.versions.get(e.local_id))return null;const t=OJ.safeParse(e);return t.success?(await hv.versions.add(e),e):(console.log("Invalid version data:",t.error.format()),null)}catch(J$){return console.log("Error saving version:",J$),null}})(t);if(!r)return op("Failed to create version.","error");if(!(await PJ(r.local_id,r.data.types.map(UJ))))return op("Error creating hashes for forked content, cleaning up...","error");if(!(await IJ("system",n.local_id,r.local_id,!1)))return op("Failed to create subscription.","error");op("Subscription created!","success")}catch(J$){console.error(`Error creating subscription: ${J$}`),op("Error creating subscription","error")}u(!1)},children:"Install"})]})]}):null},l0=({onAccept:e})=>ne.jsxs(lp,{isOpen:!0,children:[ne.jsx(dp,{title:"Disclaimer"}),ne.jsxs(cp,{children:[ne.jsx("p",{children:"BardsBallad is a system-agnostic character manager that supports a wide variety of user-created and open-license game systems"}),ne.jsx("br",{}),ne.jsx("p",{children:"Some content may be based on systems originally published under the ORC License, Creative Commons (CC-BY 4.0), or other open licenses. All such content is provided either by BardsBallad or individual users in compliance with their respective licenses."}),ne.jsx("br",{}),ne.jsx("p",{children:"BardsBallad is not affiliated with or endorsed by Paizo Inc., Wizards of the Coast, or any other publishers. Names like Pathfinder, Starfinder, or Dungeons & Dragons are trademarks of their respective owners and are only used to indicate compatibility where appropriate."}),ne.jsx("br",{}),ne.jsx("p",{children:"Users are solely responsible for the legality of content they upload or share. Please do not upload copyrighted material or publisher-owned setting content (such as Golarion or the Forgotten Realms) unless you have the appropriate rights."})]}),ne.jsx(up,{children:ne.jsx(sp,{color:"primary",onClick:e,children:"I Understand"})})]}),c0=({id:e})=>{const{subscriptions:t,isLoading:n}=BX(),[r,o]=q.useState("system"),[i,a]=q.useState(null==t?void 0:t.find((e=>"system"===e.type))),[s,l]=q.useState(null==i?void 0:i.versions[0]),[c,u]=q.useState(""),[d,f]=q.useState(!0),[h,p]=q.useState(!0),[{isPublishing:g,error:m},v]=q.useState({isPublishing:!1,error:""});q.useEffect((()=>{if(!t)return;const e=null==t?void 0:t.find((e=>e.type===r));a(e),l(null==e?void 0:e.versions[0])}),[t,r]),q.useEffect((()=>{(async()=>{if(!i)return;const e=await(async e=>{try{return(await Wb.get(`/marketplace/${e}`)).data}catch(t){return null}})(null==i?void 0:i.item_id);if(!e)return p(!0);p(!1)})()}),[i]);const y=q.useCallback((()=>hh(e)),[e]);return ne.jsxs(lp,{isOpen:!0,onClose:y,children:[ne.jsx(dp,{title:h?"Publish new Item":"Publish new version",onClose:y}),ne.jsx(cp,{children:!n&&t&&i&&s?g||m?ne.jsx("div",{children:g?ne.jsx("p",{children:"Publishing..."}):ne.jsx("p",{children:m})}):ne.jsxs(ne.Fragment,{children:[ne.jsxs(Qb,{id:"type-to-publish",label:"Item Type",value:r,onChange:o,children:[ne.jsx("option",{value:"system",children:"System"}),ne.jsx("option",{value:"datapack",children:"Datapack"})]}),ne.jsx(Qb,{id:"item-to-publish",label:"System",value:null==i?void 0:i.item_id,onChange:e=>a(t.find((t=>t.item_id===e))),children:t.filter((e=>e.type===r)).map((e=>ne.jsx("option",{value:e.item_id,children:e.item.name},e.item_id)))}),ne.jsx(ox,{id:"description",label:h?"Description":"Changelog",value:c,onChange:u}),h&&ne.jsx(ix,{id:"is-public",label:"Is public?",checked:d,onChange:f}),ne.jsx(Qb,{id:"version-to-publish",label:"Version",value:null==s?void 0:s.local_id,onChange:e=>l(i.versions.find((t=>t.local_id===e))),children:i.versions.map((e=>ne.jsx("option",{value:e.local_id,children:DY(e.local_id)},e.local_id)))})]}):ne.jsx("p",{children:"Loading..."})}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"light",onClick:y,children:"Close"}),ne.jsx(sp,{color:"primary",disabled:!i||!s,onClick:async()=>{v({isPublishing:!0,error:""});let e="";switch(h){case!0:const{error:t}=await(async t=>{try{const e=await Wb.post("/marketplace",t);return 200===e.status?{}:{error:e.data}}catch(e){return{error:"Error occured during publish"}}})({item:i.item,version:s,description:c,resource_type:r,is_public:d});t&&(e=t);break;case!1:const{error:n}=await(async(t,n)=>{try{const e=await Wb.post(`/marketplace/${t}/versions`,n);return 200===e.status?{}:{error:e.data}}catch(e){return{error:"Error occured during publishing new version"}}})(i.item_id,{item_id:i.item_id,version:s,changelog:c});n&&(e=n)}e&&v({isPublishing:!1,error:e}),y()},children:"Publish"})]})]})},u0=({item:e})=>{const{addToast:t}=q.useContext(a0);return ne.jsx("div",{className:"fantasy-card-gradient border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",onClick:()=>fh("view marketplace item",(({id:t})=>ne.jsx(s0,{id:t,title:e.name,data:e}))),children:ne.jsxs("div",{className:"flex items-start space-x-4",children:[ne.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-fantasy-border rounded-lg flex items-center justify-center",children:ne.jsx("span",{className:"text-xl font-bold text-white",children:e.name[0]})}),ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:e.name}),ne.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[e.creator_username," | Version ",DY(e.version)]})]})]})},e.name)},d0=()=>{const[e,t]=q.useState([]),{isLoggedIn:n}=Ph.useValue(),{isOnline:r}=o0.useValue();return q.useEffect((()=>{if(!r)return t([]);(async()=>{const e=await(async()=>{try{return(await Wb.get("/marketplace")).data}catch(e){return[]}})();t(e)})()}),[r]),q.useEffect((()=>{(async()=>{await Rh.get("seen-marketplace-disclaimer")||fh("marketplace-disclaimer",(({id:e})=>ne.jsx(l0,{onAccept:()=>{hh(e),Rh.set("seen-marketplace-disclaimer",!0)}})))})()}),[]),r?ne.jsxs("div",{children:[ne.jsx(Yb,{title:"Marketplace",subtitle:"Discover amazing systems, themes, and content created by the community"}),ne.jsxs("div",{className:"px-4 pb-4",children:[ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-3xl font-semibold mt-4",children:"Browse Categories"}),ne.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:[" Game Systems (40)"," Datapacks (100+)"," Themes (32)"].map((e=>ne.jsx("span",{className:"cursor-pointer bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:e},e)))})]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-3xl font-semibold mt-4 mb-2",children:"Featured Systems"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter((e=>"system"===e.resource_type)).map(((e,t)=>ne.jsx(u0,{item:e},t)))})]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-3xl font-semibold mt-4",children:"Featured Datapacks"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter((e=>"datapack"===e.resource_type)).map(((e,t)=>ne.jsx(u0,{item:e},t)))})]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-3xl font-semibold mt-4",children:"Featured Themes"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter((e=>"datapack"===e.resource_type)).map(((e,t)=>ne.jsx(u0,{item:e},t)))})]})]}),n&&ne.jsx(z$,{onClick:()=>fh("publish-item",(({id:e})=>ne.jsx(c0,{id:e})))})]}):ne.jsxs("div",{className:"h-full",children:[ne.jsx(Yb,{title:"Marketplace"}),ne.jsx("div",{className:"flex justify-center items-center p-4",children:ne.jsx("h2",{className:"text-3xl",children:"Marketplace is not available while you're offline!"})})]})};const f0=()=>{const{id:e}=pf(),t=q.useMemo((()=>e?`${e}|edits`:void 0),[e]),n=TQ(e),r=tR(t),o=eR((()=>hv.datapacks.get(i||"")),[i=null==r?void 0:r.reference_id]);var i;return t?n?r?o?ne.jsxs("div",{className:"flex flex-col h-full",children:[ne.jsx(Yb,{title:o.name,options:[{onClick:()=>fh("save-new-version",(({id:e})=>ne.jsx(DQ,{id:e,original:n,edits:r,edits_id:t}))),Content:()=>ne.jsx("p",{className:"block cursor-pointer py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 md:dark:text-blue-500",children:"Save Version"})}]}),ne.jsx("div",{className:"p-4 relative flex flex-col flex-grow",children:ne.jsx("div",{className:"flex flex-col gap-1",children:r.data.packData.map((e=>ne.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>fh("edit-pack-data",(({id:n})=>ne.jsx(KJ,{id:n,types:r.data.types,onSave:n=>aQ(t,Yw(r.data,(t=>{const r=t.packData.findIndex((t=>t.name===e.name));-1!==r&&(e.name!==n.name?(t.packData.splice(r,1),t.packData.push(n)):t.packData[r]=n)}))),data:e}))),children:ne.jsxs("p",{children:[e.name," - ",e.typeData.type," ",e.typeData.isArray?"(Array)":""]})},e.name)))})})]}):ne.jsx(ne.Fragment,{children:"Loading System..."}):ne.jsx(ne.Fragment,{children:"Loading Edits..."}):ne.jsx(ne.Fragment,{children:"Loading Original"}):ne.jsx(ne.Fragment,{children:"id not defined..."})},h0=(e,t=7)=>{const n=new Date;return n.setDate(n.getDate()-t),new Date(e)<n};const p0=async e=>{try{let t=await Oh.get("updated_characters")||[];return t.includes(e)||await Oh.set("updated_characters",[...t,e]),await hv.characters.update(e,{data:{},updated_at:(new Date).toISOString()})}catch(J$){console.log("Error clearing character:",J$)}},g0=({sub:e})=>{const t=eR((()=>LX(e.resource_type,e.resource_id)),[e]);return t?ne.jsxs("div",{className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[ne.jsxs("div",{className:"flex items-center mb-4",children:[ne.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:t.name[0]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:t.name}),ne.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[ne.jsxs("span",{children:[" ",e.resource_type]}),ne.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:DY(e.version_id)})]})]})]}),ne.jsxs("div",{className:"flex gap-2 mt-4",children:[ne.jsxs("button",{className:"flex-1 fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>(async e=>{try{return await hv.subscriptions.update(e,{deleted_at:void 0,updated_at:(new Date).toISOString()})}catch(J$){console.log("Error reviving subscription:",J$)}})(e.local_id),children:["Revive ",e.resource_type]}),ne.jsx($X,{label:"",options:[{label:"export",onClick:()=>zX(e.resource_type,t,`${t.name}-export`)},{label:"force delete",onClick:()=>fh("confirm",(({id:t})=>ne.jsx(WX,{id:t,title:`Force Delete ${e.resource_type}`,type:"danger",message:`Are you sure you want to force delete this ${e.resource_type}?`,onConfirm:()=>(async e=>{try{const t=new Date;return t.setDate(t.getDate()-11),await hv.subscriptions.update(e,{deleted_at:t.toISOString(),updated_at:(new Date).toISOString()})}catch(J$){console.log("Error clearing subscription:",J$)}})(e.local_id)})))}]})]})]},e.local_id):ne.jsx("p",{children:"loading"})},m0=()=>{const{subscriptions:e,isLoading:t}=function(){const e=eR((()=>hv.subscriptions.toArray()),[]);return{subscriptions:(null==e?void 0:e.filter((e=>e.deleted_at&&!h0(e.deleted_at,10))))||[],isLoading:void 0===e}}(),{characters:n,isLoading:r}=function(){const e=eR((async()=>{const e=(await hv.characters.toArray()).filter((e=>e.deleted_at&&!(e=>{for(let t in e)return!1;return!0})(e.data)&&!h0(e.deleted_at,10)));return e.sort(((e,t)=>e&&t?new Date(e.deleted_at)>new Date(t.deleted_at)?-1:1:0)),e}),[]);return{characters:e||[],isLoading:void 0===e}}();return ne.jsxs("div",{children:[ne.jsx(Yb,{title:"The Catacombs",subtitle:"Items permanently removed after 7 days"}),ne.jsxs("div",{className:"px-4 pb-4",children:[ne.jsx("div",{className:"mb-5",children:ne.jsx(D$,{placeholder:"Search Catacombs...",onSearch:()=>{},filters:[{title:"systems",property:"type",value:"system"},{title:"datapacks",property:"type",value:"datapack"},{title:"themes",property:"type",value:"theme"}]})}),t||r?ne.jsx("h5",{className:"mb-4 text-xl",children:"Loading..."}):ne.jsx("h5",{className:"flex flex-col gap-4",children:ne.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[n.map(((e,t)=>ne.jsxs("div",{style:{zIndex:""+(n.length-t)},className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[ne.jsxs("div",{className:"flex items-center mb-4",children:[ne.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:e.name[0]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:e.name}),ne.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[ne.jsx("span",{children:" Ranger"}),ne.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:DY(e.system.local_id)})]})]})]}),ne.jsxs("div",{className:"flex gap-2 mt-4",children:[ne.jsx("button",{className:"flex-1 fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>(async e=>{try{let t=await Oh.get("updated_characters")||[];return t.includes(e)||await Oh.set("updated_characters",[...t,e]),await hv.characters.update(e,{deleted_at:void 0,updated_at:(new Date).toISOString()})}catch(J$){console.log("Error reviving character:",J$)}})(e.local_id),children:"Revive Adventurer"}),ne.jsx($X,{label:"",options:[{label:"export",onClick:()=>zX("character",e,`${e.name}-export`)},{label:"force delete",onClick:()=>fh("confirm",(({id:t})=>ne.jsx(WX,{id:t,title:"Force Delete Character",type:"danger",message:"Are you sure you want to force delete this character?",onConfirm:()=>p0(e.local_id)})))}]})]})]},e.local_id))),e.map((e=>ne.jsx(g0,{sub:e})))]})})]})]})},v0=async()=>{try{return 200===(await Wb.get("/ping")).status}catch(e){return!1}},y0="system-checkpoint",b0="version-checkpoint",w0="character-checkpoint",x0="subscription-checkpoint",_0=({id:e,data:t,onSave:n})=>{const[r,o]=q.useState(0),[i,a]=q.useState(t[0]),[s,l]=q.useState([]),c=q.useCallback((()=>hh(e)),[e]),u=(e,i)=>{const u=[...s,{...e,version:i.version,updated_at:(new Date).toISOString()}];l(u);const d=r+1;d>=t.length?(n(u),c()):(o(d),a(t[d]))};return ne.jsxs(lp,{isOpen:!0,children:[ne.jsx(dp,{title:`Conflicts for Local:${i.local.name} / Remote:${i.remote.name}`}),ne.jsx(cp,{className:"text-center",children:ne.jsxs("div",{className:"p-4",children:[ne.jsx("p",{className:"text-lg font-medium mb-2",children:"Local"}),ne.jsxs("p",{children:["Version: ",i.local.version]}),ne.jsxs("p",{children:["Updated: ",new Date(i.local.updated_at).toString()]}),ne.jsx("p",{className:"text-lg font-medium mb-2",children:"Remote"}),ne.jsxs("p",{children:["Version: ",i.remote.version]}),ne.jsxs("p",{children:["Updated: ",new Date(i.remote.updated_at).toString()]})]})}),ne.jsxs(up,{children:[ne.jsx(sp,{color:"light",onClick:()=>u(i.local,i.remote),children:"Keep Local"}),ne.jsx(sp,{color:"primary",onClick:()=>u(i.remote,i.remote),children:"Keep Remote"})]})]})},k0=[{name:"Subscriptions",get:()=>hv.subscriptions.toArray(),bulkPut:e=>hv.subscriptions.bulkPut(e),pull:async()=>{const e=await Oh.get(x0),{checkpoint:t,documents:n}=await(async(e,t)=>{const n=(null==e?void 0:e.updated_at)||0,r=(null==e?void 0:e.id)||"";return await Wb.get("/subscriptions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then((e=>e.data))})(e,20);return await Oh.set(x0,t),n},push:async()=>{const e=await hv.subscriptions.toArray(),t=await hv.characters.toArray(),n=wh(await Ah.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await Oh.get("synced_characters")||[],o=ZQ(n.role,HQ),i=e.filter((e=>{if(!(e.user_id===n.id))return!1;const i=t.find((t=>{const n=t.system.version_id===e.version_id&&t.system.local_id===e.resource_id,o=r.includes(t.local_id);return n&&o})),a=void 0!==i,s=!e.id&&o;return a||s}));return await(async e=>await Wb.post("/subscriptions/push",e).then((e=>e.data)))(i)}},{name:"Systems",get:()=>hv.systems.toArray(),bulkPut:e=>hv.systems.bulkPut(e),pull:async()=>{const e=await Oh.get(y0),{checkpoint:t,documents:n}=await(async(e,t)=>{const n=(null==e?void 0:e.updated_at)||0,r=(null==e?void 0:e.id)||"";return await Wb.get("/systems/pull",{params:{updated_at:n,id:r,batchSize:t}}).then((e=>e.data))})(e,20);return await Oh.set(y0,t),n},push:async()=>{const e=await hv.systems.toArray(),t=await hv.characters.toArray(),n=wh(await Ah.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await Oh.get("synced_characters")||[],o=ZQ(n.role,HQ),i=e.filter((e=>{if(!(e.user_id===n.id))return!1;const i=t.find((t=>t.system.local_id===e.local_id&&r.includes(t.local_id))),a=void 0!==i,s=!e.id&&o;return a||s}));return await(async e=>await Wb.post("/systems/push",e).then((e=>e.data)))(i)}},{name:"Versions",get:()=>hv.versions.toArray(),bulkPut:e=>hv.versions.bulkPut(e),pull:async()=>{const e=await Oh.get(b0),{checkpoint:t,documents:n}=await(async(e,t)=>{const n=(null==e?void 0:e.updated_at)||0,r=(null==e?void 0:e.id)||"";return await Wb.get("/versions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then((e=>e.data))})(e,20);return await Oh.set(b0,t),n},push:async()=>{const e=await hv.versions.toArray(),t=await hv.characters.toArray(),n=wh(await Ah.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await Oh.get("synced_characters")||[],o=ZQ(n.role,HQ),i=e.filter((e=>{if(!(e.user_id===n.id))return!1;const i=t.find((t=>t.system.version_id===e.local_id&&r.includes(t.local_id))),a=void 0!==i,s=!e.id&&o;return a||s}));return await(async e=>await Wb.post("/versions/push",e).then((e=>e.data)))(i)}},{name:"Characters",get:()=>hv.characters.toArray(),bulkPut:e=>hv.characters.bulkPut(e),pull:async()=>{const e=await Oh.get(w0),{checkpoint:t,documents:n}=await(async(e,t)=>{const n=(null==e?void 0:e.updated_at)||0,r=(null==e?void 0:e.id)||"";return await Wb.get("/characters/pull",{params:{updated_at:n,id:r,batchSize:t}}).then((e=>e.data))})(e,20);return await Oh.set(w0,t),n},push:async()=>{const e=await hv.characters.toArray(),t=wh(await Ah.get("token"));if(!t)return{conflicts:[],metadata:[]};const n=ZQ(t.role,HQ),r=await Oh.get("updated_characters")||[],o=await Oh.get("synced_characters")||[],i=e.filter((e=>{const t=o.includes(e.local_id),i=r.includes(e.local_id);return!(!n||!i)||t&&i}));return await(async e=>await Wb.post("/characters/push",e).then((e=>e.data)))(i)}}];async function S0(e){return 0===e.length?[]:new Promise((t=>{fh("handle-conflicts",(({id:n})=>K.createElement(_0,{id:n,data:e,onSave:t})))}))}async function E0(e,t,n){let r=!0;for(;r;){const o=await t();o.length<10&&(r=!1);const i=o.flatMap((e=>{const t=n.find((t=>t.local_id===e.local_id));if(!t)return[];const r=new Date(t.updated_at).getTime(),o=new Date(e.updated_at).getTime();return t.version!==e.version&&r>=o?{local:t,remote:e}:[]})),a=await S0(i),s=o.map((e=>a.find((t=>t.local_id===e.local_id))||e));await e(s)}}async function j0(e,t,n){let r=!0;for(;r;){const{conflicts:o,metadata:i}=await t(),a=i.map((e=>({...n.find((t=>t.local_id===e.local_id)),...e})));if(await e(a),0===o.length)return void(r=!1);const s=o.flatMap((e=>{const t=n.find((t=>t.local_id===e.local_id));return t?{local:t,remote:e}:[]})),l=await S0(s);await e(l)}}v0().then((e=>{i0(e)}));const C0=async()=>{const{isOnline:e}=o0.get(),{isLoggedIn:t}=Ph.get();if(!e||!t)return;const n=await Oh.get("synced_characters")||[];await UX(n);for(let r=0;r<k0.length;r++){const e=k0[r];await E0(e.bulkPut,e.pull,await e.get()),await j0(e.bulkPut,e.push,await e.get())}(await hv.versions.toArray()).forEach((e=>{PJ(e.local_id,e.data.types.map(UJ))}))};window.addEventListener("online",(async()=>{console.log("online");const e=await v0();i0(e),e||console.log("not connected"),C0()})),window.addEventListener("offline",(()=>{console.log("offline"),i0(!1)}));UQ(),window.generateHashes=async()=>{(await hv.versions.toArray()).forEach((e=>{PJ(e.local_id,e.data.types.map(UJ))}))};const N0=()=>((()=>{const e=q.useRef(null),t=q.useRef(!1),n=q.useCallback((async()=>{if(!t.current){t.current=!0;try{const e=await v0(),{isLoggedIn:t}=Ph.get();i0(e),e&&t&&await C0()}catch(J$){console.error("Error in sync",J$)}finally{t.current=!1,e.current=setTimeout(n,3e4)}}}),[]);q.useEffect((()=>(n(),()=>{t.current=!1,e.current&&(clearTimeout(e.current),e.current=null)})),[n])})(),q.useEffect((()=>{const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),q.useEffect((()=>{function e(){const e=document.createElement("div");e.className="particle",e.style.left=100*Math.random()+"%",e.style.animationDelay=8*Math.random()+"s",e.style.animationDuration=6*Math.random()+4+"s",document.getElementById("particleContainer").appendChild(e),setTimeout((()=>{e.remove()}),18200)}const t=setInterval(e,2e3);for(let n=0;n<5;n++)setTimeout(e,400*n);return()=>clearInterval(t)}),[]),q.useEffect((()=>{const e=setInterval((async function(){const[e,t]=await Promise.all([hv.characters.toArray(),hv.subscriptions.toArray()]);e.forEach((e=>{const t=e.deleted_at,n=!e.data;if(!t||n)return;h0(t,7)&&p0(e.local_id)})),t.forEach((e=>{const t=e.deleted_at;if(!t)return;h0(t,7)&&MJ(e.version_id)}))}),6e4);return()=>clearInterval(e)}),[]),ne.jsx(Gf,{children:ne.jsx(Nf,{children:ne.jsxs(jf,{path:"/",element:ne.jsx(Kb,{}),children:[ne.jsx(jf,{index:!0,element:ne.jsx(Jb,{})}),ne.jsxs(jf,{path:"characters",children:[ne.jsx(jf,{index:!0,element:ne.jsx(YX,{})}),ne.jsx(jf,{path:":id",element:ne.jsx(CJ,{})})]}),ne.jsx(jf,{path:"marketplace",element:ne.jsx(d0,{})}),ne.jsxs(jf,{path:"library",children:[ne.jsx(jf,{index:!0,element:ne.jsx(qJ,{})}),ne.jsx(jf,{path:"system/:id",element:ne.jsx(LQ,{})}),ne.jsx(jf,{path:"datapack/:id",element:ne.jsx(f0,{})})]}),ne.jsx(jf,{path:"garbage",element:ne.jsx(m0,{})}),ne.jsx(jf,{path:"settings",element:ne.jsx(n0,{})}),ne.jsx(jf,{path:"subscription-confirmation",element:ne.jsx(r0,{})})]})})})),A0={api_host:void 0};ud(document.getElementById("root")).render(ne.jsx(K.StrictMode,{children:ne.jsx(RY,{apiKey:"",options:A0,children:ne.jsx(N0,{})})}))}}}))}();
