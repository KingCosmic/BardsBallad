var w5=Object.defineProperty;var b5=(e,t,n)=>t in e?w5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Mo=(e,t,n)=>b5(e,typeof t!="symbol"?t+"":t,n);function yle(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function x5(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var WA={exports:{}},Nm={},VA={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=Symbol.for("react.element"),_5=Symbol.for("react.portal"),S5=Symbol.for("react.fragment"),E5=Symbol.for("react.strict_mode"),k5=Symbol.for("react.profiler"),C5=Symbol.for("react.provider"),j5=Symbol.for("react.context"),A5=Symbol.for("react.forward_ref"),N5=Symbol.for("react.suspense"),R5=Symbol.for("react.memo"),T5=Symbol.for("react.lazy"),NS=Symbol.iterator;function I5(e){return e===null||typeof e!="object"?null:(e=NS&&e[NS]||e["@@iterator"],typeof e=="function"?e:null)}var qA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KA=Object.assign,GA={};function hc(e,t,n){this.props=e,this.context=t,this.refs=GA,this.updater=n||qA}hc.prototype.isReactComponent={};hc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function YA(){}YA.prototype=hc.prototype;function qx(e,t,n){this.props=e,this.context=t,this.refs=GA,this.updater=n||qA}var Kx=qx.prototype=new YA;Kx.constructor=qx;KA(Kx,hc.prototype);Kx.isPureReactComponent=!0;var RS=Array.isArray,XA=Object.prototype.hasOwnProperty,Gx={current:null},JA={key:!0,ref:!0,__self:!0,__source:!0};function QA(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)XA.call(t,r)&&!JA.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xf,type:e,key:o,ref:s,props:i,_owner:Gx.current}}function P5(e,t){return{$$typeof:Xf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xf}function O5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var TS=/\/+/g;function xv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?O5(""+e.key):t.toString(36)}function jp(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Xf:case _5:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+xv(s,0):r,RS(i)?(n="",e!=null&&(n=e.replace(TS,"$&/")+"/"),jp(i,t,n,"",function(u){return u})):i!=null&&(Yx(i)&&(i=P5(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(TS,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",RS(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+xv(o,a);s+=jp(o,t,n,l,i)}else if(l=I5(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+xv(o,a++),s+=jp(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Oh(e,t,n){if(e==null)return e;var r=[],i=0;return jp(e,r,"","",function(o){return t.call(n,o,i++)}),r}function $5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qr={current:null},Ap={transition:null},M5={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:Ap,ReactCurrentOwner:Gx};function ZA(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:Oh,forEach:function(e,t,n){Oh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Oh(e,function(){t++}),t},toArray:function(e){return Oh(e,function(t){return t})||[]},only:function(e){if(!Yx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Gt.Component=hc;Gt.Fragment=S5;Gt.Profiler=k5;Gt.PureComponent=qx;Gt.StrictMode=E5;Gt.Suspense=N5;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M5;Gt.act=ZA;Gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=KA({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Gx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)XA.call(t,l)&&!JA.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Xf,type:e.type,key:i,ref:o,props:r,_owner:s}};Gt.createContext=function(e){return e={$$typeof:j5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:C5,_context:e},e.Consumer=e};Gt.createElement=QA;Gt.createFactory=function(e){var t=QA.bind(null,e);return t.type=e,t};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(e){return{$$typeof:A5,render:e}};Gt.isValidElement=Yx;Gt.lazy=function(e){return{$$typeof:T5,_payload:{_status:-1,_result:e},_init:$5}};Gt.memo=function(e,t){return{$$typeof:R5,type:e,compare:t===void 0?null:t}};Gt.startTransition=function(e){var t=Ap.transition;Ap.transition={};try{e()}finally{Ap.transition=t}};Gt.unstable_act=ZA;Gt.useCallback=function(e,t){return Qr.current.useCallback(e,t)};Gt.useContext=function(e){return Qr.current.useContext(e)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(e){return Qr.current.useDeferredValue(e)};Gt.useEffect=function(e,t){return Qr.current.useEffect(e,t)};Gt.useId=function(){return Qr.current.useId()};Gt.useImperativeHandle=function(e,t,n){return Qr.current.useImperativeHandle(e,t,n)};Gt.useInsertionEffect=function(e,t){return Qr.current.useInsertionEffect(e,t)};Gt.useLayoutEffect=function(e,t){return Qr.current.useLayoutEffect(e,t)};Gt.useMemo=function(e,t){return Qr.current.useMemo(e,t)};Gt.useReducer=function(e,t,n){return Qr.current.useReducer(e,t,n)};Gt.useRef=function(e){return Qr.current.useRef(e)};Gt.useState=function(e){return Qr.current.useState(e)};Gt.useSyncExternalStore=function(e,t,n){return Qr.current.useSyncExternalStore(e,t,n)};Gt.useTransition=function(){return Qr.current.useTransition()};Gt.version="18.3.1";VA.exports=Gt;var j=VA.exports;const It=zs(j),eN=x5({__proto__:null,default:It},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5=j,L5=Symbol.for("react.element"),B5=Symbol.for("react.fragment"),F5=Object.prototype.hasOwnProperty,z5=D5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H5={key:!0,ref:!0,__self:!0,__source:!0};function tN(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)F5.call(t,r)&&!H5.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:L5,type:e,key:o,ref:s,props:i,_owner:z5.current}}Nm.Fragment=B5;Nm.jsx=tN;Nm.jsxs=tN;WA.exports=Nm;var d=WA.exports,nN={exports:{}},Pi={},rN={exports:{}},iN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,z){var O=D.length;D.push(z);e:for(;0<O;){var K=O-1>>>1,se=D[K];if(0<i(se,z))D[K]=z,D[O]=se,O=K;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var z=D[0],O=D.pop();if(O!==z){D[0]=O;e:for(var K=0,se=D.length,ce=se>>>1;K<ce;){var Ce=2*(K+1)-1,Ie=D[Ce],Re=Ce+1,F=D[Re];if(0>i(Ie,O))Re<se&&0>i(F,Ie)?(D[K]=F,D[Re]=O,K=Re):(D[K]=Ie,D[Ce]=O,K=Ce);else if(Re<se&&0>i(F,O))D[K]=F,D[Re]=O,K=Re;else break e}}return z}function i(D,z){var O=D.sortIndex-z.sortIndex;return O!==0?O:D.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,h=3,p=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=D)r(u),z.sortIndex=z.expirationTime,t(l,z);else break;z=n(u)}}function S(D){if(y=!1,w(D),!v)if(n(l)!==null)v=!0,Y(E);else{var z=n(u);z!==null&&re(S,z.startTime-D)}}function E(D,z){v=!1,y&&(y=!1,m(P),P=-1),p=!0;var O=h;try{for(w(z),f=n(l);f!==null&&(!(f.expirationTime>z)||D&&!H());){var K=f.callback;if(typeof K=="function"){f.callback=null,h=f.priorityLevel;var se=K(f.expirationTime<=z);z=e.unstable_now(),typeof se=="function"?f.callback=se:f===n(l)&&r(l),w(z)}else r(l);f=n(l)}if(f!==null)var ce=!0;else{var Ce=n(u);Ce!==null&&re(S,Ce.startTime-z),ce=!1}return ce}finally{f=null,h=O,p=!1}}var A=!1,T=null,P=-1,V=5,M=-1;function H(){return!(e.unstable_now()-M<V)}function ee(){if(T!==null){var D=e.unstable_now();M=D;var z=!0;try{z=T(!0,D)}finally{z?W():(A=!1,T=null)}}else A=!1}var W;if(typeof b=="function")W=function(){b(ee)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,q=L.port2;L.port1.onmessage=ee,W=function(){q.postMessage(null)}}else W=function(){x(ee,0)};function Y(D){T=D,A||(A=!0,W())}function re(D,z){P=x(function(){D(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,Y(E))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var O=h;h=z;try{return D()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var O=h;h=D;try{return z()}finally{h=O}},e.unstable_scheduleCallback=function(D,z,O){var K=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?K+O:K):O=K,D){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=O+se,D={id:c++,callback:z,priorityLevel:D,startTime:O,expirationTime:se,sortIndex:-1},O>K?(D.sortIndex=O,t(u,D),n(l)===null&&D===n(u)&&(y?(m(P),P=-1):y=!0,re(S,O-K))):(D.sortIndex=se,t(l,D),v||p||(v=!0,Y(E))),D},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(D){var z=h;return function(){var O=h;h=z;try{return D.apply(this,arguments)}finally{h=O}}}})(iN);rN.exports=iN;var U5=rN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W5=j,Ai=U5;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oN=new Set,Ud={};function Ul(e,t){Hu(e,t),Hu(e+"Capture",t)}function Hu(e,t){for(Ud[e]=t,e=0;e<t.length;e++)oN.add(t[e])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yw=Object.prototype.hasOwnProperty,V5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,IS={},PS={};function q5(e){return yw.call(PS,e)?!0:yw.call(IS,e)?!1:V5.test(e)?PS[e]=!0:(IS[e]=!0,!1)}function K5(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function G5(e,t,n,r){if(t===null||typeof t>"u"||K5(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zr(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){br[e]=new Zr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];br[t]=new Zr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){br[e]=new Zr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){br[e]=new Zr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){br[e]=new Zr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){br[e]=new Zr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){br[e]=new Zr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){br[e]=new Zr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){br[e]=new Zr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xx=/[\-:]([a-z])/g;function Jx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xx,Jx);br[t]=new Zr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xx,Jx);br[t]=new Zr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xx,Jx);br[t]=new Zr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){br[e]=new Zr(e,1,!1,e.toLowerCase(),null,!1,!1)});br.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){br[e]=new Zr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qx(e,t,n,r){var i=br.hasOwnProperty(t)?br[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(G5(t,n,i,r)&&(n=null),r||i===null?q5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Hs=W5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$h=Symbol.for("react.element"),uu=Symbol.for("react.portal"),cu=Symbol.for("react.fragment"),Zx=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),sN=Symbol.for("react.provider"),aN=Symbol.for("react.context"),e_=Symbol.for("react.forward_ref"),ww=Symbol.for("react.suspense"),bw=Symbol.for("react.suspense_list"),t_=Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),lN=Symbol.for("react.offscreen"),OS=Symbol.iterator;function Hc(e){return e===null||typeof e!="object"?null:(e=OS&&e[OS]||e["@@iterator"],typeof e=="function"?e:null)}var Tn=Object.assign,_v;function ud(e){if(_v===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_v=t&&t[1]||""}return"\n"+_v+e}var Sv=!1;function Ev(e,t){if(!e||Sv)return"";Sv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{Sv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ud(e):""}function Y5(e){switch(e.tag){case 5:return ud(e.type);case 16:return ud("Lazy");case 13:return ud("Suspense");case 19:return ud("SuspenseList");case 0:case 2:case 15:return e=Ev(e.type,!1),e;case 11:return e=Ev(e.type.render,!1),e;case 1:return e=Ev(e.type,!0),e;default:return""}}function xw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cu:return"Fragment";case uu:return"Portal";case vw:return"Profiler";case Zx:return"StrictMode";case ww:return"Suspense";case bw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aN:return(e.displayName||"Context")+".Consumer";case sN:return(e._context.displayName||"Context")+".Provider";case e_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case t_:return t=e.displayName||null,t!==null?t:xw(e.type)||"Memo";case ra:t=e._payload,e=e._init;try{return xw(e(t))}catch(n){}}return null}function X5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xw(t);case 8:return t===Zx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ka(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J5(e){var t=uN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mh(e){e._valueTracker||(e._valueTracker=J5(e))}function cN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=uN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function eg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function _w(e,t){var n=t.checked;return Tn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function $S(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ka(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dN(e,t){t=t.checked,t!=null&&Qx(e,"checked",t,!1)}function Sw(e,t){dN(e,t);var n=ka(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ew(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ew(e,t.type,ka(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function MS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ew(e,t,n){(t!=="number"||eg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var cd=Array.isArray;function ju(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ka(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function kw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Tn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function DS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(cd(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ka(n)}}function fN(e,t){var n=ka(t.value),r=ka(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function LS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dh,pN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dh=Dh||document.createElement("div"),Dh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q5=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(e){Q5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jd[t]=jd[e]})});function gN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jd.hasOwnProperty(e)&&jd[e]?(""+t).trim():t+"px"}function mN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Z5=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jw(e,t){if(t){if(Z5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function Aw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nw=null;function n_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rw=null,Au=null,Nu=null;function BS(e){if(e=Zf(e)){if(typeof Rw!="function")throw Error(et(280));var t=e.stateNode;t&&(t=Om(t),Rw(e.stateNode,e.type,t))}}function yN(e){Au?Nu?Nu.push(e):Nu=[e]:Au=e}function vN(){if(Au){var e=Au,t=Nu;if(Nu=Au=null,BS(e),t)for(e=0;e<t.length;e++)BS(t[e])}}function wN(e,t){return e(t)}function bN(){}var kv=!1;function xN(e,t,n){if(kv)return e(t,n);kv=!0;try{return wN(e,t,n)}finally{kv=!1,(Au!==null||Nu!==null)&&(bN(),vN())}}function Vd(e,t){var n=e.stateNode;if(n===null)return null;var r=Om(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var Tw=!1;if(Ts)try{var Uc={};Object.defineProperty(Uc,"passive",{get:function(){Tw=!0}}),window.addEventListener("test",Uc,Uc),window.removeEventListener("test",Uc,Uc)}catch(e){Tw=!1}function e$(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ad=!1,tg=null,ng=!1,Iw=null,t$={onError:function(e){Ad=!0,tg=e}};function n$(e,t,n,r,i,o,s,a,l){Ad=!1,tg=null,e$.apply(t$,arguments)}function r$(e,t,n,r,i,o,s,a,l){if(n$.apply(this,arguments),Ad){if(Ad){var u=tg;Ad=!1,tg=null}else throw Error(et(198));ng||(ng=!0,Iw=u)}}function Wl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _N(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function FS(e){if(Wl(e)!==e)throw Error(et(188))}function i$(e){var t=e.alternate;if(!t){if(t=Wl(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return FS(i),e;if(o===r)return FS(i),t;o=o.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function SN(e){return e=i$(e),e!==null?EN(e):null}function EN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=EN(e);if(t!==null)return t;e=e.sibling}return null}var kN=Ai.unstable_scheduleCallback,zS=Ai.unstable_cancelCallback,o$=Ai.unstable_shouldYield,s$=Ai.unstable_requestPaint,zn=Ai.unstable_now,a$=Ai.unstable_getCurrentPriorityLevel,r_=Ai.unstable_ImmediatePriority,CN=Ai.unstable_UserBlockingPriority,rg=Ai.unstable_NormalPriority,l$=Ai.unstable_LowPriority,jN=Ai.unstable_IdlePriority,Rm=null,Uo=null;function u$(e){if(Uo&&typeof Uo.onCommitFiberRoot=="function")try{Uo.onCommitFiberRoot(Rm,e,void 0,(e.current.flags&128)===128)}catch(t){}}var mo=Math.clz32?Math.clz32:f$,c$=Math.log,d$=Math.LN2;function f$(e){return e>>>=0,e===0?32:31-(c$(e)/d$|0)|0}var Lh=64,Bh=4194304;function dd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ig(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=dd(a):(o&=s,o!==0&&(r=dd(o)))}else s=n&~i,s!==0?r=dd(s):o!==0&&(r=dd(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-mo(t),i=1<<n,r|=e[n],t&=~i;return r}function h$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p$(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-mo(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=h$(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Pw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function AN(){var e=Lh;return Lh<<=1,!(Lh&4194240)&&(Lh=64),e}function Cv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mo(t),e[t]=n}function g$(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-mo(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function i_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mo(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var an=0;function NN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var RN,o_,TN,IN,PN,Ow=!1,Fh=[],ha=null,pa=null,ga=null,qd=new Map,Kd=new Map,aa=[],m$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HS(e,t){switch(e){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":qd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(t.pointerId)}}function Wc(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Zf(t),t!==null&&o_(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function y$(e,t,n,r,i){switch(t){case"focusin":return ha=Wc(ha,e,t,n,r,i),!0;case"dragenter":return pa=Wc(pa,e,t,n,r,i),!0;case"mouseover":return ga=Wc(ga,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return qd.set(o,Wc(qd.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Kd.set(o,Wc(Kd.get(o)||null,e,t,n,r,i)),!0}return!1}function ON(e){var t=ll(e.target);if(t!==null){var n=Wl(t);if(n!==null){if(t=n.tag,t===13){if(t=_N(n),t!==null){e.blockedOn=t,PN(e.priority,function(){TN(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Np(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$w(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Nw=r,n.target.dispatchEvent(r),Nw=null}else return t=Zf(n),t!==null&&o_(t),e.blockedOn=n,!1;t.shift()}return!0}function US(e,t,n){Np(e)&&n.delete(t)}function v$(){Ow=!1,ha!==null&&Np(ha)&&(ha=null),pa!==null&&Np(pa)&&(pa=null),ga!==null&&Np(ga)&&(ga=null),qd.forEach(US),Kd.forEach(US)}function Vc(e,t){e.blockedOn===t&&(e.blockedOn=null,Ow||(Ow=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,v$)))}function Gd(e){function t(i){return Vc(i,e)}if(0<Fh.length){Vc(Fh[0],e);for(var n=1;n<Fh.length;n++){var r=Fh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ha!==null&&Vc(ha,e),pa!==null&&Vc(pa,e),ga!==null&&Vc(ga,e),qd.forEach(t),Kd.forEach(t),n=0;n<aa.length;n++)r=aa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<aa.length&&(n=aa[0],n.blockedOn===null);)ON(n),n.blockedOn===null&&aa.shift()}var Ru=Hs.ReactCurrentBatchConfig,og=!0;function w$(e,t,n,r){var i=an,o=Ru.transition;Ru.transition=null;try{an=1,s_(e,t,n,r)}finally{an=i,Ru.transition=o}}function b$(e,t,n,r){var i=an,o=Ru.transition;Ru.transition=null;try{an=4,s_(e,t,n,r)}finally{an=i,Ru.transition=o}}function s_(e,t,n,r){if(og){var i=$w(e,t,n,r);if(i===null)Mv(e,t,r,sg,n),HS(e,r);else if(y$(i,e,t,n,r))r.stopPropagation();else if(HS(e,r),t&4&&-1<m$.indexOf(e)){for(;i!==null;){var o=Zf(i);if(o!==null&&RN(o),o=$w(e,t,n,r),o===null&&Mv(e,t,r,sg,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Mv(e,t,r,null,n)}}var sg=null;function $w(e,t,n,r){if(sg=null,e=n_(r),e=ll(e),e!==null)if(t=Wl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_N(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sg=e,null}function $N(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a$()){case r_:return 1;case CN:return 4;case rg:case l$:return 16;case jN:return 536870912;default:return 16}default:return 16}}var ca=null,a_=null,Rp=null;function MN(){if(Rp)return Rp;var e,t=a_,n=t.length,r,i="value"in ca?ca.value:ca.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Rp=i.slice(e,1<r?1-r:void 0)}function Tp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zh(){return!0}function WS(){return!1}function Oi(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zh:WS,this.isPropagationStopped=WS,this}return Tn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zh)},persist:function(){},isPersistent:zh}),t}var pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l_=Oi(pc),Qf=Tn({},pc,{view:0,detail:0}),x$=Oi(Qf),jv,Av,qc,Tm=Tn({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qc&&(qc&&e.type==="mousemove"?(jv=e.screenX-qc.screenX,Av=e.screenY-qc.screenY):Av=jv=0,qc=e),jv)},movementY:function(e){return"movementY"in e?e.movementY:Av}}),VS=Oi(Tm),_$=Tn({},Tm,{dataTransfer:0}),S$=Oi(_$),E$=Tn({},Qf,{relatedTarget:0}),Nv=Oi(E$),k$=Tn({},pc,{animationName:0,elapsedTime:0,pseudoElement:0}),C$=Oi(k$),j$=Tn({},pc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),A$=Oi(j$),N$=Tn({},pc,{data:0}),qS=Oi(N$),R$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=I$[e])?!!t[e]:!1}function u_(){return P$}var O$=Tn({},Qf,{key:function(e){if(e.key){var t=R$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u_,charCode:function(e){return e.type==="keypress"?Tp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$$=Oi(O$),M$=Tn({},Tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KS=Oi(M$),D$=Tn({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u_}),L$=Oi(D$),B$=Tn({},pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),F$=Oi(B$),z$=Tn({},Tm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H$=Oi(z$),U$=[9,13,27,32],c_=Ts&&"CompositionEvent"in window,Nd=null;Ts&&"documentMode"in document&&(Nd=document.documentMode);var W$=Ts&&"TextEvent"in window&&!Nd,DN=Ts&&(!c_||Nd&&8<Nd&&11>=Nd),GS=" ",YS=!1;function LN(e,t){switch(e){case"keyup":return U$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var du=!1;function V$(e,t){switch(e){case"compositionend":return BN(t);case"keypress":return t.which!==32?null:(YS=!0,GS);case"textInput":return e=t.data,e===GS&&YS?null:e;default:return null}}function q$(e,t){if(du)return e==="compositionend"||!c_&&LN(e,t)?(e=MN(),Rp=a_=ca=null,du=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return DN&&t.locale!=="ko"?null:t.data;default:return null}}var K$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K$[e.type]:t==="textarea"}function FN(e,t,n,r){yN(r),t=ag(t,"onChange"),0<t.length&&(n=new l_("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rd=null,Yd=null;function G$(e){JN(e,0)}function Im(e){var t=pu(e);if(cN(t))return e}function Y$(e,t){if(e==="change")return t}var zN=!1;if(Ts){var Rv;if(Ts){var Tv="oninput"in document;if(!Tv){var JS=document.createElement("div");JS.setAttribute("oninput","return;"),Tv=typeof JS.oninput=="function"}Rv=Tv}else Rv=!1;zN=Rv&&(!document.documentMode||9<document.documentMode)}function QS(){Rd&&(Rd.detachEvent("onpropertychange",HN),Yd=Rd=null)}function HN(e){if(e.propertyName==="value"&&Im(Yd)){var t=[];FN(t,Yd,e,n_(e)),xN(G$,t)}}function X$(e,t,n){e==="focusin"?(QS(),Rd=t,Yd=n,Rd.attachEvent("onpropertychange",HN)):e==="focusout"&&QS()}function J$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Im(Yd)}function Q$(e,t){if(e==="click")return Im(t)}function Z$(e,t){if(e==="input"||e==="change")return Im(t)}function eM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wo=typeof Object.is=="function"?Object.is:eM;function Xd(e,t){if(wo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yw.call(t,i)||!wo(e[i],t[i]))return!1}return!0}function ZS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eE(e,t){var n=ZS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZS(n)}}function UN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function WN(){for(var e=window,t=eg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=eg(e.document)}return t}function d_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tM(e){var t=WN(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&UN(n.ownerDocument.documentElement,n)){if(r!==null&&d_(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=eE(n,o);var s=eE(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nM=Ts&&"documentMode"in document&&11>=document.documentMode,fu=null,Mw=null,Td=null,Dw=!1;function tE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dw||fu==null||fu!==eg(r)||(r=fu,"selectionStart"in r&&d_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Td&&Xd(Td,r)||(Td=r,r=ag(Mw,"onSelect"),0<r.length&&(t=new l_("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fu)))}function Hh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hu={animationend:Hh("Animation","AnimationEnd"),animationiteration:Hh("Animation","AnimationIteration"),animationstart:Hh("Animation","AnimationStart"),transitionend:Hh("Transition","TransitionEnd")},Iv={},VN={};Ts&&(VN=document.createElement("div").style,"AnimationEvent"in window||(delete hu.animationend.animation,delete hu.animationiteration.animation,delete hu.animationstart.animation),"TransitionEvent"in window||delete hu.transitionend.transition);function Pm(e){if(Iv[e])return Iv[e];if(!hu[e])return e;var t=hu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in VN)return Iv[e]=t[n];return e}var qN=Pm("animationend"),KN=Pm("animationiteration"),GN=Pm("animationstart"),YN=Pm("transitionend"),XN=new Map,nE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(e,t){XN.set(e,t),Ul(t,[e])}for(var Pv=0;Pv<nE.length;Pv++){var Ov=nE[Pv],rM=Ov.toLowerCase(),iM=Ov[0].toUpperCase()+Ov.slice(1);Ma(rM,"on"+iM)}Ma(qN,"onAnimationEnd");Ma(KN,"onAnimationIteration");Ma(GN,"onAnimationStart");Ma("dblclick","onDoubleClick");Ma("focusin","onFocus");Ma("focusout","onBlur");Ma(YN,"onTransitionEnd");Hu("onMouseEnter",["mouseout","mouseover"]);Hu("onMouseLeave",["mouseout","mouseover"]);Hu("onPointerEnter",["pointerout","pointerover"]);Hu("onPointerLeave",["pointerout","pointerover"]);Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oM=new Set("cancel close invalid load scroll toggle".split(" ").concat(fd));function rE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,r$(r,t,void 0,e),e.currentTarget=null}function JN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;rE(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;rE(i,a,u),o=l}}}if(ng)throw e=Iw,ng=!1,Iw=null,e}function yn(e,t){var n=t[Hw];n===void 0&&(n=t[Hw]=new Set);var r=e+"__bubble";n.has(r)||(QN(t,e,2,!1),n.add(r))}function $v(e,t,n){var r=0;t&&(r|=4),QN(n,e,r,t)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function Jd(e){if(!e[Uh]){e[Uh]=!0,oN.forEach(function(n){n!=="selectionchange"&&(oM.has(n)||$v(n,!1,e),$v(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uh]||(t[Uh]=!0,$v("selectionchange",!1,t))}}function QN(e,t,n,r){switch($N(t)){case 1:var i=w$;break;case 4:i=b$;break;default:i=s_}n=i.bind(null,t,n,e),i=void 0,!Tw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mv(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=ll(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}xN(function(){var u=o,c=n_(n),f=[];e:{var h=XN.get(e);if(h!==void 0){var p=l_,v=e;switch(e){case"keypress":if(Tp(n)===0)break e;case"keydown":case"keyup":p=$$;break;case"focusin":v="focus",p=Nv;break;case"focusout":v="blur",p=Nv;break;case"beforeblur":case"afterblur":p=Nv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=VS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=S$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=L$;break;case qN:case KN:case GN:p=C$;break;case YN:p=F$;break;case"scroll":p=x$;break;case"wheel":p=H$;break;case"copy":case"cut":case"paste":p=A$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=KS}var y=(t&4)!==0,x=!y&&e==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var b=u,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,m!==null&&(S=Vd(b,m),S!=null&&y.push(Qd(b,S,w)))),x)break;b=b.return}0<y.length&&(h=new p(h,v,null,n,c),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Nw&&(v=n.relatedTarget||n.fromElement)&&(ll(v)||v[Is]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=u,v=v?ll(v):null,v!==null&&(x=Wl(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(y=VS,S="onMouseLeave",m="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=KS,S="onPointerLeave",m="onPointerEnter",b="pointer"),x=p==null?h:pu(p),w=v==null?h:pu(v),h=new y(S,b+"leave",p,n,c),h.target=x,h.relatedTarget=w,S=null,ll(c)===u&&(y=new y(m,b+"enter",v,n,c),y.target=w,y.relatedTarget=x,S=y),x=S,p&&v)t:{for(y=p,m=v,b=0,w=y;w;w=tu(w))b++;for(w=0,S=m;S;S=tu(S))w++;for(;0<b-w;)y=tu(y),b--;for(;0<w-b;)m=tu(m),w--;for(;b--;){if(y===m||m!==null&&y===m.alternate)break t;y=tu(y),m=tu(m)}y=null}else y=null;p!==null&&iE(f,h,p,y,!1),v!==null&&x!==null&&iE(f,x,v,y,!0)}}e:{if(h=u?pu(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var E=Y$;else if(XS(h))if(zN)E=Z$;else{E=J$;var A=X$}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=Q$);if(E&&(E=E(e,u))){FN(f,E,n,c);break e}A&&A(e,h,u),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Ew(h,"number",h.value)}switch(A=u?pu(u):window,e){case"focusin":(XS(A)||A.contentEditable==="true")&&(fu=A,Mw=u,Td=null);break;case"focusout":Td=Mw=fu=null;break;case"mousedown":Dw=!0;break;case"contextmenu":case"mouseup":case"dragend":Dw=!1,tE(f,n,c);break;case"selectionchange":if(nM)break;case"keydown":case"keyup":tE(f,n,c)}var T;if(c_)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else du?LN(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(DN&&n.locale!=="ko"&&(du||P!=="onCompositionStart"?P==="onCompositionEnd"&&du&&(T=MN()):(ca=c,a_="value"in ca?ca.value:ca.textContent,du=!0)),A=ag(u,P),0<A.length&&(P=new qS(P,e,null,n,c),f.push({event:P,listeners:A}),T?P.data=T:(T=BN(n),T!==null&&(P.data=T)))),(T=W$?V$(e,n):q$(e,n))&&(u=ag(u,"onBeforeInput"),0<u.length&&(c=new qS("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=T))}JN(f,t)})}function Qd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ag(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Vd(e,n),o!=null&&r.unshift(Qd(e,o,i)),o=Vd(e,t),o!=null&&r.push(Qd(e,o,i))),e=e.return}return r}function tu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function iE(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Vd(n,o),l!=null&&s.unshift(Qd(n,l,a))):i||(l=Vd(n,o),l!=null&&s.push(Qd(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var sM=/\r\n?/g,aM=/\u0000|\uFFFD/g;function oE(e){return(typeof e=="string"?e:""+e).replace(sM,"\n").replace(aM,"")}function Wh(e,t,n){if(t=oE(t),oE(e)!==t&&n)throw Error(et(425))}function lg(){}var Lw=null,Bw=null;function Fw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zw=typeof setTimeout=="function"?setTimeout:void 0,lM=typeof clearTimeout=="function"?clearTimeout:void 0,sE=typeof Promise=="function"?Promise:void 0,uM=typeof queueMicrotask=="function"?queueMicrotask:typeof sE<"u"?function(e){return sE.resolve(null).then(e).catch(cM)}:zw;function cM(e){setTimeout(function(){throw e})}function Dv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Gd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Gd(t)}function ma(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function aE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gc=Math.random().toString(36).slice(2),zo="__reactFiber$"+gc,Zd="__reactProps$"+gc,Is="__reactContainer$"+gc,Hw="__reactEvents$"+gc,dM="__reactListeners$"+gc,fM="__reactHandles$"+gc;function ll(e){var t=e[zo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Is]||n[zo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=aE(e);e!==null;){if(n=e[zo])return n;e=aE(e)}return t}e=n,n=e.parentNode}return null}function Zf(e){return e=e[zo]||e[Is],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function Om(e){return e[Zd]||null}var Uw=[],gu=-1;function Da(e){return{current:e}}function xn(e){0>gu||(e.current=Uw[gu],Uw[gu]=null,gu--)}function mn(e,t){gu++,Uw[gu]=e.current,e.current=t}var Ca={},Lr=Da(Ca),ci=Da(!1),xl=Ca;function Uu(e,t){var n=e.type.contextTypes;if(!n)return Ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function di(e){return e=e.childContextTypes,e!=null}function ug(){xn(ci),xn(Lr)}function lE(e,t,n){if(Lr.current!==Ca)throw Error(et(168));mn(Lr,t),mn(ci,n)}function ZN(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,X5(e)||"Unknown",i));return Tn({},n,r)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,xl=Lr.current,mn(Lr,e),mn(ci,ci.current),!0}function uE(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=ZN(e,t,xl),r.__reactInternalMemoizedMergedChildContext=e,xn(ci),xn(Lr),mn(Lr,e)):xn(ci),mn(ci,n)}var ms=null,$m=!1,Lv=!1;function eR(e){ms===null?ms=[e]:ms.push(e)}function hM(e){$m=!0,eR(e)}function La(){if(!Lv&&ms!==null){Lv=!0;var e=0,t=an;try{var n=ms;for(an=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ms=null,$m=!1}catch(i){throw ms!==null&&(ms=ms.slice(e+1)),kN(r_,La),i}finally{an=t,Lv=!1}}return null}var mu=[],yu=0,dg=null,fg=0,Bi=[],Fi=0,_l=null,xs=1,_s="";function tl(e,t){mu[yu++]=fg,mu[yu++]=dg,dg=e,fg=t}function tR(e,t,n){Bi[Fi++]=xs,Bi[Fi++]=_s,Bi[Fi++]=_l,_l=e;var r=xs;e=_s;var i=32-mo(r)-1;r&=~(1<<i),n+=1;var o=32-mo(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,xs=1<<32-mo(t)+i|n<<i|r,_s=o+e}else xs=1<<o|n<<i|r,_s=e}function f_(e){e.return!==null&&(tl(e,1),tR(e,1,0))}function h_(e){for(;e===dg;)dg=mu[--yu],mu[yu]=null,fg=mu[--yu],mu[yu]=null;for(;e===_l;)_l=Bi[--Fi],Bi[Fi]=null,_s=Bi[--Fi],Bi[Fi]=null,xs=Bi[--Fi],Bi[Fi]=null}var ki=null,Si=null,Sn=!1,lo=null;function nR(e,t){var n=Ui(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ki=e,Si=ma(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ki=e,Si=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_l!==null?{id:xs,overflow:_s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ui(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ki=e,Si=null,!0):!1;default:return!1}}function Ww(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vw(e){if(Sn){var t=Si;if(t){var n=t;if(!cE(e,t)){if(Ww(e))throw Error(et(418));t=ma(n.nextSibling);var r=ki;t&&cE(e,t)?nR(r,n):(e.flags=e.flags&-4097|2,Sn=!1,ki=e)}}else{if(Ww(e))throw Error(et(418));e.flags=e.flags&-4097|2,Sn=!1,ki=e}}}function dE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ki=e}function Vh(e){if(e!==ki)return!1;if(!Sn)return dE(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fw(e.type,e.memoizedProps)),t&&(t=Si)){if(Ww(e))throw rR(),Error(et(418));for(;t;)nR(e,t),t=ma(t.nextSibling)}if(dE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Si=ma(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Si=null}}else Si=ki?ma(e.stateNode.nextSibling):null;return!0}function rR(){for(var e=Si;e;)e=ma(e.nextSibling)}function Wu(){Si=ki=null,Sn=!1}function p_(e){lo===null?lo=[e]:lo.push(e)}var pM=Hs.ReactCurrentBatchConfig;function Kc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function qh(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fE(e){var t=e._init;return t(e._payload)}function iR(e){function t(m,b){if(e){var w=m.deletions;w===null?(m.deletions=[b],m.flags|=16):w.push(b)}}function n(m,b){if(!e)return null;for(;b!==null;)t(m,b),b=b.sibling;return null}function r(m,b){for(m=new Map;b!==null;)b.key!==null?m.set(b.key,b):m.set(b.index,b),b=b.sibling;return m}function i(m,b){return m=ba(m,b),m.index=0,m.sibling=null,m}function o(m,b,w){return m.index=w,e?(w=m.alternate,w!==null?(w=w.index,w<b?(m.flags|=2,b):w):(m.flags|=2,b)):(m.flags|=1048576,b)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,b,w,S){return b===null||b.tag!==6?(b=Vv(w,m.mode,S),b.return=m,b):(b=i(b,w),b.return=m,b)}function l(m,b,w,S){var E=w.type;return E===cu?c(m,b,w.props.children,S,w.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ra&&fE(E)===b.type)?(S=i(b,w.props),S.ref=Kc(m,b,w),S.return=m,S):(S=Lp(w.type,w.key,w.props,null,m.mode,S),S.ref=Kc(m,b,w),S.return=m,S)}function u(m,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=qv(w,m.mode,S),b.return=m,b):(b=i(b,w.children||[]),b.return=m,b)}function c(m,b,w,S,E){return b===null||b.tag!==7?(b=gl(w,m.mode,S,E),b.return=m,b):(b=i(b,w),b.return=m,b)}function f(m,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Vv(""+b,m.mode,w),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $h:return w=Lp(b.type,b.key,b.props,null,m.mode,w),w.ref=Kc(m,null,b),w.return=m,w;case uu:return b=qv(b,m.mode,w),b.return=m,b;case ra:var S=b._init;return f(m,S(b._payload),w)}if(cd(b)||Hc(b))return b=gl(b,m.mode,w,null),b.return=m,b;qh(m,b)}return null}function h(m,b,w,S){var E=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:a(m,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $h:return w.key===E?l(m,b,w,S):null;case uu:return w.key===E?u(m,b,w,S):null;case ra:return E=w._init,h(m,b,E(w._payload),S)}if(cd(w)||Hc(w))return E!==null?null:c(m,b,w,S,null);qh(m,w)}return null}function p(m,b,w,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(w)||null,a(b,m,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $h:return m=m.get(S.key===null?w:S.key)||null,l(b,m,S,E);case uu:return m=m.get(S.key===null?w:S.key)||null,u(b,m,S,E);case ra:var A=S._init;return p(m,b,w,A(S._payload),E)}if(cd(S)||Hc(S))return m=m.get(w)||null,c(b,m,S,E,null);qh(b,S)}return null}function v(m,b,w,S){for(var E=null,A=null,T=b,P=b=0,V=null;T!==null&&P<w.length;P++){T.index>P?(V=T,T=null):V=T.sibling;var M=h(m,T,w[P],S);if(M===null){T===null&&(T=V);break}e&&T&&M.alternate===null&&t(m,T),b=o(M,b,P),A===null?E=M:A.sibling=M,A=M,T=V}if(P===w.length)return n(m,T),Sn&&tl(m,P),E;if(T===null){for(;P<w.length;P++)T=f(m,w[P],S),T!==null&&(b=o(T,b,P),A===null?E=T:A.sibling=T,A=T);return Sn&&tl(m,P),E}for(T=r(m,T);P<w.length;P++)V=p(T,m,P,w[P],S),V!==null&&(e&&V.alternate!==null&&T.delete(V.key===null?P:V.key),b=o(V,b,P),A===null?E=V:A.sibling=V,A=V);return e&&T.forEach(function(H){return t(m,H)}),Sn&&tl(m,P),E}function y(m,b,w,S){var E=Hc(w);if(typeof E!="function")throw Error(et(150));if(w=E.call(w),w==null)throw Error(et(151));for(var A=E=null,T=b,P=b=0,V=null,M=w.next();T!==null&&!M.done;P++,M=w.next()){T.index>P?(V=T,T=null):V=T.sibling;var H=h(m,T,M.value,S);if(H===null){T===null&&(T=V);break}e&&T&&H.alternate===null&&t(m,T),b=o(H,b,P),A===null?E=H:A.sibling=H,A=H,T=V}if(M.done)return n(m,T),Sn&&tl(m,P),E;if(T===null){for(;!M.done;P++,M=w.next())M=f(m,M.value,S),M!==null&&(b=o(M,b,P),A===null?E=M:A.sibling=M,A=M);return Sn&&tl(m,P),E}for(T=r(m,T);!M.done;P++,M=w.next())M=p(T,m,P,M.value,S),M!==null&&(e&&M.alternate!==null&&T.delete(M.key===null?P:M.key),b=o(M,b,P),A===null?E=M:A.sibling=M,A=M);return e&&T.forEach(function(ee){return t(m,ee)}),Sn&&tl(m,P),E}function x(m,b,w,S){if(typeof w=="object"&&w!==null&&w.type===cu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case $h:e:{for(var E=w.key,A=b;A!==null;){if(A.key===E){if(E=w.type,E===cu){if(A.tag===7){n(m,A.sibling),b=i(A,w.props.children),b.return=m,m=b;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ra&&fE(E)===A.type){n(m,A.sibling),b=i(A,w.props),b.ref=Kc(m,A,w),b.return=m,m=b;break e}n(m,A);break}else t(m,A);A=A.sibling}w.type===cu?(b=gl(w.props.children,m.mode,S,w.key),b.return=m,m=b):(S=Lp(w.type,w.key,w.props,null,m.mode,S),S.ref=Kc(m,b,w),S.return=m,m=S)}return s(m);case uu:e:{for(A=w.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(m,b.sibling),b=i(b,w.children||[]),b.return=m,m=b;break e}else{n(m,b);break}else t(m,b);b=b.sibling}b=qv(w,m.mode,S),b.return=m,m=b}return s(m);case ra:return A=w._init,x(m,b,A(w._payload),S)}if(cd(w))return v(m,b,w,S);if(Hc(w))return y(m,b,w,S);qh(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(m,b.sibling),b=i(b,w),b.return=m,m=b):(n(m,b),b=Vv(w,m.mode,S),b.return=m,m=b),s(m)):n(m,b)}return x}var Vu=iR(!0),oR=iR(!1),hg=Da(null),pg=null,vu=null,g_=null;function m_(){g_=vu=pg=null}function y_(e){var t=hg.current;xn(hg),e._currentValue=t}function qw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Tu(e,t){pg=e,g_=vu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(si=!0),e.firstContext=null)}function Yi(e){var t=e._currentValue;if(g_!==e)if(e={context:e,memoizedValue:t,next:null},vu===null){if(pg===null)throw Error(et(308));vu=e,pg.dependencies={lanes:0,firstContext:e}}else vu=vu.next=e;return t}var ul=null;function v_(e){ul===null?ul=[e]:ul.push(e)}function sR(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,v_(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ps(e,r)}function Ps(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ia=!1;function w_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ya(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,nn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ps(e,n)}return i=r.interleaved,i===null?(t.next=t,v_(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ps(e,n)}function Ip(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,i_(e,n)}}function hE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function gg(e,t,n,r){var i=e.updateQueue;ia=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,y=a;switch(h=t,p=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=Tn({},f,h);break e;case 2:ia=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);El|=s,e.lanes=s,e.memoizedState=f}}function pE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var eh={},Wo=Da(eh),ef=Da(eh),tf=Da(eh);function cl(e){if(e===eh)throw Error(et(174));return e}function b_(e,t){switch(mn(tf,t),mn(ef,e),mn(Wo,eh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cw(t,e)}xn(Wo),mn(Wo,t)}function qu(){xn(Wo),xn(ef),xn(tf)}function lR(e){cl(tf.current);var t=cl(Wo.current),n=Cw(t,e.type);t!==n&&(mn(ef,e),mn(Wo,n))}function x_(e){ef.current===e&&(xn(Wo),xn(ef))}var Cn=Da(0);function mg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bv=[];function __(){for(var e=0;e<Bv.length;e++)Bv[e]._workInProgressVersionPrimary=null;Bv.length=0}var Pp=Hs.ReactCurrentDispatcher,Fv=Hs.ReactCurrentBatchConfig,Sl=0,An=null,Zn=null,ur=null,yg=!1,Id=!1,nf=0,gM=0;function jr(){throw Error(et(321))}function S_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wo(e[n],t[n]))return!1;return!0}function E_(e,t,n,r,i,o){if(Sl=o,An=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pp.current=e===null||e.memoizedState===null?wM:bM,e=n(r,i),Id){o=0;do{if(Id=!1,nf=0,25<=o)throw Error(et(301));o+=1,ur=Zn=null,t.updateQueue=null,Pp.current=xM,e=n(r,i)}while(Id)}if(Pp.current=vg,t=Zn!==null&&Zn.next!==null,Sl=0,ur=Zn=An=null,yg=!1,t)throw Error(et(300));return e}function k_(){var e=nf!==0;return nf=0,e}function Fo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?An.memoizedState=ur=e:ur=ur.next=e,ur}function Xi(){if(Zn===null){var e=An.alternate;e=e!==null?e.memoizedState:null}else e=Zn.next;var t=ur===null?An.memoizedState:ur.next;if(t!==null)ur=t,Zn=e;else{if(e===null)throw Error(et(310));Zn=e,e={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},ur===null?An.memoizedState=ur=e:ur=ur.next=e}return ur}function rf(e,t){return typeof t=="function"?t(e):t}function zv(e){var t=Xi(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=Zn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Sl&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,An.lanes|=c,El|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,wo(r,t.memoizedState)||(si=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,An.lanes|=o,El|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Hv(e){var t=Xi(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);wo(o,t.memoizedState)||(si=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function uR(){}function cR(e,t){var n=An,r=Xi(),i=t(),o=!wo(r.memoizedState,i);if(o&&(r.memoizedState=i,si=!0),r=r.queue,C_(hR.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ur!==null&&ur.memoizedState.tag&1){if(n.flags|=2048,of(9,fR.bind(null,n,r,i,t),void 0,null),cr===null)throw Error(et(349));Sl&30||dR(n,t,i)}return i}function dR(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=An.updateQueue,t===null?(t={lastEffect:null,stores:null},An.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fR(e,t,n,r){t.value=n,t.getSnapshot=r,pR(t)&&gR(e)}function hR(e,t,n){return n(function(){pR(t)&&gR(e)})}function pR(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wo(e,n)}catch(r){return!0}}function gR(e){var t=Ps(e,1);t!==null&&yo(t,e,1,-1)}function gE(e){var t=Fo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rf,lastRenderedState:e},t.queue=e,e=e.dispatch=vM.bind(null,An,e),[t.memoizedState,e]}function of(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=An.updateQueue,t===null?(t={lastEffect:null,stores:null},An.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function mR(){return Xi().memoizedState}function Op(e,t,n,r){var i=Fo();An.flags|=e,i.memoizedState=of(1|t,n,void 0,r===void 0?null:r)}function Mm(e,t,n,r){var i=Xi();r=r===void 0?null:r;var o=void 0;if(Zn!==null){var s=Zn.memoizedState;if(o=s.destroy,r!==null&&S_(r,s.deps)){i.memoizedState=of(t,n,o,r);return}}An.flags|=e,i.memoizedState=of(1|t,n,o,r)}function mE(e,t){return Op(8390656,8,e,t)}function C_(e,t){return Mm(2048,8,e,t)}function yR(e,t){return Mm(4,2,e,t)}function vR(e,t){return Mm(4,4,e,t)}function wR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bR(e,t,n){return n=n!=null?n.concat([e]):null,Mm(4,4,wR.bind(null,t,e),n)}function j_(){}function xR(e,t){var n=Xi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&S_(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _R(e,t){var n=Xi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&S_(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function SR(e,t,n){return Sl&21?(wo(n,t)||(n=AN(),An.lanes|=n,El|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,si=!0),e.memoizedState=n)}function mM(e,t){var n=an;an=n!==0&&4>n?n:4,e(!0);var r=Fv.transition;Fv.transition={};try{e(!1),t()}finally{an=n,Fv.transition=r}}function ER(){return Xi().memoizedState}function yM(e,t,n){var r=wa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kR(e))CR(t,n);else if(n=sR(e,t,n,r),n!==null){var i=Xr();yo(n,e,r,i),jR(n,t,r)}}function vM(e,t,n){var r=wa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kR(e))CR(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,wo(a,s)){var l=t.interleaved;l===null?(i.next=i,v_(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch(u){}finally{}n=sR(e,t,i,r),n!==null&&(i=Xr(),yo(n,e,r,i),jR(n,t,r))}}function kR(e){var t=e.alternate;return e===An||t!==null&&t===An}function CR(e,t){Id=yg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jR(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,i_(e,n)}}var vg={readContext:Yi,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},wM={readContext:Yi,useCallback:function(e,t){return Fo().memoizedState=[e,t===void 0?null:t],e},useContext:Yi,useEffect:mE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Op(4194308,4,wR.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Op(4194308,4,e,t)},useInsertionEffect:function(e,t){return Op(4,2,e,t)},useMemo:function(e,t){var n=Fo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=yM.bind(null,An,e),[r.memoizedState,e]},useRef:function(e){var t=Fo();return e={current:e},t.memoizedState=e},useState:gE,useDebugValue:j_,useDeferredValue:function(e){return Fo().memoizedState=e},useTransition:function(){var e=gE(!1),t=e[0];return e=mM.bind(null,e[1]),Fo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=An,i=Fo();if(Sn){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),cr===null)throw Error(et(349));Sl&30||dR(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,mE(hR.bind(null,r,o,e),[e]),r.flags|=2048,of(9,fR.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Fo(),t=cr.identifierPrefix;if(Sn){var n=_s,r=xs;n=(r&~(1<<32-mo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=nf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gM++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bM={readContext:Yi,useCallback:xR,useContext:Yi,useEffect:C_,useImperativeHandle:bR,useInsertionEffect:yR,useLayoutEffect:vR,useMemo:_R,useReducer:zv,useRef:mR,useState:function(){return zv(rf)},useDebugValue:j_,useDeferredValue:function(e){var t=Xi();return SR(t,Zn.memoizedState,e)},useTransition:function(){var e=zv(rf)[0],t=Xi().memoizedState;return[e,t]},useMutableSource:uR,useSyncExternalStore:cR,useId:ER,unstable_isNewReconciler:!1},xM={readContext:Yi,useCallback:xR,useContext:Yi,useEffect:C_,useImperativeHandle:bR,useInsertionEffect:yR,useLayoutEffect:vR,useMemo:_R,useReducer:Hv,useRef:mR,useState:function(){return Hv(rf)},useDebugValue:j_,useDeferredValue:function(e){var t=Xi();return Zn===null?t.memoizedState=e:SR(t,Zn.memoizedState,e)},useTransition:function(){var e=Hv(rf)[0],t=Xi().memoizedState;return[e,t]},useMutableSource:uR,useSyncExternalStore:cR,useId:ER,unstable_isNewReconciler:!1};function io(e,t){if(e&&e.defaultProps){t=Tn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Kw(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Tn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Dm={isMounted:function(e){return(e=e._reactInternals)?Wl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xr(),i=wa(e),o=ks(r,i);o.payload=t,n!=null&&(o.callback=n),t=ya(e,o,i),t!==null&&(yo(t,e,i,r),Ip(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xr(),i=wa(e),o=ks(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ya(e,o,i),t!==null&&(yo(t,e,i,r),Ip(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xr(),r=wa(e),i=ks(n,r);i.tag=2,t!=null&&(i.callback=t),t=ya(e,i,r),t!==null&&(yo(t,e,r,n),Ip(t,e,r))}};function yE(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Xd(n,r)||!Xd(i,o):!0}function AR(e,t,n){var r=!1,i=Ca,o=t.contextType;return typeof o=="object"&&o!==null?o=Yi(o):(i=di(t)?xl:Lr.current,r=t.contextTypes,o=(r=r!=null)?Uu(e,i):Ca),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Dm,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function vE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Dm.enqueueReplaceState(t,t.state,null)}function Gw(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},w_(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Yi(o):(o=di(t)?xl:Lr.current,i.context=Uu(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Kw(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Dm.enqueueReplaceState(i,i.state,null),gg(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ku(e,t){try{var n="",r=t;do n+=Y5(r),r=r.return;while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function Uv(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Yw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _M=typeof WeakMap=="function"?WeakMap:Map;function NR(e,t,n){n=ks(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bg||(bg=!0,ob=r),Yw(e,t)},n}function RR(e,t,n){n=ks(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Yw(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Yw(e,t),typeof r!="function"&&(va===null?va=new Set([this]):va.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function wE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _M;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=MM.bind(null,e,t,n),t.then(e,e))}function bE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xE(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ks(-1,1),t.tag=2,ya(n,t,1))),n.lanes|=1),e)}var SM=Hs.ReactCurrentOwner,si=!1;function Gr(e,t,n,r){t.child=e===null?oR(t,null,n,r):Vu(t,e.child,n,r)}function _E(e,t,n,r,i){n=n.render;var o=t.ref;return Tu(t,i),r=E_(e,t,n,r,o,i),n=k_(),e!==null&&!si?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Os(e,t,i)):(Sn&&n&&f_(t),t.flags|=1,Gr(e,t,r,i),t.child)}function SE(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!$_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,TR(e,t,o,r,i)):(e=Lp(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Xd,n(s,r)&&e.ref===t.ref)return Os(e,t,i)}return t.flags|=1,e=ba(o,r),e.ref=t.ref,e.return=t,t.child=e}function TR(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Xd(o,r)&&e.ref===t.ref)if(si=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(si=!0);else return t.lanes=e.lanes,Os(e,t,i)}return Xw(e,t,n,r,i)}function IR(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(bu,wi),wi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mn(bu,wi),wi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,mn(bu,wi),wi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,mn(bu,wi),wi|=r;return Gr(e,t,i,n),t.child}function PR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Xw(e,t,n,r,i){var o=di(n)?xl:Lr.current;return o=Uu(t,o),Tu(t,i),n=E_(e,t,n,r,o,i),r=k_(),e!==null&&!si?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Os(e,t,i)):(Sn&&r&&f_(t),t.flags|=1,Gr(e,t,n,i),t.child)}function EE(e,t,n,r,i){if(di(n)){var o=!0;cg(t)}else o=!1;if(Tu(t,i),t.stateNode===null)$p(e,t),AR(t,n,r),Gw(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Yi(u):(u=di(n)?xl:Lr.current,u=Uu(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&vE(t,s,r,u),ia=!1;var h=t.memoizedState;s.state=h,gg(t,r,s,i),l=t.memoizedState,a!==r||h!==l||ci.current||ia?(typeof c=="function"&&(Kw(t,n,c,r),l=t.memoizedState),(a=ia||yE(t,n,a,r,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,aR(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:io(t.type,a),s.props=u,f=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yi(l):(l=di(n)?xl:Lr.current,l=Uu(t,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==l)&&vE(t,s,r,l),ia=!1,h=t.memoizedState,s.state=h,gg(t,r,s,i);var v=t.memoizedState;a!==f||h!==v||ci.current||ia?(typeof p=="function"&&(Kw(t,n,p,r),v=t.memoizedState),(u=ia||yE(t,n,u,r,h,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Jw(e,t,n,r,o,i)}function Jw(e,t,n,r,i,o){PR(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&uE(t,n,!1),Os(e,t,o);r=t.stateNode,SM.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Vu(t,e.child,null,o),t.child=Vu(t,null,a,o)):Gr(e,t,a,o),t.memoizedState=r.state,i&&uE(t,n,!0),t.child}function OR(e){var t=e.stateNode;t.pendingContext?lE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lE(e,t.context,!1),b_(e,t.containerInfo)}function kE(e,t,n,r,i){return Wu(),p_(i),t.flags|=256,Gr(e,t,n,r),t.child}var Qw={dehydrated:null,treeContext:null,retryLane:0};function Zw(e){return{baseLanes:e,cachePool:null,transitions:null}}function $R(e,t,n){var r=t.pendingProps,i=Cn.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),mn(Cn,i&1),e===null)return Vw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Fm(s,r,0,null),e=gl(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Zw(n),t.memoizedState=Qw,e):A_(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return EM(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ba(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ba(a,o):(o=gl(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Zw(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=Qw,r}return o=e.child,e=o.sibling,r=ba(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function A_(e,t){return t=Fm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Kh(e,t,n,r){return r!==null&&p_(r),Vu(t,e.child,null,n),e=A_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EM(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=Uv(Error(et(422))),Kh(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fm({mode:"visible",children:r.children},i,0,null),o=gl(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Vu(t,e.child,null,s),t.child.memoizedState=Zw(s),t.memoizedState=Qw,o);if(!(t.mode&1))return Kh(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(et(419)),r=Uv(o,r,void 0),Kh(e,t,s,r)}if(a=(s&e.childLanes)!==0,si||a){if(r=cr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ps(e,i),yo(r,e,i,-1))}return O_(),r=Uv(Error(et(421))),Kh(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=DM.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Si=ma(i.nextSibling),ki=t,Sn=!0,lo=null,e!==null&&(Bi[Fi++]=xs,Bi[Fi++]=_s,Bi[Fi++]=_l,xs=e.id,_s=e.overflow,_l=t),t=A_(t,r.children),t.flags|=4096,t)}function CE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qw(e.return,t,n)}function Wv(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function MR(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Gr(e,t,r.children,n),r=Cn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&CE(e,n,t);else if(e.tag===19)CE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mn(Cn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&mg(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wv(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&mg(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wv(t,!0,n,null,o);break;case"together":Wv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $p(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Os(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),El|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=ba(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ba(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kM(e,t,n){switch(t.tag){case 3:OR(t),Wu();break;case 5:lR(t);break;case 1:di(t.type)&&cg(t);break;case 4:b_(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;mn(hg,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(mn(Cn,Cn.current&1),t.flags|=128,null):n&t.child.childLanes?$R(e,t,n):(mn(Cn,Cn.current&1),e=Os(e,t,n),e!==null?e.sibling:null);mn(Cn,Cn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return MR(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mn(Cn,Cn.current),r)break;return null;case 22:case 23:return t.lanes=0,IR(e,t,n)}return Os(e,t,n)}var DR,eb,LR,BR;DR=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eb=function(){};LR=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,cl(Wo.current);var o=null;switch(n){case"input":i=_w(e,i),r=_w(e,r),o=[];break;case"select":i=Tn({},i,{value:void 0}),r=Tn({},r,{value:void 0}),o=[];break;case"textarea":i=kw(e,i),r=kw(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=lg)}jw(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ud.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ud.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&yn("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};BR=function(e,t,n,r){n!==r&&(t.flags|=4)};function Gc(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function CM(e,t,n){var r=t.pendingProps;switch(h_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(t),null;case 1:return di(t.type)&&ug(),Ar(t),null;case 3:return r=t.stateNode,qu(),xn(ci),xn(Lr),__(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lo!==null&&(lb(lo),lo=null))),eb(e,t),Ar(t),null;case 5:x_(t);var i=cl(tf.current);if(n=t.type,e!==null&&t.stateNode!=null)LR(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Ar(t),null}if(e=cl(Wo.current),Vh(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[zo]=t,r[Zd]=o,e=(t.mode&1)!==0,n){case"dialog":yn("cancel",r),yn("close",r);break;case"iframe":case"object":case"embed":yn("load",r);break;case"video":case"audio":for(i=0;i<fd.length;i++)yn(fd[i],r);break;case"source":yn("error",r);break;case"img":case"image":case"link":yn("error",r),yn("load",r);break;case"details":yn("toggle",r);break;case"input":$S(r,o),yn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},yn("invalid",r);break;case"textarea":DS(r,o),yn("invalid",r)}jw(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Wh(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Wh(r.textContent,a,e),i=["children",""+a]):Ud.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&yn("scroll",r)}switch(n){case"input":Mh(r),MS(r,o,!0);break;case"textarea":Mh(r),LS(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=lg)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[zo]=t,e[Zd]=r,DR(e,t,!1,!1),t.stateNode=e;e:{switch(s=Aw(n,r),n){case"dialog":yn("cancel",e),yn("close",e),i=r;break;case"iframe":case"object":case"embed":yn("load",e),i=r;break;case"video":case"audio":for(i=0;i<fd.length;i++)yn(fd[i],e);i=r;break;case"source":yn("error",e),i=r;break;case"img":case"image":case"link":yn("error",e),yn("load",e),i=r;break;case"details":yn("toggle",e),i=r;break;case"input":$S(e,r),i=_w(e,r),yn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Tn({},r,{value:void 0}),yn("invalid",e);break;case"textarea":DS(e,r),i=kw(e,r),yn("invalid",e);break;default:i=r}jw(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?mN(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pN(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wd(e,l):typeof l=="number"&&Wd(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ud.hasOwnProperty(o)?l!=null&&o==="onScroll"&&yn("scroll",e):l!=null&&Qx(e,o,l,s))}switch(n){case"input":Mh(e),MS(e,r,!1);break;case"textarea":Mh(e),LS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ka(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ju(e,!!r.multiple,o,!1):r.defaultValue!=null&&ju(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=lg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ar(t),null;case 6:if(e&&t.stateNode!=null)BR(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=cl(tf.current),cl(Wo.current),Vh(t)){if(r=t.stateNode,n=t.memoizedProps,r[zo]=t,(o=r.nodeValue!==n)&&(e=ki,e!==null))switch(e.tag){case 3:Wh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wh(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zo]=t,t.stateNode=r}return Ar(t),null;case 13:if(xn(Cn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&Si!==null&&t.mode&1&&!(t.flags&128))rR(),Wu(),t.flags|=98560,o=!1;else if(o=Vh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(et(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(et(317));o[zo]=t}else Wu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ar(t),o=!1}else lo!==null&&(lb(lo),lo=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Cn.current&1?tr===0&&(tr=3):O_())),t.updateQueue!==null&&(t.flags|=4),Ar(t),null);case 4:return qu(),eb(e,t),e===null&&Jd(t.stateNode.containerInfo),Ar(t),null;case 10:return y_(t.type._context),Ar(t),null;case 17:return di(t.type)&&ug(),Ar(t),null;case 19:if(xn(Cn),o=t.memoizedState,o===null)return Ar(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Gc(o,!1);else{if(tr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=mg(e),s!==null){for(t.flags|=128,Gc(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mn(Cn,Cn.current&1|2),t.child}e=e.sibling}o.tail!==null&&zn()>Gu&&(t.flags|=128,r=!0,Gc(o,!1),t.lanes=4194304)}else{if(!r)if(e=mg(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Sn)return Ar(t),null}else 2*zn()-o.renderingStartTime>Gu&&n!==1073741824&&(t.flags|=128,r=!0,Gc(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=zn(),t.sibling=null,n=Cn.current,mn(Cn,r?n&1|2:n&1),t):(Ar(t),null);case 22:case 23:return P_(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wi&1073741824&&(Ar(t),t.subtreeFlags&6&&(t.flags|=8192)):Ar(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function jM(e,t){switch(h_(t),t.tag){case 1:return di(t.type)&&ug(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qu(),xn(ci),xn(Lr),__(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return x_(t),null;case 13:if(xn(Cn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));Wu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xn(Cn),null;case 4:return qu(),null;case 10:return y_(t.type._context),null;case 22:case 23:return P_(),null;case 24:return null;default:return null}}var Gh=!1,Tr=!1,AM=typeof WeakSet=="function"?WeakSet:Set,bt=null;function wu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$n(e,t,r)}else n.current=null}function tb(e,t,n){try{n()}catch(r){$n(e,t,r)}}var jE=!1;function NM(e,t){if(Lw=og,e=WN(),d_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===i&&(a=s),h===o&&++c===r&&(l=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bw={focusedElem:e,selectionRange:n},og=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){t=bt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,m=t.stateNode,b=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:io(t.type,y),x);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(S){$n(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}return v=jE,jE=!1,v}function Pd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&tb(t,n,o)}i=i.next}while(i!==r)}}function Lm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FR(e){var t=e.alternate;t!==null&&(e.alternate=null,FR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zo],delete t[Zd],delete t[Hw],delete t[dM],delete t[fM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zR(e){return e.tag===5||e.tag===3||e.tag===4}function AE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=lg));else if(r!==4&&(e=e.child,e!==null))for(rb(e,t,n),e=e.sibling;e!==null;)rb(e,t,n),e=e.sibling}function ib(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ib(e,t,n),e=e.sibling;e!==null;)ib(e,t,n),e=e.sibling}var gr=null,so=!1;function Qs(e,t,n){for(n=n.child;n!==null;)HR(e,t,n),n=n.sibling}function HR(e,t,n){if(Uo&&typeof Uo.onCommitFiberUnmount=="function")try{Uo.onCommitFiberUnmount(Rm,n)}catch(a){}switch(n.tag){case 5:Tr||wu(n,t);case 6:var r=gr,i=so;gr=null,Qs(e,t,n),gr=r,so=i,gr!==null&&(so?(e=gr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):gr.removeChild(n.stateNode));break;case 18:gr!==null&&(so?(e=gr,n=n.stateNode,e.nodeType===8?Dv(e.parentNode,n):e.nodeType===1&&Dv(e,n),Gd(e)):Dv(gr,n.stateNode));break;case 4:r=gr,i=so,gr=n.stateNode.containerInfo,so=!0,Qs(e,t,n),gr=r,so=i;break;case 0:case 11:case 14:case 15:if(!Tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&tb(n,t,s),i=i.next}while(i!==r)}Qs(e,t,n);break;case 1:if(!Tr&&(wu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$n(n,t,a)}Qs(e,t,n);break;case 21:Qs(e,t,n);break;case 22:n.mode&1?(Tr=(r=Tr)||n.memoizedState!==null,Qs(e,t,n),Tr=r):Qs(e,t,n);break;default:Qs(e,t,n)}}function NE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new AM),t.forEach(function(r){var i=LM.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ro(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:gr=a.stateNode,so=!1;break e;case 3:gr=a.stateNode.containerInfo,so=!0;break e;case 4:gr=a.stateNode.containerInfo,so=!0;break e}a=a.return}if(gr===null)throw Error(et(160));HR(o,s,i),gr=null,so=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){$n(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)UR(t,e),t=t.sibling}function UR(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ro(t,e),Do(e),r&4){try{Pd(3,e,e.return),Lm(3,e)}catch(y){$n(e,e.return,y)}try{Pd(5,e,e.return)}catch(y){$n(e,e.return,y)}}break;case 1:ro(t,e),Do(e),r&512&&n!==null&&wu(n,n.return);break;case 5:if(ro(t,e),Do(e),r&512&&n!==null&&wu(n,n.return),e.flags&32){var i=e.stateNode;try{Wd(i,"")}catch(y){$n(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&dN(i,o),Aw(a,s);var u=Aw(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?mN(i,f):c==="dangerouslySetInnerHTML"?pN(i,f):c==="children"?Wd(i,f):Qx(i,c,f,u)}switch(a){case"input":Sw(i,o);break;case"textarea":fN(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?ju(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?ju(i,!!o.multiple,o.defaultValue,!0):ju(i,!!o.multiple,o.multiple?[]:"",!1))}i[Zd]=o}catch(y){$n(e,e.return,y)}}break;case 6:if(ro(t,e),Do(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){$n(e,e.return,y)}}break;case 3:if(ro(t,e),Do(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gd(t.containerInfo)}catch(y){$n(e,e.return,y)}break;case 4:ro(t,e),Do(e);break;case 13:ro(t,e),Do(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(T_=zn())),r&4&&NE(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Tr=(u=Tr)||c,ro(t,e),Tr=u):ro(t,e),Do(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(bt=e,c=e.child;c!==null;){for(f=bt=c;bt!==null;){switch(h=bt,p=h.child,h.tag){case 0:case 11:case 14:case 15:Pd(4,h,h.return);break;case 1:wu(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){$n(r,n,y)}}break;case 5:wu(h,h.return);break;case 22:if(h.memoizedState!==null){TE(f);continue}}p!==null?(p.return=h,bt=p):TE(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gN("display",s))}catch(y){$n(e,e.return,y)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){$n(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ro(t,e),Do(e),r&4&&NE(e);break;case 21:break;default:ro(t,e),Do(e)}}function Do(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zR(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wd(i,""),r.flags&=-33);var o=AE(e);ib(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=AE(e);rb(e,a,s);break;default:throw Error(et(161))}}catch(l){$n(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RM(e,t,n){bt=e,WR(e)}function WR(e,t,n){for(var r=(e.mode&1)!==0;bt!==null;){var i=bt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Gh;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tr;a=Gh;var u=Tr;if(Gh=s,(Tr=l)&&!u)for(bt=i;bt!==null;)s=bt,l=s.child,s.tag===22&&s.memoizedState!==null?IE(i):l!==null?(l.return=s,bt=l):IE(i);for(;o!==null;)bt=o,WR(o),o=o.sibling;bt=i,Gh=a,Tr=u}RE(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,bt=o):RE(e)}}function RE(e){for(;bt!==null;){var t=bt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Tr||Lm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Tr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:io(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&pE(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}pE(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Gd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}Tr||t.flags&512&&nb(t)}catch(h){$n(t,t.return,h)}}if(t===e){bt=null;break}if(n=t.sibling,n!==null){n.return=t.return,bt=n;break}bt=t.return}}function TE(e){for(;bt!==null;){var t=bt;if(t===e){bt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,bt=n;break}bt=t.return}}function IE(e){for(;bt!==null;){var t=bt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Lm(4,t)}catch(l){$n(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){$n(t,i,l)}}var o=t.return;try{nb(t)}catch(l){$n(t,o,l)}break;case 5:var s=t.return;try{nb(t)}catch(l){$n(t,s,l)}}}catch(l){$n(t,t.return,l)}if(t===e){bt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,bt=a;break}bt=t.return}}var TM=Math.ceil,wg=Hs.ReactCurrentDispatcher,N_=Hs.ReactCurrentOwner,Vi=Hs.ReactCurrentBatchConfig,nn=0,cr=null,Kn=null,vr=0,wi=0,bu=Da(0),tr=0,sf=null,El=0,Bm=0,R_=0,Od=null,ii=null,T_=0,Gu=1/0,fs=null,bg=!1,ob=null,va=null,Yh=!1,da=null,xg=0,$d=0,sb=null,Mp=-1,Dp=0;function Xr(){return nn&6?zn():Mp!==-1?Mp:Mp=zn()}function wa(e){return e.mode&1?nn&2&&vr!==0?vr&-vr:pM.transition!==null?(Dp===0&&(Dp=AN()),Dp):(e=an,e!==0||(e=window.event,e=e===void 0?16:$N(e.type)),e):1}function yo(e,t,n,r){if(50<$d)throw $d=0,sb=null,Error(et(185));Jf(e,n,r),(!(nn&2)||e!==cr)&&(e===cr&&(!(nn&2)&&(Bm|=n),tr===4&&la(e,vr)),fi(e,r),n===1&&nn===0&&!(t.mode&1)&&(Gu=zn()+500,$m&&La()))}function fi(e,t){var n=e.callbackNode;p$(e,t);var r=ig(e,e===cr?vr:0);if(r===0)n!==null&&zS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&zS(n),t===1)e.tag===0?hM(PE.bind(null,e)):eR(PE.bind(null,e)),uM(function(){!(nn&6)&&La()}),n=null;else{switch(NN(r)){case 1:n=r_;break;case 4:n=CN;break;case 16:n=rg;break;case 536870912:n=jN;break;default:n=rg}n=QR(n,VR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function VR(e,t){if(Mp=-1,Dp=0,nn&6)throw Error(et(327));var n=e.callbackNode;if(Iu()&&e.callbackNode!==n)return null;var r=ig(e,e===cr?vr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_g(e,r);else{t=r;var i=nn;nn|=2;var o=KR();(cr!==e||vr!==t)&&(fs=null,Gu=zn()+500,pl(e,t));do try{OM();break}catch(a){qR(e,a)}while(!0);m_(),wg.current=o,nn=i,Kn!==null?t=0:(cr=null,vr=0,t=tr)}if(t!==0){if(t===2&&(i=Pw(e),i!==0&&(r=i,t=ab(e,i))),t===1)throw n=sf,pl(e,0),la(e,r),fi(e,zn()),n;if(t===6)la(e,r);else{if(i=e.current.alternate,!(r&30)&&!IM(i)&&(t=_g(e,r),t===2&&(o=Pw(e),o!==0&&(r=o,t=ab(e,o))),t===1))throw n=sf,pl(e,0),la(e,r),fi(e,zn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:nl(e,ii,fs);break;case 3:if(la(e,r),(r&130023424)===r&&(t=T_+500-zn(),10<t)){if(ig(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Xr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=zw(nl.bind(null,e,ii,fs),t);break}nl(e,ii,fs);break;case 4:if(la(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-mo(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TM(r/1960))-r,10<r){e.timeoutHandle=zw(nl.bind(null,e,ii,fs),r);break}nl(e,ii,fs);break;case 5:nl(e,ii,fs);break;default:throw Error(et(329))}}}return fi(e,zn()),e.callbackNode===n?VR.bind(null,e):null}function ab(e,t){var n=Od;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),e=_g(e,t),e!==2&&(t=ii,ii=n,t!==null&&lb(t)),e}function lb(e){ii===null?ii=e:ii.push.apply(ii,e)}function IM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!wo(o(),i))return!1}catch(s){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function la(e,t){for(t&=~R_,t&=~Bm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mo(t),r=1<<n;e[n]=-1,t&=~r}}function PE(e){if(nn&6)throw Error(et(327));Iu();var t=ig(e,0);if(!(t&1))return fi(e,zn()),null;var n=_g(e,t);if(e.tag!==0&&n===2){var r=Pw(e);r!==0&&(t=r,n=ab(e,r))}if(n===1)throw n=sf,pl(e,0),la(e,t),fi(e,zn()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nl(e,ii,fs),fi(e,zn()),null}function I_(e,t){var n=nn;nn|=1;try{return e(t)}finally{nn=n,nn===0&&(Gu=zn()+500,$m&&La())}}function kl(e){da!==null&&da.tag===0&&!(nn&6)&&Iu();var t=nn;nn|=1;var n=Vi.transition,r=an;try{if(Vi.transition=null,an=1,e)return e()}finally{an=r,Vi.transition=n,nn=t,!(nn&6)&&La()}}function P_(){wi=bu.current,xn(bu)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lM(n)),Kn!==null)for(n=Kn.return;n!==null;){var r=n;switch(h_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ug();break;case 3:qu(),xn(ci),xn(Lr),__();break;case 5:x_(r);break;case 4:qu();break;case 13:xn(Cn);break;case 19:xn(Cn);break;case 10:y_(r.type._context);break;case 22:case 23:P_()}n=n.return}if(cr=e,Kn=e=ba(e.current,null),vr=wi=t,tr=0,sf=null,R_=Bm=El=0,ii=Od=null,ul!==null){for(t=0;t<ul.length;t++)if(n=ul[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ul=null}return e}function qR(e,t){do{var n=Kn;try{if(m_(),Pp.current=vg,yg){for(var r=An.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yg=!1}if(Sl=0,ur=Zn=An=null,Id=!1,nf=0,N_.current=null,n===null||n.return===null){tr=1,sf=t,Kn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=vr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=bE(s);if(p!==null){p.flags&=-257,xE(p,s,a,o,t),p.mode&1&&wE(o,u,t),t=p,l=u;var v=t.updateQueue;if(v===null){var y=new Set;y.add(l),t.updateQueue=y}else v.add(l);break e}else{if(!(t&1)){wE(o,u,t),O_();break e}l=Error(et(426))}}else if(Sn&&a.mode&1){var x=bE(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),xE(x,s,a,o,t),p_(Ku(l,a));break e}}o=l=Ku(l,a),tr!==4&&(tr=2),Od===null?Od=[o]:Od.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=NR(o,l,t);hE(o,m);break e;case 1:a=l;var b=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(va===null||!va.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=RR(o,a,t);hE(o,S);break e}}o=o.return}while(o!==null)}YR(n)}catch(E){t=E,Kn===n&&n!==null&&(Kn=n=n.return);continue}break}while(!0)}function KR(){var e=wg.current;return wg.current=vg,e===null?vg:e}function O_(){(tr===0||tr===3||tr===2)&&(tr=4),cr===null||!(El&268435455)&&!(Bm&268435455)||la(cr,vr)}function _g(e,t){var n=nn;nn|=2;var r=KR();(cr!==e||vr!==t)&&(fs=null,pl(e,t));do try{PM();break}catch(i){qR(e,i)}while(!0);if(m_(),nn=n,wg.current=r,Kn!==null)throw Error(et(261));return cr=null,vr=0,tr}function PM(){for(;Kn!==null;)GR(Kn)}function OM(){for(;Kn!==null&&!o$();)GR(Kn)}function GR(e){var t=JR(e.alternate,e,wi);e.memoizedProps=e.pendingProps,t===null?YR(e):Kn=t,N_.current=null}function YR(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=jM(n,t),n!==null){n.flags&=32767,Kn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tr=6,Kn=null;return}}else if(n=CM(n,t,wi),n!==null){Kn=n;return}if(t=t.sibling,t!==null){Kn=t;return}Kn=t=e}while(t!==null);tr===0&&(tr=5)}function nl(e,t,n){var r=an,i=Vi.transition;try{Vi.transition=null,an=1,$M(e,t,n,r)}finally{Vi.transition=i,an=r}return null}function $M(e,t,n,r){do Iu();while(da!==null);if(nn&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(g$(e,o),e===cr&&(Kn=cr=null,vr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yh||(Yh=!0,QR(rg,function(){return Iu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Vi.transition,Vi.transition=null;var s=an;an=1;var a=nn;nn|=4,N_.current=null,NM(e,n),UR(n,e),tM(Bw),og=!!Lw,Bw=Lw=null,e.current=n,RM(n),s$(),nn=a,an=s,Vi.transition=o}else e.current=n;if(Yh&&(Yh=!1,da=e,xg=i),o=e.pendingLanes,o===0&&(va=null),u$(n.stateNode),fi(e,zn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bg)throw bg=!1,e=ob,ob=null,e;return xg&1&&e.tag!==0&&Iu(),o=e.pendingLanes,o&1?e===sb?$d++:($d=0,sb=e):$d=0,La(),null}function Iu(){if(da!==null){var e=NN(xg),t=Vi.transition,n=an;try{if(Vi.transition=null,an=16>e?16:e,da===null)var r=!1;else{if(e=da,da=null,xg=0,nn&6)throw Error(et(331));var i=nn;for(nn|=4,bt=e.current;bt!==null;){var o=bt,s=o.child;if(bt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(bt=u;bt!==null;){var c=bt;switch(c.tag){case 0:case 11:case 15:Pd(8,c,o)}var f=c.child;if(f!==null)f.return=c,bt=f;else for(;bt!==null;){c=bt;var h=c.sibling,p=c.return;if(FR(c),c===u){bt=null;break}if(h!==null){h.return=p,bt=h;break}bt=p}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}bt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,bt=s;else e:for(;bt!==null;){if(o=bt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Pd(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,bt=m;break e}bt=o.return}}var b=e.current;for(bt=b;bt!==null;){s=bt;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,bt=w;else e:for(s=b;bt!==null;){if(a=bt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lm(9,a)}}catch(E){$n(a,a.return,E)}if(a===s){bt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,bt=S;break e}bt=a.return}}if(nn=i,La(),Uo&&typeof Uo.onPostCommitFiberRoot=="function")try{Uo.onPostCommitFiberRoot(Rm,e)}catch(E){}r=!0}return r}finally{an=n,Vi.transition=t}}return!1}function OE(e,t,n){t=Ku(n,t),t=NR(e,t,1),e=ya(e,t,1),t=Xr(),e!==null&&(Jf(e,1,t),fi(e,t))}function $n(e,t,n){if(e.tag===3)OE(e,e,n);else for(;t!==null;){if(t.tag===3){OE(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(va===null||!va.has(r))){e=Ku(n,e),e=RR(t,e,1),t=ya(t,e,1),e=Xr(),t!==null&&(Jf(t,1,e),fi(t,e));break}}t=t.return}}function MM(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Xr(),e.pingedLanes|=e.suspendedLanes&n,cr===e&&(vr&n)===n&&(tr===4||tr===3&&(vr&130023424)===vr&&500>zn()-T_?pl(e,0):R_|=n),fi(e,t)}function XR(e,t){t===0&&(e.mode&1?(t=Bh,Bh<<=1,!(Bh&130023424)&&(Bh=4194304)):t=1);var n=Xr();e=Ps(e,t),e!==null&&(Jf(e,t,n),fi(e,n))}function DM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XR(e,n)}function LM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),XR(e,n)}var JR;JR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ci.current)si=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return si=!1,kM(e,t,n);si=!!(e.flags&131072)}else si=!1,Sn&&t.flags&1048576&&tR(t,fg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$p(e,t),e=t.pendingProps;var i=Uu(t,Lr.current);Tu(t,n),i=E_(null,t,r,e,i,n);var o=k_();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,di(r)?(o=!0,cg(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,w_(t),i.updater=Dm,t.stateNode=i,i._reactInternals=t,Gw(t,r,e,n),t=Jw(null,t,r,!0,o,n)):(t.tag=0,Sn&&o&&f_(t),Gr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($p(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=FM(r),e=io(r,e),i){case 0:t=Xw(null,t,r,e,n);break e;case 1:t=EE(null,t,r,e,n);break e;case 11:t=_E(null,t,r,e,n);break e;case 14:t=SE(null,t,r,io(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:io(r,i),Xw(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:io(r,i),EE(e,t,r,i,n);case 3:e:{if(OR(t),e===null)throw Error(et(387));r=t.pendingProps,o=t.memoizedState,i=o.element,aR(e,t),gg(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Ku(Error(et(423)),t),t=kE(e,t,r,n,i);break e}else if(r!==i){i=Ku(Error(et(424)),t),t=kE(e,t,r,n,i);break e}else for(Si=ma(t.stateNode.containerInfo.firstChild),ki=t,Sn=!0,lo=null,n=oR(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wu(),r===i){t=Os(e,t,n);break e}Gr(e,t,r,n)}t=t.child}return t;case 5:return lR(t),e===null&&Vw(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,Fw(r,i)?s=null:o!==null&&Fw(r,o)&&(t.flags|=32),PR(e,t),Gr(e,t,s,n),t.child;case 6:return e===null&&Vw(t),null;case 13:return $R(e,t,n);case 4:return b_(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vu(t,null,r,n):Gr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:io(r,i),_E(e,t,r,i,n);case 7:return Gr(e,t,t.pendingProps,n),t.child;case 8:return Gr(e,t,t.pendingProps.children,n),t.child;case 12:return Gr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,mn(hg,r._currentValue),r._currentValue=s,o!==null)if(wo(o.value,s)){if(o.children===i.children&&!ci.current){t=Os(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=ks(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),qw(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(et(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),qw(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Gr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Tu(t,n),i=Yi(i),r=r(i),t.flags|=1,Gr(e,t,r,n),t.child;case 14:return r=t.type,i=io(r,t.pendingProps),i=io(r.type,i),SE(e,t,r,i,n);case 15:return TR(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:io(r,i),$p(e,t),t.tag=1,di(r)?(e=!0,cg(t)):e=!1,Tu(t,n),AR(t,r,i),Gw(t,r,i,n),Jw(null,t,r,!0,e,n);case 19:return MR(e,t,n);case 22:return IR(e,t,n)}throw Error(et(156,t.tag))};function QR(e,t){return kN(e,t)}function BM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(e,t,n,r){return new BM(e,t,n,r)}function $_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FM(e){if(typeof e=="function")return $_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===e_)return 11;if(e===t_)return 14}return 2}function ba(e,t){var n=e.alternate;return n===null?(n=Ui(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lp(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")$_(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case cu:return gl(n.children,i,o,t);case Zx:s=8,i|=8;break;case vw:return e=Ui(12,n,t,i|2),e.elementType=vw,e.lanes=o,e;case ww:return e=Ui(13,n,t,i),e.elementType=ww,e.lanes=o,e;case bw:return e=Ui(19,n,t,i),e.elementType=bw,e.lanes=o,e;case lN:return Fm(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sN:s=10;break e;case aN:s=9;break e;case e_:s=11;break e;case t_:s=14;break e;case ra:s=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Ui(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function gl(e,t,n,r){return e=Ui(7,e,r,t),e.lanes=n,e}function Fm(e,t,n,r){return e=Ui(22,e,r,t),e.elementType=lN,e.lanes=n,e.stateNode={isHidden:!1},e}function Vv(e,t,n){return e=Ui(6,e,null,t),e.lanes=n,e}function qv(e,t,n){return t=Ui(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zM(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cv(0),this.expirationTimes=Cv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function M_(e,t,n,r,i,o,s,a,l){return e=new zM(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ui(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},w_(o),e}function HM(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ZR(e){if(!e)return Ca;e=e._reactInternals;e:{if(Wl(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(di(n))return ZN(e,n,t)}return t}function eT(e,t,n,r,i,o,s,a,l){return e=M_(n,r,!0,e,i,o,s,a,l),e.context=ZR(null),n=e.current,r=Xr(),i=wa(n),o=ks(r,i),o.callback=t!=null?t:null,ya(n,o,i),e.current.lanes=i,Jf(e,i,r),fi(e,r),e}function zm(e,t,n,r){var i=t.current,o=Xr(),s=wa(i);return n=ZR(n),t.context===null?t.context=n:t.pendingContext=n,t=ks(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ya(i,t,s),e!==null&&(yo(e,i,s,o),Ip(e,i,s)),s}function Sg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $E(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function D_(e,t){$E(e,t),(e=e.alternate)&&$E(e,t)}function UM(){return null}var tT=typeof reportError=="function"?reportError:function(e){console.error(e)};function L_(e){this._internalRoot=e}Hm.prototype.render=L_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));zm(e,t,null,null)};Hm.prototype.unmount=L_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kl(function(){zm(null,e,null,null)}),t[Is]=null}};function Hm(e){this._internalRoot=e}Hm.prototype.unstable_scheduleHydration=function(e){if(e){var t=IN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<aa.length&&t!==0&&t<aa[n].priority;n++);aa.splice(n,0,e),n===0&&ON(e)}};function B_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Um(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ME(){}function WM(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Sg(s);o.call(u)}}var s=eT(t,r,e,0,null,!1,!1,"",ME);return e._reactRootContainer=s,e[Is]=s.current,Jd(e.nodeType===8?e.parentNode:e),kl(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Sg(l);a.call(u)}}var l=M_(e,0,!1,null,null,!1,!1,"",ME);return e._reactRootContainer=l,e[Is]=l.current,Jd(e.nodeType===8?e.parentNode:e),kl(function(){zm(t,l,n,r)}),l}function Wm(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Sg(s);a.call(l)}}zm(t,s,e,i)}else s=WM(n,t,e,i,r);return Sg(s)}RN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dd(t.pendingLanes);n!==0&&(i_(t,n|1),fi(t,zn()),!(nn&6)&&(Gu=zn()+500,La()))}break;case 13:kl(function(){var r=Ps(e,1);if(r!==null){var i=Xr();yo(r,e,1,i)}}),D_(e,1)}};o_=function(e){if(e.tag===13){var t=Ps(e,134217728);if(t!==null){var n=Xr();yo(t,e,134217728,n)}D_(e,134217728)}};TN=function(e){if(e.tag===13){var t=wa(e),n=Ps(e,t);if(n!==null){var r=Xr();yo(n,e,t,r)}D_(e,t)}};IN=function(){return an};PN=function(e,t){var n=an;try{return an=e,t()}finally{an=n}};Rw=function(e,t,n){switch(t){case"input":if(Sw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Om(r);if(!i)throw Error(et(90));cN(r),Sw(r,i)}}}break;case"textarea":fN(e,n);break;case"select":t=n.value,t!=null&&ju(e,!!n.multiple,t,!1)}};wN=I_;bN=kl;var VM={usingClientEntryPoint:!1,Events:[Zf,pu,Om,yN,vN,I_]},Yc={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qM={bundleType:Yc.bundleType,version:Yc.version,rendererPackageName:Yc.rendererPackageName,rendererConfig:Yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=SN(e),e===null?null:e.stateNode},findFiberByHostInstance:Yc.findFiberByHostInstance||UM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{Rm=Xh.inject(qM),Uo=Xh}catch(e){}}Pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VM;Pi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B_(t))throw Error(et(200));return HM(e,t,null,n)};Pi.createRoot=function(e,t){if(!B_(e))throw Error(et(299));var n=!1,r="",i=tT;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=M_(e,1,!1,null,null,n,!1,r,i),e[Is]=t.current,Jd(e.nodeType===8?e.parentNode:e),new L_(t)};Pi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=SN(t),e=e===null?null:e.stateNode,e};Pi.flushSync=function(e){return kl(e)};Pi.hydrate=function(e,t,n){if(!Um(t))throw Error(et(200));return Wm(null,e,t,!0,n)};Pi.hydrateRoot=function(e,t,n){if(!B_(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=tT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=eT(t,null,e,1,n!=null?n:null,i,!1,o,s),e[Is]=t.current,Jd(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Hm(t)};Pi.render=function(e,t,n){if(!Um(t))throw Error(et(200));return Wm(null,e,t,!1,n)};Pi.unmountComponentAtNode=function(e){if(!Um(e))throw Error(et(40));return e._reactRootContainer?(kl(function(){Wm(null,null,e,!1,function(){e._reactRootContainer=null,e[Is]=null})}),!0):!1};Pi.unstable_batchedUpdates=I_;Pi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Um(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return Wm(e,t,n,!1,r)};Pi.version="18.3.1-next-f1338f8080-20240426";function nT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nT)}catch(e){console.error(e)}}nT(),nN.exports=Pi;var F_=nN.exports;const rT=zs(F_);var iT,DE=F_;iT=DE.createRoot,DE.hydrateRoot;var z_={};Object.defineProperty(z_,"__esModule",{value:!0});z_.parse=ZM;z_.serialize=eD;const KM=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,GM=/^[\u0021-\u003A\u003C-\u007E]*$/,YM=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,XM=/^[\u0020-\u003A\u003D-\u007E]*$/,JM=Object.prototype.toString,QM=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function ZM(e,t){const n=new QM,r=e.length;if(r<2)return n;const i=(t==null?void 0:t.decode)||tD;let o=0;do{const s=e.indexOf("=",o);if(s===-1)break;const a=e.indexOf(";",o),l=a===-1?r:a;if(s>l){o=e.lastIndexOf(";",s-1)+1;continue}const u=LE(e,o,s),c=BE(e,s,u),f=e.slice(u,c);if(n[f]===void 0){let h=LE(e,s+1,l),p=BE(e,l,h);const v=i(e.slice(h,p));n[f]=v}o=l+1}while(o<r);return n}function LE(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function BE(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function eD(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!KM.test(e))throw new TypeError("argument name is invalid: ".concat(e));const i=r(t);if(!GM.test(i))throw new TypeError("argument val is invalid: ".concat(t));let o=e+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError("option maxAge is invalid: ".concat(n.maxAge));o+="; Max-Age="+n.maxAge}if(n.domain){if(!YM.test(n.domain))throw new TypeError("option domain is invalid: ".concat(n.domain));o+="; Domain="+n.domain}if(n.path){if(!XM.test(n.path))throw new TypeError("option path is invalid: ".concat(n.path));o+="; Path="+n.path}if(n.expires){if(!nD(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError("option expires is invalid: ".concat(n.expires));o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid: ".concat(n.priority))}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid: ".concat(n.sameSite))}return o}function tD(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch(t){return e}}function nD(e){return JM.call(e)==="[object Date]"}var FE="popstate";function rD(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return ub("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:af(i)}return oD(t,n,null,e)}function Nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function iD(){return Math.random().toString(36).substring(2,10)}function zE(e,t){return{usr:e.state,key:e.key,idx:t}}function ub(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?mc(t):t,state:n,key:t&&t.key||r||iD()}}function af({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function mc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function oD(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=c();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function c(){return(s.state||{idx:null}).idx}function f(){a="POP";let x=c(),m=x==null?null:x-u;u=x,l&&l({action:a,location:y.location,delta:m})}function h(x,m){a="PUSH";let b=ub(y.location,x,m);u=c()+1;let w=zE(b,u),S=y.createHref(b);try{s.pushState(w,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}o&&l&&l({action:a,location:y.location,delta:1})}function p(x,m){a="REPLACE";let b=ub(y.location,x,m);u=c();let w=zE(b,u),S=y.createHref(b);s.replaceState(w,"",S),o&&l&&l({action:a,location:y.location,delta:0})}function v(x){return sD(x)}let y={get action(){return a},get location(){return e(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(FE,f),l=x,()=>{i.removeEventListener(FE,f),l=null}},createHref(x){return t(i,x)},createURL:v,encodeLocation(x){let m=v(x);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:p,go(x){return s.go(x)}};return y}function sD(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:af(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function oT(e,t,n="/"){return aD(e,t,n,!1)}function aD(e,t,n,r){let i=typeof t=="string"?mc(t):t,o=$s(i.pathname||"/",n);if(o==null)return null;let s=sT(e);lD(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=wD(o);a=yD(s[l],u,r)}return a}function sT(e,t=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Nn(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length));let u=Cs([r,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(Nn(o.index!==!0,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(u,'".')),sT(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:gD(u,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of aT(o.path))i(o,s,l)}),t}function aT(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=aT(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function lD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:mD(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var uD=/^:[\w-]+$/,cD=3,dD=2,fD=1,hD=10,pD=-2,HE=e=>e==="*";function gD(e,t){let n=e.split("/"),r=n.length;return n.some(HE)&&(r+=pD),t&&(r+=dD),n.filter(i=>!HE(i)).reduce((i,o)=>i+(uD.test(o)?cD:o===""?fD:hD),r)}function mD(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function yD(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",f=Eg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Eg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Cs([o,f.pathname]),pathnameBase:SD(Cs([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Cs([o,f.pathnameBase]))}return s}function Eg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vD(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},h)=>{if(c==="*"){let v=a[h]||"";s=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function vD(e,t=!1,n=!0){Jo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Jo(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function $s(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function bD(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?mc(e):e;return{pathname:n?n.startsWith("/")?n:xD(n,t):t,search:ED(r),hash:kD(i)}}function xD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Kv(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function _D(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function lT(e){let t=_D(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function uT(e,t,n,r=!1){let i;typeof e=="string"?i=mc(e):(i={...e},Nn(!i.pathname||!i.pathname.includes("?"),Kv("?","pathname","search",i)),Nn(!i.pathname||!i.pathname.includes("#"),Kv("#","pathname","hash",i)),Nn(!i.search||!i.search.includes("#"),Kv("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=t.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=bD(i,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Cs=e=>e.join("/").replace(/\/\/+/g,"/"),SD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ED=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function CD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var cT=["POST","PUT","PATCH","DELETE"];new Set(cT);var jD=["GET",...cT];new Set(jD);var yc=j.createContext(null);yc.displayName="DataRouter";var Vm=j.createContext(null);Vm.displayName="DataRouterState";var dT=j.createContext({isTransitioning:!1});dT.displayName="ViewTransition";var AD=j.createContext(new Map);AD.displayName="Fetchers";var ND=j.createContext(null);ND.displayName="Await";var ns=j.createContext(null);ns.displayName="Navigation";var th=j.createContext(null);th.displayName="Location";var _o=j.createContext({outlet:null,matches:[],isDataRoute:!1});_o.displayName="Route";var H_=j.createContext(null);H_.displayName="RouteError";function RD(e,{relative:t}={}){Nn(nh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(ns),{hash:i,pathname:o,search:s}=rh(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:Cs([n,o])),r.createHref({pathname:a,search:s,hash:i})}function nh(){return j.useContext(th)!=null}function Vl(){return Nn(nh(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(th).location}var fT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hT(e){j.useContext(ns).static||j.useLayoutEffect(e)}function vc(){let{isDataRoute:e}=j.useContext(_o);return e?VD():TD()}function TD(){Nn(nh(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(yc),{basename:t,navigator:n}=j.useContext(ns),{matches:r}=j.useContext(_o),{pathname:i}=Vl(),o=JSON.stringify(lT(r)),s=j.useRef(!1);return hT(()=>{s.current=!0}),j.useCallback((l,u={})=>{if(Jo(s.current,fT),!s.current)return;if(typeof l=="number"){n.go(l);return}let c=uT(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Cs([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,o,i,e])}var ID=j.createContext(null);function PD(e){let t=j.useContext(_o).outlet;return t&&j.createElement(ID.Provider,{value:e},t)}function pT(){let{matches:e}=j.useContext(_o),t=e[e.length-1];return t?t.params:{}}function rh(e,{relative:t}={}){let{matches:n}=j.useContext(_o),{pathname:r}=Vl(),i=JSON.stringify(lT(n));return j.useMemo(()=>uT(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function OD(e,t){return gT(e,t)}function gT(e,t,n,r){var b;Nn(nh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=j.useContext(ns),{matches:s}=j.useContext(_o),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let w=f&&f.path||"";mT(u,!f||w.endsWith("*")||w.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(w,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(w,'"> to <Route path="').concat(w==="/"?"*":"".concat(w,"/*"),'">.'))}let h=Vl(),p;if(t){let w=typeof t=="string"?mc(t):t;Nn(c==="/"||((b=w.pathname)==null?void 0:b.startsWith(c)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(c,'" but pathname "').concat(w.pathname,'" was given in the `location` prop.')),p=w}else p=h;let v=p.pathname||"/",y=v;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=!o&&n&&n.matches&&n.matches.length>0?n.matches:oT(e,{pathname:y});Jo(f||x!=null,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),Jo(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let m=BD(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Cs([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Cs([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&m?j.createElement(th.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},m):m}function $D(){let e=WD(),t=CD(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,s)}var MD=j.createElement($D,null),DD=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(_o.Provider,{value:this.props.routeContext},j.createElement(H_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LD({routeContext:e,match:t,children:n}){let r=j.useContext(yc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(_o.Provider,{value:e},n)}function BD(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Nn(l>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:f}=n,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let f,h=!1,p=null,v=null;n&&(f=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||MD,s&&(a<0&&c===0?(mT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,v=null):a===c&&(h=!0,v=u.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,c+1)),x=()=>{let m;return f?m=p:h?m=v:u.route.Component?m=j.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=l,j.createElement(LD,{match:u,routeContext:{outlet:l,matches:y,isDataRoute:n!=null},children:m})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?j.createElement(DD,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}function U_(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function FD(e){let t=j.useContext(yc);return Nn(t,U_(e)),t}function zD(e){let t=j.useContext(Vm);return Nn(t,U_(e)),t}function HD(e){let t=j.useContext(_o);return Nn(t,U_(e)),t}function W_(e){let t=HD(e),n=t.matches[t.matches.length-1];return Nn(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function UD(){return W_("useRouteId")}function WD(){var r;let e=j.useContext(H_),t=zD("useRouteError"),n=W_("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function VD(){let{router:e}=FD("useNavigate"),t=W_("useNavigate"),n=j.useRef(!1);return hT(()=>{n.current=!0}),j.useCallback(async(i,o={})=>{Jo(n.current,fT),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var UE={};function mT(e,t,n){!t&&!UE[e]&&(UE[e]=!0,Jo(!1,n))}j.memo(qD);function qD({routes:e,future:t,state:n}){return gT(e,void 0,n,t)}function KD(e){return PD(e.context)}function Li(e){Nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GD({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Nn(!nh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=j.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=mc(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:h="default"}=n,p=j.useMemo(()=>{let v=$s(l,s);return v==null?null:{location:{pathname:v,search:u,hash:c,state:f,key:h},navigationType:r}},[s,l,u,c,f,h,r]);return Jo(p!=null,'<Router basename="'.concat(s,'"> is not able to match the URL "').concat(l).concat(u).concat(c,"\" because it does not start with the basename, so the <Router> won't render anything.")),p==null?null:j.createElement(ns.Provider,{value:a},j.createElement(th.Provider,{children:t,value:p}))}function YD({children:e,location:t}){return OD(cb(e),t)}function cb(e,t=[]){let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let o=[...t,i];if(r.type===j.Fragment){n.push.apply(n,cb(r.props.children,o));return}Nn(r.type===Li,"[".concat(typeof r.type=="string"?r.type:r.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),Nn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=cb(r.props.children,o)),n.push(s)}),n}var Bp="get",Fp="application/x-www-form-urlencoded";function qm(e){return e!=null&&typeof e.tagName=="string"}function XD(e){return qm(e)&&e.tagName.toLowerCase()==="button"}function JD(e){return qm(e)&&e.tagName.toLowerCase()==="form"}function QD(e){return qm(e)&&e.tagName.toLowerCase()==="input"}function ZD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function eL(e,t){return e.button===0&&(!t||t==="_self")&&!ZD(e)}var Jh=null;function tL(){if(Jh===null)try{new FormData(document.createElement("form"),0),Jh=!1}catch(e){Jh=!0}return Jh}var nL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gv(e){return e!=null&&!nL.has(e)?(Jo(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Fp,'"')),null):e}function rL(e,t){let n,r,i,o,s;if(JD(e)){let a=e.getAttribute("action");r=a?$s(a,t):null,n=e.getAttribute("method")||Bp,i=Gv(e.getAttribute("enctype"))||Fp,o=new FormData(e)}else if(XD(e)||QD(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?$s(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Bp,i=Gv(e.getAttribute("formenctype"))||Gv(a.getAttribute("enctype"))||Fp,o=new FormData(a,e),!tL()){let{name:u,type:c,value:f}=e;if(c==="image"){let h=u?"".concat(u,"."):"";o.append("".concat(h,"x"),"0"),o.append("".concat(h,"y"),"0")}else u&&o.append(u,f)}}else{if(qm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bp,r=null,i=Fp,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function V_(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function iL(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function sL(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await iL(o,n);return s.links?s.links():[]}return[]}));return cL(r.flat(1).filter(oL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function WE(e,t,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function aL(e,t,{includeHydrateFallback:n}={}){return lL(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function lL(e){return[...new Set(e)]}function uL(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function cL(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(uL(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dL=new Set([100,101,204,205]);function fL(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&$s(n.pathname,t)==="/"?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}function yT(){let e=j.useContext(yc);return V_(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function hL(){let e=j.useContext(Vm);return V_(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var q_=j.createContext(void 0);q_.displayName="FrameworkContext";function vT(){let e=j.useContext(q_);return V_(e,"You must render this element inside a <HydratedRouter> element"),e}function pL(e,t){let n=j.useContext(q_),[r,i]=j.useState(!1),[o,s]=j.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,h=j.useRef(null);j.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let y=m=>{m.forEach(b=>{s(b.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[e]),j.useEffect(()=>{if(r){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[r]);let p=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,h,{}]:[o,h,{onFocus:Xc(a,p),onBlur:Xc(l,v),onMouseEnter:Xc(u,p),onMouseLeave:Xc(c,v),onTouchStart:Xc(f,p)}]:[!1,h,{}]}function Xc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function gL({page:e,...t}){let{router:n}=yT(),r=j.useMemo(()=>oT(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?j.createElement(yL,{page:e,matches:r,...t}):null}function mL(e){let{manifest:t,routeModules:n}=vT(),[r,i]=j.useState([]);return j.useEffect(()=>{let o=!1;return sL(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function yL({page:e,matches:t,...n}){let r=Vl(),{manifest:i,routeModules:o}=vT(),{basename:s}=yT(),{loaderData:a,matches:l}=hL(),u=j.useMemo(()=>WE(e,t,l,i,r,"data"),[e,t,l,i,r]),c=j.useMemo(()=>WE(e,t,l,i,r,"assets"),[e,t,l,i,r]),f=j.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,y=!1;if(t.forEach(m=>{var w;let b=i.routes[m.route.id];!b||!b.hasLoader||(!u.some(S=>S.route.id===m.route.id)&&m.route.id in a&&((w=o[m.route.id])!=null&&w.shouldRevalidate)||b.hasClientLoader?y=!0:v.add(m.route.id))}),v.size===0)return[];let x=fL(e,s);return y&&v.size>0&&x.searchParams.set("_routes",t.filter(m=>v.has(m.route.id)).map(m=>m.route.id).join(",")),[x.pathname+x.search]},[s,a,r,i,u,t,e,o]),h=j.useMemo(()=>aL(c,i),[c,i]),p=mL(c);return j.createElement(j.Fragment,null,f.map(v=>j.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),h.map(v=>j.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),p.map(({key:v,link:y})=>j.createElement("link",{key:v,...y})))}function vL(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var wT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wT&&(window.__reactRouterVersion="7.6.0")}catch(e){}function wL({basename:e,children:t,window:n}){let r=j.useRef();r.current==null&&(r.current=rD({window:n,v5Compat:!0}));let i=r.current,[o,s]=j.useState({action:i.action,location:i.location}),a=j.useCallback(l=>{j.startTransition(()=>s(l))},[s]);return j.useLayoutEffect(()=>i.listen(a),[i,a]),j.createElement(GD,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var bT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xT=j.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...h},p){let{basename:v}=j.useContext(ns),y=typeof u=="string"&&bT.test(u),x,m=!1;if(typeof u=="string"&&y&&(x=u,wT))try{let V=new URL(window.location.href),M=u.startsWith("//")?new URL(V.protocol+u):new URL(u),H=$s(M.pathname,v);M.origin===V.origin&&H!=null?u=H+M.search+M.hash:m=!0}catch(V){Jo(!1,'<Link to="'.concat(u,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let b=RD(u,{relative:i}),[w,S,E]=pL(r,h),A=_L(u,{replace:s,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:f});function T(V){t&&t(V),V.defaultPrevented||A(V)}let P=j.createElement("a",{...h,...E,href:x||b,onClick:m||o?t:T,ref:vL(p,S),target:l,"data-discover":!y&&n==="render"?"true":void 0});return w&&!y?j.createElement(j.Fragment,null,P,j.createElement(gL,{page:b})):P});xT.displayName="Link";var kg=j.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},c){let f=rh(s,{relative:u.relative}),h=Vl(),p=j.useContext(Vm),{navigator:v,basename:y}=j.useContext(ns),x=p!=null&&jL(f)&&a===!0,m=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=h.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,m=m.toLowerCase()),w&&y&&(w=$s(w,y)||w);const S=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let E=b===m||!i&&b.startsWith(m)&&b.charAt(S)==="/",A=w!=null&&(w===m||!i&&w.startsWith(m)&&w.charAt(m.length)==="/"),T={isActive:E,isPending:A,isTransitioning:x},P=E?t:void 0,V;typeof r=="function"?V=r(T):V=[r,E?"active":null,A?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(T):o;return j.createElement(xT,{...u,"aria-current":P,className:V,ref:c,style:M,to:s,viewTransition:a},typeof l=="function"?l(T):l)});kg.displayName="NavLink";var bL=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=Bp,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...h},p)=>{let v=kL(),y=CL(a,{relative:u}),x=s.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&bT.test(a),b=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let S=w.nativeEvent.submitter,E=(S==null?void 0:S.getAttribute("formmethod"))||s;v(S||w.currentTarget,{fetcherKey:t,method:E,navigate:n,replace:i,state:o,relative:u,preventScrollReset:c,viewTransition:f})};return j.createElement("form",{ref:p,method:x,action:y,onSubmit:r?l:b,...h,"data-discover":!m&&e==="render"?"true":void 0})});bL.displayName="Form";function xL(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _T(e){let t=j.useContext(yc);return Nn(t,xL(e)),t}function _L(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=vc(),l=Vl(),u=rh(e,{relative:o});return j.useCallback(c=>{if(eL(c,t)){c.preventDefault();let f=n!==void 0?n:af(l)===af(u);a(e,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,t,e,i,o,s])}var SL=0,EL=()=>"__".concat(String(++SL),"__");function kL(){let{router:e}=_T("useSubmit"),{basename:t}=j.useContext(ns),n=UD();return j.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=rL(r,t);if(i.navigate===!1){let c=i.fetcherKey||EL();await e.fetch(c,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function CL(e,{relative:t}={}){let{basename:n}=j.useContext(ns),r=j.useContext(_o);Nn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...rh(e||".",{relative:t})},s=Vl();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();o.search=c?"?".concat(c):""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Cs([n,o.pathname])),af(o)}function jL(e,t={}){let n=j.useContext(dT);Nn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_T("useViewTransitionState"),i=rh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=$s(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=$s(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Eg(i.pathname,s)!=null||Eg(i.pathname,o)!=null}[...dL];var K_={};Object.defineProperty(K_,"__esModule",{value:!0});var Ba=K_.newRidgeState=void 0;const Cg=j,ST=typeof window<"u"||typeof document<"u"?Cg.useLayoutEffect:Cg.useEffect,ET=(e,t)=>e===t,VE={};function AL(e,t=ET){const n=(0,Cg.useRef)(VE);let r=n.current;return ST(()=>{n.current=r}),(n.current===VE||!t(e,n.current))&&(r=e),r}function NL(e,t){let n=[],r=e;function i(u,c){const f=r;r=u instanceof Function?u(r):u,setTimeout(()=>{var h;n.forEach(p=>p(r,f)),c==null||c(r,f),(h=t==null?void 0:t.onSet)===null||h===void 0||h.call(t,r,f)})}function o(u){return n.push(u),()=>{n=n.filter(c=>c!==u)}}function s(u){ST(()=>o(u),[u])}function a(){const[u,c]=(0,Cg.useState)(r);return s(c),[u,i]}function l(u,c=ET){const[f]=a();return AL(u(f),c)}return{use:a,useSelector:l,useValue:()=>a()[0],get:()=>r,set:i,reset:()=>i(e),subscribe:o}}Ba=K_.newRidgeState=NL;let RL=0;const Km=Ba([]);function ln(e){const t=RL++;return Km.set(n=>[...n,{id:t,modal:e}]),t}function TL(e){Km.set(t=>t.filter(n=>n.modal.title!==e))}function ni(e){Km.set(t=>t.filter(n=>n.id!==e))}function Xn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Xn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var IL={value:()=>{}};function Gm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zp(n)}function zp(e){this._=e}function PL(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zp.prototype=Gm.prototype={constructor:zp,on:function(e,t){var n=this._,r=PL(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=OL(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=qE(n[i],e.name,t);else if(t==null)for(i in n)n[i]=qE(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zp(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function OL(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function qE(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=IL,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var db="http://www.w3.org/1999/xhtml";const KE={svg:"http://www.w3.org/2000/svg",xhtml:db,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ym(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),KE.hasOwnProperty(t)?{space:KE[t],local:e}:e}function $L(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===db&&t.documentElement.namespaceURI===db?t.createElement(e):t.createElementNS(n,e)}}function ML(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kT(e){var t=Ym(e);return(t.local?ML:$L)(t)}function DL(){}function G_(e){return e==null?DL:function(){return this.querySelector(e)}}function LL(e){typeof e!="function"&&(e=G_(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Ni(r,this._parents)}function BL(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function FL(){return[]}function CT(e){return e==null?FL:function(){return this.querySelectorAll(e)}}function zL(e){return function(){return BL(e.apply(this,arguments))}}function HL(e){typeof e=="function"?e=zL(e):e=CT(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new Ni(r,i)}function jT(e){return function(){return this.matches(e)}}function AT(e){return function(t){return t.matches(e)}}var UL=Array.prototype.find;function WL(e){return function(){return UL.call(this.children,e)}}function VL(){return this.firstElementChild}function qL(e){return this.select(e==null?VL:WL(typeof e=="function"?e:AT(e)))}var KL=Array.prototype.filter;function GL(){return Array.from(this.children)}function YL(e){return function(){return KL.call(this.children,e)}}function XL(e){return this.selectAll(e==null?GL:YL(typeof e=="function"?e:AT(e)))}function JL(e){typeof e!="function"&&(e=jT(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Ni(r,this._parents)}function NT(e){return new Array(e.length)}function QL(){return new Ni(this._enter||this._groups.map(NT),this._parents)}function jg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jg.prototype={constructor:jg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ZL(e){return function(){return e}}function e6(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new jg(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function t6(e,t,n,r,i,o,s){var a,l,u=new Map,c=t.length,f=o.length,h=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(h[a]=p=s.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<f;++a)p=s.call(e,o[a],a,o)+"",(l=u.get(p))?(r[a]=l,l.__data__=o[a],u.delete(p)):n[a]=new jg(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function n6(e){return e.__data__}function r6(e,t){if(!arguments.length)return Array.from(this,n6);var n=t?t6:e6,r=this._parents,i=this._groups;typeof e!="function"&&(e=ZL(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],h=f.length,p=i6(e.call(c,c&&c.__data__,u,r)),v=p.length,y=a[u]=new Array(v),x=s[u]=new Array(v),m=l[u]=new Array(h);n(c,f,y,x,m,p,t);for(var b=0,w=0,S,E;b<v;++b)if(S=y[b]){for(b>=w&&(w=b+1);!(E=x[w])&&++w<v;);S._next=E||null}}return s=new Ni(s,r),s._enter=a,s._exit=l,s}function i6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function o6(){return new Ni(this._exit||this._groups.map(NT),this._parents)}function s6(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function a6(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],f=u.length,h=a[l]=new Array(f),p,v=0;v<f;++v)(p=u[v]||c[v])&&(h[v]=p);for(;l<i;++l)a[l]=n[l];return new Ni(a,this._parents)}function l6(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function u6(e){e||(e=c6);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Ni(i,this._parents).order()}function c6(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function d6(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function f6(){return Array.from(this)}function h6(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function p6(){let e=0;for(const t of this)++e;return e}function g6(){return!this.node()}function m6(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function y6(e){return function(){this.removeAttribute(e)}}function v6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w6(e,t){return function(){this.setAttribute(e,t)}}function b6(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function x6(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _6(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function S6(e,t){var n=Ym(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?v6:y6:typeof t=="function"?n.local?_6:x6:n.local?b6:w6)(n,t))}function RT(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function E6(e){return function(){this.style.removeProperty(e)}}function k6(e,t,n){return function(){this.style.setProperty(e,t,n)}}function C6(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function j6(e,t,n){return arguments.length>1?this.each((t==null?E6:typeof t=="function"?C6:k6)(e,t,n==null?"":n)):Yu(this.node(),e)}function Yu(e,t){return e.style.getPropertyValue(t)||RT(e).getComputedStyle(e,null).getPropertyValue(t)}function A6(e){return function(){delete this[e]}}function N6(e,t){return function(){this[e]=t}}function R6(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function T6(e,t){return arguments.length>1?this.each((t==null?A6:typeof t=="function"?R6:N6)(e,t)):this.node()[e]}function TT(e){return e.trim().split(/^|\s+/)}function Y_(e){return e.classList||new IT(e)}function IT(e){this._node=e,this._names=TT(e.getAttribute("class")||"")}IT.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function PT(e,t){for(var n=Y_(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function OT(e,t){for(var n=Y_(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function I6(e){return function(){PT(this,e)}}function P6(e){return function(){OT(this,e)}}function O6(e,t){return function(){(t.apply(this,arguments)?PT:OT)(this,e)}}function $6(e,t){var n=TT(e+"");if(arguments.length<2){for(var r=Y_(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?O6:t?I6:P6)(n,t))}function M6(){this.textContent=""}function D6(e){return function(){this.textContent=e}}function L6(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function B6(e){return arguments.length?this.each(e==null?M6:(typeof e=="function"?L6:D6)(e)):this.node().textContent}function F6(){this.innerHTML=""}function z6(e){return function(){this.innerHTML=e}}function H6(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function U6(e){return arguments.length?this.each(e==null?F6:(typeof e=="function"?H6:z6)(e)):this.node().innerHTML}function W6(){this.nextSibling&&this.parentNode.appendChild(this)}function V6(){return this.each(W6)}function q6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K6(){return this.each(q6)}function G6(e){var t=typeof e=="function"?e:kT(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Y6(){return null}function X6(e,t){var n=typeof e=="function"?e:kT(e),r=t==null?Y6:typeof t=="function"?t:G_(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function J6(){var e=this.parentNode;e&&e.removeChild(this)}function Q6(){return this.each(J6)}function Z6(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eB(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tB(e){return this.select(e?eB:Z6)}function nB(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rB(e){return function(t){e.call(this,t,this.__data__)}}function iB(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function oB(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function sB(e,t,n){return function(){var r=this.__on,i,o=rB(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function aB(e,t,n){var r=iB(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?sB:oB,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function $T(e,t,n){var r=RT(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function lB(e,t){return function(){return $T(this,e,t)}}function uB(e,t){return function(){return $T(this,e,t.apply(this,arguments))}}function cB(e,t){return this.each((typeof t=="function"?uB:lB)(e,t))}function*dB(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var MT=[null];function Ni(e,t){this._groups=e,this._parents=t}function ih(){return new Ni([[document.documentElement]],MT)}function fB(){return this}Ni.prototype=ih.prototype={constructor:Ni,select:LL,selectAll:HL,selectChild:qL,selectChildren:XL,filter:JL,data:r6,enter:QL,exit:o6,join:s6,merge:a6,selection:fB,order:l6,sort:u6,call:d6,nodes:f6,node:h6,size:p6,empty:g6,each:m6,attr:S6,style:j6,property:T6,classed:$6,text:B6,html:U6,raise:V6,lower:K6,append:G6,insert:X6,remove:Q6,clone:tB,datum:nB,on:aB,dispatch:cB,[Symbol.iterator]:dB};function bi(e){return typeof e=="string"?new Ni([[document.querySelector(e)]],[document.documentElement]):new Ni([[e]],MT)}function hB(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ao(e,t){if(e=hB(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const pB={passive:!1},lf={capture:!0,passive:!1};function Yv(e){e.stopImmediatePropagation()}function Pu(e){e.preventDefault(),e.stopImmediatePropagation()}function DT(e){var t=e.document.documentElement,n=bi(e).on("dragstart.drag",Pu,lf);"onselectstart"in t?n.on("selectstart.drag",Pu,lf):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function LT(e,t){var n=e.document.documentElement,r=bi(e).on("dragstart.drag",null);t&&(r.on("click.drag",Pu,lf),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Qh=e=>()=>e;function fb(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}fb.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gB(e){return!e.ctrlKey&&!e.button}function mB(){return this.parentNode}function yB(e,t){return t==null?{x:e.x,y:e.y}:t}function vB(){return navigator.maxTouchPoints||"ontouchstart"in this}function BT(){var e=gB,t=mB,n=yB,r=vB,i={},o=Gm("start","drag","end"),s=0,a,l,u,c,f=0;function h(S){S.on("mousedown.drag",p).filter(r).on("touchstart.drag",x).on("touchmove.drag",m,pB).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,E){if(!(c||!e.call(this,S,E))){var A=w(this,t.call(this,S,E),S,E,"mouse");A&&(bi(S.view).on("mousemove.drag",v,lf).on("mouseup.drag",y,lf),DT(S.view),Yv(S),u=!1,a=S.clientX,l=S.clientY,A("start",S))}}function v(S){if(Pu(S),!u){var E=S.clientX-a,A=S.clientY-l;u=E*E+A*A>f}i.mouse("drag",S)}function y(S){bi(S.view).on("mousemove.drag mouseup.drag",null),LT(S.view,u),Pu(S),i.mouse("end",S)}function x(S,E){if(e.call(this,S,E)){var A=S.changedTouches,T=t.call(this,S,E),P=A.length,V,M;for(V=0;V<P;++V)(M=w(this,T,S,E,A[V].identifier,A[V]))&&(Yv(S),M("start",S,A[V]))}}function m(S){var E=S.changedTouches,A=E.length,T,P;for(T=0;T<A;++T)(P=i[E[T].identifier])&&(Pu(S),P("drag",S,E[T]))}function b(S){var E=S.changedTouches,A=E.length,T,P;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),T=0;T<A;++T)(P=i[E[T].identifier])&&(Yv(S),P("end",S,E[T]))}function w(S,E,A,T,P,V){var M=o.copy(),H=ao(V||A,E),ee,W,L;if((L=n.call(S,new fb("beforestart",{sourceEvent:A,target:h,identifier:P,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:M}),T))!=null)return ee=L.x-H[0]||0,W=L.y-H[1]||0,function q(Y,re,D){var z=H,O;switch(Y){case"start":i[P]=q,O=s++;break;case"end":delete i[P],--s;case"drag":H=ao(D||re,E),O=s;break}M.call(Y,S,new fb(Y,{sourceEvent:re,subject:L,target:h,identifier:P,active:O,x:H[0]+ee,y:H[1]+W,dx:H[0]-z[0],dy:H[1]-z[1],dispatch:M}),T)}}return h.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Qh(!!S),h):e},h.container=function(S){return arguments.length?(t=typeof S=="function"?S:Qh(S),h):t},h.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Qh(S),h):n},h.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:Qh(!!S),h):r},h.on=function(){var S=o.on.apply(o,arguments);return S===o?h:S},h.clickDistance=function(S){return arguments.length?(f=(S=+S)*S,h):Math.sqrt(f)},h}function X_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function FT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function oh(){}var uf=.7,Ag=1/uf,Ou="\\s*([+-]?\\d+)\\s*",cf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wB=/^#([0-9a-f]{3,8})$/,bB=new RegExp("^rgb\\(".concat(Ou,",").concat(Ou,",").concat(Ou,"\\)$")),xB=new RegExp("^rgb\\(".concat(Vo,",").concat(Vo,",").concat(Vo,"\\)$")),_B=new RegExp("^rgba\\(".concat(Ou,",").concat(Ou,",").concat(Ou,",").concat(cf,"\\)$")),SB=new RegExp("^rgba\\(".concat(Vo,",").concat(Vo,",").concat(Vo,",").concat(cf,"\\)$")),EB=new RegExp("^hsl\\(".concat(cf,",").concat(Vo,",").concat(Vo,"\\)$")),kB=new RegExp("^hsla\\(".concat(cf,",").concat(Vo,",").concat(Vo,",").concat(cf,"\\)$")),GE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X_(oh,df,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YE,formatHex:YE,formatHex8:CB,formatHsl:jB,formatRgb:XE,toString:XE});function YE(){return this.rgb().formatHex()}function CB(){return this.rgb().formatHex8()}function jB(){return zT(this).formatHsl()}function XE(){return this.rgb().formatRgb()}function df(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wB.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?JE(t):n===3?new ai(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Zh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Zh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bB.exec(e))?new ai(t[1],t[2],t[3],1):(t=xB.exec(e))?new ai(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_B.exec(e))?Zh(t[1],t[2],t[3],t[4]):(t=SB.exec(e))?Zh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EB.exec(e))?ek(t[1],t[2]/100,t[3]/100,1):(t=kB.exec(e))?ek(t[1],t[2]/100,t[3]/100,t[4]):GE.hasOwnProperty(e)?JE(GE[e]):e==="transparent"?new ai(NaN,NaN,NaN,0):null}function JE(e){return new ai(e>>16&255,e>>8&255,e&255,1)}function Zh(e,t,n,r){return r<=0&&(e=t=n=NaN),new ai(e,t,n,r)}function AB(e){return e instanceof oh||(e=df(e)),e?(e=e.rgb(),new ai(e.r,e.g,e.b,e.opacity)):new ai}function hb(e,t,n,r){return arguments.length===1?AB(e):new ai(e,t,n,r==null?1:r)}function ai(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}X_(ai,hb,FT(oh,{brighter(e){return e=e==null?Ag:Math.pow(Ag,e),new ai(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?uf:Math.pow(uf,e),new ai(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ai(ml(this.r),ml(this.g),ml(this.b),Ng(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QE,formatHex:QE,formatHex8:NB,formatRgb:ZE,toString:ZE}));function QE(){return"#".concat(dl(this.r)).concat(dl(this.g)).concat(dl(this.b))}function NB(){return"#".concat(dl(this.r)).concat(dl(this.g)).concat(dl(this.b)).concat(dl((isNaN(this.opacity)?1:this.opacity)*255))}function ZE(){const e=Ng(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(ml(this.r),", ").concat(ml(this.g),", ").concat(ml(this.b)).concat(e===1?")":", ".concat(e,")"))}function Ng(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ml(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dl(e){return e=ml(e),(e<16?"0":"")+e.toString(16)}function ek(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new uo(e,t,n,r)}function zT(e){if(e instanceof uo)return new uo(e.h,e.s,e.l,e.opacity);if(e instanceof oh||(e=df(e)),!e)return new uo;if(e instanceof uo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new uo(s,a,l,e.opacity)}function RB(e,t,n,r){return arguments.length===1?zT(e):new uo(e,t,n,r==null?1:r)}function uo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}X_(uo,RB,FT(oh,{brighter(e){return e=e==null?Ag:Math.pow(Ag,e),new uo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uf:Math.pow(uf,e),new uo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ai(Xv(e>=240?e-240:e+120,i,r),Xv(e,i,r),Xv(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new uo(tk(this.h),ep(this.s),ep(this.l),Ng(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ng(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(tk(this.h),", ").concat(ep(this.s)*100,"%, ").concat(ep(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function tk(e){return e=(e||0)%360,e<0?e+360:e}function ep(e){return Math.max(0,Math.min(1,e||0))}function Xv(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const HT=e=>()=>e;function TB(e,t){return function(n){return e+n*t}}function IB(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function PB(e){return(e=+e)==1?UT:function(t,n){return n-t?IB(t,n,e):HT(isNaN(t)?n:t)}}function UT(e,t){var n=t-e;return n?TB(e,n):HT(isNaN(e)?t:e)}const nk=function e(t){var n=PB(t);function r(i,o){var s=n((i=hb(i)).r,(o=hb(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=UT(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function oa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var pb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jv=new RegExp(pb.source,"g");function OB(e){return function(){return e}}function $B(e){return function(t){return e(t)+""}}function MB(e,t){var n=pb.lastIndex=Jv.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=pb.exec(e))&&(i=Jv.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:oa(r,i)})),n=Jv.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?$B(l[0].x):OB(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}var rk=180/Math.PI,gb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function WT(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*rk,skewX:Math.atan(l)*rk,scaleX:s,scaleY:a}}var tp;function DB(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gb:WT(t.a,t.b,t.c,t.d,t.e,t.f)}function LB(e){return e==null||(tp||(tp=document.createElementNS("http://www.w3.org/2000/svg","g")),tp.setAttribute("transform",e),!(e=tp.transform.baseVal.consolidate()))?gb:(e=e.matrix,WT(e.a,e.b,e.c,e.d,e.e,e.f))}function VT(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,h,p,v){if(u!==f||c!==h){var y=p.push("translate(",null,t,null,n);v.push({i:y-4,x:oa(u,f)},{i:y-2,x:oa(c,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function s(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:oa(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:oa(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,p,v){if(u!==f||c!==h){var y=p.push(i(p)+"scale(",null,",",null,")");v.push({i:y-4,x:oa(u,f)},{i:y-2,x:oa(c,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,h),s(u.rotate,c.rotate,f,h),a(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(p){for(var v=-1,y=h.length,x;++v<y;)f[(x=h[v]).i]=x.x(p);return f.join("")}}}var BB=VT(DB,"px, ","px)","deg)"),FB=VT(LB,", ",")",")"),zB=1e-12;function ik(e){return((e=Math.exp(e))+1/e)/2}function HB(e){return((e=Math.exp(e))-1/e)/2}function UB(e){return((e=Math.exp(2*e))-1)/(e+1)}const WB=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],h=s[2],p=c-a,v=f-l,y=p*p+v*v,x,m;if(y<zB)m=Math.log(h/u)/t,x=function(T){return[a+T*p,l+T*v,u*Math.exp(t*T*m)]};else{var b=Math.sqrt(y),w=(h*h-u*u+r*y)/(2*u*n*b),S=(h*h-u*u-r*y)/(2*h*n*b),E=Math.log(Math.sqrt(w*w+1)-w),A=Math.log(Math.sqrt(S*S+1)-S);m=(A-E)/t,x=function(T){var P=T*m,V=ik(E),M=u/(n*b)*(V*UB(t*P+E)-HB(E));return[a+M*p,l+M*v,u*V/ik(t*P+E)]}}return x.duration=m*1e3*t/Math.SQRT2,x}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Xu=0,hd=0,Jc=0,qT=1e3,Rg,pd,Tg=0,Cl=0,Xm=0,ff=typeof performance=="object"&&performance.now?performance:Date,KT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function J_(){return Cl||(KT(VB),Cl=ff.now()+Xm)}function VB(){Cl=0}function Ig(){this._call=this._time=this._next=null}Ig.prototype=GT.prototype={constructor:Ig,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?J_():+n)+(t==null?0:+t),!this._next&&pd!==this&&(pd?pd._next=this:Rg=this,pd=this),this._call=e,this._time=n,mb()},stop:function(){this._call&&(this._call=null,this._time=1/0,mb())}};function GT(e,t,n){var r=new Ig;return r.restart(e,t,n),r}function qB(){J_(),++Xu;for(var e=Rg,t;e;)(t=Cl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xu}function ok(){Cl=(Tg=ff.now())+Xm,Xu=hd=0;try{qB()}finally{Xu=0,GB(),Cl=0}}function KB(){var e=ff.now(),t=e-Tg;t>qT&&(Xm-=t,Tg=e)}function GB(){for(var e,t=Rg,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Rg=n);pd=e,mb(r)}function mb(e){if(!Xu){hd&&(hd=clearTimeout(hd));var t=e-Cl;t>24?(e<1/0&&(hd=setTimeout(ok,e-ff.now()-Xm)),Jc&&(Jc=clearInterval(Jc))):(Jc||(Tg=ff.now(),Jc=setInterval(KB,qT)),Xu=1,KT(ok))}}function sk(e,t,n){var r=new Ig;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var YB=Gm("start","end","cancel","interrupt"),XB=[],YT=0,ak=1,yb=2,Hp=3,lk=4,vb=5,Up=6;function Jm(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;JB(e,n,{name:t,index:r,group:i,on:YB,tween:XB,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:YT})}function Q_(e,t){var n=So(e,t);if(n.state>YT)throw new Error("too late; already scheduled");return n}function rs(e,t){var n=So(e,t);if(n.state>Hp)throw new Error("too late; already running");return n}function So(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function JB(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=GT(o,0,n.time);function o(u){n.state=ak,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,f,h,p;if(n.state!==ak)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Hp)return sk(s);p.state===lk?(p.state=Up,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Up,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(sk(function(){n.state===Hp&&(n.state=lk,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=yb,n.on.call("start",e,e.__data__,n.index,n.group),n.state===yb){for(n.state=Hp,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=vb,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===vb&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Up,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Wp(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>yb&&r.state<vb,r.state=Up,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function QB(e){return this.each(function(){Wp(this,e)})}function ZB(e,t){var n,r;return function(){var i=rs(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function e8(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=rs(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function t8(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=So(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?ZB:e8)(n,e,t))}function Z_(e,t,n){var r=e._id;return e.each(function(){var i=rs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return So(i,r).value[t]}}function XT(e,t){var n;return(typeof t=="number"?oa:t instanceof df?nk:(n=df(t))?(t=n,nk):MB)(e,t)}function n8(e){return function(){this.removeAttribute(e)}}function r8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i8(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function o8(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function s8(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function a8(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function l8(e,t){var n=Ym(e),r=n==="transform"?FB:XT;return this.attrTween(e,typeof t=="function"?(n.local?a8:s8)(n,r,Z_(this,"attr."+e,t)):t==null?(n.local?r8:n8)(n):(n.local?o8:i8)(n,r,t))}function u8(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function c8(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function d8(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&c8(e,o)),n}return i._value=t,i}function f8(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&u8(e,o)),n}return i._value=t,i}function h8(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ym(e);return this.tween(n,(r.local?d8:f8)(r,t))}function p8(e,t){return function(){Q_(this,e).delay=+t.apply(this,arguments)}}function g8(e,t){return t=+t,function(){Q_(this,e).delay=t}}function m8(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?p8:g8)(t,e)):So(this.node(),t).delay}function y8(e,t){return function(){rs(this,e).duration=+t.apply(this,arguments)}}function v8(e,t){return t=+t,function(){rs(this,e).duration=t}}function w8(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?y8:v8)(t,e)):So(this.node(),t).duration}function b8(e,t){if(typeof t!="function")throw new Error;return function(){rs(this,e).ease=t}}function x8(e){var t=this._id;return arguments.length?this.each(b8(t,e)):So(this.node(),t).ease}function _8(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rs(this,e).ease=n}}function S8(e){if(typeof e!="function")throw new Error;return this.each(_8(this._id,e))}function E8(e){typeof e!="function"&&(e=jT(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Ms(r,this._parents,this._name,this._id)}function k8(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,f=s[a]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;a<r;++a)s[a]=t[a];return new Ms(s,this._parents,this._name,this._id)}function C8(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function j8(e,t,n){var r,i,o=C8(t)?Q_:rs;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function A8(e,t){var n=this._id;return arguments.length<2?So(this.node(),n).on.on(e):this.each(j8(n,e,t))}function N8(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function R8(){return this.on("end.remove",N8(this._id))}function T8(e){var t=this._name,n=this._id;typeof e!="function"&&(e=G_(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,f,h=0;h<l;++h)(c=a[h])&&(f=e.call(c,c.__data__,h,a))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,Jm(u[h],t,n,h,u,So(c,n)));return new Ms(o,this._parents,t,n)}function I8(e){var t=this._name,n=this._id;typeof e!="function"&&(e=CT(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=e.call(c,c.__data__,f,l),p,v=So(c,n),y=0,x=h.length;y<x;++y)(p=h[y])&&Jm(p,t,n,y,h,v);o.push(h),s.push(c)}return new Ms(o,s,t,n)}var P8=ih.prototype.constructor;function O8(){return new P8(this._groups,this._parents)}function $8(e,t){var n,r,i;return function(){var o=Yu(this,e),s=(this.style.removeProperty(e),Yu(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function JT(e){return function(){this.style.removeProperty(e)}}function M8(e,t,n){var r,i=n+"",o;return function(){var s=Yu(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function D8(e,t,n){var r,i,o;return function(){var s=Yu(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Yu(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function L8(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=rs(this,e),u=l.on,c=l.value[o]==null?a||(a=JT(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function B8(e,t,n){var r=(e+="")=="transform"?BB:XT;return t==null?this.styleTween(e,$8(e,r)).on("end.style."+e,JT(e)):typeof t=="function"?this.styleTween(e,D8(e,r,Z_(this,"style."+e,t))).each(L8(this._id,e)):this.styleTween(e,M8(e,r,t),n).on("end.style."+e,null)}function F8(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function z8(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&F8(e,s,n)),r}return o._value=t,o}function H8(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,z8(e,t,n==null?"":n))}function U8(e){return function(){this.textContent=e}}function W8(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function V8(e){return this.tween("text",typeof e=="function"?W8(Z_(this,"text",e)):U8(e==null?"":e+""))}function q8(e){return function(t){this.textContent=e.call(this,t)}}function K8(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&q8(i)),t}return r._value=e,r}function G8(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,K8(e))}function Y8(){for(var e=this._name,t=this._id,n=QT(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=So(l,t);Jm(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ms(r,this._parents,e,n)}function X8(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=rs(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var J8=0;function Ms(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function QT(){return++J8}var us=ih.prototype;Ms.prototype={constructor:Ms,select:T8,selectAll:I8,selectChild:us.selectChild,selectChildren:us.selectChildren,filter:E8,merge:k8,selection:O8,transition:Y8,call:us.call,nodes:us.nodes,node:us.node,size:us.size,empty:us.empty,each:us.each,on:A8,attr:l8,attrTween:h8,style:B8,styleTween:H8,text:V8,textTween:G8,remove:R8,tween:t8,delay:m8,duration:w8,ease:x8,easeVarying:S8,end:X8,[Symbol.iterator]:us[Symbol.iterator]};function Q8(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Z8={time:null,delay:0,duration:250,ease:Q8};function eF(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}function tF(e){var t,n;e instanceof Ms?(t=e._id,e=e._name):(t=QT(),(n=Z8).time=J_(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Jm(l,e,t,u,s,n||eF(l,t));return new Ms(r,this._parents,e,t)}ih.prototype.interrupt=QB;ih.prototype.transition=tF;const np=e=>()=>e;function nF(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ss(e,t,n){this.k=e,this.x=t,this.y=n}Ss.prototype={constructor:Ss,scale:function(e){return e===1?this:new Ss(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ss(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qm=new Ss(1,0,0);ZT.prototype=Ss.prototype;function ZT(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Qm;return e.__zoom}function Qv(e){e.stopImmediatePropagation()}function Qc(e){e.preventDefault(),e.stopImmediatePropagation()}function rF(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function iF(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function uk(){return this.__zoom||Qm}function oF(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function sF(){return navigator.maxTouchPoints||"ontouchstart"in this}function aF(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function eI(){var e=rF,t=iF,n=aF,r=oF,i=sF,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=WB,u=Gm("start","zoom","end"),c,f,h,p=500,v=150,y=0,x=10;function m(L){L.property("__zoom",uk).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(L,q,Y,re){var D=L.selection?L.selection():L;D.property("__zoom",uk),L!==D?E(L,q,Y,re):D.interrupt().each(function(){A(this,arguments).event(re).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},m.scaleBy=function(L,q,Y,re){m.scaleTo(L,function(){var D=this.__zoom.k,z=typeof q=="function"?q.apply(this,arguments):q;return D*z},Y,re)},m.scaleTo=function(L,q,Y,re){m.transform(L,function(){var D=t.apply(this,arguments),z=this.__zoom,O=Y==null?S(D):typeof Y=="function"?Y.apply(this,arguments):Y,K=z.invert(O),se=typeof q=="function"?q.apply(this,arguments):q;return n(w(b(z,se),O,K),D,s)},Y,re)},m.translateBy=function(L,q,Y,re){m.transform(L,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof Y=="function"?Y.apply(this,arguments):Y),t.apply(this,arguments),s)},null,re)},m.translateTo=function(L,q,Y,re,D){m.transform(L,function(){var z=t.apply(this,arguments),O=this.__zoom,K=re==null?S(z):typeof re=="function"?re.apply(this,arguments):re;return n(Qm.translate(K[0],K[1]).scale(O.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof Y=="function"?-Y.apply(this,arguments):-Y),z,s)},re,D)};function b(L,q){return q=Math.max(o[0],Math.min(o[1],q)),q===L.k?L:new Ss(q,L.x,L.y)}function w(L,q,Y){var re=q[0]-Y[0]*L.k,D=q[1]-Y[1]*L.k;return re===L.x&&D===L.y?L:new Ss(L.k,re,D)}function S(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function E(L,q,Y,re){L.on("start.zoom",function(){A(this,arguments).event(re).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(re).end()}).tween("zoom",function(){var D=this,z=arguments,O=A(D,z).event(re),K=t.apply(D,z),se=Y==null?S(K):typeof Y=="function"?Y.apply(D,z):Y,ce=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),Ce=D.__zoom,Ie=typeof q=="function"?q.apply(D,z):q,Re=l(Ce.invert(se).concat(ce/Ce.k),Ie.invert(se).concat(ce/Ie.k));return function(F){if(F===1)F=Ie;else{var Z=Re(F),ie=ce/Z[2];F=new Ss(ie,se[0]-Z[0]*ie,se[1]-Z[1]*ie)}O.zoom(null,F)}})}function A(L,q,Y){return!Y&&L.__zooming||new T(L,q)}function T(L,q){this.that=L,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,q),this.taps=0}T.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,q){return this.mouse&&L!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var q=bi(this.that).datum();u.call(L,this.that,new nF(L,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),q)}};function P(L,...q){if(!e.apply(this,arguments))return;var Y=A(this,q).event(L),re=this.__zoom,D=Math.max(o[0],Math.min(o[1],re.k*Math.pow(2,r.apply(this,arguments)))),z=ao(L);if(Y.wheel)(Y.mouse[0][0]!==z[0]||Y.mouse[0][1]!==z[1])&&(Y.mouse[1]=re.invert(Y.mouse[0]=z)),clearTimeout(Y.wheel);else{if(re.k===D)return;Y.mouse=[z,re.invert(z)],Wp(this),Y.start()}Qc(L),Y.wheel=setTimeout(O,v),Y.zoom("mouse",n(w(b(re,D),Y.mouse[0],Y.mouse[1]),Y.extent,s));function O(){Y.wheel=null,Y.end()}}function V(L,...q){if(h||!e.apply(this,arguments))return;var Y=L.currentTarget,re=A(this,q,!0).event(L),D=bi(L.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",ce,!0),z=ao(L,Y),O=L.clientX,K=L.clientY;DT(L.view),Qv(L),re.mouse=[z,this.__zoom.invert(z)],Wp(this),re.start();function se(Ce){if(Qc(Ce),!re.moved){var Ie=Ce.clientX-O,Re=Ce.clientY-K;re.moved=Ie*Ie+Re*Re>y}re.event(Ce).zoom("mouse",n(w(re.that.__zoom,re.mouse[0]=ao(Ce,Y),re.mouse[1]),re.extent,s))}function ce(Ce){D.on("mousemove.zoom mouseup.zoom",null),LT(Ce.view,re.moved),Qc(Ce),re.event(Ce).end()}}function M(L,...q){if(e.apply(this,arguments)){var Y=this.__zoom,re=ao(L.changedTouches?L.changedTouches[0]:L,this),D=Y.invert(re),z=Y.k*(L.shiftKey?.5:2),O=n(w(b(Y,z),re,D),t.apply(this,q),s);Qc(L),a>0?bi(this).transition().duration(a).call(E,O,re,L):bi(this).call(m.transform,O,re,L)}}function H(L,...q){if(e.apply(this,arguments)){var Y=L.touches,re=Y.length,D=A(this,q,L.changedTouches.length===re).event(L),z,O,K,se;for(Qv(L),O=0;O<re;++O)K=Y[O],se=ao(K,this),se=[se,this.__zoom.invert(se),K.identifier],D.touch0?!D.touch1&&D.touch0[2]!==se[2]&&(D.touch1=se,D.taps=0):(D.touch0=se,z=!0,D.taps=1+!!c);c&&(c=clearTimeout(c)),z&&(D.taps<2&&(f=se[0],c=setTimeout(function(){c=null},p)),Wp(this),D.start())}}function ee(L,...q){if(this.__zooming){var Y=A(this,q).event(L),re=L.changedTouches,D=re.length,z,O,K,se;for(Qc(L),z=0;z<D;++z)O=re[z],K=ao(O,this),Y.touch0&&Y.touch0[2]===O.identifier?Y.touch0[0]=K:Y.touch1&&Y.touch1[2]===O.identifier&&(Y.touch1[0]=K);if(O=Y.that.__zoom,Y.touch1){var ce=Y.touch0[0],Ce=Y.touch0[1],Ie=Y.touch1[0],Re=Y.touch1[1],F=(F=Ie[0]-ce[0])*F+(F=Ie[1]-ce[1])*F,Z=(Z=Re[0]-Ce[0])*Z+(Z=Re[1]-Ce[1])*Z;O=b(O,Math.sqrt(F/Z)),K=[(ce[0]+Ie[0])/2,(ce[1]+Ie[1])/2],se=[(Ce[0]+Re[0])/2,(Ce[1]+Re[1])/2]}else if(Y.touch0)K=Y.touch0[0],se=Y.touch0[1];else return;Y.zoom("touch",n(w(O,K,se),Y.extent,s))}}function W(L,...q){if(this.__zooming){var Y=A(this,q).event(L),re=L.changedTouches,D=re.length,z,O;for(Qv(L),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),z=0;z<D;++z)O=re[z],Y.touch0&&Y.touch0[2]===O.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===O.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(O=ao(O,this),Math.hypot(f[0]-O[0],f[1]-O[1])<x)){var K=bi(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return m.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:np(+L),m):r},m.filter=function(L){return arguments.length?(e=typeof L=="function"?L:np(!!L),m):e},m.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:np(!!L),m):i},m.extent=function(L){return arguments.length?(t=typeof L=="function"?L:np([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),m):t},m.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],m):[o[0],o[1]]},m.translateExtent=function(L){return arguments.length?(s[0][0]=+L[0][0],s[1][0]=+L[1][0],s[0][1]=+L[0][1],s[1][1]=+L[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(L){return arguments.length?(n=L,m):n},m.duration=function(L){return arguments.length?(a=+L,m):a},m.interpolate=function(L){return arguments.length?(l=L,m):l},m.on=function(){var L=u.on.apply(u,arguments);return L===u?m:L},m.clickDistance=function(L){return arguments.length?(y=(L=+L)*L,m):Math.sqrt(y)},m.tapDistance=function(L){return arguments.length?(x=+L,m):x},m}const bo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>"The old edge with id=".concat(e," does not exist."),error009:e=>'Marker type "'.concat(e,"\" doesn't exist."),error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>"Couldn't create edge for ".concat(e,' handle id: "').concat(e==="source"?n:r,'", edge id: ').concat(t,"."),error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),error012:e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),error013:(e="react")=>"It seems that you haven't loaded the styles. Please import '@xyflow/".concat(e,"/dist/style.css' or base.css to make sure everything is working properly."),error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},hf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tI=["Enter"," ","Escape"];var Ju;(function(e){e.Strict="strict",e.Loose="loose"})(Ju||(Ju={}));var yl;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(yl||(yl={}));var pf;(function(e){e.Partial="partial",e.Full="full"})(pf||(pf={}));const nI={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ua;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ua||(ua={}));var Pg;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Pg||(Pg={}));var ye;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ye||(ye={}));const ck={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function lF(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function dk(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function rI(e){return e===null?null:e?"valid":"invalid"}const iI=e=>"id"in e&&"source"in e&&"target"in e,uF=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),e1=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),sh=(e,t=[0,0])=>{var a;const{width:n,height:r}=Us(e),i=(a=e.origin)!=null?a:t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},cF=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):e1(i)?i:t.nodeLookup.get(i.id));const a=s?Og(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Zm(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ey(n)},ah=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Og(r);n=Zm(n,i)}}),ey(n)},oI=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{var u,c,f,h,p,v;const a={...lh(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const y of e.values()){const{measured:x,selectable:m=!0,hidden:b=!1}=y;if(s&&!m||b)continue;const w=(f=(c=(u=x.width)!=null?u:y.width)!=null?c:y.initialWidth)!=null?f:null,S=(v=(p=(h=x.height)!=null?h:y.height)!=null?p:y.initialHeight)!=null?v:null,E=gf(a,Zu(y)),A=(w!=null?w:0)*(S!=null?S:0),T=o&&E>0;(!y.internals.handleBounds||T||E>=A||y.dragging)&&l.push(y)}return l},dF=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function fF(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function hF({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){var c,f,h;if(e.size===0)return Promise.resolve(!0);const a=fF(e,s),l=ah(a),u=t1(l,t,n,(c=s==null?void 0:s.minZoom)!=null?c:i,(f=s==null?void 0:s.maxZoom)!=null?f:o,(h=s==null?void 0:s.padding)!=null?h:.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function sI({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){var p,v,y;const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},c=(p=s.origin)!=null?p:r;let f=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",bo.error005());else{const x=a.measured.width,m=a.measured.height;x&&m&&(f=[[l,u],[l+x,u+m]])}else a&&ec(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const h=ec(f)?jl(t,f,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",bo.error015())),{position:{x:h.x-l+((v=s.measured.width)!=null?v:0)*c[0],y:h.y-u+((y=s.measured.height)!=null?y:0)*c[1]},positionAbsolute:h}}async function pF({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(h=>h.id)),s=[];for(const h of n){if(h.deletable===!1)continue;const p=o.has(h.id),v=!p&&h.parentId&&s.find(y=>y.id===h.parentId);(p||v)&&s.push(h)}const a=new Set(t.map(h=>h.id)),l=r.filter(h=>h.deletable!==!1),c=dF(s,l);for(const h of l)a.has(h.id)&&!c.find(v=>v.id===h.id)&&c.push(h);if(!i)return{edges:c,nodes:s};const f=await i({nodes:s,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:s}:{edges:[],nodes:[]}:f}const Qu=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),jl=(e={x:0,y:0},t,n)=>{var r,i;return{x:Qu(e.x,t[0][0],t[1][0]-((r=n==null?void 0:n.width)!=null?r:0)),y:Qu(e.y,t[0][1],t[1][1]-((i=n==null?void 0:n.height)!=null?i:0))}};function aI(e,t,n){const{width:r,height:i}=Us(n),{x:o,y:s}=n.internals.positionAbsolute;return jl(e,[[o,s],[o+r,s+i]],t)}const fk=(e,t,n)=>e<t?Qu(Math.abs(e-t),1,t)/t:e>n?-Qu(Math.abs(e-n),1,t)/t:0,lI=(e,t,n=15,r=40)=>{const i=fk(e.x,r,t.width-r)*n,o=fk(e.y,r,t.height-r)*n;return[i,o]},Zm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),wb=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ey=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Zu=(e,t=[0,0])=>{var i,o,s,a,l,u,c,f;const{x:n,y:r}=e1(e)?e.internals.positionAbsolute:sh(e,t);return{x:n,y:r,width:(a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0,height:(f=(c=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?c:e.initialHeight)!=null?f:0}},Og=(e,t=[0,0])=>{var i,o,s,a,l,u,c,f;const{x:n,y:r}=e1(e)?e.internals.positionAbsolute:sh(e,t);return{x:n,y:r,x2:n+((a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0),y2:r+((f=(c=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?c:e.initialHeight)!=null?f:0)}},uI=(e,t)=>ey(Zm(wb(e),wb(t))),gf=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},hk=e=>ho(e.width)&&ho(e.height)&&ho(e.x)&&ho(e.y),ho=e=>!isNaN(e)&&isFinite(e),gF=(e,t)=>{},ty=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),lh=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?ty(a,s):a},$g=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function nu(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}function mF(e,t,n){var r,i,o,s,a,l,u,c;if(typeof e=="string"||typeof e=="number"){const f=nu(e,n),h=nu(e,t);return{top:f,right:h,bottom:f,left:h,x:h*2,y:f*2}}if(typeof e=="object"){const f=nu((i=(r=e.top)!=null?r:e.y)!=null?i:0,n),h=nu((s=(o=e.bottom)!=null?o:e.y)!=null?s:0,n),p=nu((l=(a=e.left)!=null?a:e.x)!=null?l:0,t),v=nu((c=(u=e.right)!=null?u:e.x)!=null?c:0,t);return{top:f,right:v,bottom:h,left:p,x:p+v,y:f+h}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function yF(e,t,n,r,i,o){const{x:s,y:a}=$g(e,[t,n,r]),{x:l,y:u}=$g({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,f=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(f)}}const t1=(e,t,n,r,i,o)=>{const s=mF(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=Qu(u,r,i),f=e.x+e.width/2,h=e.y+e.height/2,p=t/2-f*c,v=n/2-h*c,y=yF(e,p,v,c,t,n),x={left:Math.min(y.left-s.left,0),top:Math.min(y.top-s.top,0),right:Math.min(y.right-s.right,0),bottom:Math.min(y.bottom-s.bottom,0)};return{x:p-x.left+x.right,y:v-x.top+x.bottom,zoom:c}},Mg=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ec(e){return e!==void 0&&e!=="parent"}function Us(e){var t,n,r,i,o,s,a,l;return{width:(i=(r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!=null?i:0,height:(l=(a=(s=(o=e.measured)==null?void 0:o.height)!=null?s:e.height)!=null?a:e.initialHeight)!=null?l:0}}function cI(e){var t,n,r,i,o,s;return((r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!==void 0&&((s=(o=(i=e.measured)==null?void 0:i.height)!=null?o:e.height)!=null?s:e.initialHeight)!==void 0}function dI(e,t={width:0,height:0},n,r,i){var a,l;const o={...e},s=r.get(n);if(s){const u=s.origin||i;o.x+=s.internals.positionAbsolute.x-((a=t.width)!=null?a:0)*u[0],o.y+=s.internals.positionAbsolute.y-((l=t.height)!=null?l:0)*u[1]}return o}function pk(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function vF(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Md(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){var c,f;const{x:o,y:s}=js(e),a=lh({x:o-((c=i==null?void 0:i.left)!=null?c:0),y:s-((f=i==null?void 0:i.top)!=null?f:0)},r),{x:l,y:u}=n?ty(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const n1=e=>({width:e.offsetWidth,height:e.offsetHeight}),fI=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},wF=["INPUT","SELECT","TEXTAREA"];function hI(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:wF.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const pI=e=>"clientX"in e,js=(e,t)=>{var o,s,a,l;const n=pI(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((a=t==null?void 0:t.left)!=null?a:0),y:i-((l=t==null?void 0:t.top)!=null?l:0)}},gk=(e,t,n,r,i)=>{const o=t.querySelectorAll(".".concat(e));return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...n1(s)}})};function gI({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,c=Math.abs(l-e),f=Math.abs(u-t);return[l,u,c,f]}function rp(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function mk({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case ye.Left:return[t-rp(t-r,o),n];case ye.Right:return[t+rp(r-t,o),n];case ye.Top:return[t,n-rp(n-i,o)];case ye.Bottom:return[t,n+rp(i-n,o)]}}function mI({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top,curvature:s=.25}){const[a,l]=mk({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,c]=mk({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[f,h,p,v]=gI({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return["M".concat(e,",").concat(t," C").concat(a,",").concat(l," ").concat(u,",").concat(c," ").concat(r,",").concat(i),f,h,p,v]}function yI({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function bF({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function xF({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=Zm(Og(e),Og(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return gf(s,ey(o))>0}const _F=({source:e,sourceHandle:t,target:n,targetHandle:r})=>"xy-edge__".concat(e).concat(t||"","-").concat(n).concat(r||""),SF=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),vI=(e,t)=>{if(!e.source||!e.target)return t;let n;return iI(e)?n={...e}:n={...e,id:_F(e)},SF(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function wI({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=yI({sourceX:e,sourceY:t,targetX:n,targetY:r});return["M ".concat(e,",").concat(t,"L ").concat(n,",").concat(r),i,o,s,a]}const yk={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},EF=({source:e,sourcePosition:t=ye.Bottom,target:n})=>t===ye.Left||t===ye.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vk=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kF({source:e,sourcePosition:t=ye.Bottom,target:n,targetPosition:r=ye.Top,center:i,offset:o}){var T,P;const s=yk[t],a=yk[r],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=EF({source:l,sourcePosition:t,target:u}),f=c.x!==0?"x":"y",h=c[f];let p=[],v,y;const x={x:0,y:0},m={x:0,y:0},[b,w,S,E]=yI({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){v=(T=i.x)!=null?T:b,y=(P=i.y)!=null?P:w;const V=[{x:v,y:l.y},{x:v,y:u.y}],M=[{x:l.x,y},{x:u.x,y}];s[f]===h?p=f==="x"?V:M:p=f==="x"?M:V}else{const V=[{x:l.x,y:u.y}],M=[{x:u.x,y:l.y}];if(f==="x"?p=s.x===h?M:V:p=s.y===h?V:M,t===r){const q=Math.abs(e[f]-n[f]);if(q<=o){const Y=Math.min(o-1,o-q);s[f]===h?x[f]=(l[f]>e[f]?-1:1)*Y:m[f]=(u[f]>n[f]?-1:1)*Y}}if(t!==r){const q=f==="x"?"y":"x",Y=s[f]===a[q],re=l[q]>u[q],D=l[q]<u[q];(s[f]===1&&(!Y&&re||Y&&D)||s[f]!==1&&(!Y&&D||Y&&re))&&(p=f==="x"?V:M)}const H={x:l.x+x.x,y:l.y+x.y},ee={x:u.x+m.x,y:u.y+m.y},W=Math.max(Math.abs(H.x-p[0].x),Math.abs(ee.x-p[0].x)),L=Math.max(Math.abs(H.y-p[0].y),Math.abs(ee.y-p[0].y));W>=L?(v=(H.x+ee.x)/2,y=p[0].y):(v=p[0].x,y=(H.y+ee.y)/2)}return[[e,{x:l.x+x.x,y:l.y+x.y},...p,{x:u.x+m.x,y:u.y+m.y},n],v,y,S,E]}function CF(e,t,n,r){const i=Math.min(vk(e,t)/2,vk(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return"L".concat(o," ").concat(s);if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return"L ".concat(o+i*u,",").concat(s,"Q ").concat(o,",").concat(s," ").concat(o,",").concat(s+i*c)}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(o,",").concat(s+i*l,"Q ").concat(o,",").concat(s," ").concat(o+i*a,",").concat(s)}function bb({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20}){const[c,f,h,p,v]=kF({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u});return[c.reduce((x,m,b)=>{let w="";return b>0&&b<c.length-1?w=CF(c[b-1],m,c[b+1],s):w="".concat(b===0?"M":"L").concat(m.x," ").concat(m.y),x+=w,x},""),f,h,p,v]}function wk(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function jF(e){var f,h,p,v,y;const{sourceNode:t,targetNode:n}=e;if(!wk(t)||!wk(n))return null;const r=t.internals.handleBounds||bk(t.handles),i=n.internals.handleBounds||bk(n.handles),o=xk((f=r==null?void 0:r.source)!=null?f:[],e.sourceHandle),s=xk(e.connectionMode===Ju.Strict?(h=i==null?void 0:i.target)!=null?h:[]:((p=i==null?void 0:i.target)!=null?p:[]).concat((v=i==null?void 0:i.source)!=null?v:[]),e.targetHandle);if(!o||!s)return(y=e.onError)==null||y.call(e,"008",bo.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||ye.Bottom,l=(s==null?void 0:s.position)||ye.Top,u=mf(t,o,a),c=mf(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function bk(e){var r,i;if(!e)return null;const t=[],n=[];for(const o of e)o.width=(r=o.width)!=null?r:1,o.height=(i=o.height)!=null?i:1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function mf(e,t,n=ye.Left,r=!1){var u,c,f;const i=((u=t==null?void 0:t.x)!=null?u:0)+e.internals.positionAbsolute.x,o=((c=t==null?void 0:t.y)!=null?c:0)+e.internals.positionAbsolute.y,{width:s,height:a}=t!=null?t:Us(e);if(r)return{x:i+s/2,y:o+a/2};switch((f=t==null?void 0:t.position)!=null?f:n){case ye.Top:return{x:i+s/2,y:o};case ye.Right:return{x:i+s,y:o+a/2};case ye.Bottom:return{x:i+s/2,y:o+a};case ye.Left:return{x:i,y:o+a/2}}}function xk(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function xb(e,t){if(!e)return"";if(typeof e=="string")return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map(r=>"".concat(r,"=").concat(e[r])).join("&"))}function AF(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=xb(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const r1={nodeOrigin:[0,0],nodeExtent:hf,elevateNodesOnSelect:!0,defaults:{}},NF={...r1,checkEquality:!0};function i1(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function RF(e,t,n){const r=i1(r1,n);for(const i of e.values())if(i.parentId)o1(i,e,t,r);else{const o=sh(i,r.nodeOrigin),s=ec(i.extent)?i.extent:r.nodeExtent,a=jl(o,s,Us(i));i.internals.positionAbsolute=a}}function _b(e,t,n,r){var l,u;const i=i1(NF,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let f=s.get(c.id);if(i.checkEquality&&c===(f==null?void 0:f.internals.userNode))t.set(c.id,f);else{const h=sh(c,i.nodeOrigin),p=ec(c.extent)?c.extent:i.nodeExtent,v=jl(h,p,Us(c));f={...i.defaults,...c,measured:{width:(l=c.measured)==null?void 0:l.width,height:(u=c.measured)==null?void 0:u.height},internals:{positionAbsolute:v,handleBounds:c.measured?f==null?void 0:f.internals.handleBounds:void 0,z:bI(c,a),userNode:c}},t.set(c.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(o=!1),c.parentId&&o1(f,t,n,r)}return o}function TF(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function o1(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=i1(r1,r),a=e.parentId,l=t.get(a);if(!l){console.warn("Parent node ".concat(a," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));return}TF(e,n);const u=i?1e3:0,{x:c,y:f,z:h}=IF(e,l,o,s,u),{positionAbsolute:p}=e.internals,v=c!==p.x||f!==p.y;(v||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:c,y:f}:p,z:h}})}function bI(e,t){return(ho(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function IF(e,t,n,r,i){var p;const{x:o,y:s}=t.internals.positionAbsolute,a=Us(e),l=sh(e,n),u=ec(e.extent)?jl(l,e.extent,a):l;let c=jl({x:o+u.x,y:s+u.y},r,a);e.extent==="parent"&&(c=aI(c,a,t));const f=bI(e,i),h=(p=t.internals.z)!=null?p:0;return{x:c.x,y:c.y,z:h>f?h:f}}function s1(e,t,n,r=[0,0]){var s,a;const i=[],o=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const c=(a=(s=o.get(l.parentId))==null?void 0:s.expandedRect)!=null?a:Zu(u),f=uI(c,l.rect);o.set(l.parentId,{expandedRect:f,parent:u})}return o.size>0&&o.forEach(({expandedRect:l,parent:u},c)=>{var S,E;const f=u.internals.positionAbsolute,h=Us(u),p=(S=u.origin)!=null?S:r,v=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,y=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0,x=Math.max(h.width,Math.round(l.width)),m=Math.max(h.height,Math.round(l.height)),b=(x-h.width)*p[0],w=(m-h.height)*p[1];(v>0||y>0||b||w)&&(i.push({id:c,type:"position",position:{x:u.position.x-v+b,y:u.position.y-y+w}}),(E=n.get(c))==null||E.forEach(A=>{e.some(T=>T.id===A.id)||i.push({id:A.id,type:"position",position:{x:A.position.x+v,y:A.position.y+y}})})),(h.width<l.width||h.height<l.height||v||y)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:x+(v?p[0]*v-b:0),height:m+(y?p[1]*y-w:0)}})}),i}function PF(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const h of e.values()){const p=t.get(h.id);if(!p)continue;if(p.hidden){t.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),a=!0;continue}const v=n1(h.nodeElement),y=p.measured.width!==v.width||p.measured.height!==v.height;if(!!(v.width&&v.height&&(y||!p.internals.handleBounds||h.force))){const m=h.nodeElement.getBoundingClientRect(),b=ec(p.extent)?p.extent:o;let{positionAbsolute:w}=p.internals;p.parentId&&p.extent==="parent"?w=aI(w,v,t.get(p.parentId)):b&&(w=jl(w,b,v));const S={...p,measured:v,internals:{...p.internals,positionAbsolute:w,handleBounds:{source:gk("source",h.nodeElement,m,c,p.id),target:gk("target",h.nodeElement,m,c,p.id)}}};t.set(p.id,S),p.parentId&&o1(S,t,n,{nodeOrigin:i}),a=!0,y&&(l.push({id:p.id,type:"dimensions",dimensions:v}),p.expandParent&&p.parentId&&f.push({id:p.id,parentId:p.parentId,rect:Zu(S,i)}))}}if(f.length>0){const h=s1(f,t,n,i);l.push(...h)}return{changes:l,updatedInternals:a}}async function OF({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function _k(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s="".concat(i,"-").concat(e);const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s="".concat(i,"-").concat(e,"-").concat(o);const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function xI(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},u="".concat(i,"-").concat(s,"--").concat(o,"-").concat(a),c="".concat(o,"-").concat(a,"--").concat(i,"-").concat(s);_k("source",l,c,e,i,s),_k("target",l,u,e,o,a),t.set(r.id,r)}}function $F(e,t){if(e===null||t===null)return!1;const n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].id!==r[i].id||n[i].type!==r[i].type||!Object.is(n[i].data,r[i].data))return!1;return!0}function _I(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:_I(n,t):!1}function Sk(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function MF(e,t,n,r){var o,s;const i=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!_I(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(a);u&&i.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:(o=u.measured.width)!=null?o:0,height:(s=u.measured.height)!=null?s:0}})}return i}function Zv({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[u,c]of t){const f=(s=n.get(u))==null?void 0:s.internals.userNode;f&&i.push({...f,position:c.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function DF({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},c=null,f=!1,h=null,p=!1;function v({noDragClassName:x,handleSelector:m,domNode:b,isSelectable:w,nodeId:S,nodeClickDistance:E=0}){h=bi(b);function A({x:M,y:H},ee){const{nodeLookup:W,nodeExtent:L,snapGrid:q,snapToGrid:Y,nodeOrigin:re,onNodeDrag:D,onSelectionDrag:z,onError:O,updateNodePositions:K}=t();o={x:M,y:H};let se=!1,ce={x:0,y:0,x2:0,y2:0};if(a.size>1&&L){const Ce=ah(a);ce=wb(Ce)}for(const[Ce,Ie]of a){if(!W.has(Ce))continue;let Re={x:M-Ie.distance.x,y:H-Ie.distance.y};Y&&(Re=ty(Re,q));let F=[[L[0][0],L[0][1]],[L[1][0],L[1][1]]];if(a.size>1&&L&&!Ie.extent){const{positionAbsolute:De}=Ie.internals,Ye=De.x-ce.x+L[0][0],ze=De.x+Ie.measured.width-ce.x2+L[1][0],ne=De.y-ce.y+L[0][1],fe=De.y+Ie.measured.height-ce.y2+L[1][1];F=[[Ye,ne],[ze,fe]]}const{position:Z,positionAbsolute:ie}=sI({nodeId:Ce,nextPosition:Re,nodeLookup:W,nodeExtent:F,nodeOrigin:re,onError:O});se=se||Ie.position.x!==Z.x||Ie.position.y!==Z.y,Ie.position=Z,Ie.internals.positionAbsolute=ie}if(se&&(K(a,!0),ee&&(r||D||!S&&z))){const[Ce,Ie]=Zv({nodeId:S,dragItems:a,nodeLookup:W});r==null||r(ee,a,Ce,Ie),D==null||D(ee,Ce,Ie),S||z==null||z(ee,Ie)}}async function T(){var Y,re;if(!c)return;const{transform:M,panBy:H,autoPanSpeed:ee,autoPanOnNodeDrag:W}=t();if(!W){l=!1,cancelAnimationFrame(s);return}const[L,q]=lI(u,c,ee);(L!==0||q!==0)&&(o.x=((Y=o.x)!=null?Y:0)-L/M[2],o.y=((re=o.y)!=null?re:0)-q/M[2],await H({x:L,y:q})&&A(o,null)),s=requestAnimationFrame(T)}function P(M){var se;const{nodeLookup:H,multiSelectionActive:ee,nodesDraggable:W,transform:L,snapGrid:q,snapToGrid:Y,selectNodesOnDrag:re,onNodeDragStart:D,onSelectionDragStart:z,unselectNodesAndEdges:O}=t();f=!0,(!re||!w)&&!ee&&S&&((se=H.get(S))!=null&&se.selected||O()),w&&re&&S&&(e==null||e(S));const K=Md(M.sourceEvent,{transform:L,snapGrid:q,snapToGrid:Y,containerBounds:c});if(o=K,a=MF(H,W,K,S),a.size>0&&(n||D||!S&&z)){const[ce,Ce]=Zv({nodeId:S,dragItems:a,nodeLookup:H});n==null||n(M.sourceEvent,a,ce,Ce),D==null||D(M.sourceEvent,ce,Ce),S||z==null||z(M.sourceEvent,Ce)}}const V=BT().clickDistance(E).on("start",M=>{const{domNode:H,nodeDragThreshold:ee,transform:W,snapGrid:L,snapToGrid:q}=t();c=(H==null?void 0:H.getBoundingClientRect())||null,p=!1,ee===0&&P(M),o=Md(M.sourceEvent,{transform:W,snapGrid:L,snapToGrid:q,containerBounds:c}),u=js(M.sourceEvent,c)}).on("drag",M=>{var D,z;const{autoPanOnNodeDrag:H,transform:ee,snapGrid:W,snapToGrid:L,nodeDragThreshold:q,nodeLookup:Y}=t(),re=Md(M.sourceEvent,{transform:ee,snapGrid:W,snapToGrid:L,containerBounds:c});if((M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||S&&!Y.has(S))&&(p=!0),!p){if(!l&&H&&f&&(l=!0,T()),!f){const O=re.xSnapped-((D=o.x)!=null?D:0),K=re.ySnapped-((z=o.y)!=null?z:0);Math.sqrt(O*O+K*K)>q&&P(M)}(o.x!==re.xSnapped||o.y!==re.ySnapped)&&a&&f&&(u=js(M.sourceEvent,c),A(re,M.sourceEvent))}}).on("end",M=>{if(!(!f||p)&&(l=!1,f=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:H,updateNodePositions:ee,onNodeDragStop:W,onSelectionDragStop:L}=t();if(ee(a,!1),i||W||!S&&L){const[q,Y]=Zv({nodeId:S,dragItems:a,nodeLookup:H,dragging:!1});i==null||i(M.sourceEvent,a,q,Y),W==null||W(M.sourceEvent,q,Y),S||L==null||L(M.sourceEvent,Y)}}}).filter(M=>{const H=M.target;return!M.button&&(!x||!Sk(H,".".concat(x),b))&&(!m||Sk(H,m,b))});h.call(V)}function y(){h==null||h.on(".drag",null)}return{update:v,destroy:y}}function LF(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())gf(i,Zu(o))>0&&r.push(o);return r}const BF=250;function FF(e,t,n,r){var a,l,u,c,f;let i=[],o=1/0;const s=LF(e,n,t+BF);for(const h of s){const p=[...(l=(a=h.internals.handleBounds)==null?void 0:a.source)!=null?l:[],...(c=(u=h.internals.handleBounds)==null?void 0:u.target)!=null?c:[]];for(const v of p){if(r.nodeId===v.nodeId&&r.type===v.type&&r.id===v.id)continue;const{x:y,y:x}=mf(h,v,v.position,!0),m=Math.sqrt(Math.pow(y-e.x,2)+Math.pow(x-e.y,2));m>t||(m<o?(i=[{...v,x:y,y:x}],o=m):m===o&&i.push({...v,x:y,y:x}))}}if(!i.length)return null;if(i.length>1){const h=r.type==="source"?"target":"source";return(f=i.find(p=>p.type===h))!=null?f:i[0]}return i[0]}function SI(e,t,n,r,i,o=!1){var u,c,f,h,p,v;const s=r.get(e);if(!s)return null;const a=i==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...(f=(c=s.internals.handleBounds)==null?void 0:c.source)!=null?f:[],...(p=(h=s.internals.handleBounds)==null?void 0:h.target)!=null?p:[]],l=(v=n?a==null?void 0:a.find(y=>y.id===n):a==null?void 0:a[0])!=null?v:null;return l&&o?{...l,...mf(s,l,l.position,!0)}:l}function EI(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function zF(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const kI=()=>!0;function HF(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:f,panBy:h,cancelConnection:p,onConnectStart:v,onConnect:y,onConnectEnd:x,isValidConnection:m=kI,onReconnectEnd:b,updateConnection:w,getTransform:S,getFromHandle:E,autoPanSpeed:A}){const T=fI(e.target);let P=0,V;const{x:M,y:H}=js(e),ee=T==null?void 0:T.elementFromPoint(M,H),W=EI(o,ee),L=a==null?void 0:a.getBoundingClientRect();if(!L||!W)return;const q=SI(i,W,r,l,t);if(!q)return;let Y=js(e,L),re=!1,D=null,z=!1,O=null;function K(){if(!c||!L)return;const[ie,De]=lI(Y,L,A);h({x:ie,y:De}),P=requestAnimationFrame(K)}const se={...q,nodeId:i,type:W,position:q.position},ce=l.get(i),Ie={inProgress:!0,isValid:null,from:mf(ce,se,ye.Left,!0),fromHandle:se,fromPosition:se.position,fromNode:ce,to:Y,toHandle:null,toPosition:ck[se.position],toNode:null};w(Ie);let Re=Ie;v==null||v(e,{nodeId:i,handleId:r,handleType:W});function F(ie){if(!E()||!se){Z(ie);return}const De=S();Y=js(ie,L),V=FF(lh(Y,De,!1,[1,1]),n,l,se),re||(K(),re=!0);const Ye=CI(ie,{handle:V,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:m,doc:T,lib:u,flowId:f,nodeLookup:l});O=Ye.handleDomNode,D=Ye.connection,z=zF(!!V,Ye.isValid);const ze={...Re,isValid:z,to:V&&z?$g({x:V.x,y:V.y},De):Y,toHandle:Ye.toHandle,toPosition:z&&Ye.toHandle?Ye.toHandle.position:ck[se.position],toNode:Ye.toHandle?l.get(Ye.toHandle.nodeId):null};z&&V&&Re.toHandle&&ze.toHandle&&Re.toHandle.type===ze.toHandle.type&&Re.toHandle.nodeId===ze.toHandle.nodeId&&Re.toHandle.id===ze.toHandle.id&&Re.to.x===ze.to.x&&Re.to.y===ze.to.y||(w(ze),Re=ze)}function Z(ie){(V||O)&&D&&z&&(y==null||y(D));const{inProgress:De,...Ye}=Re,ze={...Ye,toPosition:Re.toHandle?Re.toPosition:null};x==null||x(ie,ze),o&&(b==null||b(ie,ze)),p(),cancelAnimationFrame(P),re=!1,z=!1,D=null,O=null,T.removeEventListener("mousemove",F),T.removeEventListener("mouseup",Z),T.removeEventListener("touchmove",F),T.removeEventListener("touchend",Z)}T.addEventListener("mousemove",F),T.addEventListener("mouseup",Z),T.addEventListener("touchmove",F),T.addEventListener("touchend",Z)}function CI(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=kI,nodeLookup:c}){const f=o==="target",h=t?s.querySelector(".".concat(a,'-flow__handle[data-id="').concat(l,"-").concat(t==null?void 0:t.nodeId,"-").concat(t==null?void 0:t.id,"-").concat(t==null?void 0:t.type,'"]')):null,{x:p,y:v}=js(e),y=s.elementFromPoint(p,v),x=y!=null&&y.classList.contains("".concat(a,"-flow__handle"))?y:h,m={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){const b=EI(void 0,x),w=x.getAttribute("data-nodeid"),S=x.getAttribute("data-handleid"),E=x.classList.contains("connectable"),A=x.classList.contains("connectableend");if(!w||!b)return m;const T={source:f?w:r,sourceHandle:f?S:i,target:f?r:w,targetHandle:f?i:S};m.connection=T;const V=E&&A&&(n===Ju.Strict?f&&b==="source"||!f&&b==="target":w!==r||S!==i);m.isValid=V&&u(T),m.toHandle=SI(w,b,S,c,n,!1)}return m}const Sb={onPointerDown:HF,isValid:CI};function UF({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=bi(e);function o({translateExtent:a,width:l,height:u,zoomStep:c=10,pannable:f=!0,zoomable:h=!0,inversePan:p=!1}){const v=w=>{const S=n();if(w.sourceEvent.type!=="wheel"||!t)return;const E=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*c,A=S[2]*Math.pow(2,E);t.scaleTo(A)};let y=[0,0];const x=w=>{var S,E;(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(y=[(S=w.sourceEvent.clientX)!=null?S:w.sourceEvent.touches[0].clientX,(E=w.sourceEvent.clientY)!=null?E:w.sourceEvent.touches[0].clientY])},m=w=>{var M,H;const S=n();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!t)return;const E=[(M=w.sourceEvent.clientX)!=null?M:w.sourceEvent.touches[0].clientX,(H=w.sourceEvent.clientY)!=null?H:w.sourceEvent.touches[0].clientY],A=[E[0]-y[0],E[1]-y[1]];y=E;const T=r()*Math.max(S[2],Math.log(S[2]))*(p?-1:1),P={x:S[0]-A[0]*T,y:S[1]-A[1]*T},V=[[0,0],[l,u]];t.setViewportConstrained({x:P.x,y:P.y,zoom:S[2]},V,a)},b=eI().on("start",x).on("zoom",f?m:null).on("zoom.wheel",h?v:null);i.call(b,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:ao}}const WF=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ny=e=>({x:e.x,y:e.y,zoom:e.k}),e0=({x:e,y:t,zoom:n})=>Qm.translate(e,t).scale(n),xu=(e,t)=>e.target.closest(".".concat(t)),jI=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),t0=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},AI=e=>{const t=e.ctrlKey&&Mg()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function VF({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(xu(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(c.ctrlKey&&s){const x=ao(c),m=AI(c),b=f*Math.pow(2,m);r.scaleTo(n,b,x,c);return}const h=c.deltaMode===1?20:1;let p=i===yl.Vertical?0:c.deltaX*h,v=i===yl.Horizontal?0:c.deltaY*h;!Mg()&&c.shiftKey&&i!==yl.Vertical&&(p=c.deltaY*h,v=0),r.translateBy(n,-(p/f)*o,-(v/f)*o,{internal:!0});const y=ny(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(c,y)),e.isPanScrolling&&(l==null||l(c,y),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,y),e.isPanScrolling=!1},150))}}function qF({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=xu(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function KF({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=ny(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function GF({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a,l;e.usedRightMouseButton=!!(n&&jI(t,(s=e.mouseButton)!=null?s:0)),(a=o.sourceEvent)!=null&&a.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((l=o.sourceEvent)!=null&&l.internal)&&(i==null||i(o.sourceEvent,ny(o.transform)))}}function YF({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a,l;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&jI(t,(l=e.mouseButton)!=null?l:0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&WF(e.prevViewport,s.transform))){const u=ny(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function XF({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u}){return c=>{var v;const f=e||t,h=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(xu(c,"".concat(u,"-flow__node"))||xu(c,"".concat(u,"-flow__edge"))))return!0;if(!r&&!f&&!i&&!o&&!n||s||xu(c,a)&&c.type==="wheel"||xu(c,l)&&(c.type!=="wheel"||i&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((v=c.touches)==null?void 0:v.length)>1)return c.preventDefault(),!1;if(!f&&!i&&!h&&c.type==="wheel"||!r&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(r)&&!r.includes(c.button)&&c.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&p}}function JF({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=eI().clickDistance(!ho(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),p=bi(e).call(h);w({x:o.x,y:o.y,zoom:Qu(o.zoom,t,n)},[[0,0],[f.width,f.height]],i);const v=p.on("wheel.zoom"),y=p.on("dblclick.zoom");h.wheelDelta(AI);function x(ee,W){return p?new Promise(L=>{h==null||h.transform(t0(p,W==null?void 0:W.duration,()=>L(!0)),ee)}):Promise.resolve(!1)}function m({noWheelClassName:ee,noPanClassName:W,onPaneContextMenu:L,userSelectionActive:q,panOnScroll:Y,panOnDrag:re,panOnScrollMode:D,panOnScrollSpeed:z,preventScrolling:O,zoomOnPinch:K,zoomOnScroll:se,zoomOnDoubleClick:ce,zoomActivationKeyPressed:Ce,lib:Ie,onTransformChange:Re}){q&&!c.isZoomingOrPanning&&b();const Z=Y&&!Ce&&!q?VF({zoomPanValues:c,noWheelClassName:ee,d3Selection:p,d3Zoom:h,panOnScrollMode:D,panOnScrollSpeed:z,zoomOnPinch:K,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):qF({noWheelClassName:ee,preventScrolling:O,d3ZoomHandler:v});if(p.on("wheel.zoom",Z,{passive:!1}),!q){const De=KF({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:a});h.on("start",De);const Ye=GF({zoomPanValues:c,panOnDrag:re,onPaneContextMenu:!!L,onPanZoom:s,onTransformChange:Re});h.on("zoom",Ye);const ze=YF({zoomPanValues:c,panOnDrag:re,panOnScroll:Y,onPaneContextMenu:L,onPanZoomEnd:l,onDraggingChange:u});h.on("end",ze)}const ie=XF({zoomActivationKeyPressed:Ce,panOnDrag:re,zoomOnScroll:se,panOnScroll:Y,zoomOnDoubleClick:ce,zoomOnPinch:K,userSelectionActive:q,noPanClassName:W,noWheelClassName:ee,lib:Ie});h.filter(ie),ce?p.on("dblclick.zoom",y):p.on("dblclick.zoom",null)}function b(){h.on("zoom",null)}async function w(ee,W,L){const q=e0(ee),Y=h==null?void 0:h.constrain()(q,W,L);return Y&&await x(Y),new Promise(re=>re(Y))}async function S(ee,W){const L=e0(ee);return await x(L,W),new Promise(q=>q(L))}function E(ee){if(p){const W=e0(ee),L=p.property("__zoom");(L.k!==ee.zoom||L.x!==ee.x||L.y!==ee.y)&&(h==null||h.transform(p,W,null,{sync:!0}))}}function A(){const ee=p?ZT(p.node()):{x:0,y:0,k:1};return{x:ee.x,y:ee.y,zoom:ee.k}}function T(ee,W){return p?new Promise(L=>{h==null||h.scaleTo(t0(p,W==null?void 0:W.duration,()=>L(!0)),ee)}):Promise.resolve(!1)}function P(ee,W){return p?new Promise(L=>{h==null||h.scaleBy(t0(p,W==null?void 0:W.duration,()=>L(!0)),ee)}):Promise.resolve(!1)}function V(ee){h==null||h.scaleExtent(ee)}function M(ee){h==null||h.translateExtent(ee)}function H(ee){const W=!ho(ee)||ee<0?0:ee;h==null||h.clickDistance(W)}return{update:m,destroy:b,setViewport:S,setViewportConstrained:w,getViewport:A,scaleTo:T,scaleBy:P,setScaleExtent:V,setTranslateExtent:M,syncViewport:E,setClickDistance:H}}var Dd;(function(e){e.Line="line",e.Handle="handle"})(Dd||(Dd={}));function QF({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function ZF(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Zs(e,t){return Math.max(0,t-e)}function ea(e,t){return Math.max(0,e-t)}function ip(e,t,n){return Math.max(0,t-e,e-n)}function Ek(e,t){return e?!t:t}function e7(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:u}=t;const{isHorizontal:c,isVertical:f}=t,h=c&&f,{xSnapped:p,ySnapped:v}=n,{minWidth:y,maxWidth:x,minHeight:m,maxHeight:b}=r,{x:w,y:S,width:E,height:A,aspectRatio:T}=e;let P=Math.floor(c?p-e.pointerX:0),V=Math.floor(f?v-e.pointerY:0);const M=E+(l?-P:P),H=A+(u?-V:V),ee=-o[0]*E,W=-o[1]*A;let L=ip(M,y,x),q=ip(H,m,b);if(s){let D=0,z=0;l&&P<0?D=Zs(w+P+ee,s[0][0]):!l&&P>0&&(D=ea(w+M+ee,s[1][0])),u&&V<0?z=Zs(S+V+W,s[0][1]):!u&&V>0&&(z=ea(S+H+W,s[1][1])),L=Math.max(L,D),q=Math.max(q,z)}if(a){let D=0,z=0;l&&P>0?D=ea(w+P,a[0][0]):!l&&P<0&&(D=Zs(w+M,a[1][0])),u&&V>0?z=ea(S+V,a[0][1]):!u&&V<0&&(z=Zs(S+H,a[1][1])),L=Math.max(L,D),q=Math.max(q,z)}if(i){if(c){const D=ip(M/T,m,b)*T;if(L=Math.max(L,D),s){let z=0;!l&&!u||l&&!u&&h?z=ea(S+W+M/T,s[1][1])*T:z=Zs(S+W+(l?P:-P)/T,s[0][1])*T,L=Math.max(L,z)}if(a){let z=0;!l&&!u||l&&!u&&h?z=Zs(S+M/T,a[1][1])*T:z=ea(S+(l?P:-P)/T,a[0][1])*T,L=Math.max(L,z)}}if(f){const D=ip(H*T,y,x)/T;if(q=Math.max(q,D),s){let z=0;!l&&!u||u&&!l&&h?z=ea(w+H*T+ee,s[1][0])/T:z=Zs(w+(u?V:-V)*T+ee,s[0][0])/T,q=Math.max(q,z)}if(a){let z=0;!l&&!u||u&&!l&&h?z=Zs(w+H*T,a[1][0])/T:z=ea(w+(u?V:-V)*T,a[0][0])/T,q=Math.max(q,z)}}}V=V+(V<0?q:-q),P=P+(P<0?L:-L),i&&(h?M>H*T?V=(Ek(l,u)?-P:P)/T:P=(Ek(l,u)?-V:V)*T:c?(V=P/T,u=l):(P=V*T,l=u));const Y=l?w+P:w,re=u?S+V:S;return{width:E+(l?-P:P),height:A+(u?-V:V),x:o[0]*P*(l?-1:1)+Y,y:o[1]*V*(u?-1:1)+re}}const NI={width:0,height:0,x:0,y:0},t7={...NI,pointerX:0,pointerY:0,aspectRatio:1};function n7(e){return[[0,0],[e.measured.width,e.measured.height]]}function r7(e,t,n){var u,c;const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=(u=e.measured.width)!=null?u:0,s=(c=e.measured.height)!=null?c:0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function i7({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=bi(e);function s({controlPosition:l,boundaries:u,keepAspectRatio:c,resizeDirection:f,onResizeStart:h,onResize:p,onResizeEnd:v,shouldResize:y}){let x={...NI},m={...t7};const b=ZF(l);let w,S=null,E=[],A,T,P;const V=BT().on("start",M=>{var z,O,K,se,ce,Ce;const{nodeLookup:H,transform:ee,snapGrid:W,snapToGrid:L,nodeOrigin:q,paneDomNode:Y}=n();if(w=H.get(t),!w)return;S=(z=Y==null?void 0:Y.getBoundingClientRect())!=null?z:null;const{xSnapped:re,ySnapped:D}=Md(M.sourceEvent,{transform:ee,snapGrid:W,snapToGrid:L,containerBounds:S});x={width:(O=w.measured.width)!=null?O:0,height:(K=w.measured.height)!=null?K:0,x:(se=w.position.x)!=null?se:0,y:(ce=w.position.y)!=null?ce:0},m={...x,pointerX:re,pointerY:D,aspectRatio:x.width/x.height},A=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(A=H.get(w.parentId),T=A&&w.extent==="parent"?n7(A):void 0),E=[],P=void 0;for(const[Ie,Re]of H)if(Re.parentId===t&&(E.push({id:Ie,position:{...Re.position},extent:Re.extent}),Re.extent==="parent"||Re.expandParent)){const F=r7(Re,w,(Ce=Re.origin)!=null?Ce:q);P?P=[[Math.min(F[0][0],P[0][0]),Math.min(F[0][1],P[0][1])],[Math.max(F[1][0],P[1][0]),Math.max(F[1][1],P[1][1])]]:P=F}h==null||h(M,{...x})}).on("drag",M=>{var fe,Se,Ue;const{transform:H,snapGrid:ee,snapToGrid:W,nodeOrigin:L}=n(),q=Md(M.sourceEvent,{transform:H,snapGrid:ee,snapToGrid:W,containerBounds:S}),Y=[];if(!w)return;const{x:re,y:D,width:z,height:O}=x,K={},se=(fe=w.origin)!=null?fe:L,{width:ce,height:Ce,x:Ie,y:Re}=e7(m,b,q,u,c,se,T,P),F=ce!==z,Z=Ce!==O,ie=Ie!==re&&F,De=Re!==D&&Z;if(!ie&&!De&&!F&&!Z)return;if((ie||De||se[0]===1||se[1]===1)&&(K.x=ie?Ie:x.x,K.y=De?Re:x.y,x.x=K.x,x.y=K.y,E.length>0)){const We=Ie-re,Ke=Re-D;for(const he of E)he.position={x:he.position.x-We+se[0]*(ce-z),y:he.position.y-Ke+se[1]*(Ce-O)},Y.push(he)}if((F||Z)&&(K.width=F&&(!f||f==="horizontal")?ce:x.width,K.height=Z&&(!f||f==="vertical")?Ce:x.height,x.width=K.width,x.height=K.height),A&&w.expandParent){const We=se[0]*((Se=K.width)!=null?Se:0);K.x&&K.x<We&&(x.x=We,m.x=m.x-(K.x-We));const Ke=se[1]*((Ue=K.height)!=null?Ue:0);K.y&&K.y<Ke&&(x.y=Ke,m.y=m.y-(K.y-Ke))}const Ye=QF({width:x.width,prevWidth:z,height:x.height,prevHeight:O,affectsX:b.affectsX,affectsY:b.affectsY}),ze={...x,direction:Ye};(y==null?void 0:y(M,ze))!==!1&&(p==null||p(M,ze),r(K,Y))}).on("end",M=>{v==null||v(M,{...x}),i==null||i({...x})});o.call(V)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var RI={exports:{}},TI={},II={exports:{}},PI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=j;function o7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var s7=typeof Object.is=="function"?Object.is:o7,a7=tc.useState,l7=tc.useEffect,u7=tc.useLayoutEffect,c7=tc.useDebugValue;function d7(e,t){var n=t(),r=a7({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return u7(function(){i.value=n,i.getSnapshot=t,n0(i)&&o({inst:i})},[e,n,t]),l7(function(){return n0(i)&&o({inst:i}),e(function(){n0(i)&&o({inst:i})})},[e]),c7(n),n}function n0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s7(e,n)}catch(r){return!0}}function f7(e,t){return t()}var h7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f7:d7;PI.useSyncExternalStore=tc.useSyncExternalStore!==void 0?tc.useSyncExternalStore:h7;II.exports=PI;var p7=II.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry=j,g7=p7;function m7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var y7=typeof Object.is=="function"?Object.is:m7,v7=g7.useSyncExternalStore,w7=ry.useRef,b7=ry.useEffect,x7=ry.useMemo,_7=ry.useDebugValue;TI.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=w7(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=x7(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),i!==void 0&&s.hasValue){var v=s.value;if(i(v,p))return f=v}return f=p}if(v=f,y7(c,p))return v;var y=r(p);return i!==void 0&&i(v,y)?(c=p,v):(c=p,f=y)}var u=!1,c,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var a=v7(e,o[0],o[1]);return b7(function(){s.hasValue=!0,s.value=a},[a]),_7(a),a};RI.exports=TI;var S7=RI.exports;const E7=zs(S7),k7={LEGACY:!1},kk=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=(f!=null?f:typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,p))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(k7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},C7=e=>e?kk(e):kk,{useDebugValue:j7}=It,{useSyncExternalStoreWithSelector:A7}=E7,N7=e=>e;function OI(e,t=N7,n){const r=A7(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return j7(r),r}const Ck=(e,t)=>{const n=C7(e),r=(i,o=t)=>OI(n,i,o);return Object.assign(r,n),r},R7=(e,t)=>e?Ck(e,t):Ck;function Ln(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const iy=j.createContext(null),T7=iy.Provider,$I=bo.error001();function Qt(e,t){const n=j.useContext(iy);if(n===null)throw new Error($I);return OI(n,e,t)}function _n(){const e=j.useContext(iy);if(e===null)throw new Error($I);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const jk={display:"none"},I7={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},MI="react-flow__node-desc",DI="react-flow__edge-desc",P7="react-flow__aria-live",O7=e=>e.ariaLiveMessage;function $7({rfId:e}){const t=Qt(O7);return d.jsx("div",{id:"".concat(P7,"-").concat(e),"aria-live":"assertive","aria-atomic":"true",style:I7,children:t})}function M7({rfId:e,disableKeyboardA11y:t}){return d.jsxs(d.Fragment,{children:[d.jsxs("div",{id:"".concat(MI,"-").concat(e),style:jk,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),d.jsx("div",{id:"".concat(DI,"-").concat(e),style:jk,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&d.jsx($7,{rfId:e})]})}const D7=e=>e.userSelectionActive?"none":"all",uh=j.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},o)=>{const s=Qt(D7),a="".concat(e).split("-");return d.jsx("div",{className:Xn(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:o,...i,children:t})});uh.displayName="Panel";function L7({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:d.jsx(uh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const B7=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},op=e=>e.id;function F7(e,t){return Ln(e.selectedNodes.map(op),t.selectedNodes.map(op))&&Ln(e.selectedEdges.map(op),t.selectedEdges.map(op))}function z7({onSelectionChange:e}){const t=_n(),{selectedNodes:n,selectedEdges:r}=Qt(B7,F7);return j.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(o=>o(i))},[n,r,e]),null}const H7=e=>!!e.onSelectionChangeHandlers;function U7({onSelectionChange:e}){const t=Qt(H7);return e||t?d.jsx(z7,{onSelectionChange:e}):null}const LI=[0,0],W7={x:0,y:0,zoom:1},V7=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Ak=[...V7,"rfId"],q7=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Nk={translateExtent:hf,nodeOrigin:LI,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function K7(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:o,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:u}=Qt(q7,Ln),c=_n();j.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{f.current=Nk,a()}),[]);const f=j.useRef(Nk);return j.useEffect(()=>{for(const h of Ak){const p=e[h],v=f.current[h];p!==v&&(typeof e[h]>"u"||(h==="nodes"?t(p):h==="edges"?n(p):h==="minZoom"?r(p):h==="maxZoom"?i(p):h==="translateExtent"?o(p):h==="nodeExtent"?s(p):h==="paneClickDistance"?u(p):h==="fitView"?c.setState({fitViewQueued:p}):h==="fitViewOptions"?c.setState({fitViewOptions:p}):c.setState({[h]:p})))}f.current=e},Ak.map(h=>e[h])),null}function Rk(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function G7(e){var r;const[t,n]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){n(e);return}const i=Rk(),o=()=>n(i!=null&&i.matches?"dark":"light");return o(),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}},[e]),t!==null?t:(r=Rk())!=null&&r.matches?"dark":"light"}const Tk=typeof document<"u"?document:null;function yf(e=null,t={target:Tk,actInsideInputWithModifier:!0}){const[n,r]=j.useState(!1),i=j.useRef(!1),o=j.useRef(new Set([])),[s,a]=j.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+","\n").replace("\n\n","\n+").split("\n")),c=u.reduce((f,h)=>f.concat(...h),[]);return[u,c]}return[[],[]]},[e]);return j.useEffect(()=>{const l=(t==null?void 0:t.target)||Tk;if(e!==null){const u=h=>{var y,x;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&hI(h))return!1;const v=Pk(h.code,a);if(o.current.add(h[v]),Ik(s,o.current,!1)){const m=((x=(y=h.composedPath)==null?void 0:y.call(h))==null?void 0:x[0])||h.target,b=(m==null?void 0:m.nodeName)==="BUTTON"||(m==null?void 0:m.nodeName)==="A";t.preventDefault!==!1&&(i.current||!b)&&h.preventDefault(),r(!0)}},c=h=>{const p=Pk(h.code,a);Ik(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[p]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",c),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",c),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,r]),n}function Ik(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Pk(e,t){return t.includes(e)?"code":"key"}const Y7=()=>{const e=_n();return j.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var a,l,u;const{transform:[r,i,o],panZoom:s}=e.getState();return s?(await s.setViewport({x:(a=t.x)!=null?a:r,y:(l=t.y)!=null?l:i,zoom:(u=t.zoom)!=null?u:o},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:i,height:o,maxZoom:s,panZoom:a}=e.getState(),l=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=i/2-t*l,c=o/2-n*l;return a?(await a.setViewport({x:u,y:c,zoom:l},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var u;const{width:r,height:i,minZoom:o,maxZoom:s,panZoom:a}=e.getState(),l=t1(t,r,i,o,s,(u=n==null?void 0:n.padding)!=null?u:.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{var h,p;const{transform:r,snapGrid:i,snapToGrid:o,domNode:s}=e.getState();if(!s)return t;const{x:a,y:l}=s.getBoundingClientRect(),u={x:t.x-a,y:t.y-l},c=(h=n.snapGrid)!=null?h:i,f=(p=n.snapToGrid)!=null?p:o;return lh(u,r,f,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),s=$g(t,n);return{x:s.x+i,y:s.y+o}}}),[])};function BI(e,t){const n=[],r=new Map,i=[];for(const o of e)if(o.type==="add"){i.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const s=r.get(o.id);s?s.push(o):r.set(o.id,[o])}for(const o of t){const s=r.get(o.id);if(!s){n.push(o);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...o};for(const l of s)X7(l,a);n.push(a)}return i.length&&i.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function X7(e,t){var n;switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&((n=t.measured)!=null||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function FI(e,t){return BI(e,t)}function zI(e,t){return BI(e,t)}function rl(e,t){return{id:e,type:"select",selected:t}}function _u(e,t=new Set,n=!1){const r=[];for(const[i,o]of e){const s=t.has(i);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),r.push(rl(o.id,s)))}return r}function Ok({items:e=[],lookup:t}){var i,o;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,a]of e.entries()){const l=t.get(a.id),u=(o=(i=l==null?void 0:l.internals)==null?void 0:i.userNode)!=null?o:l;u!==void 0&&u!==a&&n.push({id:a.id,item:a,type:"replace"}),u===void 0&&n.push({item:a,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function $k(e){return{id:e.id,type:"remove"}}const Mk=e=>uF(e),J7=e=>iI(e);function HI(e){return j.forwardRef(e)}const Q7=typeof window<"u"?j.useLayoutEffect:j.useEffect;function Dk(e){const[t,n]=j.useState(BigInt(0)),[r]=j.useState(()=>Z7(()=>n(i=>i+BigInt(1))));return Q7(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function Z7(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const UI=j.createContext(null);function e9({children:e}){const t=_n(),n=j.useCallback(a=>{const{nodes:l=[],setNodes:u,hasDefaultNodes:c,onNodesChange:f,nodeLookup:h,fitViewQueued:p}=t.getState();let v=l;for(const y of a)v=typeof y=="function"?y(v):y;if(c)u(v);else{const y=Ok({items:v,lookup:h});y.length>0?f==null||f(y):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:m,setNodes:b}=t.getState();x&&b(m)})}},[]),r=Dk(n),i=j.useCallback(a=>{const{edges:l=[],setEdges:u,hasDefaultEdges:c,onEdgesChange:f,edgeLookup:h}=t.getState();let p=l;for(const v of a)p=typeof v=="function"?v(p):v;c?u(p):f&&f(Ok({items:p,lookup:h}))},[]),o=Dk(i),s=j.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return d.jsx(UI.Provider,{value:s,children:e})}function t9(){const e=j.useContext(UI);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const n9=e=>!!e.panZoom;function cn(){const e=Y7(),t=_n(),n=t9(),r=Qt(n9),i=j.useMemo(()=>{const o=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},l=f=>{var m,b,w,S;const{nodeLookup:h,nodeOrigin:p}=t.getState(),v=Mk(f)?f:h.get(f.id),y=v.parentId?dI(v.position,v.measured,v.parentId,h,p):v.position,x={...v,position:y,width:(b=(m=v.measured)==null?void 0:m.width)!=null?b:v.width,height:(S=(w=v.measured)==null?void 0:w.height)!=null?S:v.height};return Zu(x)},u=(f,h,p={replace:!1})=>{s(v=>v.map(y=>{if(y.id===f){const x=typeof h=="function"?h(y):h;return p.replace&&Mk(x)?x:{...y,...x}}return y}))},c=(f,h,p={replace:!1})=>{a(v=>v.map(y=>{if(y.id===f){const x=typeof h=="function"?h(y):h;return p.replace&&J7(x)?x:{...y,...x}}return y}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var h;return(h=o(f))==null?void 0:h.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(h=>({...h}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:a,addNodes:f=>{const h=Array.isArray(f)?f:[f];n.nodeQueue.push(p=>[...p,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];n.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:p}=t.getState(),[v,y,x]=p;return{nodes:f.map(m=>({...m})),edges:h.map(m=>({...m})),viewport:{x:v,y,zoom:x}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:p,edges:v,onNodesDelete:y,onEdgesDelete:x,triggerNodeChanges:m,triggerEdgeChanges:b,onDelete:w,onBeforeDelete:S}=t.getState(),{nodes:E,edges:A}=await pF({nodesToRemove:f,edgesToRemove:h,nodes:p,edges:v,onBeforeDelete:S}),T=A.length>0,P=E.length>0;if(T){const V=A.map($k);x==null||x(A),b(V)}if(P){const V=E.map($k);y==null||y(E),m(V)}return(P||T)&&(w==null||w({nodes:E,edges:A})),{deletedNodes:E,deletedEdges:A}},getIntersectingNodes:(f,h=!0,p)=>{const v=hk(f),y=v?f:l(f),x=p!==void 0;return y?(p||t.getState().nodes).filter(m=>{const b=t.getState().nodeLookup.get(m.id);if(b&&!v&&(m.id===f.id||!b.internals.positionAbsolute))return!1;const w=Zu(x?m:b),S=gf(w,y);return h&&S>0||S>=y.width*y.height}):[]},isNodeIntersecting:(f,h,p=!0)=>{const y=hk(f)?f:l(f);if(!y)return!1;const x=gf(y,h);return p&&x>0||x>=y.width*y.height},updateNode:u,updateNodeData:(f,h,p={replace:!1})=>{u(f,v=>{const y=typeof h=="function"?h(v):h;return p.replace?{...v,data:y}:{...v,data:{...v.data,...y}}},p)},updateEdge:c,updateEdgeData:(f,h,p={replace:!1})=>{c(f,v=>{const y=typeof h=="function"?h(v):h;return p.replace?{...v,data:y}:{...v,data:{...v.data,...y}}},p)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:p}=t.getState();return cF(f,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:f,id:h,nodeId:p})=>{var v,y;return Array.from((y=(v=t.getState().connectionLookup.get("".concat(p,"-").concat(f).concat(h?"-".concat(h):"")))==null?void 0:v.values())!=null?y:[])},getNodeConnections:({type:f,handleId:h,nodeId:p})=>{var v,y;return Array.from((y=(v=t.getState().connectionLookup.get("".concat(p).concat(f?h?"-".concat(f,"-").concat(h):"-".concat(f):"")))==null?void 0:v.values())!=null?y:[])},fitView:async f=>{var p;const h=(p=t.getState().fitViewResolver)!=null?p:vF();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),n.nodeQueue.push(v=>[...v]),h.promise}}},[]);return j.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const Lk=e=>e.selected,r9={actInsideInputWithModifier:!1},i9=typeof window<"u"?window:void 0;function o9({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=_n(),{deleteElements:r}=cn(),i=yf(e,r9),o=yf(t,{target:i9});j.useEffect(()=>{if(i){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(Lk),edges:s.filter(Lk)}),n.setState({nodesSelectionActive:!1})}},[i]),j.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function s9(e){const t=_n();j.useEffect(()=>{const n=()=>{var i,o;if(!e.current)return!1;const r=n1(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",bo.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const oy={position:"absolute",width:"100%",height:"100%",top:0,left:0},a9=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function l9({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:o=yl.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:p=!0,children:v,noWheelClassName:y,noPanClassName:x,onViewportChange:m,isControlledViewport:b,paneClickDistance:w}){const S=_n(),E=j.useRef(null),{userSelectionActive:A,lib:T}=Qt(a9,Ln),P=yf(h),V=j.useRef();s9(E);const M=j.useCallback(H=>{m==null||m({x:H[0],y:H[1],zoom:H[2]}),b||S.setState({transform:H})},[m,b]);return j.useEffect(()=>{if(E.current){V.current=JF({domNode:E.current,minZoom:c,maxZoom:f,translateExtent:u,viewport:l,paneClickDistance:w,onDraggingChange:L=>S.setState({paneDragging:L}),onPanZoomStart:(L,q)=>{const{onViewportChangeStart:Y,onMoveStart:re}=S.getState();re==null||re(L,q),Y==null||Y(q)},onPanZoom:(L,q)=>{const{onViewportChange:Y,onMove:re}=S.getState();re==null||re(L,q),Y==null||Y(q)},onPanZoomEnd:(L,q)=>{const{onViewportChangeEnd:Y,onMoveEnd:re}=S.getState();re==null||re(L,q),Y==null||Y(q)}});const{x:H,y:ee,zoom:W}=V.current.getViewport();return S.setState({panZoom:V.current,transform:[H,ee,W],domNode:E.current.closest(".react-flow")}),()=>{var L;(L=V.current)==null||L.destroy()}}},[]),j.useEffect(()=>{var H;(H=V.current)==null||H.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:o,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:P,preventScrolling:p,noPanClassName:x,userSelectionActive:A,noWheelClassName:y,lib:T,onTransformChange:M})},[e,t,n,r,i,o,s,a,P,p,x,A,y,T,M]),d.jsx("div",{className:"react-flow__renderer",ref:E,style:oy,children:v})}const u9=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function c9(){const{userSelectionActive:e,userSelectionRect:t}=Qt(u9,Ln);return e&&t?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const r0=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},d9=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function f9({isSelecting:e,selectionKeyPressed:t,selectionMode:n=pf.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:o,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:f,onPaneMouseLeave:h,children:p}){const v=_n(),{userSelectionActive:y,elementsSelectable:x,dragging:m,connectionInProgress:b}=Qt(d9,Ln),w=x&&(e||y),S=j.useRef(null),E=j.useRef(),A=j.useRef(new Set),T=j.useRef(new Set),P=j.useRef(!1),V=j.useRef(!1),M=re=>{if(P.current||b){P.current=!1;return}a==null||a(re),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},H=re=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){re.preventDefault();return}l==null||l(re)},ee=u?re=>u(re):void 0,W=re=>{var se,ce;const{resetSelectedElements:D,domNode:z}=v.getState();if(E.current=z==null?void 0:z.getBoundingClientRect(),!x||!e||re.button!==0||re.target!==S.current||!E.current)return;(ce=(se=re.target)==null?void 0:se.setPointerCapture)==null||ce.call(se,re.pointerId),V.current=!0,P.current=!1;const{x:O,y:K}=js(re.nativeEvent,E.current);D(),v.setState({userSelectionRect:{width:0,height:0,startX:O,startY:K,x:O,y:K}}),o==null||o(re)},L=re=>{var fe,Se;const{userSelectionRect:D,transform:z,nodeLookup:O,edgeLookup:K,connectionLookup:se,triggerNodeChanges:ce,triggerEdgeChanges:Ce,defaultEdgeOptions:Ie}=v.getState();if(!E.current||!D)return;P.current=!0;const{x:Re,y:F}=js(re.nativeEvent,E.current),{startX:Z,startY:ie}=D,De={startX:Z,startY:ie,x:Re<Z?Re:Z,y:F<ie?F:ie,width:Math.abs(Re-Z),height:Math.abs(F-ie)},Ye=A.current,ze=T.current;A.current=new Set(oI(O,De,z,n===pf.Partial,!0).map(Ue=>Ue.id)),T.current=new Set;const ne=(fe=Ie==null?void 0:Ie.selectable)!=null?fe:!0;for(const Ue of A.current){const We=se.get(Ue);if(We)for(const{edgeId:Ke}of We.values()){const he=K.get(Ke);he&&((Se=he.selectable)!=null?Se:ne)&&T.current.add(Ke)}}if(!pk(Ye,A.current)){const Ue=_u(O,A.current,!0);ce(Ue)}if(!pk(ze,T.current)){const Ue=_u(K,T.current);Ce(Ue)}v.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},q=re=>{var z,O;if(re.button!==0||!V.current)return;(O=(z=re.target)==null?void 0:z.releasePointerCapture)==null||O.call(z,re.pointerId);const{userSelectionRect:D}=v.getState();!y&&D&&re.target===S.current&&(M==null||M(re)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),s==null||s(re),(t||i)&&(P.current=!1),V.current=!1},Y=r===!0||Array.isArray(r)&&r.includes(0);return d.jsxs("div",{className:Xn(["react-flow__pane",{draggable:Y,dragging:m,selection:e}]),onClick:w?void 0:r0(M,S),onContextMenu:r0(H,S),onWheel:r0(ee,S),onPointerEnter:w?void 0:c,onPointerDown:w?W:f,onPointerMove:w?L:f,onPointerUp:w?q:void 0,onPointerLeave:h,ref:S,style:oy,children:[p,d.jsx(c9,{})]})}function Eb({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",bo.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function WI({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,nodeClickDistance:s}){const a=_n(),[l,u]=j.useState(!1),c=j.useRef();return j.useEffect(()=>{c.current=DF({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{Eb({id:f,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),j.useEffect(()=>{var f,h;if(t)(f=c.current)==null||f.destroy();else if(e.current)return(h=c.current)==null||h.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:i,nodeClickDistance:s}),()=>{var p;(p=c.current)==null||p.destroy()}},[n,r,t,o,e,i]),l}const h9=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function VI(){const e=_n();return j.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:o,nodesDraggable:s,onError:a,updateNodePositions:l,nodeLookup:u,nodeOrigin:c}=e.getState(),f=new Map,h=h9(s),p=i?o[0]:5,v=i?o[1]:5,y=n.direction.x*p*n.factor,x=n.direction.y*v*n.factor;for(const[,m]of u){if(!h(m))continue;let b={x:m.internals.positionAbsolute.x+y,y:m.internals.positionAbsolute.y+x};i&&(b=ty(b,o));const{position:w,positionAbsolute:S}=sI({nodeId:m.id,nextPosition:b,nodeLookup:u,nodeExtent:r,nodeOrigin:c,onError:a});m.position=w,m.internals.positionAbsolute=S,f.set(m.id,m)}l(f)},[])}const a1=j.createContext(null),p9=a1.Provider;a1.Consumer;const l1=()=>j.useContext(a1),g9=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),m9=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:o,connection:s}=r,{fromHandle:a,toHandle:l,isValid:u}=s,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:o===Ju.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&u}};function y9({type:e="source",position:t=ye.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:f,...h},p){var q,Y;const v=s||null,y=e==="target",x=_n(),m=l1(),{connectOnClick:b,noPanClassName:w,rfId:S}=Qt(g9,Ln),{connectingFrom:E,connectingTo:A,clickConnecting:T,isPossibleEndHandle:P,connectionInProcess:V,clickConnectionInProcess:M,valid:H}=Qt(m9(m,v,e),Ln);m||(Y=(q=x.getState()).onError)==null||Y.call(q,"010",bo.error010());const ee=re=>{const{defaultEdgeOptions:D,onConnect:z,hasDefaultEdges:O}=x.getState(),K={...D,...re};if(O){const{edges:se,setEdges:ce}=x.getState();ce(vI(K,se))}z==null||z(K),a==null||a(K)},W=re=>{if(!m)return;const D=pI(re.nativeEvent);if(i&&(D&&re.button===0||!D)){const z=x.getState();Sb.onPointerDown(re.nativeEvent,{autoPanOnConnect:z.autoPanOnConnect,connectionMode:z.connectionMode,connectionRadius:z.connectionRadius,domNode:z.domNode,nodeLookup:z.nodeLookup,lib:z.lib,isTarget:y,handleId:v,nodeId:m,flowId:z.rfId,panBy:z.panBy,cancelConnection:z.cancelConnection,onConnectStart:z.onConnectStart,onConnectEnd:z.onConnectEnd,updateConnection:z.updateConnection,onConnect:ee,isValidConnection:n||z.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:z.autoPanSpeed})}D?c==null||c(re):f==null||f(re)},L=re=>{const{onClickConnectStart:D,onClickConnectEnd:z,connectionClickStartHandle:O,connectionMode:K,isValidConnection:se,lib:ce,rfId:Ce,nodeLookup:Ie,connection:Re}=x.getState();if(!m||!O&&!i)return;if(!O){D==null||D(re.nativeEvent,{nodeId:m,handleId:v,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:m,type:e,id:v}});return}const F=fI(re.target),Z=n||se,{connection:ie,isValid:De}=Sb.isValid(re.nativeEvent,{handle:{nodeId:m,id:v,type:e},connectionMode:K,fromNodeId:O.nodeId,fromHandleId:O.id||null,fromType:O.type,isValidConnection:Z,flowId:Ce,doc:F,lib:ce,nodeLookup:Ie});De&&ie&&ee(ie);const Ye=structuredClone(Re);delete Ye.inProgress,Ye.toPosition=Ye.toHandle?Ye.toHandle.position:null,z==null||z(re,Ye),x.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":v,"data-nodeid":m,"data-handlepos":t,"data-id":"".concat(S,"-").concat(m,"-").concat(v,"-").concat(e),className:Xn(["react-flow__handle","react-flow__handle-".concat(t),"nodrag",w,u,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:o,clickconnecting:T,connectingfrom:E,connectingto:A,valid:H,connectionindicator:r&&(!V||P)&&(V||M?o:i)}]),onMouseDown:W,onTouchStart:W,onClick:b?L:void 0,ref:p,...h,children:l})}const Ne=j.memo(HI(y9));function v9({data:e,isConnectable:t,sourcePosition:n=ye.Bottom}){return d.jsxs(d.Fragment,{children:[e==null?void 0:e.label,d.jsx(Ne,{type:"source",position:n,isConnectable:t})]})}function w9({data:e,isConnectable:t,targetPosition:n=ye.Top,sourcePosition:r=ye.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,d.jsx(Ne,{type:"source",position:r,isConnectable:t})]})}function b9(){return null}function x9({data:e,isConnectable:t,targetPosition:n=ye.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Dg={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Bk={input:v9,default:w9,output:x9,group:b9};function _9(e){var t,n,r,i,o,s,a,l,u,c;return e.internals.handleBounds===void 0?{width:(r=(t=e.width)!=null?t:e.initialWidth)!=null?r:(n=e.style)==null?void 0:n.width,height:(s=(i=e.height)!=null?i:e.initialHeight)!=null?s:(o=e.style)==null?void 0:o.height}:{width:(l=e.width)!=null?l:(a=e.style)==null?void 0:a.width,height:(c=e.height)!=null?c:(u=e.style)==null?void 0:u.height}}const S9=e=>{const{width:t,height:n,x:r,y:i}=ah(e.nodeLookup,{filter:o=>!!o.selected});return{width:ho(t)?t:null,height:ho(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(i,"px)")}};function E9({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=_n(),{width:i,height:o,transformString:s,userSelectionActive:a}=Qt(S9,Ln),l=VI(),u=j.useRef(null);if(j.useEffect(()=>{var h;n||(h=u.current)==null||h.focus({preventScroll:!0})},[n]),WI({nodeRef:u}),a||!i||!o)return null;const c=e?h=>{const p=r.getState().nodes.filter(v=>v.selected);e(h,p)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(Dg,h.key)&&(h.preventDefault(),l({direction:Dg[h.key],factor:h.shiftKey?4:1}))};return d.jsx("div",{className:Xn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:d.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:o}})})}const Fk=typeof window<"u"?window:void 0,k9=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function qI({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:f,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:x,elementsSelectable:m,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:E,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:P,defaultViewport:V,translateExtent:M,minZoom:H,maxZoom:ee,preventScrolling:W,onSelectionContextMenu:L,noWheelClassName:q,noPanClassName:Y,disableKeyboardA11y:re,onViewportChange:D,isControlledViewport:z}){const{nodesSelectionActive:O,userSelectionActive:K}=Qt(k9),se=yf(u,{target:Fk}),ce=yf(y,{target:Fk}),Ce=ce||P,Ie=ce||S,Re=c&&Ce!==!0,F=se||K||Re;return o9({deleteKeyCode:l,multiSelectionKeyCode:v}),d.jsx(l9,{onPaneContextMenu:o,elementsSelectable:m,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:Ie,panOnScrollSpeed:E,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:!se&&Ce,defaultViewport:V,translateExtent:M,minZoom:H,maxZoom:ee,zoomActivationKeyCode:x,preventScrolling:W,noWheelClassName:q,noPanClassName:Y,onViewportChange:D,isControlledViewport:z,paneClickDistance:a,children:d.jsxs(f9,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:Ce,isSelecting:!!F,selectionMode:f,selectionKeyPressed:se,selectionOnDrag:Re,children:[e,O&&d.jsx(E9,{onSelectionContextMenu:L,noPanClassName:Y,disableKeyboardA11y:re})]})})}qI.displayName="FlowRenderer";const C9=j.memo(qI),j9=e=>t=>e?oI(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function A9(e){return Qt(j.useCallback(j9(e),[e]),Ln)}const N9=e=>e.updateNodeInternals;function R9(){const e=Qt(N9),[t]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const o=i.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:i.target,force:!0})}),e(r)}));return j.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function T9({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=_n(),o=j.useRef(null),s=j.useRef(null),a=j.useRef(e.sourcePosition),l=j.useRef(e.targetPosition),u=j.useRef(t),c=n&&!!e.internals.handleBounds;return j.useEffect(()=>{o.current&&!e.hidden&&(!c||s.current!==o.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(o.current),s.current=o.current)},[c,e.hidden]),j.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),j.useEffect(()=>{if(o.current){const f=u.current!==t,h=a.current!==e.sourcePosition,p=l.current!==e.targetPosition;(f||h||p)&&(u.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function I9({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:o,onDoubleClick:s,nodesDraggable:a,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:f,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:v,rfId:y,nodeTypes:x,nodeClickDistance:m,onError:b}){var F,Z;const{node:w,internals:S,isParent:E}=Qt(ie=>{const De=ie.nodeLookup.get(e),Ye=ie.parentLookup.has(e);return{node:De,internals:De.internals,isParent:Ye}},Ln);let A=w.type||"default",T=(x==null?void 0:x[A])||Bk[A];T===void 0&&(b==null||b("003",bo.error003(A)),A="default",T=Bk.default);const P=!!(w.draggable||a&&typeof w.draggable>"u"),V=!!(w.selectable||l&&typeof w.selectable>"u"),M=!!(w.connectable||u&&typeof w.connectable>"u"),H=!!(w.focusable||c&&typeof w.focusable>"u"),ee=_n(),W=cI(w),L=T9({node:w,nodeType:A,hasDimensions:W,resizeObserver:f}),q=WI({nodeRef:L,disabled:w.hidden||!P,noDragClassName:h,handleSelector:w.dragHandle,nodeId:e,isSelectable:V,nodeClickDistance:m}),Y=VI();if(w.hidden)return null;const re=Us(w),D=_9(w),z=V||P||t||n||r||i,O=n?ie=>n(ie,{...S.userNode}):void 0,K=r?ie=>r(ie,{...S.userNode}):void 0,se=i?ie=>i(ie,{...S.userNode}):void 0,ce=o?ie=>o(ie,{...S.userNode}):void 0,Ce=s?ie=>s(ie,{...S.userNode}):void 0,Ie=ie=>{const{selectNodesOnDrag:De,nodeDragThreshold:Ye}=ee.getState();V&&(!De||!P||Ye>0)&&Eb({id:e,store:ee,nodeRef:L}),t&&t(ie,{...S.userNode})},Re=ie=>{if(!(hI(ie.nativeEvent)||v))if(tI.includes(ie.key)&&V){const De=ie.key==="Escape";Eb({id:e,store:ee,unselect:De,nodeRef:L})}else P&&w.selected&&Object.prototype.hasOwnProperty.call(Dg,ie.key)&&(ie.preventDefault(),ee.setState({ariaLiveMessage:"Moved selected node ".concat(ie.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~S.positionAbsolute.x,", y: ").concat(~~S.positionAbsolute.y)}),Y({direction:Dg[ie.key],factor:ie.shiftKey?4:1}))};return d.jsx("div",{className:Xn(["react-flow__node","react-flow__node-".concat(A),{[p]:P},w.className,{selected:w.selected,selectable:V,parent:E,draggable:P,dragging:q}]),ref:L,style:{zIndex:S.z,transform:"translate(".concat(S.positionAbsolute.x,"px,").concat(S.positionAbsolute.y,"px)"),pointerEvents:z?"all":"none",visibility:W?"visible":"hidden",...w.style,...D},"data-id":e,"data-testid":"rf__node-".concat(e),onMouseEnter:O,onMouseMove:K,onMouseLeave:se,onContextMenu:ce,onClick:Ie,onDoubleClick:Ce,onKeyDown:H?Re:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"aria-describedby":v?void 0:"".concat(MI,"-").concat(y),"aria-label":w.ariaLabel,children:d.jsx(p9,{value:e,children:d.jsx(T,{id:e,data:w.data,type:A,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:(F=w.selected)!=null?F:!1,selectable:V,draggable:P,deletable:(Z=w.deletable)!=null?Z:!0,isConnectable:M,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:q,dragHandle:w.dragHandle,zIndex:S.z,parentId:w.parentId,...re})})})}const P9=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function KI(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:o}=Qt(P9,Ln),s=A9(e.onlyRenderVisibleElements),a=R9();return d.jsx("div",{className:"react-flow__nodes",style:oy,children:s.map(l=>d.jsx(I9,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:o},l))})}KI.displayName="NodeRenderer";const O9=j.memo(KI);function $9(e){return Qt(j.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const o=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);o&&s&&xF({sourceNode:o,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Ln)}const M9=({color:e="none",strokeWidth:t=1})=>d.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),D9=({color:e="none",strokeWidth:t=1})=>d.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),zk={[Pg.Arrow]:M9,[Pg.ArrowClosed]:D9};function L9(e){const t=_n();return j.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(zk,e)?zk[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",bo.error009(e)),null)},[e])}const B9=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const l=L9(t);return l?d.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:"".concat(r),markerHeight:"".concat(i),viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:d.jsx(l,{color:n,strokeWidth:s})}):null},GI=({defaultColor:e,rfId:t})=>{const n=Qt(o=>o.edges),r=Qt(o=>o.defaultEdgeOptions),i=j.useMemo(()=>AF(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:i.map(o=>d.jsx(B9,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};GI.displayName="MarkerDefinitions";var F9=j.memo(GI);function YI({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:o,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c}){const[f,h]=j.useState({x:1,y:0,width:0,height:0}),p=Xn(["react-flow__edge-textwrapper",u]),v=j.useRef(null);return j.useEffect(()=>{if(v.current){const y=v.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),n?d.jsxs("g",{transform:"translate(".concat(e-f.width/2," ").concat(t-f.height/2,")"),className:p,visibility:f.width?"visible":"hidden",...c,children:[i&&d.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),d.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:v,style:r,children:n}),l]}):null}YI.displayName="EdgeText";const z9=j.memo(YI);function sy({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...c,d:e,fill:"none",className:Xn(["react-flow__edge-path",c.className])}),u&&d.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&ho(t)&&ho(n)?d.jsx(z9,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function Hk({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===ye.Left||e===ye.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function XI({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top}){const[s,a]=Hk({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=Hk({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,f,h,p]=gI({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:u});return["M".concat(e,",").concat(t," C").concat(s,",").concat(a," ").concat(l,",").concat(u," ").concat(r,",").concat(i),c,f,h,p]}function JI(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s,targetPosition:a,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,interactionWidth:m})=>{const[b,w,S]=XI({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a}),E=e.isInternal?void 0:t;return d.jsx(sy,{id:E,path:b,labelX:w,labelY:S,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,interactionWidth:m})})}const H9=JI({isInternal:!1}),QI=JI({isInternal:!0});H9.displayName="SimpleBezierEdge";QI.displayName="SimpleBezierEdgeInternal";function ZI(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,sourcePosition:p=ye.Bottom,targetPosition:v=ye.Top,markerEnd:y,markerStart:x,pathOptions:m,interactionWidth:b})=>{const[w,S,E]=bb({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:o,targetPosition:v,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset}),A=e.isInternal?void 0:t;return d.jsx(sy,{id:A,path:w,labelX:S,labelY:E,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,markerEnd:y,markerStart:x,interactionWidth:b})})}const eP=ZI({isInternal:!1}),tP=ZI({isInternal:!0});eP.displayName="SmoothStepEdge";tP.displayName="SmoothStepEdgeInternal";function nP(e){return j.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return d.jsx(eP,{...n,id:r,pathOptions:j.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const U9=nP({isInternal:!1}),rP=nP({isInternal:!0});U9.displayName="StepEdge";rP.displayName="StepEdgeInternal";function iP(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,interactionWidth:y})=>{const[x,m,b]=wI({sourceX:n,sourceY:r,targetX:i,targetY:o}),w=e.isInternal?void 0:t;return d.jsx(sy,{id:w,path:x,labelX:m,labelY:b,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,interactionWidth:y})})}const W9=iP({isInternal:!1}),oP=iP({isInternal:!0});W9.displayName="StraightEdge";oP.displayName="StraightEdgeInternal";function sP(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s=ye.Bottom,targetPosition:a=ye.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,pathOptions:m,interactionWidth:b})=>{const[w,S,E]=mI({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a,curvature:m==null?void 0:m.curvature}),A=e.isInternal?void 0:t;return d.jsx(sy,{id:A,path:w,labelX:S,labelY:E,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:x,interactionWidth:b})})}const V9=sP({isInternal:!1}),aP=sP({isInternal:!0});V9.displayName="BezierEdge";aP.displayName="BezierEdgeInternal";const Uk={default:aP,straight:oP,step:rP,smoothstep:tP,simplebezier:QI},Wk={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},q9=(e,t,n)=>n===ye.Left?e-t:n===ye.Right?e+t:e,K9=(e,t,n)=>n===ye.Top?e-t:n===ye.Bottom?e+t:e,Vk="react-flow__edgeupdater";function qk({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a}){return d.jsx("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:Xn([Vk,"".concat(Vk,"-").concat(a)]),cx:q9(t,r,e),cy:K9(n,r,e),r,stroke:"transparent",fill:"transparent"})}function G9({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:f,setReconnecting:h,setUpdateHover:p}){const v=_n(),y=(S,E)=>{if(S.button!==0)return;const{autoPanOnConnect:A,domNode:T,isValidConnection:P,connectionMode:V,connectionRadius:M,lib:H,onConnectStart:ee,onConnectEnd:W,cancelConnection:L,nodeLookup:q,rfId:Y,panBy:re,updateConnection:D}=v.getState(),z=E.type==="target";h(!0),c==null||c(S,n,E.type);const O=(se,ce)=>{h(!1),f==null||f(se,n,E.type,ce)},K=se=>u==null?void 0:u(n,se);Sb.onPointerDown(S.nativeEvent,{autoPanOnConnect:A,connectionMode:V,connectionRadius:M,domNode:T,handleId:E.id,nodeId:E.nodeId,nodeLookup:q,isTarget:z,edgeUpdaterType:E.type,lib:H,flowId:Y,cancelConnection:L,panBy:re,isValidConnection:P,onConnect:K,onConnectStart:ee,onConnectEnd:W,onReconnectEnd:O,updateConnection:D,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle})},x=S=>{var E;return y(S,{nodeId:n.target,id:(E=n.targetHandle)!=null?E:null,type:"target"})},m=S=>{var E;return y(S,{nodeId:n.source,id:(E=n.sourceHandle)!=null?E:null,type:"source"})},b=()=>p(!0),w=()=>p(!1);return d.jsxs(d.Fragment,{children:[(e===!0||e==="source")&&d.jsx(qk,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:x,onMouseEnter:b,onMouseOut:w,type:"source"}),(e===!0||e==="target")&&d.jsx(qk,{position:l,centerX:o,centerY:s,radius:t,onMouseDown:m,onMouseEnter:b,onMouseOut:w,type:"target"})]})}function Y9({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,reconnectRadius:c,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:v,edgeTypes:y,noPanClassName:x,onError:m,disableKeyboardA11y:b}){var ze;let w=Qt(ne=>ne.edgeLookup.get(e));const S=Qt(ne=>ne.defaultEdgeOptions);w=S?{...S,...w}:w;let E=w.type||"default",A=(y==null?void 0:y[E])||Uk[E];A===void 0&&(m==null||m("011",bo.error011(E)),E="default",A=Uk.default);const T=!!(w.focusable||t&&typeof w.focusable>"u"),P=typeof f<"u"&&(w.reconnectable||n&&typeof w.reconnectable>"u"),V=!!(w.selectable||r&&typeof w.selectable>"u"),M=j.useRef(null),[H,ee]=j.useState(!1),[W,L]=j.useState(!1),q=_n(),{zIndex:Y,sourceX:re,sourceY:D,targetX:z,targetY:O,sourcePosition:K,targetPosition:se}=Qt(j.useCallback(ne=>{const fe=ne.nodeLookup.get(w.source),Se=ne.nodeLookup.get(w.target);if(!fe||!Se)return{zIndex:w.zIndex,...Wk};const Ue=jF({id:e,sourceNode:fe,targetNode:Se,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:ne.connectionMode,onError:m});return{zIndex:bF({selected:w.selected,zIndex:w.zIndex,sourceNode:fe,targetNode:Se,elevateOnSelect:ne.elevateEdgesOnSelect}),...Ue||Wk}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),Ln),ce=j.useMemo(()=>w.markerStart?"url('#".concat(xb(w.markerStart,v),"')"):void 0,[w.markerStart,v]),Ce=j.useMemo(()=>w.markerEnd?"url('#".concat(xb(w.markerEnd,v),"')"):void 0,[w.markerEnd,v]);if(w.hidden||re===null||D===null||z===null||O===null)return null;const Ie=ne=>{var We;const{addSelectedEdges:fe,unselectNodesAndEdges:Se,multiSelectionActive:Ue}=q.getState();V&&(q.setState({nodesSelectionActive:!1}),w.selected&&Ue?(Se({nodes:[],edges:[w]}),(We=M.current)==null||We.blur()):fe([e])),i&&i(ne,w)},Re=o?ne=>{o(ne,{...w})}:void 0,F=s?ne=>{s(ne,{...w})}:void 0,Z=a?ne=>{a(ne,{...w})}:void 0,ie=l?ne=>{l(ne,{...w})}:void 0,De=u?ne=>{u(ne,{...w})}:void 0,Ye=ne=>{var fe;if(!b&&tI.includes(ne.key)&&V){const{unselectNodesAndEdges:Se,addSelectedEdges:Ue}=q.getState();ne.key==="Escape"?((fe=M.current)==null||fe.blur(),Se({edges:[w]})):Ue([e])}};return d.jsx("svg",{style:{zIndex:Y},children:d.jsxs("g",{className:Xn(["react-flow__edge","react-flow__edge-".concat(E),w.className,x,{selected:w.selected,animated:w.animated,inactive:!V&&!i,updating:H,selectable:V}]),onClick:Ie,onDoubleClick:Re,onContextMenu:F,onMouseEnter:Z,onMouseMove:ie,onMouseLeave:De,onKeyDown:T?Ye:void 0,tabIndex:T?0:void 0,role:T?"button":"img","data-id":e,"data-testid":"rf__edge-".concat(e),"aria-label":w.ariaLabel===null?void 0:w.ariaLabel||"Edge from ".concat(w.source," to ").concat(w.target),"aria-describedby":T?"".concat(DI,"-").concat(v):void 0,ref:M,children:[!W&&d.jsx(A,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:V,deletable:(ze=w.deletable)!=null?ze:!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:re,sourceY:D,targetX:z,targetY:O,sourcePosition:K,targetPosition:se,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:ce,markerEnd:Ce,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),P&&d.jsx(G9,{edge:w,isReconnectable:P,reconnectRadius:c,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:re,sourceY:D,targetX:z,targetY:O,sourcePosition:K,targetPosition:se,setUpdateHover:ee,setReconnecting:L})]})})}const X9=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function lP({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:v,disableKeyboardA11y:y}){const{edgesFocusable:x,edgesReconnectable:m,elementsSelectable:b,onError:w}=Qt(X9,Ln),S=$9(t);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(F9,{defaultColor:e,rfId:n}),S.map(E=>d.jsx(Y9,{id:E,edgesFocusable:x,edgesReconnectable:m,elementsSelectable:b,noPanClassName:i,onReconnect:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:f,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:v,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:y},E))]})}lP.displayName="EdgeRenderer";const J9=j.memo(lP),Q9=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function Z9({children:e}){const t=Qt(Q9);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function ez(e){const t=cn(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const tz=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function nz(e){const t=Qt(tz),n=_n();return j.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function rz(e){return e.connection.inProgress?{...e.connection,to:lh(e.connection.to,e.transform)}:{...e.connection}}function iz(e){return rz}function oz(e){const t=iz();return Qt(t,Ln)}const sz=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function az({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:o,height:s,isValid:a,inProgress:l}=Qt(sz,Ln);return!(o&&i&&l)?null:d.jsx("svg",{style:e,width:o,height:s,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Xn(["react-flow__connection",rI(a)]),children:d.jsx(uP,{style:t,type:n,CustomComponent:r,isValid:a})})})}const uP=({style:e,type:t=ua.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:o,fromNode:s,fromHandle:a,fromPosition:l,to:u,toNode:c,toHandle:f,toPosition:h}=oz();if(!i)return;if(n)return d.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:h,connectionStatus:rI(r),toNode:c,toHandle:f});let p="";const v={sourceX:o.x,sourceY:o.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:h};switch(t){case ua.Bezier:[p]=mI(v);break;case ua.SimpleBezier:[p]=XI(v);break;case ua.Step:[p]=bb({...v,borderRadius:0});break;case ua.SmoothStep:[p]=bb(v);break;default:[p]=wI(v)}return d.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};uP.displayName="ConnectionLine";const lz={};function Kk(e=lz){j.useRef(e),_n(),j.useEffect(()=>{},[e])}function uz(){_n(),j.useRef(!1),j.useEffect(()=>{},[])}function cP({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:o,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:p,connectionLineType:v,connectionLineStyle:y,connectionLineComponent:x,connectionLineContainerStyle:m,selectionKeyCode:b,selectionOnDrag:w,selectionMode:S,multiSelectionKeyCode:E,panActivationKeyCode:A,zoomActivationKeyCode:T,deleteKeyCode:P,onlyRenderVisibleElements:V,elementsSelectable:M,defaultViewport:H,translateExtent:ee,minZoom:W,maxZoom:L,preventScrolling:q,defaultMarkerColor:Y,zoomOnScroll:re,zoomOnPinch:D,panOnScroll:z,panOnScrollSpeed:O,panOnScrollMode:K,zoomOnDoubleClick:se,panOnDrag:ce,onPaneClick:Ce,onPaneMouseEnter:Ie,onPaneMouseMove:Re,onPaneMouseLeave:F,onPaneScroll:Z,onPaneContextMenu:ie,paneClickDistance:De,nodeClickDistance:Ye,onEdgeContextMenu:ze,onEdgeMouseEnter:ne,onEdgeMouseMove:fe,onEdgeMouseLeave:Se,reconnectRadius:Ue,onReconnect:We,onReconnectStart:Ke,onReconnectEnd:he,noDragClassName:Fe,noWheelClassName:qe,noPanClassName:$e,disableKeyboardA11y:At,nodeExtent:fn,rfId:Ct,viewport:tn,onViewportChange:$}){return Kk(e),Kk(t),uz(),ez(n),nz(tn),d.jsx(C9,{onPaneClick:Ce,onPaneMouseEnter:Ie,onPaneMouseMove:Re,onPaneMouseLeave:F,onPaneContextMenu:ie,onPaneScroll:Z,paneClickDistance:De,deleteKeyCode:P,selectionKeyCode:b,selectionOnDrag:w,selectionMode:S,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:E,panActivationKeyCode:A,zoomActivationKeyCode:T,elementsSelectable:M,zoomOnScroll:re,zoomOnPinch:D,zoomOnDoubleClick:se,panOnScroll:z,panOnScrollSpeed:O,panOnScrollMode:K,panOnDrag:ce,defaultViewport:H,translateExtent:ee,minZoom:W,maxZoom:L,onSelectionContextMenu:f,preventScrolling:q,noDragClassName:Fe,noWheelClassName:qe,noPanClassName:$e,disableKeyboardA11y:At,onViewportChange:$,isControlledViewport:!!tn,children:d.jsxs(Z9,{children:[d.jsx(J9,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:We,onReconnectStart:Ke,onReconnectEnd:he,onlyRenderVisibleElements:V,onEdgeContextMenu:ze,onEdgeMouseEnter:ne,onEdgeMouseMove:fe,onEdgeMouseLeave:Se,reconnectRadius:Ue,defaultMarkerColor:Y,noPanClassName:$e,disableKeyboardA11y:At,rfId:Ct}),d.jsx(az,{style:y,type:v,component:x,containerStyle:m}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(O9,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:Ye,onlyRenderVisibleElements:V,noPanClassName:$e,noDragClassName:Fe,disableKeyboardA11y:At,nodeExtent:fn,rfId:Ct}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}cP.displayName="GraphView";const cz=j.memo(cP),Gk=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l=.5,maxZoom:u=2,nodeOrigin:c,nodeExtent:f}={})=>{var A,T,P;const h=new Map,p=new Map,v=new Map,y=new Map,x=(A=r!=null?r:t)!=null?A:[],m=(T=n!=null?n:e)!=null?T:[],b=c!=null?c:[0,0],w=f!=null?f:hf;xI(v,y,x);const S=_b(m,h,p,{nodeOrigin:b,nodeExtent:w,elevateNodesOnSelect:!1});let E=[0,0,1];if(s&&i&&o){const V=ah(h,{filter:W=>!!((W.width||W.initialWidth)&&(W.height||W.initialHeight))}),{x:M,y:H,zoom:ee}=t1(V,i,o,l,u,(P=a==null?void 0:a.padding)!=null?P:.1);E=[M,H,ee]}return{rfId:"1",width:0,height:0,transform:E,nodes:m,nodesInitialized:S,nodeLookup:h,parentLookup:p,edges:x,edgeLookup:y,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:u,translateExtent:hf,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ju.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s!=null?s:!1,fitViewOptions:a,fitViewResolver:null,connection:{...nI},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:gF,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},dz=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:f})=>R7((h,p)=>{async function v(){const{nodeLookup:y,panZoom:x,fitViewOptions:m,fitViewResolver:b,width:w,height:S,minZoom:E,maxZoom:A}=p();x&&(await hF({nodes:y,width:w,height:S,panZoom:x,minZoom:E,maxZoom:A},m),b==null||b.resolve(!0),h({fitViewResolver:null}))}return{...Gk({nodes:e,edges:t,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:f,defaultNodes:n,defaultEdges:r}),setNodes:y=>{const{nodeLookup:x,parentLookup:m,nodeOrigin:b,elevateNodesOnSelect:w,fitViewQueued:S}=p(),E=_b(y,x,m,{nodeOrigin:b,nodeExtent:f,elevateNodesOnSelect:w,checkEquality:!0});S&&E?(v(),h({nodes:y,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:y,nodesInitialized:E})},setEdges:y=>{const{connectionLookup:x,edgeLookup:m}=p();xI(x,m,y),h({edges:y})},setDefaultNodesAndEdges:(y,x)=>{if(y){const{setNodes:m}=p();m(y),h({hasDefaultNodes:!0})}if(x){const{setEdges:m}=p();m(x),h({hasDefaultEdges:!0})}},updateNodeInternals:y=>{const{triggerNodeChanges:x,nodeLookup:m,parentLookup:b,domNode:w,nodeOrigin:S,nodeExtent:E,debug:A,fitViewQueued:T}=p(),{changes:P,updatedInternals:V}=PF(y,m,b,w,S,E);V&&(RF(m,b,{nodeOrigin:S,nodeExtent:E}),T?(v(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(P==null?void 0:P.length)>0&&(A&&console.log("React Flow: trigger node changes",P),x==null||x(P)))},updateNodePositions:(y,x=!1)=>{var E,A;const m=[],b=[],{nodeLookup:w,triggerNodeChanges:S}=p();for(const[T,P]of y){const V=w.get(T),M=!!(V!=null&&V.expandParent&&(V!=null&&V.parentId)&&(P!=null&&P.position)),H={id:T,type:"position",position:M?{x:Math.max(0,P.position.x),y:Math.max(0,P.position.y)}:P.position,dragging:x};M&&V.parentId&&m.push({id:T,parentId:V.parentId,rect:{...P.internals.positionAbsolute,width:(E=P.measured.width)!=null?E:0,height:(A=P.measured.height)!=null?A:0}}),b.push(H)}if(m.length>0){const{parentLookup:T,nodeOrigin:P}=p(),V=s1(m,w,T,P);b.push(...V)}S(b)},triggerNodeChanges:y=>{const{onNodesChange:x,setNodes:m,nodes:b,hasDefaultNodes:w,debug:S}=p();if(y!=null&&y.length){if(w){const E=FI(y,b);m(E)}S&&console.log("React Flow: trigger node changes",y),x==null||x(y)}},triggerEdgeChanges:y=>{const{onEdgesChange:x,setEdges:m,edges:b,hasDefaultEdges:w,debug:S}=p();if(y!=null&&y.length){if(w){const E=zI(y,b);m(E)}S&&console.log("React Flow: trigger edge changes",y),x==null||x(y)}},addSelectedNodes:y=>{const{multiSelectionActive:x,edgeLookup:m,nodeLookup:b,triggerNodeChanges:w,triggerEdgeChanges:S}=p();if(x){const E=y.map(A=>rl(A,!0));w(E);return}w(_u(b,new Set([...y]),!0)),S(_u(m))},addSelectedEdges:y=>{const{multiSelectionActive:x,edgeLookup:m,nodeLookup:b,triggerNodeChanges:w,triggerEdgeChanges:S}=p();if(x){const E=y.map(A=>rl(A,!0));S(E);return}S(_u(m,new Set([...y]))),w(_u(b,new Set,!0))},unselectNodesAndEdges:({nodes:y,edges:x}={})=>{const{edges:m,nodes:b,nodeLookup:w,triggerNodeChanges:S,triggerEdgeChanges:E}=p(),A=y||b,T=x||m,P=A.map(M=>{const H=w.get(M.id);return H&&(H.selected=!1),rl(M.id,!1)}),V=T.map(M=>rl(M.id,!1));S(P),E(V)},setMinZoom:y=>{const{panZoom:x,maxZoom:m}=p();x==null||x.setScaleExtent([y,m]),h({minZoom:y})},setMaxZoom:y=>{const{panZoom:x,minZoom:m}=p();x==null||x.setScaleExtent([m,y]),h({maxZoom:y})},setTranslateExtent:y=>{var x;(x=p().panZoom)==null||x.setTranslateExtent(y),h({translateExtent:y})},setPaneClickDistance:y=>{var x;(x=p().panZoom)==null||x.setClickDistance(y)},resetSelectedElements:()=>{const{edges:y,nodes:x,triggerNodeChanges:m,triggerEdgeChanges:b,elementsSelectable:w}=p();if(!w)return;const S=x.reduce((A,T)=>T.selected?[...A,rl(T.id,!1)]:A,[]),E=y.reduce((A,T)=>T.selected?[...A,rl(T.id,!1)]:A,[]);m(S),b(E)},setNodeExtent:y=>{const{nodes:x,nodeLookup:m,parentLookup:b,nodeOrigin:w,elevateNodesOnSelect:S,nodeExtent:E}=p();y[0][0]===E[0][0]&&y[0][1]===E[0][1]&&y[1][0]===E[1][0]&&y[1][1]===E[1][1]||(_b(x,m,b,{nodeOrigin:w,nodeExtent:y,elevateNodesOnSelect:S,checkEquality:!1}),h({nodeExtent:y}))},panBy:y=>{const{transform:x,width:m,height:b,panZoom:w,translateExtent:S}=p();return OF({delta:y,panZoom:w,transform:x,translateExtent:S,width:m,height:b})},cancelConnection:()=>{h({connection:{...nI}})},updateConnection:y=>{h({connection:y})},reset:()=>h({...Gk()})}},Object.is);function fz({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:o,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:l,fitView:u,nodeOrigin:c,nodeExtent:f,children:h}){const[p]=j.useState(()=>dz({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:u,minZoom:s,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:f}));return d.jsx(T7,{value:p,children:d.jsx(e9,{children:h})})}function hz({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:s,fitView:a,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:f,nodeExtent:h}){return j.useContext(iy)?d.jsx(d.Fragment,{children:e}):d.jsx(fz,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:s,fitView:a,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:c,nodeOrigin:f,nodeExtent:h,children:e})}const pz={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function gz({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o,edgeTypes:s,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:m,onNodeMouseEnter:b,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:E,onNodeDoubleClick:A,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:V,onNodesDelete:M,onEdgesDelete:H,onDelete:ee,onSelectionChange:W,onSelectionDragStart:L,onSelectionDrag:q,onSelectionDragStop:Y,onSelectionContextMenu:re,onSelectionStart:D,onSelectionEnd:z,onBeforeDelete:O,connectionMode:K,connectionLineType:se=ua.Bezier,connectionLineStyle:ce,connectionLineComponent:Ce,connectionLineContainerStyle:Ie,deleteKeyCode:Re="Backspace",selectionKeyCode:F="Shift",selectionOnDrag:Z=!1,selectionMode:ie=pf.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Ye=Mg()?"Meta":"Control",zoomActivationKeyCode:ze=Mg()?"Meta":"Control",snapToGrid:ne,snapGrid:fe,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:Ue,nodesDraggable:We,nodesConnectable:Ke,nodesFocusable:he,nodeOrigin:Fe=LI,edgesFocusable:qe,edgesReconnectable:$e,elementsSelectable:At=!0,defaultViewport:fn=W7,minZoom:Ct=.5,maxZoom:tn=2,translateExtent:$=hf,preventScrolling:C=!0,nodeExtent:N,defaultMarkerColor:X="#b1b1b7",zoomOnScroll:de=!0,zoomOnPinch:je=!0,panOnScroll:Be=!1,panOnScrollSpeed:Nt=.5,panOnScrollMode:Vt=yl.Free,zoomOnDoubleClick:it=!0,panOnDrag:Yt=!0,onPaneClick:Ot,onPaneMouseEnter:Qi,onPaneMouseMove:ot,onPaneMouseLeave:Co,onPaneScroll:jo,onPaneContextMenu:Ao,paneClickDistance:os=0,nodeClickDistance:Zi=0,children:Ks,onReconnect:G,onReconnectStart:te,onReconnectEnd:Ze,onEdgeContextMenu:rt,onEdgeDoubleClick:gt,onEdgeMouseEnter:Pt,onEdgeMouseMove:Jt,onEdgeMouseLeave:ss,reconnectRadius:xr=10,onNodesChange:eo,onEdgesChange:No,noDragClassName:Gs="nodrag",noWheelClassName:Hr="nowheel",noPanClassName:Ur="nopan",fitView:fr,fitViewOptions:yi,connectOnClick:to,attributionPosition:Vn,proOptions:_r,defaultEdgeOptions:no,elevateNodesOnSelect:Jl,elevateEdgesOnSelect:Va,disableKeyboardA11y:hn=!1,autoPanOnConnect:$i,autoPanOnNodeDrag:hr,autoPanSpeed:qa,connectionRadius:Wr,isValidConnection:Ys,onError:Ro,style:as,id:Mi,nodeDragThreshold:Ql,viewport:To,onViewportChange:Zl,width:Ht,height:U,colorMode:le="light",debug:J,onScroll:ue,...xe},pe){const Le=Mi||"1",Ge=G7(le),Je=j.useCallback(Xe=>{Xe.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ue==null||ue(Xe)},[ue]);return d.jsx("div",{"data-testid":"rf__wrapper",...xe,onScroll:Je,style:{...as,...pz},ref:pe,className:Xn(["react-flow",i,Ge]),id:Mi,children:d.jsxs(hz,{nodes:e,edges:t,width:Ht,height:U,fitView:fr,fitViewOptions:yi,minZoom:Ct,maxZoom:tn,nodeOrigin:Fe,nodeExtent:N,children:[d.jsx(cz,{onInit:u,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:b,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:E,onNodeDoubleClick:A,nodeTypes:o,edgeTypes:s,connectionLineType:se,connectionLineStyle:ce,connectionLineComponent:Ce,connectionLineContainerStyle:Ie,selectionKeyCode:F,selectionOnDrag:Z,selectionMode:ie,deleteKeyCode:Re,multiSelectionKeyCode:Ye,panActivationKeyCode:De,zoomActivationKeyCode:ze,onlyRenderVisibleElements:Se,defaultViewport:fn,translateExtent:$,minZoom:Ct,maxZoom:tn,preventScrolling:C,zoomOnScroll:de,zoomOnPinch:je,zoomOnDoubleClick:it,panOnScroll:Be,panOnScrollSpeed:Nt,panOnScrollMode:Vt,panOnDrag:Yt,onPaneClick:Ot,onPaneMouseEnter:Qi,onPaneMouseMove:ot,onPaneMouseLeave:Co,onPaneScroll:jo,onPaneContextMenu:Ao,paneClickDistance:os,nodeClickDistance:Zi,onSelectionContextMenu:re,onSelectionStart:D,onSelectionEnd:z,onReconnect:G,onReconnectStart:te,onReconnectEnd:Ze,onEdgeContextMenu:rt,onEdgeDoubleClick:gt,onEdgeMouseEnter:Pt,onEdgeMouseMove:Jt,onEdgeMouseLeave:ss,reconnectRadius:xr,defaultMarkerColor:X,noDragClassName:Gs,noWheelClassName:Hr,noPanClassName:Ur,rfId:Le,disableKeyboardA11y:hn,nodeExtent:N,viewport:To,onViewportChange:Zl}),d.jsx(K7,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:x,onClickConnectEnd:m,nodesDraggable:We,nodesConnectable:Ke,nodesFocusable:he,edgesFocusable:qe,edgesReconnectable:$e,elementsSelectable:At,elevateNodesOnSelect:Jl,elevateEdgesOnSelect:Va,minZoom:Ct,maxZoom:tn,nodeExtent:N,onNodesChange:eo,onEdgesChange:No,snapToGrid:ne,snapGrid:fe,connectionMode:K,translateExtent:$,connectOnClick:to,defaultEdgeOptions:no,fitView:fr,fitViewOptions:yi,onNodesDelete:M,onEdgesDelete:H,onDelete:ee,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:V,onSelectionDrag:q,onSelectionDragStart:L,onSelectionDragStop:Y,onMove:c,onMoveStart:f,onMoveEnd:h,noPanClassName:Ur,nodeOrigin:Fe,rfId:Le,autoPanOnConnect:$i,autoPanOnNodeDrag:hr,autoPanSpeed:qa,onError:Ro,connectionRadius:Wr,isValidConnection:Ys,selectNodesOnDrag:Ue,nodeDragThreshold:Ql,onBeforeDelete:O,paneClickDistance:os,debug:J}),d.jsx(U7,{onSelectionChange:W}),Ks,d.jsx(L7,{proOptions:_r,position:Vn}),d.jsx(M7,{rfId:Le,disableKeyboardA11y:hn})]})})}var mz=HI(gz);function Fr(){const e=_n();return j.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),i=Array.isArray(t)?t:[t],o=new Map;i.forEach(s=>{const a=n==null?void 0:n.querySelector('.react-flow__node[data-id="'.concat(s,'"]'));a&&o.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(o,{triggerFitView:!1}))},[])}const yz=bo.error014();function Eo({id:e,handleType:t,handleId:n,onConnect:r,onDisconnect:i}={}){const o=l1(),s=e!=null?e:o;if(!s)throw new Error(yz);const a=j.useRef(null),l=Qt(u=>u.connectionLookup.get("".concat(s).concat(t?n?"-".concat(t,"-").concat(n):"-".concat(t):"")),lF);return j.useEffect(()=>{if(a.current&&a.current!==l){const u=l!=null?l:new Map;dk(a.current,u,i),dk(u,a.current,r)}a.current=l!=null?l:new Map},[l,r,i]),j.useMemo(()=>{var u;return Array.from((u=l==null?void 0:l.values())!=null?u:[])},[l])}function ay(e){return Qt(j.useCallback(n=>{var s;const r=[],i=Array.isArray(e),o=i?e:[e];for(const a of o){const l=n.nodeLookup.get(a);l&&r.push({id:l.id,type:l.type,data:l.data})}return i?r:(s=r[0])!=null?s:null},[e]),$F)}function vz({dimensions:e,lineWidth:t,variant:n,className:r}){return d.jsx("path",{strokeWidth:t,d:"M".concat(e[0]/2," 0 V").concat(e[1]," M0 ").concat(e[1]/2," H").concat(e[0]),className:Xn(["react-flow__background-pattern",n,r])})}function wz({radius:e,className:t}){return d.jsx("circle",{cx:e,cy:e,r:e,className:Xn(["react-flow__background-pattern","dots",t])})}var xa;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(xa||(xa={}));const bz={[xa.Dots]:1,[xa.Lines]:1,[xa.Cross]:6},xz=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function dP({id:e,variant:t=xa.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=0,color:s,bgColor:a,style:l,className:u,patternClassName:c}){const f=j.useRef(null),{transform:h,patternId:p}=Qt(xz,Ln),v=r||bz[t],y=t===xa.Dots,x=t===xa.Cross,m=Array.isArray(n)?n:[n,n],b=[m[0]*h[2]||1,m[1]*h[2]||1],w=v*h[2],S=Array.isArray(o)?o:[o,o],E=x?[w,w]:b,A=[S[0]*h[2]||1+E[0]/2,S[1]*h[2]||1+E[1]/2],T="".concat(p).concat(e||"");return d.jsxs("svg",{className:Xn(["react-flow__background",u]),style:{...l,...oy,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[d.jsx("pattern",{id:T,x:h[0]%b[0],y:h[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(A[0],",-").concat(A[1],")"),children:y?d.jsx(wz,{radius:w/2,className:c}):d.jsx(vz,{dimensions:E,lineWidth:i,variant:t,className:c})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(T,")")})]})}dP.displayName="Background";const _z=j.memo(dP);function Sz(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ez(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function kz(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Cz(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function jz(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function sp({children:e,className:t,...n}){return d.jsx("button",{type:"button",className:Xn(["react-flow__controls-button",t]),...n,children:e})}const Az=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function fP({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:u,children:c,position:f="bottom-left",orientation:h="vertical","aria-label":p="React Flow controls"}){const v=_n(),{isInteractive:y,minZoomReached:x,maxZoomReached:m}=Qt(Az,Ln),{zoomIn:b,zoomOut:w,fitView:S}=cn(),E=()=>{b(),o==null||o()},A=()=>{w(),s==null||s()},T=()=>{S(i),a==null||a()},P=()=>{v.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)},V=h==="horizontal"?"horizontal":"vertical";return d.jsxs(uh,{className:Xn(["react-flow__controls",V,u]),position:f,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&d.jsxs(d.Fragment,{children:[d.jsx(sp,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m,children:d.jsx(Sz,{})}),d.jsx(sp,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x,children:d.jsx(Ez,{})})]}),n&&d.jsx(sp,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view",children:d.jsx(kz,{})}),r&&d.jsx(sp,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?d.jsx(jz,{}):d.jsx(Cz,{})}),c]})}fP.displayName="Controls";const Nz=j.memo(fP);function Rz({id:e,x:t,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:f,selected:h,onClick:p}){const{background:v,backgroundColor:y}=o||{},x=s||v||y;return d.jsx("rect",{className:Xn(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:x,stroke:a,strokeWidth:l},shapeRendering:f,onClick:p?m=>p(m,e):void 0})}const Tz=j.memo(Rz),Iz=e=>e.nodes.map(t=>t.id),i0=e=>e instanceof Function?e:()=>e;function Pz({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:o=Tz,onClick:s}){const a=Qt(Iz,Ln),l=i0(t),u=i0(e),c=i0(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:a.map(h=>d.jsx($z,{id:h,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:o,onClick:s,shapeRendering:f},h))})}function Oz({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:s,NodeComponent:a,onClick:l}){const{node:u,x:c,y:f,width:h,height:p}=Qt(v=>{const{internals:y}=v.nodeLookup.get(e),x=y.userNode,{x:m,y:b}=y.positionAbsolute,{width:w,height:S}=Us(x);return{node:x,x:m,y:b,width:w,height:S}},Ln);return!u||u.hidden||!cI(u)?null:d.jsx(a,{x:c,y:f,width:h,height:p,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:o,shapeRendering:s,onClick:l,id:u.id})}const $z=j.memo(Oz);var Mz=j.memo(Pz);const Dz=200,Lz=150,Bz=e=>!e.hidden,Fz=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?uI(ah(e.nodeLookup,{filter:Bz}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},zz="react-flow__minimap-desc";function hP({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:f,position:h="bottom-right",onClick:p,onNodeClick:v,pannable:y=!1,zoomable:x=!1,ariaLabel:m="React Flow mini map",inversePan:b,zoomStep:w=10,offsetScale:S=5}){var Ye,ze;const E=_n(),A=j.useRef(null),{boundingRect:T,viewBB:P,rfId:V,panZoom:M,translateExtent:H,flowWidth:ee,flowHeight:W}=Qt(Fz,Ln),L=(Ye=e==null?void 0:e.width)!=null?Ye:Dz,q=(ze=e==null?void 0:e.height)!=null?ze:Lz,Y=T.width/L,re=T.height/q,D=Math.max(Y,re),z=D*L,O=D*q,K=S*D,se=T.x-(z-T.width)/2-K,ce=T.y-(O-T.height)/2-K,Ce=z+K*2,Ie=O+K*2,Re="".concat(zz,"-").concat(V),F=j.useRef(0),Z=j.useRef();F.current=D,j.useEffect(()=>{if(A.current&&M)return Z.current=UF({domNode:A.current,panZoom:M,getTransform:()=>E.getState().transform,getViewScale:()=>F.current}),()=>{var ne;(ne=Z.current)==null||ne.destroy()}},[M]),j.useEffect(()=>{var ne;(ne=Z.current)==null||ne.update({translateExtent:H,width:ee,height:W,inversePan:b,pannable:y,zoomStep:w,zoomable:x})},[y,x,b,w,H,ee,W]);const ie=p?ne=>{var Ue;const[fe,Se]=((Ue=Z.current)==null?void 0:Ue.pointer(ne))||[0,0];p(ne,{x:fe,y:Se})}:void 0,De=v?j.useCallback((ne,fe)=>{const Se=E.getState().nodeLookup.get(fe).internals.userNode;v(ne,Se)},[]):void 0;return d.jsx(uh,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*D:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:Xn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:L,height:q,viewBox:"".concat(se," ").concat(ce," ").concat(Ce," ").concat(Ie),className:"react-flow__minimap-svg",role:"img","aria-labelledby":Re,ref:A,onClick:ie,children:[m&&d.jsx("title",{id:Re,children:m}),d.jsx(Mz,{onClick:De,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),d.jsx("path",{className:"react-flow__minimap-mask",d:"M".concat(se-K,",").concat(ce-K,"h").concat(Ce+K*2,"v").concat(Ie+K*2,"h").concat(-Ce-K*2,"z\n        M").concat(P.x,",").concat(P.y,"h").concat(P.width,"v").concat(P.height,"h").concat(-P.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}hP.displayName="MiniMap";const Hz=j.memo(hP);function Uz({nodeId:e,position:t,variant:n=Dd.Handle,className:r,style:i={},children:o,color:s,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,shouldResize:p,onResizeStart:v,onResize:y,onResizeEnd:x}){const m=l1(),b=typeof e=="string"?e:m,w=_n(),S=j.useRef(null),E=n===Dd.Line?"right":"bottom-right",A=t!=null?t:E,T=j.useRef(null);j.useEffect(()=>{if(!(!S.current||!b))return T.current||(T.current=i7({domNode:S.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:H,transform:ee,snapGrid:W,snapToGrid:L,nodeOrigin:q,domNode:Y}=w.getState();return{nodeLookup:H,transform:ee,snapGrid:W,snapToGrid:L,nodeOrigin:q,paneDomNode:Y}},onChange:(H,ee)=>{var O,K,se,ce,Ce,Ie,Re;const{triggerNodeChanges:W,nodeLookup:L,parentLookup:q,nodeOrigin:Y}=w.getState(),re=[],D={x:H.x,y:H.y},z=L.get(b);if(z&&z.expandParent&&z.parentId){const F=(O=z.origin)!=null?O:Y,Z=(se=(K=H.width)!=null?K:z.measured.width)!=null?se:0,ie=(Ce=(ce=H.height)!=null?ce:z.measured.height)!=null?Ce:0,De={id:z.id,parentId:z.parentId,rect:{width:Z,height:ie,...dI({x:(Ie=H.x)!=null?Ie:z.position.x,y:(Re=H.y)!=null?Re:z.position.y},{width:Z,height:ie},z.parentId,L,F)}},Ye=s1([De],L,q,Y);re.push(...Ye),D.x=H.x?Math.max(F[0]*Z,H.x):void 0,D.y=H.y?Math.max(F[1]*ie,H.y):void 0}if(D.x!==void 0&&D.y!==void 0){const F={id:b,type:"position",position:{...D}};re.push(F)}if(H.width!==void 0&&H.height!==void 0){const Z={id:b,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:H.width,height:H.height}};re.push(Z)}for(const F of ee){const Z={...F,type:"position"};re.push(Z)}W(re)},onEnd:({width:H,height:ee})=>{const W={id:b,type:"dimensions",resizing:!1,dimensions:{width:H,height:ee}};w.getState().triggerNodeChanges([W])}})),T.current.update({controlPosition:A,boundaries:{minWidth:a,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:f,resizeDirection:h,onResizeStart:v,onResize:y,onResizeEnd:x,shouldResize:p}),()=>{var H;(H=T.current)==null||H.destroy()}},[A,a,l,u,c,f,v,y,x,p]);const P=A.split("-"),V=n===Dd.Line?"borderColor":"backgroundColor",M=s?{...i,[V]:s}:i;return d.jsx("div",{className:Xn(["react-flow__resize-control","nodrag",...P,n,r]),ref:S,style:M,children:o})}j.memo(Uz);function Wz({id:e,top:t,left:n,right:r,bottom:i,...o}){const{getNode:s,setNodes:a,addNodes:l,setEdges:u}=cn(),c=j.useCallback(()=>{const p=s(e);if(!p)return;const v={x:p.position.x+50,y:p.position.y+50};l({...p,selected:!1,dragging:!1,id:"".concat(p.id,"-copy"),position:v})},[e,s,l]),f=j.useMemo(()=>{var p;return((p=s(e))==null?void 0:p.type)||""},[e,s]),h=j.useCallback(()=>{a(p=>p.filter(v=>v.id!==e)),u(p=>p.filter(v=>v.source!==e))},[e,a,u]);return d.jsx("div",{style:{position:"absolute",top:t,left:n,right:r,bottom:i,zIndex:9999},className:"context-menu",...o,children:d.jsxs("div",{children:[d.jsxs("p",{children:["node: ",e]}),["entry","output"].includes(f)?d.jsx(d.Fragment,{}):d.jsxs(d.Fragment,{children:[d.jsx("p",{color:"medium",onClick:c,children:"duplicate"}),d.jsx("p",{color:"danger",onClick:h,children:"delete"})]})]})})}function Mr(e=[],t){const n=[];return n.push({id:"1",type:"entry",data:{params:e},position:{x:100,y:100}}),t&&n.push({id:"2",type:"output",data:{param:t},position:{x:250,y:100}}),n}function po(e=[],t=[],n){const r=e.findIndex(o=>o.type==="entry");if(r===-1||(e[r].data.params=t,!n))return e;const i=e.findIndex(o=>o.type==="output");return i===-1||(e[i].data.param=n),e}function Vz(e){switch(e){case"get_system_data":return{path:"",type:"unknown"};case"get_page_data":return{path:"",type:"unknown"};case"get_character_data":return{path:"",type:"unknown"};case"set_system_data":return{path:"",type:"unknown"};case"set_page_data":return{path:"",type:"unknown"};case"set_character_data":return{path:"",type:"unknown"};case"open_modal":return{type:"edit_object",title:"edit object",inputType:""};case"create_data_from_type":return{spreadType:{name:"",properties:[]}};case"spread_object":return{inputType:"unknown"};case"add_to_array":return{inputType:"unknown"};case"array_remove":return{inputType:"unknown"};case"array_update":return{inputType:"unknown"};case"array_get":return{inputType:"unknown"};case"filter":return{inputType:"unknown"};case"map":return{inputType:"unknown"};case"string_new":return{value:""};case"string_includes":return{string1:"",string2:""};case"string_compare":return{string1:"",string2:""};case"string_concat":return{string1:"",string2:""};case"number_to_string":return{number:0};case"new_number":return{value:0};case"add":return{number1:0,number2:0};case"subtract":return{number1:0,number2:0};case"divide":return{number1:0,number2:0};case"multiply":return{number1:0,number2:0};case"floor":return{number:0};case"new_enum":return{value:""};case"enum_compare":return{input:""};case"boolean_new":return{value:!1};case"boolean_branch":return{boolean:!1};case"boolean_inverse":return{};case"blueprint_run":return{params:[],returnType:"none",inputs:{},outputs:{}};default:return null}}function Yk(e,t){return Math.floor(Math.random()*(t-e+1))+e}function qz({top:e,left:t,right:n,bottom:r,rawX:i,rawY:o,...s}){const{addNodes:a,getNodes:l,screenToFlowPosition:u}=cn(),c=j.useCallback(p=>{const v=l(),{x:y,y:x}=u({x:i,y:o});let m=""+Yk(1,2e3);for(;v.find(w=>w.id===m);)m=""+Yk(1,2e3);const b=Vz(p);b&&a({id:m,type:p,data:b,position:{x:y,y:x},selected:!1,dragging:!1})},[a,l,u]),[f,h]=j.useState(-1);return d.jsx("div",{className:"absolute bg-black shadow-lg rounded-md p-2 text-sm context-menu",style:{top:e-50,left:t,right:n,bottom:r,zIndex:9999},...s,children:d.jsxs("ul",{children:[d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(1),onMouseLeave:()=>h(-1),children:["Character",f===1&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_character_data"),children:"Get Character Data"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_character_data"),children:"Set Character Data"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(2),onMouseLeave:()=>h(-1),children:["Page",f===2&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_page_data"),children:"Get Page Data"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_page_data"),children:"Set Page Data"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(3),onMouseLeave:()=>h(-1),children:["System",f===3&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_system_data"),children:"Get System Data"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_system_data"),children:"Set System Data"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(4),onMouseLeave:()=>h(-1),children:["Array",f===4&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_get"),children:"Get Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("add_to_array"),children:"Add Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_remove"),children:"Remove Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_update"),children:"Update Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("filter"),children:"Filter"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("map"),children:"Map"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(5),onMouseLeave:()=>h(-1),children:["Object",f===5&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("spread_object"),children:"Spread Object"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("create_data_from_type"),children:"Create Object From Type"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(6),onMouseLeave:()=>h(-1),children:["String",f===6&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_new"),children:"New String"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_includes"),children:"Includes"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_compare"),children:"Compare"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_concat"),children:"Concat"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(7),onMouseLeave:()=>h(-1),children:["Numbers",f===7&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("new_number"),children:"New Number"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("divide"),children:"Divide"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("add"),children:"Add"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("subtract"),children:"Subtract"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("multiply"),children:"Multiply"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("floor"),children:"Floor"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("number_to_string"),children:"Number To String"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(8),onMouseLeave:()=>h(-1),children:["Enums",f===8&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("new_enum"),children:"New Enum"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("enum_compare"),children:"Compare Enum"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(9),onMouseLeave:()=>h(-1),children:["Booleans",f===9&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_new"),children:"New Boolean"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_branch"),children:"Branch"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_inverse"),children:"Inverse"})]})]}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>c("open_modal"),children:"Open Modal"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>c("blueprint_run"),children:"Run Blueprint"})]})})}const Kz={characterPage:"Info",modalsPage:"Start",creatorPage:"Start",tab:"character",versionId:""},un=Ba(Kz);function Xk(e){un.set(t=>({...t,creatorPage:e}))}function Jk(e){un.set(t=>({...t,characterPage:e}))}function Gz(e){un.set(t=>({...t,tab:e}))}const en=({children:e,title:t})=>d.jsxs("a",{className:"block max-w-sm p-6 bg-white border border-neutral-200 rounded-lg shadow hover:bg-neutral-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700",children:[d.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-neutral-900 dark:text-white",children:t}),d.jsx("div",{className:"font-normal text-neutral-700 dark:text-neutral-400",children:e})]}),dt=j.forwardRef(({id:e,label:t,value:n,onChange:r,children:i,style:o,containerClassName:s,labelClassName:a,className:l},u)=>d.jsxs("div",{className:s||"mb-6",style:o,ref:u,children:[d.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white ".concat(a),children:t}),d.jsx("select",{id:e,className:"".concat(l," bg-neutral-50 border border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-brand-500 dark:focus:border-brand-500"),value:n,onChange:c=>r(c.target.value),children:i})]}));var pP={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hi,function(){var n=function(g,_){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,R){k.__proto__=R}||function(k,R){for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(k[I]=R[I])})(g,_)},r=function(){return(r=Object.assign||function(g){for(var _,k=1,R=arguments.length;k<R;k++)for(var I in _=arguments[k])Object.prototype.hasOwnProperty.call(_,I)&&(g[I]=_[I]);return g}).apply(this,arguments)};function i(g,_,k){for(var R,I=0,B=_.length;I<B;I++)!R&&I in _||((R=R||Array.prototype.slice.call(_,0,I))[I]=_[I]);return g.concat(R||Array.prototype.slice.call(_))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hi,s=Object.keys,a=Array.isArray;function l(g,_){return typeof _!="object"||s(_).forEach(function(k){g[k]=_[k]}),g}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(g,_){return c.call(g,_)}function h(g,_){typeof _=="function"&&(_=_(u(g))),(typeof Reflect>"u"?s:Reflect.ownKeys)(_).forEach(function(k){v(g,k,_[k])})}var p=Object.defineProperty;function v(g,_,k,R){p(g,_,l(k&&f(k,"get")&&typeof k.get=="function"?{get:k.get,set:k.set,configurable:!0}:{value:k,configurable:!0,writable:!0},R))}function y(g){return{from:function(_){return g.prototype=Object.create(_.prototype),v(g.prototype,"constructor",g),{extend:h.bind(null,g.prototype)}}}}var x=Object.getOwnPropertyDescriptor,m=[].slice;function b(g,_,k){return m.call(g,_,k)}function w(g,_){return _(g)}function S(g){if(!g)throw new Error("Assertion Failed")}function E(g){o.setImmediate?setImmediate(g):setTimeout(g,0)}function A(g,_){if(typeof _=="string"&&f(g,_))return g[_];if(!_)return g;if(typeof _!="string"){for(var k=[],R=0,I=_.length;R<I;++R){var B=A(g,_[R]);k.push(B)}return k}var Q=_.indexOf(".");if(Q!==-1){var oe=g[_.substr(0,Q)];return oe==null?void 0:A(oe,_.substr(Q+1))}}function T(g,_,k){if(g&&_!==void 0&&!("isFrozen"in Object&&Object.isFrozen(g)))if(typeof _!="string"&&"length"in _){S(typeof k!="string"&&"length"in k);for(var R=0,I=_.length;R<I;++R)T(g,_[R],k[R])}else{var B,Q,oe=_.indexOf(".");oe!==-1?(B=_.substr(0,oe),(Q=_.substr(oe+1))===""?k===void 0?a(g)&&!isNaN(parseInt(B))?g.splice(B,1):delete g[B]:g[B]=k:T(oe=!(oe=g[B])||!f(g,B)?g[B]={}:oe,Q,k)):k===void 0?a(g)&&!isNaN(parseInt(_))?g.splice(_,1):delete g[_]:g[_]=k}}function P(g){var _,k={};for(_ in g)f(g,_)&&(k[_]=g[_]);return k}var V=[].concat;function M(g){return V.apply([],g)}var tn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(M([8,16,32,64].map(function(g){return["Int","Uint","Float"].map(function(_){return _+g+"Array"})}))).filter(function(g){return o[g]}),H=new Set(tn.map(function(g){return o[g]})),ee=null;function W(g){return ee=new WeakMap,g=function _(k){if(!k||typeof k!="object")return k;var R=ee.get(k);if(R)return R;if(a(k)){R=[],ee.set(k,R);for(var I=0,B=k.length;I<B;++I)R.push(_(k[I]))}else if(H.has(k.constructor))R=k;else{var Q,oe=u(k);for(Q in R=oe===Object.prototype?{}:Object.create(oe),ee.set(k,R),k)f(k,Q)&&(R[Q]=_(k[Q]))}return R}(g),ee=null,g}var L={}.toString;function q(g){return L.call(g).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof Y=="symbol"?function(g){var _;return g!=null&&(_=g[Y])&&_.apply(g)}:function(){return null};function D(g,_){return _=g.indexOf(_),0<=_&&g.splice(_,1),0<=_}var z={};function O(g){var _,k,R,I;if(arguments.length===1){if(a(g))return g.slice();if(this===z&&typeof g=="string")return[g];if(I=re(g)){for(k=[];!(R=I.next()).done;)k.push(R.value);return k}if(g==null)return[g];if(typeof(_=g.length)!="number")return[g];for(k=new Array(_);_--;)k[_]=g[_];return k}for(_=arguments.length,k=new Array(_);_--;)k[_]=arguments[_];return k}var K=typeof Symbol<"u"?function(g){return g[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Di=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ct),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ce(g,_){this.name=g,this.message=_}function Ce(g,_){return g+". Errors: "+Object.keys(_).map(function(k){return _[k].toString()}).filter(function(k,R,I){return I.indexOf(k)===R}).join("\n")}function Ie(g,_,k,R){this.failures=_,this.failedKeys=R,this.successCount=k,this.message=Ce(g,_)}function Re(g,_){this.name="BulkError",this.failures=Object.keys(_).map(function(k){return _[k]}),this.failuresByPos=_,this.message=Ce(g,this.failures)}y(ce).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(Ie).from(ce),y(Re).from(ce);var F=Di.reduce(function(g,_){return g[_]=_+"Error",g},{}),Z=ce,ie=Di.reduce(function(g,_){var k=_+"Error";function R(I,B){this.name=k,I?typeof I=="string"?(this.message="".concat(I).concat(B?"\n "+B:""),this.inner=B||null):typeof I=="object"&&(this.message="".concat(I.name," ").concat(I.message),this.inner=I):(this.message=se[_]||k,this.inner=null)}return y(R).from(Z),g[_]=R,g},{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var De=Ct.reduce(function(g,_){return g[_+"Error"]=ie[_],g},{}),Ye=Di.reduce(function(g,_){return["Syntax","Type","Range"].indexOf(_)===-1&&(g[_+"Error"]=ie[_]),g},{});function ze(){}function ne(g){return g}function fe(g,_){return g==null||g===ne?_:function(k){return _(g(k))}}function Se(g,_){return function(){g.apply(this,arguments),_.apply(this,arguments)}}function Ue(g,_){return g===ze?_:function(){var k=g.apply(this,arguments);k!==void 0&&(arguments[0]=k);var R=this.onsuccess,I=this.onerror;this.onsuccess=null,this.onerror=null;var B=_.apply(this,arguments);return R&&(this.onsuccess=this.onsuccess?Se(R,this.onsuccess):R),I&&(this.onerror=this.onerror?Se(I,this.onerror):I),B!==void 0?B:k}}function We(g,_){return g===ze?_:function(){g.apply(this,arguments);var k=this.onsuccess,R=this.onerror;this.onsuccess=this.onerror=null,_.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?Se(k,this.onsuccess):k),R&&(this.onerror=this.onerror?Se(R,this.onerror):R)}}function Ke(g,_){return g===ze?_:function(k){var R=g.apply(this,arguments);l(k,R);var I=this.onsuccess,B=this.onerror;return this.onsuccess=null,this.onerror=null,k=_.apply(this,arguments),I&&(this.onsuccess=this.onsuccess?Se(I,this.onsuccess):I),B&&(this.onerror=this.onerror?Se(B,this.onerror):B),R===void 0?k===void 0?void 0:k:l(R,k)}}function he(g,_){return g===ze?_:function(){return _.apply(this,arguments)!==!1&&g.apply(this,arguments)}}function Fe(g,_){return g===ze?_:function(){var k=g.apply(this,arguments);if(k&&typeof k.then=="function"){for(var R=this,I=arguments.length,B=new Array(I);I--;)B[I]=arguments[I];return k.then(function(){return _.apply(R,B)})}return _.apply(this,arguments)}}Ye.ModifyError=Ie,Ye.DexieError=ce,Ye.BulkError=Re;var qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $e(g){qe=g}var At={},fn=100,tn=typeof Promise>"u"?[]:function(){var g=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[g,u(g),g];var _=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[_,u(_),g]}(),Ct=tn[0],Di=tn[1],tn=tn[2],Di=Di&&Di.then,$=Ct&&Ct.constructor,C=!!tn,N=function(g,_){Yt.push([g,_]),de&&(queueMicrotask(G),de=!1)},X=!0,de=!0,je=[],Be=[],Nt=ne,Vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ze,pgp:!1,env:{},finalize:ze},it=Vt,Yt=[],Ot=0,Qi=[];function ot(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var _=this._PSD=it;if(typeof g!="function"){if(g!==At)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ao(this,this._value))}this._state=null,this._value=null,++_.ref,function k(R,I){try{I(function(B){if(R._state===null){if(B===R)throw new TypeError("A promise cannot be resolved with itself.");var Q=R._lib&&te();B&&typeof B.then=="function"?k(R,function(oe,ge){B instanceof ot?B._then(oe,ge):B.then(oe,ge)}):(R._state=!0,R._value=B,os(R)),Q&&Ze()}},Ao.bind(null,R))}catch(B){Ao(R,B)}}(this,g)}var Co={get:function(){var g=it,_=No;function k(R,I){var B=this,Q=!g.global&&(g!==it||_!==No),oe=Q&&!fr(),ge=new ot(function(ve,_e){Zi(B,new jo(Jl(R,g,Q,oe),Jl(I,g,Q,oe),ve,_e,g))});return this._consoleTask&&(ge._consoleTask=this._consoleTask),ge}return k.prototype=At,k},set:function(g){v(this,"then",g&&g.prototype===At?Co:{get:function(){return g},set:Co.set})}};function jo(g,_,k,R,I){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof _=="function"?_:null,this.resolve=k,this.reject=R,this.psd=I}function Ao(g,_){var k,R;Be.push(_),g._state===null&&(k=g._lib&&te(),_=Nt(_),g._state=!1,g._value=_,R=g,je.some(function(I){return I._value===R._value})||je.push(R),os(g),k&&Ze())}function os(g){var _=g._listeners;g._listeners=[];for(var k=0,R=_.length;k<R;++k)Zi(g,_[k]);var I=g._PSD;--I.ref||I.finalize(),Ot===0&&(++Ot,N(function(){--Ot==0&&rt()},[]))}function Zi(g,_){if(g._state!==null){var k=g._state?_.onFulfilled:_.onRejected;if(k===null)return(g._state?_.resolve:_.reject)(g._value);++_.psd.ref,++Ot,N(Ks,[k,g,_])}else g._listeners.push(_)}function Ks(g,_,k){try{var R,I=_._value;!_._state&&Be.length&&(Be=[]),R=qe&&_._consoleTask?_._consoleTask.run(function(){return g(I)}):g(I),_._state||Be.indexOf(I)!==-1||function(B){for(var Q=je.length;Q;)if(je[--Q]._value===B._value)return je.splice(Q,1)}(_),k.resolve(R)}catch(B){k.reject(B)}finally{--Ot==0&&rt(),--k.psd.ref||k.psd.finalize()}}function G(){no(Vt,function(){te()&&Ze()})}function te(){var g=X;return de=X=!1,g}function Ze(){var g,_,k;do for(;0<Yt.length;)for(g=Yt,Yt=[],k=g.length,_=0;_<k;++_){var R=g[_];R[0].apply(null,R[1])}while(0<Yt.length);de=X=!0}function rt(){var g=je;je=[],g.forEach(function(R){R._PSD.onunhandled.call(null,R._value,R)});for(var _=Qi.slice(0),k=_.length;k;)_[--k]()}function gt(g){return new ot(At,!1,g)}function Pt(g,_){var k=it;return function(){var R=te(),I=it;try{return Vn(k,!0),g.apply(this,arguments)}catch(B){_&&_(B)}finally{Vn(I,!1),R&&Ze()}}}h(ot.prototype,{then:Co,_then:function(g,_){Zi(this,new jo(null,null,g,_,it))},catch:function(g){if(arguments.length===1)return this.then(null,g);var _=g,k=arguments[1];return typeof _=="function"?this.then(null,function(R){return(R instanceof _?k:gt)(R)}):this.then(null,function(R){return(R&&R.name===_?k:gt)(R)})},finally:function(g){return this.then(function(_){return ot.resolve(g()).then(function(){return _})},function(_){return ot.resolve(g()).then(function(){return gt(_)})})},timeout:function(g,_){var k=this;return g<1/0?new ot(function(R,I){var B=setTimeout(function(){return I(new ie.Timeout(_))},g);k.then(R,I).finally(clearTimeout.bind(null,B))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(ot.prototype,Symbol.toStringTag,"Dexie.Promise"),Vt.env=_r(),h(ot,{all:function(){var g=O.apply(null,arguments).map(yi);return new ot(function(_,k){g.length===0&&_([]);var R=g.length;g.forEach(function(I,B){return ot.resolve(I).then(function(Q){g[B]=Q,--R||_(g)},k)})})},resolve:function(g){return g instanceof ot?g:g&&typeof g.then=="function"?new ot(function(_,k){g.then(_,k)}):new ot(At,!0,g)},reject:gt,race:function(){var g=O.apply(null,arguments).map(yi);return new ot(function(_,k){g.map(function(R){return ot.resolve(R).then(_,k)})})},PSD:{get:function(){return it},set:function(g){return it=g}},totalEchoes:{get:function(){return No}},newPSD:Hr,usePSD:no,scheduler:{get:function(){return N},set:function(g){N=g}},rejectionMapper:{get:function(){return Nt},set:function(g){Nt=g}},follow:function(g,_){return new ot(function(k,R){return Hr(function(I,B){var Q=it;Q.unhandleds=[],Q.onunhandled=B,Q.finalize=Se(function(){var oe,ge=this;oe=function(){ge.unhandleds.length===0?I():B(ge.unhandleds[0])},Qi.push(function ve(){oe(),Qi.splice(Qi.indexOf(ve),1)}),++Ot,N(function(){--Ot==0&&rt()},[])},Q.finalize),g()},_,k,R)})}}),$&&($.allSettled&&v(ot,"allSettled",function(){var g=O.apply(null,arguments).map(yi);return new ot(function(_){g.length===0&&_([]);var k=g.length,R=new Array(k);g.forEach(function(I,B){return ot.resolve(I).then(function(Q){return R[B]={status:"fulfilled",value:Q}},function(Q){return R[B]={status:"rejected",reason:Q}}).then(function(){return--k||_(R)})})})}),$.any&&typeof AggregateError<"u"&&v(ot,"any",function(){var g=O.apply(null,arguments).map(yi);return new ot(function(_,k){g.length===0&&k(new AggregateError([]));var R=g.length,I=new Array(R);g.forEach(function(B,Q){return ot.resolve(B).then(function(oe){return _(oe)},function(oe){I[Q]=oe,--R||k(new AggregateError(I))})})})}),$.withResolvers&&(ot.withResolvers=$.withResolvers));var Jt={awaits:0,echoes:0,id:0},ss=0,xr=[],eo=0,No=0,Gs=0;function Hr(g,_,k,R){var I=it,B=Object.create(I);return B.parent=I,B.ref=0,B.global=!1,B.id=++Gs,Vt.env,B.env=C?{Promise:ot,PromiseProp:{value:ot,configurable:!0,writable:!0},all:ot.all,race:ot.race,allSettled:ot.allSettled,any:ot.any,resolve:ot.resolve,reject:ot.reject}:{},_&&l(B,_),++I.ref,B.finalize=function(){--this.parent.ref||this.parent.finalize()},R=no(B,g,k,R),B.ref===0&&B.finalize(),R}function Ur(){return Jt.id||(Jt.id=++ss),++Jt.awaits,Jt.echoes+=fn,Jt.id}function fr(){return!!Jt.awaits&&(--Jt.awaits==0&&(Jt.id=0),Jt.echoes=Jt.awaits*fn,!0)}function yi(g){return Jt.echoes&&g&&g.constructor===$?(Ur(),g.then(function(_){return fr(),_},function(_){return fr(),hn(_)})):g}function to(){var g=xr[xr.length-1];xr.pop(),Vn(g,!1)}function Vn(g,_){var k,R=it;(_?!Jt.echoes||eo++&&g===it:!eo||--eo&&g===it)||queueMicrotask(_?(function(I){++No,Jt.echoes&&--Jt.echoes!=0||(Jt.echoes=Jt.awaits=Jt.id=0),xr.push(it),Vn(I,!0)}).bind(null,g):to),g!==it&&(it=g,R===Vt&&(Vt.env=_r()),C&&(k=Vt.env.Promise,_=g.env,(R.global||g.global)&&(Object.defineProperty(o,"Promise",_.PromiseProp),k.all=_.all,k.race=_.race,k.resolve=_.resolve,k.reject=_.reject,_.allSettled&&(k.allSettled=_.allSettled),_.any&&(k.any=_.any))))}function _r(){var g=o.Promise;return C?{Promise:g,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:g.all,race:g.race,allSettled:g.allSettled,any:g.any,resolve:g.resolve,reject:g.reject}:{}}function no(g,_,k,R,I){var B=it;try{return Vn(g,!0),_(k,R,I)}finally{Vn(B,!1)}}function Jl(g,_,k,R){return typeof g!="function"?g:function(){var I=it;k&&Ur(),Vn(_,!0);try{return g.apply(this,arguments)}finally{Vn(I,!1),R&&queueMicrotask(fr)}}}function Va(g){Promise===$&&Jt.echoes===0?eo===0?g():enqueueNativeMicroTask(g):setTimeout(g,0)}(""+Di).indexOf("[native code]")===-1&&(Ur=fr=ze);var hn=ot.reject,$i="",hr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qa="String expected.",Wr=[],Ys="__dbnames",Ro="readonly",as="readwrite";function Mi(g,_){return g?_?function(){return g.apply(this,arguments)&&_.apply(this,arguments)}:g:_}var Ql={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function To(g){return typeof g!="string"||/\./.test(g)?function(_){return _}:function(_){return _[g]===void 0&&g in _&&delete(_=W(_))[g],_}}function Zl(){throw ie.Type()}function Ht(g,_){try{var k=U(g),R=U(_);if(k!==R)return k==="Array"?1:R==="Array"?-1:k==="binary"?1:R==="binary"?-1:k==="string"?1:R==="string"?-1:k==="Date"?1:R!=="Date"?NaN:-1;switch(k){case"number":case"Date":case"string":return _<g?1:g<_?-1:0;case"binary":return function(I,B){for(var Q=I.length,oe=B.length,ge=Q<oe?Q:oe,ve=0;ve<ge;++ve)if(I[ve]!==B[ve])return I[ve]<B[ve]?-1:1;return Q===oe?0:Q<oe?-1:1}(le(g),le(_));case"Array":return function(I,B){for(var Q=I.length,oe=B.length,ge=Q<oe?Q:oe,ve=0;ve<ge;++ve){var _e=Ht(I[ve],B[ve]);if(_e!==0)return _e}return Q===oe?0:Q<oe?-1:1}(g,_)}}catch(I){}return NaN}function U(g){var _=typeof g;return _!="object"?_:ArrayBuffer.isView(g)?"binary":(g=q(g),g==="ArrayBuffer"?"binary":g)}function le(g){return g instanceof Uint8Array?g:ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g)}var J=(ue.prototype._trans=function(g,_,k){var R=this._tx||it.trans,I=this.name,B=qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function Q(ve,_e,ae){if(!ae.schema[I])throw new ie.NotFound("Table "+I+" not part of transaction");return _(ae.idbtrans,ae)}var oe=te();try{var ge=R&&R.db._novip===this.db._novip?R===it.trans?R._promise(g,Q,k):Hr(function(){return R._promise(g,Q,k)},{trans:R,transless:it.transless||it}):function ve(_e,ae,ke,me){if(_e.idbdb&&(_e._state.openComplete||it.letThrough||_e._vip)){var be=_e._createTransaction(ae,ke,_e._dbSchema);try{be.create(),_e._state.PR1398_maxLoop=3}catch(Ee){return Ee.name===F.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return ve(_e,ae,ke,me)})):hn(Ee)}return be._promise(ae,function(Ee,we){return Hr(function(){return it.trans=be,me(Ee,we,be)})}).then(function(Ee){if(ae==="readwrite")try{be.idbtrans.commit()}catch(we){}return ae==="readonly"?Ee:be._completion.then(function(){return Ee})})}if(_e._state.openComplete)return hn(new ie.DatabaseClosed(_e._state.dbOpenError));if(!_e._state.isBeingOpened){if(!_e._state.autoOpen)return hn(new ie.DatabaseClosed);_e.open().catch(ze)}return _e._state.dbReadyPromise.then(function(){return ve(_e,ae,ke,me)})}(this.db,g,[this.name],Q);return B&&(ge._consoleTask=B,ge=ge.catch(function(ve){return console.trace(ve),hn(ve)})),ge}finally{oe&&Ze()}},ue.prototype.get=function(g,_){var k=this;return g&&g.constructor===Object?this.where(g).first(_):g==null?hn(new ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(R){return k.core.get({trans:R,key:g}).then(function(I){return k.hook.reading.fire(I)})}).then(_)},ue.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(a(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var _=s(g);if(_.length===1)return this.where(_[0]).equals(g[_[0]]);var k=this.schema.indexes.concat(this.schema.primKey).filter(function(oe){if(oe.compound&&_.every(function(ve){return 0<=oe.keyPath.indexOf(ve)})){for(var ge=0;ge<_.length;++ge)if(_.indexOf(oe.keyPath[ge])===-1)return!1;return!0}return!1}).sort(function(oe,ge){return oe.keyPath.length-ge.keyPath.length})[0];if(k&&this.db._maxKey!==$i){var B=k.keyPath.slice(0,_.length);return this.where(B).equals(B.map(function(ge){return g[ge]}))}!k&&qe&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(_.join("+"),"]"));var R=this.schema.idxByName;function I(oe,ge){return Ht(oe,ge)===0}var Q=_.reduce(function(ae,ge){var ve=ae[0],_e=ae[1],ae=R[ge],ke=g[ge];return[ve||ae,ve||!ae?Mi(_e,ae&&ae.multi?function(me){return me=A(me,ge),a(me)&&me.some(function(be){return I(ke,be)})}:function(me){return I(ke,A(me,ge))}):_e]},[null,null]),B=Q[0],Q=Q[1];return B?this.where(B.name).equals(g[B.keyPath]).filter(Q):k?this.filter(Q):this.where(_).equals("")},ue.prototype.filter=function(g){return this.toCollection().and(g)},ue.prototype.count=function(g){return this.toCollection().count(g)},ue.prototype.offset=function(g){return this.toCollection().offset(g)},ue.prototype.limit=function(g){return this.toCollection().limit(g)},ue.prototype.each=function(g){return this.toCollection().each(g)},ue.prototype.toArray=function(g){return this.toCollection().toArray(g)},ue.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ue.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,a(g)?"[".concat(g.join("+"),"]"):g))},ue.prototype.reverse=function(){return this.toCollection().reverse()},ue.prototype.mapToClass=function(g){var _,k=this.db,R=this.name;function I(){return _!==null&&_.apply(this,arguments)||this}(this.schema.mappedClass=g).prototype instanceof Zl&&(function(ge,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");function _e(){this.constructor=ge}n(ge,ve),ge.prototype=ve===null?Object.create(ve):(_e.prototype=ve.prototype,new _e)}(I,_=g),Object.defineProperty(I.prototype,"db",{get:function(){return k},enumerable:!1,configurable:!0}),I.prototype.table=function(){return R},g=I);for(var B=new Set,Q=g.prototype;Q;Q=u(Q))Object.getOwnPropertyNames(Q).forEach(function(ge){return B.add(ge)});function oe(ge){if(!ge)return ge;var ve,_e=Object.create(g.prototype);for(ve in ge)if(!B.has(ve))try{_e[ve]=ge[ve]}catch(ae){}return _e}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=oe,this.hook("reading",oe),g},ue.prototype.defineClass=function(){return this.mapToClass(function(g){l(this,g)})},ue.prototype.add=function(g,_){var k=this,R=this.schema.primKey,I=R.auto,B=R.keyPath,Q=g;return B&&I&&(Q=To(B)(g)),this._trans("readwrite",function(oe){return k.core.mutate({trans:oe,type:"add",keys:_!=null?[_]:null,values:[Q]})}).then(function(oe){return oe.numFailures?ot.reject(oe.failures[0]):oe.lastResult}).then(function(oe){if(B)try{T(g,B,oe)}catch(ge){}return oe})},ue.prototype.update=function(g,_){return typeof g!="object"||a(g)?this.where(":id").equals(g).modify(_):(g=A(g,this.schema.primKey.keyPath),g===void 0?hn(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(g).modify(_))},ue.prototype.put=function(g,_){var k=this,R=this.schema.primKey,I=R.auto,B=R.keyPath,Q=g;return B&&I&&(Q=To(B)(g)),this._trans("readwrite",function(oe){return k.core.mutate({trans:oe,type:"put",values:[Q],keys:_!=null?[_]:null})}).then(function(oe){return oe.numFailures?ot.reject(oe.failures[0]):oe.lastResult}).then(function(oe){if(B)try{T(g,B,oe)}catch(ge){}return oe})},ue.prototype.delete=function(g){var _=this;return this._trans("readwrite",function(k){return _.core.mutate({trans:k,type:"delete",keys:[g]})}).then(function(k){return k.numFailures?ot.reject(k.failures[0]):void 0})},ue.prototype.clear=function(){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"deleteRange",range:Ql})}).then(function(_){return _.numFailures?ot.reject(_.failures[0]):void 0})},ue.prototype.bulkGet=function(g){var _=this;return this._trans("readonly",function(k){return _.core.getMany({keys:g,trans:k}).then(function(R){return R.map(function(I){return _.hook.reading.fire(I)})})})},ue.prototype.bulkAdd=function(g,_,k){var R=this,I=Array.isArray(_)?_:void 0,B=(k=k||(I?void 0:_))?k.allKeys:void 0;return this._trans("readwrite",function(Q){var ve=R.schema.primKey,oe=ve.auto,ve=ve.keyPath;if(ve&&I)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(I&&I.length!==g.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var ge=g.length,ve=ve&&oe?g.map(To(ve)):g;return R.core.mutate({trans:Q,type:"add",keys:I,values:ve,wantResults:B}).then(function(be){var ae=be.numFailures,ke=be.results,me=be.lastResult,be=be.failures;if(ae===0)return B?ke:me;throw new Re("".concat(R.name,".bulkAdd(): ").concat(ae," of ").concat(ge," operations failed"),be)})})},ue.prototype.bulkPut=function(g,_,k){var R=this,I=Array.isArray(_)?_:void 0,B=(k=k||(I?void 0:_))?k.allKeys:void 0;return this._trans("readwrite",function(Q){var ve=R.schema.primKey,oe=ve.auto,ve=ve.keyPath;if(ve&&I)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(I&&I.length!==g.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var ge=g.length,ve=ve&&oe?g.map(To(ve)):g;return R.core.mutate({trans:Q,type:"put",keys:I,values:ve,wantResults:B}).then(function(be){var ae=be.numFailures,ke=be.results,me=be.lastResult,be=be.failures;if(ae===0)return B?ke:me;throw new Re("".concat(R.name,".bulkPut(): ").concat(ae," of ").concat(ge," operations failed"),be)})})},ue.prototype.bulkUpdate=function(g){var _=this,k=this.core,R=g.map(function(Q){return Q.key}),I=g.map(function(Q){return Q.changes}),B=[];return this._trans("readwrite",function(Q){return k.getMany({trans:Q,keys:R,cache:"clone"}).then(function(oe){var ge=[],ve=[];g.forEach(function(ae,ke){var me=ae.key,be=ae.changes,Ee=oe[ke];if(Ee){for(var we=0,Ae=Object.keys(be);we<Ae.length;we++){var Pe=Ae[we],Oe=be[Pe];if(Pe===_.schema.primKey.keyPath){if(Ht(Oe,me)!==0)throw new ie.Constraint("Cannot update primary key in bulkUpdate()")}else T(Ee,Pe,Oe)}B.push(ke),ge.push(me),ve.push(Ee)}});var _e=ge.length;return k.mutate({trans:Q,type:"put",keys:ge,values:ve,updates:{keys:R,changeSpecs:I}}).then(function(ae){var ke=ae.numFailures,me=ae.failures;if(ke===0)return _e;for(var be=0,Ee=Object.keys(me);be<Ee.length;be++){var we,Ae=Ee[be],Pe=B[Number(Ae)];Pe!=null&&(we=me[Ae],delete me[Ae],me[Pe]=we)}throw new Re("".concat(_.name,".bulkUpdate(): ").concat(ke," of ").concat(_e," operations failed"),me)})})})},ue.prototype.bulkDelete=function(g){var _=this,k=g.length;return this._trans("readwrite",function(R){return _.core.mutate({trans:R,type:"delete",keys:g})}).then(function(Q){var I=Q.numFailures,B=Q.lastResult,Q=Q.failures;if(I===0)return B;throw new Re("".concat(_.name,".bulkDelete(): ").concat(I," of ").concat(k," operations failed"),Q)})},ue);function ue(){}function xe(g){function _(Q,oe){if(oe){for(var ge=arguments.length,ve=new Array(ge-1);--ge;)ve[ge-1]=arguments[ge];return k[Q].subscribe.apply(null,ve),g}if(typeof Q=="string")return k[Q]}var k={};_.addEventType=B;for(var R=1,I=arguments.length;R<I;++R)B(arguments[R]);return _;function B(Q,oe,ge){if(typeof Q!="object"){var ve;oe=oe||he;var _e={subscribers:[],fire:ge=ge||ze,subscribe:function(ae){_e.subscribers.indexOf(ae)===-1&&(_e.subscribers.push(ae),_e.fire=oe(_e.fire,ae))},unsubscribe:function(ae){_e.subscribers=_e.subscribers.filter(function(ke){return ke!==ae}),_e.fire=_e.subscribers.reduce(oe,ge)}};return k[Q]=_[Q]=_e}s(ve=Q).forEach(function(ae){var ke=ve[ae];if(a(ke))B(ae,ve[ae][0],ve[ae][1]);else{if(ke!=="asap")throw new ie.InvalidArgument("Invalid event config");var me=B(ae,ne,function(){for(var be=arguments.length,Ee=new Array(be);be--;)Ee[be]=arguments[be];me.subscribers.forEach(function(we){E(function(){we.apply(null,Ee)})})})}})}}function pe(g,_){return y(_).from({prototype:g}),_}function Le(g,_){return!(g.filter||g.algorithm||g.or)&&(_?g.justLimit:!g.replayFilter)}function Ge(g,_){g.filter=Mi(g.filter,_)}function Je(g,_,k){var R=g.replayFilter;g.replayFilter=R?function(){return Mi(R(),_())}:_,g.justLimit=k&&!R}function Xe(g,_){if(g.isPrimKey)return _.primaryKey;var k=_.getIndexByKeyPath(g.index);if(!k)throw new ie.Schema("KeyPath "+g.index+" on object store "+_.name+" is not indexed");return k}function st(g,_,k){var R=Xe(g,_.schema);return _.openCursor({trans:k,values:!g.keysOnly,reverse:g.dir==="prev",unique:!!g.unique,query:{index:R,range:g.range}})}function xt(g,_,k,R){var I=g.replayFilter?Mi(g.filter,g.replayFilter()):g.filter;if(g.or){var B={},Q=function(oe,ge,ve){var _e,ae;I&&!I(ge,ve,function(ke){return ge.stop(ke)},function(ke){return ge.fail(ke)})||((ae=""+(_e=ge.primaryKey))=="[object ArrayBuffer]"&&(ae=""+new Uint8Array(_e)),f(B,ae)||(B[ae]=!0,_(oe,ge,ve)))};return Promise.all([g.or._iterate(Q,k),Bt(st(g,R,k),g.algorithm,Q,!g.keysOnly&&g.valueMapper)])}return Bt(st(g,R,k),Mi(g.algorithm,I),_,!g.keysOnly&&g.valueMapper)}function Bt(g,_,k,R){var I=Pt(R?function(B,Q,oe){return k(R(B),Q,oe)}:k);return g.then(function(B){if(B)return B.start(function(){var Q=function(){return B.continue()};_&&!_(B,function(oe){return Q=oe},function(oe){B.stop(oe),Q=ze},function(oe){B.fail(oe),Q=ze})||I(B.value,B,function(oe){return Q=oe}),Q()})})}var Xt=(rn.prototype.execute=function(g){var _=this["@@propmod"];if(_.add!==void 0){var k=_.add;if(a(k))return i(i([],a(g)?g:[],!0),k).sort();if(typeof k=="number")return(Number(g)||0)+k;if(typeof k=="bigint")try{return BigInt(g)+k}catch(I){return BigInt(0)+k}throw new TypeError("Invalid term ".concat(k))}if(_.remove!==void 0){var R=_.remove;if(a(R))return a(g)?g.filter(function(I){return!R.includes(I)}).sort():[];if(typeof R=="number")return Number(g)-R;if(typeof R=="bigint")try{return BigInt(g)-R}catch(I){return BigInt(0)-R}throw new TypeError("Invalid subtrahend ".concat(R))}return k=(k=_.replacePrefix)===null||k===void 0?void 0:k[0],k&&typeof g=="string"&&g.startsWith(k)?_.replacePrefix[1]+g.substring(k.length):g},rn);function rn(g){this["@@propmod"]=g}var Pn=(jt.prototype._read=function(g,_){var k=this._ctx;return k.error?k.table._trans(null,hn.bind(null,k.error)):k.table._trans("readonly",g).then(_)},jt.prototype._write=function(g){var _=this._ctx;return _.error?_.table._trans(null,hn.bind(null,_.error)):_.table._trans("readwrite",g,"locked")},jt.prototype._addAlgorithm=function(g){var _=this._ctx;_.algorithm=Mi(_.algorithm,g)},jt.prototype._iterate=function(g,_){return xt(this._ctx,g,_,this._ctx.table.core)},jt.prototype.clone=function(g){var _=Object.create(this.constructor.prototype),k=Object.create(this._ctx);return g&&l(k,g),_._ctx=k,_},jt.prototype.raw=function(){return this._ctx.valueMapper=null,this},jt.prototype.each=function(g){var _=this._ctx;return this._read(function(k){return xt(_,g,k,_.table.core)})},jt.prototype.count=function(g){var _=this;return this._read(function(k){var R=_._ctx,I=R.table.core;if(Le(R,!0))return I.count({trans:k,query:{index:Xe(R,I.schema),range:R.range}}).then(function(Q){return Math.min(Q,R.limit)});var B=0;return xt(R,function(){return++B,!1},k,I).then(function(){return B})}).then(g)},jt.prototype.sortBy=function(g,_){var k=g.split(".").reverse(),R=k[0],I=k.length-1;function B(ge,ve){return ve?B(ge[k[ve]],ve-1):ge[R]}var Q=this._ctx.dir==="next"?1:-1;function oe(ge,ve){return Ht(B(ge,I),B(ve,I))*Q}return this.toArray(function(ge){return ge.sort(oe)}).then(_)},jt.prototype.toArray=function(g){var _=this;return this._read(function(k){var R=_._ctx;if(R.dir==="next"&&Le(R,!0)&&0<R.limit){var I=R.valueMapper,B=Xe(R,R.table.core.schema);return R.table.core.query({trans:k,limit:R.limit,values:!0,query:{index:B,range:R.range}}).then(function(oe){return oe=oe.result,I?oe.map(I):oe})}var Q=[];return xt(R,function(oe){return Q.push(oe)},k,R.table.core).then(function(){return Q})},g)},jt.prototype.offset=function(g){var _=this._ctx;return g<=0||(_.offset+=g,Le(_)?Je(_,function(){var k=g;return function(R,I){return k===0||(k===1?--k:I(function(){R.advance(k),k=0}),!1)}}):Je(_,function(){var k=g;return function(){return--k<0}})),this},jt.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),Je(this._ctx,function(){var _=g;return function(k,R,I){return--_<=0&&R(I),0<=_}},!0),this},jt.prototype.until=function(g,_){return Ge(this._ctx,function(k,R,I){return!g(k.value)||(R(I),_)}),this},jt.prototype.first=function(g){return this.limit(1).toArray(function(_){return _[0]}).then(g)},jt.prototype.last=function(g){return this.reverse().first(g)},jt.prototype.filter=function(g){var _;return Ge(this._ctx,function(k){return g(k.value)}),(_=this._ctx).isMatch=Mi(_.isMatch,g),this},jt.prototype.and=function(g){return this.filter(g)},jt.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},jt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},jt.prototype.desc=function(){return this.reverse()},jt.prototype.eachKey=function(g){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(k,R){g(R.key,R)})},jt.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},jt.prototype.eachPrimaryKey=function(g){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(k,R){g(R.primaryKey,R)})},jt.prototype.keys=function(g){var _=this._ctx;_.keysOnly=!_.isMatch;var k=[];return this.each(function(R,I){k.push(I.key)}).then(function(){return k}).then(g)},jt.prototype.primaryKeys=function(g){var _=this._ctx;if(_.dir==="next"&&Le(_,!0)&&0<_.limit)return this._read(function(R){var I=Xe(_,_.table.core.schema);return _.table.core.query({trans:R,values:!1,limit:_.limit,query:{index:I,range:_.range}})}).then(function(R){return R.result}).then(g);_.keysOnly=!_.isMatch;var k=[];return this.each(function(R,I){k.push(I.primaryKey)}).then(function(){return k}).then(g)},jt.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},jt.prototype.firstKey=function(g){return this.limit(1).keys(function(_){return _[0]}).then(g)},jt.prototype.lastKey=function(g){return this.reverse().firstKey(g)},jt.prototype.distinct=function(){var g=this._ctx,g=g.index&&g.table.schema.idxByName[g.index];if(!g||!g.multi)return this;var _={};return Ge(this._ctx,function(I){var R=I.primaryKey.toString(),I=f(_,R);return _[R]=!0,!I}),this},jt.prototype.modify=function(g){var _=this,k=this._ctx;return this._write(function(R){var I,B,Q;Q=typeof g=="function"?g:(I=s(g),B=I.length,function(we){for(var Ae=!1,Pe=0;Pe<B;++Pe){var Oe=I[Pe],He=g[Oe],tt=A(we,Oe);He instanceof Xt?(T(we,Oe,He.execute(tt)),Ae=!0):tt!==He&&(T(we,Oe,He),Ae=!0)}return Ae});var oe=k.table.core,ae=oe.schema.primaryKey,ge=ae.outbound,ve=ae.extractKey,_e=200,ae=_.db._options.modifyChunkSize;ae&&(_e=typeof ae=="object"?ae[oe.name]||ae["*"]||200:ae);function ke(we,Oe){var Pe=Oe.failures,Oe=Oe.numFailures;be+=we-Oe;for(var He=0,tt=s(Pe);He<tt.length;He++){var ct=tt[He];me.push(Pe[ct])}}var me=[],be=0,Ee=[];return _.clone().primaryKeys().then(function(we){function Ae(Oe){var He=Math.min(_e,we.length-Oe);return oe.getMany({trans:R,keys:we.slice(Oe,Oe+He),cache:"immutable"}).then(function(tt){for(var ct=[],nt=[],at=ge?[]:null,ft=[],ut=0;ut<He;++ut){var wt=tt[ut],Mt={value:W(wt),primKey:we[Oe+ut]};Q.call(Mt,Mt.value,Mt)!==!1&&(Mt.value==null?ft.push(we[Oe+ut]):ge||Ht(ve(wt),ve(Mt.value))===0?(nt.push(Mt.value),ge&&at.push(we[Oe+ut])):(ft.push(we[Oe+ut]),ct.push(Mt.value)))}return Promise.resolve(0<ct.length&&oe.mutate({trans:R,type:"add",values:ct}).then(function(Ut){for(var Wt in Ut.failures)ft.splice(parseInt(Wt),1);ke(ct.length,Ut)})).then(function(){return(0<nt.length||Pe&&typeof g=="object")&&oe.mutate({trans:R,type:"put",keys:at,values:nt,criteria:Pe,changeSpec:typeof g!="function"&&g,isAdditionalChunk:0<Oe}).then(function(Ut){return ke(nt.length,Ut)})}).then(function(){return(0<ft.length||Pe&&g===Sr)&&oe.mutate({trans:R,type:"delete",keys:ft,criteria:Pe,isAdditionalChunk:0<Oe}).then(function(Ut){return ke(ft.length,Ut)})}).then(function(){return we.length>Oe+He&&Ae(Oe+_e)})})}var Pe=Le(k)&&k.limit===1/0&&(typeof g!="function"||g===Sr)&&{index:k.index,range:k.range};return Ae(0).then(function(){if(0<me.length)throw new Ie("Error modifying one or more objects",me,be,Ee);return we.length})})})},jt.prototype.delete=function(){var g=this._ctx,_=g.range;return Le(g)&&(g.isPrimKey||_.type===3)?this._write(function(k){var R=g.table.core.schema.primaryKey,I=_;return g.table.core.count({trans:k,query:{index:R,range:I}}).then(function(B){return g.table.core.mutate({trans:k,type:"deleteRange",range:I}).then(function(Q){var oe=Q.failures;if(Q.lastResult,Q.results,Q=Q.numFailures,Q)throw new Ie("Could not delete some values",Object.keys(oe).map(function(ge){return oe[ge]}),B-Q);return B-Q})})}):this.modify(Sr)},jt);function jt(){}var Sr=function(g,_){return _.value=null};function Ka(g,_){return g<_?-1:g===_?0:1}function Pc(g,_){return _<g?-1:g===_?0:1}function Vr(g,_,k){return g=g instanceof $c?new g.Collection(g):g,g._ctx.error=new(k||TypeError)(_),g}function Io(g){return new g.Collection(g,function(){return bh("")}).limit(0)}function Oc(g,_,k,R){var I,B,Q,oe,ge,ve,_e,ae=k.length;if(!k.every(function(be){return typeof be=="string"}))return Vr(g,qa);function ke(be){I=be==="next"?function(we){return we.toUpperCase()}:function(we){return we.toLowerCase()},B=be==="next"?function(we){return we.toLowerCase()}:function(we){return we.toUpperCase()},Q=be==="next"?Ka:Pc;var Ee=k.map(function(we){return{lower:B(we),upper:I(we)}}).sort(function(we,Ae){return Q(we.lower,Ae.lower)});oe=Ee.map(function(we){return we.upper}),ge=Ee.map(function(we){return we.lower}),_e=(ve=be)==="next"?"":R}ke("next"),g=new g.Collection(g,function(){return Po(oe[0],ge[ae-1]+R)}),g._ondirectionchange=function(be){ke(be)};var me=0;return g._addAlgorithm(function(be,Ee,we){var Ae=be.key;if(typeof Ae!="string")return!1;var Pe=B(Ae);if(_(Pe,ge,me))return!0;for(var Oe=null,He=me;He<ae;++He){var tt=function(ct,nt,at,ft,ut,wt){for(var Mt=Math.min(ct.length,ft.length),Ut=-1,Wt=0;Wt<Mt;++Wt){var vi=nt[Wt];if(vi!==ft[Wt])return ut(ct[Wt],at[Wt])<0?ct.substr(0,Wt)+at[Wt]+at.substr(Wt+1):ut(ct[Wt],ft[Wt])<0?ct.substr(0,Wt)+ft[Wt]+at.substr(Wt+1):0<=Ut?ct.substr(0,Ut)+nt[Ut]+at.substr(Ut+1):null;ut(ct[Wt],vi)<0&&(Ut=Wt)}return Mt<ft.length&&wt==="next"?ct+at.substr(ct.length):Mt<ct.length&&wt==="prev"?ct.substr(0,at.length):Ut<0?null:ct.substr(0,Ut)+ft[Ut]+at.substr(Ut+1)}(Ae,Pe,oe[He],ge[He],Q,ve);tt===null&&Oe===null?me=He+1:(Oe===null||0<Q(Oe,tt))&&(Oe=tt)}return Ee(Oe!==null?function(){be.continue(Oe+_e)}:we),!1}),g}function Po(g,_,k,R){return{type:2,lower:g,upper:_,lowerOpen:k,upperOpen:R}}function bh(g){return{type:1,lower:g,upper:g}}var $c=(Object.defineProperty(ar.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ar.prototype.between=function(g,_,k,R){k=k!==!1,R=R===!0;try{return 0<this._cmp(g,_)||this._cmp(g,_)===0&&(k||R)&&(!k||!R)?Io(this):new this.Collection(this,function(){return Po(g,_,!k,!R)})}catch(I){return Vr(this,hr)}},ar.prototype.equals=function(g){return g==null?Vr(this,hr):new this.Collection(this,function(){return bh(g)})},ar.prototype.above=function(g){return g==null?Vr(this,hr):new this.Collection(this,function(){return Po(g,void 0,!0)})},ar.prototype.aboveOrEqual=function(g){return g==null?Vr(this,hr):new this.Collection(this,function(){return Po(g,void 0,!1)})},ar.prototype.below=function(g){return g==null?Vr(this,hr):new this.Collection(this,function(){return Po(void 0,g,!1,!0)})},ar.prototype.belowOrEqual=function(g){return g==null?Vr(this,hr):new this.Collection(this,function(){return Po(void 0,g)})},ar.prototype.startsWith=function(g){return typeof g!="string"?Vr(this,qa):this.between(g,g+$i,!0,!0)},ar.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):Oc(this,function(_,k){return _.indexOf(k[0])===0},[g],$i)},ar.prototype.equalsIgnoreCase=function(g){return Oc(this,function(_,k){return _===k[0]},[g],"")},ar.prototype.anyOfIgnoreCase=function(){var g=O.apply(z,arguments);return g.length===0?Io(this):Oc(this,function(_,k){return k.indexOf(_)!==-1},g,"")},ar.prototype.startsWithAnyOfIgnoreCase=function(){var g=O.apply(z,arguments);return g.length===0?Io(this):Oc(this,function(_,k){return k.some(function(R){return _.indexOf(R)===0})},g,$i)},ar.prototype.anyOf=function(){var g=this,_=O.apply(z,arguments),k=this._cmp;try{_.sort(k)}catch(B){return Vr(this,hr)}if(_.length===0)return Io(this);var R=new this.Collection(this,function(){return Po(_[0],_[_.length-1])});R._ondirectionchange=function(B){k=B==="next"?g._ascending:g._descending,_.sort(k)};var I=0;return R._addAlgorithm(function(B,Q,oe){for(var ge=B.key;0<k(ge,_[I]);)if(++I===_.length)return Q(oe),!1;return k(ge,_[I])===0||(Q(function(){B.continue(_[I])}),!1)}),R},ar.prototype.notEqual=function(g){return this.inAnyRange([[-1/0,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ar.prototype.noneOf=function(){var g=O.apply(z,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch(k){return Vr(this,hr)}var _=g.reduce(function(k,R){return k?k.concat([[k[k.length-1][1],R]]):[[-1/0,R]]},null);return _.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(_,{includeLowers:!1,includeUppers:!1})},ar.prototype.inAnyRange=function(Ae,_){var k=this,R=this._cmp,I=this._ascending,B=this._descending,Q=this._min,oe=this._max;if(Ae.length===0)return Io(this);if(!Ae.every(function(Pe){return Pe[0]!==void 0&&Pe[1]!==void 0&&I(Pe[0],Pe[1])<=0}))return Vr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var ge=!_||_.includeLowers!==!1,ve=_&&_.includeUppers===!0,_e,ae=I;function ke(Pe,Oe){return ae(Pe[0],Oe[0])}try{(_e=Ae.reduce(function(Pe,Oe){for(var He=0,tt=Pe.length;He<tt;++He){var ct=Pe[He];if(R(Oe[0],ct[1])<0&&0<R(Oe[1],ct[0])){ct[0]=Q(ct[0],Oe[0]),ct[1]=oe(ct[1],Oe[1]);break}}return He===tt&&Pe.push(Oe),Pe},[])).sort(ke)}catch(Pe){return Vr(this,hr)}var me=0,be=ve?function(Pe){return 0<I(Pe,_e[me][1])}:function(Pe){return 0<=I(Pe,_e[me][1])},Ee=ge?function(Pe){return 0<B(Pe,_e[me][0])}:function(Pe){return 0<=B(Pe,_e[me][0])},we=be,Ae=new this.Collection(this,function(){return Po(_e[0][0],_e[_e.length-1][1],!ge,!ve)});return Ae._ondirectionchange=function(Pe){ae=Pe==="next"?(we=be,I):(we=Ee,B),_e.sort(ke)},Ae._addAlgorithm(function(Pe,Oe,He){for(var tt,ct=Pe.key;we(ct);)if(++me===_e.length)return Oe(He),!1;return!be(tt=ct)&&!Ee(tt)||(k._cmp(ct,_e[me][1])===0||k._cmp(ct,_e[me][0])===0||Oe(function(){ae===I?Pe.continue(_e[me][0]):Pe.continue(_e[me][1])}),!1)}),Ae},ar.prototype.startsWithAnyOf=function(){var g=O.apply(z,arguments);return g.every(function(_){return typeof _=="string"})?g.length===0?Io(this):this.inAnyRange(g.map(function(_){return[_,_+$i]})):Vr(this,"startsWithAnyOf() only works with strings")},ar);function ar(){}function Oo(g){return Pt(function(_){return Mc(_),g(_.target.error),!1})}function Mc(g){g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()}var Dc="storagemutated",Zy="x-storagemutated-1",Xs=xe(null,Dc),n5=($o.prototype._lock=function(){return S(!it.global),++this._reculock,this._reculock!==1||it.global||(it.lockOwnerFor=this),this},$o.prototype._unlock=function(){if(S(!it.global),--this._reculock==0)for(it.global||(it.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var g=this._blockedFuncs.shift();try{no(g[1],g[0])}catch(_){}}return this},$o.prototype._locked=function(){return this._reculock&&it.lockOwnerFor!==this},$o.prototype.create=function(g){var _=this;if(!this.mode)return this;var k=this.db.idbdb,R=this.db._state.dbOpenError;if(S(!this.idbtrans),!g&&!k)switch(R&&R.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(R);case"MissingAPIError":throw new ie.MissingAPI(R.message,R);default:throw new ie.OpenFailed(R)}if(!this.active)throw new ie.TransactionInactive;return S(this._completion._state===null),(g=this.idbtrans=g||(this.db.core||k).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(I){Mc(I),_._reject(g.error)}),g.onabort=Pt(function(I){Mc(I),_.active&&_._reject(new ie.Abort(g.error)),_.active=!1,_.on("abort").fire(I)}),g.oncomplete=Pt(function(){_.active=!1,_._resolve(),"mutatedParts"in g&&Xs.storagemutated.fire(g.mutatedParts)}),this},$o.prototype._promise=function(g,_,k){var R=this;if(g==="readwrite"&&this.mode!=="readwrite")return hn(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return hn(new ie.TransactionInactive);if(this._locked())return new ot(function(B,Q){R._blockedFuncs.push([function(){R._promise(g,_,k).then(B,Q)},it])});if(k)return Hr(function(){var B=new ot(function(Q,oe){R._lock();var ge=_(Q,oe,R);ge&&ge.then&&ge.then(Q,oe)});return B.finally(function(){return R._unlock()}),B._lib=!0,B});var I=new ot(function(B,Q){var oe=_(B,Q,R);oe&&oe.then&&oe.then(B,Q)});return I._lib=!0,I},$o.prototype._root=function(){return this.parent?this.parent._root():this},$o.prototype.waitFor=function(g){var _,k=this._root(),R=ot.resolve(g);k._waitingFor?k._waitingFor=k._waitingFor.then(function(){return R}):(k._waitingFor=R,k._waitingQueue=[],_=k.idbtrans.objectStore(k.storeNames[0]),function B(){for(++k._spinCount;k._waitingQueue.length;)k._waitingQueue.shift()();k._waitingFor&&(_.get(-1/0).onsuccess=B)}());var I=k._waitingFor;return new ot(function(B,Q){R.then(function(oe){return k._waitingQueue.push(Pt(B.bind(null,oe)))},function(oe){return k._waitingQueue.push(Pt(Q.bind(null,oe)))}).finally(function(){k._waitingFor===I&&(k._waitingFor=null)})})},$o.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))},$o.prototype.table=function(g){var _=this._memoizedTables||(this._memoizedTables={});if(f(_,g))return _[g];var k=this.schema[g];if(!k)throw new ie.NotFound("Table "+g+" not part of transaction");return k=new this.db.Table(g,k,this),k.core=this.db.core.table(g),_[g]=k},$o);function $o(){}function ev(g,_,k,R,I,B,Q){return{name:g,keyPath:_,unique:k,multi:R,auto:I,compound:B,src:(k&&!Q?"&":"")+(R?"*":"")+(I?"++":"")+hS(_)}}function hS(g){return typeof g=="string"?g:g?"["+[].join.call(g,"+")+"]":""}function tv(g,_,k){return{name:g,primKey:_,indexes:k,mappedClass:null,idxByName:(R=function(I){return[I.name,I]},k.reduce(function(I,B,Q){return Q=R(B,Q),Q&&(I[Q[0]]=Q[1]),I},{}))};var R}var Lc=function(g){try{return g.only([[]]),Lc=function(){return[[]]},[[]]}catch(_){return Lc=function(){return $i},$i}};function nv(g){return g==null?function(){}:typeof g=="string"?(_=g).split(".").length===1?function(k){return k[_]}:function(k){return A(k,_)}:function(k){return A(k,g)};var _}function pS(g){return[].slice.call(g)}var r5=0;function Bc(g){return g==null?":id":typeof g=="string"?g:"[".concat(g.join("+"),"]")}function i5(g,_,ge){function R(we){if(we.type===3)return null;if(we.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var me=we.lower,be=we.upper,Ee=we.lowerOpen,we=we.upperOpen;return me===void 0?be===void 0?null:_.upperBound(be,!!we):be===void 0?_.lowerBound(me,!!Ee):_.bound(me,be,!!Ee,!!we)}function I(ke){var me,be=ke.name;return{name:be,schema:ke,mutate:function(Ee){var we=Ee.trans,Ae=Ee.type,Pe=Ee.keys,Oe=Ee.values,He=Ee.range;return new Promise(function(tt,ct){tt=Pt(tt);var nt=we.objectStore(be),at=nt.keyPath==null,ft=Ae==="put"||Ae==="add";if(!ft&&Ae!=="delete"&&Ae!=="deleteRange")throw new Error("Invalid operation type: "+Ae);var ut,wt=(Pe||Oe||{length:1}).length;if(Pe&&Oe&&Pe.length!==Oe.length)throw new Error("Given keys array must have same length as given values array.");if(wt===0)return tt({numFailures:0,failures:{},results:[],lastResult:void 0});function Mt(qr){++vi,Mc(qr)}var Ut=[],Wt=[],vi=0;if(Ae==="deleteRange"){if(He.type===4)return tt({numFailures:vi,failures:Wt,results:[],lastResult:void 0});He.type===3?Ut.push(ut=nt.clear()):Ut.push(ut=nt.delete(R(He)))}else{var at=ft?at?[Oe,Pe]:[Oe,null]:[Pe,null],$t=at[0],kr=at[1];if(ft)for(var Cr=0;Cr<wt;++Cr)Ut.push(ut=kr&&kr[Cr]!==void 0?nt[Ae]($t[Cr],kr[Cr]):nt[Ae]($t[Cr])),ut.onerror=Mt;else for(Cr=0;Cr<wt;++Cr)Ut.push(ut=nt[Ae]($t[Cr])),ut.onerror=Mt}function Ph(qr){qr=qr.target.result,Ut.forEach(function(Xa,bv){return Xa.error!=null&&(Wt[bv]=Xa.error)}),tt({numFailures:vi,failures:Wt,results:Ae==="delete"?Pe:Ut.map(function(Xa){return Xa.result}),lastResult:qr})}ut.onerror=function(qr){Mt(qr),Ph(qr)},ut.onsuccess=Ph})},getMany:function(Ee){var we=Ee.trans,Ae=Ee.keys;return new Promise(function(Pe,Oe){Pe=Pt(Pe);for(var He,tt=we.objectStore(be),ct=Ae.length,nt=new Array(ct),at=0,ft=0,ut=function(Ut){Ut=Ut.target,nt[Ut._pos]=Ut.result,++ft===at&&Pe(nt)},wt=Oo(Oe),Mt=0;Mt<ct;++Mt)Ae[Mt]!=null&&((He=tt.get(Ae[Mt]))._pos=Mt,He.onsuccess=ut,He.onerror=wt,++at);at===0&&Pe(nt)})},get:function(Ee){var we=Ee.trans,Ae=Ee.key;return new Promise(function(Pe,Oe){Pe=Pt(Pe);var He=we.objectStore(be).get(Ae);He.onsuccess=function(tt){return Pe(tt.target.result)},He.onerror=Oo(Oe)})},query:(me=ve,function(Ee){return new Promise(function(we,Ae){we=Pt(we);var Pe,Oe,He,at=Ee.trans,tt=Ee.values,ct=Ee.limit,ut=Ee.query,nt=ct===1/0?void 0:ct,ft=ut.index,ut=ut.range,at=at.objectStore(be),ft=ft.isPrimaryKey?at:at.index(ft.name),ut=R(ut);if(ct===0)return we({result:[]});me?((nt=tt?ft.getAll(ut,nt):ft.getAllKeys(ut,nt)).onsuccess=function(wt){return we({result:wt.target.result})},nt.onerror=Oo(Ae)):(Pe=0,Oe=!tt&&"openKeyCursor"in ft?ft.openKeyCursor(ut):ft.openCursor(ut),He=[],Oe.onsuccess=function(wt){var Mt=Oe.result;return Mt?(He.push(tt?Mt.value:Mt.primaryKey),++Pe===ct?we({result:He}):void Mt.continue()):we({result:He})},Oe.onerror=Oo(Ae))})}),openCursor:function(Ee){var we=Ee.trans,Ae=Ee.values,Pe=Ee.query,Oe=Ee.reverse,He=Ee.unique;return new Promise(function(tt,ct){tt=Pt(tt);var ft=Pe.index,nt=Pe.range,at=we.objectStore(be),at=ft.isPrimaryKey?at:at.index(ft.name),ft=Oe?He?"prevunique":"prev":He?"nextunique":"next",ut=!Ae&&"openKeyCursor"in at?at.openKeyCursor(R(nt),ft):at.openCursor(R(nt),ft);ut.onerror=Oo(ct),ut.onsuccess=Pt(function(wt){var Mt,Ut,Wt,vi,$t=ut.result;$t?($t.___id=++r5,$t.done=!1,Mt=$t.continue.bind($t),Ut=(Ut=$t.continuePrimaryKey)&&Ut.bind($t),Wt=$t.advance.bind($t),vi=function(){throw new Error("Cursor not stopped")},$t.trans=we,$t.stop=$t.continue=$t.continuePrimaryKey=$t.advance=function(){throw new Error("Cursor not started")},$t.fail=Pt(ct),$t.next=function(){var kr=this,Cr=1;return this.start(function(){return Cr--?kr.continue():kr.stop()}).then(function(){return kr})},$t.start=function(kr){function Cr(){if(ut.result)try{kr()}catch(qr){$t.fail(qr)}else $t.done=!0,$t.start=function(){throw new Error("Cursor behind last entry")},$t.stop()}var Ph=new Promise(function(qr,Xa){qr=Pt(qr),ut.onerror=Oo(Xa),$t.fail=Xa,$t.stop=function(bv){$t.stop=$t.continue=$t.continuePrimaryKey=$t.advance=vi,qr(bv)}});return ut.onsuccess=Pt(function(qr){ut.onsuccess=Cr,Cr()}),$t.continue=Mt,$t.continuePrimaryKey=Ut,$t.advance=Wt,Cr(),Ph},tt($t)):tt(null)},ct)})},count:function(Ee){var we=Ee.query,Ae=Ee.trans,Pe=we.index,Oe=we.range;return new Promise(function(He,tt){var ct=Ae.objectStore(be),nt=Pe.isPrimaryKey?ct:ct.index(Pe.name),ct=R(Oe),nt=ct?nt.count(ct):nt.count();nt.onsuccess=Pt(function(at){return He(at.target.result)}),nt.onerror=Oo(tt)})}}}var B,Q,oe,_e=(Q=ge,oe=pS((B=g).objectStoreNames),{schema:{name:B.name,tables:oe.map(function(ke){return Q.objectStore(ke)}).map(function(ke){var me=ke.keyPath,we=ke.autoIncrement,be=a(me),Ee={},we={name:ke.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:me==null,compound:be,keyPath:me,autoIncrement:we,unique:!0,extractKey:nv(me)},indexes:pS(ke.indexNames).map(function(Ae){return ke.index(Ae)}).map(function(He){var Pe=He.name,Oe=He.unique,tt=He.multiEntry,He=He.keyPath,tt={name:Pe,compound:a(He),keyPath:He,unique:Oe,multiEntry:tt,extractKey:nv(He)};return Ee[Bc(He)]=tt}),getIndexByKeyPath:function(Ae){return Ee[Bc(Ae)]}};return Ee[":id"]=we.primaryKey,me!=null&&(Ee[Bc(me)]=we.primaryKey),we})},hasGetAll:0<oe.length&&"getAll"in Q.objectStore(oe[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ge=_e.schema,ve=_e.hasGetAll,_e=ge.tables.map(I),ae={};return _e.forEach(function(ke){return ae[ke.name]=ke}),{stack:"dbcore",transaction:g.transaction.bind(g),table:function(ke){if(!ae[ke])throw new Error("Table '".concat(ke,"' not found"));return ae[ke]},MIN_KEY:-1/0,MAX_KEY:Lc(_),schema:ge}}function o5(g,_,k,R){var I=k.IDBKeyRange;return k.indexedDB,{dbcore:(R=i5(_,I,R),g.dbcore.reduce(function(B,Q){return Q=Q.create,r(r({},B),Q(B))},R))}}function xh(g,R){var k=R.db,R=o5(g._middlewares,k,g._deps,R);g.core=R.dbcore,g.tables.forEach(function(I){var B=I.name;g.core.schema.tables.some(function(Q){return Q.name===B})&&(I.core=g.core.table(B),g[B]instanceof g.Table&&(g[B].core=I.core))})}function _h(g,_,k,R){k.forEach(function(I){var B=R[I];_.forEach(function(Q){var oe=function ge(ve,_e){return x(ve,_e)||(ve=u(ve))&&ge(ve,_e)}(Q,I);(!oe||"value"in oe&&oe.value===void 0)&&(Q===g.Transaction.prototype||Q instanceof g.Transaction?v(Q,I,{get:function(){return this.table(I)},set:function(ge){p(this,I,{value:ge,writable:!0,configurable:!0,enumerable:!0})}}):Q[I]=new g.Table(I,B))})})}function rv(g,_){_.forEach(function(k){for(var R in k)k[R]instanceof g.Table&&delete k[R]})}function s5(g,_){return g._cfg.version-_._cfg.version}function a5(g,_,k,R){var I=g._dbSchema;k.objectStoreNames.contains("$meta")&&!I.$meta&&(I.$meta=tv("$meta",mS("")[0],[]),g._storeNames.push("$meta"));var B=g._createTransaction("readwrite",g._storeNames,I);B.create(k),B._completion.catch(R);var Q=B._reject.bind(B),oe=it.transless||it;Hr(function(){return it.trans=B,it.transless=oe,_!==0?(xh(g,k),ve=_,((ge=B).storeNames.includes("$meta")?ge.table("$meta").get("version").then(function(_e){return _e!=null?_e:ve}):ot.resolve(ve)).then(function(_e){return ke=_e,me=B,be=k,Ee=[],_e=(ae=g)._versions,we=ae._dbSchema=Eh(0,ae.idbdb,be),(_e=_e.filter(function(Ae){return Ae._cfg.version>=ke})).length!==0?(_e.forEach(function(Ae){Ee.push(function(){var Pe=we,Oe=Ae._cfg.dbschema;kh(ae,Pe,be),kh(ae,Oe,be),we=ae._dbSchema=Oe;var He=iv(Pe,Oe);He.add.forEach(function(ft){ov(be,ft[0],ft[1].primKey,ft[1].indexes)}),He.change.forEach(function(ft){if(ft.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var ut=be.objectStore(ft.name);ft.add.forEach(function(wt){return Sh(ut,wt)}),ft.change.forEach(function(wt){ut.deleteIndex(wt.name),Sh(ut,wt)}),ft.del.forEach(function(wt){return ut.deleteIndex(wt)})});var tt=Ae._cfg.contentUpgrade;if(tt&&Ae._cfg.version>ke){xh(ae,be),me._memoizedTables={};var ct=P(Oe);He.del.forEach(function(ft){ct[ft]=Pe[ft]}),rv(ae,[ae.Transaction.prototype]),_h(ae,[ae.Transaction.prototype],s(ct),ct),me.schema=ct;var nt,at=K(tt);return at&&Ur(),He=ot.follow(function(){var ft;(nt=tt(me))&&at&&(ft=fr.bind(null,null),nt.then(ft,ft))}),nt&&typeof nt.then=="function"?ot.resolve(nt):He.then(function(){return nt})}}),Ee.push(function(Pe){var Oe,He,tt=Ae._cfg.dbschema;Oe=tt,He=Pe,[].slice.call(He.db.objectStoreNames).forEach(function(ct){return Oe[ct]==null&&He.db.deleteObjectStore(ct)}),rv(ae,[ae.Transaction.prototype]),_h(ae,[ae.Transaction.prototype],ae._storeNames,ae._dbSchema),me.schema=ae._dbSchema}),Ee.push(function(Pe){ae.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ae.idbdb.version/10)===Ae._cfg.version?(ae.idbdb.deleteObjectStore("$meta"),delete ae._dbSchema.$meta,ae._storeNames=ae._storeNames.filter(function(Oe){return Oe!=="$meta"})):Pe.objectStore("$meta").put(Ae._cfg.version,"version"))})}),function Ae(){return Ee.length?ot.resolve(Ee.shift()(me.idbtrans)).then(Ae):ot.resolve()}().then(function(){gS(we,be)})):ot.resolve();var ae,ke,me,be,Ee,we}).catch(Q)):(s(I).forEach(function(_e){ov(k,_e,I[_e].primKey,I[_e].indexes)}),xh(g,k),void ot.follow(function(){return g.on.populate.fire(B)}).catch(Q));var ge,ve})}function l5(g,_){gS(g._dbSchema,_),_.db.version%10!=0||_.objectStoreNames.contains("$meta")||_.db.createObjectStore("$meta").add(Math.ceil(_.db.version/10-1),"version");var k=Eh(0,g.idbdb,_);kh(g,g._dbSchema,_);for(var R=0,I=iv(k,g._dbSchema).change;R<I.length;R++){var B=function(Q){if(Q.change.length||Q.recreate)return console.warn("Unable to patch indexes of table ".concat(Q.name," because it has changes on the type of index or primary key.")),{value:void 0};var oe=_.objectStore(Q.name);Q.add.forEach(function(ge){qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Q.name,".").concat(ge.src)),Sh(oe,ge)})}(I[R]);if(typeof B=="object")return B.value}}function iv(g,_){var k,R={del:[],add:[],change:[]};for(k in g)_[k]||R.del.push(k);for(k in _){var I=g[k],B=_[k];if(I){var Q={name:k,def:B,recreate:!1,del:[],add:[],change:[]};if(""+(I.primKey.keyPath||"")!=""+(B.primKey.keyPath||"")||I.primKey.auto!==B.primKey.auto)Q.recreate=!0,R.change.push(Q);else{var oe=I.idxByName,ge=B.idxByName,ve=void 0;for(ve in oe)ge[ve]||Q.del.push(ve);for(ve in ge){var _e=oe[ve],ae=ge[ve];_e?_e.src!==ae.src&&Q.change.push(ae):Q.add.push(ae)}(0<Q.del.length||0<Q.add.length||0<Q.change.length)&&R.change.push(Q)}}else R.add.push([k,B])}return R}function ov(g,_,k,R){var I=g.db.createObjectStore(_,k.keyPath?{keyPath:k.keyPath,autoIncrement:k.auto}:{autoIncrement:k.auto});return R.forEach(function(B){return Sh(I,B)}),I}function gS(g,_){s(g).forEach(function(k){_.db.objectStoreNames.contains(k)||(qe&&console.debug("Dexie: Creating missing table",k),ov(_,k,g[k].primKey,g[k].indexes))})}function Sh(g,_){g.createIndex(_.name,_.keyPath,{unique:_.unique,multiEntry:_.multi})}function Eh(g,_,k){var R={};return b(_.objectStoreNames,0).forEach(function(I){for(var B=k.objectStore(I),Q=ev(hS(ve=B.keyPath),ve||"",!0,!1,!!B.autoIncrement,ve&&typeof ve!="string",!0),oe=[],ge=0;ge<B.indexNames.length;++ge){var _e=B.index(B.indexNames[ge]),ve=_e.keyPath,_e=ev(_e.name,ve,!!_e.unique,!!_e.multiEntry,!1,ve&&typeof ve!="string",!1);oe.push(_e)}R[I]=tv(I,Q,oe)}),R}function kh(g,_,k){for(var R=k.db.objectStoreNames,I=0;I<R.length;++I){var B=R[I],Q=k.objectStore(B);g._hasGetAll="getAll"in Q;for(var oe=0;oe<Q.indexNames.length;++oe){var ge=Q.indexNames[oe],ve=Q.index(ge).keyPath,_e=typeof ve=="string"?ve:"["+b(ve).join("+")+"]";!_[B]||(ve=_[B].idxByName[_e])&&(ve.name=ge,delete _[B].idxByName[_e],_[B].idxByName[ge]=ve)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(g._hasGetAll=!1)}function mS(g){return g.split(",").map(function(_,k){var R=(_=_.trim()).replace(/([&*]|\+\+)/g,""),I=/^\[/.test(R)?R.match(/^\[(.*)\]$/)[1].split("+"):R;return ev(R,I||null,/\&/.test(_),/\*/.test(_),/\+\+/.test(_),a(I),k===0)})}var u5=(Ch.prototype._parseStoresSpec=function(g,_){s(g).forEach(function(k){if(g[k]!==null){var R=mS(g[k]),I=R.shift();if(I.unique=!0,I.multi)throw new ie.Schema("Primary key cannot be multi-valued");R.forEach(function(B){if(B.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!B.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")}),_[k]=tv(k,I,R)}})},Ch.prototype.stores=function(k){var _=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,k):k;var k=_._versions,R={},I={};return k.forEach(function(B){l(R,B._cfg.storesSource),I=B._cfg.dbschema={},B._parseStoresSpec(R,I)}),_._dbSchema=I,rv(_,[_._allTables,_,_.Transaction.prototype]),_h(_,[_._allTables,_,_.Transaction.prototype,this._cfg.tables],s(I),I),_._storeNames=s(I),this},Ch.prototype.upgrade=function(g){return this._cfg.contentUpgrade=Fe(this._cfg.contentUpgrade||ze,g),this},Ch);function Ch(){}function sv(g,_){var k=g._dbNamesDB;return k||(k=g._dbNamesDB=new ls(Ys,{addons:[],indexedDB:g,IDBKeyRange:_})).version(1).stores({dbnames:"name"}),k.table("dbnames")}function av(g){return g&&typeof g.databases=="function"}function lv(g){return Hr(function(){return it.letThrough=!0,g()})}function uv(g){return!("from"in g)}var Er=function(g,_){if(!this){var k=new Er;return g&&"d"in g&&l(k,g),k}l(this,arguments.length?{d:1,from:g,to:1<arguments.length?_:g}:{d:0})};function Fc(g,_,k){var R=Ht(_,k);if(!isNaN(R)){if(0<R)throw RangeError();if(uv(g))return l(g,{from:_,to:k,d:1});var I=g.l,R=g.r;if(Ht(k,g.from)<0)return I?Fc(I,_,k):g.l={from:_,to:k,d:1,l:null,r:null},vS(g);if(0<Ht(_,g.to))return R?Fc(R,_,k):g.r={from:_,to:k,d:1,l:null,r:null},vS(g);Ht(_,g.from)<0&&(g.from=_,g.l=null,g.d=R?R.d+1:1),0<Ht(k,g.to)&&(g.to=k,g.r=null,g.d=g.l?g.l.d+1:1),k=!g.r,I&&!g.l&&zc(g,I),R&&k&&zc(g,R)}}function zc(g,_){uv(_)||function k(R,ge){var B=ge.from,Q=ge.to,oe=ge.l,ge=ge.r;Fc(R,B,Q),oe&&k(R,oe),ge&&k(R,ge)}(g,_)}function yS(g,_){var k=jh(_),R=k.next();if(R.done)return!1;for(var I=R.value,B=jh(g),Q=B.next(I.from),oe=Q.value;!R.done&&!Q.done;){if(Ht(oe.from,I.to)<=0&&0<=Ht(oe.to,I.from))return!0;Ht(I.from,oe.from)<0?I=(R=k.next(oe.from)).value:oe=(Q=B.next(I.from)).value}return!1}function jh(g){var _=uv(g)?null:{s:0,n:g};return{next:function(k){for(var R=0<arguments.length;_;)switch(_.s){case 0:if(_.s=1,R)for(;_.n.l&&Ht(k,_.n.from)<0;)_={up:_,n:_.n.l,s:1};else for(;_.n.l;)_={up:_,n:_.n.l,s:1};case 1:if(_.s=2,!R||Ht(k,_.n.to)<=0)return{value:_.n,done:!1};case 2:if(_.n.r){_.s=3,_={up:_,n:_.n.r,s:0};continue}case 3:_=_.up}return{done:!0}}}}function vS(g){var _,k,R=(((_=g.r)===null||_===void 0?void 0:_.d)||0)-(((k=g.l)===null||k===void 0?void 0:k.d)||0),I=1<R?"r":R<-1?"l":"";I&&(_=I=="r"?"l":"r",k=r({},g),R=g[I],g.from=R.from,g.to=R.to,g[I]=R[I],k[I]=R[_],(g[_]=k).d=wS(k)),g.d=wS(g)}function wS(k){var _=k.r,k=k.l;return(_?k?Math.max(_.d,k.d):_.d:k?k.d:0)+1}function Ah(g,_){return s(_).forEach(function(k){g[k]?zc(g[k],_[k]):g[k]=function R(I){var B,Q,oe={};for(B in I)f(I,B)&&(Q=I[B],oe[B]=!Q||typeof Q!="object"||H.has(Q.constructor)?Q:R(Q));return oe}(_[k])}),g}function cv(g,_){return g.all||_.all||Object.keys(g).some(function(k){return _[k]&&yS(_[k],g[k])})}h(Er.prototype,((Di={add:function(g){return zc(this,g),this},addKey:function(g){return Fc(this,g,g),this},addKeys:function(g){var _=this;return g.forEach(function(k){return Fc(_,k,k)}),this},hasKey:function(g){var _=jh(this).next(g).value;return _&&Ht(_.from,g)<=0&&0<=Ht(_.to,g)}})[Y]=function(){return jh(this)},Di));var Ga={},dv={},fv=!1;function Nh(g){Ah(dv,g),fv||(fv=!0,setTimeout(function(){fv=!1,hv(dv,!(dv={}))},0))}function hv(g,_){_===void 0&&(_=!1);var k=new Set;if(g.all)for(var R=0,I=Object.values(Ga);R<I.length;R++)bS(Q=I[R],g,k,_);else for(var B in g){var Q,oe=/^idb\:\/\/(.*)\/(.*)\//.exec(B);oe&&(B=oe[1],oe=oe[2],(Q=Ga["idb://".concat(B,"/").concat(oe)])&&bS(Q,g,k,_))}k.forEach(function(ge){return ge()})}function bS(g,_,k,R){for(var I=[],B=0,Q=Object.entries(g.queries.query);B<Q.length;B++){for(var oe=Q[B],ge=oe[0],ve=[],_e=0,ae=oe[1];_e<ae.length;_e++){var ke=ae[_e];cv(_,ke.obsSet)?ke.subscribers.forEach(function(we){return k.add(we)}):R&&ve.push(ke)}R&&I.push([ge,ve])}if(R)for(var me=0,be=I;me<be.length;me++){var Ee=be[me],ge=Ee[0],ve=Ee[1];g.queries.query[ge]=ve}}function c5(g){var _=g._state,k=g._deps.indexedDB;if(_.isBeingOpened||g.idbdb)return _.dbReadyPromise.then(function(){return _.dbOpenError?hn(_.dbOpenError):g});_.isBeingOpened=!0,_.dbOpenError=null,_.openComplete=!1;var R=_.openCanceller,I=Math.round(10*g.verno),B=!1;function Q(){if(_.openCanceller!==R)throw new ie.DatabaseClosed("db.open() was cancelled")}function oe(){return new ot(function(ke,me){if(Q(),!k)throw new ie.MissingAPI;var be=g.name,Ee=_.autoSchema||!I?k.open(be):k.open(be,I);if(!Ee)throw new ie.MissingAPI;Ee.onerror=Oo(me),Ee.onblocked=Pt(g._fireOnBlocked),Ee.onupgradeneeded=Pt(function(we){var Ae;_e=Ee.transaction,_.autoSchema&&!g._options.allowEmptyDB?(Ee.onerror=Mc,_e.abort(),Ee.result.close(),(Ae=k.deleteDatabase(be)).onsuccess=Ae.onerror=Pt(function(){me(new ie.NoSuchDatabase("Database ".concat(be," doesnt exist")))})):(_e.onerror=Oo(me),we=we.oldVersion>Math.pow(2,62)?0:we.oldVersion,ae=we<1,g.idbdb=Ee.result,B&&l5(g,_e),a5(g,we/10,_e,me))},me),Ee.onsuccess=Pt(function(){_e=null;var we,Ae,Pe,Oe,He,tt=g.idbdb=Ee.result,ct=b(tt.objectStoreNames);if(0<ct.length)try{var nt=tt.transaction((Oe=ct).length===1?Oe[0]:Oe,"readonly");if(_.autoSchema)Ae=tt,Pe=nt,(we=g).verno=Ae.version/10,Pe=we._dbSchema=Eh(0,Ae,Pe),we._storeNames=b(Ae.objectStoreNames,0),_h(we,[we._allTables],s(Pe),Pe);else if(kh(g,g._dbSchema,nt),((He=iv(Eh(0,(He=g).idbdb,nt),He._dbSchema)).add.length||He.change.some(function(at){return at.add.length||at.change.length}))&&!B)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),tt.close(),I=tt.version+1,B=!0,ke(oe());xh(g,nt)}catch(at){}Wr.push(g),tt.onversionchange=Pt(function(at){_.vcFired=!0,g.on("versionchange").fire(at)}),tt.onclose=Pt(function(at){g.on("close").fire(at)}),ae&&(He=g._deps,nt=be,tt=He.indexedDB,He=He.IDBKeyRange,av(tt)||nt===Ys||sv(tt,He).put({name:nt}).catch(ze)),ke()},me)}).catch(function(ke){switch(ke==null?void 0:ke.name){case"UnknownError":if(0<_.PR1398_maxLoop)return _.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),oe();break;case"VersionError":if(0<I)return I=0,oe()}return ot.reject(ke)})}var ge,ve=_.dbReadyResolve,_e=null,ae=!1;return ot.race([R,(typeof navigator>"u"?ot.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function me(){return indexedDB.databases().finally(ke)}ge=setInterval(me,100),me()}).finally(function(){return clearInterval(ge)}):Promise.resolve()).then(oe)]).then(function(){return Q(),_.onReadyBeingFired=[],ot.resolve(lv(function(){return g.on.ready.fire(g.vip)})).then(function ke(){if(0<_.onReadyBeingFired.length){var me=_.onReadyBeingFired.reduce(Fe,ze);return _.onReadyBeingFired=[],ot.resolve(lv(function(){return me(g.vip)})).then(ke)}})}).finally(function(){_.openCanceller===R&&(_.onReadyBeingFired=null,_.isBeingOpened=!1)}).catch(function(ke){_.dbOpenError=ke;try{_e&&_e.abort()}catch(me){}return R===_.openCanceller&&g._close(),hn(ke)}).finally(function(){_.openComplete=!0,ve()}).then(function(){var ke;return ae&&(ke={},g.tables.forEach(function(me){me.schema.indexes.forEach(function(be){be.name&&(ke["idb://".concat(g.name,"/").concat(me.name,"/").concat(be.name)]=new Er(-1/0,[[[]]]))}),ke["idb://".concat(g.name,"/").concat(me.name,"/")]=ke["idb://".concat(g.name,"/").concat(me.name,"/:dels")]=new Er(-1/0,[[[]]])}),Xs(Dc).fire(ke),hv(ke,!0)),g})}function pv(g){function _(B){return g.next(B)}var k=I(_),R=I(function(B){return g.throw(B)});function I(B){return function(ge){var oe=B(ge),ge=oe.value;return oe.done?ge:ge&&typeof ge.then=="function"?ge.then(k,R):a(ge)?Promise.all(ge).then(k,R):k(ge)}}return I(_)()}function Rh(g,_,k){for(var R=a(g)?g.slice():[g],I=0;I<k;++I)R.push(_);return R}var d5={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(g){return r(r({},g),{table:function(_){var k=g.table(_),R=k.schema,I={},B=[];function Q(ae,ke,me){var be=Bc(ae),Ee=I[be]=I[be]||[],we=ae==null?0:typeof ae=="string"?1:ae.length,Ae=0<ke,Ae=r(r({},me),{name:Ae?"".concat(be,"(virtual-from:").concat(me.name,")"):me.name,lowLevelIndex:me,isVirtual:Ae,keyTail:ke,keyLength:we,extractKey:nv(ae),unique:!Ae&&me.unique});return Ee.push(Ae),Ae.isPrimaryKey||B.push(Ae),1<we&&Q(we===2?ae[0]:ae.slice(0,we-1),ke+1,me),Ee.sort(function(Pe,Oe){return Pe.keyTail-Oe.keyTail}),Ae}_=Q(R.primaryKey.keyPath,0,R.primaryKey),I[":id"]=[_];for(var oe=0,ge=R.indexes;oe<ge.length;oe++){var ve=ge[oe];Q(ve.keyPath,0,ve)}function _e(ae){var ke,me=ae.query.index;return me.isVirtual?r(r({},ae),{query:{index:me.lowLevelIndex,range:(ke=ae.query.range,me=me.keyTail,{type:ke.type===1?2:ke.type,lower:Rh(ke.lower,ke.lowerOpen?g.MAX_KEY:g.MIN_KEY,me),lowerOpen:!0,upper:Rh(ke.upper,ke.upperOpen?g.MIN_KEY:g.MAX_KEY,me),upperOpen:!0})}}):ae}return r(r({},k),{schema:r(r({},R),{primaryKey:_,indexes:B,getIndexByKeyPath:function(ae){return(ae=I[Bc(ae)])&&ae[0]}}),count:function(ae){return k.count(_e(ae))},query:function(ae){return k.query(_e(ae))},openCursor:function(ae){var ke=ae.query.index,me=ke.keyTail,be=ke.isVirtual,Ee=ke.keyLength;return be?k.openCursor(_e(ae)).then(function(Ae){return Ae&&we(Ae)}):k.openCursor(ae);function we(Ae){return Object.create(Ae,{continue:{value:function(Pe){Pe!=null?Ae.continue(Rh(Pe,ae.reverse?g.MAX_KEY:g.MIN_KEY,me)):ae.unique?Ae.continue(Ae.key.slice(0,Ee).concat(ae.reverse?g.MIN_KEY:g.MAX_KEY,me)):Ae.continue()}},continuePrimaryKey:{value:function(Pe,Oe){Ae.continuePrimaryKey(Rh(Pe,g.MAX_KEY,me),Oe)}},primaryKey:{get:function(){return Ae.primaryKey}},key:{get:function(){var Pe=Ae.key;return Ee===1?Pe[0]:Pe.slice(0,Ee)}},value:{get:function(){return Ae.value}}})}}})}})}};function gv(g,_,k,R){return k=k||{},R=R||"",s(g).forEach(function(I){var B,Q,oe;f(_,I)?(B=g[I],Q=_[I],typeof B=="object"&&typeof Q=="object"&&B&&Q?(oe=q(B))!==q(Q)?k[R+I]=_[I]:oe==="Object"?gv(B,Q,k,R+I+"."):B!==Q&&(k[R+I]=_[I]):B!==Q&&(k[R+I]=_[I])):k[R+I]=void 0}),s(_).forEach(function(I){f(g,I)||(k[R+I]=_[I])}),k}function mv(g,_){return _.type==="delete"?_.keys:_.keys||_.values.map(g.extractKey)}var f5={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(g){return r(r({},g),{table:function(_){var k=g.table(_),R=k.schema.primaryKey;return r(r({},k),{mutate:function(I){var B=it.trans,Q=B.table(_).hook,oe=Q.deleting,ge=Q.creating,ve=Q.updating;switch(I.type){case"add":if(ge.fire===ze)break;return B._promise("readwrite",function(){return _e(I)},!0);case"put":if(ge.fire===ze&&ve.fire===ze)break;return B._promise("readwrite",function(){return _e(I)},!0);case"delete":if(oe.fire===ze)break;return B._promise("readwrite",function(){return _e(I)},!0);case"deleteRange":if(oe.fire===ze)break;return B._promise("readwrite",function(){return function ae(ke,me,be){return k.query({trans:ke,values:!1,query:{index:R,range:me},limit:be}).then(function(Ee){var we=Ee.result;return _e({type:"delete",keys:we,trans:ke}).then(function(Ae){return 0<Ae.numFailures?Promise.reject(Ae.failures[0]):we.length<be?{failures:[],numFailures:0,lastResult:void 0}:ae(ke,r(r({},me),{lower:we[we.length-1],lowerOpen:!0}),be)})})}(I.trans,I.range,1e4)},!0)}return k.mutate(I);function _e(ae){var ke,me,be,Ee=it.trans,we=ae.keys||mv(R,ae);if(!we)throw new Error("Keys missing");return(ae=ae.type==="add"||ae.type==="put"?r(r({},ae),{keys:we}):r({},ae)).type!=="delete"&&(ae.values=i([],ae.values)),ae.keys&&(ae.keys=i([],ae.keys)),ke=k,be=we,((me=ae).type==="add"?Promise.resolve([]):ke.getMany({trans:me.trans,keys:be,cache:"immutable"})).then(function(Ae){var Pe=we.map(function(Oe,He){var tt,ct,nt,at=Ae[He],ft={onerror:null,onsuccess:null};return ae.type==="delete"?oe.fire.call(ft,Oe,at,Ee):ae.type==="add"||at===void 0?(tt=ge.fire.call(ft,Oe,ae.values[He],Ee),Oe==null&&tt!=null&&(ae.keys[He]=Oe=tt,R.outbound||T(ae.values[He],R.keyPath,Oe))):(tt=gv(at,ae.values[He]),(ct=ve.fire.call(ft,tt,Oe,at,Ee))&&(nt=ae.values[He],Object.keys(ct).forEach(function(ut){f(nt,ut)?nt[ut]=ct[ut]:T(nt,ut,ct[ut])}))),ft});return k.mutate(ae).then(function(Oe){for(var He=Oe.failures,tt=Oe.results,ct=Oe.numFailures,Oe=Oe.lastResult,nt=0;nt<we.length;++nt){var at=(tt||we)[nt],ft=Pe[nt];at==null?ft.onerror&&ft.onerror(He[nt]):ft.onsuccess&&ft.onsuccess(ae.type==="put"&&Ae[nt]?ae.values[nt]:at)}return{failures:He,results:tt,numFailures:ct,lastResult:Oe}}).catch(function(Oe){return Pe.forEach(function(He){return He.onerror&&He.onerror(Oe)}),Promise.reject(Oe)})})}}})}})}};function xS(g,_,k){try{if(!_||_.keys.length<g.length)return null;for(var R=[],I=0,B=0;I<_.keys.length&&B<g.length;++I)Ht(_.keys[I],g[B])===0&&(R.push(k?W(_.values[I]):_.values[I]),++B);return R.length===g.length?R:null}catch(Q){return null}}var h5={stack:"dbcore",level:-1,create:function(g){return{table:function(_){var k=g.table(_);return r(r({},k),{getMany:function(R){if(!R.cache)return k.getMany(R);var I=xS(R.keys,R.trans._cache,R.cache==="clone");return I?ot.resolve(I):k.getMany(R).then(function(B){return R.trans._cache={keys:R.keys,values:R.cache==="clone"?W(B):B},B})},mutate:function(R){return R.type!=="add"&&(R.trans._cache=null),k.mutate(R)}})}}}};function _S(g,_){return g.trans.mode==="readonly"&&!!g.subscr&&!g.trans.explicit&&g.trans.db._options.cache!=="disabled"&&!_.schema.primaryKey.outbound}function SS(g,_){switch(g){case"query":return _.values&&!_.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var p5={stack:"dbcore",level:0,name:"Observability",create:function(g){var _=g.schema.name,k=new Er(g.MIN_KEY,g.MAX_KEY);return r(r({},g),{transaction:function(R,I,B){if(it.subscr&&I!=="readonly")throw new ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(it.querier));return g.transaction(R,I,B)},table:function(R){var I=g.table(R),B=I.schema,Q=B.primaryKey,ae=B.indexes,oe=Q.extractKey,ge=Q.outbound,ve=Q.autoIncrement&&ae.filter(function(me){return me.compound&&me.keyPath.includes(Q.keyPath)}),_e=r(r({},I),{mutate:function(me){function be(ut){return ut="idb://".concat(_,"/").concat(R,"/").concat(ut),Oe[ut]||(Oe[ut]=new Er)}var Ee,we,Ae,Pe=me.trans,Oe=me.mutatedParts||(me.mutatedParts={}),He=be(""),tt=be(":dels"),ct=me.type,ft=me.type==="deleteRange"?[me.range]:me.type==="delete"?[me.keys]:me.values.length<50?[mv(Q,me).filter(function(ut){return ut}),me.values]:[],nt=ft[0],at=ft[1],ft=me.trans._cache;return a(nt)?(He.addKeys(nt),(ft=ct==="delete"||nt.length===at.length?xS(nt,ft):null)||tt.addKeys(nt),(ft||at)&&(Ee=be,we=ft,Ae=at,B.indexes.forEach(function(ut){var wt=Ee(ut.name||"");function Mt(Wt){return Wt!=null?ut.extractKey(Wt):null}function Ut(Wt){return ut.multiEntry&&a(Wt)?Wt.forEach(function(vi){return wt.addKey(vi)}):wt.addKey(Wt)}(we||Ae).forEach(function(Wt,kr){var $t=we&&Mt(we[kr]),kr=Ae&&Mt(Ae[kr]);Ht($t,kr)!==0&&($t!=null&&Ut($t),kr!=null&&Ut(kr))})}))):nt?(at={from:(at=nt.lower)!==null&&at!==void 0?at:g.MIN_KEY,to:(at=nt.upper)!==null&&at!==void 0?at:g.MAX_KEY},tt.add(at),He.add(at)):(He.add(k),tt.add(k),B.indexes.forEach(function(ut){return be(ut.name).add(k)})),I.mutate(me).then(function(ut){return!nt||me.type!=="add"&&me.type!=="put"||(He.addKeys(ut.results),ve&&ve.forEach(function(wt){for(var Mt=me.values.map(function($t){return wt.extractKey($t)}),Ut=wt.keyPath.findIndex(function($t){return $t===Q.keyPath}),Wt=0,vi=ut.results.length;Wt<vi;++Wt)Mt[Wt][Ut]=ut.results[Wt];be(wt.name).addKeys(Mt)})),Pe.mutatedParts=Ah(Pe.mutatedParts||{},Oe),ut})}}),ae=function(be){var Ee=be.query,be=Ee.index,Ee=Ee.range;return[be,new Er((be=Ee.lower)!==null&&be!==void 0?be:g.MIN_KEY,(Ee=Ee.upper)!==null&&Ee!==void 0?Ee:g.MAX_KEY)]},ke={get:function(me){return[Q,new Er(me.key)]},getMany:function(me){return[Q,new Er().addKeys(me.keys)]},count:ae,query:ae,openCursor:ae};return s(ke).forEach(function(me){_e[me]=function(be){var Ee=it.subscr,we=!!Ee,Ae=_S(it,I)&&SS(me,be)?be.obsSet={}:Ee;if(we){var Pe=function(at){return at="idb://".concat(_,"/").concat(R,"/").concat(at),Ae[at]||(Ae[at]=new Er)},Oe=Pe(""),He=Pe(":dels"),Ee=ke[me](be),we=Ee[0],Ee=Ee[1];if((me==="query"&&we.isPrimaryKey&&!be.values?He:Pe(we.name||"")).add(Ee),!we.isPrimaryKey){if(me!=="count"){var tt=me==="query"&&ge&&be.values&&I.query(r(r({},be),{values:!1}));return I[me].apply(this,arguments).then(function(at){if(me==="query"){if(ge&&be.values)return tt.then(function(Mt){return Mt=Mt.result,Oe.addKeys(Mt),at});var ft=be.values?at.result.map(oe):at.result;(be.values?Oe:He).addKeys(ft)}else if(me==="openCursor"){var ut=at,wt=be.values;return ut&&Object.create(ut,{key:{get:function(){return He.addKey(ut.primaryKey),ut.key}},primaryKey:{get:function(){var Mt=ut.primaryKey;return He.addKey(Mt),Mt}},value:{get:function(){return wt&&Oe.addKey(ut.primaryKey),ut.value}}})}return at})}He.add(k)}}return I[me].apply(this,arguments)}}),_e}})}};function ES(g,_,k){if(k.numFailures===0)return _;if(_.type==="deleteRange")return null;var R=_.keys?_.keys.length:"values"in _&&_.values?_.values.length:1;return k.numFailures===R?null:(_=r({},_),a(_.keys)&&(_.keys=_.keys.filter(function(I,B){return!(B in k.failures)})),"values"in _&&a(_.values)&&(_.values=_.values.filter(function(I,B){return!(B in k.failures)})),_)}function yv(g,_){return k=g,((R=_).lower===void 0||(R.lowerOpen?0<Ht(k,R.lower):0<=Ht(k,R.lower)))&&(g=g,(_=_).upper===void 0||(_.upperOpen?Ht(g,_.upper)<0:Ht(g,_.upper)<=0));var k,R}function kS(g,_,ke,R,I,B){if(!ke||ke.length===0)return g;var Q=_.query.index,oe=Q.multiEntry,ge=_.query.range,ve=R.schema.primaryKey.extractKey,_e=Q.extractKey,ae=(Q.lowLevelIndex||Q).extractKey,ke=ke.reduce(function(me,be){var Ee=me,we=[];if(be.type==="add"||be.type==="put")for(var Ae=new Er,Pe=be.values.length-1;0<=Pe;--Pe){var Oe,He=be.values[Pe],tt=ve(He);Ae.hasKey(tt)||(Oe=_e(He),(oe&&a(Oe)?Oe.some(function(ut){return yv(ut,ge)}):yv(Oe,ge))&&(Ae.addKey(tt),we.push(He)))}switch(be.type){case"add":var ct=new Er().addKeys(_.values?me.map(function(wt){return ve(wt)}):me),Ee=me.concat(_.values?we.filter(function(wt){return wt=ve(wt),!ct.hasKey(wt)&&(ct.addKey(wt),!0)}):we.map(function(wt){return ve(wt)}).filter(function(wt){return!ct.hasKey(wt)&&(ct.addKey(wt),!0)}));break;case"put":var nt=new Er().addKeys(be.values.map(function(wt){return ve(wt)}));Ee=me.filter(function(wt){return!nt.hasKey(_.values?ve(wt):wt)}).concat(_.values?we:we.map(function(wt){return ve(wt)}));break;case"delete":var at=new Er().addKeys(be.keys);Ee=me.filter(function(wt){return!at.hasKey(_.values?ve(wt):wt)});break;case"deleteRange":var ft=be.range;Ee=me.filter(function(wt){return!yv(ve(wt),ft)})}return Ee},g);return ke===g?g:(ke.sort(function(me,be){return Ht(ae(me),ae(be))||Ht(ve(me),ve(be))}),_.limit&&_.limit<1/0&&(ke.length>_.limit?ke.length=_.limit:g.length===_.limit&&ke.length<_.limit&&(I.dirty=!0)),B?Object.freeze(ke):ke)}function CS(g,_){return Ht(g.lower,_.lower)===0&&Ht(g.upper,_.upper)===0&&!!g.lowerOpen==!!_.lowerOpen&&!!g.upperOpen==!!_.upperOpen}function g5(g,_){return function(k,R,I,B){if(k===void 0)return R!==void 0?-1:0;if(R===void 0)return 1;if((R=Ht(k,R))===0){if(I&&B)return 0;if(I)return 1;if(B)return-1}return R}(g.lower,_.lower,g.lowerOpen,_.lowerOpen)<=0&&0<=function(k,R,I,B){if(k===void 0)return R!==void 0?1:0;if(R===void 0)return-1;if((R=Ht(k,R))===0){if(I&&B)return 0;if(I)return-1;if(B)return 1}return R}(g.upper,_.upper,g.upperOpen,_.upperOpen)}function m5(g,_,k,R){g.subscribers.add(k),R.addEventListener("abort",function(){var I,B;g.subscribers.delete(k),g.subscribers.size===0&&(I=g,B=_,setTimeout(function(){I.subscribers.size===0&&D(B,I)},3e3))})}var y5={stack:"dbcore",level:0,name:"Cache",create:function(g){var _=g.schema.name;return r(r({},g),{transaction:function(k,R,I){var B,Q,oe=g.transaction(k,R,I);return R==="readwrite"&&(Q=(B=new AbortController).signal,I=function(ge){return function(){if(B.abort(),R==="readwrite"){for(var ve=new Set,_e=0,ae=k;_e<ae.length;_e++){var ke=ae[_e],me=Ga["idb://".concat(_,"/").concat(ke)];if(me){var be=g.table(ke),Ee=me.optimisticOps.filter(function(wt){return wt.trans===oe});if(oe._explicit&&ge&&oe.mutatedParts)for(var we=0,Ae=Object.values(me.queries.query);we<Ae.length;we++)for(var Pe=0,Oe=(ct=Ae[we]).slice();Pe<Oe.length;Pe++)cv((nt=Oe[Pe]).obsSet,oe.mutatedParts)&&(D(ct,nt),nt.subscribers.forEach(function(wt){return ve.add(wt)}));else if(0<Ee.length){me.optimisticOps=me.optimisticOps.filter(function(wt){return wt.trans!==oe});for(var He=0,tt=Object.values(me.queries.query);He<tt.length;He++)for(var ct,nt,at,ft=0,ut=(ct=tt[He]).slice();ft<ut.length;ft++)(nt=ut[ft]).res!=null&&oe.mutatedParts&&(ge&&!nt.dirty?(at=Object.isFrozen(nt.res),at=kS(nt.res,nt.req,Ee,be,nt,at),nt.dirty?(D(ct,nt),nt.subscribers.forEach(function(wt){return ve.add(wt)})):at!==nt.res&&(nt.res=at,nt.promise=ot.resolve({result:at}))):(nt.dirty&&D(ct,nt),nt.subscribers.forEach(function(wt){return ve.add(wt)})))}}}ve.forEach(function(wt){return wt()})}}},oe.addEventListener("abort",I(!1),{signal:Q}),oe.addEventListener("error",I(!1),{signal:Q}),oe.addEventListener("complete",I(!0),{signal:Q})),oe},table:function(k){var R=g.table(k),I=R.schema.primaryKey;return r(r({},R),{mutate:function(B){var Q=it.trans;if(I.outbound||Q.db._options.cache==="disabled"||Q.explicit||Q.idbtrans.mode!=="readwrite")return R.mutate(B);var oe=Ga["idb://".concat(_,"/").concat(k)];return oe?(Q=R.mutate(B),B.type!=="add"&&B.type!=="put"||!(50<=B.values.length||mv(I,B).some(function(ge){return ge==null}))?(oe.optimisticOps.push(B),B.mutatedParts&&Nh(B.mutatedParts),Q.then(function(ge){0<ge.numFailures&&(D(oe.optimisticOps,B),(ge=ES(0,B,ge))&&oe.optimisticOps.push(ge),B.mutatedParts&&Nh(B.mutatedParts))}),Q.catch(function(){D(oe.optimisticOps,B),B.mutatedParts&&Nh(B.mutatedParts)})):Q.then(function(ge){var ve=ES(0,r(r({},B),{values:B.values.map(function(_e,ae){var ke;return ge.failures[ae]?_e:(_e=(ke=I.keyPath)!==null&&ke!==void 0&&ke.includes(".")?W(_e):r({},_e),T(_e,I.keyPath,ge.results[ae]),_e)})}),ge);oe.optimisticOps.push(ve),queueMicrotask(function(){return B.mutatedParts&&Nh(B.mutatedParts)})}),Q):R.mutate(B)},query:function(B){if(!_S(it,R)||!SS("query",B))return R.query(B);var Q=((ve=it.trans)===null||ve===void 0?void 0:ve.db._options.cache)==="immutable",ae=it,oe=ae.requery,ge=ae.signal,ve=function(be,Ee,we,Ae){var Pe=Ga["idb://".concat(be,"/").concat(Ee)];if(!Pe)return[];if(!(Ee=Pe.queries[we]))return[null,!1,Pe,null];var Oe=Ee[(Ae.query?Ae.query.index.name:null)||""];if(!Oe)return[null,!1,Pe,null];switch(we){case"query":var He=Oe.find(function(tt){return tt.req.limit===Ae.limit&&tt.req.values===Ae.values&&CS(tt.req.query.range,Ae.query.range)});return He?[He,!0,Pe,Oe]:[Oe.find(function(tt){return("limit"in tt.req?tt.req.limit:1/0)>=Ae.limit&&(!Ae.values||tt.req.values)&&g5(tt.req.query.range,Ae.query.range)}),!1,Pe,Oe];case"count":return He=Oe.find(function(tt){return CS(tt.req.query.range,Ae.query.range)}),[He,!!He,Pe,Oe]}}(_,k,"query",B),_e=ve[0],ae=ve[1],ke=ve[2],me=ve[3];return _e&&ae?_e.obsSet=B.obsSet:(ae=R.query(B).then(function(be){var Ee=be.result;if(_e&&(_e.res=Ee),Q){for(var we=0,Ae=Ee.length;we<Ae;++we)Object.freeze(Ee[we]);Object.freeze(Ee)}else be.result=W(Ee);return be}).catch(function(be){return me&&_e&&D(me,_e),Promise.reject(be)}),_e={obsSet:B.obsSet,promise:ae,subscribers:new Set,type:"query",req:B,dirty:!1},me?me.push(_e):(me=[_e],(ke=ke||(Ga["idb://".concat(_,"/").concat(k)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[B.query.index.name||""]=me)),m5(_e,me,oe,ge),_e.promise.then(function(be){return{result:kS(be.result,B,ke==null?void 0:ke.optimisticOps,R,_e,Q)}})}})}})}};function Th(g,_){return new Proxy(g,{get:function(k,R,I){return R==="db"?_:Reflect.get(k,R,I)}})}var ls=(Fn.prototype.version=function(g){if(isNaN(g)||g<.1)throw new ie.Type("Given version is not a positive number");if(g=Math.round(10*g)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var _=this._versions,k=_.filter(function(R){return R._cfg.version===g})[0];return k||(k=new this.Version(g),_.push(k),_.sort(s5),k.stores({}),this._state.autoSchema=!1,k)},Fn.prototype._whenReady=function(g){var _=this;return this.idbdb&&(this._state.openComplete||it.letThrough||this._vip)?g():new ot(function(k,R){if(_._state.openComplete)return R(new ie.DatabaseClosed(_._state.dbOpenError));if(!_._state.isBeingOpened){if(!_._state.autoOpen)return void R(new ie.DatabaseClosed);_.open().catch(ze)}_._state.dbReadyPromise.then(k,R)}).then(g)},Fn.prototype.use=function(g){var _=g.stack,k=g.create,R=g.level,I=g.name;return I&&this.unuse({stack:_,name:I}),g=this._middlewares[_]||(this._middlewares[_]=[]),g.push({stack:_,create:k,level:R==null?10:R,name:I}),g.sort(function(B,Q){return B.level-Q.level}),this},Fn.prototype.unuse=function(g){var _=g.stack,k=g.name,R=g.create;return _&&this._middlewares[_]&&(this._middlewares[_]=this._middlewares[_].filter(function(I){return R?I.create!==R:!!k&&I.name!==k})),this},Fn.prototype.open=function(){var g=this;return no(Vt,function(){return c5(g)})},Fn.prototype._close=function(){var g=this._state,_=Wr.indexOf(this);if(0<=_&&Wr.splice(_,1),this.idbdb){try{this.idbdb.close()}catch(k){}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new ot(function(k){g.dbReadyResolve=k}),g.openCanceller=new ot(function(k,R){g.cancelOpen=R}))},Fn.prototype.close=function(k){var _=(k===void 0?{disableAutoOpen:!0}:k).disableAutoOpen,k=this._state;_?(k.isBeingOpened&&k.cancelOpen(new ie.DatabaseClosed),this._close(),k.autoOpen=!1,k.dbOpenError=new ie.DatabaseClosed):(this._close(),k.autoOpen=this._options.autoOpen||k.isBeingOpened,k.openComplete=!1,k.dbOpenError=null)},Fn.prototype.delete=function(g){var _=this;g===void 0&&(g={disableAutoOpen:!0});var k=0<arguments.length&&typeof arguments[0]!="object",R=this._state;return new ot(function(I,B){function Q(){_.close(g);var oe=_._deps.indexedDB.deleteDatabase(_.name);oe.onsuccess=Pt(function(){var ge,ve,_e;ge=_._deps,ve=_.name,_e=ge.indexedDB,ge=ge.IDBKeyRange,av(_e)||ve===Ys||sv(_e,ge).delete(ve).catch(ze),I()}),oe.onerror=Oo(B),oe.onblocked=_._fireOnBlocked}if(k)throw new ie.InvalidArgument("Invalid closeOptions argument to db.delete()");R.isBeingOpened?R.dbReadyPromise.then(Q):Q()})},Fn.prototype.backendDB=function(){return this.idbdb},Fn.prototype.isOpen=function(){return this.idbdb!==null},Fn.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},Fn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Fn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Fn.prototype,"tables",{get:function(){var g=this;return s(this._allTables).map(function(_){return g._allTables[_]})},enumerable:!1,configurable:!0}),Fn.prototype.transaction=function(){var g=(function(_,k,R){var I=arguments.length;if(I<2)throw new ie.InvalidArgument("Too few arguments");for(var B=new Array(I-1);--I;)B[I-1]=arguments[I];return R=B.pop(),[_,M(B),R]}).apply(this,arguments);return this._transaction.apply(this,g)},Fn.prototype._transaction=function(g,_,k){var R=this,I=it.trans;I&&I.db===this&&g.indexOf("!")===-1||(I=null);var B,Q,oe=g.indexOf("?")!==-1;g=g.replace("!","").replace("?","");try{if(Q=_.map(function(ve){if(ve=ve instanceof R.Table?ve.name:ve,typeof ve!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ve}),g=="r"||g===Ro)B=Ro;else{if(g!="rw"&&g!=as)throw new ie.InvalidArgument("Invalid transaction mode: "+g);B=as}if(I){if(I.mode===Ro&&B===as){if(!oe)throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");I=null}I&&Q.forEach(function(ve){if(I&&I.storeNames.indexOf(ve)===-1){if(!oe)throw new ie.SubTransaction("Table "+ve+" not included in parent transaction.");I=null}}),oe&&I&&!I.active&&(I=null)}}catch(ve){return I?I._promise(null,function(_e,ae){ae(ve)}):hn(ve)}var ge=(function ve(_e,ae,ke,me,be){return ot.resolve().then(function(){var Ee=it.transless||it,we=_e._createTransaction(ae,ke,_e._dbSchema,me);if(we.explicit=!0,Ee={trans:we,transless:Ee},me)we.idbtrans=me.idbtrans;else try{we.create(),we.idbtrans._explicit=!0,_e._state.PR1398_maxLoop=3}catch(Oe){return Oe.name===F.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return ve(_e,ae,ke,null,be)})):hn(Oe)}var Ae,Pe=K(be);return Pe&&Ur(),Ee=ot.follow(function(){var Oe;(Ae=be.call(we,we))&&(Pe?(Oe=fr.bind(null,null),Ae.then(Oe,Oe)):typeof Ae.next=="function"&&typeof Ae.throw=="function"&&(Ae=pv(Ae)))},Ee),(Ae&&typeof Ae.then=="function"?ot.resolve(Ae).then(function(Oe){return we.active?Oe:hn(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ee.then(function(){return Ae})).then(function(Oe){return me&&we._resolve(),we._completion.then(function(){return Oe})}).catch(function(Oe){return we._reject(Oe),hn(Oe)})})}).bind(null,this,B,Q,I,k);return I?I._promise(B,ge,"lock"):it.trans?no(it.transless,function(){return R._whenReady(ge)}):this._whenReady(ge)},Fn.prototype.table=function(g){if(!f(this._allTables,g))throw new ie.InvalidTable("Table ".concat(g," does not exist"));return this._allTables[g]},Fn);function Fn(g,_){var k=this;this._middlewares={},this.verno=0;var R=Fn.dependencies;this._options=_=r({addons:Fn.addons,autoOpen:!0,indexedDB:R.indexedDB,IDBKeyRange:R.IDBKeyRange,cache:"cloned"},_),this._deps={indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange},R=_.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var I,B,Q,oe,ge,ve={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ze,dbReadyPromise:null,cancelOpen:ze,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:_.autoOpen};ve.dbReadyPromise=new ot(function(ae){ve.dbReadyResolve=ae}),ve.openCanceller=new ot(function(ae,ke){ve.cancelOpen=ke}),this._state=ve,this.name=g,this.on=xe(this,"populate","blocked","versionchange","close",{ready:[Fe,ze]}),this.on.ready.subscribe=w(this.on.ready.subscribe,function(ae){return function(ke,me){Fn.vip(function(){var be,Ee=k._state;Ee.openComplete?(Ee.dbOpenError||ot.resolve().then(ke),me&&ae(ke)):Ee.onReadyBeingFired?(Ee.onReadyBeingFired.push(ke),me&&ae(ke)):(ae(ke),be=k,me||ae(function we(){be.on.ready.unsubscribe(ke),be.on.ready.unsubscribe(we)}))})}}),this.Collection=(I=this,pe(Pn.prototype,function(Ae,we){this.db=I;var me=Ql,be=null;if(we)try{me=we()}catch(Pe){be=Pe}var Ee=Ae._ctx,we=Ee.table,Ae=we.hook.reading.fire;this._ctx={table:we,index:Ee.index,isPrimKey:!Ee.index||we.schema.primKey.keyPath&&Ee.index===we.schema.primKey.name,range:me,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:be,or:Ee.or,valueMapper:Ae!==ne?Ae:null}})),this.Table=(B=this,pe(J.prototype,function(ae,ke,me){this.db=B,this._tx=me,this.name=ae,this.schema=ke,this.hook=B._allTables[ae]?B._allTables[ae].hook:xe(null,{creating:[Ue,ze],reading:[fe,ne],updating:[Ke,ze],deleting:[We,ze]})})),this.Transaction=(Q=this,pe(n5.prototype,function(ae,ke,me,be,Ee){var we=this;this.db=Q,this.mode=ae,this.storeNames=ke,this.schema=me,this.chromeTransactionDurability=be,this.idbtrans=null,this.on=xe(this,"complete","error","abort"),this.parent=Ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ot(function(Ae,Pe){we._resolve=Ae,we._reject=Pe}),this._completion.then(function(){we.active=!1,we.on.complete.fire()},function(Ae){var Pe=we.active;return we.active=!1,we.on.error.fire(Ae),we.parent?we.parent._reject(Ae):Pe&&we.idbtrans&&we.idbtrans.abort(),hn(Ae)})})),this.Version=(oe=this,pe(u5.prototype,function(ae){this.db=oe,this._cfg={version:ae,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ge=this,pe($c.prototype,function(ae,ke,me){if(this.db=ge,this._ctx={table:ae,index:ke===":id"?null:ke,or:me},this._cmp=this._ascending=Ht,this._descending=function(be,Ee){return Ht(Ee,be)},this._max=function(be,Ee){return 0<Ht(be,Ee)?be:Ee},this._min=function(be,Ee){return Ht(be,Ee)<0?be:Ee},this._IDBKeyRange=ge._deps.IDBKeyRange,!this._IDBKeyRange)throw new ie.MissingAPI})),this.on("versionchange",function(ae){0<ae.newVersion?console.warn("Another connection wants to upgrade database '".concat(k.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(k.name,"'. Closing db now to resume the delete request.")),k.close({disableAutoOpen:!1})}),this.on("blocked",function(ae){!ae.newVersion||ae.newVersion<ae.oldVersion?console.warn("Dexie.delete('".concat(k.name,"') was blocked")):console.warn("Upgrade '".concat(k.name,"' blocked by other connection holding version ").concat(ae.oldVersion/10))}),this._maxKey=Lc(_.IDBKeyRange),this._createTransaction=function(ae,ke,me,be){return new k.Transaction(ae,ke,me,k._options.chromeTransactionDurability,be)},this._fireOnBlocked=function(ae){k.on("blocked").fire(ae),Wr.filter(function(ke){return ke.name===k.name&&ke!==k&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(ae)})},this.use(h5),this.use(y5),this.use(p5),this.use(d5),this.use(f5);var _e=new Proxy(this,{get:function(ae,ke,me){if(ke==="_vip")return!0;if(ke==="table")return function(Ee){return Th(k.table(Ee),_e)};var be=Reflect.get(ae,ke,me);return be instanceof J?Th(be,_e):ke==="tables"?be.map(function(Ee){return Th(Ee,_e)}):ke==="_createTransaction"?function(){return Th(be.apply(this,arguments),_e)}:be}});this.vip=_e,R.forEach(function(ae){return ae(k)})}var Ih,Di=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",v5=(vv.prototype.subscribe=function(g,_,k){return this._subscribe(g&&typeof g!="function"?g:{next:g,error:_,complete:k})},vv.prototype[Di]=function(){return this},vv);function vv(g){this._subscribe=g}try{Ih={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(g){Ih={indexedDB:null,IDBKeyRange:null}}function jS(g){var _,k=!1,R=new v5(function(I){var B=K(g),Q,oe=!1,ge={},ve={},_e={get closed(){return oe},unsubscribe:function(){oe||(oe=!0,Q&&Q.abort(),ae&&Xs.storagemutated.unsubscribe(me))}};I.start&&I.start(_e);var ae=!1,ke=function(){return Va(be)},me=function(Ee){Ah(ge,Ee),cv(ve,ge)&&ke()},be=function(){var Ee,we,Ae;!oe&&Ih.indexedDB&&(ge={},Ee={},Q&&Q.abort(),Q=new AbortController,Ae=function(Pe){var Oe=te();try{B&&Ur();var He=Hr(g,Pe);return He=B?He.finally(fr):He}finally{Oe&&Ze()}}(we={subscr:Ee,signal:Q.signal,requery:ke,querier:g,trans:null}),Promise.resolve(Ae).then(function(Pe){k=!0,_=Pe,oe||we.signal.aborted||(ge={},function(Oe){for(var He in Oe)if(f(Oe,He))return;return 1}(ve=Ee)||ae||(Xs(Dc,me),ae=!0),Va(function(){return!oe&&I.next&&I.next(Pe)}))},function(Pe){k=!1,["DatabaseClosedError","AbortError"].includes(Pe==null?void 0:Pe.name)||oe||Va(function(){oe||I.error&&I.error(Pe)})}))};return setTimeout(ke,0),_e});return R.hasValue=function(){return k},R.getValue=function(){return _},R}var Ya=ls;function wv(g){var _=Js;try{Js=!0,Xs.storagemutated.fire(g),hv(g,!0)}finally{Js=_}}h(Ya,r(r({},Ye),{delete:function(g){return new Ya(g,{addons:[]}).delete()},exists:function(g){return new Ya(g,{addons:[]}).open().then(function(_){return _.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(g){try{return _=Ya.dependencies,k=_.indexedDB,_=_.IDBKeyRange,(av(k)?Promise.resolve(k.databases()).then(function(R){return R.map(function(I){return I.name}).filter(function(I){return I!==Ys})}):sv(k,_).toCollection().primaryKeys()).then(g)}catch(R){return hn(new ie.MissingAPI)}var _,k},defineClass:function(){return function(g){l(this,g)}},ignoreTransaction:function(g){return it.trans?no(it.transless,g):g()},vip:lv,async:function(g){return function(){try{var _=pv(g.apply(this,arguments));return _&&typeof _.then=="function"?_:ot.resolve(_)}catch(k){return hn(k)}}},spawn:function(g,_,k){try{var R=pv(g.apply(k,_||[]));return R&&typeof R.then=="function"?R:ot.resolve(R)}catch(I){return hn(I)}},currentTransaction:{get:function(){return it.trans||null}},waitFor:function(g,_){return _=ot.resolve(typeof g=="function"?Ya.ignoreTransaction(g):g).timeout(_||6e4),it.trans?it.trans.waitFor(_):_},Promise:ot,debug:{get:function(){return qe},set:function(g){$e(g)}},derive:y,extend:l,props:h,override:w,Events:xe,on:Xs,liveQuery:jS,extendObservabilitySet:Ah,getByKeyPath:A,setByKeyPath:T,delByKeyPath:function(g,_){typeof _=="string"?T(g,_,void 0):"length"in _&&[].map.call(_,function(k){T(g,k,void 0)})},shallowClone:P,deepClone:W,getObjectDiff:gv,cmp:Ht,asap:E,minKey:-1/0,addons:[],connections:Wr,errnames:F,dependencies:Ih,cache:Ga,semVer:"4.0.11",version:"4.0.11".split(".").map(function(g){return parseInt(g)}).reduce(function(g,_,k){return g+_/Math.pow(10,2*k)})})),Ya.maxKey=Lc(Ya.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Xs(Dc,function(g){Js||(g=new CustomEvent(Zy,{detail:g}),Js=!0,dispatchEvent(g),Js=!1)}),addEventListener(Zy,function(g){g=g.detail,Js||wv(g)}));var eu,Js=!1,AS=function(){};return typeof BroadcastChannel<"u"&&((AS=function(){(eu=new BroadcastChannel(Zy)).onmessage=function(g){return g.data&&wv(g.data)}})(),typeof eu.unref=="function"&&eu.unref(),Xs(Dc,function(g){Js||eu.postMessage(g)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(g){if(!ls.disableBfCache&&g.persisted){qe&&console.debug("Dexie: handling persisted pagehide"),eu!=null&&eu.close();for(var _=0,k=Wr;_<k.length;_++)k[_].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(g){!ls.disableBfCache&&g.persisted&&(qe&&console.debug("Dexie: handling persisted pageshow"),AS(),wv({all:new Er(-1/0,[[]])}))})),ot.rejectionMapper=function(g,_){return!g||g instanceof ce||g instanceof TypeError||g instanceof SyntaxError||!g.name||!De[g.name]?g:(_=new De[g.name](_||g.message,g),"stack"in g&&v(_,"stack",{get:function(){return this.inner.stack}}),_)},$e(qe),r(ls,Object.freeze({__proto__:null,Dexie:ls,liveQuery:jS,Entity:Zl,cmp:Ht,PropModification:Xt,replacePrefix:function(g,_){return new Xt({replacePrefix:[g,_]})},add:function(g){return new Xt({add:g})},remove:function(g){return new Xt({remove:g})},default:ls,RangeSet:Er,mergeRanges:zc,rangesOverlap:yS}),{default:ls}),ls})})(pP);var Yz=pP.exports;const kb=zs(Yz),Qk=Symbol.for("Dexie"),Lg=globalThis[Qk]||(globalThis[Qk]=kb);if(kb.semVer!==Lg.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(kb.semVer," and ").concat(Lg.semVer));const{liveQuery:Xz,mergeRanges:vle,rangesOverlap:wle,RangeSet:ble,cmp:xle,Entity:_le,PropModification:Sle,replacePrefix:Ele,add:kle,remove:Cle}=Lg,_t=new Lg("bardsballad");_t.version(1).stores({characters:"&local_id, updatedAt, id",systems:"&local_id, id",subscriptions:"&local_id, user_id, resource_id, version_id",versions:"&local_id, reference_id, id"});const pr=[];for(let e=0;e<256;++e)pr.push((e+256).toString(16).slice(1));function Jz(e,t=0){return(pr[e[t+0]]+pr[e[t+1]]+pr[e[t+2]]+pr[e[t+3]]+"-"+pr[e[t+4]]+pr[e[t+5]]+"-"+pr[e[t+6]]+pr[e[t+7]]+"-"+pr[e[t+8]]+pr[e[t+9]]+"-"+pr[e[t+10]]+pr[e[t+11]]+pr[e[t+12]]+pr[e[t+13]]+pr[e[t+14]]+pr[e[t+15]]).toLowerCase()}let o0;const Qz=new Uint8Array(16);function Zz(){if(!o0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o0=crypto.getRandomValues.bind(crypto)}return o0(Qz)}const eH=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zk={randomUUID:eH};function u1(e,t,n){var i,o,s;if(Zk.randomUUID&&!e)return Zk.randomUUID();e=e||{};const r=(s=(o=e.random)!=null?o:(i=e.rng)==null?void 0:i.call(e))!=null?s:Zz();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Jz(r)}function ap(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gP={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(u,c){if(!i[u]){if(!r[u]){var f=typeof ap=="function"&&ap;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[u]={exports:{}};r[u][0].call(p.exports,function(v){var y=r[u][1][v];return s(y||v)},p,p.exports,n,r,i,o)}return i[u].exports}for(var a=typeof ap=="function"&&ap,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var l=0,u=new s(v),c=o.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=v,a=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var x=o.document.createElement("script");x.onreadystatechange=function(){v(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},o.document.documentElement.appendChild(x)}:a=function(){setTimeout(v,0)};var h,p=[];function v(){h=!0;for(var x,m,b=p.length;b;){for(m=p,p=[],x=-1;++x<b;)m[x]();b=p.length}h=!1}r.exports=y;function y(x){p.push(x)===1&&!h&&a()}}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==s&&y(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,A){if(typeof E!="function"&&this.state===u||typeof A!="function"&&this.state===l)return this;var T=new this.constructor(s);if(this.state!==c){var P=this.state===u?E:A;p(T,P,this.outcome)}else this.queue.push(new h(T,E,A));return T};function h(E,A,T){this.promise=E,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},h.prototype.otherCallFulfilled=function(E){p(this.promise,this.onFulfilled,E)},h.prototype.callRejected=function(E){a.reject(this.promise,E)},h.prototype.otherCallRejected=function(E){p(this.promise,this.onRejected,E)};function p(E,A,T){o(function(){var P;try{P=A(T)}catch(V){return a.reject(E,V)}P===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,P)})}a.resolve=function(E,A){var T=x(v,A);if(T.status==="error")return a.reject(E,T.value);var P=T.value;if(P)y(E,P);else{E.state=u,E.outcome=A;for(var V=-1,M=E.queue.length;++V<M;)E.queue[V].callFulfilled(A)}return E},a.reject=function(E,A){E.state=l,E.outcome=A;for(var T=-1,P=E.queue.length;++T<P;)E.queue[T].callRejected(A);return E};function v(E){var A=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof A=="function")return function(){A.apply(E,arguments)}}function y(E,A){var T=!1;function P(ee){T||(T=!0,a.reject(E,ee))}function V(ee){T||(T=!0,a.resolve(E,ee))}function M(){A(V,P)}var H=x(M);H.status==="error"&&P(H.value)}function x(E,A){var T={};try{T.value=E(A),T.status="success"}catch(P){T.status="error",T.value=P}return T}f.resolve=m;function m(E){return E instanceof this?E:a.resolve(new this(s),E)}f.reject=b;function b(E){var A=new this(s);return a.reject(A,E)}f.all=w;function w(E){var A=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,P=!1;if(!T)return this.resolve([]);for(var V=new Array(T),M=0,H=-1,ee=new this(s);++H<T;)W(E[H],H);return ee;function W(L,q){A.resolve(L).then(Y,function(re){P||(P=!0,a.reject(ee,re))});function Y(re){V[q]=re,++M===T&&!P&&(P=!0,a.resolve(ee,V))}}}f.race=S;function S(E){var A=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,P=!1;if(!T)return this.resolve([]);for(var V=-1,M=new this(s);++V<T;)H(E[V]);return M;function H(ee){A.resolve(ee).then(function(W){P||(P=!0,a.resolve(M,W))},function(W){P||(P=!0,a.reject(M,W))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U};function s(U,le){if(!(U instanceof le))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(U){return}}var l=a();function u(){try{if(!l||!l.open)return!1;var U=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),le=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!U||le)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(J){return!1}}function c(U,le){U=U||[],le=le||{};try{return new Blob(U,le)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var J=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ue=new J,xe=0;xe<U.length;xe+=1)ue.append(U[xe]);return ue.getBlob(le.type)}}typeof Promise>"u"&&n(3);var f=Promise;function h(U,le){le&&U.then(function(J){le(null,J)},function(J){le(J)})}function p(U,le,J){typeof le=="function"&&U.then(le),typeof J=="function"&&U.catch(J)}function v(U){return typeof U!="string"&&(console.warn(U+" used as a key, but it is not a string."),U=String(U)),U}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",m=void 0,b={},w=Object.prototype.toString,S="readonly",E="readwrite";function A(U){for(var le=U.length,J=new ArrayBuffer(le),ue=new Uint8Array(J),xe=0;xe<le;xe++)ue[xe]=U.charCodeAt(xe);return J}function T(U){return new f(function(le){var J=U.transaction(x,E),ue=c([""]);J.objectStore(x).put(ue,"key"),J.onabort=function(xe){xe.preventDefault(),xe.stopPropagation(),le(!1)},J.oncomplete=function(){var xe=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);le(pe||!xe||parseInt(xe[1],10)>=43)}}).catch(function(){return!1})}function P(U){return typeof m=="boolean"?f.resolve(m):T(U).then(function(le){return m=le,m})}function V(U){var le=b[U.name],J={};J.promise=new f(function(ue,xe){J.resolve=ue,J.reject=xe}),le.deferredOperations.push(J),le.dbReady?le.dbReady=le.dbReady.then(function(){return J.promise}):le.dbReady=J.promise}function M(U){var le=b[U.name],J=le.deferredOperations.pop();if(J)return J.resolve(),J.promise}function H(U,le){var J=b[U.name],ue=J.deferredOperations.pop();if(ue)return ue.reject(le),ue.promise}function ee(U,le){return new f(function(J,ue){if(b[U.name]=b[U.name]||se(),U.db)if(le)V(U),U.db.close();else return J(U.db);var xe=[U.name];le&&xe.push(U.version);var pe=l.open.apply(l,xe);le&&(pe.onupgradeneeded=function(Le){var Ge=pe.result;try{Ge.createObjectStore(U.storeName),Le.oldVersion<=1&&Ge.createObjectStore(x)}catch(Je){if(Je.name==="ConstraintError")console.warn('The database "'+U.name+'" has been upgraded from version '+Le.oldVersion+" to version "+Le.newVersion+', but the storage "'+U.storeName+'" already exists.');else throw Je}}),pe.onerror=function(Le){Le.preventDefault(),ue(pe.error)},pe.onsuccess=function(){var Le=pe.result;Le.onversionchange=function(Ge){Ge.target.close()},J(Le),M(U)}})}function W(U){return ee(U,!1)}function L(U){return ee(U,!0)}function q(U,le){if(!U.db)return!0;var J=!U.db.objectStoreNames.contains(U.storeName),ue=U.version<U.db.version,xe=U.version>U.db.version;if(ue&&(U.version!==le&&console.warn('The database "'+U.name+"\" can't be downgraded from version "+U.db.version+" to version "+U.version+"."),U.version=U.db.version),xe||J){if(J){var pe=U.db.version+1;pe>U.version&&(U.version=pe)}return!0}return!1}function Y(U){return new f(function(le,J){var ue=new FileReader;ue.onerror=J,ue.onloadend=function(xe){var pe=btoa(xe.target.result||"");le({__local_forage_encoded_blob:!0,data:pe,type:U.type})},ue.readAsBinaryString(U)})}function re(U){var le=A(atob(U.data));return c([le],{type:U.type})}function D(U){return U&&U.__local_forage_encoded_blob}function z(U){var le=this,J=le._initReady().then(function(){var ue=b[le._dbInfo.name];if(ue&&ue.dbReady)return ue.dbReady});return p(J,U,U),J}function O(U){V(U);for(var le=b[U.name],J=le.forages,ue=0;ue<J.length;ue++){var xe=J[ue];xe._dbInfo.db&&(xe._dbInfo.db.close(),xe._dbInfo.db=null)}return U.db=null,W(U).then(function(pe){return U.db=pe,q(U)?L(U):pe}).then(function(pe){U.db=le.db=pe;for(var Le=0;Le<J.length;Le++)J[Le]._dbInfo.db=pe}).catch(function(pe){throw H(U,pe),pe})}function K(U,le,J,ue){ue===void 0&&(ue=1);try{var xe=U.db.transaction(U.storeName,le);J(null,xe)}catch(pe){if(ue>0&&(!U.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return f.resolve().then(function(){if(!U.db||pe.name==="NotFoundError"&&!U.db.objectStoreNames.contains(U.storeName)&&U.version<=U.db.version)return U.db&&(U.version=U.db.version+1),L(U)}).then(function(){return O(U).then(function(){K(U,le,J,ue-1)})}).catch(J);J(pe)}}function se(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ce(U){var le=this,J={db:null};if(U)for(var ue in U)J[ue]=U[ue];var xe=b[J.name];xe||(xe=se(),b[J.name]=xe),xe.forages.push(le),le._initReady||(le._initReady=le.ready,le.ready=z);var pe=[];function Le(){return f.resolve()}for(var Ge=0;Ge<xe.forages.length;Ge++){var Je=xe.forages[Ge];Je!==le&&pe.push(Je._initReady().catch(Le))}var Xe=xe.forages.slice(0);return f.all(pe).then(function(){return J.db=xe.db,W(J)}).then(function(st){return J.db=st,q(J,le._defaultConfig.version)?L(J):st}).then(function(st){J.db=xe.db=st,le._dbInfo=J;for(var xt=0;xt<Xe.length;xt++){var Bt=Xe[xt];Bt!==le&&(Bt._dbInfo.db=J.db,Bt._dbInfo.version=J.version)}})}function Ce(U,le){var J=this;U=v(U);var ue=new f(function(xe,pe){J.ready().then(function(){K(J._dbInfo,S,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(J._dbInfo.storeName),Xe=Je.get(U);Xe.onsuccess=function(){var st=Xe.result;st===void 0&&(st=null),D(st)&&(st=re(st)),xe(st)},Xe.onerror=function(){pe(Xe.error)}}catch(st){pe(st)}})}).catch(pe)});return h(ue,le),ue}function Ie(U,le){var J=this,ue=new f(function(xe,pe){J.ready().then(function(){K(J._dbInfo,S,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(J._dbInfo.storeName),Xe=Je.openCursor(),st=1;Xe.onsuccess=function(){var xt=Xe.result;if(xt){var Bt=xt.value;D(Bt)&&(Bt=re(Bt));var Xt=U(Bt,xt.key,st++);Xt!==void 0?xe(Xt):xt.continue()}else xe()},Xe.onerror=function(){pe(Xe.error)}}catch(xt){pe(xt)}})}).catch(pe)});return h(ue,le),ue}function Re(U,le,J){var ue=this;U=v(U);var xe=new f(function(pe,Le){var Ge;ue.ready().then(function(){return Ge=ue._dbInfo,w.call(le)==="[object Blob]"?P(Ge.db).then(function(Je){return Je?le:Y(le)}):le}).then(function(Je){K(ue._dbInfo,E,function(Xe,st){if(Xe)return Le(Xe);try{var xt=st.objectStore(ue._dbInfo.storeName);Je===null&&(Je=void 0);var Bt=xt.put(Je,U);st.oncomplete=function(){Je===void 0&&(Je=null),pe(Je)},st.onabort=st.onerror=function(){var Xt=Bt.error?Bt.error:Bt.transaction.error;Le(Xt)}}catch(Xt){Le(Xt)}})}).catch(Le)});return h(xe,J),xe}function F(U,le){var J=this;U=v(U);var ue=new f(function(xe,pe){J.ready().then(function(){K(J._dbInfo,E,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(J._dbInfo.storeName),Xe=Je.delete(U);Ge.oncomplete=function(){xe()},Ge.onerror=function(){pe(Xe.error)},Ge.onabort=function(){var st=Xe.error?Xe.error:Xe.transaction.error;pe(st)}}catch(st){pe(st)}})}).catch(pe)});return h(ue,le),ue}function Z(U){var le=this,J=new f(function(ue,xe){le.ready().then(function(){K(le._dbInfo,E,function(pe,Le){if(pe)return xe(pe);try{var Ge=Le.objectStore(le._dbInfo.storeName),Je=Ge.clear();Le.oncomplete=function(){ue()},Le.onabort=Le.onerror=function(){var Xe=Je.error?Je.error:Je.transaction.error;xe(Xe)}}catch(Xe){xe(Xe)}})}).catch(xe)});return h(J,U),J}function ie(U){var le=this,J=new f(function(ue,xe){le.ready().then(function(){K(le._dbInfo,S,function(pe,Le){if(pe)return xe(pe);try{var Ge=Le.objectStore(le._dbInfo.storeName),Je=Ge.count();Je.onsuccess=function(){ue(Je.result)},Je.onerror=function(){xe(Je.error)}}catch(Xe){xe(Xe)}})}).catch(xe)});return h(J,U),J}function De(U,le){var J=this,ue=new f(function(xe,pe){if(U<0){xe(null);return}J.ready().then(function(){K(J._dbInfo,S,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(J._dbInfo.storeName),Xe=!1,st=Je.openKeyCursor();st.onsuccess=function(){var xt=st.result;if(!xt){xe(null);return}U===0||Xe?xe(xt.key):(Xe=!0,xt.advance(U))},st.onerror=function(){pe(st.error)}}catch(xt){pe(xt)}})}).catch(pe)});return h(ue,le),ue}function Ye(U){var le=this,J=new f(function(ue,xe){le.ready().then(function(){K(le._dbInfo,S,function(pe,Le){if(pe)return xe(pe);try{var Ge=Le.objectStore(le._dbInfo.storeName),Je=Ge.openKeyCursor(),Xe=[];Je.onsuccess=function(){var st=Je.result;if(!st){ue(Xe);return}Xe.push(st.key),st.continue()},Je.onerror=function(){xe(Je.error)}}catch(st){xe(st)}})}).catch(xe)});return h(J,U),J}function ze(U,le){le=y.apply(this,arguments);var J=this.config();U=typeof U!="function"&&U||{},U.name||(U.name=U.name||J.name,U.storeName=U.storeName||J.storeName);var ue=this,xe;if(!U.name)xe=f.reject("Invalid arguments");else{var pe=U.name===J.name&&ue._dbInfo.db,Le=pe?f.resolve(ue._dbInfo.db):W(U).then(function(Ge){var Je=b[U.name],Xe=Je.forages;Je.db=Ge;for(var st=0;st<Xe.length;st++)Xe[st]._dbInfo.db=Ge;return Ge});U.storeName?xe=Le.then(function(Ge){if(Ge.objectStoreNames.contains(U.storeName)){var Je=Ge.version+1;V(U);var Xe=b[U.name],st=Xe.forages;Ge.close();for(var xt=0;xt<st.length;xt++){var Bt=st[xt];Bt._dbInfo.db=null,Bt._dbInfo.version=Je}var Xt=new f(function(rn,Pn){var jt=l.open(U.name,Je);jt.onerror=function(Sr){var Ka=jt.result;Ka.close(),Pn(Sr)},jt.onupgradeneeded=function(){var Sr=jt.result;Sr.deleteObjectStore(U.storeName)},jt.onsuccess=function(){var Sr=jt.result;Sr.close(),rn(Sr)}});return Xt.then(function(rn){Xe.db=rn;for(var Pn=0;Pn<st.length;Pn++){var jt=st[Pn];jt._dbInfo.db=rn,M(jt._dbInfo)}}).catch(function(rn){throw(H(U,rn)||f.resolve()).catch(function(){}),rn})}}):xe=Le.then(function(Ge){V(U);var Je=b[U.name],Xe=Je.forages;Ge.close();for(var st=0;st<Xe.length;st++){var xt=Xe[st];xt._dbInfo.db=null}var Bt=new f(function(Xt,rn){var Pn=l.deleteDatabase(U.name);Pn.onerror=function(){var jt=Pn.result;jt&&jt.close(),rn(Pn.error)},Pn.onblocked=function(){console.warn('dropInstance blocked for database "'+U.name+'" until all open connections are closed')},Pn.onsuccess=function(){var jt=Pn.result;jt&&jt.close(),Xt(jt)}});return Bt.then(function(Xt){Je.db=Xt;for(var rn=0;rn<Xe.length;rn++){var Pn=Xe[rn];M(Pn._dbInfo)}}).catch(function(Xt){throw(H(U,Xt)||f.resolve()).catch(function(){}),Xt})})}return h(xe,le),xe}var ne={_driver:"asyncStorage",_initStorage:ce,_support:u(),iterate:Ie,getItem:Ce,setItem:Re,removeItem:F,clear:Z,length:ie,key:De,keys:Ye,dropInstance:ze};function fe(){return typeof openDatabase=="function"}var Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue="~~local_forage_type~",We=/^~~local_forage_type~([^~]+)~/,Ke="__lfsc__:",he=Ke.length,Fe="arbf",qe="blob",$e="si08",At="ui08",fn="uic8",Ct="si16",tn="si32",$="ur16",C="ui32",N="fl32",X="fl64",de=he+Fe.length,je=Object.prototype.toString;function Be(U){var le=U.length*.75,J=U.length,ue,xe=0,pe,Le,Ge,Je;U[U.length-1]==="="&&(le--,U[U.length-2]==="="&&le--);var Xe=new ArrayBuffer(le),st=new Uint8Array(Xe);for(ue=0;ue<J;ue+=4)pe=Se.indexOf(U[ue]),Le=Se.indexOf(U[ue+1]),Ge=Se.indexOf(U[ue+2]),Je=Se.indexOf(U[ue+3]),st[xe++]=pe<<2|Le>>4,st[xe++]=(Le&15)<<4|Ge>>2,st[xe++]=(Ge&3)<<6|Je&63;return Xe}function Nt(U){var le=new Uint8Array(U),J="",ue;for(ue=0;ue<le.length;ue+=3)J+=Se[le[ue]>>2],J+=Se[(le[ue]&3)<<4|le[ue+1]>>4],J+=Se[(le[ue+1]&15)<<2|le[ue+2]>>6],J+=Se[le[ue+2]&63];return le.length%3===2?J=J.substring(0,J.length-1)+"=":le.length%3===1&&(J=J.substring(0,J.length-2)+"=="),J}function Vt(U,le){var J="";if(U&&(J=je.call(U)),U&&(J==="[object ArrayBuffer]"||U.buffer&&je.call(U.buffer)==="[object ArrayBuffer]")){var ue,xe=Ke;U instanceof ArrayBuffer?(ue=U,xe+=Fe):(ue=U.buffer,J==="[object Int8Array]"?xe+=$e:J==="[object Uint8Array]"?xe+=At:J==="[object Uint8ClampedArray]"?xe+=fn:J==="[object Int16Array]"?xe+=Ct:J==="[object Uint16Array]"?xe+=$:J==="[object Int32Array]"?xe+=tn:J==="[object Uint32Array]"?xe+=C:J==="[object Float32Array]"?xe+=N:J==="[object Float64Array]"?xe+=X:le(new Error("Failed to get type for BinaryArray"))),le(xe+Nt(ue))}else if(J==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Le=Ue+U.type+"~"+Nt(this.result);le(Ke+qe+Le)},pe.readAsArrayBuffer(U)}else try{le(JSON.stringify(U))}catch(Le){console.error("Couldn't convert value into a JSON string: ",U),le(null,Le)}}function it(U){if(U.substring(0,he)!==Ke)return JSON.parse(U);var le=U.substring(de),J=U.substring(he,de),ue;if(J===qe&&We.test(le)){var xe=le.match(We);ue=xe[1],le=le.substring(xe[0].length)}var pe=Be(le);switch(J){case Fe:return pe;case qe:return c([pe],{type:ue});case $e:return new Int8Array(pe);case At:return new Uint8Array(pe);case fn:return new Uint8ClampedArray(pe);case Ct:return new Int16Array(pe);case $:return new Uint16Array(pe);case tn:return new Int32Array(pe);case C:return new Uint32Array(pe);case N:return new Float32Array(pe);case X:return new Float64Array(pe);default:throw new Error("Unkown type: "+J)}}var Yt={serialize:Vt,deserialize:it,stringToBuffer:Be,bufferToString:Nt};function Ot(U,le,J,ue){U.executeSql("CREATE TABLE IF NOT EXISTS "+le.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],J,ue)}function Qi(U){var le=this,J={db:null};if(U)for(var ue in U)J[ue]=typeof U[ue]!="string"?U[ue].toString():U[ue];var xe=new f(function(pe,Le){try{J.db=openDatabase(J.name,String(J.version),J.description,J.size)}catch(Ge){return Le(Ge)}J.db.transaction(function(Ge){Ot(Ge,J,function(){le._dbInfo=J,pe()},function(Je,Xe){Le(Xe)})},Le)});return J.serializer=Yt,xe}function ot(U,le,J,ue,xe,pe){U.executeSql(J,ue,xe,function(Le,Ge){Ge.code===Ge.SYNTAX_ERR?Le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[le.storeName],function(Je,Xe){Xe.rows.length?pe(Je,Ge):Ot(Je,le,function(){Je.executeSql(J,ue,xe,pe)},pe)},pe):pe(Le,Ge)},pe)}function Co(U,le){var J=this;U=v(U);var ue=new f(function(xe,pe){J.ready().then(function(){var Le=J._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"SELECT * FROM "+Le.storeName+" WHERE key = ? LIMIT 1",[U],function(Je,Xe){var st=Xe.rows.length?Xe.rows.item(0).value:null;st&&(st=Le.serializer.deserialize(st)),xe(st)},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(ue,le),ue}function jo(U,le){var J=this,ue=new f(function(xe,pe){J.ready().then(function(){var Le=J._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"SELECT * FROM "+Le.storeName,[],function(Je,Xe){for(var st=Xe.rows,xt=st.length,Bt=0;Bt<xt;Bt++){var Xt=st.item(Bt),rn=Xt.value;if(rn&&(rn=Le.serializer.deserialize(rn)),rn=U(rn,Xt.key,Bt+1),rn!==void 0){xe(rn);return}}xe()},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(ue,le),ue}function Ao(U,le,J,ue){var xe=this;U=v(U);var pe=new f(function(Le,Ge){xe.ready().then(function(){le===void 0&&(le=null);var Je=le,Xe=xe._dbInfo;Xe.serializer.serialize(le,function(st,xt){xt?Ge(xt):Xe.db.transaction(function(Bt){ot(Bt,Xe,"INSERT OR REPLACE INTO "+Xe.storeName+" (key, value) VALUES (?, ?)",[U,st],function(){Le(Je)},function(Xt,rn){Ge(rn)})},function(Bt){if(Bt.code===Bt.QUOTA_ERR){if(ue>0){Le(Ao.apply(xe,[U,Je,J,ue-1]));return}Ge(Bt)}})})}).catch(Ge)});return h(pe,J),pe}function os(U,le,J){return Ao.apply(this,[U,le,J,1])}function Zi(U,le){var J=this;U=v(U);var ue=new f(function(xe,pe){J.ready().then(function(){var Le=J._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"DELETE FROM "+Le.storeName+" WHERE key = ?",[U],function(){xe()},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(ue,le),ue}function Ks(U){var le=this,J=new f(function(ue,xe){le.ready().then(function(){var pe=le._dbInfo;pe.db.transaction(function(Le){ot(Le,pe,"DELETE FROM "+pe.storeName,[],function(){ue()},function(Ge,Je){xe(Je)})})}).catch(xe)});return h(J,U),J}function G(U){var le=this,J=new f(function(ue,xe){le.ready().then(function(){var pe=le._dbInfo;pe.db.transaction(function(Le){ot(Le,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(Ge,Je){var Xe=Je.rows.item(0).c;ue(Xe)},function(Ge,Je){xe(Je)})})}).catch(xe)});return h(J,U),J}function te(U,le){var J=this,ue=new f(function(xe,pe){J.ready().then(function(){var Le=J._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"SELECT key FROM "+Le.storeName+" WHERE id = ? LIMIT 1",[U+1],function(Je,Xe){var st=Xe.rows.length?Xe.rows.item(0).key:null;xe(st)},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(ue,le),ue}function Ze(U){var le=this,J=new f(function(ue,xe){le.ready().then(function(){var pe=le._dbInfo;pe.db.transaction(function(Le){ot(Le,pe,"SELECT key FROM "+pe.storeName,[],function(Ge,Je){for(var Xe=[],st=0;st<Je.rows.length;st++)Xe.push(Je.rows.item(st).key);ue(Xe)},function(Ge,Je){xe(Je)})})}).catch(xe)});return h(J,U),J}function rt(U){return new f(function(le,J){U.transaction(function(ue){ue.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(xe,pe){for(var Le=[],Ge=0;Ge<pe.rows.length;Ge++)Le.push(pe.rows.item(Ge).name);le({db:U,storeNames:Le})},function(xe,pe){J(pe)})},function(ue){J(ue)})})}function gt(U,le){le=y.apply(this,arguments);var J=this.config();U=typeof U!="function"&&U||{},U.name||(U.name=U.name||J.name,U.storeName=U.storeName||J.storeName);var ue=this,xe;return U.name?xe=new f(function(pe){var Le;U.name===J.name?Le=ue._dbInfo.db:Le=openDatabase(U.name,"","",0),U.storeName?pe({db:Le,storeNames:[U.storeName]}):pe(rt(Le))}).then(function(pe){return new f(function(Le,Ge){pe.db.transaction(function(Je){function Xe(Xt){return new f(function(rn,Pn){Je.executeSql("DROP TABLE IF EXISTS "+Xt,[],function(){rn()},function(jt,Sr){Pn(Sr)})})}for(var st=[],xt=0,Bt=pe.storeNames.length;xt<Bt;xt++)st.push(Xe(pe.storeNames[xt]));f.all(st).then(function(){Le()}).catch(function(Xt){Ge(Xt)})},function(Je){Ge(Je)})})}):xe=f.reject("Invalid arguments"),h(xe,le),xe}var Pt={_driver:"webSQLStorage",_initStorage:Qi,_support:fe(),iterate:jo,getItem:Co,setItem:os,removeItem:Zi,clear:Ks,length:G,key:te,keys:Ze,dropInstance:gt};function Jt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(U){return!1}}function ss(U,le){var J=U.name+"/";return U.storeName!==le.storeName&&(J+=U.storeName+"/"),J}function xr(){var U="_localforage_support_test";try{return localStorage.setItem(U,!0),localStorage.removeItem(U),!1}catch(le){return!0}}function eo(){return!xr()||localStorage.length>0}function No(U){var le=this,J={};if(U)for(var ue in U)J[ue]=U[ue];return J.keyPrefix=ss(U,le._defaultConfig),eo()?(le._dbInfo=J,J.serializer=Yt,f.resolve()):f.reject()}function Gs(U){var le=this,J=le.ready().then(function(){for(var ue=le._dbInfo.keyPrefix,xe=localStorage.length-1;xe>=0;xe--){var pe=localStorage.key(xe);pe.indexOf(ue)===0&&localStorage.removeItem(pe)}});return h(J,U),J}function Hr(U,le){var J=this;U=v(U);var ue=J.ready().then(function(){var xe=J._dbInfo,pe=localStorage.getItem(xe.keyPrefix+U);return pe&&(pe=xe.serializer.deserialize(pe)),pe});return h(ue,le),ue}function Ur(U,le){var J=this,ue=J.ready().then(function(){for(var xe=J._dbInfo,pe=xe.keyPrefix,Le=pe.length,Ge=localStorage.length,Je=1,Xe=0;Xe<Ge;Xe++){var st=localStorage.key(Xe);if(st.indexOf(pe)===0){var xt=localStorage.getItem(st);if(xt&&(xt=xe.serializer.deserialize(xt)),xt=U(xt,st.substring(Le),Je++),xt!==void 0)return xt}}});return h(ue,le),ue}function fr(U,le){var J=this,ue=J.ready().then(function(){var xe=J._dbInfo,pe;try{pe=localStorage.key(U)}catch(Le){pe=null}return pe&&(pe=pe.substring(xe.keyPrefix.length)),pe});return h(ue,le),ue}function yi(U){var le=this,J=le.ready().then(function(){for(var ue=le._dbInfo,xe=localStorage.length,pe=[],Le=0;Le<xe;Le++){var Ge=localStorage.key(Le);Ge.indexOf(ue.keyPrefix)===0&&pe.push(Ge.substring(ue.keyPrefix.length))}return pe});return h(J,U),J}function to(U){var le=this,J=le.keys().then(function(ue){return ue.length});return h(J,U),J}function Vn(U,le){var J=this;U=v(U);var ue=J.ready().then(function(){var xe=J._dbInfo;localStorage.removeItem(xe.keyPrefix+U)});return h(ue,le),ue}function _r(U,le,J){var ue=this;U=v(U);var xe=ue.ready().then(function(){le===void 0&&(le=null);var pe=le;return new f(function(Le,Ge){var Je=ue._dbInfo;Je.serializer.serialize(le,function(Xe,st){if(st)Ge(st);else try{localStorage.setItem(Je.keyPrefix+U,Xe),Le(pe)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ge(xt),Ge(xt)}})})});return h(xe,J),xe}function no(U,le){if(le=y.apply(this,arguments),U=typeof U!="function"&&U||{},!U.name){var J=this.config();U.name=U.name||J.name,U.storeName=U.storeName||J.storeName}var ue=this,xe;return U.name?xe=new f(function(pe){U.storeName?pe(ss(U,ue._defaultConfig)):pe(U.name+"/")}).then(function(pe){for(var Le=localStorage.length-1;Le>=0;Le--){var Ge=localStorage.key(Le);Ge.indexOf(pe)===0&&localStorage.removeItem(Ge)}}):xe=f.reject("Invalid arguments"),h(xe,le),xe}var Jl={_driver:"localStorageWrapper",_initStorage:No,_support:Jt(),iterate:Ur,getItem:Hr,setItem:_r,removeItem:Vn,clear:Gs,length:to,key:fr,keys:yi,dropInstance:no},Va=function(le,J){return le===J||typeof le=="number"&&typeof J=="number"&&isNaN(le)&&isNaN(J)},hn=function(le,J){for(var ue=le.length,xe=0;xe<ue;){if(Va(le[xe],J))return!0;xe++}return!1},$i=Array.isArray||function(U){return Object.prototype.toString.call(U)==="[object Array]"},hr={},qa={},Wr={INDEXEDDB:ne,WEBSQL:Pt,LOCALSTORAGE:Jl},Ys=[Wr.INDEXEDDB._driver,Wr.WEBSQL._driver,Wr.LOCALSTORAGE._driver],Ro=["dropInstance"],as=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ro),Mi={description:"",driver:Ys.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ql(U,le){U[le]=function(){var J=arguments;return U.ready().then(function(){return U[le].apply(U,J)})}}function To(){for(var U=1;U<arguments.length;U++){var le=arguments[U];if(le)for(var J in le)le.hasOwnProperty(J)&&($i(le[J])?arguments[0][J]=le[J].slice():arguments[0][J]=le[J])}return arguments[0]}var Zl=function(){function U(le){s(this,U);for(var J in Wr)if(Wr.hasOwnProperty(J)){var ue=Wr[J],xe=ue._driver;this[J]=xe,hr[xe]||this.defineDriver(ue)}this._defaultConfig=To({},Mi),this._config=To({},this._defaultConfig,le),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return U.prototype.config=function(J){if((typeof J>"u"?"undefined":o(J))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ue in J){if(ue==="storeName"&&(J[ue]=J[ue].replace(/\W/g,"_")),ue==="version"&&typeof J[ue]!="number")return new Error("Database version must be a number.");this._config[ue]=J[ue]}return"driver"in J&&J.driver?this.setDriver(this._config.driver):!0}else return typeof J=="string"?this._config[J]:this._config},U.prototype.defineDriver=function(J,ue,xe){var pe=new f(function(Le,Ge){try{var Je=J._driver,Xe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!J._driver){Ge(Xe);return}for(var st=as.concat("_initStorage"),xt=0,Bt=st.length;xt<Bt;xt++){var Xt=st[xt],rn=!hn(Ro,Xt);if((rn||J[Xt])&&typeof J[Xt]!="function"){Ge(Xe);return}}var Pn=function(){for(var Ka=function(Po){return function(){var bh=new Error("Method "+Po+" is not implemented by the current driver"),$c=f.reject(bh);return h($c,arguments[arguments.length-1]),$c}},Pc=0,Vr=Ro.length;Pc<Vr;Pc++){var Io=Ro[Pc];J[Io]||(J[Io]=Ka(Io))}};Pn();var jt=function(Ka){hr[Je]&&console.info("Redefining LocalForage driver: "+Je),hr[Je]=J,qa[Je]=Ka,Le()};"_support"in J?J._support&&typeof J._support=="function"?J._support().then(jt,Ge):jt(!!J._support):jt(!0)}catch(Sr){Ge(Sr)}});return p(pe,ue,xe),pe},U.prototype.driver=function(){return this._driver||null},U.prototype.getDriver=function(J,ue,xe){var pe=hr[J]?f.resolve(hr[J]):f.reject(new Error("Driver not found."));return p(pe,ue,xe),pe},U.prototype.getSerializer=function(J){var ue=f.resolve(Yt);return p(ue,J),ue},U.prototype.ready=function(J){var ue=this,xe=ue._driverSet.then(function(){return ue._ready===null&&(ue._ready=ue._initDriver()),ue._ready});return p(xe,J,J),xe},U.prototype.setDriver=function(J,ue,xe){var pe=this;$i(J)||(J=[J]);var Le=this._getSupportedDrivers(J);function Ge(){pe._config.driver=pe.driver()}function Je(xt){return pe._extend(xt),Ge(),pe._ready=pe._initStorage(pe._config),pe._ready}function Xe(xt){return function(){var Bt=0;function Xt(){for(;Bt<xt.length;){var rn=xt[Bt];return Bt++,pe._dbInfo=null,pe._ready=null,pe.getDriver(rn).then(Je).catch(Xt)}Ge();var Pn=new Error("No available storage method found.");return pe._driverSet=f.reject(Pn),pe._driverSet}return Xt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var xt=Le[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(xt).then(function(Bt){pe._driver=Bt._driver,Ge(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=Xe(Le)})}).catch(function(){Ge();var xt=new Error("No available storage method found.");return pe._driverSet=f.reject(xt),pe._driverSet}),p(this._driverSet,ue,xe),this._driverSet},U.prototype.supports=function(J){return!!qa[J]},U.prototype._extend=function(J){To(this,J)},U.prototype._getSupportedDrivers=function(J){for(var ue=[],xe=0,pe=J.length;xe<pe;xe++){var Le=J[xe];this.supports(Le)&&ue.push(Le)}return ue},U.prototype._wrapLibraryMethodsWithReady=function(){for(var J=0,ue=as.length;J<ue;J++)Ql(this,as[J])},U.prototype.createInstance=function(J){return new U(J)},U}(),Ht=new Zl;r.exports=Ht},{3:3}]},{},[4])(4)})})(gP);var tH=gP.exports;const Bg=zs(tH),Vp={SecureStorage:"ionicSecureStorage",IndexedDB:Bg.INDEXEDDB,LocalStorage:Bg.LOCALSTORAGE},e2={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[Vp.SecureStorage,Vp.IndexedDB,Vp.LocalStorage]};let nH=class{constructor(t=e2){this._db=null,this._secureStorageDriver=null;const n=Object.assign({},e2,t||{});this._config=n}async create(){const t=Bg.createInstance(this._config);return this._db=t,await t.setDriver(this._config.driverOrder||[]),this}async defineDriver(t){return t._driver===Vp.SecureStorage&&(this._secureStorageDriver=t),Bg.defineDriver(t)}get driver(){var t;return((t=this._db)===null||t===void 0?void 0:t.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(t){return this.assertDb().getItem(t)}set(t,n){return this.assertDb().setItem(t,n)}remove(t){return this.assertDb().removeItem(t)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(t){return this.assertDb().iterate(t)}setEncryptionKey(t){var n;if(this._secureStorageDriver)(n=this._secureStorageDriver)===null||n===void 0||n.setEncryptionKey(t);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}};class ly{constructor(t){Mo(this,"store");Mo(this,"isCreated",!1);this.store=new nH({name:t}),this.createStorage()}async createStorage(){await this.store.create(),this.isCreated=!0}get(t){return this.store.get(t)}set(t,n){return this.store.set(t,n)}remove(t){return this.store.remove(t)}clear(){return this.store.clear()}keys(){return this.store.keys()}length(){return this.store.length()}forEach(t){return this.store.forEach(t)}}const mP=new ly("settings"),wr=new ly("auth"),En=new ly("sync"),Ld=new ly("misc"),Ir=async()=>{const e=await wr.get("deviceId")||"none";return"".concat(e,"-").concat(u1())};class gd extends Error{}gd.prototype.name="InvalidTokenError";function rH(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function iH(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return rH(t)}catch(n){return atob(t)}}function wc(e,t){if(typeof e!="string")throw new gd("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new gd("Invalid token specified: missing part #".concat(n+1));let i;try{i=iH(r)}catch(o){throw new gd("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(o.message,")"))}try{return JSON.parse(i)}catch(o){throw new gd("Invalid token specified: invalid json for part #".concat(n+1," (").concat(o.message,")"))}}const oH={isLoggedIn:!1,user:null,synced_characters:[]},sr=Ba(oH),sH=async()=>{const e=await wr.get("token");if(e){const t=wc(e);sr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]})}},uy=async e=>{await wr.set("token",e);const t=wc(e);return console.log("decoded",t),sr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]}),t},t2=e=>{sr.set(t=>({...t,synced_characters:e})),En.set("synced_characters",e)};sH();const _a=async e=>{const t=await Promise.all(_t.tables.map(n=>n.get(e)));for(let n=0;n<t.length;n++)if(t[n])return!1;return!0},Cb=async(e,t)=>{try{const{user:n}=sr.get(),r=n?n.id:"none";let i=t!=null?t:await Ir();for(;!await _a(i);)i=await Ir();const o={...e,user_id:r,local_id:i,id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await _t.versions.put(o),o}catch(n){console.log("Error creating versioned resource:",n)}};function Wn(e){const[t]=j.useMemo(()=>(e==null?void 0:e.split("|"))||[""],[e]),[n,r]=j.useState(void 0);if(j.useEffect(()=>{(async()=>{let o=await _t.versions.get(e!=null?e:"");if(o)return r(o);const s=await _t.versions.get(t);if(!s)return r(void 0);r(await Cb(s,e!=null?e:""))})()},[e,t,r]),!!n)return{...n,data:n==null?void 0:n.data}}function aH({id:e,data:{spreadType:t}}){const{updateNodeData:n}=cn(),r=un.useValue(),i=Wn(r.versionId);return d.jsxs(en,{title:"Create Object From Type",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(dt,{id:"type-".concat(e),label:"Type",value:t.name,onChange:o=>n(e,{spreadType:i==null?void 0:i.data.types.find(s=>s.name===o)}),children:i==null?void 0:i.data.types.map(o=>d.jsx("option",{value:o.name,children:o.name},o.name))}),t.properties.map(o=>d.jsxs("p",{style:{marginTop:5},children:["(",o.typeData.type,o.typeData.isArray?"[]":"",") ",o.key]},o.key)),d.jsxs("p",{style:{textAlign:"right"},children:["(",t.name,") output"]}),t.properties.map((o,s)=>d.jsx(Ne,{type:"target",id:"".concat(o.key,"-").concat(o.typeData.type).concat(o.typeData.isArray?"(Array)":""),position:ye.Left,style:{top:129+26*s,bottom:"auto"}},o.key)),d.jsx(Ne,{type:"source",id:"output-".concat(t.name),position:ye.Right,style:{top:129+24*t.properties.length,bottom:"auto"}})]})}const lH=j.memo(aH),uH=({id:e,data:{params:t}})=>{const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId);return j.useEffect(()=>{let s={};for(let a=0;a<t.length;a++){const l=t[a];s["".concat(l.name,"-").concat(l.type)]=o==null?void 0:o.data.types.find(u=>u.name===l.type)}n(e,{outputs:s}),r(e)},[t,o]),d.jsxs(en,{title:"Entry",children:[d.jsx(Ne,{type:"source",id:"start-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t.map(s=>d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",s.type,s.isArray?"[]":"",") ",s.name]},s.name)),t.map((s,a)=>d.jsx(Ne,{type:"source",id:"".concat(s.name,"-").concat(s.type),position:ye.Right,style:{top:85+25*a,bottom:"auto"}},s.name))]})},cH=j.memo(uH);function yP(e,t){var s;if(!e||!t)return"unknown";const n=t.split("/"),r=n.pop();if(!r)return"unknown";const i=n.reduce((a,l)=>{if(a)return Array.isArray(a)?(a=a.find(u=>u.name===l),a||void 0):a[l]},e);if(!i)return;const o=(s=i._type)==null?void 0:s.properties.find(a=>a.key===r);return i._type&&o&&o.typeData.type?o.typeData.isArray?"".concat(o.typeData.type,"(Array)"):o.typeData.type:"unknown"}const Kt=j.forwardRef(({id:e,label:t,placeholder:n,value:r,onChange:i,isValid:o,errorMessage:s,style:a,minNumber:l,maxNumber:u,type:c="text"},f)=>{const h=o?"":"text-red-700 dark:text-red-500",p=o?"border border-neutral-600":"bg-red-50 border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500",v=o?"":"text-red-600 dark:text-red-500";return d.jsxs("div",{className:"mb-6",style:a,ref:f,children:[d.jsx("label",{htmlFor:e,className:"".concat(h," block mb-2 text-sm font-medium"),children:t}),d.jsx("input",{id:e,type:c,value:r,min:l,max:u,onChange:y=>i(y.target.value),placeholder:n,className:"".concat(p," text-sm rounded-lg block w-full p-2.5 dark:bg-neutral-700 dark:placeholder:text-neutral-300")}),d.jsx("p",{className:"".concat(v," mt-2 text-sm"),children:o?"":s})]})});function dH({id:e,data:{path:t,type:n,outputs:r}}){const{updateNodeData:i}=cn(),o=Fr(),s=un.useValue(),a=Wn(s.versionId),l=j.useCallback(u=>{const c=yP((a==null?void 0:a.data.defaultCharacterData)||{},u),f=c.split("(")[0];i(e,{path:u,type:c,outputs:{["output-".concat(c)]:a==null?void 0:a.data.types.find(h=>h.name===f)}}),o(e)},[e,i,o,a]);return d.jsxs(en,{title:"Get Character Data",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"get-character-".concat(e),label:"Path",value:t,onChange:l,isValid:!0,errorMessage:""}),d.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?d.jsx(Ne,{type:"source",id:"output-".concat(n),position:ye.Right,style:{bottom:20,top:"auto"}}):null]})}const fH=j.memo(dH);function hH({id:e,data:{chosenState:t}}){const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId),s=Eo(),a=j.useMemo(()=>s.filter(c=>c.source!==e).map(c=>c.source),[s]),l=ay(a),u=j.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(c=>c.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(c=>c.name===i.creatorPage)},[o,i]);return j.useEffect(()=>{let c={};t||(t=(u==null?void 0:u.state[0])||null),t&&(c["".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":"")]=(o==null?void 0:o.data.types.find(f=>f.name===t.type.type))||null),n(e,{chosenState:t,outputs:c}),r(e)},[s,l,o,u]),d.jsxs(en,{title:"Get Page State",children:[d.jsx(dt,{id:"set-state-".concat(e),label:"State to grab",value:(t==null?void 0:t.name)||"",onChange:c=>{const f=u==null?void 0:u.state.find(h=>h.name===c);n(e,{chosenState:f,outputs:{["".concat(f.name,"-").concat(f.type.type).concat(f.type.isArray?"(Array)":"")]:o==null?void 0:o.data.types.find(h=>h.name===f.type.type)}}),r(e)},children:u==null?void 0:u.state.map(c=>d.jsx("option",{value:c.name,children:c.name},c.name))}),t?d.jsxs("p",{className:"text-right",children:[t.type.type,t.type.isArray?"[]":""]}):d.jsx("p",{className:"text-right",children:"select a page state to get."}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t&&d.jsx(Ne,{type:"source",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ye.Right,style:{top:122,bottom:"auto"}})]})}const pH=j.memo(hH);function gH({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=cn(),i=Fr(),o=un.useValue(),s=Wn(o.versionId),a=j.useCallback(l=>{var f;const u=(f=s==null?void 0:s.data.data.find(h=>h.name===l))==null?void 0:f.typeData,c=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:c}),i(e)},[e,r,i]);return j.useEffect(()=>{var f,h;if(t)return;const l=(f=s==null?void 0:s.data.data[0])==null?void 0:f.name,u=(h=s==null?void 0:s.data.data[0])==null?void 0:h.typeData,c=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:c}),i(e)},[]),d.jsxs(en,{title:"Get System Data",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(dt,{id:"get-system-".concat(e),label:"Data",value:t,onChange:a,children:s==null?void 0:s.data.data.map(l=>d.jsx("option",{value:l.name,children:l.name}))}),d.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?d.jsx(Ne,{type:"source",id:"output-".concat(n),position:ye.Right,style:{bottom:20,top:"auto"}}):null]})}const mH=j.memo(gH),yH=({id:e,data:{type:t,title:n,inputType:r}})=>{const{updateNodeData:i}=cn(),o=Fr();return Eo({handleType:"target",handleId:"data-any",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];l&&(i(e,{inputType:l}),o(e))},onDisconnect:()=>{i(e,{inputType:"unknown"}),o(e)}}),d.jsxs(en,{title:"Open Modal",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsxs(dt,{id:"modal-type",label:"Modal Type",value:t,onChange:s=>i(e,{type:s}),children:[d.jsx("option",{value:"edit_object",children:"Edit Object"}),d.jsx("option",{value:"edit_number",children:"Edit Number"}),d.jsx("option",{value:"edit_string",children:"Edit String"})]}),d.jsx(Kt,{id:"modal-title",label:"Modal Title",value:n,onChange:s=>i(e,{title:s}),isValid:!0,errorMessage:""}),d.jsxs("p",{style:{marginTop:10},children:["input data (",r,")"]}),d.jsx(Ne,{type:"target",id:"data-any",position:ye.Left,style:{top:145,bottom:"auto"}}),d.jsx("p",{style:{textAlign:"right"},children:"on save"}),d.jsx(Ne,{type:"source",id:"save-node",position:ye.Right,style:{top:168,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"right"},children:["data (",r,")"]}),d.jsx(Ne,{type:"source",id:"newdata-".concat(r),position:ye.Right,style:{top:192,bottom:"auto"}}),d.jsx("p",{style:{marginTop:10,textAlign:"right"},children:"on delete"}),d.jsx(Ne,{type:"source",id:"delete-node",position:ye.Right,style:{top:222,bottom:"auto"}})]})},vH=j.memo(yH);function wH({id:e,data:{param:t,inputType:n}}){const{updateNodeData:r}=cn(),i=Fr(),o="".concat(t.name,"-").concat(t.isArray?"array":t.type);return Eo({handleType:"target",handleId:o,onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(r(e,{inputType:u}),i(e))},onDisconnect:()=>{r(e,{inputType:"any"}),i(e)}}),d.jsxs(en,{title:"Output",children:[d.jsx(Ne,{type:"target",id:"end-node",position:ye.Left,style:{top:28,bottom:"auto"}}),d.jsx("p",{style:{textAlign:"left",marginTop:5},children:t.isArray?"".concat(n).concat(t.isArray?"(Array)":""):t.type}),d.jsx(Ne,{type:"target",id:o,position:ye.Left,style:{top:85,bottom:"auto"}})]})}const bH=j.memo(wH);var Zt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(const a of o)s[a]=i[a];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},e.find=(i,o)=>{for(const s of i)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?"'".concat(s,"'"):s).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Zt||(Zt={}));var jb;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(jb||(jb={}));const yt=Zt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ys=e=>{switch(typeof e){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(e)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(e)?yt.array:e===null?yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yt.promise:typeof Map<"u"&&e instanceof Map?yt.map:typeof Set<"u"&&e instanceof Set?yt.set:typeof Date<"u"&&e instanceof Date?yt.date:yt.object;default:return yt.unknown}},Qe=Zt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xH=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ci extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(s))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}static assert(t){if(!(t instanceof Ci))throw new Error("Not a ZodError: ".concat(t))}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ci.create=e=>new Ci(e);const nc=(e,t)=>{let n;switch(e.code){case Qe.invalid_type:e.received===yt.undefined?n="Required":n="Expected ".concat(e.expected,", received ").concat(e.received);break;case Qe.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,Zt.jsonStringifyReplacer));break;case Qe.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(Zt.joinValues(e.keys,", "));break;case Qe.invalid_union:n="Invalid input";break;case Qe.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(Zt.joinValues(e.options));break;case Qe.invalid_enum_value:n="Invalid enum value. Expected ".concat(Zt.joinValues(e.options),", received '").concat(e.received,"'");break;case Qe.invalid_arguments:n="Invalid function arguments";break;case Qe.invalid_return_type:n="Invalid function return type";break;case Qe.invalid_date:n="Invalid date";break;case Qe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),typeof e.validation.position=="number"&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):Zt.assertNever(e.validation):e.validation!=="regex"?n="Invalid ".concat(e.validation):n="Invalid";break;case Qe.too_small:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):n="Invalid input";break;case Qe.too_big:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="bigint"?n="BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):n="Invalid input";break;case Qe.custom:n="Invalid input";break;case Qe.invalid_intersection_types:n="Intersection results could not be merged";break;case Qe.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case Qe.not_finite:n="Number must be finite";break;default:n=t.defaultError,Zt.assertNever(e)}return{message:n}};let vP=nc;function _H(e){vP=e}function Fg(){return vP}const zg=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}},SH=[];function ht(e,t){const n=Fg(),r=zg({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===nc?void 0:nc].filter(i=>!!i)});e.common.issues.push(r)}class Br{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return Tt;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const o=await i.key,s=await i.value;r.push({key:o,value:s})}return Br.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Tt;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:t.value,value:r}}}const Tt=Object.freeze({status:"aborted"}),Su=e=>({status:"dirty",value:e}),Jr=e=>({status:"valid",value:e}),Ab=e=>e.status==="aborted",Nb=e=>e.status==="dirty",Al=e=>e.status==="valid",vf=e=>typeof Promise<"u"&&e instanceof Promise;function Hg(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function wP(e,t,n,r,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var Et;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Et||(Et={}));var md,yd;class Qo{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const n2=(e,t)=>{if(Al(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ci(e.common.issues);return this._error=n,this._error}}};function Lt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(s,a)=>{var l,u;const{message:c}=e;return s.code==="invalid_enum_value"?{message:c!=null?c:a.defaultError}:typeof a.data>"u"?{message:(l=c!=null?c:r)!==null&&l!==void 0?l:a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c!=null?c:n)!==null&&u!==void 0?u:a.defaultError}},description:i}}class zt{get description(){return this._def.description}_getType(t){return ys(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:ys(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Br,ctx:{common:t.parent.common,data:t.data,parsedType:ys(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(vf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ys(t)},o=this._parseSync({data:t,path:i.path,parent:i});return n2(i,o)}"~validate"(t){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ys(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:i});return Al(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(o=>Al(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ys(t)},i=this._parse({data:t,path:r.path,parent:r}),o=await(vf(i)?i:Promise.resolve(i));return n2(r,o)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const s=t(i),a=()=>o.addIssue({code:Qe.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new xo({schema:this,typeName:Rt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return qo.create(this,this._def)}nullable(){return Ra.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vo.create(this)}promise(){return ic.create(this,this._def)}or(t){return _f.create([this,t],this._def)}and(t){return Sf.create(this,t,this._def)}transform(t){return new xo({...Lt(this._def),schema:this,typeName:Rt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Af({...Lt(this._def),innerType:this,defaultValue:n,typeName:Rt.ZodDefault})}brand(){return new c1({typeName:Rt.ZodBranded,type:this,...Lt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Nf({...Lt(this._def),innerType:this,catchValue:n,typeName:Rt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return ch.create(this,t)}readonly(){return Rf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const EH=/^c[^\s-]{8,}$/i,kH=/^[0-9a-z]+$/,CH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,jH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AH=/^[a-z0-9_-]{21}$/i,NH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,RH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,TH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let s0;const PH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,OH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$H=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,MH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,DH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BH=new RegExp("^".concat(bP,"$"));function xP(e){let t="[0-5]\\d";e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):e.precision==null&&(t="".concat(t,"(\\.\\d+)?"));const n=e.precision?"+":"?";return"([01]\\d|2[0-3]):[0-5]\\d(:".concat(t,")").concat(n)}function FH(e){return new RegExp("^".concat(xP(e),"$"))}function _P(e){let t="".concat(bP,"T").concat(xP(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}function zH(e,t){return!!((t==="v4"||!t)&&PH.test(e)||(t==="v6"||!t)&&$H.test(e))}function HH(e,t){if(!NH.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch(n){return!1}}function UH(e,t){return!!((t==="v4"||!t)&&OH.test(e)||(t==="v6"||!t)&&MH.test(e))}class go extends zt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yt.string){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_type,expected:yt.string,received:o.parsedType}),Tt}const r=new Br;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,a=t.data.length<o.value;(s||a)&&(i=this._getOrReturnCtx(t,i),s?ht(i,{code:Qe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&ht(i,{code:Qe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")TH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"email",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")s0||(s0=new RegExp(IH,"u")),s0.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"emoji",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")jH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"uuid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")AH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"nanoid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")EH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"cuid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")kH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"cuid2",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")CH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"ulid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch(s){i=this._getOrReturnCtx(t,i),ht(i,{validation:"url",code:Qe.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"regex",code:Qe.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?_P(o).test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?BH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?FH(o).test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?RH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"duration",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?zH(t.data,o.version)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"ip",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?HH(t.data,o.alg)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"jwt",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?UH(t.data,o.version)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"cidr",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?DH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"base64",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?LH.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"base64url",code:Qe.invalid_string,message:o.message}),r.dirty()):Zt.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Qe.invalid_string,...Et.errToObj(r)})}_addCheck(t){return new go({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Et.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Et.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Et.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Et.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Et.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Et.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Et.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Et.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Et.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Et.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Et.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Et.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Et.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...Et.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Et.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Et.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Et.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Et.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Et.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Et.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Et.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Et.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Et.errToObj(n)})}nonempty(t){return this.min(1,Et.errToObj(t))}trim(){return new go({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}go.create=e=>{var t;return new go({checks:[],typeName:Rt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Lt(e)})};function WH(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(e.toFixed(i).replace(".","")),s=parseInt(t.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}class ja extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yt.number){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_type,expected:yt.number,received:o.parsedType}),Tt}let r;const i=new Br;for(const o of this._def.checks)o.kind==="int"?Zt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?WH(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.not_finite,message:o.message}),i.dirty()):Zt.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Et.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Et.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Et.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Et.toString(n))}setLimit(t,n,r,i){return new ja({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Et.toString(i)}]})}_addCheck(t){return new ja({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Et.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Et.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Et.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Et.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Et.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Et.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Et.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Et.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Et.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Zt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}ja.create=e=>new ja({checks:[],typeName:Rt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Lt(e)});class Aa extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(o){return this._getInvalidInput(t)}if(this._getType(t)!==yt.bigint)return this._getInvalidInput(t);let r;const i=new Br;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Zt.assertNever(o);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return ht(n,{code:Qe.invalid_type,expected:yt.bigint,received:n.parsedType}),Tt}gte(t,n){return this.setLimit("min",t,!0,Et.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Et.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Et.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Et.toString(n))}setLimit(t,n,r,i){return new Aa({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Et.toString(i)}]})}_addCheck(t){return new Aa({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Et.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Et.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Et.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Et.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Et.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Aa.create=e=>{var t;return new Aa({checks:[],typeName:Rt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Lt(e)})};class wf extends zt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yt.boolean){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.boolean,received:r.parsedType}),Tt}return Jr(t.data)}}wf.create=e=>new wf({typeName:Rt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Lt(e)});class Nl extends zt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yt.date){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_type,expected:yt.date,received:o.parsedType}),Tt}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_date}),Tt}const r=new Br;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Zt.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Nl({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Et.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Et.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Nl.create=e=>new Nl({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Rt.ZodDate,...Lt(e)});class Ug extends zt{_parse(t){if(this._getType(t)!==yt.symbol){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.symbol,received:r.parsedType}),Tt}return Jr(t.data)}}Ug.create=e=>new Ug({typeName:Rt.ZodSymbol,...Lt(e)});class bf extends zt{_parse(t){if(this._getType(t)!==yt.undefined){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.undefined,received:r.parsedType}),Tt}return Jr(t.data)}}bf.create=e=>new bf({typeName:Rt.ZodUndefined,...Lt(e)});class xf extends zt{_parse(t){if(this._getType(t)!==yt.null){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.null,received:r.parsedType}),Tt}return Jr(t.data)}}xf.create=e=>new xf({typeName:Rt.ZodNull,...Lt(e)});class rc extends zt{constructor(){super(...arguments),this._any=!0}_parse(t){return Jr(t.data)}}rc.create=e=>new rc({typeName:Rt.ZodAny,...Lt(e)});class vl extends zt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Jr(t.data)}}vl.create=e=>new vl({typeName:Rt.ZodUnknown,...Lt(e)});class Ds extends zt{_parse(t){const n=this._getOrReturnCtx(t);return ht(n,{code:Qe.invalid_type,expected:yt.never,received:n.parsedType}),Tt}}Ds.create=e=>new Ds({typeName:Rt.ZodNever,...Lt(e)});class Wg extends zt{_parse(t){if(this._getType(t)!==yt.undefined){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.void,received:r.parsedType}),Tt}return Jr(t.data)}}Wg.create=e=>new Wg({typeName:Rt.ZodVoid,...Lt(e)});class vo extends zt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==yt.array)return ht(n,{code:Qe.invalid_type,expected:yt.array,received:n.parsedType}),Tt;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(s||a)&&(ht(n,{code:s?Qe.too_big:Qe.too_small,minimum:a?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ht(n,{code:Qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ht(n,{code:Qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,a)=>i.type._parseAsync(new Qo(n,s,n.path,a)))).then(s=>Br.mergeArray(r,s));const o=[...n.data].map((s,a)=>i.type._parseSync(new Qo(n,s,n.path,a)));return Br.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new vo({...this._def,minLength:{value:t,message:Et.toString(n)}})}max(t,n){return new vo({...this._def,maxLength:{value:t,message:Et.toString(n)}})}length(t,n){return new vo({...this._def,exactLength:{value:t,message:Et.toString(n)}})}nonempty(t){return this.min(1,t)}}vo.create=(e,t)=>new vo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Rt.ZodArray,...Lt(t)});function ou(e){if(e instanceof kn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=qo.create(ou(r))}return new kn({...e._def,shape:()=>t})}else return e instanceof vo?new vo({...e._def,type:ou(e.element)}):e instanceof qo?qo.create(ou(e.unwrap())):e instanceof Ra?Ra.create(ou(e.unwrap())):e instanceof Zo?Zo.create(e.items.map(t=>ou(t))):e}class kn extends zt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Zt.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==yt.object){const u=this._getOrReturnCtx(t);return ht(u,{code:Qe.invalid_type,expected:yt.object,received:u.parsedType}),Tt}const{status:r,ctx:i}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ds&&this._def.unknownKeys==="strip"))for(const u in i.data)s.includes(u)||a.push(u);const l=[];for(const u of s){const c=o[u],f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Qo(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ds){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(ht(i,{code:Qe.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Qo(i,f,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const f=await c.key,h=await c.value;u.push({key:f,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>Br.mergeObjectSync(r,u)):Br.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return Et.errToObj,new kn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o,s,a;const l=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Et.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new kn({...this._def,unknownKeys:"strip"})}passthrough(){return new kn({...this._def,unknownKeys:"passthrough"})}extend(t){return new kn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new kn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Rt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new kn({...this._def,catchall:t})}pick(t){const n={};return Zt.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new kn({...this._def,shape:()=>n})}omit(t){const n={};return Zt.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new kn({...this._def,shape:()=>n})}deepPartial(){return ou(this)}partial(t){const n={};return Zt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new kn({...this._def,shape:()=>n})}required(t){const n={};return Zt.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof qo;)o=o._def.innerType;n[r]=o}}),new kn({...this._def,shape:()=>n})}keyof(){return SP(Zt.objectKeys(this.shape))}}kn.create=(e,t)=>new kn({shape:()=>e,unknownKeys:"strip",catchall:Ds.create(),typeName:Rt.ZodObject,...Lt(t)});kn.strictCreate=(e,t)=>new kn({shape:()=>e,unknownKeys:"strict",catchall:Ds.create(),typeName:Rt.ZodObject,...Lt(t)});kn.lazycreate=(e,t)=>new kn({shape:e,unknownKeys:"strip",catchall:Ds.create(),typeName:Rt.ZodObject,...Lt(t)});class _f extends zt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(a=>new Ci(a.ctx.common.issues));return ht(n,{code:Qe.invalid_union,unionErrors:s}),Tt}if(n.common.async)return Promise.all(r.map(async o=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!o&&(o={result:c,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(l=>new Ci(l));return ht(n,{code:Qe.invalid_union,unionErrors:a}),Tt}}get options(){return this._def.options}}_f.create=(e,t)=>new _f({options:e,typeName:Rt.ZodUnion,...Lt(t)});const ds=e=>e instanceof kf?ds(e.schema):e instanceof xo?ds(e.innerType()):e instanceof Cf?[e.value]:e instanceof Na?e.options:e instanceof jf?Zt.objectValues(e.enum):e instanceof Af?ds(e._def.innerType):e instanceof bf?[void 0]:e instanceof xf?[null]:e instanceof qo?[void 0,...ds(e.unwrap())]:e instanceof Ra?[null,...ds(e.unwrap())]:e instanceof c1||e instanceof Rf?ds(e.unwrap()):e instanceof Nf?ds(e._def.innerType):[];class cy extends zt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.object)return ht(n,{code:Qe.invalid_type,expected:yt.object,received:n.parsedType}),Tt;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(ht(n,{code:Qe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Tt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const o of n){const s=ds(o.shape[t]);if(!s.length)throw new Error("A discriminator value for key `".concat(t,"` could not be extracted from all schema options"));for(const a of s){if(i.has(a))throw new Error("Discriminator property ".concat(String(t)," has duplicate value ").concat(String(a)));i.set(a,o)}}return new cy({typeName:Rt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Lt(r)})}}function Rb(e,t){const n=ys(e),r=ys(t);if(e===t)return{valid:!0,data:e};if(n===yt.object&&r===yt.object){const i=Zt.objectKeys(t),o=Zt.objectKeys(e).filter(a=>i.indexOf(a)!==-1),s={...e,...t};for(const a of o){const l=Rb(e[a],t[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(n===yt.array&&r===yt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const s=e[o],a=t[o],l=Rb(s,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===yt.date&&r===yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Sf extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(o,s)=>{if(Ab(o)||Ab(s))return Tt;const a=Rb(o.value,s.value);return a.valid?((Nb(o)||Nb(s))&&n.dirty(),{status:n.value,value:a.data}):(ht(r,{code:Qe.invalid_intersection_types}),Tt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Sf.create=(e,t,n)=>new Sf({left:e,right:t,typeName:Rt.ZodIntersection,...Lt(n)});class Zo extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.array)return ht(r,{code:Qe.invalid_type,expected:yt.array,received:r.parsedType}),Tt;if(r.data.length<this._def.items.length)return ht(r,{code:Qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Tt;!this._def.rest&&r.data.length>this._def.items.length&&(ht(r,{code:Qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((s,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Qo(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>Br.mergeArray(n,s)):Br.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new Zo({...this._def,rest:t})}}Zo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zo({items:e,typeName:Rt.ZodTuple,rest:null,...Lt(t)})};class Ef extends zt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.object)return ht(r,{code:Qe.invalid_type,expected:yt.object,received:r.parsedType}),Tt;const i=[],o=this._def.keyType,s=this._def.valueType;for(const a in r.data)i.push({key:o._parse(new Qo(r,a,r.path,a)),value:s._parse(new Qo(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Br.mergeObjectAsync(n,i):Br.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof zt?new Ef({keyType:t,valueType:n,typeName:Rt.ZodRecord,...Lt(r)}):new Ef({keyType:go.create(),valueType:t,typeName:Rt.ZodRecord,...Lt(n)})}}class Vg extends zt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.map)return ht(r,{code:Qe.invalid_type,expected:yt.map,received:r.parsedType}),Tt;const i=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new Qo(r,a,r.path,[u,"key"])),value:o._parse(new Qo(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Tt;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of s){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Tt;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Vg.create=(e,t,n)=>new Vg({valueType:t,keyType:e,typeName:Rt.ZodMap,...Lt(n)});class Rl extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.set)return ht(r,{code:Qe.invalid_type,expected:yt.set,received:r.parsedType}),Tt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ht(r,{code:Qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ht(r,{code:Qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function s(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Tt;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>o._parse(new Qo(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(t,n){return new Rl({...this._def,minSize:{value:t,message:Et.toString(n)}})}max(t,n){return new Rl({...this._def,maxSize:{value:t,message:Et.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Rl.create=(e,t)=>new Rl({valueType:e,minSize:null,maxSize:null,typeName:Rt.ZodSet,...Lt(t)});class $u extends zt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.function)return ht(n,{code:Qe.invalid_type,expected:yt.function,received:n.parsedType}),Tt;function r(a,l){return zg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fg(),nc].filter(u=>!!u),issueData:{code:Qe.invalid_arguments,argumentsError:l}})}function i(a,l){return zg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fg(),nc].filter(u=>!!u),issueData:{code:Qe.invalid_return_type,returnTypeError:l}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof ic){const a=this;return Jr(async function(...l){const u=new Ci([]),c=await a._def.args.parseAsync(l,o).catch(p=>{throw u.addIssue(r(l,p)),u}),f=await Reflect.apply(s,this,c);return await a._def.returns._def.type.parseAsync(f,o).catch(p=>{throw u.addIssue(i(f,p)),u})})}else{const a=this;return Jr(function(...l){const u=a._def.args.safeParse(l,o);if(!u.success)throw new Ci([r(l,u.error)]);const c=Reflect.apply(s,this,u.data),f=a._def.returns.safeParse(c,o);if(!f.success)throw new Ci([i(c,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new $u({...this._def,args:Zo.create(t).rest(vl.create())})}returns(t){return new $u({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new $u({args:t||Zo.create([]).rest(vl.create()),returns:n||vl.create(),typeName:Rt.ZodFunction,...Lt(r)})}}class kf extends zt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}kf.create=(e,t)=>new kf({getter:e,typeName:Rt.ZodLazy,...Lt(t)});class Cf extends zt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return ht(n,{received:n.data,code:Qe.invalid_literal,expected:this._def.value}),Tt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Cf.create=(e,t)=>new Cf({value:e,typeName:Rt.ZodLiteral,...Lt(t)});function SP(e,t){return new Na({values:e,typeName:Rt.ZodEnum,...Lt(t)})}class Na extends zt{constructor(){super(...arguments),md.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return ht(n,{expected:Zt.joinValues(r),received:n.parsedType,code:Qe.invalid_type}),Tt}if(Hg(this,md)||wP(this,md,new Set(this._def.values)),!Hg(this,md).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return ht(n,{received:n.data,code:Qe.invalid_enum_value,options:r}),Tt}return Jr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Na.create(t,{...this._def,...n})}exclude(t,n=this._def){return Na.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}md=new WeakMap;Na.create=SP;class jf extends zt{constructor(){super(...arguments),yd.set(this,void 0)}_parse(t){const n=Zt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==yt.string&&r.parsedType!==yt.number){const i=Zt.objectValues(n);return ht(r,{expected:Zt.joinValues(i),received:r.parsedType,code:Qe.invalid_type}),Tt}if(Hg(this,yd)||wP(this,yd,new Set(Zt.getValidEnumValues(this._def.values))),!Hg(this,yd).has(t.data)){const i=Zt.objectValues(n);return ht(r,{received:r.data,code:Qe.invalid_enum_value,options:i}),Tt}return Jr(t.data)}get enum(){return this._def.values}}yd=new WeakMap;jf.create=(e,t)=>new jf({values:e,typeName:Rt.ZodNativeEnum,...Lt(t)});class ic extends zt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.promise&&n.common.async===!1)return ht(n,{code:Qe.invalid_type,expected:yt.promise,received:n.parsedType}),Tt;const r=n.parsedType===yt.promise?n.data:Promise.resolve(n.data);return Jr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ic.create=(e,t)=>new ic({type:e,typeName:Rt.ZodPromise,...Lt(t)});class xo extends zt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:s=>{ht(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(r.data,o);if(r.common.async)return Promise.resolve(s).then(async a=>{if(n.value==="aborted")return Tt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Tt:l.status==="dirty"||n.value==="dirty"?Su(l.value):l});{if(n.value==="aborted")return Tt;const a=this._def.schema._parseSync({data:s,path:r.path,parent:r});return a.status==="aborted"?Tt:a.status==="dirty"||n.value==="dirty"?Su(a.value):a}}if(i.type==="refinement"){const s=a=>{const l=i.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Tt:(a.status==="dirty"&&n.dirty(),s(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Tt:(a.status==="dirty"&&n.dirty(),s(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Al(s))return s;const a=i.transform(s.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Al(s)?Promise.resolve(i.transform(s.value,o)).then(a=>({status:n.value,value:a})):s);Zt.assertNever(i)}}xo.create=(e,t,n)=>new xo({schema:e,typeName:Rt.ZodEffects,effect:t,...Lt(n)});xo.createWithPreprocess=(e,t,n)=>new xo({schema:t,effect:{type:"preprocess",transform:e},typeName:Rt.ZodEffects,...Lt(n)});class qo extends zt{_parse(t){return this._getType(t)===yt.undefined?Jr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}qo.create=(e,t)=>new qo({innerType:e,typeName:Rt.ZodOptional,...Lt(t)});class Ra extends zt{_parse(t){return this._getType(t)===yt.null?Jr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ra.create=(e,t)=>new Ra({innerType:e,typeName:Rt.ZodNullable,...Lt(t)});class Af extends zt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Af.create=(e,t)=>new Af({innerType:e,typeName:Rt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Lt(t)});class Nf extends zt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return vf(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ci(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ci(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Nf.create=(e,t)=>new Nf({innerType:e,typeName:Rt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Lt(t)});class qg extends zt{_parse(t){if(this._getType(t)!==yt.nan){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.nan,received:r.parsedType}),Tt}return{status:"valid",value:t.data}}}qg.create=e=>new qg({typeName:Rt.ZodNaN,...Lt(e)});const VH=Symbol("zod_brand");class c1 extends zt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ch extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Tt:o.status==="dirty"?(n.dirty(),Su(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Tt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new ch({in:t,out:n,typeName:Rt.ZodPipeline})}}class Rf extends zt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Al(i)&&(i.value=Object.freeze(i.value)),i);return vf(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Rf.create=(e,t)=>new Rf({innerType:e,typeName:Rt.ZodReadonly,...Lt(t)});function r2(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function EP(e,t={},n){return e?rc.create().superRefine((r,i)=>{var o,s;const a=e(r);if(a instanceof Promise)return a.then(l=>{var u,c;if(!l){const f=r2(t,r),h=(c=(u=f.fatal)!==null&&u!==void 0?u:n)!==null&&c!==void 0?c:!0;i.addIssue({code:"custom",...f,fatal:h})}});if(!a){const l=r2(t,r),u=(s=(o=l.fatal)!==null&&o!==void 0?o:n)!==null&&s!==void 0?s:!0;i.addIssue({code:"custom",...l,fatal:u})}}):rc.create()}const qH={object:kn.lazycreate};var Rt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Rt||(Rt={}));const KH=(e,t={message:"Input not instance of ".concat(e.name)})=>EP(n=>n instanceof e,t),kP=go.create,CP=ja.create,GH=qg.create,YH=Aa.create,jP=wf.create,XH=Nl.create,JH=Ug.create,QH=bf.create,ZH=xf.create,eU=rc.create,tU=vl.create,nU=Ds.create,rU=Wg.create,iU=vo.create,oU=kn.create,sU=kn.strictCreate,aU=_f.create,lU=cy.create,uU=Sf.create,cU=Zo.create,dU=Ef.create,fU=Vg.create,hU=Rl.create,pU=$u.create,gU=kf.create,mU=Cf.create,yU=Na.create,vU=jf.create,wU=ic.create,i2=xo.create,bU=qo.create,xU=Ra.create,_U=xo.createWithPreprocess,SU=ch.create,EU=()=>kP().optional(),kU=()=>CP().optional(),CU=()=>jP().optional(),jU={string:e=>go.create({...e,coerce:!0}),number:e=>ja.create({...e,coerce:!0}),boolean:e=>wf.create({...e,coerce:!0}),bigint:e=>Aa.create({...e,coerce:!0}),date:e=>Nl.create({...e,coerce:!0})},AU=Tt;var lt=Object.freeze({__proto__:null,defaultErrorMap:nc,setErrorMap:_H,getErrorMap:Fg,makeIssue:zg,EMPTY_PATH:SH,addIssueToContext:ht,ParseStatus:Br,INVALID:Tt,DIRTY:Su,OK:Jr,isAborted:Ab,isDirty:Nb,isValid:Al,isAsync:vf,get util(){return Zt},get objectUtil(){return jb},ZodParsedType:yt,getParsedType:ys,ZodType:zt,datetimeRegex:_P,ZodString:go,ZodNumber:ja,ZodBigInt:Aa,ZodBoolean:wf,ZodDate:Nl,ZodSymbol:Ug,ZodUndefined:bf,ZodNull:xf,ZodAny:rc,ZodUnknown:vl,ZodNever:Ds,ZodVoid:Wg,ZodArray:vo,ZodObject:kn,ZodUnion:_f,ZodDiscriminatedUnion:cy,ZodIntersection:Sf,ZodTuple:Zo,ZodRecord:Ef,ZodMap:Vg,ZodSet:Rl,ZodFunction:$u,ZodLazy:kf,ZodLiteral:Cf,ZodEnum:Na,ZodNativeEnum:jf,ZodPromise:ic,ZodEffects:xo,ZodTransformer:xo,ZodOptional:qo,ZodNullable:Ra,ZodDefault:Af,ZodCatch:Nf,ZodNaN:qg,BRAND:VH,ZodBranded:c1,ZodPipeline:ch,ZodReadonly:Rf,custom:EP,Schema:zt,ZodSchema:zt,late:qH,get ZodFirstPartyTypeKind(){return Rt},coerce:jU,any:eU,array:iU,bigint:YH,boolean:jP,date:XH,discriminatedUnion:lU,effect:i2,enum:yU,function:pU,instanceof:KH,intersection:uU,lazy:gU,literal:mU,map:fU,nan:GH,nativeEnum:vU,never:nU,null:ZH,nullable:xU,number:CP,object:oU,oboolean:CU,onumber:kU,optional:bU,ostring:EU,pipeline:SU,preprocess:_U,promise:wU,record:dU,set:hU,strictObject:sU,string:kP,symbol:JH,transformer:i2,tuple:cU,undefined:QH,union:aU,unknown:tU,void:rU,NEVER:AU,ZodIssueCode:Qe,quotelessJson:xH,ZodError:Ci});const d1=lt.object({type:lt.string(),gen:lt.any().optional(),useTextArea:lt.boolean().optional(),isArray:lt.boolean().optional(),options:lt.array(lt.string()).optional(),outputType:lt.string().optional(),isOutputAnArray:lt.boolean().optional(),inputs:lt.array(lt.any()).optional()}),NU=lt.object({name:lt.string(),typeData:d1,data:lt.any()}),a0=lt.object({name:lt.string(),blueprint:lt.object({nodes:lt.array(lt.any()),edges:lt.array(lt.any())}),lexical:lt.string(),state:lt.array(lt.object({name:lt.string(),type:d1,value:lt.any()}))}),RU=lt.object({name:lt.string(),properties:lt.array(lt.object({key:lt.string(),typeData:d1}))});lt.object({creator:lt.array(a0),modals:lt.array(a0),pages:lt.array(a0),version:lt.string(),data:lt.array(NU),defaultCharacterData:lt.any(),types:lt.array(RU)});const dh=lt.object({id:lt.string({invalid_type_error:"id must be a string"}).max(100,"id cannot be longer than 100 characters").optional(),local_id:lt.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:lt.string(),name:lt.string(),forked_from:lt.string().nullable().optional(),version:lt.string().optional(),created_at:lt.string().datetime({offset:!0}),updated_at:lt.string().datetime({offset:!0}),deleted_at:lt.string().datetime({offset:!0}).nullable().optional()});function TU({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=cn(),i=Fr(),o=un.useValue(),s=Wn(o.versionId),a=j.useCallback(l=>{const u=yP((s==null?void 0:s.data.defaultCharacterData)||{},l);r(e,{path:l,type:u}),i(e)},[e,r,i,dh]);return d.jsxs(en,{title:"Set Character Data",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"set-character-".concat(e),label:"Path",value:t,onChange:a,isValid:!0,errorMessage:""}),d.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?d.jsx(Ne,{type:"target",id:"input-".concat(n),position:ye.Left,style:{bottom:20,top:"auto"}}):null]})}const IU=j.memo(TU);function PU({id:e,data:{chosenState:t}}){const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId),s=j.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(a=>a.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(a=>a.name===i.creatorPage)},[o,i]);return j.useEffect(()=>{t||(t=(s==null?void 0:s.state[0])||null),n(e,{chosenState:t})},[s,t]),d.jsxs(en,{title:"Set Page State",children:[d.jsx(dt,{id:"set-state-".concat(e),label:"State to change",value:(t==null?void 0:t.name)||"",onChange:a=>{n(e,{chosenState:s==null?void 0:s.state.find(l=>l.name===a)}),r(e)},children:s==null?void 0:s.state.map(a=>d.jsx("option",{value:a.name,children:a.name},a.name))}),t?d.jsxs("p",{children:[t.type.type,t.type.isArray?"[]":""]}):d.jsx("p",{children:"select a page state to set."}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t&&d.jsx(Ne,{type:"target",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ye.Left,style:{top:122,bottom:"auto"}})]})}const OU=j.memo(PU);function $U({id:e,data:t}){const{updateNodeData:n}=cn();return d.jsxs(en,{title:"Set System Data",children:[d.jsx(Kt,{id:"path",label:"Path",placeholder:"path/to/data",value:t.path,onChange:i=>n(e,{path:i}),isValid:!0,errorMessage:""}),d.jsxs("p",{children:["Calculated type ","unknown"]}),d.jsx(Ne,{type:"target",position:ye.Left}),d.jsx(Ne,{type:"source",position:ye.Right})]})}const MU=j.memo($U);function DU({id:e,data:{inputType:t}}){var u,c;const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId),s=Eo(),a=j.useMemo(()=>s.filter(f=>f.source!==e).map(f=>f.source),[s]),l=ay(a);return j.useEffect(()=>{var v,y,x,m,b;let f={};for(let w=0;w<s.length;w++){const S=s[w];if((S.source===e?"output":"input")==="output")continue;const A=l.find(P=>P.id===S.source);if(!(A!=null&&A.data)||!(A!=null&&A.data.outputs))continue;const T=((v=A==null?void 0:A.data)==null?void 0:v.outputs)[(y=S.sourceHandle)!=null?y:""];f[(x=S.targetHandle)!=null?x:""]=T}const h=(m=f["input-object"])!=null?m:{name:"unknown",properties:[]};let p={};for(let w=0;w<((b=t==null?void 0:t.properties)==null?void 0:b.length);w++){const S=t.properties[w];p["".concat(S.key,"-").concat(S.typeData.type).concat(S.typeData.isArray?"(Array)":"")]={name:S.typeData.type}}n(e,{inputs:f,inputType:h,outputs:p}),r(e)},[s,l,o]),d.jsxs(en,{title:"Spread Object",children:[d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t==null?void 0:t.name]}),d.jsx("p",{style:{textAlign:"right"},children:"Spread"}),(u=t==null?void 0:t.properties)==null?void 0:u.map(f=>d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",f.typeData.type,f.typeData.isArray?"[]":"",") ",f.key]},f.key)),d.jsx(Ne,{type:"target",id:"input-object",position:ye.Left,style:{top:80,bottom:"auto"}}),(c=t==null?void 0:t.properties)==null?void 0:c.map((f,h)=>d.jsx(Ne,{type:"source",id:"".concat(f.key,"-").concat(f.typeData.type).concat(f.typeData.isArray?"(Array)":""),position:ye.Right,style:{top:130+26*h,bottom:"auto"}},f.key))]})}const LU=j.memo(DU);function BU({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=cn();return d.jsxs(en,{title:"String Includes",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"String 1"}),d.jsx("p",{style:{marginTop:5},children:"String 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) Included?"}),d.jsx(Ne,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const FU=j.memo(BU);function zU(e){return d.jsxs(en,{title:"String Compare",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"String 1"}),d.jsx("p",{style:{marginTop:5},children:"String 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),d.jsx(Ne,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const HU=j.memo(zU);function UU({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=cn();return d.jsxs(en,{title:"Concat String",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"String 1"}),d.jsx("p",{style:{marginTop:5},children:"String 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(string) concated string"}),d.jsx(Ne,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-string",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const WU=j.memo(UU);function VU({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId);return Eo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Remove Item In Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{marginTop:5},children:"name (string)"}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const qU=j.memo(VU);function KU({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId);return Eo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Add Item To Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{style:{marginTop:5},children:["new Item (",t,")"]}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"newItem-".concat(t),position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const GU=j.memo(KU);function YU({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId);return Eo({handleType:"target",handleId:"input-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Filter Array",children:[d.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),d.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),d.jsx("p",{style:{textAlign:"left",marginTop:5},children:"Filtered? (boolean)"}),d.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"Filtered Array"})]}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"input-array",position:ye.Left,style:{top:65,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"loop-node",position:ye.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"loopcompleted-node",position:ye.Left,style:{top:125,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"filtered?-boolean",position:ye.Left,style:{top:150,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:188,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"completed-node",position:ye.Right,style:{top:228,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"filterd-".concat(t,"(Array)"),position:ye.Right,style:{top:255,bottom:"auto"}})]})]})}const XU=j.memo(YU);function JU({id:e,data:{inputType:t,mapType:n}}){const{updateNodeData:r}=cn(),i=Fr(),o=un.useValue(),s=Wn(o.versionId);return Eo({handleType:"target",handleId:"input-array",onConnect:a=>{const l=a[0];if(!l||!l.sourceHandle)return;const u=l.sourceHandle.split("-")[1];if(!u)return;const c=u.split("(")[0];c&&(r(e,{inputType:c}),i(e))},onDisconnect:()=>{r(e,{inputType:"unknown"}),i(e)}}),d.jsxs(en,{title:"Map Array",children:[d.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),d.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),d.jsx(dt,{id:"map-type-".concat(e),label:"Input Type",value:n,onChange:a=>{r(e,{mapType:a}),i(e)},children:s==null?void 0:s.data.types.map(a=>d.jsx("option",{value:a.name,children:a.name},a.name))}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),d.jsxs("p",{style:{textAlign:"left",marginTop:5},children:["item (",n,")"]}),d.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"New Array"})]}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"input-array",position:ye.Left,style:{top:65,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"loop-node",position:ye.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"loopcompleted-node",position:ye.Left,style:{top:125,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"newitem-".concat(t),position:ye.Left,style:{top:150,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:188,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"completed-node",position:ye.Right,style:{top:228,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"filterd-".concat(n,"(Array)"),position:ye.Right,style:{top:255,bottom:"auto"}})]})]})}const QU=j.memo(JU);function ZU({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId);return Eo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Update Item In Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{marginTop:5},children:"name (string)"}),d.jsxs("p",{style:{marginTop:10},children:["new Item (",t,")"]}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"newItem-".concat(t),position:ye.Left,style:{top:138,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:162,bottom:"auto"}})]})]})}const eW=j.memo(ZU);function tW({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=Fr(),i=un.useValue(),o=Wn(i.versionId),s=Eo(),a=j.useMemo(()=>s.filter(u=>u.source!==e).map(u=>u.source),[s]),l=ay(a);return j.useEffect(()=>{var f,h,p,v;let u={};for(let y=0;y<s.length;y++){const x=s[y];if((x.source===e?"output":"input")==="output")continue;const b=l.find(S=>S.id===x.source);if(!(b!=null&&b.data)||!(b!=null&&b.data.outputs))continue;console.log(x.sourceHandle);const w=((f=b==null?void 0:b.data)==null?void 0:f.outputs)[(h=x.sourceHandle)!=null?h:""];console.log(w),u[(p=x.targetHandle)!=null?p:""]=w}console.log(u);const c=((v=u["base-array"])!=null?v:{name:"unknown"}).name;n(e,{inputs:u,inputType:c,outputs:{["output-".concat(c)]:o==null?void 0:o.data.types.find(y=>y.name===c)}}),r(e)},[s,l,dh]),j.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Get Item In Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{marginTop:5},children:"name (string)"}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t," Item"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const nW=j.memo(tW);function rW({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return d.jsxs(en,{title:"Number",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"number-".concat(e),label:"String Value",value:t.toString(),onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const iW=j.memo(rW);function oW(e){return d.jsxs(en,{title:"Subtract",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const sW=j.memo(oW);function aW(e){return d.jsxs(en,{title:"Divide",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const lW=j.memo(aW);function uW(e){return d.jsxs(en,{title:"Floor",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"input-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:110,bottom:"auto"}})]})}const cW=j.memo(uW);function dW(e){return d.jsxs(en,{title:"Add",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const fW=j.memo(dW);function hW(e){return d.jsxs(en,{title:"Multiply",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const pW=j.memo(hW);function gW(e){return d.jsxs(en,{title:"Number To String",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number"}),d.jsx("p",{style:{marginTop:5,textAlign:"right"},children:"string"}),d.jsx(Ne,{type:"target",id:"input-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-string",position:ye.Right,style:{top:110,bottom:"auto"}})]})}const mW=j.memo(gW);function yW(e){return d.jsxs(en,{title:"Enum Compare",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"Enum 1"}),d.jsx("p",{style:{marginTop:5},children:"Enum 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),d.jsx(Ne,{type:"target",id:"enum1-enum",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"enum2-enum",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const vW=j.memo(yW);function wW({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return d.jsxs(en,{title:"Enum",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"enum-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),d.jsx(Ne,{type:"source",id:"output-enum",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const bW=j.memo(wW);function xW(e){return d.jsxs(en,{title:"Branch",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"true"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"false"}),d.jsx(Ne,{type:"target",id:"input-boolean",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"true-node",position:ye.Right,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"false-node",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const _W=j.memo(xW);function SW(e){return d.jsxs(en,{title:"Inverse Boolean",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),d.jsx(Ne,{type:"target",id:"input-boolean",position:ye.Left,style:{top:80,bottom:"auto"}}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) output"}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:55,bottom:"auto"}})]})}const EW=j.memo(SW);function kW({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return d.jsxs(en,{title:"String",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"string-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),d.jsx(Ne,{type:"source",id:"output-string",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const CW=j.memo(kW),Gn=({id:e,label:t,checked:n,onChange:r})=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:e,type:"checkbox",checked:n,onChange:()=>r(!n),className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-brand-500 dark:focus:ring-brand-600 dark:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600"}),d.jsx("label",{htmlFor:e,className:"ms-2 text-sm font-medium text-neutral-900 dark:text-neutral-300",children:t})]});function jW({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return d.jsxs(en,{title:"Boolean",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Gn,{id:"boolean-".concat(e),label:"Value",checked:t,onChange:r=>n(e,{value:r})}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const AW=j.memo(jW);function Kg(e){return e.nodes.find(n=>n.type==="output").data.inputType}function AP(e){return e.nodes.find(t=>t.type==="entry")}function NW(e){return AP(e).data.params}const RW=({id:e,data:{params:t,returnType:n,inputs:r,outputs:i}})=>{const{updateNodeData:o}=cn(),s=Fr(),a=Eo(),l=j.useMemo(()=>a.filter(c=>c.source!==e).map(c=>c.source),[a]),u=ay(l);return j.useEffect(()=>{var v,y;let c={};for(let x=0;x<a.length;x++){const m=a[x];if((m.source===e?"output":"input")==="output")continue;const w=u.find(E=>E.id===m.source);if(w!=null&&w.data||w!=null&&w.data.outputs)continue;const S=((v=w==null?void 0:w.data)==null?void 0:v.outputs)[m.sourceHandle||""];c[m.targetHandle||""]=S}const f=(y=c["data-blueprint"])==null?void 0:y.data;let h=[],p="none";f&&(h=NW(f),p=Kg(f)),o(e,{inputs:c,params:h,returnType:p}),s(e)},[a,u]),d.jsxs(en,{title:"Run Blueprint",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:10},children:"blueprint"}),d.jsx(Ne,{type:"target",id:"data-blueprint",position:ye.Left,style:{top:60,bottom:"auto"}}),t.map((c,f)=>{const h="".concat(c.type).concat(c.isArray?"(Array)":"");return d.jsxs("div",{children:[d.jsxs("p",{children:[c.name," ",h]}),d.jsx(Ne,{type:"target",id:"".concat(c.name,"-").concat(h),position:ye.Left,style:{top:70+10*f,bottom:"auto"}})]},c.name)}),n!=="none"&&d.jsxs("div",{children:[d.jsxs("p",{children:["output ",n]}),d.jsx(Ne,{type:"source",id:"output-".concat(n),position:ye.Right,style:{top:80+10*t.length,bottom:"auto"}})]})]})},TW=j.memo(RW),IW={entry:cH,output:bH,get_character_data:fH,set_character_data:IU,get_page_data:pH,set_page_data:OU,get_system_data:mH,set_system_data:MU,add_to_array:GU,array_remove:qU,array_update:eW,array_get:nW,filter:XU,map:QU,spread_object:LU,create_data_from_type:lH,string_new:CW,string_includes:FU,string_compare:HU,string_concat:WU,new_number:iW,number_to_string:mW,divide:lW,add:fW,subtract:sW,multiply:pW,floor:cW,new_enum:bW,enum_compare:vW,boolean_new:AW,boolean_branch:_W,boolean_inverse:EW,open_modal:vH,blueprint_run:TW},o2={primary:"text-white bg-brand-700 hover:bg-brand-800 focus:ring-brand-300 dark:bg-brand-600 dark:hover:bg-brand-700 dark:focus:ring-brand-800 border-brand-700",light:"text-neutral-900 bg-white border-neutral-300 hover:bg-neutral-100 focus:ring-neutral-100 dark:bg-neutral-800 dark:text-white dark:border-neutral-600 dark:hover:bg-neutral-700 dark:hover:border-neutral-600 dark:focus:ring-neutral-700",danger:"border-red-600 text-red-600 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-red-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition",disabled:"border-neutral-600 bg-neutral-400 text-neutral-700 cursor-not-allowed opacity-50"},kt=({children:e,className:t="",color:n,disabled:r=!1,onClick:i,id:o})=>d.jsx("button",{id:o,type:"button",className:"".concat(r?o2.disabled:o2[n]," me-2.5 focus:ring-4 border focus:outline-none font-medium rounded-lg transition text-sm px-5 py-2.5 text-center ").concat(t),onClick:r?void 0:i,children:e});function PW(e){const[t,n]=j.useState(e.nodes),[r,i]=j.useState(e.edges);function o(l){n(FI(l,t))}function s(l){i(zI(l,r))}function a(l){i(vI(l,r))}return{nodes:t,edges:r,onNodesChange:o,onEdgesChange:s,onConnect:a}}const OW=e=>{if(!e.sourceHandle||!e.targetHandle)return!1;const t=e.sourceHandle.split("-")[1],n=e.targetHandle.split("-")[1];return!t||!n?!1:n==="object"&&!["string","number","boolean","enum","blueprint"].includes(t)||n==="array"&&t.endsWith("(Array)")||n==="any"||t==="any"?!0:t===n},$W=({title:e,isVisible:t,requestClose:n,data:r,onSave:i})=>{const[o,s]=j.useState(null),[a,l]=j.useState(null),u=j.useRef(null),{nodes:c,edges:f,onNodesChange:h,onEdgesChange:p,onConnect:v}=PW(r),y=j.useCallback((w,S)=>{if(w.preventDefault(),!u||!u.current)return;const E=u.current.getBoundingClientRect();s({id:S.id,top:w.clientY<E.height-200&&w.clientY,left:w.clientX<E.width-200&&w.clientX,right:w.clientX>=E.width-200&&E.width-w.clientX,bottom:w.clientY>=E.height-200&&E.height-w.clientY}),l(null)},[s]),x=j.useCallback(async({nodes:w,edges:S})=>!w.find(E=>["entry","output"].includes(E.type)),[]),m=j.useCallback(w=>{if(w.preventDefault(),!u||!u.current)return;const S=u.current.getBoundingClientRect();l({top:w.clientY<S.height-200&&w.clientY,left:w.clientX<S.width-200&&w.clientX,right:w.clientX>=S.width-200&&S.width-w.clientX,bottom:w.clientY>=S.height-200&&S.height-w.clientY,rawX:w.clientX,rawY:w.clientY}),s(null)},[l]),b=j.useCallback(()=>{s(null),l(null)},[s,l]);return d.jsx("div",{className:"".concat(t?"flex":"hidden"," z-50 absolute top-0 left-0 w-screen h-screen"),children:d.jsxs(mz,{ref:u,nodes:c,edges:f,onNodesChange:h,onEdgesChange:p,onConnect:v,onBeforeDelete:x,isValidConnection:OW,onPaneClick:b,onNodeContextMenu:y,onPaneContextMenu:m,nodeTypes:IW,colorMode:"system",children:[d.jsx(Hz,{}),d.jsx(_z,{}),d.jsx(Nz,{}),o&&d.jsx(Wz,{onClick:b,...o}),a&&d.jsx(qz,{onClick:b,...a}),d.jsxs(uh,{position:"top-right",children:[d.jsx(kt,{color:"danger",onClick:n,children:"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{i({nodes:c,edges:f}),console.log({nodes:c,edges:f}),n()},children:"Confirm"})]})]})})};var NP=Symbol.for("immer-nothing"),s2=Symbol.for("immer-draftable"),Ri=Symbol.for("immer-state");function co(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var oc=Object.getPrototypeOf;function sc(e){return!!e&&!!e[Ri]}function Tl(e){var t;return e?RP(e)||Array.isArray(e)||!!e[s2]||!!((t=e.constructor)!=null&&t[s2])||fy(e)||hy(e):!1}var MW=Object.prototype.constructor.toString();function RP(e){if(!e||typeof e!="object")return!1;const t=oc(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===MW}function Gg(e,t){dy(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function dy(e){const t=e[Ri];return t?t.type_:Array.isArray(e)?1:fy(e)?2:hy(e)?3:0}function Tb(e,t){return dy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function TP(e,t,n){const r=dy(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function DW(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fy(e){return e instanceof Map}function hy(e){return e instanceof Set}function il(e){return e.copy_||e.base_}function Ib(e,t){if(fy(e))return new Map(e);if(hy(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=RP(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ri];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(oc(e),r)}else{const r=oc(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function f1(e,t=!1){return py(e)||sc(e)||!Tl(e)||(dy(e)>1&&(e.set=e.add=e.clear=e.delete=LW),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>f1(r,!0))),e}function LW(){co(2)}function py(e){return Object.isFrozen(e)}var BW={};function Il(e){const t=BW[e];return t||co(0,e),t}var Tf;function IP(){return Tf}function FW(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function a2(e,t){t&&(Il("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Pb(e){Ob(e),e.drafts_.forEach(zW),e.drafts_=null}function Ob(e){e===Tf&&(Tf=e.parent_)}function l2(e){return Tf=FW(Tf,e)}function zW(e){const t=e[Ri];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function u2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ri].modified_&&(Pb(t),co(4)),Tl(e)&&(e=Yg(t,e),t.parent_||Xg(t,e)),t.patches_&&Il("Patches").generateReplacementPatches_(n[Ri].base_,e,t.patches_,t.inversePatches_)):e=Yg(t,n,[]),Pb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NP?e:void 0}function Yg(e,t,n){if(py(t))return t;const r=t[Ri];if(!r)return Gg(t,(i,o)=>c2(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Xg(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),Gg(o,(a,l)=>c2(e,r,i,a,l,n,s)),Xg(e,i,!1),n&&e.patches_&&Il("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function c2(e,t,n,r,i,o,s){if(sc(i)){const a=o&&t&&t.type_!==3&&!Tb(t.assigned_,r)?o.concat(r):void 0,l=Yg(e,i,a);if(TP(n,r,l),sc(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Tl(i)&&!py(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Yg(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Xg(e,i)}}function Xg(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&f1(t,n)}function HW(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:IP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=h1;n&&(i=[r],o=If);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var h1={get(e,t){if(t===Ri)return e;const n=il(e);if(!Tb(n,t))return UW(e,n,t);const r=n[t];return e.finalized_||!Tl(r)?r:r===l0(e.base_,t)?(u0(e),e.copy_[t]=Mb(r,e)):r},has(e,t){return t in il(e)},ownKeys(e){return Reflect.ownKeys(il(e))},set(e,t,n){const r=PP(il(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=l0(il(e),t),o=i==null?void 0:i[Ri];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(DW(n,i)&&(n!==void 0||Tb(e.base_,t)))return!0;u0(e),$b(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return l0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,u0(e),$b(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=il(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){co(11)},getPrototypeOf(e){return oc(e.base_)},setPrototypeOf(){co(12)}},If={};Gg(h1,(e,t)=>{If[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});If.deleteProperty=function(e,t){return If.set.call(this,e,t,void 0)};If.set=function(e,t,n){return h1.set.call(this,e[0],t,n,e[0])};function l0(e,t){const n=e[Ri];return(n?il(n):e)[t]}function UW(e,t,n){var i;const r=PP(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function PP(e,t){if(!(t in e))return;let n=oc(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=oc(n)}}function $b(e){e.modified_||(e.modified_=!0,e.parent_&&$b(e.parent_))}function u0(e){e.copy_||(e.copy_=Ib(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var WW=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&co(6),r!==void 0&&typeof r!="function"&&co(7);let i;if(Tl(t)){const o=l2(this),s=Mb(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?Pb(o):Ob(o)}return a2(o,r),u2(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===NP&&(i=void 0),this.autoFreeze_&&f1(i,!0),r){const o=[],s=[];Il("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else co(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Tl(e)||co(8),sc(e)&&(e=VW(e));const t=l2(this),n=Mb(e,void 0);return n[Ri].isManual_=!0,Ob(t),n}finishDraft(e,t){const n=e&&e[Ri];(!n||!n.isManual_)&&co(9);const{scope_:r}=n;return a2(r,t),u2(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Il("Patches").applyPatches_;return sc(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Mb(e,t){const n=fy(e)?Il("MapSet").proxyMap_(e,t):hy(e)?Il("MapSet").proxySet_(e,t):HW(e,t);return(t?t.scope_:IP()).drafts_.push(n),n}function VW(e){return sc(e)||co(10,e),OP(e)}function OP(e){if(!Tl(e)||py(e))return e;const t=e[Ri];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ib(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ib(e,!0);return Gg(n,(r,i)=>{TP(n,r,OP(i))}),t&&(t.finalized_=!1),n}var Ti=new WW,In=Ti.produce;Ti.produceWithPatches.bind(Ti);Ti.setAutoFreeze.bind(Ti);Ti.setUseStrictShallowCopy.bind(Ti);Ti.applyPatches.bind(Ti);Ti.createDraft.bind(Ti);Ti.finishDraft.bind(Ti);function p1(e,t,n){const r=t.split("/");if(!r.length)return e;const i=r.pop(),o=r.reduce((s,a)=>{if(s)return Array.isArray(s)?(s=s.find(l=>l.name===a),s||void 0):s[a]},e);if(!o)return e;if(Array.isArray(o)){const s=o.findIndex(a=>a.name===i);if(s===-1)return e;o[s]=n}else o[i]=n;return e}function Pf(e,t){if(t.isArray)return[];switch(t.type){case"string":return"Lorem Ipsum";case"number":return 1;case"boolean":return!1;case"enum":return t.options?[t.options[0]]:["undefined options"];case"blueprint":return{nodes:Mr(t.inputs,t.outputType!=="none"?{name:"output",type:t.outputType||"none",isArray:t.isOutputAnArray||!1}:void 0),edges:[]};default:const n=e.find(r=>r.name===t.type);return n?Of(e,n):"Type ".concat(t.type," not found.")}}function Of(e,t){if(typeof t=="string")return Pf(e,{type:t,isArray:!1,options:[],isOutputAnArray:!1,inputs:[],outputType:"none"});let n={_type:{...t}};for(let r=0;r<t.properties.length;r++){const i=t.properties[r];let o=i.typeData;n[i.key]=Pf(e,o)}return n}const fh=()=>d.jsx("div",{className:"h-px w-full bg-neutral-200 dark:bg-neutral-700"}),rr=({children:e,isOpen:t,onClose:n})=>d.jsx("div",{tabIndex:-1,"aria-hidden":"true",className:"".concat(t?"flex":"hidden"," bg-black/70 overflow-y-auto overflow-x-hidden absolute top-0 right-0 left-0 bottom-0 z-50 justify-center items-center w-full md:inset-0 h-screen max-h-full"),children:d.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",onClick:r=>r.stopPropagation(),children:d.jsx("div",{className:"relative bg-white rounded-lg shadow dark:bg-neutral-800",children:e})})}),ir=({title:e,onClose:t})=>d.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-neutral-700",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e}),t&&d.jsxs("button",{type:"button",onClick:t,className:"text-neutral-400 bg-transparent hover:bg-neutral-200 hover:text-neutral-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-neutral-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[d.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),d.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),or=({children:e,className:t=""})=>d.jsx("div",{className:t||"p-4 md:p-5 space-y-4",children:e}),dr=({children:e})=>d.jsx("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-neutral-700",children:e}),g1=({id:e,label:t,value:n,onChange:r})=>d.jsxs("div",{children:[d.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:t}),d.jsx("textarea",{id:e,rows:4,value:n,onChange:i=>r(i.target.value),className:"block p-2.5 w-full text-sm text-neutral-900 bg-neutral-50 rounded-lg border border-neutral-300 focus:ring-brand-500 focus:border-brand-500 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-brand-500 dark:focus:border-brand-500"})]});function m1({title:e,onDelete:t,onSave:n,isVisible:r,requestClose:i,data:o,types:s,type:a,typeData:l}){const[u,c]=j.useState(null),f=(h,p,v)=>{c(In(p,y=>(h?p1(y,h,v):y=v,y)))};return j.useEffect(()=>{c(o||null)},[o,c]),u?d.jsxs(rr,{isOpen:r,onClose:i,children:[d.jsx(ir,{title:e,onClose:i}),d.jsx(or,{children:a&&l?y1(s,a,u,u,l,"",f):qW(u,s,f)}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{t&&t(),i()},children:t?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{n(u),i()},children:"Update"})]})]}):d.jsx(d.Fragment,{})}function qW(e,t,n){return d.jsx("div",{children:e._type.properties.map(r=>{const i=r.key,o=e[i];let a=r.typeData.type;return d.jsx("div",{children:y1(t,a,o,e,r.typeData,i,n)},i)})})}function y1(e,t,n,r,i,o,s){var l;const a=e.find(u=>u.name===t);if(t&&i.isArray)return d.jsx(KW,{types:e,type:a,title:o,data:n,onAdd:u=>s(o,r,[...n,u]),onChange:(u,c)=>s(u,r,c),onDelete:u=>s(o,r,n.filter(c=>c.name!==u))});switch(t){case"string":return i.useTextArea?d.jsx(g1,{id:o,label:o,value:n,onChange:u=>s(o,r,u)}):d.jsx(Kt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,u)});case"number":return d.jsx(Kt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,+u)});case"boolean":return d.jsx(Gn,{id:o,label:o,checked:n,onChange:u=>s(o,r,u)});case"enum":return d.jsx(dt,{id:o,label:o,value:n,onChange:u=>s(o,r,u),children:(l=i.options)==null?void 0:l.map(u=>d.jsx("option",{value:u,children:u},u))});case"blueprint":return d.jsxs(kt,{color:"light",onClick:()=>ln({title:"Edit Blueprint",type:"blueprint",data:n,onSave:u=>s(o,r,u)}),children:["Edit ",o]},o);default:return d.jsxs("div",{className:"mb-2",children:[d.jsx("p",{className:"my-2",children:o}),d.jsx(fh,{}),d.jsx("div",{className:"h-2"}),a.properties.map(u=>{var c;return y1(e,u.typeData.type,(c=n[u.key])!=null?c:"",r,u.typeData,u.key,(f,h,p)=>{console.log("".concat(o,"/").concat(f)),console.table(h),s("".concat(o,"/").concat(f),h,p)})})]},o)}}function KW({title:e,data:t,type:n,types:r,onAdd:i,onChange:o,onDelete:s}){const[a,l]=j.useState(null);return d.jsxs("div",{className:"mt-3",children:[d.jsx(m1,{types:r,title:"Edit ".concat(a==null?void 0:a.name),onDelete:()=>s(a==null?void 0:a.name),onSave:u=>{const c=[...t],f=c.findIndex(h=>h.name===(a==null?void 0:a.name));c[f]=u,o("".concat(e),c)},isVisible:a!==null,requestClose:()=>l(null),data:a}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:e}),d.jsx("p",{onClick:()=>i(Of(r,n)),children:"Add"})]}),d.jsx(fh,{}),d.jsx("div",{className:"flex flex-col gap-1 mt-3",children:t.map(u=>d.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>l(u),children:d.jsx("p",{children:u.name})},u.name))})]},a==null?void 0:a.name)}function GW({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){var u;const o=un.useValue(),s=Wn(o.versionId),[a,l]=j.useState({name:"New Param",type:"string",isArray:!1});return j.useEffect(()=>{e&&l(e)},[e]),d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:"Edit Type Property",onClose:n}),d.jsxs(or,{children:[d.jsx(Kt,{id:"name",label:"Name",placeholder:"baba yaga",value:a.name,onChange:c=>l({...a,name:c}),isValid:!0,errorMessage:""}),d.jsxs(dt,{id:"type",label:"Type",value:a.type,onChange:c=>l({...a,type:c}),children:[d.jsx("option",{value:"none",children:"none"}),d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),d.jsx("option",{value:"blueprint",children:"blueprint"}),(u=s==null?void 0:s.data)==null?void 0:u.types.map(c=>d.jsx("option",{value:c.name,children:c.name},c.name))]}),d.jsx(Gn,{id:"is-array",label:"Is Array?",checked:a.isArray,onChange:c=>l({...a,isArray:c})})]}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i&&i(),n()},children:i?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!e)return n();r(a),n()},children:"Update"})]})]})}function hh({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o}){const[s,a]=j.useState("");return j.useEffect(()=>{e&&a(e)},[e]),d.jsxs(rr,{isOpen:n,onClose:r,children:[d.jsx(ir,{title:t,onClose:r}),d.jsx(or,{children:d.jsx(Kt,{id:"name",label:"Name",placeholder:"baba yaga",value:s,onChange:a,isValid:!0,errorMessage:""})}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{o&&o(),r()},children:o?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!s)return r();i(s),r()},children:"Update"})]})]})}function YW({data:e,title:t="Edit Number",isOpen:n,requestClose:r,onSave:i,onDelete:o}){const[s,a]=j.useState("");return j.useEffect(()=>{e&&a(e)},[e]),d.jsxs(rr,{isOpen:n,onClose:r,children:[d.jsx(ir,{title:t,onClose:r}),d.jsx(or,{children:d.jsx(Kt,{type:"number",id:"name",label:"Name",placeholder:"baba yaga",value:s,onChange:a,isValid:!0,errorMessage:""})}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{o&&o(),r()},children:o?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!s)return r();i(s),r()},children:"Update"})]})]})}const XW=({isOpen:e,title:t,data:n,requestClose:r,onConfirm:i})=>e?d.jsxs(rr,{isOpen:e,onClose:r,children:[d.jsx(ir,{title:t,onClose:r}),d.jsx(or,{className:"text-center",children:d.jsxs("div",{className:"p-4",children:[d.jsx("p",{className:"text-lg font-medium mb-2",children:n.message}),d.jsx("p",{className:"text-sm font-semibold text-red-500",children:"This action cannot be undone."})]})}),d.jsx(dr,{children:d.jsx(kt,{color:n.type,onClick:()=>{i(void 0),r()},children:"Confirm"})})]}):null,JW=({data:e,isOpen:t,requestClose:n,onSave:r})=>{console.log(e);const[i,o]=j.useState(0),[s,a]=j.useState(e[0]),[l,u]=j.useState([]),c=(f,h)=>{const p=[...l,{...f,version:h.version,updated_at:new Date().toISOString()}];u(p);const v=i+1;v>=e.length?(r(p),n()):(o(v),a(e[v]))};return d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:"Conflicts for Local:".concat(s.local.name," / Remote:").concat(s.remote.name),onClose:n}),d.jsx(or,{className:"text-center",children:d.jsxs("div",{className:"p-4",children:[d.jsx("p",{className:"text-lg font-medium mb-2",children:"Local"}),d.jsxs("p",{children:["Version: ",s.local.version]}),d.jsxs("p",{children:["Updated: ",new Date(s.local.updated_at).toString()]}),d.jsx("p",{className:"text-lg font-medium mb-2",children:"Remote"}),d.jsxs("p",{children:["Version: ",s.remote.version]}),d.jsxs("p",{children:["Updated: ",new Date(s.remote.updated_at).toString()]})]})}),d.jsxs(dr,{children:[d.jsx(kt,{color:"light",onClick:()=>c(s.local,s.remote),children:"Keep Local"}),d.jsx(kt,{color:"primary",onClick:()=>c(s.remote,s.remote),children:"Keep Remote"})]})]})};function $P(e,t){return function(){return e.apply(t,arguments)}}const{toString:QW}=Object.prototype,{getPrototypeOf:v1}=Object,{iterator:gy,toStringTag:MP}=Symbol,my=(e=>t=>{const n=QW.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ko=e=>(e=e.toLowerCase(),t=>my(t)===e),yy=e=>t=>typeof t===e,{isArray:bc}=Array,$f=yy("undefined");function ZW(e){return e!==null&&!$f(e)&&e.constructor!==null&&!$f(e.constructor)&&hi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const DP=ko("ArrayBuffer");function eV(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&DP(e.buffer),t}const tV=yy("string"),hi=yy("function"),LP=yy("number"),vy=e=>e!==null&&typeof e=="object",nV=e=>e===!0||e===!1,qp=e=>{if(my(e)!=="object")return!1;const t=v1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(MP in e)&&!(gy in e)},rV=ko("Date"),iV=ko("File"),oV=ko("Blob"),sV=ko("FileList"),aV=e=>vy(e)&&hi(e.pipe),lV=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hi(e.append)&&((t=my(e))==="formdata"||t==="object"&&hi(e.toString)&&e.toString()==="[object FormData]"))},uV=ko("URLSearchParams"),[cV,dV,fV,hV]=["ReadableStream","Request","Response","Headers"].map(ko),pV=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ph(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),bc(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let a;for(r=0;r<s;r++)a=o[r],t.call(null,e[a],a,e)}}function BP(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const fl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,FP=e=>!$f(e)&&e!==fl;function Db(){const{caseless:e}=FP(this)&&this||{},t={},n=(r,i)=>{const o=e&&BP(t,i)||i;qp(t[o])&&qp(r)?t[o]=Db(t[o],r):qp(r)?t[o]=Db({},r):bc(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ph(arguments[r],n);return t}const gV=(e,t,n,{allOwnKeys:r}={})=>(ph(t,(i,o)=>{n&&hi(i)?e[o]=$P(i,n):e[o]=i},{allOwnKeys:r}),e),mV=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),yV=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},vV=(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=n!==!1&&v1(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},wV=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},bV=e=>{if(!e)return null;if(bc(e))return e;let t=e.length;if(!LP(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},xV=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&v1(Uint8Array)),_V=(e,t)=>{const r=(e&&e[gy]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},SV=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},EV=ko("HTMLFormElement"),kV=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),d2=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),CV=ko("RegExp"),zP=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ph(n,(i,o)=>{let s;(s=t(i,o,e))!==!1&&(r[o]=s||i)}),Object.defineProperties(e,r)},jV=e=>{zP(e,(t,n)=>{if(hi(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(hi(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},AV=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return bc(e)?r(e):r(String(e).split(t)),n},NV=()=>{},RV=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function TV(e){return!!(e&&hi(e.append)&&e[MP]==="FormData"&&e[gy])}const IV=e=>{const t=new Array(10),n=(r,i)=>{if(vy(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=bc(r)?[]:{};return ph(r,(s,a)=>{const l=n(s,i+1);!$f(l)&&(o[a]=l)}),t[i]=void 0,o}}return r};return n(e,0)},PV=ko("AsyncFunction"),OV=e=>e&&(vy(e)||hi(e))&&hi(e.then)&&hi(e.catch),HP=((e,t)=>e?setImmediate:t?((n,r)=>(fl.addEventListener("message",({source:i,data:o})=>{i===fl&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),fl.postMessage(n,"*")}))("axios@".concat(Math.random()),[]):n=>setTimeout(n))(typeof setImmediate=="function",hi(fl.postMessage)),$V=typeof queueMicrotask<"u"?queueMicrotask.bind(fl):typeof process<"u"&&process.nextTick||HP,MV=e=>e!=null&&hi(e[gy]),Me={isArray:bc,isArrayBuffer:DP,isBuffer:ZW,isFormData:lV,isArrayBufferView:eV,isString:tV,isNumber:LP,isBoolean:nV,isObject:vy,isPlainObject:qp,isReadableStream:cV,isRequest:dV,isResponse:fV,isHeaders:hV,isUndefined:$f,isDate:rV,isFile:iV,isBlob:oV,isRegExp:CV,isFunction:hi,isStream:aV,isURLSearchParams:uV,isTypedArray:xV,isFileList:sV,forEach:ph,merge:Db,extend:gV,trim:pV,stripBOM:mV,inherits:yV,toFlatObject:vV,kindOf:my,kindOfTest:ko,endsWith:wV,toArray:bV,forEachEntry:_V,matchAll:SV,isHTMLForm:EV,hasOwnProperty:d2,hasOwnProp:d2,reduceDescriptors:zP,freezeMethods:jV,toObjectSet:AV,toCamelCase:kV,noop:NV,toFiniteNumber:RV,findKey:BP,global:fl,isContextDefined:FP,isSpecCompliantForm:TV,toJSONObject:IV,isAsyncFn:PV,isThenable:OV,setImmediate:HP,asap:$V,isIterable:MV};function Dt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Me.inherits(Dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Me.toJSONObject(this.config),code:this.code,status:this.status}}});const UP=Dt.prototype,WP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{WP[e]={value:e}});Object.defineProperties(Dt,WP);Object.defineProperty(UP,"isAxiosError",{value:!0});Dt.from=(e,t,n,r,i,o)=>{const s=Object.create(UP);return Me.toFlatObject(e,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Dt.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const DV=null;function Lb(e){return Me.isPlainObject(e)||Me.isArray(e)}function VP(e){return Me.endsWith(e,"[]")?e.slice(0,-2):e}function f2(e,t,n){return e?e.concat(t).map(function(i,o){return i=VP(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function LV(e){return Me.isArray(e)&&!e.some(Lb)}const BV=Me.toFlatObject(Me,{},null,function(t){return/^is[A-Z]/.test(t)});function wy(e,t,n){if(!Me.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Me.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,x){return!Me.isUndefined(x[y])});const r=n.metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Me.isSpecCompliantForm(t);if(!Me.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(Me.isDate(v))return v.toISOString();if(!l&&Me.isBlob(v))throw new Dt("Blob is not supported. Use a Buffer instead.");return Me.isArrayBuffer(v)||Me.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,y,x){let m=v;if(v&&!x&&typeof v=="object"){if(Me.endsWith(y,"{}"))y=r?y:y.slice(0,-2),v=JSON.stringify(v);else if(Me.isArray(v)&&LV(v)||(Me.isFileList(v)||Me.endsWith(y,"[]"))&&(m=Me.toArray(v)))return y=VP(y),m.forEach(function(w,S){!(Me.isUndefined(w)||w===null)&&t.append(s===!0?f2([y],S,o):s===null?y:y+"[]",u(w))}),!1}return Lb(v)?!0:(t.append(f2(x,y,o),u(v)),!1)}const f=[],h=Object.assign(BV,{defaultVisitor:c,convertValue:u,isVisitable:Lb});function p(v,y){if(!Me.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(v),Me.forEach(v,function(m,b){(!(Me.isUndefined(m)||m===null)&&i.call(t,m,Me.isString(b)?b.trim():b,y,h))===!0&&p(m,y?y.concat(b):[b])}),f.pop()}}if(!Me.isObject(e))throw new TypeError("data must be an object");return p(e),t}function h2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function w1(e,t){this._pairs=[],e&&wy(e,this,t)}const qP=w1.prototype;qP.append=function(t,n){this._pairs.push([t,n])};qP.toString=function(t){const n=t?function(r){return t.call(this,r,h2)}:h2;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function FV(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function KP(e,t,n){if(!t)return e;const r=n&&n.encode||FV;Me.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=Me.isURLSearchParams(t)?t.toString():new w1(t,n).toString(r),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class p2{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Me.forEach(this.handlers,function(r){r!==null&&t(r)})}}const GP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zV=typeof URLSearchParams<"u"?URLSearchParams:w1,HV=typeof FormData<"u"?FormData:null,UV=typeof Blob<"u"?Blob:null,WV={isBrowser:!0,classes:{URLSearchParams:zV,FormData:HV,Blob:UV},protocols:["http","https","file","blob","url","data"]},b1=typeof window<"u"&&typeof document<"u",Bb=typeof navigator=="object"&&navigator||void 0,VV=b1&&(!Bb||["ReactNative","NativeScript","NS"].indexOf(Bb.product)<0),qV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",KV=b1&&window.location.href||"http://localhost",GV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:b1,hasStandardBrowserEnv:VV,hasStandardBrowserWebWorkerEnv:qV,navigator:Bb,origin:KV},Symbol.toStringTag,{value:"Module"})),$r={...GV,...WV};function YV(e,t){return wy(e,new $r.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return $r.isNode&&Me.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function XV(e){return Me.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function JV(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function YP(e){function t(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=o>=n.length;return s=!s&&Me.isArray(i)?i.length:s,l?(Me.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!a):((!i[s]||!Me.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],o)&&Me.isArray(i[s])&&(i[s]=JV(i[s])),!a)}if(Me.isFormData(e)&&Me.isFunction(e.entries)){const n={};return Me.forEachEntry(e,(r,i)=>{t(XV(r),i,n,0)}),n}return null}function QV(e,t,n){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const gh={transitional:GP,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Me.isObject(t);if(o&&Me.isHTMLForm(t)&&(t=new FormData(t)),Me.isFormData(t))return i?JSON.stringify(YP(t)):t;if(Me.isArrayBuffer(t)||Me.isBuffer(t)||Me.isStream(t)||Me.isFile(t)||Me.isBlob(t)||Me.isReadableStream(t))return t;if(Me.isArrayBufferView(t))return t.buffer;if(Me.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return YV(t,this.formSerializer).toString();if((a=Me.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return wy(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),QV(t)):t}],transformResponse:[function(t){const n=this.transitional||gh.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Me.isResponse(t)||Me.isReadableStream(t))return t;if(t&&Me.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?Dt.from(a,Dt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$r.classes.FormData,Blob:$r.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Me.forEach(["delete","get","head","post","put","patch"],e=>{gh.headers[e]={}});const ZV=Me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eq=e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&ZV[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},g2=Symbol("internals");function Zc(e){return e&&String(e).trim().toLowerCase()}function Kp(e){return e===!1||e==null?e:Me.isArray(e)?e.map(Kp):String(e)}function tq(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const nq=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function c0(e,t,n,r,i){if(Me.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Me.isString(t)){if(Me.isString(r))return t.indexOf(r)!==-1;if(Me.isRegExp(r))return r.test(t)}}function rq(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function iq(e,t){const n=Me.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,s){return this[r].call(this,t,i,o,s)},configurable:!0})})}let pi=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(a,l,u){const c=Zc(l);if(!c)throw new Error("header name must be a non-empty string");const f=Me.findKey(i,c);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||l]=Kp(a))}const s=(a,l)=>Me.forEach(a,(u,c)=>o(u,c,l));if(Me.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(Me.isString(t)&&(t=t.trim())&&!nq(t))s(eq(t),n);else if(Me.isObject(t)&&Me.isIterable(t)){let a={},l,u;for(const c of t){if(!Me.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[u=c[0]]=(l=a[u])?Me.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}s(a,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Zc(t),t){const r=Me.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return tq(i);if(Me.isFunction(n))return n.call(this,i,r);if(Me.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Zc(t),t){const r=Me.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||c0(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(s){if(s=Zc(s),s){const a=Me.findKey(r,s);a&&(!n||c0(r,r[a],a,n))&&(delete r[a],i=!0)}}return Me.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||c0(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Me.forEach(this,(i,o)=>{const s=Me.findKey(r,o);if(s){n[s]=Kp(i),delete n[o];return}const a=t?rq(o):String(o).trim();a!==o&&delete n[o],n[a]=Kp(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Me.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Me.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[g2]=this[g2]={accessors:{}}).accessors,i=this.prototype;function o(s){const a=Zc(s);r[a]||(iq(i,s),r[a]=!0)}return Me.isArray(t)?t.forEach(o):o(t),this}};pi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Me.reduceDescriptors(pi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Me.freezeMethods(pi);function d0(e,t){const n=this||gh,r=t||n,i=pi.from(r.headers);let o=r.data;return Me.forEach(e,function(a){o=a.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function XP(e){return!!(e&&e.__CANCEL__)}function xc(e,t,n){Dt.call(this,e==null?"canceled":e,Dt.ERR_CANCELED,t,n),this.name="CanceledError"}Me.inherits(xc,Dt,{__CANCEL__:!0});function JP(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Dt("Request failed with status code "+n.status,[Dt.ERR_BAD_REQUEST,Dt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function oq(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function sq(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,s;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=r[o];s||(s=u),n[i]=l,r[i]=u;let f=o,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-s<t)return;const p=c&&u-c;return p?Math.round(h*1e3/p):void 0}}function aq(e,t){let n=0,r=1e3/t,i,o;const s=(u,c=Date.now())=>{n=c,i=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const c=Date.now(),f=c-n;f>=r?s(u,c):(i=u,o||(o=setTimeout(()=>{o=null,s(i)},r-f)))},()=>i&&s(i)]}const Jg=(e,t,n=3)=>{let r=0;const i=sq(50,250);return aq(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,l=s-r,u=i(l),c=s<=a;r=s;const f={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-s)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},m2=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},y2=e=>(...t)=>Me.asap(()=>e(...t)),lq=$r.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,$r.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL($r.origin),$r.navigator&&/(msie|trident)/i.test($r.navigator.userAgent)):()=>!0,uq=$r.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];Me.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Me.isString(r)&&s.push("path="+r),Me.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cq(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function dq(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function QP(e,t,n){let r=!cq(t);return e&&(r||n==!1)?dq(e,t):t}const v2=e=>e instanceof pi?{...e}:e;function Pl(e,t){t=t||{};const n={};function r(u,c,f,h){return Me.isPlainObject(u)&&Me.isPlainObject(c)?Me.merge.call({caseless:h},u,c):Me.isPlainObject(c)?Me.merge({},c):Me.isArray(c)?c.slice():c}function i(u,c,f,h){if(Me.isUndefined(c)){if(!Me.isUndefined(u))return r(void 0,u,f,h)}else return r(u,c,f,h)}function o(u,c){if(!Me.isUndefined(c))return r(void 0,c)}function s(u,c){if(Me.isUndefined(c)){if(!Me.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,f){if(f in t)return r(u,c);if(f in e)return r(void 0,u)}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(u,c,f)=>i(v2(u),v2(c),f,!0)};return Me.forEach(Object.keys(Object.assign({},e,t)),function(c){const f=l[c]||i,h=f(e[c],t[c],c);Me.isUndefined(h)&&f!==a||(n[c]=h)}),n}const ZP=e=>{const t=Pl({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=pi.from(s),t.url=KP(QP(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Me.isFormData(n)){if($r.hasStandardBrowserEnv||$r.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[u,...c]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...c].join("; "))}}if($r.hasStandardBrowserEnv&&(r&&Me.isFunction(r)&&(r=r(t)),r||r!==!1&&lq(t.url))){const u=i&&o&&uq.read(o);u&&s.set(i,u)}return t},fq=typeof XMLHttpRequest<"u",hq=fq&&function(e){return new Promise(function(n,r){const i=ZP(e);let o=i.data;const s=pi.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,c,f,h,p,v;function y(){p&&p(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function m(){if(!x)return;const w=pi.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:w,config:e,request:x};JP(function(T){n(T),y()},function(T){r(T),y()},E),x=null}"onloadend"in x?x.onloadend=m:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(m)},x.onabort=function(){x&&(r(new Dt("Request aborted",Dt.ECONNABORTED,e,x)),x=null)},x.onerror=function(){r(new Dt("Network Error",Dt.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||GP;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new Dt(S,E.clarifyTimeoutError?Dt.ETIMEDOUT:Dt.ECONNABORTED,e,x)),x=null},o===void 0&&s.setContentType(null),"setRequestHeader"in x&&Me.forEach(s.toJSON(),function(S,E){x.setRequestHeader(E,S)}),Me.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),a&&a!=="json"&&(x.responseType=i.responseType),u&&([h,v]=Jg(u,!0),x.addEventListener("progress",h)),l&&x.upload&&([f,p]=Jg(l),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(c=w=>{x&&(r(!w||w.type?new xc(null,e,x):w),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const b=oq(i.url);if(b&&$r.protocols.indexOf(b)===-1){r(new Dt("Unsupported protocol "+b+":",Dt.ERR_BAD_REQUEST,e));return}x.send(o||null)})},pq=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(u){if(!i){i=!0,a();const c=u instanceof Error?u:this.reason;r.abort(c instanceof Dt?c:new xc(c instanceof Error?c.message:c))}};let s=t&&setTimeout(()=>{s=null,o(new Dt("timeout ".concat(t," of ms exceeded"),Dt.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>Me.asap(a),l}},gq=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},mq=async function*(e,t){for await(const n of yq(e))yield*gq(n,t)},yq=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},w2=(e,t,n,r)=>{const i=mq(e,t);let o=0,s,a=l=>{s||(s=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await i.next();if(u){a(),l.close();return}let f=c.byteLength;if(n){let h=o+=f;n(h)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},by=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",e3=by&&typeof ReadableStream=="function",vq=by&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),t3=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},wq=e3&&t3(()=>{let e=!1;const t=new Request($r.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),b2=64*1024,Fb=e3&&t3(()=>Me.isReadableStream(new Response("").body)),Qg={stream:Fb&&(e=>e.body)};by&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Qg[t]&&(Qg[t]=Me.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Dt("Response type '".concat(t,"' is not supported"),Dt.ERR_NOT_SUPPORT,r)})})})(new Response);const bq=async e=>{if(e==null)return 0;if(Me.isBlob(e))return e.size;if(Me.isSpecCompliantForm(e))return(await new Request($r.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Me.isArrayBufferView(e)||Me.isArrayBuffer(e))return e.byteLength;if(Me.isURLSearchParams(e)&&(e=e+""),Me.isString(e))return(await vq(e)).byteLength},xq=async(e,t)=>{const n=Me.toFiniteNumber(e.getContentLength());return n==null?bq(t):n},_q=by&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:f="same-origin",fetchOptions:h}=ZP(e);u=u?(u+"").toLowerCase():"text";let p=pq([i,o&&o.toAbortSignal()],s),v;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let x;try{if(l&&wq&&n!=="get"&&n!=="head"&&(x=await xq(c,r))!==0){let E=new Request(t,{method:"POST",body:r,duplex:"half"}),A;if(Me.isFormData(r)&&(A=E.headers.get("content-type"))&&c.setContentType(A),E.body){const[T,P]=m2(x,Jg(y2(l)));r=w2(E.body,b2,T,P)}}Me.isString(f)||(f=f?"include":"omit");const m="credentials"in Request.prototype;v=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:m?f:void 0});let b=await fetch(v);const w=Fb&&(u==="stream"||u==="response");if(Fb&&(a||w&&y)){const E={};["status","statusText","headers"].forEach(V=>{E[V]=b[V]});const A=Me.toFiniteNumber(b.headers.get("content-length")),[T,P]=a&&m2(A,Jg(y2(a),!0))||[];b=new Response(w2(b.body,b2,T,()=>{P&&P(),y&&y()}),E)}u=u||"text";let S=await Qg[Me.findKey(Qg,u)||"text"](b,e);return!w&&y&&y(),await new Promise((E,A)=>{JP(E,A,{data:S,headers:pi.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:v})})}catch(m){throw y&&y(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new Dt("Network Error",Dt.ERR_NETWORK,e,v),{cause:m.cause||m}):Dt.from(m,m&&m.code,e,v)}}),zb={http:DV,xhr:hq,fetch:_q};Me.forEach(zb,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const x2=e=>"- ".concat(e),Sq=e=>Me.isFunction(e)||e===null||e===!1,n3={getAdapter:e=>{e=Me.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let s;if(r=n,!Sq(n)&&(r=zb[(s=String(n)).toLowerCase()],r===void 0))throw new Dt("Unknown adapter '".concat(s,"'"));if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([a,l])=>"adapter ".concat(a," ")+(l===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?"since :\n"+o.map(x2).join("\n"):" "+x2(o[0]):"as no adapter specified";throw new Dt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:zb};function f0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xc(null,e)}function _2(e){return f0(e),e.headers=pi.from(e.headers),e.data=d0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),n3.getAdapter(e.adapter||gh.adapter)(e).then(function(r){return f0(e),r.data=d0.call(e,e.transformResponse,r),r.headers=pi.from(r.headers),r},function(r){return XP(r)||(f0(e),r&&r.response&&(r.response.data=d0.call(e,e.transformResponse,r.response),r.response.headers=pi.from(r.response.headers))),Promise.reject(r)})}const r3="1.9.0",xy={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xy[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const S2={};xy.transitional=function(t,n,r){function i(o,s){return"[Axios v"+r3+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,a)=>{if(t===!1)throw new Dt(i(s," has been removed"+(n?" in "+n:"")),Dt.ERR_DEPRECATED);return n&&!S2[s]&&(S2[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,a):!0}};xy.spelling=function(t){return(n,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(t)),!0)};function Eq(e,t,n){if(typeof e!="object")throw new Dt("options must be an object",Dt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const a=e[o],l=a===void 0||s(a,o,e);if(l!==!0)throw new Dt("option "+o+" must be "+l,Dt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Dt("Unknown option "+o,Dt.ERR_BAD_OPTION)}}const Gp={assertOptions:Eq,validators:xy},Lo=Gp.validators;let wl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new p2,response:new p2}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+o):r.stack=o}catch(s){}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Pl(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Gp.assertOptions(r,{silentJSONParsing:Lo.transitional(Lo.boolean),forcedJSONParsing:Lo.transitional(Lo.boolean),clarifyTimeoutError:Lo.transitional(Lo.boolean)},!1),i!=null&&(Me.isFunction(i)?n.paramsSerializer={serialize:i}:Gp.assertOptions(i,{encode:Lo.function,serialize:Lo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Gp.assertOptions(n,{baseUrl:Lo.spelling("baseURL"),withXsrfToken:Lo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&Me.merge(o.common,o[n.method]);o&&Me.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),n.headers=pi.concat(s,o);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,f=0,h;if(!l){const v=[_2.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,u),h=v.length,c=Promise.resolve(n);f<h;)c=c.then(v[f++],v[f++]);return c}h=a.length;let p=n;for(f=0;f<h;){const v=a[f++],y=a[f++];try{p=v(p)}catch(x){y.call(this,x);break}}try{c=_2.call(this,p)}catch(v){return Promise.reject(v)}for(f=0,h=u.length;f<h;)c=c.then(u[f++],u[f++]);return c}getUri(t){t=Pl(this.defaults,t);const n=QP(t.baseURL,t.url,t.allowAbsoluteUrls);return KP(n,t.params,t.paramsSerializer)}};Me.forEach(["delete","get","head","options"],function(t){wl.prototype[t]=function(n,r){return this.request(Pl(r||{},{method:t,url:n,data:(r||{}).data}))}});Me.forEach(["post","put","patch"],function(t){function n(r){return function(o,s,a){return this.request(Pl(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}wl.prototype[t]=n(),wl.prototype[t+"Form"]=n(!0)});let kq=class i3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(a=>{r.subscribe(a),o=a}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},t(function(o,s,a){r.reason||(r.reason=new xc(o,s,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new i3(function(i){t=i}),cancel:t}}};function Cq(e){return function(n){return e.apply(null,n)}}function jq(e){return Me.isObject(e)&&e.isAxiosError===!0}const Hb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hb).forEach(([e,t])=>{Hb[t]=e});function o3(e){const t=new wl(e),n=$P(wl.prototype.request,t);return Me.extend(n,wl.prototype,t,{allOwnKeys:!0}),Me.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return o3(Pl(e,i))},n}const Un=o3(gh);Un.Axios=wl;Un.CanceledError=xc;Un.CancelToken=kq;Un.isCancel=XP;Un.VERSION=r3;Un.toFormData=wy;Un.AxiosError=Dt;Un.Cancel=Un.CanceledError;Un.all=function(t){return Promise.all(t)};Un.spread=Cq;Un.isAxiosError=jq;Un.mergeConfig=Pl;Un.AxiosHeaders=pi;Un.formToJSON=e=>YP(Me.isHTMLForm(e)?new FormData(e):e);Un.getAdapter=n3.getAdapter;Un.HttpStatusCode=Hb;Un.default=Un;const{Axios:Rle,AxiosError:Tle,CanceledError:Ile,isCancel:Ple,CancelToken:Ole,VERSION:$le,all:Mle,Cancel:Dle,isAxiosError:Lle,spread:Ble,toFormData:Fle,AxiosHeaders:zle,HttpStatusCode:Hle,formToJSON:Ule,getAdapter:Wle,mergeConfig:Vle}=Un,Aq="modulepreload",Nq=function(e){return"/"+e},E2={},Rq=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Nq(l),l in E2)return;E2[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(l,'"]').concat(c)))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Aq,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(l))))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var ac;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(ac||(ac={}));class h0 extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const Tq=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Iq=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>t!==null?t.name:Tq(e),o=()=>i()!=="web",s=f=>{const h=u.get(f);return!!(h!=null&&h.platforms.has(i())||a(f))},a=f=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===f)},l=f=>e.console.error(f),u=new Map,c=(f,h={})=>{const p=u.get(f);if(p)return console.warn('Capacitor plugin "'.concat(f,'" already registered. Cannot register plugins twice.')),p.proxy;const v=i(),y=a(f);let x;const m=async()=>(!x&&v in h?x=typeof h[v]=="function"?x=await h[v]():x=h[v]:t!==null&&!x&&"web"in h&&(x=typeof h.web=="function"?x=await h.web():x=h.web),x),b=(P,V)=>{var M,H;if(y){const ee=y==null?void 0:y.methods.find(W=>V===W.name);if(ee)return ee.rtype==="promise"?W=>n.nativePromise(f,V.toString(),W):(W,L)=>n.nativeCallback(f,V.toString(),W,L);if(P)return(M=P[V])===null||M===void 0?void 0:M.bind(P)}else{if(P)return(H=P[V])===null||H===void 0?void 0:H.bind(P);throw new h0('"'.concat(f,'" plugin is not implemented on ').concat(v),ac.Unimplemented)}},w=P=>{let V;const M=(...H)=>{const ee=m().then(W=>{const L=b(W,P);if(L){const q=L(...H);return V=q==null?void 0:q.remove,q}else throw new h0('"'.concat(f,".").concat(P,'()" is not implemented on ').concat(v),ac.Unimplemented)});return P==="addListener"&&(ee.remove=async()=>V()),ee};return M.toString=()=>"".concat(P.toString(),"() { [capacitor code] }"),Object.defineProperty(M,"name",{value:P,writable:!1,configurable:!1}),M},S=w("addListener"),E=w("removeListener"),A=(P,V)=>{const M=S({eventName:P},V),H=async()=>{const W=await M;E({eventName:P,callbackId:W},V)},ee=new Promise(W=>M.then(()=>W({remove:H})));return ee.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await H()},ee},T=new Proxy({},{get(P,V){switch(V){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?A:S;case"removeListener":return E;default:return w(V)}}});return r[f]=T,u.set(f,{name:f,proxy:T,platforms:new Set([...Object.keys(h),...y?[v]:[]])}),T};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=i,n.handleError=l,n.isNativePlatform=o,n.isPluginAvailable=s,n.registerPlugin=c,n.Exception=h0,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Pq=e=>e.Capacitor=Iq(e),Ub=Pq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),x1=Ub.registerPlugin;class s3{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,n);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const i=this.listeners[t];if(!i){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}i.forEach(o=>o(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new Ub.Exception(t,ac.Unimplemented)}unavailable(t="not available"){return new Ub.Exception(t,ac.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const i=r.indexOf(n);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const k2=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),C2=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Oq extends s3{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=C2(i).trim(),o=C2(o).trim(),n[i]=o}),n}async setCookie(t){try{const n=k2(t.key),r=k2(t.value),i="; expires=".concat((t.expires||"").replace("expires=","")),o=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?"domain=".concat(t.url):"";document.cookie="".concat(n,"=").concat(r||"").concat(i,"; path=").concat(o,"; ").concat(s,";")}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie="".concat(t.key,"=; Max-Age=0")}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}x1("CapacitorCookies",{web:()=>new Oq});const $q=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),Mq=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,o,s)=>(i[o]=e[t[s]],i),{})},Dq=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[o,s]=i;let a,l;return Array.isArray(s)?(l="",s.forEach(u=>{a=t?encodeURIComponent(u):u,l+="".concat(o,"=").concat(a,"&")}),l.slice(0,-1)):(a=t?encodeURIComponent(s):s,l="".concat(o,"=").concat(a)),"".concat(r,"&").concat(l)},"").substr(1):null,Lq=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=Mq(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))o.set(s,a);n.body=o.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((a,l)=>{o.append(l,a)});else for(const a of Object.keys(e.data))o.append(a,e.data[a]);n.body=o;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(i.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class Bq extends s3{async request(t){const n=Lq(t,t.webFetchExtra),r=Dq(t.params,t.shouldEncodeUrlParams),i=r?"".concat(t.url,"?").concat(r):t.url,o=await fetch(i,n),s=o.headers.get("content-type")||"";let{responseType:a="text"}=o.ok?t:{};s.includes("application/json")&&(a="json");let l,u;switch(a){case"arraybuffer":case"blob":u=await o.blob(),l=await $q(u);break;case"json":l=await o.json();break;case"document":case"text":default:l=await o.text()}const c={};return o.headers.forEach((f,h)=>{c[h]=f}),{data:l,headers:c,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}x1("CapacitorHttp",{web:()=>new Bq});const Fq=x1("Device",{web:()=>Rq(()=>import("./web-DCDUwrXv.js"),[]).then(e=>new e.DeviceWeb)});function zq(){const e=navigator.userAgent,t=navigator.platform,n=navigator.language;return"Web-".concat(t,"-").concat(n,"-").concat(e.slice(0,15))}async function Hq(){const e=await Fq.getInfo();return"".concat(e.manufacturer||"Unknown"," ").concat(e.model||"Device")}async function a3(){return window.Capacitor&&window.Capacitor.isNativePlatform?await Hq():zq()}async function _1(e,t){const[n,r,i,o]=await Promise.all([_t.characters.toArray(),_t.systems.toArray(),_t.subscriptions.toArray(),_t.versions.toArray()]),s=new Map;let a=[];n.forEach(f=>{const[h,...p]=f.local_id.split("-");if(f.user_id!=="none"||h!=="none")return;const v="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,v),a.push({...f,user_id:e,local_id:v})});let l=[];r.forEach(f=>{const[h,...p]=f.local_id.split("-"),v=f.user_id==="none",y=i.find(m=>m.resource_id===f.local_id);if(!v&&!y)return;const x="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,x),l.push({...f,user_id:e,local_id:x})});let u=[];o.forEach(f=>{const[h,...p]=f.local_id.split("-"),v=f.user_id==="none",y=i.find(m=>m.version_id===f.local_id);if(!v&&!y)return;const x="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,x),u.push({...f,user_id:e,local_id:x})});let c=[];i.forEach(f=>{const[h,...p]=f.local_id.split("-");if(!(f.user_id==="none"))return;const y="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,y),c.push({...f,user_id:e,local_id:y})}),a=a.map(f=>({...f,system:{local_id:s.get(f.system.local_id),version_id:s.get(f.system.version_id)}})),c=c.map(f=>({...f,resource_id:s.get(f.resource_id),version_id:s.get(f.version_id)})),u=u.map(f=>({...f,reference_id:s.get(f.reference_id)})),await Promise.all([_t.subscriptions.clear(),_t.versions.clear(),_t.systems.clear(),_t.characters.clear()]),_t.characters.bulkPut(a),_t.systems.bulkPut(l),_t.versions.bulkPut(u),_t.subscriptions.bulkPut(c)}const Uq=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Bn=Un.create({baseURL:Uq?"http://localhost:3000/v1":"https://api.bardsballad.com/v1"});Bn.interceptors.request.use(async e=>{const t=await wr.get("token"),n=await wr.get("apiKey");return t&&(e.headers.Authorization="Bearer ".concat(t),e.headers["x-api-key"]=n||""),e});Bn.interceptors.response.use(async e=>{const t=e.headers.authorization,n=e.headers["x-api-key"];if(t){const r=t.replace("Bearer ","");uy(r)}return n&&await wr.set("apiKey",n),e},e=>Promise.reject(e));const S1=async()=>{try{return(await Bn.get("/ping")).status===200}catch(e){return!1}},Wq=async e=>{try{return(await Bn.get("/marketplace/".concat(e))).data}catch(t){return null}},Vq=async e=>{try{return(await Bn.post("/marketplace",e)).status===200}catch(t){return!1}},qq=async()=>{try{return(await Bn.get("/marketplace")).data}catch(e){return[]}},Kq=async e=>{try{return(await Bn.get("/marketplace/".concat(e,"/versions"))).data}catch(t){return[]}},Gq=async e=>{try{return(await Bn.get("/marketplace/subscribe/".concat(e))).data}catch(t){return null}},Yq=async(e,t,n)=>{const r=await Bn.post("/auth/register",{username:e,email:t,password:n,deviceName:await a3()}),{accessToken:i,apiKey:o,deviceId:s}=r.data;if(!(i&&o&&s))return;const a=await uy(i);wr.set("apiKey",o),wr.set("deviceId",s),_1(a.id,s)},Xq=async(e,t)=>{const n=await Bn.post("/auth/login",{username:e,password:t,deviceName:await a3(),deviceId:await wr.get("deviceId")}),{accessToken:r,apiKey:i,deviceId:o}=n.data;if(!(r&&i&&o))return;const s=await uy(r);wr.set("apiKey",i),wr.set("deviceId",o),_1(s.id,o)},Jq=async()=>{wr.clear(),En.clear(),sr.set({isLoggedIn:!1,user:null,synced_characters:[]}),await Promise.all(_t.tables.map(e=>e.clear()))},l3=async e=>{t2(e);const t=await Bn.post("/characters/change-synced",{characterIds:e});return t2(e),t.data},Qq=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/versions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},Zq=async e=>await Bn.post("/versions/push",e).then(t=>t.data),eK=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/subscriptions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},tK=async e=>await Bn.post("/subscriptions/push",e).then(t=>t.data),nK=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/systems/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},rK=async e=>await Bn.post("/systems/push",e).then(t=>t.data),iK=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/characters/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},oK=async e=>await Bn.post("/characters/push",e).then(t=>t.data),sK=async()=>await Bn.get("/stripe/create-checkout-session").then(e=>e.data),aK=async()=>await Bn.get("/stripe/create-portal-session").then(e=>e.data),lK=async()=>{const e=await Bn.get("/stripe/sync-stripe-data"),{newAccessToken:t}=e.data;t&&uy(t)},uK=e=>{const{isOpen:t,requestClose:n}=e,[r,i]=j.useState(!1),[o,s]=j.useState(""),[a,l]=j.useState(""),[u,c]=j.useState(""),[f,h]=j.useState(""),p=j.useMemo(()=>r?"Sign Up":"Login",[r]),v=async()=>{await Yq(o,a,u)},y=async()=>{await Xq(o,u)};return d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:p,onClose:n}),d.jsxs(or,{children:[d.jsx(Kt,{id:"username",label:r?"Username":"Username or Email",placeholder:"Username",value:o,onChange:s,isValid:!0,errorMessage:""}),r&&d.jsx(Kt,{id:"email",label:"Email",placeholder:"support@bardsballad.com",value:a,onChange:l,isValid:!0,errorMessage:""}),d.jsx(Kt,{id:"password",label:"Password",type:"password",placeholder:"OogaBooga1234",value:u,onChange:c,isValid:!0,errorMessage:""}),r&&d.jsx(Kt,{id:"confirm-password",label:"Confirm Password",type:"password",placeholder:"OogaBooga1234",value:f,onChange:h,isValid:f.length===0||f===u,errorMessage:"Passwords don't match"}),d.jsx(kt,{id:"signup",color:"primary",onClick:async()=>{await(r?v:y)(),n()},children:p}),d.jsx("div",{className:"flex flex-col mt-4 items-center justify-center text-sm",children:d.jsxs("h3",{children:[d.jsx("span",{className:"cursor-default dark:text-neutral-300",children:r?"Already have an account?":"Don't have an account?"}),d.jsx("span",{className:"group text-brand-400 transition-all duration-100 ease-in-out cursor-pointer",onClick:()=>i(!r),children:d.jsx("span",{className:"bg-left-bottom ml-1 bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:r?"Login":"Sign Up"})})]})}),d.jsx("div",{className:"text-neutral-500 flex text-center flex-col mt-4 items-center text-sm",children:d.jsxs("p",{className:"cursor-default",children:["By ",r?"signing up":"logging in",", you agree to our"," ",d.jsx("a",{className:"group text-brand-400 transition-all duration-100 ease-in-out",href:"https://bardsballad.com/terms-of-service",target:"_blank",rel:"noopener noreferrer",children:d.jsxs("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:["Terms of Service"," "]})}),"and"," ",d.jsx("a",{className:"group text-brand-400 transition-all duration-100 ease-in-out",href:"https://bardsballad.com/privacy-policy",target:"_blank",rel:"noopener noreferrer",children:d.jsx("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:"Privacy Policy"})})]})})]})]})},cK=({id:e,label:t,onChange:n})=>{const[r,i]=j.useState(""),o=s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(a){const u=new FileReader;u.onload=c=>{var h;const f=(h=c.target)==null?void 0:h.result;i(a.name),n(f)},u.readAsText(a)}};return d.jsxs("div",{children:[d.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:"".concat(t," - ").concat(r!=null?r:"none")}),d.jsx("input",{type:"file",id:"file-upload",name:"file-name",onChange:o})]})},dK=({isOpen:e,title:t,requestClose:n,onSave:r})=>{const[i,o]=j.useState("");return d.jsxs(rr,{isOpen:e,onClose:n,children:[d.jsx(ir,{title:t,onClose:n}),d.jsx(or,{children:d.jsx(cK,{id:"upload",label:"Upload file",onChange:o})}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:n,children:"Cancel"}),d.jsx(kt,{color:"primary",disabled:!1,onClick:()=>{r(i),n()},children:"Update"})]})]})},Ol=e=>e.slice(-10);function _y(){return typeof window<"u"}function _c(e){return u3(e)?(e.nodeName||"").toLowerCase():"#document"}function ji(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ws(e){var t;return(t=(u3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function u3(e){return _y()?e instanceof Node||e instanceof ji(e).Node:!1}function Hn(e){return _y()?e instanceof Element||e instanceof ji(e).Element:!1}function mi(e){return _y()?e instanceof HTMLElement||e instanceof ji(e).HTMLElement:!1}function Wb(e){return!_y()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ji(e).ShadowRoot}function mh(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ji(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function fK(e){return["table","td","th"].includes(_c(e))}function Sy(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(n){return!1}})}function E1(e){const t=Ey(),n=Hn(e)?Ji(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hK(e){let t=Ls(e);for(;mi(t)&&!As(t);){if(E1(t))return t;if(Sy(t))return null;t=Ls(t)}return null}function Ey(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function As(e){return["html","body","#document"].includes(_c(e))}function Ji(e){return ji(e).getComputedStyle(e)}function ky(e){return Hn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ls(e){if(_c(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wb(e)&&e.host||Ws(e);return Wb(t)?t.host:t}function c3(e){const t=Ls(e);return As(t)?e.ownerDocument?e.ownerDocument.body:e.body:mi(t)&&mh(t)?t:c3(t)}function Mu(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=c3(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=ji(i);if(o){const a=Vb(s);return t.concat(s,s.visualViewport||[],mh(i)?i:[],a&&n?Mu(a):[])}return t.concat(i,Mu(i,[],n))}function Vb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const qb=Math.min,Du=Math.max,Zg=Math.round,Ko=e=>({x:e,y:e}),pK={left:"right",right:"left",bottom:"top",top:"bottom"},gK={start:"end",end:"start"};function j2(e,t,n){return Du(e,qb(t,n))}function Cy(e,t){return typeof e=="function"?e(t):e}function $l(e){return e.split("-")[0]}function jy(e){return e.split("-")[1]}function d3(e){return e==="x"?"y":"x"}function f3(e){return e==="y"?"height":"width"}function bl(e){return["top","bottom"].includes($l(e))?"y":"x"}function h3(e){return d3(bl(e))}function mK(e,t,n){n===void 0&&(n=!1);const r=jy(e),i=h3(e),o=f3(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=em(s)),[s,em(s)]}function yK(e){const t=em(e);return[Kb(e),t,Kb(t)]}function Kb(e){return e.replace(/start|end/g,t=>gK[t])}function vK(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function wK(e,t,n,r){const i=jy(e);let o=vK($l(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(Kb)))),o}function em(e){return e.replace(/left|right|bottom|top/g,t=>pK[t])}function bK(e){return{top:0,right:0,bottom:0,left:0,...e}}function xK(e){return typeof e!="number"?bK(e):{top:e,right:e,bottom:e,left:e}}function tm(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}const A2="data-floating-ui-focusable",_K="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function N2(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Wb(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function ed(e){return"composedPath"in e?e.composedPath()[0]:e.target}function p0(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function SK(e){return e.matches("html,body")}function R2(e){return(e==null?void 0:e.ownerDocument)||document}function EK(e){return mi(e)&&e.matches(_K)}function kK(e){return e?e.hasAttribute(A2)?e:e.querySelector("["+A2+"]")||e:null}function g0(e,t,n){n===void 0&&(n=!0);let r=e.filter(o=>{var s;return o.parentId===t&&((s=o.context)==null?void 0:s.open)}),i=r;for(;i.length;)i=n?e.filter(o=>{var s;return(s=i)==null?void 0:s.some(a=>{var l;return o.parentId===a.id&&((l=o.context)==null?void 0:l.open)})}):e,r=r.concat(i);return r}function CK(e){return"nativeEvent"in e}function T2(e,t){return["mouse","pen"].includes(e)}var Gb=typeof document<"u"?j.useLayoutEffect:j.useEffect;const jK={...eN},AK=jK.useInsertionEffect,NK=AK||(e=>e());function su(e){const t=j.useRef(()=>{});return NK(()=>{t.current=e}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function I2(e,t,n){let{reference:r,floating:i}=e;const o=bl(t),s=h3(t),a=f3(s),l=$l(t),u=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:c,y:r.y-i.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(jy(t)){case"start":p[s]-=h*(n&&u?-1:1);break;case"end":p[s]+=h*(n&&u?-1:1);break}return p}const RK=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=I2(u,r,l),h=r,p={},v=0;for(let y=0;y<a.length;y++){const{name:x,fn:m}=a[y],{x:b,y:w,data:S,reset:E}=await m({x:c,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:u,platform:s,elements:{reference:e,floating:t}});c=b!=null?b:c,f=w!=null?w:f,p={...p,[x]:{...p[x],...S}},E&&v<=50&&(v++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(u=E.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=I2(u,h,l)),y=-1)}return{x:c,y:f,placement:h,strategy:i,middlewareData:p}};async function p3(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Cy(t,e),v=xK(p),x=a[h?f==="floating"?"reference":"floating":f],m=tm(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),b=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),S=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},E=tm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(m.top-E.top+v.top)/S.y,bottom:(E.bottom-m.bottom+v.bottom)/S.y,left:(m.left-E.left+v.left)/S.x,right:(E.right-m.right+v.right)/S.x}}const TK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...x}=Cy(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const m=$l(i),b=bl(a),w=$l(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=h||(w||!y?[em(a)]:yK(a)),A=v!=="none";!h&&A&&E.push(...wK(a,y,v,S));const T=[a,...E],P=await p3(t,x),V=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&V.push(P[m]),f){const q=mK(i,s,S);V.push(P[q[0]],P[q[1]])}if(M=[...M,{placement:i,overflows:V}],!V.every(q=>q<=0)){var H,ee;const q=(((H=o.flip)==null?void 0:H.index)||0)+1,Y=T[q];if(Y){var W;const D=f==="alignment"?b!==bl(Y):!1,z=((W=M[0])==null?void 0:W.overflows[0])>0;if(!D||z)return{data:{index:q,overflows:M},reset:{placement:Y}}}let re=(ee=M.filter(D=>D.overflows[0]<=0).sort((D,z)=>D.overflows[1]-z.overflows[1])[0])==null?void 0:ee.placement;if(!re)switch(p){case"bestFit":{var L;const D=(L=M.filter(z=>{if(A){const O=bl(z.placement);return O===b||O==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(O=>O>0).reduce((O,K)=>O+K,0)]).sort((z,O)=>z[1]-O[1])[0])==null?void 0:L[0];D&&(re=D);break}case"initialPlacement":re=a;break}if(i!==re)return{reset:{placement:re}}}return{}}}};async function IK(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=$l(n),a=jy(n),l=bl(n)==="y",u=["left","top"].includes(s)?-1:1,c=o&&l?-1:1,f=Cy(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),l?{x:p*c,y:h*u}:{x:h*u,y:p*c}}const PK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await IK(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},OK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:m,y:b}=x;return{x:m,y:b}}},...l}=Cy(e,t),u={x:n,y:r},c=await p3(t,l),f=bl($l(i)),h=d3(f);let p=u[h],v=u[f];if(o){const x=h==="y"?"top":"left",m=h==="y"?"bottom":"right",b=p+c[x],w=p-c[m];p=j2(b,p,w)}if(s){const x=f==="y"?"top":"left",m=f==="y"?"bottom":"right",b=v+c[x],w=v-c[m];v=j2(b,v,w)}const y=a.fn({...t,[h]:p,[f]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:o,[f]:s}}}}}};function g3(e){const t=Ji(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=mi(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=Zg(n)!==o||Zg(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function m3(e){return Hn(e)?e:e.contextElement}function Lu(e){const t=m3(e);if(!mi(t))return Ko(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=g3(t);let s=(o?Zg(n.width):n.width)/r,a=(o?Zg(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const $K=Ko(0);function y3(e){const t=ji(e);return!Ey()||!t.visualViewport?$K:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function MK(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ji(e)?!1:t}function Mf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=m3(e);let s=Ko(1);t&&(r?Hn(r)&&(s=Lu(r)):s=Lu(e));const a=MK(o,n,r)?y3(o):Ko(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const h=ji(o),p=r&&Hn(r)?ji(r):r;let v=h,y=Vb(v);for(;y&&r&&p!==v;){const x=Lu(y),m=y.getBoundingClientRect(),b=Ji(y),w=m.left+(y.clientLeft+parseFloat(b.paddingLeft))*x.x,S=m.top+(y.clientTop+parseFloat(b.paddingTop))*x.y;l*=x.x,u*=x.y,c*=x.x,f*=x.y,l+=w,u+=S,v=ji(y),y=Vb(v)}}return tm({width:c,height:f,x:l,y:u})}function k1(e,t){const n=ky(e).scrollLeft;return t?t.left+n:Mf(Ws(e)).left+n}function v3(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:k1(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function DK(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=Ws(r),a=t?Sy(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Ko(1);const c=Ko(0),f=mi(r);if((f||!f&&!o)&&((_c(r)!=="body"||mh(s))&&(l=ky(r)),mi(r))){const p=Mf(r);u=Lu(r),c.x=p.x+r.clientLeft,c.y=p.y+r.clientTop}const h=s&&!f&&!o?v3(s,l,!0):Ko(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function LK(e){return Array.from(e.getClientRects())}function BK(e){const t=Ws(e),n=ky(e),r=e.ownerDocument.body,i=Du(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Du(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+k1(e);const a=-n.scrollTop;return Ji(r).direction==="rtl"&&(s+=Du(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function FK(e,t){const n=ji(e),r=Ws(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=Ey();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function zK(e,t){const n=Mf(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=mi(e)?Lu(e):Ko(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function P2(e,t,n){let r;if(t==="viewport")r=FK(e,n);else if(t==="document")r=BK(Ws(e));else if(Hn(t))r=zK(t,n);else{const i=y3(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return tm(r)}function w3(e,t){const n=Ls(e);return n===t||!Hn(n)||As(n)?!1:Ji(n).position==="fixed"||w3(n,t)}function HK(e,t){const n=t.get(e);if(n)return n;let r=Mu(e,[],!1).filter(a=>Hn(a)&&_c(a)!=="body"),i=null;const o=Ji(e).position==="fixed";let s=o?Ls(e):e;for(;Hn(s)&&!As(s);){const a=Ji(s),l=E1(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||mh(s)&&!l&&w3(e,s))?r=r.filter(c=>c!==s):i=a,s=Ls(s)}return t.set(e,r),r}function UK(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?Sy(t)?[]:HK(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,c)=>{const f=P2(t,c,i);return u.top=Du(f.top,u.top),u.right=qb(f.right,u.right),u.bottom=qb(f.bottom,u.bottom),u.left=Du(f.left,u.left),u},P2(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function WK(e){const{width:t,height:n}=g3(e);return{width:t,height:n}}function VK(e,t,n){const r=mi(t),i=Ws(t),o=n==="fixed",s=Mf(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Ko(0);function u(){l.x=k1(i)}if(r||!r&&!o)if((_c(t)!=="body"||mh(i))&&(a=ky(t)),r){const p=Mf(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&u();o&&!r&&i&&u();const c=i&&!r&&!o?v3(i,a):Ko(0),f=s.left+a.scrollLeft-l.x-c.x,h=s.top+a.scrollTop-l.y-c.y;return{x:f,y:h,width:s.width,height:s.height}}function m0(e){return Ji(e).position==="static"}function O2(e,t){if(!mi(e)||Ji(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ws(e)===n&&(n=n.ownerDocument.body),n}function b3(e,t){const n=ji(e);if(Sy(e))return n;if(!mi(e)){let i=Ls(e);for(;i&&!As(i);){if(Hn(i)&&!m0(i))return i;i=Ls(i)}return n}let r=O2(e,t);for(;r&&fK(r)&&m0(r);)r=O2(r,t);return r&&As(r)&&m0(r)&&!E1(r)?n:r||hK(e)||n}const qK=async function(e){const t=this.getOffsetParent||b3,n=this.getDimensions,r=await n(e.floating);return{reference:VK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function KK(e){return Ji(e).direction==="rtl"}const GK={convertOffsetParentRelativeRectToViewportRelativeRect:DK,getDocumentElement:Ws,getClippingRect:UK,getOffsetParent:b3,getElementRects:qK,getClientRects:LK,getDimensions:WK,getScale:Lu,isElement:Hn,isRTL:KK},YK=PK,XK=OK,JK=TK,QK=(e,t,n)=>{const r=new Map,i={platform:GK,...n},o={...i.platform,_c:r};return RK(e,t,{...i,platform:o})};var Yp=typeof document<"u"?j.useLayoutEffect:j.useEffect;function nm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!nm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!nm(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function x3(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $2(e,t){const n=x3(e);return Math.round(t*n)/n}function y0(e){const t=j.useRef(e);return Yp(()=>{t.current=e}),t}function ZK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,f]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=j.useState(r);nm(h,r)||p(r);const[v,y]=j.useState(null),[x,m]=j.useState(null),b=j.useCallback(D=>{D!==A.current&&(A.current=D,y(D))},[]),w=j.useCallback(D=>{D!==T.current&&(T.current=D,m(D))},[]),S=o||v,E=s||x,A=j.useRef(null),T=j.useRef(null),P=j.useRef(c),V=l!=null,M=y0(l),H=y0(i),ee=y0(u),W=j.useCallback(()=>{if(!A.current||!T.current)return;const D={placement:t,strategy:n,middleware:h};H.current&&(D.platform=H.current),QK(A.current,T.current,D).then(z=>{const O={...z,isPositioned:ee.current!==!1};L.current&&!nm(P.current,O)&&(P.current=O,F_.flushSync(()=>{f(O)}))})},[h,t,n,H,ee]);Yp(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const L=j.useRef(!1);Yp(()=>(L.current=!0,()=>{L.current=!1}),[]),Yp(()=>{if(S&&(A.current=S),E&&(T.current=E),S&&E){if(M.current)return M.current(S,E,W);W()}},[S,E,W,M,V]);const q=j.useMemo(()=>({reference:A,floating:T,setReference:b,setFloating:w}),[b,w]),Y=j.useMemo(()=>({reference:S,floating:E}),[S,E]),re=j.useMemo(()=>{const D={position:n,left:0,top:0};if(!Y.floating)return D;const z=$2(Y.floating,c.x),O=$2(Y.floating,c.y);return a?{...D,transform:"translate("+z+"px, "+O+"px)",...x3(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:O}},[n,a,Y.floating,c.x,c.y]);return j.useMemo(()=>({...c,update:W,refs:q,elements:Y,floatingStyles:re}),[c,W,q,Y,re])}const eG=(e,t)=>({...YK(e),options:[e,t]}),tG=(e,t)=>({...XK(e),options:[e,t]}),nG=(e,t)=>({...JK(e),options:[e,t]}),rG="data-floating-ui-focusable",M2="active",D2="selected",iG={...eN};let L2=!1,oG=0;const B2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+oG++;function sG(){const[e,t]=j.useState(()=>L2?B2():void 0);return Gb(()=>{e==null&&t(B2())},[]),j.useEffect(()=>{L2=!0},[]),e}const aG=iG.useId,_3=aG||sG;function lG(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const uG=j.createContext(null),cG=j.createContext(null),S3=()=>{var e;return((e=j.useContext(uG))==null?void 0:e.id)||null},E3=()=>j.useContext(cG);function dG(e){return"data-floating-ui-"+e}function F2(e){return mi(e.target)&&e.target.tagName==="BUTTON"}function fG(e){return mi(e.target)&&e.target.tagName==="A"}function z2(e){return EK(e)}function hG(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:a="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:c=!0,stickIfOpen:f=!0}=t,h=j.useRef(),p=j.useRef(!1),v=j.useMemo(()=>({onPointerDown(y){h.current=y.pointerType},onMouseDown(y){const x=h.current;y.button===0&&a!=="click"&&(T2(x)&&u||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="mousedown")?r(!1,y.nativeEvent,"click"):(y.preventDefault(),r(!0,y.nativeEvent,"click"))))},onClick(y){const x=h.current;if(a==="mousedown"&&h.current){h.current=void 0;return}T2(x)&&u||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="click")?r(!1,y.nativeEvent,"click"):r(!0,y.nativeEvent,"click"))},onKeyDown(y){h.current=void 0,!(y.defaultPrevented||!c||F2(y))&&(y.key===" "&&!z2(o)&&(y.preventDefault(),p.current=!0),!fG(y)&&y.key==="Enter"&&r(!(n&&l),y.nativeEvent,"click"))},onKeyUp(y){y.defaultPrevented||!c||F2(y)||z2(o)||y.key===" "&&p.current&&(p.current=!1,r(!(n&&l),y.nativeEvent,"click"))}}),[i,o,a,u,c,r,n,f,l]);return j.useMemo(()=>s?{reference:v}:{},[s,v])}const pG={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},gG={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},H2=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function mG(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:h=!1,bubbles:p,capture:v}=t,y=E3(),x=su(typeof l=="function"?l:()=>!1),m=typeof l=="function"?x:l,b=j.useRef(!1),w=j.useRef(!1),{escapeKey:S,outsidePress:E}=H2(p),{escapeKey:A,outsidePress:T}=H2(v),P=j.useRef(!1),V=su(q=>{var Y;if(!n||!s||!a||q.key!=="Escape"||P.current)return;const re=(Y=o.current.floatingContext)==null?void 0:Y.nodeId,D=y?g0(y.nodesRef.current,re):[];if(!S&&(q.stopPropagation(),D.length>0)){let z=!0;if(D.forEach(O=>{var K;if((K=O.context)!=null&&K.open&&!O.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,CK(q)?q.nativeEvent:q,"escape-key")}),M=su(q=>{var Y;const re=()=>{var D;V(q),(D=ed(q))==null||D.removeEventListener("keydown",re)};(Y=ed(q))==null||Y.addEventListener("keydown",re)}),H=su(q=>{var Y;const re=b.current;b.current=!1;const D=w.current;if(w.current=!1,u==="click"&&D||re||typeof m=="function"&&!m(q))return;const z=ed(q),O="["+dG("inert")+"]",K=R2(i.floating).querySelectorAll(O);let se=Hn(z)?z:null;for(;se&&!As(se);){const Re=Ls(se);if(As(Re)||!Hn(Re))break;se=Re}if(K.length&&Hn(z)&&!SK(z)&&!N2(z,i.floating)&&Array.from(K).every(Re=>!N2(se,Re)))return;if(mi(z)&&L){const Re=As(z),F=Ji(z),Z=/auto|scroll/,ie=Re||Z.test(F.overflowX),De=Re||Z.test(F.overflowY),Ye=ie&&z.clientWidth>0&&z.scrollWidth>z.clientWidth,ze=De&&z.clientHeight>0&&z.scrollHeight>z.clientHeight,ne=F.direction==="rtl",fe=ze&&(ne?q.offsetX<=z.offsetWidth-z.clientWidth:q.offsetX>z.clientWidth),Se=Ye&&q.offsetY>z.clientHeight;if(fe||Se)return}const ce=(Y=o.current.floatingContext)==null?void 0:Y.nodeId,Ce=y&&g0(y.nodesRef.current,ce).some(Re=>{var F;return p0(q,(F=Re.context)==null?void 0:F.elements.floating)});if(p0(q,i.floating)||p0(q,i.domReference)||Ce)return;const Ie=y?g0(y.nodesRef.current,ce):[];if(Ie.length>0){let Re=!0;if(Ie.forEach(F=>{var Z;if((Z=F.context)!=null&&Z.open&&!F.context.dataRef.current.__outsidePressBubbles){Re=!1;return}}),!Re)return}r(!1,q,"outside-press")}),ee=su(q=>{var Y;const re=()=>{var D;H(q),(D=ed(q))==null||D.removeEventListener(u,re)};(Y=ed(q))==null||Y.addEventListener(u,re)});j.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=S,o.current.__outsidePressBubbles=E;let q=-1;function Y(K){r(!1,K,"ancestor-scroll")}function re(){window.clearTimeout(q),P.current=!0}function D(){q=window.setTimeout(()=>{P.current=!1},Ey()?5:0)}const z=R2(i.floating);a&&(z.addEventListener("keydown",A?M:V,A),z.addEventListener("compositionstart",re),z.addEventListener("compositionend",D)),m&&z.addEventListener(u,T?ee:H,T);let O=[];return h&&(Hn(i.domReference)&&(O=Mu(i.domReference)),Hn(i.floating)&&(O=O.concat(Mu(i.floating))),!Hn(i.reference)&&i.reference&&i.reference.contextElement&&(O=O.concat(Mu(i.reference.contextElement)))),O=O.filter(K=>{var se;return K!==((se=z.defaultView)==null?void 0:se.visualViewport)}),O.forEach(K=>{K.addEventListener("scroll",Y,{passive:!0})}),()=>{a&&(z.removeEventListener("keydown",A?M:V,A),z.removeEventListener("compositionstart",re),z.removeEventListener("compositionend",D)),m&&z.removeEventListener(u,T?ee:H,T),O.forEach(K=>{K.removeEventListener("scroll",Y)}),window.clearTimeout(q)}},[o,i,a,m,u,n,r,h,s,S,E,V,A,M,H,T,ee]),j.useEffect(()=>{b.current=!1},[m,u]);const W=j.useMemo(()=>({onKeyDown:V,...c&&{[pG[f]]:q=>{r(!1,q.nativeEvent,"reference-press")},...f!=="click"&&{onClick(q){r(!1,q.nativeEvent,"reference-press")}}}}),[V,r,c,f]),L=j.useMemo(()=>({onKeyDown:V,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[gG[u]]:()=>{b.current=!0}}),[V,u]);return j.useMemo(()=>s?{reference:W,floating:L}:{},[s,W,L])}function yG(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=_3(),o=j.useRef({}),[s]=j.useState(()=>lG()),a=S3()!=null,[l,u]=j.useState(r.reference),c=su((p,v,y)=>{o.current.openEvent=p?v:void 0,s.emit("openchange",{open:p,event:v,reason:y,nested:a}),n==null||n(p,v,y)}),f=j.useMemo(()=>({setPositionReference:u}),[]),h=j.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return j.useMemo(()=>({dataRef:o,open:t,onOpenChange:c,elements:h,events:s,floatingId:i,refs:f}),[t,c,h,s,i,f])}function vG(e){e===void 0&&(e={});const{nodeId:t}=e,n=yG({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=j.useState(null),[a,l]=j.useState(null),c=(i==null?void 0:i.domReference)||o,f=j.useRef(null),h=E3();Gb(()=>{c&&(f.current=c)},[c]);const p=ZK({...e,elements:{...i,...a&&{reference:a}}}),v=j.useCallback(w=>{const S=Hn(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(S),p.refs.setReference(S)},[p.refs]),y=j.useCallback(w=>{(Hn(w)||w===null)&&(f.current=w,s(w)),(Hn(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!Hn(w))&&p.refs.setReference(w)},[p.refs]),x=j.useMemo(()=>({...p.refs,setReference:y,setPositionReference:v,domReference:f}),[p.refs,y,v]),m=j.useMemo(()=>({...p.elements,domReference:c}),[p.elements,c]),b=j.useMemo(()=>({...p,...r,refs:x,elements:m,nodeId:t}),[p,x,m,t,r]);return Gb(()=>{r.dataRef.current.floatingContext=b;const w=h==null?void 0:h.nodesRef.current.find(S=>S.id===t);w&&(w.context=b)}),j.useMemo(()=>({...p,context:b,refs:x,elements:m}),[p,x,m,b])}function v0(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[M2]:s,[D2]:a,...l}=e;o=l}return{...n==="floating"&&{tabIndex:-1,[rG]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[M2,D2].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var f;(f=r.get(u))==null||f.push(c),s[u]=function(){for(var h,p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return(h=r.get(u))==null?void 0:h.map(x=>x(...v)).find(x=>x!==void 0)}}}else s[u]=c}),s),{})}}function wG(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=j.useCallback(a=>v0(a,e,"reference"),t),o=j.useCallback(a=>v0(a,e,"floating"),n),s=j.useCallback(a=>v0(a,e,"item"),r);return j.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const bG=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function xG(e,t){var n,r;t===void 0&&(t={});const{open:i,elements:o,floatingId:s}=e,{enabled:a=!0,role:l="dialog"}=t,u=_3(),c=((n=o.domReference)==null?void 0:n.id)||u,f=j.useMemo(()=>{var b;return((b=kK(o.floating))==null?void 0:b.id)||s},[o.floating,s]),h=(r=bG.get(l))!=null?r:l,v=S3()!=null,y=j.useMemo(()=>h==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:i?f:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":h==="alertdialog"?"dialog":h,"aria-controls":i?f:void 0,...h==="listbox"&&{role:"combobox"},...h==="menu"&&{id:c},...h==="menu"&&v&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[h,f,v,i,c,l]),x=j.useMemo(()=>{const b={id:f,...h&&{role:h}};return h==="tooltip"||l==="label"?b:{...b,...h==="menu"&&{"aria-labelledby":c}}},[h,f,c,l]),m=j.useCallback(b=>{let{active:w,selected:S}=b;const E={role:"option",...w&&{id:f+"-fui-option"}};switch(l){case"select":return{...E,"aria-selected":w&&S};case"combobox":return{...E,"aria-selected":S}}return{}},[f,l]);return j.useMemo(()=>a?{reference:y,floating:x,item:m}:{},[a,y,x,m])}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k3=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>j.createElement("svg",{ref:l,...SG,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:k3("lucide",i),...a},[...s.map(([u,c])=>j.createElement(u,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=(e,t)=>{const n=j.forwardRef(({className:r,...i},o)=>j.createElement(EG,{ref:o,iconNode:t,className:k3("lucide-".concat(_G(e)),r),...i}));return n.displayName="".concat(e),n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Sc("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=Sc("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=Sc("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=Sc("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=Sc("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=Sc("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),C1=({label:e,options:t,onClick:n})=>{const[r,i]=j.useState(!1),{refs:o,floatingStyles:s,context:a}=vG({open:r,onOpenChange:i,middleware:[eG(4),nG(),tG()]}),l=hG(a),u=mG(a),c=xG(a,{role:"menu"}),{getReferenceProps:f,getFloatingProps:h}=wG([l,u,c]),p=()=>{n()},v=y=>{y.onClick(),i(!1)};return d.jsxs("div",{className:"inline-flex relative",children:[d.jsx("button",{onClick:p,className:"px-4 py-2 bg-brand-600 text-neutral-50 rounded-l hover:bg-brand-700 transition",children:e}),d.jsx("button",{ref:o.setReference,...f(),className:"px-2 py-2 bg-brand-600 text-neutral-50 rounded-r border-l border-brand-500 hover:bg-brand-700 transition",children:d.jsx(C3,{size:16})}),r&&d.jsx("div",{ref:o.setFloating,style:s,...h(),className:"absolute z-50 mt-1 flex flex-col w-48 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:t.map((y,x)=>d.jsx("div",{onClick:()=>v(y),className:"bg-neutral-50 text-neutral-950 dark:bg-neutral-800 dark:text-neutral-50 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-lg px-4 py-2 text-sm font-medium cursor-pointer",children:y.label},x))})]})},RG=({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o})=>{const[s,a]=j.useState([]),[l,u]=j.useState(!0),[c,f]=j.useState(s[0]);return j.useEffect(()=>{(async()=>{if(!e)return a([]);const p=await Kq(e.resource_id);a(p),f(p[0])})()},[]),e?d.jsxs(rr,{isOpen:n,onClose:r,children:[d.jsx(ir,{title:t,onClose:r}),d.jsx(or,{children:d.jsx("h4",{children:e.description})}),d.jsx(dr,{children:d.jsx("div",{className:"flex items-center justify-between w-full",children:d.jsx("div",{className:"flex flex-row justify-center gap-2",children:s.length?d.jsxs(d.Fragment,{children:[d.jsx(Gn,{id:"auto-update",label:"Auto Update",checked:l,onChange:u}),d.jsx(C1,{label:Ol(c.item_id),onClick:()=>{r(),i(c.item_id)},options:s.map(h=>({label:Ol(h.item_id),onClick:()=>f(h)}))})]}):d.jsx("p",{children:"loading versions..."})})})})]}):null},TG=({isOpen:e,requestClose:t,onAccept:n})=>d.jsxs(rr,{isOpen:e,children:[d.jsx(ir,{title:"Disclaimer"}),d.jsxs(or,{children:[d.jsx("p",{children:"BardsBallad is a system-agnostic character manager that supports a wide variety of user-created and open-license game systems"}),d.jsx("br",{}),d.jsx("p",{children:"Some content may be based on systems originally published under the ORC License, Creative Commons (CC-BY 4.0), or other open licenses. All such content is provided either by BardsBallad or individual users in compliance with their respective licenses."}),d.jsx("br",{}),d.jsx("p",{children:"BardsBallad is not affiliated with or endorsed by Paizo Inc., Wizards of the Coast, or any other publishers. Names like Pathfinder, Starfinder, or Dungeons & Dragons are trademarks of their respective owners and are only used to indicate compatibility where appropriate."}),d.jsx("br",{}),d.jsx("p",{children:"Users are solely responsible for the legality of content they upload or share. Please do not upload copyrighted material or publisher-owned setting content (such as Golarion or the Forgotten Realms) unless you have the appropriate rights."})]}),d.jsx(dr,{children:d.jsx(kt,{color:"primary",onClick:()=>{n(!0),t()},children:"I Understand"})})]}),IG=({data:e,isOpen:t,requestClose:n,onSave:r})=>d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:"Save New Version",onClose:n}),d.jsxs(or,{children:[d.jsx("p",{children:'All of your changes are saved to a hidden "edits" copy of this version as you make them. This only saves your changes to a new public copy so that characters can use them.'}),d.jsx("p",{children:"Are you sure you'd like to save your changes to a new version."})]}),d.jsxs(dr,{children:[d.jsx(kt,{color:"light",onClick:n,children:"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{r(!0),n()},children:"Confirm"})]})]});function PG(e,t,n){var r,i;typeof e=="function"?(r=t||[],i=n):(r=[],i=t);var o=It.useRef({hasResult:!1,result:i,error:null}),s=It.useReducer(function(u){return u+1},0);s[0];var a=s[1],l=It.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")o.current.result=u.getValue(),o.current.hasResult=!0;else{var c=u.subscribe(function(f){o.current.result=f,o.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if(It.useDebugValue(o.current.result),It.useEffect(function(){var u=l.subscribe(function(c){var f=o.current;(f.error!==null||f.result!==c)&&(f.error=null,f.result=c,f.hasResult=!0,a())},function(c){var f=o.current;f.error!==c&&(f.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),o.current.error)throw o.current.error;return o.current.result}function Vs(e,t,n){return PG(function(){return Xz(e)},t||[],n)}function OG(){const e=Vs(()=>_t.systems.toArray(),[]),{user:t}=sr.useValue(),n=t?t.id:"none";return{systems:(e==null?void 0:e.filter(i=>{const o=i.deleted_at,s=i.user_id===n;return!o&&s}))||[],isLoading:e===void 0}}function j1(){const e=Vs(async()=>(await _t.versions.toArray()).filter(n=>{const r=n.deleted_at,i=n.local_id.split("|")[1]!==void 0;return!r&&!i}),[]);return{versions:e||[],isLoading:e===void 0}}const $G=({data:e,isOpen:t,requestClose:n,onSave:r})=>{const{systems:i}=OG(),{versions:o}=j1(),[s,a]=j.useState(i[0]),[l,u]=j.useState(o[0]),[c,f]=j.useState(""),[h,p]=j.useState(""),[v,y]=j.useState(!0),[x,m]=j.useState(!1);return j.useEffect(()=>{if(!i)return;const b=i[0];a(b),u(o.find(w=>w.reference_id===b.local_id))},[i]),j.useEffect(()=>{const b=async()=>{if(!await Wq(s.local_id))return m(!0);m(!1)};s&&b()},[s]),d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:"Publish New System",onClose:n}),d.jsxs(or,{children:[d.jsx(dt,{id:"type-to-publish",label:"Item Type",value:"system",onChange:b=>{},children:d.jsx("option",{value:"system",children:"System"})}),d.jsx(dt,{id:"item-to-publish",label:"System",value:s==null?void 0:s.local_id,onChange:b=>a(i.find(w=>w.local_id===b)),children:i.map(b=>d.jsx("option",{value:b.local_id,children:b.name}))}),d.jsx(g1,{id:"description",label:"Description",value:c,onChange:f}),d.jsx(Gn,{id:"is-public",label:"Is public?",checked:v,onChange:y}),d.jsx(dt,{id:"version-to-publish",label:"Version",value:l==null?void 0:l.local_id,onChange:b=>u(o.find(w=>w.local_id===b)),children:o==null?void 0:o.filter(b=>b.reference_id===s.local_id).map(b=>d.jsx("option",{value:b.local_id,children:Ol(b.local_id)},b.local_id))})]}),d.jsxs(dr,{children:[d.jsx(kt,{color:"light",onClick:n,children:"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{r({item:s,version:l,changelog:h,description:c,resource_type:"system",is_public:v}),n()},children:"Publish"})]})]})},MG=({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o})=>d.jsxs(rr,{isOpen:n,onClose:r,children:[d.jsx(ir,{title:t,onClose:r}),d.jsx(or,{children:d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("p",{children:"Welcome to BardsBallad we're a System Agnostic TTRPG Character Manager"}),d.jsx("p",{children:"Seems you're new here. Would you like to take a tour?"})]})}),d.jsxs(dr,{children:[d.jsx(kt,{color:"light",onClick:()=>{o(),r()},children:"No Thank You"}),d.jsx(kt,{color:"primary",onClick:()=>{i(!1),r()},children:"Yes Please!"})]})]}),DG=()=>{const e=Km.useValue();return d.jsx(d.Fragment,{children:e.map(({id:t,modal:n})=>n.type==="blueprint"?d.jsx($W,{title:n.title,data:n.data,isVisible:!0,requestClose:()=>ni(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="onboarding"?d.jsx(MG,{data:n.data,title:n.title,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="PublishItem"?d.jsx($G,{data:n.data,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave},t):n.type==="SaveNewVersion"?d.jsx(IG,{data:n.data,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave},t):n.type==="HandleConflicts"?d.jsx(JW,{data:n.data,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave},t):n.type==="marketplace_view"?d.jsx(RG,{data:n.data,title:n.title,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave},t):n.type==="authentication"?d.jsx(uK,{isOpen:!0,requestClose:()=>ni(t)},t):n.type==="import_file"?d.jsx(dK,{title:n.title,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave},t):n.type==="edit_object"?d.jsx(m1,{title:n.title,data:n.data,isVisible:!0,requestClose:()=>ni(t),onSave:n.onSave,onDelete:n.onDelete,types:n.types},t):n.type==="edit_blueprint_param"?d.jsx(GW,{data:n.data,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="edit_string"?d.jsx(hh,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="edit_number"?d.jsx(YW,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>ni(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="confirm"?d.jsx(XW,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>ni(t),onConfirm:n.onSave},t):n.type==="marketplace_disclaimer"?d.jsx(TG,{isOpen:!0,requestClose:()=>ni(t),onAccept:n.onSave},t):d.jsxs("h1",{children:[n.type," is un supported."]},t))})},A1=Ba(!1),j3=()=>A1.set(!0),lp=()=>A1.set(!1);function LG(e,t){const[n,r]=j.useState(null),i=j.useRef(null);return j.useEffect(()=>{let o=null;const s=()=>{if(e){if(o=document.querySelector(e),o){const a=o.getBoundingClientRect();r(l=>!l||JSON.stringify(l)!==JSON.stringify(a)?a:l)}i.current=requestAnimationFrame(s)}};return e&&s(),()=>{i.current&&cancelAnimationFrame(i.current)}},[e,t]),n}function BG(e,t){if(!e||t==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const n=12;switch(t){case"top":return{top:"".concat(e.top-n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, -100%)"};case"bottom":return{top:"".concat(e.bottom+n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, 0)"};case"left":return{top:"".concat(e.top,"px"),left:"".concat(e.left-n,"px"),transform:"translate(-100%, 0)"};case"right":return{top:"".concat(e.top,"px"),left:"".concat(e.right+n,"px"),transform:"translate(0, 0)"};default:return{top:"".concat(e.bottom+n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, 0)"}}}const FG=({steps:e,onFinish:t})=>{const[n,r]=j.useState(0),i=LG(e[n].selector,!0),o=vc(),s=e[n],a=()=>{s.navTo&&o(s.navTo),n+1<e.length?r(n+1):t()};return i?rT.createPortal(d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 pointer-events-auto"}),d.jsx("div",{className:"fixed border-2 border-yellow-400 pointer-events-auto z-50 rounded-lg transition-all duration-300",style:{top:i.top+window.scrollY,left:i.left+window.scrollX,width:i.width,height:i.height}}),d.jsxs("div",{className:"fixed z-50 p-4 bg-white text-black rounded shadow-xl max-w-xs",style:BG(i,s.position||"bottom"),children:[d.jsx("p",{className:"mb-2",children:s.content}),!s.waitForClick&&d.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded",onClick:a,children:n+1<e.length?"Next":"Finish"})]})]}),document.body):null},zG=[{id:"step1",selector:"#nav-Home",content:"Welcome to the app! This is the home page, where you can see our latest news and updates.",position:"bottom"},{id:"step2",selector:"#nav-Characters",content:"This is the character manager, where you can create and manage your characters. You can also import characters from json files.",position:"bottom",navTo:"characters"},{id:"step3",selector:"#nav-Library",content:"Library is where you can find all the systems you have downloaded. You can also create your own systems here.",position:"bottom",navTo:"library"},{id:"step4",selector:"#nav-Settings",content:"And this is the settings page, where you can change your settings and preferences. You can also manage your account here.",position:"top",navTo:"settings"},{id:"step5",selector:"#nav-Marketplace",content:"This is the marketplace, where you can find systems to use. You can search for systems by name or filter by license type.",position:"bottom",navTo:"marketplace"}],A3=j.createContext({}),HG=()=>j.useContext(A3),UG={success:"bg-green-600 text-white",error:"bg-red-600 text-white"},WG=({id:e,message:t,type:n="success",onClose:r})=>d.jsxs("div",{className:"rounded-lg shadow-lg px-4 py-3 flex items-center justify-between w-72 ".concat(UG[n]),children:[d.jsx("span",{children:t}),d.jsx("button",{onClick:r,children:d.jsx(NG,{className:"w-4 h-4 ml-2 opacity-80 hover:opacity-100"})})]}),VG=({children:e})=>{const[t,n]=j.useState([]),r=o=>{n(s=>s.filter(a=>a.id!==o))},i=j.useCallback((o,s="success",a=3e3)=>{const l=u1();n(u=>[...u,{id:l,message:o,type:s}]),setTimeout(()=>r(l),a)},[]);return d.jsxs(A3.Provider,{value:{addToast:i},children:[e,d.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:t.map(o=>d.jsx(WG,{...o,onClose:()=>r(o.id)},o.id))})]})},qG=[{name:"Home",path:""},{name:"Marketplace",path:"marketplace"},{name:"Characters",path:"characters"},{name:"Library",path:"library"}],KG=[{icon:()=>d.jsx("svg",{className:"flex-shrink-0 w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 21",children:d.jsx("path",{d:"m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"})}),name:"Settings",path:"settings"}],GG=()=>{const e=A1.useValue(),t=sr.useValue(),[n,r]=j.useState(!1),i=j.useRef(!1);return j.useEffect(()=>i.current?void 0:(i.current=!0,(async()=>{await Ld.get("onboarding-completed")||ln({type:"onboarding",data:null,title:"Welcome to BardsBallad!",onDelete:()=>{Ld.set("onboarding-completed",!0)},onSave:()=>{j3(),r(!0)}})})(),()=>{TL("onboarding")}),[]),d.jsx("div",{className:"w-screen h-screen-dynamic bg-neutral-50 dark:bg-neutral-900 text-primary transition-colors overflow-x-hidden",children:d.jsxs(VG,{children:[n&&d.jsx(FG,{steps:zG,onFinish:()=>{Ld.set("onboarding-completed",!0),r(!1)}}),d.jsx("div",{onClick:lp,className:"".concat(e?"":"-translate-x-full"," bg-neutral-950 opacity-65 fixed top-0 left-0 z-40 w-screen sm:w-64 h-screen-dynamic sm:translate-x-0")}),d.jsx("aside",{onClick:lp,className:"".concat(e?"":"-translate-x-full"," border-r border-neutral-500 dark:border-neutral-700 bg-neutral-950 fixed top-0 left-0 z-40 w-64 h-screen-dynamic transition-transform sm:translate-x-0"),"aria-label":"Sidebar",children:d.jsxs("div",{className:"h-full flex flex-col justify-between px-3 py-4 overflow-y-auto bg-neutral-50 dark:bg-neutral-950",onClick:o=>o.stopPropagation(),children:[d.jsxs("div",{children:[d.jsxs("a",{className:"flex items-center ps-2.5 mb-5",children:[d.jsx("svg",{className:"h-11 me-3 sm:h-12",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 442 442",children:d.jsx("g",{children:d.jsxs("g",{children:[d.jsx("path",{className:"fill-brand-500",d:"M221,442c-59.03,0-114.53-22.99-156.27-64.73S0,280.03,0,221,22.99,106.47,64.73,64.73C106.47,22.99,161.97,0,221,0s114.53,22.99,156.27,64.73c41.74,41.74,64.73,97.24,64.73,156.27s-22.99,114.53-64.73,156.27-97.24,64.73-156.27,64.73ZM221,12C105.76,12,12,105.76,12,221s93.76,209,209,209,209-93.76,209-209S336.24,12,221,12Z"}),d.jsx("path",{className:"fill-brand-500",d:"M343,318c-10.28-3.95-23-4-30,1-8.96,6.4-14,18-27.89,17-13.33-.96-18.11-10-18.11-10,0,0,13-1,21-8,6.58-5.76,12-12,11-24-.91-10.96-8.94-16-18-16-14,0-22,11-22,11,0,0-3-11,10-30,14.43-21.09,37.58-34.03,45-50,13-28,8.03-51,8.03-51l5.18-5.04.76.92s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-3.19-3.94,7.19-6.99,2.42,2.93s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-4.83-5.96,7.26-7.07,3.43,4.15s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-5.83-7.19.83-.81s3.33,2.68,6-1c2.93-4.04-2-7-2-7l-13-15s-1-4-5-3c-4.95,1.24-4,5-4,5l-.34.22-6.66-8.22s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l4.32,5.24-8.36,5.3-5.4-6.66s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l3.05,3.69-8.25,5.23-4.8-5.92s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l2.44,2.96-91.7,58.17s-7.97,4.6-15.3,9c-5,3-9-4-9-4l-3-2-2.44,2s4.89,6.76,4.44,9c-1,5-5,1-5,1l-6-7-4-3-2,3,7.43,9s2.62,3,.57,5-6-3-6-3l-9.95-12-4.05-2-2,2,11,14s4,5,1,7-7-4-7-4l-14-18-5-2-1,3,14.89,23s4.11,4,.11,7c-3.39,2.55-6.85-1.6-6.85-1.6l-21.54-28-5.61-2.4-1,3,20,28s6.35,6.71,1,9c-7,3-11.75-4-11.75-4l-24.25-30-4-2-1,3,23.1,33s5.13,7,2.05,10c-3.08,3-8.92-2.5-8.92-2.5l-29.23-37.5-4-2-1,3,32.9,47s4.1,5,2.1,7c-3.23,3.23-6-1-6-1l-38-51-6-1-3,4s65.82,92,73,99,9.9,1,14,3,5.41,7.59,1,12c-6,6-11-1-11-1,0,0-68.15-92-78.4-106-10.26-14-15.22-27.04-16.6-38-2-16,2.57-39,20-43s33.07.64,42,13c13,18,18.46,26.33,29,34,11,8,33.57,10.15,49-4,12-11,9.91-29,9.91-29,0,0,20.47-10.15,26.09-27,7-21-8.5-37.38-3-59,3.12-12.27,14-22,28-22,18.03,0,23.78,11,23.78,11,0,0-5.65,0-10.78,5s-5.64,11.45-2,16c4,5,13,5,19,0,6.61-5.51,5.06-14,5.06-14,0,0,5.94-4,11.94,4,4.38,5.84,4.04,14.63,15,16,8,1,16-8,14-16-1.21-4.85-5.49-7.87-10-4-7,6,3.08,13.26-3,15-7,2-9-11-16-17-5.93-5.08-11-6-11-6,0,0-1-19-19-22-17.31-2.88-30.74,2.36-41,14-10.26,11.64-12.05,26-10,37s10.13,29,5,42-23.11,20-23.11,20c0,0-.89-11-5.89-17-6.46-7.75-13-13-27-12-10.02.72-23.05,11-21,25s17,15,17,15c0,0-9.27,9.07-27,4-14-4-14.89-13.18-30-22-20.23-11.82-37-6-42-3-4.62,2.77-18.99,11.98-19,40,0,24,13,40,13,40l-23,12s-6,2-8,7c-1.53,3.83,2,8,2,8l95,122s6.82,11,14,11c6,0,13-6,13-6,0,0,24.27-16,50.94-57s22.56-77.58,22.56-77.58l74.5-51.42s8-5,6-8c-1.76-2.64-9,3-9,3,0,0-116.44,74.29-119,76-3,2-4-2-4-2,0,0-2-6-6-10-2.7-2.7-6.08-3.16-7-5-1-2,1-4,3-5l108.67-73s8.99-8,25.33-5c8.31,1.53,15,8,15,8,0,0,7.97,8,9,18s-1.13,20-5.23,30-8.2,15-18.46,23c-10.26,8-25.2,13.19-37.31,20-16,9-22.84,24.61-27,35-2,5-4.18,20,3,31s24,15,24,15c0,0,3.85,5,10,9s14.02,5.61,22,5c13-1,16.25-8.83,24-14,6-4,16.18-4,24.38,1,8.2,5,15.62,16.58,15.62,28,0,12-1.8,19-10,27s-15.54,11-34,11-29-1-38-7c-11.91-7.94-12.92-15.81-24-28-10-11-21.69-15-34-15-8,0-15.49,1.49-24,10-7,7-7,18-7,18,0,0-4,2-10,9-5.14,5.99-10,13-17,14-10.58,1.51-17.59-2-17.59-2,0,0,1.62-3,.59-5s-3.9-3-8-3-6.74,4.26-2,9c3,3,6.52,5.77,17,7,17,2,22.94-7.94,28-13,7-7,11-8,11-8,0,0,2,5,7,8,3.15,1.89,10,3,15,1,5.95-2.38,7-10,4-15-2.78-4.63-12-5-12-5,0,0,3-8,16-6,8.95,1.38,13.96,5.04,28,18,13,12,30.32,14.88,50,16,35,2,47.44,0,59.74-10,12.31-10,15.54-33.28,13.26-44s-10.59-20-21-24ZM274,66c-7,4-12-2-11-7,.78-3.92,4-7,12-8,0,0,5.14,11.49-1,15ZM147,132c-1.05-6.32,3-16,13-17s12,6,12,12c0,10.44-7,16-7,16-9,0-17-5-18-11ZM164,252c0,10.49-8.51,19-19,19s-19-8.51-19-19,8.51-19,19-19,19,8.51,19,19ZM347,107s7.18,5.73,8,9c.49,1.94.03,3.42-.57,4.43l-12.11-14.93c3.12-.83,4.68,1.5,4.68,1.5ZM335.77,109.21l13.37,16.2-7.54,6.66-14.23-17.55c3.21-2.03,6.11-3.86,8.41-5.3ZM321.04,118.52l15.13,18.33-7.46,6.58-15.94-19.66c2.74-1.74,5.54-3.52,8.27-5.25ZM310,142c-8.3-6.64-18-5-18-5,0,0,6.33-4.04,14.44-9.21l16.85,20.42-4.29,3.79s-4-6-9-10ZM261,299s2-7,9-12,15-5,19-2c5.06,3.79,5.41,11.18,3,16-2,4-9.11,10.32-17,9-12-2-14-11-14-11ZM198,374c4.47,0,7,4,6,7-1.14,3.42-7,3-10,1-2.35-1.57-4-6-4-6,0,0,3-2,8-2Z"})]})})}),d.jsxs("div",{children:[d.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"BardsBallad"}),d.jsx("p",{className:"text-neutral-500",children:"v0.1.0"})]})]}),d.jsx("ul",{className:"pt-4 mt-4 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:qG.map(o=>d.jsx("li",{children:d.jsx(kg,{id:"nav-".concat(o.name),to:o.path,onClick:lp,children:d.jsxs("div",{className:"flex items-center p-2 text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-100 dark:hover:bg-neutral-700 group",children:[d.jsxs("svg",{className:"w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 21",children:[d.jsx("path",{d:"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"}),d.jsx("path",{d:"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"})]}),d.jsx("span",{className:"ms-3",children:o.name})]})})},o.name))})]}),d.jsxs("div",{children:[d.jsxs("div",{id:"dropdown-cta",className:"p-4 mt-6 rounded-lg bg-brand-50 bg-gradient-to-r dark:from-brand-500 dark:to-brand-700",role:"alert",children:[d.jsx("div",{className:"flex items-center mb-3",children:d.jsx("span",{className:"bg-brand-100 text-brand-800 text-sm font-semibold me-2 px-2.5 py-0.5 rounded dark:bg-brand-200 dark:text-brand-900",children:"Beta"})}),d.jsx("p",{className:"mb-3 text-sm text-brand-800 dark:text-brand-100",children:"We're happy you're using the BardsBallad Beta! If you run into any problems please reach out to us through one of the platforms below!"})]}),d.jsxs("div",{className:"flex items-center my-2 gap-2 px-1",children:[d.jsx("a",{href:"https://discord.gg/a5qSfxv",target:"_blank",className:"bg-neutral-700 p-1 rounded border border-neutral-600",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 fill-neutral-300 hover:fill-brand-400 transition-colors",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M464 66.52A50 50 0 00414.12 17L97.64 16A49.65 49.65 0 0048 65.52V392c0 27.3 22.28 48 49.64 48H368l-13-44 109 100zM324.65 329.81s-8.72-10.39-16-19.32C340.39 301.55 352.5 282 352.5 282a139 139 0 01-27.85 14.25 173.31 173.31 0 01-35.11 10.39 170.05 170.05 0 01-62.72-.24 184.45 184.45 0 01-35.59-10.4 141.46 141.46 0 01-17.68-8.21c-.73-.48-1.45-.72-2.18-1.21-.49-.24-.73-.48-1-.48-4.36-2.42-6.78-4.11-6.78-4.11s11.62 19.09 42.38 28.26c-7.27 9.18-16.23 19.81-16.23 19.81-53.51-1.69-73.85-36.47-73.85-36.47 0-77.06 34.87-139.62 34.87-139.62 34.87-25.85 67.8-25.12 67.8-25.12l2.42 2.9c-43.59 12.32-63.44 31.4-63.44 31.4s5.32-2.9 14.28-6.77c25.91-11.35 46.5-14.25 55-15.21a24 24 0 014.12-.49 205.62 205.62 0 0148.91-.48 201.62 201.62 0 0172.89 22.95s-19.13-18.15-60.3-30.45l3.39-3.86s33.17-.73 67.81 25.16c0 0 34.87 62.56 34.87 139.62 0-.28-20.35 34.5-73.86 36.19z"}),d.jsx("path",{d:"M212.05 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.8 0 24.7-11.83 24.7-26.57.25-14.76-10.9-26.57-24.7-26.57zM300.43 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.81 0 24.7-11.83 24.7-26.57S314 218 300.43 218z"})]})}),d.jsx("a",{href:"https://github.com/KingCosmic/BardsBallad",target:"_blank",className:"bg-neutral-700 p-1 rounded border border-neutral-600",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 fill-neutral-300 hover:fill-brand-400 transition-colors",viewBox:"0 0 512 512",children:d.jsx("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"})})}),d.jsx("a",{href:"mailto:support@bardsballad.com",target:"_blank",className:"bg-neutral-700 p-1 rounded border border-neutral-600",children:d.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 fill-neutral-300 hover:fill-brand-400 transition-colors",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),d.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),d.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",d.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.75 5.25L3 6V18L3.75 18.75H20.25L21 18V6L20.25 5.25H3.75ZM4.5 7.6955V17.25H19.5V7.69525L11.9999 14.5136L4.5 7.6955ZM18.3099 6.75H5.68986L11.9999 12.4864L18.3099 6.75Z"})," "]})]})})]}),d.jsxs("ul",{className:"pt-4 mt-2 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:[!t.isLoggedIn&&d.jsx("li",{children:d.jsx(kt,{className:"w-full",color:"primary",onClick:()=>{ln({type:"authentication",title:"",data:null,onSave:()=>{}})},children:"Login / Register"})}),KG.map(o=>d.jsx("li",{children:d.jsx(kg,{id:"nav-".concat(o.name),to:o.path,onClick:lp,children:d.jsxs("div",{className:"flex items-center p-2 text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-100 dark:hover:bg-neutral-700 group",children:[o.icon(),d.jsx("span",{className:"ms-3",children:o.name})]})})},o.name))]})]})]})}),d.jsx("div",{className:"sm:ml-64 h-screen-dynamic",children:d.jsx(KD,{})}),d.jsx(DG,{})]})})},YG=()=>d.jsxs("button",{onClick:j3,type:"button",className:"inline-flex items-center p-2 mt-2 ms-3 text-sm text-neutral-500 rounded-lg sm:hidden hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-200 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:ring-neutral-600",children:[d.jsx("span",{className:"sr-only",children:"Open sidebar"}),d.jsx("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})})]}),Ta=({title:e,options:t,hasSidebar:n=!1})=>d.jsx("nav",{className:(n?"md:w-[calc(100vw-32rem)]":"")+" bg-brand-50 dark:bg-neutral-950 sticky z-20 top-0 start-0 border-b border-neutral-200 dark:border-neutral-700",children:d.jsxs("div",{className:"flex flex-wrap items-center justify-between mx-auto sm:mx-0 p-4",children:[d.jsxs("div",{className:"flex",children:[d.jsx(YG,{}),d.jsx("a",{className:"flex items-center space-x-3 rtl:space-x-reverse ml-4",children:d.jsx("span",{className:"text-2xl font-semibold whitespace-nowrap dark:text-white",children:e})})]}),d.jsx("div",{className:"items-center justify-between flex md:w-auto md:order-1",children:(t==null?void 0:t.length)&&d.jsx("ul",{className:"flex flex-col p-4 md:p-0 mt-4 font-medium border border-neutral-100 rounded-lg bg-neutral-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-neutral-800 md:dark:bg-neutral-900 dark:border-neutral-700",children:t==null?void 0:t.map(({Content:r,onClick:i})=>d.jsx("li",{onClick:i,children:d.jsx(r,{})}))})})]})}),XG=[{title:"Added Eruda debugging support, and started work on theme system.",date:"Released on January 21st, 2025",description:"Check your settings for themes and to enable Eruda!"},{title:"Editor Released!",date:"Released on January 16th, 2025",description:"We've released the Editor portion of BarsBallad, this will allow you to make your own systems! It includes visual drag and drop creation of character of tabs, and a custom visual code editor."},{title:"Beta Release",date:"Released on August 14th, 2024",description:"We're releasing BardsBallad into open beta! Please share all feedback through discord and github and share us with your friends!"}],JG=({title:e,isLatest:t,date:n,description:r})=>d.jsxs("li",{className:"mb-10 ms-6",children:[d.jsx("span",{className:"absolute flex items-center justify-center w-6 h-6 bg-brand-100 rounded-full -start-3 ring-8 ring-white dark:ring-neutral-900 dark:bg-brand-900",children:d.jsx("svg",{className:"w-2.5 h-2.5 text-brand-800 dark:text-brand-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})})}),d.jsxs("h3",{className:"flex items-center mb-1 text-lg font-semibold text-neutral-900 dark:text-white",children:[e,t?d.jsxs(d.Fragment,{children:[" ",d.jsx("span",{className:"bg-brand-100 text-brand-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-brand-900 dark:text-brand-300 ms-3",children:"Latest"})]}):null]}),d.jsx("time",{className:"block mb-2 text-sm font-normal leading-none text-neutral-400 dark:text-neutral-500",children:n}),d.jsx("p",{className:"mb-4 text-base font-normal text-neutral-500 dark:text-neutral-400",children:r})]}),QG=()=>d.jsxs("div",{children:[d.jsx(Ta,{title:"Home"}),d.jsx("ol",{className:"relative m-10 border-s border-neutral-200 dark:border-neutral-700",children:XG.map((e,t)=>d.jsx(JG,{title:e.title,isLatest:t===0,date:e.date,description:e.description},e.title))})]}),N3=j.createContext({});function Ec(){return j.useContext(N3)}const R3=({localData:e,children:t})=>{const n=Ec();return d.jsx(N3.Provider,{value:{...n,...e},children:t})};function U2(e,t){return e.nodes.find(n=>n.id===t)}const ZG={process:(e,t)=>{const n=e.input;for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"start","output")}},eY={process:(e,t)=>{const{name:n}=t.data.param,r=e.getParam(t.id,n);e.setOutput(r)}};function tY(e,t){return t?t.split("/").reduce((r,i)=>{if(r)return Array.isArray(r)?(r=r.find(o=>o.name===i),r||void 0):r[i]},e):void 0}const nY={process:(e,t)=>{const n=e.getCharacter(),r=tY(n,"data/".concat(t.data.path));return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},rY={process:(e,t)=>{const n=e.getCharacter(),r=e.getParam(t.id,"input"),i=In(n,o=>p1(o,"data/".concat(t.data.path),r));return e.setCharacter(i),e.getConnectingNodeForHandle(t,"next","output")}},iY={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),o=n.findIndex(s=>s.name===r.name)===-1?n.concat([r]):n.concat([]);return e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},oY={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"name"),i=n.findIndex(s=>s.name===r);let o=n.concat();return i!==-1&&o.splice(i,1),e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},sY={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),i=e.getParam(t.id,"name"),o=n.findIndex(a=>a.name===i);let s=n.concat();return o!==-1&&(s[o]=r),e.setParam(t.id,"output",s),e.getConnectingNodeForHandle(t,"next","output")}},aY={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0&&e.getParam(t.id,"filtered?")){const s=[...n.get("newArray"),i[r-1]];n.set("newArray",s),e.setParam(t.id,"filterd",s)}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},lY={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0){const o=e.getParam(t.id,"newitem");if(o){const s=[...n.get("newArray"),o];n.set("newArray",s),e.setParam(t.id,"filterd",s)}}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},uY={process:(e,t)=>{const n=e.getParam(t.id,"base")||[],r=e.getParam(t.id,"name")||"",i=n.findIndex(o=>o.name===r);return e.setParam(t.id,"output",n[i]),e.getConnectingNodeForHandle(t,"next","output")}},cY={process:(e,t)=>{const n=e.getParam(t.id,"input");for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"next","output")}},dY={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},fY={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n.includes(r)),e.getConnectingNodeForHandle(t,"next","output")}},hY={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},pY={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},gY={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",n.toString()),e.getConnectingNodeForHandle(t,"next","output")}},mY={process:(e,t)=>{const n=t.data.spreadType;let r={_type:n};for(let i=0;i<n.properties.length;i++){const o=n.properties[i];let s=e.getParam(t.id,o.key);s===void 0&&(s=Pf(e.getSystem().types,o.typeData)),r[o.key]=s}return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},yY={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},vY={process:(e,t)=>{const n=e.getParam(t.id,"enum1"),r=e.getParam(t.id,"enum2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},wY={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},bY={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n/r),e.getConnectingNodeForHandle(t,"next","output")}},xY={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n-r),e.getConnectingNodeForHandle(t,"next","output")}},_Y={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",Math.floor(n)),e.getConnectingNodeForHandle(t,"next","output")}},SY={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},EY={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n*r),e.getConnectingNodeForHandle(t,"next","output")}},kY={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},CY={process:(e,t)=>e.getParam(t.id,"input")?e.getConnectingNodeForHandle(t,"true","output"):e.getConnectingNodeForHandle(t,"false","output")},jY={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",!n),e.getConnectingNodeForHandle(t,"next","output")}},AY={process:(e,t)=>{const n=e.getParam(t.id,"data"),r=e.getSystem();ln({title:t.data.title,type:t.data.type,types:(r==null?void 0:r.types)||[],data:n,onSave:i=>{e.setParam(t.id,"newdata",i),e.processNodes(e.getConnectingNodeForHandle(t,"save","output"))},onDelete:()=>{e.processNodes(e.getConnectingNodeForHandle(t,"delete","output"))}})}},NY={process:(e,t)=>{const r=e.getSystem().data.find(i=>i.name===t.data.path);return e.setParam(t.id,"output",r==null?void 0:r.data),e.getConnectingNodeForHandle(t,"next","output")}},RY={process:(e,t)=>{const n=e.getPage(),r=t.data.chosenState;if(!r)return;const i=n.state.findIndex(a=>a.name===r.name);if(i===-1)return;const o=e.getParam(t.id,r.name),s=In(n,a=>(a.state[i]={...a.state[i],value:o},a));return e.setPage(s),e.getConnectingNodeForHandle(t,"next","output")}};function TY(e,t){if(["string","number"].includes(t.type))return Pf(e.types,t);if(t.isArray)return[];const r=e.types.find(o=>o.name===t.type);if(!r)return;let i={_type:{...r}};for(let o=0;o<r.properties.length;o++){const s=r.properties[o];let a=s.typeData;i[s.key]=Pf(e.types,a)}return i}const IY={process:(e,t)=>{var o;const r=e.getPage().state.find(s=>s.name===t.data.chosenState.name);if(!r)return;const i=(o=r.value)!=null?o:TY(e.getSystem(),r.type);return e.setParam(t.id,t.data.chosenState.name,i),e.getConnectingNodeForHandle(t,"next","output")}},PY={entry:ZG,output:eY,get_character_data:nY,set_character_data:rY,get_system_data:NY,get_page_data:IY,set_page_data:RY,number_to_string:gY,add_to_array:iY,array_get:uY,array_remove:oY,array_update:sY,filter:aY,map:lY,string_new:dY,string_includes:fY,string_compare:hY,string_concat:pY,spread_object:cY,create_data_from_type:mY,new_number:wY,divide:bY,add:SY,subtract:xY,floor:_Y,multiply:EY,new_enum:yY,enum_compare:vY,boolean_new:kY,boolean_branch:CY,boolean_inverse:jY,open_modal:AY};function OY(e){return PY[e]||{process:()=>{}}}class Go{constructor(t){Mo(this,"blueprint");Mo(this,"state");Mo(this,"input",{});Mo(this,"nodeState",new Map);Mo(this,"params",new Map);Mo(this,"output",null);Mo(this,"callback",()=>{});this.blueprint=t}processBlueprint(t,n,r){const i=AP(this.blueprint);return this.state=n,this.input=t,this.callback=r,this.processNodes(i)}processNodes(t){const n=this.processNode(t);return n?this.processNodes(n):(this.callback(this.state),this.getOutput())}processNode(t){if(!t)return;const n=OY(t.type||"");return!this.nodeState.get(t.id)&&n.init&&(this.nodeState.set(t.id,new Map),n.init(this,t)),n.process(this,t)}getConnectingNodeForHandle(t,n,r){const i=this.blueprint.edges.find(o=>{var s,a;return(r==="input"?o.target===t.id:o.source===t.id)&&(((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n&&r==="output"||((a=o.sourceHandle)==null?void 0:a.split("-")[0])===n&&r==="input")});if(i){if(r==="output")return U2(this.blueprint,i.target);if(r==="input")return U2(this.blueprint,i.source)}}getPossibleParamsForNode(t,n){return this.blueprint.edges.filter(r=>n==="input"?r.target===t:r.source===t).map(r=>{var i,o;return n==="input"?(i=r.targetHandle)==null?void 0:i.split("-")[0]:(o=r.sourceHandle)==null?void 0:o.split("-")[0]})}getParamType(t,n){var o;const i=this.blueprint.edges.filter(s=>{var a;return s.target===t&&((a=s.targetHandle)==null?void 0:a.split("-")[0])===n}).find(s=>this.params.get(s.id)!==void 0);return(o=i==null?void 0:i.targetHandle)==null?void 0:o.split("-")[1]}getParam(t,n){const i=this.blueprint.edges.filter(o=>{var s;return o.target===t&&((s=o.targetHandle)==null?void 0:s.split("-")[0])===n}).find(o=>this.params.get(o.id)!==void 0);return this.params.get((i==null?void 0:i.id)||"")}setParam(t,n,r){const i=this.blueprint.edges.filter(o=>{var s;return o.source===t&&((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n});for(let o=0;o<i.length;o++)this.params.set(i[o].id,r);return this.params}getCharacter(){return this.state.character}setCharacter(t){this.state.character=t}getSystem(){return this.state.system}setSystem(t){this.state.system=t}getPage(){return this.state.page}setPage(t){this.state.page=t}getOutput(){return this.output}setOutput(t){this.output=t}}const xi={"no style":{background:"",border:"",hover:""},light:{background:"bg-white dark:bg-neutral-800",border:"border border-neutral-200 dark:border-neutral-600",hover:"cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700"},primary:{background:"bg-white dark:bg-brand-800",border:"border border-brand-200 dark:border-brand-600",hover:"cursor-pointer hover:bg-brand-100 dark:hover:bg-brand-700"},accent:{background:"bg-white dark:bg-accent-800",border:"border border-accent-200 dark:border-accent-600",hover:"cursor-pointer hover:bg-accent-100 dark:hover:bg-accent-700"},confirmation:{background:"bg-white dark:bg-green-800",border:"border border-green-200 dark:border-green-600",hover:"cursor-pointer hover:bg-green-100 dark:hover:bg-green-700"},warning:{background:"bg-white dark:bg-orange-800",border:"border border-orange-200 dark:border-orange-600",hover:"cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-700"}},W2={0:"0px",px:"1px","0.5":"0.125rem",1:"0.25rem","1.5":"0.375rem",2:"0.5rem","2.5":"0.625rem",3:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Ve={spacing:{...W2},size:{auto:"auto",full:"100%",half:"50%",third:"33%",...W2}},$Y=e=>{const t=Ec(),n=j.useMemo(()=>{var c;return(c=new Go(e.blueprint).processBlueprint(t,e.state,()=>{}))!=null?c:[]},[t,e.state]),r=j.useMemo(()=>e.dynamicVisibility?new Go(e.visibilityBlueprint).processBlueprint(t,e.state,()=>{})||!1:e.isVisible,[t,e.state]),i=j.useCallback(()=>{if(!e.isInteractive)return;new Go(e.onPress).processBlueprint(t,e.state,e.updateState)},[e.onPress,t,e.state,e.updateState]),o=j.useMemo(()=>{var l;return xi[e.background]?(l=xi[e.background])==null?void 0:l.background:""},[e.background]),s=j.useMemo(()=>{var l;return xi[e.border]?(l=xi[e.border])==null?void 0:l.border:""},[e.border]),a=j.useMemo(()=>{var l;return e.isInteractive?(l=xi[e.hover])==null?void 0:l.hover:""},[e.isInteractive]);return d.jsx("div",{style:{display:r?e.display:"none",position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ve.spacing[e.gap],marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft],height:Ve.size[e.height],width:Ve.size[e.width],maxHeight:Ve.size[e.maxHeight],maxWidth:Ve.size[e.maxWidth],minHeight:Ve.size[e.minHeight],minWidth:Ve.size[e.minWidth]},className:"".concat(o," ").concat(s," ").concat(a),onClick:i,children:e.isList?n.map(l=>d.jsx(R3,{localData:{[e.dataName]:l},children:e.children},l.name)):e.children})},_i={colors:{base:{text:"text-neutral-800 dark:text-neutral-200",hover:"group-hover:text-neutral-700 dark:group-hover:text-neutral-300"},light:{text:"text-neutral-500 dark:text-neutral-400",hover:"group-hover:text-neutral-400 dark:group-hover:text-neutral-500"},primary:{text:"text-brand-600 dark:text-brand-400",hover:"group-hover:text-brand-700 dark:group-hover:text-brand-300"},accent:{text:"text-accent-600 dark:text-accent-400 hover:text-accent-700 dark:hover:text-accent-300",hover:"group-hover:text-accent-700 dark:group-hover:text-accent-300"},confirmation:{text:"text-green-600 dark:text-green-400",hover:"group-hover:text-green-700 dark:group-hover:text-green-300"},warning:{text:"text-orange-600 dark:text-orange-400",hover:"group-hover:text-orange-700 dark:group-hover:text-orange-300"},danger:{text:"text-red-600 dark:text-red-400",hover:"group-hover:text-red-700 dark:group-hover:text-red-300"}},weight:{thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},sizes:{xs:{fontSize:"0.75rem",lineHeight:"1rem"},sm:{fontSize:"0.875rem",lineHeight:"1.25rem"},base:{fontSize:"1rem",lineHeight:"1.5rem"},lg:{fontSize:"1.125rem",lineHeight:"1.75rem"},xl:{fontSize:"1.25rem",lineHeight:"1.75rem"},"2xl":{fontSize:"1.5rem",lineHeight:"2rem"},"3xl":{fontSize:"1.875rem",lineHeight:"2.25rem"},"4xl":{fontSize:"2.25rem",lineHeight:"2.5rem"},"5xl":{fontSize:"3rem",lineHeight:"1"},"6xl":{fontSize:"3.75rem",lineHeight:"1"},"7xl":{fontSize:"4.5rem",lineHeight:"1"},"8xl":{fontSize:"6rem",lineHeight:"1"},"9xl":{fontSize:"8rem",lineHeight:"1"}}},MY=e=>{const t=Ec(),n=j.useMemo(()=>e.useBlueprintValue?new Go(e.blueprint).processBlueprint(t,e.state,()=>{})||"":e.text,[e.blueprint,t,e.useBlueprintValue,e.text]),r=j.useMemo(()=>{var o;return _i.colors[e.color]?(o=_i.colors[e.color])==null?void 0:o.text:""},[e.color]),i=j.useMemo(()=>_i.weight[e.fontWeight]?_i.weight[e.fontWeight]:"",[e.fontWeight]);return d.jsx("p",{style:{textAlign:e.textAlign,..._i.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:n})};function yr(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ml(e){return!!e&&!!e[sn]}function es(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===VY}(e)||Array.isArray(e)||!!e[Bd]||!!(!((t=e.constructor)===null||t===void 0)&&t[Bd])||Ay(e)||Ny(e))}function Dl(e,t,n){n===void 0&&(n=!1),Ia(e)===0?(n?Object.keys:O1)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ia(e){var t=e[sn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ay(e)?2:Ny(e)?3:0}function Df(e,t){return Ia(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Xp(e,t){return Ia(e)===2?e.get(t):e[t]}function T3(e,t,n){var r=Ia(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function DY(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ay(e){return UY&&e instanceof Map}function Ny(e){return WY&&e instanceof Set}function lr(e){return e.o||e.t}function N1(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=qY(e);delete t[sn];for(var n=O1(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function R1(e,t){return t===void 0&&(t=!1),T1(e)||Ml(e)||!es(e)||(Ia(e)>1&&(e.set=e.add=e.clear=e.delete=LY),Object.freeze(e),t&&Dl(e,function(n,r){return R1(r,!0)},!0)),e}function LY(){yr(2)}function T1(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Yo(e){var t=Xb[e];return t||yr(18,e),t}function I3(e,t){Xb[e]||(Xb[e]=t)}function rm(){return Bf}function w0(e,t){t&&(Yo("Patches"),e.u=[],e.s=[],e.v=t)}function im(e){Yb(e),e.p.forEach(BY),e.p=null}function Yb(e){e===Bf&&(Bf=e.l)}function V2(e){return Bf={p:[],l:Bf,h:e,m:!0,_:0}}function BY(e){var t=e[sn];t.i===0||t.i===1?t.j():t.g=!0}function b0(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Yo("ES5").S(t,e,r),r?(n[sn].P&&(im(t),yr(4)),es(e)&&(e=om(t,e),t.l||sm(t,e)),t.u&&Yo("Patches").M(n[sn].t,e,t.u,t.s)):e=om(t,n,[]),im(t),t.u&&t.v(t.u,t.s),e!==P1?e:void 0}function om(e,t,n){if(T1(t))return t;var r=t[sn];if(!r)return Dl(t,function(a,l){return q2(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return sm(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=N1(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),Dl(o,function(a,l){return q2(e,r,i,a,l,n,s)}),sm(e,i,!1),n&&e.u&&Yo("Patches").N(r,n,e.u,e.s)}return r.o}function q2(e,t,n,r,i,o,s){if(Ml(i)){var a=om(e,i,o&&t&&t.i!==3&&!Df(t.R,r)?o.concat(r):void 0);if(T3(n,r,a),!Ml(a))return;e.m=!1}else s&&n.add(i);if(es(i)&&!T1(i)){if(!e.h.D&&e._<1)return;om(e,i),t&&t.A.l||sm(e,i)}}function sm(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&R1(t,n)}function x0(e,t){var n=e[sn];return(n?lr(n):e)[t]}function K2(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function vs(e){e.P||(e.P=!0,e.l&&vs(e.l))}function _0(e){e.o||(e.o=N1(e.t))}function Lf(e,t,n){var r=Ay(t)?Yo("MapSet").F(t,n):Ny(t)?Yo("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:rm(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=a,u=Jb;s&&(l=[a],u=vd);var c=Proxy.revocable(l,u),f=c.revoke,h=c.proxy;return a.k=h,a.j=f,h}(t,n):Yo("ES5").J(t,n);return(n?n.A:rm()).p.push(r),r}function FY(e){return Ml(e)||yr(22,e),function t(n){if(!es(n))return n;var r,i=n[sn],o=Ia(n);if(i){if(!i.P&&(i.i<4||!Yo("ES5").K(i)))return i.t;i.I=!0,r=G2(n,o),i.I=!1}else r=G2(n,o);return Dl(r,function(s,a){i&&Xp(i.t,s)===a||T3(r,s,t(a))}),o===3?new Set(r):r}(e)}function G2(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return N1(e)}function zY(){function e(r){if(!es(r))return r;if(Array.isArray(r))return r.map(e);if(Ay(r))return new Map(Array.from(r.entries()).map(function(s){return[s[0],e(s[1])]}));if(Ny(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var o in r)i[o]=e(r[o]);return Df(r,Bd)&&(i[Bd]=r[Bd]),i}function t(r){return Ml(r)?e(r):r}var n="add";I3("Patches",{$:function(r,i){return i.forEach(function(o){for(var s=o.path,a=o.op,l=r,u=0;u<s.length-1;u++){var c=Ia(l),f=s[u];typeof f!="string"&&typeof f!="number"&&(f=""+f),c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||yr(24),typeof l=="function"&&f==="prototype"&&yr(24),typeof(l=Xp(l,f))!="object"&&yr(15,s.join("/"))}var h=Ia(l),p=e(o.value),v=s[s.length-1];switch(a){case"replace":switch(h){case 2:return l.set(v,p);case 3:yr(16);default:return l[v]=p}case n:switch(h){case 1:return v==="-"?l.push(p):l.splice(v,0,p);case 2:return l.set(v,p);case 3:return l.add(p);default:return l[v]=p}case"remove":switch(h){case 1:return l.splice(v,1);case 2:return l.delete(v);case 3:return l.delete(o.value);default:return delete l[v]}default:yr(17,a)}}),r},N:function(r,i,o,s){switch(r.i){case 0:case 4:case 2:return function(a,l,u,c){var f=a.t,h=a.o;Dl(a.R,function(p,v){var y=Xp(f,p),x=Xp(h,p),m=v?Df(f,p)?"replace":n:"remove";if(y!==x||m!=="replace"){var b=l.concat(p);u.push(m==="remove"?{op:m,path:b}:{op:m,path:b,value:x}),c.push(m===n?{op:"remove",path:b}:m==="remove"?{op:n,path:b,value:t(y)}:{op:"replace",path:b,value:t(y)})}})}(r,i,o,s);case 5:case 1:return function(a,l,u,c){var f=a.t,h=a.R,p=a.o;if(p.length<f.length){var v=[p,f];f=v[0],p=v[1];var y=[c,u];u=y[0],c=y[1]}for(var x=0;x<f.length;x++)if(h[x]&&p[x]!==f[x]){var m=l.concat([x]);u.push({op:"replace",path:m,value:t(p[x])}),c.push({op:"replace",path:m,value:t(f[x])})}for(var b=f.length;b<p.length;b++){var w=l.concat([b]);u.push({op:n,path:w,value:t(p[b])})}f.length<p.length&&c.push({op:"replace",path:l.concat(["length"]),value:f.length})}(r,i,o,s);case 3:return function(a,l,u,c){var f=a.t,h=a.o,p=0;f.forEach(function(v){if(!h.has(v)){var y=l.concat([p]);u.push({op:"remove",path:y,value:v}),c.unshift({op:n,path:y,value:v})}p++}),p=0,h.forEach(function(v){if(!f.has(v)){var y=l.concat([p]);u.push({op:n,path:y,value:v}),c.unshift({op:"remove",path:y,value:v})}p++})}(r,i,o,s)}},M:function(r,i,o,s){o.push({op:"replace",path:[],value:i===P1?void 0:i}),s.push({op:"replace",path:[],value:r})}})}function HY(){function e(a,l){function u(){this.constructor=a}i(a,l),a.prototype=(u.prototype=l.prototype,new u)}function t(a){a.o||(a.R=new Map,a.o=new Map(a.t))}function n(a){a.o||(a.o=new Set,a.t.forEach(function(l){if(es(l)){var u=Lf(a.A.h,l,a);a.p.set(l,u),a.o.add(u)}else a.o.add(l)}))}function r(a){a.g&&yr(3,JSON.stringify(lr(a)))}var i=function(a,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)c.hasOwnProperty(f)&&(u[f]=c[f])})(a,l)},o=function(){function a(u,c){return this[sn]={i:2,l:c,A:c?c.A:rm(),P:!1,I:!1,o:void 0,R:void 0,t:u,k:this,C:!1,g:!1},this}e(a,Map);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return lr(this[sn]).size}}),l.has=function(u){return lr(this[sn]).has(u)},l.set=function(u,c){var f=this[sn];return r(f),lr(f).has(u)&&lr(f).get(u)===c||(t(f),vs(f),f.R.set(u,!0),f.o.set(u,c),f.R.set(u,!0)),this},l.delete=function(u){if(!this.has(u))return!1;var c=this[sn];return r(c),t(c),vs(c),c.t.has(u)?c.R.set(u,!1):c.R.delete(u),c.o.delete(u),!0},l.clear=function(){var u=this[sn];r(u),lr(u).size&&(t(u),vs(u),u.R=new Map,Dl(u.t,function(c){u.R.set(c,!1)}),u.o.clear())},l.forEach=function(u,c){var f=this;lr(this[sn]).forEach(function(h,p){u.call(c,f.get(p),p,f)})},l.get=function(u){var c=this[sn];r(c);var f=lr(c).get(u);if(c.I||!es(f)||f!==c.t.get(u))return f;var h=Lf(c.A.h,f,c);return t(c),c.o.set(u,h),h},l.keys=function(){return lr(this[sn]).keys()},l.values=function(){var u,c=this,f=this.keys();return(u={})[up]=function(){return c.values()},u.next=function(){var h=f.next();return h.done?h:{done:!1,value:c.get(h.value)}},u},l.entries=function(){var u,c=this,f=this.keys();return(u={})[up]=function(){return c.entries()},u.next=function(){var h=f.next();if(h.done)return h;var p=c.get(h.value);return{done:!1,value:[h.value,p]}},u},l[up]=function(){return this.entries()},a}(),s=function(){function a(u,c){return this[sn]={i:3,l:c,A:c?c.A:rm(),P:!1,I:!1,o:void 0,t:u,k:this,p:new Map,g:!1,C:!1},this}e(a,Set);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return lr(this[sn]).size}}),l.has=function(u){var c=this[sn];return r(c),c.o?!!c.o.has(u)||!(!c.p.has(u)||!c.o.has(c.p.get(u))):c.t.has(u)},l.add=function(u){var c=this[sn];return r(c),this.has(u)||(n(c),vs(c),c.o.add(u)),this},l.delete=function(u){if(!this.has(u))return!1;var c=this[sn];return r(c),n(c),vs(c),c.o.delete(u)||!!c.p.has(u)&&c.o.delete(c.p.get(u))},l.clear=function(){var u=this[sn];r(u),lr(u).size&&(n(u),vs(u),u.o.clear())},l.values=function(){var u=this[sn];return r(u),n(u),u.o.values()},l.entries=function(){var u=this[sn];return r(u),n(u),u.o.entries()},l.keys=function(){return this.values()},l[up]=function(){return this.values()},l.forEach=function(u,c){for(var f=this.values(),h=f.next();!h.done;)u.call(c,h.value,h.value,this),h=f.next()},a}();I3("MapSet",{F:function(a,l){return new o(a,l)},T:function(a,l){return new s(a,l)}})}var Y2,Bf,I1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",UY=typeof Map<"u",WY=typeof Set<"u",X2=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",P1=I1?Symbol.for("immer-nothing"):((Y2={})["immer-nothing"]=!0,Y2),Bd=I1?Symbol.for("immer-draftable"):"__$immer_draftable",sn=I1?Symbol.for("immer-state"):"__$immer_state",up=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",VY=""+Object.prototype.constructor,O1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,qY=Object.getOwnPropertyDescriptors||function(e){var t={};return O1(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Xb={},Jb={get:function(e,t){if(t===sn)return e;var n=lr(e);if(!Df(n,t))return function(i,o,s){var a,l=K2(o,s);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!es(r)?r:r===x0(e.t,t)?(_0(e),e.o[t]=Lf(e.A.h,r,e)):r},has:function(e,t){return t in lr(e)},ownKeys:function(e){return Reflect.ownKeys(lr(e))},set:function(e,t,n){var r=K2(lr(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=x0(lr(e),t),o=i==null?void 0:i[sn];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(DY(n,i)&&(n!==void 0||Df(e.t,t)))return!0;_0(e),vs(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return x0(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,_0(e),vs(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=lr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){yr(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){yr(12)}},vd={};Dl(Jb,function(e,t){vd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),vd.deleteProperty=function(e,t){return vd.set.call(this,e,t,void 0)},vd.set=function(e,t,n){return Jb.set.call(this,e[0],t,n,e[0])};var KY=function(){function e(n){var r=this;this.O=X2,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var l=r;return function(y){var x=this;y===void 0&&(y=a);for(var m=arguments.length,b=Array(m>1?m-1:0),w=1;w<m;w++)b[w-1]=arguments[w];return l.produce(y,function(S){var E;return(E=o).call.apply(E,[x,S].concat(b))})}}var u;if(typeof o!="function"&&yr(6),s!==void 0&&typeof s!="function"&&yr(7),es(i)){var c=V2(r),f=Lf(r,i,void 0),h=!0;try{u=o(f),h=!1}finally{h?im(c):Yb(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(y){return w0(c,s),b0(y,c)},function(y){throw im(c),y}):(w0(c,s),b0(u,c))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===P1&&(u=void 0),r.D&&R1(u,!0),s){var p=[],v=[];Yo("Patches").M(i,u,p,v),s(p,v)}return u}yr(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(p){return i.apply(void 0,[p].concat(f))})};var s,a,l=r.produce(i,o,function(u,c){s=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,s,a]}):[l,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){es(n)||yr(8),Ml(n)&&(n=FY(n));var r=V2(this),i=Lf(this,n,void 0);return i[sn].C=!0,Yb(r),i},t.finishDraft=function(n,r){var i=n&&n[sn],o=i.A;return w0(o,r),b0(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!X2&&yr(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=Yo("Patches").$;return Ml(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Ii=new KY,GY=Ii.produce,J2=Ii.produceWithPatches.bind(Ii);Ii.setAutoFreeze.bind(Ii);Ii.setUseProxies.bind(Ii);var Q2=Ii.applyPatches.bind(Ii);Ii.createDraft.bind(Ii);Ii.finishDraft.bind(Ii);function YY(){this.__data__=[],this.size=0}var XY=YY;function JY(e,t){return e===t||e!==e&&t!==t}var P3=JY,QY=P3;function ZY(e,t){for(var n=e.length;n--;)if(QY(e[n][0],t))return n;return-1}var Ry=ZY,eX=Ry,tX=Array.prototype,nX=tX.splice;function rX(e){var t=this.__data__,n=eX(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():nX.call(t,n,1),--this.size,!0}var iX=rX,oX=Ry;function sX(e){var t=this.__data__,n=oX(t,e);return n<0?void 0:t[n][1]}var aX=sX,lX=Ry;function uX(e){return lX(this.__data__,e)>-1}var cX=uX,dX=Ry;function fX(e,t){var n=this.__data__,r=dX(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var hX=fX,pX=XY,gX=iX,mX=aX,yX=cX,vX=hX;function kc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}kc.prototype.clear=pX;kc.prototype.delete=gX;kc.prototype.get=mX;kc.prototype.has=yX;kc.prototype.set=vX;var Ty=kc,wX=Ty;function bX(){this.__data__=new wX,this.size=0}var xX=bX;function _X(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var SX=_X;function EX(e){return this.__data__.get(e)}var kX=EX;function CX(e){return this.__data__.has(e)}var jX=CX,AX=typeof Hi=="object"&&Hi&&Hi.Object===Object&&Hi,O3=AX,NX=O3,RX=typeof self=="object"&&self&&self.Object===Object&&self,TX=NX||RX||Function("return this")(),is=TX,IX=is,PX=IX.Symbol,Iy=PX,Z2=Iy,$3=Object.prototype,OX=$3.hasOwnProperty,$X=$3.toString,td=Z2?Z2.toStringTag:void 0;function MX(e){var t=OX.call(e,td),n=e[td];try{e[td]=void 0;var r=!0}catch(o){}var i=$X.call(e);return r&&(t?e[td]=n:delete e[td]),i}var DX=MX,LX=Object.prototype,BX=LX.toString;function FX(e){return BX.call(e)}var zX=FX,eC=Iy,HX=DX,UX=zX,WX="[object Null]",VX="[object Undefined]",tC=eC?eC.toStringTag:void 0;function qX(e){return e==null?e===void 0?VX:WX:tC&&tC in Object(e)?HX(e):UX(e)}var Py=qX;function KX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var M3=KX,GX=Py,YX=M3,XX="[object AsyncFunction]",JX="[object Function]",QX="[object GeneratorFunction]",ZX="[object Proxy]";function eJ(e){if(!YX(e))return!1;var t=GX(e);return t==JX||t==QX||t==XX||t==ZX}var $1=eJ;const tJ=zs($1);var nJ=is,rJ=nJ["__core-js_shared__"],iJ=rJ,S0=iJ,nC=function(){var e=/[^.]+$/.exec(S0&&S0.keys&&S0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function oJ(e){return!!nC&&nC in e}var sJ=oJ,aJ=Function.prototype,lJ=aJ.toString;function uJ(e){if(e!=null){try{return lJ.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var D3=uJ,cJ=$1,dJ=sJ,fJ=M3,hJ=D3,pJ=/[\\^$.*+?()[\]{}|]/g,gJ=/^\[object .+?Constructor\]$/,mJ=Function.prototype,yJ=Object.prototype,vJ=mJ.toString,wJ=yJ.hasOwnProperty,bJ=RegExp("^"+vJ.call(wJ).replace(pJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xJ(e){if(!fJ(e)||dJ(e))return!1;var t=cJ(e)?bJ:gJ;return t.test(hJ(e))}var _J=xJ;function SJ(e,t){return e==null?void 0:e[t]}var EJ=SJ,kJ=_J,CJ=EJ;function jJ(e,t){var n=CJ(e,t);return kJ(n)?n:void 0}var ql=jJ,AJ=ql,NJ=is,RJ=AJ(NJ,"Map"),M1=RJ,TJ=ql,IJ=TJ(Object,"create"),Oy=IJ,rC=Oy;function PJ(){this.__data__=rC?rC(null):{},this.size=0}var OJ=PJ;function $J(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var MJ=$J,DJ=Oy,LJ="__lodash_hash_undefined__",BJ=Object.prototype,FJ=BJ.hasOwnProperty;function zJ(e){var t=this.__data__;if(DJ){var n=t[e];return n===LJ?void 0:n}return FJ.call(t,e)?t[e]:void 0}var HJ=zJ,UJ=Oy,WJ=Object.prototype,VJ=WJ.hasOwnProperty;function qJ(e){var t=this.__data__;return UJ?t[e]!==void 0:VJ.call(t,e)}var KJ=qJ,GJ=Oy,YJ="__lodash_hash_undefined__";function XJ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=GJ&&t===void 0?YJ:t,this}var JJ=XJ,QJ=OJ,ZJ=MJ,eQ=HJ,tQ=KJ,nQ=JJ;function Cc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cc.prototype.clear=QJ;Cc.prototype.delete=ZJ;Cc.prototype.get=eQ;Cc.prototype.has=tQ;Cc.prototype.set=nQ;var rQ=Cc,iC=rQ,iQ=Ty,oQ=M1;function sQ(){this.size=0,this.__data__={hash:new iC,map:new(oQ||iQ),string:new iC}}var aQ=sQ;function lQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var uQ=lQ,cQ=uQ;function dQ(e,t){var n=e.__data__;return cQ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var $y=dQ,fQ=$y;function hQ(e){var t=fQ(this,e).delete(e);return this.size-=t?1:0,t}var pQ=hQ,gQ=$y;function mQ(e){return gQ(this,e).get(e)}var yQ=mQ,vQ=$y;function wQ(e){return vQ(this,e).has(e)}var bQ=wQ,xQ=$y;function _Q(e,t){var n=xQ(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var SQ=_Q,EQ=aQ,kQ=pQ,CQ=yQ,jQ=bQ,AQ=SQ;function jc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jc.prototype.clear=EQ;jc.prototype.delete=kQ;jc.prototype.get=CQ;jc.prototype.has=jQ;jc.prototype.set=AQ;var L3=jc,NQ=Ty,RQ=M1,TQ=L3,IQ=200;function PQ(e,t){var n=this.__data__;if(n instanceof NQ){var r=n.__data__;if(!RQ||r.length<IQ-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new TQ(r)}return n.set(e,t),this.size=n.size,this}var OQ=PQ,$Q=Ty,MQ=xX,DQ=SX,LQ=kX,BQ=jX,FQ=OQ;function Ac(e){var t=this.__data__=new $Q(e);this.size=t.size}Ac.prototype.clear=MQ;Ac.prototype.delete=DQ;Ac.prototype.get=LQ;Ac.prototype.has=BQ;Ac.prototype.set=FQ;var zQ=Ac,HQ="__lodash_hash_undefined__";function UQ(e){return this.__data__.set(e,HQ),this}var WQ=UQ;function VQ(e){return this.__data__.has(e)}var qQ=VQ,KQ=L3,GQ=WQ,YQ=qQ;function am(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new KQ;++t<n;)this.add(e[t])}am.prototype.add=am.prototype.push=GQ;am.prototype.has=YQ;var XQ=am;function JQ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var QQ=JQ;function ZQ(e,t){return e.has(t)}var eZ=ZQ,tZ=XQ,nZ=QQ,rZ=eZ,iZ=1,oZ=2;function sZ(e,t,n,r,i,o){var s=n&iZ,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var f=-1,h=!0,p=n&oZ?new tZ:void 0;for(o.set(e,t),o.set(t,e);++f<a;){var v=e[f],y=t[f];if(r)var x=s?r(y,v,f,t,e,o):r(v,y,f,e,t,o);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!nZ(t,function(m,b){if(!rZ(p,b)&&(v===m||i(v,m,n,r,o)))return p.push(b)})){h=!1;break}}else if(!(v===y||i(v,y,n,r,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var B3=sZ,aZ=is,lZ=aZ.Uint8Array,uZ=lZ;function cZ(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var dZ=cZ;function fZ(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var hZ=fZ,oC=Iy,sC=uZ,pZ=P3,gZ=B3,mZ=dZ,yZ=hZ,vZ=1,wZ=2,bZ="[object Boolean]",xZ="[object Date]",_Z="[object Error]",SZ="[object Map]",EZ="[object Number]",kZ="[object RegExp]",CZ="[object Set]",jZ="[object String]",AZ="[object Symbol]",NZ="[object ArrayBuffer]",RZ="[object DataView]",aC=oC?oC.prototype:void 0,E0=aC?aC.valueOf:void 0;function TZ(e,t,n,r,i,o,s){switch(n){case RZ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case NZ:return!(e.byteLength!=t.byteLength||!o(new sC(e),new sC(t)));case bZ:case xZ:case EZ:return pZ(+e,+t);case _Z:return e.name==t.name&&e.message==t.message;case kZ:case jZ:return e==t+"";case SZ:var a=mZ;case CZ:var l=r&vZ;if(a||(a=yZ),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=wZ,s.set(e,t);var c=gZ(a(e),a(t),r,i,o,s);return s.delete(e),c;case AZ:if(E0)return E0.call(e)==E0.call(t)}return!1}var IZ=TZ;function PZ(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var OZ=PZ,$Z=Array.isArray,D1=$Z,MZ=OZ,DZ=D1;function LZ(e,t,n){var r=t(e);return DZ(e)?r:MZ(r,n(e))}var BZ=LZ;function FZ(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}var zZ=FZ;function HZ(){return[]}var UZ=HZ,WZ=zZ,VZ=UZ,qZ=Object.prototype,KZ=qZ.propertyIsEnumerable,lC=Object.getOwnPropertySymbols,GZ=lC?function(e){return e==null?[]:(e=Object(e),WZ(lC(e),function(t){return KZ.call(e,t)}))}:VZ,YZ=GZ;function XZ(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var JZ=XZ;function QZ(e){return e!=null&&typeof e=="object"}var My=QZ,ZZ=Py,eee=My,tee="[object Arguments]";function nee(e){return eee(e)&&ZZ(e)==tee}var ree=nee,uC=ree,iee=My,F3=Object.prototype,oee=F3.hasOwnProperty,see=F3.propertyIsEnumerable,aee=uC(function(){return arguments}())?uC:function(e){return iee(e)&&oee.call(e,"callee")&&!see.call(e,"callee")},lee=aee,lm={exports:{}};function uee(){return!1}var cee=uee;lm.exports;(function(e,t){var n=is,r=cee,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;e.exports=u})(lm,lm.exports);var z3=lm.exports,dee=9007199254740991,fee=/^(?:0|[1-9]\d*)$/;function hee(e,t){var n=typeof e;return t=t==null?dee:t,!!t&&(n=="number"||n!="symbol"&&fee.test(e))&&e>-1&&e%1==0&&e<t}var pee=hee,gee=9007199254740991;function mee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=gee}var H3=mee,yee=Py,vee=H3,wee=My,bee="[object Arguments]",xee="[object Array]",_ee="[object Boolean]",See="[object Date]",Eee="[object Error]",kee="[object Function]",Cee="[object Map]",jee="[object Number]",Aee="[object Object]",Nee="[object RegExp]",Ree="[object Set]",Tee="[object String]",Iee="[object WeakMap]",Pee="[object ArrayBuffer]",Oee="[object DataView]",$ee="[object Float32Array]",Mee="[object Float64Array]",Dee="[object Int8Array]",Lee="[object Int16Array]",Bee="[object Int32Array]",Fee="[object Uint8Array]",zee="[object Uint8ClampedArray]",Hee="[object Uint16Array]",Uee="[object Uint32Array]",vn={};vn[$ee]=vn[Mee]=vn[Dee]=vn[Lee]=vn[Bee]=vn[Fee]=vn[zee]=vn[Hee]=vn[Uee]=!0;vn[bee]=vn[xee]=vn[Pee]=vn[_ee]=vn[Oee]=vn[See]=vn[Eee]=vn[kee]=vn[Cee]=vn[jee]=vn[Aee]=vn[Nee]=vn[Ree]=vn[Tee]=vn[Iee]=!1;function Wee(e){return wee(e)&&vee(e.length)&&!!vn[yee(e)]}var Vee=Wee;function qee(e){return function(t){return e(t)}}var Kee=qee,um={exports:{}};um.exports;(function(e,t){var n=O3,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch(u){}}();e.exports=a})(um,um.exports);var L1=um.exports,Gee=Vee,Yee=Kee,cC=L1,dC=cC&&cC.isTypedArray,Xee=dC?Yee(dC):Gee,U3=Xee,Jee=JZ,Qee=lee,Zee=D1,ete=z3,tte=pee,nte=U3,rte=Object.prototype,ite=rte.hasOwnProperty;function ote(e,t){var n=Zee(e),r=!n&&Qee(e),i=!n&&!r&&ete(e),o=!n&&!r&&!i&&nte(e),s=n||r||i||o,a=s?Jee(e.length,String):[],l=a.length;for(var u in e)(t||ite.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||tte(u,l)))&&a.push(u);return a}var ste=ote,ate=Object.prototype;function lte(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ate;return e===n}var ute=lte;function cte(e,t){return function(n){return e(t(n))}}var dte=cte,fte=dte,hte=fte(Object.keys,Object),pte=hte,gte=ute,mte=pte,yte=Object.prototype,vte=yte.hasOwnProperty;function wte(e){if(!gte(e))return mte(e);var t=[];for(var n in Object(e))vte.call(e,n)&&n!="constructor"&&t.push(n);return t}var bte=wte,xte=$1,_te=H3;function Ste(e){return e!=null&&_te(e.length)&&!xte(e)}var Ete=Ste,kte=ste,Cte=bte,jte=Ete;function Ate(e){return jte(e)?kte(e):Cte(e)}var Nte=Ate,Rte=BZ,Tte=YZ,Ite=Nte;function Pte(e){return Rte(e,Ite,Tte)}var Ote=Pte,fC=Ote,$te=1,Mte=Object.prototype,Dte=Mte.hasOwnProperty;function Lte(e,t,n,r,i,o){var s=n&$te,a=fC(e),l=a.length,u=fC(t),c=u.length;if(l!=c&&!s)return!1;for(var f=l;f--;){var h=a[f];if(!(s?h in t:Dte.call(t,h)))return!1}var p=o.get(e),v=o.get(t);if(p&&v)return p==t&&v==e;var y=!0;o.set(e,t),o.set(t,e);for(var x=s;++f<l;){h=a[f];var m=e[h],b=t[h];if(r)var w=s?r(b,m,h,t,e,o):r(m,b,h,e,t,o);if(!(w===void 0?m===b||i(m,b,n,r,o):w)){y=!1;break}x||(x=h=="constructor")}if(y&&!x){var S=e.constructor,E=t.constructor;S!=E&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof E=="function"&&E instanceof E)&&(y=!1)}return o.delete(e),o.delete(t),y}var Bte=Lte,Fte=ql,zte=is,Hte=Fte(zte,"DataView"),Ute=Hte,Wte=ql,Vte=is,qte=Wte(Vte,"Promise"),Kte=qte,Gte=ql,Yte=is,Xte=Gte(Yte,"Set"),Jte=Xte,Qte=ql,Zte=is,ene=Qte(Zte,"WeakMap"),tne=ene,Qb=Ute,Zb=M1,ex=Kte,tx=Jte,nx=tne,W3=Py,Nc=D3,hC="[object Map]",nne="[object Object]",pC="[object Promise]",gC="[object Set]",mC="[object WeakMap]",yC="[object DataView]",rne=Nc(Qb),ine=Nc(Zb),one=Nc(ex),sne=Nc(tx),ane=Nc(nx),ol=W3;(Qb&&ol(new Qb(new ArrayBuffer(1)))!=yC||Zb&&ol(new Zb)!=hC||ex&&ol(ex.resolve())!=pC||tx&&ol(new tx)!=gC||nx&&ol(new nx)!=mC)&&(ol=function(e){var t=W3(e),n=t==nne?e.constructor:void 0,r=n?Nc(n):"";if(r)switch(r){case rne:return yC;case ine:return hC;case one:return pC;case sne:return gC;case ane:return mC}return t});var lne=ol,k0=zQ,une=B3,cne=IZ,dne=Bte,vC=lne,wC=D1,bC=z3,fne=U3,hne=1,xC="[object Arguments]",_C="[object Array]",cp="[object Object]",pne=Object.prototype,SC=pne.hasOwnProperty;function gne(e,t,n,r,i,o){var s=wC(e),a=wC(t),l=s?_C:vC(e),u=a?_C:vC(t);l=l==xC?cp:l,u=u==xC?cp:u;var c=l==cp,f=u==cp,h=l==u;if(h&&bC(e)){if(!bC(t))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new k0),s||fne(e)?une(e,t,n,r,i,o):cne(e,t,l,n,r,i,o);if(!(n&hne)){var p=c&&SC.call(e,"__wrapped__"),v=f&&SC.call(t,"__wrapped__");if(p||v){var y=p?e.value():e,x=v?t.value():t;return o||(o=new k0),i(y,x,n,r,o)}}return h?(o||(o=new k0),dne(e,t,n,r,i,o)):!1}var mne=gne,yne=mne,EC=My;function V3(e,t,n,r,i){return e===t?!0:e==null||t==null||!EC(e)&&!EC(t)?e!==e&&t!==t:yne(e,t,n,r,V3,i)}var vne=V3,wne=vne;function bne(e,t,n){n=typeof n=="function"?n:void 0;var r=n?n(e,t):void 0;return r===void 0?wne(e,t,void 0,n):!!r}var xne=bne;const _ne=zs(xne);var Sne=function(t,n,r,i){var o=r?r.call(i,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<s.length;u++){var c=s[u];if(!l(c))return!1;var f=t[c],h=n[c];if(o=r?r.call(i,f,h,c):void 0,o===!1||o===void 0&&f!==h)return!1}return!0};const Ene=zs(Sne);let kne=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var Cne="Invariant failed";function pn(e,t){if(!e)throw new Error(Cne)}typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/utils"]="0.2.5");var Ns="ROOT",q3="canvas-ROOT",jne="Attempting to add a node with duplicated id",Ane="Node cannot be dropped into target parent",Nne="Target parent rejects incoming node",Rne="Current parent rejects outgoing node",kC="Cannot move node that is not a direct child of a Canvas node",Tne="Cannot move node into a non-Canvas parent",CC="A top-level Node cannot be moved",Ine="Cannot move node into a descendant",K3="The component type specified for this node (%node_type%) does not exist in the resolver",Pne="The node has specified a canDrag() rule that prevents it from being dragged",One="An Error occurred while deserializing components: Cannot find component <%displayName% /> in resolver map. Please check your resolver in <Editor />\n\nAvailable components in resolver: %availableComponents%\n\nMore info: https://craft.js.org/r/docs/api/editor#props";function jC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(n),!0).forEach(function(r){nr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q3(r.key),r)}}function Tc(e,t,n){return t&&$ne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nr(e,t,n){return(t=Q3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bu(e){return Bu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bu(e)}function rx(e,t){return rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},rx(e,t)}function C0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ix(){return ix=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(o,s){for(;!Object.prototype.hasOwnProperty.call(o,s)&&(o=Bu(o))!==null;);return o}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ix.apply(this,arguments)}function G3(e,t){return Y3(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],c=!0,f=!1;try{if(a=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;c=!1}else for(;!(c=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);c=!0);}catch(h){f=!0,s=h}finally{try{if(!c&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}(e,t)||B1(e,t)||J3()}function Yr(e){return function(t){if(Array.isArray(t))return ox(t)}(e)||X3(e)||B1(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y3(e){if(Array.isArray(e))return e}function X3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B1(e,t){if(e){if(typeof e=="string")return ox(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ox(e,t):void 0}}function ox(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J3(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Q3(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}var On={UNDO:"HISTORY_UNDO",REDO:"HISTORY_REDO",THROTTLE:"HISTORY_THROTTLE",IGNORE:"HISTORY_IGNORE",MERGE:"HISTORY_MERGE",CLEAR:"HISTORY_CLEAR"},Mne=function(){function e(){Rc(this,e),nr(this,"timeline",[]),nr(this,"pointer",-1)}return Tc(e,[{key:"add",value:function(t,n){t.length===0&&n.length===0||(this.pointer=this.pointer+1,this.timeline.length=this.pointer,this.timeline[this.pointer]={patches:t,inversePatches:n,timestamp:Date.now()})}},{key:"throttleAdd",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:500;if(t.length!==0||n.length!==0){if(this.timeline.length&&this.pointer>=0){var i=this.timeline[this.pointer],o=i.patches,s=i.inversePatches,a=i.timestamp;if(new Date().getTime()-a<r)return void(this.timeline[this.pointer]={timestamp:a,patches:[].concat(Yr(o),Yr(t)),inversePatches:[].concat(Yr(n),Yr(s))})}this.add(t,n)}}},{key:"merge",value:function(t,n){if(t.length!==0||n.length!==0)if(this.timeline.length&&this.pointer>=0){var r=this.timeline[this.pointer],i=r.inversePatches;this.timeline[this.pointer]={timestamp:r.timestamp,patches:[].concat(Yr(r.patches),Yr(t)),inversePatches:[].concat(Yr(n),Yr(i))}}else this.add(t,n)}},{key:"clear",value:function(){this.timeline=[],this.pointer=-1}},{key:"canUndo",value:function(){return this.pointer>=0}},{key:"canRedo",value:function(){return this.pointer<this.timeline.length-1}},{key:"undo",value:function(t){if(this.canUndo()){var n=this.timeline[this.pointer].inversePatches;return this.pointer=this.pointer-1,Q2(t,n)}}},{key:"redo",value:function(t){if(this.canRedo())return this.pointer=this.pointer+1,Q2(t,this.timeline[this.pointer].patches)}}]),e}();function Dne(e,t,n,r){var i,o=j.useMemo(function(){return new Mne},[]),s=j.useRef([]),a=j.useRef(function(){});typeof e=="function"?i=e:(i=e.methods,s.current=e.ignoreHistoryForActions,a.current=e.normalizeHistory);var l=j.useRef(r);l.current=r;var u=j.useRef(t),c=j.useMemo(function(){var x=a.current,m=s.current,b=l.current;return function(w,S){var E,A=n&&AC(n,function(){return w},o),T=G3(J2(w,function(H){var ee,W;switch(S.type){case On.UNDO:return o.undo(H);case On.REDO:return o.redo(H);case On.CLEAR:return o.clear(),zi({},H);case On.IGNORE:case On.MERGE:case On.THROTTLE:var L,q=Y3(W=S.payload)||X3(W)||B1(W)||J3(),Y=q[0],re=q.slice(1);(L=i(H,A))[Y].apply(L,Yr(re));break;default:(ee=i(H,A))[S.type].apply(ee,Yr(S.payload))}}),3),P=T[0],V=T[1],M=T[2];return E=P,b&&b(P,w,{type:S.type,params:S.payload,patches:V},A,function(H){var ee=J2(P,H);E=ee[0],V=[].concat(Yr(V),Yr(ee[1])),M=[].concat(Yr(ee[2]),Yr(M))}),[On.UNDO,On.REDO].includes(S.type)&&x&&(E=GY(E,x)),[].concat(Yr(m),[On.UNDO,On.REDO,On.IGNORE,On.CLEAR]).includes(S.type)||(S.type===On.THROTTLE?o.throttleAdd(V,M,S.config&&S.config.rate):S.type===On.MERGE?o.merge(V,M):o.add(V,M)),E}},[o,i,n]),f=j.useCallback(function(){return u.current},[]),h=j.useMemo(function(){return new Lne(f)},[f]),p=j.useCallback(function(x){var m=c(u.current,x);u.current=m,h.notify()},[c,h]);j.useEffect(function(){h.notify()},[h]);var v=j.useMemo(function(){return n?AC(n,function(){return u.current},o):[]},[o,n]),y=j.useMemo(function(){var x=Object.keys(i(null,null)),m=s.current;return zi(zi({},x.reduce(function(b,w){return b[w]=function(){for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return p({type:w,payload:E})},b},{})),{},{history:{undo:function(){return p({type:On.UNDO})},redo:function(){return p({type:On.REDO})},clear:function(){return p({type:On.CLEAR})},throttle:function(b){return zi({},x.filter(function(w){return!m.includes(w)}).reduce(function(w,S){return w[S]=function(){for(var E=arguments.length,A=new Array(E),T=0;T<E;T++)A[T]=arguments[T];return p({type:On.THROTTLE,payload:[S].concat(A),config:{rate:b}})},w},{}))},ignore:function(){return zi({},x.filter(function(b){return!m.includes(b)}).reduce(function(b,w){return b[w]=function(){for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return p({type:On.IGNORE,payload:[w].concat(E)})},b},{}))},merge:function(){return zi({},x.filter(function(b){return!m.includes(b)}).reduce(function(b,w){return b[w]=function(){for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return p({type:On.MERGE,payload:[w].concat(E)})},b},{}))}}})},[p,i]);return j.useMemo(function(){return{getState:f,subscribe:function(x,m,b){return h.subscribe(x,m,b)},actions:y,query:v,history:o}},[y,v,h,f,o])}function AC(e,t,n){var r=Object.keys(e()).reduce(function(i,o){return zi(zi({},i),{},nr({},o,function(){var s;return(s=e(t()))[o].apply(s,arguments)}))},{});return zi(zi({},r),{},{history:{canUndo:function(){return n.canUndo()},canRedo:function(){return n.canRedo()}}})}HY(),zY();var Lne=function(){function e(t){Rc(this,e),nr(this,"getState",void 0),nr(this,"subscribers",[]),this.getState=t}return Tc(e,[{key:"subscribe",value:function(t,n,r){var i=this,o=new Bne(function(){return t(i.getState())},n,r);return this.subscribers.push(o),this.unsubscribe.bind(this,o)}},{key:"unsubscribe",value:function(t){if(this.subscribers.length){var n=this.subscribers.indexOf(t);if(n>-1)return this.subscribers.splice(n,1)}}},{key:"notify",value:function(){this.subscribers.forEach(function(t){return t.collect()})}}]),e}(),Bne=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];Rc(this,e),nr(this,"collected",void 0),nr(this,"collector",void 0),nr(this,"onChange",void 0),nr(this,"id",void 0),this.collector=t,this.onChange=n,r&&this.collect()}return Tc(e,[{key:"collect",value:function(){try{var t=this.collector();_ne(t,this.collected)||(this.collected=t,this.onChange&&this.onChange(this.collected))}catch(n){console.warn(n)}}}]),e}(),Ff=function(e){var t=e.getBoundingClientRect(),n=t.x,r=t.y,i=t.top,o=t.left,s=t.bottom,a=t.right,l=t.width,u=t.height,c=window.getComputedStyle(e),f={left:parseInt(c.marginLeft),right:parseInt(c.marginRight),bottom:parseInt(c.marginBottom),top:parseInt(c.marginTop)},h={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight),bottom:parseInt(c.paddingBottom),top:parseInt(c.paddingTop)};return{x:n,y:r,top:i,left:o,bottom:s,right:a,width:l,height:u,outerWidth:Math.round(l+f.left+f.right),outerHeight:Math.round(u+f.top+f.bottom),margin:f,padding:h,inFlow:e.parentElement&&!!function(p){var v=getComputedStyle(p);if(!(c.overflow&&c.overflow!=="visible"||v.float!=="none"||v.display==="grid"||v.display==="flex"&&v["flex-direction"]!=="column")){switch(c.position){case"static":case"relative":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(c.display){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}(e.parentElement)}};function Fne(e,t){const{subscribe:n,getState:r,actions:i,query:o}=e,s=j.useRef(!0),a=j.useRef(null),l=j.useRef(t);l.current=t;const u=j.useCallback(h=>({...h,actions:i,query:o}),[i,o]);s.current&&t&&(a.current=t(r(),o),s.current=!1);const[c,f]=j.useState(u(a.current));return j.useEffect(()=>{let h;return l.current&&(h=n(p=>l.current(p,o),p=>{f(u(p))})),()=>{h&&h()}},[u,o,n]),c}var lc,Z3=function(){return kne(arguments.length>0&&arguments[0]!==void 0?arguments[0]:10)},zne=function(){function e(){Rc(this,e),nr(this,"isEnabled",!0),nr(this,"elementIdMap",new WeakMap),nr(this,"registry",new Map)}return Tc(e,[{key:"getElementId",value:function(t){var n=this.elementIdMap.get(t);if(n)return n;var r=Z3();return this.elementIdMap.set(t,r),r}},{key:"getConnectorId",value:function(t,n){var r=this.getElementId(t);return"".concat(n,"--").concat(r)}},{key:"register",value:function(t,n){var r=this,i=this.getByElement(t,n.name);if(i){if(Ene(n.required,i.required))return i;this.getByElement(t,n.name).disable()}var o=null,s=this.getConnectorId(t,n.name);return this.registry.set(s,{id:s,required:n.required,enable:function(){o&&o(),o=n.connector(t,n.required,n.options)},disable:function(){o&&o()},remove:function(){return r.remove(s)}}),this.isEnabled&&this.registry.get(s).enable(),this.registry.get(s)}},{key:"get",value:function(t){return this.registry.get(t)}},{key:"remove",value:function(t){var n=this.get(t);n&&(n.disable(),this.registry.delete(n.id))}},{key:"enable",value:function(){this.isEnabled=!0,this.registry.forEach(function(t){t.enable()})}},{key:"disable",value:function(){this.isEnabled=!1,this.registry.forEach(function(t){t.disable()})}},{key:"getByElement",value:function(t,n){return this.get(this.getConnectorId(t,n))}},{key:"removeByElement",value:function(t,n){return this.remove(this.getConnectorId(t,n))}},{key:"clear",value:function(){this.disable(),this.elementIdMap=new WeakMap,this.registry=new Map}}]),e}();(function(e){e[e.HandlerDisabled=0]="HandlerDisabled",e[e.HandlerEnabled=1]="HandlerEnabled"})(lc||(lc={}));var eO=function(){function e(t){Rc(this,e),nr(this,"options",void 0),nr(this,"registry",new zne),nr(this,"subscribers",new Set),this.options=t}return Tc(e,[{key:"listen",value:function(t){var n=this;return this.subscribers.add(t),function(){return n.subscribers.delete(t)}}},{key:"disable",value:function(){this.onDisable&&this.onDisable(),this.registry.disable(),this.subscribers.forEach(function(t){t(lc.HandlerDisabled)})}},{key:"enable",value:function(){this.onEnable&&this.onEnable(),this.registry.enable(),this.subscribers.forEach(function(t){t(lc.HandlerEnabled)})}},{key:"cleanup",value:function(){this.disable(),this.subscribers.clear(),this.registry.clear()}},{key:"addCraftEventListener",value:function(t,n,r,i){var o=function(s){(function(a,l,u){a.craft||(a.craft={stopPropagation:function(){},blockedEvents:{}});for(var c=a.craft&&a.craft.blockedEvents[l]||[],f=0;f<c.length;f++){var h=c[f];if(u!==h&&u.contains(h))return!0}return!1})(s,n,t)||(s.craft.stopPropagation=function(){s.craft.blockedEvents[n]||(s.craft.blockedEvents[n]=[]),s.craft.blockedEvents[n].push(t)},r(s))};return t.addEventListener(n,o,i),function(){return t.removeEventListener(n,o,i)}}},{key:"createConnectorsUsage",value:function(){var t=this,n=this.handlers(),r=new Set,i=!1,o=new Map;return{connectors:Object.entries(n).reduce(function(s,a){var l=G3(a,2),u=l[0],c=l[1];return zi(zi({},s),{},nr({},u,function(f,h,p){var v=function(){var y=t.registry.register(f,{required:h,name:u,options:p,connector:c});return r.add(y.id),y};return o.set(t.registry.getConnectorId(f,u),v),i&&v(),f}))},{}),register:function(){i=!0,o.forEach(function(s){s()})},cleanup:function(){i=!1,r.forEach(function(s){return t.registry.remove(s)})}}}},{key:"derive",value:function(t,n){return new t(this,n)}},{key:"createProxyHandlers",value:function(t,n){var r=[],i=t.handlers(),o=new Proxy(i,{get:function(s,a,l){return a in i==0?Reflect.get(s,a,l):function(u){for(var c=arguments.length,f=new Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];var p=i[a].apply(i,[u].concat(f));p&&r.push(p)}}});return n(o),function(){r.forEach(function(s){s()})}}},{key:"reflect",value:function(t){return this.createProxyHandlers(this,t)}}]),e}(),Hne=function(e){(function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&rx(o,s)})(i,eO);var t,n,r=(t=i,n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}(),function(){var o,s=Bu(t);if(n){var a=Bu(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return function(l,u){if(u&&(typeof u=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C0(l)}(this,o)});function i(o,s){var a;return Rc(this,i),nr(C0(a=r.call(this,s)),"derived",void 0),nr(C0(a),"unsubscribeParentHandlerListener",void 0),a.derived=o,a.options=s,a.unsubscribeParentHandlerListener=a.derived.listen(function(l){switch(l){case lc.HandlerEnabled:return a.enable();case lc.HandlerDisabled:return a.disable();default:return}}),a}return Tc(i,[{key:"inherit",value:function(o){return this.createProxyHandlers(this.derived,o)}},{key:"cleanup",value:function(){ix(Bu(i.prototype),"cleanup",this).call(this),this.unsubscribeParentHandlerListener()}}]),i}();function NC(e,t){t&&(typeof e=="function"?e(t):e.current=t)}function Une(e,t){const n=e.ref;return pn(typeof n!="string"),j.cloneElement(e,n?{ref:r=>{NC(n,r),NC(t,r)}}:{ref:t})}function Wne(e){return(t=null,...n)=>{if(!j.isValidElement(t)){if(!t)return;const i=t;return i&&e(i,...n),i}const r=t;return function(i){if(typeof i.type!="string")throw new Error}(r),Une(r,e)}}function tO(e){return Object.keys(e).reduce((t,n)=>(t[n]=Wne((...r)=>e[n](...r)),t),{})}const Vne=({style:e,className:t,parentDom:n})=>{const r=It.createElement("div",{className:t,style:{position:"fixed",display:"block",opacity:1,borderStyle:"solid",borderWidth:"1px",borderColor:"transparent",zIndex:99999,...e}});return n&&n.ownerDocument!==document?rT.createPortal(r,n.ownerDocument.body):r};var Pa=function(e,t){var n="Deprecation warning: ".concat(e," will be deprecated in future relases."),r=t.suggest,i=t.doc;r&&(n+=" Please use ".concat(r," instead.")),i&&(n+="(".concat(i,")")),console.warn(n)},nO=function(){return typeof window<"u"},qne=function(){return nO()&&/Linux/i.test(window.navigator.userAgent)},Kne=function(){return nO()&&/Chrome/i.test(window.navigator.userAgent)},Gne=ql;(function(){try{var e=Gne(Object,"defineProperty");return e({},"",{}),e}catch(t){}})();var cm={exports:{}};cm.exports;(function(e,t){var n=is,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,h=a?a(f):new u.constructor(f);return u.copy(h),h}e.exports=l})(cm,cm.exports);cm.exports;var RC=Iy,TC=RC?RC.prototype:void 0;TC&&TC.valueOf;var IC=L1;IC&&IC.isMap;var PC=L1;PC&&PC.isSet;typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/core"]="0.2.12");const rO=It.createContext(null),iO=({id:e,related:t=!1,children:n})=>It.createElement(rO.Provider,{value:{id:e,related:t}},n);function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(n),!0).forEach(function(r){Qn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sx(e){return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}function Dy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aO(r.key),r)}}function Ly(e,t,n){return t&&Yne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qn(e,t,n){return(t=aO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ax(e,t)}function dm(e){return dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dm(e)}function ax(e,t){return ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ax(e,t)}function z1(e,t){if(e==null)return{};var n,r,i=function(s,a){if(s==null)return{};var l,u,c={},f=Object.keys(s);for(u=0;u<f.length;u++)a.indexOf(l=f[u])>=0||(c[l]=s[l]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=dm(e);if(t){var i=dm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(o,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wd(o)}(this,n)}}function oO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],c=!0,f=!1;try{if(a=(i=i.call(n)).next,r!==0)for(;!(c=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);c=!0);}catch(h){f=!0,s=h}finally{try{if(!c&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}(e,t)||sO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zf(e){return function(t){if(Array.isArray(t))return lx(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||sO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sO(e,t){if(e){if(typeof e=="string")return lx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lx(e,t):void 0}}function lx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aO(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}const U1=j.createContext(null);var lO=j.createContext(null),uO=function(){return j.useContext(lO)};function Kl(e){var t=uO(),n=j.useContext(U1);pn(n);var r=Fne(n,e),i=j.useMemo(function(){return t&&t.createConnectorsUsage()},[t]);j.useEffect(function(){return i.register(),function(){i.cleanup()}},[i]);var o=j.useMemo(function(){return i&&tO(i.connectors)},[i]);return wn(wn({},r),{},{connectors:o,inContext:!!n,store:n})}var Xne=["actions","query","connectors"];function By(e){var t=j.useContext(rO);pn(t);var n=t.id,r=t.related,i=Kl(function(c){return n&&c.nodes[n]&&e&&e(c.nodes[n])}),o=i.actions,s=i.connectors,a=z1(i,Xne),l=j.useMemo(function(){return tO({connect:function(c){return s.connect(c,n)},drag:function(c){return s.drag(c,n)}})},[s,n]),u=j.useMemo(function(){return{setProp:function(c,f){f?o.history.throttle(f).setProp(n,c):o.setProp(n,c)},setCustom:function(c,f){f?o.history.throttle(f).setCustom(n,c):o.setCustom(n,c)},setHidden:function(c){return o.setHidden(n,c)}}},[o,n]);return wn(wn({},a),{},{id:n,related:r,inNodeContext:!!t,actions:u,connectors:l})}var Jne=["id","related","actions","inNodeContext","connectors"];function ei(e){var t=By(e),n=t.id,r=t.related,i=t.actions,o=t.inNodeContext,s=t.connectors;return wn(wn({},z1(t,Jne)),{},{actions:i,id:n,related:r,setProp:function(a,l){return Pa("useNode().setProp()",{suggest:"useNode().actions.setProp()"}),i.setProp(a,l)},inNodeContext:o,connectors:s})}const Qne=({render:e})=>{const{connectors:{connect:t,drag:n}}=ei();return typeof e.type=="string"?t(n(It.cloneElement(e))):e},Zne=()=>{const{type:e,props:t,nodes:n,hydrationTimestamp:r}=By(i=>({type:i.data.type,props:i.data.props,nodes:i.data.nodes,hydrationTimestamp:i._hydrationTimestamp}));return j.useMemo(()=>{let i=t.children;n&&n.length>0&&(i=It.createElement(It.Fragment,null,n.map(s=>It.createElement(W1,{id:s,key:s}))));const o=It.createElement(e,t,i);return typeof e=="string"?It.createElement(Qne,{render:o}):o},[e,t,r,n])},ere=({render:e})=>{const{hidden:t}=By(r=>({hidden:r.data.hidden})),{onRender:n}=Kl(r=>({onRender:r.options.onRender}));return t?null:It.createElement(n,{render:e||It.createElement(Zne,null)})},W1=({id:e,render:t})=>It.createElement(iO,{id:e},It.createElement(ere,{render:t})),ux={is:"div",canvas:!1,custom:{},hidden:!1},tre={is:"type",canvas:"isCanvas"};function Gl({id:e,children:t,...n}){const{is:r}={...ux,...n},{query:i,actions:o}=Kl(),{id:s,inNodeContext:a}=By(),[l]=j.useState(()=>{pn(!!e);const u=i.node(s).get();if(a){const c=u.data.linkedNodes[e]?i.node(u.data.linkedNodes[e]).get():null;if(c&&c.data.type===r)return c.id;const f=It.createElement(Gl,n,t),h=i.parseReactElement(f).toNodeTree();return o.history.ignore().addLinkedNodeFromTree(h,s,e),h.rootNodeId}return null});return l?It.createElement(W1,{id:l}):null}const cO=()=>Pa("<Canvas />",{suggest:"<Element canvas={true} />"});function cx({...e}){return j.useEffect(()=>cO(),[]),It.createElement(Gl,{...e,canvas:!0})}const nre=()=>{const{timestamp:e}=Kl(t=>({timestamp:t.nodes[Ns]&&t.nodes[Ns]._hydrationTimestamp}));return e?It.createElement(W1,{id:Ns,key:e}):null},dO=({children:e,json:t,data:n})=>{const{actions:r,query:i}=Kl();t&&Pa("<Frame json={...} />",{suggest:"<Frame data={...} />"});const o=j.useRef(!1);if(!o.current){const s=n||t;if(s)r.history.ignore().deserialize(s);else if(e){const a=It.Children.only(e),l=i.parseReactElement(a).toNodeTree((u,c)=>(c===a&&(u.id=Ns),u));r.history.ignore().addNodeTree(l)}o.current=!0}return It.createElement(nre,null)};var $C;(function(e){e[e.Any=0]="Any",e[e.Id=1]="Id",e[e.Obj=2]="Obj"})($C||($C={}));const j0=e=>{const{addLinkedNodeFromTree:t,setDOM:n,setNodeEvent:r,replaceNodes:i,reset:o,...s}=e;return s};function Bs(e){const{connectors:t,actions:n,query:r,store:i,...o}=Kl(e),s=j0(n);return{connectors:t,actions:j.useMemo(()=>({...s,history:{...s.history,ignore:(...a)=>j0(s.history.ignore(...a)),throttle:(...a)=>j0(s.history.throttle(...a))}}),[s]),query:r,store:i,...o}}var fO=function(e){return Object.fromEntries?Object.fromEntries(e):e.reduce(function(t,n){var r=oO(n,2),i=r[0],o=r[1];return wn(wn({},t),{},Qn({},i,o))},{})},ws=function(e,t,n){var r=Array.isArray(t)?t:[t],i=wn({existOnly:!1,idOnly:!1},n||{}),o=r.filter(function(s){return!!s}).map(function(s){return typeof s=="string"?{node:e[s],exists:!!e[s]}:sx(s)!=="object"||i.idOnly?{node:null,exists:!1}:{node:s,exists:!!e[s.id]}});return i.existOnly&&pn(o.filter(function(s){return!s.exists}).length===0),o},rre=["history"],ru=null,fm=function(e,t){if(typeof t=="string")return t;var n,r=function(i,o){var s=function(a){if(ru&&ru.resolver===a)return ru.reversed;ru={resolver:a,reversed:new Map};for(var l=0,u=Object.entries(a);l<u.length;l++){var c=oO(u[l],2);ru.reversed.set(c[1],c[0])}return ru.reversed}(i).get(o);return s!==void 0?s:null}(e,t);return pn(r,K3.replace("%node_type%",(n=t).name||n.displayName)),r};const ire=(e,t)=>typeof e=="string"?e:{resolvedName:fm(t,e)},dx=(e,t)=>{let{type:n,isCanvas:r,props:i}=e;return i=Object.keys(i).reduce((o,s)=>{const a=i[s];return a==null||typeof a=="function"||(o[s]=s==="children"&&typeof a!="string"?j.Children.map(a,l=>typeof l=="string"?l:dx(l,t)):typeof a.type=="function"?dx(a,t):a),o},{}),{type:ire(n,t),isCanvas:!!r,props:i}},ore=(e,t)=>{const{type:n,props:r,isCanvas:i,name:o,...s}=e;return{...dx({type:n,isCanvas:i,props:r},t),...s}};function fx(e,t){pn(typeof t=="string");var n=e.nodes[t],r=function(i){return fx(e,i)};return{isCanvas:function(){return!!n.data.isCanvas},isRoot:function(){return n.id===Ns},isLinkedNode:function(){return n.data.parent&&r(n.data.parent).linkedNodes().includes(n.id)},isTopLevelNode:function(){return this.isRoot()||this.isLinkedNode()},isDeletable:function(){return!this.isTopLevelNode()},isParentOfTopLevelNodes:function(){return n.data.linkedNodes&&Object.keys(n.data.linkedNodes).length>0},isParentOfTopLevelCanvas:function(){return Pa("query.node(id).isParentOfTopLevelCanvas",{suggest:"query.node(id).isParentOfTopLevelNodes"}),this.isParentOfTopLevelNodes()},isSelected:function(){return e.events.selected.has(t)},isHovered:function(){return e.events.hovered.has(t)},isDragged:function(){return e.events.dragged.has(t)},get:function(){return n},ancestors:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return function o(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=e.nodes[s];return u?(a.push(s),u.data.parent&&(i||!i&&l===0)&&(a=o(u.data.parent,a,l+1)),a):a}(n.data.parent)},descendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return function s(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(i||!i&&u===0)&&e.nodes[a]&&(o!=="childNodes"&&r(a).linkedNodes().forEach(function(c){l.push(c),l=s(c,l,u+1)}),o!=="linkedNodes"&&r(a).childNodes().forEach(function(c){l.push(c),l=s(c,l,u+1)})),l}(t)},linkedNodes:function(){return Object.values(n.data.linkedNodes||{})},childNodes:function(){return n.data.nodes||[]},isDraggable:function(i){try{var o=n;return pn(!this.isTopLevelNode(),CC),pn(fx(e,o.data.parent).isCanvas(),kC),pn(o.rules.canDrag(o,r),Pne),!0}catch(s){return i&&i(s),!1}},isDroppable:function(i,o){var s=ws(e.nodes,i),a=n;try{pn(this.isCanvas(),Tne),pn(a.rules.canMoveIn(s.map(function(u){return u.node}),a,r),Nne);var l={};return s.forEach(function(u){var c=u.node,f=u.exists;if(pn(c.rules.canDrop(a,c,r),Ane),f){pn(!r(c.id).isTopLevelNode(),CC);var h=r(c.id).descendants(!0);pn(!h.includes(a.id)&&a.id!==c.id,Ine);var p=c.data.parent&&e.nodes[c.data.parent];pn(p.data.isCanvas,kC),pn(p||!p&&!e.nodes[c.id],jne),p.id!==a.id&&(l[p.id]||(l[p.id]=[]),l[p.id].push(c))}}),Object.keys(l).forEach(function(u){var c=e.nodes[u];pn(c.rules.canMoveOut(l[u],c,r),Rne)}),!0}catch(u){return o&&o(u),!1}},toSerializedNode:function(){return ore(n.data,e.options.resolver)},toNodeTree:function(i){var o=[t].concat(zf(this.descendants(!0,i))).reduce(function(s,a){return s[a]=r(a).get(),s},{});return{rootNodeId:t,nodes:o}},decendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return Pa("query.node(id).decendants",{suggest:"query.node(id).descendants"}),this.descendants(i)},isTopLevelCanvas:function(){return!this.isRoot()&&!n.data.parent}}}function hO(e,t,n,r){for(var i={parent:e,index:0,where:"before"},o=0,s=0,a=0,l=0,u=0,c=0,f=0,h=t.length;f<h;f++){var p=t[f];if(c=p.top+p.outerHeight,l=p.left+p.outerWidth/2,u=p.top+p.outerHeight/2,!(s&&p.left>s||a&&u>=a||o&&p.left+p.outerWidth<o))if(i.index=f,p.inFlow){if(r<u){i.where="before";break}i.where="after"}else r<c&&(a=c),n<l?(s=l,i.where="before"):(o=l,i.where="after")}return i}var dp=function(e){return typeof e=="string"?e:e.name};function MC(e,t){var n=e.data.type,r={id:e.id||Z3(),_hydrationTimestamp:Date.now(),data:wn({type:n,name:dp(n),displayName:dp(n),props:{},custom:{},parent:null,isCanvas:!1,hidden:!1,nodes:[],linkedNodes:{}},e.data),info:{},related:{},events:{selected:!1,dragged:!1,hovered:!1},rules:{canDrag:function(){return!0},canDrop:function(){return!0},canMoveIn:function(){return!0},canMoveOut:function(){return!0}},dom:null};if(r.data.type===Gl||r.data.type===cx){var i=wn(wn({},ux),r.data.props);r.data.props=Object.keys(r.data.props).reduce(function(a,l){return Object.keys(ux).includes(l)?r.data[tre[l]||l]=i[l]:a[l]=r.data.props[l],a},{}),r.data.name=dp(n=r.data.type),r.data.displayName=dp(n),r.data.type===cx&&(r.data.isCanvas=!0,cO())}t&&t(r);var o=n.craft;if(o){if(r.data.displayName=o.displayName||o.name||r.data.displayName,r.data.props=wn(wn({},o.props||o.defaultProps||{}),r.data.props),r.data.custom=wn(wn({},o.custom||{}),r.data.custom),o.isCanvas!=null&&(r.data.isCanvas=o.isCanvas),o.rules&&Object.keys(o.rules).forEach(function(a){["canDrag","canDrop","canMoveIn","canMoveOut"].includes(a)&&(r.rules[a]=o.rules[a])}),o.related){var s={id:r.id,related:!0};Object.keys(o.related).forEach(function(a){r.related[a]=function(l){return It.createElement(iO,s,It.createElement(o.related[a],l))}})}o.info&&(r.info=o.info)}return r}const hx=(e,t,n)=>{let{type:r,props:i}=e;const o=((a,l)=>typeof a=="object"&&a.resolvedName?a.resolvedName==="Canvas"?cx:l[a.resolvedName]:typeof a=="string"?a:null)(r,t);if(!o)return;i=Object.keys(i).reduce((a,l)=>{const u=i[l];return a[l]=u==null?null:typeof u=="object"&&u.resolvedName?hx(u,t):l==="children"&&Array.isArray(u)?u.map(c=>typeof c=="string"?c:hx(c,t)):u,a},{});const s={...It.createElement(o,{...i})};return{...s,name:fm(t,s.type)}},sre=(e,t)=>{const{type:n,props:r,...i}=e;pn(n!==void 0&&typeof n=="string"||n!==void 0&&n.resolvedName!==void 0,One.replace("%displayName%",e.displayName).replace("%availableComponents%",Object.keys(t).join(", ")));const{type:o,name:s,props:a}=hx(e,t),{parent:l,custom:u,displayName:c,isCanvas:f,nodes:h,hidden:p}=i;return{type:o,name:s,displayName:c||s,props:a,custom:u||{},isCanvas:!!f,hidden:!!p,parent:l,linkedNodes:i.linkedNodes||i._childCanvas||{},nodes:h||[]}},are=(e,t)=>{if(t.length<1)return{[e.id]:e};const n=t.map(({rootNodeId:i})=>i),r={...e,data:{...e.data,nodes:n}};return t.reduce((i,o)=>{const s=o.nodes[o.rootNodeId];return{...i,...o.nodes,[s.id]:{...s,data:{...s.data,parent:e.id}}}},{[e.id]:r})},lre=(e,t)=>({rootNodeId:e.id,nodes:are(e,t)});function pO(e){const t=e&&e.options,n=()=>pO(e);return{getDropPlaceholder:(r,i,o,s=a=>e.nodes[a.id].dom)=>{const a=e.nodes[i],l=n().node(a.id).isCanvas()?a:e.nodes[a.data.parent];if(!l)return;const u=l.data.nodes||[],c=hO(l,u?u.reduce((p,v)=>{const y=s(e.nodes[v]);if(y){const x={id:v,...Ff(y)};p.push(x)}return p},[]):[],o.x,o.y),f=u.length&&e.nodes[u[c.index]],h={placement:{...c,currentNode:f},error:null};return ws(e.nodes,r).forEach(({node:p,exists:v})=>{v&&n().node(p.id).isDraggable(y=>h.error=y)}),n().node(l.id).isDroppable(r,p=>h.error=p),h},getOptions:()=>t,getNodes:()=>e.nodes,node:r=>fx(e,r),getSerializedNodes(){const r=Object.keys(e.nodes).map(i=>[i,this.node(i).toSerializedNode()]);return fO(r)},getEvent:r=>function(i,o){var s=i.events[o];return{contains:function(a){return s.has(a)},isEmpty:function(){return this.all().length===0},first:function(){return this.all()[0]},last:function(){var a=this.all();return a[a.length-1]},all:function(){return Array.from(s)},size:function(){return this.all().length},at:function(a){return this.all()[a]},raw:function(){return s}}}(e,r),serialize(){return JSON.stringify(this.getSerializedNodes())},parseReactElement:r=>({toNodeTree(i){let o=function(a,l){let u=a;return typeof u=="string"&&(u=It.createElement(j.Fragment,{},u)),MC({data:{type:u.type,props:{...u.props}}},c=>{l&&l(c,u)})}(r,(a,l)=>{const u=fm(e.options.resolver,a.data.type);a.data.displayName=a.data.displayName||u,a.data.name=u,i&&i(a,l)}),s=[];return r.props&&r.props.children&&(s=It.Children.toArray(r.props.children).reduce((a,l)=>(It.isValidElement(l)&&a.push(n().parseReactElement(l).toNodeTree(i)),a),[])),lre(o,s)}}),parseSerializedNode:r=>({toNode(i){const o=sre(r,e.options.resolver);pn(o.type);const s=typeof i=="string"&&i;return s&&Pa("query.parseSerializedNode(...).toNode(id)",{suggest:"query.parseSerializedNode(...).toNode(node => node.id = id)"}),n().parseFreshNode({...s?{id:s}:{},data:o}).toNode(!s&&i)}}),parseFreshNode:r=>({toNode:i=>MC(r,o=>{o.data.parent===q3&&(o.data.parent=Ns);const s=fm(e.options.resolver,o.data.type);pn(s!==null),o.data.displayName=o.data.displayName||s,o.data.name=s,i&&i(o)})}),createNode(r,i){Pa("query.createNode(".concat(r,")"),{suggest:"query.parseReactElement(".concat(r,").toNodeTree()")});const o=this.parseReactElement(r).toNodeTree(),s=o.nodes[o.rootNodeId];return i&&(i.id&&(s.id=i.id),i.data&&(s.data={...s.data,...i.data})),s},getState:()=>e}}var ure=function(e){F1(n,eO);var t=H1(n);function n(){return Dy(this,n),t.apply(this,arguments)}return Ly(n,[{key:"handlers",value:function(){return{connect:function(r,i){},select:function(r,i){},hover:function(r,i){},drag:function(r,i){},drop:function(r,i){},create:function(r,i,o){}}}}]),n}();(function(e){F1(n,Hne);var t=H1(n);function n(){return Dy(this,n),t.apply(this,arguments)}return Ly(n)})();var DC=function(e){e.preventDefault()},px=function(){function e(t,n){Dy(this,e),Qn(this,"store",void 0),Qn(this,"dragTarget",void 0),Qn(this,"currentDropTargetId",void 0),Qn(this,"currentDropTargetCanvasAncestorId",void 0),Qn(this,"currentIndicator",null),Qn(this,"currentTargetId",void 0),Qn(this,"currentTargetChildDimensions",void 0),Qn(this,"dragError",void 0),Qn(this,"draggedNodes",void 0),Qn(this,"onScrollListener",void 0),this.store=t,this.dragTarget=n,this.currentDropTargetId=null,this.currentDropTargetCanvasAncestorId=null,this.currentTargetId=null,this.currentTargetChildDimensions=null,this.currentIndicator=null,this.dragError=null,this.draggedNodes=this.getDraggedNodes(),this.validateDraggedNodes(),this.onScrollListener=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollListener,!0),window.addEventListener("dragover",DC,!1)}return Ly(e,[{key:"cleanup",value:function(){window.removeEventListener("scroll",this.onScrollListener,!0),window.removeEventListener("dragover",DC,!1)}},{key:"onScroll",value:function(t){var n=t.target,r=this.store.query.node(Ns).get();n instanceof Element&&r&&r.dom&&n.contains(r.dom)&&(this.currentTargetChildDimensions=null)}},{key:"getDraggedNodes",value:function(){return ws(this.store.query.getNodes(),this.dragTarget.type==="new"?this.dragTarget.tree.nodes[this.dragTarget.tree.rootNodeId]:this.dragTarget.nodes)}},{key:"validateDraggedNodes",value:function(){var t=this;this.dragTarget.type!=="new"&&this.draggedNodes.forEach(function(n){n.exists&&t.store.query.node(n.node.id).isDraggable(function(r){t.dragError=r})})}},{key:"isNearBorders",value:function(t,n,r){return t.top+e.BORDER_OFFSET>r||t.bottom-e.BORDER_OFFSET<r||t.left+e.BORDER_OFFSET>n||t.right-e.BORDER_OFFSET<n}},{key:"isDiff",value:function(t){return!this.currentIndicator||this.currentIndicator.placement.parent.id!==t.parent.id||this.currentIndicator.placement.index!==t.index||this.currentIndicator.placement.where!==t.where}},{key:"getChildDimensions",value:function(t){var n=this,r=this.currentTargetChildDimensions;return this.currentTargetId===t.id&&r?r:t.data.nodes.reduce(function(i,o){var s=n.store.query.node(o).get().dom;return s&&i.push(wn({id:o},Ff(s))),i},[])}},{key:"getCanvasAncestor",value:function(t){var n=this;if(t===this.currentDropTargetId&&this.currentDropTargetCanvasAncestorId){var r=this.store.query.node(this.currentDropTargetCanvasAncestorId).get();if(r)return r}return function i(o){var s=n.store.query.node(o).get();return s&&s.data.isCanvas?s:s.data.parent?i(s.data.parent):null}(t)}},{key:"computeIndicator",value:function(t,n,r){var i=this.getCanvasAncestor(t);if(i&&(this.currentDropTargetId=t,this.currentDropTargetCanvasAncestorId=i.id,i.data.parent&&this.isNearBorders(Ff(i.dom),n,r)&&!this.store.query.node(i.id).isLinkedNode()&&(i=this.store.query.node(i.data.parent).get()),i)){this.currentTargetChildDimensions=this.getChildDimensions(i),this.currentTargetId=i.id;var o=hO(i,this.currentTargetChildDimensions,n,r);if(this.isDiff(o)){var s=this.dragError;s||this.store.query.node(i.id).isDroppable(this.draggedNodes.map(function(u){return u.node}),function(u){s=u});var a=i.data.nodes[o.index],l=a&&this.store.query.node(a).get();return this.currentIndicator={placement:wn(wn({},o),{},{currentNode:l}),error:s},this.currentIndicator}}}},{key:"getIndicator",value:function(){return this.currentIndicator}}]),e}();Qn(px,"BORDER_OFFSET",10);var LC=function(e,t){if(t.length===1||arguments.length>2&&arguments[2]!==void 0&&arguments[2]){var n=t[0].getBoundingClientRect(),r=n.width,i=n.height,o=t[0].cloneNode(!0);return o.style.position="absolute",o.style.left="-100%",o.style.top="-100%",o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.pointerEvents="none",o.classList.add("drag-shadow"),document.body.appendChild(o),e.dataTransfer.setDragImage(o,0,0),o}var s=document.createElement("div");return s.style.position="absolute",s.style.left="-100%",s.style.top="-100%",s.style.width="100%",s.style.height="100%",s.style.pointerEvents="none",s.classList.add("drag-shadow-container"),t.forEach(function(a){var l=a.getBoundingClientRect(),u=l.width,c=l.height,f=l.top,h=l.left,p=a.cloneNode(!0);p.style.position="absolute",p.style.left="".concat(h,"px"),p.style.top="".concat(f,"px"),p.style.width="".concat(u,"px"),p.style.height="".concat(c,"px"),p.classList.add("drag-shadow"),s.appendChild(p)}),document.body.appendChild(s),e.dataTransfer.setDragImage(s,e.clientX,e.clientY),s},gO=function(e){F1(n,ure);var t=H1(n);function n(){var r;Dy(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Qn(wd(r=t.call.apply(t,[this].concat(o))),"draggedElementShadow",void 0),Qn(wd(r),"dragTarget",void 0),Qn(wd(r),"positioner",null),Qn(wd(r),"currentSelectedElementIds",[]),r}return Ly(n,[{key:"onDisable",value:function(){this.options.store.actions.clearEvents()}},{key:"handlers",value:function(){var r=this,i=this.options.store;return{connect:function(o,s){return i.actions.setDOM(s,o),r.reflect(function(a){a.select(o,s),a.hover(o,s),a.drop(o,s)})},select:function(o,s){var a=r.addCraftEventListener(o,"mousedown",function(u){u.craft.stopPropagation();var c=[];if(s){var f=i.query,h=f.getEvent("selected").all();(r.options.isMultiSelectEnabled(u)||h.includes(s))&&(c=h.filter(function(p){var v=f.node(p).descendants(!0),y=f.node(p).ancestors(!0);return!v.includes(s)&&!y.includes(s)})),c.includes(s)||c.push(s)}i.actions.setNodeEvent("selected",c)}),l=r.addCraftEventListener(o,"click",function(u){u.craft.stopPropagation();var c=i.query.getEvent("selected").all(),f=r.options.isMultiSelectEnabled(u),h=r.currentSelectedElementIds.includes(s),p=zf(c);f&&h?(p.splice(p.indexOf(s),1),i.actions.setNodeEvent("selected",p)):!f&&c.length>1&&i.actions.setNodeEvent("selected",p=[s]),r.currentSelectedElementIds=p});return function(){a(),l()}},hover:function(o,s){var a=r.addCraftEventListener(o,"mouseover",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",s)}),l=null;return r.options.removeHoverOnMouseleave&&(l=r.addCraftEventListener(o,"mouseleave",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",null)})),function(){a(),l&&l()}},drop:function(o,s){var a=r.addCraftEventListener(o,"dragover",function(u){if(u.craft.stopPropagation(),u.preventDefault(),r.positioner){var c=r.positioner.computeIndicator(s,u.clientX,u.clientY);c&&i.actions.setIndicator(c)}}),l=r.addCraftEventListener(o,"dragenter",function(u){u.craft.stopPropagation(),u.preventDefault()});return function(){l(),a()}},drag:function(o,s){if(!i.query.node(s).isDraggable())return function(){};o.setAttribute("draggable","true");var a=r.addCraftEventListener(o,"dragstart",function(u){u.craft.stopPropagation();var c=i.query,f=i.actions,h=c.getEvent("selected").all(),p=r.options.isMultiSelectEnabled(u);r.currentSelectedElementIds.includes(s)||(h=p?[].concat(zf(h),[s]):[s],i.actions.setNodeEvent("selected",h)),f.setNodeEvent("dragged",h);var v=h.map(function(y){return c.node(y).get().dom});r.draggedElementShadow=LC(u,v,n.forceSingleDragShadow),r.dragTarget={type:"existing",nodes:h},r.positioner=new px(r.options.store,r.dragTarget)}),l=r.addCraftEventListener(o,"dragend",function(u){u.craft.stopPropagation(),r.dropElement(function(c,f){c.type!=="new"&&i.actions.move(c.nodes,f.placement.parent.id,f.placement.index+(f.placement.where==="after"?1:0))})});return function(){o.setAttribute("draggable","false"),a(),l()}},create:function(o,s,a){o.setAttribute("draggable","true");var l=r.addCraftEventListener(o,"dragstart",function(c){var f;if(c.craft.stopPropagation(),typeof s=="function"){var h=s();f=It.isValidElement(h)?i.query.parseReactElement(h).toNodeTree():h}else f=i.query.parseReactElement(s).toNodeTree();r.draggedElementShadow=LC(c,[c.currentTarget],n.forceSingleDragShadow),r.dragTarget={type:"new",tree:f},r.positioner=new px(r.options.store,r.dragTarget)}),u=r.addCraftEventListener(o,"dragend",function(c){c.craft.stopPropagation(),r.dropElement(function(f,h){f.type!=="existing"&&(i.actions.addNodeTree(f.tree,h.placement.parent.id,h.placement.index+(h.placement.where==="after"?1:0)),a&&tJ(a.onCreate)&&a.onCreate(f.tree))})});return function(){o.removeAttribute("draggable"),l(),u()}}}}},{key:"dropElement",value:function(r){var i=this.options.store;if(this.positioner){var o=this.draggedElementShadow,s=this.positioner.getIndicator();this.dragTarget&&s&&!s.error&&r(this.dragTarget,s),o&&(o.parentNode.removeChild(o),this.draggedElementShadow=null),this.dragTarget=null,i.actions.setIndicator(null),i.actions.setNodeEvent("dragged",null),this.positioner.cleanup(),this.positioner=null}}}]),n}();function cre(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,i=0,o=0,s=0,a=0,l=e.where;return n?n.inFlow?(s=n.outerWidth,a=r,i=l==="before"?n.top:n.bottom,o=n.left):(s=r,a=n.outerHeight,i=n.top,o=l==="before"?n.left:n.left+n.outerWidth):t&&(i=t.top+t.padding.top,o=t.left+t.padding.left,s=t.outerWidth-t.padding.right-t.padding.left-t.margin.left-t.margin.right,a=r),{top:"".concat(i,"px"),left:"".concat(o,"px"),width:"".concat(s,"px"),height:"".concat(a,"px")}}Qn(gO,"forceSingleDragShadow",Kne()&&qne());const dre=()=>{var i;const{indicator:e,indicatorOptions:t,enabled:n}=Kl(o=>({indicator:o.indicator,indicatorOptions:o.options.indicator,enabled:o.options.enabled})),r=uO();return j.useEffect(()=>{r&&(n?r.enable():r.disable())},[n,r]),e?It.createElement(Vne,{className:t.className,style:{...cre(e.placement,Ff(e.placement.parent.dom),e.placement.currentNode&&Ff(e.placement.currentNode.dom),t.thickness),backgroundColor:e.error?t.error:t.success,transition:t.transition||"0.2s ease-in",...(i=t.style)!=null?i:{}},parentDom:e.placement.parent.dom}):null},fre=({children:e})=>{const t=j.useContext(U1),n=j.useMemo(()=>t.query.getOptions().handlers(t),[t]);return n?It.createElement(lO.Provider,{value:n},It.createElement(dre,null),e):null},BC={nodes:{},events:{dragged:new Set,selected:new Set,hovered:new Set},indicator:null,options:{onNodesChange:()=>null,onRender:({render:e})=>e,onBeforeMoveEnd:()=>null,resolver:{},enabled:!0,indicator:{error:"red",success:"rgb(98, 196, 98)"},handlers:e=>new gO({store:e,removeHoverOnMouseleave:!1,isMultiSelectEnabled:t=>!!t.metaKey}),normalizeNodes:()=>{}}},hre={methods:function(e,t){return wn(wn({},function(n,r){var i=function(a,l,u){if(function h(p,v){var y=a.nodes[p];typeof y.data.type!="string"&&pn(n.options.resolver[y.data.name],K3.replace("%node_type%","".concat(y.data.type.name))),n.nodes[p]=wn(wn({},y),{},{data:wn(wn({},y.data),{},{parent:v})}),y.data.nodes.length>0&&(delete n.nodes[p].data.props.children,y.data.nodes.forEach(function(x){return h(x,y.id)})),Object.values(y.data.linkedNodes).forEach(function(x){return h(x,y.id)})}(a.rootNodeId,l),l||a.rootNodeId!==Ns){var c=o(l);if(u.type!=="child")c.data.linkedNodes[u.id]=a.rootNodeId;else{var f=u.index;f!=null?c.data.nodes.splice(f,0,a.rootNodeId):c.data.nodes.push(a.rootNodeId)}}},o=function(a){pn(a);var l=n.nodes[a];return pn(l),l},s=function a(l){var u=n.nodes[l],c=n.nodes[u.data.parent];if(u.data.nodes&&zf(u.data.nodes).forEach(function(p){return a(p)}),u.data.linkedNodes&&Object.values(u.data.linkedNodes).map(function(p){return a(p)}),c.data.nodes.includes(l)){var f=c.data.nodes;f.splice(f.indexOf(l),1)}else{var h=Object.keys(c.data.linkedNodes).find(function(p){return c.data.linkedNodes[p]===p});h&&delete c.data.linkedNodes[h]}(function(p,v){Object.keys(p.events).forEach(function(y){var x=p.events[y];x&&x.has&&x.has(v)&&(p.events[y]=new Set(Array.from(x).filter(function(m){return v!==m})))})})(n,l),delete n.nodes[l]};return{addLinkedNodeFromTree:function(a,l,u){var c=o(l).data.linkedNodes[u];c&&s(c),i(a,l,{type:"linked",id:u})},add:function(a,l,u){var c=[a];Array.isArray(a)&&(Pa("actions.add(node: Node[])",{suggest:"actions.add(node: Node)"}),c=a),c.forEach(function(f){i({nodes:Qn({},f.id,f),rootNodeId:f.id},l,{type:"child",index:u})})},addNodeTree:function(a,l,u){i(a,l,{type:"child",index:u})},delete:function(a){ws(n.nodes,a,{existOnly:!0,idOnly:!0}).forEach(function(l){var u=l.node;pn(!r.node(u.id).isTopLevelNode()),s(u.id)})},deserialize:function(a){var l=typeof a=="string"?JSON.parse(a):a,u=Object.keys(l).map(function(c){var f=c;return c===q3&&(f=Ns),[f,r.parseSerializedNode(l[c]).toNode(function(h){return h.id=f})]});this.replaceNodes(fO(u))},move:function(a,l,u){var c=ws(n.nodes,a,{existOnly:!0}),f=n.nodes[l],h=new Set;c.forEach(function(p,v){var y=p.node,x=y.id,m=y.data.parent;r.node(l).isDroppable([x],function(S){throw new Error(S)}),n.options.onBeforeMoveEnd(y,f,n.nodes[m]);var b=n.nodes[m].data.nodes;h.add(b);var w=b.indexOf(x);b[w]="$$",f.data.nodes.splice(u+v,0,x),n.nodes[x].data.parent=l}),h.forEach(function(p){var v=p.length;zf(p).reverse().forEach(function(y,x){y==="$$"&&p.splice(v-1-x,1)})})},replaceNodes:function(a){this.clearEvents(),n.nodes=a},clearEvents:function(){this.setNodeEvent("selected",null),this.setNodeEvent("hovered",null),this.setNodeEvent("dragged",null),this.setIndicator(null)},reset:function(){this.clearEvents(),this.replaceNodes({})},setOptions:function(a){a(n.options)},setNodeEvent:function(a,l){if(n.events[a].forEach(function(f){n.nodes[f]&&(n.nodes[f].events[a]=!1)}),n.events[a]=new Set,l){var u=ws(n.nodes,l,{idOnly:!0,existOnly:!0}),c=new Set(u.map(function(f){return f.node.id}));c.forEach(function(f){n.nodes[f].events[a]=!0}),n.events[a]=c}},setCustom:function(a,l){ws(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.custom)})},setDOM:function(a,l){n.nodes[a]&&(n.nodes[a].dom=l)},setIndicator:function(a){a&&(!a.placement.parent.dom||a.placement.currentNode&&!a.placement.currentNode.dom)||(n.indicator=a)},setHidden:function(a,l){n.nodes[a].data.hidden=l},setProp:function(a,l){ws(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.props)})},selectNode:function(a){if(a){var l=ws(n.nodes,a,{idOnly:!0,existOnly:!0});this.setNodeEvent("selected",l.map(function(u){return u.node.id}))}else this.setNodeEvent("selected",null);this.setNodeEvent("hovered",null)}}}(e,t)),{},{setState:function(n){var r=z1(this,rre);n(e,r)}})},ignoreHistoryForActions:["setDOM","setNodeEvent","selectNode","clearEvents","setOptions","setIndicator"],normalizeHistory:e=>{Object.keys(e.events).forEach(t=>{Array.from(e.events[t]||[]).forEach(n=>{e.nodes[n]||e.events[t].delete(n)})}),Object.keys(e.nodes).forEach(t=>{const n=e.nodes[t];Object.keys(n.events).forEach(r=>{n.events[r]&&e.events[r]&&!e.events[r].has(n.id)&&(n.events[r]=!1)})})}},pre=(e,t)=>Dne(hre,{...BC,options:{...BC.options,...e}},pO,t),gre=({children:e,...t})=>{t.resolver!==void 0&&pn(typeof t.resolver=="object"&&!Array.isArray(t.resolver)&&t.resolver!==null);const n=j.useRef(t),r=pre(n.current,(i,o,s,a,l)=>{if(!s)return;const{patches:u,...c}=s;for(let f=0;f<u.length;f++){const{path:h}=u[f],p=h.length>2&&h[0]==="nodes"&&h[2]==="data";if([On.IGNORE,On.THROTTLE].includes(c.type)&&c.params&&(c.type=c.params[0]),["setState","deserialize"].includes(c.type)||p){l(v=>{i.options.normalizeNodes&&i.options.normalizeNodes(v,o,c,a)});break}}});return j.useEffect(()=>{r&&t.enabled!==void 0&&r.query.getOptions().enabled!==t.enabled&&r.actions.setOptions(i=>{i.enabled=t.enabled})},[r,t.enabled]),j.useEffect(()=>{r.subscribe(i=>({json:r.query.serialize()}),()=>{r.query.getOptions().onNodesChange(r.query)})},[r]),r?j.createElement(U1.Provider,{value:r},j.createElement(fre,null,e)):null};function Hf(){const{connectors:{connect:e,drag:t}}=ei();return d.jsx("div",{ref:n=>e(t(n)),style:{height:1,width:"100%",backgroundColor:"white"}})}function mre(e){return d.jsx("div",{style:{height:1,width:"100%",backgroundColor:"white"}})}function yre(){const{actions:{setProp:e}}=ei(t=>({}));return d.jsx("div",{})}Hf.craft={rules:{canDrag:e=>e.data.props.text!=="Drag"},related:{settings:yre}};function vre({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const[o,s]=j.useState(""),[a,l]=j.useState(""),[u,c]=j.useState({nodes:[],edges:[]});return j.useEffect(()=>{e&&(s(e.name),l(e.icon),c(e.blueprint))},[e]),d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:"Edit Button State",onClose:n}),d.jsxs(or,{children:[d.jsx(Kt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:o,onChange:f=>s(f),isValid:!0,errorMessage:"Names must be unique"}),d.jsx("p",{onClick:()=>ln({type:"blueprint",title:"",data:u,onSave:f=>c(f)}),children:"On Click Action"})]}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>{r({name:o,icon:a,blueprint:u}),n()},children:"Update"})]})]})}const Fa=j.forwardRef(({buttons:e,onClick:t,isOpen:n=!1},r)=>d.jsxs("div",{className:"absolute right-6 bottom-6 group",ref:r,children:[d.jsx("div",{className:"".concat(n?"flex":"hidden"," flex-col items-center mb-4 space-y-2"),children:e==null?void 0:e.map(i=>d.jsxs("button",{onClick:i.onClick,type:"button",className:"relative w-[52px] h-[52px] text-neutral-500 bg-white rounded-lg border border-neutral-200 hover:text-neutral-900 dark:border-neutral-600 shadow-sm dark:hover:text-white dark:text-neutral-400 hover:bg-neutral-50 dark:bg-neutral-700 dark:hover:bg-neutral-600 focus:ring-4 focus:ring-neutral-300 focus:outline-none dark:focus:ring-neutral-400",children:[d.jsx("svg",{className:"w-5 h-5 mx-auto","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{d:"M14.419 10.581a3.564 3.564 0 0 0-2.574 1.1l-4.756-2.49a3.54 3.54 0 0 0 .072-.71 3.55 3.55 0 0 0-.043-.428L11.67 6.1a3.56 3.56 0 1 0-.831-2.265c.006.143.02.286.043.428L6.33 6.218a3.573 3.573 0 1 0-.175 4.743l4.756 2.491a3.58 3.58 0 1 0 3.508-2.871Z"})}),d.jsx("span",{className:"absolute block mb-px text-sm font-medium -translate-x-[100%] -translate-y-1/2 -start-3 top-1/2 shadow-black",children:i.name})]},i.name))}),d.jsxs("button",{id:"floating-action-button",onClick:()=>t?t():null,type:"button",className:"flex items-center justify-center text-white bg-brand-700 rounded-lg w-14 h-14 hover:bg-brand-800 dark:bg-brand-600 dark:hover:bg-brand-700",children:[d.jsx("svg",{className:"".concat(!t&&"group-hover:rotate-45 transition-transform"," w-5 h-5"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Open actions menu"})]})]}));function Uf({buttons:e}){const{connectors:{connect:t,drag:n}}=ei();return d.jsx(Fa,{ref:r=>t(n(r)),buttons:e==null?void 0:e.map(r=>({name:r.name,icon:r.icon,onClick:()=>{}})),isOpen:!0})}function wre({blueprint:e,isList:t,buttons:n,state:r,updateState:i}){const o=Ec(),[s,a]=j.useState(!1),l=j.useCallback(()=>{if(t)return a(!s);new Go(e).processBlueprint(o,r,i)},[e,o,r,i,s,t]);return d.jsx(Fa,{isOpen:s,onClick:l,buttons:n==null?void 0:n.map(u=>({name:u.name,icon:u.icon,onClick:()=>new Go(u.blueprint).processBlueprint(o,r,i)}))})}function bre(){const{actions:{setProp:e},isList:t,buttons:n,blueprint:r}=ei(s=>({isList:s.data.props.isList,buttons:s.data.props.buttons,blueprint:s.data.props.blueprint})),[i,o]=j.useState(null);return d.jsxs("div",{children:[d.jsx(Gn,{id:"isList",label:"is List?",checked:t,onChange:s=>e(a=>a.isList=s)}),t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsx("h5",{style:{marginLeft:10},children:"Buttons"}),d.jsx("div",{children:d.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:()=>e(s=>(s.buttons.find(a=>a.name==="new button")||s.buttons.push({name:"new button",icon:"",blueprint:{nodes:Mr(),edges:[]}}),s)),children:[d.jsx("svg",{className:"group-hover:rotate-45 transition-transform w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Icon description"})]})})]}),d.jsx(fh,{}),n.map(s=>d.jsx("p",{onClick:()=>o(s),children:s.name},s.name)),d.jsx(vre,{data:i,isOpen:i!==null,requestClose:()=>o(null),onSave:s=>e(a=>{for(let l=0;l<a.buttons.length;l++)a.buttons[l].name===i.name&&(a.buttons[l]=s);return a}),onDelete:()=>e(s=>s.buttons=s.buttons.filter(a=>a.name!==i.name))})]}):d.jsx("p",{onClick:()=>ln({type:"blueprint",title:"",data:r,onSave:s=>e(a=>a.blueprint=s)}),children:"On Click"})]})}const xre={defaultProps:{isList:!1,buttons:[],blueprint:{nodes:Mr(),edges:[]}},related:{settings:bre}};Uf.craft=xre;const _re=e=>{const t=Ec(),[n,r]=j.useState("default"),i=j.useMemo(()=>{var l;return e.dynamicOptions?(l=new Go(e.optionsBlueprint).processBlueprint(t,e.state,e.updateState))!=null?l:[]:e.options},[t,e.state,e.updateState]),o=j.useCallback(s=>{new Go(e.onChange).processBlueprint({...t,selectedValue:s},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return d.jsxs(dt,{style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,value:n,onChange:s=>{r(s),o(i.find(a=>a.name===s))},children:[d.jsx("option",{disabled:!0,value:"default",children:"Select an option..."}),i.map(s=>d.jsx("option",{value:s.name,children:s.name},s.name))]})},Sre=e=>{const t=Ec(),n=j.useMemo(()=>new Go(e.getValue).processBlueprint(t,e.state,e.updateState),[e.getValue,t,e.state,e.updateState]),r=j.useCallback(i=>{new Go(e.onChange).processBlueprint({...t,"field value":i},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return d.jsx(Kt,{style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,value:n,onChange:i=>r(i),isValid:!0,errorMessage:""})},Ere=({data:e,style:t,state:n,updateState:r})=>d.jsx("div",{style:t,children:d.jsx(R3,{localData:[],children:d.jsx(mO,{node:e.ROOT,data:e,state:n,updateState:r})})}),mO=({node:e,data:t,state:n,updateState:r})=>{const i=typeof e.type=="object"?e.type.resolvedName:e.type,o=e.nodes.map(s=>d.jsx(mO,{node:t[s],data:t,state:n,updateState:r},s));switch(i){case"Container":return d.jsx($Y,{...e.props,state:n,updateState:r,children:o});case"Text":return d.jsx(MY,{...e.props,state:n,updateState:r});case"DesignerDivider":return d.jsx(mre,{...e.props,state:n,updateState:r});case"FAB":return d.jsx(wre,{...e.props,state:n,updateState:r});case"Select":return d.jsx(_re,{...e.props,state:n,updateState:r});case"TextInput":return d.jsx(Sre,{...e.props,state:n,updateState:r});default:return d.jsxs("h1",{children:["No component for type ",i]})}};var yO={exports:{}},A0={exports:{}},N0={exports:{}},R0={},nd={},FC;function kre(){if(FC)return nd;FC=1,nd.byteLength=a,nd.toByteArray=u,nd.fromByteArray=h;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(p){var v=p.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=p.indexOf("=");y===-1&&(y=v);var x=y===v?0:4-y%4;return[y,x]}function a(p){var v=s(p),y=v[0],x=v[1];return(y+x)*3/4-x}function l(p,v,y){return(v+y)*3/4-y}function u(p){var v,y=s(p),x=y[0],m=y[1],b=new n(l(p,x,m)),w=0,S=m>0?x-4:x,E;for(E=0;E<S;E+=4)v=t[p.charCodeAt(E)]<<18|t[p.charCodeAt(E+1)]<<12|t[p.charCodeAt(E+2)]<<6|t[p.charCodeAt(E+3)],b[w++]=v>>16&255,b[w++]=v>>8&255,b[w++]=v&255;return m===2&&(v=t[p.charCodeAt(E)]<<2|t[p.charCodeAt(E+1)]>>4,b[w++]=v&255),m===1&&(v=t[p.charCodeAt(E)]<<10|t[p.charCodeAt(E+1)]<<4|t[p.charCodeAt(E+2)]>>2,b[w++]=v>>8&255,b[w++]=v&255),b}function c(p){return e[p>>18&63]+e[p>>12&63]+e[p>>6&63]+e[p&63]}function f(p,v,y){for(var x,m=[],b=v;b<y;b+=3)x=(p[b]<<16&16711680)+(p[b+1]<<8&65280)+(p[b+2]&255),m.push(c(x));return m.join("")}function h(p){for(var v,y=p.length,x=y%3,m=[],b=16383,w=0,S=y-x;w<S;w+=b)m.push(f(p,w,w+b>S?S:w+b));return x===1?(v=p[y-1],m.push(e[v>>2]+e[v<<4&63]+"==")):x===2&&(v=(p[y-2]<<8)+p[y-1],m.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),m.join("")}return nd}var fp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var zC;function Cre(){return zC||(zC=1,fp.read=function(e,t,n,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=o*256+e[t+f],f+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=s*256+e[t+f],f+=h,c-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(p?-1:1)*s*Math.pow(2,o-r)},fp.write=function(e,t,n,r,i,o){var s,a,l,u=o*8-i-1,c=(1<<u)-1,f=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,v=r?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?t+=h/l:t+=h*Math.pow(2,1-f),t*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*l-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=a&255,p+=v,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=s&255,p+=v,s/=256,u-=8);e[n+p-v]|=y*128}),fp}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var HC;function za(){return HC||(HC=1,function(e){const t=kre(),n=Cre(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const $=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf($,C),$.foo()===42}catch($){return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s($){if($>i)throw new RangeError('The value "'+$+'" is invalid for option "size"');const C=new Uint8Array($);return Object.setPrototypeOf(C,a.prototype),C}function a($,C,N){if(typeof $=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f($)}return l($,C,N)}a.poolSize=8192;function l($,C,N){if(typeof $=="string")return h($,C);if(ArrayBuffer.isView($))return v($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if($e($,ArrayBuffer)||$&&$e($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e($,SharedArrayBuffer)||$&&$e($.buffer,SharedArrayBuffer)))return y($,C,N);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const X=$.valueOf&&$.valueOf();if(X!=null&&X!==$)return a.from(X,C,N);const de=x($);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return a.from($[Symbol.toPrimitive]("string"),C,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}a.from=function($,C,N){return l($,C,N)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function c($,C,N){return u($),$<=0?s($):C!==void 0?typeof N=="string"?s($).fill(C,N):s($).fill(C):s($)}a.alloc=function($,C,N){return c($,C,N)};function f($){return u($),s($<0?0:m($)|0)}a.allocUnsafe=function($){return f($)},a.allocUnsafeSlow=function($){return f($)};function h($,C){if((typeof C!="string"||C==="")&&(C="utf8"),!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const N=w($,C)|0;let X=s(N);const de=X.write($,C);return de!==N&&(X=X.slice(0,de)),X}function p($){const C=$.length<0?0:m($.length)|0,N=s(C);for(let X=0;X<C;X+=1)N[X]=$[X]&255;return N}function v($){if($e($,Uint8Array)){const C=new Uint8Array($);return y(C.buffer,C.byteOffset,C.byteLength)}return p($)}function y($,C,N){if(C<0||$.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<C+(N||0))throw new RangeError('"length" is outside of buffer bounds');let X;return C===void 0&&N===void 0?X=new Uint8Array($):N===void 0?X=new Uint8Array($,C):X=new Uint8Array($,C,N),Object.setPrototypeOf(X,a.prototype),X}function x($){if(a.isBuffer($)){const C=m($.length)|0,N=s(C);return N.length===0||$.copy(N,0,0,C),N}if($.length!==void 0)return typeof $.length!="number"||At($.length)?s(0):p($);if($.type==="Buffer"&&Array.isArray($.data))return p($.data)}function m($){if($>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return $|0}function b($){return+$!=$&&($=0),a.alloc(+$)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,N){if($e(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),$e(N,Uint8Array)&&(N=a.from(N,N.offset,N.byteLength)),!a.isBuffer(C)||!a.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===N)return 0;let X=C.length,de=N.length;for(let je=0,Be=Math.min(X,de);je<Be;++je)if(C[je]!==N[je]){X=C[je],de=N[je];break}return X<de?-1:de<X?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,N){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let X;if(N===void 0)for(N=0,X=0;X<C.length;++X)N+=C[X].length;const de=a.allocUnsafe(N);let je=0;for(X=0;X<C.length;++X){let Be=C[X];if($e(Be,Uint8Array))je+Be.length>de.length?(a.isBuffer(Be)||(Be=a.from(Be)),Be.copy(de,je)):Uint8Array.prototype.set.call(de,Be,je);else if(a.isBuffer(Be))Be.copy(de,je);else throw new TypeError('"list" argument must be an Array of Buffers');je+=Be.length}return de};function w($,C){if(a.isBuffer($))return $.length;if(ArrayBuffer.isView($)||$e($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const N=$.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&N===0)return 0;let de=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return We($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Fe($).length;default:if(de)return X?-1:We($).length;C=(""+C).toLowerCase(),de=!0}}a.byteLength=w;function S($,C,N){let X=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,C>>>=0,N<=C))return"";for($||($="utf8");;)switch($){case"hex":return z(this,C,N);case"utf8":case"utf-8":return L(this,C,N);case"ascii":return re(this,C,N);case"latin1":case"binary":return D(this,C,N);case"base64":return W(this,C,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,C,N);default:if(X)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),X=!0}}a.prototype._isBuffer=!0;function E($,C,N){const X=$[C];$[C]=$[N],$[N]=X}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<C;N+=2)E(this,N,N+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<C;N+=4)E(this,N,N+3),E(this,N+1,N+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<C;N+=8)E(this,N,N+7),E(this,N+1,N+6),E(this,N+2,N+5),E(this,N+3,N+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?L(this,0,C):S.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const N=e.INSPECT_MAX_BYTES;return C=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(C+=" ... "),"<Buffer "+C+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(C,N,X,de,je){if($e(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(N===void 0&&(N=0),X===void 0&&(X=C?C.length:0),de===void 0&&(de=0),je===void 0&&(je=this.length),N<0||X>C.length||de<0||je>this.length)throw new RangeError("out of range index");if(de>=je&&N>=X)return 0;if(de>=je)return-1;if(N>=X)return 1;if(N>>>=0,X>>>=0,de>>>=0,je>>>=0,this===C)return 0;let Be=je-de,Nt=X-N;const Vt=Math.min(Be,Nt),it=this.slice(de,je),Yt=C.slice(N,X);for(let Ot=0;Ot<Vt;++Ot)if(it[Ot]!==Yt[Ot]){Be=it[Ot],Nt=Yt[Ot];break}return Be<Nt?-1:Nt<Be?1:0};function A($,C,N,X,de){if($.length===0)return-1;if(typeof N=="string"?(X=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,At(N)&&(N=de?0:$.length-1),N<0&&(N=$.length+N),N>=$.length){if(de)return-1;N=$.length-1}else if(N<0)if(de)N=0;else return-1;if(typeof C=="string"&&(C=a.from(C,X)),a.isBuffer(C))return C.length===0?-1:T($,C,N,X,de);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call($,C,N):Uint8Array.prototype.lastIndexOf.call($,C,N):T($,[C],N,X,de);throw new TypeError("val must be string, number or Buffer")}function T($,C,N,X,de){let je=1,Be=$.length,Nt=C.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if($.length<2||C.length<2)return-1;je=2,Be/=2,Nt/=2,N/=2}function Vt(Yt,Ot){return je===1?Yt[Ot]:Yt.readUInt16BE(Ot*je)}let it;if(de){let Yt=-1;for(it=N;it<Be;it++)if(Vt($,it)===Vt(C,Yt===-1?0:it-Yt)){if(Yt===-1&&(Yt=it),it-Yt+1===Nt)return Yt*je}else Yt!==-1&&(it-=it-Yt),Yt=-1}else for(N+Nt>Be&&(N=Be-Nt),it=N;it>=0;it--){let Yt=!0;for(let Ot=0;Ot<Nt;Ot++)if(Vt($,it+Ot)!==Vt(C,Ot)){Yt=!1;break}if(Yt)return it}return-1}a.prototype.includes=function(C,N,X){return this.indexOf(C,N,X)!==-1},a.prototype.indexOf=function(C,N,X){return A(this,C,N,X,!0)},a.prototype.lastIndexOf=function(C,N,X){return A(this,C,N,X,!1)};function P($,C,N,X){N=Number(N)||0;const de=$.length-N;X?(X=Number(X),X>de&&(X=de)):X=de;const je=C.length;X>je/2&&(X=je/2);let Be;for(Be=0;Be<X;++Be){const Nt=parseInt(C.substr(Be*2,2),16);if(At(Nt))return Be;$[N+Be]=Nt}return Be}function V($,C,N,X){return qe(We(C,$.length-N),$,N,X)}function M($,C,N,X){return qe(Ke(C),$,N,X)}function H($,C,N,X){return qe(Fe(C),$,N,X)}function ee($,C,N,X){return qe(he(C,$.length-N),$,N,X)}a.prototype.write=function(C,N,X,de){if(N===void 0)de="utf8",X=this.length,N=0;else if(X===void 0&&typeof N=="string")de=N,X=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(X)?(X=X>>>0,de===void 0&&(de="utf8")):(de=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const je=this.length-N;if((X===void 0||X>je)&&(X=je),C.length>0&&(X<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let Be=!1;for(;;)switch(de){case"hex":return P(this,C,N,X);case"utf8":case"utf-8":return V(this,C,N,X);case"ascii":case"latin1":case"binary":return M(this,C,N,X);case"base64":return H(this,C,N,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,C,N,X);default:if(Be)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W($,C,N){return C===0&&N===$.length?t.fromByteArray($):t.fromByteArray($.slice(C,N))}function L($,C,N){N=Math.min($.length,N);const X=[];let de=C;for(;de<N;){const je=$[de];let Be=null,Nt=je>239?4:je>223?3:je>191?2:1;if(de+Nt<=N){let Vt,it,Yt,Ot;switch(Nt){case 1:je<128&&(Be=je);break;case 2:Vt=$[de+1],(Vt&192)===128&&(Ot=(je&31)<<6|Vt&63,Ot>127&&(Be=Ot));break;case 3:Vt=$[de+1],it=$[de+2],(Vt&192)===128&&(it&192)===128&&(Ot=(je&15)<<12|(Vt&63)<<6|it&63,Ot>2047&&(Ot<55296||Ot>57343)&&(Be=Ot));break;case 4:Vt=$[de+1],it=$[de+2],Yt=$[de+3],(Vt&192)===128&&(it&192)===128&&(Yt&192)===128&&(Ot=(je&15)<<18|(Vt&63)<<12|(it&63)<<6|Yt&63,Ot>65535&&Ot<1114112&&(Be=Ot))}}Be===null?(Be=65533,Nt=1):Be>65535&&(Be-=65536,X.push(Be>>>10&1023|55296),Be=56320|Be&1023),X.push(Be),de+=Nt}return Y(X)}const q=4096;function Y($){const C=$.length;if(C<=q)return String.fromCharCode.apply(String,$);let N="",X=0;for(;X<C;)N+=String.fromCharCode.apply(String,$.slice(X,X+=q));return N}function re($,C,N){let X="";N=Math.min($.length,N);for(let de=C;de<N;++de)X+=String.fromCharCode($[de]&127);return X}function D($,C,N){let X="";N=Math.min($.length,N);for(let de=C;de<N;++de)X+=String.fromCharCode($[de]);return X}function z($,C,N){const X=$.length;(!C||C<0)&&(C=0),(!N||N<0||N>X)&&(N=X);let de="";for(let je=C;je<N;++je)de+=fn[$[je]];return de}function O($,C,N){const X=$.slice(C,N);let de="";for(let je=0;je<X.length-1;je+=2)de+=String.fromCharCode(X[je]+X[je+1]*256);return de}a.prototype.slice=function(C,N){const X=this.length;C=~~C,N=N===void 0?X:~~N,C<0?(C+=X,C<0&&(C=0)):C>X&&(C=X),N<0?(N+=X,N<0&&(N=0)):N>X&&(N=X),N<C&&(N=C);const de=this.subarray(C,N);return Object.setPrototypeOf(de,a.prototype),de};function K($,C,N){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+C>N)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,N,X){C=C>>>0,N=N>>>0,X||K(C,N,this.length);let de=this[C],je=1,Be=0;for(;++Be<N&&(je*=256);)de+=this[C+Be]*je;return de},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,N,X){C=C>>>0,N=N>>>0,X||K(C,N,this.length);let de=this[C+--N],je=1;for(;N>0&&(je*=256);)de+=this[C+--N]*je;return de},a.prototype.readUint8=a.prototype.readUInt8=function(C,N){return C=C>>>0,N||K(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,N){return C=C>>>0,N||K(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,N){return C=C>>>0,N||K(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,N){return C=C>>>0,N||K(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,N){return C=C>>>0,N||K(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=Ct(function(C){C=C>>>0,ne(C,"offset");const N=this[C],X=this[C+7];(N===void 0||X===void 0)&&fe(C,this.length-8);const de=N+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,je=this[++C]+this[++C]*2**8+this[++C]*2**16+X*2**24;return BigInt(de)+(BigInt(je)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ct(function(C){C=C>>>0,ne(C,"offset");const N=this[C],X=this[C+7];(N===void 0||X===void 0)&&fe(C,this.length-8);const de=N*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],je=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+X;return(BigInt(de)<<BigInt(32))+BigInt(je)}),a.prototype.readIntLE=function(C,N,X){C=C>>>0,N=N>>>0,X||K(C,N,this.length);let de=this[C],je=1,Be=0;for(;++Be<N&&(je*=256);)de+=this[C+Be]*je;return je*=128,de>=je&&(de-=Math.pow(2,8*N)),de},a.prototype.readIntBE=function(C,N,X){C=C>>>0,N=N>>>0,X||K(C,N,this.length);let de=N,je=1,Be=this[C+--de];for(;de>0&&(je*=256);)Be+=this[C+--de]*je;return je*=128,Be>=je&&(Be-=Math.pow(2,8*N)),Be},a.prototype.readInt8=function(C,N){return C=C>>>0,N||K(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,N){C=C>>>0,N||K(C,2,this.length);const X=this[C]|this[C+1]<<8;return X&32768?X|4294901760:X},a.prototype.readInt16BE=function(C,N){C=C>>>0,N||K(C,2,this.length);const X=this[C+1]|this[C]<<8;return X&32768?X|4294901760:X},a.prototype.readInt32LE=function(C,N){return C=C>>>0,N||K(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,N){return C=C>>>0,N||K(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=Ct(function(C){C=C>>>0,ne(C,"offset");const N=this[C],X=this[C+7];(N===void 0||X===void 0)&&fe(C,this.length-8);const de=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(X<<24);return(BigInt(de)<<BigInt(32))+BigInt(N+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=Ct(function(C){C=C>>>0,ne(C,"offset");const N=this[C],X=this[C+7];(N===void 0||X===void 0)&&fe(C,this.length-8);const de=(N<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(de)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+X)}),a.prototype.readFloatLE=function(C,N){return C=C>>>0,N||K(C,4,this.length),n.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,N){return C=C>>>0,N||K(C,4,this.length),n.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,N){return C=C>>>0,N||K(C,8,this.length),n.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,N){return C=C>>>0,N||K(C,8,this.length),n.read(this,C,!1,52,8)};function se($,C,N,X,de,je){if(!a.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>de||C<je)throw new RangeError('"value" argument is out of bounds');if(N+X>$.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,N,X,de){if(C=+C,N=N>>>0,X=X>>>0,!de){const Nt=Math.pow(2,8*X)-1;se(this,C,N,X,Nt,0)}let je=1,Be=0;for(this[N]=C&255;++Be<X&&(je*=256);)this[N+Be]=C/je&255;return N+X},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,N,X,de){if(C=+C,N=N>>>0,X=X>>>0,!de){const Nt=Math.pow(2,8*X)-1;se(this,C,N,X,Nt,0)}let je=X-1,Be=1;for(this[N+je]=C&255;--je>=0&&(Be*=256);)this[N+je]=C/Be&255;return N+X},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,1,255,0),this[N]=C&255,N+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,2,65535,0),this[N]=C&255,this[N+1]=C>>>8,N+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,2,65535,0),this[N]=C>>>8,this[N+1]=C&255,N+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,4,4294967295,0),this[N+3]=C>>>24,this[N+2]=C>>>16,this[N+1]=C>>>8,this[N]=C&255,N+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,4,4294967295,0),this[N]=C>>>24,this[N+1]=C>>>16,this[N+2]=C>>>8,this[N+3]=C&255,N+4};function ce($,C,N,X,de){ze(C,X,de,$,N,7);let je=Number(C&BigInt(4294967295));$[N++]=je,je=je>>8,$[N++]=je,je=je>>8,$[N++]=je,je=je>>8,$[N++]=je;let Be=Number(C>>BigInt(32)&BigInt(4294967295));return $[N++]=Be,Be=Be>>8,$[N++]=Be,Be=Be>>8,$[N++]=Be,Be=Be>>8,$[N++]=Be,N}function Ce($,C,N,X,de){ze(C,X,de,$,N,7);let je=Number(C&BigInt(4294967295));$[N+7]=je,je=je>>8,$[N+6]=je,je=je>>8,$[N+5]=je,je=je>>8,$[N+4]=je;let Be=Number(C>>BigInt(32)&BigInt(4294967295));return $[N+3]=Be,Be=Be>>8,$[N+2]=Be,Be=Be>>8,$[N+1]=Be,Be=Be>>8,$[N]=Be,N+8}a.prototype.writeBigUInt64LE=Ct(function(C,N=0){return ce(this,C,N,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ct(function(C,N=0){return Ce(this,C,N,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,N,X,de){if(C=+C,N=N>>>0,!de){const Vt=Math.pow(2,8*X-1);se(this,C,N,X,Vt-1,-Vt)}let je=0,Be=1,Nt=0;for(this[N]=C&255;++je<X&&(Be*=256);)C<0&&Nt===0&&this[N+je-1]!==0&&(Nt=1),this[N+je]=(C/Be>>0)-Nt&255;return N+X},a.prototype.writeIntBE=function(C,N,X,de){if(C=+C,N=N>>>0,!de){const Vt=Math.pow(2,8*X-1);se(this,C,N,X,Vt-1,-Vt)}let je=X-1,Be=1,Nt=0;for(this[N+je]=C&255;--je>=0&&(Be*=256);)C<0&&Nt===0&&this[N+je+1]!==0&&(Nt=1),this[N+je]=(C/Be>>0)-Nt&255;return N+X},a.prototype.writeInt8=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,1,127,-128),C<0&&(C=255+C+1),this[N]=C&255,N+1},a.prototype.writeInt16LE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,2,32767,-32768),this[N]=C&255,this[N+1]=C>>>8,N+2},a.prototype.writeInt16BE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,2,32767,-32768),this[N]=C>>>8,this[N+1]=C&255,N+2},a.prototype.writeInt32LE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,4,2147483647,-2147483648),this[N]=C&255,this[N+1]=C>>>8,this[N+2]=C>>>16,this[N+3]=C>>>24,N+4},a.prototype.writeInt32BE=function(C,N,X){return C=+C,N=N>>>0,X||se(this,C,N,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[N]=C>>>24,this[N+1]=C>>>16,this[N+2]=C>>>8,this[N+3]=C&255,N+4},a.prototype.writeBigInt64LE=Ct(function(C,N=0){return ce(this,C,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ct(function(C,N=0){return Ce(this,C,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie($,C,N,X,de,je){if(N+X>$.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Re($,C,N,X,de){return C=+C,N=N>>>0,de||Ie($,C,N,4),n.write($,C,N,X,23,4),N+4}a.prototype.writeFloatLE=function(C,N,X){return Re(this,C,N,!0,X)},a.prototype.writeFloatBE=function(C,N,X){return Re(this,C,N,!1,X)};function F($,C,N,X,de){return C=+C,N=N>>>0,de||Ie($,C,N,8),n.write($,C,N,X,52,8),N+8}a.prototype.writeDoubleLE=function(C,N,X){return F(this,C,N,!0,X)},a.prototype.writeDoubleBE=function(C,N,X){return F(this,C,N,!1,X)},a.prototype.copy=function(C,N,X,de){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(X||(X=0),!de&&de!==0&&(de=this.length),N>=C.length&&(N=C.length),N||(N=0),de>0&&de<X&&(de=X),de===X||C.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),C.length-N<de-X&&(de=C.length-N+X);const je=de-X;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,X,de):Uint8Array.prototype.set.call(C,this.subarray(X,de),N),je},a.prototype.fill=function(C,N,X,de){if(typeof C=="string"){if(typeof N=="string"?(de=N,N=0,X=this.length):typeof X=="string"&&(de=X,X=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!a.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(C.length===1){const Be=C.charCodeAt(0);(de==="utf8"&&Be<128||de==="latin1")&&(C=Be)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(N<0||this.length<N||this.length<X)throw new RangeError("Out of range index");if(X<=N)return this;N=N>>>0,X=X===void 0?this.length:X>>>0,C||(C=0);let je;if(typeof C=="number")for(je=N;je<X;++je)this[je]=C;else{const Be=a.isBuffer(C)?C:a.from(C,de),Nt=Be.length;if(Nt===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(je=0;je<X-N;++je)this[je+N]=Be[je%Nt]}return this};const Z={};function ie($,C,N){Z[$]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat($,"]"),this.stack,delete this.name}get code(){return $}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return"".concat(this.name," [").concat($,"]: ").concat(this.message)}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?"".concat($," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function($,C){return'The "'.concat($,'" argument must be of type number. Received type ').concat(typeof C)},TypeError),ie("ERR_OUT_OF_RANGE",function($,C,N){let X='The value of "'.concat($,'" is out of range.'),de=N;return Number.isInteger(N)&&Math.abs(N)>2**32?de=De(String(N)):typeof N=="bigint"&&(de=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(de=De(de)),de+="n"),X+=" It must be ".concat(C,". Received ").concat(de),X},RangeError);function De($){let C="",N=$.length;const X=$[0]==="-"?1:0;for(;N>=X+4;N-=3)C="_".concat($.slice(N-3,N)).concat(C);return"".concat($.slice(0,N)).concat(C)}function Ye($,C,N){ne(C,"offset"),($[C]===void 0||$[C+N]===void 0)&&fe(C,$.length-(N+1))}function ze($,C,N,X,de,je){if($>N||$<C){const Be=typeof C=="bigint"?"n":"";let Nt;throw C===0||C===BigInt(0)?Nt=">= 0".concat(Be," and < 2").concat(Be," ** ").concat((je+1)*8).concat(Be):Nt=">= -(2".concat(Be," ** ").concat((je+1)*8-1).concat(Be,") and < 2 ** ")+"".concat((je+1)*8-1).concat(Be),new Z.ERR_OUT_OF_RANGE("value",Nt,$)}Ye(X,de,je)}function ne($,C){if(typeof $!="number")throw new Z.ERR_INVALID_ARG_TYPE(C,"number",$)}function fe($,C,N){throw Math.floor($)!==$?(ne($,N),new Z.ERR_OUT_OF_RANGE("offset","an integer",$)):C<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(C),$)}const Se=/[^+/0-9A-Za-z-_]/g;function Ue($){if($=$.split("=")[0],$=$.trim().replace(Se,""),$.length<2)return"";for(;$.length%4!==0;)$=$+"=";return $}function We($,C){C=C||1/0;let N;const X=$.length;let de=null;const je=[];for(let Be=0;Be<X;++Be){if(N=$.charCodeAt(Be),N>55295&&N<57344){if(!de){if(N>56319){(C-=3)>-1&&je.push(239,191,189);continue}else if(Be+1===X){(C-=3)>-1&&je.push(239,191,189);continue}de=N;continue}if(N<56320){(C-=3)>-1&&je.push(239,191,189),de=N;continue}N=(de-55296<<10|N-56320)+65536}else de&&(C-=3)>-1&&je.push(239,191,189);if(de=null,N<128){if((C-=1)<0)break;je.push(N)}else if(N<2048){if((C-=2)<0)break;je.push(N>>6|192,N&63|128)}else if(N<65536){if((C-=3)<0)break;je.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((C-=4)<0)break;je.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return je}function Ke($){const C=[];for(let N=0;N<$.length;++N)C.push($.charCodeAt(N)&255);return C}function he($,C){let N,X,de;const je=[];for(let Be=0;Be<$.length&&!((C-=2)<0);++Be)N=$.charCodeAt(Be),X=N>>8,de=N%256,je.push(de),je.push(X);return je}function Fe($){return t.toByteArray(Ue($))}function qe($,C,N,X){let de;for(de=0;de<X&&!(de+N>=C.length||de>=$.length);++de)C[de+N]=$[de];return de}function $e($,C){return $ instanceof C||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===C.name}function At($){return $!==$}const fn=function(){const $="0123456789abcdef",C=new Array(256);for(let N=0;N<16;++N){const X=N*16;for(let de=0;de<16;++de)C[X+de]=$[N]+$[de]}return C}();function Ct($){return typeof BigInt>"u"?tn:$}function tn(){throw new Error("BigInt not supported")}}(R0)),R0}var T0,UC;function Rn(){if(UC)return T0;UC=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError("Expected input to be an Array, got ".concat(typeof n));let r="";for(let i=0;i<n.length;i++)r+="    ".concat(n[i].stack,"\n");super(r),this.name="AggregateError",this.errors=n}}return T0={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},T0}var I0={exports:{}},P0,WC;function vO(){return WC||(WC=1,P0={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();if(r==="f")return i.toFixed(6);if(r==="j")return JSON.stringify(i);if(r==="s"&&typeof i=="object"){const o=i.constructor!==Object?i.constructor.name:"";return"".concat(o," {}").trim()}else return i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return"`".concat(e,"`")}else return'"'.concat(e,'"');return"'".concat(e,"'");case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return"".concat(String(e),"n");case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),P0}var O0,VC;function ti(){if(VC)return O0;VC=1;const{format:e,inspect:t}=vO(),{AggregateError:n}=Rn(),r=globalThis.AggregateError||n,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",l={};function u(x,m){if(!x)throw new l.ERR_INTERNAL_ASSERTION(m)}function c(x){let m="",b=x.length;const w=x[0]==="-"?1:0;for(;b>=w+4;b-=3)m="_".concat(x.slice(b-3,b)).concat(m);return"".concat(x.slice(0,b)).concat(m)}function f(x,m,b){if(typeof m=="function")return u(m.length<=b.length,"Code: ".concat(x,"; The provided arguments length (").concat(b.length,") does not match the required ones (").concat(m.length,").")),m(...b);const w=(m.match(/%[dfijoOs]/g)||[]).length;return u(w===b.length,"Code: ".concat(x,"; The provided arguments length (").concat(b.length,") does not match the required ones (").concat(w,").")),b.length===0?m:e(m,...b)}function h(x,m,b){b||(b=Error);class w extends b{constructor(...E){super(f(x,m,E))}toString(){return"".concat(this.name," [").concat(x,"]: ").concat(this.message)}}Object.defineProperties(w.prototype,{name:{value:b.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return"".concat(this.name," [").concat(x,"]: ").concat(this.message)},writable:!0,enumerable:!1,configurable:!0}}),w.prototype.code=x,w.prototype[i]=!0,l[x]=w}function p(x){const m=a+x.name;return Object.defineProperty(x,"name",{value:m}),x}function v(x,m){if(x&&m&&x!==m){if(Array.isArray(m.errors))return m.errors.push(x),m;const b=new r([m,x],m.message);return b.code=m.code,b}return x||m}class y extends Error{constructor(m="The operation was aborted",b=void 0){if(b!==void 0&&typeof b!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",b);super(m,b),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(x,m,b)=>{u(typeof x=="string","'name' must be a string"),Array.isArray(m)||(m=[m]);let w="The ";x.endsWith(" argument")?w+="".concat(x," "):w+='"'.concat(x,'" ').concat(x.includes(".")?"property":"argument"," "),w+="must be ";const S=[],E=[],A=[];for(const P of m)u(typeof P=="string","All expected entries have to be of type string"),o.includes(P)?S.push(P.toLowerCase()):s.test(P)?E.push(P):(u(P!=="object",'The value "object" should be written as "Object"'),A.push(P));if(E.length>0){const P=S.indexOf("object");P!==-1&&(S.splice(S,P,1),E.push("Object"))}if(S.length>0){switch(S.length){case 1:w+="of type ".concat(S[0]);break;case 2:w+="one of type ".concat(S[0]," or ").concat(S[1]);break;default:{const P=S.pop();w+="one of type ".concat(S.join(", "),", or ").concat(P)}}(E.length>0||A.length>0)&&(w+=" or ")}if(E.length>0){switch(E.length){case 1:w+="an instance of ".concat(E[0]);break;case 2:w+="an instance of ".concat(E[0]," or ").concat(E[1]);break;default:{const P=E.pop();w+="an instance of ".concat(E.join(", "),", or ").concat(P)}}A.length>0&&(w+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(w+="an "),w+="".concat(A[0]);break;case 2:w+="one of ".concat(A[0]," or ").concat(A[1]);break;default:{const P=A.pop();w+="one of ".concat(A.join(", "),", or ").concat(P)}}if(b==null)w+=". Received ".concat(b);else if(typeof b=="function"&&b.name)w+=". Received function ".concat(b.name);else if(typeof b=="object"){var T;if((T=b.constructor)!==null&&T!==void 0&&T.name)w+=". Received an instance of ".concat(b.constructor.name);else{const P=t(b,{depth:-1});w+=". Received ".concat(P)}}else{let P=t(b,{colors:!1});P.length>25&&(P="".concat(P.slice(0,25),"...")),w+=". Received type ".concat(typeof b," (").concat(P,")")}return w},TypeError),h("ERR_INVALID_ARG_VALUE",(x,m,b="is invalid")=>{let w=t(m);w.length>128&&(w=w.slice(0,128)+"...");const S=x.includes(".")?"property":"argument";return"The ".concat(S," '").concat(x,"' ").concat(b,". Received ").concat(w)},TypeError),h("ERR_INVALID_RETURN_VALUE",(x,m,b)=>{var w;const S=b!=null&&(w=b.constructor)!==null&&w!==void 0&&w.name?"instance of ".concat(b.constructor.name):"type ".concat(typeof b);return"Expected ".concat(x,' to be returned from the "').concat(m,'"')+" function but got ".concat(S,".")},TypeError),h("ERR_MISSING_ARGS",(...x)=>{u(x.length>0,"At least one arg needs to be specified");let m;const b=x.length;switch(x=(Array.isArray(x)?x:[x]).map(w=>'"'.concat(w,'"')).join(" or "),b){case 1:m+="The ".concat(x[0]," argument");break;case 2:m+="The ".concat(x[0]," and ").concat(x[1]," arguments");break;default:{const w=x.pop();m+="The ".concat(x.join(", "),", and ").concat(w," arguments")}break}return"".concat(m," must be specified")},TypeError),h("ERR_OUT_OF_RANGE",(x,m,b)=>{u(m,'Missing "range" argument');let w;if(Number.isInteger(b)&&Math.abs(b)>2**32)w=c(String(b));else if(typeof b=="bigint"){w=String(b);const S=BigInt(2)**BigInt(32);(b>S||b<-S)&&(w=c(w)),w+="n"}else w=t(b);return'The value of "'.concat(x,'" is out of range. It must be ').concat(m,". Received ").concat(w)},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),O0={AbortError:y,aggregateTwoErrors:p(v),hideStackFrames:p,codes:l},O0}var rd={exports:{}},qC;function Wf(){if(qC)return rd.exports;qC=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return rd.exports=e,rd.exports.AbortSignal=t,rd.exports.default=e,rd.exports}var hp={exports:{}},KC;function Fy(){if(KC)return hp.exports;KC=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(E,A,T){return Function.prototype.apply.call(E,A,T)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:n=function(E){return Object.getOwnPropertyNames(E)};function r(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(E){return E!==E};function o(){o.init.call(this)}hp.exports=o,hp.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");s=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function l(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(E){for(var A=[],T=1;T<arguments.length;T++)A.push(arguments[T]);var P=E==="error",V=this._events;if(V!==void 0)P=P&&V.error===void 0;else if(!P)return!1;if(P){var M;if(A.length>0&&(M=A[0]),M instanceof Error)throw M;var H=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw H.context=M,H}var ee=V[E];if(ee===void 0)return!1;if(typeof ee=="function")t(ee,this,A);else for(var W=ee.length,L=v(ee,W),T=0;T<W;++T)t(L[T],this,A);return!0};function u(S,E,A,T){var P,V,M;if(a(A),V=S._events,V===void 0?(V=S._events=Object.create(null),S._eventsCount=0):(V.newListener!==void 0&&(S.emit("newListener",E,A.listener?A.listener:A),V=S._events),M=V[E]),M===void 0)M=V[E]=A,++S._eventsCount;else if(typeof M=="function"?M=V[E]=T?[A,M]:[M,A]:T?M.unshift(A):M.push(A),P=l(S),P>0&&M.length>P&&!M.warned){M.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=S,H.type=E,H.count=M.length,r(H)}return S}o.prototype.addListener=function(E,A){return u(this,E,A,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(E,A){return u(this,E,A,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(S,E,A){var T={fired:!1,wrapFn:void 0,target:S,type:E,listener:A},P=c.bind(T);return P.listener=A,T.wrapFn=P,P}o.prototype.once=function(E,A){return a(A),this.on(E,f(this,E,A)),this},o.prototype.prependOnceListener=function(E,A){return a(A),this.prependListener(E,f(this,E,A)),this},o.prototype.removeListener=function(E,A){var T,P,V,M,H;if(a(A),P=this._events,P===void 0)return this;if(T=P[E],T===void 0)return this;if(T===A||T.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete P[E],P.removeListener&&this.emit("removeListener",E,T.listener||A));else if(typeof T!="function"){for(V=-1,M=T.length-1;M>=0;M--)if(T[M]===A||T[M].listener===A){H=T[M].listener,V=M;break}if(V<0)return this;V===0?T.shift():y(T,V),T.length===1&&(P[E]=T[0]),P.removeListener!==void 0&&this.emit("removeListener",E,H||A)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(E){var A,T,P;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[E]),this;if(arguments.length===0){var V=Object.keys(T),M;for(P=0;P<V.length;++P)M=V[P],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=T[E],typeof A=="function")this.removeListener(E,A);else if(A!==void 0)for(P=A.length-1;P>=0;P--)this.removeListener(E,A[P]);return this};function h(S,E,A){var T=S._events;if(T===void 0)return[];var P=T[E];return P===void 0?[]:typeof P=="function"?A?[P.listener||P]:[P]:A?x(P):v(P,P.length)}o.prototype.listeners=function(E){return h(this,E,!0)},o.prototype.rawListeners=function(E){return h(this,E,!1)},o.listenerCount=function(S,E){return typeof S.listenerCount=="function"?S.listenerCount(E):p.call(S,E)},o.prototype.listenerCount=p;function p(S){var E=this._events;if(E!==void 0){var A=E[S];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(S,E){for(var A=new Array(E),T=0;T<E;++T)A[T]=S[T];return A}function y(S,E){for(;E+1<S.length;E++)S[E]=S[E+1];S.pop()}function x(S){for(var E=new Array(S.length),A=0;A<E.length;++A)E[A]=S[A].listener||S[A];return E}function m(S,E){return new Promise(function(A,T){function P(M){S.removeListener(E,V),T(M)}function V(){typeof S.removeListener=="function"&&S.removeListener("error",P),A([].slice.call(arguments))}w(S,E,V,{once:!0}),E!=="error"&&b(S,P,{once:!0})})}function b(S,E,A){typeof S.on=="function"&&w(S,"error",E,A)}function w(S,E,A,T){if(typeof S.on=="function")T.once?S.once(E,A):S.on(E,A);else if(typeof S.addEventListener=="function")S.addEventListener(E,function P(V){T.once&&S.removeEventListener(E,P),A(V)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return hp.exports}var GC;function gi(){return GC||(GC=1,function(e){const t=za(),{format:n,inspect:r}=vO(),{codes:{ERR_INVALID_ARG_TYPE:i}}=ti(),{kResistStopPropagation:o,AggregateError:s,SymbolDispose:a}=Rn(),l=globalThis.AbortSignal||Wf().AbortSignal,u=globalThis.AbortController||Wf().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||t.Blob,h=typeof f<"u"?function(x){return x instanceof f}:function(x){return!1},p=(y,x)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new i(x,"AbortSignal",y)},v=(y,x)=>{if(typeof y!="function")throw new i(x,"Function",y)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(y){let x=!1;return function(...m){x||(x=!0,y.apply(this,m))}},createDeferredPromise:function(){let y,x;return{promise:new Promise((b,w)=>{y=b,x=w}),resolve:y,reject:x}},promisify(y){return new Promise((x,m)=>{y((b,...w)=>b?m(b):x(...w))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(y){return y instanceof c},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:h,deprecate(y,x){return y},addAbortListener:Fy().addAbortListener||function(x,m){if(x===void 0)throw new i("signal","AbortSignal",x);p(x,"signal"),v(m,"listener");let b;return x.aborted?queueMicrotask(()=>m()):(x.addEventListener("abort",m,{__proto__:null,once:!0,[o]:!0}),b=()=>{x.removeEventListener("abort",m)}),{__proto__:null,[a](){var w;(w=b)===null||w===void 0||w()}}},AbortSignalAny:l.any||function(x){if(x.length===1)return x[0];const m=new u,b=()=>m.abort();return x.forEach(w=>{p(w,"signals"),w.addEventListener("abort",b,{once:!0})}),m.signal.addEventListener("abort",()=>{x.forEach(w=>w.removeEventListener("abort",b))},{once:!0}),m.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(I0)),I0.exports}var pp={},$0,YC;function yh(){if(YC)return $0;YC=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:a,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:c,String:f,StringPrototypeToUpperCase:h,StringPrototypeTrim:p}=Rn(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:m,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:w}}=ti(),{normalizeEncoding:S}=gi(),{isAsyncFunction:E,isArrayBufferView:A}=gi().types,T={};function P(he){return he===(he|0)}function V(he){return he===he>>>0}const M=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function ee(he,Fe,qe){if(typeof he>"u"&&(he=qe),typeof he=="string"){if(c(M,he)===null)throw new m(Fe,he,H);he=l(he,8)}return q(he,Fe),he}const W=v((he,Fe,qe=a,$e=s)=>{if(typeof he!="number")throw new x(Fe,"number",he);if(!i(he))throw new b(Fe,"an integer",he);if(he<qe||he>$e)throw new b(Fe,">= ".concat(qe," && <= ").concat($e),he)}),L=v((he,Fe,qe=-2147483648,$e=2147483647)=>{if(typeof he!="number")throw new x(Fe,"number",he);if(!i(he))throw new b(Fe,"an integer",he);if(he<qe||he>$e)throw new b(Fe,">= ".concat(qe," && <= ").concat($e),he)}),q=v((he,Fe,qe=!1)=>{if(typeof he!="number")throw new x(Fe,"number",he);if(!i(he))throw new b(Fe,"an integer",he);const $e=qe?1:0,At=4294967295;if(he<$e||he>At)throw new b(Fe,">= ".concat($e," && <= ").concat(At),he)});function Y(he,Fe){if(typeof he!="string")throw new x(Fe,"string",he)}function re(he,Fe,qe=void 0,$e){if(typeof he!="number")throw new x(Fe,"number",he);if(qe!=null&&he<qe||$e!=null&&he>$e||(qe!=null||$e!=null)&&o(he))throw new b(Fe,"".concat(qe!=null?">= ".concat(qe):"").concat(qe!=null&&$e!=null?" && ":"").concat($e!=null?"<= ".concat($e):""),he)}const D=v((he,Fe,qe)=>{if(!t(qe,he)){const At="must be one of: "+n(r(qe,fn=>typeof fn=="string"?"'".concat(fn,"'"):f(fn)),", ");throw new m(Fe,he,At)}});function z(he,Fe){if(typeof he!="boolean")throw new x(Fe,"boolean",he)}function O(he,Fe,qe){return he==null||!u(he,Fe)?qe:he[Fe]}const K=v((he,Fe,qe=null)=>{const $e=O(qe,"allowArray",!1),At=O(qe,"allowFunction",!1);if(!O(qe,"nullable",!1)&&he===null||!$e&&e(he)||typeof he!="object"&&(!At||typeof he!="function"))throw new x(Fe,"Object",he)}),se=v((he,Fe)=>{if(he!=null&&typeof he!="object"&&typeof he!="function")throw new x(Fe,"a dictionary",he)}),ce=v((he,Fe,qe=0)=>{if(!e(he))throw new x(Fe,"Array",he);if(he.length<qe){const $e="must be longer than ".concat(qe);throw new m(Fe,he,$e)}});function Ce(he,Fe){ce(he,Fe);for(let qe=0;qe<he.length;qe++)Y(he[qe],"".concat(Fe,"[").concat(qe,"]"))}function Ie(he,Fe){ce(he,Fe);for(let qe=0;qe<he.length;qe++)z(he[qe],"".concat(Fe,"[").concat(qe,"]"))}function Re(he,Fe){ce(he,Fe);for(let qe=0;qe<he.length;qe++){const $e=he[qe],At="".concat(Fe,"[").concat(qe,"]");if($e==null)throw new x(At,"AbortSignal",$e);Ye($e,At)}}function F(he,Fe="signal"){if(Y(he,Fe),T[he]===void 0)throw T[h(he)]!==void 0?new w(he+" (signals must use all capital letters)"):new w(he)}const Z=v((he,Fe="buffer")=>{if(!A(he))throw new x(Fe,["Buffer","TypedArray","DataView"],he)});function ie(he,Fe){const qe=S(Fe),$e=he.length;if(qe==="hex"&&$e%2!==0)throw new m("encoding",Fe,"is invalid for data of length ".concat($e))}function De(he,Fe="Port",qe=!0){if(typeof he!="number"&&typeof he!="string"||typeof he=="string"&&p(he).length===0||+he!==+he>>>0||he>65535||he===0&&!qe)throw new y(Fe,he,qe);return he|0}const Ye=v((he,Fe)=>{if(he!==void 0&&(he===null||typeof he!="object"||!("aborted"in he)))throw new x(Fe,"AbortSignal",he)}),ze=v((he,Fe)=>{if(typeof he!="function")throw new x(Fe,"Function",he)}),ne=v((he,Fe)=>{if(typeof he!="function"||E(he))throw new x(Fe,"Function",he)}),fe=v((he,Fe)=>{if(he!==void 0)throw new x(Fe,"undefined",he)});function Se(he,Fe,qe){if(!t(qe,he))throw new x(Fe,"('".concat(n(qe,"|"),"')"),he)}const Ue=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function We(he,Fe){if(typeof he>"u"||!c(Ue,he))throw new m(Fe,he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ke(he){if(typeof he=="string")return We(he,"hints"),he;if(e(he)){const Fe=he.length;let qe="";if(Fe===0)return qe;for(let $e=0;$e<Fe;$e++){const At=he[$e];We(At,"hints"),qe+=At,$e!==Fe-1&&(qe+=", ")}return qe}throw new m("hints",he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return $0={isInt32:P,isUint32:V,parseFileMode:ee,validateArray:ce,validateStringArray:Ce,validateBooleanArray:Ie,validateAbortSignalArray:Re,validateBoolean:z,validateBuffer:Z,validateDictionary:se,validateEncoding:ie,validateFunction:ze,validateInt32:L,validateInteger:W,validateNumber:re,validateObject:K,validateOneOf:D,validatePlainFunction:ne,validatePort:De,validateSignalName:F,validateString:Y,validateUint32:q,validateUndefined:fe,validateUnion:Se,validateAbortSignal:Ye,validateLinkHeaderValue:Ke},$0}var gp={exports:{}},M0={exports:{}},XC;function Yl(){if(XC)return M0.exports;XC=1;var e=M0.exports={},t,n;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch(y){t=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=i}catch(y){n=i}})();function o(y){if(t===setTimeout)return setTimeout(y,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch(x){try{return t.call(null,y,0)}catch(m){return t.call(this,y,0)}}}function s(y){if(n===clearTimeout)return clearTimeout(y);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(y);try{return n(y)}catch(x){try{return n.call(null,y)}catch(m){return n.call(this,y)}}}var a=[],l=!1,u,c=-1;function f(){!l||!u||(l=!1,u.length?a=u.concat(a):c=-1,a.length&&h())}function h(){if(!l){var y=o(f);l=!0;for(var x=a.length;x;){for(u=a,a=[];++c<x;)u&&u[c].run();c=-1,x=a.length}u=null,l=!1,s(y)}}e.nextTick=function(y){var x=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)x[m-1]=arguments[m];a.push(new p(y,x)),a.length===1&&!l&&o(h)};function p(y,x){this.fun=y,this.array=x}p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function v(){}return e.on=v,e.addListener=v,e.once=v,e.off=v,e.removeListener=v,e.removeAllListeners=v,e.emit=v,e.prependListener=v,e.prependOnceListener=v,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},M0.exports}var D0,JC;function qs(){if(JC)return D0;JC=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Rn(),r=n("nodejs.stream.destroyed"),i=n("nodejs.stream.errored"),o=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),a=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function c(O,K=!1){var se;return!!(O&&typeof O.pipe=="function"&&typeof O.on=="function"&&(!K||typeof O.pause=="function"&&typeof O.resume=="function")&&(!O._writableState||((se=O._readableState)===null||se===void 0?void 0:se.readable)!==!1)&&(!O._writableState||O._readableState))}function f(O){var K;return!!(O&&typeof O.write=="function"&&typeof O.on=="function"&&(!O._readableState||((K=O._writableState)===null||K===void 0?void 0:K.writable)!==!1))}function h(O){return!!(O&&typeof O.pipe=="function"&&O._readableState&&typeof O.on=="function"&&typeof O.write=="function")}function p(O){return O&&(O._readableState||O._writableState||typeof O.write=="function"&&typeof O.on=="function"||typeof O.pipe=="function"&&typeof O.on=="function")}function v(O){return!!(O&&!p(O)&&typeof O.pipeThrough=="function"&&typeof O.getReader=="function"&&typeof O.cancel=="function")}function y(O){return!!(O&&!p(O)&&typeof O.getWriter=="function"&&typeof O.abort=="function")}function x(O){return!!(O&&!p(O)&&typeof O.readable=="object"&&typeof O.writable=="object")}function m(O){return v(O)||y(O)||x(O)}function b(O,K){return O==null?!1:K===!0?typeof O[e]=="function":K===!1?typeof O[t]=="function":typeof O[e]=="function"||typeof O[t]=="function"}function w(O){if(!p(O))return null;const K=O._writableState,se=O._readableState,ce=K||se;return!!(O.destroyed||O[r]||ce!=null&&ce.destroyed)}function S(O){if(!f(O))return null;if(O.writableEnded===!0)return!0;const K=O._writableState;return K!=null&&K.errored?!1:typeof(K==null?void 0:K.ended)!="boolean"?null:K.ended}function E(O,K){if(!f(O))return null;if(O.writableFinished===!0)return!0;const se=O._writableState;return se!=null&&se.errored?!1:typeof(se==null?void 0:se.finished)!="boolean"?null:!!(se.finished||K===!1&&se.ended===!0&&se.length===0)}function A(O){if(!c(O))return null;if(O.readableEnded===!0)return!0;const K=O._readableState;return!K||K.errored?!1:typeof(K==null?void 0:K.ended)!="boolean"?null:K.ended}function T(O,K){if(!c(O))return null;const se=O._readableState;return se!=null&&se.errored?!1:typeof(se==null?void 0:se.endEmitted)!="boolean"?null:!!(se.endEmitted||K===!1&&se.ended===!0&&se.length===0)}function P(O){return O&&O[o]!=null?O[o]:typeof(O==null?void 0:O.readable)!="boolean"?null:w(O)?!1:c(O)&&O.readable&&!T(O)}function V(O){return O&&O[s]!=null?O[s]:typeof(O==null?void 0:O.writable)!="boolean"?null:w(O)?!1:f(O)&&O.writable&&!S(O)}function M(O,K){return p(O)?w(O)?!0:!((K==null?void 0:K.readable)!==!1&&P(O)||(K==null?void 0:K.writable)!==!1&&V(O)):null}function H(O){var K,se;return p(O)?O.writableErrored?O.writableErrored:(K=(se=O._writableState)===null||se===void 0?void 0:se.errored)!==null&&K!==void 0?K:null:null}function ee(O){var K,se;return p(O)?O.readableErrored?O.readableErrored:(K=(se=O._readableState)===null||se===void 0?void 0:se.errored)!==null&&K!==void 0?K:null:null}function W(O){if(!p(O))return null;if(typeof O.closed=="boolean")return O.closed;const K=O._writableState,se=O._readableState;return typeof(K==null?void 0:K.closed)=="boolean"||typeof(se==null?void 0:se.closed)=="boolean"?(K==null?void 0:K.closed)||(se==null?void 0:se.closed):typeof O._closed=="boolean"&&L(O)?O._closed:null}function L(O){return typeof O._closed=="boolean"&&typeof O._defaultKeepAlive=="boolean"&&typeof O._removedConnection=="boolean"&&typeof O._removedContLen=="boolean"}function q(O){return typeof O._sent100=="boolean"&&L(O)}function Y(O){var K;return typeof O._consuming=="boolean"&&typeof O._dumped=="boolean"&&((K=O.req)===null||K===void 0?void 0:K.upgradeOrConnect)===void 0}function re(O){if(!p(O))return null;const K=O._writableState,se=O._readableState,ce=K||se;return!ce&&q(O)||!!(ce&&ce.autoDestroy&&ce.emitClose&&ce.closed===!1)}function D(O){var K;return!!(O&&((K=O[a])!==null&&K!==void 0?K:O.readableDidRead||O.readableAborted))}function z(O){var K,se,ce,Ce,Ie,Re,F,Z,ie,De;return!!(O&&((K=(se=(ce=(Ce=(Ie=(Re=O[i])!==null&&Re!==void 0?Re:O.readableErrored)!==null&&Ie!==void 0?Ie:O.writableErrored)!==null&&Ce!==void 0?Ce:(F=O._readableState)===null||F===void 0?void 0:F.errorEmitted)!==null&&ce!==void 0?ce:(Z=O._writableState)===null||Z===void 0?void 0:Z.errorEmitted)!==null&&se!==void 0?se:(ie=O._readableState)===null||ie===void 0?void 0:ie.errored)!==null&&K!==void 0?K:!((De=O._writableState)===null||De===void 0)&&De.errored))}return D0={isDestroyed:w,kIsDestroyed:r,isDisturbed:D,kIsDisturbed:a,isErrored:z,kIsErrored:i,isReadable:P,kIsReadable:o,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:W,isDuplexNodeStream:h,isFinished:M,isIterable:b,isReadableNodeStream:c,isReadableStream:v,isReadableEnded:A,isReadableFinished:T,isReadableErrored:ee,isNodeStream:p,isWebStream:m,isWritable:V,isWritableNodeStream:f,isWritableStream:y,isWritableEnded:S,isWritableFinished:E,isWritableErrored:H,isServerRequest:Y,isServerResponse:q,willEmitClose:re,isTransformStream:x},D0}var QC;function Ha(){if(QC)return gp.exports;QC=1;const e=Yl(),{AbortError:t,codes:n}=ti(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=n,{kEmptyObject:o,once:s}=gi(),{validateAbortSignal:a,validateFunction:l,validateObject:u,validateBoolean:c}=yh(),{Promise:f,PromisePrototypeThen:h,SymbolDispose:p}=Rn(),{isClosed:v,isReadable:y,isReadableNodeStream:x,isReadableStream:m,isReadableFinished:b,isReadableErrored:w,isWritable:S,isWritableNodeStream:E,isWritableStream:A,isWritableFinished:T,isWritableErrored:P,isNodeStream:V,willEmitClose:M,kIsClosedPromise:H}=qs();let ee;function W(D){return D.setHeader&&typeof D.abort=="function"}const L=()=>{};function q(D,z,O){var K,se;if(arguments.length===2?(O=z,z=o):z==null?z=o:u(z,"options"),l(O,"callback"),a(z.signal,"options.signal"),O=s(O),m(D)||A(D))return Y(D,z,O);if(!V(D))throw new r("stream",["ReadableStream","WritableStream","Stream"],D);const ce=(K=z.readable)!==null&&K!==void 0?K:x(D),Ce=(se=z.writable)!==null&&se!==void 0?se:E(D),Ie=D._writableState,Re=D._readableState,F=()=>{D.writable||De()};let Z=M(D)&&x(D)===ce&&E(D)===Ce,ie=T(D,!1);const De=()=>{ie=!0,D.destroyed&&(Z=!1),!(Z&&(!D.readable||ce))&&(!ce||Ye)&&O.call(D)};let Ye=b(D,!1);const ze=()=>{Ye=!0,D.destroyed&&(Z=!1),!(Z&&(!D.writable||Ce))&&(!Ce||ie)&&O.call(D)},ne=he=>{O.call(D,he)};let fe=v(D);const Se=()=>{fe=!0;const he=P(D)||w(D);if(he&&typeof he!="boolean")return O.call(D,he);if(ce&&!Ye&&x(D,!0)&&!b(D,!1))return O.call(D,new i);if(Ce&&!ie&&!T(D,!1))return O.call(D,new i);O.call(D)},Ue=()=>{fe=!0;const he=P(D)||w(D);if(he&&typeof he!="boolean")return O.call(D,he);O.call(D)},We=()=>{D.req.on("finish",De)};W(D)?(D.on("complete",De),Z||D.on("abort",Se),D.req?We():D.on("request",We)):Ce&&!Ie&&(D.on("end",F),D.on("close",F)),!Z&&typeof D.aborted=="boolean"&&D.on("aborted",Se),D.on("end",ze),D.on("finish",De),z.error!==!1&&D.on("error",ne),D.on("close",Se),fe?e.nextTick(Se):Ie!=null&&Ie.errorEmitted||Re!=null&&Re.errorEmitted?Z||e.nextTick(Ue):(!ce&&(!Z||y(D))&&(ie||S(D)===!1)||!Ce&&(!Z||S(D))&&(Ye||y(D)===!1)||Re&&D.req&&D.aborted)&&e.nextTick(Ue);const Ke=()=>{O=L,D.removeListener("aborted",Se),D.removeListener("complete",De),D.removeListener("abort",Se),D.removeListener("request",We),D.req&&D.req.removeListener("finish",De),D.removeListener("end",F),D.removeListener("close",F),D.removeListener("finish",De),D.removeListener("end",ze),D.removeListener("error",ne),D.removeListener("close",Se)};if(z.signal&&!fe){const he=()=>{const Fe=O;Ke(),Fe.call(D,new t(void 0,{cause:z.signal.reason}))};if(z.signal.aborted)e.nextTick(he);else{ee=ee||gi().addAbortListener;const Fe=ee(z.signal,he),qe=O;O=s((...$e)=>{Fe[p](),qe.apply(D,$e)})}}return Ke}function Y(D,z,O){let K=!1,se=L;if(z.signal)if(se=()=>{K=!0,O.call(D,new t(void 0,{cause:z.signal.reason}))},z.signal.aborted)e.nextTick(se);else{ee=ee||gi().addAbortListener;const Ce=ee(z.signal,se),Ie=O;O=s((...Re)=>{Ce[p](),Ie.apply(D,Re)})}const ce=(...Ce)=>{K||e.nextTick(()=>O.apply(D,Ce))};return h(D[H].promise,ce,ce),L}function re(D,z){var O;let K=!1;return z===null&&(z=o),(O=z)!==null&&O!==void 0&&O.cleanup&&(c(z.cleanup,"cleanup"),K=z.cleanup),new f((se,ce)=>{const Ce=q(D,z,Ie=>{K&&Ce(),Ie?ce(Ie):se()})})}return gp.exports=q,gp.exports.finished=re,gp.exports}var L0,ZC;function Ic(){if(ZC)return L0;ZC=1;const e=Yl(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=ti(),{Symbol:i}=Rn(),{kIsDestroyed:o,isDestroyed:s,isFinished:a,isServerRequest:l}=qs(),u=i("kDestroy"),c=i("kConstruct");function f(M,H,ee){M&&(M.stack,H&&!H.errored&&(H.errored=M),ee&&!ee.errored&&(ee.errored=M))}function h(M,H){const ee=this._readableState,W=this._writableState,L=W||ee;return W!=null&&W.destroyed||ee!=null&&ee.destroyed?(typeof H=="function"&&H(),this):(f(M,W,ee),W&&(W.destroyed=!0),ee&&(ee.destroyed=!0),L.constructed?p(this,M,H):this.once(u,function(q){p(this,t(q,M),H)}),this)}function p(M,H,ee){let W=!1;function L(q){if(W)return;W=!0;const Y=M._readableState,re=M._writableState;f(q,re,Y),re&&(re.closed=!0),Y&&(Y.closed=!0),typeof ee=="function"&&ee(q),q?e.nextTick(v,M,q):e.nextTick(y,M)}try{M._destroy(H||null,L)}catch(q){L(q)}}function v(M,H){x(M,H),y(M)}function y(M){const H=M._readableState,ee=M._writableState;ee&&(ee.closeEmitted=!0),H&&(H.closeEmitted=!0),(ee!=null&&ee.emitClose||H!=null&&H.emitClose)&&M.emit("close")}function x(M,H){const ee=M._readableState,W=M._writableState;W!=null&&W.errorEmitted||ee!=null&&ee.errorEmitted||(W&&(W.errorEmitted=!0),ee&&(ee.errorEmitted=!0),M.emit("error",H))}function m(){const M=this._readableState,H=this._writableState;M&&(M.constructed=!0,M.closed=!1,M.closeEmitted=!1,M.destroyed=!1,M.errored=null,M.errorEmitted=!1,M.reading=!1,M.ended=M.readable===!1,M.endEmitted=M.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function b(M,H,ee){const W=M._readableState,L=M._writableState;if(L!=null&&L.destroyed||W!=null&&W.destroyed)return this;W!=null&&W.autoDestroy||L!=null&&L.autoDestroy?M.destroy(H):H&&(H.stack,L&&!L.errored&&(L.errored=H),W&&!W.errored&&(W.errored=H),ee?e.nextTick(x,M,H):x(M,H))}function w(M,H){if(typeof M._construct!="function")return;const ee=M._readableState,W=M._writableState;ee&&(ee.constructed=!1),W&&(W.constructed=!1),M.once(c,H),!(M.listenerCount(c)>1)&&e.nextTick(S,M)}function S(M){let H=!1;function ee(W){if(H){b(M,W!=null?W:new n);return}H=!0;const L=M._readableState,q=M._writableState,Y=q||L;L&&(L.constructed=!0),q&&(q.constructed=!0),Y.destroyed?M.emit(u,W):W?b(M,W,!0):e.nextTick(E,M)}try{M._construct(W=>{e.nextTick(ee,W)})}catch(W){e.nextTick(ee,W)}}function E(M){M.emit(c)}function A(M){return(M==null?void 0:M.setHeader)&&typeof M.abort=="function"}function T(M){M.emit("close")}function P(M,H){M.emit("error",H),e.nextTick(T,M)}function V(M,H){!M||s(M)||(!H&&!a(M)&&(H=new r),l(M)?(M.socket=null,M.destroy(H)):A(M)?M.abort():A(M.req)?M.req.abort():typeof M.destroy=="function"?M.destroy(H):typeof M.close=="function"?M.close():H?e.nextTick(P,M,H):e.nextTick(T,M),M.destroyed||(M[o]=!0))}return L0={construct:w,destroyer:V,destroy:h,undestroy:m,errorOrDestroy:b},L0}var B0,ej;function V1(){if(ej)return B0;ej=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Rn(),{EventEmitter:n}=Fy();function r(o){n.call(this,o)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(o,s){const a=this;function l(y){o.writable&&o.write(y)===!1&&a.pause&&a.pause()}a.on("data",l);function u(){a.readable&&a.resume&&a.resume()}o.on("drain",u),!o._isStdio&&(!s||s.end!==!1)&&(a.on("end",f),a.on("close",h));let c=!1;function f(){c||(c=!0,o.end())}function h(){c||(c=!0,typeof o.destroy=="function"&&o.destroy())}function p(y){v(),n.listenerCount(this,"error")===0&&this.emit("error",y)}i(a,"error",p),i(o,"error",p);function v(){a.removeListener("data",l),o.removeListener("drain",u),a.removeListener("end",f),a.removeListener("close",h),a.removeListener("error",p),o.removeListener("error",p),a.removeListener("end",v),a.removeListener("close",v),o.removeListener("close",v)}return a.on("end",v),a.on("close",v),o.on("close",v),o.emit("pipe",a),o};function i(o,s,a){if(typeof o.prependListener=="function")return o.prependListener(s,a);!o._events||!o._events[s]?o.on(s,a):e(o._events[s])?o._events[s].unshift(a):o._events[s]=[a,o._events[s]]}return B0={Stream:r,prependListener:i},B0}var F0={exports:{}},tj;function zy(){return tj||(tj=1,function(e){const{SymbolDispose:t}=Rn(),{AbortError:n,codes:r}=ti(),{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=qs(),a=Ha(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const c=(f,h)=>{if(typeof f!="object"||!("aborted"in f))throw new l(h,"AbortSignal",f)};e.exports.addAbortSignal=function(h,p){if(c(h,"signal"),!i(p)&&!o(p))throw new l("stream",["ReadableStream","WritableStream","Stream"],p);return e.exports.addAbortSignalNoValidate(h,p)},e.exports.addAbortSignalNoValidate=function(f,h){if(typeof f!="object"||!("aborted"in f))return h;const p=i(h)?()=>{h.destroy(new n(void 0,{cause:f.reason}))}:()=>{h[s](new n(void 0,{cause:f.reason}))};if(f.aborted)p();else{u=u||gi().addAbortListener;const v=u(f,p);a(h,v[t])}return h}}(F0)),F0.exports}var z0,nj;function jre(){if(nj)return z0;nj=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Rn(),{Buffer:i}=za(),{inspect:o}=gi();return z0=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const l={data:a,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(a){const l={data:a,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=a+l.data;return u}concat(a){if(this.length===0)return i.alloc(0);const l=i.allocUnsafe(a>>>0);let u=this.head,c=0;for(;u;)n(l,u.data,c),c+=u.data.length,u=u.next;return l}consume(a,l){const u=this.head.data;if(a<u.length){const c=u.slice(0,a);return this.head.data=u.slice(a),c}return a===u.length?this.shift():l?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[t](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let l="",u=this.head,c=0;do{const f=u.data;if(a>f.length)l+=f,a-=f.length;else{a===f.length?(l+=f,++c,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(f,0,a),this.head=u,u.data=e(f,a));break}++c}while((u=u.next)!==null);return this.length-=c,l}_getBuffer(a){const l=i.allocUnsafe(a),u=a;let c=this.head,f=0;do{const h=c.data;if(a>h.length)n(l,h,u-a),a-=h.length;else{a===h.length?(n(l,h,u-a),++f,c.next?this.head=c.next:this.head=this.tail=null):(n(l,new r(h.buffer,h.byteOffset,a),u-a),this.head=c,c.data=h.slice(a));break}++f}while((c=c.next)!==null);return this.length-=f,l}[Symbol.for("nodejs.util.inspect.custom")](a,l){return o(this,{...l,depth:0,customInspect:!1})}},z0}var H0,rj;function Hy(){if(rj)return H0;rj=1;const{MathFloor:e,NumberIsInteger:t}=Rn(),{validateInteger:n}=yh(),{ERR_INVALID_ARG_VALUE:r}=ti().codes;let i=16*1024,o=16;function s(c,f,h){return c.highWaterMark!=null?c.highWaterMark:f?c[h]:null}function a(c){return c?o:i}function l(c,f){n(f,"value",0),c?o=f:i=f}function u(c,f,h,p){const v=s(f,p,h);if(v!=null){if(!t(v)||v<0){const y=p?"options.".concat(h):"options.highWaterMark";throw new r(y,v)}return e(v)}return a(c.objectMode)}return H0={getHighWaterMark:u,getDefaultHighWaterMark:a,setDefaultHighWaterMark:l},H0}var U0={},mp={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ij;function Are(){return ij||(ij=1,function(e,t){var n=za(),r=n.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o);function o(s,a,l){return r(s,a,l)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(mp,mp.exports)),mp.exports}var oj;function Nre(){if(oj)return U0;oj=1;var e=Are().Buffer,t=e.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(m){if(!m)return"utf8";for(var b;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(b)return;m=(""+m).toLowerCase(),b=!0}}function r(m){var b=n(m);if(typeof b!="string"&&(e.isEncoding===t||!t(m)))throw new Error("Unknown encoding: "+m);return b||m}U0.StringDecoder=i;function i(m){this.encoding=r(m);var b;switch(this.encoding){case"utf16le":this.text=f,this.end=h,b=4;break;case"utf8":this.fillLast=l,b=4;break;case"base64":this.text=p,this.end=v,b=3;break;default:this.write=y,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(b)}i.prototype.write=function(m){if(m.length===0)return"";var b,w;if(this.lastNeed){if(b=this.fillLast(m),b===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<m.length?b?b+this.text(m,w):this.text(m,w):b||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function o(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function s(m,b,w){var S=b.length-1;if(S<w)return 0;var E=o(b[S]);return E>=0?(E>0&&(m.lastNeed=E-1),E):--S<w||E===-2?0:(E=o(b[S]),E>=0?(E>0&&(m.lastNeed=E-2),E):--S<w||E===-2?0:(E=o(b[S]),E>=0?(E>0&&(E===2?E=0:m.lastNeed=E-3),E):0))}function a(m,b,w){if((b[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return m.lastNeed=2,""}}function l(m){var b=this.lastTotal-this.lastNeed,w=a(this,m);if(w!==void 0)return w;if(this.lastNeed<=m.length)return m.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,b,0,m.length),this.lastNeed-=m.length}function u(m,b){var w=s(this,m,b);if(!this.lastNeed)return m.toString("utf8",b);this.lastTotal=w;var S=m.length-(w-this.lastNeed);return m.copy(this.lastChar,0,S),m.toString("utf8",b,S)}function c(m){var b=m&&m.length?this.write(m):"";return this.lastNeed?b+"":b}function f(m,b){if((m.length-b)%2===0){var w=m.toString("utf16le",b);if(w){var S=w.charCodeAt(w.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",b,m.length-1)}function h(m){var b=m&&m.length?this.write(m):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,w)}return b}function p(m,b){var w=(m.length-b)%3;return w===0?m.toString("base64",b):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",b,m.length-w))}function v(m){var b=m&&m.length?this.write(m):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function y(m){return m.toString(this.encoding)}function x(m){return m&&m.length?this.write(m):""}return U0}var W0,sj;function wO(){if(sj)return W0;sj=1;const e=Yl(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Rn(),{Buffer:i}=za(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:s}=ti().codes;function a(l,u,c){let f;if(typeof u=="string"||u instanceof i)return new l({objectMode:!0,...c,read(){this.push(u),this.push(null)}});let h;if(u&&u[n])h=!0,f=u[n]();else if(u&&u[r])h=!1,f=u[r]();else throw new o("iterable",["Iterable"],u);const p=new l({objectMode:!0,highWaterMark:1,...c});let v=!1;p._read=function(){v||(v=!0,x())},p._destroy=function(m,b){t(y(m),()=>e.nextTick(b,m),w=>e.nextTick(b,w||m))};async function y(m){const b=m!=null,w=typeof f.throw=="function";if(b&&w){const{value:S,done:E}=await f.throw(m);if(await S,E)return}if(typeof f.return=="function"){const{value:S}=await f.return();await S}}async function x(){for(;;){try{const{value:m,done:b}=h?await f.next():f.next();if(b)p.push(null);else{const w=m&&typeof m.then=="function"?await m:m;if(w===null)throw v=!1,new s;if(p.push(w))continue;v=!1}}catch(m){p.destroy(m)}break}}return p}return W0=a,W0}var V0,aj;function Uy(){if(aj)return V0;aj=1;const e=Yl(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:l,SafeSet:u,SymbolAsyncDispose:c,SymbolAsyncIterator:f,Symbol:h}=Rn();V0=$e,$e.ReadableState=qe;const{EventEmitter:p}=Fy(),{Stream:v,prependListener:y}=V1(),{Buffer:x}=za(),{addAbortSignal:m}=zy(),b=Ha();let w=gi().debuglog("stream",G=>{w=G});const S=jre(),E=Ic(),{getHighWaterMark:A,getDefaultHighWaterMark:T}=Hy(),{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:V,ERR_METHOD_NOT_IMPLEMENTED:M,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:ee,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:W},AbortError:L}=ti(),{validateObject:q}=yh(),Y=h("kPaused"),{StringDecoder:re}=Nre(),D=wO();a($e.prototype,v.prototype),a($e,v);const z=()=>{},{errorOrDestroy:O}=E,K=1,se=2,ce=4,Ce=8,Ie=16,Re=32,F=64,Z=128,ie=256,De=512,Ye=1024,ze=2048,ne=4096,fe=8192,Se=16384,Ue=32768,We=65536,Ke=1<<17,he=1<<18;function Fe(G){return{enumerable:!1,get(){return(this.state&G)!==0},set(te){te?this.state|=G:this.state&=~G}}}o(qe.prototype,{objectMode:Fe(K),ended:Fe(se),endEmitted:Fe(ce),reading:Fe(Ce),constructed:Fe(Ie),sync:Fe(Re),needReadable:Fe(F),emittedReadable:Fe(Z),readableListening:Fe(ie),resumeScheduled:Fe(De),errorEmitted:Fe(Ye),emitClose:Fe(ze),autoDestroy:Fe(ne),destroyed:Fe(fe),closed:Fe(Se),closeEmitted:Fe(Ue),multiAwaitDrain:Fe(We),readingMore:Fe(Ke),dataEmitted:Fe(he)});function qe(G,te,Ze){typeof Ze!="boolean"&&(Ze=te instanceof Fs()),this.state=ze|ne|Ie|Re,G&&G.objectMode&&(this.state|=K),Ze&&G&&G.readableObjectMode&&(this.state|=K),this.highWaterMark=G?A(this,G,"readableHighWaterMark",Ze):T(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[Y]=null,G&&G.emitClose===!1&&(this.state&=-2049),G&&G.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=G&&G.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,G&&G.encoding&&(this.decoder=new re(G.encoding),this.encoding=G.encoding)}function $e(G){if(!(this instanceof $e))return new $e(G);const te=this instanceof Fs();this._readableState=new qe(G,this,te),G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.construct=="function"&&(this._construct=G.construct),G.signal&&!te&&m(G.signal,this)),v.call(this,G),E.construct(this,()=>{this._readableState.needReadable&&de(this,this._readableState)})}$e.prototype.destroy=E.destroy,$e.prototype._undestroy=E.undestroy,$e.prototype._destroy=function(G,te){te(G)},$e.prototype[p.captureRejectionSymbol]=function(G){this.destroy(G)},$e.prototype[c]=function(){let G;return this.destroyed||(G=this.readableEnded?null:new L,this.destroy(G)),new l((te,Ze)=>b(this,rt=>rt&&rt!==G?Ze(rt):te(null)))},$e.prototype.push=function(G,te){return At(this,G,te,!1)},$e.prototype.unshift=function(G,te){return At(this,G,te,!0)};function At(G,te,Ze,rt){w("readableAddChunk",te);const gt=G._readableState;let Pt;if(gt.state&K||(typeof te=="string"?(Ze=Ze||gt.defaultEncoding,gt.encoding!==Ze&&(rt&&gt.encoding?te=x.from(te,Ze).toString(gt.encoding):(te=x.from(te,Ze),Ze=""))):te instanceof x?Ze="":v._isUint8Array(te)?(te=v._uint8ArrayToBuffer(te),Ze=""):te!=null&&(Pt=new V("chunk",["string","Buffer","Uint8Array"],te))),Pt)O(G,Pt);else if(te===null)gt.state&=-9,C(G,gt);else if(gt.state&K||te&&te.length>0)if(rt)if(gt.state&ce)O(G,new W);else{if(gt.destroyed||gt.errored)return!1;fn(G,gt,te,!0)}else if(gt.ended)O(G,new ee);else{if(gt.destroyed||gt.errored)return!1;gt.state&=-9,gt.decoder&&!Ze?(te=gt.decoder.write(te),gt.objectMode||te.length!==0?fn(G,gt,te,!1):de(G,gt)):fn(G,gt,te,!1)}else rt||(gt.state&=-9,de(G,gt));return!gt.ended&&(gt.length<gt.highWaterMark||gt.length===0)}function fn(G,te,Ze,rt){te.flowing&&te.length===0&&!te.sync&&G.listenerCount("data")>0?(te.state&We?te.awaitDrainWriters.clear():te.awaitDrainWriters=null,te.dataEmitted=!0,G.emit("data",Ze)):(te.length+=te.objectMode?1:Ze.length,rt?te.buffer.unshift(Ze):te.buffer.push(Ze),te.state&F&&N(G)),de(G,te)}$e.prototype.isPaused=function(){const G=this._readableState;return G[Y]===!0||G.flowing===!1},$e.prototype.setEncoding=function(G){const te=new re(G);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;const Ze=this._readableState.buffer;let rt="";for(const gt of Ze)rt+=te.write(gt);return Ze.clear(),rt!==""&&Ze.push(rt),this._readableState.length=rt.length,this};const Ct=1073741824;function tn(G){if(G>Ct)throw new H("size","<= 1GiB",G);return G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++,G}function $(G,te){return G<=0||te.length===0&&te.ended?0:te.state&K?1:r(G)?te.flowing&&te.length?te.buffer.first().length:te.length:G<=te.length?G:te.ended?te.length:0}$e.prototype.read=function(G){w("read",G),G===void 0?G=NaN:n(G)||(G=i(G,10));const te=this._readableState,Ze=G;if(G>te.highWaterMark&&(te.highWaterMark=tn(G)),G!==0&&(te.state&=-129),G===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return w("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?jo(this):N(this),null;if(G=$(G,te),G===0&&te.ended)return te.length===0&&jo(this),null;let rt=(te.state&F)!==0;if(w("need readable",rt),(te.length===0||te.length-G<te.highWaterMark)&&(rt=!0,w("length less than watermark",rt)),te.ended||te.reading||te.destroyed||te.errored||!te.constructed)rt=!1,w("reading, ended or constructing",rt);else if(rt){w("do read"),te.state|=Ce|Re,te.length===0&&(te.state|=F);try{this._read(te.highWaterMark)}catch(Pt){O(this,Pt)}te.state&=-33,te.reading||(G=$(Ze,te))}let gt;return G>0?gt=Co(G,te):gt=null,gt===null?(te.needReadable=te.length<=te.highWaterMark,G=0):(te.length-=G,te.multiAwaitDrain?te.awaitDrainWriters.clear():te.awaitDrainWriters=null),te.length===0&&(te.ended||(te.needReadable=!0),Ze!==G&&te.ended&&jo(this)),gt!==null&&!te.errorEmitted&&!te.closeEmitted&&(te.dataEmitted=!0,this.emit("data",gt)),gt};function C(G,te){if(w("onEofChunk"),!te.ended){if(te.decoder){const Ze=te.decoder.end();Ze&&Ze.length&&(te.buffer.push(Ze),te.length+=te.objectMode?1:Ze.length)}te.ended=!0,te.sync?N(G):(te.needReadable=!1,te.emittedReadable=!0,X(G))}}function N(G){const te=G._readableState;w("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(w("emitReadable",te.flowing),te.emittedReadable=!0,e.nextTick(X,G))}function X(G){const te=G._readableState;w("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&!te.errored&&(te.length||te.ended)&&(G.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,Ot(G)}function de(G,te){!te.readingMore&&te.constructed&&(te.readingMore=!0,e.nextTick(je,G,te))}function je(G,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){const Ze=te.length;if(w("maybeReadMore read 0"),G.read(0),Ze===te.length)break}te.readingMore=!1}$e.prototype._read=function(G){throw new M("_read()")},$e.prototype.pipe=function(G,te){const Ze=this,rt=this._readableState;rt.pipes.length===1&&(rt.multiAwaitDrain||(rt.multiAwaitDrain=!0,rt.awaitDrainWriters=new u(rt.awaitDrainWriters?[rt.awaitDrainWriters]:[]))),rt.pipes.push(G),w("pipe count=%d opts=%j",rt.pipes.length,te);const Pt=(!te||te.end!==!1)&&G!==e.stdout&&G!==e.stderr?ss:to;rt.endEmitted?e.nextTick(Pt):Ze.once("end",Pt),G.on("unpipe",Jt);function Jt(Vn,_r){w("onunpipe"),Vn===Ze&&_r&&_r.hasUnpiped===!1&&(_r.hasUnpiped=!0,No())}function ss(){w("onend"),G.end()}let xr,eo=!1;function No(){w("cleanup"),G.removeListener("close",fr),G.removeListener("finish",yi),xr&&G.removeListener("drain",xr),G.removeListener("error",Ur),G.removeListener("unpipe",Jt),Ze.removeListener("end",ss),Ze.removeListener("end",to),Ze.removeListener("data",Hr),eo=!0,xr&&rt.awaitDrainWriters&&(!G._writableState||G._writableState.needDrain)&&xr()}function Gs(){eo||(rt.pipes.length===1&&rt.pipes[0]===G?(w("false write response, pause",0),rt.awaitDrainWriters=G,rt.multiAwaitDrain=!1):rt.pipes.length>1&&rt.pipes.includes(G)&&(w("false write response, pause",rt.awaitDrainWriters.size),rt.awaitDrainWriters.add(G)),Ze.pause()),xr||(xr=Be(Ze,G),G.on("drain",xr))}Ze.on("data",Hr);function Hr(Vn){w("ondata");const _r=G.write(Vn);w("dest.write",_r),_r===!1&&Gs()}function Ur(Vn){if(w("onerror",Vn),to(),G.removeListener("error",Ur),G.listenerCount("error")===0){const _r=G._writableState||G._readableState;_r&&!_r.errorEmitted?O(G,Vn):G.emit("error",Vn)}}y(G,"error",Ur);function fr(){G.removeListener("finish",yi),to()}G.once("close",fr);function yi(){w("onfinish"),G.removeListener("close",fr),to()}G.once("finish",yi);function to(){w("unpipe"),Ze.unpipe(G)}return G.emit("pipe",Ze),G.writableNeedDrain===!0?Gs():rt.flowing||(w("pipe resume"),Ze.resume()),G};function Be(G,te){return function(){const rt=G._readableState;rt.awaitDrainWriters===te?(w("pipeOnDrain",1),rt.awaitDrainWriters=null):rt.multiAwaitDrain&&(w("pipeOnDrain",rt.awaitDrainWriters.size),rt.awaitDrainWriters.delete(te)),(!rt.awaitDrainWriters||rt.awaitDrainWriters.size===0)&&G.listenerCount("data")&&G.resume()}}$e.prototype.unpipe=function(G){const te=this._readableState,Ze={hasUnpiped:!1};if(te.pipes.length===0)return this;if(!G){const gt=te.pipes;te.pipes=[],this.pause();for(let Pt=0;Pt<gt.length;Pt++)gt[Pt].emit("unpipe",this,{hasUnpiped:!1});return this}const rt=t(te.pipes,G);return rt===-1?this:(te.pipes.splice(rt,1),te.pipes.length===0&&this.pause(),G.emit("unpipe",this,Ze),this)},$e.prototype.on=function(G,te){const Ze=v.prototype.on.call(this,G,te),rt=this._readableState;return G==="data"?(rt.readableListening=this.listenerCount("readable")>0,rt.flowing!==!1&&this.resume()):G==="readable"&&!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.flowing=!1,rt.emittedReadable=!1,w("on readable",rt.length,rt.reading),rt.length?N(this):rt.reading||e.nextTick(Vt,this)),Ze},$e.prototype.addListener=$e.prototype.on,$e.prototype.removeListener=function(G,te){const Ze=v.prototype.removeListener.call(this,G,te);return G==="readable"&&e.nextTick(Nt,this),Ze},$e.prototype.off=$e.prototype.removeListener,$e.prototype.removeAllListeners=function(G){const te=v.prototype.removeAllListeners.apply(this,arguments);return(G==="readable"||G===void 0)&&e.nextTick(Nt,this),te};function Nt(G){const te=G._readableState;te.readableListening=G.listenerCount("readable")>0,te.resumeScheduled&&te[Y]===!1?te.flowing=!0:G.listenerCount("data")>0?G.resume():te.readableListening||(te.flowing=null)}function Vt(G){w("readable nexttick read 0"),G.read(0)}$e.prototype.resume=function(){const G=this._readableState;return G.flowing||(w("resume"),G.flowing=!G.readableListening,it(this,G)),G[Y]=!1,this};function it(G,te){te.resumeScheduled||(te.resumeScheduled=!0,e.nextTick(Yt,G,te))}function Yt(G,te){w("resume",te.reading),te.reading||G.read(0),te.resumeScheduled=!1,G.emit("resume"),Ot(G),te.flowing&&!te.reading&&G.read(0)}$e.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Y]=!0,this};function Ot(G){const te=G._readableState;for(w("flow",te.flowing);te.flowing&&G.read()!==null;);}$e.prototype.wrap=function(G){let te=!1;G.on("data",rt=>{!this.push(rt)&&G.pause&&(te=!0,G.pause())}),G.on("end",()=>{this.push(null)}),G.on("error",rt=>{O(this,rt)}),G.on("close",()=>{this.destroy()}),G.on("destroy",()=>{this.destroy()}),this._read=()=>{te&&G.resume&&(te=!1,G.resume())};const Ze=s(G);for(let rt=1;rt<Ze.length;rt++){const gt=Ze[rt];this[gt]===void 0&&typeof G[gt]=="function"&&(this[gt]=G[gt].bind(G))}return this},$e.prototype[f]=function(){return Qi(this)},$e.prototype.iterator=function(G){return G!==void 0&&q(G,"options"),Qi(this,G)};function Qi(G,te){typeof G.read!="function"&&(G=$e.wrap(G,{objectMode:!0}));const Ze=ot(G,te);return Ze.stream=G,Ze}async function*ot(G,te){let Ze=z;function rt(Jt){this===G?(Ze(),Ze=z):Ze=Jt}G.on("readable",rt);let gt;const Pt=b(G,{writable:!1},Jt=>{gt=Jt?P(gt,Jt):null,Ze(),Ze=z});try{for(;;){const Jt=G.destroyed?null:G.read();if(Jt!==null)yield Jt;else{if(gt)throw gt;if(gt===null)return;await new l(rt)}}}catch(Jt){throw gt=P(gt,Jt),gt}finally{(gt||(te==null?void 0:te.destroyOnReturn)!==!1)&&(gt===void 0||G._readableState.autoDestroy)?E.destroyer(G,null):(G.off("readable",rt),Pt())}}o($e.prototype,{readable:{__proto__:null,get(){const G=this._readableState;return!!G&&G.readable!==!1&&!G.destroyed&&!G.errorEmitted&&!G.endEmitted},set(G){this._readableState&&(this._readableState.readable=!!G)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(G){this._readableState&&(this._readableState.destroyed=G)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(qe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Y]!==!1},set(G){this[Y]=!!G}}}),$e._fromList=Co;function Co(G,te){if(te.length===0)return null;let Ze;return te.objectMode?Ze=te.buffer.shift():!G||G>=te.length?(te.decoder?Ze=te.buffer.join(""):te.buffer.length===1?Ze=te.buffer.first():Ze=te.buffer.concat(te.length),te.buffer.clear()):Ze=te.buffer.consume(G,te.decoder),Ze}function jo(G){const te=G._readableState;w("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,e.nextTick(Ao,te,G))}function Ao(G,te){if(w("endReadableNT",G.endEmitted,G.length),!G.errored&&!G.closeEmitted&&!G.endEmitted&&G.length===0){if(G.endEmitted=!0,te.emit("end"),te.writable&&te.allowHalfOpen===!1)e.nextTick(os,te);else if(G.autoDestroy){const Ze=te._writableState;(!Ze||Ze.autoDestroy&&(Ze.finished||Ze.writable===!1))&&te.destroy()}}}function os(G){G.writable&&!G.writableEnded&&!G.destroyed&&G.end()}$e.from=function(G,te){return D($e,G,te)};let Zi;function Ks(){return Zi===void 0&&(Zi={}),Zi}return $e.fromWeb=function(G,te){return Ks().newStreamReadableFromReadableStream(G,te)},$e.toWeb=function(G,te){return Ks().newReadableStreamFromStreamReadable(G,te)},$e.wrap=function(G,te){var Ze,rt;return new $e({objectMode:(Ze=(rt=G.readableObjectMode)!==null&&rt!==void 0?rt:G.objectMode)!==null&&Ze!==void 0?Ze:!0,...te,destroy(gt,Pt){E.destroyer(G,gt),Pt(gt)}}).wrap(G)},V0}var q0,lj;function q1(){if(lj)return q0;lj=1;const e=Yl(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:l,SymbolHasInstance:u}=Rn();q0=q,q.WritableState=W;const{EventEmitter:c}=Fy(),f=V1().Stream,{Buffer:h}=za(),p=Ic(),{addAbortSignal:v}=zy(),{getHighWaterMark:y,getDefaultHighWaterMark:x}=Hy(),{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:P,ERR_UNKNOWN_ENCODING:V}=ti().codes,{errorOrDestroy:M}=p;s(q.prototype,f.prototype),s(q,f);function H(){}const ee=l("kOnFinished");function W(ne,fe,Se){typeof Se!="boolean"&&(Se=fe instanceof Fs()),this.objectMode=!!(ne&&ne.objectMode),Se&&(this.objectMode=this.objectMode||!!(ne&&ne.writableObjectMode)),this.highWaterMark=ne?y(this,ne,"writableHighWaterMark",Se):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ue=!!(ne&&ne.decodeStrings===!1);this.decodeStrings=!Ue,this.defaultEncoding=ne&&ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=O.bind(void 0,fe),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ne||ne.emitClose!==!1,this.autoDestroy=!ne||ne.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ee]=[]}function L(ne){ne.buffered=[],ne.bufferedIndex=0,ne.allBuffers=!0,ne.allNoop=!0}W.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function q(ne){const fe=this instanceof Fs();if(!fe&&!r(q,this))return new q(ne);this._writableState=new W(ne,this,fe),ne&&(typeof ne.write=="function"&&(this._write=ne.write),typeof ne.writev=="function"&&(this._writev=ne.writev),typeof ne.destroy=="function"&&(this._destroy=ne.destroy),typeof ne.final=="function"&&(this._final=ne.final),typeof ne.construct=="function"&&(this._construct=ne.construct),ne.signal&&v(ne.signal,this)),f.call(this,ne),p.construct(this,()=>{const Se=this._writableState;Se.writing||Ce(this,Se),Z(this,Se)})}i(q,u,{__proto__:null,value:function(ne){return r(this,ne)?!0:this!==q?!1:ne&&ne._writableState instanceof W}}),q.prototype.pipe=function(){M(this,new S)};function Y(ne,fe,Se,Ue){const We=ne._writableState;if(typeof Se=="function")Ue=Se,Se=We.defaultEncoding;else{if(!Se)Se=We.defaultEncoding;else if(Se!=="buffer"&&!h.isEncoding(Se))throw new V(Se);typeof Ue!="function"&&(Ue=H)}if(fe===null)throw new T;if(!We.objectMode)if(typeof fe=="string")We.decodeStrings!==!1&&(fe=h.from(fe,Se),Se="buffer");else if(fe instanceof h)Se="buffer";else if(f._isUint8Array(fe))fe=f._uint8ArrayToBuffer(fe),Se="buffer";else throw new m("chunk",["string","Buffer","Uint8Array"],fe);let Ke;return We.ending?Ke=new P:We.destroyed&&(Ke=new E("write")),Ke?(e.nextTick(Ue,Ke),M(ne,Ke,!0),Ke):(We.pendingcb++,re(ne,We,fe,Se,Ue))}q.prototype.write=function(ne,fe,Se){return Y(this,ne,fe,Se)===!0},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){const ne=this._writableState;ne.corked&&(ne.corked--,ne.writing||Ce(this,ne))},q.prototype.setDefaultEncoding=function(fe){if(typeof fe=="string"&&(fe=a(fe)),!h.isEncoding(fe))throw new V(fe);return this._writableState.defaultEncoding=fe,this};function re(ne,fe,Se,Ue,We){const Ke=fe.objectMode?1:Se.length;fe.length+=Ke;const he=fe.length<fe.highWaterMark;return he||(fe.needDrain=!0),fe.writing||fe.corked||fe.errored||!fe.constructed?(fe.buffered.push({chunk:Se,encoding:Ue,callback:We}),fe.allBuffers&&Ue!=="buffer"&&(fe.allBuffers=!1),fe.allNoop&&We!==H&&(fe.allNoop=!1)):(fe.writelen=Ke,fe.writecb=We,fe.writing=!0,fe.sync=!0,ne._write(Se,Ue,fe.onwrite),fe.sync=!1),he&&!fe.errored&&!fe.destroyed}function D(ne,fe,Se,Ue,We,Ke,he){fe.writelen=Ue,fe.writecb=he,fe.writing=!0,fe.sync=!0,fe.destroyed?fe.onwrite(new E("write")):Se?ne._writev(We,fe.onwrite):ne._write(We,Ke,fe.onwrite),fe.sync=!1}function z(ne,fe,Se,Ue){--fe.pendingcb,Ue(Se),ce(fe),M(ne,Se)}function O(ne,fe){const Se=ne._writableState,Ue=Se.sync,We=Se.writecb;if(typeof We!="function"){M(ne,new w);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,fe?(fe.stack,Se.errored||(Se.errored=fe),ne._readableState&&!ne._readableState.errored&&(ne._readableState.errored=fe),Ue?e.nextTick(z,ne,Se,fe,We):z(ne,Se,fe,We)):(Se.buffered.length>Se.bufferedIndex&&Ce(ne,Se),Ue?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===We?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:We,stream:ne,state:Se},e.nextTick(K,Se.afterWriteTickInfo)):se(ne,Se,1,We))}function K({stream:ne,state:fe,count:Se,cb:Ue}){return fe.afterWriteTickInfo=null,se(ne,fe,Se,Ue)}function se(ne,fe,Se,Ue){for(!fe.ending&&!ne.destroyed&&fe.length===0&&fe.needDrain&&(fe.needDrain=!1,ne.emit("drain"));Se-- >0;)fe.pendingcb--,Ue();fe.destroyed&&ce(fe),Z(ne,fe)}function ce(ne){if(ne.writing)return;for(let We=ne.bufferedIndex;We<ne.buffered.length;++We){var fe;const{chunk:Ke,callback:he}=ne.buffered[We],Fe=ne.objectMode?1:Ke.length;ne.length-=Fe,he((fe=ne.errored)!==null&&fe!==void 0?fe:new E("write"))}const Se=ne[ee].splice(0);for(let We=0;We<Se.length;We++){var Ue;Se[We]((Ue=ne.errored)!==null&&Ue!==void 0?Ue:new E("end"))}L(ne)}function Ce(ne,fe){if(fe.corked||fe.bufferProcessing||fe.destroyed||!fe.constructed)return;const{buffered:Se,bufferedIndex:Ue,objectMode:We}=fe,Ke=Se.length-Ue;if(!Ke)return;let he=Ue;if(fe.bufferProcessing=!0,Ke>1&&ne._writev){fe.pendingcb-=Ke-1;const Fe=fe.allNoop?H:$e=>{for(let At=he;At<Se.length;++At)Se[At].callback($e)},qe=fe.allNoop&&he===0?Se:t(Se,he);qe.allBuffers=fe.allBuffers,D(ne,fe,!0,fe.length,qe,"",Fe),L(fe)}else{do{const{chunk:Fe,encoding:qe,callback:$e}=Se[he];Se[he++]=null;const At=We?1:Fe.length;D(ne,fe,!1,At,Fe,qe,$e)}while(he<Se.length&&!fe.writing);he===Se.length?L(fe):he>256?(Se.splice(0,he),fe.bufferedIndex=0):fe.bufferedIndex=he}fe.bufferProcessing=!1}q.prototype._write=function(ne,fe,Se){if(this._writev)this._writev([{chunk:ne,encoding:fe}],Se);else throw new b("_write()")},q.prototype._writev=null,q.prototype.end=function(ne,fe,Se){const Ue=this._writableState;typeof ne=="function"?(Se=ne,ne=null,fe=null):typeof fe=="function"&&(Se=fe,fe=null);let We;if(ne!=null){const Ke=Y(this,ne,fe);Ke instanceof n&&(We=Ke)}return Ue.corked&&(Ue.corked=1,this.uncork()),We||(!Ue.errored&&!Ue.ending?(Ue.ending=!0,Z(this,Ue,!0),Ue.ended=!0):Ue.finished?We=new A("end"):Ue.destroyed&&(We=new E("end"))),typeof Se=="function"&&(We||Ue.finished?e.nextTick(Se,We):Ue[ee].push(Se)),this};function Ie(ne){return ne.ending&&!ne.destroyed&&ne.constructed&&ne.length===0&&!ne.errored&&ne.buffered.length===0&&!ne.finished&&!ne.writing&&!ne.errorEmitted&&!ne.closeEmitted}function Re(ne,fe){let Se=!1;function Ue(We){if(Se){M(ne,We!=null?We:w());return}if(Se=!0,fe.pendingcb--,We){const Ke=fe[ee].splice(0);for(let he=0;he<Ke.length;he++)Ke[he](We);M(ne,We,fe.sync)}else Ie(fe)&&(fe.prefinished=!0,ne.emit("prefinish"),fe.pendingcb++,e.nextTick(ie,ne,fe))}fe.sync=!0,fe.pendingcb++;try{ne._final(Ue)}catch(We){Ue(We)}fe.sync=!1}function F(ne,fe){!fe.prefinished&&!fe.finalCalled&&(typeof ne._final=="function"&&!fe.destroyed?(fe.finalCalled=!0,Re(ne,fe)):(fe.prefinished=!0,ne.emit("prefinish")))}function Z(ne,fe,Se){Ie(fe)&&(F(ne,fe),fe.pendingcb===0&&(Se?(fe.pendingcb++,e.nextTick((Ue,We)=>{Ie(We)?ie(Ue,We):We.pendingcb--},ne,fe)):Ie(fe)&&(fe.pendingcb++,ie(ne,fe))))}function ie(ne,fe){fe.pendingcb--,fe.finished=!0;const Se=fe[ee].splice(0);for(let Ue=0;Ue<Se.length;Ue++)Se[Ue]();if(ne.emit("finish"),fe.autoDestroy){const Ue=ne._readableState;(!Ue||Ue.autoDestroy&&(Ue.endEmitted||Ue.readable===!1))&&ne.destroy()}}o(q.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(ne){this._writableState&&(this._writableState.destroyed=ne)}},writable:{__proto__:null,get(){const ne=this._writableState;return!!ne&&ne.writable!==!1&&!ne.destroyed&&!ne.errored&&!ne.ending&&!ne.ended},set(ne){this._writableState&&(this._writableState.writable=!!ne)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const ne=this._writableState;return ne?!ne.destroyed&&!ne.ending&&ne.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const De=p.destroy;q.prototype.destroy=function(ne,fe){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[ee].length)&&e.nextTick(ce,Se),De.call(this,ne,fe),this},q.prototype._undestroy=p.undestroy,q.prototype._destroy=function(ne,fe){fe(ne)},q.prototype[c.captureRejectionSymbol]=function(ne){this.destroy(ne)};let Ye;function ze(){return Ye===void 0&&(Ye={}),Ye}return q.fromWeb=function(ne,fe){return ze().newStreamWritableFromWritableStream(ne,fe)},q.toWeb=function(ne){return ze().newWritableStreamFromStreamWritable(ne)},q0}var K0,uj;function Rre(){if(uj)return K0;uj=1;const e=Yl(),t=za(),{isReadable:n,isWritable:r,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:c}=qs(),f=Ha(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:v}}=ti(),{destroyer:y}=Ic(),x=Fs(),m=Uy(),b=q1(),{createDeferredPromise:w}=gi(),S=wO(),E=globalThis.Blob||t.Blob,A=typeof E<"u"?function(W){return W instanceof E}:function(W){return!1},T=globalThis.AbortController||Wf().AbortController,{FunctionPrototypeCall:P}=Rn();class V extends x{constructor(W){super(W),(W==null?void 0:W.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(W==null?void 0:W.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}K0=function ee(W,L){if(l(W))return W;if(s(W))return H({readable:W});if(a(W))return H({writable:W});if(o(W))return H({writable:!1,readable:!1});if(u(W))return H({readable:m.fromWeb(W)});if(c(W))return H({writable:b.fromWeb(W)});if(typeof W=="function"){const{value:Y,write:re,final:D,destroy:z}=M(W);if(i(Y))return S(V,Y,{objectMode:!0,write:re,final:D,destroy:z});const O=Y==null?void 0:Y.then;if(typeof O=="function"){let K;const se=P(O,Y,ce=>{if(ce!=null)throw new v("nully","body",ce)},ce=>{y(K,ce)});return K=new V({objectMode:!0,readable:!1,write:re,final(ce){D(async()=>{try{await se,e.nextTick(ce,null)}catch(Ce){e.nextTick(ce,Ce)}})},destroy:z})}throw new v("Iterable, AsyncIterable or AsyncFunction",L,Y)}if(A(W))return ee(W.arrayBuffer());if(i(W))return S(V,W,{objectMode:!0,writable:!1});if(u(W==null?void 0:W.readable)&&c(W==null?void 0:W.writable))return V.fromWeb(W);if(typeof(W==null?void 0:W.writable)=="object"||typeof(W==null?void 0:W.readable)=="object"){const Y=W!=null&&W.readable?s(W==null?void 0:W.readable)?W==null?void 0:W.readable:ee(W.readable):void 0,re=W!=null&&W.writable?a(W==null?void 0:W.writable)?W==null?void 0:W.writable:ee(W.writable):void 0;return H({readable:Y,writable:re})}const q=W==null?void 0:W.then;if(typeof q=="function"){let Y;return P(q,W,re=>{re!=null&&Y.push(re),Y.push(null)},re=>{y(Y,re)}),Y=new V({objectMode:!0,writable:!1,read(){}})}throw new p(L,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],W)};function M(ee){let{promise:W,resolve:L}=w();const q=new T,Y=q.signal;return{value:ee(async function*(){for(;;){const D=W;W=null;const{chunk:z,done:O,cb:K}=await D;if(e.nextTick(K),O)return;if(Y.aborted)throw new h(void 0,{cause:Y.reason});({promise:W,resolve:L}=w()),yield z}}(),{signal:Y}),write(D,z,O){const K=L;L=null,K({chunk:D,done:!1,cb:O})},final(D){const z=L;L=null,z({done:!0,cb:D})},destroy(D,z){q.abort(),z(D)}}}function H(ee){const W=ee.readable&&typeof ee.readable.read!="function"?m.wrap(ee.readable):ee.readable,L=ee.writable;let q=!!n(W),Y=!!r(L),re,D,z,O,K;function se(ce){const Ce=O;O=null,Ce?Ce(ce):ce&&K.destroy(ce)}return K=new V({readableObjectMode:!!(W!=null&&W.readableObjectMode),writableObjectMode:!!(L!=null&&L.writableObjectMode),readable:q,writable:Y}),Y&&(f(L,ce=>{Y=!1,ce&&y(W,ce),se(ce)}),K._write=function(ce,Ce,Ie){L.write(ce,Ce)?Ie():re=Ie},K._final=function(ce){L.end(),D=ce},L.on("drain",function(){if(re){const ce=re;re=null,ce()}}),L.on("finish",function(){if(D){const ce=D;D=null,ce()}})),q&&(f(W,ce=>{q=!1,ce&&y(W,ce),se(ce)}),W.on("readable",function(){if(z){const ce=z;z=null,ce()}}),W.on("end",function(){K.push(null)}),K._read=function(){for(;;){const ce=W.read();if(ce===null){z=K._read;return}if(!K.push(ce))return}}),K._destroy=function(ce,Ce){!ce&&O!==null&&(ce=new h),z=null,re=null,D=null,O===null?Ce(ce):(O=Ce,y(L,ce),y(W,ce))},K}return K0}var G0,cj;function Fs(){if(cj)return G0;cj=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Rn();G0=s;const i=Uy(),o=q1();r(s.prototype,i.prototype),r(s,i);{const c=n(o.prototype);for(let f=0;f<c.length;f++){const h=c[f];s.prototype[h]||(s.prototype[h]=o.prototype[h])}}function s(c){if(!(this instanceof s))return new s(c);i.call(this,c),o.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let a;function l(){return a===void 0&&(a={}),a}s.fromWeb=function(c,f){return l().newStreamDuplexFromReadableWritablePair(c,f)},s.toWeb=function(c){return l().newReadableWritablePairFromDuplex(c)};let u;return s.from=function(c){return u||(u=Rre()),u(c,"body")},G0}var Y0,dj;function bO(){if(dj)return Y0;dj=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Rn();Y0=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=ti().codes,r=Fs(),{getHighWaterMark:i}=Hy();e(s.prototype,r.prototype),e(s,r);const o=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const c=u?i(this,u,"readableHighWaterMark",!0):null;c===0&&(u={...u,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[o]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function a(u){typeof this._flush=="function"&&!this.destroyed?this._flush((c,f)=>{if(c){u?u(c):this.destroy(c);return}f!=null&&this.push(f),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==a&&a.call(this)}return s.prototype._final=a,s.prototype._transform=function(u,c,f){throw new n("_transform()")},s.prototype._write=function(u,c,f){const h=this._readableState,p=this._writableState,v=h.length;this._transform(u,c,(y,x)=>{if(y){f(y);return}x!=null&&this.push(x),p.ended||v===h.length||h.length<h.highWaterMark?f():this[o]=f})},s.prototype._read=function(){if(this[o]){const u=this[o];this[o]=null,u()}},Y0}var X0,fj;function xO(){if(fj)return X0;fj=1;const{ObjectSetPrototypeOf:e}=Rn();X0=n;const t=bO();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,i,o){o(null,r)},X0}var J0,hj;function K1(){if(hj)return J0;hj=1;const e=Yl(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:i}=Rn(),o=Ha(),{once:s}=gi(),a=Ic(),l=Fs(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:y}=ti(),{validateFunction:x,validateAbortSignal:m}=yh(),{isIterable:b,isReadable:w,isReadableNodeStream:S,isNodeStream:E,isTransformStream:A,isWebStream:T,isReadableStream:P,isReadableFinished:V}=qs(),M=globalThis.AbortController||Wf().AbortController;let H,ee,W;function L(ce,Ce,Ie){let Re=!1;ce.on("close",()=>{Re=!0});const F=o(ce,{readable:Ce,writable:Ie},Z=>{Re=!Z});return{destroy:Z=>{Re||(Re=!0,a.destroyer(ce,Z||new p("pipe")))},cleanup:F}}function q(ce){return x(ce[ce.length-1],"streams[stream.length - 1]"),ce.pop()}function Y(ce){if(b(ce))return ce;if(S(ce))return re(ce);throw new c("val",["Readable","Iterable","AsyncIterable"],ce)}async function*re(ce){ee||(ee=Uy()),yield*ee.prototype[r].call(ce)}async function D(ce,Ce,Ie,{end:Re}){let F,Z=null;const ie=ze=>{if(ze&&(F=ze),Z){const ne=Z;Z=null,ne()}},De=()=>new n((ze,ne)=>{F?ne(F):Z=()=>{F?ne(F):ze()}});Ce.on("drain",ie);const Ye=o(Ce,{readable:!1},ie);try{Ce.writableNeedDrain&&await De();for await(const ze of ce)Ce.write(ze)||await De();Re&&(Ce.end(),await De()),Ie()}catch(ze){Ie(F!==ze?u(F,ze):ze)}finally{Ye(),Ce.off("drain",ie)}}async function z(ce,Ce,Ie,{end:Re}){A(Ce)&&(Ce=Ce.writable);const F=Ce.getWriter();try{for await(const Z of ce)await F.ready,F.write(Z).catch(()=>{});await F.ready,Re&&await F.close(),Ie()}catch(Z){try{await F.abort(Z),Ie(Z)}catch(ie){Ie(ie)}}}function O(...ce){return K(ce,s(q(ce)))}function K(ce,Ce,Ie){if(ce.length===1&&t(ce[0])&&(ce=ce[0]),ce.length<2)throw new h("streams");const Re=new M,F=Re.signal,Z=Ie==null?void 0:Ie.signal,ie=[];m(Z,"options.signal");function De(){We(new y)}W=W||gi().addAbortListener;let Ye;Z&&(Ye=W(Z,De));let ze,ne;const fe=[];let Se=0;function Ue(qe){We(qe,--Se===0)}function We(qe,$e){var At;if(qe&&(!ze||ze.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ze=qe),!(!ze&&!$e)){for(;fe.length;)fe.shift()(ze);(At=Ye)===null||At===void 0||At[i](),Re.abort(),$e&&(ze||ie.forEach(fn=>fn()),e.nextTick(Ce,ze,ne))}}let Ke;for(let qe=0;qe<ce.length;qe++){const $e=ce[qe],At=qe<ce.length-1,fn=qe>0,Ct=At||(Ie==null?void 0:Ie.end)!==!1,tn=qe===ce.length-1;if(E($e)){let $=function(C){C&&C.name!=="AbortError"&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ue(C)};if(Ct){const{destroy:C,cleanup:N}=L($e,At,fn);fe.push(C),w($e)&&tn&&ie.push(N)}$e.on("error",$),w($e)&&tn&&ie.push(()=>{$e.removeListener("error",$)})}if(qe===0)if(typeof $e=="function"){if(Ke=$e({signal:F}),!b(Ke))throw new f("Iterable, AsyncIterable or Stream","source",Ke)}else b($e)||S($e)||A($e)?Ke=$e:Ke=l.from($e);else if(typeof $e=="function"){if(A(Ke)){var he;Ke=Y((he=Ke)===null||he===void 0?void 0:he.readable)}else Ke=Y(Ke);if(Ke=$e(Ke,{signal:F}),At){if(!b(Ke,!0))throw new f("AsyncIterable","transform[".concat(qe-1,"]"),Ke)}else{var Fe;H||(H=xO());const $=new H({objectMode:!0}),C=(Fe=Ke)===null||Fe===void 0?void 0:Fe.then;if(typeof C=="function")Se++,C.call(Ke,de=>{ne=de,de!=null&&$.write(de),Ct&&$.end(),e.nextTick(Ue)},de=>{$.destroy(de),e.nextTick(Ue,de)});else if(b(Ke,!0))Se++,D(Ke,$,Ue,{end:Ct});else if(P(Ke)||A(Ke)){const de=Ke.readable||Ke;Se++,D(de,$,Ue,{end:Ct})}else throw new f("AsyncIterable or Promise","destination",Ke);Ke=$;const{destroy:N,cleanup:X}=L(Ke,!1,!0);fe.push(N),tn&&ie.push(X)}}else if(E($e)){if(S(Ke)){Se+=2;const $=se(Ke,$e,Ue,{end:Ct});w($e)&&tn&&ie.push($)}else if(A(Ke)||P(Ke)){const $=Ke.readable||Ke;Se++,D($,$e,Ue,{end:Ct})}else if(b(Ke))Se++,D(Ke,$e,Ue,{end:Ct});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Ke=$e}else if(T($e)){if(S(Ke))Se++,z(Y(Ke),$e,Ue,{end:Ct});else if(P(Ke)||b(Ke))Se++,z(Ke,$e,Ue,{end:Ct});else if(A(Ke))Se++,z(Ke.readable,$e,Ue,{end:Ct});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Ke=$e}else Ke=l.from($e)}return(F!=null&&F.aborted||Z!=null&&Z.aborted)&&e.nextTick(De),Ke}function se(ce,Ce,Ie,{end:Re}){let F=!1;if(Ce.on("close",()=>{F||Ie(new v)}),ce.pipe(Ce,{end:!1}),Re){let Z=function(){F=!0,Ce.end()};V(ce)?e.nextTick(Z):ce.once("end",Z)}else Ie();return o(ce,{readable:!0,writable:!1},Z=>{const ie=ce._readableState;Z&&Z.code==="ERR_STREAM_PREMATURE_CLOSE"&&ie&&ie.ended&&!ie.errored&&!ie.errorEmitted?ce.once("end",Ie).once("error",Ie):Ie(Z)}),o(Ce,{readable:!1,writable:!0},Ie)}return J0={pipelineImpl:K,pipeline:O},J0}var Q0,pj;function _O(){if(pj)return Q0;pj=1;const{pipeline:e}=K1(),t=Fs(),{destroyer:n}=Ic(),{isNodeStream:r,isReadable:i,isWritable:o,isWebStream:s,isTransformStream:a,isWritableStream:l,isReadableStream:u}=qs(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:h}}=ti(),p=Ha();return Q0=function(...y){if(y.length===0)throw new h("streams");if(y.length===1)return t.from(y[0]);const x=[...y];if(typeof y[0]=="function"&&(y[0]=t.from(y[0])),typeof y[y.length-1]=="function"){const H=y.length-1;y[H]=t.from(y[H])}for(let H=0;H<y.length;++H)if(!(!r(y[H])&&!s(y[H]))){if(H<y.length-1&&!(i(y[H])||u(y[H])||a(y[H])))throw new f("streams[".concat(H,"]"),x[H],"must be readable");if(H>0&&!(o(y[H])||l(y[H])||a(y[H])))throw new f("streams[".concat(H,"]"),x[H],"must be writable")}let m,b,w,S,E;function A(H){const ee=S;S=null,ee?ee(H):H?E.destroy(H):!M&&!V&&E.destroy()}const T=y[0],P=e(y,A),V=!!(o(T)||l(T)||a(T)),M=!!(i(P)||u(P)||a(P));if(E=new t({writableObjectMode:!!(T!=null&&T.writableObjectMode),readableObjectMode:!!(P!=null&&P.readableObjectMode),writable:V,readable:M}),V){if(r(T))E._write=function(ee,W,L){T.write(ee,W)?L():m=L},E._final=function(ee){T.end(),b=ee},T.on("drain",function(){if(m){const ee=m;m=null,ee()}});else if(s(T)){const W=(a(T)?T.writable:T).getWriter();E._write=async function(L,q,Y){try{await W.ready,W.write(L).catch(()=>{}),Y()}catch(re){Y(re)}},E._final=async function(L){try{await W.ready,W.close().catch(()=>{}),b=L}catch(q){L(q)}}}const H=a(P)?P.readable:P;p(H,()=>{if(b){const ee=b;b=null,ee()}})}if(M){if(r(P))P.on("readable",function(){if(w){const H=w;w=null,H()}}),P.on("end",function(){E.push(null)}),E._read=function(){for(;;){const H=P.read();if(H===null){w=E._read;return}if(!E.push(H))return}};else if(s(P)){const ee=(a(P)?P.readable:P).getReader();E._read=async function(){for(;;)try{const{value:W,done:L}=await ee.read();if(!E.push(W))return;if(L){E.push(null);return}}catch(W){return}}}}return E._destroy=function(H,ee){!H&&S!==null&&(H=new c),w=null,m=null,b=null,S===null?ee(H):(S=ee,r(P)&&n(P,H))},E},Q0}var gj;function Tre(){if(gj)return pp;gj=1;const e=globalThis.AbortController||Wf().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:o}=ti(),{validateAbortSignal:s,validateInteger:a,validateObject:l}=yh(),u=Rn().Symbol("kWeak"),c=Rn().Symbol("kResistStopPropagation"),{finished:f}=Ha(),h=_O(),{addAbortSignalNoValidate:p}=zy(),{isWritable:v,isNodeStream:y}=qs(),{deprecate:x}=gi(),{ArrayPrototypePush:m,Boolean:b,MathFloor:w,Number:S,NumberIsNaN:E,Promise:A,PromiseReject:T,PromiseResolve:P,PromisePrototypeThen:V,Symbol:M}=Rn(),H=M("kEmpty"),ee=M("kEof");function W(Z,ie){if(ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal"),y(Z)&&!v(Z))throw new t("stream",Z,"must be writable");const De=h(this,Z);return ie!=null&&ie.signal&&p(ie.signal,De),De}function L(Z,ie){if(typeof Z!="function")throw new n("fn",["Function","AsyncFunction"],Z);ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal");let De=1;(ie==null?void 0:ie.concurrency)!=null&&(De=w(ie.concurrency));let Ye=De-1;return(ie==null?void 0:ie.highWaterMark)!=null&&(Ye=w(ie.highWaterMark)),a(De,"options.concurrency",1),a(Ye,"options.highWaterMark",0),Ye+=De,(async function*(){const ne=gi().AbortSignalAny([ie==null?void 0:ie.signal].filter(b)),fe=this,Se=[],Ue={signal:ne};let We,Ke,he=!1,Fe=0;function qe(){he=!0,$e()}function $e(){Fe-=1,At()}function At(){Ke&&!he&&Fe<De&&Se.length<Ye&&(Ke(),Ke=null)}async function fn(){try{for await(let Ct of fe){if(he)return;if(ne.aborted)throw new o;try{if(Ct=Z(Ct,Ue),Ct===H)continue;Ct=P(Ct)}catch(tn){Ct=T(tn)}Fe+=1,V(Ct,$e,qe),Se.push(Ct),We&&(We(),We=null),!he&&(Se.length>=Ye||Fe>=De)&&await new A(tn=>{Ke=tn})}Se.push(ee)}catch(Ct){const tn=T(Ct);V(tn,$e,qe),Se.push(tn)}finally{he=!0,We&&(We(),We=null)}}fn();try{for(;;){for(;Se.length>0;){const Ct=await Se[0];if(Ct===ee)return;if(ne.aborted)throw new o;Ct!==H&&(yield Ct),Se.shift(),At()}await new A(Ct=>{We=Ct})}}finally{he=!0,Ke&&(Ke(),Ke=null)}}).call(this)}function q(Z=void 0){return Z!=null&&l(Z,"options"),(Z==null?void 0:Z.signal)!=null&&s(Z.signal,"options.signal"),(async function*(){let De=0;for await(const ze of this){var Ye;if(Z!=null&&(Ye=Z.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o({cause:Z.signal.reason});yield[De++,ze]}}).call(this)}async function Y(Z,ie=void 0){for await(const De of O.call(this,Z,ie))return!0;return!1}async function re(Z,ie=void 0){if(typeof Z!="function")throw new n("fn",["Function","AsyncFunction"],Z);return!await Y.call(this,async(...De)=>!await Z(...De),ie)}async function D(Z,ie){for await(const De of O.call(this,Z,ie))return De}async function z(Z,ie){if(typeof Z!="function")throw new n("fn",["Function","AsyncFunction"],Z);async function De(Ye,ze){return await Z(Ye,ze),H}for await(const Ye of L.call(this,De,ie));}function O(Z,ie){if(typeof Z!="function")throw new n("fn",["Function","AsyncFunction"],Z);async function De(Ye,ze){return await Z(Ye,ze)?Ye:H}return L.call(this,De,ie)}class K extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function se(Z,ie,De){var Ye;if(typeof Z!="function")throw new n("reducer",["Function","AsyncFunction"],Z);De!=null&&l(De,"options"),(De==null?void 0:De.signal)!=null&&s(De.signal,"options.signal");let ze=arguments.length>1;if(De!=null&&(Ye=De.signal)!==null&&Ye!==void 0&&Ye.aborted){const We=new o(void 0,{cause:De.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(We)),We}const ne=new e,fe=ne.signal;if(De!=null&&De.signal){const We={once:!0,[u]:this,[c]:!0};De.signal.addEventListener("abort",()=>ne.abort(),We)}let Se=!1;try{for await(const We of this){var Ue;if(Se=!0,De!=null&&(Ue=De.signal)!==null&&Ue!==void 0&&Ue.aborted)throw new o;ze?ie=await Z(ie,We,{signal:fe}):(ie=We,ze=!0)}if(!Se&&!ze)throw new K}finally{ne.abort()}return ie}async function ce(Z){Z!=null&&l(Z,"options"),(Z==null?void 0:Z.signal)!=null&&s(Z.signal,"options.signal");const ie=[];for await(const Ye of this){var De;if(Z!=null&&(De=Z.signal)!==null&&De!==void 0&&De.aborted)throw new o(void 0,{cause:Z.signal.reason});m(ie,Ye)}return ie}function Ce(Z,ie){const De=L.call(this,Z,ie);return(async function*(){for await(const ze of De)yield*ze}).call(this)}function Ie(Z){if(Z=S(Z),E(Z))return 0;if(Z<0)throw new i("number",">= 0",Z);return Z}function Re(Z,ie=void 0){return ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal"),Z=Ie(Z),(async function*(){var Ye;if(ie!=null&&(Ye=ie.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o;for await(const ne of this){var ze;if(ie!=null&&(ze=ie.signal)!==null&&ze!==void 0&&ze.aborted)throw new o;Z--<=0&&(yield ne)}}).call(this)}function F(Z,ie=void 0){return ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal"),Z=Ie(Z),(async function*(){var Ye;if(ie!=null&&(Ye=ie.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o;for await(const ne of this){var ze;if(ie!=null&&(ze=ie.signal)!==null&&ze!==void 0&&ze.aborted)throw new o;if(Z-- >0&&(yield ne),Z<=0)return}}).call(this)}return pp.streamReturningOperators={asIndexedPairs:x(q,"readable.asIndexedPairs will be removed in a future version."),drop:Re,filter:O,flatMap:Ce,map:L,take:F,compose:W},pp.promiseReturningOperators={every:re,forEach:z,reduce:se,toArray:ce,some:Y,find:D},pp}var Z0,mj;function SO(){if(mj)return Z0;mj=1;const{ArrayPrototypePop:e,Promise:t}=Rn(),{isIterable:n,isNodeStream:r,isWebStream:i}=qs(),{pipelineImpl:o}=K1(),{finished:s}=Ha();EO();function a(...l){return new t((u,c)=>{let f,h;const p=l[l.length-1];if(p&&typeof p=="object"&&!r(p)&&!n(p)&&!i(p)){const v=e(l);f=v.signal,h=v.end}o(l,(v,y)=>{v?c(v):u(y)},{signal:f,end:h})})}return Z0={finished:s,pipeline:a},Z0}var yj;function EO(){if(yj)return N0.exports;yj=1;const{Buffer:e}=za(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Rn(),{promisify:{custom:i}}=gi(),{streamReturningOperators:o,promiseReturningOperators:s}=Tre(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=ti(),l=_O(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:c}=Hy(),{pipeline:f}=K1(),{destroyer:h}=Ic(),p=Ha(),v=SO(),y=qs(),x=N0.exports=V1().Stream;x.isDestroyed=y.isDestroyed,x.isDisturbed=y.isDisturbed,x.isErrored=y.isErrored,x.isReadable=y.isReadable,x.isWritable=y.isWritable,x.Readable=Uy();for(const b of n(o)){let S=function(...E){if(new.target)throw a();return x.Readable.from(r(w,this,E))};const w=o[b];t(S,"name",{__proto__:null,value:w.name}),t(S,"length",{__proto__:null,value:w.length}),t(x.Readable.prototype,b,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const b of n(s)){let S=function(...E){if(new.target)throw a();return r(w,this,E)};const w=s[b];t(S,"name",{__proto__:null,value:w.name}),t(S,"length",{__proto__:null,value:w.length}),t(x.Readable.prototype,b,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}x.Writable=q1(),x.Duplex=Fs(),x.Transform=bO(),x.PassThrough=xO(),x.pipeline=f;const{addAbortSignal:m}=zy();return x.addAbortSignal=m,x.finished=p,x.destroy=h,x.compose=l,x.setDefaultHighWaterMark=u,x.getDefaultHighWaterMark=c,t(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(f,i,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(p,i,{__proto__:null,enumerable:!0,get(){return v.finished}}),x.Stream=x,x._isUint8Array=function(w){return w instanceof Uint8Array},x._uint8ArrayToBuffer=function(w){return e.from(w.buffer,w.byteOffset,w.byteLength)},N0.exports}var vj;function wj(){return vj||(vj=1,function(e){const t=EO(),n=SO(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(A0)),A0.exports}/*!
 LZ-UTF8 v0.6.3

 Copyright (c) 2021, Rotem Dan
 Released under the MIT license.

 Build date: 2022-07-06 

 Please report any issue at https://github.com/rotemdan/lzutf8.js/issues
*/(function(e){var t;(function(n){n.runningInNodeJS=function(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"},n.runningInMainNodeJSModule=function(){return n.runningInNodeJS()&&require.main===e},n.commonJSAvailable=function(){return!0},n.runningInWebWorker=function(){return typeof window>"u"&&typeof self=="object"&&typeof self.addEventListener=="function"&&typeof self.close=="function"},n.runningInNodeChildProcess=function(){return n.runningInNodeJS()&&typeof process.send=="function"},n.runningInNullOrigin=function(){return typeof window!="object"||typeof window.location!="object"||typeof document!="object"?!1:document.location.protocol!=="http:"&&document.location.protocol!=="https:"},n.webWorkersAvailable=function(){return!(typeof Worker!="function"||n.runningInNullOrigin()||n.runningInNodeJS()||navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},n.log=function(r,i){i===void 0&&(i=!1),typeof console=="object"&&(console.log(r),i&&typeof document=="object"&&(document.body.innerHTML+=r+"<br/>"))},n.createErrorMessage=function(r,i){if(i===void 0&&(i="Unhandled exception"),r==null)return i;if(i+=": ",typeof r.content=="object"){if(n.runningInNodeJS())return i+r.content.stack;var o=JSON.stringify(r.content);return o!=="{}"?i+o:i+r.content}else return typeof r.content=="string"?i+r.content:i+r},n.printExceptionAndStackTraceToConsole=function(r,i){i===void 0&&(i="Unhandled exception"),n.log(n.createErrorMessage(r,i))},n.getGlobalObject=function(){return typeof Hi=="object"?Hi:typeof window=="object"?window:typeof self=="object"?self:{}},n.toString=Object.prototype.toString,n.commonJSAvailable()&&(e.exports=n)})(t||(t={})),function(n){if(typeof Uint8Array=="function"&&new Uint8Array(1).subarray(1).byteLength!==0){var r=function(a,l){var u=function(f,h,p){return f<h?h:f>p?p:f};a=a|0,l=l|0,arguments.length<1&&(a=0),arguments.length<2&&(l=this.length),a<0&&(a=this.length+a),l<0&&(l=this.length+l),a=u(a,0,this.length),l=u(l,0,this.length);var c=l-a;return c<0&&(c=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,c)},i=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],o=void 0;if(typeof window=="object"?o=window:typeof self=="object"&&(o=self),o!==void 0)for(var s=0;s<i.length;s++)o[i[s]]&&(o[i[s]].prototype.subarray=r)}}();var t;(function(n){var r=function(){function i(){}return i.compressAsync=function(o,s,a){var l=new n.Timer,u=new n.Compressor;if(!a)throw new TypeError("compressAsync: No callback argument given");if(typeof o=="string")o=n.encodeUTF8(o);else if(o==null||!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));return}var c=n.ArrayTools.splitByteArray(o,s.blockSize),f=[],h=function(p){if(p<c.length){var v=void 0;try{v=u.compressBlock(c[p])}catch(x){a(void 0,x);return}f.push(v),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var y=n.ArrayTools.concatUint8Arrays(f);n.enqueueImmediate(function(){var x;try{x=n.CompressionCommon.encodeCompressedBytes(y,s.outputEncoding)}catch(m){a(void 0,m);return}n.enqueueImmediate(function(){return a(x)})})}};n.enqueueImmediate(function(){return h(0)})},i.createCompressionStream=function(){var o=new n.Compressor,s=wj(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,c){var f;try{f=n.BufferTools.uint8ArrayToBuffer(o.compressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(f),c()},a},i}();n.AsyncCompressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(){}return i.decompressAsync=function(o,s,a){if(!a)throw new TypeError("decompressAsync: No callback argument given");var l=new n.Timer;try{o=n.CompressionCommon.decodeCompressedBytes(o,s.inputEncoding)}catch(p){a(void 0,p);return}var u=new n.Decompressor,c=n.ArrayTools.splitByteArray(o,s.blockSize),f=[],h=function(p){if(p<c.length){var v=void 0;try{v=u.decompressBlock(c[p])}catch(x){a(void 0,x);return}f.push(v),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var y=n.ArrayTools.concatUint8Arrays(f);n.enqueueImmediate(function(){var x;try{x=n.CompressionCommon.encodeDecompressedBytes(y,s.outputEncoding)}catch(m){a(void 0,m);return}n.enqueueImmediate(function(){return a(x)})})}};n.enqueueImmediate(function(){return h(0)})},i.createDecompressionStream=function(){var o=new n.Decompressor,s=wj(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,c){var f;try{f=n.BufferTools.uint8ArrayToBuffer(o.decompressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(f),c()},a},i}();n.AsyncDecompressor=r})(t||(t={}));var t;(function(n){var r;(function(i){i.compressAsync=function(o,s,a){if(s.inputEncoding=="ByteArray"&&!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: input is not a Uint8Array"));return}var l={token:Math.random().toString(),type:"compress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(c){var f=c.data;!f||f.token!=l.token||(i.globalWorker.removeEventListener("message",u),f.type=="error"?a(void 0,new Error(f.error)):a(f.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.decompressAsync=function(o,s,a){var l={token:Math.random().toString(),type:"decompress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(c){var f=c.data;!f||f.token!=l.token||(i.globalWorker.removeEventListener("message",u),f.type=="error"?a(void 0,new Error(f.error)):a(f.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.installWebWorkerIfNeeded=function(){typeof self=="object"&&self.document===void 0&&self.addEventListener!=null&&(self.addEventListener("message",function(o){var s=o.data;if(s.type=="compress"){var a=void 0;try{a=n.compress(s.data,{outputEncoding:s.outputEncoding})}catch(c){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(c)},[]);return}var l={token:s.token,type:"compressionResult",data:a,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}else if(s.type=="decompress"){var u=void 0;try{u=n.decompress(s.data,{inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding})}catch(f){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(f)},[]);return}var l={token:s.token,type:"decompressionResult",data:u,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}}),self.addEventListener("error",function(o){n.log(n.createErrorMessage(o.error,"Unexpected LZUTF8 WebWorker exception"))}))},i.createGlobalWorkerIfNeeded=function(){if(i.globalWorker)return!0;if(!n.webWorkersAvailable())return!1;if(!i.scriptURI&&typeof document=="object"){var o=document.getElementById("lzutf8");o!=null&&(i.scriptURI=o.getAttribute("src")||void 0)}return i.scriptURI?(i.globalWorker=new Worker(i.scriptURI),!0):!1},i.terminate=function(){i.globalWorker&&(i.globalWorker.terminate(),i.globalWorker=void 0)}})(r=n.WebWorker||(n.WebWorker={})),r.installWebWorkerIfNeeded()})(t||(t={}));var t;(function(n){var r=function(){function i(o,s,a){this.container=o,this.startPosition=s,this.length=a}return i.prototype.get=function(o){return this.container[this.startPosition+o]},i.prototype.getInReversedOrder=function(o){return this.container[this.startPosition+this.length-1-o]},i.prototype.set=function(o,s){this.container[this.startPosition+o]=s},i}();n.ArraySegment=r})(t||(t={}));var t;(function(n){(function(r){r.copyElements=function(i,o,s,a,l){for(;l--;)s[a++]=i[o++]},r.zeroElements=function(i,o,s){for(;s--;)i[o++]=0},r.countNonzeroValuesInArray=function(i){for(var o=0,s=0;s<i.length;s++)i[s]&&o++;return o},r.truncateStartingElements=function(i,o){if(i.length<=o)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var s=i.length-o,a=0;a<o;a++)i[a]=i[s+a];i.length=o},r.doubleByteArrayCapacity=function(i){var o=new Uint8Array(i.length*2);return o.set(i),o},r.concatUint8Arrays=function(i){for(var o=0,s=0,a=i;s<a.length;s++){var l=a[s];o+=l.length}for(var u=new Uint8Array(o),c=0,f=0,h=i;f<h.length;f++){var l=h[f];u.set(l,c),c+=l.length}return u},r.splitByteArray=function(i,o){for(var s=[],a=0;a<i.length;){var l=Math.min(o,i.length-a);s.push(i.subarray(a,a+l)),a+=l}return s}})(n.ArrayTools||(n.ArrayTools={}))})(t||(t={}));var t;(function(n){(function(r){r.convertToUint8ArrayIfNeeded=function(i){return typeof Buffer=="function"&&Buffer.isBuffer(i)?r.bufferToUint8Array(i):i},r.uint8ArrayToBuffer=function(i){if(Buffer.prototype instanceof Uint8Array){var o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return Object.setPrototypeOf(o,Buffer.prototype),o}else{for(var s=i.length,a=new Buffer(s),l=0;l<s;l++)a[l]=i[l];return a}},r.bufferToUint8Array=function(i){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);for(var o=i.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=i[a];return s}})(n.BufferTools||(n.BufferTools={}))})(t||(t={}));var t;(function(n){(function(r){r.getCroppedBuffer=function(i,o,s,a){a===void 0&&(a=0);var l=new Uint8Array(s+a);return l.set(i.subarray(o,o+s)),l},r.getCroppedAndAppendedByteArray=function(i,o,s,a){return n.ArrayTools.concatUint8Arrays([i.subarray(o,o+s),a])},r.detectCompressionSourceEncoding=function(i){if(i==null)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if(typeof i=="string")return"String";if(i instanceof Uint8Array||typeof Buffer=="function"&&Buffer.isBuffer(i))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},r.encodeCompressedBytes=function(i,o){switch(o){case"ByteArray":return i;case"Buffer":return n.BufferTools.uint8ArrayToBuffer(i);case"Base64":return n.encodeBase64(i);case"BinaryString":return n.encodeBinaryString(i);case"StorageBinaryString":return n.encodeStorageBinaryString(i);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},r.decodeCompressedBytes=function(i,o){if(o==null)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(o){case"ByteArray":case"Buffer":var s=n.BufferTools.convertToUint8ArrayIfNeeded(i);if(!(s instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return s;case"Base64":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return n.decodeBase64(i);case"BinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return n.decodeBinaryString(i);case"StorageBinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return n.decodeStorageBinaryString(i);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(o,"'"))}},r.encodeDecompressedBytes=function(i,o){switch(o){case"String":return n.decodeUTF8(i);case"ByteArray":return i;case"Buffer":if(typeof Buffer!="function")throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return n.BufferTools.uint8ArrayToBuffer(i);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}})(n.CompressionCommon||(n.CompressionCommon={}))})(t||(t={}));var t;(function(n){var r;(function(i){var o=[],s;i.enqueueImmediate=function(a){o.push(a),o.length===1&&s()},i.initializeScheduler=function(){var a=function(){for(var f=0,h=o;f<h.length;f++){var p=h[f];try{p.call(void 0)}catch(v){n.printExceptionAndStackTraceToConsole(v,"enqueueImmediate exception")}}o.length=0};if(n.runningInNodeJS())s=function(){return setImmediate(function(){return a()})};else if(typeof window=="object"&&typeof window.addEventListener=="function"&&typeof window.postMessage=="function"){var l="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(f){f.data===l&&a()});var u;n.runningInNullOrigin()?u="*":u=window.location.href,s=function(){return window.postMessage(l,u)}}else if(typeof MessageChannel=="function"&&typeof MessagePort=="function"){var c=new MessageChannel;c.port1.onmessage=function(){return a()},s=function(){return c.port2.postMessage(0)}}else s=function(){return setTimeout(function(){return a()},0)}},i.initializeScheduler()})(r=n.EventLoop||(n.EventLoop={})),n.enqueueImmediate=function(i){return r.enqueueImmediate(i)}})(t||(t={}));var t;(function(n){(function(r){r.override=function(i,o){return r.extend(i,o)},r.extend=function(i,o){if(i==null)throw new TypeError("obj is null or undefined");if(typeof i!="object")throw new TypeError("obj is not an object");if(o==null&&(o={}),typeof o!="object")throw new TypeError("newProperties is not an object");if(o!=null)for(var s in o)i[s]=o[s];return i}})(n.ObjectTools||(n.ObjectTools={}))})(t||(t={}));var t;(function(n){n.getRandomIntegerInRange=function(r,i){return r+Math.floor(Math.random()*(i-r))},n.getRandomUTF16StringOfLength=function(r){for(var i="",o=0;o<r;o++){var s=void 0;do s=n.getRandomIntegerInRange(0,1114112);while(s>=55296&&s<=57343);i+=n.Encoding.CodePoint.decodeToString(s)}return i}})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=1024),this.outputBufferCapacity=o,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return i.prototype.appendCharCode=function(o){this.outputBuffer[this.outputPosition++]=o,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},i.prototype.appendCharCodes=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o[s])},i.prototype.appendString=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o.charCodeAt(s))},i.prototype.appendCodePoint=function(o){if(o<=65535)this.appendCharCode(o);else if(o<=1114111)this.appendCharCode(55296+(o-65536>>>10)),this.appendCharCode(56320+(o-65536&1023));else throw new Error("appendCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))},i.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},i.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},i}();n.StringBuilder=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.restart()}return i.prototype.restart=function(){this.startTime=i.getTimestamp()},i.prototype.getElapsedTime=function(){return i.getTimestamp()-this.startTime},i.prototype.getElapsedTimeAndRestart=function(){var o=this.getElapsedTime();return this.restart(),o},i.prototype.logAndRestart=function(o,s){s===void 0&&(s=!0);var a=this.getElapsedTime(),l="".concat(o,": ").concat(a.toFixed(3),"ms");return n.log(l,s),this.restart(),a},i.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},i.getMicrosecondTimestamp=function(){return Math.floor(i.getTimestamp()*1e3)},i.createGlobalTimestampFunction=function(){if(typeof process=="object"&&typeof process.hrtime=="function"){var o=0;this.timestampFunc=function(){var u=process.hrtime(),c=u[0]*1e3+u[1]/1e6;return o+c},o=Date.now()-this.timestampFunc()}else if(typeof chrome=="object"&&chrome.Interval){var s=Date.now(),a=new chrome.Interval;a.start(),this.timestampFunc=function(){return s+a.microseconds()/1e3}}else if(typeof performance=="object"&&performance.now){var l=Date.now()-performance.now();this.timestampFunc=function(){return l+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return new Date().getTime()}},i}();n.Timer=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,o&&typeof Uint32Array=="function"?this.prefixHashTable=new n.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new n.CompressorSimpleHashTable(this.PrefixHashTableSize)}return i.prototype.compressBlock=function(o){if(o==null)throw new TypeError("compressBlock: undefined or null input received");return typeof o=="string"&&(o=n.encodeUTF8(o)),o=n.BufferTools.convertToUint8ArrayIfNeeded(o),this.compressUtf8Block(o)},i.prototype.compressUtf8Block=function(o){if(!o||o.length==0)return new Uint8Array(0);var s=this.cropAndAddNewBytesToInputBuffer(o),a=this.inputBuffer,l=this.inputBuffer.length;this.outputBuffer=new Uint8Array(o.length),this.outputBufferPosition=0;for(var u=0,c=s;c<l;c++){var f=a[c],h=c<u;if(c>l-this.MinimumSequenceLength){h||this.outputRawByte(f);continue}var p=this.getBucketIndexForPrefix(c);if(!h){var v=this.findLongestMatch(c,p);v!=null&&(this.outputPointerBytes(v.length,v.distance),u=c+v.length,h=!0)}h||this.outputRawByte(f);var y=this.inputBufferStreamOffset+c;this.prefixHashTable.addValueToBucket(p,y)}return this.outputBuffer.subarray(0,this.outputBufferPosition)},i.prototype.findLongestMatch=function(o,s){var a=this.prefixHashTable.getArraySegmentForBucketIndex(s,this.reusableArraySegmentObject);if(a==null)return null;for(var l=this.inputBuffer,u,c=0,f=0;f<a.length;f++){var h=a.getInReversedOrder(f)-this.inputBufferStreamOffset,p=o-h,v=void 0;if(u===void 0?v=this.MinimumSequenceLength-1:u<128&&p>=128?v=c+(c>>>1):v=c,p>this.MaximumMatchDistance||v>=this.MaximumSequenceLength||o+v>=l.length)break;if(l[h+v]===l[o+v]){for(var y=0;;y++)if(o+y===l.length||l[h+y]!==l[o+y]){y>v&&(u=p,c=y);break}else if(y===this.MaximumSequenceLength)return{distance:p,length:this.MaximumSequenceLength}}}return u!==void 0?{distance:u,length:c}:null},i.prototype.getBucketIndexForPrefix=function(o){return(this.inputBuffer[o]*7880599+this.inputBuffer[o+1]*39601+this.inputBuffer[o+2]*199+this.inputBuffer[o+3])%this.PrefixHashTableSize},i.prototype.outputPointerBytes=function(o,s){s<128?(this.outputRawByte(192|o),this.outputRawByte(s)):(this.outputRawByte(224|o),this.outputRawByte(s>>>8),this.outputRawByte(s&255))},i.prototype.outputRawByte=function(o){this.outputBuffer[this.outputBufferPosition++]=o},i.prototype.cropAndAddNewBytesToInputBuffer=function(o){if(this.inputBuffer===void 0)return this.inputBuffer=o,0;var s=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),a=this.inputBuffer.length-s;return this.inputBuffer=n.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,a,s,o),this.inputBufferStreamOffset+=a,s},i}();n.Compressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(o*2),this.storage=new Uint32Array(o*2),this.storageIndex=1}return i.prototype.addValueToBucket=function(o,s){o<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var a=this.bucketLocators[o],l;if(a===0)a=this.storageIndex,l=1,this.storage[this.storageIndex]=s,this.storageIndex+=this.minimumBucketCapacity;else{l=this.bucketLocators[o+1],l===this.maximumBucketCapacity-1&&(l=this.truncateBucketToNewerElements(a,l,this.maximumBucketCapacity/2));var u=a+l;this.storage[u]===0?(this.storage[u]=s,u===this.storageIndex&&(this.storageIndex+=l)):(n.ArrayTools.copyElements(this.storage,a,this.storage,this.storageIndex,l),a=this.storageIndex,this.storageIndex+=l,this.storage[this.storageIndex++]=s,this.storageIndex+=l),l++}this.bucketLocators[o]=a,this.bucketLocators[o+1]=l},i.prototype.truncateBucketToNewerElements=function(o,s,a){var l=o+s-a;return n.ArrayTools.copyElements(this.storage,l,this.storage,o,a),n.ArrayTools.zeroElements(this.storage,o+a,s-a),a},i.prototype.compact=function(){var o=this.bucketLocators,s=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var a=0;a<o.length;a+=2){var l=o[a+1];l!==0&&(this.bucketLocators[a]=this.storageIndex,this.bucketLocators[a+1]=l,this.storageIndex+=Math.max(Math.min(l*2,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(this.storageIndex*8);for(var a=0;a<o.length;a+=2){var u=o[a];if(u!==0){var c=this.bucketLocators[a],f=this.bucketLocators[a+1];n.ArrayTools.copyElements(s,u,this.storage,c,f)}}},i.prototype.getArraySegmentForBucketIndex=function(o,s){o<<=1;var a=this.bucketLocators[o];return a===0?null:(s===void 0&&(s=new n.ArraySegment(this.storage,a,this.bucketLocators[o+1])),s)},i.prototype.getUsedBucketCount=function(){return Math.floor(n.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.bucketLocators.length;s+=2)o+=this.bucketLocators[s+1];return o},i}();n.CompressorCustomHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.maximumBucketCapacity=64,this.buckets=new Array(o)}return i.prototype.addValueToBucket=function(o,s){var a=this.buckets[o];a===void 0?this.buckets[o]=[s]:(a.length===this.maximumBucketCapacity-1&&n.ArrayTools.truncateStartingElements(a,this.maximumBucketCapacity/2),a.push(s))},i.prototype.getArraySegmentForBucketIndex=function(o,s){var a=this.buckets[o];return a===void 0?null:(s===void 0&&(s=new n.ArraySegment(a,0,a.length)),s)},i.prototype.getUsedBucketCount=function(){return n.ArrayTools.countNonzeroValuesInArray(this.buckets)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.buckets.length;s++)this.buckets[s]!==void 0&&(o+=this.buckets[s].length);return o},i}();n.CompressorSimpleHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.MaximumMatchDistance=32767,this.outputPosition=0}return i.prototype.decompressBlockToString=function(o){return o=n.BufferTools.convertToUint8ArrayIfNeeded(o),n.decodeUTF8(this.decompressBlock(o))},i.prototype.decompressBlock=function(o){this.inputBufferRemainder&&(o=n.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,o]),this.inputBufferRemainder=void 0);for(var s=this.cropOutputBufferToWindowAndInitialize(Math.max(o.length*4,1024)),a=0,l=o.length;a<l;a++){var u=o[a];if(u>>>6!=3){this.outputByte(u);continue}var c=u>>>5;if(a==l-1||a==l-2&&c==7){this.inputBufferRemainder=o.subarray(a);break}if(o[a+1]>>>7===1)this.outputByte(u);else{var f=u&31,h=void 0;c==6?(h=o[a+1],a+=1):(h=o[a+1]<<8|o[a+2],a+=2);for(var p=this.outputPosition-h,v=0;v<f;v++)this.outputByte(this.outputBuffer[p+v])}}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),n.CompressionCommon.getCroppedBuffer(this.outputBuffer,s,this.outputPosition-s)},i.prototype.outputByte=function(o){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=n.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=o},i.prototype.cropOutputBufferToWindowAndInitialize=function(o){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(o),0;var s=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=n.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-s,s,o),this.outputPosition=s,this.outputBufferRemainder){for(var a=0;a<this.outputBufferRemainder.length;a++)this.outputByte(this.outputBufferRemainder[a]);this.outputBufferRemainder=void 0}return s},i.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var o=1;o<=4&&this.outputPosition-o>=0;o++){var s=this.outputBuffer[this.outputPosition-o];if(o<4&&s>>>3===30||o<3&&s>>>4===14||o<2&&s>>>5===6){this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-o,this.outputPosition),this.outputPosition-=o;return}}},i}();n.Decompressor=r})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),s=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),a="=",l=61;i.encode=function(u){return!u||u.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(u).toString("base64"):i.encodeWithJS(u)},i.decode=function(u){return u?n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(u,"base64")):i.decodeWithJS(u):new Uint8Array(0)},i.encodeWithJS=function(u,c){if(c===void 0&&(c=!0),!u||u.length==0)return"";for(var f=o,h=new n.StringBuilder,p,v=0,y=u.length;v<y;v+=3)v<=y-3?(p=u[v]<<16|u[v+1]<<8|u[v+2],h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),h.appendCharCode(f[p>>>6&63]),h.appendCharCode(f[p&63]),p=0):v===y-2?(p=u[v]<<16|u[v+1]<<8,h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),h.appendCharCode(f[p>>>6&63]),c&&h.appendCharCode(l)):v===y-1&&(p=u[v]<<16,h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),c&&(h.appendCharCode(l),h.appendCharCode(l)));return h.getOutputString()},i.decodeWithJS=function(u,c){if(!u||u.length==0)return new Uint8Array(0);var f=u.length%4;if(f===1)throw new Error("Invalid Base64 string: length % 4 == 1");f===2?u+=a+a:f===3&&(u+=a),c||(c=new Uint8Array(u.length));for(var h=0,p=u.length,v=0;v<p;v+=4){var y=s[u.charCodeAt(v)]<<18|s[u.charCodeAt(v+1)]<<12|s[u.charCodeAt(v+2)]<<6|s[u.charCodeAt(v+3)];c[h++]=y>>>16&255,c[h++]=y>>>8&255,c[h++]=y&255}return u.charCodeAt(p-1)==l&&h--,u.charCodeAt(p-2)==l&&h--,c.subarray(0,h)}})(r.Base64||(r.Base64={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){if(o==null)throw new TypeError("BinaryString.encode: undefined or null input received");if(o.length===0)return"";for(var s=o.length,a=new n.StringBuilder,l=0,u=1,c=0;c<s;c+=2){var f=void 0;c==s-1?f=o[c]<<8:f=o[c]<<8|o[c+1],a.appendCharCode(l<<16-u|f>>>u),l=f&(1<<u)-1,u===15?(a.appendCharCode(l),l=0,u=1):u+=1,c>=s-2&&a.appendCharCode(l<<16-u)}return a.appendCharCode(32768|s%2),a.getOutputString()},i.decode=function(o){if(typeof o!="string")throw new TypeError("BinaryString.decode: invalid input type");if(o=="")return new Uint8Array(0);for(var s=new Uint8Array(o.length*3),a=0,l=function(p){s[a++]=p>>>8,s[a++]=p&255},u=0,c=0,f=0;f<o.length;f++){var h=o.charCodeAt(f);if(h>=32768){h==32769&&a--,c=0;continue}c==0?u=h:(l(u<<c|h>>>15-c),u=h&(1<<15-c)-1),c==15?c=0:c+=1}return s.subarray(0,a)}})(r.BinaryString||(r.BinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encodeFromString=function(o,s){var a=o.charCodeAt(s);if(a<55296||a>56319)return a;var l=o.charCodeAt(s+1);if(l>=56320&&l<=57343)return 65536+((a-55296<<10)+(l-56320));throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(a,", followed by ").concat(l,", which is not a trailing surrogate character code."))},i.decodeToString=function(o){if(o<=65535)return String.fromCharCode(o);if(o<=1114111)return String.fromCharCode(55296+(o-65536>>>10),56320+(o-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))}})(r.CodePoint||(r.CodePoint={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];i.encode=function(s){for(var a=[],l=0;l<s.length;l++)a.push(o[s[l]]);return a.join(" ")}})(r.DecimalString||(r.DecimalString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){return r.BinaryString.encode(o).replace(/\0/g,"")},i.decode=function(o){return r.BinaryString.decode(o.replace(/\u8002/g,"\0"))}})(r.StorageBinaryString||(r.StorageBinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o,s;i.encode=function(a){return!a||a.length==0?new Uint8Array(0):n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(a,"utf8")):i.createNativeTextEncoderAndDecoderIfAvailable()?o.encode(a):i.encodeWithJS(a)},i.decode=function(a){return!a||a.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(a).toString("utf8"):i.createNativeTextEncoderAndDecoderIfAvailable()?s.decode(a):i.decodeWithJS(a)},i.encodeWithJS=function(a,l){if(!a||a.length==0)return new Uint8Array(0);l||(l=new Uint8Array(a.length*4));for(var u=0,c=0;c<a.length;c++){var f=r.CodePoint.encodeFromString(a,c);if(f<=127)l[u++]=f;else if(f<=2047)l[u++]=192|f>>>6,l[u++]=128|f&63;else if(f<=65535)l[u++]=224|f>>>12,l[u++]=128|f>>>6&63,l[u++]=128|f&63;else if(f<=1114111)l[u++]=240|f>>>18,l[u++]=128|f>>>12&63,l[u++]=128|f>>>6&63,l[u++]=128|f&63,c++;else throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)")}return l.subarray(0,u)},i.decodeWithJS=function(a,l,u){if(l===void 0&&(l=0),!a||a.length==0)return"";u===void 0&&(u=a.length);for(var c=new n.StringBuilder,f,h,p=l,v=u;p<v;){if(h=a[p],!(h>>>7))f=h,p+=1;else if(h>>>5===6){if(p+1>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&31)<<6|a[p+1]&63,p+=2}else if(h>>>4===14){if(p+2>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&15)<<12|(a[p+1]&63)<<6|a[p+2]&63,p+=3}else if(h>>>3===30){if(p+3>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&7)<<18|(a[p+1]&63)<<12|(a[p+2]&63)<<6|a[p+3]&63,p+=4}else throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+p);c.appendCodePoint(f)}return c.getOutputString()},i.createNativeTextEncoderAndDecoderIfAvailable=function(){return o?!0:typeof TextEncoder=="function"?(o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8"),!0):!1}})(r.UTF8||(r.UTF8={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){function r(m,b){if(b===void 0&&(b={}),m==null)throw new TypeError("compress: undefined or null input received");var w=n.CompressionCommon.detectCompressionSourceEncoding(m);b=n.ObjectTools.override({inputEncoding:w,outputEncoding:"ByteArray"},b);var S=new n.Compressor,E=S.compressBlock(m);return n.CompressionCommon.encodeCompressedBytes(E,b.outputEncoding)}n.compress=r;function i(m,b){if(b===void 0&&(b={}),m==null)throw new TypeError("decompress: undefined or null input received");b=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},b);var w=n.CompressionCommon.decodeCompressedBytes(m,b.inputEncoding),S=new n.Decompressor,E=S.decompressBlock(w);return n.CompressionCommon.encodeDecompressedBytes(E,b.outputEncoding)}n.decompress=i;function o(m,b,w){w==null&&(w=function(){});var S;try{S=n.CompressionCommon.detectCompressionSourceEncoding(m)}catch(E){w(void 0,E);return}b=n.ObjectTools.override({inputEncoding:S,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},b),n.enqueueImmediate(function(){b.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.compressAsync(m,b,w):n.AsyncCompressor.compressAsync(m,b,w)})}n.compressAsync=o;function s(m,b,w){if(w==null&&(w=function(){}),m==null){w(void 0,new TypeError("decompressAsync: undefined or null input received"));return}b=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},b);var S=n.BufferTools.convertToUint8ArrayIfNeeded(m);n.EventLoop.enqueueImmediate(function(){b.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.decompressAsync(S,b,w):n.AsyncDecompressor.decompressAsync(m,b,w)})}n.decompressAsync=s;function a(){return n.AsyncCompressor.createCompressionStream()}n.createCompressionStream=a;function l(){return n.AsyncDecompressor.createDecompressionStream()}n.createDecompressionStream=l;function u(m){return n.Encoding.UTF8.encode(m)}n.encodeUTF8=u;function c(m){return n.Encoding.UTF8.decode(m)}n.decodeUTF8=c;function f(m){return n.Encoding.Base64.encode(m)}n.encodeBase64=f;function h(m){return n.Encoding.Base64.decode(m)}n.decodeBase64=h;function p(m){return n.Encoding.BinaryString.encode(m)}n.encodeBinaryString=p;function v(m){return n.Encoding.BinaryString.decode(m)}n.decodeBinaryString=v;function y(m){return n.Encoding.StorageBinaryString.encode(m)}n.encodeStorageBinaryString=y;function x(m){return n.Encoding.StorageBinaryString.decode(m)}n.decodeStorageBinaryString=x})(t||(t={}))})(yO);var Ire=yO.exports;const Oa=zs(Ire);function kO(){const e=Vs(async()=>(await _t.systems.toArray()).filter(n=>!n.deleted_at),[]);return{systems:e||[],isLoading:e===void 0}}function CO(){const e=Vs(async()=>(await _t.characters.toArray()).filter(n=>!n.deleted_at),[]);return{characters:e||[],isLoading:e===void 0}}const jO=lt.object({id:lt.string({invalid_type_error:"id must be a string"}).optional(),local_id:lt.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:lt.string({invalid_type_error:"user_id must be a string"}),name:lt.string(),data:lt.object({}),system:lt.object({local_id:lt.string(),version_id:lt.string()}),version:lt.string().optional(),created_at:lt.string().datetime({offset:!0}),updated_at:lt.string().datetime({offset:!0}),deleted_at:lt.string().datetime({offset:!0}).optional()}),Pre=async(e,t,n)=>{try{const{user:r}=sr.get(),i=(r==null?void 0:r.id)||"none";let o=await Ir();for(;!await _a(o);)o=await Ir();const s={local_id:o,user_id:i,name:e,data:t,system:n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},a=jO.safeParse(s);if(!a.success){console.log("Invalid character data:",a.error.format());return}let l=await En.get("updated_characters")||[];return l.includes(s.local_id)||await En.set("updated_characters",[...l,s.local_id]),await _t.characters.add(s)}catch(r){console.log("Error creating character:",r)}},Ore=async(e,t)=>{try{let n=await En.get("updated_characters")||[];return n.includes(e)||await En.set("updated_characters",[...n,e]),await _t.characters.update(e,{name:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error renaming character:",n)}},$re=async(e,t)=>{try{let n=await En.get("updated_characters")||[];return n.includes(e)||await En.set("updated_characters",[...n,e]),await _t.characters.update(e,{data:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error updating character data:",n)}},Mre=async e=>{try{let t=await En.get("updated_characters")||[];return t.includes(e)||await En.set("updated_characters",[...t,e]),await _t.characters.update(e,{deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(t){console.log("Error deleting character:",t)}},Dre=async e=>{try{let t=e.local_id||"deviceId-".concat(u1());if(await _t.characters.get({id:e.id||""})!==void 0){console.log("Character already exists in the database");return}if(await _t.characters.get({local_id:t})!==void 0){console.log("Character already exists in the database");return}if(!await _t.systems.get({local_id:e.system.local_id})){console.log("System not found in the database");return}const i={...e,updated_at:new Date().toISOString()};{const o=jO.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}}return await _t.characters.add(i)}catch(t){console.log("Error creating system:",t)}};var fo,Te=typeof window<"u"?window:void 0,li=typeof globalThis<"u"?globalThis:Te,AO=Array.prototype,bj=AO.forEach,xj=AO.indexOf,Ei=li==null?void 0:li.navigator,vt=li==null?void 0:li.document,oi=li==null?void 0:li.location,gx=li==null?void 0:li.fetch,mx=li!=null&&li.XMLHttpRequest&&"withCredentials"in new li.XMLHttpRequest?li.XMLHttpRequest:void 0,_j=li==null?void 0:li.AbortController,ri=Ei==null?void 0:Ei.userAgent,Ft=Te!=null?Te:{},bs={DEBUG:!1,LIB_VERSION:"1.240.5"},ew="$copy_autocapture",Lre=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(e){e.GZipJS="gzip-js",e.Base64="base64"})(fo||(fo={}));var Bre=["fatal","error","warning","log","info","debug"];function qt(e,t){return e.indexOf(t)!==-1}var Wy=function(e){return e.trim()},yx=function(e){return e.replace(/^\$/,"")},Fre=Array.isArray,NO=Object.prototype,RO=NO.hasOwnProperty,Vy=NO.toString,Mn=Fre||function(e){return Vy.call(e)==="[object Array]"},qi=e=>typeof e=="function",Dn=e=>e===Object(e)&&!Mn(e),Eu=e=>{if(Dn(e)){for(var t in e)if(RO.call(e,t))return!1;return!0}return!1},pt=e=>e===void 0,Yn=e=>Vy.call(e)=="[object String]",vx=e=>Yn(e)&&e.trim().length===0,Ua=e=>e===null,on=e=>pt(e)||Ua(e),Pr=e=>Vy.call(e)=="[object Number]",Es=e=>Vy.call(e)==="[object Boolean]",zre=e=>e instanceof FormData,Hre=e=>qt(Lre,e),TO=e=>{var t={t:function(n){if(Te&&(bs.DEBUG||Ft.POSTHOG_DEBUG)&&!pt(Te.console)&&Te.console){for(var r=("__rrweb_original__"in Te.console[n])?Te.console[n].__rrweb_original__:Te.console[n],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];r(e,...o)}},info:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];console.error(e,...r)},uninitializedWarning:n=>{t.error("You must initialize PostHog before calling "+n)},createLogger:n=>TO(e+" "+n)};return t},St=TO("[PostHog.js]"),zr=St.createLogger,Ure=zr("[ExternalScriptsLoader]"),Sj=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return Ure.warn(t+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=vt==null?void 0:vt.querySelectorAll("script");if(r){for(var i=0;i<r.length;i++)if(r[i].src===t)return n()}var o=()=>{if(!vt)return n("document not found");var s=vt.createElement("script");if(s.type="text/javascript",s.crossOrigin="anonymous",s.src=t,s.onload=u=>n(void 0,u),s.onerror=u=>n(u),e.config.prepare_external_dependency_script&&(s=e.config.prepare_external_dependency_script(s)),!s)return n("prepare_external_dependency_script returned null");var a,l=vt.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(s,l[0]):vt.body.appendChild(s)};vt!=null&&vt.body?o():vt==null||vt.addEventListener("DOMContentLoaded",o)};function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}function IO(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Ft.__PosthogExtensions__=Ft.__PosthogExtensions__||{},Ft.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{var r="/static/"+t+".js?v="+e.version;if(t==="remote-config"&&(r="/array/"+e.config.token+"/config.js"),t==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var o=e.requestRouter.endpointFor("assets",r);Sj(e,o,n)},Ft.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{var r=e.requestRouter.endpointFor("api",t);Sj(e,r,n)};var hm={};function Sa(e,t,n){if(Mn(e)){if(bj&&e.forEach===bj)e.forEach(t,n);else if("length"in e&&e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===hm)return}}}function dn(e,t,n){if(!on(e)){if(Mn(e))return Sa(e,t,n);if(zre(e)){for(var r of e.entries())if(t.call(n,r[1],r[0])===hm)return}else for(var i in e)if(RO.call(e,i)&&t.call(n,e[i],i)===hm)return}}var qn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sa(n,function(i){for(var o in i)i[o]!==void 0&&(e[o]=i[o])}),e},qy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sa(n,function(i){Sa(i,function(o){e.push(o)})}),e};function Jp(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var Ej=function(e){try{return e()}catch(t){return}},Wre=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(i){St.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),St.critical(i)}}},G1=function(e){var t={};return dn(e,function(n,r){(Yn(n)&&n.length>0||Pr(n))&&(t[r]=n)}),t};function Vre(e,t){return n=e,r=o=>Yn(o)&&!Ua(t)?o.slice(0,t):o,i=new Set,function o(s,a){return s!==Object(s)?r?r(s,a):s:i.has(s)?void 0:(i.add(s),Mn(s)?(l=[],Sa(s,u=>{l.push(o(u))})):(l={},dn(s,(u,c)=>{i.has(u)||(l[c]=o(u,c))})),l);var l}(n);var n,r,i}var qre=["herokuapp.com","vercel.app","netlify.app"];function Kre(e){var t=e==null?void 0:e.hostname;if(!Yn(t))return!1;var n=t.split(".").slice(-2).join(".");for(var r of qre)if(n===r)return!1;return!0}function PO(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function jn(e,t,n,r){var{capture:i=!1,passive:o=!0}=r!=null?r:{};e==null||e.addEventListener(t,n,{capture:i,passive:o})}var OO="$people_distinct_id",bd="__alias",xd="__timers",kj="$autocapture_disabled_server_side",wx="$heatmaps_enabled_server_side",Cj="$exception_capture_enabled_server_side",jj="$web_vitals_enabled_server_side",$O="$dead_clicks_enabled_server_side",Aj="$web_vitals_allowed_metrics",bx="$session_recording_enabled_server_side",Nj="$console_log_recording_enabled_server_side",Rj="$session_recording_network_payload_capture",Tj="$session_recording_masking",Ij="$session_recording_canvas_recording",Pj="$replay_sample_rate",Oj="$replay_minimum_duration",$j="$replay_script_config",pm="$sesid",_d="$session_is_sampled",xx="$session_recording_url_trigger_activated_session",_x="$session_recording_event_trigger_activated_session",ku="$enabled_feature_flags",Qp="$early_access_features",Sx="$feature_flag_details",Sd="$stored_person_properties",sl="$stored_group_properties",Ex="$surveys",yp="$surveys_activated",gm="$flag_call_reported",hs="$user_state",kx="$client_session_props",Cx="$capture_rate_limit",jx="$initial_campaign_params",Ax="$initial_referrer_info",Nx="$initial_person_info",mm="$epp",MO="__POSTHOG_TOOLBAR__",Mj="$posthog_cookieless",Gre=[OO,bd,"__cmpns",xd,bx,wx,pm,ku,hs,Qp,Sx,sl,Sd,Ex,gm,kx,Cx,jx,Ax,mm];function Dj(e){return e instanceof Element&&(e.id===MO||!(e.closest==null||!e.closest(".toolbar-global-fade-container")))}function Ky(e){return!!e&&e.nodeType===1}function Ea(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function DO(e){return!!e&&e.nodeType===3}function LO(e){return!!e&&e.nodeType===11}function Y1(e){return e?Wy(e).split(/\s+/):[]}function Lj(e){var t=Te==null?void 0:Te.location.href;return!!(t&&e&&e.some(n=>t.match(n)))}function ym(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return Y1(t)}function BO(e){return on(e)?null:Wy(e).split(/(\s+)/).filter(t=>uc(t)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Gy(e){var t="";return Tx(e)&&!HO(e)&&e.childNodes&&e.childNodes.length&&dn(e.childNodes,function(n){var r;DO(n)&&n.textContent&&(t+=(r=BO(n.textContent))!==null&&r!==void 0?r:"")}),Wy(t)}function FO(e){return pt(e.target)?e.srcElement||null:(t=e.target)!=null&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var Rx=["a","button","form","input","select","textarea","label"];function zO(e){var t=e.parentNode;return!(!t||!Ky(t))&&t}function Yre(e,t,n,r,i){var o,s,a;if(n===void 0&&(n=void 0),!Te||!e||Ea(e,"html")||!Ky(e)||(o=n)!=null&&o.url_allowlist&&!Lj(n.url_allowlist)||(s=n)!=null&&s.url_ignorelist&&Lj(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(x=>t.type===x))return!1}for(var u=!1,c=[e],f=!0,h=e;h.parentNode&&!Ea(h,"body");)if(LO(h.parentNode))c.push(h.parentNode.host),h=h.parentNode.host;else{if(!(f=zO(h)))break;if(r||Rx.indexOf(f.tagName.toLowerCase())>-1)u=!0;else{var p=Te.getComputedStyle(f);p&&p.getPropertyValue("cursor")==="pointer"&&(u=!0)}c.push(f),h=f}if(!function(x,m){var b=m==null?void 0:m.element_allowlist;if(pt(b))return!0;var w=function(A){if(b.some(T=>A.tagName.toLowerCase()===T))return{v:!0}};for(var S of x){var E=w(S);if(typeof E=="object")return E.v}return!1}(c,n)||!function(x,m){var b=m==null?void 0:m.css_selector_allowlist;if(pt(b))return!0;var w=function(A){if(b.some(T=>A.matches(T)))return{v:!0}};for(var S of x){var E=w(S);if(typeof E=="object")return E.v}return!1}(c,n))return!1;var v=Te.getComputedStyle(e);if(v&&v.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var y=e.tagName.toLowerCase();switch(y){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Rx.indexOf(y)>-1||e.getAttribute("contenteditable")==="true")}}function Tx(e){for(var t=e;t.parentNode&&!Ea(t,"body");t=t.parentNode){var n=ym(t);if(qt(n,"ph-sensitive")||qt(n,"ph-no-capture"))return!1}if(qt(ym(e),"ph-include"))return!0;var r=e.type||"";if(Yn(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!(Yn(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function HO(e){return!!(Ea(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Ea(e,"select")||Ea(e,"textarea")||e.getAttribute("contenteditable")==="true")}var UO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Xre=new RegExp("^(?:"+UO+")$"),Jre=new RegExp(UO),WO="\\d{3}-?\\d{2}-?\\d{4}",Qre=new RegExp("^("+WO+")$"),Zre=new RegExp("("+WO+")");function uc(e,t){return t===void 0&&(t=!0),!(on(e)||Yn(e)&&(e=Wy(e),(t?Xre:Jre).test((e||"").replace(/[- ]/g,""))||(t?Qre:Zre).test(e)))}function VO(e){var t=Gy(e);return uc(t=(t+" "+qO(e)).trim())?t:""}function qO(e){var t="";return e&&e.childNodes&&e.childNodes.length&&dn(e.childNodes,function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=Gy(n);t=(t+" "+i).trim(),n.childNodes&&n.childNodes.length&&(t=(t+" "+qO(n)).trim())}catch(o){St.error("[AutoCapture]",o)}}),t}function eie(e){return function(t){var n=t.map(r=>{var i,o,s="";if(r.tag_name&&(s+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))s+="."+a.replace(/"/g,"");var l=mt({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(o=r.nth_of_type)!==null&&o!==void 0?o:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return Jp(l).sort((c,f)=>{var[h]=c,[p]=f;return h.localeCompare(p)}).forEach(c=>{var[f,h]=c;return u[Bj(f.toString())]=Bj(h.toString())}),s+=":",s+=Jp(l).map(c=>{var[f,h]=c;return f+'="'+h+'"'}).join("")});return n.join(";")}(function(t){return t.map(n=>{var r,i,o={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)==null?void 0:i.slice(0,2048),attr_class:tie(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Jp(n).filter(s=>{var[a]=s;return a.indexOf("attr__")===0}).forEach(s=>{var[a,l]=s;return o.attributes[a]=l}),o})}(e))}function Bj(e){return e.replace(/"|\\"/g,'\\"')}function tie(e){var t=e.attr__class;return t?Mn(t)?t:Y1(t):void 0}class KO{constructor(){this.clicks=[]}isRageClick(t,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(t-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:t,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:t,y:n,timestamp:r}];return!1}}var nie=["localhost","127.0.0.1"],cc=e=>{var t=vt==null?void 0:vt.createElement("a");return pt(t)?null:(t.href=e,t)},rie=function(e,t){var n,r;t===void 0&&(t="&");var i=[];return dn(e,function(o,s){pt(o)||pt(s)||s==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(o)?o.name:o.toString()),r=encodeURIComponent(s),i[i.length]=r+"="+n)}),i.join(t)},vm=function(e,t){for(var n,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t){n=o;break}}if(!Mn(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch(a){St.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},X1=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),i=r[0]||"",o=r[1],s=i.split("?"),a=s[1],l=s[0],u=(a||"").split("&"),c=[],f=0;f<u.length;f++){var h=u[f].split("=");Mn(h)&&(t.includes(h[0])?c.push(h[0]+"="+n):c.push(u[f]))}var p=l;return a!=null&&(p+="?"+c.join("&")),o!=null&&(p+="#"+o),p},wm=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},Fj=zr("[AutoCapture]");function tw(e,t){return t.length>e?t.slice(0,e)+"...":t}function iie(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!Ky(t));return t}function oie(e,t,n,r){var i=e.tagName.toLowerCase(),o={tag_name:i};Rx.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?o.$el_text=tw(1024,VO(e)):o.$el_text=tw(1024,Gy(e)));var s=ym(e);s.length>0&&(o.classes=s.filter(function(c){return c!==""})),dn(e.attributes,function(c){var f;if((!HO(e)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(r==null||!r.includes(c.name))&&!t&&uc(c.value)&&(f=c.name,!Yn(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var h=c.value;c.name==="class"&&(h=Y1(h).join(" ")),o["attr__"+c.name]=tw(1024,h)}});for(var a=1,l=1,u=e;u=iie(u);)a++,u.tagName===e.tagName&&l++;return o.nth_child=a,o.nth_of_type=l,o}function sie(e,t){for(var n,r,{e:i,maskAllElementAttributes:o,maskAllText:s,elementAttributeIgnoreList:a,elementsChainAsString:l}=t,u=[e],c=e;c.parentNode&&!Ea(c,"body");)LO(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var f,h=[],p={},v=!1,y=!1;if(dn(u,S=>{var E=Tx(S);S.tagName.toLowerCase()==="a"&&(v=S.getAttribute("href"),v=E&&v&&uc(v)&&v),qt(ym(S),"ph-no-capture")&&(y=!0),h.push(oie(S,o,s,a));var A=function(T){if(!Tx(T))return{};var P={};return dn(T.attributes,function(V){if(V.name&&V.name.indexOf("data-ph-capture-attribute")===0){var M=V.name.replace("data-ph-capture-attribute-",""),H=V.value;M&&H&&uc(H)&&(P[M]=H)}}),P}(S);qn(p,A)}),y)return{props:{},explicitNoCapture:y};if(s||(e.tagName.toLowerCase()==="a"||e.tagName.toLowerCase()==="button"?h[0].$el_text=VO(e):h[0].$el_text=Gy(e)),v){var x,m;h[0].attr__href=v;var b=(x=cc(v))==null?void 0:x.host,w=Te==null||(m=Te.location)==null?void 0:m.host;b&&w&&b!==w&&(f=v)}return{props:qn({$event_type:i.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:eie(h)},(n=h[0])!=null&&n.$el_text?{$el_text:(r=h[0])==null?void 0:r.$el_text}:{},f&&i.type==="click"?{$external_click_url:f}:{},p)}}class aie{constructor(t){this.i=!1,this.o=null,this.rageclicks=new KO,this.h=!1,this.instance=t,this.m=null}get S(){var t,n,r=Dn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(t=r.url_allowlist)==null?void 0:t.map(i=>new RegExp(i)),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map(i=>new RegExp(i)),r}$(){if(this.isBrowserSupported()){if(Te&&vt){var t=r=>{r=r||(Te==null?void 0:Te.event);try{this.k(r)}catch(i){Fj.error("Failed to capture event",i)}};if(jn(vt,"submit",t,{capture:!0}),jn(vt,"change",t,{capture:!0}),jn(vt,"click",t,{capture:!0}),this.S.capture_copied_text){var n=r=>{r=r||(Te==null?void 0:Te.event),this.k(r,ew)};jn(vt,"copy",n,{capture:!0}),jn(vt,"cut",n,{capture:!0})}}}else Fj.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.h=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[kj]:!!t.autocapture_opt_out}),this.o=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.m=t}getElementSelectors(t){var n,r=[];return(n=this.m)==null||n.forEach(i=>{var o=vt==null?void 0:vt.querySelectorAll(i);o==null||o.forEach(s=>{t===s&&r.push(i)})}),r}get isEnabled(){var t,n,r=(t=this.instance.persistence)==null?void 0:t.props[kj],i=this.o;if(Ua(i)&&!Es(r)&&!this.instance.config.advanced_disable_decide)return!1;var o=(n=this.o)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!o}k(t,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,i=FO(t);DO(i)&&(i=i.parentNode||null),n==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.k(t,"$rageclick");var o=n===ew;if(i&&Yre(i,t,this.S,o,o?["copy","cut"]:void 0)){var{props:s,explicitNoCapture:a}=sie(i,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(s.$element_selectors=l),n===ew){var u,c=BO(Te==null||(u=Te.getSelection())==null?void 0:u.toString()),f=t.type||"clipboard";if(!c)return!1;s.$selected_content=c,s.$copy_type=f}return this.instance.capture(n,s),!0}}}isBrowserSupported(){return qi(vt==null?void 0:vt.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Pr(e)&&isFinite(e)&&Math.floor(e)===e});var zj="0123456789abcdef";class bm{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=t/Math.pow(2,40),o[1]=t/Math.pow(2,32),o[2]=t/Math.pow(2,24),o[3]=t/Math.pow(2,16),o[4]=t/Math.pow(2,8),o[5]=t,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new bm(o)}toString(){for(var t="",n=0;n<this.bytes.length;n++)t=t+zj.charAt(this.bytes[n]>>>4)+zj.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new bm(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(var n=0;n<16;n++){var r=this.bytes[n]-t.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class lie{constructor(){this.I=0,this.P=0,this.R=new uie}generate(){var t=this.generateOrAbort();if(pt(t)){this.I=0;var n=this.generateOrAbort();if(pt(n))throw new Error("Could not generate UUID after timestamp reset");return n}return t}generateOrAbort(){var t=Date.now();if(t>this.I)this.I=t,this.T();else{if(!(t+1e4>this.I))return;this.P++,this.P>4398046511103&&(this.I++,this.T())}return bm.fromFieldsV7(this.I,Math.trunc(this.P/Math.pow(2,30)),this.P&Math.pow(2,30)-1,this.R.nextUint32())}T(){this.P=1024*this.R.nextUint32()+(1023&this.R.nextUint32())}}var Hj,GO=e=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};Te&&!pt(Te.crypto)&&crypto.getRandomValues&&(GO=e=>crypto.getRandomValues(e));class uie{constructor(){this.M=new Uint32Array(8),this.C=1/0}nextUint32(){return this.C>=this.M.length&&(GO(this.M),this.C=0),this.M[this.C++]}}var fa=()=>cie().toString(),cie=()=>(Hj||(Hj=new lie)).generate(),die="Thu, 01 Jan 1970 00:00:00 GMT",id="",fie=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function hie(e,t){if(t){var n=function(i,o){if(o===void 0&&(o=vt),id)return id;if(!o||["localhost","127.0.0.1"].includes(i))return"";for(var s=i.split("."),a=Math.min(s.length,8),l="dmn_chk_"+fa(),u=new RegExp("(^|;)\\s*"+l+"=1");!id&&a--;){var c=s.slice(a).join("."),f=l+"=1;domain=."+c;o.cookie=f,u.test(o.cookie)&&(o.cookie=f+";expires="+die,id=c)}return id}(e);if(!n){var r=(i=>{var o=i.match(fie);return o?o[0]:""})(e);r!==n&&St.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var sa,Rs={O:()=>!!vt,F:function(e){St.error("cookieStore error: "+e)},A:function(e){if(vt){try{for(var t=e+"=",n=vt.cookie.split(";").filter(o=>o.length),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return decodeURIComponent(i.substring(t.length,i.length))}}catch(o){}return null}},D:function(e){var t;try{t=JSON.parse(Rs.A(e))||{}}catch(n){}return t},j:function(e,t,n,r,i){if(vt)try{var o="",s="",a=hie(vt.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),o="; expires="+l.toUTCString()}i&&(s="; secure");var u=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return u.length>3686.4&&St.warn("cookieStore warning: large cookie, len="+u.length),vt.cookie=u,u}catch(c){return}},L:function(e,t){try{Rs.j(e,"",-1,t)}catch(n){return}}},nw=null,er={O:function(){if(!Ua(nw))return nw;var e=!0;if(pt(Te))e=!1;else try{var t="__mplssupport__";er.j(t,"xyz"),er.A(t)!=='"xyz"'&&(e=!1),er.L(t)}catch(n){e=!1}return e||St.error("localStorage unsupported; falling back to cookie store"),nw=e,e},F:function(e){St.error("localStorage error: "+e)},A:function(e){try{return Te==null?void 0:Te.localStorage.getItem(e)}catch(t){er.F(t)}return null},D:function(e){try{return JSON.parse(er.A(e))||{}}catch(t){}return null},j:function(e,t){try{Te==null||Te.localStorage.setItem(e,JSON.stringify(t))}catch(n){er.F(n)}},L:function(e){try{Te==null||Te.localStorage.removeItem(e)}catch(t){er.F(t)}}},pie=["distinct_id",pm,_d,mm,Nx],vp=mt({},er,{D:function(e){try{var t={};try{t=Rs.D(e)||{}}catch(r){}var n=qn(t,JSON.parse(er.A(e)||"{}"));return er.j(e,n),n}catch(r){}return null},j:function(e,t,n,r,i,o){try{er.j(e,t,void 0,void 0,o);var s={};pie.forEach(a=>{t[a]&&(s[a]=t[a])}),Object.keys(s).length&&Rs.j(e,s,n,r,i,o)}catch(a){er.F(a)}},L:function(e,t){try{Te==null||Te.localStorage.removeItem(e),Rs.L(e,t)}catch(n){er.F(n)}}}),wp={},gie={O:function(){return!0},F:function(e){St.error("memoryStorage error: "+e)},A:function(e){return wp[e]||null},D:function(e){return wp[e]||null},j:function(e,t){wp[e]=t},L:function(e){delete wp[e]}},Ja=null,mr={O:function(){if(!Ua(Ja))return Ja;if(Ja=!0,pt(Te))Ja=!1;else try{var e="__support__";mr.j(e,"xyz"),mr.A(e)!=='"xyz"'&&(Ja=!1),mr.L(e)}catch(t){Ja=!1}return Ja},F:function(e){St.error("sessionStorage error: ",e)},A:function(e){try{return Te==null?void 0:Te.sessionStorage.getItem(e)}catch(t){mr.F(t)}return null},D:function(e){try{return JSON.parse(mr.A(e))||null}catch(t){}return null},j:function(e,t){try{Te==null||Te.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){mr.F(n)}},L:function(e){try{Te==null||Te.sessionStorage.removeItem(e)}catch(t){mr.F(t)}}};(function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"})(sa||(sa={}));class mie{constructor(t){this._instance=t}get S(){return this._instance.config}get consent(){return this.N()?sa.DENIED:this.U}isOptedOut(){return this.consent===sa.DENIED||this.consent===sa.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.q.j(this.B,t?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.q.L(this.B,this.S.cross_subdomain_cookie)}get B(){var{token:t,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+t}get U(){var t=this.q.A(this.B);return t==="1"?sa.GRANTED:t==="0"?sa.DENIED:sa.PENDING}get q(){if(!this.H){var t=this.S.opt_out_capturing_persistence_type;this.H=t==="localStorage"?er:Rs;var n=t==="localStorage"?Rs:er;n.A(this.B)&&(this.H.A(this.B)||this.optInOut(n.A(this.B)==="1"),n.L(this.B,this.S.cross_subdomain_cookie))}return this.H}N(){return!!this.S.respect_dnt&&!!PO([Ei==null?void 0:Ei.doNotTrack,Ei==null?void 0:Ei.msDoNotTrack,Ft.doNotTrack],t=>qt([!0,1,"1","yes"],t))}}var bp=zr("[Dead Clicks]"),yie=()=>!0,vie=e=>{var t,n=!((t=e.instance.persistence)==null||!t.get_property($O)),r=e.instance.config.capture_dead_clicks;return Es(r)?r:n};class YO{get lazyLoadedDeadClicksAutocapture(){return this.W}constructor(t,n,r){this.instance=t,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[$O]:t==null?void 0:t.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.G(()=>{this.J()})}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",i=>{i?bp.error("failed to load script",i):t()})}J(){var t;if(vt){if(!this.W&&(t=Ft.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture){var n=Dn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.W=Ft.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.W.start(vt),bp.info("starting...")}}else bp.error("`document` not found. Cannot start.")}stop(){this.W&&(this.W.stop(),this.W=void 0,bp.info("stopping..."))}}var rw=zr("[ExceptionAutocapture]");class wie{constructor(t){var n;this.V=()=>{var r;if(Te&&this.isEnabled&&(r=Ft.__PosthogExtensions__)!=null&&r.errorWrappingFunctions){var i=Ft.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=Ft.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,s=Ft.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.K&&this.S.capture_unhandled_errors&&(this.K=i(this.captureException.bind(this))),!this.Y&&this.S.capture_unhandled_rejections&&(this.Y=o(this.captureException.bind(this))),!this.X&&this.S.capture_console_errors&&(this.X=s(this.captureException.bind(this)))}catch(a){rw.error("failed to start",a),this.Z()}}},this._instance=t,this.tt=!((n=this._instance.persistence)==null||!n.props[Cj]),this.S=this.it(),this.startIfEnabled()}it(){var t=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Dn(t)?n=mt({},n,t):(pt(t)?this.tt:t)&&(n=mt({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(rw.info("enabled"),this.G(this.V))}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",i=>{if(i)return rw.error("failed to load script",i);t()})}Z(){var t,n,r;(t=this.K)==null||t.call(this),this.K=void 0,(n=this.Y)==null||n.call(this),this.Y=void 0,(r=this.X)==null||r.call(this),this.X=void 0}onRemoteConfig(t){var n=t.autocaptureExceptions;this.tt=!!n||!1,this.S=this.it(),this._instance.persistence&&this._instance.persistence.register({[Cj]:this.tt}),this.startIfEnabled()}captureException(t){var n=this._instance.requestRouter.endpointFor("ui");t.$exception_personURL=n+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id(),this._instance.exceptions.sendExceptionEvent(t)}}function XO(e){return!pt(Event)&&JO(e,Event)}function JO(e,t){try{return e instanceof t}catch(n){return!1}}function QO(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return JO(e,Error)}}function Zp(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function iw(e){return Zp(e,"DOMError")}var Uj=/\(error: (.*)\)/,Wj=50,Cu="?";function ow(e,t,n,r){var i={platform:"web:javascript",filename:e,function:t==="<anonymous>"?Cu:t,in_app:!0};return pt(n)||(i.lineno=n),pt(r)||(i.colno=r),i}var bie=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,xie=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,_ie=/\((\S*)(?::(\d+))(?::(\d+))\)/,Sie=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Eie=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,kie=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.sort((i,o)=>i[0]-o[0]).map(i=>i[1]);return function(i,o){o===void 0&&(o=0);for(var s=[],a=i.split("\n"),l=o;l<a.length;l++){var u=a[l];if(!(u.length>1024)){var c=Uj.test(u)?u.replace(Uj,"$1"):u;if(!c.match(/\S*Error: /)){for(var f of r){var h=f(c);if(h){s.push(h);break}}if(s.length>=Wj)break}}}return function(p){if(!p.length)return[];var v=Array.from(p);return v.reverse(),v.slice(0,Wj).map(y=>mt({},y,{filename:y.filename||Cie(v).filename,function:y.function||Cu}))}(s)}}([30,e=>{var t=bie.exec(e);if(t){var[,n,r,i]=t;return ow(n,Cu,+r,+i)}var o=xie.exec(e);if(o){if(o[2]&&o[2].indexOf("eval")===0){var s=_ie.exec(o[2]);s&&(o[2]=s[1],o[3]=s[2],o[4]=s[3])}var[a,l]=qj(o[1]||Cu,o[2]);return ow(l,a,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}}],[50,e=>{var t=Sie.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=Eie.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],i=t[1]||Cu;return[i,r]=qj(i,r),ow(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]);function Cie(e){return e[e.length-1]||{}}var xp,Vj,sw,qj=(e,t)=>{var n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Cu,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},jie=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function J1(e,t){t===void 0&&(t=0);var n=e.stacktrace||e.stack||"",r=function(s){return s&&Aie.test(s.message)?1:0}(e);try{var i=kie,o=function(s,a){var l=function(u){var c=globalThis._posthogChunkIds;if(!c)return{};var f=Object.keys(c);return sw&&f.length===Vj||(Vj=f.length,sw=f.reduce((h,p)=>{xp||(xp={});var v=xp[p];if(v)h[v[0]]=v[1];else for(var y=u(p),x=y.length-1;x>=0;x--){var m=y[x],b=m==null?void 0:m.filename,w=c[p];if(b&&w){h[b]=w,xp[p]=[b,w];break}}return h},{})),sw}(a);return s.forEach(u=>{u.filename&&(u.chunk_id=l[u.filename])}),s}(i(n,r),i);return o.slice(0,o.length-t)}catch(s){}return[]}var Aie=/Minified React error #\d+;/i;function Nie(e,t){var n,r,i=J1(e),o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)!==null&&r!==void 0&&r;return{type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:e.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(e),stacktrace:{frames:i,type:"raw"},mechanism:{handled:o,synthetic:s}}}function ZO(e,t){var n=Nie(e,t);return e.cause&&QO(e.cause)&&e.cause!==e?[n,...ZO(e.cause,{handled:t==null?void 0:t.handled,synthetic:t==null?void 0:t.synthetic})]:[n]}function aw(e,t){return{$exception_list:ZO(e,t),$exception_level:"error"}}function lw(e,t){var n,r,i,o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,a={type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:(i=t==null?void 0:t.defaultExceptionType)!==null&&i!==void 0?i:"Error",value:e||(t==null?void 0:t.defaultExceptionMessage),mechanism:{handled:o,synthetic:s}};if(t!=null&&t.syntheticException){var l=J1(t.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function Rie(e){return Yn(e)&&!vx(e)&&Bre.indexOf(e)>=0}function Tie(e,t){var n,r,i=(n=t==null?void 0:t.handled)===null||n===void 0||n,o=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,s=t!=null&&t.overrideExceptionType?t.overrideExceptionType:XO(e)?e.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(c,f){f===void 0&&(f=40);var h=Object.keys(c);if(h.sort(),!h.length)return"[object has no keys]";for(var p=h.length;p>0;p--){var v=h.slice(0,p).join(", ");if(!(v.length>f))return p===h.length||v.length<=f?v:v.slice(0,f)+"..."}return""}(e),l={type:s,value:a,mechanism:{handled:i,synthetic:o}};if(t!=null&&t.syntheticException){var u=J1(t==null?void 0:t.syntheticException,1);u.length&&(l.stacktrace={frames:u,type:"raw"})}return{$exception_list:[l],$exception_level:Rie(e.level)?e.level:"error"}}function Iie(e,t){var{error:n,event:r}=e,i={$exception_list:[]},o=n||r;if(iw(o)||function(h){return Zp(h,"DOMException")}(o)){var s=o;if(function(h){return"stack"in h}(o))i=aw(o,t);else{var a=s.name||(iw(s)?"DOMError":"DOMException"),l=s.message?a+": "+s.message:a;i=lw(l,mt({},t,{overrideExceptionType:iw(s)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in s&&(i.$exception_DOMException_code=""+s.code),i}if(function(h){return Zp(h,"ErrorEvent")}(o)&&o.error)return aw(o.error,t);if(QO(o))return aw(o,t);if(function(h){return Zp(h,"Object")}(o)||XO(o))return Tie(o,t);if(pt(n)&&Yn(r)){var u="Error",c=r,f=r.match(jie);return f&&(u=f[1],c=f[2]),lw(c,mt({},t,{overrideExceptionType:u,defaultExceptionMessage:c}))}return lw(o,t)}function Kj(e,t,n){try{if(!(t in e))return()=>{};var r=e[t],i=n(r);return qi(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,()=>{e[t]=r}}catch(o){return()=>{}}}class Pie{constructor(t){var n;this._instance=t,this.et=(Te==null||(n=Te.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(St.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.rt&&this.rt(),this.rt=void 0,St.info("History API monitoring stopped")}monitorHistoryChanges(){var t,n;if(Te&&Te.history){var r=this;(t=Te.history.pushState)!=null&&t.__posthog_wrapped__||Kj(Te.history,"pushState",i=>function(o,s,a){i.call(this,o,s,a),r.st("pushState")}),(n=Te.history.replaceState)!=null&&n.__posthog_wrapped__||Kj(Te.history,"replaceState",i=>function(o,s,a){i.call(this,o,s,a),r.st("replaceState")}),this.nt()}}st(t){try{var n,r=Te==null||(n=Te.location)==null?void 0:n.pathname;if(!r)return;r!==this.et&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:t}),this.et=r}catch(i){St.error("Error capturing "+t+" pageview",i)}}nt(){if(!this.rt){var t=()=>{this.st("popstate")};jn(Te,"popstate",t),this.rt=()=>{Te&&Te.removeEventListener("popstate",t)}}}}function xm(e){var t,n;return((t=JSON.stringify(e,(n=[],function(r,i){if(Dn(i)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(i)?"[Circular]":(n.push(i),i)}return i})))==null?void 0:t.length)||0}function Ix(e,t){if(t===void 0&&(t=66060288e-1),e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[Ix({size:xm(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),Ix({size:xm(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap(o=>o)}return[e]}var ps=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(ps||{}),oo=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(oo||{}),Px="[SessionRecording]",Ox="redacted",_p={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},Oie=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],$ie=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Mie=["/s/","/e/","/i/"];function Gj(e,t,n,r){if(on(e))return e;var i=(t==null?void 0:t["content-length"])||function(o){return new Blob([o]).size}(e);return Yn(i)&&(i=parseInt(i)),i>n?Px+" "+r+" body too large to record ("+i+" bytes)":e}function Yj(e,t){if(on(e))return e;var n=e;return uc(n,!1)||(n=Px+" "+t+" body "+Ox),dn($ie,r=>{var i,o;(i=n)!=null&&i.length&&((o=n)==null?void 0:o.indexOf(r))!==-1&&(n=Px+" "+t+" body "+Ox+" as might contain: "+r)}),n}var Die=(e,t)=>{var n,r,i,o={payloadSizeLimitBytes:_p.payloadSizeLimitBytes,performanceEntryTypeToObserve:[..._p.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],..._p.payloadHostDenyList]},s=e.session_recording.recordHeaders!==!1&&t.recordHeaders,a=e.session_recording.recordBody!==!1&&t.recordBody,l=e.capture_performance!==!1&&t.recordPerformance,u=(n=o,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=Gj(h.requestBody,h.requestHeaders,i,"Request")),h!=null&&h.responseBody&&(h.responseBody=Gj(h.responseBody,h.responseHeaders,i,"Response")),h)),c=h=>{return u(((y,x)=>{var m,b=cc(y.name),w=x.indexOf("http")===0?(m=cc(x))==null?void 0:m.pathname:x;w==="/"&&(w="");var S=b==null?void 0:b.pathname.replace(w||"","");if(!(b&&S&&Mie.some(E=>S.indexOf(E)===0)))return y})((v=(p=h).requestHeaders,on(v)||dn(Object.keys(v!=null?v:{}),y=>{Oie.includes(y.toLowerCase())&&(v[y]=Ox)}),p),e.api_host));var p,v},f=qi(e.session_recording.maskNetworkRequestFn);return f&&qi(e.session_recording.maskCapturedNetworkRequestFn)&&St.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(e.session_recording.maskCapturedNetworkRequestFn=h=>{var p=e.session_recording.maskNetworkRequestFn({url:h.name});return mt({},h,{name:p==null?void 0:p.url})}),o.maskRequestFn=qi(e.session_recording.maskCapturedNetworkRequestFn)?h=>{var p,v=c(h);return v&&(p=e.session_recording.maskCapturedNetworkRequestFn==null?void 0:e.session_recording.maskCapturedNetworkRequestFn(v))!==null&&p!==void 0?p:void 0}:h=>function(p){if(!pt(p))return p.requestBody=Yj(p.requestBody,"Request"),p.responseBody=Yj(p.responseBody,"Response"),p}(c(h)),mt({},_p,o,{recordHeaders:s,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function Wi(e,t,n,r,i){return t>n&&(St.warn("min cannot be greater than max."),t=n),Pr(e)?e>n?(r&&St.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r&&St.warn(r+" cannot be less than min: "+t+". Using min value instead."),t):e:(r&&St.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),Wi(i||n,t,n,r))}class Lie{constructor(t,n){var r,i;n===void 0&&(n={}),this.ot=100,this.lt=10,this.ut={},this.ht={},this.dt=()=>{Object.keys(this.ut).forEach(o=>{this.ut[o]=this.ut[o]+this.lt,this.ut[o]>=this.ot&&delete this.ut[o]})},this.vt=o=>{var s=this._rrweb.mirror.getNode(o);if((s==null?void 0:s.nodeName)!=="svg"&&s instanceof Element){var a=s.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[o,s]},this.ct=o=>{var s,a,l,u,c,f,h,p;return((s=(a=o.removes)==null?void 0:a.length)!==null&&s!==void 0?s:0)+((l=(u=o.attributes)==null?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(f=o.texts)==null?void 0:f.length)!==null&&c!==void 0?c:0)+((h=(p=o.adds)==null?void 0:p.length)!==null&&h!==void 0?h:0)},this.throttleMutations=o=>{if(o.type!==3||o.data.source!==0)return o;var s=o.data,a=this.ct(s);s.attributes&&(s.attributes=s.attributes.filter(u=>{var c,f,h,[p,v]=this.vt(u.id);return this.ut[p]===0?!1:(this.ut[p]=(c=this.ut[p])!==null&&c!==void 0?c:this.ot,this.ut[p]=Math.max(this.ut[p]-1,0),this.ut[p]===0&&(this.ht[p]||(this.ht[p]=!0,(f=(h=this.ft).onBlockedNode)==null||f.call(h,p,v))),u)}));var l=this.ct(s);return l!==0||a===l?o:void 0},this._rrweb=t,this.ft=n,this.lt=Wi((r=this.ft.refillRate)!==null&&r!==void 0?r:this.lt,0,100,"mutation throttling refill rate"),this.ot=Wi((i=this.ft.bucketSize)!==null&&i!==void 0?i:this.ot,0,100,"mutation throttling bucket size"),setInterval(()=>{this.dt()},1e3)}}var Ki=Uint8Array,ui=Uint16Array,dc=Uint32Array,Q1=new Ki([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Z1=new Ki([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xj=new Ki([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e4=function(e,t){for(var n=new ui(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new dc(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},t4=e4(Q1,2),Bie=t4[0],$x=t4[1];Bie[28]=258,$x[258]=28;for(var Jj=e4(Z1,0)[1],n4=new ui(32768),bn=0;bn<32768;++bn){var Qa=(43690&bn)>>>1|(21845&bn)<<1;Qa=(61680&(Qa=(52428&Qa)>>>2|(13107&Qa)<<2))>>>4|(3855&Qa)<<4,n4[bn]=((65280&Qa)>>>8|(255&Qa)<<8)>>>1}var Fd=function(e,t,n){for(var r=e.length,i=0,o=new ui(t);i<r;++i)++o[e[i]-1];var s,a=new ui(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;for(s=new ui(r),i=0;i<r;++i)s[i]=n4[a[e[i]-1]++]>>>15-e[i];return s},Ll=new Ki(288);for(bn=0;bn<144;++bn)Ll[bn]=8;for(bn=144;bn<256;++bn)Ll[bn]=9;for(bn=256;bn<280;++bn)Ll[bn]=7;for(bn=280;bn<288;++bn)Ll[bn]=8;var _m=new Ki(32);for(bn=0;bn<32;++bn)_m[bn]=5;var Fie=Fd(Ll,9),zie=Fd(_m,5),r4=function(e){return(e/8>>0)+(7&e&&1)},i4=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof ui?ui:e instanceof dc?dc:Ki)(n-t);return r.set(e.subarray(t,n)),r},cs=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},od=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},uw=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new Ki(0),0];if(i==1){var s=new Ki(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(E,A){return E.f-A.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[f].f?u++:f++],l=n[u!=c&&n[u].f<n[f].f?u++:f++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=o[0].s;for(r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var p=new ui(h+1),v=Mx(n[c-1],p,0);if(v>t){r=0;var y=0,x=v-t,m=1<<x;for(o.sort(function(E,A){return p[A.s]-p[E.s]||E.f-A.f});r<i;++r){var b=o[r].s;if(!(p[b]>t))break;y+=m-(1<<v-p[b]),p[b]=t}for(y>>>=x;y>0;){var w=o[r].s;p[w]<t?y-=1<<t-p[w]++-1:++r}for(;r>=0&&y;--r){var S=o[r].s;p[S]==t&&(--p[S],++y)}v=t}return[new Ki(p),v]},Mx=function(e,t,n){return e.s==-1?Math.max(Mx(e.l,t,n+1),Mx(e.r,t,n+1)):t[e.s]=n},Qj=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ui(++t),r=0,i=e[0],o=1,s=function(l){n[r++]=l},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},sd=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Dx=function(e,t,n){var r=n.length,i=r4(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},Zj=function(e,t,n,r,i,o,s,a,l,u,c){cs(t,c++,n),++i[256];for(var f=uw(i,15),h=f[0],p=f[1],v=uw(o,15),y=v[0],x=v[1],m=Qj(h),b=m[0],w=m[1],S=Qj(y),E=S[0],A=S[1],T=new ui(19),P=0;P<b.length;++P)T[31&b[P]]++;for(P=0;P<E.length;++P)T[31&E[P]]++;for(var V=uw(T,7),M=V[0],H=V[1],ee=19;ee>4&&!M[Xj[ee-1]];--ee);var W,L,q,Y,re=u+5<<3,D=sd(i,Ll)+sd(o,_m)+s,z=sd(i,h)+sd(o,y)+s+14+3*ee+sd(T,M)+(2*T[16]+3*T[17]+7*T[18]);if(re<=D&&re<=z)return Dx(t,c,e.subarray(l,l+u));if(cs(t,c,1+(z<D)),c+=2,z<D){W=Fd(h,p),L=h,q=Fd(y,x),Y=y;var O=Fd(M,H);for(cs(t,c,w-257),cs(t,c+5,A-1),cs(t,c+10,ee-4),c+=14,P=0;P<ee;++P)cs(t,c+3*P,M[Xj[P]]);c+=3*ee;for(var K=[b,E],se=0;se<2;++se){var ce=K[se];for(P=0;P<ce.length;++P){var Ce=31&ce[P];cs(t,c,O[Ce]),c+=M[Ce],Ce>15&&(cs(t,c,ce[P]>>>5&127),c+=ce[P]>>>12)}}}else W=Fie,L=Ll,q=zie,Y=_m;for(P=0;P<a;++P)if(r[P]>255){Ce=r[P]>>>18&31,od(t,c,W[Ce+257]),c+=L[Ce+257],Ce>7&&(cs(t,c,r[P]>>>23&31),c+=Q1[Ce]);var Ie=31&r[P];od(t,c,q[Ie]),c+=Y[Ie],Ie>3&&(od(t,c,r[P]>>>5&8191),c+=Z1[Ie])}else od(t,c,W[r[P]]),c+=L[r[P]];return od(t,c,W[256]),c+L[256]},Hie=new dc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Uie=function(){for(var e=new dc(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Wie=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Uie[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}},Vie=function(e,t,n,r,i){return function(o,s,a,l,u,c){var f=o.length,h=new Ki(l+f+5*(1+Math.floor(f/7e3))+u),p=h.subarray(l,h.length-u),v=0;if(!s||f<8)for(var y=0;y<=f;y+=65535){var x=y+65535;x<f?v=Dx(p,v,o.subarray(y,x)):(p[y]=c,v=Dx(p,v,o.subarray(y,f)))}else{for(var m=Hie[s-1],b=m>>>13,w=8191&m,S=(1<<a)-1,E=new ui(32768),A=new ui(S+1),T=Math.ceil(a/3),P=2*T,V=function(We){return(o[We]^o[We+1]<<T^o[We+2]<<P)&S},M=new dc(25e3),H=new ui(288),ee=new ui(32),W=0,L=0,q=(y=0,0),Y=0,re=0;y<f;++y){var D=V(y),z=32767&y,O=A[D];if(E[z]=O,A[D]=z,Y<=y){var K=f-y;if((W>7e3||q>24576)&&K>423){v=Zj(o,p,0,M,H,ee,L,q,re,y-re,v),q=W=L=0,re=y;for(var se=0;se<286;++se)H[se]=0;for(se=0;se<30;++se)ee[se]=0}var ce=2,Ce=0,Ie=w,Re=z-O&32767;if(K>2&&D==V(y-Re))for(var F=Math.min(b,K)-1,Z=Math.min(32767,y),ie=Math.min(258,K);Re<=Z&&--Ie&&z!=O;){if(o[y+ce]==o[y+ce-Re]){for(var De=0;De<ie&&o[y+De]==o[y+De-Re];++De);if(De>ce){if(ce=De,Ce=Re,De>F)break;var Ye=Math.min(Re,De-2),ze=0;for(se=0;se<Ye;++se){var ne=y-Re+se+32768&32767,fe=ne-E[ne]+32768&32767;fe>ze&&(ze=fe,O=ne)}}}Re+=(z=O)-(O=E[z])+32768&32767}if(Ce){M[q++]=268435456|$x[ce]<<18|Jj[Ce];var Se=31&$x[ce],Ue=31&Jj[Ce];L+=Q1[Se]+Z1[Ue],++H[257+Se],++ee[Ue],Y=y+ce,++W}else M[q++]=o[y],++H[o[y]]}}v=Zj(o,p,c,M,H,ee,L,q,re,y-re,v)}return i4(h,0,l+r4(v)+u)}(e,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!0)},Lx=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},qie=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&Lx(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},Kie=function(e){return 10+(e.filename&&e.filename.length+1||0)};function o4(e,t){t===void 0&&(t={});var n=Wie(),r=e.length;n.p(e);var i=Vie(e,t,Kie(t),8),o=i.length;return qie(i,t),Lx(i,o-8,n.d()),Lx(i,o-4,r),i}function s4(e,t){var n=e.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(e);for(var r=new Ki(e.length+(e.length>>>1)),i=0,o=function(u){r[i++]=u},s=0;s<n;++s){if(i+5>r.length){var a=new Ki(i+8+(n-s<<1));a.set(r),r=a}var l=e.charCodeAt(s);l<128||t?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return i4(r,0,i)}function Gie(e,t){return function(n){for(var r=0,i=0;i<n.length;i++)r=(r<<5)-r+n.charCodeAt(i),r|=0;return Math.abs(r)}(e)%100<Wi(100*t,0,100)}var $a="disabled",eS="sampled",Sm="active",Bl="buffering",tS="paused",nS="trigger",Xo=nS+"_activated",Dr=nS+"_pending",ts=nS+"_"+$a;function eA(e,t){return t.some(n=>n.matching==="regex"&&new RegExp(n.url).test(e))}class a4{constructor(t){this.gt=t}triggerStatus(t){var n=this.gt.map(r=>r.triggerStatus(t));return n.includes(Xo)?Xo:n.includes(Dr)?Dr:ts}stop(){this.gt.forEach(t=>t.stop())}}class l4{constructor(t){this.gt=t}triggerStatus(t){var n=new Set;for(var r of this.gt)n.add(r.triggerStatus(t));switch(n.delete(ts),n.size){case 0:return ts;case 1:return Array.from(n)[0];default:return Dr}}stop(){this.gt.forEach(t=>t.stop())}}class Yie{triggerStatus(){return Dr}stop(){}}class Xie{constructor(t){this._t=[],this.bt=[],this.urlBlocked=!1,this._instance=t}onRemoteConfig(t){var n,r;this._t=((n=t.sessionRecording)==null?void 0:n.urlTriggers)||[],this.bt=((r=t.sessionRecording)==null?void 0:r.urlBlocklist)||[]}wt(t){var n;return this._t.length===0?ts:((n=this._instance)==null?void 0:n.get_property(xx))===t?Xo:Dr}triggerStatus(t){var n=this.wt(t),r=n===Xo?Xo:n===Dr?Dr:ts;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(t,n,r){if(Te!==void 0&&Te.location.href){var i=Te.location.href,o=this.urlBlocked,s=eA(i,this.bt);o&&s||(s&&!o?t():!s&&o&&n(),eA(i,this._t)&&r("url"))}}stop(){}}class Jie{constructor(t){this.linkedFlag=null,this.linkedFlagSeen=!1,this.yt=()=>{},this._instance=t}triggerStatus(){var t=Dr;return on(this.linkedFlag)&&(t=ts),this.linkedFlagSeen&&(t=Xo),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:t}),t}onRemoteConfig(t,n){var r;if(this.linkedFlag=((r=t.sessionRecording)==null?void 0:r.linkedFlag)||null,!on(this.linkedFlag)&&!this.linkedFlagSeen){var i=Yn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,o=Yn(this.linkedFlag)?null:this.linkedFlag.variant;this.yt=this._instance.onFeatureFlags((s,a)=>{var l=Dn(a)&&i in a&&(o?a[i]===o:a[i]===!0);l&&n(i,o),this.linkedFlagSeen=l})}}stop(){this.yt()}}class Qie{constructor(t){this.St=[],this._instance=t}onRemoteConfig(t){var n;this.St=((n=t.sessionRecording)==null?void 0:n.eventTriggers)||[]}$t(t){var n;return this.St.length===0?ts:((n=this._instance)==null?void 0:n.get_property(_x))===t?Xo:Dr}triggerStatus(t){var n=this.$t(t),r=n===Xo?Xo:n===Dr?Dr:ts;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}}function Zie(e){return e.isRecordingEnabled?Bl:$a}function eoe(e){if(!e.receivedDecide)return Bl;if(!e.isRecordingEnabled)return $a;if(e.urlTriggerMatching.urlBlocked)return tS;var t=e.isSampled===!0,n=new a4([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?eS:n===Xo?Sm:n===Dr?Bl:e.isSampled===!1?$a:Sm}function toe(e){if(!e.receivedDecide)return Bl;if(!e.isRecordingEnabled)return $a;if(e.urlTriggerMatching.urlBlocked)return tS;var t=new l4([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),n=t!==ts,r=Es(e.isSampled);return n&&t===Dr?Bl:n&&t===ts||r&&!e.isSampled?$a:e.isSampled===!0?eS:Sm}var Ed="[SessionRecording]",Nr=zr(Ed);function Sp(){var e,t;return Ft==null||(e=Ft.__PosthogExtensions__)==null||(t=e.rrweb)==null?void 0:t.record}var noe=3e5,roe=[oo.MouseMove,oo.MouseInteraction,oo.Scroll,oo.ViewportResize,oo.Input,oo.TouchMove,oo.MediaInteraction,oo.Drag],tA=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function Za(e){return function(t,n){for(var r="",i=0;i<t.length;){var o=t[i++];r+=String.fromCharCode(o)}return r}(o4(s4(JSON.stringify(e))))}function nA(e){return e.type===ps.Custom&&e.data.tag==="sessionIdle"}class ioe{get sessionId(){return this.kt}get xt(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Et}get It(){if(!this._instance.sessionManager)throw new Error(Ed+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Pt(){var t,n;return this.Rt.triggerStatus(this.sessionId)===Dr?6e4:(t=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&t!==void 0?t:noe}get Tt(){var t=this._instance.get_property(_d);return Es(t)?t:null}get Mt(){var t,n,r=(t=this.M)==null?void 0:t.data[((n=this.M)==null?void 0:n.data.length)-1],{sessionStartTimestamp:i}=this.It.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-i:null}get Ct(){var t=!!this._instance.get_property(bx),n=!this._instance.config.disable_session_recording;return Te&&t&&n}get Ot(){var t=!!this._instance.get_property(Nj),n=this._instance.config.enable_recording_console_log;return n!=null?n:t}get Ft(){var t,n,r,i,o,s,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(Ij),u=(t=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&t!==void 0&&t,c=(r=(i=a==null?void 0:a.canvasFps)!==null&&i!==void 0?i:l==null?void 0:l.fps)!==null&&r!==void 0?r:4,f=(o=(s=a==null?void 0:a.canvasQuality)!==null&&s!==void 0?s:l==null?void 0:l.quality)!==null&&o!==void 0?o:.4;if(typeof f=="string"){var h=parseFloat(f);f=isNaN(h)?.4:h}return{enabled:u,fps:Wi(c,0,12,"canvas recording fps",4),quality:Wi(f,0,1,"canvas recording quality",.4)}}get At(){var t,n,r=this._instance.get_property(Rj),i={recordHeaders:(t=this._instance.config.session_recording)==null?void 0:t.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},o=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),s=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=Dn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Es(a)?a:r!=null&&r.capturePerformance);return o||s||l?{recordHeaders:o,recordBody:s,recordPerformance:l}:void 0}get Dt(){var t,n,r,i,o,s,a=this._instance.get_property(Tj),l={maskAllInputs:(t=this._instance.config.session_recording)==null?void 0:t.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},u=(i=l==null?void 0:l.maskAllInputs)!==null&&i!==void 0?i:a==null?void 0:a.maskAllInputs,c=(o=l==null?void 0:l.maskTextSelector)!==null&&o!==void 0?o:a==null?void 0:a.maskTextSelector,f=(s=l==null?void 0:l.blockSelector)!==null&&s!==void 0?s:a==null?void 0:a.blockSelector;return pt(u)&&pt(c)&&pt(f)?void 0:{maskAllInputs:u==null||u,maskTextSelector:c,blockSelector:f}}get jt(){var t=this._instance.get_property(Pj);return Pr(t)?t:null}get Lt(){var t=this._instance.get_property(Oj);return Pr(t)?t:null}get status(){return this.Nt?this.zt({receivedDecide:this.Nt,isRecordingEnabled:this.Ct,isSampled:this.Tt,urlTriggerMatching:this.Ut,eventTriggerMatching:this.qt,linkedFlagMatching:this.Bt,sessionId:this.sessionId}):Bl}constructor(t){if(this.zt=Zie,this.Nt=!1,this.Ht=[],this.Wt="unknown",this.Gt=Date.now(),this.Rt=new Yie,this.Jt=void 0,this.Vt=void 0,this.Kt=void 0,this.Yt=void 0,this.Xt=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.Qt=()=>{this.Zt()},this.ti=()=>{this.ii("browser offline",{})},this.ei=()=>{this.ii("browser online",{})},this.ri=()=>{if(vt!=null&&vt.visibilityState){var i="window "+vt.visibilityState;this.ii(i,{})}},this._instance=t,this.Et=!1,this.si="/s/",this.ni=void 0,this.Nt=!1,!this._instance.sessionManager)throw Nr.error("started without valid sessionManager"),new Error(Ed+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Ed+" cannot be used with __preview_experimental_cookieless_mode.");this.Bt=new Jie(this._instance),this.Ut=new Xie(this._instance),this.qt=new Qie(this._instance);var{sessionId:n,windowId:r}=this.It.checkAndGetSessionAndWindowId();this.kt=n,this.oi=r,this.M=this.ai(),this.xt>=this.It.sessionTimeoutMs&&Nr.warn("session_idle_threshold_ms ("+this.xt+") is greater than the session timeout ("+this.It.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(t){this.Ct?(this.li(t),jn(Te,"beforeunload",this.Qt),jn(Te,"offline",this.ti),jn(Te,"online",this.ei),jn(Te,"visibilitychange",this.ri),this.ui(),this.hi(),on(this.Jt)&&(this.Jt=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this.di(n==null?void 0:n.properties.$current_url):"";if(!r)return;this.ii("$pageview",{href:r})}}catch(i){Nr.error("Could not add $pageview to rrweb session",i)}})),this.Vt||(this.Vt=this.It.onSessionId((n,r,i)=>{var o,s,a,l;i&&(this.ii("$session_id_change",{sessionId:n,windowId:r,changeReason:i}),(o=this._instance)==null||(s=o.persistence)==null||s.unregister(_x),(a=this._instance)==null||(l=a.persistence)==null||l.unregister(xx))}))):this.stopRecording()}stopRecording(){var t,n,r,i;this.Et&&this.ni&&(this.ni(),this.ni=void 0,this.Et=!1,Te==null||Te.removeEventListener("beforeunload",this.Qt),Te==null||Te.removeEventListener("offline",this.ti),Te==null||Te.removeEventListener("online",this.ei),Te==null||Te.removeEventListener("visibilitychange",this.ri),this.ai(),clearInterval(this.vi),(t=this.Jt)==null||t.call(this),this.Jt=void 0,(n=this.Xt)==null||n.call(this),this.Xt=void 0,(r=this.Vt)==null||r.call(this),this.Vt=void 0,(i=this.Yt)==null||i.call(this),this.Yt=void 0,this.qt.stop(),this.Ut.stop(),this.Bt.stop(),Nr.info("stopped"))}ci(){var t;(t=this._instance.persistence)==null||t.unregister(_d)}fi(t){var n,r=this.kt!==t,i=this.jt;if(Pr(i)){var o=this.Tt,s=r||!Es(o),a=s?Gie(t,i):o;s&&(a?this.pi(eS):Nr.warn("Sample rate ("+i+") has determined that this sessionId ("+t+") will not be sent to the server."),this.ii("samplingDecisionMade",{sampleRate:i,isSampled:a})),(n=this._instance.persistence)==null||n.register({[_d]:a})}else this.ci()}onRemoteConfig(t){var n,r,i,o;this.ii("$remote_config_received",t),this.gi(t),(n=t.sessionRecording)!=null&&n.endpoint&&(this.si=(o=t.sessionRecording)==null?void 0:o.endpoint),this.ui(),((r=t.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.zt=eoe,this.Rt=new a4([this.qt,this.Ut])):(this.zt=toe,this.Rt=new l4([this.qt,this.Ut])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(i=t.sessionRecording)==null?void 0:i.triggerMatchType}),this.Ut.onRemoteConfig(t),this.qt.onRemoteConfig(t),this.Bt.onRemoteConfig(t,(s,a)=>{this.pi("linked_flag_matched",{flag:s,variant:a})}),this.Nt=!0,this.startIfEnabledOrStop()}ui(){Pr(this.jt)&&on(this.Yt)&&(this.Yt=this.It.onSessionId(t=>{this.fi(t)}))}gi(t){if(this._instance.persistence){var n,r=this._instance.persistence,i=()=>{var o,s,a,l,u,c,f,h,p,v=(o=t.sessionRecording)==null?void 0:o.sampleRate,y=on(v)?null:parseFloat(v);on(y)&&this.ci();var x=(s=t.sessionRecording)==null?void 0:s.minimumDurationMilliseconds;r.register({[bx]:!!t.sessionRecording,[Nj]:(a=t.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[Rj]:mt({capturePerformance:t.capturePerformance},(l=t.sessionRecording)==null?void 0:l.networkPayloadCapture),[Tj]:(u=t.sessionRecording)==null?void 0:u.masking,[Ij]:{enabled:(c=t.sessionRecording)==null?void 0:c.recordCanvas,fps:(f=t.sessionRecording)==null?void 0:f.canvasFps,quality:(h=t.sessionRecording)==null?void 0:h.canvasQuality},[Pj]:y,[Oj]:pt(x)?null:x,[$j]:(p=t.sessionRecording)==null?void 0:p.scriptConfig})};i(),(n=this.Kt)==null||n.call(this),this.Kt=this.It.onSessionId(i)}}log(t,n){var r;n===void 0&&(n="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(t)]}},timestamp:Date.now()})}li(t){if(!pt(Object.assign)&&!pt(Array.from)&&!(this.Et||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Et=!0,this.It.checkAndGetSessionAndWindowId(),Sp()?this.mi():(n=Ft.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.bi,r=>{if(r)return Nr.error("could not load recorder",r);this.mi()}),Nr.info("starting"),this.status===Sm&&this.pi(t||"recording_initialized")}}get bi(){var t,n,r;return((t=this._instance)==null||(n=t.persistence)==null||(r=n.get_property($j))==null?void 0:r.script)||"recorder"}wi(t){var n;return t.type===3&&roe.indexOf((n=t.data)==null?void 0:n.source)!==-1}yi(t){var n=this.wi(t);n||this.Wt||t.timestamp-this.Gt>this.xt&&(this.Wt=!0,clearInterval(this.vi),this.ii("sessionIdle",{eventTimestamp:t.timestamp,lastActivityTimestamp:this.Gt,threshold:this.xt,bufferLength:this.M.data.length,bufferSize:this.M.size}),this.Zt());var r=!1;if(n&&(this.Gt=t.timestamp,this.Wt)){var i=this.Wt==="unknown";this.Wt=!1,i||(this.ii("sessionNoLongerIdle",{reason:"user activity",type:t.type}),r=!0)}if(!this.Wt){var{windowId:o,sessionId:s}=this.It.checkAndGetSessionAndWindowId(!n,t.timestamp),a=this.kt!==s,l=this.oi!==o;this.oi=o,this.kt=s,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Si()}}$i(t){try{return t.rrwebMethod(),!0}catch(n){return this.Ht.length<10?this.Ht.push({enqueuedAt:t.enqueuedAt||Date.now(),attempt:t.attempt++,rrwebMethod:t.rrwebMethod}):Nr.warn("could not emit queued rrweb event.",n,t),!1}}ii(t,n){return this.$i(tA(()=>Sp().addCustomEvent(t,n)))}ki(){return this.$i(tA(()=>Sp().takeFullSnapshot()))}mi(){var t,n,r,i,o={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},s=this._instance.config.session_recording;for(var[a,l]of Object.entries(s||{}))a in o&&(a==="maskInputOptions"?o.maskInputOptions=mt({password:!0},l):o[a]=l);this.Ft&&this.Ft.enabled&&(o.recordCanvas=!0,o.sampling={canvas:this.Ft.fps},o.dataURLOptions={type:"image/webp",quality:this.Ft.quality}),this.Dt&&(o.maskAllInputs=(n=this.Dt.maskAllInputs)===null||n===void 0||n,o.maskTextSelector=(r=this.Dt.maskTextSelector)!==null&&r!==void 0?r:void 0,o.blockSelector=(i=this.Dt.blockSelector)!==null&&i!==void 0?i:void 0);var u=Sp();if(u){this.xi=(t=this.xi)!==null&&t!==void 0?t:new Lie(u,{refillRate:this._instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this._instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(f,h)=>{var p="Too many mutations on node '"+f+"'. Rate limiting. This could be due to SVG animations or something similar";Nr.info(p,{node:h}),this.log(Ed+" "+p,"warn")}});var c=this.Ei();this.ni=u(mt({emit:f=>{this.onRRwebEmit(f)},plugins:c},o)),this.Gt=Date.now(),this.Wt=Es(this.Wt)?this.Wt:"unknown",this.ii("$session_options",{sessionRecordingOptions:o,activePlugins:c.map(f=>f==null?void 0:f.name)}),this.ii("$posthog_config",{config:this._instance.config})}else Nr.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Si(){if(this.vi&&clearInterval(this.vi),this.Wt!==!0){var t=this.Pt;t&&(this.vi=setInterval(()=>{this.ki()},t))}}Ei(){var t,n,r,i,o=[],s=(t=Ft.__PosthogExtensions__)==null||(n=t.rrwebPlugins)==null?void 0:n.getRecordConsolePlugin;s&&this.Ot&&o.push(s());var a=(r=Ft.__PosthogExtensions__)==null||(i=r.rrwebPlugins)==null?void 0:i.getRecordNetworkPlugin;return this.At&&qi(a)&&(!nie.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?o.push(a(Die(this._instance.config,this.At))):Nr.info("NetworkCapture not started because we are on localhost.")),o}onRRwebEmit(t){var n;if(this.Ii(),t&&Dn(t)){if(t.type===ps.Meta){var r=this.di(t.data.href);if(this.Pi=r,!r)return;t.data.href=r}else this.Ri();if(this.Ut.checkUrlTriggerConditions(()=>this.Ti(),()=>this.Mi(),h=>this.Ci(h)),!this.Ut.urlBlocked||(i=t).type===ps.Custom&&i.data.tag==="recording paused"){var i;t.type===ps.FullSnapshot&&this.Si(),t.type===ps.FullSnapshot&&this.Nt&&this.Rt.triggerStatus(this.sessionId)===Dr&&this.ai();var o=this.xi?this.xi.throttleMutations(t):t;if(o){var s=function(h){var p=h;if(p&&Dn(p)&&p.type===6&&Dn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var v=[],y=0;y<p.data.payload.payload.length;y++)p.data.payload.payload[y]&&p.data.payload.payload[y].length>2e3?v.push(p.data.payload.payload[y].slice(0,2e3)+"...[truncated]"):v.push(p.data.payload.payload[y]);return p.data.payload.payload=v,h}return h}(o);if(this.yi(s),this.Wt!==!0||nA(s)){if(nA(s)){var a=s.data.payload;if(a){var l=a.lastActivityTimestamp,u=a.threshold;s.timestamp=l+u}}var c=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(h){if(xm(h)<1024)return h;try{if(h.type===ps.FullSnapshot)return mt({},h,{data:Za(h.data),cv:"2024-10"});if(h.type===ps.IncrementalSnapshot&&h.data.source===oo.Mutation)return mt({},h,{cv:"2024-10",data:mt({},h.data,{texts:Za(h.data.texts),attributes:Za(h.data.attributes),removes:Za(h.data.removes),adds:Za(h.data.adds)})});if(h.type===ps.IncrementalSnapshot&&h.data.source===oo.StyleSheetRule)return mt({},h,{cv:"2024-10",data:mt({},h.data,{adds:h.data.adds?Za(h.data.adds):void 0,removes:h.data.removes?Za(h.data.removes):void 0})})}catch(p){Nr.error("could not compress event - will use uncompressed event",p)}return h}(s):s,f={$snapshot_bytes:xm(c),$snapshot_data:c,$session_id:this.kt,$window_id:this.oi};this.status!==$a?this.Oi(f):this.ai()}}}}}Ri(){if(!this._instance.config.capture_pageview&&Te){var t=this.di(Te.location.href);this.Pi!==t&&(this.ii("$url_changed",{href:t}),this.Pi=t)}}Ii(){if(this.Ht.length){var t=[...this.Ht];this.Ht=[],t.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.$i(n)})}}di(t){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:t};return(r=i=n.maskNetworkRequestFn(i))==null?void 0:r.url}return t}ai(){return this.M={size:0,data:[],sessionId:this.kt,windowId:this.oi},this.M}Zt(){this.Fi&&(clearTimeout(this.Fi),this.Fi=void 0);var t=this.Lt,n=this.Mt,r=Pr(n)&&n>=0,i=Pr(t)&&r&&n<t;return this.status===Bl||this.status===tS||this.status===$a||i?(this.Fi=setTimeout(()=>{this.Zt()},2e3),this.M):(this.M.data.length>0&&Ix(this.M).forEach(o=>{this.Ai({$snapshot_bytes:o.size,$snapshot_data:o.data,$session_id:o.sessionId,$window_id:o.windowId,$lib:"web",$lib_version:bs.LIB_VERSION})}),this.ai())}Oi(t){var n,r=2+(((n=this.M)==null?void 0:n.data.length)||0);!this.Wt&&(this.M.size+t.$snapshot_bytes+r>943718.4||this.M.sessionId!==this.kt)&&(this.M=this.Zt()),this.M.size+=t.$snapshot_bytes,this.M.data.push(t.$snapshot_data),this.Fi||this.Wt||(this.Fi=setTimeout(()=>{this.Zt()},2e3))}Ai(t){this._instance.capture("$snapshot",t,{_url:this._instance.requestRouter.endpointFor("api",this.si),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}Ci(t){var n,r;this.Rt.triggerStatus(this.sessionId)===Dr&&((n=this._instance)==null||(r=n.persistence)==null||r.register({[t==="url"?xx:_x]:this.kt}),this.Zt(),this.pi(t+"_trigger_matched"))}Ti(){this.Ut.urlBlocked||(this.Ut.urlBlocked=!0,clearInterval(this.vi),Nr.info("recording paused due to URL blocker"),this.ii("recording paused",{reason:"url blocker"}))}Mi(){this.Ut.urlBlocked&&(this.Ut.urlBlocked=!1,this.ki(),this.Si(),this.ii("recording resumed",{reason:"left blocked url"}),Nr.info("recording resumed"))}hi(){this.qt.St.length!==0&&on(this.Xt)&&(this.Xt=this._instance.on("eventCaptured",t=>{try{this.qt.St.includes(t.event)&&this.Ci("event")}catch(n){Nr.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Bt.linkedFlagSeen=!0,this.ki(),this.pi("linked_flag_overridden")}overrideSampling(){var t;(t=this._instance.persistence)==null||t.register({[_d]:!0}),this.ki(),this.pi("sampling_overridden")}overrideTrigger(t){this.Ci(t)}pi(t,n){this._instance.register_for_session({$session_recording_start_reason:t}),Nr.info(t.replace("_"," "),n),qt(["recording_initialized","session_id_changed"],t)||this.ii(t,n)}get sdkDebugProperties(){var{sessionStartTimestamp:t}=this.It.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.M.data.length,$sdk_debug_replay_internal_buffer_size:this.M.size,$sdk_debug_current_session_duration:this.Mt,$sdk_debug_session_start:t}}}var cw=zr("[SegmentIntegration]");function ooe(e,t){var n=e.config.segment;if(!n)return t();(function(r,i){var o=r.config.segment;if(!o)return i();var s=l=>{var u=()=>l.anonymousId()||fa();r.config.get_device_id=u,l.id()&&(r.register({distinct_id:l.id(),$device_id:u()}),r.persistence.set_property(hs,"identified")),i()},a=o.user();"then"in a&&qi(a.then)?a.then(l=>s(l)):s(a)})(e,()=>{n.register((r=>{Promise&&Promise.resolve||cw.warn("This browser does not have Promise support, and can not use the segment integration");var i=(o,s)=>{var a;if(!s)return o;o.event.userId||o.event.anonymousId===r.get_distinct_id()||(cw.info("No userId set, resetting PostHog"),r.reset()),o.event.userId&&o.event.userId!==r.get_distinct_id()&&(cw.info("UserId set, identifying with PostHog"),r.identify(o.event.userId));var l=r.Di(s,(a=o.event.properties)!==null&&a!==void 0?a:{},new Date);return o.event.properties=Object.assign({},l,o.event.properties),o};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:o=>i(o,o.event.event),page:o=>i(o,"$pageview"),identify:o=>i(o,"$identify"),screen:o=>i(o,"$screen")}})(e)).then(()=>{t()})})}var u4="posthog-js";function c4(e,t){var{organization:n,projectId:r,prefix:i,severityAllowList:o=["error"]}=t===void 0?{}:t;return s=>{var a,l,u,c,f;if(!(o==="*"||o.includes(s.level))||!e.__loaded)return s;s.tags||(s.tags={});var h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());s.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var p=((a=s.exception)==null?void 0:a.values)||[],v=p.map(x=>mt({},x,{stacktrace:x.stacktrace?mt({},x.stacktrace,{type:"raw",frames:(x.stacktrace.frames||[]).map(m=>mt({},m,{platform:"web:javascript"}))}):void 0})),y={$exception_message:((l=p[0])==null?void 0:l.value)||s.message,$exception_type:(u=p[0])==null?void 0:u.type,$exception_personURL:h,$exception_level:s.level,$exception_list:v,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((c=p[0])==null?void 0:c.value)||s.message,$sentry_exception_type:(f=p[0])==null?void 0:f.type,$sentry_tags:s.tags};return n&&r&&(y.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+s.event_id),e.exceptions.sendExceptionEvent(y),s}}class soe{constructor(t,n,r,i,o){this.name=u4,this.setupOnce=function(s){s(c4(t,{organization:n,projectId:r,prefix:i,severityAllowList:o}))}}}var gs,aoe=Te!=null&&Te.location?wm(Te.location.hash,"__posthog")||wm(location.hash,"state"):null,rA="_postHogToolbarParams",iA=zr("[Toolbar]");(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"})(gs||(gs={}));class loe{constructor(t){this.instance=t}ji(t){Ft.ph_toolbar_state=t}Li(){var t;return(t=Ft.ph_toolbar_state)!==null&&t!==void 0?t:gs.UNINITIALIZED}maybeLoadToolbar(t,n,r){var i,o;if(t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!Te||!vt)return!1;t=(i=t)!==null&&i!==void 0?i:Te.location,r=(o=r)!==null&&o!==void 0?o:Te.history;try{if(!n){try{Te.localStorage.setItem("test","test"),Te.localStorage.removeItem("test")}catch(u){return!1}n=Te==null?void 0:Te.localStorage}var s,a=aoe||wm(t.hash,"__posthog")||wm(t.hash,"state"),l=a?Ej(()=>JSON.parse(atob(decodeURIComponent(a))))||Ej(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((s=l).source="url",s&&Object.keys(s).length>0&&(l.desiredHash?t.hash=l.desiredHash:r?r.replaceState(r.state,"",t.pathname+t.search):t.hash="")):((s=JSON.parse(n.getItem(rA)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch(u){return!1}}Ni(t){var n=Ft.ph_load_toolbar||Ft.ph_load_editor;!on(n)&&qi(n)?n(t,this.instance):iA.warn("No toolbar load function found")}loadToolbar(t){var n=!(vt==null||!vt.getElementById(MO));if(!Te||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=mt({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(Te.localStorage.setItem(rA,JSON.stringify(mt({},i,{source:void 0}))),this.Li()===gs.LOADED)this.Ni(i);else if(this.Li()===gs.UNINITIALIZED){var o;this.ji(gs.LOADING),(o=Ft.__PosthogExtensions__)==null||o.loadExternalDependency==null||o.loadExternalDependency(this.instance,"toolbar",s=>{if(s)return iA.error("[Toolbar] Failed to load",s),void this.ji(gs.UNINITIALIZED);this.ji(gs.LOADED),this.Ni(i)}),jn(Te,"turbolinks:load",()=>{this.ji(gs.UNINITIALIZED),this.loadToolbar(i)})}return!0}zi(t){return this.loadToolbar(t)}maybeLoadEditor(t,n,r){return t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(t,n,r)}}var uoe=zr("[TracingHeaders]");class coe{constructor(t){this.Ui=void 0,this.qi=void 0,this.V=()=>{var n,r,i,o;pt(this.Ui)&&((n=Ft.__PosthogExtensions__)==null||(r=n.tracingHeadersPatchFns)==null||r._patchXHR(this._instance.sessionManager)),pt(this.qi)&&((i=Ft.__PosthogExtensions__)==null||(o=i.tracingHeadersPatchFns)==null||o._patchFetch(this._instance.sessionManager))},this._instance=t}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",i=>{if(i)return uoe.error("failed to load script",i);t()})}startIfEnabledOrStop(){var t,n;this._instance.config.__add_tracing_headers?this.G(this.V):((t=this.Ui)==null||t.call(this),(n=this.qi)==null||n.call(this),this.Ui=void 0,this.qi=void 0)}}var ta=zr("[Web Vitals]"),oA=9e5;class doe{constructor(t){var n;this.Bi=!1,this.i=!1,this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Hi=()=>{clearTimeout(this.Wi),this.M.metrics.length!==0&&(this._instance.capture("$web_vitals",this.M.metrics.reduce((r,i)=>mt({},r,{["$web_vitals_"+i.name+"_event"]:mt({},i),["$web_vitals_"+i.name+"_value"]:i.value}),{})),this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Gi=r=>{var i,o=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(pt(o))ta.error("Could not read session ID. Dropping metrics!");else{this.M=this.M||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var s=this.Ji();pt(s)||(on(r==null?void 0:r.name)||on(r==null?void 0:r.value)?ta.error("Invalid metric received",r):this.Vi&&r.value>=this.Vi?ta.error("Ignoring metric with value >= "+this.Vi,r):(this.M.url!==s&&(this.Hi(),this.Wi=setTimeout(this.Hi,this.flushToCaptureTimeoutMs)),pt(this.M.url)&&(this.M.url=s),this.M.firstMetricTimestamp=pt(this.M.firstMetricTimestamp)?Date.now():this.M.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.M.metrics.push(mt({},r,{$current_url:s,$session_id:o.sessionId,$window_id:o.windowId,timestamp:Date.now()})),this.M.metrics.length===this.allowedMetrics.length&&this.Hi()))}},this.V=()=>{var r,i,o,s,a=Ft.__PosthogExtensions__;pt(a)||pt(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:o,onINP:s}=a.postHogWebVitalsCallbacks),r&&i&&o&&s?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Gi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Gi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&o(this.Gi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&s(this.Gi.bind(this)),this.i=!0):ta.error("web vitals callbacks not loaded - not starting")},this._instance=t,this.Bi=!((n=this._instance.persistence)==null||!n.props[jj]),this.startIfEnabled()}get allowedMetrics(){var t,n,r=Dn(this._instance.config.capture_performance)?(t=this._instance.config.capture_performance)==null?void 0:t.web_vitals_allowed_metrics:void 0;return pt(r)?((n=this._instance.persistence)==null?void 0:n.props[Aj])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Dn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Vi(){var t=Dn(this._instance.config.capture_performance)&&Pr(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:oA;return 0<t&&t<=6e4?oA:t}get isEnabled(){var t=oi==null?void 0:oi.protocol;if(t!=="http:"&&t!=="https:")return ta.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=Dn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Es(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Es(n)?n:this.Bi}startIfEnabled(){this.isEnabled&&!this.i&&(ta.info("enabled, starting..."),this.G(this.V))}onRemoteConfig(t){var n=Dn(t.capturePerformance)&&!!t.capturePerformance.web_vitals,r=Dn(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[jj]:n}),this._instance.persistence.register({[Aj]:r})),this.Bi=n,this.startIfEnabled()}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",i=>{i?ta.error("failed to load script",i):t()})}Ji(){var t=Te?Te.location.href:void 0;return t||ta.error("Could not determine current URL"),t}}var foe=zr("[Heatmaps]");function sA(e){return Dn(e)&&"clientX"in e&&"clientY"in e&&Pr(e.clientX)&&Pr(e.clientY)}class hoe{constructor(t){var n;this.rageclicks=new KO,this.Bi=!1,this.i=!1,this.Ki=null,this.instance=t,this.Bi=!((n=this.instance.persistence)==null||!n.props[wx])}get flushIntervalMilliseconds(){var t=5e3;return Dn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return pt(this.instance.config.capture_heatmaps)?pt(this.instance.config.enable_heatmaps)?this.Bi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;foe.info("starting..."),this.Yi(),this.Ki=setInterval(this.Xi.bind(this),this.flushIntervalMilliseconds)}else{var t,n;clearInterval((t=this.Ki)!==null&&t!==void 0?t:void 0),(n=this.Qi)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(t){var n=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[wx]:n}),this.Bi=n,this.startIfEnabled()}getAndClearBuffer(){var t=this.M;return this.M=void 0,t}Zi(t){this.te(t.originalEvent,"deadclick")}Yi(){Te&&vt&&(jn(Te,"beforeunload",this.Xi.bind(this)),jn(vt,"click",t=>this.te(t||(Te==null?void 0:Te.event)),{capture:!0}),jn(vt,"mousemove",t=>this.ie(t||(Te==null?void 0:Te.event)),{capture:!0}),this.Qi=new YO(this.instance,yie,this.Zi.bind(this)),this.Qi.startIfEnabled(),this.i=!0)}ee(t,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),o=this.instance.scrollManager.scrollElement(),s=function(a,l,u){for(var c=a;c&&Ky(c)&&!Ea(c,"body");){if(c===u)return!1;if(qt(l,Te==null?void 0:Te.getComputedStyle(c).position))return!0;c=zO(c)}return!1}(FO(t),["fixed","sticky"],o);return{x:t.clientX+(s?0:i),y:t.clientY+(s?0:r),target_fixed:s,type:n}}te(t,n){var r;if(n===void 0&&(n="click"),!Dj(t.target)&&sA(t)){var i=this.ee(t,n);(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.re(mt({},i,{type:"rageclick"})),this.re(i)}}ie(t){!Dj(t.target)&&sA(t)&&(clearTimeout(this.se),this.se=setTimeout(()=>{this.re(this.ee(t,"mousemove"))},500))}re(t){if(Te){var n=Te.location.href;this.M=this.M||{},this.M[n]||(this.M[n]=[]),this.M[n].push(t)}}Xi(){this.M&&!Eu(this.M)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class poe{constructor(t){this._instance=t}doPageView(t,n){var r,i=this.ne(t,n);return this.oe={pathname:(r=Te==null?void 0:Te.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:t},this._instance.scrollManager.resetContext(),i}doPageLeave(t){var n;return this.ne(t,(n=this.oe)==null?void 0:n.pageViewId)}doEvent(){var t;return{$pageview_id:(t=this.oe)==null?void 0:t.pageViewId}}ne(t,n){var r=this.oe;if(!r)return{$pageview_id:n};var i={$pageview_id:n,$prev_pageview_id:r.pageViewId},o=this._instance.scrollManager.getContext();if(o&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:f}=o;if(!(pt(s)||pt(a)||pt(l)||pt(u)||pt(c)||pt(f))){s=Math.ceil(s),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),f=Math.ceil(f);var h=s<=1?1:Wi(a/s,0,1),p=s<=1?1:Wi(l/s,0,1),v=u<=1?1:Wi(c/u,0,1),y=u<=1?1:Wi(f/u,0,1);i=qn(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:v,$prev_pageview_max_content:f,$prev_pageview_max_content_percentage:y})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(t.getTime()-r.timestamp.getTime())/1e3),i}}class goe{constructor(t){this._instance=t}sendExceptionEvent(t){this._instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var Gi="Mobile",Em="iOS",Ho="Android",Vf="Tablet",d4=Ho+" "+Vf,f4="iPad",h4="Apple",p4=h4+" Watch",qf="Safari",fc="BlackBerry",g4="Samsung",m4=g4+"Browser",y4=g4+" Internet",Fl="Chrome",moe=Fl+" OS",v4=Fl+" "+Em,rS="Internet Explorer",w4=rS+" "+Gi,iS="Opera",yoe=iS+" Mini",oS="Edge",b4="Microsoft "+oS,Fu="Firefox",x4=Fu+" "+Em,Kf="Nintendo",Gf="PlayStation",zu="Xbox",_4=Ho+" "+Gi,S4=Gi+" "+qf,kd="Windows",Bx=kd+" Phone",aA="Nokia",Fx="Ouya",E4="Generic",voe=E4+" "+Gi.toLowerCase(),k4=E4+" "+Vf.toLowerCase(),zx="Konqueror",Kr="(\\d+(\\.\\d+)?)",dw=new RegExp("Version/"+Kr),woe=new RegExp(zu,"i"),boe=new RegExp(Gf+" \\w+","i"),xoe=new RegExp(Kf+" \\w+","i"),sS=new RegExp(fc+"|PlayBook|BB10","i"),_oe={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Soe=(e,t)=>t&&qt(t,h4)||function(n){return qt(n,qf)&&!qt(n,Fl)&&!qt(n,Ho)}(e),C4=function(e,t){return t=t||"",qt(e," OPR/")&&qt(e,"Mini")?yoe:qt(e," OPR/")?iS:sS.test(e)?fc:qt(e,"IE"+Gi)||qt(e,"WPDesktop")?w4:qt(e,m4)?y4:qt(e,oS)||qt(e,"Edg/")?b4:qt(e,"FBIOS")?"Facebook "+Gi:qt(e,"UCWEB")||qt(e,"UCBrowser")?"UC Browser":qt(e,"CriOS")?v4:qt(e,"CrMo")||qt(e,Fl)?Fl:qt(e,Ho)&&qt(e,qf)?_4:qt(e,"FxiOS")?x4:qt(e.toLowerCase(),zx.toLowerCase())?zx:Soe(e,t)?qt(e,Gi)?S4:qf:qt(e,Fu)?Fu:qt(e,"MSIE")||qt(e,"Trident/")?rS:qt(e,"Gecko")?Fu:""},Eoe={[w4]:[new RegExp("rv:"+Kr)],[b4]:[new RegExp(oS+"?\\/"+Kr)],[Fl]:[new RegExp("("+Fl+"|CrMo)\\/"+Kr)],[v4]:[new RegExp("CriOS\\/"+Kr)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Kr)],[qf]:[dw],[S4]:[dw],[iS]:[new RegExp("(Opera|OPR)\\/"+Kr)],[Fu]:[new RegExp(Fu+"\\/"+Kr)],[x4]:[new RegExp("FxiOS\\/"+Kr)],[zx]:[new RegExp("Konqueror[:/]?"+Kr,"i")],[fc]:[new RegExp(fc+" "+Kr),dw],[_4]:[new RegExp("android\\s"+Kr,"i")],[y4]:[new RegExp(m4+"\\/"+Kr)],[rS]:[new RegExp("(rv:|MSIE )"+Kr)],Mozilla:[new RegExp("rv:"+Kr)]},koe=function(e,t){var n=C4(e,t),r=Eoe[n];if(pt(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=e.match(o);if(s)return parseFloat(s[s.length-2])}return null},lA=[[new RegExp(zu+"; "+zu+" (.*?)[);]","i"),e=>[zu,e&&e[1]||""]],[new RegExp(Kf,"i"),[Kf,""]],[new RegExp(Gf,"i"),[Gf,""]],[sS,[fc,""]],[new RegExp(kd,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Bx,""];if(new RegExp(Gi).test(t)&&!/IEMobile\b/.test(t))return[kd+" "+Gi,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=_oe[r]||"";return/arm/i.test(t)&&(i="RT"),[kd,i]}return[kd,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[Em,t.join(".")]}return[Em,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=pt(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+Ho+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Ho+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[Ho,t.join(".")]}return[Ho,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[moe,""]],[/Linux|debian/i,["Linux",""]]],uA=function(e){return xoe.test(e)?Kf:boe.test(e)?Gf:woe.test(e)?zu:new RegExp(Fx,"i").test(e)?Fx:new RegExp("("+Bx+"|WPDesktop)","i").test(e)?Bx:/iPad/.test(e)?f4:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?p4:sS.test(e)?fc:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(aA,"i").test(e)?aA:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(Gi).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?Ho:d4:Ho:new RegExp("(pda|"+Gi+")","i").test(e)?voe:new RegExp(Vf,"i").test(e)&&!new RegExp(Vf+" pc","i").test(e)?k4:""},Ep="https?://(.*)",Yy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Coe=qy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Yy),aS="<masked>";function j4(e,t,n){if(!vt)return{};var r=t?qy([],Yy,n||[]):[];return A4(X1(vt.URL,r,aS),e)}function A4(e,t){var n=Coe.concat(t||[]),r={};return dn(n,function(i){var o=vm(e,i);r[i]=o||null}),r}function N4(e){var t=function(o){return o?o.search(Ep+"google.([^/?]*)")===0?"google":o.search(Ep+"bing.com")===0?"bing":o.search(Ep+"yahoo.com")===0?"yahoo":o.search(Ep+"duckduckgo.com")===0?"duckduckgo":null:null}(e),n=t!="yahoo"?"q":"p",r={};if(!Ua(t)){r.$search_engine=t;var i=vt?vm(vt.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function cA(){return navigator.language||navigator.userLanguage}function R4(){return(vt==null?void 0:vt.referrer)||"$direct"}function T4(e,t){var n=e?qy([],Yy,t||[]):[],r=oi==null?void 0:oi.href.substring(0,1e3);return{r:R4().substring(0,1e3),u:r?X1(r,n,aS):void 0}}function I4(e){var t,{r:n,u:r}=e,i={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(t=cc(n))==null?void 0:t.host};if(r){i.$current_url=r;var o=cc(r);i.$host=o==null?void 0:o.host,i.$pathname=o==null?void 0:o.pathname;var s=A4(r);qn(i,s)}if(n){var a=N4(n);qn(i,a)}return i}function P4(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}function joe(){try{return new Date().getTimezoneOffset()}catch(e){return}}function Aoe(e,t){if(!ri)return{};var n,r,i,o=e?qy([],Yy,t||[]):[],[s,a]=function(l){for(var u=0;u<lA.length;u++){var[c,f]=lA[u],h=c.exec(l),p=h&&(qi(f)?f(h,l):f);if(p)return p}return["",""]}(ri);return qn(G1({$os:s,$os_version:a,$browser:C4(ri,navigator.vendor),$device:uA(ri),$device_type:(r=ri,i=uA(r),i===f4||i===d4||i==="Kobo"||i==="Kindle Fire"||i===k4?Vf:i===Kf||i===zu||i===Gf||i===Fx?"Console":i===p4?"Wearable":i?Gi:"Desktop"),$timezone:P4(),$timezone_offset:joe()}),{$current_url:X1(oi==null?void 0:oi.href,o,aS),$host:oi==null?void 0:oi.host,$pathname:oi==null?void 0:oi.pathname,$raw_user_agent:ri.length>1e3?ri.substring(0,997)+"...":ri,$browser_version:koe(ri,navigator.vendor),$browser_language:cA(),$browser_language_prefix:(n=cA(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:Te==null?void 0:Te.screen.height,$screen_width:Te==null?void 0:Te.screen.width,$viewport_height:Te==null?void 0:Te.innerHeight,$viewport_width:Te==null?void 0:Te.innerWidth,$lib:"web",$lib_version:bs.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Hx,Bo=zr("[FeatureFlags]"),fw="$active_feature_flags",iu="$override_feature_flags",dA="$feature_flag_payloads",ad="$override_feature_flag_payloads",fA="$feature_flag_request_id",hA=e=>{var t={};for(var[n,r]of Jp(e||{}))r&&(t[n]=r);return t},Noe=e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(n=>{var r;return[n,(r=t[n].variant)!==null&&r!==void 0?r:t[n].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(n=>t[n].enabled).filter(n=>{var r;return(r=t[n].metadata)==null?void 0:r.payload}).map(n=>{var r;return[n,(r=t[n].metadata)==null?void 0:r.payload]}))):Bo.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e};(function(e){e.FeatureFlags="feature_flags",e.Recordings="recordings"})(Hx||(Hx={}));class Roe{constructor(t){this.ae=!1,this.le=!1,this.ue=!1,this.he=!1,this.de=!1,this.ve=!1,this.ce=!1,this._instance=t,this.featureFlagEventHandlers=[]}decide(){if(this._instance.config.__preview_remote_config)this.ve=!0;else{var t=!this.fe&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.pe({disableFlags:t})}}get hasLoadedFlags(){return this.le}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this._instance.get_property(Sx),n=this._instance.get_property(iu),r=this._instance.get_property(ad);if(!r&&!n)return t||{};var i=qn({},t||{}),o=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var s of o){var a,l,u=i[s],c=n==null?void 0:n[s],f=pt(c)?(a=u==null?void 0:u.enabled)!==null&&a!==void 0&&a:!!c,h=pt(c)?u.variant:typeof c=="string"?c:void 0,p=r==null?void 0:r[s],v=mt({},u,{enabled:f,variant:f?h!=null?h:u==null?void 0:u.variant:void 0});f!==(u==null?void 0:u.enabled)&&(v.original_enabled=u==null?void 0:u.enabled),h!==(u==null?void 0:u.variant)&&(v.original_variant=u==null?void 0:u.variant),p&&(v.metadata=mt({},u==null?void 0:u.metadata,{payload:p,original_payload:u==null||(l=u.metadata)==null?void 0:l.payload})),i[s]=v}return this.ae||(Bo.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:r,finalDetails:i}),this.ae=!0),i}getFlagVariants(){var t=this._instance.get_property(ku),n=this._instance.get_property(iu);if(!n)return t||{};for(var r=qn({},t),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||(Bo.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:n,finalFlags:r}),this.ae=!0),r}getFlagPayloads(){var t=this._instance.get_property(dA),n=this._instance.get_property(ad);if(!n)return t||{};for(var r=qn({},t||{}),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||(Bo.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:n,finalPayloads:r}),this.ae=!0),r}reloadFeatureFlags(){this.he||this._instance.config.advanced_disable_feature_flags||this.fe||(this.fe=setTimeout(()=>{this.pe()},5))}ge(){clearTimeout(this.fe),this.fe=void 0}ensureFlagsLoaded(){this.le||this.ue||this.fe||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.he=t}pe(t){var n;if(this.ge(),!this._instance.config.advanced_disable_decide)if(this.ue)this.de=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:mt({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Sd)||{}),group_properties:this._instance.get_property(sl)};(t!=null&&t.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var i=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config;i&&(r.timezone=P4()),this.ue=!0,this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api",i?"/flags/?v=2":"/decide/?v=4"),data:r,compression:this._instance.config.disable_compression?void 0:fo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:o=>{var s,a,l,u=!0;o.statusCode===200&&(this.de||(this.$anon_distinct_id=void 0),u=!1),this.ue=!1,this.ve||(this.ve=!0,this._instance.me((l=o.json)!==null&&l!==void 0?l:{})),r.disable_flags&&!this.de||(this.ce=!u,o.json&&(s=o.json.quotaLimited)!=null&&s.includes(Hx.FeatureFlags)?Bo.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(this.receivedFeatureFlags((a=o.json)!==null&&a!==void 0?a:{},u),this.de&&(this.de=!1,this.pe())))}})}}getFeatureFlag(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[t],i=""+r,o=this._instance.get_property(fA)||void 0,s=this._instance.get_property(gm)||{};if((n.send_event||!("send_event"in n))&&(!(t in s)||!s[t].includes(i))){var a,l,u,c,f,h,p,v,y,x,m;Mn(s[t])?s[t].push(i):s[t]=[i],(a=this._instance.persistence)==null||a.register({[gm]:s});var b=this.getFeatureFlagDetails(t),w={$feature_flag:t,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:o,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(u=l.featureFlags)==null?void 0:u[t])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(f=c.featureFlagPayloads)==null?void 0:f[t])||null,$used_bootstrap_value:!this.ce};pt(b==null||(h=b.metadata)==null?void 0:h.version)||(w.$feature_flag_version=b.metadata.version);var S,E=(p=b==null||(v=b.reason)==null?void 0:v.description)!==null&&p!==void 0?p:b==null||(y=b.reason)==null?void 0:y.code;E&&(w.$feature_flag_reason=E),b!=null&&(x=b.metadata)!=null&&x.id&&(w.$feature_flag_id=b.metadata.id),pt(b==null?void 0:b.original_variant)&&pt(b==null?void 0:b.original_enabled)||(w.$feature_flag_original_response=pt(b.original_variant)?b.original_enabled:b.original_variant),b!=null&&(m=b.metadata)!=null&&m.original_payload&&(w.$feature_flag_original_payload=b==null||(S=b.metadata)==null?void 0:S.original_payload),this._instance.capture("$feature_flag_called",w)}return r}Bo.warn('getFeatureFlag for key "'+t+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,n){var r=this._instance.config.token;this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api","/decide/?v=4"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:fo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var o,s=(o=i.json)==null?void 0:o.featureFlagPayloads;n((s==null?void 0:s[t])||void 0)}})}isFeatureEnabled(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(t,n);Bo.warn('isFeatureEnabled for key "'+t+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==t)}receivedFeatureFlags(t,n){if(this._instance.persistence){this.le=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),o=this.getFlagsWithDetails();(function(s,a,l,u,c){l===void 0&&(l={}),u===void 0&&(u={}),c===void 0&&(c={});var f=Noe(s),h=f.flags,p=f.featureFlags,v=f.featureFlagPayloads;if(p){var y=s.requestId;if(Mn(p)){Bo.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var x={};if(p)for(var m=0;m<p.length;m++)x[p[m]]=!0;a&&a.register({[fw]:p,[ku]:x})}else{var b=p,w=v,S=h;s.errorsWhileComputingFlags&&(b=mt({},l,b),w=mt({},u,w),S=mt({},c,S)),a&&a.register(mt({[fw]:Object.keys(hA(b)),[ku]:b||{},[dA]:w||{},[Sx]:S||{}},y?{[fA]:y}:{}))}}})(t,this._instance.persistence,r,i,o),this.be(n)}}override(t,n){n===void 0&&(n=!1),Bo.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:n})}overrideFeatureFlags(t){if(!this._instance.__loaded||!this._instance.persistence)return Bo.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(t===!1)return this._instance.persistence.unregister(iu),this._instance.persistence.unregister(ad),void this.be();if(t&&typeof t=="object"&&("flags"in t||"payloads"in t)){var n,r=t;if(this.ae=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(iu);else if(r.flags)if(Mn(r.flags)){for(var i={},o=0;o<r.flags.length;o++)i[r.flags[o]]=!0;this._instance.persistence.register({[iu]:i})}else this._instance.persistence.register({[iu]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(ad):r.payloads&&this._instance.persistence.register({[ad]:r.payloads})),void this.be()}this.be()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.le){var{flags:n,flagVariants:r}=this.we();t(n,r)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,n){var r,i=(this._instance.get_property(Qp)||[]).find(l=>l.flagKey===t),o={["$feature_enrollment/"+t]:n},s={$feature_flag:t,$feature_enrollment:n,$set:o};i&&(s.$early_access_feature_name=i.name),this._instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(o,!1);var a=mt({},this.getFlagVariants(),{[t]:n});(r=this._instance.persistence)==null||r.register({[fw]:Object.keys(hA(a)),[ku]:a}),this.be()}getEarlyAccessFeatures(t,n,r){n===void 0&&(n=!1);var i=this._instance.get_property(Qp),o=r?"&"+r.map(s=>"stage="+s).join("&"):"";if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+o),method:"GET",callback:s=>{var a;if(s.json){var l=s.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[Qp]:l}),t(l)}}})}we(){var t=this.getFlags(),n=this.getFlagVariants();return{flags:t.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,i)=>(r[i]=n[i],r),{})}}be(t){var{flags:n,flagVariants:r}=this.we();this.featureFlagEventHandlers.forEach(i=>i(n,r,{errorsLoading:t}))}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(Sd)||{};this._instance.register({[Sd]:mt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Sd)}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(sl)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=mt({},r[i],t[i]),delete t[i]}),this._instance.register({[sl]:mt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var n=this._instance.get_property(sl)||{};this._instance.register({[sl]:mt({},n,{[t]:{}})})}else this._instance.unregister(sl)}}var Toe=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class hw{constructor(t){this.S=t,this.props={},this.ye=!1,this.Se=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(t),this.q=this.$e(t),this.load(),t.debug&&St.info("Persistence loaded",t.persistence,mt({},this.props)),this.update_config(t,t),this.save()}$e(t){Toe.indexOf(t.persistence.toLowerCase())===-1&&(St.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var n=t.persistence.toLowerCase();return n==="localstorage"&&er.O()?er:n==="localstorage+cookie"&&vp.O()?vp:n==="sessionstorage"&&mr.O()?mr:n==="memory"?gie:n==="cookie"?Rs:vp.O()?vp:Rs}properties(){var t={};return dn(this.props,function(n,r){if(r===ku&&Dn(n))for(var i=Object.keys(n),o=0;o<i.length;o++)t["$feature/"+i[o]]=n[i[o]];else a=r,l=!1,(Ua(s=Gre)?l:xj&&s.indexOf===xj?s.indexOf(a)!=-1:(dn(s,function(u){if(l||(l=u===a))return hm}),l))||(t[r]=n);var s,a,l}),t}load(){if(!this.ke){var t=this.q.D(this.Se);t&&(this.props=qn({},t))}}save(){this.ke||this.q.j(this.Se,this.props,this.xe,this.Ee,this.Ie,this.S.debug)}remove(){this.q.L(this.Se,!1),this.q.L(this.Se,!0)}clear(){this.remove(),this.props={}}register_once(t,n,r){if(Dn(t)){pt(n)&&(n="None"),this.xe=pt(r)?this.Pe:r;var i=!1;if(dn(t,(o,s)=>{this.props.hasOwnProperty(s)&&this.props[s]!==n||(this.props[s]=o,i=!0)}),i)return this.save(),!0}return!1}register(t,n){if(Dn(t)){this.xe=pt(n)?this.Pe:n;var r=!1;if(dn(t,(i,o)=>{t.hasOwnProperty(o)&&this.props[o]!==i&&(this.props[o]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.ye){var t=j4(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Eu(G1(t))||this.register(t),this.ye=!0}}update_search_keyword(){var t;this.register((t=vt==null?void 0:vt.referrer)?N4(t):{})}update_referrer_info(){var t;this.register_once({$referrer:R4(),$referring_domain:vt!=null&&vt.referrer&&((t=cc(vt.referrer))==null?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[jx]||this.props[Ax]||this.register_once({[Nx]:T4(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};dn([Ax,jx],s=>{var a=this.props[s];a&&dn(a,function(l,u){t["$initial_"+yx(u)]=l})});var n,r,i=this.props[Nx];if(i){var o=(n=I4(i),r={},dn(n,function(s,a){r["$initial_"+yx(a)]=s}),r);qn(t,o)}return t}safe_merge(t){return dn(this.props,function(n,r){r in t||(t[r]=n)}),t}update_config(t,n){if(this.Pe=this.xe=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==n.persistence){var r=this.$e(t),i=this.props;this.clear(),this.q=r,this.props=i,this.save()}}set_disabled(t){this.ke=t,this.ke?this.remove():this.save()}set_cross_subdomain(t){t!==this.Ee&&(this.Ee=t,this.remove(),this.save())}set_secure(t){t!==this.Ie&&(this.Ie=t,this.remove(),this.save())}set_event_timer(t,n){var r=this.props[xd]||{};r[t]=n,this.props[xd]=r,this.save()}remove_event_timer(t){var n=(this.props[xd]||{})[t];return pt(n)||(delete this.props[xd][t],this.save()),n}get_property(t){return this.props[t]}set_property(t,n){this.props[t]=n,this.save()}}class O4{constructor(){this.Re={},this.Re={}}on(t,n){return this.Re[t]||(this.Re[t]=[]),this.Re[t].push(n),()=>{this.Re[t]=this.Re[t].filter(r=>r!==n)}}emit(t,n){for(var r of this.Re[t]||[])r(n);for(var i of this.Re["*"]||[])i(t,n)}}var km=function(e,t){if(!function(n){try{new RegExp(n)}catch(r){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(n){return!1}};class al{constructor(t){this.Te=new O4,this.Me=(n,r)=>this.Ce(n,r)&&this.Oe(n,r)&&this.Fe(n,r),this.Ce=(n,r)=>r==null||!r.event||(n==null?void 0:n.event)===(r==null?void 0:r.event),this._instance=t,this.Ae=new Set,this.De=new Set}init(){var t;if(!pt((t=this._instance)==null?void 0:t.je)){var n;(n=this._instance)==null||n.je((r,i)=>{this.on(r,i)})}}register(t){var n,r;if(!pt((n=this._instance)==null?void 0:n.je)&&(t.forEach(s=>{var a,l;(a=this.De)==null||a.add(s),(l=s.steps)==null||l.forEach(u=>{var c;(c=this.Ae)==null||c.add((u==null?void 0:u.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var i,o=new Set;t.forEach(s=>{var a;(a=s.steps)==null||a.forEach(l=>{l!=null&&l.selector&&o.add(l==null?void 0:l.selector)})}),(i=this._instance)==null||i.autocapture.setElementSelectors(o)}}on(t,n){var r;n!=null&&t.length!=0&&(this.Ae.has(t)||this.Ae.has(n==null?void 0:n.event))&&this.De&&((r=this.De)==null?void 0:r.size)>0&&this.De.forEach(i=>{this.Le(n,i)&&this.Te.emit("actionCaptured",i.name)})}Ne(t){this.onAction("actionCaptured",n=>t(n))}Le(t,n){if((n==null?void 0:n.steps)==null)return!1;for(var r of n.steps)if(this.Me(t,r))return!0;return!1}onAction(t,n){return this.Te.on(t,n)}Oe(t,n){if(n!=null&&n.url){var r,i=t==null||(r=t.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!al.ze(i,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static ze(t,n,r){switch(r){case"regex":return!!Te&&km(t,n);case"exact":return n===t;case"contains":var i=al.Ue(n).replace(/_/g,".").replace(/%/g,".*");return km(t,i);default:return!1}}static Ue(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Fe(t,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.qe(t).some(o=>!(n!=null&&n.href&&!al.ze(o.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||o.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!al.ze(o.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!al.ze(o.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var r,i=t==null||(r=t.properties)==null?void 0:r.$element_selectors;if(!i||!i.includes(n==null?void 0:n.selector))return!1}return!0}qe(t){return(t==null?void 0:t.properties.$elements)==null?[]:t==null?void 0:t.properties.$elements}}var Jn=zr("[Surveys]");class Ioe{constructor(t){this._instance=t,this.Be=new Map,this.He=new Map}register(t){var n;pt((n=this._instance)==null?void 0:n.je)||(this.We(t),this.Ge(t))}Ge(t){var n=t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.actions)&&((o=r.conditions)==null||(s=o.actions)==null||(a=s.values)==null?void 0:a.length)>0});n.length!==0&&(this.Je==null&&(this.Je=new al(this._instance),this.Je.init(),this.Je.Ne(r=>{this.onAction(r)})),n.forEach(r=>{var i,o,s,a,l,u,c,f,h,p;r.conditions&&(i=r.conditions)!=null&&i.actions&&(o=r.conditions)!=null&&(s=o.actions)!=null&&s.values&&((a=r.conditions)==null||(l=a.actions)==null||(u=l.values)==null?void 0:u.length)>0&&((c=this.Je)==null||c.register(r.conditions.actions.values),(f=r.conditions)==null||(h=f.actions)==null||(p=h.values)==null||p.forEach(v=>{if(v&&v.name){var y=this.He.get(v.name);y&&y.push(r.id),this.He.set(v.name,y||[r.id])}}))}))}We(t){var n;t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.events)&&((o=r.conditions)==null||(s=o.events)==null||(a=s.values)==null?void 0:a.length)>0}).length!==0&&((n=this._instance)==null||n.je((r,i)=>{this.onEvent(r,i)}),t.forEach(r=>{var i,o,s;(i=r.conditions)==null||(o=i.events)==null||(s=o.values)==null||s.forEach(a=>{if(a&&a.name){var l=this.Be.get(a.name);l&&l.push(r.id),this.Be.set(a.name,l||[r.id])}})}))}onEvent(t,n){var r,i,o=((r=this._instance)==null||(i=r.persistence)==null?void 0:i.props[yp])||[];if(t==="survey shown"&&n&&o.length>0){var s;Jn.info("survey event matched, removing survey from activated surveys",{event:t,eventPayload:n,existingActivatedSurveys:o});var a=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(a){var l=o.indexOf(a);l>=0&&(o.splice(l,1),this.Ve(o))}}else this.Be.has(t)&&(Jn.info("survey event matched, updating activated surveys",{event:t,surveys:this.Be.get(t)}),this.Ve(o.concat(this.Be.get(t)||[])))}onAction(t){var n,r,i=((n=this._instance)==null||(r=n.persistence)==null?void 0:r.props[yp])||[];this.He.has(t)&&this.Ve(i.concat(this.He.get(t)||[]))}Ve(t){var n,r;(n=this._instance)==null||(r=n.persistence)==null||r.register({[yp]:[...new Set(t)]})}getSurveys(){var t,n,r=(t=this._instance)==null||(n=t.persistence)==null?void 0:n.props[yp];return r||[]}getEventToSurveys(){return this.Be}Ke(){return this.Je}}class Poe{constructor(t){this.Ye=null,this.Xe=!1,this.Qe=!1,this.Ze=[],this._instance=t,this._surveyEventReceiver=null}onRemoteConfig(t){var n=t.surveys;if(on(n))return Jn.warn("Decide not loaded yet. Not loading surveys.");var r=Mn(n);this.tr=r?n.length>0:n,Jn.info("decide response received, hasSurveys: "+this.tr),this.tr&&this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith("seenSurvey_")||r!=null&&r.startsWith("inProgressSurvey_"))&&t.push(r)}t.forEach(i=>localStorage.removeItem(i))}loadIfEnabled(){if(!this.Ye)if(this.Qe)Jn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Jn.info("Disabled. Not loading surveys.");else if(this.tr){var t=Ft==null?void 0:Ft.__PosthogExtensions__;if(t){this.Qe=!0;try{var n=t.generateSurveys;if(n)return void this.ir(n);var r=t.loadExternalDependency;if(!r)return void this.er("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",i=>{i||!t.generateSurveys?this.er("Could not load surveys script",i):this.ir(t.generateSurveys)})}catch(i){throw this.er("Error initializing surveys",i),i}finally{this.Qe=!1}}else Jn.error("PostHog Extensions not found.")}else Jn.info("No surveys to load.")}ir(t){this.Ye=t(this._instance),this._surveyEventReceiver=new Ioe(this._instance),Jn.info("Surveys loaded successfully"),this.rr({isLoaded:!0})}er(t,n){Jn.error(t,n),this.rr({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.Ze.push(t),this.Ye&&this.rr({isLoaded:!0}),()=>{this.Ze=this.Ze.filter(n=>n!==t)}}getSurveys(t,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Jn.info("Disabled. Not loading surveys."),t([]);var r=this._instance.get_property(Ex);if(r&&!n)return t(r,{isLoaded:!0});if(this.Xe)return t([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Xe=!0,this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var o;this.Xe=!1;var s=i.statusCode;if(s!==200||!i.json){var a="Surveys API could not be loaded, status: "+s;return Jn.error(a),t([],{isLoaded:!1,error:a})}var l,u=i.json.surveys||[],c=u.filter(f=>function(h){return!(!h.start_date||h.end_date)}(f)&&(function(h){var p,v,y;return!((p=h.conditions)==null||(v=p.events)==null||(y=v.values)==null||!y.length)}(f)||function(h){var p,v,y;return!((p=h.conditions)==null||(v=p.actions)==null||(y=v.values)==null||!y.length)}(f)));return c.length>0&&((l=this._surveyEventReceiver)==null||l.register(c)),(o=this._instance.persistence)==null||o.register({[Ex]:u}),t(u,{isLoaded:!0})}})}catch(i){throw this.Xe=!1,i}}rr(t){for(var n of this.Ze)try{t.isLoaded?this.getSurveys(n):n([],t)}catch(r){Jn.error("Error in survey callback",r)}}getActiveMatchingSurveys(t,n){if(n===void 0&&(n=!1),!on(this.Ye))return this.Ye.getActiveMatchingSurveys(t,n);Jn.warn("init was not called")}sr(t){var n=null;return this.getSurveys(r=>{var i;n=(i=r.find(o=>o.id===t))!==null&&i!==void 0?i:null}),n}nr(t){if(on(this.Ye))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof t=="string"?this.sr(t):t;return n?this.Ye.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(on(this.Ye))return Jn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.nr(t);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(t,n){return on(this.Ye)?(Jn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(i=>{var o,s=(o=i.find(l=>l.id===t))!==null&&o!==void 0?o:null;if(s){var a=this.nr(s);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(t,n){if(on(this.Ye))Jn.warn("init was not called");else{var r=this.sr(t),i=vt==null?void 0:vt.querySelector(n);r?i?this.Ye.renderSurvey(r,i):Jn.warn("Survey element not found"):Jn.warn("Survey not found")}}}var pA=zr("[RateLimiter]");class Ooe{constructor(t){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var o=i.text;if(o&&o.length)try{(JSON.parse(o).quota_limited||[]).forEach(s=>{pA.info((s||"events")+" is quota limited."),this.serverLimits[s]=new Date().getTime()+6e4})}catch(s){return void pA.warn('could not rate limit - continuing. Error: "'+(s==null?void 0:s.message)+'"',{text:o})}},this.instance=t,this.captureEventsPerSecond=((n=t.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=t.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var n,r,i;t===void 0&&(t=!1);var o=new Date().getTime(),s=(n=(r=this.instance.persistence)==null?void 0:r.get_property(Cx))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:o};s.tokens+=(o-s.last)/1e3*this.captureEventsPerSecond,s.last=o,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var a=s.tokens<1;return a||t||(s.tokens=Math.max(0,s.tokens-1)),!a||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(Cx,s),{isRateLimited:a,remainingTokens:s.tokens}}isServerRateLimited(t){var n=this.serverLimits[t||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var el=zr("[RemoteConfig]");class $oe{constructor(t){this._instance=t}get remoteConfig(){var t,n;return(t=Ft._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.config}ar(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>t(this.remoteConfig)):(el.error("PostHog Extensions not found. Cannot load remote config."),t())}lr(t){this._instance._e({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{t(n.json)}})}load(){try{if(this.remoteConfig)return el.info("Using preloaded remote config",this.remoteConfig),void this.me(this.remoteConfig);if(this._instance.config.advanced_disable_decide)return void el.warn("Remote config is disabled. Falling back to local config.");this.ar(t=>{if(!t)return el.info("No config found after loading remote JS config. Falling back to JSON."),void this.lr(n=>{this.me(n)});this.me(t)})}catch(t){el.error("Error loading remote config",t)}}me(t){t?this._instance.config.__preview_remote_config?(this._instance.me(t),t.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):el.info("__preview_remote_config is disabled. Logging config instead",t):el.error("Failed to fetch remote config from PostHog.")}}var Moe=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=e.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),Ua(a)||(n>t&&(o+=e.substring(t,n)),o+=a,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o},Doe=!!mx||!!gx,gA="text/plain",Cm=(e,t)=>{var[n,r]=e.split("?"),i=mt({},t);r==null||r.split("&").forEach(s=>{var[a]=s.split("=");delete i[a]});var o=rie(i);return n+"?"+(o=o?(r?r+"&":"")+o:r)},Cd=(e,t)=>JSON.stringify(e,(n,r)=>typeof r=="bigint"?r.toString():r,t),pw=e=>{var{data:t,compression:n}=e;if(t){if(n===fo.GZipJS){var r=o4(s4(Cd(t)),{mtime:0}),i=new Blob([r],{type:gA});return{contentType:gA,body:i,estimatedSize:i.size}}if(n===fo.Base64){var o=function(l){var u,c,f,h,p,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=0,x=0,m="",b=[];if(!l)return l;l=Moe(l);do u=(p=l.charCodeAt(y++)<<16|l.charCodeAt(y++)<<8|l.charCodeAt(y++))>>18&63,c=p>>12&63,f=p>>6&63,h=63&p,b[x++]=v.charAt(u)+v.charAt(c)+v.charAt(f)+v.charAt(h);while(y<l.length);switch(m=b.join(""),l.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}(Cd(t)),s=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Cd(l)))(o);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var a=Cd(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},zd=[];gx&&zd.push({transport:"fetch",method:e=>{var t,n,{contentType:r,body:i,estimatedSize:o}=(t=pw(e))!==null&&t!==void 0?t:{},s=new Headers;dn(e.headers,function(c,f){s.append(f,c)}),r&&s.append("Content-Type",r);var a=e.url,l=null;if(_j){var u=new _j;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),e.timeout)}}gx(a,mt({method:(e==null?void 0:e.method)||"GET",headers:s,keepalive:e.method==="POST"&&(o||0)<52428.8,body:i,signal:(n=l)==null?void 0:n.signal},e.fetchOptions)).then(c=>c.text().then(f=>{var h={statusCode:c.status,text:f};if(c.status===200)try{h.json=JSON.parse(f)}catch(p){St.error(p)}e.callback==null||e.callback(h)})).catch(c=>{St.error(c),e.callback==null||e.callback({statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),mx&&zd.push({transport:"XHR",method:e=>{var t,n=new mx;n.open(e.method||"GET",e.url,!0);var{contentType:r,body:i}=(t=pw(e))!==null&&t!==void 0?t:{};dn(e.headers,function(o,s){n.setRequestHeader(s,o)}),r&&n.setRequestHeader("Content-Type",r),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch(s){}e.callback==null||e.callback(o)}},n.send(i)}}),Ei!=null&&Ei.sendBeacon&&zd.push({transport:"sendBeacon",method:e=>{var t=Cm(e.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=pw(e))!==null&&n!==void 0?n:{},o=typeof i=="string"?new Blob([i],{type:r}):i;Ei.sendBeacon(t,o)}catch(s){}}});var Ux=3e3;class Loe{constructor(t,n){this.ur=!0,this.hr=[],this.dr=Wi((n==null?void 0:n.flush_interval_ms)||Ux,250,5e3,"flush interval",Ux),this.vr=t}enqueue(t){this.hr.push(t),this.cr||this.pr()}unload(){this.gr();var t=this.hr.length>0?this._r():{},n=Object.values(t);[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.vr(mt({},r,{transport:"sendBeacon"}))})}enable(){this.ur=!1,this.pr()}pr(){var t=this;this.ur||(this.cr=setTimeout(()=>{if(this.gr(),this.hr.length>0){var n=this._r(),r=function(o){var s=n[o],a=new Date().getTime();s.data&&Mn(s.data)&&dn(s.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),t.vr(s)};for(var i in n)r(i)}},this.dr))}gr(){clearTimeout(this.cr),this.cr=void 0}_r(){var t={};return dn(this.hr,n=>{var r,i=n,o=(i?i.batchKey:null)||i.url;pt(t[o])&&(t[o]=mt({},i,{data:[]})),(r=t[o].data)==null||r.push(i.data)}),this.hr=[],t}}var Boe=["retriesPerformedSoFar"];class Foe{constructor(t){this.mr=!1,this.br=3e3,this.hr=[],this._instance=t,this.hr=[],this.wr=!0,!pt(Te)&&"onLine"in Te.navigator&&(this.wr=Te.navigator.onLine,jn(Te,"online",()=>{this.wr=!0,this.Xi()}),jn(Te,"offline",()=>{this.wr=!1}))}get length(){return this.hr.length}retriableRequest(t){var{retriesPerformedSoFar:n}=t,r=IO(t,Boe);Pr(n)&&n>0&&(r.url=Cm(r.url,{retry_count:n})),this._instance._e(mt({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n!=null?n:0)<10?this.yr(mt({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(i)}}))}yr(t){var n=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=n+1;var r=function(s){var a=3e3*Math.pow(2,s),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),i=Date.now()+r;this.hr.push({retryAt:i,requestOptions:t});var o="Enqueued failed request for retry in "+r;navigator.onLine||(o+=" (Browser is offline)"),St.warn(o),this.mr||(this.mr=!0,this.Sr())}Sr(){this.$r&&clearTimeout(this.$r),this.$r=setTimeout(()=>{this.wr&&this.hr.length>0&&this.Xi(),this.Sr()},this.br)}Xi(){var t=Date.now(),n=[],r=this.hr.filter(o=>o.retryAt<t||(n.push(o),!1));if(this.hr=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:t}of(this.$r&&(clearTimeout(this.$r),this.$r=void 0),this.hr))try{this._instance._e(mt({},t,{transport:"sendBeacon"}))}catch(n){St.error(n)}this.hr=[]}}class zoe{constructor(t){this.kr=()=>{var n,r,i,o;this.Er||(this.Er={});var s=this.scrollElement(),a=this.scrollY(),l=s?Math.max(0,s.scrollHeight-s.clientHeight):0,u=a+((s==null?void 0:s.clientHeight)||0),c=(s==null?void 0:s.scrollHeight)||0;this.Er.lastScrollY=Math.ceil(a),this.Er.maxScrollY=Math.max(a,(n=this.Er.maxScrollY)!==null&&n!==void 0?n:0),this.Er.maxScrollHeight=Math.max(l,(r=this.Er.maxScrollHeight)!==null&&r!==void 0?r:0),this.Er.lastContentY=u,this.Er.maxContentY=Math.max(u,(i=this.Er.maxContentY)!==null&&i!==void 0?i:0),this.Er.maxContentHeight=Math.max(c,(o=this.Er.maxContentHeight)!==null&&o!==void 0?o:0)},this._instance=t}getContext(){return this.Er}resetContext(){var t=this.Er;return setTimeout(this.kr,0),t}startMeasuringScrollPosition(){jn(Te,"scroll",this.kr,{capture:!0}),jn(Te,"scrollend",this.kr,{capture:!0}),jn(Te,"resize",this.kr)}scrollElement(){if(!this._instance.config.scroll_root_selector)return Te==null?void 0:Te.document.documentElement;var t=Mn(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of t){var r=Te==null?void 0:Te.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return Te&&(Te.scrollY||Te.pageYOffset||Te.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return Te&&(Te.scrollX||Te.pageXOffset||Te.document.documentElement.scrollLeft)||0}}var Hoe=e=>T4(e==null?void 0:e.config.mask_personal_data_properties,e==null?void 0:e.config.custom_personal_data_properties);class Uoe{constructor(t,n,r,i){this.Ir=o=>{var s=this.Pr();if(!s||s.sessionId!==o){var a={sessionId:o,props:this.Rr(this._instance)};this.Tr.register({[kx]:a})}},this._instance=t,this.Mr=n,this.Tr=r,this.Rr=i||Hoe,this.Mr.onSessionId(this.Ir)}Pr(){return this.Tr.props[kx]}getSetOnceProps(){var t,n=(t=this.Pr())==null?void 0:t.props;return n?"r"in n?I4(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var t={};return dn(G1(this.getSetOnceProps()),(n,r)=>{r==="$current_url"&&(r="url"),t["$session_entry_"+yx(r)]=n}),t}}var mA=zr("[SessionId]");class Woe{constructor(t,n,r){var i;if(this.Cr=[],!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=t.config,this.Tr=t.persistence,this.oi=void 0,this.kt=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Or=n||fa,this.Fr=r||fa;var o=this.S.persistence_name||this.S.token,s=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Wi(s,60,36e3,"session_idle_timeout_seconds",1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ar(),this.Dr="ph_"+o+"_window_id",this.jr="ph_"+o+"_primary_window_exists",this.Lr()){var a=mr.D(this.Dr),l=mr.D(this.jr);a&&!l?this.oi=a:mr.L(this.Dr),mr.j(this.jr,!0)}if((i=this.S.bootstrap)!=null&&i.sessionID)try{var u=(c=>{var f=c.replace(/-/g,"");if(f.length!==32)throw new Error("Not a valid UUID");if(f[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(f.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Nr(this.S.bootstrap.sessionID,new Date().getTime(),u)}catch(c){mA.error("Invalid sessionID in bootstrap",c)}this.zr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return pt(this.Cr)&&(this.Cr=[]),this.Cr.push(t),this.kt&&t(this.kt,this.oi),()=>{this.Cr=this.Cr.filter(n=>n!==t)}}Lr(){return this.S.persistence!=="memory"&&!this.Tr.ke&&mr.O()}Ur(t){t!==this.oi&&(this.oi=t,this.Lr()&&mr.j(this.Dr,t))}qr(){return this.oi?this.oi:this.Lr()?mr.D(this.Dr):null}Nr(t,n,r){t===this.kt&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.kt=t,this.Tr.register({[pm]:[n,t,r]}))}Br(){if(this.kt&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.kt,this._sessionStartTimestamp];var t=this.Tr.props[pm];return Mn(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.Nr(null,null,null)}zr(){jn(Te,"beforeunload",()=>{this.Lr()&&mr.L(this.jr)},{capture:!1})}checkAndGetSessionAndWindowId(t,n){if(t===void 0&&(t=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[i,o,s]=this.Br(),a=this.qr(),l=Pr(s)&&s>0&&Math.abs(r-s)>864e5,u=!1,c=!o,f=!t&&Math.abs(r-i)>this.sessionTimeoutMs;c||f||l?(o=this.Or(),a=this.Fr(),mA.info("new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:c,activityTimeout:f,sessionPastMaximumLength:l}}),s=r,u=!0):a||(a=this.Fr(),u=!0);var h=i===0||!t||l?r:i,p=s===0?new Date().getTime():s;return this.Ur(a),this.Nr(o,h,p),t||this.Ar(),u&&this.Cr.forEach(v=>v(o,a,u?{noSessionId:c,activityTimeout:f,sessionPastMaximumLength:l}:void 0)),{sessionId:o,windowId:a,sessionStartTimestamp:p,changeReason:u?{noSessionId:c,activityTimeout:f,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}Ar(){clearTimeout(this.Hr),this.Hr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var Voe=["$set_once","$set"],na=zr("[SiteApps]");class qoe{constructor(t){this._instance=t,this.Wr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Gr(t,n){if(n){var r=this.globalsForEvent(n);this.Wr.push(r),this.Wr.length>1e3&&(this.Wr=this.Wr.slice(10))}}get siteAppLoaders(){var t,n;return(t=Ft._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.siteApps}init(){if(this.isEnabled){var t=this._instance.je(this.Gr.bind(this));this.Jr=()=>{t(),this.Wr=[],this.Jr=void 0}}}globalsForEvent(t){var n,r,i,o,s,a,l;if(!t)throw new Error("Event payload is required");var u={},c=this._instance.get_property("$groups")||[],f=this._instance.get_property("$stored_group_properties")||{};for(var[h,p]of Object.entries(f))u[h]={id:c[h],type:h,properties:p};var{$set_once:v,$set:y}=t;return{event:mt({},IO(t,Voe),{properties:mt({},t.properties,y?{$set:mt({},(n=(r=t.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},y)}:{},v?{$set_once:mt({},(i=(o=t.properties)==null?void 0:o.$set_once)!==null&&i!==void 0?i:{},v)}:{}),elements_chain:(s=(a=t.properties)==null?void 0:a.$elements_chain)!==null&&s!==void 0?s:"",distinct_id:(l=t.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(t){var n=this.apps[t.id],r=()=>{var a;!n.errored&&this.Wr.length&&(na.info("Processing "+this.Wr.length+" events for site app with id "+t.id),this.Wr.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.Jr)==null||a.call(this))},i=!1,o=a=>{n.errored=!a,n.loaded=!0,na.info("Site app with id "+t.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:s}=t.init({posthog:this._instance,callback:a=>{o(a)}});s&&(n.processEvent=s),i=!0}catch(a){na.error("Error while initializing PostHog app with config id "+t.id,a),o(!1)}if(i&&n.loaded)try{r()}catch(a){na.error("Error while processing buffered events PostHog app with config id "+t.id,a),n.errored=!0}}Vr(){var t=this.siteAppLoaders||[];for(var n of t)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of t)this.setupSiteApp(r)}Kr(t){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(t);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(i){na.error("Error while processing event "+t.event+" for site app "+r.id,i)}}}onRemoteConfig(t){var n,r,i,o=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.Vr(),void this._instance.on("eventCaptured",u=>this.Kr(u))):void na.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Jr)==null||r.call(this),(i=t.siteApps)!=null&&i.length)if(this.isEnabled){var s=function(u,c){var f;Ft["__$$ph_site_app_"+u]=o._instance,(f=Ft.__PosthogExtensions__)==null||f.loadSiteApp==null||f.loadSiteApp(o._instance,c,h=>{if(h)return na.error("Error while initializing PostHog app with config id "+u,h)})};for(var{id:a,url:l}of t.siteApps)s(a,l)}else na.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var hl,Koe=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","bytespider"],yA=function(e,t){if(!e)return!1;var n=e.toLowerCase();return Koe.concat(t||[]).some(r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1})},$4=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&yA(n,t))return!0;try{var r=e==null?void 0:e.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>yA(i==null?void 0:i.brand,t)))return!0}catch(i){}return!!e.webdriver};function vA(e,t,n){return Cd({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}(function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"})(hl||(hl={}));var wA="i.posthog.com";class Goe{constructor(t){this.Yr={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}get uiHost(){var t,n=(t=this.instance.config.ui_host)==null?void 0:t.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+wA,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.Yr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=hl.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=hl.EU:this.Yr[this.apiHost]=hl.CUSTOM),this.Yr[this.apiHost]}endpointFor(t,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),t==="ui")return this.uiHost+n;if(this.region===hl.CUSTOM)return this.apiHost+n;var r=wA+n;switch(t){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var Yoe={icontains:(e,t)=>!!Te&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!Te&&t.href.toLowerCase().indexOf(e.toLowerCase())===-1,regex:(e,t)=>!!Te&&km(t.href,e),not_regex:(e,t)=>!!Te&&!km(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class Rr{constructor(t){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments(i=>{Rr.Xr("retrieved web experiments from the server"),n.Qr=new Map,i.forEach(o=>{if(o.feature_flag_key){var s;n.Qr&&(Rr.Xr("setting flag key ",o.feature_flag_key," to web experiment ",o),(s=n.Qr)==null||s.set(o.feature_flag_key,o));var a=n._instance.getFeatureFlag(o.feature_flag_key);Yn(a)&&o.variants[a]&&n.Zr(o.name,a,o.variants[a].transforms)}else if(o.variants)for(var l in o.variants){var u=o.variants[l];Rr.ts(u)&&n.Zr(o.name,l,u.transforms)}})},r)},this._instance=t,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(t){if(this._is_bot())Rr.Xr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(on(this.Qr))return this.Qr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();Rr.Xr("applying feature flags",t),t.forEach(n=>{var r;if(this.Qr&&(r=this.Qr)!=null&&r.has(n)){var i,o=this._instance.getFeatureFlag(n),s=(i=this.Qr)==null?void 0:i.get(n);o&&s!=null&&s.variants[o]&&this.Zr(s.name,o,s.variants[o].transforms)}})}}previewWebExperiment(){var t=Rr.getWindowLocation();if(t!=null&&t.search){var n=vm(t==null?void 0:t.search,"__experiment_id"),r=vm(t==null?void 0:t.search,"__experiment_variant");n&&r&&(Rr.Xr("previewing web experiments "+n+" && "+r),this.getWebExperiments(i=>{this.es(parseInt(n),r,i)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,n,r){if(this._instance.config.disable_web_experiments&&!r)return t([]);var i=this._instance.get_property("$web_experiments");if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:o=>{if(o.statusCode!==200||!o.json)return t([]);var s=o.json.experiments||[];return t(s)}})}es(t,n,r){var i=r.filter(o=>o.id===t);i&&i.length>0&&(Rr.Xr("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this.Zr(i[0].name,n,i[0].variants[n].transforms))}static ts(t){return!on(t.conditions)&&Rr.rs(t)&&Rr.ss(t)}static rs(t){var n;if(on(t.conditions)||on((n=t.conditions)==null?void 0:n.url))return!0;var r,i,o,s=Rr.getWindowLocation();return!!s&&((r=t.conditions)==null||!r.url||Yoe[(i=(o=t.conditions)==null?void 0:o.urlMatchType)!==null&&i!==void 0?i:"icontains"](t.conditions.url,s))}static getWindowLocation(){return Te==null?void 0:Te.location}static ss(t){var n;if(on(t.conditions)||on((n=t.conditions)==null?void 0:n.utm))return!0;var r=j4();if(r.utm_source){var i,o,s,a,l,u,c,f,h,p,v,y,x,m,b,w,S=(i=t.conditions)==null||(o=i.utm)==null||!o.utm_campaign||((s=t.conditions)==null||(a=s.utm)==null?void 0:a.utm_campaign)==r.utm_campaign,E=(l=t.conditions)==null||(u=l.utm)==null||!u.utm_source||((c=t.conditions)==null||(f=c.utm)==null?void 0:f.utm_source)==r.utm_source,A=(h=t.conditions)==null||(p=h.utm)==null||!p.utm_medium||((v=t.conditions)==null||(y=v.utm)==null?void 0:y.utm_medium)==r.utm_medium,T=(x=t.conditions)==null||(m=x.utm)==null||!m.utm_term||((b=t.conditions)==null||(w=b.utm)==null?void 0:w.utm_term)==r.utm_term;return S&&A&&T&&E}return!1}static Xr(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];St.info("[WebExperiments] "+t,r)}Zr(t,n,r){this._is_bot()?Rr.Xr("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(i=>{if(i.selector){var o;Rr.Xr("applying transform of variant "+n+" for experiment "+t+" ",i);var s=(o=document)==null?void 0:o.querySelectorAll(i.selector);s==null||s.forEach(a=>{var l=a;i.html&&(l.innerHTML=i.html),i.css&&l.setAttribute("style",i.css)})}}):Rr.Xr("Control variants leave the page unmodified.")}_is_bot(){return Ei&&this._instance?$4(Ei,this._instance.config.custom_blocked_useragents):void 0}}var Hd={},Wx=()=>{},au="posthog",M4=!Doe&&(ri==null?void 0:ri.indexOf("MSIE"))===-1&&(ri==null?void 0:ri.indexOf("Mozilla"))===-1,bA=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:Kre(vt==null?void 0:vt.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Wx,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:oi&&Yn(oi==null?void 0:oi.search)&&oi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(Te==null||(e=Te.location)==null?void 0:e.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var n="Bad HTTP status: "+t.statusCode+" "+t.text;St.error(n)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Ux},_onCapture:Wx}},xA=e=>{var t={};pt(e.process_person)||(t.person_profiles=e.process_person),pt(e.xhr_headers)||(t.request_headers=e.xhr_headers),pt(e.cookie_name)||(t.persistence_name=e.cookie_name),pt(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),pt(e.store_google)||(t.save_campaign_params=e.store_google),pt(e.verbose)||(t.debug=e.verbose);var n=qn({},t,e);return Mn(e.property_blacklist)&&(pt(e.property_denylist)?n.property_denylist=e.property_blacklist:Mn(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:St.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class Xoe{constructor(){this.__forceAllowLocalhost=!1}get ns(){return this.__forceAllowLocalhost}set ns(t){St.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}class Xy{get decideEndpointWasHit(){var t,n;return(t=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&t!==void 0&&t}constructor(){this.webPerformance=new Xoe,this.os=!1,this.version=bs.LIB_VERSION,this.ls=new O4,this.config=bA(),this.SentryIntegration=soe,this.sentryIntegration=t=>function(n,r){var i=c4(n,r);return{name:u4,processEvent:o=>i(o)}}(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.us=!1,this.hs=null,this.ds=null,this.vs=null,this.featureFlags=new Roe(this),this.toolbar=new loe(this),this.scrollManager=new zoe(this),this.pageViewManager=new poe(this),this.surveys=new Poe(this),this.experiments=new Rr(this),this.exceptions=new goe(this),this.rateLimiter=new Ooe(this),this.requestRouter=new Goe(this),this.consent=new mie(this),this.people={set:(t,n,r)=>{var i=Yn(t)?{[t]:n}:t;this.setPersonProperties(i),r==null||r({})},set_once:(t,n,r)=>{var i=Yn(t)?{[t]:n}:t;this.setPersonProperties(void 0,i),r==null||r({})}},this.on("eventCaptured",t=>St.info('send "'+(t==null?void 0:t.event)+'"',t))}init(t,n,r){if(r&&r!==au){var i,o=(i=Hd[r])!==null&&i!==void 0?i:new Xy;return o._init(t,n,r),Hd[r]=o,Hd[au][r]=o,o}return this._init(t,n,r)}_init(t,n,r){var i,o;if(n===void 0&&(n={}),pt(t)||vx(t))return St.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return St.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.cs=[],n.person_profiles&&(this.ds=n.person_profiles),this.set_config(qn({},bA(),xA(n),{name:r,token:t})),this.config.on_xhr_error&&St.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:fo.GZipJS,this.persistence=new hw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new hw(mt({},this.config,{persistence:"sessionStorage"}));var s=mt({},this.persistence.props),a=mt({},this.sessionPersistence.props);if(this.fs=new Loe(m=>this.ps(m),this.config.request_queue_config),this.gs=new Foe(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new Woe(this),this.sessionPropsManager=new Uoe(this,this.sessionManager,this.persistence)),new coe(this).startIfEnabledOrStop(),this.siteApps=new qoe(this),(i=this.siteApps)==null||i.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new ioe(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new aie(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new hoe(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new doe(this),this.exceptionObserver=new wie(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new YO(this,vie),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new Pie(this),this.historyAutocapture.startIfEnabled(),bs.DEBUG=bs.DEBUG||this.config.debug,bs.DEBUG&&St.info("Starting in debug mode",{this:this,config:n,thisC:mt({},this.config),p:s,s:a}),this._s(),((o=n.bootstrap)==null?void 0:o.distinctID)!==void 0){var l,u,c=this.config.get_device_id(fa()),f=(l=n.bootstrap)!=null&&l.isIdentifiedID?c:n.bootstrap.distinctID;this.persistence.set_property(hs,(u=n.bootstrap)!=null&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:f})}if(this.bs()){var h,p,v=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlags)||{}).filter(m=>{var b,w;return!((b=n.bootstrap)==null||(w=b.featureFlags)==null||!w[m])}).reduce((m,b)=>{var w,S;return m[b]=((w=n.bootstrap)==null||(S=w.featureFlags)==null?void 0:S[b])||!1,m},{}),y=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(m=>v[m]).reduce((m,b)=>{var w,S,E,A;return(w=n.bootstrap)!=null&&(S=w.featureFlagPayloads)!=null&&S[b]&&(m[b]=(E=n.bootstrap)==null||(A=E.featureFlagPayloads)==null?void 0:A[b]),m},{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:y})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Mj,$device_id:null},"");else if(!this.get_distinct_id()){var x=this.config.get_device_id(fa());this.register_once({distinct_id:x,$device_id:x},""),this.persistence.set_property(hs,"anonymous")}return jn(Te,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?ooe(this,()=>this.ws()):this.ws(),qi(this.config._onCapture)&&this.config._onCapture!==Wx&&(St.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",m=>this.config._onCapture(m.event,m))),this}me(t){var n,r,i,o,s,a,l,u;if(!vt||!vt.body)return St.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.me(t)},500);this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=qt(t.supportedCompression,fo.GZipJS)?fo.GZipJS:qt(t.supportedCompression,fo.Base64)?fo.Base64:void 0),(n=t.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.ds?this.ds:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(t),(i=this.sessionRecording)==null||i.onRemoteConfig(t),(o=this.autocapture)==null||o.onRemoteConfig(t),(s=this.heatmaps)==null||s.onRemoteConfig(t),this.surveys.onRemoteConfig(t),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(t),(l=this.exceptionObserver)==null||l.onRemoteConfig(t),(u=this.deadClicksAutocapture)==null||u.onRemoteConfig(t)}ws(){try{this.config.loaded(this)}catch(t){St.critical("`loaded` function failed",t)}this.ys(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Ss()},1),new $oe(this).load(),this.featureFlags.decide()}ys(){var t;this.has_opted_out_capturing()||this.config.request_batching&&((t=this.fs)==null||t.enable())}_dom_loaded(){this.has_opted_out_capturing()||Sa(this.__request_queue,t=>this.ps(t)),this.__request_queue=[],this.ys()}_handle_unload(){var t,n;this.config.request_batching?(this.$s()&&this.capture("$pageleave"),(t=this.fs)==null||t.unload(),(n=this.gs)==null||n.unload()):this.$s()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_e(t){this.__loaded&&(M4?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=Cm(t.url,{ip:this.config.ip?1:0}),t.headers=mt({},this.config.request_headers),t.compression=t.compression==="best-available"?this.compression:t.compression,t.fetchOptions=t.fetchOptions||this.config.fetch_options,(n=>{var r,i,o,s=mt({},n);s.timeout=s.timeout||6e4,s.url=Cm(s.url,{_:new Date().getTime().toString(),ver:bs.LIB_VERSION,compression:s.compression});var a=(r=s.transport)!==null&&r!==void 0?r:"fetch",l=(i=(o=PO(zd,u=>u.transport===a))==null?void 0:o.method)!==null&&i!==void 0?i:zd[0].method;if(!l)throw new Error("No available transport method");l(s)})(mt({},t,{callback:n=>{var r,i;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,n)),t.callback==null||t.callback(n)}}))))}ps(t){this.gs?this.gs.retriableRequest(t):this._e(t)}_execute_array(t){var n,r=[],i=[],o=[];Sa(t,a=>{a&&(n=a[0],Mn(n)?o.push(a):qi(a)?a.call(this):Mn(a)&&n==="alias"?r.push(a):Mn(a)&&n.indexOf("capture")!==-1&&qi(this[n])?o.push(a):i.push(a))});var s=function(a,l){Sa(a,function(u){if(Mn(u[0])){var c=l;dn(u,function(f){c=c[f[0]].apply(c,f.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};s(r,this),s(i,this),s(o,this)}bs(){var t,n;return((t=this.config.bootstrap)==null?void 0:t.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.fs){if(!this.consent.isOptedOut())if(!pt(t)&&Yn(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){n!=null&&n.$current_url&&!Yn(n==null?void 0:n.$current_url)&&(St.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,a=(r==null?void 0:r.timestamp)||s,l=fa(),u={uuid:l,event:t,properties:this.Di(t,n||{},a,l)};o&&(u.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r!=null&&r.$set&&(u.$set=r==null?void 0:r.$set);var c=this.ks(r==null?void 0:r.$set_once);c&&(u.$set_once=c),(u=Vre(u,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,pt(r==null?void 0:r.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=s);var f=mt({},u.properties.$set,u.$set);if(Eu(f)||this.setPersonPropertiesForFlags(f),!on(this.config.before_send)){var h=this.xs(u);if(!h)return;u=h}this.ls.emit("eventCaptured",u);var p={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.ps(p):this.fs.enqueue(p),u}St.critical("This capture call is ignored due to client rate limiting.")}}else St.error("No event name provided to posthog.capture")}else St.uninitializedWarning("posthog.capture")}je(t){return this.on("eventCaptured",n=>t(n.event,n))}Di(t,n,r,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=this.persistence.remove_event_timer(t),s=mt({},n);if(s.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(s.$cookieless_mode=!0),t==="$snapshot"){var a=mt({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=a.distinct_id,(!Yn(s.distinct_id)&&!Pr(s.distinct_id)||vx(s.distinct_id))&&St.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var l,u=Aoe(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:c,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=c,s.$window_id=f}this.sessionPropsManager&&qn(s,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&qn(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=(h=this.gs)==null?void 0:h.length}catch(x){s.$sdk_debug_error_capturing_properties=String(x)}if(this.requestRouter.region===hl.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),l=t==="$pageview"?this.pageViewManager.doPageView(r,i):t==="$pageleave"?this.pageViewManager.doPageLeave(r):this.pageViewManager.doEvent(),s=qn(s,l),t==="$pageview"&&vt&&(s.title=vt.title),!pt(o)){var p=r.getTime()-o;s.$duration=parseFloat((p/1e3).toFixed(3))}ri&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=qn({},u,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Mn(this.config.property_denylist)?dn(this.config.property_denylist,function(x){delete s[x]}):St.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var v=this.config.sanitize_properties;v&&(St.error("sanitize_properties is deprecated. Use before_send instead"),s=v(s,t));var y=this.Es();return s.$process_person_profile=y,y&&this.Is("_calculate_event_properties"),s}ks(t){var n;if(!this.persistence||!this.Es()||this.os)return t;var r=this.persistence.get_initial_props(),i=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),o=qn({},r,i||{},t||{}),s=this.config.sanitize_properties;return s&&(St.error("sanitize_properties is deprecated. Use before_send instead"),o=s(o,"$set_once")),this.os=!0,Eu(o)?void 0:o}register(t,n){var r;(r=this.persistence)==null||r.register(t,n)}register_once(t,n,r){var i;(i=this.persistence)==null||i.register_once(t,n,r)}register_for_session(t){var n;(n=this.sessionPersistence)==null||n.register(t)}unregister(t){var n;(n=this.persistence)==null||n.unregister(t)}unregister_for_session(t){var n;(n=this.sessionPersistence)==null||n.unregister(t)}Ps(t,n){this.register({[t]:n})}getFeatureFlag(t,n){return this.featureFlags.getFeatureFlag(t,n)}getFeatureFlagPayload(t){var n=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(n)}catch(r){return n}}isFeatureEnabled(t,n){return this.featureFlags.isFeatureEnabled(t,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(t,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,n)}getEarlyAccessFeatures(t,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(t,n,r)}on(t,n){return this.ls.on(t,n)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(t))!==null&&n!==void 0?n:()=>{}}getSurveys(t,n){n===void 0&&(n=!1),this.surveys.getSurveys(t,n)}getActiveMatchingSurveys(t,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(t,n)}renderSurvey(t,n){this.surveys.renderSurvey(t,n)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(t,n)}identify(t,n,r){if(!this.__loaded||!this.persistence)return St.uninitializedWarning("posthog.identify");if(Pr(t)&&(t=t.toString(),St.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t){if(["distinct_id","distinctid"].includes(t.toLowerCase()))St.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(this.Is("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var o=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}t!==i&&t!==this.get_property(bd)&&(this.unregister(bd),this.register({distinct_id:t}));var s=(this.persistence.get_property(hs)||"anonymous")==="anonymous";t!==i&&s?(this.persistence.set_property(hs,"identified"),this.setPersonPropertiesForFlags(mt({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.vs=vA(t,n,r),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),t!==i&&(this.reloadFeatureFlags(),this.unregister(gm))}}else St.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,n){if((t||n)&&this.Is("posthog.setPersonProperties")){var r=vA(this.get_distinct_id(),t,n);this.vs!==r?(this.setPersonPropertiesForFlags(mt({},n||{},t||{})),this.capture("$set",{$set:t||{},$set_once:n||{}}),this.vs=r):St.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,n,r){if(t&&n){if(this.Is("posthog.group")){var i=this.getGroups();i[t]!==n&&this.resetGroupPropertiesForFlags(t),this.register({$groups:mt({},i,{[t]:n})}),r&&(this.capture("$groupidentify",{$group_type:t,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[t]:r})),i[t]===n||r||this.reloadFeatureFlags()}}else St.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(t,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0),this.Is("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,n)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var n,r,i,o;if(St.info("reset"),!this.__loaded)return St.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),(i=this.persistence)==null||i.set_property(hs,"anonymous"),(o=this.sessionManager)==null||o.resetSessionId(),this.vs=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Mj,$device_id:null},"");else{var a=this.config.get_device_id(fa());this.register_once({distinct_id:a,$device_id:t?a:s},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,n;return(t=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(t!=null&&t.withTimestamp&&r){var o,s=(o=t.timestampLookBack)!==null&&o!==void 0?o:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-s,0)}return i}alias(t,n){return t===this.get_property(OO)?(St.critical("Attempting to create alias for existing People user - aborting."),-2):this.Is("posthog.alias")?(pt(n)&&(n=this.get_distinct_id()),t!==n?(this.Ps(bd,t),this.capture("$create_alias",{alias:t,distinct_id:n})):(St.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var n,r,i,o,s=mt({},this.config);Dn(t)&&(qn(this.config,xA(t)),(n=this.persistence)==null||n.update_config(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new hw(mt({},this.config,{persistence:"sessionStorage"})),er.O()&&er.A("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(bs.DEBUG=!0,St.info("set_config",JSON.stringify({config:t,oldConfig:s,newConfig:mt({},this.config)},null,2))),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._s())}startSessionRecording(t){var n=t===!0,r={sampling:n||!(t==null||!t.sampling),linked_flag:n||!(t==null||!t.linked_flag),url_trigger:n||!(t==null||!t.url_trigger),event_trigger:n||!(t==null||!t.event_trigger)};if(Object.values(r).some(Boolean)){var i,o,s,a,l;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((o=this.sessionRecording)==null||o.overrideSampling()),r.linked_flag&&((s=this.sessionRecording)==null||s.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!((t=this.sessionRecording)==null||!t.started)}captureException(t,n){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(mt({},Iie((i=>i instanceof Error)(t)?{error:t,event:t.message}:{event:t},{syntheticException:r}),n))}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var n;return(n=this.persistence)==null?void 0:n.props[t]}getSessionProperty(t){var n;return(n=this.sessionPersistence)==null?void 0:n.props[t]}toString(){var t,n=(t=this.config.name)!==null&&t!==void 0?t:au;return n!==au&&(n=au+"."+n),n}_isIdentified(){var t,n;return((t=this.persistence)==null?void 0:t.get_property(hs))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(hs))==="identified"}Es(){var t,n,r,i;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Eu(this.getGroups())&&((t=this.persistence)==null||(n=t.props)==null||!n[bd])&&((r=this.persistence)==null||(i=r.props)==null||!i[mm]))}$s(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Es()||this.Is("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Is(t){return this.config.person_profiles==="never"?(St.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Ps(mm,!0),!0)}_s(){var t,n,r,i,o=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||o&&!!s;((t=this.persistence)==null?void 0:t.ke)!==a&&((r=this.persistence)==null||r.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.ke)!==a&&((i=this.sessionPersistence)==null||i.set_disabled(a))}opt_in_capturing(t){var n;this.consent.optInOut(!0),this._s(),(pt(t==null?void 0:t.captureEventName)||t!=null&&t.captureEventName)&&this.capture((n=t==null?void 0:t.captureEventName)!==null&&n!==void 0?n:"$opt_in",t==null?void 0:t.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Ss()}opt_out_capturing(){this.consent.optInOut(!1),this._s()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return Ei?$4(Ei,this.config.custom_blocked_useragents):void 0}Ss(){vt&&(vt.visibilityState==="visible"?this.us||(this.us=!0,this.capture("$pageview",{title:vt.title},{send_instantly:!0}),this.hs&&(vt.removeEventListener("visibilitychange",this.hs),this.hs=null)):this.hs||(this.hs=this.Ss.bind(this),jn(vt,"visibilitychange",this.hs)))}debug(t){t===!1?(Te==null||Te.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(Te==null||Te.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}xs(t){if(on(this.config.before_send))return t;var n=Mn(this.config.before_send)?this.config.before_send:[this.config.before_send],r=t;for(var i of n){if(r=i(r),on(r)){var o="Event '"+t.event+"' was rejected in beforeSend function";return Hre(t.event)?St.warn(o+". This can cause unexpected behavior."):St.info(o),null}r.properties&&!Eu(r.properties)||St.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var t;return(t=this.pageViewManager.oe)==null?void 0:t.pageViewId}captureTraceFeedback(t,n){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:n})}captureTraceMetric(t,n,r){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:n,$ai_metric_value:String(r)})}}(function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=Wre(e.prototype[t[n]])})(Xy,["identify"]);var _A,SA,EA,kA,CA,jA;(function(e){e.Button="button",e.Tab="tab",e.Selector="selector"})(_A||(_A={})),function(e){e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}(SA||(SA={})),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(EA||(EA={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(kA||(kA={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(CA||(CA={})),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}(jA||(jA={}));var AA,lu=(AA=Hd[au]=new Xy,function(){function e(){e.done||(e.done=!0,M4=!1,dn(Hd,function(t){t._dom_loaded()}))}vt!=null&&vt.addEventListener?vt.readyState==="complete"?e():jn(vt,"DOMContentLoaded",e,{capture:!1}):Te&&St.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),AA),lS=j.createContext({client:lu});function D4(e,t,n){if(n===void 0&&(n=new WeakMap),e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(n.has(e)&&n.get(e)===t)return!0;n.set(e,t);var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var o=0,s=r;o<s.length;o++){var a=s[o];if(!i.includes(a)||!D4(e[a],t[a],n))return!1}return!0}function Joe(e){var t=e.children,n=e.client,r=e.apiKey,i=e.options,o=j.useRef(null),s=j.useMemo(function(){return n?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),i&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),lu)},[n,r,JSON.stringify(i)]);return j.useEffect(function(){if(!n){var a=o.current;a?(r!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),i&&!D4(i,a.options)&&lu.set_config(i),o.current={apiKey:r,options:i!=null?i:{}}):(lu.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),lu.init(r,i),o.current={apiKey:r,options:i!=null?i:{}})}},[n,r,JSON.stringify(i)]),It.createElement(lS.Provider,{value:{client:s}},t)}var Qoe=function(){var e=j.useContext(lS).client;return e},Vx=function(e,t){return Vx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Vx(e,t)};function Zoe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Vx(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var gw=function(e){return typeof e=="function"},ese={componentStack:null,error:null},tse={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(e){Zoe(t,e);function t(n){var r=e.call(this,n)||this;return r.state=ese,r}return t.prototype.componentDidCatch=function(n,r){var i=r.componentStack,o=this.props.additionalProperties;this.setState({error:n,componentStack:i});var s;gw(o)?s=o(n):typeof o=="object"&&(s=o);var a=this.context.client;a.captureException(n,s)},t.prototype.render=function(){var n=this.props,r=n.children,i=n.fallback,o=this.state;if(o.componentStack==null)return gw(r)?r():r;var s=gw(i)?It.createElement(i,{error:o.error,componentStack:o.componentStack}):i;return It.isValidElement(s)?s:(console.warn(tse.INVALID_FALLBACK),It.createElement(It.Fragment,null))},t.contextType=lS,t})(It.Component);function nse(e){var p,v;const{systems:t}=kO(),{versions:n}=j1(),{characters:r}=CO(),i=Qoe(),[o,s]=j.useState(t[0]),[a,l]=j.useState(n[0]),[u,c]=j.useState(0),[f,h]=j.useState({local_id:"",user_id:"none",name:"Aliza Cartwight",data:(p=a==null?void 0:a.data.defaultCharacterData)!=null?p:{},system:{local_id:"",version_id:""},created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return j.useEffect(()=>{const y=t[0];if(!y)return;s(y);let x;x=n.filter(b=>b.reference_id===y.local_id).sort((b,w)=>{if(!b||!w)return 0;const S=new Date(b.created_at),E=new Date(w.created_at);return S>E?1:0})[0],x&&(l(x),h({...f,data:structuredClone(x.data.defaultCharacterData),system:{local_id:y.local_id,version_id:x.local_id}}))},[t,n]),e.isOpen?o?d.jsxs(rr,{isOpen:e.isOpen,onClose:()=>e.setIsOpen(!1),children:[d.jsx(ir,{title:"Create Character",onClose:()=>e.setIsOpen(!1)}),d.jsx(or,{children:u===0&&d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:f.name,onChange:y=>h({...f,name:y}),isValid:!r.find(y=>y.name===f.name)&&f.name.length>0,errorMessage:"Names must be unique and not empty."}),d.jsx(dt,{id:"character-system",label:"Tabletop System",value:o.local_id,onChange:y=>{const x=t.find(b=>b.local_id===y);if(!x)return;const m=n.filter(b=>b.reference_id===x.local_id).sort((b,w)=>{const S=new Date(b.created_at),E=new Date(w.created_at);return S>E?1:0})[0];m&&(s(x),l(m),h({...f,data:structuredClone(m.data.defaultCharacterData),system:{local_id:x.local_id,version_id:m.local_id}}))},children:t.map(y=>d.jsx("option",{value:y.local_id,children:y.name},y.local_id))}),d.jsx(dt,{id:"character-system-version",label:"System Version",value:(v=a==null?void 0:a.local_id)!=null?v:"",onChange:y=>{const x=n.find(m=>m.local_id===y);x&&(l(x),h({...f,data:structuredClone(x.data.defaultCharacterData),system:{local_id:o.local_id,version_id:x.local_id}}))},children:n.map(y=>d.jsx("option",{value:y.local_id,children:Ol(y.local_id)},y.local_id))})]})}),d.jsxs(dr,{children:[d.jsx("nav",{className:"flex flex-grow mr-4","aria-label":"Breadcrumb",children:d.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse",children:[d.jsx("li",{className:"inline-flex items-center cursor-pointer",onClick:()=>c(0),children:d.jsxs("p",{className:"inline-flex items-center text-sm font-medium text-neutral-700 hover:text-brand-600 dark:text-neutral-400 dark:hover:text-white",children:[d.jsx("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})}),"Basics"]})}),a==null?void 0:a.data.creator.map((y,x)=>u<x+1?d.jsx(d.Fragment,{}):d.jsx("li",{className:"cursor-pointer",onClick:()=>c(x+1),children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("svg",{className:"rtl:rotate-180 w-3 h-3 text-neutral-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})}),d.jsx("p",{className:"ms-1 text-sm font-medium text-neutral-700 hover:text-brand-600 md:ms-2 dark:text-neutral-400 dark:hover:text-white",children:y.name})]})}))]})}),d.jsx(kt,{id:"create-character-button",color:"primary",onClick:async()=>{await Pre(f.name,f.data,f.system),s(t[0]),e.setIsOpen(!1),i.capture("character_created",{character_name:f.name})},children:"Create"})]})]}):d.jsxs(rr,{isOpen:e.isOpen,onClose:()=>e.setIsOpen(!1),children:[d.jsx(ir,{title:"Error grabbing system",onClose:()=>e.setIsOpen(!1)}),d.jsx(or,{children:d.jsx("h3",{children:"There was an error grabbing a default system, please refresh to load base data or make / import something!"})}),d.jsx(dr,{children:d.jsx(kt,{color:"primary",onClick:()=>e.setIsOpen(!1),children:"Close"})})]}):d.jsx(d.Fragment,{})}const L4=(e,t)=>{const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="".concat(t,".json"),i.click(),URL.revokeObjectURL(r),i.remove()},rse=e=>e>0,ise=()=>{const{characters:e,isLoading:t}=CO(),{systems:n}=kO(),{versions:r}=j1(),{isLoggedIn:i,user:o,synced_characters:s}=sr.useValue(),[a,l]=j.useState(!1),[u,c]=j.useState(!1),f=vc();if(t)return d.jsx(d.Fragment,{});const h=p=>{var x;const v=[{label:"export",onClick:()=>L4(p,"".concat(p.name,"-export"))},{label:"rename",onClick:()=>ln({type:"edit_string",title:"Rename Character",data:p.name,onSave:m=>{Ore(p.local_id,m)}})},{label:"delete",onClick:()=>ln({type:"confirm",title:"Delete Character",data:{type:"danger",message:"Are you sure you want to delete this character?"},onSave:()=>Mre(p.local_id)})}];if(rse((x=o==null?void 0:o.role)!=null?x:0))return v;const y=s.includes(p.local_id);return v.unshift({label:y?"UnSync":"Sync",onClick:()=>{let m=[];s.includes(p.local_id)?m=s.filter(b=>b!==p.local_id):length<3&&(m=[...s,p.local_id]),l3(m)}}),v};return d.jsxs("div",{children:[d.jsx(Ta,{title:"Characters"}),d.jsx(nse,{isOpen:u,setIsOpen:c}),d.jsxs("div",{className:"p-4",children:[e.length?e.map(p=>{var v,y,x;return d.jsxs("div",{className:"relative flex flex-col max-w-96 p-4 transition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",children:[d.jsxs(kg,{to:p.local_id,className:"flex items-start space-x-4",children:[d.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-xl font-bold text-white",children:p.name[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:p.name}),d.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[(v=n.find(m=>m.local_id===p.system.local_id))==null?void 0:v.name," "," Version"," ",Ol((x=(y=r.find(m=>m.local_id===p.system.version_id))==null?void 0:y.local_id)!=null?x:"")]})]})]}),d.jsx("div",{className:"flex justify-end gap-2 mt-4 border-t pt-3 dark:border-neutral-700",children:d.jsx(C1,{label:"Edit",onClick:()=>f(p.local_id),options:h(p)})})]},p.local_id)}):d.jsx("h5",{children:"Doesn't look like you have any characters yet? Try creating one!"}),d.jsx(Fa,{isOpen:a,onClick:()=>l(!a),buttons:[{name:"Create Character",icon:"",onClick:()=>c(!0)},{name:"Import Character",icon:"",onClick:()=>ln({type:"import_file",title:"Import Character",data:void 0,onSave:async p=>{try{const v=JSON.parse(p);v&&await Dre(v)}catch(v){console.error(v)}}})}]})]})]})};function ose(e){return Vs(()=>_t.characters.get(e||""),[e])}var sse=Object.getOwnPropertyNames,ase=Object.getOwnPropertySymbols,lse=Object.prototype.hasOwnProperty;function NA(e,t){return function(r,i,o){return e(r,i,o)&&t(r,i,o)}}function kp(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=e(n,r,i);return o.delete(n),o.delete(r),l}}function RA(e){return sse(e).concat(ase(e))}var use=Object.hasOwn||function(e,t){return lse.call(e,t)};function Xl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var cse="__v",dse="__o",fse="_owner",TA=Object.getOwnPropertyDescriptor,IA=Object.keys;function hse(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function pse(e,t){return Xl(e.getTime(),t.getTime())}function gse(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function mse(e,t){return e===t}function PA(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.entries(),s,a,l=0;(s=o.next())&&!s.done;){for(var u=t.entries(),c=!1,f=0;(a=u.next())&&!a.done;){if(i[f]){f++;continue}var h=s.value,p=a.value;if(n.equals(h[0],p[0],l,f,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){c=i[f]=!0;break}f++}if(!c)return!1;l++}return!0}var yse=Xl;function vse(e,t,n){var r=IA(e),i=r.length;if(IA(t).length!==i)return!1;for(;i-- >0;)if(!B4(e,t,n,r[i]))return!1;return!0}function ld(e,t,n){var r=RA(e),i=r.length;if(RA(t).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],!B4(e,t,n,o)||(s=TA(e,o),a=TA(t,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function wse(e,t){return Xl(e.valueOf(),t.valueOf())}function bse(e,t){return e.source===t.source&&e.flags===t.flags}function OA(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.values(),s,a;(s=o.next())&&!s.done;){for(var l=t.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(s.value,a.value,s.value,a.value,e,t,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function xse(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function _se(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function B4(e,t,n,r){return(r===fse||r===dse||r===cse)&&(e.$$typeof||t.$$typeof)?!0:use(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Sse="[object Arguments]",Ese="[object Boolean]",kse="[object Date]",Cse="[object Error]",jse="[object Map]",Ase="[object Number]",Nse="[object Object]",Rse="[object RegExp]",Tse="[object Set]",Ise="[object String]",Pse="[object URL]",Ose=Array.isArray,$A=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,MA=Object.assign,$se=Object.prototype.toString.call.bind(Object.prototype.toString);function Mse(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,o=e.areMapsEqual,s=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,c=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(v,y,x){if(v===y)return!0;if(v==null||y==null)return!1;var m=typeof v;if(m!==typeof y)return!1;if(m!=="object")return m==="number"?s(v,y,x):m==="function"?i(v,y,x):!1;var b=v.constructor;if(b!==y.constructor)return!1;if(b===Object)return a(v,y,x);if(Ose(v))return t(v,y,x);if($A!=null&&$A(v))return f(v,y,x);if(b===Date)return n(v,y,x);if(b===RegExp)return u(v,y,x);if(b===Map)return o(v,y,x);if(b===Set)return c(v,y,x);var w=$se(v);return w===kse?n(v,y,x):w===Rse?u(v,y,x):w===jse?o(v,y,x):w===Tse?c(v,y,x):w===Nse?typeof v.then!="function"&&typeof y.then!="function"&&a(v,y,x):w===Pse?h(v,y,x):w===Cse?r(v,y,x):w===Sse?a(v,y,x):w===Ese||w===Ase||w===Ise?l(v,y,x):!1}}function Dse(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?ld:hse,areDatesEqual:pse,areErrorsEqual:gse,areFunctionsEqual:mse,areMapsEqual:r?NA(PA,ld):PA,areNumbersEqual:yse,areObjectsEqual:r?ld:vse,arePrimitiveWrappersEqual:wse,areRegExpsEqual:bse,areSetsEqual:r?NA(OA,ld):OA,areTypedArraysEqual:r?ld:xse,areUrlsEqual:_se};if(n&&(i=MA({},i,n(i))),t){var o=kp(i.areArraysEqual),s=kp(i.areMapsEqual),a=kp(i.areObjectsEqual),l=kp(i.areSetsEqual);i=MA({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function Lse(e){return function(t,n,r,i,o,s,a){return e(t,n,a)}}function Bse(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(l,u){var c=r(),f=c.cache,h=f===void 0?t?new WeakMap:void 0:f,p=c.meta;return n(l,u,{cache:h,equals:i,meta:p,strict:o})};if(t)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,u){return n(l,u,s)}}var Cp=Wa();Wa({strict:!0});Wa({circular:!0});Wa({circular:!0,strict:!0});Wa({createInternalComparator:function(){return Xl}});Wa({strict:!0,createInternalComparator:function(){return Xl}});Wa({circular:!0,createInternalComparator:function(){return Xl}});Wa({circular:!0,createInternalComparator:function(){return Xl},strict:!0});function Wa(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,o=e.strict,s=o===void 0?!1:o,a=Dse(e),l=Mse(a),u=r?r(l):Lse(l);return Bse({circular:n,comparator:l,createState:i,equals:u,strict:s})}const Fse=async e=>{try{return await _t.versions.get(e)}catch(t){console.log("Error getting subscription:",t);return}},zse=()=>{const{id:e}=pT(),t=ose(e),[n,r]=j.useState(null),i=j.useCallback(o=>{if(!t||!n)return;const s=o.system.pages.findIndex(a=>a.name===o.page.name);Cp(t,o.character)&&Cp(n,o.system)&&Cp(o.system.pages[s],o.page)||($re(t.local_id,o.character.data),r({...o.system,pages:o.system.pages.map(a=>a.name===o.page.name?o.page:a)}))},[t,n]);return j.useEffect(()=>{(async()=>{if(!t)return;const s=await Fse(t.system.version_id);s&&(Cp(n,s.data)||r(s.data))})()},[t]),t?n?d.jsxs("div",{className:"flex flex-col h-full w-full",children:[d.jsx("p",{id:"loading-text",className:"hidden",children:"loading..."}),d.jsx(Ta,{title:t.name}),d.jsxs("div",{className:"flex flex-row flex-grow overflow-hidden",children:[d.jsx("div",{className:"relative w-full lg:w-1/2 max-h-full flex flex-col",children:d.jsx("div",{className:"overflow-y-scroll p-4",children:d.jsx(DA,{className:"first-tab-selector",system:n,character:t,updateState:i})})}),d.jsx("div",{className:"relative w-1/2 hidden flex-col lg:flex max-h-full",children:d.jsx("div",{className:"overflow-y-scroll p-4",children:d.jsx(DA,{className:"second-tab-selector",system:n,character:t,updateState:i})})})]})]}):d.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading system data..."}):d.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading character data..."})},DA=({system:e,character:t,updateState:n,className:r})=>{const[i,o]=j.useState(e.pages[0].name);return d.jsxs(d.Fragment,{children:[d.jsx(dt,{className:r,id:"tab-selector",label:"",value:i,onChange:o,children:e.pages.map(s=>d.jsx("option",{value:s.name,children:s.name},s.name))}),e.pages.map(s=>d.jsx(Hse,{character:t,system:e,page:s,currentTab:i,updateState:n},s.name))]})};function Hse({page:e,character:t,system:n,currentTab:r,updateState:i}){const o=j.useMemo(()=>e.lexical?JSON.parse(Oa.decompress(Oa.decodeBase64(e.lexical))):{},[e.lexical]);return r!==e.name?d.jsx(d.Fragment,{}):d.jsx(Ere,{data:o,state:{character:t,system:n,page:e},updateState:i})}const uS=lt.object({id:lt.string({invalid_type_error:"id must be a string"}).optional(),local_id:lt.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:lt.string(),data:lt.any(),reference_id:lt.string({invalid_type_error:"reference_id must be a string"}),reference_type:lt.enum(["system","character"]),version:lt.string().optional(),created_at:lt.string().datetime({offset:!0}),updated_at:lt.string().datetime({offset:!0}),deleted_at:lt.string().datetime({offset:!0}).nullable().optional()}),Use=async(e,t)=>{try{let n=await Ir();for(;!await _a(n);)n=await Ir();const{user:r}=sr.get(),i=r?r.id:"none",o={...e,local_id:n,user_id:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},s=dh.safeParse(o);if(!s.success){console.log("Invalid system data:",s.error.format());return}await _t.systems.add(o);let a=await Ir();for(;!await _a(a);)a=await Ir();const l={...t,local_id:a,reference_id:n,user_id:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},u=uS.safeParse(l);if(!u.success){console.log("Invalid Version data:",u.error.format());return}await _t.versions.add(l);let c=await Ir();for(;!await _a(c);)c=await Ir();await _t.subscriptions.add({local_id:c,user_id:i,resource_type:"system",resource_id:n,version_id:a,auto_update:!1,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null})}catch(n){console.log("Error importing system or version or creating subscription:",n)}};function Wse(){const e=Vs(async()=>(await _t.subscriptions.toArray()).filter(n=>!n.deleted_at),[]);return{subscriptions:e||[],isLoading:e===void 0}}function Vse(e){const t=Vs(async()=>{let n;switch(e.resource_type){case"system":n=await _t.systems.where("local_id").equals(e.resource_id).toArray();break}if(!n||n.length===0)return;const r=await _t.versions.where("local_id").equals(e.version_id).toArray();if(!(!r||r.length===0))return{baseData:n[0],versionData:r[0]}},[]);return{query:t,isLoading:t===void 0}}const qse=lt.object({id:lt.string({invalid_type_error:"id must be a string"}).optional(),local_id:lt.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:lt.string({invalid_type_error:"user_id must be a string"}),resource_type:lt.enum(["system","character","module","plugin"]),resource_id:lt.string({invalid_type_error:"resource_id must be a string"}),version_id:lt.string(),auto_update:lt.boolean().optional().default(!0),version:lt.string().optional(),subscribed_at:lt.string().datetime({offset:!0}),updated_at:lt.string().datetime({offset:!0}),deleted_at:lt.string().datetime({offset:!0}).nullable().optional()}),cS=async(e,t,n,r)=>{try{const{user:i}=sr.get(),o=(i==null?void 0:i.id)||"none";let s=await Ir();for(;!await _a(s);)s=await Ir();const a={local_id:s,user_id:o,resource_type:e,resource_id:t,version_id:n,auto_update:r,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},l=qse.safeParse(a);if(!l.success){console.log("Invalid subscription data:",l.error.format());return}return await _t.subscriptions.add(a),a}catch(i){console.log("Error creating subscription:",i)}},Kse=async e=>{try{let t=await Ir();for(;!await _a(t);)t=await Ir();const{user:n}=sr.get(),r=n?n.id:"none",i={...e,local_id:t,user_id:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deleted_at:null},o=dh.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}return await _t.systems.add(i),i}catch(t){console.log("Error creating system:",t)}},Gse=async(e,t,n)=>{try{let r=await Ir();for(;!await _a(r);)r=await Ir();const{user:i}=sr.get(),o=(i==null?void 0:i.id)||"none",s={local_id:r,user_id:o,data:n,reference_id:t,reference_type:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},a=uS.safeParse(s);if(!a.success){console.log("Invalid subscription data:",a.error.format());return}return await _t.versions.add(s),s}catch(r){console.log("Error creating subscription:",r)}},Yse=async(e,t)=>{const n=await Kse(e);if(!n)return;const r=await Gse("system",n.local_id,t.data);!r||await cS("system",n.local_id,r.local_id,!1)},Xse=({subscription:e})=>{const{query:t,isLoading:n}=Vse(e);let r=vc();const{user:i}=sr.useValue();if(n||!t)return d.jsx(d.Fragment,{});const{baseData:o,versionData:s}=t,a=i&&o.user_id&&i.id===o.user_id||!o.user_id&&!o.id;return d.jsxs("div",{className:"relative flex flex-col max-w-96 p-4 transition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",children:[d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-xl font-bold text-white",children:o.name[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:o.name}),d.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["Version ",Ol(s.local_id)]})]})]}),d.jsx("div",{className:"flex justify-end gap-2 mt-4 border-t pt-3 dark:border-neutral-700",children:d.jsx(C1,{label:a?"Edit":"Fork",onClick:()=>a?r("/library/".concat(e.resource_type,"/").concat(s.local_id)):Yse(o,s),options:[{label:"export",onClick:()=>L4({system:t.baseData,version:t.versionData},"".concat(t.baseData.name,"-").concat(t.versionData.local_id))}]})})]},e.local_id)},Jse=()=>{const{subscriptions:e,isLoading:t}=Wse(),[n,r]=j.useState(!1);return d.jsxs("div",{children:[d.jsx(Ta,{title:"Library"}),d.jsxs("div",{className:"p-4",children:[t?d.jsx("h5",{className:"mb-4 text-xl",children:"Loading..."}):d.jsx("h5",{className:"flex flex-col gap-4",children:d.jsxs("div",{children:[d.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Systems"}),d.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.filter(i=>i.resource_type==="system").map(i=>d.jsx(Xse,{subscription:i},i.local_id))})]})}),d.jsx(Fa,{isOpen:n,onClick:()=>r(!n),buttons:[{name:"Create System",icon:"",onClick:()=>ln({type:"create_subscription",title:"Create Subscription",data:void 0,onSave:()=>{}})},{name:"Import System",icon:"",onClick:()=>ln({type:"import_file",title:"Import System",data:void 0,onSave:async i=>{try{const o=JSON.parse(i);o&&o.system&&o.version&&await Use(o.system,o.version)}catch(o){console.error(o)}}})}]})]})]})};function F4({types:e,onDelete:t,onSave:n,isVisible:r,requestClose:i,data:o}){var p,v;const s=un.useValue(),a=Wn(s.versionId),[l,u]=j.useState({name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"}),[c,f]=j.useState(((p=a==null?void 0:a.data)==null?void 0:p.types.find(y=>y.name===l.typeData.type))||null),h=(y,x,m)=>{u(In(x,b=>(p1(b,y,m),b)))};return j.useEffect(()=>{var x;const y=o||{name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"};u(y),f(((x=a==null?void 0:a.data)==null?void 0:x.types.find(m=>m.name===y.typeData.type))||null)},[o,u,f]),o?d.jsxs(rr,{isOpen:r,onClose:i,children:[d.jsx(ir,{title:"Edit ".concat(o.name),onClose:i}),d.jsxs(or,{children:[d.jsx(Kt,{id:"data-name",label:"Name",isValid:!0,errorMessage:"",value:l.name,onChange:y=>u({...l,name:y})}),d.jsxs(dt,{id:"data-type",label:"Type",value:(c==null?void 0:c.name)||"",onChange:y=>{var m;const x=((m=a==null?void 0:a.data)==null?void 0:m.types.find(b=>b.name===y))||null;f(x),u({...l,data:l.typeData.isArray?[]:Of(e,x||y),typeData:{...l.typeData,type:y}})},children:[d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),(v=a==null?void 0:a.data)==null?void 0:v.types.map(y=>d.jsx("option",{value:y.name,children:y.name},y.name))]}),c&&d.jsx("div",{children:d.jsx(Gn,{id:"is-array",label:"Is Array?",checked:l.typeData.isArray,onChange:y=>{u(y?{...l,data:[],typeData:{...l.typeData,isArray:y}}:{...l,data:Of(e,l.typeData.type),typeData:{...l.typeData,isArray:y}})}})}),d.jsx("div",{className:"h-2"}),c&&l.typeData.isArray?d.jsx(Qse,{types:e,type:c,title:"data",data:l.data,onAdd:y=>{console.log("adding item"),h("data",l,[...l.data,y])},onChange:(y,x)=>h(y,l,x),onDelete:y=>h("data",l,l.data.filter(x=>x.name!==y))}):z4(c||{name:l.typeData.type,properties:[]},l.data||l,l,l.typeData,"value",h)]}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{t&&t(),i()},children:t?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{n(l),i()},children:"Update"})]})]}):d.jsx(d.Fragment,{})}function z4(e,t,n,r,i,o){var s;switch(e.name){case"string":return r.useTextArea?d.jsx(g1,{id:i,label:i,value:t,onChange:a=>o("data",n,a)}):d.jsx(Kt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,a)});case"number":return d.jsx(Kt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,+a)});case"boolean":return d.jsx(Gn,{id:i,label:i,checked:t,onChange:a=>o("data",n,a)});case"enum":return d.jsx(dt,{id:i,label:i,value:t,onChange:a=>o("data",n,a),children:(s=r.options)==null?void 0:s.map(a=>d.jsx("option",{value:a,children:a},a))});case"blueprint":return d.jsx("div",{children:"TODO"});default:return d.jsx("div",{children:e.properties.map(a=>z4({name:a.typeData.type,properties:[]},t[a.key]||"",n,a.typeData,a.key,(l,u,c)=>{o("data/".concat(a.key),u,c)}))},i)}}function Qse({types:e,title:t,data:n,type:r,onAdd:i,onChange:o,onDelete:s}){const[a,l]=j.useState(null);return d.jsxs("div",{children:[d.jsx(m1,{title:"Edit Data",types:e,onDelete:()=>s(a.name),onSave:u=>o("".concat(t,"/").concat(a.name),u),isVisible:a!==null,requestClose:()=>l(null),data:a}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:t}),d.jsx("p",{onClick:()=>i(Of(e,r)),children:"Add"})]}),d.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),d.jsx("div",{className:"flex flex-col gap-1 mt-3",children:n.map(u=>d.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>l(u),children:d.jsx("p",{children:u.name})},u.name))})]})}const H4=async(e,t)=>In(e,n=>{let r=[];if(t==="builder"?r=n.creator:t==="character"&&(r=n.pages),r.findIndex(s=>s.name==="New Page")!==-1)return;let o={name:"New Page",blueprint:{nodes:Mr(),edges:[]},lexical:"",state:[]};t==="builder"?n.creator.push(o):t==="character"&&n.pages.push(o)}),U4=async(e,t,n,r,i)=>In(e,o=>{let s=[];t==="builder"?s=o.creator:t==="character"&&(s=o.pages);const a=s.findIndex(u=>u.name===n);if(a===-1||s[a].state.find(u=>u.name===r))return;let l={name:r,type:i,value:void 0};t==="builder"?o.creator[a].state.push(l):t==="character"&&o.pages[a].state.push(l)}),Zse=async e=>In(e,t=>{t.data.findIndex(r=>r.name==="New Data")===-1&&t.data.push({name:"New Data",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1},data:"lorem ipsum"})}),eae=async(e,t)=>In(e,n=>{n.types.push({name:t,properties:[{key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}}]})}),tae=async(e,t,n)=>In(e,r=>{const i=r.types.findIndex(o=>o.name===t);i!==-1&&r.types[i].properties.push(n)}),W4=(e,t,n)=>In(e,r=>{const o=(t==="character"?r.pages:r.creator).findIndex(s=>s.name===n);o===-1&&(t==="character"?r.pages.splice(o,1):t==="builder"&&r.creator.splice(o,1))}),nae=async(e,t)=>In(e,n=>{const r=n.data.findIndex(i=>i.name===t);r!==-1&&n.data.splice(r,1)}),rae=async(e,t)=>In(e,n=>{const r=n.types.findIndex(i=>i.name===t);r!==-1&&n.types.splice(r,1)}),iae=async(e,t,n)=>In(e,r=>{for(let i=0;i<r.types.length;i++){const o=r.types[i];if(o.name!==t)continue;const s=o.properties.findIndex(a=>a.key===n);if(s===-1)return;o.properties.splice(s,1)}}),V4=async(e,t,n,r)=>In(e,i=>{const s=(t==="character"?i.pages:i.creator).findIndex(a=>a.name===n);s===-1&&(t==="character"?i.pages[s].name=r:t==="builder"&&(i.creator[s].name=r))}),oae=async(e,t,n)=>In(e,r=>{const i=r.types.findIndex(o=>o.name===t);i!==-1&&(r.types[i].name=n)}),mw=async(e,t)=>In(e,n=>{n.defaultCharacterData=t}),q4=async(e,t,n,r)=>In(e,i=>{const s=(t==="character"?i.pages:i.creator).findIndex(a=>a.name===n);s!==-1&&(t==="character"?i.pages[s].blueprint=r:t==="builder"&&(i.creator[s].blueprint=r))}),K4=async(e,t,n,r,i)=>In(e,o=>{const s=t==="character"?o.pages:o.creator;for(let a=0;a<s.length;a++){const l=s[a];if(l.name!==n)continue;const u=l.state.findIndex(c=>c.name===r);if(u===-1)return;r!==i.name?(l.state.splice(u,1),l.state.push(i)):l.state[u]=i}}),LA=async(e,t)=>{if(t==="{}")return;const n=Oa.encodeBase64(Oa.compress(t)),r=un.get();return In(e,i=>{if(r.tab==="editor"){const o=i.pages.findIndex(s=>s.name===r.characterPage);if(o===-1)return;i.pages[o].lexical=n}else if(r.tab==="creator"){const o=i.creator.findIndex(s=>s.name===r.creatorPage);if(o===-1)return;i.creator[o].lexical=n}})},sae=async(e,t,n)=>In(e,r=>{const i=r.data.findIndex(o=>o.name===t);i!==-1&&(t!==n.name?(r.data.splice(i,1),r.data.push(n)):r.data[i]=n)}),aae=async(e,t,n,r)=>In(e,i=>{for(let o=0;o<i.types.length;o++){const s=i.types[o];if(s.name!==t)continue;const a=s.properties.findIndex(l=>l.key===n);if(a===-1)return;n!==r.key?(s.properties.splice(a,1),s.properties.push(r)):s.properties[a]=r}});async function gn(e,t){if(!await _t.versions.get(e))return;const r=await t;if(r)try{return await _t.versions.update(e,{data:r})}catch(i){console.log("Error updating version resource:",i)}}const lae=({editsId:e,versionedResource:t})=>{const[n,r]=j.useState(null);return console.log(t),d.jsxs(d.Fragment,{children:[d.jsx(F4,{types:t.data.types,onDelete:()=>{const i=In(t.data.defaultCharacterData,o=>{delete o[(n==null?void 0:n.name)||""],o._type.properties=o._type.properties.filter(s=>s.key!==(n==null?void 0:n.name))});gn(e,mw(t.data,i))},onSave:i=>{const o=i.name,s=i.typeData,a=i.data,l=In(t.data.defaultCharacterData,u=>{delete u[(n==null?void 0:n.name)||""],u[o]=a;for(let c=0;c<u._type.properties.length;c++){const f=u._type.properties[c];f.key===(n==null?void 0:n.name)&&(f.key=o,f.typeData=s)}});gn(e,mw(t.data,l))},isVisible:n!==null,requestClose:()=>r(null),data:n}),d.jsx("div",{className:"flex flex-col gap-1",children:t.data.defaultCharacterData._type.properties.map(i=>{const o=i.key,s=t.data.defaultCharacterData[o],a=i.typeData;let l=s._type?void 0:a.type;return d.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>r({name:o,typeData:a,data:s}),children:d.jsxs("p",{children:[o," - ",l," ",a.isArray?"(Array)":""]})},o)})}),d.jsx(Fa,{onClick:()=>{const i={...t.data.defaultCharacterData,newKey:"new value",_type:{name:t.data.defaultCharacterData._type.name||"",properties:[...t.data.defaultCharacterData._type.properties||[],{key:"newKey",typeData:{type:"string",useTextarea:!1,isArray:!1}}]}};gn(e,mw(t.data,i))}})]})},uae=({editsId:e,versionedResource:t})=>{const[n,r]=j.useState(null);return d.jsxs(d.Fragment,{children:[d.jsx(F4,{types:t.data.types,onDelete:()=>gn(e,nae(t.data,n.name)),onSave:i=>gn(e,sae(t.data,n.name,i)),isVisible:n!==null,requestClose:()=>r(null),data:n}),d.jsx("div",{className:"flex flex-col gap-1",children:t.data.data.map(i=>d.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>r(i),children:d.jsxs("p",{children:[i.name," - ",i.typeData.type," ",i.typeData.isArray?"(Array)":""]})},i.name))}),d.jsx(Fa,{onClick:()=>gn(e,Zse(t.data))})]})},cae=({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i})=>{var v,y,x;const[o,s]=j.useState(""),[a,l]=j.useState({type:"",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}),[u,c]=j.useState(null),f=un.useValue(),h=Wn(f.versionId),p=j.useMemo(()=>h==null?void 0:h.data.types.find(m=>m.name===(e==null?void 0:e.typeName)),[e,h]);return j.useEffect(()=>{e&&(s(e.key),l({useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[],...e.typeData}))},[e]),d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:"Edit Type Property",onClose:n}),d.jsxs(or,{children:[d.jsx(Kt,{id:"key",label:"key",placeholder:"baba yaga",value:o,onChange:s,isValid:!0,errorMessage:""}),d.jsxs(dt,{id:"type",label:"Type",value:a.type,onChange:m=>l({...a,type:m}),children:[d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),d.jsx("option",{value:"blueprint",children:"blueprint"}),h==null?void 0:h.data.types.map(m=>d.jsx("option",{value:m.name,children:m.name},m.name))]}),d.jsx(Gn,{id:"is-array",label:"Is Array?",checked:a.isArray,onChange:m=>l({...a,isArray:m})}),a.type==="string"&&!a.isArray&&d.jsx(Gn,{id:"use-textarea",label:"Use Textarea?",checked:a.useTextArea,onChange:m=>l({...a,useTextArea:m})}),a.type==="enum"&&d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:"Options"}),d.jsx("div",{onClick:()=>{var b;((b=a.options)==null?void 0:b.findIndex(w=>w==="New Option"))===-1&&l({...a,options:[...a.options||[],"New Option"]})},children:d.jsx("p",{children:"Add"})})]}),d.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),d.jsx("div",{children:(v=a.options)==null?void 0:v.map(m=>d.jsx("div",{onClick:()=>c(m),children:d.jsx("p",{children:m})},m))})]}),a.type==="blueprint"&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsxs(dt,{id:"output-type",label:"Output Type",value:a.outputType||"none",onChange:m=>l({...a,outputType:m}),children:[d.jsx("option",{value:"none",children:"none"}),d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),d.jsx("option",{value:"blueprint",children:"blueprint"}),(y=h==null?void 0:h.data)==null?void 0:y.types.map(m=>d.jsx("option",{value:m.name,children:m.name},m.name))]}),d.jsx(Gn,{id:"is-output-an-array",label:"Is Array?",checked:a.isOutputAnArray,onChange:m=>l({...a,isOutputAnArray:m})})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:"Inputs"}),d.jsx("div",{onClick:()=>{var b;((b=a.inputs)==null?void 0:b.findIndex(w=>w.name==="New Input"))===-1&&l({...a,inputs:[...a.inputs||[],{name:"New Input",type:"string",isArray:!1}]})},children:d.jsx("p",{children:"Add"})})]}),d.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),d.jsx("div",{children:(x=a.inputs)==null?void 0:x.map(m=>d.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>ln({type:"edit_blueprint_param",title:"Edit Blueprint Param",data:m,onSave:b=>{let w=[...a.inputs||[]];const S=w.findIndex(E=>E.name===m.name);S!==-1&&(w[S]=b,l({...a,inputs:w}))},onDelete:()=>{var w;const b=(w=a.inputs)==null?void 0:w.filter(S=>S.name!==m.name);l({...a,inputs:b})}}),children:d.jsxs("p",{children:[m.name," - ",m.type,m.isArray?"(Array)":""]})},m.name))})]}),d.jsx(hh,{data:u,isOpen:u!==null,requestClose:()=>c(null),onSave:m=>{let b=[...a.options||[]];const w=b.findIndex(S=>S===u);w!==-1&&(b[w]=m,l({...a,options:b}))}})]}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i(),n()},disabled:(p==null?void 0:p.properties.length)===1,children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!o||!a)return n();r({key:o,typeData:a}),n()},children:"Update"})]})]})},vh=({children:e})=>d.jsx("div",{children:e}),Or=({children:e,id:t,title:n,isOpen:r,toggleState:i})=>d.jsxs(d.Fragment,{children:[d.jsx("h2",{children:d.jsxs("button",{type:"button",onClick:()=>i(!r),className:"".concat(r&&"bg-brand-100 dark:bg-neutral-800 text-brand-600 dark:text-white"," flex items-center justify-between w-full p-5 font-medium rtl:text-right text-neutral-500 border border-neutral-200 dark:border-neutral-700 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 gap-3"),children:[d.jsx("span",{children:n}),d.jsx("svg",{"data-accordion-icon":!0,className:"".concat(r?"":"rotate-180"," w-3 h-3 shrink-0"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),d.jsx("div",{className:"".concat(r?"flex":"hidden"," w-full"),children:d.jsx("div",{className:"p-5 w-full border border-t-0 border-neutral-200 dark:border-neutral-700",children:e})})]}),dae=({editsId:e,versionedResource:t})=>{const[n,r]=j.useState(null),[i,o]=j.useState(null),[s,a]=j.useState(-1);return d.jsxs(d.Fragment,{children:[d.jsx(cae,{data:n,isOpen:n!==null,requestClose:()=>r(null),onSave:l=>gn(e,aae(t.data,(n==null?void 0:n.typeName)||"",(n==null?void 0:n.key)||"",l)),onDelete:()=>gn(e,iae(t.data,(n==null?void 0:n.typeName)||"",(n==null?void 0:n.key)||""))}),d.jsx(hh,{data:i,isOpen:i!==null,requestClose:()=>o(null),onSave:l=>gn(e,oae(t.data,i||"",l))}),d.jsx(vh,{children:t.data.types.map((l,u)=>d.jsxs(Or,{id:l.name,title:l.name,isOpen:s===u,toggleState:c=>a(c?u:-1),children:[d.jsxs("div",{children:[d.jsx(kt,{color:"light",onClick:()=>o(l.name),children:"Edit Name"}),d.jsx(kt,{color:"light",onClick:async()=>{let c={key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}};await gn(e,tae(t.data,l.name,c)),r({...c,typeName:l.name})},children:"Add Property"}),d.jsx(kt,{color:"danger",onClick:()=>gn(e,rae(t.data,l.name)),children:"Delete Type"})]}),d.jsx("div",{className:"flex flex-col gap-1 mt-3",children:l.properties.map(c=>{var f;return d.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>r({...c,typeName:l.name}),children:d.jsxs("p",{children:[c.key," - ",c.typeData.type," ",c.typeData.isArray?"(Array)":""," ",(f=c.typeData.options)==null?void 0:f.join(",")]})},c.key)})})]},l.name))}),d.jsx(Fa,{onClick:async()=>{await gn(e,eae(t.data,"New Type")),o("New Type")}})]})};function Jy(e){const{query:t}=Bs();return G4(t,e)}function G4(e,t){const n=e.node(t).get();if(!n.data.parent)return[];const r=e.node(n.data.parent).get();return[...r.data.props.local||[],...G4(e,r.id)]}function fae(){const{id:e,actions:{setProp:t},showPlaceholder:n,isVisible:r,dynamicVisibility:i,visibilityBlueprint:o,isList:s,dataName:a,blueprint:l,isInteractive:u,onPress:c,display:f,position:h,top:p,right:v,bottom:y,left:x,flexDirection:m,alignItems:b,justifyContent:w,gap:S,rows:E,columns:A,marginTop:T,marginRight:P,marginBottom:V,marginLeft:M,paddingTop:H,paddingRight:ee,paddingBottom:W,paddingLeft:L,height:q,width:Y,maxHeight:re,maxWidth:D,minHeight:z,minWidth:O,background:K,border:se,hover:ce}=ei(F=>({showPlaceholder:F.data.props.showPlaceholder,isVisible:F.data.props.isVisible,dynamicVisibility:F.data.props.dynamicVisibility,visibilityBlueprint:F.data.props.visibilityBlueprint,isList:F.data.props.isList,dataName:F.data.props.dataName,blueprint:F.data.props.blueprint,isInteractive:F.data.props.isInteractive,onPress:F.data.props.onPress,display:F.data.props.display,position:F.data.props.position,top:F.data.props.top,right:F.data.props.right,bottom:F.data.props.bottom,left:F.data.props.left,flexDirection:F.data.props.flexDirection,alignItems:F.data.props.alignItems,justifyContent:F.data.props.justifyContent,gap:F.data.props.gap,rows:F.data.props.rows,columns:F.data.props.columns,marginTop:F.data.props.marginTop,marginRight:F.data.props.marginRight,marginBottom:F.data.props.marginBottom,marginLeft:F.data.props.marginLeft,paddingTop:F.data.props.paddingTop,paddingRight:F.data.props.paddingRight,paddingBottom:F.data.props.paddingBottom,paddingLeft:F.data.props.paddingLeft,height:F.data.props.height,width:F.data.props.width,maxHeight:F.data.props.maxHeight,maxWidth:F.data.props.maxWidth,minHeight:F.data.props.minHeight,minWidth:F.data.props.minWidth,background:F.data.props.background,border:F.data.props.border,hover:F.data.props.hover})),[Ce,Ie]=j.useState(-1),Re=Jy(e);return j.useEffect(()=>{t(F=>(F.blueprint={edges:F.blueprint.edges,nodes:po(F.blueprint.nodes,Re)},F.visibilityBlueprint={edges:F.visibilityBlueprint.edges,nodes:po(F.visibilityBlueprint.nodes,Re)},F.onPress={edges:F.onPress.edges,nodes:po(F.onPress.nodes,Re)},F))},[Re]),d.jsxs(vh,{children:[d.jsx(Gn,{id:"show-placeholder",label:"Visible?",checked:n,onChange:F=>t(Z=>Z.showPlaceholder=F)}),d.jsxs(Or,{id:"visibility",title:"Visibility",isOpen:Ce===0,toggleState:F=>Ie(F?0:-1),children:[d.jsx(Gn,{id:"dynamic-visiblity",label:"Dynamic Visibility?",checked:i,onChange:F=>t(Z=>Z.dynamicVisibility=F)}),i?d.jsx("p",{onClick:()=>ln({type:"blueprint",title:"",data:o,onSave:F=>{t(Z=>Z.visibilityBlueprint=F)}}),children:"Visibility Blueprint"}):d.jsx(Gn,{id:"is-visible",label:"Visible?",checked:r,onChange:F=>t(Z=>Z.isVisible=F)})]}),d.jsxs(Or,{id:"list",title:"List",isOpen:Ce===1,toggleState:F=>Ie(F?1:-1),children:[d.jsx(Gn,{id:"is-list",label:"Is Dynamic List",checked:s,onChange:F=>{t(Z=>(Z.isList=F,Z.local=F?[{name:a,type:Kg(l),isArray:!1}]:[],Z))}}),d.jsx(Kt,{id:"variable-name",label:"Variable Name",isValid:!0,errorMessage:"",value:a,onChange:F=>{t(Z=>{Z.dataName=F;const ie=Z.local.findIndex(De=>De.name===a);if(ie!==-1)return Z.local[ie].name=F,Z})}}),d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"",data:l,onSave:F=>{t(Z=>{Z.blueprint=F;const ie=Z.local.findIndex(De=>De.name===a);if(ie!==-1)return Z.local[ie].type=Kg(F),Z})}}),children:"List Data Blueprint"})]}),d.jsxs(Or,{id:"input",title:"Input",isOpen:Ce===2,toggleState:F=>Ie(F?2:-1),children:[d.jsx(Gn,{id:"is-interactive",label:"Is Interactive?",checked:u,onChange:F=>t(Z=>Z.isInteractive=F)}),d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"",data:c,onSave:F=>{t(Z=>Z.onPress=F)}}),children:"On Press Blueprint"})]}),d.jsxs(Or,{id:"layout",title:"Layout",isOpen:Ce===3,toggleState:F=>Ie(F?3:-1),children:[d.jsxs(dt,{id:"display",label:"Display",value:f,onChange:F=>t(Z=>Z.display=F),children:[d.jsx("option",{value:"block",children:"Block"}),d.jsx("option",{value:"flex",children:"Flex"}),d.jsx("option",{value:"grid",children:"Grid"})]}),d.jsxs(dt,{id:"position",label:"Position",value:h,onChange:F=>t(Z=>Z.position=F),children:[d.jsx("option",{value:"static",children:"Static"}),d.jsx("option",{value:"relative",children:"Relative"}),d.jsx("option",{value:"absolute",children:"Absolute"}),d.jsx("option",{value:"fixed",children:"Fixed"}),d.jsx("option",{value:"sticky",children:"Sticky"})]}),h!=="static"?d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"top",label:"Top",isValid:!0,errorMessage:"",value:p,onChange:F=>t(Z=>Z.top=F)}),d.jsx(Kt,{id:"right",label:"Right",isValid:!0,errorMessage:"",value:v,onChange:F=>t(Z=>Z.right=F)}),d.jsx(Kt,{id:"bottom",label:"Bottom",isValid:!0,errorMessage:"",value:y,onChange:F=>t(Z=>Z.bottom=F)}),d.jsx(Kt,{id:"left",label:"Left",isValid:!0,errorMessage:"",value:x,onChange:F=>t(Z=>Z.left=F)})]}):null,f==="grid"?d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"columns",label:"Columns",isValid:!0,errorMessage:"",value:A,onChange:F=>t(Z=>Z.columns=F)}),d.jsx(Kt,{id:"rows",label:"Rows",isValid:!0,errorMessage:"",value:E,onChange:F=>t(Z=>Z.rows=F)})]}):null,["flex","grid"].includes(f)?d.jsxs(d.Fragment,{children:[d.jsxs(dt,{id:"flex-direction",label:"Flex Direction",value:m,onChange:F=>t(Z=>Z.flexDirection=F),children:[d.jsx("option",{value:"row",children:"Row"}),d.jsx("option",{value:"column",children:"Column"}),d.jsx("option",{value:"row-reverse",children:"Reverse Row"}),d.jsx("option",{value:"column-reverse",children:"Reverse Column"})]}),d.jsxs(dt,{id:"align-items",label:"Align Items",value:b,onChange:F=>t(Z=>Z.alignItems=F),children:[d.jsx("option",{value:"initial",children:"Initial"}),d.jsx("option",{value:"inherit",children:"Inherit"}),d.jsx("option",{value:"normal",children:"Normal"}),d.jsx("option",{value:"stretch",children:"Stretch"}),d.jsx("option",{value:"center",children:"Center"}),d.jsx("option",{value:"flex-start",children:"Flex-Start"}),d.jsx("option",{value:"flex-end",children:"Flex-End"}),d.jsx("option",{value:"start",children:"Start"}),d.jsx("option",{value:"end",children:"End"}),d.jsx("option",{value:"baseline",children:"Baseline"})]}),d.jsxs(dt,{id:"justify-content",label:"Justify Content",value:w,onChange:F=>t(Z=>Z.justifyContent=F),children:[d.jsx("option",{value:"initial",children:"Initial"}),d.jsx("option",{value:"inherit",children:"Inherit"}),d.jsx("option",{value:"stretch",children:"Stretch"}),d.jsx("option",{value:"center",children:"Center"}),d.jsx("option",{value:"flex-start",children:"Flex-Start"}),d.jsx("option",{value:"flex-end",children:"Flex-End"}),d.jsx("option",{value:"space-between",children:"Space-Between"}),d.jsx("option",{value:"space-around",children:"Space-Around"}),d.jsx("option",{value:"space-evenly",children:"Space-Evenly"})]}),d.jsx(dt,{id:"container-gap",label:"Gap",value:S,onChange:F=>t(Z=>Z.gap=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))})]}):null]}),d.jsxs(Or,{id:"spacing",title:"Spacing",isOpen:Ce===4,toggleState:F=>Ie(F?4:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:T,onChange:F=>t(Z=>Z.marginTop=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:P,onChange:F=>t(Z=>Z.marginRight=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:V,onChange:F=>t(Z=>Z.marginBottom=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:M,onChange:F=>t(Z=>Z.marginTop=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"padding-top",label:"Padding Top",value:H,onChange:F=>t(Z=>Z.paddingTop=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"padding-right",label:"Padding Right",value:ee,onChange:F=>t(Z=>Z.paddingRight=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"padding-bottom",label:"Padding Bottom",value:W,onChange:F=>t(Z=>Z.paddingBottom=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"padding-left",label:"Padding Left",value:L,onChange:F=>t(Z=>Z.paddingLeft=F),children:Object.keys(Ve.spacing).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"width",label:"Width",value:Y,onChange:F=>t(Z=>Z.width=F),children:Object.keys(Ve.size).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"height",label:"Height",value:q,onChange:F=>t(Z=>Z.height=F),children:Object.keys(Ve.size).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"max-width",label:"Max Width",value:D,onChange:F=>t(Z=>Z.maxWidth=F),children:Object.keys(Ve.size).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"max-height",label:"Max Height",value:re,onChange:F=>t(Z=>Z.maxHeight=F),children:Object.keys(Ve.size).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"min-width",label:"Min Width",value:O,onChange:F=>t(Z=>Z.minWidth=F),children:Object.keys(Ve.size).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"min-height",label:"Min Height",value:z,onChange:F=>t(Z=>Z.minHeight=F),children:Object.keys(Ve.size).map(F=>d.jsx("option",{value:F,children:F},F))})]}),d.jsxs(Or,{id:"styling",title:"Styling",isOpen:Ce===5,toggleState:F=>Ie(F?5:-1),children:[d.jsx(dt,{id:"container-background",label:"Background",value:K,onChange:F=>t(Z=>Z.background=F),children:Object.keys(xi).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"container-border",label:"Border",value:se,onChange:F=>t(Z=>Z.border=F),children:Object.keys(xi).map(F=>d.jsx("option",{value:F,children:F},F))}),d.jsx(dt,{id:"container-hover",label:"Hover",value:ce,onChange:F=>t(Z=>Z.hover=F),children:Object.keys(xi).map(F=>d.jsx("option",{value:F,children:F},F))})]})]})}function zl(e){const{connectors:{connect:t,drag:n}}=ei(),r=j.useMemo(()=>{var s;return xi[e.background]?(s=xi[e.background])==null?void 0:s.background:""},[e.background]),i=j.useMemo(()=>{var s;return xi[e.border]?(s=xi[e.border])==null?void 0:s.border:""},[e.border]),o=j.useMemo(()=>{var s;return e.isInteractive?(s=xi[e.hover])==null?void 0:s.hover:""},[e.isInteractive]);return d.jsx("div",{ref:s=>t(n(s)),style:{display:e.display,position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ve.spacing[e.gap],marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft],height:Ve.size[e.height],width:Ve.size[e.width],maxHeight:Ve.size[e.maxHeight],maxWidth:Ve.size[e.maxWidth],minHeight:Ve.size[e.minHeight],minWidth:Ve.size[e.minWidth]},className:"".concat(r," ").concat(i," ").concat(o),children:e.children?e.children:e.showPlaceholder?d.jsx("div",{children:"Add An Item!"}):null})}const hae={defaultProps:{showPlaceholder:!0,dynamicVisibility:!1,visibilityBlueprint:{nodes:Mr([],{name:"isVisible",type:"boolean",isArray:!1}),edges:[]},isVisible:!0,isList:!1,dataName:"listItem",blueprint:{nodes:Mr([],{name:"listItem",type:"any",isArray:!0}),edges:[]},local:[],isInteractive:!1,onPress:{nodes:Mr([]),edges:[]},display:"flex",position:"static",top:"0px",right:"0px",bottom:"0px",left:"0px",flexDirection:"column",alignItems:"normal",justifyContent:"initial",gap:"0",rows:0,columns:0,marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"4",paddingRight:"4",paddingBottom:"4",paddingLeft:"4",height:"auto",width:"auto",maxHeight:"none",maxWidth:"none",minHeight:"none",minWidth:"none",background:"no style",border:"no style",hover:"no style"},rules:{canMoveIn:(e,t,n)=>t.data.props.isList?t.data.nodes.length===0:!0},related:{settings:fae}};zl.craft=hae;function pae(){const{id:e,actions:{setProp:t},useBlueprintValue:n,blueprint:r,text:i,color:o,fontSize:s,fontWeight:a,textAlign:l,textDecoration:u,textTransform:c,marginTop:f,marginRight:h,marginBottom:p,marginLeft:v,paddingTop:y,paddingRight:x,paddingBottom:m,paddingLeft:b}=ei(A=>({useBlueprintValue:A.data.props.useBlueprintValue||!1,blueprint:A.data.props.blueprint,text:A.data.props.text||"",color:A.data.props.color,fontFamily:A.data.props.fontFamily,fontSize:A.data.props.fontSize,fontWeight:A.data.props.fontWeight,fontStyle:A.data.props.fontStyle,letterSpacing:A.data.props.letterSpacing,lineHeight:A.data.props.lineHeight,textAlign:A.data.props.textAlign||"left",textDecoration:A.data.props.textDecoration||"none",textTransform:A.data.props.textTransform||"none",marginTop:A.data.props.marginTop||"0px",marginRight:A.data.props.marginRight||"0px",marginBottom:A.data.props.marginBottom||"0px",marginLeft:A.data.props.marginLeft||"0px",paddingTop:A.data.props.paddingTop||"0px",paddingRight:A.data.props.paddingRight||"0px",paddingBottom:A.data.props.paddingBottom||"0px",paddingLeft:A.data.props.paddingLeft||"0px"})),[w,S]=j.useState(-1),E=Jy(e);return j.useEffect(()=>{t(A=>(A.blueprint={edges:A.blueprint.edges,nodes:po(A.blueprint.nodes,E)},A))},[]),d.jsxs(vh,{children:[d.jsxs(Or,{id:"content",title:"Content",isOpen:w===0,toggleState:A=>S(A?0:-1),children:[d.jsx(Gn,{id:"use-blueprint-value",label:"Use Blueprint Value?",checked:n,onChange:A=>t(T=>T.useBlueprintValue=A)}),n?d.jsx(kt,{color:"primary",onClick:()=>ln({type:"blueprint",title:"Text Value",data:r,onSave:A=>t(T=>{T.blueprint=A})}),children:"Edit Blueprint Value"}):d.jsx(Kt,{id:"text",label:"Text",placeholder:"lorem ipsum",value:i,onChange:A=>t(T=>T.text=A),isValid:!0,errorMessage:""})]}),d.jsxs(Or,{id:"content-styling",title:"Content Styling",isOpen:w===1,toggleState:A=>S(A?1:-1),children:[d.jsx(dt,{id:"color",label:"Color",value:o,onChange:A=>t(T=>T.color=A),children:Object.keys(_i.colors).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"font-size",label:"Font Size",value:s,onChange:A=>t(T=>T.fontSize=A),children:Object.keys(_i.sizes).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"font-weight",label:"Font Weight",value:a,onChange:A=>t(T=>T.fontWeight=A),children:Object.keys(_i.weight).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsxs(dt,{id:"text-align",label:"Text Align",value:l,onChange:A=>t(T=>T.textAlign=A),children:[d.jsx("option",{value:"left",children:"Left"}),d.jsx("option",{value:"center",children:"Center"}),d.jsx("option",{value:"right",children:"Right"})]}),d.jsxs(dt,{id:"text-decoration",label:"Text Decoration",value:u,onChange:A=>t(T=>T.textDecoration=A),children:[d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"underline",children:"Underline"}),d.jsx("option",{value:"line-through",children:"Line-Through"})]}),d.jsxs(dt,{id:"text-transform",label:"Text Transform",value:c,onChange:A=>t(T=>T.textTransform=A),children:[d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"uppercase",children:"Uppercase"}),d.jsx("option",{value:"lowercase",children:"Lowercase"})]})]}),d.jsxs(Or,{id:"spacing",title:"Spacing",isOpen:w===2,toggleState:A=>S(A?2:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:f,onChange:A=>t(T=>T.marginTop=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:h,onChange:A=>t(T=>T.marginRight=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:p,onChange:A=>t(T=>T.marginBottom=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:v,onChange:A=>t(T=>T.marginTop=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-top",label:"Padding Top",value:y,onChange:A=>t(T=>T.paddingTop=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-right",label:"Padding Right",value:x,onChange:A=>t(T=>T.paddingRight=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-bottom",label:"Padding Bottom",value:m,onChange:A=>t(T=>T.paddingBottom=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-left",label:"Padding Left",value:b,onChange:A=>t(T=>T.paddingLeft=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))})]})]})}function Hl(e){const{connectors:{connect:t,drag:n}}=ei(),r=j.useMemo(()=>{var o;return _i.colors[e.color]?(o=_i.colors[e.color])==null?void 0:o.text:""},[e.color]),i=j.useMemo(()=>_i.weight[e.fontWeight]?_i.weight[e.fontWeight]:"",[e.fontWeight]);return d.jsx("p",{ref:o=>t(n(o)),style:{textAlign:e.textAlign,..._i.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:e.text})}const gae={defaultProps:{useBlueprintValue:!1,blueprint:{nodes:Mr([],{name:"output",type:"string",isArray:!1}),edges:[]},text:"hello world",color:"base",fontSize:"base",textAlign:"left",textDecoration:"none",textTransform:"none",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"0",paddingRight:"0",paddingBottom:"0",paddingLeft:"0"},rules:{},related:{settings:pae}};Hl.craft=gae;const mae="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",yae=({versionedResource:e})=>{const t=un.useValue(),{actions:n}=Bs();return j.useEffect(()=>{var i;let r=(i=e.data.pages.find(o=>o.name===t.characterPage))==null?void 0:i.lexical;r||(r=mae),n.deserialize(Oa.decompress(Oa.decodeBase64(r)))},[t.characterPage]),d.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:d.jsx(dO,{children:d.jsx(Gl,{is:zl,canvas:!0,children:d.jsx(Hl,{text:"Testing the world"})})})})},vae=({})=>d.jsx(d.Fragment,{children:d.jsx("p",{children:"TODO"})});function Yf({placeholder:e}){const{connectors:{connect:t,drag:n}}=ei();return d.jsx("div",{ref:r=>t(n(r))})}function wae(){const{actions:{setProp:e},placeholder:t,blueprint:n}=ei(r=>({placeholder:r.data.props.placeholder,blueprint:r.data.props.blueprint}));return d.jsx(d.Fragment,{})}Yf.craft={rules:{},related:{settings:wae}};function Y4({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const o=un.useValue(),s=Wn(o.versionId),[a,l]=j.useState(""),[u,c]=j.useState(""),[f,h]=j.useState(!1);return j.useEffect(()=>{e&&(l(e.name),c(e.type.type),h(e.type.isArray||!1))},[e]),s?d.jsxs(rr,{isOpen:t,onClose:n,children:[d.jsx(ir,{title:"Add Page State",onClose:n}),d.jsxs(or,{children:[d.jsx(Kt,{id:"var-name",label:"Variable Name",value:a,onChange:l,isValid:!0,errorMessage:""}),d.jsxs(dt,{id:"var-type",label:"Type",value:u,onChange:c,children:[d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),s.data.types.map(p=>d.jsx("option",{value:p.name,children:p.name},p.name))]}),d.jsx(Gn,{id:"is-array",label:"Is Array?",checked:f,onChange:h})]}),d.jsxs(dr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!a||!u||!e)return n();r({name:a,type:{type:u,isArray:f,useTextArea:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}}),n()},children:"Confirm"})]})]}):d.jsx(d.Fragment,{})}const X4=()=>{const{nodes:e,actions:t,isActive:n}=Bs(f=>({nodes:f.nodes,isActive:f.events.selected})),[r,i]=It.useState({}),[o,s]=It.useState(""),{connectors:{select:a}}=Bs(),l=f=>{i(h=>({...h,[f]:!h[f]}))},u=f=>{var x;const h=e[f];if(!h)return null;const p=r[f],v=h.data.nodes&&h.data.nodes.length>0,y=n.has(f);return d.jsxs("div",{className:"select-none",children:[d.jsxs("div",{ref:m=>a(m,f),className:"\n            flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors duration-200 hover:bg-secondary/80\n            ".concat(y?"bg-blue-500/20 text-blue-700 dark:text-blue-300":"","\n            ").concat(o===f&&!y?"bg-secondary/50":"","\n          "),onMouseEnter:()=>s(f),onMouseLeave:()=>s(""),children:[v?d.jsx("button",{onClick:m=>{m.stopPropagation(),l(f)},className:"w-4 h-4 flex items-center justify-center hover:bg-secondary/80 rounded",children:p?d.jsx(C3,{className:"w-4 h-4"}):d.jsx(kG,{className:"w-4 h-4"})}):d.jsx("div",{className:"w-4"}),d.jsx("button",{onClick:m=>{m.stopPropagation(),t.setHidden(f,!h.data.hidden)},className:"text-foreground/80 hover:text-foreground",children:h.data.hidden?d.jsx(CG,{className:"w-4 h-4"}):d.jsx(jG,{className:"w-4 h-4"})}),d.jsx("span",{className:"text-sm font-medium",children:((x=h.data.custom)==null?void 0:x.displayName)||h.data.displayName||h.data.name})]}),v&&p&&d.jsx("div",{className:"ml-1.5 border-l border-border/50 pl-2 mt-1",children:h.data.nodes.map(m=>u(m))})]},f)},c=Object.keys(e).filter(f=>!e[f].data.parent);return d.jsxs("div",{className:"p-4 space-y-2",children:[d.jsxs("div",{className:"text-sm font-medium flex items-center gap-2 px-2",children:[d.jsx(AG,{className:"w-4 h-4"}),"Layers"]}),d.jsx("div",{className:"space-y-1",children:c.map(f=>u(f))})]})};function bae(){const e=un.useValue(),t=Wn(e.versionId),n=j.useMemo(()=>t==null?void 0:t.data.pages.find(h=>h.name===e.characterPage),[t,e.characterPage]),[r,i]=j.useState("components"),[o,s]=j.useState(null),[a,l]=j.useState(null),{connectors:u}=Bs(),{selected:c,actions:f}=Bs((h,p)=>{const[v]=h.events.selected;let y;return v&&(y={id:v,name:h.nodes[v].data.name,settings:h.nodes[v].related&&h.nodes[v].related.settings,isDeletable:p.node(v).isDeletable()}),{selected:y}});return t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.jsx(dt,{id:"page",label:"Page",value:e.characterPage,onChange:Jk,children:t.data.pages.map(h=>d.jsx("option",{value:h.name,children:h.name},h.name))}),d.jsxs("button",{type:"button",onClick:()=>gn(e.versionId,H4(t.data,"character")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),d.jsxs(dt,{id:"designer-tab",label:"",value:r,onChange:i,children:[d.jsx("option",{value:"components",children:"Components"}),d.jsx("option",{value:"details",children:"Details"}),d.jsx("option",{value:"state",children:"Page Info"})]}),d.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?d.jsxs(d.Fragment,{children:[d.jsx("h4",{className:"",children:"Components"}),d.jsxs("div",{className:"flex flex-col my-4",children:[d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Gl,{is:zl,canvas:!0})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Hl,{text:"Hi World"})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),d.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Yf,{placeholder:"Search...",blueprint:{nodes:Mr([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Hf,{})),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Uf,{isList:!1,buttons:[],blueprint:{nodes:Mr(),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&c?d.jsxs(d.Fragment,{children:[c.settings&&It.createElement(c.settings),c.isDeletable?d.jsx(kt,{className:"mt-4",color:"danger",onClick:()=>{f.delete(c.id)},children:"Delete"}):null]}):r==="state"?d.jsxs(d.Fragment,{children:[d.jsx(hh,{data:a,isOpen:a!==null,requestClose:()=>l(null),onSave:h=>{gn(t.local_id,V4(t.data,"character",a,h)),Jk(h)}}),d.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[d.jsx(kt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{gn(t.local_id,W4(t.data,"character",e.characterPage))},children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>l(e.characterPage),children:"Rename"})]}),d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"Page Blueprint",data:n==null?void 0:n.blueprint,onSave:h=>gn(t.local_id,q4(t.data,"character",e.characterPage,h))}),children:"Edit Page Blueprint"}),d.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[d.jsx("div",{style:{display:"flex",alignItems:"center"},children:d.jsx("h5",{children:"Page State"})}),d.jsxs("button",{onClick:()=>gn(t.local_id,U4(t.data,"character",e.characterPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],outputType:"string",isOutputAnArray:!1,inputs:[]})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),d.jsx(fh,{}),d.jsx("div",{children:n==null?void 0:n.state.map(h=>d.jsx("div",{onClick:()=>s(h),children:d.jsxs("p",{children:[h.name," | ",h.type.type,h.type.isArray?"(Array)":""]})},h.name))}),d.jsx(Y4,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:h=>gn(t.local_id,K4(t.data,"character",e.characterPage,o.name,{...h,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?d.jsx(X4,{}):null]}):d.jsx(d.Fragment,{})}function xae(){const{id:e,actions:{setProp:t},label:n,dynamicOptions:r,optionsBlueprint:i,onChange:o,marginTop:s,marginRight:a,marginBottom:l,marginLeft:u,width:c,maxWidth:f,minWidth:h}=ei(x=>({label:x.data.props.label,dynamicOptions:x.data.props.dynamicOptions,optionsBlueprint:x.data.props.optionsBlueprint,options:x.data.props.options,onChange:x.data.props.onChange,marginTop:x.data.props.marginTop,marginRight:x.data.props.marginRight,marginBottom:x.data.props.marginBottom,marginLeft:x.data.props.marginLeft,width:x.data.props.width,maxWidth:x.data.props.maxWidth,minWidth:x.data.props.minWidth})),[p,v]=j.useState(-1),y=Jy(e);return j.useEffect(()=>{t(x=>(x.optionsBlueprint={edges:x.optionsBlueprint.edges,nodes:po(x.optionsBlueprint.nodes,y)},x.onChange={edges:x.onChange.edges,nodes:po(x.onChange.nodes,y)},x))},[y]),d.jsxs(vh,{children:[d.jsx(Or,{id:"label",title:"Label",isOpen:p===0,toggleState:x=>v(x?0:-1),children:d.jsx(Kt,{id:"label",label:"Update Label",value:n,onChange:x=>t(m=>m.label=x),isValid:!0,errorMessage:""})}),d.jsxs(Or,{id:"options",title:"Options",isOpen:p===1,toggleState:x=>v(x?1:-1),children:[d.jsx(Gn,{id:"dynamic-options",label:"Dynamic Options?",checked:r,onChange:x=>t(m=>m.dynamicOptions=x)}),r?d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"",data:i,onSave:x=>{t(m=>(m.optionsBlueprint=x,m.onChange={edges:m.onChange.edges,nodes:po(m.onChange.nodes,[...y,{name:"selectedValue",type:Kg(x),isArray:!1}])},m))}}),children:"Options Blueprint"}):d.jsx("p",{children:"TODO: handle options."}),d.jsx("div",{className:"h-2"}),d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"",data:o,onSave:x=>{t(m=>m.onChange=x)}}),children:"onChange Blueprint"})]}),d.jsxs(Or,{id:"spacing",title:"Spacing",isOpen:p===2,toggleState:x=>v(x?2:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:s,onChange:x=>t(m=>m.marginTop=x),children:Object.keys(Ve.spacing).map(x=>d.jsx("option",{value:x,children:x},x))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:a,onChange:x=>t(m=>m.marginRight=x),children:Object.keys(Ve.spacing).map(x=>d.jsx("option",{value:x,children:x},x))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:l,onChange:x=>t(m=>m.marginBottom=x),children:Object.keys(Ve.spacing).map(x=>d.jsx("option",{value:x,children:x},x))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:u,onChange:x=>t(m=>m.marginTop=x),children:Object.keys(Ve.spacing).map(x=>d.jsx("option",{value:x,children:x},x))}),d.jsx(dt,{id:"width",label:"Width",value:c,onChange:x=>t(m=>m.width=x),children:Object.keys(Ve.size).map(x=>d.jsx("option",{value:x,children:x},x))}),d.jsx(dt,{id:"max-width",label:"Max Width",value:f,onChange:x=>t(m=>m.maxWidth=x),children:Object.keys(Ve.size).map(x=>d.jsx("option",{value:x,children:x},x))}),d.jsx(dt,{id:"min-width",label:"Min Width",value:h,onChange:x=>t(m=>m.minWidth=x),children:Object.keys(Ve.size).map(x=>d.jsx("option",{value:x,children:x},x))})]})]})}function jm(e){var i;const{connectors:{connect:t,drag:n}}=ei(),r=j.useMemo(()=>[],[]);return d.jsx(dt,{ref:o=>t(n(o)),style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,value:(i=r[0])==null?void 0:i.name,onChange:()=>{},children:r.map(o=>d.jsx("option",{children:o.name},o.name))})}const _ae={defaultProps:{label:"Select",dynamicOptions:!1,optionsBlueprint:{nodes:Mr([],{name:"options",type:"any",isArray:!0}),edges:[]},options:[],onChange:{nodes:Mr([{name:"selectedValue",type:"object",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:xae}};jm.craft=_ae;function Sae(){const{id:e,actions:{setProp:t},label:n,type:r,minNumber:i,maxNumber:o,getValue:s,onChange:a,marginTop:l,marginRight:u,marginBottom:c,marginLeft:f,width:h,maxWidth:p,minWidth:v}=ei(b=>({label:b.data.props.label,type:b.data.props.type,minNumber:b.data.props.minNumber,maxNumber:b.data.props.maxNumber,getValue:b.data.props.getValue,onChange:b.data.props.onChange,marginTop:b.data.props.marginTop,marginRight:b.data.props.marginRight,marginBottom:b.data.props.marginBottom,marginLeft:b.data.props.marginLeft,width:b.data.props.width,maxWidth:b.data.props.maxWidth,minWidth:b.data.props.minWidth})),[y,x]=j.useState(-1),m=Jy(e);return j.useEffect(()=>{t(b=>{b.getValue={edges:b.getValue.edges,nodes:po(b.getValue.nodes,m,{name:"value",type:r==="text"?"string":"number",isArray:!1})},b.onChange={edges:b.onChange.edges,nodes:po(b.onChange.nodes,[...m,{name:"field value",type:r==="text"?"string":"number",isArray:!1}])}})},[m]),d.jsxs(vh,{children:[d.jsx(Or,{id:"label",title:"Label",isOpen:y===0,toggleState:b=>x(b?0:-1),children:d.jsx(Kt,{id:"label",label:"Update Label",value:n,onChange:b=>t(w=>w.label=b),isValid:!0,errorMessage:""})}),d.jsxs(Or,{id:"data",title:"Data",isOpen:y===1,toggleState:b=>x(b?1:-1),children:[d.jsx(dt,{id:"input-type",label:"Type",value:r,onChange:b=>{t(w=>(w.type=b,w.getValue.nodes=po(w.getValue.nodes,m,{name:"value",type:b==="text"?"string":"number",isArray:!1}),w.onChange.nodes=po(w.onChange.nodes,[...m,{name:"field value",type:b==="text"?"string":"number",isArray:!1}]),w))},children:["text","number"].map(b=>d.jsx("option",{value:b,children:b},b))}),r==="number"&&d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"min-number",label:"Min Number",type:"number",value:i,onChange:b=>t(w=>w.minNumber=b),isValid:!0,errorMessage:""}),d.jsx(Kt,{id:"max-number",label:"Max Number",type:"number",value:o,onChange:b=>t(w=>w.maxNumber=b),isValid:!0,errorMessage:""})]}),d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"",data:s,onSave:b=>{t(w=>w.getValue=b)}}),children:"Get Value Blueprint"}),d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"",data:a,onSave:b=>{t(w=>w.onChange=b)}}),children:"onChange Blueprint"})]}),d.jsxs(Or,{id:"spacing",title:"Spacing",isOpen:y===2,toggleState:b=>x(b?2:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:l,onChange:b=>t(w=>w.marginTop=b),children:Object.keys(Ve.spacing).map(b=>d.jsx("option",{value:b,children:b},b))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:u,onChange:b=>t(w=>w.marginRight=b),children:Object.keys(Ve.spacing).map(b=>d.jsx("option",{value:b,children:b},b))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:c,onChange:b=>t(w=>w.marginBottom=b),children:Object.keys(Ve.spacing).map(b=>d.jsx("option",{value:b,children:b},b))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:f,onChange:b=>t(w=>w.marginTop=b),children:Object.keys(Ve.spacing).map(b=>d.jsx("option",{value:b,children:b},b))}),d.jsx(dt,{id:"width",label:"Width",value:h,onChange:b=>t(w=>w.width=b),children:Object.keys(Ve.size).map(b=>d.jsx("option",{value:b,children:b},b))}),d.jsx(dt,{id:"max-width",label:"Max Width",value:p,onChange:b=>t(w=>w.maxWidth=b),children:Object.keys(Ve.size).map(b=>d.jsx("option",{value:b,children:b},b))}),d.jsx(dt,{id:"min-width",label:"Min Width",value:v,onChange:b=>t(w=>w.minWidth=b),children:Object.keys(Ve.size).map(b=>d.jsx("option",{value:b,children:b},b))})]})]})}function Am(e){const{connectors:{connect:t,drag:n}}=ei();return d.jsx(Kt,{ref:r=>t(n(r)),style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,isValid:!0,errorMessage:"",id:e.label,label:e.label,value:"",onChange:()=>{}})}const Eae={defaultProps:{label:"Select",type:"text",minNumber:0,maxNumber:100,getValue:{nodes:Mr([],{name:"value",type:"string",isArray:!1}),edges:[]},onChange:{nodes:Mr([{name:"field value",type:"string",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:Sae}};Am.craft=Eae;const kae=()=>{const e=un.useValue(),t=Wn(e.versionId),n=j.useMemo(()=>t==null?void 0:t.data.creator.find(h=>h.name===e.creatorPage),[t,e.creatorPage]),[r,i]=j.useState("components"),[o,s]=j.useState(null),[a,l]=j.useState(null),{connectors:u}=Bs(),{selected:c,actions:f}=Bs((h,p)=>{const[v]=h.events.selected;let y;return v&&(y={id:v,name:h.nodes[v].data.name,settings:h.nodes[v].related&&h.nodes[v].related.settings,isDeletable:p.node(v).isDeletable()}),{selected:y}});return t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.jsx(dt,{id:"page",label:"Page",value:e.creatorPage,onChange:Xk,children:t.data.creator.map(h=>d.jsx("option",{value:h.name,children:h.name},h.name))}),d.jsxs("button",{type:"button",onClick:()=>gn(t.local_id,H4(t.data,"builder")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),d.jsxs(dt,{id:"designer-tab",label:"",value:r,onChange:i,children:[d.jsx("option",{value:"components",children:"Components"}),d.jsx("option",{value:"details",children:"Details"}),d.jsx("option",{value:"state",children:"Page Info"})]}),d.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?d.jsxs(d.Fragment,{children:[d.jsx("h4",{className:"",children:"Components"}),d.jsxs("div",{className:"flex flex-col my-4",children:[d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Gl,{is:zl,canvas:!0})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Hl,{text:"Hi World"})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),d.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Yf,{placeholder:"Search...",blueprint:{nodes:Mr([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(jm,{})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Select"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Am,{})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text Input"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Hf,{})),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Uf,{isList:!1,buttons:[],blueprint:{nodes:Mr(),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&c?d.jsxs(d.Fragment,{children:[c.settings&&It.createElement(c.settings),c.isDeletable?d.jsx(kt,{className:"mt-4",color:"danger",onClick:()=>{f.delete(c.id)},children:"Delete"}):null]}):r==="state"?d.jsxs(d.Fragment,{children:[d.jsx(hh,{data:a,isOpen:a!==null,requestClose:()=>l(null),onSave:h=>{gn(t.local_id,V4(t.data,"builder",a,h)),Xk(h)}}),d.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[d.jsx(kt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{gn(t.local_id,W4(t.data,"builder",e.creatorPage))},children:"Delete"}),d.jsx(kt,{color:"light",onClick:()=>l(e.creatorPage),children:"Rename"})]}),d.jsx(kt,{color:"light",onClick:()=>ln({type:"blueprint",title:"Page Blueprint",data:n==null?void 0:n.blueprint,onSave:h=>gn(t.local_id,q4(t.data,"builder",e.creatorPage,h))}),children:"Edit Page Blueprint"}),d.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[d.jsx("div",{style:{display:"flex",alignItems:"center"},children:d.jsx("h5",{children:"Page State"})}),d.jsxs("button",{onClick:()=>gn(t.local_id,U4(t.data,"builder",e.creatorPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],inputs:[],outputType:"none",isOutputAnArray:!1})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),d.jsx(fh,{}),d.jsx("div",{className:"pt-2 flex flex-col gap-y-2",children:n==null?void 0:n.state.map(h=>d.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>s(h),children:d.jsxs("p",{children:[h.name," | ",h.type.type,h.type.isArray?"(Array)":""]})},h.name))}),d.jsx(Y4,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:h=>gn(t.local_id,K4(t.data,"builder",e.creatorPage,o.name,{...h,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?d.jsx(X4,{}):null]}):d.jsx(d.Fragment,{})};function J4(e){const t=Vs(()=>_t.versions.get(e||""),[e]);if(t)return{...t,data:t==null?void 0:t.data}}function Cae(){const e=un.useValue();return J4(e.versionId)?d.jsx("aside",{className:"border-l border-neutral-500 dark:border-neutral-700 fixed top-0 right-0 z-40 w-64 h-screen transition-transform translate-x-full sm:-translate-x-0","aria-label":"Editor Sidebar",children:d.jsxs("div",{className:"h-full flex flex-col px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-neutral-950",children:[d.jsx("div",{className:"py-4 mb-4 border-b border-neutral-200 dark:border-neutral-700",children:d.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"Details"})}),e.tab==="character"?d.jsx("p",{children:"Default Character data, used for types in GetCharacterData nodes and such."}):e.tab==="data"?d.jsx("p",{children:"Custom data for the system (Items, classes, etc.)"}):e.tab==="types"?d.jsx("p",{children:"The data types for everything in this system."}):e.tab==="editor"?d.jsx(bae,{}):e.tab==="creator"&&d.jsx(kae,{})]})}):d.jsx(d.Fragment,{})}const jae="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",Aae=({versionedResource:e})=>{const t=un.useValue(),{actions:n}=Bs();return j.useEffect(()=>{var i;let r=(i=e.data.creator.find(o=>o.name===t.creatorPage))==null?void 0:i.lexical;r||(r=jae),n.deserialize(Oa.decompress(Oa.decodeBase64(r)))},[t.creatorPage]),d.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:d.jsx(dO,{children:d.jsx(Gl,{is:zl,canvas:!0,children:d.jsx(Hl,{text:"Testing the world"})})})})};function Nae(e){return Vs(()=>_t.systems.get(e||""),[e])}const Rae=()=>{const{id:e}=pT();let t=vc();const n=j.useMemo(()=>e?"".concat(e,"|edits"):void 0,[e]),r=J4(e),i=Wn(n),o=Nae(i==null?void 0:i.reference_id),s=un.useValue();j.useEffect(()=>{!n||n===s.versionId||un.set(u=>({...u,versionId:n}))},[n,s]);const a=j.useMemo(()=>({Container:zl,Text:Hl,Select:jm,TextInput:Am,FAB:Uf,Searchbar:Yf,DesignerDivider:Hf}),[zl,Hl,jm,Am,Uf,Yf,Hf]),l=j.useCallback(u=>{i&&gn(i.local_id,LA(i.data,u.serialize()))},[i,gn,LA]);return n?i?o?d.jsx(gre,{resolver:a,onNodesChange:l,children:d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx(Ta,{title:o.name,options:[{onClick:()=>ln({type:"SaveNewVersion",title:"none",data:"none",onSave:async u=>{const c=await Cb(i);!c||!await cS("system",c.reference_id,c.local_id,!1)||r&&(await Cb(r,n),t("/library"))}}),Content:()=>d.jsx("p",{className:"block cursor-pointer py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 md:dark:text-blue-500",children:"Save Version"})}],hasSidebar:!0}),d.jsxs("div",{className:"p-4 sm:mr-64 relative flex flex-col flex-grow",children:[d.jsxs(dt,{id:"tab-selector",label:"",value:s.tab,onChange:Gz,children:[d.jsx("option",{value:"character",children:"Character"}),d.jsx("option",{value:"data",children:"Data"}),d.jsx("option",{value:"types",children:"Types"}),d.jsx("option",{value:"functions",children:"Functions"}),d.jsx("option",{value:"editor",children:"Editor"}),d.jsx("option",{value:"creator",children:"Creator"})]}),s.tab==="character"?d.jsx(lae,{editsId:n,versionedResource:i}):s.tab==="data"?d.jsx(uae,{editsId:n,versionedResource:i}):s.tab==="types"?d.jsx(dae,{editsId:n,versionedResource:i}):s.tab==="functions"?d.jsx(vae,{versionedResource:i}):s.tab==="editor"?d.jsx(yae,{versionedResource:i}):s.tab==="creator"&&d.jsx(Aae,{versionedResource:i})]}),d.jsx(Cae,{})]})}):d.jsx(d.Fragment,{children:"Loading System..."}):d.jsx(d.Fragment,{children:"Loading Edits..."}):d.jsx(d.Fragment,{children:"id not defined..."})},Q4=Ba([{name:"BardsBallad",light:{background:"#121217",brand:{50:"#fcf9f0",100:"#f9f2db",200:"#f2e1b6",300:"#eacc87",400:"#e3b667",500:"#d99736",600:"#cb802b",700:"#a86426",800:"#875025",900:"#6d4221",950:"#3b210f"},neutral:{50:"#f8f9fb",100:"#f0f1f5",200:"#d9dbe3",300:"#babdcf",400:"#9499b3",500:"#6e7499",600:"#575e7f",700:"#464d66",800:"#393d50",900:"#2e3240",950:"#191c27"},orange:{50:"#fff7eb",100:"#ffe9c6",200:"#ffcd87",300:"#ffac4a",400:"#ff8a16",500:"#e67300",600:"#c35e00",700:"#9e4c00",800:"#7a3b00",900:"#5e2f00",950:"#351a00"},red:{50:"#fff5f5",100:"#ffe5e5",200:"#ffbdbd",300:"#ff8f8f",400:"#ff5c5c",500:"#ff3030",600:"#e52626",700:"#b31f1f",800:"#8c1919",900:"#6a1414",950:"#410d0d"},blue:{50:"#f3faff",100:"#e2f3ff",200:"#bce1ff",300:"#82cbff",400:"#41b2ff",500:"#1f93e6",600:"#166eb3",700:"#125892",800:"#0f4776",900:"#0d3a5e",950:"#07233b"},green:{50:"#f3fcf5",100:"#e4f8e8",200:"#c3edcb",300:"#92d8a4",400:"#57be75",500:"#35a257",600:"#298548",700:"#236e3b",800:"#1c552f",900:"#164429",950:"#0b2617"}}},{name:"ValentinesDay",light:{background:"#442835",brand:{50:"#fff7f9",100:"#ffeef2",200:"#fed7e2",300:"#fbb6ce",400:"#f687b3",500:"#ed64a6",600:"#d53f8c",700:"#b83280",800:"#97266d",900:"#702459",950:"#521640"},neutral:{50:"#fdf7f9",100:"#faf0f3",200:"#f4d9e1",300:"#e8b8ca",400:"#d68aa8",500:"#b76d89",600:"#91536b",700:"#734256",800:"#5b3544",900:"#442835",950:"#2b1821"},orange:{50:"#fff8f1",100:"#ffe8d8",200:"#ffd0ae",300:"#ffaf7e",400:"#ff8552",500:"#f75e28",600:"#d9471a",700:"#b43716",800:"#8c2c13",900:"#6c2311",950:"#3e1409"},red:{50:"#fff5f5",100:"#ffe3e3",200:"#ffbaba",300:"#ff8989",400:"#ff5c5c",500:"#fc2626",600:"#d21f1f",700:"#aa1919",800:"#851515",900:"#661010",950:"#400909"},blue:{50:"#f5f8ff",100:"#ebf2ff",200:"#cbdcff",300:"#a2bfff",400:"#799fff",500:"#567dff",600:"#455fd4",700:"#394aa9",800:"#303b85",900:"#262e66",950:"#171a40"},green:{50:"#f5fdf7",100:"#e7f8eb",200:"#c6edcf",300:"#95dca7",400:"#5fc67d",500:"#3ca75e",600:"#2e8749",700:"#266e3d",800:"#205530",900:"#1a4226",950:"#0d2615"}}}]),Tae=()=>{let e=document.createElement("script");e.id="eruda-script",e.src="https://cdn.jsdelivr.net/npm/eruda",document.body.append(e),e.onload=()=>{eruda.init()}},Iae=()=>{const e=document.getElementById("eruda-script");e&&(eruda.destroy(),e.remove())},wh=Ba({theme:"BardsBallad",scheme:"dark",isErudaActive:!1},{onSet:(e,t)=>{mP.set("settings",e),t.isErudaActive&&!e.isErudaActive?Iae():!t.isErudaActive&&e.isErudaActive&&Tae(),(e.theme!==t.theme||e.scheme!==t.scheme)&&Z4()}}),Pae=async()=>{const e=await mP.get("settings");e&&wh.set(e)};Pae();const Oae=e=>{wh.set(t=>({...t,isErudaActive:e}))},$ae=e=>{wh.set(t=>({...t,theme:e}))},Z4=()=>{const e=Q4.get(),t=wh.get(),n=e.find(r=>r.name===t.theme);if(n){document.documentElement.style.setProperty("--background",n.light.background);for(let r in n.light.brand)document.documentElement.style.setProperty("--brand-".concat(r),n.light.brand[r]);for(let r in n.light.neutral)document.documentElement.style.setProperty("--neutral-".concat(r),n.light.neutral[r]);for(let r in n.light.orange)document.documentElement.style.setProperty("--orange-".concat(r),n.light.orange[r]);for(let r in n.light.red)document.documentElement.style.setProperty("--red-".concat(r),n.light.red[r]);for(let r in n.light.blue)document.documentElement.style.setProperty("--blue-".concat(r),n.light.blue[r]);for(let r in n.light.green)document.documentElement.style.setProperty("--green-".concat(r),n.light.green[r])}},Mae={0:"free",1:"premium",2:"fancy",3:"developer"};function Dae(e){return Mae[e]||"free"}const Lae=()=>d.jsx("p",{children:"hello"}),Bae=({tabs:e,props:t})=>{var i;const[n,r]=j.useState(e[0].id);return d.jsxs("div",{className:"w-full mt-5",children:[d.jsx("div",{className:"flex space-x-2 border-b border-neutral-700",children:e.map(o=>d.jsx("button",{onClick:()=>{r(o.id)},className:"py-2 px-4 text-sm font-medium transition-colors border-brand-500 ".concat(n===o.id?"border-b-2 text-brand-500":"text-neutral-400 hover:text-brand-400"),children:o.label},o.id))}),d.jsx("div",{className:"p-4",children:((i=e.find(o=>o.id===n))==null?void 0:i.Content(t))||d.jsx(Lae,{})})]})},Fae=[{id:"profile",label:"Profile",Content:({isLoggedIn:e,user:t})=>d.jsx("div",{className:"max-w-5xl mx-auto",children:e&&t?d.jsxs("div",{className:"my-2 flex flex-col gap-4 lg:grid lg:grid-cols-2 rtl:space-x-reverse flex-wrap",children:[d.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-neutral-500 border",children:[d.jsx("p",{className:"text-lg",children:"Username"}),d.jsx("p",{children:t.username})]}),d.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-neutral-500 border",children:[d.jsx("p",{className:"text-lg",children:"Email"}),d.jsx("p",{children:t.email})]}),d.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-brand-500 border",children:[d.jsx("p",{className:"text-lg",children:"Subscription"}),d.jsxs("p",{className:"mb-4",children:["Current Tier: ",Dae(t.role)]}),d.jsx(kt,{color:"primary",onClick:async()=>{let n="";if(t.role===0){const{url:r}=await sK();n=r}else if(t.role===1){const{url:r}=await aK();n=r}window.open(n,"_self")},children:t.role===0?"Subscribe":t.role===1?"Manage Subscription":"Thank you for everything!"})]}),d.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-red-500 border",children:[d.jsx("p",{className:"text-lg",children:"Danger Zone"}),d.jsx("p",{className:"mb-4 text-red-500",children:"All local data is cleared (unsynced data will be lost)"}),d.jsx(kt,{color:"danger",onClick:()=>ln({type:"confirm",title:"Logout",data:{type:"danger",message:"All local data is cleared (unsynced data will be lost)"},onSave:Jq}),children:"Logout"})]})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[d.jsx("p",{className:"text-lg",children:"You are not logged in"}),d.jsx("p",{className:"mb-4",children:"Login to access your profile"}),d.jsx(kt,{color:"light",onClick:()=>{ln({type:"authentication",title:"",data:null,onSave:()=>{}})},children:"Login / Register"})]})})},{id:"general",label:"General",Content:({settings:e,themes:t})=>d.jsx(dt,{id:"theme",label:"Theme",value:e.theme,onChange:$ae,children:t.map(n=>d.jsx("option",{value:n.name,children:n.name}))})},{id:"developer",label:"Developer",Content:({settings:e})=>d.jsxs(d.Fragment,{children:[d.jsxs("p",{className:"my-2",children:[d.jsx("a",{className:"underline",href:"https://eruda.liriliri.io/",target:"_blank",children:"Eruda"})," allows access to the development console on mobile."]}),d.jsx(Gn,{id:"use-eruda",label:"Load Eruda",checked:e.isErudaActive,onChange:Oae})]})}],zae=()=>{const e=Q4.useValue(),t=wh.useValue(),{isLoggedIn:n,user:r}=sr.useValue();return d.jsxs("div",{children:[d.jsx(Ta,{title:"Settings"}),d.jsx(Bae,{tabs:Fae,props:{themes:e,settings:t,isLoggedIn:n,user:r}})]})},BA="system-checkpoint",Hae=async()=>{const e=await En.get(BA);console.log("pulling systems");const{checkpoint:t,documents:n}=await nK(e,20);return await En.set(BA,t),n},Uae=async()=>{const e=await _t.systems.toArray(),t=await _t.characters.toArray(),n=wc(await wr.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await En.get("synced_characters")||[],i=n.role>0,o=e.filter(s=>{if(!(s.user_id===n.id))return!1;const u=t.find(f=>f.system.local_id===s.local_id&&r.includes)!==void 0,c=!s.id&&i;return u||c});return await rK(o)},Wae=async e=>_t.systems.bulkPut(e),Vae=async()=>await _t.systems.toArray(),FA="version-checkpoint",qae=async()=>{const e=await En.get(FA);console.log("pulling versions");const{checkpoint:t,documents:n}=await Qq(e,20);return await En.set(FA,t),n},Kae=async()=>{const e=await _t.versions.toArray(),t=await _t.characters.toArray(),n=wc(await wr.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await En.get("synced_characters")||[],i=n.role>0,o=e.filter(s=>{if(!(s.user_id===n.id))return!1;const u=t.find(f=>f.system.version_id===s.local_id&&r.includes)!==void 0,c=!s.id&&i;return u||c});return await Zq(o)},Gae=async e=>_t.versions.bulkPut(e),Yae=async()=>await _t.versions.toArray(),zA="character-checkpoint",Xae=async()=>{const e=await En.get(zA);console.log("pulling characters");const{checkpoint:t,documents:n}=await iK(e,20);return await En.set(zA,t),n},Jae=async()=>{const e=await _t.characters.toArray(),t=wc(await wr.get("token"));if(!t)return{conflicts:[],metadata:[]};const n=t.role>0,r=await En.get("updated_characters")||[],i=await En.get("synced_characters")||[],o=e.filter(s=>{const a=i.includes(s.local_id),l=r.includes(s.local_id);return n&&l?!0:a&&l});return await oK(o)},Qae=async e=>_t.characters.bulkPut(e),Zae=async()=>await _t.characters.toArray(),HA="subscription-checkpoint",ele=async()=>{const e=await En.get(HA);console.log("pulling subscriptions");const{checkpoint:t,documents:n}=await eK(e,20);return await En.set(HA,t),n},tle=async()=>{const e=await _t.subscriptions.toArray(),t=await _t.characters.toArray(),n=wc(await wr.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await En.get("synced_characters")||[],i=n.role>0,o=e.filter(s=>{if(!(s.user_id===n.id))return!1;const u=t.find(f=>{const h=f.system.version_id===s.version_id&&f.system.local_id===s.resource_id,p=r.includes(f.local_id);return h&&p})!==void 0,c=!s.id&&i;return u||c});return await tK(o)},nle=async e=>_t.subscriptions.bulkPut(e),rle=async()=>await _t.subscriptions.toArray(),dS=Ba({isOnline:navigator.onLine}),Qy=e=>dS.set(t=>({...t,isOnline:e})),ile=10,UA=[{name:"Subscriptions",get:rle,bulkPut:nle,pull:ele,push:tle},{name:"Systems",get:Vae,bulkPut:Wae,pull:Hae,push:Uae},{name:"Versions",get:Yae,bulkPut:Gae,pull:qae,push:Kae},{name:"Characters",get:Zae,bulkPut:Qae,pull:Xae,push:Jae}];S1().then(e=>{Qy(e)});const e5=async()=>{try{const e=await S1(),{isLoggedIn:t}=sr.get();Qy(e),e&&t&&await fS()}catch(e){console.error("Error in sync",e)}setTimeout(e5,10*1e3)};setTimeout(e5,2*1e3);async function t5(e){return e.length===0?[]:new Promise(t=>{ln({title:"Handle Conflicts",type:"HandleConflicts",data:e,onSave:t})})}async function ole(e,t,n){let r=!0;for(;r;){const i=await t();console.log("sync documents",i);const o=i.flatMap(l=>{const u=n.find(v=>v.local_id===l.local_id);if(!u)return[];const c=new Date(u.updated_at).getTime(),f=new Date(l.updated_at).getTime(),h=u.version===l.version,p=c>=f;return h&&p?[]:{local:u,remote:l}}),s=await t5(o);i.length<ile&&(r=!1);const a=i.map(l=>s.find(u=>u.local_id===l.local_id)||l);await e(a),console.log("bulk put",i.length)}}async function sle(e,t,n){let r=!0;for(;r;){const{conflicts:i,metadata:o}=await t();i.length===0&&(r=!1,console.log("no conflicts"));const s=o.map(u=>({...n.find(f=>f.local_id===u.local_id),...u}));await e(s);const a=i.flatMap(u=>{const c=n.find(f=>f.local_id===u.local_id);return c?{local:c,remote:u}:[]}),l=await t5(a);console.log(l),await e(l),console.log("conflicts handled",a.length)}}const fS=async()=>{const{isOnline:e}=dS.get(),{isLoggedIn:t}=sr.get();if(!e||!t)return;const n=await En.get("synced_characters")||[];await l3(n);for(let r=0;r<UA.length;r++){const i=UA[r];await ole(i.bulkPut,i.pull,await i.get()),await sle(i.bulkPut,i.push,await i.get())}};window.addEventListener("online",async()=>{console.log("online");const e=await S1();Qy(e),e||console.log("not connected"),fS()});window.addEventListener("offline",()=>{console.log("offline"),Qy(!1)});const ale=()=>{const e=vc(),t=()=>{e("/settings")};return j.useEffect(()=>{lK()},[]),d.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[d.jsx("h1",{children:"Subscription Successful!"}),d.jsx("p",{children:"Thank you for subscribing to Bard's Ballad. Your subscription was processed successfully."}),d.jsx("p",{children:"We hope you enjoy all the premium features and content!"}),d.jsx("button",{onClick:t,style:{marginTop:"1rem",padding:"0.5rem 1rem",fontSize:"1rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Back to Settings"})]})},lle=async e=>{try{if(await _t.systems.get(e.local_id))return null;const t=dh.safeParse(e);return t.success?(await _t.systems.add(e),e):(console.log("Invalid system data:",t.error.format()),null)}catch(t){return console.log("Error saving system:",t),null}},ule=async e=>{try{if(await _t.versions.get(e.local_id))return null;const t=uS.safeParse(e);return t.success?(await _t.versions.add(e),e):(console.log("Invalid version data:",t.error.format()),null)}catch(t){return console.log("Error saving version:",t),null}},cle=({item:e})=>{const{addToast:t}=HG();return d.jsx("div",{className:"relative cursor-pointer flex flex-col max-w-96 p-4 tranasition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",onClick:()=>ln({type:"marketplace_view",title:e.name,data:e,onSave:async n=>{try{const r=await Gq(n),{baseData:i,versionData:o}=r,s=await lle(i);if(!s)return t("Failed to create system.","error");const a=await ule(o);if(!a)return t("Failed to create version.","error");if(!await cS("system",s.local_id,a.local_id,!1))return t("Failed to create subscription.","error");t("Subscription created!","success")}catch(r){t("Error creating subscription","error")}}}),children:d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-xl font-bold text-white",children:e.name[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:e.name}),d.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[e.creator_username," | Version ",Ol(e.version)]})]})]})},e.name)},dle=()=>{const[e,t]=j.useState([]),{isLoggedIn:n}=sr.useValue(),{isOnline:r}=dS.useValue();return j.useEffect(()=>{if(!r)return t([]);(async()=>{const o=await qq();t(o)})()},[r]),j.useEffect(()=>{(async()=>{await Ld.get("seen-marketplace-disclaimer")||ln({title:"",type:"marketplace_disclaimer",data:"",onSave:()=>{Ld.set("seen-marketplace-disclaimer",!0)}})})()},[]),r?d.jsxs("div",{children:[d.jsx(Ta,{title:"Marketplace"}),d.jsxs("div",{className:"p-4",children:[d.jsx("div",{className:"flex flex-col items-center justify-center",children:d.jsxs("div",{className:'bg-brand-700 rounded-lg p-8 text-center w-full md:w-10/12 h-40 bg-[url("/marketplace.png")] bg-cover bg-no-repeat bg-top',children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Welcome to the Marketplace!"}),d.jsx("p",{className:"text-neutral-100",children:"Explore and discover new systems and datapacks."})]})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Featured Systems"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:e.map((i,o)=>d.jsx(cle,{item:i},o))})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Featured Themes"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"})]})]}),n&&d.jsx(Fa,{onClick:()=>ln({type:"PublishItem",title:"none",data:"none",onSave:Vq})})]}):d.jsxs("div",{className:"h-full",children:[d.jsx(Ta,{title:"Marketplace"}),d.jsx("div",{className:"flex justify-center items-center p-4",children:d.jsx("h2",{className:"text-3xl",children:"Marketplace is not available while you're offline!"})})]})};window.trySync=fS;window.updateFromAuth=async()=>{const{user:e}=sr.get(),t=e?e.id:"none",n=await wr.get("deviceId")||"";await _1(t,n)};Z4();const fle=()=>(j.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh","".concat(t,"px"))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),d.jsx(wL,{children:d.jsx(YD,{children:d.jsxs(Li,{path:"/",element:d.jsx(GG,{}),children:[d.jsx(Li,{index:!0,element:d.jsx(QG,{})}),d.jsxs(Li,{path:"characters",children:[d.jsx(Li,{index:!0,element:d.jsx(ise,{})}),d.jsx(Li,{path:":id",element:d.jsx(zse,{})})]}),d.jsx(Li,{path:"marketplace",element:d.jsx(dle,{})}),d.jsxs(Li,{path:"library",children:[d.jsx(Li,{index:!0,element:d.jsx(Jse,{})}),d.jsx(Li,{path:"system/:id",element:d.jsx(Rae,{})})]}),d.jsx(Li,{path:"settings",element:d.jsx(zae,{})}),d.jsx(Li,{path:"subscription-confirmation",element:d.jsx(ale,{})})]})})})),hle={api_host:void 0},ple=document.getElementById("root"),gle=iT(ple);gle.render(d.jsx(It.StrictMode,{children:d.jsx(Joe,{apiKey:"",options:hle,children:d.jsx(fle,{})})}));export{s3 as W,yle as __vite_legacy_guard};
