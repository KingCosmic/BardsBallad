var rM=Object.defineProperty;var iM=(e,t,n)=>t in e?rM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wo=(e,t,n)=>iM(e,typeof t!="symbol"?t+"":t,n);function zce(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function oM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QR={exports:{}},dy={},ZR={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=Symbol.for("react.element"),sM=Symbol.for("react.portal"),aM=Symbol.for("react.fragment"),lM=Symbol.for("react.strict_mode"),uM=Symbol.for("react.profiler"),cM=Symbol.for("react.provider"),dM=Symbol.for("react.context"),fM=Symbol.for("react.forward_ref"),hM=Symbol.for("react.suspense"),pM=Symbol.for("react.memo"),gM=Symbol.for("react.lazy"),kS=Symbol.iterator;function mM(e){return e===null||typeof e!="object"?null:(e=kS&&e[kS]||e["@@iterator"],typeof e=="function"?e:null)}var eN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tN=Object.assign,nN={};function Oc(e,t,n){this.props=e,this.context=t,this.refs=nN,this.updater=n||eN}Oc.prototype.isReactComponent={};Oc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rN(){}rN.prototype=Oc.prototype;function U_(e,t,n){this.props=e,this.context=t,this.refs=nN,this.updater=n||eN}var W_=U_.prototype=new rN;W_.constructor=U_;tN(W_,Oc.prototype);W_.isPureReactComponent=!0;var CS=Array.isArray,iN=Object.prototype.hasOwnProperty,V_={current:null},oN={key:!0,ref:!0,__self:!0,__source:!0};function sN(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)iN.call(t,r)&&!oN.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:mh,type:e,key:o,ref:s,props:i,_owner:V_.current}}function yM(e,t){return{$$typeof:mh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function q_(e){return typeof e=="object"&&e!==null&&e.$$typeof===mh}function vM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jS=/\/+/g;function u0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vM(""+e.key):t.toString(36)}function tg(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case mh:case sM:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+u0(s,0):r,CS(i)?(n="",e!=null&&(n=e.replace(jS,"$&/")+"/"),tg(i,t,n,"",function(u){return u})):i!=null&&(q_(i)&&(i=yM(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(jS,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",CS(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+u0(o,a);s+=tg(o,t,n,l,i)}else if(l=mM(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+u0(o,a++),s+=tg(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function ip(e,t,n){if(e==null)return e;var r=[],i=0;return tg(e,r,"","",function(o){return t.call(n,o,i++)}),r}function bM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var oi={current:null},ng={transition:null},wM={ReactCurrentDispatcher:oi,ReactCurrentBatchConfig:ng,ReactCurrentOwner:V_};function aN(){throw Error("act(...) is not supported in production builds of React.")}Jt.Children={map:ip,forEach:function(e,t,n){ip(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ip(e,function(){t++}),t},toArray:function(e){return ip(e,function(t){return t})||[]},only:function(e){if(!q_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Jt.Component=Oc;Jt.Fragment=aM;Jt.Profiler=uM;Jt.PureComponent=U_;Jt.StrictMode=lM;Jt.Suspense=hM;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wM;Jt.act=aN;Jt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=tN({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=V_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)iN.call(t,l)&&!oN.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:mh,type:e.type,key:i,ref:o,props:r,_owner:s}};Jt.createContext=function(e){return e={$$typeof:dM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cM,_context:e},e.Consumer=e};Jt.createElement=sN;Jt.createFactory=function(e){var t=sN.bind(null,e);return t.type=e,t};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(e){return{$$typeof:fM,render:e}};Jt.isValidElement=q_;Jt.lazy=function(e){return{$$typeof:gM,_payload:{_status:-1,_result:e},_init:bM}};Jt.memo=function(e,t){return{$$typeof:pM,type:e,compare:t===void 0?null:t}};Jt.startTransition=function(e){var t=ng.transition;ng.transition={};try{e()}finally{ng.transition=t}};Jt.unstable_act=aN;Jt.useCallback=function(e,t){return oi.current.useCallback(e,t)};Jt.useContext=function(e){return oi.current.useContext(e)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(e){return oi.current.useDeferredValue(e)};Jt.useEffect=function(e,t){return oi.current.useEffect(e,t)};Jt.useId=function(){return oi.current.useId()};Jt.useImperativeHandle=function(e,t,n){return oi.current.useImperativeHandle(e,t,n)};Jt.useInsertionEffect=function(e,t){return oi.current.useInsertionEffect(e,t)};Jt.useLayoutEffect=function(e,t){return oi.current.useLayoutEffect(e,t)};Jt.useMemo=function(e,t){return oi.current.useMemo(e,t)};Jt.useReducer=function(e,t,n){return oi.current.useReducer(e,t,n)};Jt.useRef=function(e){return oi.current.useRef(e)};Jt.useState=function(e){return oi.current.useState(e)};Jt.useSyncExternalStore=function(e,t,n){return oi.current.useSyncExternalStore(e,t,n)};Jt.useTransition=function(){return oi.current.useTransition()};Jt.version="18.3.1";ZR.exports=Jt;var k=ZR.exports;const $t=Xs(k),lN=oM({__proto__:null,default:$t},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xM=k,_M=Symbol.for("react.element"),EM=Symbol.for("react.fragment"),SM=Object.prototype.hasOwnProperty,kM=xM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CM={key:!0,ref:!0,__self:!0,__source:!0};function uN(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)SM.call(t,r)&&!CM.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:_M,type:e,key:o,ref:s,props:i,_owner:kM.current}}dy.Fragment=EM;dy.jsx=uN;dy.jsxs=uN;QR.exports=dy;var f=QR.exports,cN={exports:{}},Ui={},dN={exports:{}},fN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,B){var P=O.length;O.push(B);e:for(;0<P;){var G=P-1>>>1,Q=O[G];if(0<i(Q,B))O[G]=B,O[P]=Q,P=G;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var B=O[0],P=O.pop();if(P!==B){O[0]=P;e:for(var G=0,Q=O.length,se=Q>>>1;G<se;){var _e=2*(G+1)-1,Ne=O[_e],Te=_e+1,W=O[Te];if(0>i(Ne,P))Te<Q&&0>i(W,Ne)?(O[G]=W,O[Te]=P,G=Te):(O[G]=Ne,O[_e]=P,G=_e);else if(Te<Q&&0>i(W,P))O[G]=W,O[Te]=P,G=Te;else break e}}return B}function i(O,B){var P=O.sortIndex-B.sortIndex;return P!==0?P:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,d=null,h=3,p=!1,b=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=O)r(u),B.sortIndex=B.expirationTime,t(l,B);else break;B=n(u)}}function E(O){if(g=!1,w(O),!b)if(n(l)!==null)b=!0,K(S);else{var B=n(u);B!==null&&X(E,B.startTime-O)}}function S(O,B){b=!1,g&&(g=!1,y($),$=-1),p=!0;var P=h;try{for(w(B),d=n(l);d!==null&&(!(d.expirationTime>B)||O&&!U());){var G=d.callback;if(typeof G=="function"){d.callback=null,h=d.priorityLevel;var Q=G(d.expirationTime<=B);B=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),w(B)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var _e=n(u);_e!==null&&X(E,_e.startTime-B),se=!1}return se}finally{d=null,h=P,p=!1}}var A=!1,T=null,$=-1,q=5,D=-1;function U(){return!(e.unstable_now()-D<q)}function J(){if(T!==null){var O=e.unstable_now();D=O;var B=!0;try{B=T(!0,O)}finally{B?H():(A=!1,T=null)}}else A=!1}var H;if(typeof v=="function")H=function(){v(J)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=J,H=function(){F.postMessage(null)}}else H=function(){x(J,0)};function K(O){T=O,A||(A=!0,H())}function X(O,B){$=x(function(){O(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,K(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var P=h;h=B;try{return O()}finally{h=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var P=h;h=O;try{return B()}finally{h=P}},e.unstable_scheduleCallback=function(O,B,P){var G=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?G+P:G):P=G,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=P+Q,O={id:c++,callback:B,priorityLevel:O,startTime:P,expirationTime:Q,sortIndex:-1},P>G?(O.sortIndex=P,t(u,O),n(l)===null&&O===n(u)&&(g?(y($),$=-1):g=!0,X(E,P-G))):(O.sortIndex=Q,t(l,O),b||p||(b=!0,K(S))),O},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(O){var B=h;return function(){var P=h;h=B;try{return O.apply(this,arguments)}finally{h=P}}}})(fN);dN.exports=fN;var jM=dN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM=k,Li=jM;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hN=new Set,cf={};function au(e,t){ac(e,t),ac(e+"Capture",t)}function ac(e,t){for(cf[e]=t,e=0;e<t.length;e++)hN.add(t[e])}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fw=Object.prototype.hasOwnProperty,RM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AS={},RS={};function NM(e){return fw.call(RS,e)?!0:fw.call(AS,e)?!1:RM.test(e)?RS[e]=!0:(AS[e]=!0,!1)}function TM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function IM(e,t,n,r){if(t===null||typeof t>"u"||TM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function si(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Sr[e]=new si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Sr[t]=new si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Sr[e]=new si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Sr[e]=new si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Sr[e]=new si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Sr[e]=new si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Sr[e]=new si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Sr[e]=new si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Sr[e]=new si(e,5,!1,e.toLowerCase(),null,!1,!1)});var K_=/[\-:]([a-z])/g;function G_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(K_,G_);Sr[t]=new si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(K_,G_);Sr[t]=new si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(K_,G_);Sr[t]=new si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Sr[e]=new si(e,1,!1,e.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Sr[e]=new si(e,1,!1,e.toLowerCase(),null,!0,!0)});function Y_(e,t,n,r){var i=Sr.hasOwnProperty(t)?Sr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(IM(t,n,i,r)&&(n=null),r||i===null?NM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Js=AM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,op=Symbol.for("react.element"),ju=Symbol.for("react.portal"),Au=Symbol.for("react.fragment"),X_=Symbol.for("react.strict_mode"),hw=Symbol.for("react.profiler"),pN=Symbol.for("react.provider"),gN=Symbol.for("react.context"),J_=Symbol.for("react.forward_ref"),pw=Symbol.for("react.suspense"),gw=Symbol.for("react.suspense_list"),Q_=Symbol.for("react.memo"),da=Symbol.for("react.lazy"),mN=Symbol.for("react.offscreen"),NS=Symbol.iterator;function ad(e){return e===null||typeof e!="object"?null:(e=NS&&e[NS]||e["@@iterator"],typeof e=="function"?e:null)}var Pn=Object.assign,c0;function jd(e){if(c0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);c0=t&&t[1]||""}return"\n"+c0+e}var d0=!1;function f0(e,t){if(!e||d0)return"";d0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{d0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jd(e):""}function PM(e){switch(e.tag){case 5:return jd(e.type);case 16:return jd("Lazy");case 13:return jd("Suspense");case 19:return jd("SuspenseList");case 0:case 2:case 15:return e=f0(e.type,!1),e;case 11:return e=f0(e.type.render,!1),e;case 1:return e=f0(e.type,!0),e;default:return""}}function mw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Au:return"Fragment";case ju:return"Portal";case hw:return"Profiler";case X_:return"StrictMode";case pw:return"Suspense";case gw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gN:return(e.displayName||"Context")+".Consumer";case pN:return(e._context.displayName||"Context")+".Provider";case J_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q_:return t=e.displayName||null,t!==null?t:mw(e.type)||"Memo";case da:t=e._payload,e=e._init;try{return mw(e(t))}catch(n){}}return null}function OM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mw(t);case 8:return t===X_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $a(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $M(e){var t=yN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sp(e){e._valueTracker||(e._valueTracker=$M(e))}function vN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Rg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function yw(e,t){var n=t.checked;return Pn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function TS(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$a(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bN(e,t){t=t.checked,t!=null&&Y_(e,"checked",t,!1)}function vw(e,t){bN(e,t);var n=$a(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bw(e,t.type,n):t.hasOwnProperty("defaultValue")&&bw(e,t.type,$a(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function IS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bw(e,t,n){(t!=="number"||Rg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ad=Array.isArray;function Ku(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$a(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ww(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Pn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function PS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(Ad(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$a(n)}}function wN(e,t){var n=$a(t.value),r=$a(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function OS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ap,_N=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ap=ap||document.createElement("div"),ap.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ap.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function df(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MM=["Webkit","ms","Moz","O"];Object.keys(Vd).forEach(function(e){MM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vd[t]=Vd[e]})});function EN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vd.hasOwnProperty(e)&&Vd[e]?(""+t).trim():t+"px"}function SN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=EN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var DM=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _w(e,t){if(t){if(DM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function Ew(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sw=null;function Z_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kw=null,Gu=null,Yu=null;function $S(e){if(e=bh(e)){if(typeof kw!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=my(t),kw(e.stateNode,e.type,t))}}function kN(e){Gu?Yu?Yu.push(e):Yu=[e]:Gu=e}function CN(){if(Gu){var e=Gu,t=Yu;if(Yu=Gu=null,$S(e),t)for(e=0;e<t.length;e++)$S(t[e])}}function jN(e,t){return e(t)}function AN(){}var h0=!1;function RN(e,t,n){if(h0)return e(t,n);h0=!0;try{return jN(e,t,n)}finally{h0=!1,(Gu!==null||Yu!==null)&&(AN(),CN())}}function ff(e,t){var n=e.stateNode;if(n===null)return null;var r=my(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var Cw=!1;if(Fs)try{var ld={};Object.defineProperty(ld,"passive",{get:function(){Cw=!0}}),window.addEventListener("test",ld,ld),window.removeEventListener("test",ld,ld)}catch(e){Cw=!1}function LM(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var qd=!1,Ng=null,Tg=!1,jw=null,BM={onError:function(e){qd=!0,Ng=e}};function FM(e,t,n,r,i,o,s,a,l){qd=!1,Ng=null,LM.apply(BM,arguments)}function zM(e,t,n,r,i,o,s,a,l){if(FM.apply(this,arguments),qd){if(qd){var u=Ng;qd=!1,Ng=null}else throw Error(tt(198));Tg||(Tg=!0,jw=u)}}function lu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function NN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function MS(e){if(lu(e)!==e)throw Error(tt(188))}function HM(e){var t=e.alternate;if(!t){if(t=lu(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return MS(i),e;if(o===r)return MS(i),t;o=o.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function TN(e){return e=HM(e),e!==null?IN(e):null}function IN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=IN(e);if(t!==null)return t;e=e.sibling}return null}var PN=Li.unstable_scheduleCallback,DS=Li.unstable_cancelCallback,UM=Li.unstable_shouldYield,WM=Li.unstable_requestPaint,Un=Li.unstable_now,VM=Li.unstable_getCurrentPriorityLevel,e1=Li.unstable_ImmediatePriority,ON=Li.unstable_UserBlockingPriority,Ig=Li.unstable_NormalPriority,qM=Li.unstable_LowPriority,$N=Li.unstable_IdlePriority,fy=null,Jo=null;function KM(e){if(Jo&&typeof Jo.onCommitFiberRoot=="function")try{Jo.onCommitFiberRoot(fy,e,void 0,(e.current.flags&128)===128)}catch(t){}}var ko=Math.clz32?Math.clz32:XM,GM=Math.log,YM=Math.LN2;function XM(e){return e>>>=0,e===0?32:31-(GM(e)/YM|0)|0}var lp=64,up=4194304;function Rd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Rd(a):(o&=s,o!==0&&(r=Rd(o)))}else s=n&~i,s!==0?r=Rd(s):o!==0&&(r=Rd(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ko(t),i=1<<n,r|=e[n],t&=~i;return r}function JM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QM(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ko(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=JM(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Aw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function MN(){var e=lp;return lp<<=1,!(lp&4194240)&&(lp=64),e}function p0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ko(t),e[t]=n}function ZM(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ko(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function t1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ko(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ln=0;function DN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LN,n1,BN,FN,zN,Rw=!1,cp=[],_a=null,Ea=null,Sa=null,hf=new Map,pf=new Map,ga=[],eD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LS(e,t){switch(e){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":hf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pf.delete(t.pointerId)}}function ud(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=bh(t),t!==null&&n1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function tD(e,t,n,r,i){switch(t){case"focusin":return _a=ud(_a,e,t,n,r,i),!0;case"dragenter":return Ea=ud(Ea,e,t,n,r,i),!0;case"mouseover":return Sa=ud(Sa,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return hf.set(o,ud(hf.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,pf.set(o,ud(pf.get(o)||null,e,t,n,r,i)),!0}return!1}function HN(e){var t=Sl(e.target);if(t!==null){var n=lu(t);if(n!==null){if(t=n.tag,t===13){if(t=NN(n),t!==null){e.blockedOn=t,zN(e.priority,function(){BN(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Sw=r,n.target.dispatchEvent(r),Sw=null}else return t=bh(n),t!==null&&n1(t),e.blockedOn=n,!1;t.shift()}return!0}function BS(e,t,n){rg(e)&&n.delete(t)}function nD(){Rw=!1,_a!==null&&rg(_a)&&(_a=null),Ea!==null&&rg(Ea)&&(Ea=null),Sa!==null&&rg(Sa)&&(Sa=null),hf.forEach(BS),pf.forEach(BS)}function cd(e,t){e.blockedOn===t&&(e.blockedOn=null,Rw||(Rw=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,nD)))}function gf(e){function t(i){return cd(i,e)}if(0<cp.length){cd(cp[0],e);for(var n=1;n<cp.length;n++){var r=cp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_a!==null&&cd(_a,e),Ea!==null&&cd(Ea,e),Sa!==null&&cd(Sa,e),hf.forEach(t),pf.forEach(t),n=0;n<ga.length;n++)r=ga[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)HN(n),n.blockedOn===null&&ga.shift()}var Xu=Js.ReactCurrentBatchConfig,Og=!0;function rD(e,t,n,r){var i=ln,o=Xu.transition;Xu.transition=null;try{ln=1,r1(e,t,n,r)}finally{ln=i,Xu.transition=o}}function iD(e,t,n,r){var i=ln,o=Xu.transition;Xu.transition=null;try{ln=4,r1(e,t,n,r)}finally{ln=i,Xu.transition=o}}function r1(e,t,n,r){if(Og){var i=Nw(e,t,n,r);if(i===null)S0(e,t,r,$g,n),LS(e,r);else if(tD(i,e,t,n,r))r.stopPropagation();else if(LS(e,r),t&4&&-1<eD.indexOf(e)){for(;i!==null;){var o=bh(i);if(o!==null&&LN(o),o=Nw(e,t,n,r),o===null&&S0(e,t,r,$g,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else S0(e,t,r,null,n)}}var $g=null;function Nw(e,t,n,r){if($g=null,e=Z_(r),e=Sl(e),e!==null)if(t=lu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=NN(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $g=e,null}function UN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VM()){case e1:return 1;case ON:return 4;case Ig:case qM:return 16;case $N:return 536870912;default:return 16}default:return 16}}var ba=null,i1=null,ig=null;function WN(){if(ig)return ig;var e,t=i1,n=t.length,r,i="value"in ba?ba.value:ba.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return ig=i.slice(e,1<r?1-r:void 0)}function og(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dp(){return!0}function FS(){return!1}function Wi(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dp:FS,this.isPropagationStopped=FS,this}return Pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dp)},persist:function(){},isPersistent:dp}),t}var $c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o1=Wi($c),vh=Pn({},$c,{view:0,detail:0}),oD=Wi(vh),g0,m0,dd,hy=Pn({},vh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dd&&(dd&&e.type==="mousemove"?(g0=e.screenX-dd.screenX,m0=e.screenY-dd.screenY):m0=g0=0,dd=e),g0)},movementY:function(e){return"movementY"in e?e.movementY:m0}}),zS=Wi(hy),sD=Pn({},hy,{dataTransfer:0}),aD=Wi(sD),lD=Pn({},vh,{relatedTarget:0}),y0=Wi(lD),uD=Pn({},$c,{animationName:0,elapsedTime:0,pseudoElement:0}),cD=Wi(uD),dD=Pn({},$c,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fD=Wi(dD),hD=Pn({},$c,{data:0}),HS=Wi(hD),pD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mD[e])?!!t[e]:!1}function s1(){return yD}var vD=Pn({},vh,{key:function(e){if(e.key){var t=pD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=og(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s1,charCode:function(e){return e.type==="keypress"?og(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?og(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bD=Wi(vD),wD=Pn({},hy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),US=Wi(wD),xD=Pn({},vh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s1}),_D=Wi(xD),ED=Pn({},$c,{propertyName:0,elapsedTime:0,pseudoElement:0}),SD=Wi(ED),kD=Pn({},hy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CD=Wi(kD),jD=[9,13,27,32],a1=Fs&&"CompositionEvent"in window,Kd=null;Fs&&"documentMode"in document&&(Kd=document.documentMode);var AD=Fs&&"TextEvent"in window&&!Kd,VN=Fs&&(!a1||Kd&&8<Kd&&11>=Kd),WS=" ",VS=!1;function qN(e,t){switch(e){case"keyup":return jD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ru=!1;function RD(e,t){switch(e){case"compositionend":return KN(t);case"keypress":return t.which!==32?null:(VS=!0,WS);case"textInput":return e=t.data,e===WS&&VS?null:e;default:return null}}function ND(e,t){if(Ru)return e==="compositionend"||!a1&&qN(e,t)?(e=WN(),ig=i1=ba=null,Ru=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return VN&&t.locale!=="ko"?null:t.data;default:return null}}var TD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!TD[e.type]:t==="textarea"}function GN(e,t,n,r){kN(r),t=Mg(t,"onChange"),0<t.length&&(n=new o1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gd=null,mf=null;function ID(e){oT(e,0)}function py(e){var t=Iu(e);if(vN(t))return e}function PD(e,t){if(e==="change")return t}var YN=!1;if(Fs){var v0;if(Fs){var b0="oninput"in document;if(!b0){var KS=document.createElement("div");KS.setAttribute("oninput","return;"),b0=typeof KS.oninput=="function"}v0=b0}else v0=!1;YN=v0&&(!document.documentMode||9<document.documentMode)}function GS(){Gd&&(Gd.detachEvent("onpropertychange",XN),mf=Gd=null)}function XN(e){if(e.propertyName==="value"&&py(mf)){var t=[];GN(t,mf,e,Z_(e)),RN(ID,t)}}function OD(e,t,n){e==="focusin"?(GS(),Gd=t,mf=n,Gd.attachEvent("onpropertychange",XN)):e==="focusout"&&GS()}function $D(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return py(mf)}function MD(e,t){if(e==="click")return py(t)}function DD(e,t){if(e==="input"||e==="change")return py(t)}function LD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ao=typeof Object.is=="function"?Object.is:LD;function yf(e,t){if(Ao(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fw.call(t,i)||!Ao(e[i],t[i]))return!1}return!0}function YS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function XS(e,t){var n=YS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=YS(n)}}function JN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QN(){for(var e=window,t=Rg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=Rg(e.document)}return t}function l1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BD(e){var t=QN(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&JN(n.ownerDocument.documentElement,n)){if(r!==null&&l1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=XS(n,o);var s=XS(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FD=Fs&&"documentMode"in document&&11>=document.documentMode,Nu=null,Tw=null,Yd=null,Iw=!1;function JS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Iw||Nu==null||Nu!==Rg(r)||(r=Nu,"selectionStart"in r&&l1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yd&&yf(Yd,r)||(Yd=r,r=Mg(Tw,"onSelect"),0<r.length&&(t=new o1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nu)))}function fp(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tu={animationend:fp("Animation","AnimationEnd"),animationiteration:fp("Animation","AnimationIteration"),animationstart:fp("Animation","AnimationStart"),transitionend:fp("Transition","TransitionEnd")},w0={},ZN={};Fs&&(ZN=document.createElement("div").style,"AnimationEvent"in window||(delete Tu.animationend.animation,delete Tu.animationiteration.animation,delete Tu.animationstart.animation),"TransitionEvent"in window||delete Tu.transitionend.transition);function gy(e){if(w0[e])return w0[e];if(!Tu[e])return e;var t=Tu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ZN)return w0[e]=t[n];return e}var eT=gy("animationend"),tT=gy("animationiteration"),nT=gy("animationstart"),rT=gy("transitionend"),iT=new Map,QS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(e,t){iT.set(e,t),au(t,[e])}for(var x0=0;x0<QS.length;x0++){var _0=QS[x0],zD=_0.toLowerCase(),HD=_0[0].toUpperCase()+_0.slice(1);qa(zD,"on"+HD)}qa(eT,"onAnimationEnd");qa(tT,"onAnimationIteration");qa(nT,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(rT,"onTransitionEnd");ac("onMouseEnter",["mouseout","mouseover"]);ac("onMouseLeave",["mouseout","mouseover"]);ac("onPointerEnter",["pointerout","pointerover"]);ac("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function ZS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zM(r,t,void 0,e),e.currentTarget=null}function oT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;ZS(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;ZS(i,a,u),o=l}}}if(Tg)throw e=jw,Tg=!1,jw=null,e}function vn(e,t){var n=t[Dw];n===void 0&&(n=t[Dw]=new Set);var r=e+"__bubble";n.has(r)||(sT(t,e,2,!1),n.add(r))}function E0(e,t,n){var r=0;t&&(r|=4),sT(n,e,r,t)}var hp="_reactListening"+Math.random().toString(36).slice(2);function vf(e){if(!e[hp]){e[hp]=!0,hN.forEach(function(n){n!=="selectionchange"&&(UD.has(n)||E0(n,!1,e),E0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hp]||(t[hp]=!0,E0("selectionchange",!1,t))}}function sT(e,t,n,r){switch(UN(t)){case 1:var i=rD;break;case 4:i=iD;break;default:i=r1}n=i.bind(null,t,n,e),i=void 0,!Cw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function S0(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Sl(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}RN(function(){var u=o,c=Z_(n),d=[];e:{var h=iT.get(e);if(h!==void 0){var p=o1,b=e;switch(e){case"keypress":if(og(n)===0)break e;case"keydown":case"keyup":p=bD;break;case"focusin":b="focus",p=y0;break;case"focusout":b="blur",p=y0;break;case"beforeblur":case"afterblur":p=y0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=zS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=aD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=_D;break;case eT:case tT:case nT:p=cD;break;case rT:p=SD;break;case"scroll":p=oD;break;case"wheel":p=CD;break;case"copy":case"cut":case"paste":p=fD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=US}var g=(t&4)!==0,x=!g&&e==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,w;v!==null;){w=v;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=ff(v,y),E!=null&&g.push(bf(v,E,w)))),x)break;v=v.return}0<g.length&&(h=new p(h,b,null,n,c),d.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Sw&&(b=n.relatedTarget||n.fromElement)&&(Sl(b)||b[zs]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?Sl(b):null,b!==null&&(x=lu(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(g=zS,E="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=US,E="onPointerLeave",y="onPointerEnter",v="pointer"),x=p==null?h:Iu(p),w=b==null?h:Iu(b),h=new g(E,v+"leave",p,n,c),h.target=x,h.relatedTarget=w,E=null,Sl(c)===u&&(g=new g(y,v+"enter",b,n,c),g.target=w,g.relatedTarget=x,E=g),x=E,p&&b)t:{for(g=p,y=b,v=0,w=g;w;w=bu(w))v++;for(w=0,E=y;E;E=bu(E))w++;for(;0<v-w;)g=bu(g),v--;for(;0<w-v;)y=bu(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=bu(g),y=bu(y)}g=null}else g=null;p!==null&&ek(d,h,p,g,!1),b!==null&&x!==null&&ek(d,x,b,g,!0)}}e:{if(h=u?Iu(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=PD;else if(qS(h))if(YN)S=DD;else{S=$D;var A=OD}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=MD);if(S&&(S=S(e,u))){GN(d,S,n,c);break e}A&&A(e,h,u),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&bw(h,"number",h.value)}switch(A=u?Iu(u):window,e){case"focusin":(qS(A)||A.contentEditable==="true")&&(Nu=A,Tw=u,Yd=null);break;case"focusout":Yd=Tw=Nu=null;break;case"mousedown":Iw=!0;break;case"contextmenu":case"mouseup":case"dragend":Iw=!1,JS(d,n,c);break;case"selectionchange":if(FD)break;case"keydown":case"keyup":JS(d,n,c)}var T;if(a1)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Ru?qN(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(VN&&n.locale!=="ko"&&(Ru||$!=="onCompositionStart"?$==="onCompositionEnd"&&Ru&&(T=WN()):(ba=c,i1="value"in ba?ba.value:ba.textContent,Ru=!0)),A=Mg(u,$),0<A.length&&($=new HS($,e,null,n,c),d.push({event:$,listeners:A}),T?$.data=T:(T=KN(n),T!==null&&($.data=T)))),(T=AD?RD(e,n):ND(e,n))&&(u=Mg(u,"onBeforeInput"),0<u.length&&(c=new HS("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}oT(d,t)})}function bf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mg(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ff(e,n),o!=null&&r.unshift(bf(e,o,i)),o=ff(e,t),o!=null&&r.push(bf(e,o,i))),e=e.return}return r}function bu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ek(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ff(n,o),l!=null&&s.unshift(bf(n,l,a))):i||(l=ff(n,o),l!=null&&s.push(bf(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var WD=/\r\n?/g,VD=/\u0000|\uFFFD/g;function tk(e){return(typeof e=="string"?e:""+e).replace(WD,"\n").replace(VD,"")}function pp(e,t,n){if(t=tk(t),tk(e)!==t&&n)throw Error(tt(425))}function Dg(){}var Pw=null,Ow=null;function $w(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mw=typeof setTimeout=="function"?setTimeout:void 0,qD=typeof clearTimeout=="function"?clearTimeout:void 0,nk=typeof Promise=="function"?Promise:void 0,KD=typeof queueMicrotask=="function"?queueMicrotask:typeof nk<"u"?function(e){return nk.resolve(null).then(e).catch(GD)}:Mw;function GD(e){setTimeout(function(){throw e})}function k0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),gf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);gf(t)}function ka(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mc=Math.random().toString(36).slice(2),Yo="__reactFiber$"+Mc,wf="__reactProps$"+Mc,zs="__reactContainer$"+Mc,Dw="__reactEvents$"+Mc,YD="__reactListeners$"+Mc,XD="__reactHandles$"+Mc;function Sl(e){var t=e[Yo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zs]||n[Yo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rk(e);e!==null;){if(n=e[Yo])return n;e=rk(e)}return t}e=n,n=e.parentNode}return null}function bh(e){return e=e[Yo]||e[zs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Iu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function my(e){return e[wf]||null}var Lw=[],Pu=-1;function Ka(e){return{current:e}}function En(e){0>Pu||(e.current=Lw[Pu],Lw[Pu]=null,Pu--)}function yn(e,t){Pu++,Lw[Pu]=e.current,e.current=t}var Ma={},Wr=Ka(Ma),vi=Ka(!1),Ll=Ma;function lc(e,t){var n=e.type.contextTypes;if(!n)return Ma;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function bi(e){return e=e.childContextTypes,e!=null}function Lg(){En(vi),En(Wr)}function ik(e,t,n){if(Wr.current!==Ma)throw Error(tt(168));yn(Wr,t),yn(vi,n)}function aT(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,OM(e)||"Unknown",i));return Pn({},n,r)}function Bg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ma,Ll=Wr.current,yn(Wr,e),yn(vi,vi.current),!0}function ok(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=aT(e,t,Ll),r.__reactInternalMemoizedMergedChildContext=e,En(vi),En(Wr),yn(Wr,e)):En(vi),yn(vi,n)}var ks=null,yy=!1,C0=!1;function lT(e){ks===null?ks=[e]:ks.push(e)}function JD(e){yy=!0,lT(e)}function Ga(){if(!C0&&ks!==null){C0=!0;var e=0,t=ln;try{var n=ks;for(ln=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ks=null,yy=!1}catch(i){throw ks!==null&&(ks=ks.slice(e+1)),PN(e1,Ga),i}finally{ln=t,C0=!1}}return null}var Ou=[],$u=0,Fg=null,zg=0,Yi=[],Xi=0,Bl=null,Ns=1,Ts="";function pl(e,t){Ou[$u++]=zg,Ou[$u++]=Fg,Fg=e,zg=t}function uT(e,t,n){Yi[Xi++]=Ns,Yi[Xi++]=Ts,Yi[Xi++]=Bl,Bl=e;var r=Ns;e=Ts;var i=32-ko(r)-1;r&=~(1<<i),n+=1;var o=32-ko(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ns=1<<32-ko(t)+i|n<<i|r,Ts=o+e}else Ns=1<<o|n<<i|r,Ts=e}function u1(e){e.return!==null&&(pl(e,1),uT(e,1,0))}function c1(e){for(;e===Fg;)Fg=Ou[--$u],Ou[$u]=null,zg=Ou[--$u],Ou[$u]=null;for(;e===Bl;)Bl=Yi[--Xi],Yi[Xi]=null,Ts=Yi[--Xi],Yi[Xi]=null,Ns=Yi[--Xi],Yi[Xi]=null}var $i=null,Pi=null,kn=!1,vo=null;function cT(e,t){var n=Zi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$i=e,Pi=ka(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$i=e,Pi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Bl!==null?{id:Ns,overflow:Ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Zi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$i=e,Pi=null,!0):!1;default:return!1}}function Bw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fw(e){if(kn){var t=Pi;if(t){var n=t;if(!sk(e,t)){if(Bw(e))throw Error(tt(418));t=ka(n.nextSibling);var r=$i;t&&sk(e,t)?cT(r,n):(e.flags=e.flags&-4097|2,kn=!1,$i=e)}}else{if(Bw(e))throw Error(tt(418));e.flags=e.flags&-4097|2,kn=!1,$i=e}}}function ak(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$i=e}function gp(e){if(e!==$i)return!1;if(!kn)return ak(e),kn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$w(e.type,e.memoizedProps)),t&&(t=Pi)){if(Bw(e))throw dT(),Error(tt(418));for(;t;)cT(e,t),t=ka(t.nextSibling)}if(ak(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pi=ka(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pi=null}}else Pi=$i?ka(e.stateNode.nextSibling):null;return!0}function dT(){for(var e=Pi;e;)e=ka(e.nextSibling)}function uc(){Pi=$i=null,kn=!1}function d1(e){vo===null?vo=[e]:vo.push(e)}var QD=Js.ReactCurrentBatchConfig;function fd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function mp(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lk(e){var t=e._init;return t(e._payload)}function fT(e){function t(y,v){if(e){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Ra(y,v),y.index=0,y.sibling=null,y}function o(y,v,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,E){return v===null||v.tag!==6?(v=P0(w,y.mode,E),v.return=y,v):(v=i(v,w),v.return=y,v)}function l(y,v,w,E){var S=w.type;return S===Au?c(y,v,w.props.children,E,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===da&&lk(S)===v.type)?(E=i(v,w.props),E.ref=fd(y,v,w),E.return=y,E):(E=fg(w.type,w.key,w.props,null,y.mode,E),E.ref=fd(y,v,w),E.return=y,E)}function u(y,v,w,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=O0(w,y.mode,E),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function c(y,v,w,E,S){return v===null||v.tag!==7?(v=Tl(w,y.mode,E,S),v.return=y,v):(v=i(v,w),v.return=y,v)}function d(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=P0(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case op:return w=fg(v.type,v.key,v.props,null,y.mode,w),w.ref=fd(y,null,v),w.return=y,w;case ju:return v=O0(v,y.mode,w),v.return=y,v;case da:var E=v._init;return d(y,E(v._payload),w)}if(Ad(v)||ad(v))return v=Tl(v,y.mode,w,null),v.return=y,v;mp(y,v)}return null}function h(y,v,w,E){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(y,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case op:return w.key===S?l(y,v,w,E):null;case ju:return w.key===S?u(y,v,w,E):null;case da:return S=w._init,h(y,v,S(w._payload),E)}if(Ad(w)||ad(w))return S!==null?null:c(y,v,w,E,null);mp(y,w)}return null}function p(y,v,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,a(v,y,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case op:return y=y.get(E.key===null?w:E.key)||null,l(v,y,E,S);case ju:return y=y.get(E.key===null?w:E.key)||null,u(v,y,E,S);case da:var A=E._init;return p(y,v,w,A(E._payload),S)}if(Ad(E)||ad(E))return y=y.get(w)||null,c(v,y,E,S,null);mp(v,E)}return null}function b(y,v,w,E){for(var S=null,A=null,T=v,$=v=0,q=null;T!==null&&$<w.length;$++){T.index>$?(q=T,T=null):q=T.sibling;var D=h(y,T,w[$],E);if(D===null){T===null&&(T=q);break}e&&T&&D.alternate===null&&t(y,T),v=o(D,v,$),A===null?S=D:A.sibling=D,A=D,T=q}if($===w.length)return n(y,T),kn&&pl(y,$),S;if(T===null){for(;$<w.length;$++)T=d(y,w[$],E),T!==null&&(v=o(T,v,$),A===null?S=T:A.sibling=T,A=T);return kn&&pl(y,$),S}for(T=r(y,T);$<w.length;$++)q=p(T,y,$,w[$],E),q!==null&&(e&&q.alternate!==null&&T.delete(q.key===null?$:q.key),v=o(q,v,$),A===null?S=q:A.sibling=q,A=q);return e&&T.forEach(function(U){return t(y,U)}),kn&&pl(y,$),S}function g(y,v,w,E){var S=ad(w);if(typeof S!="function")throw Error(tt(150));if(w=S.call(w),w==null)throw Error(tt(151));for(var A=S=null,T=v,$=v=0,q=null,D=w.next();T!==null&&!D.done;$++,D=w.next()){T.index>$?(q=T,T=null):q=T.sibling;var U=h(y,T,D.value,E);if(U===null){T===null&&(T=q);break}e&&T&&U.alternate===null&&t(y,T),v=o(U,v,$),A===null?S=U:A.sibling=U,A=U,T=q}if(D.done)return n(y,T),kn&&pl(y,$),S;if(T===null){for(;!D.done;$++,D=w.next())D=d(y,D.value,E),D!==null&&(v=o(D,v,$),A===null?S=D:A.sibling=D,A=D);return kn&&pl(y,$),S}for(T=r(y,T);!D.done;$++,D=w.next())D=p(T,y,$,D.value,E),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?$:D.key),v=o(D,v,$),A===null?S=D:A.sibling=D,A=D);return e&&T.forEach(function(J){return t(y,J)}),kn&&pl(y,$),S}function x(y,v,w,E){if(typeof w=="object"&&w!==null&&w.type===Au&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case op:e:{for(var S=w.key,A=v;A!==null;){if(A.key===S){if(S=w.type,S===Au){if(A.tag===7){n(y,A.sibling),v=i(A,w.props.children),v.return=y,y=v;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===da&&lk(S)===A.type){n(y,A.sibling),v=i(A,w.props),v.ref=fd(y,A,w),v.return=y,y=v;break e}n(y,A);break}else t(y,A);A=A.sibling}w.type===Au?(v=Tl(w.props.children,y.mode,E,w.key),v.return=y,y=v):(E=fg(w.type,w.key,w.props,null,y.mode,E),E.ref=fd(y,v,w),E.return=y,y=E)}return s(y);case ju:e:{for(A=w.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=O0(w,y.mode,E),v.return=y,y=v}return s(y);case da:return A=w._init,x(y,v,A(w._payload),E)}if(Ad(w))return b(y,v,w,E);if(ad(w))return g(y,v,w,E);mp(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,w),v.return=y,y=v):(n(y,v),v=P0(w,y.mode,E),v.return=y,y=v),s(y)):n(y,v)}return x}var cc=fT(!0),hT=fT(!1),Hg=Ka(null),Ug=null,Mu=null,f1=null;function h1(){f1=Mu=Ug=null}function p1(e){var t=Hg.current;En(Hg),e._currentValue=t}function zw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ju(e,t){Ug=e,f1=Mu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pi=!0),e.firstContext=null)}function oo(e){var t=e._currentValue;if(f1!==e)if(e={context:e,memoizedValue:t,next:null},Mu===null){if(Ug===null)throw Error(tt(308));Mu=e,Ug.dependencies={lanes:0,firstContext:e}}else Mu=Mu.next=e;return t}var kl=null;function g1(e){kl===null?kl=[e]:kl.push(e)}function pT(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,g1(t)):(n.next=i.next,i.next=n),t.interleaved=n,Hs(e,r)}function Hs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fa=!1;function m1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ca(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,rn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Hs(e,n)}return i=r.interleaved,i===null?(t.next=t,g1(r)):(t.next=i.next,i.next=t),r.interleaved=t,Hs(e,n)}function sg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,t1(e,n)}}function uk(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wg(e,t,n,r){var i=e.updateQueue;fa=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,c=u=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,g=a;switch(h=t,p=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){d=b.call(p,d,h);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,h=typeof b=="function"?b.call(p,d,h):b,h==null)break e;d=Pn({},d,h);break e;case 2:fa=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);zl|=s,e.lanes=s,e.memoizedState=d}}function ck(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var wh={},Qo=Ka(wh),xf=Ka(wh),_f=Ka(wh);function Cl(e){if(e===wh)throw Error(tt(174));return e}function y1(e,t){switch(yn(_f,t),yn(xf,e),yn(Qo,wh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xw(t,e)}En(Qo),yn(Qo,t)}function dc(){En(Qo),En(xf),En(_f)}function mT(e){Cl(_f.current);var t=Cl(Qo.current),n=xw(t,e.type);t!==n&&(yn(xf,e),yn(Qo,n))}function v1(e){xf.current===e&&(En(Qo),En(xf))}var An=Ka(0);function Vg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var j0=[];function b1(){for(var e=0;e<j0.length;e++)j0[e]._workInProgressVersionPrimary=null;j0.length=0}var ag=Js.ReactCurrentDispatcher,A0=Js.ReactCurrentBatchConfig,Fl=0,Nn=null,nr=null,dr=null,qg=!1,Xd=!1,Ef=0,ZD=0;function Tr(){throw Error(tt(321))}function w1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ao(e[n],t[n]))return!1;return!0}function x1(e,t,n,r,i,o){if(Fl=o,Nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ag.current=e===null||e.memoizedState===null?rL:iL,e=n(r,i),Xd){o=0;do{if(Xd=!1,Ef=0,25<=o)throw Error(tt(301));o+=1,dr=nr=null,t.updateQueue=null,ag.current=oL,e=n(r,i)}while(Xd)}if(ag.current=Kg,t=nr!==null&&nr.next!==null,Fl=0,dr=nr=Nn=null,qg=!1,t)throw Error(tt(300));return e}function _1(){var e=Ef!==0;return Ef=0,e}function Go(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Nn.memoizedState=dr=e:dr=dr.next=e,dr}function so(){if(nr===null){var e=Nn.alternate;e=e!==null?e.memoizedState:null}else e=nr.next;var t=dr===null?Nn.memoizedState:dr.next;if(t!==null)dr=t,nr=e;else{if(e===null)throw Error(tt(310));nr=e,e={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},dr===null?Nn.memoizedState=dr=e:dr=dr.next=e}return dr}function Sf(e,t){return typeof t=="function"?t(e):t}function R0(e){var t=so(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=nr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Fl&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Nn.lanes|=c,zl|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Ao(r,t.memoizedState)||(pi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Nn.lanes|=o,zl|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function N0(e){var t=so(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Ao(o,t.memoizedState)||(pi=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function yT(){}function vT(e,t){var n=Nn,r=so(),i=t(),o=!Ao(r.memoizedState,i);if(o&&(r.memoizedState=i,pi=!0),r=r.queue,E1(xT.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||dr!==null&&dr.memoizedState.tag&1){if(n.flags|=2048,kf(9,wT.bind(null,n,r,i,t),void 0,null),fr===null)throw Error(tt(349));Fl&30||bT(n,t,i)}return i}function bT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wT(e,t,n,r){t.value=n,t.getSnapshot=r,_T(t)&&ET(e)}function xT(e,t,n){return n(function(){_T(t)&&ET(e)})}function _T(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ao(e,n)}catch(r){return!0}}function ET(e){var t=Hs(e,1);t!==null&&Co(t,e,1,-1)}function dk(e){var t=Go();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sf,lastRenderedState:e},t.queue=e,e=e.dispatch=nL.bind(null,Nn,e),[t.memoizedState,e]}function kf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ST(){return so().memoizedState}function lg(e,t,n,r){var i=Go();Nn.flags|=e,i.memoizedState=kf(1|t,n,void 0,r===void 0?null:r)}function vy(e,t,n,r){var i=so();r=r===void 0?null:r;var o=void 0;if(nr!==null){var s=nr.memoizedState;if(o=s.destroy,r!==null&&w1(r,s.deps)){i.memoizedState=kf(t,n,o,r);return}}Nn.flags|=e,i.memoizedState=kf(1|t,n,o,r)}function fk(e,t){return lg(8390656,8,e,t)}function E1(e,t){return vy(2048,8,e,t)}function kT(e,t){return vy(4,2,e,t)}function CT(e,t){return vy(4,4,e,t)}function jT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AT(e,t,n){return n=n!=null?n.concat([e]):null,vy(4,4,jT.bind(null,t,e),n)}function S1(){}function RT(e,t){var n=so();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&w1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function NT(e,t){var n=so();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&w1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function TT(e,t,n){return Fl&21?(Ao(n,t)||(n=MN(),Nn.lanes|=n,zl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pi=!0),e.memoizedState=n)}function eL(e,t){var n=ln;ln=n!==0&&4>n?n:4,e(!0);var r=A0.transition;A0.transition={};try{e(!1),t()}finally{ln=n,A0.transition=r}}function IT(){return so().memoizedState}function tL(e,t,n){var r=Aa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PT(e))OT(t,n);else if(n=pT(e,t,n,r),n!==null){var i=ri();Co(n,e,r,i),$T(n,t,r)}}function nL(e,t,n){var r=Aa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PT(e))OT(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Ao(a,s)){var l=t.interleaved;l===null?(i.next=i,g1(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch(u){}finally{}n=pT(e,t,i,r),n!==null&&(i=ri(),Co(n,e,r,i),$T(n,t,r))}}function PT(e){var t=e.alternate;return e===Nn||t!==null&&t===Nn}function OT(e,t){Xd=qg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $T(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,t1(e,n)}}var Kg={readContext:oo,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},rL={readContext:oo,useCallback:function(e,t){return Go().memoizedState=[e,t===void 0?null:t],e},useContext:oo,useEffect:fk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,lg(4194308,4,jT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lg(4194308,4,e,t)},useInsertionEffect:function(e,t){return lg(4,2,e,t)},useMemo:function(e,t){var n=Go();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Go();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tL.bind(null,Nn,e),[r.memoizedState,e]},useRef:function(e){var t=Go();return e={current:e},t.memoizedState=e},useState:dk,useDebugValue:S1,useDeferredValue:function(e){return Go().memoizedState=e},useTransition:function(){var e=dk(!1),t=e[0];return e=eL.bind(null,e[1]),Go().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Nn,i=Go();if(kn){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),fr===null)throw Error(tt(349));Fl&30||bT(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,fk(xT.bind(null,r,o,e),[e]),r.flags|=2048,kf(9,wT.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Go(),t=fr.identifierPrefix;if(kn){var n=Ts,r=Ns;n=(r&~(1<<32-ko(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ef++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ZD++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iL={readContext:oo,useCallback:RT,useContext:oo,useEffect:E1,useImperativeHandle:AT,useInsertionEffect:kT,useLayoutEffect:CT,useMemo:NT,useReducer:R0,useRef:ST,useState:function(){return R0(Sf)},useDebugValue:S1,useDeferredValue:function(e){var t=so();return TT(t,nr.memoizedState,e)},useTransition:function(){var e=R0(Sf)[0],t=so().memoizedState;return[e,t]},useMutableSource:yT,useSyncExternalStore:vT,useId:IT,unstable_isNewReconciler:!1},oL={readContext:oo,useCallback:RT,useContext:oo,useEffect:E1,useImperativeHandle:AT,useInsertionEffect:kT,useLayoutEffect:CT,useMemo:NT,useReducer:N0,useRef:ST,useState:function(){return N0(Sf)},useDebugValue:S1,useDeferredValue:function(e){var t=so();return nr===null?t.memoizedState=e:TT(t,nr.memoizedState,e)},useTransition:function(){var e=N0(Sf)[0],t=so().memoizedState;return[e,t]},useMutableSource:yT,useSyncExternalStore:vT,useId:IT,unstable_isNewReconciler:!1};function po(e,t){if(e&&e.defaultProps){t=Pn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Hw(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var by={isMounted:function(e){return(e=e._reactInternals)?lu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ri(),i=Aa(e),o=Os(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ca(e,o,i),t!==null&&(Co(t,e,i,r),sg(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ri(),i=Aa(e),o=Os(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ca(e,o,i),t!==null&&(Co(t,e,i,r),sg(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ri(),r=Aa(e),i=Os(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ca(e,i,r),t!==null&&(Co(t,e,r,n),sg(t,e,r))}};function hk(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!yf(n,r)||!yf(i,o):!0}function MT(e,t,n){var r=!1,i=Ma,o=t.contextType;return typeof o=="object"&&o!==null?o=oo(o):(i=bi(t)?Ll:Wr.current,r=t.contextTypes,o=(r=r!=null)?lc(e,i):Ma),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=by,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function pk(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&by.enqueueReplaceState(t,t.state,null)}function Uw(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},m1(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=oo(o):(o=bi(t)?Ll:Wr.current,i.context=lc(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Hw(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&by.enqueueReplaceState(i,i.state,null),Wg(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function fc(e,t){try{var n="",r=t;do n+=PM(r),r=r.return;while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function T0(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Ww(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sL=typeof WeakMap=="function"?WeakMap:Map;function DT(e,t,n){n=Os(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yg||(Yg=!0,ex=r),Ww(e,t)},n}function LT(e,t,n){n=Os(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ww(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ww(e,t),typeof r!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function gk(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new sL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wL.bind(null,e,t,n),t.then(e,e))}function mk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yk(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Os(-1,1),t.tag=2,Ca(n,t,1))),n.lanes|=1),e)}var aL=Js.ReactCurrentOwner,pi=!1;function ti(e,t,n,r){t.child=e===null?hT(t,null,n,r):cc(t,e.child,n,r)}function vk(e,t,n,r,i){n=n.render;var o=t.ref;return Ju(t,i),r=x1(e,t,n,r,o,i),n=_1(),e!==null&&!pi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Us(e,t,i)):(kn&&n&&u1(t),t.flags|=1,ti(e,t,r,i),t.child)}function bk(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!I1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,BT(e,t,o,r,i)):(e=fg(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:yf,n(s,r)&&e.ref===t.ref)return Us(e,t,i)}return t.flags|=1,e=Ra(o,r),e.ref=t.ref,e.return=t,t.child=e}function BT(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(yf(o,r)&&e.ref===t.ref)if(pi=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(pi=!0);else return t.lanes=e.lanes,Us(e,t,i)}return Vw(e,t,n,r,i)}function FT(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Lu,Ri),Ri|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yn(Lu,Ri),Ri|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,yn(Lu,Ri),Ri|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,yn(Lu,Ri),Ri|=r;return ti(e,t,i,n),t.child}function zT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vw(e,t,n,r,i){var o=bi(n)?Ll:Wr.current;return o=lc(t,o),Ju(t,i),n=x1(e,t,n,r,o,i),r=_1(),e!==null&&!pi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Us(e,t,i)):(kn&&r&&u1(t),t.flags|=1,ti(e,t,n,i),t.child)}function wk(e,t,n,r,i){if(bi(n)){var o=!0;Bg(t)}else o=!1;if(Ju(t,i),t.stateNode===null)ug(e,t),MT(t,n,r),Uw(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=oo(u):(u=bi(n)?Ll:Wr.current,u=lc(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&pk(t,s,r,u),fa=!1;var h=t.memoizedState;s.state=h,Wg(t,r,s,i),l=t.memoizedState,a!==r||h!==l||vi.current||fa?(typeof c=="function"&&(Hw(t,n,c,r),l=t.memoizedState),(a=fa||hk(t,n,a,r,h,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,gT(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:po(t.type,a),s.props=u,d=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=oo(l):(l=bi(n)?Ll:Wr.current,l=lc(t,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&pk(t,s,r,l),fa=!1,h=t.memoizedState,s.state=h,Wg(t,r,s,i);var b=t.memoizedState;a!==d||h!==b||vi.current||fa?(typeof p=="function"&&(Hw(t,n,p,r),b=t.memoizedState),(u=fa||hk(t,n,u,r,h,b,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),s.props=r,s.state=b,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return qw(e,t,n,r,o,i)}function qw(e,t,n,r,i,o){zT(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&ok(t,n,!1),Us(e,t,o);r=t.stateNode,aL.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=cc(t,e.child,null,o),t.child=cc(t,null,a,o)):ti(e,t,a,o),t.memoizedState=r.state,i&&ok(t,n,!0),t.child}function HT(e){var t=e.stateNode;t.pendingContext?ik(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ik(e,t.context,!1),y1(e,t.containerInfo)}function xk(e,t,n,r,i){return uc(),d1(i),t.flags|=256,ti(e,t,n,r),t.child}var Kw={dehydrated:null,treeContext:null,retryLane:0};function Gw(e){return{baseLanes:e,cachePool:null,transitions:null}}function UT(e,t,n){var r=t.pendingProps,i=An.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),yn(An,i&1),e===null)return Fw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=_y(s,r,0,null),e=Tl(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Gw(n),t.memoizedState=Kw,e):k1(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return lL(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ra(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ra(a,o):(o=Tl(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Gw(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=Kw,r}return o=e.child,e=o.sibling,r=Ra(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function k1(e,t){return t=_y({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yp(e,t,n,r){return r!==null&&d1(r),cc(t,e.child,null,n),e=k1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lL(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=T0(Error(tt(422))),yp(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=_y({mode:"visible",children:r.children},i,0,null),o=Tl(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&cc(t,e.child,null,s),t.child.memoizedState=Gw(s),t.memoizedState=Kw,o);if(!(t.mode&1))return yp(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(tt(419)),r=T0(o,r,void 0),yp(e,t,s,r)}if(a=(s&e.childLanes)!==0,pi||a){if(r=fr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Hs(e,i),Co(r,e,i,-1))}return T1(),r=T0(Error(tt(421))),yp(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=xL.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Pi=ka(i.nextSibling),$i=t,kn=!0,vo=null,e!==null&&(Yi[Xi++]=Ns,Yi[Xi++]=Ts,Yi[Xi++]=Bl,Ns=e.id,Ts=e.overflow,Bl=t),t=k1(t,r.children),t.flags|=4096,t)}function _k(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),zw(e.return,t,n)}function I0(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function WT(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ti(e,t,r.children,n),r=An.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_k(e,n,t);else if(e.tag===19)_k(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(yn(An,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Vg(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),I0(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Vg(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}I0(t,!0,n,null,o);break;case"together":I0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ug(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Us(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=Ra(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ra(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uL(e,t,n){switch(t.tag){case 3:HT(t),uc();break;case 5:mT(t);break;case 1:bi(t.type)&&Bg(t);break;case 4:y1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;yn(Hg,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(yn(An,An.current&1),t.flags|=128,null):n&t.child.childLanes?UT(e,t,n):(yn(An,An.current&1),e=Us(e,t,n),e!==null?e.sibling:null);yn(An,An.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return WT(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yn(An,An.current),r)break;return null;case 22:case 23:return t.lanes=0,FT(e,t,n)}return Us(e,t,n)}var VT,Yw,qT,KT;VT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yw=function(){};qT=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Cl(Qo.current);var o=null;switch(n){case"input":i=yw(e,i),r=yw(e,r),o=[];break;case"select":i=Pn({},i,{value:void 0}),r=Pn({},r,{value:void 0}),o=[];break;case"textarea":i=ww(e,i),r=ww(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Dg)}_w(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cf.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&vn("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};KT=function(e,t,n,r){n!==r&&(t.flags|=4)};function hd(e,t){if(!kn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ir(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cL(e,t,n){var r=t.pendingProps;switch(c1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(t),null;case 1:return bi(t.type)&&Lg(),Ir(t),null;case 3:return r=t.stateNode,dc(),En(vi),En(Wr),b1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vo!==null&&(rx(vo),vo=null))),Yw(e,t),Ir(t),null;case 5:v1(t);var i=Cl(_f.current);if(n=t.type,e!==null&&t.stateNode!=null)qT(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Ir(t),null}if(e=Cl(Qo.current),gp(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Yo]=t,r[wf]=o,e=(t.mode&1)!==0,n){case"dialog":vn("cancel",r),vn("close",r);break;case"iframe":case"object":case"embed":vn("load",r);break;case"video":case"audio":for(i=0;i<Nd.length;i++)vn(Nd[i],r);break;case"source":vn("error",r);break;case"img":case"image":case"link":vn("error",r),vn("load",r);break;case"details":vn("toggle",r);break;case"input":TS(r,o),vn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},vn("invalid",r);break;case"textarea":PS(r,o),vn("invalid",r)}_w(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&pp(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&pp(r.textContent,a,e),i=["children",""+a]):cf.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&vn("scroll",r)}switch(n){case"input":sp(r),IS(r,o,!0);break;case"textarea":sp(r),OS(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Dg)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Yo]=t,e[wf]=r,VT(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ew(n,r),n){case"dialog":vn("cancel",e),vn("close",e),i=r;break;case"iframe":case"object":case"embed":vn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nd.length;i++)vn(Nd[i],e);i=r;break;case"source":vn("error",e),i=r;break;case"img":case"image":case"link":vn("error",e),vn("load",e),i=r;break;case"details":vn("toggle",e),i=r;break;case"input":TS(e,r),i=yw(e,r),vn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pn({},r,{value:void 0}),vn("invalid",e);break;case"textarea":PS(e,r),i=ww(e,r),vn("invalid",e);break;default:i=r}_w(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?SN(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_N(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&df(e,l):typeof l=="number"&&df(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cf.hasOwnProperty(o)?l!=null&&o==="onScroll"&&vn("scroll",e):l!=null&&Y_(e,o,l,s))}switch(n){case"input":sp(e),IS(e,r,!1);break;case"textarea":sp(e),OS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$a(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ku(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ku(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Dg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ir(t),null;case 6:if(e&&t.stateNode!=null)KT(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=Cl(_f.current),Cl(Qo.current),gp(t)){if(r=t.stateNode,n=t.memoizedProps,r[Yo]=t,(o=r.nodeValue!==n)&&(e=$i,e!==null))switch(e.tag){case 3:pp(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pp(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yo]=t,t.stateNode=r}return Ir(t),null;case 13:if(En(An),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kn&&Pi!==null&&t.mode&1&&!(t.flags&128))dT(),uc(),t.flags|=98560,o=!1;else if(o=gp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(tt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(tt(317));o[Yo]=t}else uc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ir(t),o=!1}else vo!==null&&(rx(vo),vo=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||An.current&1?ir===0&&(ir=3):T1())),t.updateQueue!==null&&(t.flags|=4),Ir(t),null);case 4:return dc(),Yw(e,t),e===null&&vf(t.stateNode.containerInfo),Ir(t),null;case 10:return p1(t.type._context),Ir(t),null;case 17:return bi(t.type)&&Lg(),Ir(t),null;case 19:if(En(An),o=t.memoizedState,o===null)return Ir(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)hd(o,!1);else{if(ir!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Vg(e),s!==null){for(t.flags|=128,hd(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yn(An,An.current&1|2),t.child}e=e.sibling}o.tail!==null&&Un()>hc&&(t.flags|=128,r=!0,hd(o,!1),t.lanes=4194304)}else{if(!r)if(e=Vg(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!kn)return Ir(t),null}else 2*Un()-o.renderingStartTime>hc&&n!==1073741824&&(t.flags|=128,r=!0,hd(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Un(),t.sibling=null,n=An.current,yn(An,r?n&1|2:n&1),t):(Ir(t),null);case 22:case 23:return N1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ri&1073741824&&(Ir(t),t.subtreeFlags&6&&(t.flags|=8192)):Ir(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function dL(e,t){switch(c1(t),t.tag){case 1:return bi(t.type)&&Lg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dc(),En(vi),En(Wr),b1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return v1(t),null;case 13:if(En(An),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));uc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return En(An),null;case 4:return dc(),null;case 10:return p1(t.type._context),null;case 22:case 23:return N1(),null;case 24:return null;default:return null}}var vp=!1,Mr=!1,fL=typeof WeakSet=="function"?WeakSet:Set,Et=null;function Du(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dn(e,t,r)}else n.current=null}function Xw(e,t,n){try{n()}catch(r){Dn(e,t,r)}}var Ek=!1;function hL(e,t){if(Pw=Og,e=QN(),l1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(E){n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++u===i&&(a=s),h===o&&++c===r&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ow={focusedElem:e,selectionRange:n},Og=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){t=Et;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,x=b.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:po(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(E){Dn(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}return b=Ek,Ek=!1,b}function Jd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Xw(t,n,o)}i=i.next}while(i!==r)}}function wy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Jw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function GT(e){var t=e.alternate;t!==null&&(e.alternate=null,GT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yo],delete t[wf],delete t[Dw],delete t[YD],delete t[XD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YT(e){return e.tag===5||e.tag===3||e.tag===4}function Sk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Dg));else if(r!==4&&(e=e.child,e!==null))for(Qw(e,t,n),e=e.sibling;e!==null;)Qw(e,t,n),e=e.sibling}function Zw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Zw(e,t,n),e=e.sibling;e!==null;)Zw(e,t,n),e=e.sibling}var vr=null,mo=!1;function sa(e,t,n){for(n=n.child;n!==null;)XT(e,t,n),n=n.sibling}function XT(e,t,n){if(Jo&&typeof Jo.onCommitFiberUnmount=="function")try{Jo.onCommitFiberUnmount(fy,n)}catch(a){}switch(n.tag){case 5:Mr||Du(n,t);case 6:var r=vr,i=mo;vr=null,sa(e,t,n),vr=r,mo=i,vr!==null&&(mo?(e=vr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vr.removeChild(n.stateNode));break;case 18:vr!==null&&(mo?(e=vr,n=n.stateNode,e.nodeType===8?k0(e.parentNode,n):e.nodeType===1&&k0(e,n),gf(e)):k0(vr,n.stateNode));break;case 4:r=vr,i=mo,vr=n.stateNode.containerInfo,mo=!0,sa(e,t,n),vr=r,mo=i;break;case 0:case 11:case 14:case 15:if(!Mr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Xw(n,t,s),i=i.next}while(i!==r)}sa(e,t,n);break;case 1:if(!Mr&&(Du(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Dn(n,t,a)}sa(e,t,n);break;case 21:sa(e,t,n);break;case 22:n.mode&1?(Mr=(r=Mr)||n.memoizedState!==null,sa(e,t,n),Mr=r):sa(e,t,n);break;default:sa(e,t,n)}}function kk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fL),t.forEach(function(r){var i=_L.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ho(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:vr=a.stateNode,mo=!1;break e;case 3:vr=a.stateNode.containerInfo,mo=!0;break e;case 4:vr=a.stateNode.containerInfo,mo=!0;break e}a=a.return}if(vr===null)throw Error(tt(160));XT(o,s,i),vr=null,mo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Dn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)JT(t,e),t=t.sibling}function JT(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ho(t,e),Vo(e),r&4){try{Jd(3,e,e.return),wy(3,e)}catch(g){Dn(e,e.return,g)}try{Jd(5,e,e.return)}catch(g){Dn(e,e.return,g)}}break;case 1:ho(t,e),Vo(e),r&512&&n!==null&&Du(n,n.return);break;case 5:if(ho(t,e),Vo(e),r&512&&n!==null&&Du(n,n.return),e.flags&32){var i=e.stateNode;try{df(i,"")}catch(g){Dn(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&bN(i,o),Ew(a,s);var u=Ew(a,o);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?SN(i,d):c==="dangerouslySetInnerHTML"?_N(i,d):c==="children"?df(i,d):Y_(i,c,d,u)}switch(a){case"input":vw(i,o);break;case"textarea":wN(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Ku(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Ku(i,!!o.multiple,o.defaultValue,!0):Ku(i,!!o.multiple,o.multiple?[]:"",!1))}i[wf]=o}catch(g){Dn(e,e.return,g)}}break;case 6:if(ho(t,e),Vo(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Dn(e,e.return,g)}}break;case 3:if(ho(t,e),Vo(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gf(t.containerInfo)}catch(g){Dn(e,e.return,g)}break;case 4:ho(t,e),Vo(e);break;case 13:ho(t,e),Vo(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(A1=Un())),r&4&&kk(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Mr=(u=Mr)||c,ho(t,e),Mr=u):ho(t,e),Vo(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Et=e,c=e.child;c!==null;){for(d=Et=c;Et!==null;){switch(h=Et,p=h.child,h.tag){case 0:case 11:case 14:case 15:Jd(4,h,h.return);break;case 1:Du(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){Dn(r,n,g)}}break;case 5:Du(h,h.return);break;case 22:if(h.memoizedState!==null){jk(d);continue}}p!==null?(p.return=h,Et=p):jk(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=EN("display",s))}catch(g){Dn(e,e.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Dn(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ho(t,e),Vo(e),r&4&&kk(e);break;case 21:break;default:ho(t,e),Vo(e)}}function Vo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(YT(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(df(i,""),r.flags&=-33);var o=Sk(e);Zw(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Sk(e);Qw(e,a,s);break;default:throw Error(tt(161))}}catch(l){Dn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pL(e,t,n){Et=e,QT(e)}function QT(e,t,n){for(var r=(e.mode&1)!==0;Et!==null;){var i=Et,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||vp;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mr;a=vp;var u=Mr;if(vp=s,(Mr=l)&&!u)for(Et=i;Et!==null;)s=Et,l=s.child,s.tag===22&&s.memoizedState!==null?Ak(i):l!==null?(l.return=s,Et=l):Ak(i);for(;o!==null;)Et=o,QT(o),o=o.sibling;Et=i,vp=a,Mr=u}Ck(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Et=o):Ck(e)}}function Ck(e){for(;Et!==null;){var t=Et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mr||wy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Mr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:po(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ck(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ck(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&gf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}Mr||t.flags&512&&Jw(t)}catch(h){Dn(t,t.return,h)}}if(t===e){Et=null;break}if(n=t.sibling,n!==null){n.return=t.return,Et=n;break}Et=t.return}}function jk(e){for(;Et!==null;){var t=Et;if(t===e){Et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Et=n;break}Et=t.return}}function Ak(e){for(;Et!==null;){var t=Et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{wy(4,t)}catch(l){Dn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Dn(t,i,l)}}var o=t.return;try{Jw(t)}catch(l){Dn(t,o,l)}break;case 5:var s=t.return;try{Jw(t)}catch(l){Dn(t,s,l)}}}catch(l){Dn(t,t.return,l)}if(t===e){Et=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Et=a;break}Et=t.return}}var gL=Math.ceil,Gg=Js.ReactCurrentDispatcher,C1=Js.ReactCurrentOwner,to=Js.ReactCurrentBatchConfig,rn=0,fr=null,Gn=null,_r=0,Ri=0,Lu=Ka(0),ir=0,Cf=null,zl=0,xy=0,j1=0,Qd=null,di=null,A1=0,hc=1/0,xs=null,Yg=!1,ex=null,ja=null,bp=!1,wa=null,Xg=0,Zd=0,tx=null,cg=-1,dg=0;function ri(){return rn&6?Un():cg!==-1?cg:cg=Un()}function Aa(e){return e.mode&1?rn&2&&_r!==0?_r&-_r:QD.transition!==null?(dg===0&&(dg=MN()),dg):(e=ln,e!==0||(e=window.event,e=e===void 0?16:UN(e.type)),e):1}function Co(e,t,n,r){if(50<Zd)throw Zd=0,tx=null,Error(tt(185));yh(e,n,r),(!(rn&2)||e!==fr)&&(e===fr&&(!(rn&2)&&(xy|=n),ir===4&&ma(e,_r)),wi(e,r),n===1&&rn===0&&!(t.mode&1)&&(hc=Un()+500,yy&&Ga()))}function wi(e,t){var n=e.callbackNode;QM(e,t);var r=Pg(e,e===fr?_r:0);if(r===0)n!==null&&DS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&DS(n),t===1)e.tag===0?JD(Rk.bind(null,e)):lT(Rk.bind(null,e)),KD(function(){!(rn&6)&&Ga()}),n=null;else{switch(DN(r)){case 1:n=e1;break;case 4:n=ON;break;case 16:n=Ig;break;case 536870912:n=$N;break;default:n=Ig}n=sI(n,ZT.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ZT(e,t){if(cg=-1,dg=0,rn&6)throw Error(tt(327));var n=e.callbackNode;if(Qu()&&e.callbackNode!==n)return null;var r=Pg(e,e===fr?_r:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Jg(e,r);else{t=r;var i=rn;rn|=2;var o=tI();(fr!==e||_r!==t)&&(xs=null,hc=Un()+500,Nl(e,t));do try{vL();break}catch(a){eI(e,a)}while(!0);h1(),Gg.current=o,rn=i,Gn!==null?t=0:(fr=null,_r=0,t=ir)}if(t!==0){if(t===2&&(i=Aw(e),i!==0&&(r=i,t=nx(e,i))),t===1)throw n=Cf,Nl(e,0),ma(e,r),wi(e,Un()),n;if(t===6)ma(e,r);else{if(i=e.current.alternate,!(r&30)&&!mL(i)&&(t=Jg(e,r),t===2&&(o=Aw(e),o!==0&&(r=o,t=nx(e,o))),t===1))throw n=Cf,Nl(e,0),ma(e,r),wi(e,Un()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:gl(e,di,xs);break;case 3:if(ma(e,r),(r&130023424)===r&&(t=A1+500-Un(),10<t)){if(Pg(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ri(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Mw(gl.bind(null,e,di,xs),t);break}gl(e,di,xs);break;case 4:if(ma(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ko(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gL(r/1960))-r,10<r){e.timeoutHandle=Mw(gl.bind(null,e,di,xs),r);break}gl(e,di,xs);break;case 5:gl(e,di,xs);break;default:throw Error(tt(329))}}}return wi(e,Un()),e.callbackNode===n?ZT.bind(null,e):null}function nx(e,t){var n=Qd;return e.current.memoizedState.isDehydrated&&(Nl(e,t).flags|=256),e=Jg(e,t),e!==2&&(t=di,di=n,t!==null&&rx(t)),e}function rx(e){di===null?di=e:di.push.apply(di,e)}function mL(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ao(o(),i))return!1}catch(s){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ma(e,t){for(t&=~j1,t&=~xy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ko(t),r=1<<n;e[n]=-1,t&=~r}}function Rk(e){if(rn&6)throw Error(tt(327));Qu();var t=Pg(e,0);if(!(t&1))return wi(e,Un()),null;var n=Jg(e,t);if(e.tag!==0&&n===2){var r=Aw(e);r!==0&&(t=r,n=nx(e,r))}if(n===1)throw n=Cf,Nl(e,0),ma(e,t),wi(e,Un()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gl(e,di,xs),wi(e,Un()),null}function R1(e,t){var n=rn;rn|=1;try{return e(t)}finally{rn=n,rn===0&&(hc=Un()+500,yy&&Ga())}}function Hl(e){wa!==null&&wa.tag===0&&!(rn&6)&&Qu();var t=rn;rn|=1;var n=to.transition,r=ln;try{if(to.transition=null,ln=1,e)return e()}finally{ln=r,to.transition=n,rn=t,!(rn&6)&&Ga()}}function N1(){Ri=Lu.current,En(Lu)}function Nl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qD(n)),Gn!==null)for(n=Gn.return;n!==null;){var r=n;switch(c1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lg();break;case 3:dc(),En(vi),En(Wr),b1();break;case 5:v1(r);break;case 4:dc();break;case 13:En(An);break;case 19:En(An);break;case 10:p1(r.type._context);break;case 22:case 23:N1()}n=n.return}if(fr=e,Gn=e=Ra(e.current,null),_r=Ri=t,ir=0,Cf=null,j1=xy=zl=0,di=Qd=null,kl!==null){for(t=0;t<kl.length;t++)if(n=kl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}kl=null}return e}function eI(e,t){do{var n=Gn;try{if(h1(),ag.current=Kg,qg){for(var r=Nn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qg=!1}if(Fl=0,dr=nr=Nn=null,Xd=!1,Ef=0,C1.current=null,n===null||n.return===null){ir=1,Cf=t,Gn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=_r,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=mk(s);if(p!==null){p.flags&=-257,yk(p,s,a,o,t),p.mode&1&&gk(o,u,t),t=p,l=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(l),t.updateQueue=g}else b.add(l);break e}else{if(!(t&1)){gk(o,u,t),T1();break e}l=Error(tt(426))}}else if(kn&&a.mode&1){var x=mk(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),yk(x,s,a,o,t),d1(fc(l,a));break e}}o=l=fc(l,a),ir!==4&&(ir=2),Qd===null?Qd=[o]:Qd.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=DT(o,l,t);uk(o,y);break e;case 1:a=l;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ja===null||!ja.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=LT(o,a,t);uk(o,E);break e}}o=o.return}while(o!==null)}rI(n)}catch(S){t=S,Gn===n&&n!==null&&(Gn=n=n.return);continue}break}while(!0)}function tI(){var e=Gg.current;return Gg.current=Kg,e===null?Kg:e}function T1(){(ir===0||ir===3||ir===2)&&(ir=4),fr===null||!(zl&268435455)&&!(xy&268435455)||ma(fr,_r)}function Jg(e,t){var n=rn;rn|=2;var r=tI();(fr!==e||_r!==t)&&(xs=null,Nl(e,t));do try{yL();break}catch(i){eI(e,i)}while(!0);if(h1(),rn=n,Gg.current=r,Gn!==null)throw Error(tt(261));return fr=null,_r=0,ir}function yL(){for(;Gn!==null;)nI(Gn)}function vL(){for(;Gn!==null&&!UM();)nI(Gn)}function nI(e){var t=oI(e.alternate,e,Ri);e.memoizedProps=e.pendingProps,t===null?rI(e):Gn=t,C1.current=null}function rI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dL(n,t),n!==null){n.flags&=32767,Gn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ir=6,Gn=null;return}}else if(n=cL(n,t,Ri),n!==null){Gn=n;return}if(t=t.sibling,t!==null){Gn=t;return}Gn=t=e}while(t!==null);ir===0&&(ir=5)}function gl(e,t,n){var r=ln,i=to.transition;try{to.transition=null,ln=1,bL(e,t,n,r)}finally{to.transition=i,ln=r}return null}function bL(e,t,n,r){do Qu();while(wa!==null);if(rn&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(ZM(e,o),e===fr&&(Gn=fr=null,_r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bp||(bp=!0,sI(Ig,function(){return Qu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=to.transition,to.transition=null;var s=ln;ln=1;var a=rn;rn|=4,C1.current=null,hL(e,n),JT(n,e),BD(Ow),Og=!!Pw,Ow=Pw=null,e.current=n,pL(n),WM(),rn=a,ln=s,to.transition=o}else e.current=n;if(bp&&(bp=!1,wa=e,Xg=i),o=e.pendingLanes,o===0&&(ja=null),KM(n.stateNode),wi(e,Un()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yg)throw Yg=!1,e=ex,ex=null,e;return Xg&1&&e.tag!==0&&Qu(),o=e.pendingLanes,o&1?e===tx?Zd++:(Zd=0,tx=e):Zd=0,Ga(),null}function Qu(){if(wa!==null){var e=DN(Xg),t=to.transition,n=ln;try{if(to.transition=null,ln=16>e?16:e,wa===null)var r=!1;else{if(e=wa,wa=null,Xg=0,rn&6)throw Error(tt(331));var i=rn;for(rn|=4,Et=e.current;Et!==null;){var o=Et,s=o.child;if(Et.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Et=u;Et!==null;){var c=Et;switch(c.tag){case 0:case 11:case 15:Jd(8,c,o)}var d=c.child;if(d!==null)d.return=c,Et=d;else for(;Et!==null;){c=Et;var h=c.sibling,p=c.return;if(GT(c),c===u){Et=null;break}if(h!==null){h.return=p,Et=h;break}Et=p}}}var b=o.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Et=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Et=s;else e:for(;Et!==null;){if(o=Et,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Jd(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Et=y;break e}Et=o.return}}var v=e.current;for(Et=v;Et!==null;){s=Et;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,Et=w;else e:for(s=v;Et!==null;){if(a=Et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wy(9,a)}}catch(S){Dn(a,a.return,S)}if(a===s){Et=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Et=E;break e}Et=a.return}}if(rn=i,Ga(),Jo&&typeof Jo.onPostCommitFiberRoot=="function")try{Jo.onPostCommitFiberRoot(fy,e)}catch(S){}r=!0}return r}finally{ln=n,to.transition=t}}return!1}function Nk(e,t,n){t=fc(n,t),t=DT(e,t,1),e=Ca(e,t,1),t=ri(),e!==null&&(yh(e,1,t),wi(e,t))}function Dn(e,t,n){if(e.tag===3)Nk(e,e,n);else for(;t!==null;){if(t.tag===3){Nk(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ja===null||!ja.has(r))){e=fc(n,e),e=LT(t,e,1),t=Ca(t,e,1),e=ri(),t!==null&&(yh(t,1,e),wi(t,e));break}}t=t.return}}function wL(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ri(),e.pingedLanes|=e.suspendedLanes&n,fr===e&&(_r&n)===n&&(ir===4||ir===3&&(_r&130023424)===_r&&500>Un()-A1?Nl(e,0):j1|=n),wi(e,t)}function iI(e,t){t===0&&(e.mode&1?(t=up,up<<=1,!(up&130023424)&&(up=4194304)):t=1);var n=ri();e=Hs(e,t),e!==null&&(yh(e,t,n),wi(e,n))}function xL(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),iI(e,n)}function _L(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),iI(e,n)}var oI;oI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vi.current)pi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return pi=!1,uL(e,t,n);pi=!!(e.flags&131072)}else pi=!1,kn&&t.flags&1048576&&uT(t,zg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ug(e,t),e=t.pendingProps;var i=lc(t,Wr.current);Ju(t,n),i=x1(null,t,r,e,i,n);var o=_1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bi(r)?(o=!0,Bg(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,m1(t),i.updater=by,t.stateNode=i,i._reactInternals=t,Uw(t,r,e,n),t=qw(null,t,r,!0,o,n)):(t.tag=0,kn&&o&&u1(t),ti(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ug(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=SL(r),e=po(r,e),i){case 0:t=Vw(null,t,r,e,n);break e;case 1:t=wk(null,t,r,e,n);break e;case 11:t=vk(null,t,r,e,n);break e;case 14:t=bk(null,t,r,po(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:po(r,i),Vw(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:po(r,i),wk(e,t,r,i,n);case 3:e:{if(HT(t),e===null)throw Error(tt(387));r=t.pendingProps,o=t.memoizedState,i=o.element,gT(e,t),Wg(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=fc(Error(tt(423)),t),t=xk(e,t,r,n,i);break e}else if(r!==i){i=fc(Error(tt(424)),t),t=xk(e,t,r,n,i);break e}else for(Pi=ka(t.stateNode.containerInfo.firstChild),$i=t,kn=!0,vo=null,n=hT(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uc(),r===i){t=Us(e,t,n);break e}ti(e,t,r,n)}t=t.child}return t;case 5:return mT(t),e===null&&Fw(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,$w(r,i)?s=null:o!==null&&$w(r,o)&&(t.flags|=32),zT(e,t),ti(e,t,s,n),t.child;case 6:return e===null&&Fw(t),null;case 13:return UT(e,t,n);case 4:return y1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=cc(t,null,r,n):ti(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:po(r,i),vk(e,t,r,i,n);case 7:return ti(e,t,t.pendingProps,n),t.child;case 8:return ti(e,t,t.pendingProps.children,n),t.child;case 12:return ti(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,yn(Hg,r._currentValue),r._currentValue=s,o!==null)if(Ao(o.value,s)){if(o.children===i.children&&!vi.current){t=Us(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Os(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zw(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(tt(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zw(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ti(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ju(t,n),i=oo(i),r=r(i),t.flags|=1,ti(e,t,r,n),t.child;case 14:return r=t.type,i=po(r,t.pendingProps),i=po(r.type,i),bk(e,t,r,i,n);case 15:return BT(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:po(r,i),ug(e,t),t.tag=1,bi(r)?(e=!0,Bg(t)):e=!1,Ju(t,n),MT(t,r,i),Uw(t,r,i,n),qw(null,t,r,!0,e,n);case 19:return WT(e,t,n);case 22:return FT(e,t,n)}throw Error(tt(156,t.tag))};function sI(e,t){return PN(e,t)}function EL(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(e,t,n,r){return new EL(e,t,n,r)}function I1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SL(e){if(typeof e=="function")return I1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J_)return 11;if(e===Q_)return 14}return 2}function Ra(e,t){var n=e.alternate;return n===null?(n=Zi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fg(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")I1(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Au:return Tl(n.children,i,o,t);case X_:s=8,i|=8;break;case hw:return e=Zi(12,n,t,i|2),e.elementType=hw,e.lanes=o,e;case pw:return e=Zi(13,n,t,i),e.elementType=pw,e.lanes=o,e;case gw:return e=Zi(19,n,t,i),e.elementType=gw,e.lanes=o,e;case mN:return _y(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pN:s=10;break e;case gN:s=9;break e;case J_:s=11;break e;case Q_:s=14;break e;case da:s=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Zi(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Tl(e,t,n,r){return e=Zi(7,e,r,t),e.lanes=n,e}function _y(e,t,n,r){return e=Zi(22,e,r,t),e.elementType=mN,e.lanes=n,e.stateNode={isHidden:!1},e}function P0(e,t,n){return e=Zi(6,e,null,t),e.lanes=n,e}function O0(e,t,n){return t=Zi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kL(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p0(0),this.expirationTimes=p0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function P1(e,t,n,r,i,o,s,a,l){return e=new kL(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Zi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},m1(o),e}function CL(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ju,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function aI(e){if(!e)return Ma;e=e._reactInternals;e:{if(lu(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(bi(n))return aT(e,n,t)}return t}function lI(e,t,n,r,i,o,s,a,l){return e=P1(n,r,!0,e,i,o,s,a,l),e.context=aI(null),n=e.current,r=ri(),i=Aa(n),o=Os(r,i),o.callback=t!=null?t:null,Ca(n,o,i),e.current.lanes=i,yh(e,i,r),wi(e,r),e}function Ey(e,t,n,r){var i=t.current,o=ri(),s=Aa(i);return n=aI(n),t.context===null?t.context=n:t.pendingContext=n,t=Os(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ca(i,t,s),e!==null&&(Co(e,i,s,o),sg(e,i,s)),s}function Qg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Tk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function O1(e,t){Tk(e,t),(e=e.alternate)&&Tk(e,t)}function jL(){return null}var uI=typeof reportError=="function"?reportError:function(e){console.error(e)};function $1(e){this._internalRoot=e}Sy.prototype.render=$1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));Ey(e,t,null,null)};Sy.prototype.unmount=$1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hl(function(){Ey(null,e,null,null)}),t[zs]=null}};function Sy(e){this._internalRoot=e}Sy.prototype.unstable_scheduleHydration=function(e){if(e){var t=FN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ga.length&&t!==0&&t<ga[n].priority;n++);ga.splice(n,0,e),n===0&&HN(e)}};function M1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ky(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ik(){}function AL(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Qg(s);o.call(u)}}var s=lI(t,r,e,0,null,!1,!1,"",Ik);return e._reactRootContainer=s,e[zs]=s.current,vf(e.nodeType===8?e.parentNode:e),Hl(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Qg(l);a.call(u)}}var l=P1(e,0,!1,null,null,!1,!1,"",Ik);return e._reactRootContainer=l,e[zs]=l.current,vf(e.nodeType===8?e.parentNode:e),Hl(function(){Ey(t,l,n,r)}),l}function Cy(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Qg(s);a.call(l)}}Ey(t,s,e,i)}else s=AL(n,t,e,i,r);return Qg(s)}LN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rd(t.pendingLanes);n!==0&&(t1(t,n|1),wi(t,Un()),!(rn&6)&&(hc=Un()+500,Ga()))}break;case 13:Hl(function(){var r=Hs(e,1);if(r!==null){var i=ri();Co(r,e,1,i)}}),O1(e,1)}};n1=function(e){if(e.tag===13){var t=Hs(e,134217728);if(t!==null){var n=ri();Co(t,e,134217728,n)}O1(e,134217728)}};BN=function(e){if(e.tag===13){var t=Aa(e),n=Hs(e,t);if(n!==null){var r=ri();Co(n,e,t,r)}O1(e,t)}};FN=function(){return ln};zN=function(e,t){var n=ln;try{return ln=e,t()}finally{ln=n}};kw=function(e,t,n){switch(t){case"input":if(vw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=my(r);if(!i)throw Error(tt(90));vN(r),vw(r,i)}}}break;case"textarea":wN(e,n);break;case"select":t=n.value,t!=null&&Ku(e,!!n.multiple,t,!1)}};jN=R1;AN=Hl;var RL={usingClientEntryPoint:!1,Events:[bh,Iu,my,kN,CN,R1]},pd={findFiberByHostInstance:Sl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NL={bundleType:pd.bundleType,version:pd.version,rendererPackageName:pd.rendererPackageName,rendererConfig:pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Js.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=TN(e),e===null?null:e.stateNode},findFiberByHostInstance:pd.findFiberByHostInstance||jL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wp.isDisabled&&wp.supportsFiber)try{fy=wp.inject(NL),Jo=wp}catch(e){}}Ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RL;Ui.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M1(t))throw Error(tt(200));return CL(e,t,null,n)};Ui.createRoot=function(e,t){if(!M1(e))throw Error(tt(299));var n=!1,r="",i=uI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=P1(e,1,!1,null,null,n,!1,r,i),e[zs]=t.current,vf(e.nodeType===8?e.parentNode:e),new $1(t)};Ui.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=TN(t),e=e===null?null:e.stateNode,e};Ui.flushSync=function(e){return Hl(e)};Ui.hydrate=function(e,t,n){if(!ky(t))throw Error(tt(200));return Cy(null,e,t,!0,n)};Ui.hydrateRoot=function(e,t,n){if(!M1(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=uI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=lI(t,null,e,1,n!=null?n:null,i,!1,o,s),e[zs]=t.current,vf(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Sy(t)};Ui.render=function(e,t,n){if(!ky(t))throw Error(tt(200));return Cy(null,e,t,!1,n)};Ui.unmountComponentAtNode=function(e){if(!ky(e))throw Error(tt(40));return e._reactRootContainer?(Hl(function(){Cy(null,null,e,!1,function(){e._reactRootContainer=null,e[zs]=null})}),!0):!1};Ui.unstable_batchedUpdates=R1;Ui.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ky(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return Cy(e,t,n,!1,r)};Ui.version="18.3.1-next-f1338f8080-20240426";function cI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cI)}catch(e){console.error(e)}}cI(),cN.exports=Ui;var jy=cN.exports;const dI=Xs(jy);var fI,Pk=jy;fI=Pk.createRoot,Pk.hydrateRoot;var D1={};Object.defineProperty(D1,"__esModule",{value:!0});D1.parse=DL;D1.serialize=LL;const TL=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,IL=/^[\u0021-\u003A\u003C-\u007E]*$/,PL=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,OL=/^[\u0020-\u003A\u003D-\u007E]*$/,$L=Object.prototype.toString,ML=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function DL(e,t){const n=new ML,r=e.length;if(r<2)return n;const i=(t==null?void 0:t.decode)||BL;let o=0;do{const s=e.indexOf("=",o);if(s===-1)break;const a=e.indexOf(";",o),l=a===-1?r:a;if(s>l){o=e.lastIndexOf(";",s-1)+1;continue}const u=Ok(e,o,s),c=$k(e,s,u),d=e.slice(u,c);if(n[d]===void 0){let h=Ok(e,s+1,l),p=$k(e,l,h);const b=i(e.slice(h,p));n[d]=b}o=l+1}while(o<r);return n}function Ok(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function $k(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function LL(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!TL.test(e))throw new TypeError("argument name is invalid: ".concat(e));const i=r(t);if(!IL.test(i))throw new TypeError("argument val is invalid: ".concat(t));let o=e+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError("option maxAge is invalid: ".concat(n.maxAge));o+="; Max-Age="+n.maxAge}if(n.domain){if(!PL.test(n.domain))throw new TypeError("option domain is invalid: ".concat(n.domain));o+="; Domain="+n.domain}if(n.path){if(!OL.test(n.path))throw new TypeError("option path is invalid: ".concat(n.path));o+="; Path="+n.path}if(n.expires){if(!FL(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError("option expires is invalid: ".concat(n.expires));o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid: ".concat(n.priority))}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid: ".concat(n.sameSite))}return o}function BL(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch(t){return e}}function FL(e){return $L.call(e)==="[object Date]"}var Mk="popstate";function zL(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return ix("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:jf(i)}return UL(t,n,null,e)}function Tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function os(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function HL(){return Math.random().toString(36).substring(2,10)}function Dk(e,t){return{usr:e.state,key:e.key,idx:t}}function ix(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Dc(t):t,state:n,key:t&&t.key||r||HL()}}function jf({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Dc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function UL(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=c();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function c(){return(s.state||{idx:null}).idx}function d(){a="POP";let x=c(),y=x==null?null:x-u;u=x,l&&l({action:a,location:g.location,delta:y})}function h(x,y){a="PUSH";let v=ix(g.location,x,y);u=c()+1;let w=Dk(v,u),E=g.createHref(v);try{s.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}o&&l&&l({action:a,location:g.location,delta:1})}function p(x,y){a="REPLACE";let v=ix(g.location,x,y);u=c();let w=Dk(v,u),E=g.createHref(v);s.replaceState(w,"",E),o&&l&&l({action:a,location:g.location,delta:0})}function b(x){return WL(x)}let g={get action(){return a},get location(){return e(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Mk,d),l=x,()=>{i.removeEventListener(Mk,d),l=null}},createHref(x){return t(i,x)},createURL:b,encodeLocation(x){let y=b(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(x){return s.go(x)}};return g}function WL(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Tn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:jf(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function hI(e,t,n="/"){return VL(e,t,n,!1)}function VL(e,t,n,r){let i=typeof t=="string"?Dc(t):t,o=Ws(i.pathname||"/",n);if(o==null)return null;let s=pI(e);qL(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=rB(o);a=tB(s[l],u,r)}return a}function pI(e,t=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Tn(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length));let u=$s([r,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(Tn(o.index!==!0,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(u,'".')),pI(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:ZL(u,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of gI(o.path))i(o,s,l)}),t}function gI(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=gI(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function qL(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:eB(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var KL=/^:[\w-]+$/,GL=3,YL=2,XL=1,JL=10,QL=-2,Lk=e=>e==="*";function ZL(e,t){let n=e.split("/"),r=n.length;return n.some(Lk)&&(r+=QL),t&&(r+=YL),n.filter(i=>!Lk(i)).reduce((i,o)=>i+(KL.test(o)?GL:o===""?XL:JL),r)}function eB(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function tB(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",d=Zg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Zg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:$s([o,d.pathname]),pathnameBase:aB($s([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=$s([o,d.pathnameBase]))}return s}function Zg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=nB(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},h)=>{if(c==="*"){let b=a[h]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const p=a[h];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function nB(e,t=!1,n=!0){os(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function rB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return os(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function Ws(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function iB(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Dc(e):e;return{pathname:n?n.startsWith("/")?n:oB(n,t):t,search:lB(r),hash:uB(i)}}function oB(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $0(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function sB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function mI(e){let t=sB(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function yI(e,t,n,r=!1){let i;typeof e=="string"?i=Dc(e):(i={...e},Tn(!i.pathname||!i.pathname.includes("?"),$0("?","pathname","search",i)),Tn(!i.pathname||!i.pathname.includes("#"),$0("#","pathname","hash",i)),Tn(!i.search||!i.search.includes("#"),$0("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=t.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=iB(i,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var $s=e=>e.join("/").replace(/\/\/+/g,"/"),aB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var vI=["POST","PUT","PATCH","DELETE"];new Set(vI);var dB=["GET",...vI];new Set(dB);var Lc=k.createContext(null);Lc.displayName="DataRouter";var Ay=k.createContext(null);Ay.displayName="DataRouterState";var bI=k.createContext({isTransitioning:!1});bI.displayName="ViewTransition";var fB=k.createContext(new Map);fB.displayName="Fetchers";var hB=k.createContext(null);hB.displayName="Await";var cs=k.createContext(null);cs.displayName="Navigation";var xh=k.createContext(null);xh.displayName="Location";var To=k.createContext({outlet:null,matches:[],isDataRoute:!1});To.displayName="Route";var L1=k.createContext(null);L1.displayName="RouteError";function pB(e,{relative:t}={}){Tn(_h(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(cs),{hash:i,pathname:o,search:s}=Sh(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:$s([n,o])),r.createHref({pathname:a,search:s,hash:i})}function _h(){return k.useContext(xh)!=null}function uu(){return Tn(_h(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(xh).location}var wI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xI(e){k.useContext(cs).static||k.useLayoutEffect(e)}function Eh(){let{isDataRoute:e}=k.useContext(To);return e?RB():gB()}function gB(){Tn(_h(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(Lc),{basename:t,navigator:n}=k.useContext(cs),{matches:r}=k.useContext(To),{pathname:i}=uu(),o=JSON.stringify(mI(r)),s=k.useRef(!1);return xI(()=>{s.current=!0}),k.useCallback((l,u={})=>{if(os(s.current,wI),!s.current)return;if(typeof l=="number"){n.go(l);return}let c=yI(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:$s([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,o,i,e])}var mB=k.createContext(null);function yB(e){let t=k.useContext(To).outlet;return t&&k.createElement(mB.Provider,{value:e},t)}function _I(){let{matches:e}=k.useContext(To),t=e[e.length-1];return t?t.params:{}}function Sh(e,{relative:t}={}){let{matches:n}=k.useContext(To),{pathname:r}=uu(),i=JSON.stringify(mI(n));return k.useMemo(()=>yI(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function vB(e,t){return EI(e,t)}function EI(e,t,n,r){var v;Tn(_h(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=k.useContext(cs),{matches:s}=k.useContext(To),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";SI(u,!d||w.endsWith("*")||w.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(w,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(w,'"> to <Route path="').concat(w==="/"?"*":"".concat(w,"/*"),'">.'))}let h=uu(),p;if(t){let w=typeof t=="string"?Dc(t):t;Tn(c==="/"||((v=w.pathname)==null?void 0:v.startsWith(c)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(c,'" but pathname "').concat(w.pathname,'" was given in the `location` prop.')),p=w}else p=h;let b=p.pathname||"/",g=b;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=!o&&n&&n.matches&&n.matches.length>0?n.matches:hI(e,{pathname:g});os(d||x!=null,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),os(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let y=EB(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:$s([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:$s([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&y?k.createElement(xh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function bB(){let e=AB(),t=cB(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,s)}var wB=k.createElement(bB,null),xB=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(To.Provider,{value:this.props.routeContext},k.createElement(L1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _B({routeContext:e,match:t,children:n}){let r=k.useContext(Lc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(To.Provider,{value:e},n)}function EB(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Tn(l>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:d}=n,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||h){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let d,h=!1,p=null,b=null;n&&(d=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||wB,s&&(a<0&&c===0?(SI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,b=null):a===c&&(h=!0,b=u.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,c+1)),x=()=>{let y;return d?y=p:h?y=b:u.route.Component?y=k.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=l,k.createElement(_B,{match:u,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:y})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?k.createElement(xB,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}function B1(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function SB(e){let t=k.useContext(Lc);return Tn(t,B1(e)),t}function kB(e){let t=k.useContext(Ay);return Tn(t,B1(e)),t}function CB(e){let t=k.useContext(To);return Tn(t,B1(e)),t}function F1(e){let t=CB(e),n=t.matches[t.matches.length-1];return Tn(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function jB(){return F1("useRouteId")}function AB(){var r;let e=k.useContext(L1),t=kB("useRouteError"),n=F1("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function RB(){let{router:e}=SB("useNavigate"),t=F1("useNavigate"),n=k.useRef(!1);return xI(()=>{n.current=!0}),k.useCallback(async(i,o={})=>{os(n.current,wI),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var Bk={};function SI(e,t,n){!t&&!Bk[e]&&(Bk[e]=!0,os(!1,n))}k.memo(NB);function NB({routes:e,future:t,state:n}){return EI(e,void 0,n,t)}function TB(e){return yB(e.context)}function Gi(e){Tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IB({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Tn(!_h(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=k.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=Dc(n));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:h="default"}=n,p=k.useMemo(()=>{let b=Ws(l,s);return b==null?null:{location:{pathname:b,search:u,hash:c,state:d,key:h},navigationType:r}},[s,l,u,c,d,h,r]);return os(p!=null,'<Router basename="'.concat(s,'"> is not able to match the URL "').concat(l).concat(u).concat(c,"\" because it does not start with the basename, so the <Router> won't render anything.")),p==null?null:k.createElement(cs.Provider,{value:a},k.createElement(xh.Provider,{children:t,value:p}))}function PB({children:e,location:t}){return vB(ox(e),t)}function ox(e,t=[]){let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let o=[...t,i];if(r.type===k.Fragment){n.push.apply(n,ox(r.props.children,o));return}Tn(r.type===Gi,"[".concat(typeof r.type=="string"?r.type:r.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),Tn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=ox(r.props.children,o)),n.push(s)}),n}var hg="get",pg="application/x-www-form-urlencoded";function Ry(e){return e!=null&&typeof e.tagName=="string"}function OB(e){return Ry(e)&&e.tagName.toLowerCase()==="button"}function $B(e){return Ry(e)&&e.tagName.toLowerCase()==="form"}function MB(e){return Ry(e)&&e.tagName.toLowerCase()==="input"}function DB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function LB(e,t){return e.button===0&&(!t||t==="_self")&&!DB(e)}var xp=null;function BB(){if(xp===null)try{new FormData(document.createElement("form"),0),xp=!1}catch(e){xp=!0}return xp}var FB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function M0(e){return e!=null&&!FB.has(e)?(os(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(pg,'"')),null):e}function zB(e,t){let n,r,i,o,s;if($B(e)){let a=e.getAttribute("action");r=a?Ws(a,t):null,n=e.getAttribute("method")||hg,i=M0(e.getAttribute("enctype"))||pg,o=new FormData(e)}else if(OB(e)||MB(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ws(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||hg,i=M0(e.getAttribute("formenctype"))||M0(a.getAttribute("enctype"))||pg,o=new FormData(a,e),!BB()){let{name:u,type:c,value:d}=e;if(c==="image"){let h=u?"".concat(u,"."):"";o.append("".concat(h,"x"),"0"),o.append("".concat(h,"y"),"0")}else u&&o.append(u,d)}}else{if(Ry(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hg,r=null,i=pg,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function z1(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function HB(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UB(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function WB(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await HB(o,n);return s.links?s.links():[]}return[]}));return GB(r.flat(1).filter(UB).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Fk(e,t,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function VB(e,t,{includeHydrateFallback:n}={}){return qB(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function qB(e){return[...new Set(e)]}function KB(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function GB(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(KB(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YB=new Set([100,101,204,205]);function XB(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Ws(n.pathname,t)==="/"?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}function kI(){let e=k.useContext(Lc);return z1(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function JB(){let e=k.useContext(Ay);return z1(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var H1=k.createContext(void 0);H1.displayName="FrameworkContext";function CI(){let e=k.useContext(H1);return z1(e,"You must render this element inside a <HydratedRouter> element"),e}function QB(e,t){let n=k.useContext(H1),[r,i]=k.useState(!1),[o,s]=k.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=t,h=k.useRef(null);k.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let g=y=>{y.forEach(v=>{s(v.isIntersecting)})},x=new IntersectionObserver(g,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[e]),k.useEffect(()=>{if(r){let g=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(g)}}},[r]);let p=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,h,{}]:[o,h,{onFocus:gd(a,p),onBlur:gd(l,b),onMouseEnter:gd(u,p),onMouseLeave:gd(c,b),onTouchStart:gd(d,p)}]:[!1,h,{}]}function gd(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ZB({page:e,...t}){let{router:n}=kI(),r=k.useMemo(()=>hI(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?k.createElement(t6,{page:e,matches:r,...t}):null}function e6(e){let{manifest:t,routeModules:n}=CI(),[r,i]=k.useState([]);return k.useEffect(()=>{let o=!1;return WB(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function t6({page:e,matches:t,...n}){let r=uu(),{manifest:i,routeModules:o}=CI(),{basename:s}=kI(),{loaderData:a,matches:l}=JB(),u=k.useMemo(()=>Fk(e,t,l,i,r,"data"),[e,t,l,i,r]),c=k.useMemo(()=>Fk(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=k.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let b=new Set,g=!1;if(t.forEach(y=>{var w;let v=i.routes[y.route.id];!v||!v.hasLoader||(!u.some(E=>E.route.id===y.route.id)&&y.route.id in a&&((w=o[y.route.id])!=null&&w.shouldRevalidate)||v.hasClientLoader?g=!0:b.add(y.route.id))}),b.size===0)return[];let x=XB(e,s);return g&&b.size>0&&x.searchParams.set("_routes",t.filter(y=>b.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[s,a,r,i,u,t,e,o]),h=k.useMemo(()=>VB(c,i),[c,i]),p=e6(c);return k.createElement(k.Fragment,null,d.map(b=>k.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),h.map(b=>k.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),p.map(({key:b,link:g})=>k.createElement("link",{key:b,...g})))}function n6(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var jI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jI&&(window.__reactRouterVersion="7.6.0")}catch(e){}function r6({basename:e,children:t,window:n}){let r=k.useRef();r.current==null&&(r.current=zL({window:n,v5Compat:!0}));let i=r.current,[o,s]=k.useState({action:i.action,location:i.location}),a=k.useCallback(l=>{k.startTransition(()=>s(l))},[s]);return k.useLayoutEffect(()=>i.listen(a),[i,a]),k.createElement(IB,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var AI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RI=k.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...h},p){let{basename:b}=k.useContext(cs),g=typeof u=="string"&&AI.test(u),x,y=!1;if(typeof u=="string"&&g&&(x=u,jI))try{let q=new URL(window.location.href),D=u.startsWith("//")?new URL(q.protocol+u):new URL(u),U=Ws(D.pathname,b);D.origin===q.origin&&U!=null?u=U+D.search+D.hash:y=!0}catch(q){os(!1,'<Link to="'.concat(u,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let v=pB(u,{relative:i}),[w,E,S]=QB(r,h),A=s6(u,{replace:s,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function T(q){t&&t(q),q.defaultPrevented||A(q)}let $=k.createElement("a",{...h,...S,href:x||v,onClick:y||o?t:T,ref:n6(p,E),target:l,"data-discover":!g&&n==="render"?"true":void 0});return w&&!g?k.createElement(k.Fragment,null,$,k.createElement(ZB,{page:v})):$});RI.displayName="Link";var em=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},c){let d=Sh(s,{relative:u.relative}),h=uu(),p=k.useContext(Ay),{navigator:b,basename:g}=k.useContext(cs),x=p!=null&&d6(d)&&a===!0,y=b.encodeLocation?b.encodeLocation(d).pathname:d.pathname,v=h.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(v=v.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&g&&(w=Ws(w,g)||w);const E=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=v===y||!i&&v.startsWith(y)&&v.charAt(E)==="/",A=w!=null&&(w===y||!i&&w.startsWith(y)&&w.charAt(y.length)==="/"),T={isActive:S,isPending:A,isTransitioning:x},$=S?t:void 0,q;typeof r=="function"?q=r(T):q=[r,S?"active":null,A?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(T):o;return k.createElement(RI,{...u,"aria-current":$,className:q,ref:c,style:D,to:s,viewTransition:a},typeof l=="function"?l(T):l)});em.displayName="NavLink";var i6=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=hg,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...h},p)=>{let b=u6(),g=c6(a,{relative:u}),x=s.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&AI.test(a),v=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,S=(E==null?void 0:E.getAttribute("formmethod"))||s;b(E||w.currentTarget,{fetcherKey:t,method:S,navigate:n,replace:i,state:o,relative:u,preventScrollReset:c,viewTransition:d})};return k.createElement("form",{ref:p,method:x,action:g,onSubmit:r?l:v,...h,"data-discover":!y&&e==="render"?"true":void 0})});i6.displayName="Form";function o6(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function NI(e){let t=k.useContext(Lc);return Tn(t,o6(e)),t}function s6(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Eh(),l=uu(),u=Sh(e,{relative:o});return k.useCallback(c=>{if(LB(c,t)){c.preventDefault();let d=n!==void 0?n:jf(l)===jf(u);a(e,{replace:d,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,t,e,i,o,s])}var a6=0,l6=()=>"__".concat(String(++a6),"__");function u6(){let{router:e}=NI("useSubmit"),{basename:t}=k.useContext(cs),n=jB();return k.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=zB(r,t);if(i.navigate===!1){let c=i.fetcherKey||l6();await e.fetch(c,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function c6(e,{relative:t}={}){let{basename:n}=k.useContext(cs),r=k.useContext(To);Tn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Sh(e||".",{relative:t})},s=uu();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();o.search=c?"?".concat(c):""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:$s([n,o.pathname])),jf(o)}function d6(e,t={}){let n=k.useContext(bI);Tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=NI("useViewTransitionState"),i=Sh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Ws(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Ws(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Zg(i.pathname,s)!=null||Zg(i.pathname,o)!=null}[...YB];var U1={};Object.defineProperty(U1,"__esModule",{value:!0});var Ya=U1.newRidgeState=void 0;const tm=k,TI=typeof window<"u"||typeof document<"u"?tm.useLayoutEffect:tm.useEffect,II=(e,t)=>e===t,zk={};function f6(e,t=II){const n=(0,tm.useRef)(zk);let r=n.current;return TI(()=>{n.current=r}),(n.current===zk||!t(e,n.current))&&(r=e),r}function h6(e,t){let n=[],r=e;function i(u,c){const d=r;r=u instanceof Function?u(r):u,setTimeout(()=>{var h;n.forEach(p=>p(r,d)),c==null||c(r,d),(h=t==null?void 0:t.onSet)===null||h===void 0||h.call(t,r,d)})}function o(u){return n.push(u),()=>{n=n.filter(c=>c!==u)}}function s(u){TI(()=>o(u),[u])}function a(){const[u,c]=(0,tm.useState)(r);return s(c),[u,i]}function l(u,c=II){const[d]=a();return f6(u(d),c)}return{use:a,useSelector:l,useValue:()=>a()[0],get:()=>r,set:i,reset:()=>i(e),subscribe:o}}Ya=U1.newRidgeState=h6;let p6=0;const Ny=Ya([]);function dn(e){const t=p6++;return Ny.set(n=>[...n,{id:t,modal:e}]),t}function g6(e){Ny.set(t=>t.filter(n=>n.modal.title!==e))}function ui(e){Ny.set(t=>t.filter(n=>n.id!==e))}function Zn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Zn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var m6={value:()=>{}};function Ty(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new gg(n)}function gg(e){this._=e}function y6(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}gg.prototype=Ty.prototype={constructor:gg,on:function(e,t){var n=this._,r=y6(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=v6(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Hk(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Hk(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gg(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function v6(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Hk(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=m6,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var sx="http://www.w3.org/1999/xhtml";const Uk={svg:"http://www.w3.org/2000/svg",xhtml:sx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Iy(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Uk.hasOwnProperty(t)?{space:Uk[t],local:e}:e}function b6(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sx&&t.documentElement.namespaceURI===sx?t.createElement(e):t.createElementNS(n,e)}}function w6(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function PI(e){var t=Iy(e);return(t.local?w6:b6)(t)}function x6(){}function W1(e){return e==null?x6:function(){return this.querySelector(e)}}function _6(e){typeof e!="function"&&(e=W1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Bi(r,this._parents)}function E6(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function S6(){return[]}function OI(e){return e==null?S6:function(){return this.querySelectorAll(e)}}function k6(e){return function(){return E6(e.apply(this,arguments))}}function C6(e){typeof e=="function"?e=k6(e):e=OI(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new Bi(r,i)}function $I(e){return function(){return this.matches(e)}}function MI(e){return function(t){return t.matches(e)}}var j6=Array.prototype.find;function A6(e){return function(){return j6.call(this.children,e)}}function R6(){return this.firstElementChild}function N6(e){return this.select(e==null?R6:A6(typeof e=="function"?e:MI(e)))}var T6=Array.prototype.filter;function I6(){return Array.from(this.children)}function P6(e){return function(){return T6.call(this.children,e)}}function O6(e){return this.selectAll(e==null?I6:P6(typeof e=="function"?e:MI(e)))}function $6(e){typeof e!="function"&&(e=$I(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Bi(r,this._parents)}function DI(e){return new Array(e.length)}function M6(){return new Bi(this._enter||this._groups.map(DI),this._parents)}function nm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nm.prototype={constructor:nm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function D6(e){return function(){return e}}function L6(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new nm(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function B6(e,t,n,r,i,o,s){var a,l,u=new Map,c=t.length,d=o.length,h=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(h[a]=p=s.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<d;++a)p=s.call(e,o[a],a,o)+"",(l=u.get(p))?(r[a]=l,l.__data__=o[a],u.delete(p)):n[a]=new nm(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function F6(e){return e.__data__}function z6(e,t){if(!arguments.length)return Array.from(this,F6);var n=t?B6:L6,r=this._parents,i=this._groups;typeof e!="function"&&(e=D6(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],d=i[u],h=d.length,p=H6(e.call(c,c&&c.__data__,u,r)),b=p.length,g=a[u]=new Array(b),x=s[u]=new Array(b),y=l[u]=new Array(h);n(c,d,g,x,y,p,t);for(var v=0,w=0,E,S;v<b;++v)if(E=g[v]){for(v>=w&&(w=v+1);!(S=x[w])&&++w<b;);E._next=S||null}}return s=new Bi(s,r),s._enter=a,s._exit=l,s}function H6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function U6(){return new Bi(this._exit||this._groups.map(DI),this._parents)}function W6(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function V6(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],d=u.length,h=a[l]=new Array(d),p,b=0;b<d;++b)(p=u[b]||c[b])&&(h[b]=p);for(;l<i;++l)a[l]=n[l];return new Bi(a,this._parents)}function q6(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function K6(e){e||(e=G6);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Bi(i,this._parents).order()}function G6(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Y6(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function X6(){return Array.from(this)}function J6(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Q6(){let e=0;for(const t of this)++e;return e}function Z6(){return!this.node()}function eF(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function tF(e){return function(){this.removeAttribute(e)}}function nF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rF(e,t){return function(){this.setAttribute(e,t)}}function iF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function aF(e,t){var n=Iy(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nF:tF:typeof t=="function"?n.local?sF:oF:n.local?iF:rF)(n,t))}function LI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lF(e){return function(){this.style.removeProperty(e)}}function uF(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cF(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dF(e,t,n){return arguments.length>1?this.each((t==null?lF:typeof t=="function"?cF:uF)(e,t,n==null?"":n)):pc(this.node(),e)}function pc(e,t){return e.style.getPropertyValue(t)||LI(e).getComputedStyle(e,null).getPropertyValue(t)}function fF(e){return function(){delete this[e]}}function hF(e,t){return function(){this[e]=t}}function pF(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gF(e,t){return arguments.length>1?this.each((t==null?fF:typeof t=="function"?pF:hF)(e,t)):this.node()[e]}function BI(e){return e.trim().split(/^|\s+/)}function V1(e){return e.classList||new FI(e)}function FI(e){this._node=e,this._names=BI(e.getAttribute("class")||"")}FI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zI(e,t){for(var n=V1(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function HI(e,t){for(var n=V1(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function mF(e){return function(){zI(this,e)}}function yF(e){return function(){HI(this,e)}}function vF(e,t){return function(){(t.apply(this,arguments)?zI:HI)(this,e)}}function bF(e,t){var n=BI(e+"");if(arguments.length<2){for(var r=V1(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?vF:t?mF:yF)(n,t))}function wF(){this.textContent=""}function xF(e){return function(){this.textContent=e}}function _F(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function EF(e){return arguments.length?this.each(e==null?wF:(typeof e=="function"?_F:xF)(e)):this.node().textContent}function SF(){this.innerHTML=""}function kF(e){return function(){this.innerHTML=e}}function CF(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function jF(e){return arguments.length?this.each(e==null?SF:(typeof e=="function"?CF:kF)(e)):this.node().innerHTML}function AF(){this.nextSibling&&this.parentNode.appendChild(this)}function RF(){return this.each(AF)}function NF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function TF(){return this.each(NF)}function IF(e){var t=typeof e=="function"?e:PI(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function PF(){return null}function OF(e,t){var n=typeof e=="function"?e:PI(e),r=t==null?PF:typeof t=="function"?t:W1(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $F(){var e=this.parentNode;e&&e.removeChild(this)}function MF(){return this.each($F)}function DF(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function LF(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BF(e){return this.select(e?LF:DF)}function FF(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zF(e){return function(t){e.call(this,t,this.__data__)}}function HF(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function UF(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function WF(e,t,n){return function(){var r=this.__on,i,o=zF(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function VF(e,t,n){var r=HF(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?WF:UF,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function UI(e,t,n){var r=LI(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function qF(e,t){return function(){return UI(this,e,t)}}function KF(e,t){return function(){return UI(this,e,t.apply(this,arguments))}}function GF(e,t){return this.each((typeof t=="function"?KF:qF)(e,t))}function*YF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var WI=[null];function Bi(e,t){this._groups=e,this._parents=t}function kh(){return new Bi([[document.documentElement]],WI)}function XF(){return this}Bi.prototype=kh.prototype={constructor:Bi,select:_6,selectAll:C6,selectChild:N6,selectChildren:O6,filter:$6,data:z6,enter:M6,exit:U6,join:W6,merge:V6,selection:XF,order:q6,sort:K6,call:Y6,nodes:X6,node:J6,size:Q6,empty:Z6,each:eF,attr:aF,style:dF,property:gF,classed:bF,text:EF,html:jF,raise:RF,lower:TF,append:IF,insert:OF,remove:MF,clone:BF,datum:FF,on:VF,dispatch:GF,[Symbol.iterator]:YF};function Ni(e){return typeof e=="string"?new Bi([[document.querySelector(e)]],[document.documentElement]):new Bi([[e]],WI)}function JF(e){let t;for(;t=e.sourceEvent;)e=t;return e}function yo(e,t){if(e=JF(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const QF={passive:!1},Af={capture:!0,passive:!1};function D0(e){e.stopImmediatePropagation()}function Zu(e){e.preventDefault(),e.stopImmediatePropagation()}function VI(e){var t=e.document.documentElement,n=Ni(e).on("dragstart.drag",Zu,Af);"onselectstart"in t?n.on("selectstart.drag",Zu,Af):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qI(e,t){var n=e.document.documentElement,r=Ni(e).on("dragstart.drag",null);t&&(r.on("click.drag",Zu,Af),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const _p=e=>()=>e;function ax(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}ax.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ZF(e){return!e.ctrlKey&&!e.button}function e8(){return this.parentNode}function t8(e,t){return t==null?{x:e.x,y:e.y}:t}function n8(){return navigator.maxTouchPoints||"ontouchstart"in this}function KI(){var e=ZF,t=e8,n=t8,r=n8,i={},o=Ty("start","drag","end"),s=0,a,l,u,c,d=0;function h(E){E.on("mousedown.drag",p).filter(r).on("touchstart.drag",x).on("touchmove.drag",y,QF).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(E,S){if(!(c||!e.call(this,E,S))){var A=w(this,t.call(this,E,S),E,S,"mouse");A&&(Ni(E.view).on("mousemove.drag",b,Af).on("mouseup.drag",g,Af),VI(E.view),D0(E),u=!1,a=E.clientX,l=E.clientY,A("start",E))}}function b(E){if(Zu(E),!u){var S=E.clientX-a,A=E.clientY-l;u=S*S+A*A>d}i.mouse("drag",E)}function g(E){Ni(E.view).on("mousemove.drag mouseup.drag",null),qI(E.view,u),Zu(E),i.mouse("end",E)}function x(E,S){if(e.call(this,E,S)){var A=E.changedTouches,T=t.call(this,E,S),$=A.length,q,D;for(q=0;q<$;++q)(D=w(this,T,E,S,A[q].identifier,A[q]))&&(D0(E),D("start",E,A[q]))}}function y(E){var S=E.changedTouches,A=S.length,T,$;for(T=0;T<A;++T)($=i[S[T].identifier])&&(Zu(E),$("drag",E,S[T]))}function v(E){var S=E.changedTouches,A=S.length,T,$;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),T=0;T<A;++T)($=i[S[T].identifier])&&(D0(E),$("end",E,S[T]))}function w(E,S,A,T,$,q){var D=o.copy(),U=yo(q||A,S),J,H,I;if((I=n.call(E,new ax("beforestart",{sourceEvent:A,target:h,identifier:$,active:s,x:U[0],y:U[1],dx:0,dy:0,dispatch:D}),T))!=null)return J=I.x-U[0]||0,H=I.y-U[1]||0,function F(K,X,O){var B=U,P;switch(K){case"start":i[$]=F,P=s++;break;case"end":delete i[$],--s;case"drag":U=yo(O||X,S),P=s;break}D.call(K,E,new ax(K,{sourceEvent:X,subject:I,target:h,identifier:$,active:P,x:U[0]+J,y:U[1]+H,dx:U[0]-B[0],dy:U[1]-B[1],dispatch:D}),T)}}return h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:_p(!!E),h):e},h.container=function(E){return arguments.length?(t=typeof E=="function"?E:_p(E),h):t},h.subject=function(E){return arguments.length?(n=typeof E=="function"?E:_p(E),h):n},h.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:_p(!!E),h):r},h.on=function(){var E=o.on.apply(o,arguments);return E===o?h:E},h.clickDistance=function(E){return arguments.length?(d=(E=+E)*E,h):Math.sqrt(d)},h}function q1(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function GI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ch(){}var Rf=.7,rm=1/Rf,ec="\\s*([+-]?\\d+)\\s*",Nf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r8=/^#([0-9a-f]{3,8})$/,i8=new RegExp("^rgb\\(".concat(ec,",").concat(ec,",").concat(ec,"\\)$")),o8=new RegExp("^rgb\\(".concat(Zo,",").concat(Zo,",").concat(Zo,"\\)$")),s8=new RegExp("^rgba\\(".concat(ec,",").concat(ec,",").concat(ec,",").concat(Nf,"\\)$")),a8=new RegExp("^rgba\\(".concat(Zo,",").concat(Zo,",").concat(Zo,",").concat(Nf,"\\)$")),l8=new RegExp("^hsl\\(".concat(Nf,",").concat(Zo,",").concat(Zo,"\\)$")),u8=new RegExp("^hsla\\(".concat(Nf,",").concat(Zo,",").concat(Zo,",").concat(Nf,"\\)$")),Wk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q1(Ch,Tf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vk,formatHex:Vk,formatHex8:c8,formatHsl:d8,formatRgb:qk,toString:qk});function Vk(){return this.rgb().formatHex()}function c8(){return this.rgb().formatHex8()}function d8(){return YI(this).formatHsl()}function qk(){return this.rgb().formatRgb()}function Tf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=r8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Kk(t):n===3?new gi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ep(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ep(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=i8.exec(e))?new gi(t[1],t[2],t[3],1):(t=o8.exec(e))?new gi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=s8.exec(e))?Ep(t[1],t[2],t[3],t[4]):(t=a8.exec(e))?Ep(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=l8.exec(e))?Xk(t[1],t[2]/100,t[3]/100,1):(t=u8.exec(e))?Xk(t[1],t[2]/100,t[3]/100,t[4]):Wk.hasOwnProperty(e)?Kk(Wk[e]):e==="transparent"?new gi(NaN,NaN,NaN,0):null}function Kk(e){return new gi(e>>16&255,e>>8&255,e&255,1)}function Ep(e,t,n,r){return r<=0&&(e=t=n=NaN),new gi(e,t,n,r)}function f8(e){return e instanceof Ch||(e=Tf(e)),e?(e=e.rgb(),new gi(e.r,e.g,e.b,e.opacity)):new gi}function lx(e,t,n,r){return arguments.length===1?f8(e):new gi(e,t,n,r==null?1:r)}function gi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}q1(gi,lx,GI(Ch,{brighter(e){return e=e==null?rm:Math.pow(rm,e),new gi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rf:Math.pow(Rf,e),new gi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gi(Il(this.r),Il(this.g),Il(this.b),im(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gk,formatHex:Gk,formatHex8:h8,formatRgb:Yk,toString:Yk}));function Gk(){return"#".concat(jl(this.r)).concat(jl(this.g)).concat(jl(this.b))}function h8(){return"#".concat(jl(this.r)).concat(jl(this.g)).concat(jl(this.b)).concat(jl((isNaN(this.opacity)?1:this.opacity)*255))}function Yk(){const e=im(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(Il(this.r),", ").concat(Il(this.g),", ").concat(Il(this.b)).concat(e===1?")":", ".concat(e,")"))}function im(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Il(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jl(e){return e=Il(e),(e<16?"0":"")+e.toString(16)}function Xk(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bo(e,t,n,r)}function YI(e){if(e instanceof bo)return new bo(e.h,e.s,e.l,e.opacity);if(e instanceof Ch||(e=Tf(e)),!e)return new bo;if(e instanceof bo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new bo(s,a,l,e.opacity)}function p8(e,t,n,r){return arguments.length===1?YI(e):new bo(e,t,n,r==null?1:r)}function bo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}q1(bo,p8,GI(Ch,{brighter(e){return e=e==null?rm:Math.pow(rm,e),new bo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rf:Math.pow(Rf,e),new bo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new gi(L0(e>=240?e-240:e+120,i,r),L0(e,i,r),L0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new bo(Jk(this.h),Sp(this.s),Sp(this.l),im(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=im(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(Jk(this.h),", ").concat(Sp(this.s)*100,"%, ").concat(Sp(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function Jk(e){return e=(e||0)%360,e<0?e+360:e}function Sp(e){return Math.max(0,Math.min(1,e||0))}function L0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const XI=e=>()=>e;function g8(e,t){return function(n){return e+n*t}}function m8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function y8(e){return(e=+e)==1?JI:function(t,n){return n-t?m8(t,n,e):XI(isNaN(t)?n:t)}}function JI(e,t){var n=t-e;return n?g8(e,n):XI(isNaN(e)?t:e)}const Qk=function e(t){var n=y8(t);function r(i,o){var s=n((i=lx(i)).r,(o=lx(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=JI(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function ha(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ux=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,B0=new RegExp(ux.source,"g");function v8(e){return function(){return e}}function b8(e){return function(t){return e(t)+""}}function w8(e,t){var n=ux.lastIndex=B0.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=ux.exec(e))&&(i=B0.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:ha(r,i)})),n=B0.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?b8(l[0].x):v8(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var Zk=180/Math.PI,cx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function QI(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Zk,skewX:Math.atan(l)*Zk,scaleX:s,scaleY:a}}var kp;function x8(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cx:QI(t.a,t.b,t.c,t.d,t.e,t.f)}function _8(e){return e==null||(kp||(kp=document.createElementNS("http://www.w3.org/2000/svg","g")),kp.setAttribute("transform",e),!(e=kp.transform.baseVal.consolidate()))?cx:(e=e.matrix,QI(e.a,e.b,e.c,e.d,e.e,e.f))}function ZI(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,d,h,p,b){if(u!==d||c!==h){var g=p.push("translate(",null,t,null,n);b.push({i:g-4,x:ha(u,d)},{i:g-2,x:ha(c,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function s(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:ha(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,h){u!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:ha(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,h,p,b){if(u!==d||c!==h){var g=p.push(i(p)+"scale(",null,",",null,")");b.push({i:g-4,x:ha(u,d)},{i:g-2,x:ha(c,h)})}else(d!==1||h!==1)&&p.push(i(p)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,h),s(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(p){for(var b=-1,g=h.length,x;++b<g;)d[(x=h[b]).i]=x.x(p);return d.join("")}}}var E8=ZI(x8,"px, ","px)","deg)"),S8=ZI(_8,", ",")",")"),k8=1e-12;function eC(e){return((e=Math.exp(e))+1/e)/2}function C8(e){return((e=Math.exp(e))-1/e)/2}function j8(e){return((e=Math.exp(2*e))-1)/(e+1)}const A8=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],d=s[1],h=s[2],p=c-a,b=d-l,g=p*p+b*b,x,y;if(g<k8)y=Math.log(h/u)/t,x=function(T){return[a+T*p,l+T*b,u*Math.exp(t*T*y)]};else{var v=Math.sqrt(g),w=(h*h-u*u+r*g)/(2*u*n*v),E=(h*h-u*u-r*g)/(2*h*n*v),S=Math.log(Math.sqrt(w*w+1)-w),A=Math.log(Math.sqrt(E*E+1)-E);y=(A-S)/t,x=function(T){var $=T*y,q=eC(S),D=u/(n*v)*(q*j8(t*$+S)-C8(S));return[a+D*p,l+D*b,u*q/eC(t*$+S)]}}return x.duration=y*1e3*t/Math.SQRT2,x}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var gc=0,Td=0,md=0,eP=1e3,om,Id,sm=0,Ul=0,Py=0,If=typeof performance=="object"&&performance.now?performance:Date,tP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function K1(){return Ul||(tP(R8),Ul=If.now()+Py)}function R8(){Ul=0}function am(){this._call=this._time=this._next=null}am.prototype=nP.prototype={constructor:am,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?K1():+n)+(t==null?0:+t),!this._next&&Id!==this&&(Id?Id._next=this:om=this,Id=this),this._call=e,this._time=n,dx()},stop:function(){this._call&&(this._call=null,this._time=1/0,dx())}};function nP(e,t,n){var r=new am;return r.restart(e,t,n),r}function N8(){K1(),++gc;for(var e=om,t;e;)(t=Ul-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gc}function tC(){Ul=(sm=If.now())+Py,gc=Td=0;try{N8()}finally{gc=0,I8(),Ul=0}}function T8(){var e=If.now(),t=e-sm;t>eP&&(Py-=t,sm=e)}function I8(){for(var e,t=om,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:om=n);Id=e,dx(r)}function dx(e){if(!gc){Td&&(Td=clearTimeout(Td));var t=e-Ul;t>24?(e<1/0&&(Td=setTimeout(tC,e-If.now()-Py)),md&&(md=clearInterval(md))):(md||(sm=If.now(),md=setInterval(T8,eP)),gc=1,tP(tC))}}function nC(e,t,n){var r=new am;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var P8=Ty("start","end","cancel","interrupt"),O8=[],rP=0,rC=1,fx=2,mg=3,iC=4,hx=5,yg=6;function Oy(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;$8(e,n,{name:t,index:r,group:i,on:P8,tween:O8,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:rP})}function G1(e,t){var n=Io(e,t);if(n.state>rP)throw new Error("too late; already scheduled");return n}function ds(e,t){var n=Io(e,t);if(n.state>mg)throw new Error("too late; already running");return n}function Io(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $8(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=nP(o,0,n.time);function o(u){n.state=rC,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,h,p;if(n.state!==rC)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===mg)return nC(s);p.state===iC?(p.state=yg,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=yg,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(nC(function(){n.state===mg&&(n.state=iC,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=fx,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fx){for(n.state=mg,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=hx,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===hx&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=yg,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function vg(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>fx&&r.state<hx,r.state=yg,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function M8(e){return this.each(function(){vg(this,e)})}function D8(e,t){var n,r;return function(){var i=ds(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function L8(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ds(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function B8(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Io(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?D8:L8)(n,e,t))}function Y1(e,t,n){var r=e._id;return e.each(function(){var i=ds(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Io(i,r).value[t]}}function iP(e,t){var n;return(typeof t=="number"?ha:t instanceof Tf?Qk:(n=Tf(t))?(t=n,Qk):w8)(e,t)}function F8(e){return function(){this.removeAttribute(e)}}function z8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function H8(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function U8(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function W8(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function V8(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function q8(e,t){var n=Iy(e),r=n==="transform"?S8:iP;return this.attrTween(e,typeof t=="function"?(n.local?V8:W8)(n,r,Y1(this,"attr."+e,t)):t==null?(n.local?z8:F8)(n):(n.local?U8:H8)(n,r,t))}function K8(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function G8(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Y8(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&G8(e,o)),n}return i._value=t,i}function X8(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&K8(e,o)),n}return i._value=t,i}function J8(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Iy(e);return this.tween(n,(r.local?Y8:X8)(r,t))}function Q8(e,t){return function(){G1(this,e).delay=+t.apply(this,arguments)}}function Z8(e,t){return t=+t,function(){G1(this,e).delay=t}}function e7(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Q8:Z8)(t,e)):Io(this.node(),t).delay}function t7(e,t){return function(){ds(this,e).duration=+t.apply(this,arguments)}}function n7(e,t){return t=+t,function(){ds(this,e).duration=t}}function r7(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?t7:n7)(t,e)):Io(this.node(),t).duration}function i7(e,t){if(typeof t!="function")throw new Error;return function(){ds(this,e).ease=t}}function o7(e){var t=this._id;return arguments.length?this.each(i7(t,e)):Io(this.node(),t).ease}function s7(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ds(this,e).ease=n}}function a7(e){if(typeof e!="function")throw new Error;return this.each(s7(this._id,e))}function l7(e){typeof e!="function"&&(e=$I(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Vs(r,this._parents,this._name,this._id)}function u7(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(d[p]=h);for(;a<r;++a)s[a]=t[a];return new Vs(s,this._parents,this._name,this._id)}function c7(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function d7(e,t,n){var r,i,o=c7(t)?G1:ds;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function f7(e,t){var n=this._id;return arguments.length<2?Io(this.node(),n).on.on(e):this.each(d7(n,e,t))}function h7(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function p7(){return this.on("end.remove",h7(this._id))}function g7(e){var t=this._name,n=this._id;typeof e!="function"&&(e=W1(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,d,h=0;h<l;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,Oy(u[h],t,n,h,u,Io(c,n)));return new Vs(o,this._parents,t,n)}function m7(e){var t=this._name,n=this._id;typeof e!="function"&&(e=OI(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=e.call(c,c.__data__,d,l),p,b=Io(c,n),g=0,x=h.length;g<x;++g)(p=h[g])&&Oy(p,t,n,g,h,b);o.push(h),s.push(c)}return new Vs(o,s,t,n)}var y7=kh.prototype.constructor;function v7(){return new y7(this._groups,this._parents)}function b7(e,t){var n,r,i;return function(){var o=pc(this,e),s=(this.style.removeProperty(e),pc(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function oP(e){return function(){this.style.removeProperty(e)}}function w7(e,t,n){var r,i=n+"",o;return function(){var s=pc(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function x7(e,t,n){var r,i,o;return function(){var s=pc(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),pc(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function _7(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=ds(this,e),u=l.on,c=l.value[o]==null?a||(a=oP(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function E7(e,t,n){var r=(e+="")=="transform"?E8:iP;return t==null?this.styleTween(e,b7(e,r)).on("end.style."+e,oP(e)):typeof t=="function"?this.styleTween(e,x7(e,r,Y1(this,"style."+e,t))).each(_7(this._id,e)):this.styleTween(e,w7(e,r,t),n).on("end.style."+e,null)}function S7(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function k7(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&S7(e,s,n)),r}return o._value=t,o}function C7(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,k7(e,t,n==null?"":n))}function j7(e){return function(){this.textContent=e}}function A7(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function R7(e){return this.tween("text",typeof e=="function"?A7(Y1(this,"text",e)):j7(e==null?"":e+""))}function N7(e){return function(t){this.textContent=e.call(this,t)}}function T7(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&N7(i)),t}return r._value=e,r}function I7(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,T7(e))}function P7(){for(var e=this._name,t=this._id,n=sP(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=Io(l,t);Oy(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Vs(r,this._parents,e,n)}function O7(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=ds(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var $7=0;function Vs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function sP(){return++$7}var vs=kh.prototype;Vs.prototype={constructor:Vs,select:g7,selectAll:m7,selectChild:vs.selectChild,selectChildren:vs.selectChildren,filter:l7,merge:u7,selection:v7,transition:P7,call:vs.call,nodes:vs.nodes,node:vs.node,size:vs.size,empty:vs.empty,each:vs.each,on:f7,attr:q8,attrTween:J8,style:E7,styleTween:C7,text:R7,textTween:I7,remove:p7,tween:B8,delay:e7,duration:r7,ease:o7,easeVarying:a7,end:O7,[Symbol.iterator]:vs[Symbol.iterator]};function M7(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var D7={time:null,delay:0,duration:250,ease:M7};function L7(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}function B7(e){var t,n;e instanceof Vs?(t=e._id,e=e._name):(t=sP(),(n=D7).time=K1(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Oy(l,e,t,u,s,n||L7(l,t));return new Vs(r,this._parents,e,t)}kh.prototype.interrupt=M8;kh.prototype.transition=B7;const Cp=e=>()=>e;function F7(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Is(e,t,n){this.k=e,this.x=t,this.y=n}Is.prototype={constructor:Is,scale:function(e){return e===1?this:new Is(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Is(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $y=new Is(1,0,0);aP.prototype=Is.prototype;function aP(e){for(;!e.__zoom;)if(!(e=e.parentNode))return $y;return e.__zoom}function F0(e){e.stopImmediatePropagation()}function yd(e){e.preventDefault(),e.stopImmediatePropagation()}function z7(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function H7(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function oC(){return this.__zoom||$y}function U7(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function W7(){return navigator.maxTouchPoints||"ontouchstart"in this}function V7(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function lP(){var e=z7,t=H7,n=V7,r=U7,i=W7,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=A8,u=Ty("start","zoom","end"),c,d,h,p=500,b=150,g=0,x=10;function y(I){I.property("__zoom",oC).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(I,F,K,X){var O=I.selection?I.selection():I;O.property("__zoom",oC),I!==O?S(I,F,K,X):O.interrupt().each(function(){A(this,arguments).event(X).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},y.scaleBy=function(I,F,K,X){y.scaleTo(I,function(){var O=this.__zoom.k,B=typeof F=="function"?F.apply(this,arguments):F;return O*B},K,X)},y.scaleTo=function(I,F,K,X){y.transform(I,function(){var O=t.apply(this,arguments),B=this.__zoom,P=K==null?E(O):typeof K=="function"?K.apply(this,arguments):K,G=B.invert(P),Q=typeof F=="function"?F.apply(this,arguments):F;return n(w(v(B,Q),P,G),O,s)},K,X)},y.translateBy=function(I,F,K,X){y.transform(I,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof K=="function"?K.apply(this,arguments):K),t.apply(this,arguments),s)},null,X)},y.translateTo=function(I,F,K,X,O){y.transform(I,function(){var B=t.apply(this,arguments),P=this.__zoom,G=X==null?E(B):typeof X=="function"?X.apply(this,arguments):X;return n($y.translate(G[0],G[1]).scale(P.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof K=="function"?-K.apply(this,arguments):-K),B,s)},X,O)};function v(I,F){return F=Math.max(o[0],Math.min(o[1],F)),F===I.k?I:new Is(F,I.x,I.y)}function w(I,F,K){var X=F[0]-K[0]*I.k,O=F[1]-K[1]*I.k;return X===I.x&&O===I.y?I:new Is(I.k,X,O)}function E(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function S(I,F,K,X){I.on("start.zoom",function(){A(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(X).end()}).tween("zoom",function(){var O=this,B=arguments,P=A(O,B).event(X),G=t.apply(O,B),Q=K==null?E(G):typeof K=="function"?K.apply(O,B):K,se=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),_e=O.__zoom,Ne=typeof F=="function"?F.apply(O,B):F,Te=l(_e.invert(Q).concat(se/_e.k),Ne.invert(Q).concat(se/Ne.k));return function(W){if(W===1)W=Ne;else{var Y=Te(W),ie=se/Y[2];W=new Is(ie,Q[0]-Y[0]*ie,Q[1]-Y[1]*ie)}P.zoom(null,W)}})}function A(I,F,K){return!K&&I.__zooming||new T(I,F)}function T(I,F){this.that=I,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,F),this.taps=0}T.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,F){return this.mouse&&I!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var F=Ni(this.that).datum();u.call(I,this.that,new F7(I,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),F)}};function $(I,...F){if(!e.apply(this,arguments))return;var K=A(this,F).event(I),X=this.__zoom,O=Math.max(o[0],Math.min(o[1],X.k*Math.pow(2,r.apply(this,arguments)))),B=yo(I);if(K.wheel)(K.mouse[0][0]!==B[0]||K.mouse[0][1]!==B[1])&&(K.mouse[1]=X.invert(K.mouse[0]=B)),clearTimeout(K.wheel);else{if(X.k===O)return;K.mouse=[B,X.invert(B)],vg(this),K.start()}yd(I),K.wheel=setTimeout(P,b),K.zoom("mouse",n(w(v(X,O),K.mouse[0],K.mouse[1]),K.extent,s));function P(){K.wheel=null,K.end()}}function q(I,...F){if(h||!e.apply(this,arguments))return;var K=I.currentTarget,X=A(this,F,!0).event(I),O=Ni(I.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",se,!0),B=yo(I,K),P=I.clientX,G=I.clientY;VI(I.view),F0(I),X.mouse=[B,this.__zoom.invert(B)],vg(this),X.start();function Q(_e){if(yd(_e),!X.moved){var Ne=_e.clientX-P,Te=_e.clientY-G;X.moved=Ne*Ne+Te*Te>g}X.event(_e).zoom("mouse",n(w(X.that.__zoom,X.mouse[0]=yo(_e,K),X.mouse[1]),X.extent,s))}function se(_e){O.on("mousemove.zoom mouseup.zoom",null),qI(_e.view,X.moved),yd(_e),X.event(_e).end()}}function D(I,...F){if(e.apply(this,arguments)){var K=this.__zoom,X=yo(I.changedTouches?I.changedTouches[0]:I,this),O=K.invert(X),B=K.k*(I.shiftKey?.5:2),P=n(w(v(K,B),X,O),t.apply(this,F),s);yd(I),a>0?Ni(this).transition().duration(a).call(S,P,X,I):Ni(this).call(y.transform,P,X,I)}}function U(I,...F){if(e.apply(this,arguments)){var K=I.touches,X=K.length,O=A(this,F,I.changedTouches.length===X).event(I),B,P,G,Q;for(F0(I),P=0;P<X;++P)G=K[P],Q=yo(G,this),Q=[Q,this.__zoom.invert(Q),G.identifier],O.touch0?!O.touch1&&O.touch0[2]!==Q[2]&&(O.touch1=Q,O.taps=0):(O.touch0=Q,B=!0,O.taps=1+!!c);c&&(c=clearTimeout(c)),B&&(O.taps<2&&(d=Q[0],c=setTimeout(function(){c=null},p)),vg(this),O.start())}}function J(I,...F){if(this.__zooming){var K=A(this,F).event(I),X=I.changedTouches,O=X.length,B,P,G,Q;for(yd(I),B=0;B<O;++B)P=X[B],G=yo(P,this),K.touch0&&K.touch0[2]===P.identifier?K.touch0[0]=G:K.touch1&&K.touch1[2]===P.identifier&&(K.touch1[0]=G);if(P=K.that.__zoom,K.touch1){var se=K.touch0[0],_e=K.touch0[1],Ne=K.touch1[0],Te=K.touch1[1],W=(W=Ne[0]-se[0])*W+(W=Ne[1]-se[1])*W,Y=(Y=Te[0]-_e[0])*Y+(Y=Te[1]-_e[1])*Y;P=v(P,Math.sqrt(W/Y)),G=[(se[0]+Ne[0])/2,(se[1]+Ne[1])/2],Q=[(_e[0]+Te[0])/2,(_e[1]+Te[1])/2]}else if(K.touch0)G=K.touch0[0],Q=K.touch0[1];else return;K.zoom("touch",n(w(P,G,Q),K.extent,s))}}function H(I,...F){if(this.__zooming){var K=A(this,F).event(I),X=I.changedTouches,O=X.length,B,P;for(F0(I),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),B=0;B<O;++B)P=X[B],K.touch0&&K.touch0[2]===P.identifier?delete K.touch0:K.touch1&&K.touch1[2]===P.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),K.taps===2&&(P=yo(P,this),Math.hypot(d[0]-P[0],d[1]-P[1])<x)){var G=Ni(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return y.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:Cp(+I),y):r},y.filter=function(I){return arguments.length?(e=typeof I=="function"?I:Cp(!!I),y):e},y.touchable=function(I){return arguments.length?(i=typeof I=="function"?I:Cp(!!I),y):i},y.extent=function(I){return arguments.length?(t=typeof I=="function"?I:Cp([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),y):t},y.scaleExtent=function(I){return arguments.length?(o[0]=+I[0],o[1]=+I[1],y):[o[0],o[1]]},y.translateExtent=function(I){return arguments.length?(s[0][0]=+I[0][0],s[1][0]=+I[1][0],s[0][1]=+I[0][1],s[1][1]=+I[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(I){return arguments.length?(n=I,y):n},y.duration=function(I){return arguments.length?(a=+I,y):a},y.interpolate=function(I){return arguments.length?(l=I,y):l},y.on=function(){var I=u.on.apply(u,arguments);return I===u?y:I},y.clickDistance=function(I){return arguments.length?(g=(I=+I)*I,y):Math.sqrt(g)},y.tapDistance=function(I){return arguments.length?(x=+I,y):x},y}const Ro={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>"The old edge with id=".concat(e," does not exist."),error009:e=>'Marker type "'.concat(e,"\" doesn't exist."),error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>"Couldn't create edge for ".concat(e,' handle id: "').concat(e==="source"?n:r,'", edge id: ').concat(t,"."),error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),error012:e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),error013:(e="react")=>"It seems that you haven't loaded the styles. Please import '@xyflow/".concat(e,"/dist/style.css' or base.css to make sure everything is working properly."),error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Pf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],uP=["Enter"," ","Escape"];var mc;(function(e){e.Strict="strict",e.Loose="loose"})(mc||(mc={}));var Pl;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pl||(Pl={}));var Of;(function(e){e.Partial="partial",e.Full="full"})(Of||(Of={}));const cP={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ya;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ya||(ya={}));var lm;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(lm||(lm={}));var ve;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ve||(ve={}));const sC={[ve.Left]:ve.Right,[ve.Right]:ve.Left,[ve.Top]:ve.Bottom,[ve.Bottom]:ve.Top};function q7(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function aC(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function dP(e){return e===null?null:e?"valid":"invalid"}const fP=e=>"id"in e&&"source"in e&&"target"in e,K7=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),X1=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),jh=(e,t=[0,0])=>{var a;const{width:n,height:r}=Qs(e),i=(a=e.origin)!=null?a:t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},G7=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):X1(i)?i:t.nodeLookup.get(i.id));const a=s?um(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return My(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Dy(n)},Ah=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=um(r);n=My(n,i)}}),Dy(n)},hP=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{var u,c,d,h,p,b;const a={...Rh(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const g of e.values()){const{measured:x,selectable:y=!0,hidden:v=!1}=g;if(s&&!y||v)continue;const w=(d=(c=(u=x.width)!=null?u:g.width)!=null?c:g.initialWidth)!=null?d:null,E=(b=(p=(h=x.height)!=null?h:g.height)!=null?p:g.initialHeight)!=null?b:null,S=$f(a,vc(g)),A=(w!=null?w:0)*(E!=null?E:0),T=o&&S>0;(!g.internals.handleBounds||T||S>=A||g.dragging)&&l.push(g)}return l},Y7=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function X7(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function J7({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){var c,d,h;if(e.size===0)return Promise.resolve(!0);const a=X7(e,s),l=Ah(a),u=J1(l,t,n,(c=s==null?void 0:s.minZoom)!=null?c:i,(d=s==null?void 0:s.maxZoom)!=null?d:o,(h=s==null?void 0:s.padding)!=null?h:.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function pP({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){var p,b,g;const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},c=(p=s.origin)!=null?p:r;let d=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",Ro.error005());else{const x=a.measured.width,y=a.measured.height;x&&y&&(d=[[l,u],[l+x,u+y]])}else a&&bc(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const h=bc(d)?Wl(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",Ro.error015())),{position:{x:h.x-l+((b=s.measured.width)!=null?b:0)*c[0],y:h.y-u+((g=s.measured.height)!=null?g:0)*c[1]},positionAbsolute:h}}async function Q7({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(h=>h.id)),s=[];for(const h of n){if(h.deletable===!1)continue;const p=o.has(h.id),b=!p&&h.parentId&&s.find(g=>g.id===h.parentId);(p||b)&&s.push(h)}const a=new Set(t.map(h=>h.id)),l=r.filter(h=>h.deletable!==!1),c=Y7(s,l);for(const h of l)a.has(h.id)&&!c.find(b=>b.id===h.id)&&c.push(h);if(!i)return{edges:c,nodes:s};const d=await i({nodes:s,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}const yc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wl=(e={x:0,y:0},t,n)=>{var r,i;return{x:yc(e.x,t[0][0],t[1][0]-((r=n==null?void 0:n.width)!=null?r:0)),y:yc(e.y,t[0][1],t[1][1]-((i=n==null?void 0:n.height)!=null?i:0))}};function gP(e,t,n){const{width:r,height:i}=Qs(n),{x:o,y:s}=n.internals.positionAbsolute;return Wl(e,[[o,s],[o+r,s+i]],t)}const lC=(e,t,n)=>e<t?yc(Math.abs(e-t),1,t)/t:e>n?-yc(Math.abs(e-n),1,t)/t:0,mP=(e,t,n=15,r=40)=>{const i=lC(e.x,r,t.width-r)*n,o=lC(e.y,r,t.height-r)*n;return[i,o]},My=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),px=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Dy=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),vc=(e,t=[0,0])=>{var i,o,s,a,l,u,c,d;const{x:n,y:r}=X1(e)?e.internals.positionAbsolute:jh(e,t);return{x:n,y:r,width:(a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0,height:(d=(c=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?c:e.initialHeight)!=null?d:0}},um=(e,t=[0,0])=>{var i,o,s,a,l,u,c,d;const{x:n,y:r}=X1(e)?e.internals.positionAbsolute:jh(e,t);return{x:n,y:r,x2:n+((a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0),y2:r+((d=(c=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?c:e.initialHeight)!=null?d:0)}},yP=(e,t)=>Dy(My(px(e),px(t))),$f=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},uC=e=>_o(e.width)&&_o(e.height)&&_o(e.x)&&_o(e.y),_o=e=>!isNaN(e)&&isFinite(e),Z7=(e,t)=>{},Ly=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Rh=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?Ly(a,s):a},cm=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function wu(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}function e9(e,t,n){var r,i,o,s,a,l,u,c;if(typeof e=="string"||typeof e=="number"){const d=wu(e,n),h=wu(e,t);return{top:d,right:h,bottom:d,left:h,x:h*2,y:d*2}}if(typeof e=="object"){const d=wu((i=(r=e.top)!=null?r:e.y)!=null?i:0,n),h=wu((s=(o=e.bottom)!=null?o:e.y)!=null?s:0,n),p=wu((l=(a=e.left)!=null?a:e.x)!=null?l:0,t),b=wu((c=(u=e.right)!=null?u:e.x)!=null?c:0,t);return{top:d,right:b,bottom:h,left:p,x:p+b,y:d+h}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function t9(e,t,n,r,i,o){const{x:s,y:a}=cm(e,[t,n,r]),{x:l,y:u}=cm({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,d=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}const J1=(e,t,n,r,i,o)=>{const s=e9(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=yc(u,r,i),d=e.x+e.width/2,h=e.y+e.height/2,p=t/2-d*c,b=n/2-h*c,g=t9(e,p,b,c,t,n),x={left:Math.min(g.left-s.left,0),top:Math.min(g.top-s.top,0),right:Math.min(g.right-s.right,0),bottom:Math.min(g.bottom-s.bottom,0)};return{x:p-x.left+x.right,y:b-x.top+x.bottom,zoom:c}},dm=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function bc(e){return e!==void 0&&e!=="parent"}function Qs(e){var t,n,r,i,o,s,a,l;return{width:(i=(r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!=null?i:0,height:(l=(a=(s=(o=e.measured)==null?void 0:o.height)!=null?s:e.height)!=null?a:e.initialHeight)!=null?l:0}}function vP(e){var t,n,r,i,o,s;return((r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!==void 0&&((s=(o=(i=e.measured)==null?void 0:i.height)!=null?o:e.height)!=null?s:e.initialHeight)!==void 0}function bP(e,t={width:0,height:0},n,r,i){var a,l;const o={...e},s=r.get(n);if(s){const u=s.origin||i;o.x+=s.internals.positionAbsolute.x-((a=t.width)!=null?a:0)*u[0],o.y+=s.internals.positionAbsolute.y-((l=t.height)!=null?l:0)*u[1]}return o}function cC(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function n9(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function ef(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){var c,d;const{x:o,y:s}=Ms(e),a=Rh({x:o-((c=i==null?void 0:i.left)!=null?c:0),y:s-((d=i==null?void 0:i.top)!=null?d:0)},r),{x:l,y:u}=n?Ly(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const Q1=e=>({width:e.offsetWidth,height:e.offsetHeight}),wP=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},r9=["INPUT","SELECT","TEXTAREA"];function xP(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:r9.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const _P=e=>"clientX"in e,Ms=(e,t)=>{var o,s,a,l;const n=_P(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((a=t==null?void 0:t.left)!=null?a:0),y:i-((l=t==null?void 0:t.top)!=null?l:0)}},dC=(e,t,n,r,i)=>{const o=t.querySelectorAll(".".concat(e));return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Q1(s)}})};function EP({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function jp(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function fC({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case ve.Left:return[t-jp(t-r,o),n];case ve.Right:return[t+jp(r-t,o),n];case ve.Top:return[t,n-jp(n-i,o)];case ve.Bottom:return[t,n+jp(i-n,o)]}}function SP({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:r,targetY:i,targetPosition:o=ve.Top,curvature:s=.25}){const[a,l]=fC({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,c]=fC({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[d,h,p,b]=EP({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return["M".concat(e,",").concat(t," C").concat(a,",").concat(l," ").concat(u,",").concat(c," ").concat(r,",").concat(i),d,h,p,b]}function kP({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function i9({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function o9({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=My(um(e),um(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return $f(s,Dy(o))>0}const s9=({source:e,sourceHandle:t,target:n,targetHandle:r})=>"xy-edge__".concat(e).concat(t||"","-").concat(n).concat(r||""),a9=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),CP=(e,t)=>{if(!e.source||!e.target)return t;let n;return fP(e)?n={...e}:n={...e,id:s9(e)},a9(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function jP({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=kP({sourceX:e,sourceY:t,targetX:n,targetY:r});return["M ".concat(e,",").concat(t,"L ").concat(n,",").concat(r),i,o,s,a]}const hC={[ve.Left]:{x:-1,y:0},[ve.Right]:{x:1,y:0},[ve.Top]:{x:0,y:-1},[ve.Bottom]:{x:0,y:1}},l9=({source:e,sourcePosition:t=ve.Bottom,target:n})=>t===ve.Left||t===ve.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},pC=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function u9({source:e,sourcePosition:t=ve.Bottom,target:n,targetPosition:r=ve.Top,center:i,offset:o}){var T,$;const s=hC[t],a=hC[r],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=l9({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",h=c[d];let p=[],b,g;const x={x:0,y:0},y={x:0,y:0},[v,w,E,S]=kP({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){b=(T=i.x)!=null?T:v,g=($=i.y)!=null?$:w;const q=[{x:b,y:l.y},{x:b,y:u.y}],D=[{x:l.x,y:g},{x:u.x,y:g}];s[d]===h?p=d==="x"?q:D:p=d==="x"?D:q}else{const q=[{x:l.x,y:u.y}],D=[{x:u.x,y:l.y}];if(d==="x"?p=s.x===h?D:q:p=s.y===h?q:D,t===r){const F=Math.abs(e[d]-n[d]);if(F<=o){const K=Math.min(o-1,o-F);s[d]===h?x[d]=(l[d]>e[d]?-1:1)*K:y[d]=(u[d]>n[d]?-1:1)*K}}if(t!==r){const F=d==="x"?"y":"x",K=s[d]===a[F],X=l[F]>u[F],O=l[F]<u[F];(s[d]===1&&(!K&&X||K&&O)||s[d]!==1&&(!K&&O||K&&X))&&(p=d==="x"?q:D)}const U={x:l.x+x.x,y:l.y+x.y},J={x:u.x+y.x,y:u.y+y.y},H=Math.max(Math.abs(U.x-p[0].x),Math.abs(J.x-p[0].x)),I=Math.max(Math.abs(U.y-p[0].y),Math.abs(J.y-p[0].y));H>=I?(b=(U.x+J.x)/2,g=p[0].y):(b=p[0].x,g=(U.y+J.y)/2)}return[[e,{x:l.x+x.x,y:l.y+x.y},...p,{x:u.x+y.x,y:u.y+y.y},n],b,g,E,S]}function c9(e,t,n,r){const i=Math.min(pC(e,t)/2,pC(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return"L".concat(o," ").concat(s);if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return"L ".concat(o+i*u,",").concat(s,"Q ").concat(o,",").concat(s," ").concat(o,",").concat(s+i*c)}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(o,",").concat(s+i*l,"Q ").concat(o,",").concat(s," ").concat(o+i*a,",").concat(s)}function gx({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:r,targetY:i,targetPosition:o=ve.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20}){const[c,d,h,p,b]=u9({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u});return[c.reduce((x,y,v)=>{let w="";return v>0&&v<c.length-1?w=c9(c[v-1],y,c[v+1],s):w="".concat(v===0?"M":"L").concat(y.x," ").concat(y.y),x+=w,x},""),d,h,p,b]}function gC(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function d9(e){var d,h,p,b,g;const{sourceNode:t,targetNode:n}=e;if(!gC(t)||!gC(n))return null;const r=t.internals.handleBounds||mC(t.handles),i=n.internals.handleBounds||mC(n.handles),o=yC((d=r==null?void 0:r.source)!=null?d:[],e.sourceHandle),s=yC(e.connectionMode===mc.Strict?(h=i==null?void 0:i.target)!=null?h:[]:((p=i==null?void 0:i.target)!=null?p:[]).concat((b=i==null?void 0:i.source)!=null?b:[]),e.targetHandle);if(!o||!s)return(g=e.onError)==null||g.call(e,"008",Ro.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||ve.Bottom,l=(s==null?void 0:s.position)||ve.Top,u=Mf(t,o,a),c=Mf(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function mC(e){var r,i;if(!e)return null;const t=[],n=[];for(const o of e)o.width=(r=o.width)!=null?r:1,o.height=(i=o.height)!=null?i:1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Mf(e,t,n=ve.Left,r=!1){var u,c,d;const i=((u=t==null?void 0:t.x)!=null?u:0)+e.internals.positionAbsolute.x,o=((c=t==null?void 0:t.y)!=null?c:0)+e.internals.positionAbsolute.y,{width:s,height:a}=t!=null?t:Qs(e);if(r)return{x:i+s/2,y:o+a/2};switch((d=t==null?void 0:t.position)!=null?d:n){case ve.Top:return{x:i+s/2,y:o};case ve.Right:return{x:i+s,y:o+a/2};case ve.Bottom:return{x:i+s/2,y:o+a};case ve.Left:return{x:i,y:o+a/2}}}function yC(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function mx(e,t){if(!e)return"";if(typeof e=="string")return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map(r=>"".concat(r,"=").concat(e[r])).join("&"))}function f9(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=mx(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Z1={nodeOrigin:[0,0],nodeExtent:Pf,elevateNodesOnSelect:!0,defaults:{}},h9={...Z1,checkEquality:!0};function eE(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function p9(e,t,n){const r=eE(Z1,n);for(const i of e.values())if(i.parentId)tE(i,e,t,r);else{const o=jh(i,r.nodeOrigin),s=bc(i.extent)?i.extent:r.nodeExtent,a=Wl(o,s,Qs(i));i.internals.positionAbsolute=a}}function yx(e,t,n,r){var l,u;const i=eE(h9,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let d=s.get(c.id);if(i.checkEquality&&c===(d==null?void 0:d.internals.userNode))t.set(c.id,d);else{const h=jh(c,i.nodeOrigin),p=bc(c.extent)?c.extent:i.nodeExtent,b=Wl(h,p,Qs(c));d={...i.defaults,...c,measured:{width:(l=c.measured)==null?void 0:l.width,height:(u=c.measured)==null?void 0:u.height},internals:{positionAbsolute:b,handleBounds:c.measured?d==null?void 0:d.internals.handleBounds:void 0,z:AP(c,a),userNode:c}},t.set(c.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(o=!1),c.parentId&&tE(d,t,n,r)}return o}function g9(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function tE(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=eE(Z1,r),a=e.parentId,l=t.get(a);if(!l){console.warn("Parent node ".concat(a," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));return}g9(e,n);const u=i?1e3:0,{x:c,y:d,z:h}=m9(e,l,o,s,u),{positionAbsolute:p}=e.internals,b=c!==p.x||d!==p.y;(b||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:b?{x:c,y:d}:p,z:h}})}function AP(e,t){return(_o(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function m9(e,t,n,r,i){var p;const{x:o,y:s}=t.internals.positionAbsolute,a=Qs(e),l=jh(e,n),u=bc(e.extent)?Wl(l,e.extent,a):l;let c=Wl({x:o+u.x,y:s+u.y},r,a);e.extent==="parent"&&(c=gP(c,a,t));const d=AP(e,i),h=(p=t.internals.z)!=null?p:0;return{x:c.x,y:c.y,z:h>d?h:d}}function nE(e,t,n,r=[0,0]){var s,a;const i=[],o=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const c=(a=(s=o.get(l.parentId))==null?void 0:s.expandedRect)!=null?a:vc(u),d=yP(c,l.rect);o.set(l.parentId,{expandedRect:d,parent:u})}return o.size>0&&o.forEach(({expandedRect:l,parent:u},c)=>{var E,S;const d=u.internals.positionAbsolute,h=Qs(u),p=(E=u.origin)!=null?E:r,b=l.x<d.x?Math.round(Math.abs(d.x-l.x)):0,g=l.y<d.y?Math.round(Math.abs(d.y-l.y)):0,x=Math.max(h.width,Math.round(l.width)),y=Math.max(h.height,Math.round(l.height)),v=(x-h.width)*p[0],w=(y-h.height)*p[1];(b>0||g>0||v||w)&&(i.push({id:c,type:"position",position:{x:u.position.x-b+v,y:u.position.y-g+w}}),(S=n.get(c))==null||S.forEach(A=>{e.some(T=>T.id===A.id)||i.push({id:A.id,type:"position",position:{x:A.position.x+b,y:A.position.y+g}})})),(h.width<l.width||h.height<l.height||b||g)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:x+(b?p[0]*b-v:0),height:y+(g?p[1]*g-w:0)}})}),i}function y9(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const h of e.values()){const p=t.get(h.id);if(!p)continue;if(p.hidden){t.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),a=!0;continue}const b=Q1(h.nodeElement),g=p.measured.width!==b.width||p.measured.height!==b.height;if(!!(b.width&&b.height&&(g||!p.internals.handleBounds||h.force))){const y=h.nodeElement.getBoundingClientRect(),v=bc(p.extent)?p.extent:o;let{positionAbsolute:w}=p.internals;p.parentId&&p.extent==="parent"?w=gP(w,b,t.get(p.parentId)):v&&(w=Wl(w,v,b));const E={...p,measured:b,internals:{...p.internals,positionAbsolute:w,handleBounds:{source:dC("source",h.nodeElement,y,c,p.id),target:dC("target",h.nodeElement,y,c,p.id)}}};t.set(p.id,E),p.parentId&&tE(E,t,n,{nodeOrigin:i}),a=!0,g&&(l.push({id:p.id,type:"dimensions",dimensions:b}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:vc(E,i)}))}}if(d.length>0){const h=nE(d,t,n,i);l.push(...h)}return{changes:l,updatedInternals:a}}async function v9({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function vC(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s="".concat(i,"-").concat(e);const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s="".concat(i,"-").concat(e,"-").concat(o);const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function RP(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},u="".concat(i,"-").concat(s,"--").concat(o,"-").concat(a),c="".concat(o,"-").concat(a,"--").concat(i,"-").concat(s);vC("source",l,c,e,i,s),vC("target",l,u,e,o,a),t.set(r.id,r)}}function b9(e,t){if(e===null||t===null)return!1;const n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].id!==r[i].id||n[i].type!==r[i].type||!Object.is(n[i].data,r[i].data))return!1;return!0}function NP(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:NP(n,t):!1}function bC(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function w9(e,t,n,r){var o,s;const i=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!NP(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(a);u&&i.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:(o=u.measured.width)!=null?o:0,height:(s=u.measured.height)!=null?s:0}})}return i}function z0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[u,c]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&i.push({...d,position:c.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function x9({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},c=null,d=!1,h=null,p=!1;function b({noDragClassName:x,handleSelector:y,domNode:v,isSelectable:w,nodeId:E,nodeClickDistance:S=0}){h=Ni(v);function A({x:D,y:U},J){const{nodeLookup:H,nodeExtent:I,snapGrid:F,snapToGrid:K,nodeOrigin:X,onNodeDrag:O,onSelectionDrag:B,onError:P,updateNodePositions:G}=t();o={x:D,y:U};let Q=!1,se={x:0,y:0,x2:0,y2:0};if(a.size>1&&I){const _e=Ah(a);se=px(_e)}for(const[_e,Ne]of a){if(!H.has(_e))continue;let Te={x:D-Ne.distance.x,y:U-Ne.distance.y};K&&(Te=Ly(Te,F));let W=[[I[0][0],I[0][1]],[I[1][0],I[1][1]]];if(a.size>1&&I&&!Ne.extent){const{positionAbsolute:Oe}=Ne.internals,Me=Oe.x-se.x+I[0][0],Re=Oe.x+Ne.measured.width-se.x2+I[1][0],te=Oe.y-se.y+I[0][1],ae=Oe.y+Ne.measured.height-se.y2+I[1][1];W=[[Me,te],[Re,ae]]}const{position:Y,positionAbsolute:ie}=pP({nodeId:_e,nextPosition:Te,nodeLookup:H,nodeExtent:W,nodeOrigin:X,onError:P});Q=Q||Ne.position.x!==Y.x||Ne.position.y!==Y.y,Ne.position=Y,Ne.internals.positionAbsolute=ie}if(Q&&(G(a,!0),J&&(r||O||!E&&B))){const[_e,Ne]=z0({nodeId:E,dragItems:a,nodeLookup:H});r==null||r(J,a,_e,Ne),O==null||O(J,_e,Ne),E||B==null||B(J,Ne)}}async function T(){var K,X;if(!c)return;const{transform:D,panBy:U,autoPanSpeed:J,autoPanOnNodeDrag:H}=t();if(!H){l=!1,cancelAnimationFrame(s);return}const[I,F]=mP(u,c,J);(I!==0||F!==0)&&(o.x=((K=o.x)!=null?K:0)-I/D[2],o.y=((X=o.y)!=null?X:0)-F/D[2],await U({x:I,y:F})&&A(o,null)),s=requestAnimationFrame(T)}function $(D){var Q;const{nodeLookup:U,multiSelectionActive:J,nodesDraggable:H,transform:I,snapGrid:F,snapToGrid:K,selectNodesOnDrag:X,onNodeDragStart:O,onSelectionDragStart:B,unselectNodesAndEdges:P}=t();d=!0,(!X||!w)&&!J&&E&&((Q=U.get(E))!=null&&Q.selected||P()),w&&X&&E&&(e==null||e(E));const G=ef(D.sourceEvent,{transform:I,snapGrid:F,snapToGrid:K,containerBounds:c});if(o=G,a=w9(U,H,G,E),a.size>0&&(n||O||!E&&B)){const[se,_e]=z0({nodeId:E,dragItems:a,nodeLookup:U});n==null||n(D.sourceEvent,a,se,_e),O==null||O(D.sourceEvent,se,_e),E||B==null||B(D.sourceEvent,_e)}}const q=KI().clickDistance(S).on("start",D=>{const{domNode:U,nodeDragThreshold:J,transform:H,snapGrid:I,snapToGrid:F}=t();c=(U==null?void 0:U.getBoundingClientRect())||null,p=!1,J===0&&$(D),o=ef(D.sourceEvent,{transform:H,snapGrid:I,snapToGrid:F,containerBounds:c}),u=Ms(D.sourceEvent,c)}).on("drag",D=>{var O,B;const{autoPanOnNodeDrag:U,transform:J,snapGrid:H,snapToGrid:I,nodeDragThreshold:F,nodeLookup:K}=t(),X=ef(D.sourceEvent,{transform:J,snapGrid:H,snapToGrid:I,containerBounds:c});if((D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||E&&!K.has(E))&&(p=!0),!p){if(!l&&U&&d&&(l=!0,T()),!d){const P=X.xSnapped-((O=o.x)!=null?O:0),G=X.ySnapped-((B=o.y)!=null?B:0);Math.sqrt(P*P+G*G)>F&&$(D)}(o.x!==X.xSnapped||o.y!==X.ySnapped)&&a&&d&&(u=Ms(D.sourceEvent,c),A(X,D.sourceEvent))}}).on("end",D=>{if(!(!d||p)&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:U,updateNodePositions:J,onNodeDragStop:H,onSelectionDragStop:I}=t();if(J(a,!1),i||H||!E&&I){const[F,K]=z0({nodeId:E,dragItems:a,nodeLookup:U,dragging:!1});i==null||i(D.sourceEvent,a,F,K),H==null||H(D.sourceEvent,F,K),E||I==null||I(D.sourceEvent,K)}}}).filter(D=>{const U=D.target;return!D.button&&(!x||!bC(U,".".concat(x),v))&&(!y||bC(U,y,v))});h.call(q)}function g(){h==null||h.on(".drag",null)}return{update:b,destroy:g}}function _9(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())$f(i,vc(o))>0&&r.push(o);return r}const E9=250;function S9(e,t,n,r){var a,l,u,c,d;let i=[],o=1/0;const s=_9(e,n,t+E9);for(const h of s){const p=[...(l=(a=h.internals.handleBounds)==null?void 0:a.source)!=null?l:[],...(c=(u=h.internals.handleBounds)==null?void 0:u.target)!=null?c:[]];for(const b of p){if(r.nodeId===b.nodeId&&r.type===b.type&&r.id===b.id)continue;const{x:g,y:x}=Mf(h,b,b.position,!0),y=Math.sqrt(Math.pow(g-e.x,2)+Math.pow(x-e.y,2));y>t||(y<o?(i=[{...b,x:g,y:x}],o=y):y===o&&i.push({...b,x:g,y:x}))}}if(!i.length)return null;if(i.length>1){const h=r.type==="source"?"target":"source";return(d=i.find(p=>p.type===h))!=null?d:i[0]}return i[0]}function TP(e,t,n,r,i,o=!1){var u,c,d,h,p,b;const s=r.get(e);if(!s)return null;const a=i==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...(d=(c=s.internals.handleBounds)==null?void 0:c.source)!=null?d:[],...(p=(h=s.internals.handleBounds)==null?void 0:h.target)!=null?p:[]],l=(b=n?a==null?void 0:a.find(g=>g.id===n):a==null?void 0:a[0])!=null?b:null;return l&&o?{...l,...Mf(s,l,l.position,!0)}:l}function IP(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function k9(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const PP=()=>!0;function C9(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:h,cancelConnection:p,onConnectStart:b,onConnect:g,onConnectEnd:x,isValidConnection:y=PP,onReconnectEnd:v,updateConnection:w,getTransform:E,getFromHandle:S,autoPanSpeed:A}){const T=wP(e.target);let $=0,q;const{x:D,y:U}=Ms(e),J=T==null?void 0:T.elementFromPoint(D,U),H=IP(o,J),I=a==null?void 0:a.getBoundingClientRect();if(!I||!H)return;const F=TP(i,H,r,l,t);if(!F)return;let K=Ms(e,I),X=!1,O=null,B=!1,P=null;function G(){if(!c||!I)return;const[ie,Oe]=mP(K,I,A);h({x:ie,y:Oe}),$=requestAnimationFrame(G)}const Q={...F,nodeId:i,type:H,position:F.position},se=l.get(i),Ne={inProgress:!0,isValid:null,from:Mf(se,Q,ve.Left,!0),fromHandle:Q,fromPosition:Q.position,fromNode:se,to:K,toHandle:null,toPosition:sC[Q.position],toNode:null};w(Ne);let Te=Ne;b==null||b(e,{nodeId:i,handleId:r,handleType:H});function W(ie){if(!S()||!Q){Y(ie);return}const Oe=E();K=Ms(ie,I),q=S9(Rh(K,Oe,!1,[1,1]),n,l,Q),X||(G(),X=!0);const Me=OP(ie,{handle:q,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:y,doc:T,lib:u,flowId:d,nodeLookup:l});P=Me.handleDomNode,O=Me.connection,B=k9(!!q,Me.isValid);const Re={...Te,isValid:B,to:q&&B?cm({x:q.x,y:q.y},Oe):K,toHandle:Me.toHandle,toPosition:B&&Me.toHandle?Me.toHandle.position:sC[Q.position],toNode:Me.toHandle?l.get(Me.toHandle.nodeId):null};B&&q&&Te.toHandle&&Re.toHandle&&Te.toHandle.type===Re.toHandle.type&&Te.toHandle.nodeId===Re.toHandle.nodeId&&Te.toHandle.id===Re.toHandle.id&&Te.to.x===Re.to.x&&Te.to.y===Re.to.y||(w(Re),Te=Re)}function Y(ie){(q||P)&&O&&B&&(g==null||g(O));const{inProgress:Oe,...Me}=Te,Re={...Me,toPosition:Te.toHandle?Te.toPosition:null};x==null||x(ie,Re),o&&(v==null||v(ie,Re)),p(),cancelAnimationFrame($),X=!1,B=!1,O=null,P=null,T.removeEventListener("mousemove",W),T.removeEventListener("mouseup",Y),T.removeEventListener("touchmove",W),T.removeEventListener("touchend",Y)}T.addEventListener("mousemove",W),T.addEventListener("mouseup",Y),T.addEventListener("touchmove",W),T.addEventListener("touchend",Y)}function OP(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=PP,nodeLookup:c}){const d=o==="target",h=t?s.querySelector(".".concat(a,'-flow__handle[data-id="').concat(l,"-").concat(t==null?void 0:t.nodeId,"-").concat(t==null?void 0:t.id,"-").concat(t==null?void 0:t.type,'"]')):null,{x:p,y:b}=Ms(e),g=s.elementFromPoint(p,b),x=g!=null&&g.classList.contains("".concat(a,"-flow__handle"))?g:h,y={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){const v=IP(void 0,x),w=x.getAttribute("data-nodeid"),E=x.getAttribute("data-handleid"),S=x.classList.contains("connectable"),A=x.classList.contains("connectableend");if(!w||!v)return y;const T={source:d?w:r,sourceHandle:d?E:i,target:d?r:w,targetHandle:d?i:E};y.connection=T;const q=S&&A&&(n===mc.Strict?d&&v==="source"||!d&&v==="target":w!==r||E!==i);y.isValid=q&&u(T),y.toHandle=TP(w,v,E,c,n,!1)}return y}const vx={onPointerDown:C9,isValid:OP};function j9({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=Ni(e);function o({translateExtent:a,width:l,height:u,zoomStep:c=10,pannable:d=!0,zoomable:h=!0,inversePan:p=!1}){const b=w=>{const E=n();if(w.sourceEvent.type!=="wheel"||!t)return;const S=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*c,A=E[2]*Math.pow(2,S);t.scaleTo(A)};let g=[0,0];const x=w=>{var E,S;(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(g=[(E=w.sourceEvent.clientX)!=null?E:w.sourceEvent.touches[0].clientX,(S=w.sourceEvent.clientY)!=null?S:w.sourceEvent.touches[0].clientY])},y=w=>{var D,U;const E=n();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!t)return;const S=[(D=w.sourceEvent.clientX)!=null?D:w.sourceEvent.touches[0].clientX,(U=w.sourceEvent.clientY)!=null?U:w.sourceEvent.touches[0].clientY],A=[S[0]-g[0],S[1]-g[1]];g=S;const T=r()*Math.max(E[2],Math.log(E[2]))*(p?-1:1),$={x:E[0]-A[0]*T,y:E[1]-A[1]*T},q=[[0,0],[l,u]];t.setViewportConstrained({x:$.x,y:$.y,zoom:E[2]},q,a)},v=lP().on("start",x).on("zoom",d?y:null).on("zoom.wheel",h?b:null);i.call(v,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:yo}}const A9=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,By=e=>({x:e.x,y:e.y,zoom:e.k}),H0=({x:e,y:t,zoom:n})=>$y.translate(e,t).scale(n),Bu=(e,t)=>e.target.closest(".".concat(t)),$P=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),U0=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},MP=e=>{const t=e.ctrlKey&&dm()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function R9({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(Bu(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&s){const x=yo(c),y=MP(c),v=d*Math.pow(2,y);r.scaleTo(n,v,x,c);return}const h=c.deltaMode===1?20:1;let p=i===Pl.Vertical?0:c.deltaX*h,b=i===Pl.Horizontal?0:c.deltaY*h;!dm()&&c.shiftKey&&i!==Pl.Vertical&&(p=c.deltaY*h,b=0),r.translateBy(n,-(p/d)*o,-(b/d)*o,{internal:!0});const g=By(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(c,g)),e.isPanScrolling&&(l==null||l(c,g),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,g),e.isPanScrolling=!1},150))}}function N9({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=Bu(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function T9({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=By(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function I9({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a,l;e.usedRightMouseButton=!!(n&&$P(t,(s=e.mouseButton)!=null?s:0)),(a=o.sourceEvent)!=null&&a.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((l=o.sourceEvent)!=null&&l.internal)&&(i==null||i(o.sourceEvent,By(o.transform)))}}function P9({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a,l;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&$P(t,(l=e.mouseButton)!=null?l:0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&A9(e.prevViewport,s.transform))){const u=By(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function O9({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u}){return c=>{var b;const d=e||t,h=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(Bu(c,"".concat(u,"-flow__node"))||Bu(c,"".concat(u,"-flow__edge"))))return!0;if(!r&&!d&&!i&&!o&&!n||s||Bu(c,a)&&c.type==="wheel"||Bu(c,l)&&(c.type!=="wheel"||i&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((b=c.touches)==null?void 0:b.length)>1)return c.preventDefault(),!1;if(!d&&!i&&!h&&c.type==="wheel"||!r&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(r)&&!r.includes(c.button)&&c.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&p}}function $9({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),h=lP().clickDistance(!_o(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),p=Ni(e).call(h);w({x:o.x,y:o.y,zoom:yc(o.zoom,t,n)},[[0,0],[d.width,d.height]],i);const b=p.on("wheel.zoom"),g=p.on("dblclick.zoom");h.wheelDelta(MP);function x(J,H){return p?new Promise(I=>{h==null||h.transform(U0(p,H==null?void 0:H.duration,()=>I(!0)),J)}):Promise.resolve(!1)}function y({noWheelClassName:J,noPanClassName:H,onPaneContextMenu:I,userSelectionActive:F,panOnScroll:K,panOnDrag:X,panOnScrollMode:O,panOnScrollSpeed:B,preventScrolling:P,zoomOnPinch:G,zoomOnScroll:Q,zoomOnDoubleClick:se,zoomActivationKeyPressed:_e,lib:Ne,onTransformChange:Te}){F&&!c.isZoomingOrPanning&&v();const Y=K&&!_e&&!F?R9({zoomPanValues:c,noWheelClassName:J,d3Selection:p,d3Zoom:h,panOnScrollMode:O,panOnScrollSpeed:B,zoomOnPinch:G,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):N9({noWheelClassName:J,preventScrolling:P,d3ZoomHandler:b});if(p.on("wheel.zoom",Y,{passive:!1}),!F){const Oe=T9({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:a});h.on("start",Oe);const Me=I9({zoomPanValues:c,panOnDrag:X,onPaneContextMenu:!!I,onPanZoom:s,onTransformChange:Te});h.on("zoom",Me);const Re=P9({zoomPanValues:c,panOnDrag:X,panOnScroll:K,onPaneContextMenu:I,onPanZoomEnd:l,onDraggingChange:u});h.on("end",Re)}const ie=O9({zoomActivationKeyPressed:_e,panOnDrag:X,zoomOnScroll:Q,panOnScroll:K,zoomOnDoubleClick:se,zoomOnPinch:G,userSelectionActive:F,noPanClassName:H,noWheelClassName:J,lib:Ne});h.filter(ie),se?p.on("dblclick.zoom",g):p.on("dblclick.zoom",null)}function v(){h.on("zoom",null)}async function w(J,H,I){const F=H0(J),K=h==null?void 0:h.constrain()(F,H,I);return K&&await x(K),new Promise(X=>X(K))}async function E(J,H){const I=H0(J);return await x(I,H),new Promise(F=>F(I))}function S(J){if(p){const H=H0(J),I=p.property("__zoom");(I.k!==J.zoom||I.x!==J.x||I.y!==J.y)&&(h==null||h.transform(p,H,null,{sync:!0}))}}function A(){const J=p?aP(p.node()):{x:0,y:0,k:1};return{x:J.x,y:J.y,zoom:J.k}}function T(J,H){return p?new Promise(I=>{h==null||h.scaleTo(U0(p,H==null?void 0:H.duration,()=>I(!0)),J)}):Promise.resolve(!1)}function $(J,H){return p?new Promise(I=>{h==null||h.scaleBy(U0(p,H==null?void 0:H.duration,()=>I(!0)),J)}):Promise.resolve(!1)}function q(J){h==null||h.scaleExtent(J)}function D(J){h==null||h.translateExtent(J)}function U(J){const H=!_o(J)||J<0?0:J;h==null||h.clickDistance(H)}return{update:y,destroy:v,setViewport:E,setViewportConstrained:w,getViewport:A,scaleTo:T,scaleBy:$,setScaleExtent:q,setTranslateExtent:D,syncViewport:S,setClickDistance:U}}var tf;(function(e){e.Line="line",e.Handle="handle"})(tf||(tf={}));function M9({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function D9(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function aa(e,t){return Math.max(0,t-e)}function la(e,t){return Math.max(0,e-t)}function Ap(e,t,n){return Math.max(0,t-e,e-n)}function wC(e,t){return e?!t:t}function L9(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:u}=t;const{isHorizontal:c,isVertical:d}=t,h=c&&d,{xSnapped:p,ySnapped:b}=n,{minWidth:g,maxWidth:x,minHeight:y,maxHeight:v}=r,{x:w,y:E,width:S,height:A,aspectRatio:T}=e;let $=Math.floor(c?p-e.pointerX:0),q=Math.floor(d?b-e.pointerY:0);const D=S+(l?-$:$),U=A+(u?-q:q),J=-o[0]*S,H=-o[1]*A;let I=Ap(D,g,x),F=Ap(U,y,v);if(s){let O=0,B=0;l&&$<0?O=aa(w+$+J,s[0][0]):!l&&$>0&&(O=la(w+D+J,s[1][0])),u&&q<0?B=aa(E+q+H,s[0][1]):!u&&q>0&&(B=la(E+U+H,s[1][1])),I=Math.max(I,O),F=Math.max(F,B)}if(a){let O=0,B=0;l&&$>0?O=la(w+$,a[0][0]):!l&&$<0&&(O=aa(w+D,a[1][0])),u&&q>0?B=la(E+q,a[0][1]):!u&&q<0&&(B=aa(E+U,a[1][1])),I=Math.max(I,O),F=Math.max(F,B)}if(i){if(c){const O=Ap(D/T,y,v)*T;if(I=Math.max(I,O),s){let B=0;!l&&!u||l&&!u&&h?B=la(E+H+D/T,s[1][1])*T:B=aa(E+H+(l?$:-$)/T,s[0][1])*T,I=Math.max(I,B)}if(a){let B=0;!l&&!u||l&&!u&&h?B=aa(E+D/T,a[1][1])*T:B=la(E+(l?$:-$)/T,a[0][1])*T,I=Math.max(I,B)}}if(d){const O=Ap(U*T,g,x)/T;if(F=Math.max(F,O),s){let B=0;!l&&!u||u&&!l&&h?B=la(w+U*T+J,s[1][0])/T:B=aa(w+(u?q:-q)*T+J,s[0][0])/T,F=Math.max(F,B)}if(a){let B=0;!l&&!u||u&&!l&&h?B=aa(w+U*T,a[1][0])/T:B=la(w+(u?q:-q)*T,a[0][0])/T,F=Math.max(F,B)}}}q=q+(q<0?F:-F),$=$+($<0?I:-I),i&&(h?D>U*T?q=(wC(l,u)?-$:$)/T:$=(wC(l,u)?-q:q)*T:c?(q=$/T,u=l):($=q*T,l=u));const K=l?w+$:w,X=u?E+q:E;return{width:S+(l?-$:$),height:A+(u?-q:q),x:o[0]*$*(l?-1:1)+K,y:o[1]*q*(u?-1:1)+X}}const DP={width:0,height:0,x:0,y:0},B9={...DP,pointerX:0,pointerY:0,aspectRatio:1};function F9(e){return[[0,0],[e.measured.width,e.measured.height]]}function z9(e,t,n){var u,c;const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=(u=e.measured.width)!=null?u:0,s=(c=e.measured.height)!=null?c:0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function H9({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=Ni(e);function s({controlPosition:l,boundaries:u,keepAspectRatio:c,resizeDirection:d,onResizeStart:h,onResize:p,onResizeEnd:b,shouldResize:g}){let x={...DP},y={...B9};const v=D9(l);let w,E=null,S=[],A,T,$;const q=KI().on("start",D=>{var B,P,G,Q,se,_e;const{nodeLookup:U,transform:J,snapGrid:H,snapToGrid:I,nodeOrigin:F,paneDomNode:K}=n();if(w=U.get(t),!w)return;E=(B=K==null?void 0:K.getBoundingClientRect())!=null?B:null;const{xSnapped:X,ySnapped:O}=ef(D.sourceEvent,{transform:J,snapGrid:H,snapToGrid:I,containerBounds:E});x={width:(P=w.measured.width)!=null?P:0,height:(G=w.measured.height)!=null?G:0,x:(Q=w.position.x)!=null?Q:0,y:(se=w.position.y)!=null?se:0},y={...x,pointerX:X,pointerY:O,aspectRatio:x.width/x.height},A=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(A=U.get(w.parentId),T=A&&w.extent==="parent"?F9(A):void 0),S=[],$=void 0;for(const[Ne,Te]of U)if(Te.parentId===t&&(S.push({id:Ne,position:{...Te.position},extent:Te.extent}),Te.extent==="parent"||Te.expandParent)){const W=z9(Te,w,(_e=Te.origin)!=null?_e:F);$?$=[[Math.min(W[0][0],$[0][0]),Math.min(W[0][1],$[0][1])],[Math.max(W[1][0],$[1][0]),Math.max(W[1][1],$[1][1])]]:$=W}h==null||h(D,{...x})}).on("drag",D=>{var ae,pe,We;const{transform:U,snapGrid:J,snapToGrid:H,nodeOrigin:I}=n(),F=ef(D.sourceEvent,{transform:U,snapGrid:J,snapToGrid:H,containerBounds:E}),K=[];if(!w)return;const{x:X,y:O,width:B,height:P}=x,G={},Q=(ae=w.origin)!=null?ae:I,{width:se,height:_e,x:Ne,y:Te}=L9(y,v,F,u,c,Q,T,$),W=se!==B,Y=_e!==P,ie=Ne!==X&&W,Oe=Te!==O&&Y;if(!ie&&!Oe&&!W&&!Y)return;if((ie||Oe||Q[0]===1||Q[1]===1)&&(G.x=ie?Ne:x.x,G.y=Oe?Te:x.y,x.x=G.x,x.y=G.y,S.length>0)){const Fe=Ne-X,Ue=Te-O;for(const ue of S)ue.position={x:ue.position.x-Fe+Q[0]*(se-B),y:ue.position.y-Ue+Q[1]*(_e-P)},K.push(ue)}if((W||Y)&&(G.width=W&&(!d||d==="horizontal")?se:x.width,G.height=Y&&(!d||d==="vertical")?_e:x.height,x.width=G.width,x.height=G.height),A&&w.expandParent){const Fe=Q[0]*((pe=G.width)!=null?pe:0);G.x&&G.x<Fe&&(x.x=Fe,y.x=y.x-(G.x-Fe));const Ue=Q[1]*((We=G.height)!=null?We:0);G.y&&G.y<Ue&&(x.y=Ue,y.y=y.y-(G.y-Ue))}const Me=M9({width:x.width,prevWidth:B,height:x.height,prevHeight:P,affectsX:v.affectsX,affectsY:v.affectsY}),Re={...x,direction:Me};(g==null?void 0:g(D,Re))!==!1&&(p==null||p(D,Re),r(G,K))}).on("end",D=>{b==null||b(D,{...x}),i==null||i({...x})});o.call(q)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var LP={exports:{}},BP={},FP={exports:{}},zP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=k;function U9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W9=typeof Object.is=="function"?Object.is:U9,V9=wc.useState,q9=wc.useEffect,K9=wc.useLayoutEffect,G9=wc.useDebugValue;function Y9(e,t){var n=t(),r=V9({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return K9(function(){i.value=n,i.getSnapshot=t,W0(i)&&o({inst:i})},[e,n,t]),q9(function(){return W0(i)&&o({inst:i}),e(function(){W0(i)&&o({inst:i})})},[e]),G9(n),n}function W0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!W9(e,n)}catch(r){return!0}}function X9(e,t){return t()}var J9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?X9:Y9;zP.useSyncExternalStore=wc.useSyncExternalStore!==void 0?wc.useSyncExternalStore:J9;FP.exports=zP;var Q9=FP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy=k,Z9=Q9;function ez(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tz=typeof Object.is=="function"?Object.is:ez,nz=Z9.useSyncExternalStore,rz=Fy.useRef,iz=Fy.useEffect,oz=Fy.useMemo,sz=Fy.useDebugValue;BP.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=rz(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=oz(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),i!==void 0&&s.hasValue){var b=s.value;if(i(b,p))return d=b}return d=p}if(b=d,tz(c,p))return b;var g=r(p);return i!==void 0&&i(b,g)?(c=p,b):(c=p,d=g)}var u=!1,c,d,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var a=nz(e,o[0],o[1]);return iz(function(){s.hasValue=!0,s.value=a},[a]),sz(a),a};LP.exports=BP;var az=LP.exports;const lz=Xs(az),uz={LEGACY:!1},xC=e=>{let t;const n=new Set,r=(c,d)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=(d!=null?d:typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(b=>b(t,p))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(uz?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},cz=e=>e?xC(e):xC,{useDebugValue:dz}=$t,{useSyncExternalStoreWithSelector:fz}=lz,hz=e=>e;function HP(e,t=hz,n){const r=fz(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return dz(r),r}const _C=(e,t)=>{const n=cz(e),r=(i,o=t)=>HP(n,i,o);return Object.assign(r,n),r},pz=(e,t)=>e?_C(e,t):_C;function Fn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const zy=k.createContext(null),gz=zy.Provider,UP=Ro.error001();function en(e,t){const n=k.useContext(zy);if(n===null)throw new Error(UP);return HP(n,e,t)}function Sn(){const e=k.useContext(zy);if(e===null)throw new Error(UP);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const EC={display:"none"},mz={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},WP="react-flow__node-desc",VP="react-flow__edge-desc",yz="react-flow__aria-live",vz=e=>e.ariaLiveMessage;function bz({rfId:e}){const t=en(vz);return f.jsx("div",{id:"".concat(yz,"-").concat(e),"aria-live":"assertive","aria-atomic":"true",style:mz,children:t})}function wz({rfId:e,disableKeyboardA11y:t}){return f.jsxs(f.Fragment,{children:[f.jsxs("div",{id:"".concat(WP,"-").concat(e),style:EC,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),f.jsx("div",{id:"".concat(VP,"-").concat(e),style:EC,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&f.jsx(bz,{rfId:e})]})}const xz=e=>e.userSelectionActive?"none":"all",Nh=k.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},o)=>{const s=en(xz),a="".concat(e).split("-");return f.jsx("div",{className:Zn(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:o,...i,children:t})});Nh.displayName="Panel";function _z({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:f.jsx(Nh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Ez=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Rp=e=>e.id;function Sz(e,t){return Fn(e.selectedNodes.map(Rp),t.selectedNodes.map(Rp))&&Fn(e.selectedEdges.map(Rp),t.selectedEdges.map(Rp))}function kz({onSelectionChange:e}){const t=Sn(),{selectedNodes:n,selectedEdges:r}=en(Ez,Sz);return k.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(o=>o(i))},[n,r,e]),null}const Cz=e=>!!e.onSelectionChangeHandlers;function jz({onSelectionChange:e}){const t=en(Cz);return e||t?f.jsx(kz,{onSelectionChange:e}):null}const qP=[0,0],Az={x:0,y:0,zoom:1},Rz=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],SC=[...Rz,"rfId"],Nz=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),kC={translateExtent:Pf,nodeOrigin:qP,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Tz(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:o,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:u}=en(Nz,Fn),c=Sn();k.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=kC,a()}),[]);const d=k.useRef(kC);return k.useEffect(()=>{for(const h of SC){const p=e[h],b=d.current[h];p!==b&&(typeof e[h]>"u"||(h==="nodes"?t(p):h==="edges"?n(p):h==="minZoom"?r(p):h==="maxZoom"?i(p):h==="translateExtent"?o(p):h==="nodeExtent"?s(p):h==="paneClickDistance"?u(p):h==="fitView"?c.setState({fitViewQueued:p}):h==="fitViewOptions"?c.setState({fitViewOptions:p}):c.setState({[h]:p})))}d.current=e},SC.map(h=>e[h])),null}function CC(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Iz(e){var r;const[t,n]=k.useState(e==="system"?null:e);return k.useEffect(()=>{if(e!=="system"){n(e);return}const i=CC(),o=()=>n(i!=null&&i.matches?"dark":"light");return o(),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}},[e]),t!==null?t:(r=CC())!=null&&r.matches?"dark":"light"}const jC=typeof document<"u"?document:null;function Df(e=null,t={target:jC,actInsideInputWithModifier:!0}){const[n,r]=k.useState(!1),i=k.useRef(!1),o=k.useRef(new Set([])),[s,a]=k.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+","\n").replace("\n\n","\n+").split("\n")),c=u.reduce((d,h)=>d.concat(...h),[]);return[u,c]}return[[],[]]},[e]);return k.useEffect(()=>{const l=(t==null?void 0:t.target)||jC;if(e!==null){const u=h=>{var g,x;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&xP(h))return!1;const b=RC(h.code,a);if(o.current.add(h[b]),AC(s,o.current,!1)){const y=((x=(g=h.composedPath)==null?void 0:g.call(h))==null?void 0:x[0])||h.target,v=(y==null?void 0:y.nodeName)==="BUTTON"||(y==null?void 0:y.nodeName)==="A";t.preventDefault!==!1&&(i.current||!v)&&h.preventDefault(),r(!0)}},c=h=>{const p=RC(h.code,a);AC(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[p]),h.key==="Meta"&&o.current.clear(),i.current=!1},d=()=>{o.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",c),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",c),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function AC(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function RC(e,t){return t.includes(e)?"code":"key"}const Pz=()=>{const e=Sn();return k.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var a,l,u;const{transform:[r,i,o],panZoom:s}=e.getState();return s?(await s.setViewport({x:(a=t.x)!=null?a:r,y:(l=t.y)!=null?l:i,zoom:(u=t.zoom)!=null?u:o},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:i,height:o,maxZoom:s,panZoom:a}=e.getState(),l=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=i/2-t*l,c=o/2-n*l;return a?(await a.setViewport({x:u,y:c,zoom:l},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var u;const{width:r,height:i,minZoom:o,maxZoom:s,panZoom:a}=e.getState(),l=J1(t,r,i,o,s,(u=n==null?void 0:n.padding)!=null?u:.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{var h,p;const{transform:r,snapGrid:i,snapToGrid:o,domNode:s}=e.getState();if(!s)return t;const{x:a,y:l}=s.getBoundingClientRect(),u={x:t.x-a,y:t.y-l},c=(h=n.snapGrid)!=null?h:i,d=(p=n.snapToGrid)!=null?p:o;return Rh(u,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),s=cm(t,n);return{x:s.x+i,y:s.y+o}}}),[])};function KP(e,t){const n=[],r=new Map,i=[];for(const o of e)if(o.type==="add"){i.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const s=r.get(o.id);s?s.push(o):r.set(o.id,[o])}for(const o of t){const s=r.get(o.id);if(!s){n.push(o);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...o};for(const l of s)Oz(l,a);n.push(a)}return i.length&&i.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function Oz(e,t){var n;switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&((n=t.measured)!=null||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function GP(e,t){return KP(e,t)}function YP(e,t){return KP(e,t)}function ml(e,t){return{id:e,type:"select",selected:t}}function Fu(e,t=new Set,n=!1){const r=[];for(const[i,o]of e){const s=t.has(i);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),r.push(ml(o.id,s)))}return r}function NC({items:e=[],lookup:t}){var i,o;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,a]of e.entries()){const l=t.get(a.id),u=(o=(i=l==null?void 0:l.internals)==null?void 0:i.userNode)!=null?o:l;u!==void 0&&u!==a&&n.push({id:a.id,item:a,type:"replace"}),u===void 0&&n.push({item:a,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function TC(e){return{id:e.id,type:"remove"}}const IC=e=>K7(e),$z=e=>fP(e);function XP(e){return k.forwardRef(e)}const Mz=typeof window<"u"?k.useLayoutEffect:k.useEffect;function PC(e){const[t,n]=k.useState(BigInt(0)),[r]=k.useState(()=>Dz(()=>n(i=>i+BigInt(1))));return Mz(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function Dz(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const JP=k.createContext(null);function Lz({children:e}){const t=Sn(),n=k.useCallback(a=>{const{nodes:l=[],setNodes:u,hasDefaultNodes:c,onNodesChange:d,nodeLookup:h,fitViewQueued:p}=t.getState();let b=l;for(const g of a)b=typeof g=="function"?g(b):g;if(c)u(b);else{const g=NC({items:b,lookup:h});g.length>0?d==null||d(g):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:y,setNodes:v}=t.getState();x&&v(y)})}},[]),r=PC(n),i=k.useCallback(a=>{const{edges:l=[],setEdges:u,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:h}=t.getState();let p=l;for(const b of a)p=typeof b=="function"?b(p):b;c?u(p):d&&d(NC({items:p,lookup:h}))},[]),o=PC(i),s=k.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return f.jsx(JP.Provider,{value:s,children:e})}function Bz(){const e=k.useContext(JP);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Fz=e=>!!e.panZoom;function cn(){const e=Pz(),t=Sn(),n=Bz(),r=en(Fz),i=k.useMemo(()=>{const o=d=>t.getState().nodeLookup.get(d),s=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},l=d=>{var y,v,w,E;const{nodeLookup:h,nodeOrigin:p}=t.getState(),b=IC(d)?d:h.get(d.id),g=b.parentId?bP(b.position,b.measured,b.parentId,h,p):b.position,x={...b,position:g,width:(v=(y=b.measured)==null?void 0:y.width)!=null?v:b.width,height:(E=(w=b.measured)==null?void 0:w.height)!=null?E:b.height};return vc(x)},u=(d,h,p={replace:!1})=>{s(b=>b.map(g=>{if(g.id===d){const x=typeof h=="function"?h(g):h;return p.replace&&IC(x)?x:{...g,...x}}return g}))},c=(d,h,p={replace:!1})=>{a(b=>b.map(g=>{if(g.id===d){const x=typeof h=="function"?h(g):h;return p.replace&&$z(x)?x:{...g,...x}}return g}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var h;return(h=o(d))==null?void 0:h.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(h=>({...h}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:s,setEdges:a,addNodes:d=>{const h=Array.isArray(d)?d:[d];n.nodeQueue.push(p=>[...p,...h])},addEdges:d=>{const h=Array.isArray(d)?d:[d];n.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:d=[],edges:h=[],transform:p}=t.getState(),[b,g,x]=p;return{nodes:d.map(y=>({...y})),edges:h.map(y=>({...y})),viewport:{x:b,y:g,zoom:x}}},deleteElements:async({nodes:d=[],edges:h=[]})=>{const{nodes:p,edges:b,onNodesDelete:g,onEdgesDelete:x,triggerNodeChanges:y,triggerEdgeChanges:v,onDelete:w,onBeforeDelete:E}=t.getState(),{nodes:S,edges:A}=await Q7({nodesToRemove:d,edgesToRemove:h,nodes:p,edges:b,onBeforeDelete:E}),T=A.length>0,$=S.length>0;if(T){const q=A.map(TC);x==null||x(A),v(q)}if($){const q=S.map(TC);g==null||g(S),y(q)}return($||T)&&(w==null||w({nodes:S,edges:A})),{deletedNodes:S,deletedEdges:A}},getIntersectingNodes:(d,h=!0,p)=>{const b=uC(d),g=b?d:l(d),x=p!==void 0;return g?(p||t.getState().nodes).filter(y=>{const v=t.getState().nodeLookup.get(y.id);if(v&&!b&&(y.id===d.id||!v.internals.positionAbsolute))return!1;const w=vc(x?y:v),E=$f(w,g);return h&&E>0||E>=g.width*g.height}):[]},isNodeIntersecting:(d,h,p=!0)=>{const g=uC(d)?d:l(d);if(!g)return!1;const x=$f(g,h);return p&&x>0||x>=g.width*g.height},updateNode:u,updateNodeData:(d,h,p={replace:!1})=>{u(d,b=>{const g=typeof h=="function"?h(b):h;return p.replace?{...b,data:g}:{...b,data:{...b.data,...g}}},p)},updateEdge:c,updateEdgeData:(d,h,p={replace:!1})=>{c(d,b=>{const g=typeof h=="function"?h(b):h;return p.replace?{...b,data:g}:{...b,data:{...b.data,...g}}},p)},getNodesBounds:d=>{const{nodeLookup:h,nodeOrigin:p}=t.getState();return G7(d,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:d,id:h,nodeId:p})=>{var b,g;return Array.from((g=(b=t.getState().connectionLookup.get("".concat(p,"-").concat(d).concat(h?"-".concat(h):"")))==null?void 0:b.values())!=null?g:[])},getNodeConnections:({type:d,handleId:h,nodeId:p})=>{var b,g;return Array.from((g=(b=t.getState().connectionLookup.get("".concat(p).concat(d?h?"-".concat(d,"-").concat(h):"-".concat(d):"")))==null?void 0:b.values())!=null?g:[])},fitView:async d=>{var p;const h=(p=t.getState().fitViewResolver)!=null?p:n9();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:h}),n.nodeQueue.push(b=>[...b]),h.promise}}},[]);return k.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const OC=e=>e.selected,zz={actInsideInputWithModifier:!1},Hz=typeof window<"u"?window:void 0;function Uz({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Sn(),{deleteElements:r}=cn(),i=Df(e,zz),o=Df(t,{target:Hz});k.useEffect(()=>{if(i){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(OC),edges:s.filter(OC)}),n.setState({nodesSelectionActive:!1})}},[i]),k.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function Wz(e){const t=Sn();k.useEffect(()=>{const n=()=>{var i,o;if(!e.current)return!1;const r=Q1(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Ro.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Hy={position:"absolute",width:"100%",height:"100%",top:0,left:0},Vz=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function qz({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:o=Pl.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:d,zoomActivationKeyCode:h,preventScrolling:p=!0,children:b,noWheelClassName:g,noPanClassName:x,onViewportChange:y,isControlledViewport:v,paneClickDistance:w}){const E=Sn(),S=k.useRef(null),{userSelectionActive:A,lib:T}=en(Vz,Fn),$=Df(h),q=k.useRef();Wz(S);const D=k.useCallback(U=>{y==null||y({x:U[0],y:U[1],zoom:U[2]}),v||E.setState({transform:U})},[y,v]);return k.useEffect(()=>{if(S.current){q.current=$9({domNode:S.current,minZoom:c,maxZoom:d,translateExtent:u,viewport:l,paneClickDistance:w,onDraggingChange:I=>E.setState({paneDragging:I}),onPanZoomStart:(I,F)=>{const{onViewportChangeStart:K,onMoveStart:X}=E.getState();X==null||X(I,F),K==null||K(F)},onPanZoom:(I,F)=>{const{onViewportChange:K,onMove:X}=E.getState();X==null||X(I,F),K==null||K(F)},onPanZoomEnd:(I,F)=>{const{onViewportChangeEnd:K,onMoveEnd:X}=E.getState();X==null||X(I,F),K==null||K(F)}});const{x:U,y:J,zoom:H}=q.current.getViewport();return E.setState({panZoom:q.current,transform:[U,J,H],domNode:S.current.closest(".react-flow")}),()=>{var I;(I=q.current)==null||I.destroy()}}},[]),k.useEffect(()=>{var U;(U=q.current)==null||U.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:o,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:$,preventScrolling:p,noPanClassName:x,userSelectionActive:A,noWheelClassName:g,lib:T,onTransformChange:D})},[e,t,n,r,i,o,s,a,$,p,x,A,g,T,D]),f.jsx("div",{className:"react-flow__renderer",ref:S,style:Hy,children:b})}const Kz=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Gz(){const{userSelectionActive:e,userSelectionRect:t}=en(Kz,Fn);return e&&t?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const V0=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Yz=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Xz({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Of.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:o,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:h,children:p}){const b=Sn(),{userSelectionActive:g,elementsSelectable:x,dragging:y,connectionInProgress:v}=en(Yz,Fn),w=x&&(e||g),E=k.useRef(null),S=k.useRef(),A=k.useRef(new Set),T=k.useRef(new Set),$=k.useRef(!1),q=k.useRef(!1),D=X=>{if($.current||v){$.current=!1;return}a==null||a(X),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},U=X=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){X.preventDefault();return}l==null||l(X)},J=u?X=>u(X):void 0,H=X=>{var Q,se;const{resetSelectedElements:O,domNode:B}=b.getState();if(S.current=B==null?void 0:B.getBoundingClientRect(),!x||!e||X.button!==0||X.target!==E.current||!S.current)return;(se=(Q=X.target)==null?void 0:Q.setPointerCapture)==null||se.call(Q,X.pointerId),q.current=!0,$.current=!1;const{x:P,y:G}=Ms(X.nativeEvent,S.current);O(),b.setState({userSelectionRect:{width:0,height:0,startX:P,startY:G,x:P,y:G}}),o==null||o(X)},I=X=>{var ae,pe;const{userSelectionRect:O,transform:B,nodeLookup:P,edgeLookup:G,connectionLookup:Q,triggerNodeChanges:se,triggerEdgeChanges:_e,defaultEdgeOptions:Ne}=b.getState();if(!S.current||!O)return;$.current=!0;const{x:Te,y:W}=Ms(X.nativeEvent,S.current),{startX:Y,startY:ie}=O,Oe={startX:Y,startY:ie,x:Te<Y?Te:Y,y:W<ie?W:ie,width:Math.abs(Te-Y),height:Math.abs(W-ie)},Me=A.current,Re=T.current;A.current=new Set(hP(P,Oe,B,n===Of.Partial,!0).map(We=>We.id)),T.current=new Set;const te=(ae=Ne==null?void 0:Ne.selectable)!=null?ae:!0;for(const We of A.current){const Fe=Q.get(We);if(Fe)for(const{edgeId:Ue}of Fe.values()){const ue=G.get(Ue);ue&&((pe=ue.selectable)!=null?pe:te)&&T.current.add(Ue)}}if(!cC(Me,A.current)){const We=Fu(P,A.current,!0);se(We)}if(!cC(Re,T.current)){const We=Fu(G,T.current);_e(We)}b.setState({userSelectionRect:Oe,userSelectionActive:!0,nodesSelectionActive:!1})},F=X=>{var B,P;if(X.button!==0||!q.current)return;(P=(B=X.target)==null?void 0:B.releasePointerCapture)==null||P.call(B,X.pointerId);const{userSelectionRect:O}=b.getState();!g&&O&&X.target===E.current&&(D==null||D(X)),b.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),s==null||s(X),(t||i)&&($.current=!1),q.current=!1},K=r===!0||Array.isArray(r)&&r.includes(0);return f.jsxs("div",{className:Zn(["react-flow__pane",{draggable:K,dragging:y,selection:e}]),onClick:w?void 0:V0(D,E),onContextMenu:V0(U,E),onWheel:V0(J,E),onPointerEnter:w?void 0:c,onPointerDown:w?H:d,onPointerMove:w?I:d,onPointerUp:w?F:void 0,onPointerLeave:h,ref:E,style:Hy,children:[p,f.jsx(Gz,{})]})}function bx({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",Ro.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function QP({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,nodeClickDistance:s}){const a=Sn(),[l,u]=k.useState(!1),c=k.useRef();return k.useEffect(()=>{c.current=x9({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{bx({id:d,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),k.useEffect(()=>{var d,h;if(t)(d=c.current)==null||d.destroy();else if(e.current)return(h=c.current)==null||h.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:i,nodeClickDistance:s}),()=>{var p;(p=c.current)==null||p.destroy()}},[n,r,t,o,e,i]),l}const Jz=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function ZP(){const e=Sn();return k.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:o,nodesDraggable:s,onError:a,updateNodePositions:l,nodeLookup:u,nodeOrigin:c}=e.getState(),d=new Map,h=Jz(s),p=i?o[0]:5,b=i?o[1]:5,g=n.direction.x*p*n.factor,x=n.direction.y*b*n.factor;for(const[,y]of u){if(!h(y))continue;let v={x:y.internals.positionAbsolute.x+g,y:y.internals.positionAbsolute.y+x};i&&(v=Ly(v,o));const{position:w,positionAbsolute:E}=pP({nodeId:y.id,nextPosition:v,nodeLookup:u,nodeExtent:r,nodeOrigin:c,onError:a});y.position=w,y.internals.positionAbsolute=E,d.set(y.id,y)}l(d)},[])}const rE=k.createContext(null),Qz=rE.Provider;rE.Consumer;const iE=()=>k.useContext(rE),Zz=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),eH=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:o,connection:s}=r,{fromHandle:a,toHandle:l,isValid:u}=s,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:o===mc.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&u}};function tH({type:e="source",position:t=ve.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:d,...h},p){var F,K;const b=s||null,g=e==="target",x=Sn(),y=iE(),{connectOnClick:v,noPanClassName:w,rfId:E}=en(Zz,Fn),{connectingFrom:S,connectingTo:A,clickConnecting:T,isPossibleEndHandle:$,connectionInProcess:q,clickConnectionInProcess:D,valid:U}=en(eH(y,b,e),Fn);y||(K=(F=x.getState()).onError)==null||K.call(F,"010",Ro.error010());const J=X=>{const{defaultEdgeOptions:O,onConnect:B,hasDefaultEdges:P}=x.getState(),G={...O,...X};if(P){const{edges:Q,setEdges:se}=x.getState();se(CP(G,Q))}B==null||B(G),a==null||a(G)},H=X=>{if(!y)return;const O=_P(X.nativeEvent);if(i&&(O&&X.button===0||!O)){const B=x.getState();vx.onPointerDown(X.nativeEvent,{autoPanOnConnect:B.autoPanOnConnect,connectionMode:B.connectionMode,connectionRadius:B.connectionRadius,domNode:B.domNode,nodeLookup:B.nodeLookup,lib:B.lib,isTarget:g,handleId:b,nodeId:y,flowId:B.rfId,panBy:B.panBy,cancelConnection:B.cancelConnection,onConnectStart:B.onConnectStart,onConnectEnd:B.onConnectEnd,updateConnection:B.updateConnection,onConnect:J,isValidConnection:n||B.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:B.autoPanSpeed})}O?c==null||c(X):d==null||d(X)},I=X=>{const{onClickConnectStart:O,onClickConnectEnd:B,connectionClickStartHandle:P,connectionMode:G,isValidConnection:Q,lib:se,rfId:_e,nodeLookup:Ne,connection:Te}=x.getState();if(!y||!P&&!i)return;if(!P){O==null||O(X.nativeEvent,{nodeId:y,handleId:b,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:y,type:e,id:b}});return}const W=wP(X.target),Y=n||Q,{connection:ie,isValid:Oe}=vx.isValid(X.nativeEvent,{handle:{nodeId:y,id:b,type:e},connectionMode:G,fromNodeId:P.nodeId,fromHandleId:P.id||null,fromType:P.type,isValidConnection:Y,flowId:_e,doc:W,lib:se,nodeLookup:Ne});Oe&&ie&&J(ie);const Me=structuredClone(Te);delete Me.inProgress,Me.toPosition=Me.toHandle?Me.toHandle.position:null,B==null||B(X,Me),x.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":b,"data-nodeid":y,"data-handlepos":t,"data-id":"".concat(E,"-").concat(y,"-").concat(b,"-").concat(e),className:Zn(["react-flow__handle","react-flow__handle-".concat(t),"nodrag",w,u,{source:!g,target:g,connectable:r,connectablestart:i,connectableend:o,clickconnecting:T,connectingfrom:S,connectingto:A,valid:U,connectionindicator:r&&(!q||$)&&(q||D?o:i)}]),onMouseDown:H,onTouchStart:H,onClick:v?I:void 0,ref:p,...h,children:l})}const $e=k.memo(XP(tH));function nH({data:e,isConnectable:t,sourcePosition:n=ve.Bottom}){return f.jsxs(f.Fragment,{children:[e==null?void 0:e.label,f.jsx($e,{type:"source",position:n,isConnectable:t})]})}function rH({data:e,isConnectable:t,targetPosition:n=ve.Top,sourcePosition:r=ve.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,f.jsx($e,{type:"source",position:r,isConnectable:t})]})}function iH(){return null}function oH({data:e,isConnectable:t,targetPosition:n=ve.Top}){return f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const fm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},$C={input:nH,default:rH,output:oH,group:iH};function sH(e){var t,n,r,i,o,s,a,l,u,c;return e.internals.handleBounds===void 0?{width:(r=(t=e.width)!=null?t:e.initialWidth)!=null?r:(n=e.style)==null?void 0:n.width,height:(s=(i=e.height)!=null?i:e.initialHeight)!=null?s:(o=e.style)==null?void 0:o.height}:{width:(l=e.width)!=null?l:(a=e.style)==null?void 0:a.width,height:(c=e.height)!=null?c:(u=e.style)==null?void 0:u.height}}const aH=e=>{const{width:t,height:n,x:r,y:i}=Ah(e.nodeLookup,{filter:o=>!!o.selected});return{width:_o(t)?t:null,height:_o(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(i,"px)")}};function lH({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Sn(),{width:i,height:o,transformString:s,userSelectionActive:a}=en(aH,Fn),l=ZP(),u=k.useRef(null);if(k.useEffect(()=>{var h;n||(h=u.current)==null||h.focus({preventScroll:!0})},[n]),QP({nodeRef:u}),a||!i||!o)return null;const c=e?h=>{const p=r.getState().nodes.filter(b=>b.selected);e(h,p)}:void 0,d=h=>{Object.prototype.hasOwnProperty.call(fm,h.key)&&(h.preventDefault(),l({direction:fm[h.key],factor:h.shiftKey?4:1}))};return f.jsx("div",{className:Zn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:f.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:i,height:o}})})}const MC=typeof window<"u"?window:void 0,uH=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function eO({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:d,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:b,panActivationKeyCode:g,zoomActivationKeyCode:x,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:E,panOnScrollSpeed:S,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:$,defaultViewport:q,translateExtent:D,minZoom:U,maxZoom:J,preventScrolling:H,onSelectionContextMenu:I,noWheelClassName:F,noPanClassName:K,disableKeyboardA11y:X,onViewportChange:O,isControlledViewport:B}){const{nodesSelectionActive:P,userSelectionActive:G}=en(uH),Q=Df(u,{target:MC}),se=Df(g,{target:MC}),_e=se||$,Ne=se||E,Te=c&&_e!==!0,W=Q||G||Te;return Uz({deleteKeyCode:l,multiSelectionKeyCode:b}),f.jsx(qz,{onPaneContextMenu:o,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:Ne,panOnScrollSpeed:S,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:!Q&&_e,defaultViewport:q,translateExtent:D,minZoom:U,maxZoom:J,zoomActivationKeyCode:x,preventScrolling:H,noWheelClassName:F,noPanClassName:K,onViewportChange:O,isControlledViewport:B,paneClickDistance:a,children:f.jsxs(Xz,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:_e,isSelecting:!!W,selectionMode:d,selectionKeyPressed:Q,selectionOnDrag:Te,children:[e,P&&f.jsx(lH,{onSelectionContextMenu:I,noPanClassName:K,disableKeyboardA11y:X})]})})}eO.displayName="FlowRenderer";const cH=k.memo(eO),dH=e=>t=>e?hP(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function fH(e){return en(k.useCallback(dH(e),[e]),Fn)}const hH=e=>e.updateNodeInternals;function pH(){const e=en(hH),[t]=k.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const o=i.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:i.target,force:!0})}),e(r)}));return k.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function gH({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=Sn(),o=k.useRef(null),s=k.useRef(null),a=k.useRef(e.sourcePosition),l=k.useRef(e.targetPosition),u=k.useRef(t),c=n&&!!e.internals.handleBounds;return k.useEffect(()=>{o.current&&!e.hidden&&(!c||s.current!==o.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(o.current),s.current=o.current)},[c,e.hidden]),k.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),k.useEffect(()=>{if(o.current){const d=u.current!==t,h=a.current!==e.sourcePosition,p=l.current!==e.targetPosition;(d||h||p)&&(u.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function mH({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:o,onDoubleClick:s,nodesDraggable:a,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:d,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:b,rfId:g,nodeTypes:x,nodeClickDistance:y,onError:v}){var W,Y;const{node:w,internals:E,isParent:S}=en(ie=>{const Oe=ie.nodeLookup.get(e),Me=ie.parentLookup.has(e);return{node:Oe,internals:Oe.internals,isParent:Me}},Fn);let A=w.type||"default",T=(x==null?void 0:x[A])||$C[A];T===void 0&&(v==null||v("003",Ro.error003(A)),A="default",T=$C.default);const $=!!(w.draggable||a&&typeof w.draggable>"u"),q=!!(w.selectable||l&&typeof w.selectable>"u"),D=!!(w.connectable||u&&typeof w.connectable>"u"),U=!!(w.focusable||c&&typeof w.focusable>"u"),J=Sn(),H=vP(w),I=gH({node:w,nodeType:A,hasDimensions:H,resizeObserver:d}),F=QP({nodeRef:I,disabled:w.hidden||!$,noDragClassName:h,handleSelector:w.dragHandle,nodeId:e,isSelectable:q,nodeClickDistance:y}),K=ZP();if(w.hidden)return null;const X=Qs(w),O=sH(w),B=q||$||t||n||r||i,P=n?ie=>n(ie,{...E.userNode}):void 0,G=r?ie=>r(ie,{...E.userNode}):void 0,Q=i?ie=>i(ie,{...E.userNode}):void 0,se=o?ie=>o(ie,{...E.userNode}):void 0,_e=s?ie=>s(ie,{...E.userNode}):void 0,Ne=ie=>{const{selectNodesOnDrag:Oe,nodeDragThreshold:Me}=J.getState();q&&(!Oe||!$||Me>0)&&bx({id:e,store:J,nodeRef:I}),t&&t(ie,{...E.userNode})},Te=ie=>{if(!(xP(ie.nativeEvent)||b))if(uP.includes(ie.key)&&q){const Oe=ie.key==="Escape";bx({id:e,store:J,unselect:Oe,nodeRef:I})}else $&&w.selected&&Object.prototype.hasOwnProperty.call(fm,ie.key)&&(ie.preventDefault(),J.setState({ariaLiveMessage:"Moved selected node ".concat(ie.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~E.positionAbsolute.x,", y: ").concat(~~E.positionAbsolute.y)}),K({direction:fm[ie.key],factor:ie.shiftKey?4:1}))};return f.jsx("div",{className:Zn(["react-flow__node","react-flow__node-".concat(A),{[p]:$},w.className,{selected:w.selected,selectable:q,parent:S,draggable:$,dragging:F}]),ref:I,style:{zIndex:E.z,transform:"translate(".concat(E.positionAbsolute.x,"px,").concat(E.positionAbsolute.y,"px)"),pointerEvents:B?"all":"none",visibility:H?"visible":"hidden",...w.style,...O},"data-id":e,"data-testid":"rf__node-".concat(e),onMouseEnter:P,onMouseMove:G,onMouseLeave:Q,onContextMenu:se,onClick:Ne,onDoubleClick:_e,onKeyDown:U?Te:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":b?void 0:"".concat(WP,"-").concat(g),"aria-label":w.ariaLabel,children:f.jsx(Qz,{value:e,children:f.jsx(T,{id:e,data:w.data,type:A,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:(W=w.selected)!=null?W:!1,selectable:q,draggable:$,deletable:(Y=w.deletable)!=null?Y:!0,isConnectable:D,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:F,dragHandle:w.dragHandle,zIndex:E.z,parentId:w.parentId,...X})})})}const yH=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function tO(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:o}=en(yH,Fn),s=fH(e.onlyRenderVisibleElements),a=pH();return f.jsx("div",{className:"react-flow__nodes",style:Hy,children:s.map(l=>f.jsx(mH,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:o},l))})}tO.displayName="NodeRenderer";const vH=k.memo(tO);function bH(e){return en(k.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const o=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);o&&s&&o9({sourceNode:o,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Fn)}const wH=({color:e="none",strokeWidth:t=1})=>f.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xH=({color:e="none",strokeWidth:t=1})=>f.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),DC={[lm.Arrow]:wH,[lm.ArrowClosed]:xH};function _H(e){const t=Sn();return k.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(DC,e)?DC[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",Ro.error009(e)),null)},[e])}const EH=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const l=_H(t);return l?f.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:"".concat(r),markerHeight:"".concat(i),viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:f.jsx(l,{color:n,strokeWidth:s})}):null},nO=({defaultColor:e,rfId:t})=>{const n=en(o=>o.edges),r=en(o=>o.defaultEdgeOptions),i=k.useMemo(()=>f9(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?f.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:f.jsx("defs",{children:i.map(o=>f.jsx(EH,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};nO.displayName="MarkerDefinitions";var SH=k.memo(nO);function rO({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:o,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c}){const[d,h]=k.useState({x:1,y:0,width:0,height:0}),p=Zn(["react-flow__edge-textwrapper",u]),b=k.useRef(null);return k.useEffect(()=>{if(b.current){const g=b.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),n?f.jsxs("g",{transform:"translate(".concat(e-d.width/2," ").concat(t-d.height/2,")"),className:p,visibility:d.width?"visible":"hidden",...c,children:[i&&f.jsx("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),f.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:b,style:r,children:n}),l]}):null}rO.displayName="EdgeText";const kH=k.memo(rO);function Uy({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...c,d:e,fill:"none",className:Zn(["react-flow__edge-path",c.className])}),u&&f.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&_o(t)&&_o(n)?f.jsx(kH,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function LC({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===ve.Left||e===ve.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function iO({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:r,targetY:i,targetPosition:o=ve.Top}){const[s,a]=LC({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=LC({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,d,h,p]=EP({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:u});return["M".concat(e,",").concat(t," C").concat(s,",").concat(a," ").concat(l,",").concat(u," ").concat(r,",").concat(i),c,d,h,p]}function oO(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s,targetPosition:a,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:g,markerStart:x,interactionWidth:y})=>{const[v,w,E]=iO({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a}),S=e.isInternal?void 0:t;return f.jsx(Uy,{id:S,path:v,labelX:w,labelY:E,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:g,markerStart:x,interactionWidth:y})})}const CH=oO({isInternal:!1}),sO=oO({isInternal:!0});CH.displayName="SimpleBezierEdge";sO.displayName="SimpleBezierEdgeInternal";function aO(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,sourcePosition:p=ve.Bottom,targetPosition:b=ve.Top,markerEnd:g,markerStart:x,pathOptions:y,interactionWidth:v})=>{const[w,E,S]=gx({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:o,targetPosition:b,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset}),A=e.isInternal?void 0:t;return f.jsx(Uy,{id:A,path:w,labelX:E,labelY:S,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:g,markerStart:x,interactionWidth:v})})}const lO=aO({isInternal:!1}),uO=aO({isInternal:!0});lO.displayName="SmoothStepEdge";uO.displayName="SmoothStepEdgeInternal";function cO(e){return k.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return f.jsx(lO,{...n,id:r,pathOptions:k.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const jH=cO({isInternal:!1}),dO=cO({isInternal:!0});jH.displayName="StepEdge";dO.displayName="StepEdgeInternal";function fO(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:b,interactionWidth:g})=>{const[x,y,v]=jP({sourceX:n,sourceY:r,targetX:i,targetY:o}),w=e.isInternal?void 0:t;return f.jsx(Uy,{id:w,path:x,labelX:y,labelY:v,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:b,interactionWidth:g})})}const AH=fO({isInternal:!1}),hO=fO({isInternal:!0});AH.displayName="StraightEdge";hO.displayName="StraightEdgeInternal";function pO(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s=ve.Bottom,targetPosition:a=ve.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:g,markerStart:x,pathOptions:y,interactionWidth:v})=>{const[w,E,S]=SP({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a,curvature:y==null?void 0:y.curvature}),A=e.isInternal?void 0:t;return f.jsx(Uy,{id:A,path:w,labelX:E,labelY:S,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:g,markerStart:x,interactionWidth:v})})}const RH=pO({isInternal:!1}),gO=pO({isInternal:!0});RH.displayName="BezierEdge";gO.displayName="BezierEdgeInternal";const BC={default:gO,straight:hO,step:dO,smoothstep:uO,simplebezier:sO},FC={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},NH=(e,t,n)=>n===ve.Left?e-t:n===ve.Right?e+t:e,TH=(e,t,n)=>n===ve.Top?e-t:n===ve.Bottom?e+t:e,zC="react-flow__edgeupdater";function HC({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a}){return f.jsx("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:Zn([zC,"".concat(zC,"-").concat(a)]),cx:NH(t,r,e),cy:TH(n,r,e),r,stroke:"transparent",fill:"transparent"})}function IH({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:d,setReconnecting:h,setUpdateHover:p}){const b=Sn(),g=(E,S)=>{if(E.button!==0)return;const{autoPanOnConnect:A,domNode:T,isValidConnection:$,connectionMode:q,connectionRadius:D,lib:U,onConnectStart:J,onConnectEnd:H,cancelConnection:I,nodeLookup:F,rfId:K,panBy:X,updateConnection:O}=b.getState(),B=S.type==="target";h(!0),c==null||c(E,n,S.type);const P=(Q,se)=>{h(!1),d==null||d(Q,n,S.type,se)},G=Q=>u==null?void 0:u(n,Q);vx.onPointerDown(E.nativeEvent,{autoPanOnConnect:A,connectionMode:q,connectionRadius:D,domNode:T,handleId:S.id,nodeId:S.nodeId,nodeLookup:F,isTarget:B,edgeUpdaterType:S.type,lib:U,flowId:K,cancelConnection:I,panBy:X,isValidConnection:$,onConnect:G,onConnectStart:J,onConnectEnd:H,onReconnectEnd:P,updateConnection:O,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle})},x=E=>{var S;return g(E,{nodeId:n.target,id:(S=n.targetHandle)!=null?S:null,type:"target"})},y=E=>{var S;return g(E,{nodeId:n.source,id:(S=n.sourceHandle)!=null?S:null,type:"source"})},v=()=>p(!0),w=()=>p(!1);return f.jsxs(f.Fragment,{children:[(e===!0||e==="source")&&f.jsx(HC,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:x,onMouseEnter:v,onMouseOut:w,type:"source"}),(e===!0||e==="target")&&f.jsx(HC,{position:l,centerX:o,centerY:s,radius:t,onMouseDown:y,onMouseEnter:v,onMouseOut:w,type:"target"})]})}function PH({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,reconnectRadius:c,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,rfId:b,edgeTypes:g,noPanClassName:x,onError:y,disableKeyboardA11y:v}){var Re;let w=en(te=>te.edgeLookup.get(e));const E=en(te=>te.defaultEdgeOptions);w=E?{...E,...w}:w;let S=w.type||"default",A=(g==null?void 0:g[S])||BC[S];A===void 0&&(y==null||y("011",Ro.error011(S)),S="default",A=BC.default);const T=!!(w.focusable||t&&typeof w.focusable>"u"),$=typeof d<"u"&&(w.reconnectable||n&&typeof w.reconnectable>"u"),q=!!(w.selectable||r&&typeof w.selectable>"u"),D=k.useRef(null),[U,J]=k.useState(!1),[H,I]=k.useState(!1),F=Sn(),{zIndex:K,sourceX:X,sourceY:O,targetX:B,targetY:P,sourcePosition:G,targetPosition:Q}=en(k.useCallback(te=>{const ae=te.nodeLookup.get(w.source),pe=te.nodeLookup.get(w.target);if(!ae||!pe)return{zIndex:w.zIndex,...FC};const We=d9({id:e,sourceNode:ae,targetNode:pe,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:te.connectionMode,onError:y});return{zIndex:i9({selected:w.selected,zIndex:w.zIndex,sourceNode:ae,targetNode:pe,elevateOnSelect:te.elevateEdgesOnSelect}),...We||FC}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),Fn),se=k.useMemo(()=>w.markerStart?"url('#".concat(mx(w.markerStart,b),"')"):void 0,[w.markerStart,b]),_e=k.useMemo(()=>w.markerEnd?"url('#".concat(mx(w.markerEnd,b),"')"):void 0,[w.markerEnd,b]);if(w.hidden||X===null||O===null||B===null||P===null)return null;const Ne=te=>{var Fe;const{addSelectedEdges:ae,unselectNodesAndEdges:pe,multiSelectionActive:We}=F.getState();q&&(F.setState({nodesSelectionActive:!1}),w.selected&&We?(pe({nodes:[],edges:[w]}),(Fe=D.current)==null||Fe.blur()):ae([e])),i&&i(te,w)},Te=o?te=>{o(te,{...w})}:void 0,W=s?te=>{s(te,{...w})}:void 0,Y=a?te=>{a(te,{...w})}:void 0,ie=l?te=>{l(te,{...w})}:void 0,Oe=u?te=>{u(te,{...w})}:void 0,Me=te=>{var ae;if(!v&&uP.includes(te.key)&&q){const{unselectNodesAndEdges:pe,addSelectedEdges:We}=F.getState();te.key==="Escape"?((ae=D.current)==null||ae.blur(),pe({edges:[w]})):We([e])}};return f.jsx("svg",{style:{zIndex:K},children:f.jsxs("g",{className:Zn(["react-flow__edge","react-flow__edge-".concat(S),w.className,x,{selected:w.selected,animated:w.animated,inactive:!q&&!i,updating:U,selectable:q}]),onClick:Ne,onDoubleClick:Te,onContextMenu:W,onMouseEnter:Y,onMouseMove:ie,onMouseLeave:Oe,onKeyDown:T?Me:void 0,tabIndex:T?0:void 0,role:T?"button":"img","data-id":e,"data-testid":"rf__edge-".concat(e),"aria-label":w.ariaLabel===null?void 0:w.ariaLabel||"Edge from ".concat(w.source," to ").concat(w.target),"aria-describedby":T?"".concat(VP,"-").concat(b):void 0,ref:D,children:[!H&&f.jsx(A,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:q,deletable:(Re=w.deletable)!=null?Re:!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:X,sourceY:O,targetX:B,targetY:P,sourcePosition:G,targetPosition:Q,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:se,markerEnd:_e,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),$&&f.jsx(IH,{edge:w,isReconnectable:$,reconnectRadius:c,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,sourceX:X,sourceY:O,targetX:B,targetY:P,sourcePosition:G,targetPosition:Q,setUpdateHover:J,setReconnecting:I})]})})}const OH=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function mO({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:b,disableKeyboardA11y:g}){const{edgesFocusable:x,edgesReconnectable:y,elementsSelectable:v,onError:w}=en(OH,Fn),E=bH(t);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(SH,{defaultColor:e,rfId:n}),E.map(S=>f.jsx(PH,{id:S,edgesFocusable:x,edgesReconnectable:y,elementsSelectable:v,noPanClassName:i,onReconnect:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:d,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:b,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:g},S))]})}mO.displayName="EdgeRenderer";const $H=k.memo(mO),MH=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function DH({children:e}){const t=en(MH);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function LH(e){const t=cn(),n=k.useRef(!1);k.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const BH=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function FH(e){const t=en(BH),n=Sn();return k.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function zH(e){return e.connection.inProgress?{...e.connection,to:Rh(e.connection.to,e.transform)}:{...e.connection}}function HH(e){return zH}function UH(e){const t=HH();return en(t,Fn)}const WH=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function VH({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:o,height:s,isValid:a,inProgress:l}=en(WH,Fn);return!(o&&i&&l)?null:f.jsx("svg",{style:e,width:o,height:s,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:Zn(["react-flow__connection",dP(a)]),children:f.jsx(yO,{style:t,type:n,CustomComponent:r,isValid:a})})})}const yO=({style:e,type:t=ya.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:o,fromNode:s,fromHandle:a,fromPosition:l,to:u,toNode:c,toHandle:d,toPosition:h}=UH();if(!i)return;if(n)return f.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:h,connectionStatus:dP(r),toNode:c,toHandle:d});let p="";const b={sourceX:o.x,sourceY:o.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:h};switch(t){case ya.Bezier:[p]=SP(b);break;case ya.SimpleBezier:[p]=iO(b);break;case ya.Step:[p]=gx({...b,borderRadius:0});break;case ya.SmoothStep:[p]=gx(b);break;default:[p]=jP(b)}return f.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};yO.displayName="ConnectionLine";const qH={};function UC(e=qH){k.useRef(e),Sn(),k.useEffect(()=>{},[e])}function KH(){Sn(),k.useRef(!1),k.useEffect(()=>{},[])}function vO({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:o,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:h,onSelectionEnd:p,connectionLineType:b,connectionLineStyle:g,connectionLineComponent:x,connectionLineContainerStyle:y,selectionKeyCode:v,selectionOnDrag:w,selectionMode:E,multiSelectionKeyCode:S,panActivationKeyCode:A,zoomActivationKeyCode:T,deleteKeyCode:$,onlyRenderVisibleElements:q,elementsSelectable:D,defaultViewport:U,translateExtent:J,minZoom:H,maxZoom:I,preventScrolling:F,defaultMarkerColor:K,zoomOnScroll:X,zoomOnPinch:O,panOnScroll:B,panOnScrollSpeed:P,panOnScrollMode:G,zoomOnDoubleClick:Q,panOnDrag:se,onPaneClick:_e,onPaneMouseEnter:Ne,onPaneMouseMove:Te,onPaneMouseLeave:W,onPaneScroll:Y,onPaneContextMenu:ie,paneClickDistance:Oe,nodeClickDistance:Me,onEdgeContextMenu:Re,onEdgeMouseEnter:te,onEdgeMouseMove:ae,onEdgeMouseLeave:pe,reconnectRadius:We,onReconnect:Fe,onReconnectStart:Ue,onReconnectEnd:ue,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:xe,disableKeyboardA11y:dt,nodeExtent:gt,rfId:ft,viewport:At,onViewportChange:L}){return UC(e),UC(t),KH(),LH(n),FH(At),f.jsx(cH,{onPaneClick:_e,onPaneMouseEnter:Ne,onPaneMouseMove:Te,onPaneMouseLeave:W,onPaneContextMenu:ie,onPaneScroll:Y,paneClickDistance:Oe,deleteKeyCode:$,selectionKeyCode:v,selectionOnDrag:w,selectionMode:E,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:S,panActivationKeyCode:A,zoomActivationKeyCode:T,elementsSelectable:D,zoomOnScroll:X,zoomOnPinch:O,zoomOnDoubleClick:Q,panOnScroll:B,panOnScrollSpeed:P,panOnScrollMode:G,panOnDrag:se,defaultViewport:U,translateExtent:J,minZoom:H,maxZoom:I,onSelectionContextMenu:d,preventScrolling:F,noDragClassName:Pe,noWheelClassName:qe,noPanClassName:xe,disableKeyboardA11y:dt,onViewportChange:L,isControlledViewport:!!At,children:f.jsxs(DH,{children:[f.jsx($H,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:Fe,onReconnectStart:Ue,onReconnectEnd:ue,onlyRenderVisibleElements:q,onEdgeContextMenu:Re,onEdgeMouseEnter:te,onEdgeMouseMove:ae,onEdgeMouseLeave:pe,reconnectRadius:We,defaultMarkerColor:K,noPanClassName:xe,disableKeyboardA11y:dt,rfId:ft}),f.jsx(VH,{style:g,type:b,component:x,containerStyle:y}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(vH,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:Me,onlyRenderVisibleElements:q,noPanClassName:xe,noDragClassName:Pe,disableKeyboardA11y:dt,nodeExtent:gt,rfId:ft}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}vO.displayName="GraphView";const GH=k.memo(vO),WC=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l=.5,maxZoom:u=2,nodeOrigin:c,nodeExtent:d}={})=>{var A,T,$;const h=new Map,p=new Map,b=new Map,g=new Map,x=(A=r!=null?r:t)!=null?A:[],y=(T=n!=null?n:e)!=null?T:[],v=c!=null?c:[0,0],w=d!=null?d:Pf;RP(b,g,x);const E=yx(y,h,p,{nodeOrigin:v,nodeExtent:w,elevateNodesOnSelect:!1});let S=[0,0,1];if(s&&i&&o){const q=Ah(h,{filter:H=>!!((H.width||H.initialWidth)&&(H.height||H.initialHeight))}),{x:D,y:U,zoom:J}=J1(q,i,o,l,u,($=a==null?void 0:a.padding)!=null?$:.1);S=[D,U,J]}return{rfId:"1",width:0,height:0,transform:S,nodes:y,nodesInitialized:E,nodeLookup:h,parentLookup:p,edges:x,edgeLookup:g,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:u,translateExtent:Pf,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:mc.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s!=null?s:!1,fitViewOptions:a,fitViewResolver:null,connection:{...cP},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Z7,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},YH=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d})=>pz((h,p)=>{async function b(){const{nodeLookup:g,panZoom:x,fitViewOptions:y,fitViewResolver:v,width:w,height:E,minZoom:S,maxZoom:A}=p();x&&(await J7({nodes:g,width:w,height:E,panZoom:x,minZoom:S,maxZoom:A},y),v==null||v.resolve(!0),h({fitViewResolver:null}))}return{...WC({nodes:e,edges:t,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r}),setNodes:g=>{const{nodeLookup:x,parentLookup:y,nodeOrigin:v,elevateNodesOnSelect:w,fitViewQueued:E}=p(),S=yx(g,x,y,{nodeOrigin:v,nodeExtent:d,elevateNodesOnSelect:w,checkEquality:!0});E&&S?(b(),h({nodes:g,nodesInitialized:S,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:g,nodesInitialized:S})},setEdges:g=>{const{connectionLookup:x,edgeLookup:y}=p();RP(x,y,g),h({edges:g})},setDefaultNodesAndEdges:(g,x)=>{if(g){const{setNodes:y}=p();y(g),h({hasDefaultNodes:!0})}if(x){const{setEdges:y}=p();y(x),h({hasDefaultEdges:!0})}},updateNodeInternals:g=>{const{triggerNodeChanges:x,nodeLookup:y,parentLookup:v,domNode:w,nodeOrigin:E,nodeExtent:S,debug:A,fitViewQueued:T}=p(),{changes:$,updatedInternals:q}=y9(g,y,v,w,E,S);q&&(p9(y,v,{nodeOrigin:E,nodeExtent:S}),T?(b(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),($==null?void 0:$.length)>0&&(A&&console.log("React Flow: trigger node changes",$),x==null||x($)))},updateNodePositions:(g,x=!1)=>{var S,A;const y=[],v=[],{nodeLookup:w,triggerNodeChanges:E}=p();for(const[T,$]of g){const q=w.get(T),D=!!(q!=null&&q.expandParent&&(q!=null&&q.parentId)&&($!=null&&$.position)),U={id:T,type:"position",position:D?{x:Math.max(0,$.position.x),y:Math.max(0,$.position.y)}:$.position,dragging:x};D&&q.parentId&&y.push({id:T,parentId:q.parentId,rect:{...$.internals.positionAbsolute,width:(S=$.measured.width)!=null?S:0,height:(A=$.measured.height)!=null?A:0}}),v.push(U)}if(y.length>0){const{parentLookup:T,nodeOrigin:$}=p(),q=nE(y,w,T,$);v.push(...q)}E(v)},triggerNodeChanges:g=>{const{onNodesChange:x,setNodes:y,nodes:v,hasDefaultNodes:w,debug:E}=p();if(g!=null&&g.length){if(w){const S=GP(g,v);y(S)}E&&console.log("React Flow: trigger node changes",g),x==null||x(g)}},triggerEdgeChanges:g=>{const{onEdgesChange:x,setEdges:y,edges:v,hasDefaultEdges:w,debug:E}=p();if(g!=null&&g.length){if(w){const S=YP(g,v);y(S)}E&&console.log("React Flow: trigger edge changes",g),x==null||x(g)}},addSelectedNodes:g=>{const{multiSelectionActive:x,edgeLookup:y,nodeLookup:v,triggerNodeChanges:w,triggerEdgeChanges:E}=p();if(x){const S=g.map(A=>ml(A,!0));w(S);return}w(Fu(v,new Set([...g]),!0)),E(Fu(y))},addSelectedEdges:g=>{const{multiSelectionActive:x,edgeLookup:y,nodeLookup:v,triggerNodeChanges:w,triggerEdgeChanges:E}=p();if(x){const S=g.map(A=>ml(A,!0));E(S);return}E(Fu(y,new Set([...g]))),w(Fu(v,new Set,!0))},unselectNodesAndEdges:({nodes:g,edges:x}={})=>{const{edges:y,nodes:v,nodeLookup:w,triggerNodeChanges:E,triggerEdgeChanges:S}=p(),A=g||v,T=x||y,$=A.map(D=>{const U=w.get(D.id);return U&&(U.selected=!1),ml(D.id,!1)}),q=T.map(D=>ml(D.id,!1));E($),S(q)},setMinZoom:g=>{const{panZoom:x,maxZoom:y}=p();x==null||x.setScaleExtent([g,y]),h({minZoom:g})},setMaxZoom:g=>{const{panZoom:x,minZoom:y}=p();x==null||x.setScaleExtent([y,g]),h({maxZoom:g})},setTranslateExtent:g=>{var x;(x=p().panZoom)==null||x.setTranslateExtent(g),h({translateExtent:g})},setPaneClickDistance:g=>{var x;(x=p().panZoom)==null||x.setClickDistance(g)},resetSelectedElements:()=>{const{edges:g,nodes:x,triggerNodeChanges:y,triggerEdgeChanges:v,elementsSelectable:w}=p();if(!w)return;const E=x.reduce((A,T)=>T.selected?[...A,ml(T.id,!1)]:A,[]),S=g.reduce((A,T)=>T.selected?[...A,ml(T.id,!1)]:A,[]);y(E),v(S)},setNodeExtent:g=>{const{nodes:x,nodeLookup:y,parentLookup:v,nodeOrigin:w,elevateNodesOnSelect:E,nodeExtent:S}=p();g[0][0]===S[0][0]&&g[0][1]===S[0][1]&&g[1][0]===S[1][0]&&g[1][1]===S[1][1]||(yx(x,y,v,{nodeOrigin:w,nodeExtent:g,elevateNodesOnSelect:E,checkEquality:!1}),h({nodeExtent:g}))},panBy:g=>{const{transform:x,width:y,height:v,panZoom:w,translateExtent:E}=p();return v9({delta:g,panZoom:w,transform:x,translateExtent:E,width:y,height:v})},cancelConnection:()=>{h({connection:{...cP}})},updateConnection:g=>{h({connection:g})},reset:()=>h({...WC()})}},Object.is);function XH({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:o,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:l,fitView:u,nodeOrigin:c,nodeExtent:d,children:h}){const[p]=k.useState(()=>YH({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:u,minZoom:s,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:d}));return f.jsx(gz,{value:p,children:f.jsx(Lz,{children:h})})}function JH({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:s,fitView:a,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:h}){return k.useContext(zy)?f.jsx(f.Fragment,{children:e}):f.jsx(XH,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:s,fitView:a,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:c,nodeOrigin:d,nodeExtent:h,children:e})}const QH={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ZH({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o,edgeTypes:s,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:b,onConnectEnd:g,onClickConnectStart:x,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:S,onNodeDoubleClick:A,onNodeDragStart:T,onNodeDrag:$,onNodeDragStop:q,onNodesDelete:D,onEdgesDelete:U,onDelete:J,onSelectionChange:H,onSelectionDragStart:I,onSelectionDrag:F,onSelectionDragStop:K,onSelectionContextMenu:X,onSelectionStart:O,onSelectionEnd:B,onBeforeDelete:P,connectionMode:G,connectionLineType:Q=ya.Bezier,connectionLineStyle:se,connectionLineComponent:_e,connectionLineContainerStyle:Ne,deleteKeyCode:Te="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:Y=!1,selectionMode:ie=Of.Full,panActivationKeyCode:Oe="Space",multiSelectionKeyCode:Me=dm()?"Meta":"Control",zoomActivationKeyCode:Re=dm()?"Meta":"Control",snapToGrid:te,snapGrid:ae,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:We,nodesDraggable:Fe,nodesConnectable:Ue,nodesFocusable:ue,nodeOrigin:Pe=qP,edgesFocusable:qe,edgesReconnectable:xe,elementsSelectable:dt=!0,defaultViewport:gt=Az,minZoom:ft=.5,maxZoom:At=2,translateExtent:L=Pf,preventScrolling:j=!0,nodeExtent:R,defaultMarkerColor:Z="#b1b1b7",zoomOnScroll:de=!0,zoomOnPinch:Ae=!0,panOnScroll:He=!1,panOnScrollSpeed:Tt=.5,panOnScrollMode:Wt=Pl.Free,zoomOnDoubleClick:Ze=!0,panOnDrag:Mt=!0,onPaneClick:Pt,onPaneMouseEnter:Si,onPaneMouseMove:ot,onPaneMouseLeave:ki,onPaneScroll:$o,onPaneContextMenu:Mo,paneClickDistance:ps=0,nodeClickDistance:lo=0,children:ta,onReconnect:ee,onReconnectStart:oe,onReconnectEnd:et,onEdgeContextMenu:it,onEdgeDoubleClick:vt,onEdgeMouseEnter:Dt,onEdgeMouseMove:Zt,onEdgeMouseLeave:gs,reconnectRadius:kr=10,onNodesChange:uo,onEdgesChange:Do,noDragClassName:na="nodrag",noWheelClassName:Gr="nowheel",noPanClassName:Yr="nopan",fitView:gr,fitViewOptions:Ci,connectOnClick:co,attributionPosition:qn,proOptions:Cr,defaultEdgeOptions:fo,elevateNodesOnSelect:gu,elevateEdgesOnSelect:il,disableKeyboardA11y:hn=!1,autoPanOnConnect:Vi,autoPanOnNodeDrag:mr,autoPanSpeed:ol,connectionRadius:Xr,isValidConnection:ra,onError:Lo,style:ms,id:qi,nodeDragThreshold:mu,viewport:Bo,onViewportChange:yu,width:qt,height:V,colorMode:fe="light",debug:ne,onScroll:he,...Se},ge){const Ve=qi||"1",Ye=Iz(fe),Je=k.useCallback(Xe=>{Xe.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),he==null||he(Xe)},[he]);return f.jsx("div",{"data-testid":"rf__wrapper",...Se,onScroll:Je,style:{...ms,...QH},ref:ge,className:Zn(["react-flow",i,Ye]),id:qi,children:f.jsxs(JH,{nodes:e,edges:t,width:qt,height:V,fitView:gr,fitViewOptions:Ci,minZoom:ft,maxZoom:At,nodeOrigin:Pe,nodeExtent:R,children:[f.jsx(GH,{onInit:u,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:S,onNodeDoubleClick:A,nodeTypes:o,edgeTypes:s,connectionLineType:Q,connectionLineStyle:se,connectionLineComponent:_e,connectionLineContainerStyle:Ne,selectionKeyCode:W,selectionOnDrag:Y,selectionMode:ie,deleteKeyCode:Te,multiSelectionKeyCode:Me,panActivationKeyCode:Oe,zoomActivationKeyCode:Re,onlyRenderVisibleElements:pe,defaultViewport:gt,translateExtent:L,minZoom:ft,maxZoom:At,preventScrolling:j,zoomOnScroll:de,zoomOnPinch:Ae,zoomOnDoubleClick:Ze,panOnScroll:He,panOnScrollSpeed:Tt,panOnScrollMode:Wt,panOnDrag:Mt,onPaneClick:Pt,onPaneMouseEnter:Si,onPaneMouseMove:ot,onPaneMouseLeave:ki,onPaneScroll:$o,onPaneContextMenu:Mo,paneClickDistance:ps,nodeClickDistance:lo,onSelectionContextMenu:X,onSelectionStart:O,onSelectionEnd:B,onReconnect:ee,onReconnectStart:oe,onReconnectEnd:et,onEdgeContextMenu:it,onEdgeDoubleClick:vt,onEdgeMouseEnter:Dt,onEdgeMouseMove:Zt,onEdgeMouseLeave:gs,reconnectRadius:kr,defaultMarkerColor:Z,noDragClassName:na,noWheelClassName:Gr,noPanClassName:Yr,rfId:Ve,disableKeyboardA11y:hn,nodeExtent:R,viewport:Bo,onViewportChange:yu}),f.jsx(Tz,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:b,onConnectEnd:g,onClickConnectStart:x,onClickConnectEnd:y,nodesDraggable:Fe,nodesConnectable:Ue,nodesFocusable:ue,edgesFocusable:qe,edgesReconnectable:xe,elementsSelectable:dt,elevateNodesOnSelect:gu,elevateEdgesOnSelect:il,minZoom:ft,maxZoom:At,nodeExtent:R,onNodesChange:uo,onEdgesChange:Do,snapToGrid:te,snapGrid:ae,connectionMode:G,translateExtent:L,connectOnClick:co,defaultEdgeOptions:fo,fitView:gr,fitViewOptions:Ci,onNodesDelete:D,onEdgesDelete:U,onDelete:J,onNodeDragStart:T,onNodeDrag:$,onNodeDragStop:q,onSelectionDrag:F,onSelectionDragStart:I,onSelectionDragStop:K,onMove:c,onMoveStart:d,onMoveEnd:h,noPanClassName:Yr,nodeOrigin:Pe,rfId:Ve,autoPanOnConnect:Vi,autoPanOnNodeDrag:mr,autoPanSpeed:ol,onError:Lo,connectionRadius:Xr,isValidConnection:ra,selectNodesOnDrag:We,nodeDragThreshold:mu,onBeforeDelete:P,paneClickDistance:ps,debug:ne}),f.jsx(jz,{onSelectionChange:H}),ta,f.jsx(_z,{proOptions:Cr,position:qn}),f.jsx(wz,{rfId:Ve,disableKeyboardA11y:hn})]})})}var eU=XP(ZH);function qr(){const e=Sn();return k.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),i=Array.isArray(t)?t:[t],o=new Map;i.forEach(s=>{const a=n==null?void 0:n.querySelector('.react-flow__node[data-id="'.concat(s,'"]'));a&&o.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(o,{triggerFitView:!1}))},[])}const tU=Ro.error014();function Po({id:e,handleType:t,handleId:n,onConnect:r,onDisconnect:i}={}){const o=iE(),s=e!=null?e:o;if(!s)throw new Error(tU);const a=k.useRef(null),l=en(u=>u.connectionLookup.get("".concat(s).concat(t?n?"-".concat(t,"-").concat(n):"-".concat(t):"")),q7);return k.useEffect(()=>{if(a.current&&a.current!==l){const u=l!=null?l:new Map;aC(a.current,u,i),aC(u,a.current,r)}a.current=l!=null?l:new Map},[l,r,i]),k.useMemo(()=>{var u;return Array.from((u=l==null?void 0:l.values())!=null?u:[])},[l])}function Wy(e){return en(k.useCallback(n=>{var s;const r=[],i=Array.isArray(e),o=i?e:[e];for(const a of o){const l=n.nodeLookup.get(a);l&&r.push({id:l.id,type:l.type,data:l.data})}return i?r:(s=r[0])!=null?s:null},[e]),b9)}function nU({dimensions:e,lineWidth:t,variant:n,className:r}){return f.jsx("path",{strokeWidth:t,d:"M".concat(e[0]/2," 0 V").concat(e[1]," M0 ").concat(e[1]/2," H").concat(e[0]),className:Zn(["react-flow__background-pattern",n,r])})}function rU({radius:e,className:t}){return f.jsx("circle",{cx:e,cy:e,r:e,className:Zn(["react-flow__background-pattern","dots",t])})}var Na;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Na||(Na={}));const iU={[Na.Dots]:1,[Na.Lines]:1,[Na.Cross]:6},oU=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function bO({id:e,variant:t=Na.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=0,color:s,bgColor:a,style:l,className:u,patternClassName:c}){const d=k.useRef(null),{transform:h,patternId:p}=en(oU,Fn),b=r||iU[t],g=t===Na.Dots,x=t===Na.Cross,y=Array.isArray(n)?n:[n,n],v=[y[0]*h[2]||1,y[1]*h[2]||1],w=b*h[2],E=Array.isArray(o)?o:[o,o],S=x?[w,w]:v,A=[E[0]*h[2]||1+S[0]/2,E[1]*h[2]||1+S[1]/2],T="".concat(p).concat(e||"");return f.jsxs("svg",{className:Zn(["react-flow__background",u]),style:{...l,...Hy,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:d,"data-testid":"rf__background",children:[f.jsx("pattern",{id:T,x:h[0]%v[0],y:h[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(A[0],",-").concat(A[1],")"),children:g?f.jsx(rU,{radius:w/2,className:c}):f.jsx(nU,{dimensions:S,lineWidth:i,variant:t,className:c})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(T,")")})]})}bO.displayName="Background";const sU=k.memo(bO);function aU(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function lU(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function uU(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function cU(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function dU(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Np({children:e,className:t,...n}){return f.jsx("button",{type:"button",className:Zn(["react-flow__controls-button",t]),...n,children:e})}const fU=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function wO({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:u,children:c,position:d="bottom-left",orientation:h="vertical","aria-label":p="React Flow controls"}){const b=Sn(),{isInteractive:g,minZoomReached:x,maxZoomReached:y}=en(fU,Fn),{zoomIn:v,zoomOut:w,fitView:E}=cn(),S=()=>{v(),o==null||o()},A=()=>{w(),s==null||s()},T=()=>{E(i),a==null||a()},$=()=>{b.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)},q=h==="horizontal"?"horizontal":"vertical";return f.jsxs(Nh,{className:Zn(["react-flow__controls",q,u]),position:d,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&f.jsxs(f.Fragment,{children:[f.jsx(Np,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y,children:f.jsx(aU,{})}),f.jsx(Np,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x,children:f.jsx(lU,{})})]}),n&&f.jsx(Np,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view",children:f.jsx(uU,{})}),r&&f.jsx(Np,{className:"react-flow__controls-interactive",onClick:$,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?f.jsx(dU,{}):f.jsx(cU,{})}),c]})}wO.displayName="Controls";const hU=k.memo(wO);function pU({id:e,x:t,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,selected:h,onClick:p}){const{background:b,backgroundColor:g}=o||{},x=s||b||g;return f.jsx("rect",{className:Zn(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:x,stroke:a,strokeWidth:l},shapeRendering:d,onClick:p?y=>p(y,e):void 0})}const gU=k.memo(pU),mU=e=>e.nodes.map(t=>t.id),q0=e=>e instanceof Function?e:()=>e;function yU({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:o=gU,onClick:s}){const a=en(mU,Fn),l=q0(t),u=q0(e),c=q0(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:a.map(h=>f.jsx(bU,{id:h,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:o,onClick:s,shapeRendering:d},h))})}function vU({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:s,NodeComponent:a,onClick:l}){const{node:u,x:c,y:d,width:h,height:p}=en(b=>{const{internals:g}=b.nodeLookup.get(e),x=g.userNode,{x:y,y:v}=g.positionAbsolute,{width:w,height:E}=Qs(x);return{node:x,x:y,y:v,width:w,height:E}},Fn);return!u||u.hidden||!vP(u)?null:f.jsx(a,{x:c,y:d,width:h,height:p,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:o,shapeRendering:s,onClick:l,id:u.id})}const bU=k.memo(vU);var wU=k.memo(yU);const xU=200,_U=150,EU=e=>!e.hidden,SU=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?yP(Ah(e.nodeLookup,{filter:EU}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},kU="react-flow__minimap-desc";function xO({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:d,position:h="bottom-right",onClick:p,onNodeClick:b,pannable:g=!1,zoomable:x=!1,ariaLabel:y="React Flow mini map",inversePan:v,zoomStep:w=10,offsetScale:E=5}){var Me,Re;const S=Sn(),A=k.useRef(null),{boundingRect:T,viewBB:$,rfId:q,panZoom:D,translateExtent:U,flowWidth:J,flowHeight:H}=en(SU,Fn),I=(Me=e==null?void 0:e.width)!=null?Me:xU,F=(Re=e==null?void 0:e.height)!=null?Re:_U,K=T.width/I,X=T.height/F,O=Math.max(K,X),B=O*I,P=O*F,G=E*O,Q=T.x-(B-T.width)/2-G,se=T.y-(P-T.height)/2-G,_e=B+G*2,Ne=P+G*2,Te="".concat(kU,"-").concat(q),W=k.useRef(0),Y=k.useRef();W.current=O,k.useEffect(()=>{if(A.current&&D)return Y.current=j9({domNode:A.current,panZoom:D,getTransform:()=>S.getState().transform,getViewScale:()=>W.current}),()=>{var te;(te=Y.current)==null||te.destroy()}},[D]),k.useEffect(()=>{var te;(te=Y.current)==null||te.update({translateExtent:U,width:J,height:H,inversePan:v,pannable:g,zoomStep:w,zoomable:x})},[g,x,v,w,U,J,H]);const ie=p?te=>{var We;const[ae,pe]=((We=Y.current)==null?void 0:We.pointer(te))||[0,0];p(te,{x:ae,y:pe})}:void 0,Oe=b?k.useCallback((te,ae)=>{const pe=S.getState().nodeLookup.get(ae).internals.userNode;b(te,pe)},[]):void 0;return f.jsx(Nh,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*O:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:Zn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:I,height:F,viewBox:"".concat(Q," ").concat(se," ").concat(_e," ").concat(Ne),className:"react-flow__minimap-svg",role:"img","aria-labelledby":Te,ref:A,onClick:ie,children:[y&&f.jsx("title",{id:Te,children:y}),f.jsx(wU,{onClick:Oe,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),f.jsx("path",{className:"react-flow__minimap-mask",d:"M".concat(Q-G,",").concat(se-G,"h").concat(_e+G*2,"v").concat(Ne+G*2,"h").concat(-_e-G*2,"z\n        M").concat($.x,",").concat($.y,"h").concat($.width,"v").concat($.height,"h").concat(-$.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}xO.displayName="MiniMap";const CU=k.memo(xO);function jU({nodeId:e,position:t,variant:n=tf.Handle,className:r,style:i={},children:o,color:s,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:h,shouldResize:p,onResizeStart:b,onResize:g,onResizeEnd:x}){const y=iE(),v=typeof e=="string"?e:y,w=Sn(),E=k.useRef(null),S=n===tf.Line?"right":"bottom-right",A=t!=null?t:S,T=k.useRef(null);k.useEffect(()=>{if(!(!E.current||!v))return T.current||(T.current=H9({domNode:E.current,nodeId:v,getStoreItems:()=>{const{nodeLookup:U,transform:J,snapGrid:H,snapToGrid:I,nodeOrigin:F,domNode:K}=w.getState();return{nodeLookup:U,transform:J,snapGrid:H,snapToGrid:I,nodeOrigin:F,paneDomNode:K}},onChange:(U,J)=>{var P,G,Q,se,_e,Ne,Te;const{triggerNodeChanges:H,nodeLookup:I,parentLookup:F,nodeOrigin:K}=w.getState(),X=[],O={x:U.x,y:U.y},B=I.get(v);if(B&&B.expandParent&&B.parentId){const W=(P=B.origin)!=null?P:K,Y=(Q=(G=U.width)!=null?G:B.measured.width)!=null?Q:0,ie=(_e=(se=U.height)!=null?se:B.measured.height)!=null?_e:0,Oe={id:B.id,parentId:B.parentId,rect:{width:Y,height:ie,...bP({x:(Ne=U.x)!=null?Ne:B.position.x,y:(Te=U.y)!=null?Te:B.position.y},{width:Y,height:ie},B.parentId,I,W)}},Me=nE([Oe],I,F,K);X.push(...Me),O.x=U.x?Math.max(W[0]*Y,U.x):void 0,O.y=U.y?Math.max(W[1]*ie,U.y):void 0}if(O.x!==void 0&&O.y!==void 0){const W={id:v,type:"position",position:{...O}};X.push(W)}if(U.width!==void 0&&U.height!==void 0){const Y={id:v,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:U.width,height:U.height}};X.push(Y)}for(const W of J){const Y={...W,type:"position"};X.push(Y)}H(X)},onEnd:({width:U,height:J})=>{const H={id:v,type:"dimensions",resizing:!1,dimensions:{width:U,height:J}};w.getState().triggerNodeChanges([H])}})),T.current.update({controlPosition:A,boundaries:{minWidth:a,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:d,resizeDirection:h,onResizeStart:b,onResize:g,onResizeEnd:x,shouldResize:p}),()=>{var U;(U=T.current)==null||U.destroy()}},[A,a,l,u,c,d,b,g,x,p]);const $=A.split("-"),q=n===tf.Line?"borderColor":"backgroundColor",D=s?{...i,[q]:s}:i;return f.jsx("div",{className:Zn(["react-flow__resize-control","nodrag",...$,n,r]),ref:E,style:D,children:o})}k.memo(jU);function AU({id:e,top:t,left:n,right:r,bottom:i,...o}){const{getNode:s,setNodes:a,addNodes:l,setEdges:u}=cn(),c=k.useCallback(()=>{const p=s(e);if(!p)return;const b={x:p.position.x+50,y:p.position.y+50};l({...p,selected:!1,dragging:!1,id:"".concat(p.id,"-copy"),position:b})},[e,s,l]),d=k.useMemo(()=>{var p;return((p=s(e))==null?void 0:p.type)||""},[e,s]),h=k.useCallback(()=>{a(p=>p.filter(b=>b.id!==e)),u(p=>p.filter(b=>b.source!==e))},[e,a,u]);return f.jsx("div",{style:{position:"absolute",top:t,left:n,right:r,bottom:i,zIndex:9999},className:"context-menu",...o,children:f.jsxs("div",{children:[f.jsxs("p",{children:["node: ",e]}),["entry","output"].includes(d)?f.jsx(f.Fragment,{}):f.jsxs(f.Fragment,{children:[f.jsx("p",{color:"medium",onClick:c,children:"duplicate"}),f.jsx("p",{color:"danger",onClick:h,children:"delete"})]})]})})}function Hr(e=[],t){const n=[];return n.push({id:"1",type:"entry",data:{params:e},position:{x:100,y:100}}),t&&n.push({id:"2",type:"output",data:{param:t},position:{x:250,y:100}}),n}function Eo(e=[],t=[],n){const r=e.findIndex(o=>o.type==="entry");if(r===-1||(e[r].data.params=t,!n))return e;const i=e.findIndex(o=>o.type==="output");return i===-1||(e[i].data.param=n),e}function RU(e){switch(e){case"get_system_data":return{path:"",type:"unknown"};case"get_page_data":return{path:"",type:"unknown"};case"get_character_data":return{path:"",type:"unknown"};case"set_system_data":return{path:"",type:"unknown"};case"set_page_data":return{path:"",type:"unknown"};case"set_character_data":return{path:"",type:"unknown"};case"open_modal":return{type:"edit_object",title:"edit object",inputType:""};case"create_data_from_type":return{spreadType:{name:"",properties:[]}};case"spread_object":return{inputType:"unknown"};case"add_to_array":return{inputType:"unknown"};case"array_remove":return{inputType:"unknown"};case"array_update":return{inputType:"unknown"};case"array_get":return{inputType:"unknown"};case"filter":return{inputType:"unknown"};case"map":return{inputType:"unknown"};case"string_new":return{value:""};case"string_includes":return{string1:"",string2:""};case"string_compare":return{string1:"",string2:""};case"string_concat":return{string1:"",string2:""};case"number_to_string":return{number:0};case"new_number":return{value:0};case"add":return{number1:0,number2:0};case"subtract":return{number1:0,number2:0};case"divide":return{number1:0,number2:0};case"multiply":return{number1:0,number2:0};case"floor":return{number:0};case"new_enum":return{value:""};case"enum_compare":return{input:""};case"boolean_new":return{value:!1};case"boolean_branch":return{boolean:!1};case"boolean_inverse":return{};case"blueprint_run":return{params:[],returnType:"none",inputs:{},outputs:{}};default:return null}}function VC(e,t){return Math.floor(Math.random()*(t-e+1))+e}function NU({top:e,left:t,right:n,bottom:r,rawX:i,rawY:o,...s}){const{addNodes:a,getNodes:l,screenToFlowPosition:u}=cn(),c=k.useCallback(p=>{const b=l(),{x:g,y:x}=u({x:i,y:o});let y=""+VC(1,2e3);for(;b.find(w=>w.id===y);)y=""+VC(1,2e3);const v=RU(p);v&&a({id:y,type:p,data:v,position:{x:g,y:x},selected:!1,dragging:!1})},[a,l,u]),[d,h]=k.useState(-1);return f.jsx("div",{className:"absolute bg-black shadow-lg rounded-md p-2 text-sm context-menu",style:{top:e-50,left:t,right:n,bottom:r,zIndex:9999},...s,children:f.jsxs("ul",{children:[f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(1),onMouseLeave:()=>h(-1),children:["Character",d===1&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_character_data"),children:"Get Character Data"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_character_data"),children:"Set Character Data"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(2),onMouseLeave:()=>h(-1),children:["Page",d===2&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_page_data"),children:"Get Page Data"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_page_data"),children:"Set Page Data"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(3),onMouseLeave:()=>h(-1),children:["System",d===3&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_system_data"),children:"Get System Data"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_system_data"),children:"Set System Data"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(4),onMouseLeave:()=>h(-1),children:["Array",d===4&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_get"),children:"Get Item"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("add_to_array"),children:"Add Item"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_remove"),children:"Remove Item"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_update"),children:"Update Item"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("filter"),children:"Filter"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("map"),children:"Map"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(5),onMouseLeave:()=>h(-1),children:["Object",d===5&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("spread_object"),children:"Spread Object"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("create_data_from_type"),children:"Create Object From Type"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(6),onMouseLeave:()=>h(-1),children:["String",d===6&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_new"),children:"New String"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_includes"),children:"Includes"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_compare"),children:"Compare"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_concat"),children:"Concat"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(7),onMouseLeave:()=>h(-1),children:["Numbers",d===7&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("new_number"),children:"New Number"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("divide"),children:"Divide"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("add"),children:"Add"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("subtract"),children:"Subtract"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("multiply"),children:"Multiply"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("floor"),children:"Floor"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("number_to_string"),children:"Number To String"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(8),onMouseLeave:()=>h(-1),children:["Enums",d===8&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("new_enum"),children:"New Enum"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("enum_compare"),children:"Compare Enum"})]})]}),f.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(9),onMouseLeave:()=>h(-1),children:["Booleans",d===9&&f.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_new"),children:"New Boolean"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_branch"),children:"Branch"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_inverse"),children:"Inverse"})]})]}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>c("open_modal"),children:"Open Modal"}),f.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>c("blueprint_run"),children:"Run Blueprint"})]})})}const TU={characterPage:"Info",modalsPage:"Start",creatorPage:"Start",tab:"character",versionId:""},un=Ya(TU);function qC(e){un.set(t=>({...t,creatorPage:e}))}function KC(e){un.set(t=>({...t,characterPage:e}))}function IU(e){un.set(t=>({...t,tab:e}))}const nn=({children:e,title:t})=>f.jsxs("a",{className:"block max-w-sm p-6 bg-white border border-neutral-200 rounded-lg shadow hover:bg-neutral-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700",children:[f.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-neutral-900 dark:text-white",children:t}),f.jsx("div",{className:"font-normal text-neutral-700 dark:text-neutral-400",children:e})]}),ht=k.forwardRef(({id:e,label:t,value:n,onChange:r,children:i,style:o,containerClassName:s,labelClassName:a,className:l},u)=>f.jsxs("div",{className:s||"mb-6",style:o,ref:u,children:[f.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white ".concat(a),children:t}),f.jsx("select",{id:e,className:"".concat(l," bg-neutral-50 border border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-brand-500 dark:focus:border-brand-500"),value:n,onChange:c=>r(c.target.value),children:i})]}));var _O={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Qi,function(){var n=function(m,_){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,N){C.__proto__=N}||function(C,N){for(var M in N)Object.prototype.hasOwnProperty.call(N,M)&&(C[M]=N[M])})(m,_)},r=function(){return(r=Object.assign||function(m){for(var _,C=1,N=arguments.length;C<N;C++)for(var M in _=arguments[C])Object.prototype.hasOwnProperty.call(_,M)&&(m[M]=_[M]);return m}).apply(this,arguments)};function i(m,_,C){for(var N,M=0,z=_.length;M<z;M++)!N&&M in _||((N=N||Array.prototype.slice.call(_,0,M))[M]=_[M]);return m.concat(N||Array.prototype.slice.call(_))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Qi,s=Object.keys,a=Array.isArray;function l(m,_){return typeof _!="object"||s(_).forEach(function(C){m[C]=_[C]}),m}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function d(m,_){return c.call(m,_)}function h(m,_){typeof _=="function"&&(_=_(u(m))),(typeof Reflect>"u"?s:Reflect.ownKeys)(_).forEach(function(C){b(m,C,_[C])})}var p=Object.defineProperty;function b(m,_,C,N){p(m,_,l(C&&d(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},N))}function g(m){return{from:function(_){return m.prototype=Object.create(_.prototype),b(m.prototype,"constructor",m),{extend:h.bind(null,m.prototype)}}}}var x=Object.getOwnPropertyDescriptor,y=[].slice;function v(m,_,C){return y.call(m,_,C)}function w(m,_){return _(m)}function E(m){if(!m)throw new Error("Assertion Failed")}function S(m){o.setImmediate?setImmediate(m):setTimeout(m,0)}function A(m,_){if(typeof _=="string"&&d(m,_))return m[_];if(!_)return m;if(typeof _!="string"){for(var C=[],N=0,M=_.length;N<M;++N){var z=A(m,_[N]);C.push(z)}return C}var re=_.indexOf(".");if(re!==-1){var le=m[_.substr(0,re)];return le==null?void 0:A(le,_.substr(re+1))}}function T(m,_,C){if(m&&_!==void 0&&!("isFrozen"in Object&&Object.isFrozen(m)))if(typeof _!="string"&&"length"in _){E(typeof C!="string"&&"length"in C);for(var N=0,M=_.length;N<M;++N)T(m,_[N],C[N])}else{var z,re,le=_.indexOf(".");le!==-1?(z=_.substr(0,le),(re=_.substr(le+1))===""?C===void 0?a(m)&&!isNaN(parseInt(z))?m.splice(z,1):delete m[z]:m[z]=C:T(le=!(le=m[z])||!d(m,z)?m[z]={}:le,re,C)):C===void 0?a(m)&&!isNaN(parseInt(_))?m.splice(_,1):delete m[_]:m[_]=C}}function $(m){var _,C={};for(_ in m)d(m,_)&&(C[_]=m[_]);return C}var q=[].concat;function D(m){return q.apply([],m)}var At="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(m){return["Int","Uint","Float"].map(function(_){return _+m+"Array"})}))).filter(function(m){return o[m]}),U=new Set(At.map(function(m){return o[m]})),J=null;function H(m){return J=new WeakMap,m=function _(C){if(!C||typeof C!="object")return C;var N=J.get(C);if(N)return N;if(a(C)){N=[],J.set(C,N);for(var M=0,z=C.length;M<z;++M)N.push(_(C[M]))}else if(U.has(C.constructor))N=C;else{var re,le=u(C);for(re in N=le===Object.prototype?{}:Object.create(le),J.set(C,N),C)d(C,re)&&(N[re]=_(C[re]))}return N}(m),J=null,m}var I={}.toString;function F(m){return I.call(m).slice(8,-1)}var K=typeof Symbol<"u"?Symbol.iterator:"@@iterator",X=typeof K=="symbol"?function(m){var _;return m!=null&&(_=m[K])&&_.apply(m)}:function(){return null};function O(m,_){return _=m.indexOf(_),0<=_&&m.splice(_,1),0<=_}var B={};function P(m){var _,C,N,M;if(arguments.length===1){if(a(m))return m.slice();if(this===B&&typeof m=="string")return[m];if(M=X(m)){for(C=[];!(N=M.next()).done;)C.push(N.value);return C}if(m==null)return[m];if(typeof(_=m.length)!="number")return[m];for(C=new Array(_);_--;)C[_]=m[_];return C}for(_=arguments.length,C=new Array(_);_--;)C[_]=arguments[_];return C}var G=typeof Symbol<"u"?function(m){return m[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ft=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ki=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ft),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function se(m,_){this.name=m,this.message=_}function _e(m,_){return m+". Errors: "+Object.keys(_).map(function(C){return _[C].toString()}).filter(function(C,N,M){return M.indexOf(C)===N}).join("\n")}function Ne(m,_,C,N){this.failures=_,this.failedKeys=N,this.successCount=C,this.message=_e(m,_)}function Te(m,_){this.name="BulkError",this.failures=Object.keys(_).map(function(C){return _[C]}),this.failuresByPos=_,this.message=_e(m,this.failures)}g(se).from(Error).extend({toString:function(){return this.name+": "+this.message}}),g(Ne).from(se),g(Te).from(se);var W=Ki.reduce(function(m,_){return m[_]=_+"Error",m},{}),Y=se,ie=Ki.reduce(function(m,_){var C=_+"Error";function N(M,z){this.name=C,M?typeof M=="string"?(this.message="".concat(M).concat(z?"\n "+z:""),this.inner=z||null):typeof M=="object"&&(this.message="".concat(M.name," ").concat(M.message),this.inner=M):(this.message=Q[_]||C,this.inner=null)}return g(N).from(Y),m[_]=N,m},{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var Oe=ft.reduce(function(m,_){return m[_+"Error"]=ie[_],m},{}),Me=Ki.reduce(function(m,_){return["Syntax","Type","Range"].indexOf(_)===-1&&(m[_+"Error"]=ie[_]),m},{});function Re(){}function te(m){return m}function ae(m,_){return m==null||m===te?_:function(C){return _(m(C))}}function pe(m,_){return function(){m.apply(this,arguments),_.apply(this,arguments)}}function We(m,_){return m===Re?_:function(){var C=m.apply(this,arguments);C!==void 0&&(arguments[0]=C);var N=this.onsuccess,M=this.onerror;this.onsuccess=null,this.onerror=null;var z=_.apply(this,arguments);return N&&(this.onsuccess=this.onsuccess?pe(N,this.onsuccess):N),M&&(this.onerror=this.onerror?pe(M,this.onerror):M),z!==void 0?z:C}}function Fe(m,_){return m===Re?_:function(){m.apply(this,arguments);var C=this.onsuccess,N=this.onerror;this.onsuccess=this.onerror=null,_.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?pe(C,this.onsuccess):C),N&&(this.onerror=this.onerror?pe(N,this.onerror):N)}}function Ue(m,_){return m===Re?_:function(C){var N=m.apply(this,arguments);l(C,N);var M=this.onsuccess,z=this.onerror;return this.onsuccess=null,this.onerror=null,C=_.apply(this,arguments),M&&(this.onsuccess=this.onsuccess?pe(M,this.onsuccess):M),z&&(this.onerror=this.onerror?pe(z,this.onerror):z),N===void 0?C===void 0?void 0:C:l(N,C)}}function ue(m,_){return m===Re?_:function(){return _.apply(this,arguments)!==!1&&m.apply(this,arguments)}}function Pe(m,_){return m===Re?_:function(){var C=m.apply(this,arguments);if(C&&typeof C.then=="function"){for(var N=this,M=arguments.length,z=new Array(M);M--;)z[M]=arguments[M];return C.then(function(){return _.apply(N,z)})}return _.apply(this,arguments)}}Me.ModifyError=Ne,Me.DexieError=se,Me.BulkError=Te;var qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xe(m){qe=m}var dt={},gt=100,At=typeof Promise>"u"?[]:function(){var m=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[m,u(m),m];var _=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[_,u(_),m]}(),ft=At[0],Ki=At[1],At=At[2],Ki=Ki&&Ki.then,L=ft&&ft.constructor,j=!!At,R=function(m,_){Mt.push([m,_]),de&&(queueMicrotask(ee),de=!1)},Z=!0,de=!0,Ae=[],He=[],Tt=te,Wt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Re,pgp:!1,env:{},finalize:Re},Ze=Wt,Mt=[],Pt=0,Si=[];function ot(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var _=this._PSD=Ze;if(typeof m!="function"){if(m!==dt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Mo(this,this._value))}this._state=null,this._value=null,++_.ref,function C(N,M){try{M(function(z){if(N._state===null){if(z===N)throw new TypeError("A promise cannot be resolved with itself.");var re=N._lib&&oe();z&&typeof z.then=="function"?C(N,function(le,me){z instanceof ot?z._then(le,me):z.then(le,me)}):(N._state=!0,N._value=z,ps(N)),re&&et()}},Mo.bind(null,N))}catch(z){Mo(N,z)}}(this,m)}var ki={get:function(){var m=Ze,_=Do;function C(N,M){var z=this,re=!m.global&&(m!==Ze||_!==Do),le=re&&!gr(),me=new ot(function(be,ke){lo(z,new $o(gu(N,m,re,le),gu(M,m,re,le),be,ke,m))});return this._consoleTask&&(me._consoleTask=this._consoleTask),me}return C.prototype=dt,C},set:function(m){b(this,"then",m&&m.prototype===dt?ki:{get:function(){return m},set:ki.set})}};function $o(m,_,C,N,M){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof _=="function"?_:null,this.resolve=C,this.reject=N,this.psd=M}function Mo(m,_){var C,N;He.push(_),m._state===null&&(C=m._lib&&oe(),_=Tt(_),m._state=!1,m._value=_,N=m,Ae.some(function(M){return M._value===N._value})||Ae.push(N),ps(m),C&&et())}function ps(m){var _=m._listeners;m._listeners=[];for(var C=0,N=_.length;C<N;++C)lo(m,_[C]);var M=m._PSD;--M.ref||M.finalize(),Pt===0&&(++Pt,R(function(){--Pt==0&&it()},[]))}function lo(m,_){if(m._state!==null){var C=m._state?_.onFulfilled:_.onRejected;if(C===null)return(m._state?_.resolve:_.reject)(m._value);++_.psd.ref,++Pt,R(ta,[C,m,_])}else m._listeners.push(_)}function ta(m,_,C){try{var N,M=_._value;!_._state&&He.length&&(He=[]),N=qe&&_._consoleTask?_._consoleTask.run(function(){return m(M)}):m(M),_._state||He.indexOf(M)!==-1||function(z){for(var re=Ae.length;re;)if(Ae[--re]._value===z._value)return Ae.splice(re,1)}(_),C.resolve(N)}catch(z){C.reject(z)}finally{--Pt==0&&it(),--C.psd.ref||C.psd.finalize()}}function ee(){fo(Wt,function(){oe()&&et()})}function oe(){var m=Z;return de=Z=!1,m}function et(){var m,_,C;do for(;0<Mt.length;)for(m=Mt,Mt=[],C=m.length,_=0;_<C;++_){var N=m[_];N[0].apply(null,N[1])}while(0<Mt.length);de=Z=!0}function it(){var m=Ae;Ae=[],m.forEach(function(N){N._PSD.onunhandled.call(null,N._value,N)});for(var _=Si.slice(0),C=_.length;C;)_[--C]()}function vt(m){return new ot(dt,!1,m)}function Dt(m,_){var C=Ze;return function(){var N=oe(),M=Ze;try{return qn(C,!0),m.apply(this,arguments)}catch(z){_&&_(z)}finally{qn(M,!1),N&&et()}}}h(ot.prototype,{then:ki,_then:function(m,_){lo(this,new $o(null,null,m,_,Ze))},catch:function(m){if(arguments.length===1)return this.then(null,m);var _=m,C=arguments[1];return typeof _=="function"?this.then(null,function(N){return(N instanceof _?C:vt)(N)}):this.then(null,function(N){return(N&&N.name===_?C:vt)(N)})},finally:function(m){return this.then(function(_){return ot.resolve(m()).then(function(){return _})},function(_){return ot.resolve(m()).then(function(){return vt(_)})})},timeout:function(m,_){var C=this;return m<1/0?new ot(function(N,M){var z=setTimeout(function(){return M(new ie.Timeout(_))},m);C.then(N,M).finally(clearTimeout.bind(null,z))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(ot.prototype,Symbol.toStringTag,"Dexie.Promise"),Wt.env=Cr(),h(ot,{all:function(){var m=P.apply(null,arguments).map(Ci);return new ot(function(_,C){m.length===0&&_([]);var N=m.length;m.forEach(function(M,z){return ot.resolve(M).then(function(re){m[z]=re,--N||_(m)},C)})})},resolve:function(m){return m instanceof ot?m:m&&typeof m.then=="function"?new ot(function(_,C){m.then(_,C)}):new ot(dt,!0,m)},reject:vt,race:function(){var m=P.apply(null,arguments).map(Ci);return new ot(function(_,C){m.map(function(N){return ot.resolve(N).then(_,C)})})},PSD:{get:function(){return Ze},set:function(m){return Ze=m}},totalEchoes:{get:function(){return Do}},newPSD:Gr,usePSD:fo,scheduler:{get:function(){return R},set:function(m){R=m}},rejectionMapper:{get:function(){return Tt},set:function(m){Tt=m}},follow:function(m,_){return new ot(function(C,N){return Gr(function(M,z){var re=Ze;re.unhandleds=[],re.onunhandled=z,re.finalize=pe(function(){var le,me=this;le=function(){me.unhandleds.length===0?M():z(me.unhandleds[0])},Si.push(function be(){le(),Si.splice(Si.indexOf(be),1)}),++Pt,R(function(){--Pt==0&&it()},[])},re.finalize),m()},_,C,N)})}}),L&&(L.allSettled&&b(ot,"allSettled",function(){var m=P.apply(null,arguments).map(Ci);return new ot(function(_){m.length===0&&_([]);var C=m.length,N=new Array(C);m.forEach(function(M,z){return ot.resolve(M).then(function(re){return N[z]={status:"fulfilled",value:re}},function(re){return N[z]={status:"rejected",reason:re}}).then(function(){return--C||_(N)})})})}),L.any&&typeof AggregateError<"u"&&b(ot,"any",function(){var m=P.apply(null,arguments).map(Ci);return new ot(function(_,C){m.length===0&&C(new AggregateError([]));var N=m.length,M=new Array(N);m.forEach(function(z,re){return ot.resolve(z).then(function(le){return _(le)},function(le){M[re]=le,--N||C(new AggregateError(M))})})})}),L.withResolvers&&(ot.withResolvers=L.withResolvers));var Zt={awaits:0,echoes:0,id:0},gs=0,kr=[],uo=0,Do=0,na=0;function Gr(m,_,C,N){var M=Ze,z=Object.create(M);return z.parent=M,z.ref=0,z.global=!1,z.id=++na,Wt.env,z.env=j?{Promise:ot,PromiseProp:{value:ot,configurable:!0,writable:!0},all:ot.all,race:ot.race,allSettled:ot.allSettled,any:ot.any,resolve:ot.resolve,reject:ot.reject}:{},_&&l(z,_),++M.ref,z.finalize=function(){--this.parent.ref||this.parent.finalize()},N=fo(z,m,C,N),z.ref===0&&z.finalize(),N}function Yr(){return Zt.id||(Zt.id=++gs),++Zt.awaits,Zt.echoes+=gt,Zt.id}function gr(){return!!Zt.awaits&&(--Zt.awaits==0&&(Zt.id=0),Zt.echoes=Zt.awaits*gt,!0)}function Ci(m){return Zt.echoes&&m&&m.constructor===L?(Yr(),m.then(function(_){return gr(),_},function(_){return gr(),hn(_)})):m}function co(){var m=kr[kr.length-1];kr.pop(),qn(m,!1)}function qn(m,_){var C,N=Ze;(_?!Zt.echoes||uo++&&m===Ze:!uo||--uo&&m===Ze)||queueMicrotask(_?(function(M){++Do,Zt.echoes&&--Zt.echoes!=0||(Zt.echoes=Zt.awaits=Zt.id=0),kr.push(Ze),qn(M,!0)}).bind(null,m):co),m!==Ze&&(Ze=m,N===Wt&&(Wt.env=Cr()),j&&(C=Wt.env.Promise,_=m.env,(N.global||m.global)&&(Object.defineProperty(o,"Promise",_.PromiseProp),C.all=_.all,C.race=_.race,C.resolve=_.resolve,C.reject=_.reject,_.allSettled&&(C.allSettled=_.allSettled),_.any&&(C.any=_.any))))}function Cr(){var m=o.Promise;return j?{Promise:m,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:m.all,race:m.race,allSettled:m.allSettled,any:m.any,resolve:m.resolve,reject:m.reject}:{}}function fo(m,_,C,N,M){var z=Ze;try{return qn(m,!0),_(C,N,M)}finally{qn(z,!1)}}function gu(m,_,C,N){return typeof m!="function"?m:function(){var M=Ze;C&&Yr(),qn(_,!0);try{return m.apply(this,arguments)}finally{qn(M,!1),N&&queueMicrotask(gr)}}}function il(m){Promise===L&&Zt.echoes===0?uo===0?m():enqueueNativeMicroTask(m):setTimeout(m,0)}(""+Ki).indexOf("[native code]")===-1&&(Yr=gr=Re);var hn=ot.reject,Vi="",mr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ol="String expected.",Xr=[],ra="__dbnames",Lo="readonly",ms="readwrite";function qi(m,_){return m?_?function(){return m.apply(this,arguments)&&_.apply(this,arguments)}:m:_}var mu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bo(m){return typeof m!="string"||/\./.test(m)?function(_){return _}:function(_){return _[m]===void 0&&m in _&&delete(_=H(_))[m],_}}function yu(){throw ie.Type()}function qt(m,_){try{var C=V(m),N=V(_);if(C!==N)return C==="Array"?1:N==="Array"?-1:C==="binary"?1:N==="binary"?-1:C==="string"?1:N==="string"?-1:C==="Date"?1:N!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return _<m?1:m<_?-1:0;case"binary":return function(M,z){for(var re=M.length,le=z.length,me=re<le?re:le,be=0;be<me;++be)if(M[be]!==z[be])return M[be]<z[be]?-1:1;return re===le?0:re<le?-1:1}(fe(m),fe(_));case"Array":return function(M,z){for(var re=M.length,le=z.length,me=re<le?re:le,be=0;be<me;++be){var ke=qt(M[be],z[be]);if(ke!==0)return ke}return re===le?0:re<le?-1:1}(m,_)}}catch(M){}return NaN}function V(m){var _=typeof m;return _!="object"?_:ArrayBuffer.isView(m)?"binary":(m=F(m),m==="ArrayBuffer"?"binary":m)}function fe(m){return m instanceof Uint8Array?m:ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m)}var ne=(he.prototype._trans=function(m,_,C){var N=this._tx||Ze.trans,M=this.name,z=qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(m==="readonly"?"read":"write"," ").concat(this.name));function re(be,ke,ce){if(!ce.schema[M])throw new ie.NotFound("Table "+M+" not part of transaction");return _(ce.idbtrans,ce)}var le=oe();try{var me=N&&N.db._novip===this.db._novip?N===Ze.trans?N._promise(m,re,C):Gr(function(){return N._promise(m,re,C)},{trans:N,transless:Ze.transless||Ze}):function be(ke,ce,je,ye){if(ke.idbdb&&(ke._state.openComplete||Ze.letThrough||ke._vip)){var Ee=ke._createTransaction(ce,je,ke._dbSchema);try{Ee.create(),ke._state.PR1398_maxLoop=3}catch(Ce){return Ce.name===W.InvalidState&&ke.isOpen()&&0<--ke._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ke.close({disableAutoOpen:!1}),ke.open().then(function(){return be(ke,ce,je,ye)})):hn(Ce)}return Ee._promise(ce,function(Ce,we){return Gr(function(){return Ze.trans=Ee,ye(Ce,we,Ee)})}).then(function(Ce){if(ce==="readwrite")try{Ee.idbtrans.commit()}catch(we){}return ce==="readonly"?Ce:Ee._completion.then(function(){return Ce})})}if(ke._state.openComplete)return hn(new ie.DatabaseClosed(ke._state.dbOpenError));if(!ke._state.isBeingOpened){if(!ke._state.autoOpen)return hn(new ie.DatabaseClosed);ke.open().catch(Re)}return ke._state.dbReadyPromise.then(function(){return be(ke,ce,je,ye)})}(this.db,m,[this.name],re);return z&&(me._consoleTask=z,me=me.catch(function(be){return console.trace(be),hn(be)})),me}finally{le&&et()}},he.prototype.get=function(m,_){var C=this;return m&&m.constructor===Object?this.where(m).first(_):m==null?hn(new ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(N){return C.core.get({trans:N,key:m}).then(function(M){return C.hook.reading.fire(M)})}).then(_)},he.prototype.where=function(m){if(typeof m=="string")return new this.db.WhereClause(this,m);if(a(m))return new this.db.WhereClause(this,"[".concat(m.join("+"),"]"));var _=s(m);if(_.length===1)return this.where(_[0]).equals(m[_[0]]);var C=this.schema.indexes.concat(this.schema.primKey).filter(function(le){if(le.compound&&_.every(function(be){return 0<=le.keyPath.indexOf(be)})){for(var me=0;me<_.length;++me)if(_.indexOf(le.keyPath[me])===-1)return!1;return!0}return!1}).sort(function(le,me){return le.keyPath.length-me.keyPath.length})[0];if(C&&this.db._maxKey!==Vi){var z=C.keyPath.slice(0,_.length);return this.where(z).equals(z.map(function(me){return m[me]}))}!C&&qe&&console.warn("The query ".concat(JSON.stringify(m)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(_.join("+"),"]"));var N=this.schema.idxByName;function M(le,me){return qt(le,me)===0}var re=_.reduce(function(ce,me){var be=ce[0],ke=ce[1],ce=N[me],je=m[me];return[be||ce,be||!ce?qi(ke,ce&&ce.multi?function(ye){return ye=A(ye,me),a(ye)&&ye.some(function(Ee){return M(je,Ee)})}:function(ye){return M(je,A(ye,me))}):ke]},[null,null]),z=re[0],re=re[1];return z?this.where(z.name).equals(m[z.keyPath]).filter(re):C?this.filter(re):this.where(_).equals("")},he.prototype.filter=function(m){return this.toCollection().and(m)},he.prototype.count=function(m){return this.toCollection().count(m)},he.prototype.offset=function(m){return this.toCollection().offset(m)},he.prototype.limit=function(m){return this.toCollection().limit(m)},he.prototype.each=function(m){return this.toCollection().each(m)},he.prototype.toArray=function(m){return this.toCollection().toArray(m)},he.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},he.prototype.orderBy=function(m){return new this.db.Collection(new this.db.WhereClause(this,a(m)?"[".concat(m.join("+"),"]"):m))},he.prototype.reverse=function(){return this.toCollection().reverse()},he.prototype.mapToClass=function(m){var _,C=this.db,N=this.name;function M(){return _!==null&&_.apply(this,arguments)||this}(this.schema.mappedClass=m).prototype instanceof yu&&(function(me,be){if(typeof be!="function"&&be!==null)throw new TypeError("Class extends value "+String(be)+" is not a constructor or null");function ke(){this.constructor=me}n(me,be),me.prototype=be===null?Object.create(be):(ke.prototype=be.prototype,new ke)}(M,_=m),Object.defineProperty(M.prototype,"db",{get:function(){return C},enumerable:!1,configurable:!0}),M.prototype.table=function(){return N},m=M);for(var z=new Set,re=m.prototype;re;re=u(re))Object.getOwnPropertyNames(re).forEach(function(me){return z.add(me)});function le(me){if(!me)return me;var be,ke=Object.create(m.prototype);for(be in me)if(!z.has(be))try{ke[be]=me[be]}catch(ce){}return ke}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=le,this.hook("reading",le),m},he.prototype.defineClass=function(){return this.mapToClass(function(m){l(this,m)})},he.prototype.add=function(m,_){var C=this,N=this.schema.primKey,M=N.auto,z=N.keyPath,re=m;return z&&M&&(re=Bo(z)(m)),this._trans("readwrite",function(le){return C.core.mutate({trans:le,type:"add",keys:_!=null?[_]:null,values:[re]})}).then(function(le){return le.numFailures?ot.reject(le.failures[0]):le.lastResult}).then(function(le){if(z)try{T(m,z,le)}catch(me){}return le})},he.prototype.update=function(m,_){return typeof m!="object"||a(m)?this.where(":id").equals(m).modify(_):(m=A(m,this.schema.primKey.keyPath),m===void 0?hn(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(_))},he.prototype.put=function(m,_){var C=this,N=this.schema.primKey,M=N.auto,z=N.keyPath,re=m;return z&&M&&(re=Bo(z)(m)),this._trans("readwrite",function(le){return C.core.mutate({trans:le,type:"put",values:[re],keys:_!=null?[_]:null})}).then(function(le){return le.numFailures?ot.reject(le.failures[0]):le.lastResult}).then(function(le){if(z)try{T(m,z,le)}catch(me){}return le})},he.prototype.delete=function(m){var _=this;return this._trans("readwrite",function(C){return _.core.mutate({trans:C,type:"delete",keys:[m]})}).then(function(C){return C.numFailures?ot.reject(C.failures[0]):void 0})},he.prototype.clear=function(){var m=this;return this._trans("readwrite",function(_){return m.core.mutate({trans:_,type:"deleteRange",range:mu})}).then(function(_){return _.numFailures?ot.reject(_.failures[0]):void 0})},he.prototype.bulkGet=function(m){var _=this;return this._trans("readonly",function(C){return _.core.getMany({keys:m,trans:C}).then(function(N){return N.map(function(M){return _.hook.reading.fire(M)})})})},he.prototype.bulkAdd=function(m,_,C){var N=this,M=Array.isArray(_)?_:void 0,z=(C=C||(M?void 0:_))?C.allKeys:void 0;return this._trans("readwrite",function(re){var be=N.schema.primKey,le=be.auto,be=be.keyPath;if(be&&M)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(M&&M.length!==m.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var me=m.length,be=be&&le?m.map(Bo(be)):m;return N.core.mutate({trans:re,type:"add",keys:M,values:be,wantResults:z}).then(function(Ee){var ce=Ee.numFailures,je=Ee.results,ye=Ee.lastResult,Ee=Ee.failures;if(ce===0)return z?je:ye;throw new Te("".concat(N.name,".bulkAdd(): ").concat(ce," of ").concat(me," operations failed"),Ee)})})},he.prototype.bulkPut=function(m,_,C){var N=this,M=Array.isArray(_)?_:void 0,z=(C=C||(M?void 0:_))?C.allKeys:void 0;return this._trans("readwrite",function(re){var be=N.schema.primKey,le=be.auto,be=be.keyPath;if(be&&M)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(M&&M.length!==m.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var me=m.length,be=be&&le?m.map(Bo(be)):m;return N.core.mutate({trans:re,type:"put",keys:M,values:be,wantResults:z}).then(function(Ee){var ce=Ee.numFailures,je=Ee.results,ye=Ee.lastResult,Ee=Ee.failures;if(ce===0)return z?je:ye;throw new Te("".concat(N.name,".bulkPut(): ").concat(ce," of ").concat(me," operations failed"),Ee)})})},he.prototype.bulkUpdate=function(m){var _=this,C=this.core,N=m.map(function(re){return re.key}),M=m.map(function(re){return re.changes}),z=[];return this._trans("readwrite",function(re){return C.getMany({trans:re,keys:N,cache:"clone"}).then(function(le){var me=[],be=[];m.forEach(function(ce,je){var ye=ce.key,Ee=ce.changes,Ce=le[je];if(Ce){for(var we=0,Ie=Object.keys(Ee);we<Ie.length;we++){var Le=Ie[we],Be=Ee[Le];if(Le===_.schema.primKey.keyPath){if(qt(Be,ye)!==0)throw new ie.Constraint("Cannot update primary key in bulkUpdate()")}else T(Ce,Le,Be)}z.push(je),me.push(ye),be.push(Ce)}});var ke=me.length;return C.mutate({trans:re,type:"put",keys:me,values:be,updates:{keys:N,changeSpecs:M}}).then(function(ce){var je=ce.numFailures,ye=ce.failures;if(je===0)return ke;for(var Ee=0,Ce=Object.keys(ye);Ee<Ce.length;Ee++){var we,Ie=Ce[Ee],Le=z[Number(Ie)];Le!=null&&(we=ye[Ie],delete ye[Ie],ye[Le]=we)}throw new Te("".concat(_.name,".bulkUpdate(): ").concat(je," of ").concat(ke," operations failed"),ye)})})})},he.prototype.bulkDelete=function(m){var _=this,C=m.length;return this._trans("readwrite",function(N){return _.core.mutate({trans:N,type:"delete",keys:m})}).then(function(re){var M=re.numFailures,z=re.lastResult,re=re.failures;if(M===0)return z;throw new Te("".concat(_.name,".bulkDelete(): ").concat(M," of ").concat(C," operations failed"),re)})},he);function he(){}function Se(m){function _(re,le){if(le){for(var me=arguments.length,be=new Array(me-1);--me;)be[me-1]=arguments[me];return C[re].subscribe.apply(null,be),m}if(typeof re=="string")return C[re]}var C={};_.addEventType=z;for(var N=1,M=arguments.length;N<M;++N)z(arguments[N]);return _;function z(re,le,me){if(typeof re!="object"){var be;le=le||ue;var ke={subscribers:[],fire:me=me||Re,subscribe:function(ce){ke.subscribers.indexOf(ce)===-1&&(ke.subscribers.push(ce),ke.fire=le(ke.fire,ce))},unsubscribe:function(ce){ke.subscribers=ke.subscribers.filter(function(je){return je!==ce}),ke.fire=ke.subscribers.reduce(le,me)}};return C[re]=_[re]=ke}s(be=re).forEach(function(ce){var je=be[ce];if(a(je))z(ce,be[ce][0],be[ce][1]);else{if(je!=="asap")throw new ie.InvalidArgument("Invalid event config");var ye=z(ce,te,function(){for(var Ee=arguments.length,Ce=new Array(Ee);Ee--;)Ce[Ee]=arguments[Ee];ye.subscribers.forEach(function(we){S(function(){we.apply(null,Ce)})})})}})}}function ge(m,_){return g(_).from({prototype:m}),_}function Ve(m,_){return!(m.filter||m.algorithm||m.or)&&(_?m.justLimit:!m.replayFilter)}function Ye(m,_){m.filter=qi(m.filter,_)}function Je(m,_,C){var N=m.replayFilter;m.replayFilter=N?function(){return qi(N(),_())}:_,m.justLimit=C&&!N}function Xe(m,_){if(m.isPrimKey)return _.primaryKey;var C=_.getIndexByKeyPath(m.index);if(!C)throw new ie.Schema("KeyPath "+m.index+" on object store "+_.name+" is not indexed");return C}function st(m,_,C){var N=Xe(m,_.schema);return _.openCursor({trans:C,values:!m.keysOnly,reverse:m.dir==="prev",unique:!!m.unique,query:{index:N,range:m.range}})}function St(m,_,C,N){var M=m.replayFilter?qi(m.filter,m.replayFilter()):m.filter;if(m.or){var z={},re=function(le,me,be){var ke,ce;M&&!M(me,be,function(je){return me.stop(je)},function(je){return me.fail(je)})||((ce=""+(ke=me.primaryKey))=="[object ArrayBuffer]"&&(ce=""+new Uint8Array(ke)),d(z,ce)||(z[ce]=!0,_(le,me,be)))};return Promise.all([m.or._iterate(re,C),Ht(st(m,N,C),m.algorithm,re,!m.keysOnly&&m.valueMapper)])}return Ht(st(m,N,C),qi(m.algorithm,M),_,!m.keysOnly&&m.valueMapper)}function Ht(m,_,C,N){var M=Dt(N?function(z,re,le){return C(N(z),re,le)}:C);return m.then(function(z){if(z)return z.start(function(){var re=function(){return z.continue()};_&&!_(z,function(le){return re=le},function(le){z.stop(le),re=Re},function(le){z.fail(le),re=Re})||M(z.value,z,function(le){return re=le}),re()})})}var Qt=(on.prototype.execute=function(m){var _=this["@@propmod"];if(_.add!==void 0){var C=_.add;if(a(C))return i(i([],a(m)?m:[],!0),C).sort();if(typeof C=="number")return(Number(m)||0)+C;if(typeof C=="bigint")try{return BigInt(m)+C}catch(M){return BigInt(0)+C}throw new TypeError("Invalid term ".concat(C))}if(_.remove!==void 0){var N=_.remove;if(a(N))return a(m)?m.filter(function(M){return!N.includes(M)}).sort():[];if(typeof N=="number")return Number(m)-N;if(typeof N=="bigint")try{return BigInt(m)-N}catch(M){return BigInt(0)-N}throw new TypeError("Invalid subtrahend ".concat(N))}return C=(C=_.replacePrefix)===null||C===void 0?void 0:C[0],C&&typeof m=="string"&&m.startsWith(C)?_.replacePrefix[1]+m.substring(C.length):m},on);function on(m){this["@@propmod"]=m}var $n=(Nt.prototype._read=function(m,_){var C=this._ctx;return C.error?C.table._trans(null,hn.bind(null,C.error)):C.table._trans("readonly",m).then(_)},Nt.prototype._write=function(m){var _=this._ctx;return _.error?_.table._trans(null,hn.bind(null,_.error)):_.table._trans("readwrite",m,"locked")},Nt.prototype._addAlgorithm=function(m){var _=this._ctx;_.algorithm=qi(_.algorithm,m)},Nt.prototype._iterate=function(m,_){return St(this._ctx,m,_,this._ctx.table.core)},Nt.prototype.clone=function(m){var _=Object.create(this.constructor.prototype),C=Object.create(this._ctx);return m&&l(C,m),_._ctx=C,_},Nt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Nt.prototype.each=function(m){var _=this._ctx;return this._read(function(C){return St(_,m,C,_.table.core)})},Nt.prototype.count=function(m){var _=this;return this._read(function(C){var N=_._ctx,M=N.table.core;if(Ve(N,!0))return M.count({trans:C,query:{index:Xe(N,M.schema),range:N.range}}).then(function(re){return Math.min(re,N.limit)});var z=0;return St(N,function(){return++z,!1},C,M).then(function(){return z})}).then(m)},Nt.prototype.sortBy=function(m,_){var C=m.split(".").reverse(),N=C[0],M=C.length-1;function z(me,be){return be?z(me[C[be]],be-1):me[N]}var re=this._ctx.dir==="next"?1:-1;function le(me,be){return qt(z(me,M),z(be,M))*re}return this.toArray(function(me){return me.sort(le)}).then(_)},Nt.prototype.toArray=function(m){var _=this;return this._read(function(C){var N=_._ctx;if(N.dir==="next"&&Ve(N,!0)&&0<N.limit){var M=N.valueMapper,z=Xe(N,N.table.core.schema);return N.table.core.query({trans:C,limit:N.limit,values:!0,query:{index:z,range:N.range}}).then(function(le){return le=le.result,M?le.map(M):le})}var re=[];return St(N,function(le){return re.push(le)},C,N.table.core).then(function(){return re})},m)},Nt.prototype.offset=function(m){var _=this._ctx;return m<=0||(_.offset+=m,Ve(_)?Je(_,function(){var C=m;return function(N,M){return C===0||(C===1?--C:M(function(){N.advance(C),C=0}),!1)}}):Je(_,function(){var C=m;return function(){return--C<0}})),this},Nt.prototype.limit=function(m){return this._ctx.limit=Math.min(this._ctx.limit,m),Je(this._ctx,function(){var _=m;return function(C,N,M){return--_<=0&&N(M),0<=_}},!0),this},Nt.prototype.until=function(m,_){return Ye(this._ctx,function(C,N,M){return!m(C.value)||(N(M),_)}),this},Nt.prototype.first=function(m){return this.limit(1).toArray(function(_){return _[0]}).then(m)},Nt.prototype.last=function(m){return this.reverse().first(m)},Nt.prototype.filter=function(m){var _;return Ye(this._ctx,function(C){return m(C.value)}),(_=this._ctx).isMatch=qi(_.isMatch,m),this},Nt.prototype.and=function(m){return this.filter(m)},Nt.prototype.or=function(m){return new this.db.WhereClause(this._ctx.table,m,this)},Nt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Nt.prototype.desc=function(){return this.reverse()},Nt.prototype.eachKey=function(m){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(C,N){m(N.key,N)})},Nt.prototype.eachUniqueKey=function(m){return this._ctx.unique="unique",this.eachKey(m)},Nt.prototype.eachPrimaryKey=function(m){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(C,N){m(N.primaryKey,N)})},Nt.prototype.keys=function(m){var _=this._ctx;_.keysOnly=!_.isMatch;var C=[];return this.each(function(N,M){C.push(M.key)}).then(function(){return C}).then(m)},Nt.prototype.primaryKeys=function(m){var _=this._ctx;if(_.dir==="next"&&Ve(_,!0)&&0<_.limit)return this._read(function(N){var M=Xe(_,_.table.core.schema);return _.table.core.query({trans:N,values:!1,limit:_.limit,query:{index:M,range:_.range}})}).then(function(N){return N.result}).then(m);_.keysOnly=!_.isMatch;var C=[];return this.each(function(N,M){C.push(M.primaryKey)}).then(function(){return C}).then(m)},Nt.prototype.uniqueKeys=function(m){return this._ctx.unique="unique",this.keys(m)},Nt.prototype.firstKey=function(m){return this.limit(1).keys(function(_){return _[0]}).then(m)},Nt.prototype.lastKey=function(m){return this.reverse().firstKey(m)},Nt.prototype.distinct=function(){var m=this._ctx,m=m.index&&m.table.schema.idxByName[m.index];if(!m||!m.multi)return this;var _={};return Ye(this._ctx,function(M){var N=M.primaryKey.toString(),M=d(_,N);return _[N]=!0,!M}),this},Nt.prototype.modify=function(m){var _=this,C=this._ctx;return this._write(function(N){var M,z,re;re=typeof m=="function"?m:(M=s(m),z=M.length,function(we){for(var Ie=!1,Le=0;Le<z;++Le){var Be=M[Le],Ke=m[Be],nt=A(we,Be);Ke instanceof Qt?(T(we,Be,Ke.execute(nt)),Ie=!0):nt!==Ke&&(T(we,Be,Ke),Ie=!0)}return Ie});var le=C.table.core,ce=le.schema.primaryKey,me=ce.outbound,be=ce.extractKey,ke=200,ce=_.db._options.modifyChunkSize;ce&&(ke=typeof ce=="object"?ce[le.name]||ce["*"]||200:ce);function je(we,Be){var Le=Be.failures,Be=Be.numFailures;Ee+=we-Be;for(var Ke=0,nt=s(Le);Ke<nt.length;Ke++){var ut=nt[Ke];ye.push(Le[ut])}}var ye=[],Ee=0,Ce=[];return _.clone().primaryKeys().then(function(we){function Ie(Be){var Ke=Math.min(ke,we.length-Be);return le.getMany({trans:N,keys:we.slice(Be,Be+Ke),cache:"immutable"}).then(function(nt){for(var ut=[],rt=[],at=me?[]:null,pt=[],lt=0;lt<Ke;++lt){var _t=nt[lt],Bt={value:H(_t),primKey:we[Be+lt]};re.call(Bt,Bt.value,Bt)!==!1&&(Bt.value==null?pt.push(we[Be+lt]):me||qt(be(_t),be(Bt.value))===0?(rt.push(Bt.value),me&&at.push(we[Be+lt])):(pt.push(we[Be+lt]),ut.push(Bt.value)))}return Promise.resolve(0<ut.length&&le.mutate({trans:N,type:"add",values:ut}).then(function(Kt){for(var Gt in Kt.failures)pt.splice(parseInt(Gt),1);je(ut.length,Kt)})).then(function(){return(0<rt.length||Le&&typeof m=="object")&&le.mutate({trans:N,type:"put",keys:at,values:rt,criteria:Le,changeSpec:typeof m!="function"&&m,isAdditionalChunk:0<Be}).then(function(Kt){return je(rt.length,Kt)})}).then(function(){return(0<pt.length||Le&&m===jr)&&le.mutate({trans:N,type:"delete",keys:pt,criteria:Le,isAdditionalChunk:0<Be}).then(function(Kt){return je(pt.length,Kt)})}).then(function(){return we.length>Be+Ke&&Ie(Be+ke)})})}var Le=Ve(C)&&C.limit===1/0&&(typeof m!="function"||m===jr)&&{index:C.index,range:C.range};return Ie(0).then(function(){if(0<ye.length)throw new Ne("Error modifying one or more objects",ye,Ee,Ce);return we.length})})})},Nt.prototype.delete=function(){var m=this._ctx,_=m.range;return Ve(m)&&(m.isPrimKey||_.type===3)?this._write(function(C){var N=m.table.core.schema.primaryKey,M=_;return m.table.core.count({trans:C,query:{index:N,range:M}}).then(function(z){return m.table.core.mutate({trans:C,type:"deleteRange",range:M}).then(function(re){var le=re.failures;if(re.lastResult,re.results,re=re.numFailures,re)throw new Ne("Could not delete some values",Object.keys(le).map(function(me){return le[me]}),z-re);return z-re})})}):this.modify(jr)},Nt);function Nt(){}var jr=function(m,_){return _.value=null};function sl(m,_){return m<_?-1:m===_?0:1}function Qc(m,_){return _<m?-1:m===_?0:1}function Jr(m,_,C){return m=m instanceof ed?new m.Collection(m):m,m._ctx.error=new(C||TypeError)(_),m}function Fo(m){return new m.Collection(m,function(){return Wh("")}).limit(0)}function Zc(m,_,C,N){var M,z,re,le,me,be,ke,ce=C.length;if(!C.every(function(Ee){return typeof Ee=="string"}))return Jr(m,ol);function je(Ee){M=Ee==="next"?function(we){return we.toUpperCase()}:function(we){return we.toLowerCase()},z=Ee==="next"?function(we){return we.toLowerCase()}:function(we){return we.toUpperCase()},re=Ee==="next"?sl:Qc;var Ce=C.map(function(we){return{lower:z(we),upper:M(we)}}).sort(function(we,Ie){return re(we.lower,Ie.lower)});le=Ce.map(function(we){return we.upper}),me=Ce.map(function(we){return we.lower}),ke=(be=Ee)==="next"?"":N}je("next"),m=new m.Collection(m,function(){return zo(le[0],me[ce-1]+N)}),m._ondirectionchange=function(Ee){je(Ee)};var ye=0;return m._addAlgorithm(function(Ee,Ce,we){var Ie=Ee.key;if(typeof Ie!="string")return!1;var Le=z(Ie);if(_(Le,me,ye))return!0;for(var Be=null,Ke=ye;Ke<ce;++Ke){var nt=function(ut,rt,at,pt,lt,_t){for(var Bt=Math.min(ut.length,pt.length),Kt=-1,Gt=0;Gt<Bt;++Gt){var ji=rt[Gt];if(ji!==pt[Gt])return lt(ut[Gt],at[Gt])<0?ut.substr(0,Gt)+at[Gt]+at.substr(Gt+1):lt(ut[Gt],pt[Gt])<0?ut.substr(0,Gt)+pt[Gt]+at.substr(Gt+1):0<=Kt?ut.substr(0,Kt)+rt[Kt]+at.substr(Kt+1):null;lt(ut[Gt],ji)<0&&(Kt=Gt)}return Bt<pt.length&&_t==="next"?ut+at.substr(ut.length):Bt<ut.length&&_t==="prev"?ut.substr(0,at.length):Kt<0?null:ut.substr(0,Kt)+pt[Kt]+at.substr(Kt+1)}(Ie,Le,le[Ke],me[Ke],re,be);nt===null&&Be===null?ye=Ke+1:(Be===null||0<re(Be,nt))&&(Be=nt)}return Ce(Be!==null?function(){Ee.continue(Be+ke)}:we),!1}),m}function zo(m,_,C,N){return{type:2,lower:m,upper:_,lowerOpen:C,upperOpen:N}}function Wh(m){return{type:1,lower:m,upper:m}}var ed=(Object.defineProperty(ur.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ur.prototype.between=function(m,_,C,N){C=C!==!1,N=N===!0;try{return 0<this._cmp(m,_)||this._cmp(m,_)===0&&(C||N)&&(!C||!N)?Fo(this):new this.Collection(this,function(){return zo(m,_,!C,!N)})}catch(M){return Jr(this,mr)}},ur.prototype.equals=function(m){return m==null?Jr(this,mr):new this.Collection(this,function(){return Wh(m)})},ur.prototype.above=function(m){return m==null?Jr(this,mr):new this.Collection(this,function(){return zo(m,void 0,!0)})},ur.prototype.aboveOrEqual=function(m){return m==null?Jr(this,mr):new this.Collection(this,function(){return zo(m,void 0,!1)})},ur.prototype.below=function(m){return m==null?Jr(this,mr):new this.Collection(this,function(){return zo(void 0,m,!1,!0)})},ur.prototype.belowOrEqual=function(m){return m==null?Jr(this,mr):new this.Collection(this,function(){return zo(void 0,m)})},ur.prototype.startsWith=function(m){return typeof m!="string"?Jr(this,ol):this.between(m,m+Vi,!0,!0)},ur.prototype.startsWithIgnoreCase=function(m){return m===""?this.startsWith(m):Zc(this,function(_,C){return _.indexOf(C[0])===0},[m],Vi)},ur.prototype.equalsIgnoreCase=function(m){return Zc(this,function(_,C){return _===C[0]},[m],"")},ur.prototype.anyOfIgnoreCase=function(){var m=P.apply(B,arguments);return m.length===0?Fo(this):Zc(this,function(_,C){return C.indexOf(_)!==-1},m,"")},ur.prototype.startsWithAnyOfIgnoreCase=function(){var m=P.apply(B,arguments);return m.length===0?Fo(this):Zc(this,function(_,C){return C.some(function(N){return _.indexOf(N)===0})},m,Vi)},ur.prototype.anyOf=function(){var m=this,_=P.apply(B,arguments),C=this._cmp;try{_.sort(C)}catch(z){return Jr(this,mr)}if(_.length===0)return Fo(this);var N=new this.Collection(this,function(){return zo(_[0],_[_.length-1])});N._ondirectionchange=function(z){C=z==="next"?m._ascending:m._descending,_.sort(C)};var M=0;return N._addAlgorithm(function(z,re,le){for(var me=z.key;0<C(me,_[M]);)if(++M===_.length)return re(le),!1;return C(me,_[M])===0||(re(function(){z.continue(_[M])}),!1)}),N},ur.prototype.notEqual=function(m){return this.inAnyRange([[-1/0,m],[m,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ur.prototype.noneOf=function(){var m=P.apply(B,arguments);if(m.length===0)return new this.Collection(this);try{m.sort(this._ascending)}catch(C){return Jr(this,mr)}var _=m.reduce(function(C,N){return C?C.concat([[C[C.length-1][1],N]]):[[-1/0,N]]},null);return _.push([m[m.length-1],this.db._maxKey]),this.inAnyRange(_,{includeLowers:!1,includeUppers:!1})},ur.prototype.inAnyRange=function(Ie,_){var C=this,N=this._cmp,M=this._ascending,z=this._descending,re=this._min,le=this._max;if(Ie.length===0)return Fo(this);if(!Ie.every(function(Le){return Le[0]!==void 0&&Le[1]!==void 0&&M(Le[0],Le[1])<=0}))return Jr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var me=!_||_.includeLowers!==!1,be=_&&_.includeUppers===!0,ke,ce=M;function je(Le,Be){return ce(Le[0],Be[0])}try{(ke=Ie.reduce(function(Le,Be){for(var Ke=0,nt=Le.length;Ke<nt;++Ke){var ut=Le[Ke];if(N(Be[0],ut[1])<0&&0<N(Be[1],ut[0])){ut[0]=re(ut[0],Be[0]),ut[1]=le(ut[1],Be[1]);break}}return Ke===nt&&Le.push(Be),Le},[])).sort(je)}catch(Le){return Jr(this,mr)}var ye=0,Ee=be?function(Le){return 0<M(Le,ke[ye][1])}:function(Le){return 0<=M(Le,ke[ye][1])},Ce=me?function(Le){return 0<z(Le,ke[ye][0])}:function(Le){return 0<=z(Le,ke[ye][0])},we=Ee,Ie=new this.Collection(this,function(){return zo(ke[0][0],ke[ke.length-1][1],!me,!be)});return Ie._ondirectionchange=function(Le){ce=Le==="next"?(we=Ee,M):(we=Ce,z),ke.sort(je)},Ie._addAlgorithm(function(Le,Be,Ke){for(var nt,ut=Le.key;we(ut);)if(++ye===ke.length)return Be(Ke),!1;return!Ee(nt=ut)&&!Ce(nt)||(C._cmp(ut,ke[ye][1])===0||C._cmp(ut,ke[ye][0])===0||Be(function(){ce===M?Le.continue(ke[ye][0]):Le.continue(ke[ye][1])}),!1)}),Ie},ur.prototype.startsWithAnyOf=function(){var m=P.apply(B,arguments);return m.every(function(_){return typeof _=="string"})?m.length===0?Fo(this):this.inAnyRange(m.map(function(_){return[_,_+Vi]})):Jr(this,"startsWithAnyOf() only works with strings")},ur);function ur(){}function Ho(m){return Dt(function(_){return td(_),m(_.target.error),!1})}function td(m){m.stopPropagation&&m.stopPropagation(),m.preventDefault&&m.preventDefault()}var nd="storagemutated",zv="x-storagemutated-1",ia=Se(null,nd),F5=(Uo.prototype._lock=function(){return E(!Ze.global),++this._reculock,this._reculock!==1||Ze.global||(Ze.lockOwnerFor=this),this},Uo.prototype._unlock=function(){if(E(!Ze.global),--this._reculock==0)for(Ze.global||(Ze.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var m=this._blockedFuncs.shift();try{fo(m[1],m[0])}catch(_){}}return this},Uo.prototype._locked=function(){return this._reculock&&Ze.lockOwnerFor!==this},Uo.prototype.create=function(m){var _=this;if(!this.mode)return this;var C=this.db.idbdb,N=this.db._state.dbOpenError;if(E(!this.idbtrans),!m&&!C)switch(N&&N.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(N);case"MissingAPIError":throw new ie.MissingAPI(N.message,N);default:throw new ie.OpenFailed(N)}if(!this.active)throw new ie.TransactionInactive;return E(this._completion._state===null),(m=this.idbtrans=m||(this.db.core||C).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Dt(function(M){td(M),_._reject(m.error)}),m.onabort=Dt(function(M){td(M),_.active&&_._reject(new ie.Abort(m.error)),_.active=!1,_.on("abort").fire(M)}),m.oncomplete=Dt(function(){_.active=!1,_._resolve(),"mutatedParts"in m&&ia.storagemutated.fire(m.mutatedParts)}),this},Uo.prototype._promise=function(m,_,C){var N=this;if(m==="readwrite"&&this.mode!=="readwrite")return hn(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return hn(new ie.TransactionInactive);if(this._locked())return new ot(function(z,re){N._blockedFuncs.push([function(){N._promise(m,_,C).then(z,re)},Ze])});if(C)return Gr(function(){var z=new ot(function(re,le){N._lock();var me=_(re,le,N);me&&me.then&&me.then(re,le)});return z.finally(function(){return N._unlock()}),z._lib=!0,z});var M=new ot(function(z,re){var le=_(z,re,N);le&&le.then&&le.then(z,re)});return M._lib=!0,M},Uo.prototype._root=function(){return this.parent?this.parent._root():this},Uo.prototype.waitFor=function(m){var _,C=this._root(),N=ot.resolve(m);C._waitingFor?C._waitingFor=C._waitingFor.then(function(){return N}):(C._waitingFor=N,C._waitingQueue=[],_=C.idbtrans.objectStore(C.storeNames[0]),function z(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(_.get(-1/0).onsuccess=z)}());var M=C._waitingFor;return new ot(function(z,re){N.then(function(le){return C._waitingQueue.push(Dt(z.bind(null,le)))},function(le){return C._waitingQueue.push(Dt(re.bind(null,le)))}).finally(function(){C._waitingFor===M&&(C._waitingFor=null)})})},Uo.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))},Uo.prototype.table=function(m){var _=this._memoizedTables||(this._memoizedTables={});if(d(_,m))return _[m];var C=this.schema[m];if(!C)throw new ie.NotFound("Table "+m+" not part of transaction");return C=new this.db.Table(m,C,this),C.core=this.db.core.table(m),_[m]=C},Uo);function Uo(){}function Hv(m,_,C,N,M,z,re){return{name:m,keyPath:_,unique:C,multi:N,auto:M,compound:z,src:(C&&!re?"&":"")+(N?"*":"")+(M?"++":"")+uS(_)}}function uS(m){return typeof m=="string"?m:m?"["+[].join.call(m,"+")+"]":""}function Uv(m,_,C){return{name:m,primKey:_,indexes:C,mappedClass:null,idxByName:(N=function(M){return[M.name,M]},C.reduce(function(M,z,re){return re=N(z,re),re&&(M[re[0]]=re[1]),M},{}))};var N}var rd=function(m){try{return m.only([[]]),rd=function(){return[[]]},[[]]}catch(_){return rd=function(){return Vi},Vi}};function Wv(m){return m==null?function(){}:typeof m=="string"?(_=m).split(".").length===1?function(C){return C[_]}:function(C){return A(C,_)}:function(C){return A(C,m)};var _}function cS(m){return[].slice.call(m)}var z5=0;function id(m){return m==null?":id":typeof m=="string"?m:"[".concat(m.join("+"),"]")}function H5(m,_,me){function N(we){if(we.type===3)return null;if(we.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ye=we.lower,Ee=we.upper,Ce=we.lowerOpen,we=we.upperOpen;return ye===void 0?Ee===void 0?null:_.upperBound(Ee,!!we):Ee===void 0?_.lowerBound(ye,!!Ce):_.bound(ye,Ee,!!Ce,!!we)}function M(je){var ye,Ee=je.name;return{name:Ee,schema:je,mutate:function(Ce){var we=Ce.trans,Ie=Ce.type,Le=Ce.keys,Be=Ce.values,Ke=Ce.range;return new Promise(function(nt,ut){nt=Dt(nt);var rt=we.objectStore(Ee),at=rt.keyPath==null,pt=Ie==="put"||Ie==="add";if(!pt&&Ie!=="delete"&&Ie!=="deleteRange")throw new Error("Invalid operation type: "+Ie);var lt,_t=(Le||Be||{length:1}).length;if(Le&&Be&&Le.length!==Be.length)throw new Error("Given keys array must have same length as given values array.");if(_t===0)return nt({numFailures:0,failures:{},results:[],lastResult:void 0});function Bt(Qr){++ji,td(Qr)}var Kt=[],Gt=[],ji=0;if(Ie==="deleteRange"){if(Ke.type===4)return nt({numFailures:ji,failures:Gt,results:[],lastResult:void 0});Ke.type===3?Kt.push(lt=rt.clear()):Kt.push(lt=rt.delete(N(Ke)))}else{var at=pt?at?[Be,Le]:[Be,null]:[Le,null],Lt=at[0],Rr=at[1];if(pt)for(var Nr=0;Nr<_t;++Nr)Kt.push(lt=Rr&&Rr[Nr]!==void 0?rt[Ie](Lt[Nr],Rr[Nr]):rt[Ie](Lt[Nr])),lt.onerror=Bt;else for(Nr=0;Nr<_t;++Nr)Kt.push(lt=rt[Ie](Lt[Nr])),lt.onerror=Bt}function rp(Qr){Qr=Qr.target.result,Kt.forEach(function(ul,l0){return ul.error!=null&&(Gt[l0]=ul.error)}),nt({numFailures:ji,failures:Gt,results:Ie==="delete"?Le:Kt.map(function(ul){return ul.result}),lastResult:Qr})}lt.onerror=function(Qr){Bt(Qr),rp(Qr)},lt.onsuccess=rp})},getMany:function(Ce){var we=Ce.trans,Ie=Ce.keys;return new Promise(function(Le,Be){Le=Dt(Le);for(var Ke,nt=we.objectStore(Ee),ut=Ie.length,rt=new Array(ut),at=0,pt=0,lt=function(Kt){Kt=Kt.target,rt[Kt._pos]=Kt.result,++pt===at&&Le(rt)},_t=Ho(Be),Bt=0;Bt<ut;++Bt)Ie[Bt]!=null&&((Ke=nt.get(Ie[Bt]))._pos=Bt,Ke.onsuccess=lt,Ke.onerror=_t,++at);at===0&&Le(rt)})},get:function(Ce){var we=Ce.trans,Ie=Ce.key;return new Promise(function(Le,Be){Le=Dt(Le);var Ke=we.objectStore(Ee).get(Ie);Ke.onsuccess=function(nt){return Le(nt.target.result)},Ke.onerror=Ho(Be)})},query:(ye=be,function(Ce){return new Promise(function(we,Ie){we=Dt(we);var Le,Be,Ke,at=Ce.trans,nt=Ce.values,ut=Ce.limit,lt=Ce.query,rt=ut===1/0?void 0:ut,pt=lt.index,lt=lt.range,at=at.objectStore(Ee),pt=pt.isPrimaryKey?at:at.index(pt.name),lt=N(lt);if(ut===0)return we({result:[]});ye?((rt=nt?pt.getAll(lt,rt):pt.getAllKeys(lt,rt)).onsuccess=function(_t){return we({result:_t.target.result})},rt.onerror=Ho(Ie)):(Le=0,Be=!nt&&"openKeyCursor"in pt?pt.openKeyCursor(lt):pt.openCursor(lt),Ke=[],Be.onsuccess=function(_t){var Bt=Be.result;return Bt?(Ke.push(nt?Bt.value:Bt.primaryKey),++Le===ut?we({result:Ke}):void Bt.continue()):we({result:Ke})},Be.onerror=Ho(Ie))})}),openCursor:function(Ce){var we=Ce.trans,Ie=Ce.values,Le=Ce.query,Be=Ce.reverse,Ke=Ce.unique;return new Promise(function(nt,ut){nt=Dt(nt);var pt=Le.index,rt=Le.range,at=we.objectStore(Ee),at=pt.isPrimaryKey?at:at.index(pt.name),pt=Be?Ke?"prevunique":"prev":Ke?"nextunique":"next",lt=!Ie&&"openKeyCursor"in at?at.openKeyCursor(N(rt),pt):at.openCursor(N(rt),pt);lt.onerror=Ho(ut),lt.onsuccess=Dt(function(_t){var Bt,Kt,Gt,ji,Lt=lt.result;Lt?(Lt.___id=++z5,Lt.done=!1,Bt=Lt.continue.bind(Lt),Kt=(Kt=Lt.continuePrimaryKey)&&Kt.bind(Lt),Gt=Lt.advance.bind(Lt),ji=function(){throw new Error("Cursor not stopped")},Lt.trans=we,Lt.stop=Lt.continue=Lt.continuePrimaryKey=Lt.advance=function(){throw new Error("Cursor not started")},Lt.fail=Dt(ut),Lt.next=function(){var Rr=this,Nr=1;return this.start(function(){return Nr--?Rr.continue():Rr.stop()}).then(function(){return Rr})},Lt.start=function(Rr){function Nr(){if(lt.result)try{Rr()}catch(Qr){Lt.fail(Qr)}else Lt.done=!0,Lt.start=function(){throw new Error("Cursor behind last entry")},Lt.stop()}var rp=new Promise(function(Qr,ul){Qr=Dt(Qr),lt.onerror=Ho(ul),Lt.fail=ul,Lt.stop=function(l0){Lt.stop=Lt.continue=Lt.continuePrimaryKey=Lt.advance=ji,Qr(l0)}});return lt.onsuccess=Dt(function(Qr){lt.onsuccess=Nr,Nr()}),Lt.continue=Bt,Lt.continuePrimaryKey=Kt,Lt.advance=Gt,Nr(),rp},nt(Lt)):nt(null)},ut)})},count:function(Ce){var we=Ce.query,Ie=Ce.trans,Le=we.index,Be=we.range;return new Promise(function(Ke,nt){var ut=Ie.objectStore(Ee),rt=Le.isPrimaryKey?ut:ut.index(Le.name),ut=N(Be),rt=ut?rt.count(ut):rt.count();rt.onsuccess=Dt(function(at){return Ke(at.target.result)}),rt.onerror=Ho(nt)})}}}var z,re,le,ke=(re=me,le=cS((z=m).objectStoreNames),{schema:{name:z.name,tables:le.map(function(je){return re.objectStore(je)}).map(function(je){var ye=je.keyPath,we=je.autoIncrement,Ee=a(ye),Ce={},we={name:je.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ye==null,compound:Ee,keyPath:ye,autoIncrement:we,unique:!0,extractKey:Wv(ye)},indexes:cS(je.indexNames).map(function(Ie){return je.index(Ie)}).map(function(Ke){var Le=Ke.name,Be=Ke.unique,nt=Ke.multiEntry,Ke=Ke.keyPath,nt={name:Le,compound:a(Ke),keyPath:Ke,unique:Be,multiEntry:nt,extractKey:Wv(Ke)};return Ce[id(Ke)]=nt}),getIndexByKeyPath:function(Ie){return Ce[id(Ie)]}};return Ce[":id"]=we.primaryKey,ye!=null&&(Ce[id(ye)]=we.primaryKey),we})},hasGetAll:0<le.length&&"getAll"in re.objectStore(le[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),me=ke.schema,be=ke.hasGetAll,ke=me.tables.map(M),ce={};return ke.forEach(function(je){return ce[je.name]=je}),{stack:"dbcore",transaction:m.transaction.bind(m),table:function(je){if(!ce[je])throw new Error("Table '".concat(je,"' not found"));return ce[je]},MIN_KEY:-1/0,MAX_KEY:rd(_),schema:me}}function U5(m,_,C,N){var M=C.IDBKeyRange;return C.indexedDB,{dbcore:(N=H5(_,M,N),m.dbcore.reduce(function(z,re){return re=re.create,r(r({},z),re(z))},N))}}function Vh(m,N){var C=N.db,N=U5(m._middlewares,C,m._deps,N);m.core=N.dbcore,m.tables.forEach(function(M){var z=M.name;m.core.schema.tables.some(function(re){return re.name===z})&&(M.core=m.core.table(z),m[z]instanceof m.Table&&(m[z].core=M.core))})}function qh(m,_,C,N){C.forEach(function(M){var z=N[M];_.forEach(function(re){var le=function me(be,ke){return x(be,ke)||(be=u(be))&&me(be,ke)}(re,M);(!le||"value"in le&&le.value===void 0)&&(re===m.Transaction.prototype||re instanceof m.Transaction?b(re,M,{get:function(){return this.table(M)},set:function(me){p(this,M,{value:me,writable:!0,configurable:!0,enumerable:!0})}}):re[M]=new m.Table(M,z))})})}function Vv(m,_){_.forEach(function(C){for(var N in C)C[N]instanceof m.Table&&delete C[N]})}function W5(m,_){return m._cfg.version-_._cfg.version}function V5(m,_,C,N){var M=m._dbSchema;C.objectStoreNames.contains("$meta")&&!M.$meta&&(M.$meta=Uv("$meta",fS("")[0],[]),m._storeNames.push("$meta"));var z=m._createTransaction("readwrite",m._storeNames,M);z.create(C),z._completion.catch(N);var re=z._reject.bind(z),le=Ze.transless||Ze;Gr(function(){return Ze.trans=z,Ze.transless=le,_!==0?(Vh(m,C),be=_,((me=z).storeNames.includes("$meta")?me.table("$meta").get("version").then(function(ke){return ke!=null?ke:be}):ot.resolve(be)).then(function(ke){return je=ke,ye=z,Ee=C,Ce=[],ke=(ce=m)._versions,we=ce._dbSchema=Gh(0,ce.idbdb,Ee),(ke=ke.filter(function(Ie){return Ie._cfg.version>=je})).length!==0?(ke.forEach(function(Ie){Ce.push(function(){var Le=we,Be=Ie._cfg.dbschema;Yh(ce,Le,Ee),Yh(ce,Be,Ee),we=ce._dbSchema=Be;var Ke=qv(Le,Be);Ke.add.forEach(function(pt){Kv(Ee,pt[0],pt[1].primKey,pt[1].indexes)}),Ke.change.forEach(function(pt){if(pt.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var lt=Ee.objectStore(pt.name);pt.add.forEach(function(_t){return Kh(lt,_t)}),pt.change.forEach(function(_t){lt.deleteIndex(_t.name),Kh(lt,_t)}),pt.del.forEach(function(_t){return lt.deleteIndex(_t)})});var nt=Ie._cfg.contentUpgrade;if(nt&&Ie._cfg.version>je){Vh(ce,Ee),ye._memoizedTables={};var ut=$(Be);Ke.del.forEach(function(pt){ut[pt]=Le[pt]}),Vv(ce,[ce.Transaction.prototype]),qh(ce,[ce.Transaction.prototype],s(ut),ut),ye.schema=ut;var rt,at=G(nt);return at&&Yr(),Ke=ot.follow(function(){var pt;(rt=nt(ye))&&at&&(pt=gr.bind(null,null),rt.then(pt,pt))}),rt&&typeof rt.then=="function"?ot.resolve(rt):Ke.then(function(){return rt})}}),Ce.push(function(Le){var Be,Ke,nt=Ie._cfg.dbschema;Be=nt,Ke=Le,[].slice.call(Ke.db.objectStoreNames).forEach(function(ut){return Be[ut]==null&&Ke.db.deleteObjectStore(ut)}),Vv(ce,[ce.Transaction.prototype]),qh(ce,[ce.Transaction.prototype],ce._storeNames,ce._dbSchema),ye.schema=ce._dbSchema}),Ce.push(function(Le){ce.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ce.idbdb.version/10)===Ie._cfg.version?(ce.idbdb.deleteObjectStore("$meta"),delete ce._dbSchema.$meta,ce._storeNames=ce._storeNames.filter(function(Be){return Be!=="$meta"})):Le.objectStore("$meta").put(Ie._cfg.version,"version"))})}),function Ie(){return Ce.length?ot.resolve(Ce.shift()(ye.idbtrans)).then(Ie):ot.resolve()}().then(function(){dS(we,Ee)})):ot.resolve();var ce,je,ye,Ee,Ce,we}).catch(re)):(s(M).forEach(function(ke){Kv(C,ke,M[ke].primKey,M[ke].indexes)}),Vh(m,C),void ot.follow(function(){return m.on.populate.fire(z)}).catch(re));var me,be})}function q5(m,_){dS(m._dbSchema,_),_.db.version%10!=0||_.objectStoreNames.contains("$meta")||_.db.createObjectStore("$meta").add(Math.ceil(_.db.version/10-1),"version");var C=Gh(0,m.idbdb,_);Yh(m,m._dbSchema,_);for(var N=0,M=qv(C,m._dbSchema).change;N<M.length;N++){var z=function(re){if(re.change.length||re.recreate)return console.warn("Unable to patch indexes of table ".concat(re.name," because it has changes on the type of index or primary key.")),{value:void 0};var le=_.objectStore(re.name);re.add.forEach(function(me){qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(re.name,".").concat(me.src)),Kh(le,me)})}(M[N]);if(typeof z=="object")return z.value}}function qv(m,_){var C,N={del:[],add:[],change:[]};for(C in m)_[C]||N.del.push(C);for(C in _){var M=m[C],z=_[C];if(M){var re={name:C,def:z,recreate:!1,del:[],add:[],change:[]};if(""+(M.primKey.keyPath||"")!=""+(z.primKey.keyPath||"")||M.primKey.auto!==z.primKey.auto)re.recreate=!0,N.change.push(re);else{var le=M.idxByName,me=z.idxByName,be=void 0;for(be in le)me[be]||re.del.push(be);for(be in me){var ke=le[be],ce=me[be];ke?ke.src!==ce.src&&re.change.push(ce):re.add.push(ce)}(0<re.del.length||0<re.add.length||0<re.change.length)&&N.change.push(re)}}else N.add.push([C,z])}return N}function Kv(m,_,C,N){var M=m.db.createObjectStore(_,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return N.forEach(function(z){return Kh(M,z)}),M}function dS(m,_){s(m).forEach(function(C){_.db.objectStoreNames.contains(C)||(qe&&console.debug("Dexie: Creating missing table",C),Kv(_,C,m[C].primKey,m[C].indexes))})}function Kh(m,_){m.createIndex(_.name,_.keyPath,{unique:_.unique,multiEntry:_.multi})}function Gh(m,_,C){var N={};return v(_.objectStoreNames,0).forEach(function(M){for(var z=C.objectStore(M),re=Hv(uS(be=z.keyPath),be||"",!0,!1,!!z.autoIncrement,be&&typeof be!="string",!0),le=[],me=0;me<z.indexNames.length;++me){var ke=z.index(z.indexNames[me]),be=ke.keyPath,ke=Hv(ke.name,be,!!ke.unique,!!ke.multiEntry,!1,be&&typeof be!="string",!1);le.push(ke)}N[M]=Uv(M,re,le)}),N}function Yh(m,_,C){for(var N=C.db.objectStoreNames,M=0;M<N.length;++M){var z=N[M],re=C.objectStore(z);m._hasGetAll="getAll"in re;for(var le=0;le<re.indexNames.length;++le){var me=re.indexNames[le],be=re.index(me).keyPath,ke=typeof be=="string"?be:"["+v(be).join("+")+"]";!_[z]||(be=_[z].idxByName[ke])&&(be.name=me,delete _[z].idxByName[ke],_[z].idxByName[me]=be)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(m._hasGetAll=!1)}function fS(m){return m.split(",").map(function(_,C){var N=(_=_.trim()).replace(/([&*]|\+\+)/g,""),M=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return Hv(N,M||null,/\&/.test(_),/\*/.test(_),/\+\+/.test(_),a(M),C===0)})}var K5=(Xh.prototype._parseStoresSpec=function(m,_){s(m).forEach(function(C){if(m[C]!==null){var N=fS(m[C]),M=N.shift();if(M.unique=!0,M.multi)throw new ie.Schema("Primary key cannot be multi-valued");N.forEach(function(z){if(z.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")}),_[C]=Uv(C,M,N)}})},Xh.prototype.stores=function(C){var _=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,C):C;var C=_._versions,N={},M={};return C.forEach(function(z){l(N,z._cfg.storesSource),M=z._cfg.dbschema={},z._parseStoresSpec(N,M)}),_._dbSchema=M,Vv(_,[_._allTables,_,_.Transaction.prototype]),qh(_,[_._allTables,_,_.Transaction.prototype,this._cfg.tables],s(M),M),_._storeNames=s(M),this},Xh.prototype.upgrade=function(m){return this._cfg.contentUpgrade=Pe(this._cfg.contentUpgrade||Re,m),this},Xh);function Xh(){}function Gv(m,_){var C=m._dbNamesDB;return C||(C=m._dbNamesDB=new ys(ra,{addons:[],indexedDB:m,IDBKeyRange:_})).version(1).stores({dbnames:"name"}),C.table("dbnames")}function Yv(m){return m&&typeof m.databases=="function"}function Xv(m){return Gr(function(){return Ze.letThrough=!0,m()})}function Jv(m){return!("from"in m)}var Ar=function(m,_){if(!this){var C=new Ar;return m&&"d"in m&&l(C,m),C}l(this,arguments.length?{d:1,from:m,to:1<arguments.length?_:m}:{d:0})};function od(m,_,C){var N=qt(_,C);if(!isNaN(N)){if(0<N)throw RangeError();if(Jv(m))return l(m,{from:_,to:C,d:1});var M=m.l,N=m.r;if(qt(C,m.from)<0)return M?od(M,_,C):m.l={from:_,to:C,d:1,l:null,r:null},pS(m);if(0<qt(_,m.to))return N?od(N,_,C):m.r={from:_,to:C,d:1,l:null,r:null},pS(m);qt(_,m.from)<0&&(m.from=_,m.l=null,m.d=N?N.d+1:1),0<qt(C,m.to)&&(m.to=C,m.r=null,m.d=m.l?m.l.d+1:1),C=!m.r,M&&!m.l&&sd(m,M),N&&C&&sd(m,N)}}function sd(m,_){Jv(_)||function C(N,me){var z=me.from,re=me.to,le=me.l,me=me.r;od(N,z,re),le&&C(N,le),me&&C(N,me)}(m,_)}function hS(m,_){var C=Jh(_),N=C.next();if(N.done)return!1;for(var M=N.value,z=Jh(m),re=z.next(M.from),le=re.value;!N.done&&!re.done;){if(qt(le.from,M.to)<=0&&0<=qt(le.to,M.from))return!0;qt(M.from,le.from)<0?M=(N=C.next(le.from)).value:le=(re=z.next(M.from)).value}return!1}function Jh(m){var _=Jv(m)?null:{s:0,n:m};return{next:function(C){for(var N=0<arguments.length;_;)switch(_.s){case 0:if(_.s=1,N)for(;_.n.l&&qt(C,_.n.from)<0;)_={up:_,n:_.n.l,s:1};else for(;_.n.l;)_={up:_,n:_.n.l,s:1};case 1:if(_.s=2,!N||qt(C,_.n.to)<=0)return{value:_.n,done:!1};case 2:if(_.n.r){_.s=3,_={up:_,n:_.n.r,s:0};continue}case 3:_=_.up}return{done:!0}}}}function pS(m){var _,C,N=(((_=m.r)===null||_===void 0?void 0:_.d)||0)-(((C=m.l)===null||C===void 0?void 0:C.d)||0),M=1<N?"r":N<-1?"l":"";M&&(_=M=="r"?"l":"r",C=r({},m),N=m[M],m.from=N.from,m.to=N.to,m[M]=N[M],C[M]=N[_],(m[_]=C).d=gS(C)),m.d=gS(m)}function gS(C){var _=C.r,C=C.l;return(_?C?Math.max(_.d,C.d):_.d:C?C.d:0)+1}function Qh(m,_){return s(_).forEach(function(C){m[C]?sd(m[C],_[C]):m[C]=function N(M){var z,re,le={};for(z in M)d(M,z)&&(re=M[z],le[z]=!re||typeof re!="object"||U.has(re.constructor)?re:N(re));return le}(_[C])}),m}function Qv(m,_){return m.all||_.all||Object.keys(m).some(function(C){return _[C]&&hS(_[C],m[C])})}h(Ar.prototype,((Ki={add:function(m){return sd(this,m),this},addKey:function(m){return od(this,m,m),this},addKeys:function(m){var _=this;return m.forEach(function(C){return od(_,C,C)}),this},hasKey:function(m){var _=Jh(this).next(m).value;return _&&qt(_.from,m)<=0&&0<=qt(_.to,m)}})[K]=function(){return Jh(this)},Ki));var al={},Zv={},e0=!1;function Zh(m){Qh(Zv,m),e0||(e0=!0,setTimeout(function(){e0=!1,t0(Zv,!(Zv={}))},0))}function t0(m,_){_===void 0&&(_=!1);var C=new Set;if(m.all)for(var N=0,M=Object.values(al);N<M.length;N++)mS(re=M[N],m,C,_);else for(var z in m){var re,le=/^idb\:\/\/(.*)\/(.*)\//.exec(z);le&&(z=le[1],le=le[2],(re=al["idb://".concat(z,"/").concat(le)])&&mS(re,m,C,_))}C.forEach(function(me){return me()})}function mS(m,_,C,N){for(var M=[],z=0,re=Object.entries(m.queries.query);z<re.length;z++){for(var le=re[z],me=le[0],be=[],ke=0,ce=le[1];ke<ce.length;ke++){var je=ce[ke];Qv(_,je.obsSet)?je.subscribers.forEach(function(we){return C.add(we)}):N&&be.push(je)}N&&M.push([me,be])}if(N)for(var ye=0,Ee=M;ye<Ee.length;ye++){var Ce=Ee[ye],me=Ce[0],be=Ce[1];m.queries.query[me]=be}}function G5(m){var _=m._state,C=m._deps.indexedDB;if(_.isBeingOpened||m.idbdb)return _.dbReadyPromise.then(function(){return _.dbOpenError?hn(_.dbOpenError):m});_.isBeingOpened=!0,_.dbOpenError=null,_.openComplete=!1;var N=_.openCanceller,M=Math.round(10*m.verno),z=!1;function re(){if(_.openCanceller!==N)throw new ie.DatabaseClosed("db.open() was cancelled")}function le(){return new ot(function(je,ye){if(re(),!C)throw new ie.MissingAPI;var Ee=m.name,Ce=_.autoSchema||!M?C.open(Ee):C.open(Ee,M);if(!Ce)throw new ie.MissingAPI;Ce.onerror=Ho(ye),Ce.onblocked=Dt(m._fireOnBlocked),Ce.onupgradeneeded=Dt(function(we){var Ie;ke=Ce.transaction,_.autoSchema&&!m._options.allowEmptyDB?(Ce.onerror=td,ke.abort(),Ce.result.close(),(Ie=C.deleteDatabase(Ee)).onsuccess=Ie.onerror=Dt(function(){ye(new ie.NoSuchDatabase("Database ".concat(Ee," doesnt exist")))})):(ke.onerror=Ho(ye),we=we.oldVersion>Math.pow(2,62)?0:we.oldVersion,ce=we<1,m.idbdb=Ce.result,z&&q5(m,ke),V5(m,we/10,ke,ye))},ye),Ce.onsuccess=Dt(function(){ke=null;var we,Ie,Le,Be,Ke,nt=m.idbdb=Ce.result,ut=v(nt.objectStoreNames);if(0<ut.length)try{var rt=nt.transaction((Be=ut).length===1?Be[0]:Be,"readonly");if(_.autoSchema)Ie=nt,Le=rt,(we=m).verno=Ie.version/10,Le=we._dbSchema=Gh(0,Ie,Le),we._storeNames=v(Ie.objectStoreNames,0),qh(we,[we._allTables],s(Le),Le);else if(Yh(m,m._dbSchema,rt),((Ke=qv(Gh(0,(Ke=m).idbdb,rt),Ke._dbSchema)).add.length||Ke.change.some(function(at){return at.add.length||at.change.length}))&&!z)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),nt.close(),M=nt.version+1,z=!0,je(le());Vh(m,rt)}catch(at){}Xr.push(m),nt.onversionchange=Dt(function(at){_.vcFired=!0,m.on("versionchange").fire(at)}),nt.onclose=Dt(function(at){m.on("close").fire(at)}),ce&&(Ke=m._deps,rt=Ee,nt=Ke.indexedDB,Ke=Ke.IDBKeyRange,Yv(nt)||rt===ra||Gv(nt,Ke).put({name:rt}).catch(Re)),je()},ye)}).catch(function(je){switch(je==null?void 0:je.name){case"UnknownError":if(0<_.PR1398_maxLoop)return _.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),le();break;case"VersionError":if(0<M)return M=0,le()}return ot.reject(je)})}var me,be=_.dbReadyResolve,ke=null,ce=!1;return ot.race([N,(typeof navigator>"u"?ot.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(je){function ye(){return indexedDB.databases().finally(je)}me=setInterval(ye,100),ye()}).finally(function(){return clearInterval(me)}):Promise.resolve()).then(le)]).then(function(){return re(),_.onReadyBeingFired=[],ot.resolve(Xv(function(){return m.on.ready.fire(m.vip)})).then(function je(){if(0<_.onReadyBeingFired.length){var ye=_.onReadyBeingFired.reduce(Pe,Re);return _.onReadyBeingFired=[],ot.resolve(Xv(function(){return ye(m.vip)})).then(je)}})}).finally(function(){_.openCanceller===N&&(_.onReadyBeingFired=null,_.isBeingOpened=!1)}).catch(function(je){_.dbOpenError=je;try{ke&&ke.abort()}catch(ye){}return N===_.openCanceller&&m._close(),hn(je)}).finally(function(){_.openComplete=!0,be()}).then(function(){var je;return ce&&(je={},m.tables.forEach(function(ye){ye.schema.indexes.forEach(function(Ee){Ee.name&&(je["idb://".concat(m.name,"/").concat(ye.name,"/").concat(Ee.name)]=new Ar(-1/0,[[[]]]))}),je["idb://".concat(m.name,"/").concat(ye.name,"/")]=je["idb://".concat(m.name,"/").concat(ye.name,"/:dels")]=new Ar(-1/0,[[[]]])}),ia(nd).fire(je),t0(je,!0)),m})}function n0(m){function _(z){return m.next(z)}var C=M(_),N=M(function(z){return m.throw(z)});function M(z){return function(me){var le=z(me),me=le.value;return le.done?me:me&&typeof me.then=="function"?me.then(C,N):a(me)?Promise.all(me).then(C,N):C(me)}}return M(_)()}function ep(m,_,C){for(var N=a(m)?m.slice():[m],M=0;M<C;++M)N.push(_);return N}var Y5={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(m){return r(r({},m),{table:function(_){var C=m.table(_),N=C.schema,M={},z=[];function re(ce,je,ye){var Ee=id(ce),Ce=M[Ee]=M[Ee]||[],we=ce==null?0:typeof ce=="string"?1:ce.length,Ie=0<je,Ie=r(r({},ye),{name:Ie?"".concat(Ee,"(virtual-from:").concat(ye.name,")"):ye.name,lowLevelIndex:ye,isVirtual:Ie,keyTail:je,keyLength:we,extractKey:Wv(ce),unique:!Ie&&ye.unique});return Ce.push(Ie),Ie.isPrimaryKey||z.push(Ie),1<we&&re(we===2?ce[0]:ce.slice(0,we-1),je+1,ye),Ce.sort(function(Le,Be){return Le.keyTail-Be.keyTail}),Ie}_=re(N.primaryKey.keyPath,0,N.primaryKey),M[":id"]=[_];for(var le=0,me=N.indexes;le<me.length;le++){var be=me[le];re(be.keyPath,0,be)}function ke(ce){var je,ye=ce.query.index;return ye.isVirtual?r(r({},ce),{query:{index:ye.lowLevelIndex,range:(je=ce.query.range,ye=ye.keyTail,{type:je.type===1?2:je.type,lower:ep(je.lower,je.lowerOpen?m.MAX_KEY:m.MIN_KEY,ye),lowerOpen:!0,upper:ep(je.upper,je.upperOpen?m.MIN_KEY:m.MAX_KEY,ye),upperOpen:!0})}}):ce}return r(r({},C),{schema:r(r({},N),{primaryKey:_,indexes:z,getIndexByKeyPath:function(ce){return(ce=M[id(ce)])&&ce[0]}}),count:function(ce){return C.count(ke(ce))},query:function(ce){return C.query(ke(ce))},openCursor:function(ce){var je=ce.query.index,ye=je.keyTail,Ee=je.isVirtual,Ce=je.keyLength;return Ee?C.openCursor(ke(ce)).then(function(Ie){return Ie&&we(Ie)}):C.openCursor(ce);function we(Ie){return Object.create(Ie,{continue:{value:function(Le){Le!=null?Ie.continue(ep(Le,ce.reverse?m.MAX_KEY:m.MIN_KEY,ye)):ce.unique?Ie.continue(Ie.key.slice(0,Ce).concat(ce.reverse?m.MIN_KEY:m.MAX_KEY,ye)):Ie.continue()}},continuePrimaryKey:{value:function(Le,Be){Ie.continuePrimaryKey(ep(Le,m.MAX_KEY,ye),Be)}},primaryKey:{get:function(){return Ie.primaryKey}},key:{get:function(){var Le=Ie.key;return Ce===1?Le[0]:Le.slice(0,Ce)}},value:{get:function(){return Ie.value}}})}}})}})}};function r0(m,_,C,N){return C=C||{},N=N||"",s(m).forEach(function(M){var z,re,le;d(_,M)?(z=m[M],re=_[M],typeof z=="object"&&typeof re=="object"&&z&&re?(le=F(z))!==F(re)?C[N+M]=_[M]:le==="Object"?r0(z,re,C,N+M+"."):z!==re&&(C[N+M]=_[M]):z!==re&&(C[N+M]=_[M])):C[N+M]=void 0}),s(_).forEach(function(M){d(m,M)||(C[N+M]=_[M])}),C}function i0(m,_){return _.type==="delete"?_.keys:_.keys||_.values.map(m.extractKey)}var X5={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(m){return r(r({},m),{table:function(_){var C=m.table(_),N=C.schema.primaryKey;return r(r({},C),{mutate:function(M){var z=Ze.trans,re=z.table(_).hook,le=re.deleting,me=re.creating,be=re.updating;switch(M.type){case"add":if(me.fire===Re)break;return z._promise("readwrite",function(){return ke(M)},!0);case"put":if(me.fire===Re&&be.fire===Re)break;return z._promise("readwrite",function(){return ke(M)},!0);case"delete":if(le.fire===Re)break;return z._promise("readwrite",function(){return ke(M)},!0);case"deleteRange":if(le.fire===Re)break;return z._promise("readwrite",function(){return function ce(je,ye,Ee){return C.query({trans:je,values:!1,query:{index:N,range:ye},limit:Ee}).then(function(Ce){var we=Ce.result;return ke({type:"delete",keys:we,trans:je}).then(function(Ie){return 0<Ie.numFailures?Promise.reject(Ie.failures[0]):we.length<Ee?{failures:[],numFailures:0,lastResult:void 0}:ce(je,r(r({},ye),{lower:we[we.length-1],lowerOpen:!0}),Ee)})})}(M.trans,M.range,1e4)},!0)}return C.mutate(M);function ke(ce){var je,ye,Ee,Ce=Ze.trans,we=ce.keys||i0(N,ce);if(!we)throw new Error("Keys missing");return(ce=ce.type==="add"||ce.type==="put"?r(r({},ce),{keys:we}):r({},ce)).type!=="delete"&&(ce.values=i([],ce.values)),ce.keys&&(ce.keys=i([],ce.keys)),je=C,Ee=we,((ye=ce).type==="add"?Promise.resolve([]):je.getMany({trans:ye.trans,keys:Ee,cache:"immutable"})).then(function(Ie){var Le=we.map(function(Be,Ke){var nt,ut,rt,at=Ie[Ke],pt={onerror:null,onsuccess:null};return ce.type==="delete"?le.fire.call(pt,Be,at,Ce):ce.type==="add"||at===void 0?(nt=me.fire.call(pt,Be,ce.values[Ke],Ce),Be==null&&nt!=null&&(ce.keys[Ke]=Be=nt,N.outbound||T(ce.values[Ke],N.keyPath,Be))):(nt=r0(at,ce.values[Ke]),(ut=be.fire.call(pt,nt,Be,at,Ce))&&(rt=ce.values[Ke],Object.keys(ut).forEach(function(lt){d(rt,lt)?rt[lt]=ut[lt]:T(rt,lt,ut[lt])}))),pt});return C.mutate(ce).then(function(Be){for(var Ke=Be.failures,nt=Be.results,ut=Be.numFailures,Be=Be.lastResult,rt=0;rt<we.length;++rt){var at=(nt||we)[rt],pt=Le[rt];at==null?pt.onerror&&pt.onerror(Ke[rt]):pt.onsuccess&&pt.onsuccess(ce.type==="put"&&Ie[rt]?ce.values[rt]:at)}return{failures:Ke,results:nt,numFailures:ut,lastResult:Be}}).catch(function(Be){return Le.forEach(function(Ke){return Ke.onerror&&Ke.onerror(Be)}),Promise.reject(Be)})})}}})}})}};function yS(m,_,C){try{if(!_||_.keys.length<m.length)return null;for(var N=[],M=0,z=0;M<_.keys.length&&z<m.length;++M)qt(_.keys[M],m[z])===0&&(N.push(C?H(_.values[M]):_.values[M]),++z);return N.length===m.length?N:null}catch(re){return null}}var J5={stack:"dbcore",level:-1,create:function(m){return{table:function(_){var C=m.table(_);return r(r({},C),{getMany:function(N){if(!N.cache)return C.getMany(N);var M=yS(N.keys,N.trans._cache,N.cache==="clone");return M?ot.resolve(M):C.getMany(N).then(function(z){return N.trans._cache={keys:N.keys,values:N.cache==="clone"?H(z):z},z})},mutate:function(N){return N.type!=="add"&&(N.trans._cache=null),C.mutate(N)}})}}}};function vS(m,_){return m.trans.mode==="readonly"&&!!m.subscr&&!m.trans.explicit&&m.trans.db._options.cache!=="disabled"&&!_.schema.primaryKey.outbound}function bS(m,_){switch(m){case"query":return _.values&&!_.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Q5={stack:"dbcore",level:0,name:"Observability",create:function(m){var _=m.schema.name,C=new Ar(m.MIN_KEY,m.MAX_KEY);return r(r({},m),{transaction:function(N,M,z){if(Ze.subscr&&M!=="readonly")throw new ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ze.querier));return m.transaction(N,M,z)},table:function(N){var M=m.table(N),z=M.schema,re=z.primaryKey,ce=z.indexes,le=re.extractKey,me=re.outbound,be=re.autoIncrement&&ce.filter(function(ye){return ye.compound&&ye.keyPath.includes(re.keyPath)}),ke=r(r({},M),{mutate:function(ye){function Ee(lt){return lt="idb://".concat(_,"/").concat(N,"/").concat(lt),Be[lt]||(Be[lt]=new Ar)}var Ce,we,Ie,Le=ye.trans,Be=ye.mutatedParts||(ye.mutatedParts={}),Ke=Ee(""),nt=Ee(":dels"),ut=ye.type,pt=ye.type==="deleteRange"?[ye.range]:ye.type==="delete"?[ye.keys]:ye.values.length<50?[i0(re,ye).filter(function(lt){return lt}),ye.values]:[],rt=pt[0],at=pt[1],pt=ye.trans._cache;return a(rt)?(Ke.addKeys(rt),(pt=ut==="delete"||rt.length===at.length?yS(rt,pt):null)||nt.addKeys(rt),(pt||at)&&(Ce=Ee,we=pt,Ie=at,z.indexes.forEach(function(lt){var _t=Ce(lt.name||"");function Bt(Gt){return Gt!=null?lt.extractKey(Gt):null}function Kt(Gt){return lt.multiEntry&&a(Gt)?Gt.forEach(function(ji){return _t.addKey(ji)}):_t.addKey(Gt)}(we||Ie).forEach(function(Gt,Rr){var Lt=we&&Bt(we[Rr]),Rr=Ie&&Bt(Ie[Rr]);qt(Lt,Rr)!==0&&(Lt!=null&&Kt(Lt),Rr!=null&&Kt(Rr))})}))):rt?(at={from:(at=rt.lower)!==null&&at!==void 0?at:m.MIN_KEY,to:(at=rt.upper)!==null&&at!==void 0?at:m.MAX_KEY},nt.add(at),Ke.add(at)):(Ke.add(C),nt.add(C),z.indexes.forEach(function(lt){return Ee(lt.name).add(C)})),M.mutate(ye).then(function(lt){return!rt||ye.type!=="add"&&ye.type!=="put"||(Ke.addKeys(lt.results),be&&be.forEach(function(_t){for(var Bt=ye.values.map(function(Lt){return _t.extractKey(Lt)}),Kt=_t.keyPath.findIndex(function(Lt){return Lt===re.keyPath}),Gt=0,ji=lt.results.length;Gt<ji;++Gt)Bt[Gt][Kt]=lt.results[Gt];Ee(_t.name).addKeys(Bt)})),Le.mutatedParts=Qh(Le.mutatedParts||{},Be),lt})}}),ce=function(Ee){var Ce=Ee.query,Ee=Ce.index,Ce=Ce.range;return[Ee,new Ar((Ee=Ce.lower)!==null&&Ee!==void 0?Ee:m.MIN_KEY,(Ce=Ce.upper)!==null&&Ce!==void 0?Ce:m.MAX_KEY)]},je={get:function(ye){return[re,new Ar(ye.key)]},getMany:function(ye){return[re,new Ar().addKeys(ye.keys)]},count:ce,query:ce,openCursor:ce};return s(je).forEach(function(ye){ke[ye]=function(Ee){var Ce=Ze.subscr,we=!!Ce,Ie=vS(Ze,M)&&bS(ye,Ee)?Ee.obsSet={}:Ce;if(we){var Le=function(at){return at="idb://".concat(_,"/").concat(N,"/").concat(at),Ie[at]||(Ie[at]=new Ar)},Be=Le(""),Ke=Le(":dels"),Ce=je[ye](Ee),we=Ce[0],Ce=Ce[1];if((ye==="query"&&we.isPrimaryKey&&!Ee.values?Ke:Le(we.name||"")).add(Ce),!we.isPrimaryKey){if(ye!=="count"){var nt=ye==="query"&&me&&Ee.values&&M.query(r(r({},Ee),{values:!1}));return M[ye].apply(this,arguments).then(function(at){if(ye==="query"){if(me&&Ee.values)return nt.then(function(Bt){return Bt=Bt.result,Be.addKeys(Bt),at});var pt=Ee.values?at.result.map(le):at.result;(Ee.values?Be:Ke).addKeys(pt)}else if(ye==="openCursor"){var lt=at,_t=Ee.values;return lt&&Object.create(lt,{key:{get:function(){return Ke.addKey(lt.primaryKey),lt.key}},primaryKey:{get:function(){var Bt=lt.primaryKey;return Ke.addKey(Bt),Bt}},value:{get:function(){return _t&&Be.addKey(lt.primaryKey),lt.value}}})}return at})}Ke.add(C)}}return M[ye].apply(this,arguments)}}),ke}})}};function wS(m,_,C){if(C.numFailures===0)return _;if(_.type==="deleteRange")return null;var N=_.keys?_.keys.length:"values"in _&&_.values?_.values.length:1;return C.numFailures===N?null:(_=r({},_),a(_.keys)&&(_.keys=_.keys.filter(function(M,z){return!(z in C.failures)})),"values"in _&&a(_.values)&&(_.values=_.values.filter(function(M,z){return!(z in C.failures)})),_)}function o0(m,_){return C=m,((N=_).lower===void 0||(N.lowerOpen?0<qt(C,N.lower):0<=qt(C,N.lower)))&&(m=m,(_=_).upper===void 0||(_.upperOpen?qt(m,_.upper)<0:qt(m,_.upper)<=0));var C,N}function xS(m,_,je,N,M,z){if(!je||je.length===0)return m;var re=_.query.index,le=re.multiEntry,me=_.query.range,be=N.schema.primaryKey.extractKey,ke=re.extractKey,ce=(re.lowLevelIndex||re).extractKey,je=je.reduce(function(ye,Ee){var Ce=ye,we=[];if(Ee.type==="add"||Ee.type==="put")for(var Ie=new Ar,Le=Ee.values.length-1;0<=Le;--Le){var Be,Ke=Ee.values[Le],nt=be(Ke);Ie.hasKey(nt)||(Be=ke(Ke),(le&&a(Be)?Be.some(function(lt){return o0(lt,me)}):o0(Be,me))&&(Ie.addKey(nt),we.push(Ke)))}switch(Ee.type){case"add":var ut=new Ar().addKeys(_.values?ye.map(function(_t){return be(_t)}):ye),Ce=ye.concat(_.values?we.filter(function(_t){return _t=be(_t),!ut.hasKey(_t)&&(ut.addKey(_t),!0)}):we.map(function(_t){return be(_t)}).filter(function(_t){return!ut.hasKey(_t)&&(ut.addKey(_t),!0)}));break;case"put":var rt=new Ar().addKeys(Ee.values.map(function(_t){return be(_t)}));Ce=ye.filter(function(_t){return!rt.hasKey(_.values?be(_t):_t)}).concat(_.values?we:we.map(function(_t){return be(_t)}));break;case"delete":var at=new Ar().addKeys(Ee.keys);Ce=ye.filter(function(_t){return!at.hasKey(_.values?be(_t):_t)});break;case"deleteRange":var pt=Ee.range;Ce=ye.filter(function(_t){return!o0(be(_t),pt)})}return Ce},m);return je===m?m:(je.sort(function(ye,Ee){return qt(ce(ye),ce(Ee))||qt(be(ye),be(Ee))}),_.limit&&_.limit<1/0&&(je.length>_.limit?je.length=_.limit:m.length===_.limit&&je.length<_.limit&&(M.dirty=!0)),z?Object.freeze(je):je)}function _S(m,_){return qt(m.lower,_.lower)===0&&qt(m.upper,_.upper)===0&&!!m.lowerOpen==!!_.lowerOpen&&!!m.upperOpen==!!_.upperOpen}function Z5(m,_){return function(C,N,M,z){if(C===void 0)return N!==void 0?-1:0;if(N===void 0)return 1;if((N=qt(C,N))===0){if(M&&z)return 0;if(M)return 1;if(z)return-1}return N}(m.lower,_.lower,m.lowerOpen,_.lowerOpen)<=0&&0<=function(C,N,M,z){if(C===void 0)return N!==void 0?1:0;if(N===void 0)return-1;if((N=qt(C,N))===0){if(M&&z)return 0;if(M)return-1;if(z)return 1}return N}(m.upper,_.upper,m.upperOpen,_.upperOpen)}function eM(m,_,C,N){m.subscribers.add(C),N.addEventListener("abort",function(){var M,z;m.subscribers.delete(C),m.subscribers.size===0&&(M=m,z=_,setTimeout(function(){M.subscribers.size===0&&O(z,M)},3e3))})}var tM={stack:"dbcore",level:0,name:"Cache",create:function(m){var _=m.schema.name;return r(r({},m),{transaction:function(C,N,M){var z,re,le=m.transaction(C,N,M);return N==="readwrite"&&(re=(z=new AbortController).signal,M=function(me){return function(){if(z.abort(),N==="readwrite"){for(var be=new Set,ke=0,ce=C;ke<ce.length;ke++){var je=ce[ke],ye=al["idb://".concat(_,"/").concat(je)];if(ye){var Ee=m.table(je),Ce=ye.optimisticOps.filter(function(_t){return _t.trans===le});if(le._explicit&&me&&le.mutatedParts)for(var we=0,Ie=Object.values(ye.queries.query);we<Ie.length;we++)for(var Le=0,Be=(ut=Ie[we]).slice();Le<Be.length;Le++)Qv((rt=Be[Le]).obsSet,le.mutatedParts)&&(O(ut,rt),rt.subscribers.forEach(function(_t){return be.add(_t)}));else if(0<Ce.length){ye.optimisticOps=ye.optimisticOps.filter(function(_t){return _t.trans!==le});for(var Ke=0,nt=Object.values(ye.queries.query);Ke<nt.length;Ke++)for(var ut,rt,at,pt=0,lt=(ut=nt[Ke]).slice();pt<lt.length;pt++)(rt=lt[pt]).res!=null&&le.mutatedParts&&(me&&!rt.dirty?(at=Object.isFrozen(rt.res),at=xS(rt.res,rt.req,Ce,Ee,rt,at),rt.dirty?(O(ut,rt),rt.subscribers.forEach(function(_t){return be.add(_t)})):at!==rt.res&&(rt.res=at,rt.promise=ot.resolve({result:at}))):(rt.dirty&&O(ut,rt),rt.subscribers.forEach(function(_t){return be.add(_t)})))}}}be.forEach(function(_t){return _t()})}}},le.addEventListener("abort",M(!1),{signal:re}),le.addEventListener("error",M(!1),{signal:re}),le.addEventListener("complete",M(!0),{signal:re})),le},table:function(C){var N=m.table(C),M=N.schema.primaryKey;return r(r({},N),{mutate:function(z){var re=Ze.trans;if(M.outbound||re.db._options.cache==="disabled"||re.explicit||re.idbtrans.mode!=="readwrite")return N.mutate(z);var le=al["idb://".concat(_,"/").concat(C)];return le?(re=N.mutate(z),z.type!=="add"&&z.type!=="put"||!(50<=z.values.length||i0(M,z).some(function(me){return me==null}))?(le.optimisticOps.push(z),z.mutatedParts&&Zh(z.mutatedParts),re.then(function(me){0<me.numFailures&&(O(le.optimisticOps,z),(me=wS(0,z,me))&&le.optimisticOps.push(me),z.mutatedParts&&Zh(z.mutatedParts))}),re.catch(function(){O(le.optimisticOps,z),z.mutatedParts&&Zh(z.mutatedParts)})):re.then(function(me){var be=wS(0,r(r({},z),{values:z.values.map(function(ke,ce){var je;return me.failures[ce]?ke:(ke=(je=M.keyPath)!==null&&je!==void 0&&je.includes(".")?H(ke):r({},ke),T(ke,M.keyPath,me.results[ce]),ke)})}),me);le.optimisticOps.push(be),queueMicrotask(function(){return z.mutatedParts&&Zh(z.mutatedParts)})}),re):N.mutate(z)},query:function(z){if(!vS(Ze,N)||!bS("query",z))return N.query(z);var re=((be=Ze.trans)===null||be===void 0?void 0:be.db._options.cache)==="immutable",ce=Ze,le=ce.requery,me=ce.signal,be=function(Ee,Ce,we,Ie){var Le=al["idb://".concat(Ee,"/").concat(Ce)];if(!Le)return[];if(!(Ce=Le.queries[we]))return[null,!1,Le,null];var Be=Ce[(Ie.query?Ie.query.index.name:null)||""];if(!Be)return[null,!1,Le,null];switch(we){case"query":var Ke=Be.find(function(nt){return nt.req.limit===Ie.limit&&nt.req.values===Ie.values&&_S(nt.req.query.range,Ie.query.range)});return Ke?[Ke,!0,Le,Be]:[Be.find(function(nt){return("limit"in nt.req?nt.req.limit:1/0)>=Ie.limit&&(!Ie.values||nt.req.values)&&Z5(nt.req.query.range,Ie.query.range)}),!1,Le,Be];case"count":return Ke=Be.find(function(nt){return _S(nt.req.query.range,Ie.query.range)}),[Ke,!!Ke,Le,Be]}}(_,C,"query",z),ke=be[0],ce=be[1],je=be[2],ye=be[3];return ke&&ce?ke.obsSet=z.obsSet:(ce=N.query(z).then(function(Ee){var Ce=Ee.result;if(ke&&(ke.res=Ce),re){for(var we=0,Ie=Ce.length;we<Ie;++we)Object.freeze(Ce[we]);Object.freeze(Ce)}else Ee.result=H(Ce);return Ee}).catch(function(Ee){return ye&&ke&&O(ye,ke),Promise.reject(Ee)}),ke={obsSet:z.obsSet,promise:ce,subscribers:new Set,type:"query",req:z,dirty:!1},ye?ye.push(ke):(ye=[ke],(je=je||(al["idb://".concat(_,"/").concat(C)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[z.query.index.name||""]=ye)),eM(ke,ye,le,me),ke.promise.then(function(Ee){return{result:xS(Ee.result,z,je==null?void 0:je.optimisticOps,N,ke,re)}})}})}})}};function tp(m,_){return new Proxy(m,{get:function(C,N,M){return N==="db"?_:Reflect.get(C,N,M)}})}var ys=(Hn.prototype.version=function(m){if(isNaN(m)||m<.1)throw new ie.Type("Given version is not a positive number");if(m=Math.round(10*m)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,m);var _=this._versions,C=_.filter(function(N){return N._cfg.version===m})[0];return C||(C=new this.Version(m),_.push(C),_.sort(W5),C.stores({}),this._state.autoSchema=!1,C)},Hn.prototype._whenReady=function(m){var _=this;return this.idbdb&&(this._state.openComplete||Ze.letThrough||this._vip)?m():new ot(function(C,N){if(_._state.openComplete)return N(new ie.DatabaseClosed(_._state.dbOpenError));if(!_._state.isBeingOpened){if(!_._state.autoOpen)return void N(new ie.DatabaseClosed);_.open().catch(Re)}_._state.dbReadyPromise.then(C,N)}).then(m)},Hn.prototype.use=function(m){var _=m.stack,C=m.create,N=m.level,M=m.name;return M&&this.unuse({stack:_,name:M}),m=this._middlewares[_]||(this._middlewares[_]=[]),m.push({stack:_,create:C,level:N==null?10:N,name:M}),m.sort(function(z,re){return z.level-re.level}),this},Hn.prototype.unuse=function(m){var _=m.stack,C=m.name,N=m.create;return _&&this._middlewares[_]&&(this._middlewares[_]=this._middlewares[_].filter(function(M){return N?M.create!==N:!!C&&M.name!==C})),this},Hn.prototype.open=function(){var m=this;return fo(Wt,function(){return G5(m)})},Hn.prototype._close=function(){var m=this._state,_=Xr.indexOf(this);if(0<=_&&Xr.splice(_,1),this.idbdb){try{this.idbdb.close()}catch(C){}this.idbdb=null}m.isBeingOpened||(m.dbReadyPromise=new ot(function(C){m.dbReadyResolve=C}),m.openCanceller=new ot(function(C,N){m.cancelOpen=N}))},Hn.prototype.close=function(C){var _=(C===void 0?{disableAutoOpen:!0}:C).disableAutoOpen,C=this._state;_?(C.isBeingOpened&&C.cancelOpen(new ie.DatabaseClosed),this._close(),C.autoOpen=!1,C.dbOpenError=new ie.DatabaseClosed):(this._close(),C.autoOpen=this._options.autoOpen||C.isBeingOpened,C.openComplete=!1,C.dbOpenError=null)},Hn.prototype.delete=function(m){var _=this;m===void 0&&(m={disableAutoOpen:!0});var C=0<arguments.length&&typeof arguments[0]!="object",N=this._state;return new ot(function(M,z){function re(){_.close(m);var le=_._deps.indexedDB.deleteDatabase(_.name);le.onsuccess=Dt(function(){var me,be,ke;me=_._deps,be=_.name,ke=me.indexedDB,me=me.IDBKeyRange,Yv(ke)||be===ra||Gv(ke,me).delete(be).catch(Re),M()}),le.onerror=Ho(z),le.onblocked=_._fireOnBlocked}if(C)throw new ie.InvalidArgument("Invalid closeOptions argument to db.delete()");N.isBeingOpened?N.dbReadyPromise.then(re):re()})},Hn.prototype.backendDB=function(){return this.idbdb},Hn.prototype.isOpen=function(){return this.idbdb!==null},Hn.prototype.hasBeenClosed=function(){var m=this._state.dbOpenError;return m&&m.name==="DatabaseClosed"},Hn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Hn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Hn.prototype,"tables",{get:function(){var m=this;return s(this._allTables).map(function(_){return m._allTables[_]})},enumerable:!1,configurable:!0}),Hn.prototype.transaction=function(){var m=(function(_,C,N){var M=arguments.length;if(M<2)throw new ie.InvalidArgument("Too few arguments");for(var z=new Array(M-1);--M;)z[M-1]=arguments[M];return N=z.pop(),[_,D(z),N]}).apply(this,arguments);return this._transaction.apply(this,m)},Hn.prototype._transaction=function(m,_,C){var N=this,M=Ze.trans;M&&M.db===this&&m.indexOf("!")===-1||(M=null);var z,re,le=m.indexOf("?")!==-1;m=m.replace("!","").replace("?","");try{if(re=_.map(function(be){if(be=be instanceof N.Table?be.name:be,typeof be!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return be}),m=="r"||m===Lo)z=Lo;else{if(m!="rw"&&m!=ms)throw new ie.InvalidArgument("Invalid transaction mode: "+m);z=ms}if(M){if(M.mode===Lo&&z===ms){if(!le)throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");M=null}M&&re.forEach(function(be){if(M&&M.storeNames.indexOf(be)===-1){if(!le)throw new ie.SubTransaction("Table "+be+" not included in parent transaction.");M=null}}),le&&M&&!M.active&&(M=null)}}catch(be){return M?M._promise(null,function(ke,ce){ce(be)}):hn(be)}var me=(function be(ke,ce,je,ye,Ee){return ot.resolve().then(function(){var Ce=Ze.transless||Ze,we=ke._createTransaction(ce,je,ke._dbSchema,ye);if(we.explicit=!0,Ce={trans:we,transless:Ce},ye)we.idbtrans=ye.idbtrans;else try{we.create(),we.idbtrans._explicit=!0,ke._state.PR1398_maxLoop=3}catch(Be){return Be.name===W.InvalidState&&ke.isOpen()&&0<--ke._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ke.close({disableAutoOpen:!1}),ke.open().then(function(){return be(ke,ce,je,null,Ee)})):hn(Be)}var Ie,Le=G(Ee);return Le&&Yr(),Ce=ot.follow(function(){var Be;(Ie=Ee.call(we,we))&&(Le?(Be=gr.bind(null,null),Ie.then(Be,Be)):typeof Ie.next=="function"&&typeof Ie.throw=="function"&&(Ie=n0(Ie)))},Ce),(Ie&&typeof Ie.then=="function"?ot.resolve(Ie).then(function(Be){return we.active?Be:hn(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ce.then(function(){return Ie})).then(function(Be){return ye&&we._resolve(),we._completion.then(function(){return Be})}).catch(function(Be){return we._reject(Be),hn(Be)})})}).bind(null,this,z,re,M,C);return M?M._promise(z,me,"lock"):Ze.trans?fo(Ze.transless,function(){return N._whenReady(me)}):this._whenReady(me)},Hn.prototype.table=function(m){if(!d(this._allTables,m))throw new ie.InvalidTable("Table ".concat(m," does not exist"));return this._allTables[m]},Hn);function Hn(m,_){var C=this;this._middlewares={},this.verno=0;var N=Hn.dependencies;this._options=_=r({addons:Hn.addons,autoOpen:!0,indexedDB:N.indexedDB,IDBKeyRange:N.IDBKeyRange,cache:"cloned"},_),this._deps={indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange},N=_.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var M,z,re,le,me,be={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Re,dbReadyPromise:null,cancelOpen:Re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:_.autoOpen};be.dbReadyPromise=new ot(function(ce){be.dbReadyResolve=ce}),be.openCanceller=new ot(function(ce,je){be.cancelOpen=je}),this._state=be,this.name=m,this.on=Se(this,"populate","blocked","versionchange","close",{ready:[Pe,Re]}),this.on.ready.subscribe=w(this.on.ready.subscribe,function(ce){return function(je,ye){Hn.vip(function(){var Ee,Ce=C._state;Ce.openComplete?(Ce.dbOpenError||ot.resolve().then(je),ye&&ce(je)):Ce.onReadyBeingFired?(Ce.onReadyBeingFired.push(je),ye&&ce(je)):(ce(je),Ee=C,ye||ce(function we(){Ee.on.ready.unsubscribe(je),Ee.on.ready.unsubscribe(we)}))})}}),this.Collection=(M=this,ge($n.prototype,function(Ie,we){this.db=M;var ye=mu,Ee=null;if(we)try{ye=we()}catch(Le){Ee=Le}var Ce=Ie._ctx,we=Ce.table,Ie=we.hook.reading.fire;this._ctx={table:we,index:Ce.index,isPrimKey:!Ce.index||we.schema.primKey.keyPath&&Ce.index===we.schema.primKey.name,range:ye,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Ee,or:Ce.or,valueMapper:Ie!==te?Ie:null}})),this.Table=(z=this,ge(ne.prototype,function(ce,je,ye){this.db=z,this._tx=ye,this.name=ce,this.schema=je,this.hook=z._allTables[ce]?z._allTables[ce].hook:Se(null,{creating:[We,Re],reading:[ae,te],updating:[Ue,Re],deleting:[Fe,Re]})})),this.Transaction=(re=this,ge(F5.prototype,function(ce,je,ye,Ee,Ce){var we=this;this.db=re,this.mode=ce,this.storeNames=je,this.schema=ye,this.chromeTransactionDurability=Ee,this.idbtrans=null,this.on=Se(this,"complete","error","abort"),this.parent=Ce||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ot(function(Ie,Le){we._resolve=Ie,we._reject=Le}),this._completion.then(function(){we.active=!1,we.on.complete.fire()},function(Ie){var Le=we.active;return we.active=!1,we.on.error.fire(Ie),we.parent?we.parent._reject(Ie):Le&&we.idbtrans&&we.idbtrans.abort(),hn(Ie)})})),this.Version=(le=this,ge(K5.prototype,function(ce){this.db=le,this._cfg={version:ce,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(me=this,ge(ed.prototype,function(ce,je,ye){if(this.db=me,this._ctx={table:ce,index:je===":id"?null:je,or:ye},this._cmp=this._ascending=qt,this._descending=function(Ee,Ce){return qt(Ce,Ee)},this._max=function(Ee,Ce){return 0<qt(Ee,Ce)?Ee:Ce},this._min=function(Ee,Ce){return qt(Ee,Ce)<0?Ee:Ce},this._IDBKeyRange=me._deps.IDBKeyRange,!this._IDBKeyRange)throw new ie.MissingAPI})),this.on("versionchange",function(ce){0<ce.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(ce){!ce.newVersion||ce.newVersion<ce.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(ce.oldVersion/10))}),this._maxKey=rd(_.IDBKeyRange),this._createTransaction=function(ce,je,ye,Ee){return new C.Transaction(ce,je,ye,C._options.chromeTransactionDurability,Ee)},this._fireOnBlocked=function(ce){C.on("blocked").fire(ce),Xr.filter(function(je){return je.name===C.name&&je!==C&&!je._state.vcFired}).map(function(je){return je.on("versionchange").fire(ce)})},this.use(J5),this.use(tM),this.use(Q5),this.use(Y5),this.use(X5);var ke=new Proxy(this,{get:function(ce,je,ye){if(je==="_vip")return!0;if(je==="table")return function(Ce){return tp(C.table(Ce),ke)};var Ee=Reflect.get(ce,je,ye);return Ee instanceof ne?tp(Ee,ke):je==="tables"?Ee.map(function(Ce){return tp(Ce,ke)}):je==="_createTransaction"?function(){return tp(Ee.apply(this,arguments),ke)}:Ee}});this.vip=ke,N.forEach(function(ce){return ce(C)})}var np,Ki=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",nM=(s0.prototype.subscribe=function(m,_,C){return this._subscribe(m&&typeof m!="function"?m:{next:m,error:_,complete:C})},s0.prototype[Ki]=function(){return this},s0);function s0(m){this._subscribe=m}try{np={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(m){np={indexedDB:null,IDBKeyRange:null}}function ES(m){var _,C=!1,N=new nM(function(M){var z=G(m),re,le=!1,me={},be={},ke={get closed(){return le},unsubscribe:function(){le||(le=!0,re&&re.abort(),ce&&ia.storagemutated.unsubscribe(ye))}};M.start&&M.start(ke);var ce=!1,je=function(){return il(Ee)},ye=function(Ce){Qh(me,Ce),Qv(be,me)&&je()},Ee=function(){var Ce,we,Ie;!le&&np.indexedDB&&(me={},Ce={},re&&re.abort(),re=new AbortController,Ie=function(Le){var Be=oe();try{z&&Yr();var Ke=Gr(m,Le);return Ke=z?Ke.finally(gr):Ke}finally{Be&&et()}}(we={subscr:Ce,signal:re.signal,requery:je,querier:m,trans:null}),Promise.resolve(Ie).then(function(Le){C=!0,_=Le,le||we.signal.aborted||(me={},function(Be){for(var Ke in Be)if(d(Be,Ke))return;return 1}(be=Ce)||ce||(ia(nd,ye),ce=!0),il(function(){return!le&&M.next&&M.next(Le)}))},function(Le){C=!1,["DatabaseClosedError","AbortError"].includes(Le==null?void 0:Le.name)||le||il(function(){le||M.error&&M.error(Le)})}))};return setTimeout(je,0),ke});return N.hasValue=function(){return C},N.getValue=function(){return _},N}var ll=ys;function a0(m){var _=oa;try{oa=!0,ia.storagemutated.fire(m),t0(m,!0)}finally{oa=_}}h(ll,r(r({},Me),{delete:function(m){return new ll(m,{addons:[]}).delete()},exists:function(m){return new ll(m,{addons:[]}).open().then(function(_){return _.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(m){try{return _=ll.dependencies,C=_.indexedDB,_=_.IDBKeyRange,(Yv(C)?Promise.resolve(C.databases()).then(function(N){return N.map(function(M){return M.name}).filter(function(M){return M!==ra})}):Gv(C,_).toCollection().primaryKeys()).then(m)}catch(N){return hn(new ie.MissingAPI)}var _,C},defineClass:function(){return function(m){l(this,m)}},ignoreTransaction:function(m){return Ze.trans?fo(Ze.transless,m):m()},vip:Xv,async:function(m){return function(){try{var _=n0(m.apply(this,arguments));return _&&typeof _.then=="function"?_:ot.resolve(_)}catch(C){return hn(C)}}},spawn:function(m,_,C){try{var N=n0(m.apply(C,_||[]));return N&&typeof N.then=="function"?N:ot.resolve(N)}catch(M){return hn(M)}},currentTransaction:{get:function(){return Ze.trans||null}},waitFor:function(m,_){return _=ot.resolve(typeof m=="function"?ll.ignoreTransaction(m):m).timeout(_||6e4),Ze.trans?Ze.trans.waitFor(_):_},Promise:ot,debug:{get:function(){return qe},set:function(m){xe(m)}},derive:g,extend:l,props:h,override:w,Events:Se,on:ia,liveQuery:ES,extendObservabilitySet:Qh,getByKeyPath:A,setByKeyPath:T,delByKeyPath:function(m,_){typeof _=="string"?T(m,_,void 0):"length"in _&&[].map.call(_,function(C){T(m,C,void 0)})},shallowClone:$,deepClone:H,getObjectDiff:r0,cmp:qt,asap:S,minKey:-1/0,addons:[],connections:Xr,errnames:W,dependencies:np,cache:al,semVer:"4.0.11",version:"4.0.11".split(".").map(function(m){return parseInt(m)}).reduce(function(m,_,C){return m+_/Math.pow(10,2*C)})})),ll.maxKey=rd(ll.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ia(nd,function(m){oa||(m=new CustomEvent(zv,{detail:m}),oa=!0,dispatchEvent(m),oa=!1)}),addEventListener(zv,function(m){m=m.detail,oa||a0(m)}));var vu,oa=!1,SS=function(){};return typeof BroadcastChannel<"u"&&((SS=function(){(vu=new BroadcastChannel(zv)).onmessage=function(m){return m.data&&a0(m.data)}})(),typeof vu.unref=="function"&&vu.unref(),ia(nd,function(m){oa||vu.postMessage(m)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(m){if(!ys.disableBfCache&&m.persisted){qe&&console.debug("Dexie: handling persisted pagehide"),vu!=null&&vu.close();for(var _=0,C=Xr;_<C.length;_++)C[_].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(m){!ys.disableBfCache&&m.persisted&&(qe&&console.debug("Dexie: handling persisted pageshow"),SS(),a0({all:new Ar(-1/0,[[]])}))})),ot.rejectionMapper=function(m,_){return!m||m instanceof se||m instanceof TypeError||m instanceof SyntaxError||!m.name||!Oe[m.name]?m:(_=new Oe[m.name](_||m.message,m),"stack"in m&&b(_,"stack",{get:function(){return this.inner.stack}}),_)},xe(qe),r(ys,Object.freeze({__proto__:null,Dexie:ys,liveQuery:ES,Entity:yu,cmp:qt,PropModification:Qt,replacePrefix:function(m,_){return new Qt({replacePrefix:[m,_]})},add:function(m){return new Qt({add:m})},remove:function(m){return new Qt({remove:m})},default:ys,RangeSet:Ar,mergeRanges:sd,rangesOverlap:hS}),{default:ys}),ys})})(_O);var PU=_O.exports;const wx=Xs(PU),GC=Symbol.for("Dexie"),hm=globalThis[GC]||(globalThis[GC]=wx);if(wx.semVer!==hm.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(wx.semVer," and ").concat(hm.semVer));const{liveQuery:OU,mergeRanges:Hce,rangesOverlap:Uce,RangeSet:Wce,cmp:Vce,Entity:qce,PropModification:Kce,replacePrefix:Gce,add:Yce,remove:Xce}=hm,kt=new hm("bardsballad");kt.version(1).stores({characters:"&local_id, updatedAt, id",systems:"&local_id, id",subscriptions:"&local_id, user_id, resource_id, version_id",versions:"&local_id, reference_id, id"});const yr=[];for(let e=0;e<256;++e)yr.push((e+256).toString(16).slice(1));function $U(e,t=0){return(yr[e[t+0]]+yr[e[t+1]]+yr[e[t+2]]+yr[e[t+3]]+"-"+yr[e[t+4]]+yr[e[t+5]]+"-"+yr[e[t+6]]+yr[e[t+7]]+"-"+yr[e[t+8]]+yr[e[t+9]]+"-"+yr[e[t+10]]+yr[e[t+11]]+yr[e[t+12]]+yr[e[t+13]]+yr[e[t+14]]+yr[e[t+15]]).toLowerCase()}let K0;const MU=new Uint8Array(16);function DU(){if(!K0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");K0=crypto.getRandomValues.bind(crypto)}return K0(MU)}const LU=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),YC={randomUUID:LU};function oE(e,t,n){var i,o,s;if(YC.randomUUID&&!e)return YC.randomUUID();e=e||{};const r=(s=(o=e.random)!=null?o:(i=e.rng)==null?void 0:i.call(e))!=null?s:DU();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,$U(r)}function Tp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var EO={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(u,c){if(!i[u]){if(!r[u]){var d=typeof Tp=="function"&&Tp;if(!c&&d)return d(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[u]={exports:{}};r[u][0].call(p.exports,function(b){var g=r[u][1][b];return s(g||b)},p,p.exports,n,r,i,o)}return i[u].exports}for(var a=typeof Tp=="function"&&Tp,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var l=0,u=new s(b),c=o.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var d=new o.MessageChannel;d.port1.onmessage=b,a=function(){d.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var x=o.document.createElement("script");x.onreadystatechange=function(){b(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},o.document.documentElement.appendChild(x)}:a=function(){setTimeout(b,0)};var h,p=[];function b(){h=!0;for(var x,y,v=p.length;v;){for(y=p,p=[],x=-1;++x<v;)y[x]();v=p.length}h=!1}r.exports=g;function g(x){p.push(x)===1&&!h&&a()}}).call(this,typeof Qi<"u"?Qi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=d;function d(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==s&&g(this,S)}d.prototype.catch=function(S){return this.then(null,S)},d.prototype.then=function(S,A){if(typeof S!="function"&&this.state===u||typeof A!="function"&&this.state===l)return this;var T=new this.constructor(s);if(this.state!==c){var $=this.state===u?S:A;p(T,$,this.outcome)}else this.queue.push(new h(T,S,A));return T};function h(S,A,T){this.promise=S,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},h.prototype.otherCallFulfilled=function(S){p(this.promise,this.onFulfilled,S)},h.prototype.callRejected=function(S){a.reject(this.promise,S)},h.prototype.otherCallRejected=function(S){p(this.promise,this.onRejected,S)};function p(S,A,T){o(function(){var $;try{$=A(T)}catch(q){return a.reject(S,q)}$===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,$)})}a.resolve=function(S,A){var T=x(b,A);if(T.status==="error")return a.reject(S,T.value);var $=T.value;if($)g(S,$);else{S.state=u,S.outcome=A;for(var q=-1,D=S.queue.length;++q<D;)S.queue[q].callFulfilled(A)}return S},a.reject=function(S,A){S.state=l,S.outcome=A;for(var T=-1,$=S.queue.length;++T<$;)S.queue[T].callRejected(A);return S};function b(S){var A=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof A=="function")return function(){A.apply(S,arguments)}}function g(S,A){var T=!1;function $(J){T||(T=!0,a.reject(S,J))}function q(J){T||(T=!0,a.resolve(S,J))}function D(){A(q,$)}var U=x(D);U.status==="error"&&$(U.value)}function x(S,A){var T={};try{T.value=S(A),T.status="success"}catch($){T.status="error",T.value=$}return T}d.resolve=y;function y(S){return S instanceof this?S:a.resolve(new this(s),S)}d.reject=v;function v(S){var A=new this(s);return a.reject(A,S)}d.all=w;function w(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=S.length,$=!1;if(!T)return this.resolve([]);for(var q=new Array(T),D=0,U=-1,J=new this(s);++U<T;)H(S[U],U);return J;function H(I,F){A.resolve(I).then(K,function(X){$||($=!0,a.reject(J,X))});function K(X){q[F]=X,++D===T&&!$&&($=!0,a.resolve(J,q))}}}d.race=E;function E(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=S.length,$=!1;if(!T)return this.resolve([]);for(var q=-1,D=new this(s);++q<T;)U(S[q]);return D;function U(J){A.resolve(J).then(function(H){$||($=!0,a.resolve(D,H))},function(H){$||($=!0,a.reject(D,H))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof Qi<"u"?Qi:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V};function s(V,fe){if(!(V instanceof fe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(V){return}}var l=a();function u(){try{if(!l||!l.open)return!1;var V=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),fe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!V||fe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(ne){return!1}}function c(V,fe){V=V||[],fe=fe||{};try{return new Blob(V,fe)}catch(ge){if(ge.name!=="TypeError")throw ge;for(var ne=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,he=new ne,Se=0;Se<V.length;Se+=1)he.append(V[Se]);return he.getBlob(fe.type)}}typeof Promise>"u"&&n(3);var d=Promise;function h(V,fe){fe&&V.then(function(ne){fe(null,ne)},function(ne){fe(ne)})}function p(V,fe,ne){typeof fe=="function"&&V.then(fe),typeof ne=="function"&&V.catch(ne)}function b(V){return typeof V!="string"&&(console.warn(V+" used as a key, but it is not a string."),V=String(V)),V}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",y=void 0,v={},w=Object.prototype.toString,E="readonly",S="readwrite";function A(V){for(var fe=V.length,ne=new ArrayBuffer(fe),he=new Uint8Array(ne),Se=0;Se<fe;Se++)he[Se]=V.charCodeAt(Se);return ne}function T(V){return new d(function(fe){var ne=V.transaction(x,S),he=c([""]);ne.objectStore(x).put(he,"key"),ne.onabort=function(Se){Se.preventDefault(),Se.stopPropagation(),fe(!1)},ne.oncomplete=function(){var Se=navigator.userAgent.match(/Chrome\/(\d+)/),ge=navigator.userAgent.match(/Edge\//);fe(ge||!Se||parseInt(Se[1],10)>=43)}}).catch(function(){return!1})}function $(V){return typeof y=="boolean"?d.resolve(y):T(V).then(function(fe){return y=fe,y})}function q(V){var fe=v[V.name],ne={};ne.promise=new d(function(he,Se){ne.resolve=he,ne.reject=Se}),fe.deferredOperations.push(ne),fe.dbReady?fe.dbReady=fe.dbReady.then(function(){return ne.promise}):fe.dbReady=ne.promise}function D(V){var fe=v[V.name],ne=fe.deferredOperations.pop();if(ne)return ne.resolve(),ne.promise}function U(V,fe){var ne=v[V.name],he=ne.deferredOperations.pop();if(he)return he.reject(fe),he.promise}function J(V,fe){return new d(function(ne,he){if(v[V.name]=v[V.name]||Q(),V.db)if(fe)q(V),V.db.close();else return ne(V.db);var Se=[V.name];fe&&Se.push(V.version);var ge=l.open.apply(l,Se);fe&&(ge.onupgradeneeded=function(Ve){var Ye=ge.result;try{Ye.createObjectStore(V.storeName),Ve.oldVersion<=1&&Ye.createObjectStore(x)}catch(Je){if(Je.name==="ConstraintError")console.warn('The database "'+V.name+'" has been upgraded from version '+Ve.oldVersion+" to version "+Ve.newVersion+', but the storage "'+V.storeName+'" already exists.');else throw Je}}),ge.onerror=function(Ve){Ve.preventDefault(),he(ge.error)},ge.onsuccess=function(){var Ve=ge.result;Ve.onversionchange=function(Ye){Ye.target.close()},ne(Ve),D(V)}})}function H(V){return J(V,!1)}function I(V){return J(V,!0)}function F(V,fe){if(!V.db)return!0;var ne=!V.db.objectStoreNames.contains(V.storeName),he=V.version<V.db.version,Se=V.version>V.db.version;if(he&&(V.version!==fe&&console.warn('The database "'+V.name+"\" can't be downgraded from version "+V.db.version+" to version "+V.version+"."),V.version=V.db.version),Se||ne){if(ne){var ge=V.db.version+1;ge>V.version&&(V.version=ge)}return!0}return!1}function K(V){return new d(function(fe,ne){var he=new FileReader;he.onerror=ne,he.onloadend=function(Se){var ge=btoa(Se.target.result||"");fe({__local_forage_encoded_blob:!0,data:ge,type:V.type})},he.readAsBinaryString(V)})}function X(V){var fe=A(atob(V.data));return c([fe],{type:V.type})}function O(V){return V&&V.__local_forage_encoded_blob}function B(V){var fe=this,ne=fe._initReady().then(function(){var he=v[fe._dbInfo.name];if(he&&he.dbReady)return he.dbReady});return p(ne,V,V),ne}function P(V){q(V);for(var fe=v[V.name],ne=fe.forages,he=0;he<ne.length;he++){var Se=ne[he];Se._dbInfo.db&&(Se._dbInfo.db.close(),Se._dbInfo.db=null)}return V.db=null,H(V).then(function(ge){return V.db=ge,F(V)?I(V):ge}).then(function(ge){V.db=fe.db=ge;for(var Ve=0;Ve<ne.length;Ve++)ne[Ve]._dbInfo.db=ge}).catch(function(ge){throw U(V,ge),ge})}function G(V,fe,ne,he){he===void 0&&(he=1);try{var Se=V.db.transaction(V.storeName,fe);ne(null,Se)}catch(ge){if(he>0&&(!V.db||ge.name==="InvalidStateError"||ge.name==="NotFoundError"))return d.resolve().then(function(){if(!V.db||ge.name==="NotFoundError"&&!V.db.objectStoreNames.contains(V.storeName)&&V.version<=V.db.version)return V.db&&(V.version=V.db.version+1),I(V)}).then(function(){return P(V).then(function(){G(V,fe,ne,he-1)})}).catch(ne);ne(ge)}}function Q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function se(V){var fe=this,ne={db:null};if(V)for(var he in V)ne[he]=V[he];var Se=v[ne.name];Se||(Se=Q(),v[ne.name]=Se),Se.forages.push(fe),fe._initReady||(fe._initReady=fe.ready,fe.ready=B);var ge=[];function Ve(){return d.resolve()}for(var Ye=0;Ye<Se.forages.length;Ye++){var Je=Se.forages[Ye];Je!==fe&&ge.push(Je._initReady().catch(Ve))}var Xe=Se.forages.slice(0);return d.all(ge).then(function(){return ne.db=Se.db,H(ne)}).then(function(st){return ne.db=st,F(ne,fe._defaultConfig.version)?I(ne):st}).then(function(st){ne.db=Se.db=st,fe._dbInfo=ne;for(var St=0;St<Xe.length;St++){var Ht=Xe[St];Ht!==fe&&(Ht._dbInfo.db=ne.db,Ht._dbInfo.version=ne.version)}})}function _e(V,fe){var ne=this;V=b(V);var he=new d(function(Se,ge){ne.ready().then(function(){G(ne._dbInfo,E,function(Ve,Ye){if(Ve)return ge(Ve);try{var Je=Ye.objectStore(ne._dbInfo.storeName),Xe=Je.get(V);Xe.onsuccess=function(){var st=Xe.result;st===void 0&&(st=null),O(st)&&(st=X(st)),Se(st)},Xe.onerror=function(){ge(Xe.error)}}catch(st){ge(st)}})}).catch(ge)});return h(he,fe),he}function Ne(V,fe){var ne=this,he=new d(function(Se,ge){ne.ready().then(function(){G(ne._dbInfo,E,function(Ve,Ye){if(Ve)return ge(Ve);try{var Je=Ye.objectStore(ne._dbInfo.storeName),Xe=Je.openCursor(),st=1;Xe.onsuccess=function(){var St=Xe.result;if(St){var Ht=St.value;O(Ht)&&(Ht=X(Ht));var Qt=V(Ht,St.key,st++);Qt!==void 0?Se(Qt):St.continue()}else Se()},Xe.onerror=function(){ge(Xe.error)}}catch(St){ge(St)}})}).catch(ge)});return h(he,fe),he}function Te(V,fe,ne){var he=this;V=b(V);var Se=new d(function(ge,Ve){var Ye;he.ready().then(function(){return Ye=he._dbInfo,w.call(fe)==="[object Blob]"?$(Ye.db).then(function(Je){return Je?fe:K(fe)}):fe}).then(function(Je){G(he._dbInfo,S,function(Xe,st){if(Xe)return Ve(Xe);try{var St=st.objectStore(he._dbInfo.storeName);Je===null&&(Je=void 0);var Ht=St.put(Je,V);st.oncomplete=function(){Je===void 0&&(Je=null),ge(Je)},st.onabort=st.onerror=function(){var Qt=Ht.error?Ht.error:Ht.transaction.error;Ve(Qt)}}catch(Qt){Ve(Qt)}})}).catch(Ve)});return h(Se,ne),Se}function W(V,fe){var ne=this;V=b(V);var he=new d(function(Se,ge){ne.ready().then(function(){G(ne._dbInfo,S,function(Ve,Ye){if(Ve)return ge(Ve);try{var Je=Ye.objectStore(ne._dbInfo.storeName),Xe=Je.delete(V);Ye.oncomplete=function(){Se()},Ye.onerror=function(){ge(Xe.error)},Ye.onabort=function(){var st=Xe.error?Xe.error:Xe.transaction.error;ge(st)}}catch(st){ge(st)}})}).catch(ge)});return h(he,fe),he}function Y(V){var fe=this,ne=new d(function(he,Se){fe.ready().then(function(){G(fe._dbInfo,S,function(ge,Ve){if(ge)return Se(ge);try{var Ye=Ve.objectStore(fe._dbInfo.storeName),Je=Ye.clear();Ve.oncomplete=function(){he()},Ve.onabort=Ve.onerror=function(){var Xe=Je.error?Je.error:Je.transaction.error;Se(Xe)}}catch(Xe){Se(Xe)}})}).catch(Se)});return h(ne,V),ne}function ie(V){var fe=this,ne=new d(function(he,Se){fe.ready().then(function(){G(fe._dbInfo,E,function(ge,Ve){if(ge)return Se(ge);try{var Ye=Ve.objectStore(fe._dbInfo.storeName),Je=Ye.count();Je.onsuccess=function(){he(Je.result)},Je.onerror=function(){Se(Je.error)}}catch(Xe){Se(Xe)}})}).catch(Se)});return h(ne,V),ne}function Oe(V,fe){var ne=this,he=new d(function(Se,ge){if(V<0){Se(null);return}ne.ready().then(function(){G(ne._dbInfo,E,function(Ve,Ye){if(Ve)return ge(Ve);try{var Je=Ye.objectStore(ne._dbInfo.storeName),Xe=!1,st=Je.openKeyCursor();st.onsuccess=function(){var St=st.result;if(!St){Se(null);return}V===0||Xe?Se(St.key):(Xe=!0,St.advance(V))},st.onerror=function(){ge(st.error)}}catch(St){ge(St)}})}).catch(ge)});return h(he,fe),he}function Me(V){var fe=this,ne=new d(function(he,Se){fe.ready().then(function(){G(fe._dbInfo,E,function(ge,Ve){if(ge)return Se(ge);try{var Ye=Ve.objectStore(fe._dbInfo.storeName),Je=Ye.openKeyCursor(),Xe=[];Je.onsuccess=function(){var st=Je.result;if(!st){he(Xe);return}Xe.push(st.key),st.continue()},Je.onerror=function(){Se(Je.error)}}catch(st){Se(st)}})}).catch(Se)});return h(ne,V),ne}function Re(V,fe){fe=g.apply(this,arguments);var ne=this.config();V=typeof V!="function"&&V||{},V.name||(V.name=V.name||ne.name,V.storeName=V.storeName||ne.storeName);var he=this,Se;if(!V.name)Se=d.reject("Invalid arguments");else{var ge=V.name===ne.name&&he._dbInfo.db,Ve=ge?d.resolve(he._dbInfo.db):H(V).then(function(Ye){var Je=v[V.name],Xe=Je.forages;Je.db=Ye;for(var st=0;st<Xe.length;st++)Xe[st]._dbInfo.db=Ye;return Ye});V.storeName?Se=Ve.then(function(Ye){if(Ye.objectStoreNames.contains(V.storeName)){var Je=Ye.version+1;q(V);var Xe=v[V.name],st=Xe.forages;Ye.close();for(var St=0;St<st.length;St++){var Ht=st[St];Ht._dbInfo.db=null,Ht._dbInfo.version=Je}var Qt=new d(function(on,$n){var Nt=l.open(V.name,Je);Nt.onerror=function(jr){var sl=Nt.result;sl.close(),$n(jr)},Nt.onupgradeneeded=function(){var jr=Nt.result;jr.deleteObjectStore(V.storeName)},Nt.onsuccess=function(){var jr=Nt.result;jr.close(),on(jr)}});return Qt.then(function(on){Xe.db=on;for(var $n=0;$n<st.length;$n++){var Nt=st[$n];Nt._dbInfo.db=on,D(Nt._dbInfo)}}).catch(function(on){throw(U(V,on)||d.resolve()).catch(function(){}),on})}}):Se=Ve.then(function(Ye){q(V);var Je=v[V.name],Xe=Je.forages;Ye.close();for(var st=0;st<Xe.length;st++){var St=Xe[st];St._dbInfo.db=null}var Ht=new d(function(Qt,on){var $n=l.deleteDatabase(V.name);$n.onerror=function(){var Nt=$n.result;Nt&&Nt.close(),on($n.error)},$n.onblocked=function(){console.warn('dropInstance blocked for database "'+V.name+'" until all open connections are closed')},$n.onsuccess=function(){var Nt=$n.result;Nt&&Nt.close(),Qt(Nt)}});return Ht.then(function(Qt){Je.db=Qt;for(var on=0;on<Xe.length;on++){var $n=Xe[on];D($n._dbInfo)}}).catch(function(Qt){throw(U(V,Qt)||d.resolve()).catch(function(){}),Qt})})}return h(Se,fe),Se}var te={_driver:"asyncStorage",_initStorage:se,_support:u(),iterate:Ne,getItem:_e,setItem:Te,removeItem:W,clear:Y,length:ie,key:Oe,keys:Me,dropInstance:Re};function ae(){return typeof openDatabase=="function"}var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",We="~~local_forage_type~",Fe=/^~~local_forage_type~([^~]+)~/,Ue="__lfsc__:",ue=Ue.length,Pe="arbf",qe="blob",xe="si08",dt="ui08",gt="uic8",ft="si16",At="si32",L="ur16",j="ui32",R="fl32",Z="fl64",de=ue+Pe.length,Ae=Object.prototype.toString;function He(V){var fe=V.length*.75,ne=V.length,he,Se=0,ge,Ve,Ye,Je;V[V.length-1]==="="&&(fe--,V[V.length-2]==="="&&fe--);var Xe=new ArrayBuffer(fe),st=new Uint8Array(Xe);for(he=0;he<ne;he+=4)ge=pe.indexOf(V[he]),Ve=pe.indexOf(V[he+1]),Ye=pe.indexOf(V[he+2]),Je=pe.indexOf(V[he+3]),st[Se++]=ge<<2|Ve>>4,st[Se++]=(Ve&15)<<4|Ye>>2,st[Se++]=(Ye&3)<<6|Je&63;return Xe}function Tt(V){var fe=new Uint8Array(V),ne="",he;for(he=0;he<fe.length;he+=3)ne+=pe[fe[he]>>2],ne+=pe[(fe[he]&3)<<4|fe[he+1]>>4],ne+=pe[(fe[he+1]&15)<<2|fe[he+2]>>6],ne+=pe[fe[he+2]&63];return fe.length%3===2?ne=ne.substring(0,ne.length-1)+"=":fe.length%3===1&&(ne=ne.substring(0,ne.length-2)+"=="),ne}function Wt(V,fe){var ne="";if(V&&(ne=Ae.call(V)),V&&(ne==="[object ArrayBuffer]"||V.buffer&&Ae.call(V.buffer)==="[object ArrayBuffer]")){var he,Se=Ue;V instanceof ArrayBuffer?(he=V,Se+=Pe):(he=V.buffer,ne==="[object Int8Array]"?Se+=xe:ne==="[object Uint8Array]"?Se+=dt:ne==="[object Uint8ClampedArray]"?Se+=gt:ne==="[object Int16Array]"?Se+=ft:ne==="[object Uint16Array]"?Se+=L:ne==="[object Int32Array]"?Se+=At:ne==="[object Uint32Array]"?Se+=j:ne==="[object Float32Array]"?Se+=R:ne==="[object Float64Array]"?Se+=Z:fe(new Error("Failed to get type for BinaryArray"))),fe(Se+Tt(he))}else if(ne==="[object Blob]"){var ge=new FileReader;ge.onload=function(){var Ve=We+V.type+"~"+Tt(this.result);fe(Ue+qe+Ve)},ge.readAsArrayBuffer(V)}else try{fe(JSON.stringify(V))}catch(Ve){console.error("Couldn't convert value into a JSON string: ",V),fe(null,Ve)}}function Ze(V){if(V.substring(0,ue)!==Ue)return JSON.parse(V);var fe=V.substring(de),ne=V.substring(ue,de),he;if(ne===qe&&Fe.test(fe)){var Se=fe.match(Fe);he=Se[1],fe=fe.substring(Se[0].length)}var ge=He(fe);switch(ne){case Pe:return ge;case qe:return c([ge],{type:he});case xe:return new Int8Array(ge);case dt:return new Uint8Array(ge);case gt:return new Uint8ClampedArray(ge);case ft:return new Int16Array(ge);case L:return new Uint16Array(ge);case At:return new Int32Array(ge);case j:return new Uint32Array(ge);case R:return new Float32Array(ge);case Z:return new Float64Array(ge);default:throw new Error("Unkown type: "+ne)}}var Mt={serialize:Wt,deserialize:Ze,stringToBuffer:He,bufferToString:Tt};function Pt(V,fe,ne,he){V.executeSql("CREATE TABLE IF NOT EXISTS "+fe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ne,he)}function Si(V){var fe=this,ne={db:null};if(V)for(var he in V)ne[he]=typeof V[he]!="string"?V[he].toString():V[he];var Se=new d(function(ge,Ve){try{ne.db=openDatabase(ne.name,String(ne.version),ne.description,ne.size)}catch(Ye){return Ve(Ye)}ne.db.transaction(function(Ye){Pt(Ye,ne,function(){fe._dbInfo=ne,ge()},function(Je,Xe){Ve(Xe)})},Ve)});return ne.serializer=Mt,Se}function ot(V,fe,ne,he,Se,ge){V.executeSql(ne,he,Se,function(Ve,Ye){Ye.code===Ye.SYNTAX_ERR?Ve.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[fe.storeName],function(Je,Xe){Xe.rows.length?ge(Je,Ye):Pt(Je,fe,function(){Je.executeSql(ne,he,Se,ge)},ge)},ge):ge(Ve,Ye)},ge)}function ki(V,fe){var ne=this;V=b(V);var he=new d(function(Se,ge){ne.ready().then(function(){var Ve=ne._dbInfo;Ve.db.transaction(function(Ye){ot(Ye,Ve,"SELECT * FROM "+Ve.storeName+" WHERE key = ? LIMIT 1",[V],function(Je,Xe){var st=Xe.rows.length?Xe.rows.item(0).value:null;st&&(st=Ve.serializer.deserialize(st)),Se(st)},function(Je,Xe){ge(Xe)})})}).catch(ge)});return h(he,fe),he}function $o(V,fe){var ne=this,he=new d(function(Se,ge){ne.ready().then(function(){var Ve=ne._dbInfo;Ve.db.transaction(function(Ye){ot(Ye,Ve,"SELECT * FROM "+Ve.storeName,[],function(Je,Xe){for(var st=Xe.rows,St=st.length,Ht=0;Ht<St;Ht++){var Qt=st.item(Ht),on=Qt.value;if(on&&(on=Ve.serializer.deserialize(on)),on=V(on,Qt.key,Ht+1),on!==void 0){Se(on);return}}Se()},function(Je,Xe){ge(Xe)})})}).catch(ge)});return h(he,fe),he}function Mo(V,fe,ne,he){var Se=this;V=b(V);var ge=new d(function(Ve,Ye){Se.ready().then(function(){fe===void 0&&(fe=null);var Je=fe,Xe=Se._dbInfo;Xe.serializer.serialize(fe,function(st,St){St?Ye(St):Xe.db.transaction(function(Ht){ot(Ht,Xe,"INSERT OR REPLACE INTO "+Xe.storeName+" (key, value) VALUES (?, ?)",[V,st],function(){Ve(Je)},function(Qt,on){Ye(on)})},function(Ht){if(Ht.code===Ht.QUOTA_ERR){if(he>0){Ve(Mo.apply(Se,[V,Je,ne,he-1]));return}Ye(Ht)}})})}).catch(Ye)});return h(ge,ne),ge}function ps(V,fe,ne){return Mo.apply(this,[V,fe,ne,1])}function lo(V,fe){var ne=this;V=b(V);var he=new d(function(Se,ge){ne.ready().then(function(){var Ve=ne._dbInfo;Ve.db.transaction(function(Ye){ot(Ye,Ve,"DELETE FROM "+Ve.storeName+" WHERE key = ?",[V],function(){Se()},function(Je,Xe){ge(Xe)})})}).catch(ge)});return h(he,fe),he}function ta(V){var fe=this,ne=new d(function(he,Se){fe.ready().then(function(){var ge=fe._dbInfo;ge.db.transaction(function(Ve){ot(Ve,ge,"DELETE FROM "+ge.storeName,[],function(){he()},function(Ye,Je){Se(Je)})})}).catch(Se)});return h(ne,V),ne}function ee(V){var fe=this,ne=new d(function(he,Se){fe.ready().then(function(){var ge=fe._dbInfo;ge.db.transaction(function(Ve){ot(Ve,ge,"SELECT COUNT(key) as c FROM "+ge.storeName,[],function(Ye,Je){var Xe=Je.rows.item(0).c;he(Xe)},function(Ye,Je){Se(Je)})})}).catch(Se)});return h(ne,V),ne}function oe(V,fe){var ne=this,he=new d(function(Se,ge){ne.ready().then(function(){var Ve=ne._dbInfo;Ve.db.transaction(function(Ye){ot(Ye,Ve,"SELECT key FROM "+Ve.storeName+" WHERE id = ? LIMIT 1",[V+1],function(Je,Xe){var st=Xe.rows.length?Xe.rows.item(0).key:null;Se(st)},function(Je,Xe){ge(Xe)})})}).catch(ge)});return h(he,fe),he}function et(V){var fe=this,ne=new d(function(he,Se){fe.ready().then(function(){var ge=fe._dbInfo;ge.db.transaction(function(Ve){ot(Ve,ge,"SELECT key FROM "+ge.storeName,[],function(Ye,Je){for(var Xe=[],st=0;st<Je.rows.length;st++)Xe.push(Je.rows.item(st).key);he(Xe)},function(Ye,Je){Se(Je)})})}).catch(Se)});return h(ne,V),ne}function it(V){return new d(function(fe,ne){V.transaction(function(he){he.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Se,ge){for(var Ve=[],Ye=0;Ye<ge.rows.length;Ye++)Ve.push(ge.rows.item(Ye).name);fe({db:V,storeNames:Ve})},function(Se,ge){ne(ge)})},function(he){ne(he)})})}function vt(V,fe){fe=g.apply(this,arguments);var ne=this.config();V=typeof V!="function"&&V||{},V.name||(V.name=V.name||ne.name,V.storeName=V.storeName||ne.storeName);var he=this,Se;return V.name?Se=new d(function(ge){var Ve;V.name===ne.name?Ve=he._dbInfo.db:Ve=openDatabase(V.name,"","",0),V.storeName?ge({db:Ve,storeNames:[V.storeName]}):ge(it(Ve))}).then(function(ge){return new d(function(Ve,Ye){ge.db.transaction(function(Je){function Xe(Qt){return new d(function(on,$n){Je.executeSql("DROP TABLE IF EXISTS "+Qt,[],function(){on()},function(Nt,jr){$n(jr)})})}for(var st=[],St=0,Ht=ge.storeNames.length;St<Ht;St++)st.push(Xe(ge.storeNames[St]));d.all(st).then(function(){Ve()}).catch(function(Qt){Ye(Qt)})},function(Je){Ye(Je)})})}):Se=d.reject("Invalid arguments"),h(Se,fe),Se}var Dt={_driver:"webSQLStorage",_initStorage:Si,_support:ae(),iterate:$o,getItem:ki,setItem:ps,removeItem:lo,clear:ta,length:ee,key:oe,keys:et,dropInstance:vt};function Zt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(V){return!1}}function gs(V,fe){var ne=V.name+"/";return V.storeName!==fe.storeName&&(ne+=V.storeName+"/"),ne}function kr(){var V="_localforage_support_test";try{return localStorage.setItem(V,!0),localStorage.removeItem(V),!1}catch(fe){return!0}}function uo(){return!kr()||localStorage.length>0}function Do(V){var fe=this,ne={};if(V)for(var he in V)ne[he]=V[he];return ne.keyPrefix=gs(V,fe._defaultConfig),uo()?(fe._dbInfo=ne,ne.serializer=Mt,d.resolve()):d.reject()}function na(V){var fe=this,ne=fe.ready().then(function(){for(var he=fe._dbInfo.keyPrefix,Se=localStorage.length-1;Se>=0;Se--){var ge=localStorage.key(Se);ge.indexOf(he)===0&&localStorage.removeItem(ge)}});return h(ne,V),ne}function Gr(V,fe){var ne=this;V=b(V);var he=ne.ready().then(function(){var Se=ne._dbInfo,ge=localStorage.getItem(Se.keyPrefix+V);return ge&&(ge=Se.serializer.deserialize(ge)),ge});return h(he,fe),he}function Yr(V,fe){var ne=this,he=ne.ready().then(function(){for(var Se=ne._dbInfo,ge=Se.keyPrefix,Ve=ge.length,Ye=localStorage.length,Je=1,Xe=0;Xe<Ye;Xe++){var st=localStorage.key(Xe);if(st.indexOf(ge)===0){var St=localStorage.getItem(st);if(St&&(St=Se.serializer.deserialize(St)),St=V(St,st.substring(Ve),Je++),St!==void 0)return St}}});return h(he,fe),he}function gr(V,fe){var ne=this,he=ne.ready().then(function(){var Se=ne._dbInfo,ge;try{ge=localStorage.key(V)}catch(Ve){ge=null}return ge&&(ge=ge.substring(Se.keyPrefix.length)),ge});return h(he,fe),he}function Ci(V){var fe=this,ne=fe.ready().then(function(){for(var he=fe._dbInfo,Se=localStorage.length,ge=[],Ve=0;Ve<Se;Ve++){var Ye=localStorage.key(Ve);Ye.indexOf(he.keyPrefix)===0&&ge.push(Ye.substring(he.keyPrefix.length))}return ge});return h(ne,V),ne}function co(V){var fe=this,ne=fe.keys().then(function(he){return he.length});return h(ne,V),ne}function qn(V,fe){var ne=this;V=b(V);var he=ne.ready().then(function(){var Se=ne._dbInfo;localStorage.removeItem(Se.keyPrefix+V)});return h(he,fe),he}function Cr(V,fe,ne){var he=this;V=b(V);var Se=he.ready().then(function(){fe===void 0&&(fe=null);var ge=fe;return new d(function(Ve,Ye){var Je=he._dbInfo;Je.serializer.serialize(fe,function(Xe,st){if(st)Ye(st);else try{localStorage.setItem(Je.keyPrefix+V,Xe),Ve(ge)}catch(St){(St.name==="QuotaExceededError"||St.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ye(St),Ye(St)}})})});return h(Se,ne),Se}function fo(V,fe){if(fe=g.apply(this,arguments),V=typeof V!="function"&&V||{},!V.name){var ne=this.config();V.name=V.name||ne.name,V.storeName=V.storeName||ne.storeName}var he=this,Se;return V.name?Se=new d(function(ge){V.storeName?ge(gs(V,he._defaultConfig)):ge(V.name+"/")}).then(function(ge){for(var Ve=localStorage.length-1;Ve>=0;Ve--){var Ye=localStorage.key(Ve);Ye.indexOf(ge)===0&&localStorage.removeItem(Ye)}}):Se=d.reject("Invalid arguments"),h(Se,fe),Se}var gu={_driver:"localStorageWrapper",_initStorage:Do,_support:Zt(),iterate:Yr,getItem:Gr,setItem:Cr,removeItem:qn,clear:na,length:co,key:gr,keys:Ci,dropInstance:fo},il=function(fe,ne){return fe===ne||typeof fe=="number"&&typeof ne=="number"&&isNaN(fe)&&isNaN(ne)},hn=function(fe,ne){for(var he=fe.length,Se=0;Se<he;){if(il(fe[Se],ne))return!0;Se++}return!1},Vi=Array.isArray||function(V){return Object.prototype.toString.call(V)==="[object Array]"},mr={},ol={},Xr={INDEXEDDB:te,WEBSQL:Dt,LOCALSTORAGE:gu},ra=[Xr.INDEXEDDB._driver,Xr.WEBSQL._driver,Xr.LOCALSTORAGE._driver],Lo=["dropInstance"],ms=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Lo),qi={description:"",driver:ra.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function mu(V,fe){V[fe]=function(){var ne=arguments;return V.ready().then(function(){return V[fe].apply(V,ne)})}}function Bo(){for(var V=1;V<arguments.length;V++){var fe=arguments[V];if(fe)for(var ne in fe)fe.hasOwnProperty(ne)&&(Vi(fe[ne])?arguments[0][ne]=fe[ne].slice():arguments[0][ne]=fe[ne])}return arguments[0]}var yu=function(){function V(fe){s(this,V);for(var ne in Xr)if(Xr.hasOwnProperty(ne)){var he=Xr[ne],Se=he._driver;this[ne]=Se,mr[Se]||this.defineDriver(he)}this._defaultConfig=Bo({},qi),this._config=Bo({},this._defaultConfig,fe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return V.prototype.config=function(ne){if((typeof ne>"u"?"undefined":o(ne))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var he in ne){if(he==="storeName"&&(ne[he]=ne[he].replace(/\W/g,"_")),he==="version"&&typeof ne[he]!="number")return new Error("Database version must be a number.");this._config[he]=ne[he]}return"driver"in ne&&ne.driver?this.setDriver(this._config.driver):!0}else return typeof ne=="string"?this._config[ne]:this._config},V.prototype.defineDriver=function(ne,he,Se){var ge=new d(function(Ve,Ye){try{var Je=ne._driver,Xe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ne._driver){Ye(Xe);return}for(var st=ms.concat("_initStorage"),St=0,Ht=st.length;St<Ht;St++){var Qt=st[St],on=!hn(Lo,Qt);if((on||ne[Qt])&&typeof ne[Qt]!="function"){Ye(Xe);return}}var $n=function(){for(var sl=function(zo){return function(){var Wh=new Error("Method "+zo+" is not implemented by the current driver"),ed=d.reject(Wh);return h(ed,arguments[arguments.length-1]),ed}},Qc=0,Jr=Lo.length;Qc<Jr;Qc++){var Fo=Lo[Qc];ne[Fo]||(ne[Fo]=sl(Fo))}};$n();var Nt=function(sl){mr[Je]&&console.info("Redefining LocalForage driver: "+Je),mr[Je]=ne,ol[Je]=sl,Ve()};"_support"in ne?ne._support&&typeof ne._support=="function"?ne._support().then(Nt,Ye):Nt(!!ne._support):Nt(!0)}catch(jr){Ye(jr)}});return p(ge,he,Se),ge},V.prototype.driver=function(){return this._driver||null},V.prototype.getDriver=function(ne,he,Se){var ge=mr[ne]?d.resolve(mr[ne]):d.reject(new Error("Driver not found."));return p(ge,he,Se),ge},V.prototype.getSerializer=function(ne){var he=d.resolve(Mt);return p(he,ne),he},V.prototype.ready=function(ne){var he=this,Se=he._driverSet.then(function(){return he._ready===null&&(he._ready=he._initDriver()),he._ready});return p(Se,ne,ne),Se},V.prototype.setDriver=function(ne,he,Se){var ge=this;Vi(ne)||(ne=[ne]);var Ve=this._getSupportedDrivers(ne);function Ye(){ge._config.driver=ge.driver()}function Je(St){return ge._extend(St),Ye(),ge._ready=ge._initStorage(ge._config),ge._ready}function Xe(St){return function(){var Ht=0;function Qt(){for(;Ht<St.length;){var on=St[Ht];return Ht++,ge._dbInfo=null,ge._ready=null,ge.getDriver(on).then(Je).catch(Qt)}Ye();var $n=new Error("No available storage method found.");return ge._driverSet=d.reject($n),ge._driverSet}return Qt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=st.then(function(){var St=Ve[0];return ge._dbInfo=null,ge._ready=null,ge.getDriver(St).then(function(Ht){ge._driver=Ht._driver,Ye(),ge._wrapLibraryMethodsWithReady(),ge._initDriver=Xe(Ve)})}).catch(function(){Ye();var St=new Error("No available storage method found.");return ge._driverSet=d.reject(St),ge._driverSet}),p(this._driverSet,he,Se),this._driverSet},V.prototype.supports=function(ne){return!!ol[ne]},V.prototype._extend=function(ne){Bo(this,ne)},V.prototype._getSupportedDrivers=function(ne){for(var he=[],Se=0,ge=ne.length;Se<ge;Se++){var Ve=ne[Se];this.supports(Ve)&&he.push(Ve)}return he},V.prototype._wrapLibraryMethodsWithReady=function(){for(var ne=0,he=ms.length;ne<he;ne++)mu(this,ms[ne])},V.prototype.createInstance=function(ne){return new V(ne)},V}(),qt=new yu;r.exports=qt},{3:3}]},{},[4])(4)})})(EO);var BU=EO.exports;const pm=Xs(BU),bg={SecureStorage:"ionicSecureStorage",IndexedDB:pm.INDEXEDDB,LocalStorage:pm.LOCALSTORAGE},XC={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[bg.SecureStorage,bg.IndexedDB,bg.LocalStorage]};let FU=class{constructor(t=XC){this._db=null,this._secureStorageDriver=null;const n=Object.assign({},XC,t||{});this._config=n}async create(){const t=pm.createInstance(this._config);return this._db=t,await t.setDriver(this._config.driverOrder||[]),this}async defineDriver(t){return t._driver===bg.SecureStorage&&(this._secureStorageDriver=t),pm.defineDriver(t)}get driver(){var t;return((t=this._db)===null||t===void 0?void 0:t.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(t){return this.assertDb().getItem(t)}set(t,n){return this.assertDb().setItem(t,n)}remove(t){return this.assertDb().removeItem(t)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(t){return this.assertDb().iterate(t)}setEncryptionKey(t){var n;if(this._secureStorageDriver)(n=this._secureStorageDriver)===null||n===void 0||n.setEncryptionKey(t);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}};class Vy{constructor(t){Wo(this,"store");Wo(this,"isCreated",!1);this.store=new FU({name:t}),this.createStorage()}async createStorage(){await this.store.create(),this.isCreated=!0}get(t){return this.store.get(t)}set(t,n){return this.store.set(t,n)}remove(t){return this.store.remove(t)}clear(){return this.store.clear()}keys(){return this.store.keys()}length(){return this.store.length()}forEach(t){return this.store.forEach(t)}}const SO=new Vy("settings"),Er=new Vy("auth"),Cn=new Vy("sync"),nf=new Vy("misc"),Dr=async()=>{const e=await Er.get("deviceId")||"none";return"".concat(e,"-").concat(oE())};class Pd extends Error{}Pd.prototype.name="InvalidTokenError";function zU(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function HU(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return zU(t)}catch(n){return atob(t)}}function Bc(e,t){if(typeof e!="string")throw new Pd("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Pd("Invalid token specified: missing part #".concat(n+1));let i;try{i=HU(r)}catch(o){throw new Pd("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(o.message,")"))}try{return JSON.parse(i)}catch(o){throw new Pd("Invalid token specified: invalid json for part #".concat(n+1," (").concat(o.message,")"))}}const UU={isLoggedIn:!1,user:null,synced_characters:[]},pr=Ya(UU),WU=async()=>{const e=await Er.get("token");if(e){const t=Bc(e);pr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]})}},qy=async e=>{await Er.set("token",e);const t=Bc(e);return console.log("decoded",t),pr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]}),t},JC=e=>{pr.set(t=>({...t,synced_characters:e})),Cn.set("synced_characters",e)};WU();const Ta=async e=>{const t=await Promise.all(kt.tables.map(n=>n.get(e)));for(let n=0;n<t.length;n++)if(t[n])return!1;return!0},xx=async(e,t)=>{try{const{user:n}=pr.get(),r=n?n.id:"none";let i=t!=null?t:await Dr();for(;!await Ta(i);)i=await Dr();const o={...e,user_id:r,local_id:i,id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await kt.versions.put(o),o}catch(n){console.log("Error creating versioned resource:",n)}};function Vn(e){const[t]=k.useMemo(()=>(e==null?void 0:e.split("|"))||[""],[e]),[n,r]=k.useState(void 0);if(k.useEffect(()=>{(async()=>{let o=await kt.versions.get(e!=null?e:"");if(o)return r(o);const s=await kt.versions.get(t);if(!s)return r(void 0);r(await xx(s,e!=null?e:""))})()},[e,t,r]),!!n)return{...n,data:n==null?void 0:n.data}}function VU({id:e,data:{spreadType:t}}){const{updateNodeData:n}=cn(),r=un.useValue(),i=Vn(r.versionId);return f.jsxs(nn,{title:"Create Object From Type",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(ht,{id:"type-".concat(e),label:"Type",value:t.name,onChange:o=>n(e,{spreadType:i==null?void 0:i.data.types.find(s=>s.name===o)}),children:i==null?void 0:i.data.types.map(o=>f.jsx("option",{value:o.name,children:o.name},o.name))}),t.properties.map(o=>f.jsxs("p",{style:{marginTop:5},children:["(",o.typeData.type,o.typeData.isArray?"[]":"",") ",o.key]},o.key)),f.jsxs("p",{style:{textAlign:"right"},children:["(",t.name,") output"]}),t.properties.map((o,s)=>f.jsx($e,{type:"target",id:"".concat(o.key,"-").concat(o.typeData.type).concat(o.typeData.isArray?"(Array)":""),position:ve.Left,style:{top:129+26*s,bottom:"auto"}},o.key)),f.jsx($e,{type:"source",id:"output-".concat(t.name),position:ve.Right,style:{top:129+24*t.properties.length,bottom:"auto"}})]})}const qU=k.memo(VU),KU=({id:e,data:{params:t}})=>{const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId);return k.useEffect(()=>{let s={};for(let a=0;a<t.length;a++){const l=t[a];s["".concat(l.name,"-").concat(l.type)]=o==null?void 0:o.data.types.find(u=>u.name===l.type)}n(e,{outputs:s}),r(e)},[t,o]),f.jsxs(nn,{title:"Entry",children:[f.jsx($e,{type:"source",id:"start-node",position:ve.Right,style:{top:30,bottom:"auto"}}),t.map(s=>f.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",s.type,s.isArray?"[]":"",") ",s.name]},s.name)),t.map((s,a)=>f.jsx($e,{type:"source",id:"".concat(s.name,"-").concat(s.type),position:ve.Right,style:{top:85+25*a,bottom:"auto"}},s.name))]})},GU=k.memo(KU);function kO(e,t){var s;if(!e||!t)return"unknown";const n=t.split("/"),r=n.pop();if(!r)return"unknown";const i=n.reduce((a,l)=>{if(a)return Array.isArray(a)?(a=a.find(u=>u.name===l),a||void 0):a[l]},e);if(!i)return;const o=(s=i._type)==null?void 0:s.properties.find(a=>a.key===r);return i._type&&o&&o.typeData.type?o.typeData.isArray?"".concat(o.typeData.type,"(Array)"):o.typeData.type:"unknown"}const Xt=k.forwardRef(({id:e,label:t,placeholder:n,value:r,onChange:i,isValid:o,errorMessage:s,style:a,minNumber:l,maxNumber:u,type:c="text"},d)=>{const h=o?"":"text-red-700 dark:text-red-500",p=o?"border border-neutral-600":"bg-red-50 border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500",b=o?"":"text-red-600 dark:text-red-500";return f.jsxs("div",{className:"mb-6",style:a,ref:d,children:[f.jsx("label",{htmlFor:e,className:"".concat(h," block mb-2 text-sm font-medium"),children:t}),f.jsx("input",{id:e,type:c,value:r,min:l,max:u,onChange:g=>i(g.target.value),placeholder:n,className:"".concat(p," text-sm rounded-lg block w-full p-2.5 dark:bg-neutral-700 dark:placeholder:text-neutral-300")}),f.jsx("p",{className:"".concat(b," mt-2 text-sm"),children:o?"":s})]})});function YU({id:e,data:{path:t,type:n,outputs:r}}){const{updateNodeData:i}=cn(),o=qr(),s=un.useValue(),a=Vn(s.versionId),l=k.useCallback(u=>{const c=kO((a==null?void 0:a.data.defaultCharacterData)||{},u),d=c.split("(")[0];i(e,{path:u,type:c,outputs:{["output-".concat(c)]:a==null?void 0:a.data.types.find(h=>h.name===d)}}),o(e)},[e,i,o,a]);return f.jsxs(nn,{title:"Get Character Data",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(Xt,{id:"get-character-".concat(e),label:"Path",value:t,onChange:l,isValid:!0,errorMessage:""}),f.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?f.jsx($e,{type:"source",id:"output-".concat(n),position:ve.Right,style:{bottom:20,top:"auto"}}):null]})}const XU=k.memo(YU);function JU({id:e,data:{chosenState:t}}){const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId),s=Po(),a=k.useMemo(()=>s.filter(c=>c.source!==e).map(c=>c.source),[s]),l=Wy(a),u=k.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(c=>c.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(c=>c.name===i.creatorPage)},[o,i]);return k.useEffect(()=>{let c={};t||(t=(u==null?void 0:u.state[0])||null),t&&(c["".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":"")]=(o==null?void 0:o.data.types.find(d=>d.name===t.type.type))||null),n(e,{chosenState:t,outputs:c}),r(e)},[s,l,o,u]),f.jsxs(nn,{title:"Get Page State",children:[f.jsx(ht,{id:"set-state-".concat(e),label:"State to grab",value:(t==null?void 0:t.name)||"",onChange:c=>{const d=u==null?void 0:u.state.find(h=>h.name===c);n(e,{chosenState:d,outputs:{["".concat(d.name,"-").concat(d.type.type).concat(d.type.isArray?"(Array)":"")]:o==null?void 0:o.data.types.find(h=>h.name===d.type.type)}}),r(e)},children:u==null?void 0:u.state.map(c=>f.jsx("option",{value:c.name,children:c.name},c.name))}),t?f.jsxs("p",{className:"text-right",children:[t.type.type,t.type.isArray?"[]":""]}):f.jsx("p",{className:"text-right",children:"select a page state to get."}),f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),t&&f.jsx($e,{type:"source",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ve.Right,style:{top:122,bottom:"auto"}})]})}const QU=k.memo(JU);function ZU({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=cn(),i=qr(),o=un.useValue(),s=Vn(o.versionId),a=k.useCallback(l=>{var d;const u=(d=s==null?void 0:s.data.data.find(h=>h.name===l))==null?void 0:d.typeData,c=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:c}),i(e)},[e,r,i]);return k.useEffect(()=>{var d,h;if(t)return;const l=(d=s==null?void 0:s.data.data[0])==null?void 0:d.name,u=(h=s==null?void 0:s.data.data[0])==null?void 0:h.typeData,c=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:c}),i(e)},[]),f.jsxs(nn,{title:"Get System Data",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(ht,{id:"get-system-".concat(e),label:"Data",value:t,onChange:a,children:s==null?void 0:s.data.data.map(l=>f.jsx("option",{value:l.name,children:l.name}))}),f.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?f.jsx($e,{type:"source",id:"output-".concat(n),position:ve.Right,style:{bottom:20,top:"auto"}}):null]})}const eW=k.memo(ZU),tW=({id:e,data:{type:t,title:n,inputType:r}})=>{const{updateNodeData:i}=cn(),o=qr();return Po({handleType:"target",handleId:"data-any",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];l&&(i(e,{inputType:l}),o(e))},onDisconnect:()=>{i(e,{inputType:"unknown"}),o(e)}}),f.jsxs(nn,{title:"Open Modal",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsxs(ht,{id:"modal-type",label:"Modal Type",value:t,onChange:s=>i(e,{type:s}),children:[f.jsx("option",{value:"edit_object",children:"Edit Object"}),f.jsx("option",{value:"edit_number",children:"Edit Number"}),f.jsx("option",{value:"edit_string",children:"Edit String"})]}),f.jsx(Xt,{id:"modal-title",label:"Modal Title",value:n,onChange:s=>i(e,{title:s}),isValid:!0,errorMessage:""}),f.jsxs("p",{style:{marginTop:10},children:["input data (",r,")"]}),f.jsx($e,{type:"target",id:"data-any",position:ve.Left,style:{top:145,bottom:"auto"}}),f.jsx("p",{style:{textAlign:"right"},children:"on save"}),f.jsx($e,{type:"source",id:"save-node",position:ve.Right,style:{top:168,bottom:"auto"}}),f.jsxs("p",{style:{textAlign:"right"},children:["data (",r,")"]}),f.jsx($e,{type:"source",id:"newdata-".concat(r),position:ve.Right,style:{top:192,bottom:"auto"}}),f.jsx("p",{style:{marginTop:10,textAlign:"right"},children:"on delete"}),f.jsx($e,{type:"source",id:"delete-node",position:ve.Right,style:{top:222,bottom:"auto"}})]})},nW=k.memo(tW);function rW({id:e,data:{param:t,inputType:n}}){const{updateNodeData:r}=cn(),i=qr(),o="".concat(t.name,"-").concat(t.isArray?"array":t.type);return Po({handleType:"target",handleId:o,onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(r(e,{inputType:u}),i(e))},onDisconnect:()=>{r(e,{inputType:"any"}),i(e)}}),f.jsxs(nn,{title:"Output",children:[f.jsx($e,{type:"target",id:"end-node",position:ve.Left,style:{top:28,bottom:"auto"}}),f.jsx("p",{style:{textAlign:"left",marginTop:5},children:t.isArray?"".concat(n).concat(t.isArray?"(Array)":""):t.type}),f.jsx($e,{type:"target",id:o,position:ve.Left,style:{top:85,bottom:"auto"}})]})}const iW=k.memo(rW);var tn;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(const a of o)s[a]=i[a];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},e.find=(i,o)=>{for(const s of i)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?"'".concat(s,"'"):s).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(tn||(tn={}));var _x;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(_x||(_x={}));const wt=tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cs=e=>{switch(typeof e){case"undefined":return wt.undefined;case"string":return wt.string;case"number":return isNaN(e)?wt.nan:wt.number;case"boolean":return wt.boolean;case"function":return wt.function;case"bigint":return wt.bigint;case"symbol":return wt.symbol;case"object":return Array.isArray(e)?wt.array:e===null?wt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?wt.promise:typeof Map<"u"&&e instanceof Map?wt.map:typeof Set<"u"&&e instanceof Set?wt.set:typeof Date<"u"&&e instanceof Date?wt.date:wt.object;default:return wt.unknown}},Qe=tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),oW=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Mi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(s))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}static assert(t){if(!(t instanceof Mi))throw new Error("Not a ZodError: ".concat(t))}toString(){return this.message}get message(){return JSON.stringify(this.issues,tn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Mi.create=e=>new Mi(e);const xc=(e,t)=>{let n;switch(e.code){case Qe.invalid_type:e.received===wt.undefined?n="Required":n="Expected ".concat(e.expected,", received ").concat(e.received);break;case Qe.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,tn.jsonStringifyReplacer));break;case Qe.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(tn.joinValues(e.keys,", "));break;case Qe.invalid_union:n="Invalid input";break;case Qe.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(tn.joinValues(e.options));break;case Qe.invalid_enum_value:n="Invalid enum value. Expected ".concat(tn.joinValues(e.options),", received '").concat(e.received,"'");break;case Qe.invalid_arguments:n="Invalid function arguments";break;case Qe.invalid_return_type:n="Invalid function return type";break;case Qe.invalid_date:n="Invalid date";break;case Qe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),typeof e.validation.position=="number"&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):tn.assertNever(e.validation):e.validation!=="regex"?n="Invalid ".concat(e.validation):n="Invalid";break;case Qe.too_small:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):n="Invalid input";break;case Qe.too_big:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="bigint"?n="BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):n="Invalid input";break;case Qe.custom:n="Invalid input";break;case Qe.invalid_intersection_types:n="Intersection results could not be merged";break;case Qe.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case Qe.not_finite:n="Number must be finite";break;default:n=t.defaultError,tn.assertNever(e)}return{message:n}};let CO=xc;function sW(e){CO=e}function gm(){return CO}const mm=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}},aW=[];function mt(e,t){const n=gm(),r=mm({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===xc?void 0:xc].filter(i=>!!i)});e.common.issues.push(r)}class Vr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return Ot;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const o=await i.key,s=await i.value;r.push({key:o,value:s})}return Vr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Ot;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:t.value,value:r}}}const Ot=Object.freeze({status:"aborted"}),zu=e=>({status:"dirty",value:e}),ii=e=>({status:"valid",value:e}),Ex=e=>e.status==="aborted",Sx=e=>e.status==="dirty",Vl=e=>e.status==="valid",Lf=e=>typeof Promise<"u"&&e instanceof Promise;function ym(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function jO(e,t,n,r,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var jt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(jt||(jt={}));var Od,$d;class ss{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const QC=(e,t)=>{if(Vl(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Mi(e.common.issues);return this._error=n,this._error}}};function zt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(s,a)=>{var l,u;const{message:c}=e;return s.code==="invalid_enum_value"?{message:c!=null?c:a.defaultError}:typeof a.data>"u"?{message:(l=c!=null?c:r)!==null&&l!==void 0?l:a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c!=null?c:n)!==null&&u!==void 0?u:a.defaultError}},description:i}}class Vt{get description(){return this._def.description}_getType(t){return Cs(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Cs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Vr,ctx:{common:t.parent.common,data:t.data,parsedType:Cs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Lf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Cs(t)},o=this._parseSync({data:t,path:i.path,parent:i});return QC(i,o)}"~validate"(t){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Cs(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:i});return Vl(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(o=>Vl(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Cs(t)},i=this._parse({data:t,path:r.path,parent:r}),o=await(Lf(i)?i:Promise.resolve(i));return QC(r,o)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const s=t(i),a=()=>o.addIssue({code:Qe.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new No({schema:this,typeName:It.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return es.create(this,this._def)}nullable(){return Fa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return jo.create(this)}promise(){return Ec.create(this,this._def)}or(t){return Hf.create([this,t],this._def)}and(t){return Uf.create(this,t,this._def)}transform(t){return new No({...zt(this._def),schema:this,typeName:It.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Gf({...zt(this._def),innerType:this,defaultValue:n,typeName:It.ZodDefault})}brand(){return new sE({typeName:It.ZodBranded,type:this,...zt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Yf({...zt(this._def),innerType:this,catchValue:n,typeName:It.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Th.create(this,t)}readonly(){return Xf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const lW=/^c[^\s-]{8,}$/i,uW=/^[0-9a-z]+$/,cW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,dW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fW=/^[a-z0-9_-]{21}$/i,hW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,pW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,gW=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let G0;const yW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,bW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,wW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_W=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",EW=new RegExp("^".concat(AO,"$"));function RO(e){let t="[0-5]\\d";e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):e.precision==null&&(t="".concat(t,"(\\.\\d+)?"));const n=e.precision?"+":"?";return"([01]\\d|2[0-3]):[0-5]\\d(:".concat(t,")").concat(n)}function SW(e){return new RegExp("^".concat(RO(e),"$"))}function NO(e){let t="".concat(AO,"T").concat(RO(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}function kW(e,t){return!!((t==="v4"||!t)&&yW.test(e)||(t==="v6"||!t)&&bW.test(e))}function CW(e,t){if(!hW.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch(n){return!1}}function jW(e,t){return!!((t==="v4"||!t)&&vW.test(e)||(t==="v6"||!t)&&wW.test(e))}class So extends Vt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==wt.string){const o=this._getOrReturnCtx(t);return mt(o,{code:Qe.invalid_type,expected:wt.string,received:o.parsedType}),Ot}const r=new Vr;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,a=t.data.length<o.value;(s||a)&&(i=this._getOrReturnCtx(t,i),s?mt(i,{code:Qe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&mt(i,{code:Qe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")gW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"email",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")G0||(G0=new RegExp(mW,"u")),G0.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"emoji",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")dW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"uuid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")fW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"nanoid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")lW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"cuid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")uW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"cuid2",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")cW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"ulid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch(s){i=this._getOrReturnCtx(t,i),mt(i,{validation:"url",code:Qe.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"regex",code:Qe.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?NO(o).test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?EW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?SW(o).test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?pW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"duration",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?kW(t.data,o.version)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"ip",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?CW(t.data,o.alg)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"jwt",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?jW(t.data,o.version)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"cidr",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?xW.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"base64",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?_W.test(t.data)||(i=this._getOrReturnCtx(t,i),mt(i,{validation:"base64url",code:Qe.invalid_string,message:o.message}),r.dirty()):tn.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Qe.invalid_string,...jt.errToObj(r)})}_addCheck(t){return new So({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...jt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...jt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...jt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...jt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...jt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...jt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...jt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...jt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...jt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...jt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...jt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...jt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...jt.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...jt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...jt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...jt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...jt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...jt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...jt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...jt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...jt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...jt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...jt.errToObj(n)})}nonempty(t){return this.min(1,jt.errToObj(t))}trim(){return new So({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new So({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new So({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}So.create=e=>{var t;return new So({checks:[],typeName:It.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...zt(e)})};function AW(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(e.toFixed(i).replace(".","")),s=parseInt(t.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}class Da extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==wt.number){const o=this._getOrReturnCtx(t);return mt(o,{code:Qe.invalid_type,expected:wt.number,received:o.parsedType}),Ot}let r;const i=new Vr;for(const o of this._def.checks)o.kind==="int"?tn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?AW(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.not_finite,message:o.message}),i.dirty()):tn.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,jt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,jt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,jt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,jt.toString(n))}setLimit(t,n,r,i){return new Da({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:jt.toString(i)}]})}_addCheck(t){return new Da({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:jt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:jt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:jt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:jt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:jt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:jt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:jt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:jt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:jt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&tn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Da.create=e=>new Da({checks:[],typeName:It.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...zt(e)});class La extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(o){return this._getInvalidInput(t)}if(this._getType(t)!==wt.bigint)return this._getInvalidInput(t);let r;const i=new Vr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),mt(r,{code:Qe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):tn.assertNever(o);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return mt(n,{code:Qe.invalid_type,expected:wt.bigint,received:n.parsedType}),Ot}gte(t,n){return this.setLimit("min",t,!0,jt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,jt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,jt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,jt.toString(n))}setLimit(t,n,r,i){return new La({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:jt.toString(i)}]})}_addCheck(t){return new La({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:jt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:jt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:jt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:jt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:jt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}La.create=e=>{var t;return new La({checks:[],typeName:It.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...zt(e)})};class Bf extends Vt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==wt.boolean){const r=this._getOrReturnCtx(t);return mt(r,{code:Qe.invalid_type,expected:wt.boolean,received:r.parsedType}),Ot}return ii(t.data)}}Bf.create=e=>new Bf({typeName:It.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...zt(e)});class ql extends Vt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==wt.date){const o=this._getOrReturnCtx(t);return mt(o,{code:Qe.invalid_type,expected:wt.date,received:o.parsedType}),Ot}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return mt(o,{code:Qe.invalid_date}),Ot}const r=new Vr;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),mt(i,{code:Qe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):tn.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ql({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:jt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:jt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}ql.create=e=>new ql({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:It.ZodDate,...zt(e)});class vm extends Vt{_parse(t){if(this._getType(t)!==wt.symbol){const r=this._getOrReturnCtx(t);return mt(r,{code:Qe.invalid_type,expected:wt.symbol,received:r.parsedType}),Ot}return ii(t.data)}}vm.create=e=>new vm({typeName:It.ZodSymbol,...zt(e)});class Ff extends Vt{_parse(t){if(this._getType(t)!==wt.undefined){const r=this._getOrReturnCtx(t);return mt(r,{code:Qe.invalid_type,expected:wt.undefined,received:r.parsedType}),Ot}return ii(t.data)}}Ff.create=e=>new Ff({typeName:It.ZodUndefined,...zt(e)});class zf extends Vt{_parse(t){if(this._getType(t)!==wt.null){const r=this._getOrReturnCtx(t);return mt(r,{code:Qe.invalid_type,expected:wt.null,received:r.parsedType}),Ot}return ii(t.data)}}zf.create=e=>new zf({typeName:It.ZodNull,...zt(e)});class _c extends Vt{constructor(){super(...arguments),this._any=!0}_parse(t){return ii(t.data)}}_c.create=e=>new _c({typeName:It.ZodAny,...zt(e)});class Ol extends Vt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ii(t.data)}}Ol.create=e=>new Ol({typeName:It.ZodUnknown,...zt(e)});class qs extends Vt{_parse(t){const n=this._getOrReturnCtx(t);return mt(n,{code:Qe.invalid_type,expected:wt.never,received:n.parsedType}),Ot}}qs.create=e=>new qs({typeName:It.ZodNever,...zt(e)});class bm extends Vt{_parse(t){if(this._getType(t)!==wt.undefined){const r=this._getOrReturnCtx(t);return mt(r,{code:Qe.invalid_type,expected:wt.void,received:r.parsedType}),Ot}return ii(t.data)}}bm.create=e=>new bm({typeName:It.ZodVoid,...zt(e)});class jo extends Vt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==wt.array)return mt(n,{code:Qe.invalid_type,expected:wt.array,received:n.parsedType}),Ot;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(s||a)&&(mt(n,{code:s?Qe.too_big:Qe.too_small,minimum:a?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(mt(n,{code:Qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(mt(n,{code:Qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,a)=>i.type._parseAsync(new ss(n,s,n.path,a)))).then(s=>Vr.mergeArray(r,s));const o=[...n.data].map((s,a)=>i.type._parseSync(new ss(n,s,n.path,a)));return Vr.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new jo({...this._def,minLength:{value:t,message:jt.toString(n)}})}max(t,n){return new jo({...this._def,maxLength:{value:t,message:jt.toString(n)}})}length(t,n){return new jo({...this._def,exactLength:{value:t,message:jt.toString(n)}})}nonempty(t){return this.min(1,t)}}jo.create=(e,t)=>new jo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:It.ZodArray,...zt(t)});function Su(e){if(e instanceof jn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=es.create(Su(r))}return new jn({...e._def,shape:()=>t})}else return e instanceof jo?new jo({...e._def,type:Su(e.element)}):e instanceof es?es.create(Su(e.unwrap())):e instanceof Fa?Fa.create(Su(e.unwrap())):e instanceof as?as.create(e.items.map(t=>Su(t))):e}class jn extends Vt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=tn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==wt.object){const u=this._getOrReturnCtx(t);return mt(u,{code:Qe.invalid_type,expected:wt.object,received:u.parsedType}),Ot}const{status:r,ctx:i}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof qs&&this._def.unknownKeys==="strip"))for(const u in i.data)s.includes(u)||a.push(u);const l=[];for(const u of s){const c=o[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ss(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof qs){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(mt(i,{code:Qe.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ss(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,h=await c.value;u.push({key:d,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>Vr.mergeObjectSync(r,u)):Vr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return jt.errToObj,new jn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o,s,a;const l=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=jt.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new jn({...this._def,unknownKeys:"strip"})}passthrough(){return new jn({...this._def,unknownKeys:"passthrough"})}extend(t){return new jn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new jn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:It.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new jn({...this._def,catchall:t})}pick(t){const n={};return tn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new jn({...this._def,shape:()=>n})}omit(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new jn({...this._def,shape:()=>n})}deepPartial(){return Su(this)}partial(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new jn({...this._def,shape:()=>n})}required(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof es;)o=o._def.innerType;n[r]=o}}),new jn({...this._def,shape:()=>n})}keyof(){return TO(tn.objectKeys(this.shape))}}jn.create=(e,t)=>new jn({shape:()=>e,unknownKeys:"strip",catchall:qs.create(),typeName:It.ZodObject,...zt(t)});jn.strictCreate=(e,t)=>new jn({shape:()=>e,unknownKeys:"strict",catchall:qs.create(),typeName:It.ZodObject,...zt(t)});jn.lazycreate=(e,t)=>new jn({shape:e,unknownKeys:"strip",catchall:qs.create(),typeName:It.ZodObject,...zt(t)});class Hf extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(a=>new Mi(a.ctx.common.issues));return mt(n,{code:Qe.invalid_union,unionErrors:s}),Ot}if(n.common.async)return Promise.all(r.map(async o=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!o&&(o={result:c,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(l=>new Mi(l));return mt(n,{code:Qe.invalid_union,unionErrors:a}),Ot}}get options(){return this._def.options}}Hf.create=(e,t)=>new Hf({options:e,typeName:It.ZodUnion,...zt(t)});const ws=e=>e instanceof Vf?ws(e.schema):e instanceof No?ws(e.innerType()):e instanceof qf?[e.value]:e instanceof Ba?e.options:e instanceof Kf?tn.objectValues(e.enum):e instanceof Gf?ws(e._def.innerType):e instanceof Ff?[void 0]:e instanceof zf?[null]:e instanceof es?[void 0,...ws(e.unwrap())]:e instanceof Fa?[null,...ws(e.unwrap())]:e instanceof sE||e instanceof Xf?ws(e.unwrap()):e instanceof Yf?ws(e._def.innerType):[];class Ky extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==wt.object)return mt(n,{code:Qe.invalid_type,expected:wt.object,received:n.parsedType}),Ot;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(mt(n,{code:Qe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ot)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const o of n){const s=ws(o.shape[t]);if(!s.length)throw new Error("A discriminator value for key `".concat(t,"` could not be extracted from all schema options"));for(const a of s){if(i.has(a))throw new Error("Discriminator property ".concat(String(t)," has duplicate value ").concat(String(a)));i.set(a,o)}}return new Ky({typeName:It.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...zt(r)})}}function kx(e,t){const n=Cs(e),r=Cs(t);if(e===t)return{valid:!0,data:e};if(n===wt.object&&r===wt.object){const i=tn.objectKeys(t),o=tn.objectKeys(e).filter(a=>i.indexOf(a)!==-1),s={...e,...t};for(const a of o){const l=kx(e[a],t[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(n===wt.array&&r===wt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const s=e[o],a=t[o],l=kx(s,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===wt.date&&r===wt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Uf extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(o,s)=>{if(Ex(o)||Ex(s))return Ot;const a=kx(o.value,s.value);return a.valid?((Sx(o)||Sx(s))&&n.dirty(),{status:n.value,value:a.data}):(mt(r,{code:Qe.invalid_intersection_types}),Ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Uf.create=(e,t,n)=>new Uf({left:e,right:t,typeName:It.ZodIntersection,...zt(n)});class as extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==wt.array)return mt(r,{code:Qe.invalid_type,expected:wt.array,received:r.parsedType}),Ot;if(r.data.length<this._def.items.length)return mt(r,{code:Qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ot;!this._def.rest&&r.data.length>this._def.items.length&&(mt(r,{code:Qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((s,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ss(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>Vr.mergeArray(n,s)):Vr.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new as({...this._def,rest:t})}}as.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new as({items:e,typeName:It.ZodTuple,rest:null,...zt(t)})};class Wf extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==wt.object)return mt(r,{code:Qe.invalid_type,expected:wt.object,received:r.parsedType}),Ot;const i=[],o=this._def.keyType,s=this._def.valueType;for(const a in r.data)i.push({key:o._parse(new ss(r,a,r.path,a)),value:s._parse(new ss(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Vr.mergeObjectAsync(n,i):Vr.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Vt?new Wf({keyType:t,valueType:n,typeName:It.ZodRecord,...zt(r)}):new Wf({keyType:So.create(),valueType:t,typeName:It.ZodRecord,...zt(n)})}}class wm extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==wt.map)return mt(r,{code:Qe.invalid_type,expected:wt.map,received:r.parsedType}),Ot;const i=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new ss(r,a,r.path,[u,"key"])),value:o._parse(new ss(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Ot;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of s){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Ot;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}wm.create=(e,t,n)=>new wm({valueType:t,keyType:e,typeName:It.ZodMap,...zt(n)});class Kl extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==wt.set)return mt(r,{code:Qe.invalid_type,expected:wt.set,received:r.parsedType}),Ot;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(mt(r,{code:Qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(mt(r,{code:Qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function s(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Ot;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>o._parse(new ss(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(t,n){return new Kl({...this._def,minSize:{value:t,message:jt.toString(n)}})}max(t,n){return new Kl({...this._def,maxSize:{value:t,message:jt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Kl.create=(e,t)=>new Kl({valueType:e,minSize:null,maxSize:null,typeName:It.ZodSet,...zt(t)});class tc extends Vt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==wt.function)return mt(n,{code:Qe.invalid_type,expected:wt.function,received:n.parsedType}),Ot;function r(a,l){return mm({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gm(),xc].filter(u=>!!u),issueData:{code:Qe.invalid_arguments,argumentsError:l}})}function i(a,l){return mm({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gm(),xc].filter(u=>!!u),issueData:{code:Qe.invalid_return_type,returnTypeError:l}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Ec){const a=this;return ii(async function(...l){const u=new Mi([]),c=await a._def.args.parseAsync(l,o).catch(p=>{throw u.addIssue(r(l,p)),u}),d=await Reflect.apply(s,this,c);return await a._def.returns._def.type.parseAsync(d,o).catch(p=>{throw u.addIssue(i(d,p)),u})})}else{const a=this;return ii(function(...l){const u=a._def.args.safeParse(l,o);if(!u.success)throw new Mi([r(l,u.error)]);const c=Reflect.apply(s,this,u.data),d=a._def.returns.safeParse(c,o);if(!d.success)throw new Mi([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new tc({...this._def,args:as.create(t).rest(Ol.create())})}returns(t){return new tc({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new tc({args:t||as.create([]).rest(Ol.create()),returns:n||Ol.create(),typeName:It.ZodFunction,...zt(r)})}}class Vf extends Vt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Vf.create=(e,t)=>new Vf({getter:e,typeName:It.ZodLazy,...zt(t)});class qf extends Vt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return mt(n,{received:n.data,code:Qe.invalid_literal,expected:this._def.value}),Ot}return{status:"valid",value:t.data}}get value(){return this._def.value}}qf.create=(e,t)=>new qf({value:e,typeName:It.ZodLiteral,...zt(t)});function TO(e,t){return new Ba({values:e,typeName:It.ZodEnum,...zt(t)})}class Ba extends Vt{constructor(){super(...arguments),Od.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return mt(n,{expected:tn.joinValues(r),received:n.parsedType,code:Qe.invalid_type}),Ot}if(ym(this,Od)||jO(this,Od,new Set(this._def.values)),!ym(this,Od).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return mt(n,{received:n.data,code:Qe.invalid_enum_value,options:r}),Ot}return ii(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Ba.create(t,{...this._def,...n})}exclude(t,n=this._def){return Ba.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Od=new WeakMap;Ba.create=TO;class Kf extends Vt{constructor(){super(...arguments),$d.set(this,void 0)}_parse(t){const n=tn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==wt.string&&r.parsedType!==wt.number){const i=tn.objectValues(n);return mt(r,{expected:tn.joinValues(i),received:r.parsedType,code:Qe.invalid_type}),Ot}if(ym(this,$d)||jO(this,$d,new Set(tn.getValidEnumValues(this._def.values))),!ym(this,$d).has(t.data)){const i=tn.objectValues(n);return mt(r,{received:r.data,code:Qe.invalid_enum_value,options:i}),Ot}return ii(t.data)}get enum(){return this._def.values}}$d=new WeakMap;Kf.create=(e,t)=>new Kf({values:e,typeName:It.ZodNativeEnum,...zt(t)});class Ec extends Vt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==wt.promise&&n.common.async===!1)return mt(n,{code:Qe.invalid_type,expected:wt.promise,received:n.parsedType}),Ot;const r=n.parsedType===wt.promise?n.data:Promise.resolve(n.data);return ii(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ec.create=(e,t)=>new Ec({type:e,typeName:It.ZodPromise,...zt(t)});class No extends Vt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===It.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:s=>{mt(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(r.data,o);if(r.common.async)return Promise.resolve(s).then(async a=>{if(n.value==="aborted")return Ot;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Ot:l.status==="dirty"||n.value==="dirty"?zu(l.value):l});{if(n.value==="aborted")return Ot;const a=this._def.schema._parseSync({data:s,path:r.path,parent:r});return a.status==="aborted"?Ot:a.status==="dirty"||n.value==="dirty"?zu(a.value):a}}if(i.type==="refinement"){const s=a=>{const l=i.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ot:(a.status==="dirty"&&n.dirty(),s(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ot:(a.status==="dirty"&&n.dirty(),s(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Vl(s))return s;const a=i.transform(s.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Vl(s)?Promise.resolve(i.transform(s.value,o)).then(a=>({status:n.value,value:a})):s);tn.assertNever(i)}}No.create=(e,t,n)=>new No({schema:e,typeName:It.ZodEffects,effect:t,...zt(n)});No.createWithPreprocess=(e,t,n)=>new No({schema:t,effect:{type:"preprocess",transform:e},typeName:It.ZodEffects,...zt(n)});class es extends Vt{_parse(t){return this._getType(t)===wt.undefined?ii(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}es.create=(e,t)=>new es({innerType:e,typeName:It.ZodOptional,...zt(t)});class Fa extends Vt{_parse(t){return this._getType(t)===wt.null?ii(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Fa.create=(e,t)=>new Fa({innerType:e,typeName:It.ZodNullable,...zt(t)});class Gf extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===wt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gf.create=(e,t)=>new Gf({innerType:e,typeName:It.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...zt(t)});class Yf extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Lf(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Mi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Mi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Yf.create=(e,t)=>new Yf({innerType:e,typeName:It.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...zt(t)});class xm extends Vt{_parse(t){if(this._getType(t)!==wt.nan){const r=this._getOrReturnCtx(t);return mt(r,{code:Qe.invalid_type,expected:wt.nan,received:r.parsedType}),Ot}return{status:"valid",value:t.data}}}xm.create=e=>new xm({typeName:It.ZodNaN,...zt(e)});const RW=Symbol("zod_brand");class sE extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Th extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Ot:o.status==="dirty"?(n.dirty(),zu(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ot:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new Th({in:t,out:n,typeName:It.ZodPipeline})}}class Xf extends Vt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Vl(i)&&(i.value=Object.freeze(i.value)),i);return Lf(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Xf.create=(e,t)=>new Xf({innerType:e,typeName:It.ZodReadonly,...zt(t)});function ZC(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function IO(e,t={},n){return e?_c.create().superRefine((r,i)=>{var o,s;const a=e(r);if(a instanceof Promise)return a.then(l=>{var u,c;if(!l){const d=ZC(t,r),h=(c=(u=d.fatal)!==null&&u!==void 0?u:n)!==null&&c!==void 0?c:!0;i.addIssue({code:"custom",...d,fatal:h})}});if(!a){const l=ZC(t,r),u=(s=(o=l.fatal)!==null&&o!==void 0?o:n)!==null&&s!==void 0?s:!0;i.addIssue({code:"custom",...l,fatal:u})}}):_c.create()}const NW={object:jn.lazycreate};var It;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(It||(It={}));const TW=(e,t={message:"Input not instance of ".concat(e.name)})=>IO(n=>n instanceof e,t),PO=So.create,OO=Da.create,IW=xm.create,PW=La.create,$O=Bf.create,OW=ql.create,$W=vm.create,MW=Ff.create,DW=zf.create,LW=_c.create,BW=Ol.create,FW=qs.create,zW=bm.create,HW=jo.create,UW=jn.create,WW=jn.strictCreate,VW=Hf.create,qW=Ky.create,KW=Uf.create,GW=as.create,YW=Wf.create,XW=wm.create,JW=Kl.create,QW=tc.create,ZW=Vf.create,eV=qf.create,tV=Ba.create,nV=Kf.create,rV=Ec.create,e2=No.create,iV=es.create,oV=Fa.create,sV=No.createWithPreprocess,aV=Th.create,lV=()=>PO().optional(),uV=()=>OO().optional(),cV=()=>$O().optional(),dV={string:e=>So.create({...e,coerce:!0}),number:e=>Da.create({...e,coerce:!0}),boolean:e=>Bf.create({...e,coerce:!0}),bigint:e=>La.create({...e,coerce:!0}),date:e=>ql.create({...e,coerce:!0})},fV=Ot;var ct=Object.freeze({__proto__:null,defaultErrorMap:xc,setErrorMap:sW,getErrorMap:gm,makeIssue:mm,EMPTY_PATH:aW,addIssueToContext:mt,ParseStatus:Vr,INVALID:Ot,DIRTY:zu,OK:ii,isAborted:Ex,isDirty:Sx,isValid:Vl,isAsync:Lf,get util(){return tn},get objectUtil(){return _x},ZodParsedType:wt,getParsedType:Cs,ZodType:Vt,datetimeRegex:NO,ZodString:So,ZodNumber:Da,ZodBigInt:La,ZodBoolean:Bf,ZodDate:ql,ZodSymbol:vm,ZodUndefined:Ff,ZodNull:zf,ZodAny:_c,ZodUnknown:Ol,ZodNever:qs,ZodVoid:bm,ZodArray:jo,ZodObject:jn,ZodUnion:Hf,ZodDiscriminatedUnion:Ky,ZodIntersection:Uf,ZodTuple:as,ZodRecord:Wf,ZodMap:wm,ZodSet:Kl,ZodFunction:tc,ZodLazy:Vf,ZodLiteral:qf,ZodEnum:Ba,ZodNativeEnum:Kf,ZodPromise:Ec,ZodEffects:No,ZodTransformer:No,ZodOptional:es,ZodNullable:Fa,ZodDefault:Gf,ZodCatch:Yf,ZodNaN:xm,BRAND:RW,ZodBranded:sE,ZodPipeline:Th,ZodReadonly:Xf,custom:IO,Schema:Vt,ZodSchema:Vt,late:NW,get ZodFirstPartyTypeKind(){return It},coerce:dV,any:LW,array:HW,bigint:PW,boolean:$O,date:OW,discriminatedUnion:qW,effect:e2,enum:tV,function:QW,instanceof:TW,intersection:KW,lazy:ZW,literal:eV,map:XW,nan:IW,nativeEnum:nV,never:FW,null:DW,nullable:oV,number:OO,object:UW,oboolean:cV,onumber:uV,optional:iV,ostring:lV,pipeline:aV,preprocess:sV,promise:rV,record:YW,set:JW,strictObject:WW,string:PO,symbol:$W,transformer:e2,tuple:GW,undefined:MW,union:VW,unknown:BW,void:zW,NEVER:fV,ZodIssueCode:Qe,quotelessJson:oW,ZodError:Mi});const aE=ct.object({type:ct.string(),gen:ct.any().optional(),useTextArea:ct.boolean().optional(),isArray:ct.boolean().optional(),options:ct.array(ct.string()).optional(),outputType:ct.string().optional(),isOutputAnArray:ct.boolean().optional(),inputs:ct.array(ct.any()).optional()}),hV=ct.object({name:ct.string(),typeData:aE,data:ct.any()}),Y0=ct.object({name:ct.string(),blueprint:ct.object({nodes:ct.array(ct.any()),edges:ct.array(ct.any())}),lexical:ct.string(),state:ct.array(ct.object({name:ct.string(),type:aE,value:ct.any()}))}),pV=ct.object({name:ct.string(),properties:ct.array(ct.object({key:ct.string(),typeData:aE}))});ct.object({creator:ct.array(Y0),modals:ct.array(Y0),pages:ct.array(Y0),version:ct.string(),data:ct.array(hV),defaultCharacterData:ct.any(),types:ct.array(pV)});const Ih=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).max(100,"id cannot be longer than 100 characters").optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string(),name:ct.string(),forked_from:ct.string().nullable().optional(),created_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).nullable().optional()});function gV({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=cn(),i=qr(),o=un.useValue(),s=Vn(o.versionId),a=k.useCallback(l=>{const u=kO((s==null?void 0:s.data.defaultCharacterData)||{},l);r(e,{path:l,type:u}),i(e)},[e,r,i,Ih]);return f.jsxs(nn,{title:"Set Character Data",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(Xt,{id:"set-character-".concat(e),label:"Path",value:t,onChange:a,isValid:!0,errorMessage:""}),f.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?f.jsx($e,{type:"target",id:"input-".concat(n),position:ve.Left,style:{bottom:20,top:"auto"}}):null]})}const mV=k.memo(gV);function yV({id:e,data:{chosenState:t}}){const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId),s=k.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(a=>a.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(a=>a.name===i.creatorPage)},[o,i]);return k.useEffect(()=>{t||(t=(s==null?void 0:s.state[0])||null),n(e,{chosenState:t})},[s,t]),f.jsxs(nn,{title:"Set Page State",children:[f.jsx(ht,{id:"set-state-".concat(e),label:"State to change",value:(t==null?void 0:t.name)||"",onChange:a=>{n(e,{chosenState:s==null?void 0:s.state.find(l=>l.name===a)}),r(e)},children:s==null?void 0:s.state.map(a=>f.jsx("option",{value:a.name,children:a.name},a.name))}),t?f.jsxs("p",{children:[t.type.type,t.type.isArray?"[]":""]}):f.jsx("p",{children:"select a page state to set."}),f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),t&&f.jsx($e,{type:"target",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ve.Left,style:{top:122,bottom:"auto"}})]})}const vV=k.memo(yV);function bV({id:e,data:t}){const{updateNodeData:n}=cn();return f.jsxs(nn,{title:"Set System Data",children:[f.jsx(Xt,{id:"path",label:"Path",placeholder:"path/to/data",value:t.path,onChange:i=>n(e,{path:i}),isValid:!0,errorMessage:""}),f.jsxs("p",{children:["Calculated type ","unknown"]}),f.jsx($e,{type:"target",position:ve.Left}),f.jsx($e,{type:"source",position:ve.Right})]})}const wV=k.memo(bV);function xV({id:e,data:{inputType:t}}){var u,c;const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId),s=Po(),a=k.useMemo(()=>s.filter(d=>d.source!==e).map(d=>d.source),[s]),l=Wy(a);return k.useEffect(()=>{var b,g,x,y,v;let d={};for(let w=0;w<s.length;w++){const E=s[w];if((E.source===e?"output":"input")==="output")continue;const A=l.find($=>$.id===E.source);if(!(A!=null&&A.data)||!(A!=null&&A.data.outputs))continue;const T=((b=A==null?void 0:A.data)==null?void 0:b.outputs)[(g=E.sourceHandle)!=null?g:""];d[(x=E.targetHandle)!=null?x:""]=T}const h=(y=d["input-object"])!=null?y:{name:"unknown",properties:[]};let p={};for(let w=0;w<((v=t==null?void 0:t.properties)==null?void 0:v.length);w++){const E=t.properties[w];p["".concat(E.key,"-").concat(E.typeData.type).concat(E.typeData.isArray?"(Array)":"")]={name:E.typeData.type}}n(e,{inputs:d,inputType:h,outputs:p}),r(e)},[s,l,o]),f.jsxs(nn,{title:"Spread Object",children:[f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t==null?void 0:t.name]}),f.jsx("p",{style:{textAlign:"right"},children:"Spread"}),(u=t==null?void 0:t.properties)==null?void 0:u.map(d=>f.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",d.typeData.type,d.typeData.isArray?"[]":"",") ",d.key]},d.key)),f.jsx($e,{type:"target",id:"input-object",position:ve.Left,style:{top:80,bottom:"auto"}}),(c=t==null?void 0:t.properties)==null?void 0:c.map((d,h)=>f.jsx($e,{type:"source",id:"".concat(d.key,"-").concat(d.typeData.type).concat(d.typeData.isArray?"(Array)":""),position:ve.Right,style:{top:130+26*h,bottom:"auto"}},d.key))]})}const _V=k.memo(xV);function EV({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=cn();return f.jsxs(nn,{title:"String Includes",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"String 1"}),f.jsx("p",{style:{marginTop:5},children:"String 2"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) Included?"}),f.jsx($e,{type:"target",id:"string1-string",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"string2-string",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-boolean",position:ve.Right,style:{top:136,bottom:"auto"}})]})}const SV=k.memo(EV);function kV(e){return f.jsxs(nn,{title:"String Compare",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"String 1"}),f.jsx("p",{style:{marginTop:5},children:"String 2"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),f.jsx($e,{type:"target",id:"string1-string",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"string2-string",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-boolean",position:ve.Right,style:{top:136,bottom:"auto"}})]})}const CV=k.memo(kV);function jV({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=cn();return f.jsxs(nn,{title:"Concat String",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"String 1"}),f.jsx("p",{style:{marginTop:5},children:"String 2"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(string) concated string"}),f.jsx($e,{type:"target",id:"string1-string",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"string2-string",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-string",position:ve.Right,style:{top:136,bottom:"auto"}})]})}const AV=k.memo(jV);function RV({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId);return Po({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),k.useEffect(()=>{o&&r(e)},[o,t]),f.jsxs(nn,{title:"Remove Item In Array",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{marginTop:5},children:"name (string)"}),f.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),f.jsx($e,{type:"target",id:"base-array",position:ve.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",id:"name-string",position:ve.Left,style:{top:106,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-".concat(t,"(Array)"),position:ve.Right,style:{top:130,bottom:"auto"}})]})]})}const NV=k.memo(RV);function TV({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId);return Po({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),k.useEffect(()=>{o&&r(e)},[o,t]),f.jsxs(nn,{title:"Add Item To Array",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{style:{marginTop:5},children:["new Item (",t,")"]}),f.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),f.jsx($e,{type:"target",id:"base-array",position:ve.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",id:"newItem-".concat(t),position:ve.Left,style:{top:106,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-".concat(t,"(Array)"),position:ve.Right,style:{top:130,bottom:"auto"}})]})]})}const IV=k.memo(TV);function PV({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId);return Po({handleType:"target",handleId:"input-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),k.useEffect(()=>{o&&r(e)},[o,t]),f.jsxs(nn,{title:"Filter Array",children:[f.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),f.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),f.jsx("p",{style:{textAlign:"left",marginTop:5},children:"Filtered? (boolean)"}),f.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"Filtered Array"})]}),f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"target",id:"input-array",position:ve.Left,style:{top:65,bottom:"auto"}}),f.jsx($e,{type:"source",id:"loop-node",position:ve.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",id:"loopcompleted-node",position:ve.Left,style:{top:125,bottom:"auto"}}),f.jsx($e,{type:"target",id:"filtered?-boolean",position:ve.Left,style:{top:150,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-".concat(t),position:ve.Right,style:{top:188,bottom:"auto"}}),f.jsx($e,{type:"source",id:"completed-node",position:ve.Right,style:{top:228,bottom:"auto"}}),f.jsx($e,{type:"source",id:"filterd-".concat(t,"(Array)"),position:ve.Right,style:{top:255,bottom:"auto"}})]})]})}const OV=k.memo(PV);function $V({id:e,data:{inputType:t,mapType:n}}){const{updateNodeData:r}=cn(),i=qr(),o=un.useValue(),s=Vn(o.versionId);return Po({handleType:"target",handleId:"input-array",onConnect:a=>{const l=a[0];if(!l||!l.sourceHandle)return;const u=l.sourceHandle.split("-")[1];if(!u)return;const c=u.split("(")[0];c&&(r(e,{inputType:c}),i(e))},onDisconnect:()=>{r(e,{inputType:"unknown"}),i(e)}}),f.jsxs(nn,{title:"Map Array",children:[f.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),f.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),f.jsx(ht,{id:"map-type-".concat(e),label:"Input Type",value:n,onChange:a=>{r(e,{mapType:a}),i(e)},children:s==null?void 0:s.data.types.map(a=>f.jsx("option",{value:a.name,children:a.name},a.name))}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),f.jsxs("p",{style:{textAlign:"left",marginTop:5},children:["item (",n,")"]}),f.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"New Array"})]}),f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"target",id:"input-array",position:ve.Left,style:{top:65,bottom:"auto"}}),f.jsx($e,{type:"source",id:"loop-node",position:ve.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",id:"loopcompleted-node",position:ve.Left,style:{top:125,bottom:"auto"}}),f.jsx($e,{type:"target",id:"newitem-".concat(t),position:ve.Left,style:{top:150,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-".concat(t),position:ve.Right,style:{top:188,bottom:"auto"}}),f.jsx($e,{type:"source",id:"completed-node",position:ve.Right,style:{top:228,bottom:"auto"}}),f.jsx($e,{type:"source",id:"filterd-".concat(n,"(Array)"),position:ve.Right,style:{top:255,bottom:"auto"}})]})]})}const MV=k.memo($V);function DV({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId);return Po({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),k.useEffect(()=>{o&&r(e)},[o,t]),f.jsxs(nn,{title:"Update Item In Array",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{marginTop:5},children:"name (string)"}),f.jsxs("p",{style:{marginTop:10},children:["new Item (",t,")"]}),f.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),f.jsx($e,{type:"target",id:"base-array",position:ve.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",id:"name-string",position:ve.Left,style:{top:106,bottom:"auto"}}),f.jsx($e,{type:"target",id:"newItem-".concat(t),position:ve.Left,style:{top:138,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-".concat(t,"(Array)"),position:ve.Right,style:{top:162,bottom:"auto"}})]})]})}const LV=k.memo(DV);function BV({id:e,data:{inputType:t}}){const{updateNodeData:n}=cn(),r=qr(),i=un.useValue(),o=Vn(i.versionId),s=Po(),a=k.useMemo(()=>s.filter(u=>u.source!==e).map(u=>u.source),[s]),l=Wy(a);return k.useEffect(()=>{var d,h,p,b;let u={};for(let g=0;g<s.length;g++){const x=s[g];if((x.source===e?"output":"input")==="output")continue;const v=l.find(E=>E.id===x.source);if(!(v!=null&&v.data)||!(v!=null&&v.data.outputs))continue;console.log(x.sourceHandle);const w=((d=v==null?void 0:v.data)==null?void 0:d.outputs)[(h=x.sourceHandle)!=null?h:""];console.log(w),u[(p=x.targetHandle)!=null?p:""]=w}console.log(u);const c=((b=u["base-array"])!=null?b:{name:"unknown"}).name;n(e,{inputs:u,inputType:c,outputs:{["output-".concat(c)]:o==null?void 0:o.data.types.find(g=>g.name===c)}}),r(e)},[s,l,Ih]),k.useEffect(()=>{o&&r(e)},[o,t]),f.jsxs(nn,{title:"Get Item In Array",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{marginTop:5},children:"name (string)"}),f.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t," Item"]})]}),f.jsx($e,{type:"target",id:"base-array",position:ve.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&f.jsxs(f.Fragment,{children:[f.jsx($e,{type:"target",id:"name-string",position:ve.Left,style:{top:106,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-".concat(t),position:ve.Right,style:{top:130,bottom:"auto"}})]})]})}const FV=k.memo(BV);function zV({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return f.jsxs(nn,{title:"Number",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(Xt,{id:"number-".concat(e),label:"String Value",value:t.toString(),onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),f.jsx($e,{type:"source",id:"output-number",position:ve.Right,style:{top:100,bottom:"auto"}})]})}const HV=k.memo(zV);function UV(e){return f.jsxs(nn,{title:"Subtract",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"number 1"}),f.jsx("p",{style:{marginTop:5},children:"number 2"}),f.jsx("p",{style:{marginTop:5},children:"output"}),f.jsx($e,{type:"target",id:"number1-number",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"number2-number",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-number",position:ve.Right,style:{top:135,bottom:"auto"}})]})}const WV=k.memo(UV);function VV(e){return f.jsxs(nn,{title:"Divide",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"number 1"}),f.jsx("p",{style:{marginTop:5},children:"number 2"}),f.jsx("p",{style:{marginTop:5},children:"output"}),f.jsx($e,{type:"target",id:"number1-number",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"number2-number",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-number",position:ve.Right,style:{top:135,bottom:"auto"}})]})}const qV=k.memo(VV);function KV(e){return f.jsxs(nn,{title:"Floor",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"number"}),f.jsx("p",{style:{marginTop:5},children:"output"}),f.jsx($e,{type:"target",id:"input-number",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-number",position:ve.Right,style:{top:110,bottom:"auto"}})]})}const GV=k.memo(KV);function YV(e){return f.jsxs(nn,{title:"Add",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"number 1"}),f.jsx("p",{style:{marginTop:5},children:"number 2"}),f.jsx("p",{style:{marginTop:5},children:"output"}),f.jsx($e,{type:"target",id:"number1-number",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"number2-number",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-number",position:ve.Right,style:{top:135,bottom:"auto"}})]})}const XV=k.memo(YV);function JV(e){return f.jsxs(nn,{title:"Multiply",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"number 1"}),f.jsx("p",{style:{marginTop:5},children:"number 2"}),f.jsx("p",{style:{marginTop:5},children:"output"}),f.jsx($e,{type:"target",id:"number1-number",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"number2-number",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-number",position:ve.Right,style:{top:135,bottom:"auto"}})]})}const QV=k.memo(JV);function ZV(e){return f.jsxs(nn,{title:"Number To String",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"number"}),f.jsx("p",{style:{marginTop:5,textAlign:"right"},children:"string"}),f.jsx($e,{type:"target",id:"input-number",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-string",position:ve.Right,style:{top:110,bottom:"auto"}})]})}const eq=k.memo(ZV);function tq(e){return f.jsxs(nn,{title:"Enum Compare",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"Enum 1"}),f.jsx("p",{style:{marginTop:5},children:"Enum 2"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),f.jsx($e,{type:"target",id:"enum1-enum",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"target",id:"enum2-enum",position:ve.Left,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"output-boolean",position:ve.Right,style:{top:136,bottom:"auto"}})]})}const nq=k.memo(tq);function rq({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return f.jsxs(nn,{title:"Enum",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(Xt,{id:"enum-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),f.jsx($e,{type:"source",id:"output-enum",position:ve.Right,style:{top:100,bottom:"auto"}})]})}const iq=k.memo(rq);function oq(e){return f.jsxs(nn,{title:"Branch",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"true"}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"false"}),f.jsx($e,{type:"target",id:"input-boolean",position:ve.Left,style:{top:85,bottom:"auto"}}),f.jsx($e,{type:"source",id:"true-node",position:ve.Right,style:{top:110,bottom:"auto"}}),f.jsx($e,{type:"source",id:"false-node",position:ve.Right,style:{top:136,bottom:"auto"}})]})}const sq=k.memo(oq);function aq(e){return f.jsxs(nn,{title:"Inverse Boolean",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),f.jsx($e,{type:"target",id:"input-boolean",position:ve.Left,style:{top:80,bottom:"auto"}}),f.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) output"}),f.jsx($e,{type:"source",id:"output-boolean",position:ve.Right,style:{top:55,bottom:"auto"}})]})}const lq=k.memo(aq);function uq({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return f.jsxs(nn,{title:"String",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(Xt,{id:"string-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),f.jsx($e,{type:"source",id:"output-string",position:ve.Right,style:{top:100,bottom:"auto"}})]})}const cq=k.memo(uq),Yn=({id:e,label:t,checked:n,onChange:r})=>f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{id:e,type:"checkbox",checked:n,onChange:()=>r(!n),className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-brand-500 dark:focus:ring-brand-600 dark:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600"}),f.jsx("label",{htmlFor:e,className:"ms-2 text-sm font-medium text-neutral-900 dark:text-neutral-300",children:t})]});function dq({id:e,data:{value:t}}){const{updateNodeData:n}=cn();return f.jsxs(nn,{title:"Boolean",children:[f.jsx($e,{type:"target",id:"prev-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx(Yn,{id:"boolean-".concat(e),label:"Value",checked:t,onChange:r=>n(e,{value:r})}),f.jsx($e,{type:"source",id:"output-boolean",position:ve.Right,style:{top:100,bottom:"auto"}})]})}const fq=k.memo(dq);function _m(e){return e.nodes.find(n=>n.type==="output").data.inputType}function MO(e){return e.nodes.find(t=>t.type==="entry")}function hq(e){return MO(e).data.params}const pq=({id:e,data:{params:t,returnType:n,inputs:r,outputs:i}})=>{const{updateNodeData:o}=cn(),s=qr(),a=Po(),l=k.useMemo(()=>a.filter(c=>c.source!==e).map(c=>c.source),[a]),u=Wy(l);return k.useEffect(()=>{var b,g;let c={};for(let x=0;x<a.length;x++){const y=a[x];if((y.source===e?"output":"input")==="output")continue;const w=u.find(S=>S.id===y.source);if(w!=null&&w.data||w!=null&&w.data.outputs)continue;const E=((b=w==null?void 0:w.data)==null?void 0:b.outputs)[y.sourceHandle||""];c[y.targetHandle||""]=E}const d=(g=c["data-blueprint"])==null?void 0:g.data;let h=[],p="none";d&&(h=hq(d),p=_m(d)),o(e,{inputs:c,params:h,returnType:p}),s(e)},[a,u]),f.jsxs(nn,{title:"Run Blueprint",children:[f.jsx($e,{type:"target",id:"from-node",position:ve.Left,style:{top:30,bottom:"auto"}}),f.jsx($e,{type:"source",id:"next-node",position:ve.Right,style:{top:30,bottom:"auto"}}),f.jsx("p",{style:{marginTop:10},children:"blueprint"}),f.jsx($e,{type:"target",id:"data-blueprint",position:ve.Left,style:{top:60,bottom:"auto"}}),t.map((c,d)=>{const h="".concat(c.type).concat(c.isArray?"(Array)":"");return f.jsxs("div",{children:[f.jsxs("p",{children:[c.name," ",h]}),f.jsx($e,{type:"target",id:"".concat(c.name,"-").concat(h),position:ve.Left,style:{top:70+10*d,bottom:"auto"}})]},c.name)}),n!=="none"&&f.jsxs("div",{children:[f.jsxs("p",{children:["output ",n]}),f.jsx($e,{type:"source",id:"output-".concat(n),position:ve.Right,style:{top:80+10*t.length,bottom:"auto"}})]})]})},gq=k.memo(pq),mq={entry:GU,output:iW,get_character_data:XU,set_character_data:mV,get_page_data:QU,set_page_data:vV,get_system_data:eW,set_system_data:wV,add_to_array:IV,array_remove:NV,array_update:LV,array_get:FV,filter:OV,map:MV,spread_object:_V,create_data_from_type:qU,string_new:cq,string_includes:SV,string_compare:CV,string_concat:AV,new_number:HV,number_to_string:eq,divide:qV,add:XV,subtract:WV,multiply:QV,floor:GV,new_enum:iq,enum_compare:nq,boolean_new:fq,boolean_branch:sq,boolean_inverse:lq,open_modal:nW,blueprint_run:gq},t2={primary:"text-white bg-brand-700 hover:bg-brand-800 focus:ring-brand-300 dark:bg-brand-600 dark:hover:bg-brand-700 dark:focus:ring-brand-800 border-brand-700",light:"text-neutral-900 bg-white border-neutral-300 hover:bg-neutral-100 focus:ring-neutral-100 dark:bg-neutral-800 dark:text-white dark:border-neutral-600 dark:hover:bg-neutral-700 dark:hover:border-neutral-600 dark:focus:ring-neutral-700",danger:"border-red-600 text-red-600 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-red-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition",disabled:"border-neutral-600 bg-neutral-400 text-neutral-700 cursor-not-allowed opacity-50"},Rt=({children:e,className:t="",color:n,disabled:r=!1,onClick:i,id:o})=>f.jsx("button",{id:o,type:"button",className:"".concat(r?t2.disabled:t2[n]," me-2.5 focus:ring-4 border focus:outline-none font-medium rounded-lg transition text-sm px-5 py-2.5 text-center ").concat(t),onClick:r?void 0:i,children:e});function yq(e){const[t,n]=k.useState(e.nodes),[r,i]=k.useState(e.edges);function o(l){n(GP(l,t))}function s(l){i(YP(l,r))}function a(l){i(CP(l,r))}return{nodes:t,edges:r,onNodesChange:o,onEdgesChange:s,onConnect:a}}const vq=e=>{if(!e.sourceHandle||!e.targetHandle)return!1;const t=e.sourceHandle.split("-")[1],n=e.targetHandle.split("-")[1];return!t||!n?!1:n==="object"&&!["string","number","boolean","enum","blueprint"].includes(t)||n==="array"&&t.endsWith("(Array)")||n==="any"||t==="any"?!0:t===n},bq=({title:e,isVisible:t,requestClose:n,data:r,onSave:i})=>{const[o,s]=k.useState(null),[a,l]=k.useState(null),u=k.useRef(null),{nodes:c,edges:d,onNodesChange:h,onEdgesChange:p,onConnect:b}=yq(r),g=k.useCallback((w,E)=>{if(w.preventDefault(),!u||!u.current)return;const S=u.current.getBoundingClientRect();s({id:E.id,top:w.clientY<S.height-200&&w.clientY,left:w.clientX<S.width-200&&w.clientX,right:w.clientX>=S.width-200&&S.width-w.clientX,bottom:w.clientY>=S.height-200&&S.height-w.clientY}),l(null)},[s]),x=k.useCallback(async({nodes:w,edges:E})=>!w.find(S=>["entry","output"].includes(S.type)),[]),y=k.useCallback(w=>{if(w.preventDefault(),!u||!u.current)return;const E=u.current.getBoundingClientRect();l({top:w.clientY<E.height-200&&w.clientY,left:w.clientX<E.width-200&&w.clientX,right:w.clientX>=E.width-200&&E.width-w.clientX,bottom:w.clientY>=E.height-200&&E.height-w.clientY,rawX:w.clientX,rawY:w.clientY}),s(null)},[l]),v=k.useCallback(()=>{s(null),l(null)},[s,l]);return f.jsx("div",{className:"".concat(t?"flex":"hidden"," z-50 absolute top-0 left-0 w-screen h-screen"),children:f.jsxs(eU,{ref:u,nodes:c,edges:d,onNodesChange:h,onEdgesChange:p,onConnect:b,onBeforeDelete:x,isValidConnection:vq,onPaneClick:v,onNodeContextMenu:g,onPaneContextMenu:y,nodeTypes:mq,colorMode:"system",children:[f.jsx(CU,{}),f.jsx(sU,{}),f.jsx(hU,{}),o&&f.jsx(AU,{onClick:v,...o}),a&&f.jsx(NU,{onClick:v,...a}),f.jsxs(Nh,{position:"top-right",children:[f.jsx(Rt,{color:"danger",onClick:n,children:"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{i({nodes:c,edges:d}),console.log({nodes:c,edges:d}),n()},children:"Confirm"})]})]})})};var DO=Symbol.for("immer-nothing"),n2=Symbol.for("immer-draftable"),Fi=Symbol.for("immer-state");function wo(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Sc=Object.getPrototypeOf;function kc(e){return!!e&&!!e[Fi]}function Gl(e){var t;return e?LO(e)||Array.isArray(e)||!!e[n2]||!!((t=e.constructor)!=null&&t[n2])||Yy(e)||Xy(e):!1}var wq=Object.prototype.constructor.toString();function LO(e){if(!e||typeof e!="object")return!1;const t=Sc(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===wq}function Em(e,t){Gy(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Gy(e){const t=e[Fi];return t?t.type_:Array.isArray(e)?1:Yy(e)?2:Xy(e)?3:0}function Cx(e,t){return Gy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function BO(e,t,n){const r=Gy(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function xq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Yy(e){return e instanceof Map}function Xy(e){return e instanceof Set}function yl(e){return e.copy_||e.base_}function jx(e,t){if(Yy(e))return new Map(e);if(Xy(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=LO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Fi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Sc(e),r)}else{const r=Sc(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function lE(e,t=!1){return Jy(e)||kc(e)||!Gl(e)||(Gy(e)>1&&(e.set=e.add=e.clear=e.delete=_q),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>lE(r,!0))),e}function _q(){wo(2)}function Jy(e){return Object.isFrozen(e)}var Eq={};function Yl(e){const t=Eq[e];return t||wo(0,e),t}var Jf;function FO(){return Jf}function Sq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function r2(e,t){t&&(Yl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ax(e){Rx(e),e.drafts_.forEach(kq),e.drafts_=null}function Rx(e){e===Jf&&(Jf=e.parent_)}function i2(e){return Jf=Sq(Jf,e)}function kq(e){const t=e[Fi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function o2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Fi].modified_&&(Ax(t),wo(4)),Gl(e)&&(e=Sm(t,e),t.parent_||km(t,e)),t.patches_&&Yl("Patches").generateReplacementPatches_(n[Fi].base_,e,t.patches_,t.inversePatches_)):e=Sm(t,n,[]),Ax(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==DO?e:void 0}function Sm(e,t,n){if(Jy(t))return t;const r=t[Fi];if(!r)return Em(t,(i,o)=>s2(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return km(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),Em(o,(a,l)=>s2(e,r,i,a,l,n,s)),km(e,i,!1),n&&e.patches_&&Yl("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function s2(e,t,n,r,i,o,s){if(kc(i)){const a=o&&t&&t.type_!==3&&!Cx(t.assigned_,r)?o.concat(r):void 0,l=Sm(e,i,a);if(BO(n,r,l),kc(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Gl(i)&&!Jy(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Sm(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&km(e,i)}}function km(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lE(t,n)}function Cq(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:FO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=uE;n&&(i=[r],o=Qf);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var uE={get(e,t){if(t===Fi)return e;const n=yl(e);if(!Cx(n,t))return jq(e,n,t);const r=n[t];return e.finalized_||!Gl(r)?r:r===X0(e.base_,t)?(J0(e),e.copy_[t]=Tx(r,e)):r},has(e,t){return t in yl(e)},ownKeys(e){return Reflect.ownKeys(yl(e))},set(e,t,n){const r=zO(yl(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=X0(yl(e),t),o=i==null?void 0:i[Fi];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(xq(n,i)&&(n!==void 0||Cx(e.base_,t)))return!0;J0(e),Nx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return X0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,J0(e),Nx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=yl(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){wo(11)},getPrototypeOf(e){return Sc(e.base_)},setPrototypeOf(){wo(12)}},Qf={};Em(uE,(e,t)=>{Qf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Qf.deleteProperty=function(e,t){return Qf.set.call(this,e,t,void 0)};Qf.set=function(e,t,n){return uE.set.call(this,e[0],t,n,e[0])};function X0(e,t){const n=e[Fi];return(n?yl(n):e)[t]}function jq(e,t,n){var i;const r=zO(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function zO(e,t){if(!(t in e))return;let n=Sc(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Sc(n)}}function Nx(e){e.modified_||(e.modified_=!0,e.parent_&&Nx(e.parent_))}function J0(e){e.copy_||(e.copy_=jx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Aq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&wo(6),r!==void 0&&typeof r!="function"&&wo(7);let i;if(Gl(t)){const o=i2(this),s=Tx(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?Ax(o):Rx(o)}return r2(o,r),o2(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===DO&&(i=void 0),this.autoFreeze_&&lE(i,!0),r){const o=[],s=[];Yl("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else wo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Gl(e)||wo(8),kc(e)&&(e=Rq(e));const t=i2(this),n=Tx(e,void 0);return n[Fi].isManual_=!0,Rx(t),n}finishDraft(e,t){const n=e&&e[Fi];(!n||!n.isManual_)&&wo(9);const{scope_:r}=n;return r2(r,t),o2(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Yl("Patches").applyPatches_;return kc(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Tx(e,t){const n=Yy(e)?Yl("MapSet").proxyMap_(e,t):Xy(e)?Yl("MapSet").proxySet_(e,t):Cq(e,t);return(t?t.scope_:FO()).drafts_.push(n),n}function Rq(e){return kc(e)||wo(10,e),HO(e)}function HO(e){if(!Gl(e)||Jy(e))return e;const t=e[Fi];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jx(e,t.scope_.immer_.useStrictShallowCopy_)}else n=jx(e,!0);return Em(n,(r,i)=>{BO(n,r,HO(i))}),t&&(t.finalized_=!1),n}var zi=new Aq,On=zi.produce;zi.produceWithPatches.bind(zi);zi.setAutoFreeze.bind(zi);zi.setUseStrictShallowCopy.bind(zi);zi.applyPatches.bind(zi);zi.createDraft.bind(zi);zi.finishDraft.bind(zi);function cE(e,t,n){const r=t.split("/");if(!r.length)return e;const i=r.pop(),o=r.reduce((s,a)=>{if(s)return Array.isArray(s)?(s=s.find(l=>l.name===a),s||void 0):s[a]},e);if(!o)return e;if(Array.isArray(o)){const s=o.findIndex(a=>a.name===i);if(s===-1)return e;o[s]=n}else o[i]=n;return e}function Zf(e,t){if(t.isArray)return[];switch(t.type){case"string":return"Lorem Ipsum";case"number":return 1;case"boolean":return!1;case"enum":return t.options?[t.options[0]]:["undefined options"];case"blueprint":return{nodes:Hr(t.inputs,t.outputType!=="none"?{name:"output",type:t.outputType||"none",isArray:t.isOutputAnArray||!1}:void 0),edges:[]};default:const n=e.find(r=>r.name===t.type);return n?eh(e,n):"Type ".concat(t.type," not found.")}}function eh(e,t){if(typeof t=="string")return Zf(e,{type:t,isArray:!1,options:[],isOutputAnArray:!1,inputs:[],outputType:"none"});let n={_type:{...t}};for(let r=0;r<t.properties.length;r++){const i=t.properties[r];let o=i.typeData;n[i.key]=Zf(e,o)}return n}const Ph=()=>f.jsx("div",{className:"h-px w-full bg-neutral-200 dark:bg-neutral-700"}),sr=({children:e,isOpen:t,onClose:n})=>f.jsx("div",{tabIndex:-1,"aria-hidden":"true",className:"".concat(t?"flex":"hidden"," bg-black/70 overflow-y-auto overflow-x-hidden absolute top-0 right-0 left-0 bottom-0 z-50 justify-center items-center w-full md:inset-0 h-screen max-h-full"),children:f.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",onClick:r=>r.stopPropagation(),children:f.jsx("div",{className:"relative bg-white rounded-lg shadow dark:bg-neutral-800",children:e})})}),ar=({title:e,onClose:t})=>f.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-neutral-700",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e}),t&&f.jsxs("button",{type:"button",onClick:t,className:"text-neutral-400 bg-transparent hover:bg-neutral-200 hover:text-neutral-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-neutral-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[f.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),f.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),lr=({children:e,className:t=""})=>f.jsx("div",{className:t||"p-4 md:p-5 space-y-4",children:e}),hr=({children:e})=>f.jsx("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-neutral-700",children:e}),dE=({id:e,label:t,value:n,onChange:r})=>f.jsxs("div",{children:[f.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:t}),f.jsx("textarea",{id:e,rows:4,value:n,onChange:i=>r(i.target.value),className:"block p-2.5 w-full text-sm text-neutral-900 bg-neutral-50 rounded-lg border border-neutral-300 focus:ring-brand-500 focus:border-brand-500 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-brand-500 dark:focus:border-brand-500"})]});function fE({title:e,onDelete:t,onSave:n,isVisible:r,requestClose:i,data:o,types:s,type:a,typeData:l}){const[u,c]=k.useState(null),d=(h,p,b)=>{c(On(p,g=>(h?cE(g,h,b):g=b,g)))};return k.useEffect(()=>{c(o||null)},[o,c]),u?f.jsxs(sr,{isOpen:r,onClose:i,children:[f.jsx(ar,{title:e,onClose:i}),f.jsx(lr,{children:a&&l?hE(s,a,u,u,l,"",d):Nq(u,s,d)}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{t&&t(),i()},children:t?"Delete":"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{n(u),i()},children:"Update"})]})]}):f.jsx(f.Fragment,{})}function Nq(e,t,n){return f.jsx("div",{children:e._type.properties.map(r=>{const i=r.key,o=e[i];let a=r.typeData.type;return f.jsx("div",{children:hE(t,a,o,e,r.typeData,i,n)},i)})})}function hE(e,t,n,r,i,o,s){var l;const a=e.find(u=>u.name===t);if(t&&i.isArray)return f.jsx(Tq,{types:e,type:a,title:o,data:n,onAdd:u=>s(o,r,[...n,u]),onChange:(u,c)=>s(u,r,c),onDelete:u=>s(o,r,n.filter(c=>c.name!==u))});switch(t){case"string":return i.useTextArea?f.jsx(dE,{id:o,label:o,value:n,onChange:u=>s(o,r,u)}):f.jsx(Xt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,u)});case"number":return f.jsx(Xt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,+u)});case"boolean":return f.jsx(Yn,{id:o,label:o,checked:n,onChange:u=>s(o,r,u)});case"enum":return f.jsx(ht,{id:o,label:o,value:n,onChange:u=>s(o,r,u),children:(l=i.options)==null?void 0:l.map(u=>f.jsx("option",{value:u,children:u},u))});case"blueprint":return f.jsxs(Rt,{color:"light",onClick:()=>dn({title:"Edit Blueprint",type:"blueprint",data:n,onSave:u=>s(o,r,u)}),children:["Edit ",o]},o);default:return f.jsxs("div",{className:"mb-2",children:[f.jsx("p",{className:"my-2",children:o}),f.jsx(Ph,{}),f.jsx("div",{className:"h-2"}),a.properties.map(u=>{var c;return hE(e,u.typeData.type,(c=n[u.key])!=null?c:"",r,u.typeData,u.key,(d,h,p)=>{console.log("".concat(o,"/").concat(d)),console.table(h),s("".concat(o,"/").concat(d),h,p)})})]},o)}}function Tq({title:e,data:t,type:n,types:r,onAdd:i,onChange:o,onDelete:s}){const[a,l]=k.useState(null);return f.jsxs("div",{className:"mt-3",children:[f.jsx(fE,{types:r,title:"Edit ".concat(a==null?void 0:a.name),onDelete:()=>s(a==null?void 0:a.name),onSave:u=>{const c=[...t],d=c.findIndex(h=>h.name===(a==null?void 0:a.name));c[d]=u,o("".concat(e),c)},isVisible:a!==null,requestClose:()=>l(null),data:a}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("p",{children:e}),f.jsx("p",{onClick:()=>i(eh(r,n)),children:"Add"})]}),f.jsx(Ph,{}),f.jsx("div",{className:"flex flex-col gap-1 mt-3",children:t.map(u=>f.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>l(u),children:f.jsx("p",{children:u.name})},u.name))})]},a==null?void 0:a.name)}function Iq({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){var u;const o=un.useValue(),s=Vn(o.versionId),[a,l]=k.useState({name:"New Param",type:"string",isArray:!1});return k.useEffect(()=>{e&&l(e)},[e]),f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:"Edit Type Property",onClose:n}),f.jsxs(lr,{children:[f.jsx(Xt,{id:"name",label:"Name",placeholder:"baba yaga",value:a.name,onChange:c=>l({...a,name:c}),isValid:!0,errorMessage:""}),f.jsxs(ht,{id:"type",label:"Type",value:a.type,onChange:c=>l({...a,type:c}),children:[f.jsx("option",{value:"none",children:"none"}),f.jsx("option",{value:"string",children:"string"}),f.jsx("option",{value:"number",children:"number"}),f.jsx("option",{value:"boolean",children:"boolean"}),f.jsx("option",{value:"enum",children:"enum"}),f.jsx("option",{value:"blueprint",children:"blueprint"}),(u=s==null?void 0:s.data)==null?void 0:u.types.map(c=>f.jsx("option",{value:c.name,children:c.name},c.name))]}),f.jsx(Yn,{id:"is-array",label:"Is Array?",checked:a.isArray,onChange:c=>l({...a,isArray:c})})]}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{i&&i(),n()},children:i?"Delete":"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{if(!e)return n();r(a),n()},children:"Update"})]})]})}function Oh({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o}){const[s,a]=k.useState("");return k.useEffect(()=>{e&&a(e)},[e]),f.jsxs(sr,{isOpen:n,onClose:r,children:[f.jsx(ar,{title:t,onClose:r}),f.jsx(lr,{children:f.jsx(Xt,{id:"name",label:"Name",placeholder:"baba yaga",value:s,onChange:a,isValid:!0,errorMessage:""})}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{o&&o(),r()},children:o?"Delete":"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{if(!s)return r();i(s),r()},children:"Update"})]})]})}function Pq({data:e,title:t="Edit Number",isOpen:n,requestClose:r,onSave:i,onDelete:o}){const[s,a]=k.useState("");return k.useEffect(()=>{e&&a(e)},[e]),f.jsxs(sr,{isOpen:n,onClose:r,children:[f.jsx(ar,{title:t,onClose:r}),f.jsx(lr,{children:f.jsx(Xt,{type:"number",id:"name",label:"Name",placeholder:"baba yaga",value:s,onChange:a,isValid:!0,errorMessage:""})}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{o&&o(),r()},children:o?"Delete":"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{if(!s)return r();i(s),r()},children:"Update"})]})]})}const Oq=({isOpen:e,title:t,data:n,requestClose:r,onConfirm:i})=>e?f.jsxs(sr,{isOpen:e,onClose:r,children:[f.jsx(ar,{title:t,onClose:r}),f.jsx(lr,{className:"text-center",children:f.jsxs("div",{className:"p-4",children:[f.jsx("p",{className:"text-lg font-medium mb-2",children:n.message}),f.jsx("p",{className:"text-sm font-semibold text-red-500",children:"This action cannot be undone."})]})}),f.jsx(hr,{children:f.jsx(Rt,{color:n.type,onClick:()=>{i(void 0),r()},children:"Confirm"})})]}):null,$q=({data:e,isOpen:t,requestClose:n,onSave:r})=>{if(!t||!e||e.length===0)return null;const[i,o]=k.useState(0),[s,a]=k.useState(e[0]),[l,u]=k.useState([]),c=d=>{u([...l,d]);const h=i+1;o(h),a(e[h]),h>=e.length&&(r(l),n())};return f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:"Conflicts for Local:".concat(s.local.name," / Remote:").concat(s.remote.name),onClose:n}),f.jsx(lr,{className:"text-center",children:f.jsxs("div",{className:"p-4",children:[f.jsxs("p",{className:"text-lg font-medium mb-2",children:["Local last updated ",s.local.updated_at]}),f.jsxs("p",{className:"text-lg font-medium mb-2",children:["Remote last updated ",s.remote.updated_at]})]})}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"light",onClick:()=>c(s.local),children:"Keep Local"}),f.jsx(Rt,{color:"primary",onClick:()=>c(s.remote),children:"Keep Remote"})]})]})};function UO(e,t){return function(){return e.apply(t,arguments)}}const{toString:Mq}=Object.prototype,{getPrototypeOf:pE}=Object,{iterator:Qy,toStringTag:WO}=Symbol,Zy=(e=>t=>{const n=Mq.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Oo=e=>(e=e.toLowerCase(),t=>Zy(t)===e),ev=e=>t=>typeof t===e,{isArray:Fc}=Array,th=ev("undefined");function Dq(e){return e!==null&&!th(e)&&e.constructor!==null&&!th(e.constructor)&&xi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const VO=Oo("ArrayBuffer");function Lq(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&VO(e.buffer),t}const Bq=ev("string"),xi=ev("function"),qO=ev("number"),tv=e=>e!==null&&typeof e=="object",Fq=e=>e===!0||e===!1,wg=e=>{if(Zy(e)!=="object")return!1;const t=pE(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(WO in e)&&!(Qy in e)},zq=Oo("Date"),Hq=Oo("File"),Uq=Oo("Blob"),Wq=Oo("FileList"),Vq=e=>tv(e)&&xi(e.pipe),qq=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||xi(e.append)&&((t=Zy(e))==="formdata"||t==="object"&&xi(e.toString)&&e.toString()==="[object FormData]"))},Kq=Oo("URLSearchParams"),[Gq,Yq,Xq,Jq]=["ReadableStream","Request","Response","Headers"].map(Oo),Qq=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $h(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Fc(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let a;for(r=0;r<s;r++)a=o[r],t.call(null,e[a],a,e)}}function KO(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Al=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GO=e=>!th(e)&&e!==Al;function Ix(){const{caseless:e}=GO(this)&&this||{},t={},n=(r,i)=>{const o=e&&KO(t,i)||i;wg(t[o])&&wg(r)?t[o]=Ix(t[o],r):wg(r)?t[o]=Ix({},r):Fc(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&$h(arguments[r],n);return t}const Zq=(e,t,n,{allOwnKeys:r}={})=>($h(t,(i,o)=>{n&&xi(i)?e[o]=UO(i,n):e[o]=i},{allOwnKeys:r}),e),eK=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),tK=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},nK=(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=n!==!1&&pE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},rK=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},iK=e=>{if(!e)return null;if(Fc(e))return e;let t=e.length;if(!qO(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},oK=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&pE(Uint8Array)),sK=(e,t)=>{const r=(e&&e[Qy]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},aK=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},lK=Oo("HTMLFormElement"),uK=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),a2=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),cK=Oo("RegExp"),YO=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};$h(n,(i,o)=>{let s;(s=t(i,o,e))!==!1&&(r[o]=s||i)}),Object.defineProperties(e,r)},dK=e=>{YO(e,(t,n)=>{if(xi(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(xi(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},fK=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Fc(e)?r(e):r(String(e).split(t)),n},hK=()=>{},pK=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gK(e){return!!(e&&xi(e.append)&&e[WO]==="FormData"&&e[Qy])}const mK=e=>{const t=new Array(10),n=(r,i)=>{if(tv(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=Fc(r)?[]:{};return $h(r,(s,a)=>{const l=n(s,i+1);!th(l)&&(o[a]=l)}),t[i]=void 0,o}}return r};return n(e,0)},yK=Oo("AsyncFunction"),vK=e=>e&&(tv(e)||xi(e))&&xi(e.then)&&xi(e.catch),XO=((e,t)=>e?setImmediate:t?((n,r)=>(Al.addEventListener("message",({source:i,data:o})=>{i===Al&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Al.postMessage(n,"*")}))("axios@".concat(Math.random()),[]):n=>setTimeout(n))(typeof setImmediate=="function",xi(Al.postMessage)),bK=typeof queueMicrotask<"u"?queueMicrotask.bind(Al):typeof process<"u"&&process.nextTick||XO,wK=e=>e!=null&&xi(e[Qy]),ze={isArray:Fc,isArrayBuffer:VO,isBuffer:Dq,isFormData:qq,isArrayBufferView:Lq,isString:Bq,isNumber:qO,isBoolean:Fq,isObject:tv,isPlainObject:wg,isReadableStream:Gq,isRequest:Yq,isResponse:Xq,isHeaders:Jq,isUndefined:th,isDate:zq,isFile:Hq,isBlob:Uq,isRegExp:cK,isFunction:xi,isStream:Vq,isURLSearchParams:Kq,isTypedArray:oK,isFileList:Wq,forEach:$h,merge:Ix,extend:Zq,trim:Qq,stripBOM:eK,inherits:tK,toFlatObject:nK,kindOf:Zy,kindOfTest:Oo,endsWith:rK,toArray:iK,forEachEntry:sK,matchAll:aK,isHTMLForm:lK,hasOwnProperty:a2,hasOwnProp:a2,reduceDescriptors:YO,freezeMethods:dK,toObjectSet:fK,toCamelCase:uK,noop:hK,toFiniteNumber:pK,findKey:KO,global:Al,isContextDefined:GO,isSpecCompliantForm:gK,toJSONObject:mK,isAsyncFn:yK,isThenable:vK,setImmediate:XO,asap:bK,isIterable:wK};function Ft(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ze.inherits(Ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ze.toJSONObject(this.config),code:this.code,status:this.status}}});const JO=Ft.prototype,QO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{QO[e]={value:e}});Object.defineProperties(Ft,QO);Object.defineProperty(JO,"isAxiosError",{value:!0});Ft.from=(e,t,n,r,i,o)=>{const s=Object.create(JO);return ze.toFlatObject(e,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ft.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const xK=null;function Px(e){return ze.isPlainObject(e)||ze.isArray(e)}function ZO(e){return ze.endsWith(e,"[]")?e.slice(0,-2):e}function l2(e,t,n){return e?e.concat(t).map(function(i,o){return i=ZO(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function _K(e){return ze.isArray(e)&&!e.some(Px)}const EK=ze.toFlatObject(ze,{},null,function(t){return/^is[A-Z]/.test(t)});function nv(e,t,n){if(!ze.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ze.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,x){return!ze.isUndefined(x[g])});const r=n.metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ze.isSpecCompliantForm(t);if(!ze.isFunction(i))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(ze.isDate(b))return b.toISOString();if(!l&&ze.isBlob(b))throw new Ft("Blob is not supported. Use a Buffer instead.");return ze.isArrayBuffer(b)||ze.isTypedArray(b)?l&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function c(b,g,x){let y=b;if(b&&!x&&typeof b=="object"){if(ze.endsWith(g,"{}"))g=r?g:g.slice(0,-2),b=JSON.stringify(b);else if(ze.isArray(b)&&_K(b)||(ze.isFileList(b)||ze.endsWith(g,"[]"))&&(y=ze.toArray(b)))return g=ZO(g),y.forEach(function(w,E){!(ze.isUndefined(w)||w===null)&&t.append(s===!0?l2([g],E,o):s===null?g:g+"[]",u(w))}),!1}return Px(b)?!0:(t.append(l2(x,g,o),u(b)),!1)}const d=[],h=Object.assign(EK,{defaultVisitor:c,convertValue:u,isVisitable:Px});function p(b,g){if(!ze.isUndefined(b)){if(d.indexOf(b)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(b),ze.forEach(b,function(y,v){(!(ze.isUndefined(y)||y===null)&&i.call(t,y,ze.isString(v)?v.trim():v,g,h))===!0&&p(y,g?g.concat(v):[v])}),d.pop()}}if(!ze.isObject(e))throw new TypeError("data must be an object");return p(e),t}function u2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function gE(e,t){this._pairs=[],e&&nv(e,this,t)}const e3=gE.prototype;e3.append=function(t,n){this._pairs.push([t,n])};e3.toString=function(t){const n=t?function(r){return t.call(this,r,u2)}:u2;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function SK(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function t3(e,t,n){if(!t)return e;const r=n&&n.encode||SK;ze.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=ze.isURLSearchParams(t)?t.toString():new gE(t,n).toString(r),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class c2{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ze.forEach(this.handlers,function(r){r!==null&&t(r)})}}const n3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kK=typeof URLSearchParams<"u"?URLSearchParams:gE,CK=typeof FormData<"u"?FormData:null,jK=typeof Blob<"u"?Blob:null,AK={isBrowser:!0,classes:{URLSearchParams:kK,FormData:CK,Blob:jK},protocols:["http","https","file","blob","url","data"]},mE=typeof window<"u"&&typeof document<"u",Ox=typeof navigator=="object"&&navigator||void 0,RK=mE&&(!Ox||["ReactNative","NativeScript","NS"].indexOf(Ox.product)<0),NK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",TK=mE&&window.location.href||"http://localhost",IK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mE,hasStandardBrowserEnv:RK,hasStandardBrowserWebWorkerEnv:NK,navigator:Ox,origin:TK},Symbol.toStringTag,{value:"Module"})),zr={...IK,...AK};function PK(e,t){return nv(e,new zr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return zr.isNode&&ze.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function OK(e){return ze.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function $K(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function r3(e){function t(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=o>=n.length;return s=!s&&ze.isArray(i)?i.length:s,l?(ze.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!a):((!i[s]||!ze.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],o)&&ze.isArray(i[s])&&(i[s]=$K(i[s])),!a)}if(ze.isFormData(e)&&ze.isFunction(e.entries)){const n={};return ze.forEachEntry(e,(r,i)=>{t(OK(r),i,n,0)}),n}return null}function MK(e,t,n){if(ze.isString(e))try{return(t||JSON.parse)(e),ze.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Mh={transitional:n3,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=ze.isObject(t);if(o&&ze.isHTMLForm(t)&&(t=new FormData(t)),ze.isFormData(t))return i?JSON.stringify(r3(t)):t;if(ze.isArrayBuffer(t)||ze.isBuffer(t)||ze.isStream(t)||ze.isFile(t)||ze.isBlob(t)||ze.isReadableStream(t))return t;if(ze.isArrayBufferView(t))return t.buffer;if(ze.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PK(t,this.formSerializer).toString();if((a=ze.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return nv(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),MK(t)):t}],transformResponse:[function(t){const n=this.transitional||Mh.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(ze.isResponse(t)||ze.isReadableStream(t))return t;if(t&&ze.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?Ft.from(a,Ft.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zr.classes.FormData,Blob:zr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ze.forEach(["delete","get","head","post","put","patch"],e=>{Mh.headers[e]={}});const DK=ze.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),LK=e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&DK[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},d2=Symbol("internals");function vd(e){return e&&String(e).trim().toLowerCase()}function xg(e){return e===!1||e==null?e:ze.isArray(e)?e.map(xg):String(e)}function BK(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const FK=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Q0(e,t,n,r,i){if(ze.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!ze.isString(t)){if(ze.isString(r))return t.indexOf(r)!==-1;if(ze.isRegExp(r))return r.test(t)}}function zK(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function HK(e,t){const n=ze.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,s){return this[r].call(this,t,i,o,s)},configurable:!0})})}let _i=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(a,l,u){const c=vd(l);if(!c)throw new Error("header name must be a non-empty string");const d=ze.findKey(i,c);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||l]=xg(a))}const s=(a,l)=>ze.forEach(a,(u,c)=>o(u,c,l));if(ze.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(ze.isString(t)&&(t=t.trim())&&!FK(t))s(LK(t),n);else if(ze.isObject(t)&&ze.isIterable(t)){let a={},l,u;for(const c of t){if(!ze.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[u=c[0]]=(l=a[u])?ze.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}s(a,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=vd(t),t){const r=ze.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return BK(i);if(ze.isFunction(n))return n.call(this,i,r);if(ze.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=vd(t),t){const r=ze.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Q0(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(s){if(s=vd(s),s){const a=ze.findKey(r,s);a&&(!n||Q0(r,r[a],a,n))&&(delete r[a],i=!0)}}return ze.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||Q0(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return ze.forEach(this,(i,o)=>{const s=ze.findKey(r,o);if(s){n[s]=xg(i),delete n[o];return}const a=t?zK(o):String(o).trim();a!==o&&delete n[o],n[a]=xg(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ze.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&ze.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[d2]=this[d2]={accessors:{}}).accessors,i=this.prototype;function o(s){const a=vd(s);r[a]||(HK(i,s),r[a]=!0)}return ze.isArray(t)?t.forEach(o):o(t),this}};_i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ze.reduceDescriptors(_i.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ze.freezeMethods(_i);function Z0(e,t){const n=this||Mh,r=t||n,i=_i.from(r.headers);let o=r.data;return ze.forEach(e,function(a){o=a.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function i3(e){return!!(e&&e.__CANCEL__)}function zc(e,t,n){Ft.call(this,e==null?"canceled":e,Ft.ERR_CANCELED,t,n),this.name="CanceledError"}ze.inherits(zc,Ft,{__CANCEL__:!0});function o3(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Ft("Request failed with status code "+n.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function UK(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function WK(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,s;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=r[o];s||(s=u),n[i]=l,r[i]=u;let d=o,h=0;for(;d!==i;)h+=n[d++],d=d%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-s<t)return;const p=c&&u-c;return p?Math.round(h*1e3/p):void 0}}function VK(e,t){let n=0,r=1e3/t,i,o;const s=(u,c=Date.now())=>{n=c,i=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const c=Date.now(),d=c-n;d>=r?s(u,c):(i=u,o||(o=setTimeout(()=>{o=null,s(i)},r-d)))},()=>i&&s(i)]}const Cm=(e,t,n=3)=>{let r=0;const i=WK(50,250);return VK(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,l=s-r,u=i(l),c=s<=a;r=s;const d={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-s)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},f2=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},h2=e=>(...t)=>ze.asap(()=>e(...t)),qK=zr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,zr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(zr.origin),zr.navigator&&/(msie|trident)/i.test(zr.navigator.userAgent)):()=>!0,KK=zr.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];ze.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),ze.isString(r)&&s.push("path="+r),ze.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function GK(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function YK(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function s3(e,t,n){let r=!GK(t);return e&&(r||n==!1)?YK(e,t):t}const p2=e=>e instanceof _i?{...e}:e;function Xl(e,t){t=t||{};const n={};function r(u,c,d,h){return ze.isPlainObject(u)&&ze.isPlainObject(c)?ze.merge.call({caseless:h},u,c):ze.isPlainObject(c)?ze.merge({},c):ze.isArray(c)?c.slice():c}function i(u,c,d,h){if(ze.isUndefined(c)){if(!ze.isUndefined(u))return r(void 0,u,d,h)}else return r(u,c,d,h)}function o(u,c){if(!ze.isUndefined(c))return r(void 0,c)}function s(u,c){if(ze.isUndefined(c)){if(!ze.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,d){if(d in t)return r(u,c);if(d in e)return r(void 0,u)}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(u,c,d)=>i(p2(u),p2(c),d,!0)};return ze.forEach(Object.keys(Object.assign({},e,t)),function(c){const d=l[c]||i,h=d(e[c],t[c],c);ze.isUndefined(h)&&d!==a||(n[c]=h)}),n}const a3=e=>{const t=Xl({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=_i.from(s),t.url=t3(s3(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ze.isFormData(n)){if(zr.hasStandardBrowserEnv||zr.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[u,...c]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...c].join("; "))}}if(zr.hasStandardBrowserEnv&&(r&&ze.isFunction(r)&&(r=r(t)),r||r!==!1&&qK(t.url))){const u=i&&o&&KK.read(o);u&&s.set(i,u)}return t},XK=typeof XMLHttpRequest<"u",JK=XK&&function(e){return new Promise(function(n,r){const i=a3(e);let o=i.data;const s=_i.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,c,d,h,p,b;function g(){p&&p(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function y(){if(!x)return;const w=_i.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:w,config:e,request:x};o3(function(T){n(T),g()},function(T){r(T),g()},S),x=null}"onloadend"in x?x.onloadend=y:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(y)},x.onabort=function(){x&&(r(new Ft("Request aborted",Ft.ECONNABORTED,e,x)),x=null)},x.onerror=function(){r(new Ft("Network Error",Ft.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||n3;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),r(new Ft(E,S.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,e,x)),x=null},o===void 0&&s.setContentType(null),"setRequestHeader"in x&&ze.forEach(s.toJSON(),function(E,S){x.setRequestHeader(S,E)}),ze.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),a&&a!=="json"&&(x.responseType=i.responseType),u&&([h,b]=Cm(u,!0),x.addEventListener("progress",h)),l&&x.upload&&([d,p]=Cm(l),x.upload.addEventListener("progress",d),x.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(c=w=>{x&&(r(!w||w.type?new zc(null,e,x):w),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const v=UK(i.url);if(v&&zr.protocols.indexOf(v)===-1){r(new Ft("Unsupported protocol "+v+":",Ft.ERR_BAD_REQUEST,e));return}x.send(o||null)})},QK=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(u){if(!i){i=!0,a();const c=u instanceof Error?u:this.reason;r.abort(c instanceof Ft?c:new zc(c instanceof Error?c.message:c))}};let s=t&&setTimeout(()=>{s=null,o(new Ft("timeout ".concat(t," of ms exceeded"),Ft.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>ze.asap(a),l}},ZK=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},eG=async function*(e,t){for await(const n of tG(e))yield*ZK(n,t)},tG=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},g2=(e,t,n,r)=>{const i=eG(e,t);let o=0,s,a=l=>{s||(s=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await i.next();if(u){a(),l.close();return}let d=c.byteLength;if(n){let h=o+=d;n(h)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},rv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",l3=rv&&typeof ReadableStream=="function",nG=rv&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),u3=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},rG=l3&&u3(()=>{let e=!1;const t=new Request(zr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),m2=64*1024,$x=l3&&u3(()=>ze.isReadableStream(new Response("").body)),jm={stream:$x&&(e=>e.body)};rv&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!jm[t]&&(jm[t]=ze.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Ft("Response type '".concat(t,"' is not supported"),Ft.ERR_NOT_SUPPORT,r)})})})(new Response);const iG=async e=>{if(e==null)return 0;if(ze.isBlob(e))return e.size;if(ze.isSpecCompliantForm(e))return(await new Request(zr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ze.isArrayBufferView(e)||ze.isArrayBuffer(e))return e.byteLength;if(ze.isURLSearchParams(e)&&(e=e+""),ze.isString(e))return(await nG(e)).byteLength},oG=async(e,t)=>{const n=ze.toFiniteNumber(e.getContentLength());return n==null?iG(t):n},sG=rv&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:h}=a3(e);u=u?(u+"").toLowerCase():"text";let p=QK([i,o&&o.toAbortSignal()],s),b;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let x;try{if(l&&rG&&n!=="get"&&n!=="head"&&(x=await oG(c,r))!==0){let S=new Request(t,{method:"POST",body:r,duplex:"half"}),A;if(ze.isFormData(r)&&(A=S.headers.get("content-type"))&&c.setContentType(A),S.body){const[T,$]=f2(x,Cm(h2(l)));r=g2(S.body,m2,T,$)}}ze.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;b=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:y?d:void 0});let v=await fetch(b);const w=$x&&(u==="stream"||u==="response");if($x&&(a||w&&g)){const S={};["status","statusText","headers"].forEach(q=>{S[q]=v[q]});const A=ze.toFiniteNumber(v.headers.get("content-length")),[T,$]=a&&f2(A,Cm(h2(a),!0))||[];v=new Response(g2(v.body,m2,T,()=>{$&&$(),g&&g()}),S)}u=u||"text";let E=await jm[ze.findKey(jm,u)||"text"](v,e);return!w&&g&&g(),await new Promise((S,A)=>{o3(S,A,{data:E,headers:_i.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:b})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Ft("Network Error",Ft.ERR_NETWORK,e,b),{cause:y.cause||y}):Ft.from(y,y&&y.code,e,b)}}),Mx={http:xK,xhr:JK,fetch:sG};ze.forEach(Mx,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const y2=e=>"- ".concat(e),aG=e=>ze.isFunction(e)||e===null||e===!1,c3={getAdapter:e=>{e=ze.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let s;if(r=n,!aG(n)&&(r=Mx[(s=String(n)).toLowerCase()],r===void 0))throw new Ft("Unknown adapter '".concat(s,"'"));if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([a,l])=>"adapter ".concat(a," ")+(l===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?"since :\n"+o.map(y2).join("\n"):" "+y2(o[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:Mx};function eb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zc(null,e)}function v2(e){return eb(e),e.headers=_i.from(e.headers),e.data=Z0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),c3.getAdapter(e.adapter||Mh.adapter)(e).then(function(r){return eb(e),r.data=Z0.call(e,e.transformResponse,r),r.headers=_i.from(r.headers),r},function(r){return i3(r)||(eb(e),r&&r.response&&(r.response.data=Z0.call(e,e.transformResponse,r.response),r.response.headers=_i.from(r.response.headers))),Promise.reject(r)})}const d3="1.9.0",iv={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{iv[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const b2={};iv.transitional=function(t,n,r){function i(o,s){return"[Axios v"+d3+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,a)=>{if(t===!1)throw new Ft(i(s," has been removed"+(n?" in "+n:"")),Ft.ERR_DEPRECATED);return n&&!b2[s]&&(b2[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,a):!0}};iv.spelling=function(t){return(n,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(t)),!0)};function lG(e,t,n){if(typeof e!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const a=e[o],l=a===void 0||s(a,o,e);if(l!==!0)throw new Ft("option "+o+" must be "+l,Ft.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ft("Unknown option "+o,Ft.ERR_BAD_OPTION)}}const _g={assertOptions:lG,validators:iv},qo=_g.validators;let $l=class{constructor(t){this.defaults=t||{},this.interceptors={request:new c2,response:new c2}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+o):r.stack=o}catch(s){}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Xl(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&_g.assertOptions(r,{silentJSONParsing:qo.transitional(qo.boolean),forcedJSONParsing:qo.transitional(qo.boolean),clarifyTimeoutError:qo.transitional(qo.boolean)},!1),i!=null&&(ze.isFunction(i)?n.paramsSerializer={serialize:i}:_g.assertOptions(i,{encode:qo.function,serialize:qo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),_g.assertOptions(n,{baseUrl:qo.spelling("baseURL"),withXsrfToken:qo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&ze.merge(o.common,o[n.method]);o&&ze.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),n.headers=_i.concat(s,o);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,d=0,h;if(!l){const b=[v2.bind(this),void 0];for(b.unshift.apply(b,a),b.push.apply(b,u),h=b.length,c=Promise.resolve(n);d<h;)c=c.then(b[d++],b[d++]);return c}h=a.length;let p=n;for(d=0;d<h;){const b=a[d++],g=a[d++];try{p=b(p)}catch(x){g.call(this,x);break}}try{c=v2.call(this,p)}catch(b){return Promise.reject(b)}for(d=0,h=u.length;d<h;)c=c.then(u[d++],u[d++]);return c}getUri(t){t=Xl(this.defaults,t);const n=s3(t.baseURL,t.url,t.allowAbsoluteUrls);return t3(n,t.params,t.paramsSerializer)}};ze.forEach(["delete","get","head","options"],function(t){$l.prototype[t]=function(n,r){return this.request(Xl(r||{},{method:t,url:n,data:(r||{}).data}))}});ze.forEach(["post","put","patch"],function(t){function n(r){return function(o,s,a){return this.request(Xl(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}$l.prototype[t]=n(),$l.prototype[t+"Form"]=n(!0)});let uG=class f3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(a=>{r.subscribe(a),o=a}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},t(function(o,s,a){r.reason||(r.reason=new zc(o,s,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new f3(function(i){t=i}),cancel:t}}};function cG(e){return function(n){return e.apply(null,n)}}function dG(e){return ze.isObject(e)&&e.isAxiosError===!0}const Dx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dx).forEach(([e,t])=>{Dx[t]=e});function h3(e){const t=new $l(e),n=UO($l.prototype.request,t);return ze.extend(n,$l.prototype,t,{allOwnKeys:!0}),ze.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return h3(Xl(e,i))},n}const Wn=h3(Mh);Wn.Axios=$l;Wn.CanceledError=zc;Wn.CancelToken=uG;Wn.isCancel=i3;Wn.VERSION=d3;Wn.toFormData=nv;Wn.AxiosError=Ft;Wn.Cancel=Wn.CanceledError;Wn.all=function(t){return Promise.all(t)};Wn.spread=cG;Wn.isAxiosError=dG;Wn.mergeConfig=Xl;Wn.AxiosHeaders=_i;Wn.formToJSON=e=>r3(ze.isHTMLForm(e)?new FormData(e):e);Wn.getAdapter=c3.getAdapter;Wn.HttpStatusCode=Dx;Wn.default=Wn;const{Axios:ede,AxiosError:tde,CanceledError:nde,isCancel:rde,CancelToken:ide,VERSION:ode,all:sde,Cancel:ade,isAxiosError:lde,spread:ude,toFormData:cde,AxiosHeaders:dde,HttpStatusCode:fde,formToJSON:hde,getAdapter:pde,mergeConfig:gde}=Wn,fG="modulepreload",hG=function(e){return"/"+e},w2={},pG=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=hG(l),l in w2)return;w2[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(l,'"]').concat(c)))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":fG,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(l))))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Cc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Cc||(Cc={}));class tb extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const gG=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},mG=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>t!==null?t.name:gG(e),o=()=>i()!=="web",s=d=>{const h=u.get(d);return!!(h!=null&&h.platforms.has(i())||a(d))},a=d=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===d)},l=d=>e.console.error(d),u=new Map,c=(d,h={})=>{const p=u.get(d);if(p)return console.warn('Capacitor plugin "'.concat(d,'" already registered. Cannot register plugins twice.')),p.proxy;const b=i(),g=a(d);let x;const y=async()=>(!x&&b in h?x=typeof h[b]=="function"?x=await h[b]():x=h[b]:t!==null&&!x&&"web"in h&&(x=typeof h.web=="function"?x=await h.web():x=h.web),x),v=($,q)=>{var D,U;if(g){const J=g==null?void 0:g.methods.find(H=>q===H.name);if(J)return J.rtype==="promise"?H=>n.nativePromise(d,q.toString(),H):(H,I)=>n.nativeCallback(d,q.toString(),H,I);if($)return(D=$[q])===null||D===void 0?void 0:D.bind($)}else{if($)return(U=$[q])===null||U===void 0?void 0:U.bind($);throw new tb('"'.concat(d,'" plugin is not implemented on ').concat(b),Cc.Unimplemented)}},w=$=>{let q;const D=(...U)=>{const J=y().then(H=>{const I=v(H,$);if(I){const F=I(...U);return q=F==null?void 0:F.remove,F}else throw new tb('"'.concat(d,".").concat($,'()" is not implemented on ').concat(b),Cc.Unimplemented)});return $==="addListener"&&(J.remove=async()=>q()),J};return D.toString=()=>"".concat($.toString(),"() { [capacitor code] }"),Object.defineProperty(D,"name",{value:$,writable:!1,configurable:!1}),D},E=w("addListener"),S=w("removeListener"),A=($,q)=>{const D=E({eventName:$},q),U=async()=>{const H=await D;S({eventName:$,callbackId:H},q)},J=new Promise(H=>D.then(()=>H({remove:U})));return J.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await U()},J},T=new Proxy({},{get($,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?A:E;case"removeListener":return S;default:return w(q)}}});return r[d]=T,u.set(d,{name:d,proxy:T,platforms:new Set([...Object.keys(h),...g?[b]:[]])}),T};return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=i,n.handleError=l,n.isNativePlatform=o,n.isPluginAvailable=s,n.registerPlugin=c,n.Exception=tb,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},yG=e=>e.Capacitor=mG(e),Lx=yG(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),yE=Lx.registerPlugin;class p3{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,n);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const i=this.listeners[t];if(!i){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}i.forEach(o=>o(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new Lx.Exception(t,Cc.Unimplemented)}unavailable(t="not available"){return new Lx.Exception(t,Cc.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const i=r.indexOf(n);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const x2=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),_2=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class vG extends p3{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=_2(i).trim(),o=_2(o).trim(),n[i]=o}),n}async setCookie(t){try{const n=x2(t.key),r=x2(t.value),i="; expires=".concat((t.expires||"").replace("expires=","")),o=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?"domain=".concat(t.url):"";document.cookie="".concat(n,"=").concat(r||"").concat(i,"; path=").concat(o,"; ").concat(s,";")}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie="".concat(t.key,"=; Max-Age=0")}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}yE("CapacitorCookies",{web:()=>new vG});const bG=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),wG=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,o,s)=>(i[o]=e[t[s]],i),{})},xG=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[o,s]=i;let a,l;return Array.isArray(s)?(l="",s.forEach(u=>{a=t?encodeURIComponent(u):u,l+="".concat(o,"=").concat(a,"&")}),l.slice(0,-1)):(a=t?encodeURIComponent(s):s,l="".concat(o,"=").concat(a)),"".concat(r,"&").concat(l)},"").substr(1):null,_G=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=wG(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))o.set(s,a);n.body=o.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((a,l)=>{o.append(l,a)});else for(const a of Object.keys(e.data))o.append(a,e.data[a]);n.body=o;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(i.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class EG extends p3{async request(t){const n=_G(t,t.webFetchExtra),r=xG(t.params,t.shouldEncodeUrlParams),i=r?"".concat(t.url,"?").concat(r):t.url,o=await fetch(i,n),s=o.headers.get("content-type")||"";let{responseType:a="text"}=o.ok?t:{};s.includes("application/json")&&(a="json");let l,u;switch(a){case"arraybuffer":case"blob":u=await o.blob(),l=await bG(u);break;case"json":l=await o.json();break;case"document":case"text":default:l=await o.text()}const c={};return o.headers.forEach((d,h)=>{c[h]=d}),{data:l,headers:c,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}yE("CapacitorHttp",{web:()=>new EG});const SG=yE("Device",{web:()=>pG(()=>import("./web-BQ8OEOj9.js"),[]).then(e=>new e.DeviceWeb)});function kG(){const e=navigator.userAgent,t=navigator.platform,n=navigator.language;return"Web-".concat(t,"-").concat(n,"-").concat(e.slice(0,15))}async function CG(){const e=await SG.getInfo();return"".concat(e.manufacturer||"Unknown"," ").concat(e.model||"Device")}async function g3(){return window.Capacitor&&window.Capacitor.isNativePlatform?await CG():kG()}async function vE(e,t){const[n,r,i,o]=await Promise.all([kt.characters.toArray(),kt.systems.toArray(),kt.subscriptions.toArray(),kt.versions.toArray()]),s=new Map;let a=[];n.forEach(d=>{const[h,...p]=d.local_id.split("-");if(d.user_id!=="none"||h!=="none")return;const b="".concat(t,"-").concat(p.join("-"));s.set(d.local_id,b),a.push({...d,user_id:e,local_id:b})});let l=[];r.forEach(d=>{const[h,...p]=d.local_id.split("-"),b=d.user_id==="none",g=i.find(y=>y.resource_id===d.local_id);if(!b&&!g)return;const x="".concat(t,"-").concat(p.join("-"));s.set(d.local_id,x),l.push({...d,user_id:e,local_id:x})});let u=[];o.forEach(d=>{const[h,...p]=d.local_id.split("-"),b=d.user_id==="none",g=i.find(y=>y.version_id===d.local_id);if(!b&&!g)return;const x="".concat(t,"-").concat(p.join("-"));s.set(d.local_id,x),u.push({...d,user_id:e,local_id:x})});let c=[];i.forEach(d=>{const[h,...p]=d.local_id.split("-");if(!(d.user_id==="none"))return;const g="".concat(t,"-").concat(p.join("-"));s.set(d.local_id,g),c.push({...d,user_id:e,local_id:g})}),a=a.map(d=>({...d,system:{local_id:s.get(d.system.local_id),version_id:s.get(d.system.version_id)}})),c=c.map(d=>({...d,resource_id:s.get(d.resource_id),version_id:s.get(d.version_id)})),u=u.map(d=>({...d,reference_id:s.get(d.reference_id)})),await Promise.all([kt.subscriptions.clear(),kt.versions.clear(),kt.systems.clear(),kt.characters.clear()]),kt.characters.bulkPut(a),kt.systems.bulkPut(l),kt.versions.bulkPut(u),kt.subscriptions.bulkPut(c)}const jG=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",zn=Wn.create({baseURL:jG?"http://localhost:3000/v1":"https://api.bardsballad.com/v1"});zn.interceptors.request.use(async e=>{const t=await Er.get("token"),n=await Er.get("apiKey");return t&&(e.headers.Authorization="Bearer ".concat(t),e.headers["x-api-key"]=n||""),e});zn.interceptors.response.use(async e=>{const t=e.headers.authorization,n=e.headers["x-api-key"];if(t){const r=t.replace("Bearer ","");qy(r)}return n&&await Er.set("apiKey",n),e},e=>Promise.reject(e));const bE=async()=>{try{return(await zn.get("/ping")).status===200}catch(e){return!1}},AG=async e=>{try{return(await zn.get("/marketplace/".concat(e))).data}catch(t){return null}},RG=async e=>{try{return(await zn.post("/marketplace",e)).status===200}catch(t){return!1}},NG=async()=>{try{return(await zn.get("/marketplace")).data}catch(e){return[]}},TG=async e=>{try{return(await zn.get("/marketplace/".concat(e,"/versions"))).data}catch(t){return[]}},IG=async e=>{try{return(await zn.get("/marketplace/subscribe/".concat(e))).data}catch(t){return null}},PG=async(e,t,n)=>{const r=await zn.post("/auth/register",{username:e,email:t,password:n,deviceName:await g3()}),{accessToken:i,apiKey:o,deviceId:s}=r.data;if(!(i&&o&&s))return;const a=await qy(i);Er.set("apiKey",o),Er.set("deviceId",s),vE(a.id,s)},OG=async(e,t)=>{const n=await zn.post("/auth/login",{username:e,password:t,deviceName:await g3(),deviceId:await Er.get("deviceId")}),{accessToken:r,apiKey:i,deviceId:o}=n.data;if(!(r&&i&&o))return;const s=await qy(r);Er.set("apiKey",i),Er.set("deviceId",o),vE(s.id,o)},$G=async()=>{Er.clear(),Cn.clear(),pr.set({isLoggedIn:!1,user:null,synced_characters:[]}),await Promise.all(kt.tables.map(e=>e.clear()))},m3=async e=>{JC(e);const t=await zn.post("/characters/change-synced",{characterIds:e});return JC(e),t.data},MG=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await zn.get("/versions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},DG=async e=>await zn.post("/versions/push",e).then(t=>t.data),LG=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await zn.get("/subscriptions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},BG=async e=>await zn.post("/subscriptions/push",e).then(t=>t.data),FG=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await zn.get("/systems/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},zG=async e=>await zn.post("/systems/push",e).then(t=>t.data),HG=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await zn.get("/characters/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},UG=async e=>await zn.post("/characters/push",e).then(t=>t.data),WG=async()=>await zn.get("/stripe/create-checkout-session").then(e=>e.data),VG=async()=>await zn.get("/stripe/create-portal-session").then(e=>e.data),qG=async()=>{const e=await zn.get("/stripe/sync-stripe-data"),{newAccessToken:t}=e.data;t&&qy(t)},KG=e=>{const{isOpen:t,requestClose:n}=e,[r,i]=k.useState(!1),[o,s]=k.useState(""),[a,l]=k.useState(""),[u,c]=k.useState(""),[d,h]=k.useState(""),p=k.useMemo(()=>r?"Sign Up":"Login",[r]),b=async()=>{await PG(o,a,u)},g=async()=>{await OG(o,u)};return f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:p,onClose:n}),f.jsxs(lr,{children:[f.jsx(Xt,{id:"username",label:r?"Username":"Username or Email",placeholder:"Username",value:o,onChange:s,isValid:!0,errorMessage:""}),r&&f.jsx(Xt,{id:"email",label:"Email",placeholder:"support@bardsballad.com",value:a,onChange:l,isValid:!0,errorMessage:""}),f.jsx(Xt,{id:"password",label:"Password",type:"password",placeholder:"OogaBooga1234",value:u,onChange:c,isValid:!0,errorMessage:""}),r&&f.jsx(Xt,{id:"confirm-password",label:"Confirm Password",type:"password",placeholder:"OogaBooga1234",value:d,onChange:h,isValid:d.length===0||d===u,errorMessage:"Passwords don't match"}),f.jsx(Rt,{id:"signup",color:"primary",onClick:async()=>{await(r?b:g)(),n()},children:p}),f.jsx("div",{className:"flex flex-col mt-4 items-center justify-center text-sm",children:f.jsxs("h3",{children:[f.jsx("span",{className:"cursor-default dark:text-neutral-300",children:r?"Already have an account?":"Don't have an account?"}),f.jsx("span",{className:"group text-brand-400 transition-all duration-100 ease-in-out cursor-pointer",onClick:()=>i(!r),children:f.jsx("span",{className:"bg-left-bottom ml-1 bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:r?"Login":"Sign Up"})})]})}),f.jsx("div",{className:"text-neutral-500 flex text-center flex-col mt-4 items-center text-sm",children:f.jsxs("p",{className:"cursor-default",children:["By ",r?"signing up":"logging in",", you agree to our"," ",f.jsx("a",{className:"group text-brand-400 transition-all duration-100 ease-in-out",href:"https://bardsballad.com/terms-of-service",target:"_blank",rel:"noopener noreferrer",children:f.jsxs("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:["Terms of Service"," "]})}),"and"," ",f.jsx("a",{className:"group text-brand-400 transition-all duration-100 ease-in-out",href:"https://bardsballad.com/privacy-policy",target:"_blank",rel:"noopener noreferrer",children:f.jsx("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:"Privacy Policy"})})]})})]})]})},GG=({id:e,label:t,onChange:n})=>{const[r,i]=k.useState(""),o=s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(a){const u=new FileReader;u.onload=c=>{var h;const d=(h=c.target)==null?void 0:h.result;i(a.name),n(d)},u.readAsText(a)}};return f.jsxs("div",{children:[f.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:"".concat(t," - ").concat(r!=null?r:"none")}),f.jsx("input",{type:"file",id:"file-upload",name:"file-name",onChange:o})]})},YG=({isOpen:e,title:t,requestClose:n,onSave:r})=>{const[i,o]=k.useState("");return f.jsxs(sr,{isOpen:e,onClose:n,children:[f.jsx(ar,{title:t,onClose:n}),f.jsx(lr,{children:f.jsx(GG,{id:"upload",label:"Upload file",onChange:o})}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:n,children:"Cancel"}),f.jsx(Rt,{color:"primary",disabled:!1,onClick:()=>{r(i),n()},children:"Update"})]})]})},Jl=e=>e.slice(-10);function ov(){return typeof window<"u"}function Xa(e){return y3(e)?(e.nodeName||"").toLowerCase():"#document"}function Di(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fs(e){var t;return(t=(y3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function y3(e){return ov()?e instanceof Node||e instanceof Di(e).Node:!1}function xn(e){return ov()?e instanceof Element||e instanceof Di(e).Element:!1}function Xn(e){return ov()?e instanceof HTMLElement||e instanceof Di(e).HTMLElement:!1}function Am(e){return!ov()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Di(e).ShadowRoot}function Dh(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ao(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function XG(e){return["table","td","th"].includes(Xa(e))}function sv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(n){return!1}})}function wE(e){const t=av(),n=xn(e)?ao(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function JG(e){let t=Ks(e);for(;Xn(t)&&!Ds(t);){if(wE(t))return t;if(sv(t))return null;t=Ks(t)}return null}function av(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ds(e){return["html","body","#document"].includes(Xa(e))}function ao(e){return Di(e).getComputedStyle(e)}function lv(e){return xn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ks(e){if(Xa(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Am(e)&&e.host||fs(e);return Am(t)?t.host:t}function v3(e){const t=Ks(e);return Ds(t)?e.ownerDocument?e.ownerDocument.body:e.body:Xn(t)&&Dh(t)?t:v3(t)}function Ia(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=v3(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Di(i);if(o){const a=Bx(s);return t.concat(s,s.visualViewport||[],Dh(i)?i:[],a&&n?Ia(a):[])}return t.concat(i,Ia(i,[],n))}function Bx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Rm=Math.min,Ml=Math.max,Nm=Math.round,Hu=Math.floor,ts=e=>({x:e,y:e}),QG={left:"right",right:"left",bottom:"top",top:"bottom"},ZG={start:"end",end:"start"};function E2(e,t,n){return Ml(e,Rm(t,n))}function uv(e,t){return typeof e=="function"?e(t):e}function Ql(e){return e.split("-")[0]}function cv(e){return e.split("-")[1]}function b3(e){return e==="x"?"y":"x"}function w3(e){return e==="y"?"height":"width"}function Dl(e){return["top","bottom"].includes(Ql(e))?"y":"x"}function x3(e){return b3(Dl(e))}function eY(e,t,n){n===void 0&&(n=!1);const r=cv(e),i=x3(e),o=w3(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Tm(s)),[s,Tm(s)]}function tY(e){const t=Tm(e);return[Fx(e),t,Fx(t)]}function Fx(e){return e.replace(/start|end/g,t=>ZG[t])}function nY(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function rY(e,t,n,r){const i=cv(e);let o=nY(Ql(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(Fx)))),o}function Tm(e){return e.replace(/left|right|bottom|top/g,t=>QG[t])}function iY(e){return{top:0,right:0,bottom:0,left:0,...e}}function oY(e){return typeof e!="number"?iY(e):{top:e,right:e,bottom:e,left:e}}function Im(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var sY=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Pm=sY.join(","),_3=typeof Element>"u",jc=_3?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Om=!_3&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},$m=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},aY=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},E3=function(t,n,r){if($m(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Pm));return n&&jc.call(t,Pm)&&i.unshift(t),i=i.filter(r),i},S3=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!$m(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),l=a.length?a:s.children,u=e(l,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:s,candidates:u})}else{var c=jc.call(s,Pm);c&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var d=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),h=!$m(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(d&&h){var p=e(d===!0?s.children:d.children,!0,r);r.flatten?i.push.apply(i,p):i.push({scopeParent:s,candidates:p})}else o.unshift.apply(o,s.children)}}return i},k3=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},C3=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||aY(t))&&!k3(t)?0:t.tabIndex},lY=function(t,n){var r=C3(t);return r<0&&n&&!k3(t)?0:r},uY=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},j3=function(t){return t.tagName==="INPUT"},cY=function(t){return j3(t)&&t.type==="hidden"},dY=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},fY=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},hY=function(t){if(!t.name)return!0;var n=t.form||Om(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=fY(i,t.form);return!o||o===t},pY=function(t){return j3(t)&&t.type==="radio"},gY=function(t){return pY(t)&&!hY(t)},mY=function(t){var n,r=t&&Om(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,a,l;for(o=!!((s=i)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&i;){var u,c,d;r=Om(i),i=(u=r)===null||u===void 0?void 0:u.host,o=!!((c=i)!==null&&c!==void 0&&(d=c.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return o},S2=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},yY=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=jc.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(jc.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var l=t.parentElement,u=Om(t);if(l&&!l.shadowRoot&&i(l)===!0)return S2(t);t.assignedSlot?t=t.assignedSlot:!l&&u!==t.ownerDocument?t=u.host:t=l}t=a}if(mY(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return S2(t);return!1},vY=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return jc.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},zx=function(t,n){return!(n.disabled||$m(n)||cY(n)||yY(n,t)||dY(n)||vY(n))},Hx=function(t,n){return!(gY(n)||C3(n)<0||!zx(t,n))},bY=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},wY=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,a=s?i.scopeParent:i,l=lY(a,s),u=s?e(i.candidates):a;l===0?s?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:l,item:i,isScope:s,content:u})}),r.sort(uY).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},dv=function(t,n){n=n||{};var r;return n.getShadowRoot?r=S3([t],n.includeContainer,{filter:Hx.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:bY}):r=E3(t,n.includeContainer,Hx.bind(null,n)),wY(r)},xY=function(t,n){n=n||{};var r;return n.getShadowRoot?r=S3([t],n.includeContainer,{filter:zx.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=E3(t,n.includeContainer,zx.bind(null,n)),r},A3=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return jc.call(t,Pm)===!1?!1:Hx(n,t)};function _Y(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function R3(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function EY(){return/apple/i.test(navigator.vendor)}function Ux(){const e=/android/i;return e.test(_Y())||e.test(R3())}function SY(){return R3().includes("jsdom/")}const k2="data-floating-ui-focusable",kY="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",nb="ArrowLeft",rb="ArrowRight",CY="ArrowUp",jY="ArrowDown";function va(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ei(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Am(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function _l(e){return"composedPath"in e?e.composedPath()[0]:e.target}function ib(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function AY(e){return e.matches("html,body")}function Lr(e){return(e==null?void 0:e.ownerDocument)||document}function N3(e){return Xn(e)&&e.matches(kY)}function Wx(e){return e?e.getAttribute("role")==="combobox"&&N3(e):!1}function Mm(e){return e?e.hasAttribute(k2)?e:e.querySelector("["+k2+"]")||e:null}function nc(e,t,n){n===void 0&&(n=!0);let r=e.filter(o=>{var s;return o.parentId===t&&((s=o.context)==null?void 0:s.open)}),i=r;for(;i.length;)i=n?e.filter(o=>{var s;return(s=i)==null?void 0:s.some(a=>{var l;return o.parentId===a.id&&((l=o.context)==null?void 0:l.open)})}):e,r=r.concat(i);return r}function RY(e,t){let n,r=-1;function i(o,s){s>r&&(n=o,r=s),nc(e,o).forEach(l=>{i(l.id,s+1)})}return i(t,0),e.find(o=>o.id===n)}function C2(e,t){var n;let r=[],i=(n=e.find(o=>o.id===t))==null?void 0:n.parentId;for(;i;){const o=e.find(s=>s.id===i);i=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function br(e){e.preventDefault(),e.stopPropagation()}function NY(e){return"nativeEvent"in e}function T3(e){return e.mozInputSource===0&&e.isTrusted?!0:Ux()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function I3(e){return SY()?!1:!Ux()&&e.width===0&&e.height===0||Ux()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function nh(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}var gn=typeof document<"u"?k.useLayoutEffect:k.useEffect;const TY={...lN};function hi(e){const t=k.useRef(e);return gn(()=>{t.current=e}),t}const IY=TY.useInsertionEffect,PY=IY||(e=>e());function Jn(e){const t=k.useRef(()=>{});return PY(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function Ip(e,t,n){return Math.floor(e/t)!==n}function rf(e,t){return t<0||t>=e.current.length}function ob(e,t){return $r(e,{disabledIndices:t})}function j2(e,t){return $r(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function $r(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:o=1}=t===void 0?{}:t,s=n;do s+=r?-o:o;while(s>=0&&s<=e.current.length-1&&Eg(e,s,i));return s}function OY(e,t){let{event:n,orientation:r,loop:i,rtl:o,cols:s,disabledIndices:a,minIndex:l,maxIndex:u,prevIndex:c,stopEvent:d=!1}=t,h=c;if(n.key===CY){if(d&&br(n),c===-1)h=u;else if(h=$r(e,{startingIndex:h,amount:s,decrement:!0,disabledIndices:a}),i&&(c-s<l||h<0)){const p=c%s,b=u%s,g=u-(b-p);b===p?h=u:h=b>p?g:g-s}rf(e,h)&&(h=c)}if(n.key===jY&&(d&&br(n),c===-1?h=l:(h=$r(e,{startingIndex:c,amount:s,disabledIndices:a}),i&&c+s>u&&(h=$r(e,{startingIndex:c%s-s,amount:s,disabledIndices:a}))),rf(e,h)&&(h=c)),r==="both"){const p=Hu(c/s);n.key===(o?nb:rb)&&(d&&br(n),c%s!==s-1?(h=$r(e,{startingIndex:c,disabledIndices:a}),i&&Ip(h,s,p)&&(h=$r(e,{startingIndex:c-c%s-1,disabledIndices:a}))):i&&(h=$r(e,{startingIndex:c-c%s-1,disabledIndices:a})),Ip(h,s,p)&&(h=c)),n.key===(o?rb:nb)&&(d&&br(n),c%s!==0?(h=$r(e,{startingIndex:c,decrement:!0,disabledIndices:a}),i&&Ip(h,s,p)&&(h=$r(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:a}))):i&&(h=$r(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:a})),Ip(h,s,p)&&(h=c));const b=Hu(u/s)===p;rf(e,h)&&(i&&b?h=n.key===(o?rb:nb)?u:$r(e,{startingIndex:c-c%s-1,disabledIndices:a}):h=c)}return h}function $Y(e,t,n){const r=[];let i=0;return e.forEach((o,s)=>{let{width:a,height:l}=o,u=!1;for(n&&(i=0);!u;){const c=[];for(let d=0;d<a;d++)for(let h=0;h<l;h++)c.push(i+d+h*t);i%t+a<=t&&c.every(d=>r[d]==null)?(c.forEach(d=>{r[d]=s}),u=!0):i++}}),[...r]}function MY(e,t,n,r,i){if(e===-1)return-1;const o=n.indexOf(e),s=t[e];switch(i){case"tl":return o;case"tr":return s?o+s.width-1:o;case"bl":return s?o+(s.height-1)*r:o;case"br":return n.lastIndexOf(e)}}function DY(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Eg(e,t,n){if(n)return n.includes(t);const r=e.current[t];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}const Lh=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function P3(e,t){const n=dv(e,Lh()),r=n.length;if(r===0)return;const i=va(Lr(e)),o=n.indexOf(i),s=o===-1?t===1?0:r-1:o+t;return n[s]}function O3(e){return P3(Lr(e).body,1)||e}function $3(e){return P3(Lr(e).body,-1)||e}function of(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!ei(n,r)}function LY(e){dv(e,Lh()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function A2(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function R2(e,t,n){let{reference:r,floating:i}=e;const o=Dl(t),s=x3(t),a=w3(s),l=Ql(t),u=o==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:c,y:r.y-i.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(cv(t)){case"start":p[s]-=h*(n&&u?-1:1);break;case"end":p[s]+=h*(n&&u?-1:1);break}return p}const BY=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=R2(u,r,l),h=r,p={},b=0;for(let g=0;g<a.length;g++){const{name:x,fn:y}=a[g],{x:v,y:w,data:E,reset:S}=await y({x:c,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:u,platform:s,elements:{reference:e,floating:t}});c=v!=null?v:c,d=w!=null?w:d,p={...p,[x]:{...p[x],...E}},S&&b<=50&&(b++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:d}=R2(u,h,l)),g=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:p}};async function M3(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=uv(t,e),b=oY(p),x=a[h?d==="floating"?"reference":"floating":d],y=Im(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Im(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(y.top-S.top+b.top)/E.y,bottom:(S.bottom-y.bottom+b.bottom)/E.y,left:(y.left-S.left+b.left)/E.x,right:(S.right-y.right+b.right)/E.x}}const FY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...x}=uv(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=Ql(i),v=Dl(a),w=Ql(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=h||(w||!g?[Tm(a)]:tY(a)),A=b!=="none";!h&&A&&S.push(...rY(a,g,b,E));const T=[a,...S],$=await M3(t,x),q=[];let D=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&q.push($[y]),d){const F=eY(i,s,E);q.push($[F[0]],$[F[1]])}if(D=[...D,{placement:i,overflows:q}],!q.every(F=>F<=0)){var U,J;const F=(((U=o.flip)==null?void 0:U.index)||0)+1,K=T[F];if(K){var H;const O=d==="alignment"?v!==Dl(K):!1,B=((H=D[0])==null?void 0:H.overflows[0])>0;if(!O||B)return{data:{index:F,overflows:D},reset:{placement:K}}}let X=(J=D.filter(O=>O.overflows[0]<=0).sort((O,B)=>O.overflows[1]-B.overflows[1])[0])==null?void 0:J.placement;if(!X)switch(p){case"bestFit":{var I;const O=(I=D.filter(B=>{if(A){const P=Dl(B.placement);return P===v||P==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(P=>P>0).reduce((P,G)=>P+G,0)]).sort((B,P)=>B[1]-P[1])[0])==null?void 0:I[0];O&&(X=O);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};async function zY(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Ql(n),a=cv(n),l=Dl(n)==="y",u=["left","top"].includes(s)?-1:1,c=o&&l?-1:1,d=uv(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof b=="number"&&(p=a==="end"?b*-1:b),l?{x:p*c,y:h*u}:{x:h*u,y:p*c}}const HY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await zY(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},UY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:y,y:v}=x;return{x:y,y:v}}},...l}=uv(e,t),u={x:n,y:r},c=await M3(t,l),d=Dl(Ql(i)),h=b3(d);let p=u[h],b=u[d];if(o){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=p+c[x],w=p-c[y];p=E2(v,p,w)}if(s){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=b+c[x],w=b-c[y];b=E2(v,b,w)}const g=a.fn({...t,[h]:p,[d]:b});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:o,[d]:s}}}}}};function D3(e){const t=ao(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Xn(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=Nm(n)!==o||Nm(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function xE(e){return xn(e)?e:e.contextElement}function rc(e){const t=xE(e);if(!Xn(t))return ts(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=D3(t);let s=(o?Nm(n.width):n.width)/r,a=(o?Nm(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const WY=ts(0);function L3(e){const t=Di(e);return!av()||!t.visualViewport?WY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function VY(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Di(e)?!1:t}function Zl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=xE(e);let s=ts(1);t&&(r?xn(r)&&(s=rc(r)):s=rc(e));const a=VY(o,n,r)?L3(o):ts(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,c=i.width/s.x,d=i.height/s.y;if(o){const h=Di(o),p=r&&xn(r)?Di(r):r;let b=h,g=Bx(b);for(;g&&r&&p!==b;){const x=rc(g),y=g.getBoundingClientRect(),v=ao(g),w=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,E=y.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,u*=x.y,c*=x.x,d*=x.y,l+=w,u+=E,b=Di(g),g=Bx(b)}}return Im({width:c,height:d,x:l,y:u})}function _E(e,t){const n=lv(e).scrollLeft;return t?t.left+n:Zl(fs(e)).left+n}function B3(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:_E(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function qY(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=fs(r),a=t?sv(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=ts(1);const c=ts(0),d=Xn(r);if((d||!d&&!o)&&((Xa(r)!=="body"||Dh(s))&&(l=lv(r)),Xn(r))){const p=Zl(r);u=rc(r),c.x=p.x+r.clientLeft,c.y=p.y+r.clientTop}const h=s&&!d&&!o?B3(s,l,!0):ts(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function KY(e){return Array.from(e.getClientRects())}function GY(e){const t=fs(e),n=lv(e),r=e.ownerDocument.body,i=Ml(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Ml(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+_E(e);const a=-n.scrollTop;return ao(r).direction==="rtl"&&(s+=Ml(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function YY(e,t){const n=Di(e),r=fs(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=av();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function XY(e,t){const n=Zl(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Xn(e)?rc(e):ts(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function N2(e,t,n){let r;if(t==="viewport")r=YY(e,n);else if(t==="document")r=GY(fs(e));else if(xn(t))r=XY(t,n);else{const i=L3(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Im(r)}function F3(e,t){const n=Ks(e);return n===t||!xn(n)||Ds(n)?!1:ao(n).position==="fixed"||F3(n,t)}function JY(e,t){const n=t.get(e);if(n)return n;let r=Ia(e,[],!1).filter(a=>xn(a)&&Xa(a)!=="body"),i=null;const o=ao(e).position==="fixed";let s=o?Ks(e):e;for(;xn(s)&&!Ds(s);){const a=ao(s),l=wE(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Dh(s)&&!l&&F3(e,s))?r=r.filter(c=>c!==s):i=a,s=Ks(s)}return t.set(e,r),r}function QY(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?sv(t)?[]:JY(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,c)=>{const d=N2(t,c,i);return u.top=Ml(d.top,u.top),u.right=Rm(d.right,u.right),u.bottom=Rm(d.bottom,u.bottom),u.left=Ml(d.left,u.left),u},N2(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ZY(e){const{width:t,height:n}=D3(e);return{width:t,height:n}}function eX(e,t,n){const r=Xn(t),i=fs(t),o=n==="fixed",s=Zl(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=ts(0);function u(){l.x=_E(i)}if(r||!r&&!o)if((Xa(t)!=="body"||Dh(i))&&(a=lv(t)),r){const p=Zl(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&u();o&&!r&&i&&u();const c=i&&!r&&!o?B3(i,a):ts(0),d=s.left+a.scrollLeft-l.x-c.x,h=s.top+a.scrollTop-l.y-c.y;return{x:d,y:h,width:s.width,height:s.height}}function sb(e){return ao(e).position==="static"}function T2(e,t){if(!Xn(e)||ao(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return fs(e)===n&&(n=n.ownerDocument.body),n}function z3(e,t){const n=Di(e);if(sv(e))return n;if(!Xn(e)){let i=Ks(e);for(;i&&!Ds(i);){if(xn(i)&&!sb(i))return i;i=Ks(i)}return n}let r=T2(e,t);for(;r&&XG(r)&&sb(r);)r=T2(r,t);return r&&Ds(r)&&sb(r)&&!wE(r)?n:r||JG(e)||n}const tX=async function(e){const t=this.getOffsetParent||z3,n=this.getDimensions,r=await n(e.floating);return{reference:eX(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function nX(e){return ao(e).direction==="rtl"}const rX={convertOffsetParentRelativeRectToViewportRelativeRect:qY,getDocumentElement:fs,getClippingRect:QY,getOffsetParent:z3,getElementRects:tX,getClientRects:KY,getDimensions:ZY,getScale:rc,isElement:xn,isRTL:nX};function H3(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function iX(e,t){let n=null,r;const i=fs(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:c,top:d,width:h,height:p}=u;if(a||t(),!h||!p)return;const b=Hu(d),g=Hu(i.clientWidth-(c+h)),x=Hu(i.clientHeight-(d+p)),y=Hu(c),w={rootMargin:-b+"px "+-g+"px "+-x+"px "+-y+"px",threshold:Ml(0,Rm(1,l))||1};let E=!0;function S(A){const T=A[0].intersectionRatio;if(T!==l){if(!E)return s();T?s(!1,T):r=setTimeout(()=>{s(!1,1e-7)},1e3)}T===1&&!H3(u,e.getBoundingClientRect())&&s(),E=!1}try{n=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch(A){n=new IntersectionObserver(S,w)}n.observe(e)}return s(!0),o}function oX(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=xE(e),c=i||o?[...u?Ia(u):[],...Ia(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const d=u&&a?iX(u,n):null;let h=-1,p=null;s&&(p=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),u&&!l&&p.observe(u),p.observe(t));let b,g=l?Zl(e):null;l&&x();function x(){const y=Zl(e);g&&!H3(g,y)&&n(),g=y,b=requestAnimationFrame(x)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(b)}}const sX=HY,aX=UY,lX=FY,uX=(e,t,n)=>{const r=new Map,i={platform:rX,...n},o={...i.platform,_c:r};return BY(e,t,{...i,platform:o})};var Sg=typeof document<"u"?k.useLayoutEffect:k.useEffect;function Dm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Dm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Dm(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function U3(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function I2(e,t){const n=U3(e);return Math.round(t*n)/n}function ab(e){const t=k.useRef(e);return Sg(()=>{t.current=e}),t}function cX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=k.useState(r);Dm(h,r)||p(r);const[b,g]=k.useState(null),[x,y]=k.useState(null),v=k.useCallback(O=>{O!==A.current&&(A.current=O,g(O))},[]),w=k.useCallback(O=>{O!==T.current&&(T.current=O,y(O))},[]),E=o||b,S=s||x,A=k.useRef(null),T=k.useRef(null),$=k.useRef(c),q=l!=null,D=ab(l),U=ab(i),J=ab(u),H=k.useCallback(()=>{if(!A.current||!T.current)return;const O={placement:t,strategy:n,middleware:h};U.current&&(O.platform=U.current),uX(A.current,T.current,O).then(B=>{const P={...B,isPositioned:J.current!==!1};I.current&&!Dm($.current,P)&&($.current=P,jy.flushSync(()=>{d(P)}))})},[h,t,n,U,J]);Sg(()=>{u===!1&&$.current.isPositioned&&($.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[u]);const I=k.useRef(!1);Sg(()=>(I.current=!0,()=>{I.current=!1}),[]),Sg(()=>{if(E&&(A.current=E),S&&(T.current=S),E&&S){if(D.current)return D.current(E,S,H);H()}},[E,S,H,D,q]);const F=k.useMemo(()=>({reference:A,floating:T,setReference:v,setFloating:w}),[v,w]),K=k.useMemo(()=>({reference:E,floating:S}),[E,S]),X=k.useMemo(()=>{const O={position:n,left:0,top:0};if(!K.floating)return O;const B=I2(K.floating,c.x),P=I2(K.floating,c.y);return a?{...O,transform:"translate("+B+"px, "+P+"px)",...U3(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:P}},[n,a,K.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:H,refs:F,elements:K,floatingStyles:X}),[c,H,F,K,X])}const W3=(e,t)=>({...sX(e),options:[e,t]}),V3=(e,t)=>({...aX(e),options:[e,t]}),q3=(e,t)=>({...lX(e),options:[e,t]});function K3(e){const t=k.useRef(void 0),n=k.useCallback(r=>{const i=e.map(o=>{if(o!=null){if(typeof o=="function"){const s=o,a=s(r);return typeof a=="function"?a:()=>{s(null)}}return o.current=r,()=>{o.current=null}}});return()=>{i.forEach(o=>o==null?void 0:o())}},e);return k.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function dX(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const G3=k.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function fX(e){const{children:t,elementsRef:n,labelsRef:r}=e,[i,o]=k.useState(()=>new Set),s=k.useCallback(u=>{o(c=>new Set(c).add(u))},[]),a=k.useCallback(u=>{o(c=>{const d=new Set(c);return d.delete(u),d})},[]),l=k.useMemo(()=>{const u=new Map;return Array.from(i.keys()).sort(dX).forEach((d,h)=>{u.set(d,h)}),u},[i]);return f.jsx(G3.Provider,{value:k.useMemo(()=>({register:s,unregister:a,map:l,elementsRef:n,labelsRef:r}),[s,a,l,n,r]),children:t})}function Y3(e){e===void 0&&(e={});const{label:t}=e,{register:n,unregister:r,map:i,elementsRef:o,labelsRef:s}=k.useContext(G3),[a,l]=k.useState(null),u=k.useRef(null),c=k.useCallback(d=>{if(u.current=d,a!==null&&(o.current[a]=d,s)){var h;const p=t!==void 0;s.current[a]=p?t:(h=d==null?void 0:d.textContent)!=null?h:null}},[a,o,s,t]);return gn(()=>{const d=u.current;if(d)return n(d),()=>{r(d)}},[n,r]),gn(()=>{const d=u.current?i.get(u.current):null;d!=null&&l(d)},[i]),k.useMemo(()=>({ref:c,index:a==null?-1:a}),[a,c])}const hX="data-floating-ui-focusable",P2="active",O2="selected",Bh="ArrowLeft",Fh="ArrowRight",X3="ArrowUp",fv="ArrowDown",pX={...lN};let $2=!1,gX=0;const M2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+gX++;function mX(){const[e,t]=k.useState(()=>$2?M2():void 0);return gn(()=>{e==null&&t(M2())},[]),k.useEffect(()=>{$2=!0},[]),e}const yX=pX.useId,hv=yX||mX;function J3(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const Q3=k.createContext(null),Z3=k.createContext(null),Ja=()=>{var e;return((e=k.useContext(Q3))==null?void 0:e.id)||null},Qa=()=>k.useContext(Z3);function vX(e){const t=hv(),n=Qa(),i=Ja();return gn(()=>{if(!t)return;const o={id:t,parentId:i};return n==null||n.addNode(o),()=>{n==null||n.removeNode(o)}},[n,t,i]),t}function bX(e){const{children:t,id:n}=e,r=Ja();return f.jsx(Q3.Provider,{value:k.useMemo(()=>({id:n,parentId:r}),[n,r]),children:t})}function wX(e){const{children:t}=e,n=k.useRef([]),r=k.useCallback(s=>{n.current=[...n.current,s]},[]),i=k.useCallback(s=>{n.current=n.current.filter(a=>a!==s)},[]),[o]=k.useState(()=>J3());return f.jsx(Z3.Provider,{value:k.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:o}),[r,i,o]),children:t})}function Ac(e){return"data-floating-ui-"+e}function Ai(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const D2=Ac("safe-polygon");function lb(e,t,n){if(n&&!nh(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const r=e();return typeof r=="number"?r:r==null?void 0:r[t]}return e==null?void 0:e[t]}function ub(e){return typeof e=="function"?e():e}function xX(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:s}=e,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:d=0,move:h=!0}=t,p=Qa(),b=Ja(),g=hi(u),x=hi(l),y=hi(n),v=hi(d),w=k.useRef(),E=k.useRef(-1),S=k.useRef(),A=k.useRef(-1),T=k.useRef(!0),$=k.useRef(!1),q=k.useRef(()=>{}),D=k.useRef(!1),U=k.useCallback(()=>{var X;const O=(X=i.current.openEvent)==null?void 0:X.type;return(O==null?void 0:O.includes("mouse"))&&O!=="mousedown"},[i]);k.useEffect(()=>{if(!a)return;function X(O){let{open:B}=O;B||(Ai(E),Ai(A),T.current=!0,D.current=!1)}return o.on("openchange",X),()=>{o.off("openchange",X)}},[a,o]),k.useEffect(()=>{if(!a||!g.current||!n)return;function X(B){U()&&r(!1,B,"hover")}const O=Lr(s.floating).documentElement;return O.addEventListener("mouseleave",X),()=>{O.removeEventListener("mouseleave",X)}},[s.floating,n,r,a,g,U]);const J=k.useCallback(function(X,O,B){O===void 0&&(O=!0),B===void 0&&(B="hover");const P=lb(x.current,"close",w.current);P&&!S.current?(Ai(E),E.current=window.setTimeout(()=>r(!1,X,B),P)):O&&(Ai(E),r(!1,X,B))},[x,r]),H=Jn(()=>{q.current(),S.current=void 0}),I=Jn(()=>{if($.current){const X=Lr(s.floating).body;X.style.pointerEvents="",X.removeAttribute(D2),$.current=!1}}),F=Jn(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);k.useEffect(()=>{if(!a)return;function X(Q){if(Ai(E),T.current=!1,c&&!nh(w.current)||ub(v.current)>0&&!lb(x.current,"open"))return;const se=lb(x.current,"open",w.current);se?E.current=window.setTimeout(()=>{y.current||r(!0,Q,"hover")},se):n||r(!0,Q,"hover")}function O(Q){if(F()){I();return}q.current();const se=Lr(s.floating);if(Ai(A),D.current=!1,g.current&&i.current.floatingContext){n||Ai(E),S.current=g.current({...i.current.floatingContext,tree:p,x:Q.clientX,y:Q.clientY,onClose(){I(),H(),F()||J(Q,!0,"safe-polygon")}});const Ne=S.current;se.addEventListener("mousemove",Ne),q.current=()=>{se.removeEventListener("mousemove",Ne)};return}(w.current==="touch"?!ei(s.floating,Q.relatedTarget):!0)&&J(Q)}function B(Q){F()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:Q.clientX,y:Q.clientY,onClose(){I(),H(),F()||J(Q)}})(Q))}function P(){Ai(E)}function G(Q){F()||J(Q,!1)}if(xn(s.domReference)){const Q=s.domReference,se=s.floating;return n&&Q.addEventListener("mouseleave",B),h&&Q.addEventListener("mousemove",X,{once:!0}),Q.addEventListener("mouseenter",X),Q.addEventListener("mouseleave",O),se&&(se.addEventListener("mouseleave",B),se.addEventListener("mouseenter",P),se.addEventListener("mouseleave",G)),()=>{n&&Q.removeEventListener("mouseleave",B),h&&Q.removeEventListener("mousemove",X),Q.removeEventListener("mouseenter",X),Q.removeEventListener("mouseleave",O),se&&(se.removeEventListener("mouseleave",B),se.removeEventListener("mouseenter",P),se.removeEventListener("mouseleave",G))}}},[s,a,e,c,h,J,H,I,r,n,y,p,x,g,i,F,v]),gn(()=>{var X;if(a&&n&&(X=g.current)!=null&&X.__options.blockPointerEvents&&U()){$.current=!0;const B=s.floating;if(xn(s.domReference)&&B){var O;const P=Lr(s.floating).body;P.setAttribute(D2,"");const G=s.domReference,Q=p==null||(O=p.nodesRef.current.find(se=>se.id===b))==null||(O=O.context)==null?void 0:O.elements.floating;return Q&&(Q.style.pointerEvents=""),P.style.pointerEvents="none",G.style.pointerEvents="auto",B.style.pointerEvents="auto",()=>{P.style.pointerEvents="",G.style.pointerEvents="",B.style.pointerEvents=""}}}},[a,n,b,s,p,g,U]),gn(()=>{n||(w.current=void 0,D.current=!1,H(),I())},[n,H,I]),k.useEffect(()=>()=>{H(),Ai(E),Ai(A),I()},[a,s.domReference,H,I]);const K=k.useMemo(()=>{function X(O){w.current=O.pointerType}return{onPointerDown:X,onPointerEnter:X,onMouseMove(O){const{nativeEvent:B}=O;function P(){!T.current&&!y.current&&r(!0,B,"hover")}c&&!nh(w.current)||n||ub(v.current)===0||D.current&&O.movementX**2+O.movementY**2<2||(Ai(A),w.current==="touch"?P():(D.current=!0,A.current=window.setTimeout(P,ub(v.current))))}}},[c,r,n,y,v]);return k.useMemo(()=>a?{reference:K}:{},[a,K])}let L2=0;function vl(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(L2);const o=()=>e==null?void 0:e.focus({preventScroll:n});i?o():L2=requestAnimationFrame(o)}function cb(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Am(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function _X(e){return"composedPath"in e?e.composedPath()[0]:e.target}function EX(e){return(e==null?void 0:e.ownerDocument)||document}let xu=new WeakMap,Pp=new WeakSet,Op={},db=0;const SX=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,e4=e=>e&&(e.host||e4(e.parentNode)),kX=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=e4(n);return e.contains(r)?r:null}).filter(n=>n!=null);function CX(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,s=kX(t,e),a=new Set,l=new Set(s),u=[];Op[i]||(Op[i]=new WeakMap);const c=Op[i];s.forEach(d),h(t),a.clear();function d(p){!p||a.has(p)||(a.add(p),p.parentNode&&d(p.parentNode))}function h(p){!p||l.has(p)||[].forEach.call(p.children,b=>{if(Xa(b)!=="script")if(a.has(b))h(b);else{const g=o?b.getAttribute(o):null,x=g!==null&&g!=="false",y=xu.get(b)||0,v=o?y+1:y,w=(c.get(b)||0)+1;xu.set(b,v),c.set(b,w),u.push(b),v===1&&x&&Pp.add(b),w===1&&b.setAttribute(i,""),!x&&o&&b.setAttribute(o,o==="inert"?"":"true")}})}return db++,()=>{u.forEach(p=>{const b=xu.get(p)||0,g=o?b-1:b,x=(c.get(p)||0)-1;xu.set(p,g),c.set(p,x),g||(!Pp.has(p)&&o&&p.removeAttribute(o),Pp.delete(p)),x||p.removeAttribute(i)}),db--,db||(xu=new WeakMap,xu=new WeakMap,Pp=new WeakSet,Op={})}}function B2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=EX(e[0]).body;return CX(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const pv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Lm=k.forwardRef(function(t,n){const[r,i]=k.useState();gn(()=>{EY()&&i("button")},[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ac("focus-guard")]:"",style:pv};return f.jsx("span",{...t,...o})}),t4=k.createContext(null),F2=Ac("portal");function jX(e){e===void 0&&(e={});const{id:t,root:n}=e,r=hv(),i=n4(),[o,s]=k.useState(null),a=k.useRef(null);return gn(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{a.current=null})},[o]),gn(()=>{if(!r||a.current)return;const l=t?document.getElementById(t):null;if(!l)return;const u=document.createElement("div");u.id=r,u.setAttribute(F2,""),l.appendChild(u),a.current=u,s(u)},[t,r]),gn(()=>{if(n===null||!r||a.current)return;let l=n||(i==null?void 0:i.portalNode);l&&!xn(l)&&(l=l.current),l=l||document.body;let u=null;t&&(u=document.createElement("div"),u.id=t,l.appendChild(u));const c=document.createElement("div");c.id=r,c.setAttribute(F2,""),l=u||l,l.appendChild(c),a.current=c,s(c)},[t,n,r,i]),o}function AX(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=jX({id:n,root:r}),[s,a]=k.useState(null),l=k.useRef(null),u=k.useRef(null),c=k.useRef(null),d=k.useRef(null),h=s==null?void 0:s.modal,p=s==null?void 0:s.open,b=!!s&&!s.modal&&s.open&&i&&!!(r||o);return k.useEffect(()=>{if(!o||!i||h)return;function g(x){o&&of(x)&&(x.type==="focusin"?A2:LY)(o)}return o.addEventListener("focusin",g,!0),o.addEventListener("focusout",g,!0),()=>{o.removeEventListener("focusin",g,!0),o.removeEventListener("focusout",g,!0)}},[o,i,h]),k.useEffect(()=>{o&&(p||A2(o))},[p,o]),f.jsxs(t4.Provider,{value:k.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:c,afterInsideRef:d,portalNode:o,setFocusManagerState:a}),[i,o]),children:[b&&o&&f.jsx(Lm,{"data-type":"outside",ref:l,onFocus:g=>{if(of(g,o)){var x;(x=c.current)==null||x.focus()}else{const y=s?s.domReference:null,v=$3(y);v==null||v.focus()}}}),b&&o&&f.jsx("span",{"aria-owns":o.id,style:pv}),o&&jy.createPortal(t,o),b&&o&&f.jsx(Lm,{"data-type":"outside",ref:u,onFocus:g=>{if(of(g,o)){var x;(x=d.current)==null||x.focus()}else{const y=s?s.domReference:null,v=O3(y);v==null||v.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,g.nativeEvent,"focus-out"))}}})]})}const n4=()=>k.useContext(t4);function z2(e){return k.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const RX=20;let bl=[];function NX(e){bl=bl.filter(t=>t.isConnected),e&&Xa(e)!=="body"&&(bl.push(e),bl.length>RX&&(bl=bl.slice(-20)))}function H2(){return bl.slice().reverse().find(e=>e.isConnected)}function TX(e){const t=Lh();return A3(e,t)?e:dv(e,t)[0]||e}function U2(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=Lh(),o=xY(e,r).filter(a=>{const l=a.getAttribute("data-tabindex")||"";return A3(a,r)||a.hasAttribute("data-tabindex")&&!l.startsWith("-")}),s=e.getAttribute("tabindex");t.current.includes("floating")||o.length===0?s!=="0"&&e.setAttribute("tabindex","0"):(s!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const IX=k.forwardRef(function(t,n){return f.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:pv})});function PX(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:s=0,returnFocus:a=!0,restoreFocus:l=!1,modal:u=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0,outsideElementsInert:h=!1,getInsideElements:p=()=>[]}=e,{open:b,onOpenChange:g,events:x,dataRef:y,elements:{domReference:v,floating:w}}=t,E=Jn(()=>{var Me;return(Me=y.current.floatingContext)==null?void 0:Me.nodeId}),S=Jn(p),A=typeof s=="number"&&s<0,T=Wx(v)&&A,$=SX(),q=$?o:!0,D=!q||$&&h,U=hi(i),J=hi(s),H=hi(a),I=Qa(),F=n4(),K=k.useRef(null),X=k.useRef(null),O=k.useRef(!1),B=k.useRef(!1),P=k.useRef(-1),G=F!=null,Q=Mm(w),se=Jn(function(Me){return Me===void 0&&(Me=Q),Me?dv(Me,Lh()):[]}),_e=Jn(Me=>{const Re=se(Me);return U.current.map(te=>v&&te==="reference"?v:Q&&te==="floating"?Q:Re).filter(Boolean).flat()});k.useEffect(()=>{if(r||!u)return;function Me(te){if(te.key==="Tab"){ei(Q,va(Lr(Q)))&&se().length===0&&!T&&br(te);const ae=_e(),pe=_l(te);U.current[0]==="reference"&&pe===v&&(br(te),te.shiftKey?vl(ae[ae.length-1]):vl(ae[1])),U.current[1]==="floating"&&pe===Q&&te.shiftKey&&(br(te),vl(ae[0]))}}const Re=Lr(Q);return Re.addEventListener("keydown",Me),()=>{Re.removeEventListener("keydown",Me)}},[r,v,Q,u,U,T,se,_e]),k.useEffect(()=>{if(r||!w)return;function Me(Re){const te=_l(Re),pe=se().indexOf(te);pe!==-1&&(P.current=pe)}return w.addEventListener("focusin",Me),()=>{w.removeEventListener("focusin",Me)}},[r,w,se]),k.useEffect(()=>{if(r||!d)return;function Me(){B.current=!0,setTimeout(()=>{B.current=!1})}function Re(te){const ae=te.relatedTarget,pe=te.currentTarget;queueMicrotask(()=>{const We=E(),Fe=!(ei(v,ae)||ei(w,ae)||ei(ae,w)||ei(F==null?void 0:F.portalNode,ae)||ae!=null&&ae.hasAttribute(Ac("focus-guard"))||I&&(nc(I.nodesRef.current,We).find(Ue=>{var ue,Pe;return ei((ue=Ue.context)==null?void 0:ue.elements.floating,ae)||ei((Pe=Ue.context)==null?void 0:Pe.elements.domReference,ae)})||C2(I.nodesRef.current,We).find(Ue=>{var ue,Pe,qe;return[(ue=Ue.context)==null?void 0:ue.elements.floating,Mm((Pe=Ue.context)==null?void 0:Pe.elements.floating)].includes(ae)||((qe=Ue.context)==null?void 0:qe.elements.domReference)===ae})));if(pe===v&&Q&&U2(Q,U),l&&Fe&&va(Lr(Q))===Lr(Q).body){Xn(Q)&&Q.focus();const Ue=P.current,ue=se(),Pe=ue[Ue]||ue[ue.length-1]||Q;Xn(Pe)&&Pe.focus()}(T||!u)&&ae&&Fe&&!B.current&&ae!==H2()&&(O.current=!0,g(!1,te,"focus-out"))})}if(w&&Xn(v))return v.addEventListener("focusout",Re),v.addEventListener("pointerdown",Me),w.addEventListener("focusout",Re),()=>{v.removeEventListener("focusout",Re),v.removeEventListener("pointerdown",Me),w.removeEventListener("focusout",Re)}},[r,v,w,Q,u,I,F,g,d,l,se,T,E,U]);const Ne=k.useRef(null),Te=k.useRef(null),W=z2([Ne,F==null?void 0:F.beforeInsideRef]),Y=z2([Te,F==null?void 0:F.afterInsideRef]);k.useEffect(()=>{var Me,Re;if(r||!w)return;const te=Array.from((F==null||(Me=F.portalNode)==null?void 0:Me.querySelectorAll("["+Ac("portal")+"]"))||[]),ae=I?C2(I.nodesRef.current,E()):[],pe=I&&!u?ae.map(ue=>{var Pe;return(Pe=ue.context)==null?void 0:Pe.elements.floating}):[],We=(Re=ae.find(ue=>{var Pe;return Wx(((Pe=ue.context)==null?void 0:Pe.elements.domReference)||null)}))==null||(Re=Re.context)==null?void 0:Re.elements.domReference,Fe=[w,We,...te,...pe,...S(),K.current,X.current,Ne.current,Te.current,F==null?void 0:F.beforeOutsideRef.current,F==null?void 0:F.afterOutsideRef.current,U.current.includes("reference")||T?v:null].filter(ue=>ue!=null),Ue=u||T?B2(Fe,!D,D):B2(Fe);return()=>{Ue()}},[r,v,w,u,U,F,T,q,D,I,E,S]),gn(()=>{if(r||!Xn(Q))return;const Me=Lr(Q),Re=va(Me);queueMicrotask(()=>{const te=_e(Q),ae=J.current,pe=(typeof ae=="number"?te[ae]:ae.current)||Q,We=ei(Q,Re);!A&&!We&&b&&vl(pe,{preventScroll:pe===Q})})},[r,b,Q,A,_e,J]),gn(()=>{if(r||!Q)return;let Me=!1;const Re=Lr(Q),te=va(Re);NX(te);function ae(Fe){let{reason:Ue,event:ue,nested:Pe}=Fe;if(["hover","safe-polygon"].includes(Ue)&&ue.type==="mouseleave"&&(O.current=!0),Ue==="outside-press")if(Pe)O.current=!1,Me=!0;else if(T3(ue)||I3(ue))O.current=!1;else{let qe=!1;document.createElement("div").focus({get preventScroll(){return qe=!0,!1}}),qe?(O.current=!1,Me=!0):O.current=!0}}x.on("openchange",ae);const pe=Re.createElement("span");pe.setAttribute("tabindex","-1"),pe.setAttribute("aria-hidden","true"),Object.assign(pe.style,pv),G&&v&&v.insertAdjacentElement("afterend",pe);function We(){if(typeof H.current=="boolean"){const Fe=v||H2();return Fe&&Fe.isConnected?Fe:pe}return H.current.current||pe}return()=>{x.off("openchange",ae);const Fe=va(Re),Ue=ei(w,Fe)||I&&nc(I.nodesRef.current,E()).some(Pe=>{var qe;return ei((qe=Pe.context)==null?void 0:qe.elements.floating,Fe)}),ue=We();queueMicrotask(()=>{const Pe=TX(ue);H.current&&!O.current&&Xn(Pe)&&(!(Pe!==Fe&&Fe!==Re.body)||Ue)&&Pe.focus({preventScroll:Me}),pe.remove()})}},[r,w,Q,H,y,x,I,G,v,E]),k.useEffect(()=>{queueMicrotask(()=>{O.current=!1})},[r]),gn(()=>{if(!r&&F)return F.setFocusManagerState({modal:u,closeOnFocusOut:d,open:b,onOpenChange:g,domReference:v}),()=>{F.setFocusManagerState(null)}},[r,F,u,b,g,d,v]),gn(()=>{r||Q&&U2(Q,U)},[r,Q,U]);function ie(Me){return r||!c||!u?null:f.jsx(IX,{ref:Me==="start"?K:X,onClick:Re=>g(!1,Re.nativeEvent),children:typeof c=="string"?c:"Dismiss"})}const Oe=!r&&q&&(u?!T:!0)&&(G||u);return f.jsxs(f.Fragment,{children:[Oe&&f.jsx(Lm,{"data-type":"inside",ref:W,onFocus:Me=>{if(u){const te=_e();vl(i[0]==="reference"?te[0]:te[te.length-1])}else if(F!=null&&F.preserveTabOrder&&F.portalNode)if(O.current=!1,of(Me,F.portalNode)){const te=O3(v);te==null||te.focus()}else{var Re;(Re=F.beforeOutsideRef.current)==null||Re.focus()}}}),!T&&ie("start"),n,ie("end"),Oe&&f.jsx(Lm,{"data-type":"inside",ref:Y,onFocus:Me=>{if(u)vl(_e()[0]);else if(F!=null&&F.preserveTabOrder&&F.portalNode)if(d&&(O.current=!0),of(Me,F.portalNode)){const te=$3(v);te==null||te.focus()}else{var Re;(Re=F.afterOutsideRef.current)==null||Re.focus()}}})]})}function W2(e){return Xn(e.target)&&e.target.tagName==="BUTTON"}function OX(e){return Xn(e.target)&&e.target.tagName==="A"}function V2(e){return N3(e)}function r4(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:a="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:c=!0,stickIfOpen:d=!0}=t,h=k.useRef(),p=k.useRef(!1),b=k.useMemo(()=>({onPointerDown(g){h.current=g.pointerType},onMouseDown(g){const x=h.current;g.button===0&&a!=="click"&&(nh(x,!0)&&u||(n&&l&&(!(i.current.openEvent&&d)||i.current.openEvent.type==="mousedown")?r(!1,g.nativeEvent,"click"):(g.preventDefault(),r(!0,g.nativeEvent,"click"))))},onClick(g){const x=h.current;if(a==="mousedown"&&h.current){h.current=void 0;return}nh(x,!0)&&u||(n&&l&&(!(i.current.openEvent&&d)||i.current.openEvent.type==="click")?r(!1,g.nativeEvent,"click"):r(!0,g.nativeEvent,"click"))},onKeyDown(g){h.current=void 0,!(g.defaultPrevented||!c||W2(g))&&(g.key===" "&&!V2(o)&&(g.preventDefault(),p.current=!0),!OX(g)&&g.key==="Enter"&&r(!(n&&l),g.nativeEvent,"click"))},onKeyUp(g){g.defaultPrevented||!c||W2(g)||V2(o)||g.key===" "&&p.current&&(p.current=!1,r(!(n&&l),g.nativeEvent,"click"))}}),[i,o,a,u,c,r,n,d,l]);return k.useMemo(()=>s?{reference:b}:{},[s,b])}const $X={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},MX={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},q2=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function i4(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p,capture:b}=t,g=Qa(),x=Jn(typeof l=="function"?l:()=>!1),y=typeof l=="function"?x:l,v=k.useRef(!1),w=k.useRef(!1),{escapeKey:E,outsidePress:S}=q2(p),{escapeKey:A,outsidePress:T}=q2(b),$=k.useRef(!1),q=Jn(F=>{var K;if(!n||!s||!a||F.key!=="Escape"||$.current)return;const X=(K=o.current.floatingContext)==null?void 0:K.nodeId,O=g?nc(g.nodesRef.current,X):[];if(!E&&(F.stopPropagation(),O.length>0)){let B=!0;if(O.forEach(P=>{var G;if((G=P.context)!=null&&G.open&&!P.context.dataRef.current.__escapeKeyBubbles){B=!1;return}}),!B)return}r(!1,NY(F)?F.nativeEvent:F,"escape-key")}),D=Jn(F=>{var K;const X=()=>{var O;q(F),(O=_l(F))==null||O.removeEventListener("keydown",X)};(K=_l(F))==null||K.addEventListener("keydown",X)}),U=Jn(F=>{var K;const X=v.current;v.current=!1;const O=w.current;if(w.current=!1,u==="click"&&O||X||typeof y=="function"&&!y(F))return;const B=_l(F),P="["+Ac("inert")+"]",G=Lr(i.floating).querySelectorAll(P);let Q=xn(B)?B:null;for(;Q&&!Ds(Q);){const Te=Ks(Q);if(Ds(Te)||!xn(Te))break;Q=Te}if(G.length&&xn(B)&&!AY(B)&&!ei(B,i.floating)&&Array.from(G).every(Te=>!ei(Q,Te)))return;if(Xn(B)&&I){const Te=Ds(B),W=ao(B),Y=/auto|scroll/,ie=Te||Y.test(W.overflowX),Oe=Te||Y.test(W.overflowY),Me=ie&&B.clientWidth>0&&B.scrollWidth>B.clientWidth,Re=Oe&&B.clientHeight>0&&B.scrollHeight>B.clientHeight,te=W.direction==="rtl",ae=Re&&(te?F.offsetX<=B.offsetWidth-B.clientWidth:F.offsetX>B.clientWidth),pe=Me&&F.offsetY>B.clientHeight;if(ae||pe)return}const se=(K=o.current.floatingContext)==null?void 0:K.nodeId,_e=g&&nc(g.nodesRef.current,se).some(Te=>{var W;return ib(F,(W=Te.context)==null?void 0:W.elements.floating)});if(ib(F,i.floating)||ib(F,i.domReference)||_e)return;const Ne=g?nc(g.nodesRef.current,se):[];if(Ne.length>0){let Te=!0;if(Ne.forEach(W=>{var Y;if((Y=W.context)!=null&&Y.open&&!W.context.dataRef.current.__outsidePressBubbles){Te=!1;return}}),!Te)return}r(!1,F,"outside-press")}),J=Jn(F=>{var K;const X=()=>{var O;U(F),(O=_l(F))==null||O.removeEventListener(u,X)};(K=_l(F))==null||K.addEventListener(u,X)});k.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=E,o.current.__outsidePressBubbles=S;let F=-1;function K(G){r(!1,G,"ancestor-scroll")}function X(){window.clearTimeout(F),$.current=!0}function O(){F=window.setTimeout(()=>{$.current=!1},av()?5:0)}const B=Lr(i.floating);a&&(B.addEventListener("keydown",A?D:q,A),B.addEventListener("compositionstart",X),B.addEventListener("compositionend",O)),y&&B.addEventListener(u,T?J:U,T);let P=[];return h&&(xn(i.domReference)&&(P=Ia(i.domReference)),xn(i.floating)&&(P=P.concat(Ia(i.floating))),!xn(i.reference)&&i.reference&&i.reference.contextElement&&(P=P.concat(Ia(i.reference.contextElement)))),P=P.filter(G=>{var Q;return G!==((Q=B.defaultView)==null?void 0:Q.visualViewport)}),P.forEach(G=>{G.addEventListener("scroll",K,{passive:!0})}),()=>{a&&(B.removeEventListener("keydown",A?D:q,A),B.removeEventListener("compositionstart",X),B.removeEventListener("compositionend",O)),y&&B.removeEventListener(u,T?J:U,T),P.forEach(G=>{G.removeEventListener("scroll",K)}),window.clearTimeout(F)}},[o,i,a,y,u,n,r,h,s,E,S,q,A,D,U,T,J]),k.useEffect(()=>{v.current=!1},[y,u]);const H=k.useMemo(()=>({onKeyDown:q,...c&&{[$X[d]]:F=>{r(!1,F.nativeEvent,"reference-press")},...d!=="click"&&{onClick(F){r(!1,F.nativeEvent,"reference-press")}}}}),[q,r,c,d]),I=k.useMemo(()=>({onKeyDown:q,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[MX[u]]:()=>{v.current=!0}}),[q,u]);return k.useMemo(()=>s?{reference:H,floating:I}:{},[s,H,I])}function DX(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=hv(),o=k.useRef({}),[s]=k.useState(()=>J3()),a=Ja()!=null,[l,u]=k.useState(r.reference),c=Jn((p,b,g)=>{o.current.openEvent=p?b:void 0,s.emit("openchange",{open:p,event:b,reason:g,nested:a}),n==null||n(p,b,g)}),d=k.useMemo(()=>({setPositionReference:u}),[]),h=k.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return k.useMemo(()=>({dataRef:o,open:t,onOpenChange:c,elements:h,events:s,floatingId:i,refs:d}),[t,c,h,s,i,d])}function o4(e){e===void 0&&(e={});const{nodeId:t}=e,n=DX({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=k.useState(null),[a,l]=k.useState(null),c=(i==null?void 0:i.domReference)||o,d=k.useRef(null),h=Qa();gn(()=>{c&&(d.current=c)},[c]);const p=cX({...e,elements:{...i,...a&&{reference:a}}}),b=k.useCallback(w=>{const E=xn(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(E),p.refs.setReference(E)},[p.refs]),g=k.useCallback(w=>{(xn(w)||w===null)&&(d.current=w,s(w)),(xn(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!xn(w))&&p.refs.setReference(w)},[p.refs]),x=k.useMemo(()=>({...p.refs,setReference:g,setPositionReference:b,domReference:d}),[p.refs,g,b]),y=k.useMemo(()=>({...p.elements,domReference:c}),[p.elements,c]),v=k.useMemo(()=>({...p,...r,refs:x,elements:y,nodeId:t}),[p,x,y,t,r]);return gn(()=>{r.dataRef.current.floatingContext=v;const w=h==null?void 0:h.nodesRef.current.find(E=>E.id===t);w&&(w.context=v)}),k.useMemo(()=>({...p,context:v,refs:x,elements:y}),[p,x,y,v])}function fb(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[P2]:s,[O2]:a,...l}=e;o=l}return{...n==="floating"&&{tabIndex:-1,[hX]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[P2,O2].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),s[u]=function(){for(var h,p=arguments.length,b=new Array(p),g=0;g<p;g++)b[g]=arguments[g];return(h=r.get(u))==null?void 0:h.map(x=>x(...b)).find(x=>x!==void 0)}}}else s[u]=c}),s),{})}}function s4(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=k.useCallback(a=>fb(a,e,"reference"),t),o=k.useCallback(a=>fb(a,e,"floating"),n),s=k.useCallback(a=>fb(a,e,"item"),r);return k.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const LX="Escape";function gv(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function $p(e,t){return gv(t,e===X3||e===fv,e===Bh||e===Fh)}function hb(e,t,n){return gv(t,e===fv,n?e===Bh:e===Fh)||e==="Enter"||e===" "||e===""}function K2(e,t,n){return gv(t,n?e===Bh:e===Fh,e===fv)}function G2(e,t,n,r){const i=n?e===Fh:e===Bh,o=e===X3;return t==="both"||t==="horizontal"&&r&&r>1?e===LX:gv(t,i,o)}function BX(e,t){const{open:n,onOpenChange:r,elements:i,floatingId:o}=e,{listRef:s,activeIndex:a,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:c=null,allowEscape:d=!1,loop:h=!1,nested:p=!1,rtl:b=!1,virtual:g=!1,focusItemOnOpen:x="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:v=!0,disabledIndices:w=void 0,orientation:E="vertical",parentOrientation:S,cols:A=1,scrollItemIntoView:T=!0,virtualItemRef:$,itemSizes:q,dense:D=!1}=t,U=Mm(i.floating),J=hi(U),H=Ja(),I=Qa();gn(()=>{e.dataRef.current.orientation=E},[e,E]);const F=Jn(()=>{l(O.current===-1?null:O.current)}),K=Wx(i.domReference),X=k.useRef(x),O=k.useRef(c!=null?c:-1),B=k.useRef(null),P=k.useRef(!0),G=k.useRef(F),Q=k.useRef(!!i.floating),se=k.useRef(n),_e=k.useRef(!1),Ne=k.useRef(!1),Te=hi(w),W=hi(n),Y=hi(T),ie=hi(c),[Oe,Me]=k.useState(),[Re,te]=k.useState(),ae=Jn(()=>{function xe(At){if(g){var L;(L=At.id)!=null&&L.endsWith("-fui-option")&&(At.id=o+"-"+Math.random().toString(16).slice(2,10)),Me(At.id),I==null||I.events.emit("virtualfocus",At),$&&($.current=At)}else vl(At,{sync:_e.current,preventScroll:!0})}const dt=s.current[O.current],gt=Ne.current;dt&&xe(dt),(_e.current?At=>At():requestAnimationFrame)(()=>{const At=s.current[O.current]||dt;if(!At)return;dt||xe(At);const L=Y.current;L&&We&&(gt||!P.current)&&(At.scrollIntoView==null||At.scrollIntoView(typeof L=="boolean"?{block:"nearest",inline:"nearest"}:L))})});gn(()=>{u&&(n&&i.floating?X.current&&c!=null&&(Ne.current=!0,O.current=c,F()):Q.current&&(O.current=-1,G.current()))},[u,n,i.floating,c,F]),gn(()=>{if(u&&n&&i.floating)if(a==null){if(_e.current=!1,ie.current!=null)return;if(Q.current&&(O.current=-1,ae()),(!se.current||!Q.current)&&X.current&&(B.current!=null||X.current===!0&&B.current==null)){let xe=0;const dt=()=>{s.current[0]==null?(xe<2&&(xe?requestAnimationFrame:queueMicrotask)(dt),xe++):(O.current=B.current==null||hb(B.current,E,b)||p?ob(s,Te.current):j2(s,Te.current),B.current=null,F())};dt()}}else rf(s,a)||(O.current=a,ae(),Ne.current=!1)},[u,n,i.floating,a,ie,p,s,E,b,F,ae,Te]),gn(()=>{var xe;if(!u||i.floating||!I||g||!Q.current)return;const dt=I.nodesRef.current,gt=(xe=dt.find(L=>L.id===H))==null||(xe=xe.context)==null?void 0:xe.elements.floating,ft=va(Lr(i.floating)),At=dt.some(L=>L.context&&ei(L.context.elements.floating,ft));gt&&!At&&P.current&&gt.focus({preventScroll:!0})},[u,i.floating,I,H,g]),gn(()=>{if(!u||!I||!g||H)return;function xe(dt){te(dt.id),$&&($.current=dt)}return I.events.on("virtualfocus",xe),()=>{I.events.off("virtualfocus",xe)}},[u,I,g,H,$]),gn(()=>{G.current=F,se.current=n,Q.current=!!i.floating}),gn(()=>{n||(B.current=null)},[n]);const pe=a!=null,We=k.useMemo(()=>{function xe(gt){if(!n)return;const ft=s.current.indexOf(gt);ft!==-1&&O.current!==ft&&(O.current=ft,F())}return{onFocus(gt){let{currentTarget:ft}=gt;_e.current=!0,xe(ft)},onClick:gt=>{let{currentTarget:ft}=gt;return ft.focus({preventScroll:!0})},...y&&{onMouseMove(gt){let{currentTarget:ft}=gt;_e.current=!0,Ne.current=!1,xe(ft)},onPointerLeave(gt){let{pointerType:ft}=gt;if(!(!P.current||ft==="touch")&&(_e.current=!0,O.current=-1,F(),!g)){var At;(At=J.current)==null||At.focus({preventScroll:!0})}}}}},[n,J,y,s,F,g]),Fe=k.useCallback(()=>{var xe;return S!=null?S:I==null||(xe=I.nodesRef.current.find(dt=>dt.id===H))==null||(xe=xe.context)==null||(xe=xe.dataRef)==null?void 0:xe.current.orientation},[H,I,S]),Ue=Jn(xe=>{if(P.current=!1,_e.current=!0,xe.which===229||!W.current&&xe.currentTarget===J.current)return;if(p&&G2(xe.key,E,b,A)){$p(xe.key,Fe())||br(xe),r(!1,xe.nativeEvent,"list-navigation"),Xn(i.domReference)&&(g?I==null||I.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const dt=O.current,gt=ob(s,w),ft=j2(s,w);if(K||(xe.key==="Home"&&(br(xe),O.current=gt,F()),xe.key==="End"&&(br(xe),O.current=ft,F())),A>1){const At=q||Array.from({length:s.current.length},()=>({width:1,height:1})),L=$Y(At,A,D),j=L.findIndex(de=>de!=null&&!Eg(s,de,w)),R=L.reduce((de,Ae,He)=>Ae!=null&&!Eg(s,Ae,w)?He:de,-1),Z=L[OY({current:L.map(de=>de!=null?s.current[de]:null)},{event:xe,orientation:E,loop:h,rtl:b,cols:A,disabledIndices:DY([...w||s.current.map((de,Ae)=>Eg(s,Ae)?Ae:void 0),void 0],L),minIndex:j,maxIndex:R,prevIndex:MY(O.current>ft?gt:O.current,At,L,A,xe.key===fv?"bl":xe.key===(b?Bh:Fh)?"tr":"tl"),stopEvent:!0})];if(Z!=null&&(O.current=Z,F()),E==="both")return}if($p(xe.key,E)){if(br(xe),n&&!g&&va(xe.currentTarget.ownerDocument)===xe.currentTarget){O.current=hb(xe.key,E,b)?gt:ft,F();return}hb(xe.key,E,b)?h?O.current=dt>=ft?d&&dt!==s.current.length?-1:gt:$r(s,{startingIndex:dt,disabledIndices:w}):O.current=Math.min(ft,$r(s,{startingIndex:dt,disabledIndices:w})):h?O.current=dt<=gt?d&&dt!==-1?s.current.length:ft:$r(s,{startingIndex:dt,decrement:!0,disabledIndices:w}):O.current=Math.max(gt,$r(s,{startingIndex:dt,decrement:!0,disabledIndices:w})),rf(s,O.current)&&(O.current=-1),F()}}),ue=k.useMemo(()=>g&&n&&pe&&{"aria-activedescendant":Re||Oe},[g,n,pe,Re,Oe]),Pe=k.useMemo(()=>({"aria-orientation":E==="both"?void 0:E,...K?{}:ue,onKeyDown:Ue,onPointerMove(){P.current=!0}}),[ue,Ue,E,K]),qe=k.useMemo(()=>{function xe(gt){x==="auto"&&T3(gt.nativeEvent)&&(X.current=!0)}function dt(gt){X.current=x,x==="auto"&&I3(gt.nativeEvent)&&(X.current=!0)}return{...ue,onKeyDown(gt){P.current=!1;const ft=gt.key.startsWith("Arrow"),At=["Home","End"].includes(gt.key),L=ft||At,j=K2(gt.key,E,b),R=G2(gt.key,E,b,A),Z=K2(gt.key,Fe(),b),de=$p(gt.key,E),Ae=(p?Z:de)||gt.key==="Enter"||gt.key.trim()==="";if(g&&n){const Ze=I==null?void 0:I.nodesRef.current.find(Pt=>Pt.parentId==null),Mt=I&&Ze?RY(I.nodesRef.current,Ze.id):null;if(L&&Mt&&$){const Pt=new KeyboardEvent("keydown",{key:gt.key,bubbles:!0});if(j||R){var He,Tt;const Si=((He=Mt.context)==null?void 0:He.elements.domReference)===gt.currentTarget,ot=R&&!Si?(Tt=Mt.context)==null?void 0:Tt.elements.domReference:j?s.current.find(ki=>(ki==null?void 0:ki.id)===Oe):null;ot&&(br(gt),ot.dispatchEvent(Pt),te(void 0))}if((de||At)&&Mt.context&&Mt.context.open&&Mt.parentId&&gt.currentTarget!==Mt.context.elements.domReference){var Wt;br(gt),(Wt=Mt.context.elements.domReference)==null||Wt.dispatchEvent(Pt);return}}return Ue(gt)}if(!(!n&&!v&&ft)){if(Ae){const Ze=$p(gt.key,Fe());B.current=p&&Ze?null:gt.key}if(p){Z&&(br(gt),n?(O.current=ob(s,Te.current),F()):r(!0,gt.nativeEvent,"list-navigation"));return}de&&(c!=null&&(O.current=c),br(gt),!n&&v?r(!0,gt.nativeEvent,"list-navigation"):Ue(gt),n&&F())}},onFocus(){n&&!g&&(O.current=-1,F())},onPointerDown:dt,onPointerEnter:dt,onMouseDown:xe,onClick:xe}},[Oe,ue,A,Ue,Te,x,s,p,F,r,n,v,E,Fe,b,c,I,g,$]);return k.useMemo(()=>u?{reference:qe,floating:Pe,item:We}:{},[u,qe,Pe,We])}const FX=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function a4(e,t){var n,r;t===void 0&&(t={});const{open:i,elements:o,floatingId:s}=e,{enabled:a=!0,role:l="dialog"}=t,u=hv(),c=((n=o.domReference)==null?void 0:n.id)||u,d=k.useMemo(()=>{var v;return((v=Mm(o.floating))==null?void 0:v.id)||s},[o.floating,s]),h=(r=FX.get(l))!=null?r:l,b=Ja()!=null,g=k.useMemo(()=>h==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:i?d:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":h==="alertdialog"?"dialog":h,"aria-controls":i?d:void 0,...h==="listbox"&&{role:"combobox"},...h==="menu"&&{id:c},...h==="menu"&&b&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[h,d,b,i,c,l]),x=k.useMemo(()=>{const v={id:d,...h&&{role:h}};return h==="tooltip"||l==="label"?v:{...v,...h==="menu"&&{"aria-labelledby":c}}},[h,d,c,l]),y=k.useCallback(v=>{let{active:w,selected:E}=v;const S={role:"option",...w&&{id:d+"-fui-option"}};switch(l){case"select":return{...S,"aria-selected":w&&E};case"combobox":return{...S,"aria-selected":E}}return{}},[d,l]);return k.useMemo(()=>a?{reference:g,floating:x,item:y}:{},[a,g,x,y])}function zX(e,t){var n;const{open:r,dataRef:i}=e,{listRef:o,activeIndex:s,onMatch:a,onTypingChange:l,enabled:u=!0,findMatch:c=null,resetMs:d=750,ignoreKeys:h=[],selectedIndex:p=null}=t,b=k.useRef(-1),g=k.useRef(""),x=k.useRef((n=p!=null?p:s)!=null?n:-1),y=k.useRef(null),v=Jn(a),w=Jn(l),E=hi(c),S=hi(h);gn(()=>{r&&(Ai(b),y.current=null,g.current="")},[r]),gn(()=>{if(r&&g.current===""){var D;x.current=(D=p!=null?p:s)!=null?D:-1}},[r,p,s]);const A=Jn(D=>{D?i.current.typing||(i.current.typing=D,w(D)):i.current.typing&&(i.current.typing=D,w(D))}),T=Jn(D=>{function U(K,X,O){const B=E.current?E.current(X,O):X.find(P=>(P==null?void 0:P.toLocaleLowerCase().indexOf(O.toLocaleLowerCase()))===0);return B?K.indexOf(B):-1}const J=o.current;if(g.current.length>0&&g.current[0]!==" "&&(U(J,J,g.current)===-1?A(!1):D.key===" "&&br(D)),J==null||S.current.includes(D.key)||D.key.length!==1||D.ctrlKey||D.metaKey||D.altKey)return;r&&D.key!==" "&&(br(D),A(!0)),J.every(K=>{var X,O;return K?((X=K[0])==null?void 0:X.toLocaleLowerCase())!==((O=K[1])==null?void 0:O.toLocaleLowerCase()):!0})&&g.current===D.key&&(g.current="",x.current=y.current),g.current+=D.key,Ai(b),b.current=window.setTimeout(()=>{g.current="",x.current=y.current,A(!1)},d);const I=x.current,F=U(J,[...J.slice((I||0)+1),...J.slice(0,(I||0)+1)],g.current);F!==-1?(v(F),y.current=F):D.key!==" "&&(g.current="",A(!1))}),$=k.useMemo(()=>({onKeyDown:T}),[T]),q=k.useMemo(()=>({onKeyDown:T,onKeyUp(D){D.key===" "&&A(!1)}}),[T,A]);return k.useMemo(()=>u?{reference:$,floating:q}:{},[u,$,q])}function HX(e,t,n){n===void 0&&(n=!0);let r=e.filter(o=>{var s;return o.parentId===t&&((s=o.context)==null?void 0:s.open)}),i=r;for(;i.length;)i=n?e.filter(o=>{var s;return(s=i)==null?void 0:s.some(a=>{var l;return o.parentId===a.id&&((l=o.context)==null?void 0:l.open)})}):e,r=r.concat(i);return r}function Y2(e,t){const[n,r]=e;let i=!1;const o=t.length;for(let s=0,a=o-1;s<o;a=s++){const[l,u]=t[s]||[0,0],[c,d]=t[a]||[0,0];u>=r!=d>=r&&n<=(c-l)*(r-u)/(d-u)+l&&(i=!i)}return i}function UX(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function WX(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e;let i,o=!1,s=null,a=null,l=performance.now();function u(d,h){const p=performance.now(),b=p-l;if(s===null||a===null||b===0)return s=d,a=h,l=p,null;const g=d-s,x=h-a,v=Math.sqrt(g*g+x*x)/b;return s=d,a=h,l=p,v}const c=d=>{let{x:h,y:p,placement:b,elements:g,onClose:x,nodeId:y,tree:v}=d;return function(E){function S(){clearTimeout(i),x()}if(clearTimeout(i),!g.domReference||!g.floating||b==null||h==null||p==null)return;const{clientX:A,clientY:T}=E,$=[A,T],q=_X(E),D=E.type==="mouseleave",U=cb(g.floating,q),J=cb(g.domReference,q),H=g.domReference.getBoundingClientRect(),I=g.floating.getBoundingClientRect(),F=b.split("-")[0],K=h>I.right-I.width/2,X=p>I.bottom-I.height/2,O=UX($,H),B=I.width>H.width,P=I.height>H.height,G=(B?H:I).left,Q=(B?H:I).right,se=(P?H:I).top,_e=(P?H:I).bottom;if(U&&(o=!0,!D))return;if(J&&(o=!1),J&&!D){o=!0;return}if(D&&xn(E.relatedTarget)&&cb(g.floating,E.relatedTarget)||v&&HX(v.nodesRef.current,y).some(W=>{let{context:Y}=W;return Y==null?void 0:Y.open}))return;if(F==="top"&&p>=H.bottom-1||F==="bottom"&&p<=H.top+1||F==="left"&&h>=H.right-1||F==="right"&&h<=H.left+1)return S();let Ne=[];switch(F){case"top":Ne=[[G,H.top+1],[G,I.bottom-1],[Q,I.bottom-1],[Q,H.top+1]];break;case"bottom":Ne=[[G,I.top+1],[G,H.bottom-1],[Q,H.bottom-1],[Q,I.top+1]];break;case"left":Ne=[[I.right-1,_e],[I.right-1,se],[H.left+1,se],[H.left+1,_e]];break;case"right":Ne=[[H.right-1,_e],[H.right-1,se],[I.left+1,se],[I.left+1,_e]];break}function Te(W){let[Y,ie]=W;switch(F){case"top":{const Oe=[B?Y+t/2:K?Y+t*4:Y-t*4,ie+t+1],Me=[B?Y-t/2:K?Y+t*4:Y-t*4,ie+t+1],Re=[[I.left,K||B?I.bottom-t:I.top],[I.right,K?B?I.bottom-t:I.top:I.bottom-t]];return[Oe,Me,...Re]}case"bottom":{const Oe=[B?Y+t/2:K?Y+t*4:Y-t*4,ie-t],Me=[B?Y-t/2:K?Y+t*4:Y-t*4,ie-t],Re=[[I.left,K||B?I.top+t:I.bottom],[I.right,K?B?I.top+t:I.bottom:I.top+t]];return[Oe,Me,...Re]}case"left":{const Oe=[Y+t+1,P?ie+t/2:X?ie+t*4:ie-t*4],Me=[Y+t+1,P?ie-t/2:X?ie+t*4:ie-t*4];return[...[[X||P?I.right-t:I.left,I.top],[X?P?I.right-t:I.left:I.right-t,I.bottom]],Oe,Me]}case"right":{const Oe=[Y-t,P?ie+t/2:X?ie+t*4:ie-t*4],Me=[Y-t,P?ie-t/2:X?ie+t*4:ie-t*4],Re=[[X||P?I.left+t:I.right,I.top],[X?P?I.left+t:I.right:I.left+t,I.bottom]];return[Oe,Me,...Re]}}}if(!Y2([A,T],Ne)){if(o&&!O)return S();if(!D&&r){const W=u(E.clientX,E.clientY);if(W!==null&&W<.1)return S()}Y2([A,T],Te([h,p]))?!o&&r&&(i=window.setTimeout(S,40)):S()}}};return c.__options={blockPointerEvents:n},c}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>k.createElement("svg",{ref:l,...qX,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:l4("lucide",i),...a},[...s.map(([u,c])=>k.createElement(u,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=(e,t)=>{const n=k.forwardRef(({className:r,...i},o)=>k.createElement(KX,{ref:o,iconNode:t,className:l4("lucide-".concat(VX(e)),r),...i}));return n.displayName="".concat(e),n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=Hc("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=Hc("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=Hc("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=Hc("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=Hc("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=Hc("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ZX=({label:e,options:t,onClick:n})=>{const[r,i]=k.useState(!1),{refs:o,floatingStyles:s,context:a}=o4({open:r,onOpenChange:i,middleware:[W3(4),q3(),V3()]}),l=r4(a),u=i4(a),c=a4(a,{role:"menu"}),{getReferenceProps:d,getFloatingProps:h}=s4([l,u,c]),p=()=>{n()},b=g=>{g.onClick(),i(!1)};return f.jsxs("div",{className:"inline-flex relative",children:[f.jsx("button",{onClick:p,className:"px-4 py-2 bg-brand-600 text-neutral-50 rounded-l hover:bg-brand-700 transition",children:e}),f.jsx("button",{ref:o.setReference,...d(),className:"px-2 py-2 bg-brand-600 text-neutral-50 rounded-r border-l border-brand-500 hover:bg-brand-700 transition",children:f.jsx(u4,{size:16})}),r&&f.jsx("div",{ref:o.setFloating,style:s,...h(),className:"absolute z-50 mt-1 w-40 bg-neutral-600 border border-gray-200 rounded shadow-lg",children:t.map((g,x)=>f.jsx("div",{onClick:()=>b(g),className:"px-4 py-2 hover:bg-neutral-100 cursor-pointer",children:g.label},x))})]})},eJ=({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o})=>{const[s,a]=k.useState([]),[l,u]=k.useState(!0),[c,d]=k.useState(s[0]);return k.useEffect(()=>{(async()=>{if(!e)return a([]);const p=await TG(e.resource_id);a(p),d(p[0])})()},[]),e?f.jsxs(sr,{isOpen:n,onClose:r,children:[f.jsx(ar,{title:t,onClose:r}),f.jsx(lr,{children:f.jsx("h4",{children:e.description})}),f.jsx(hr,{children:f.jsx("div",{className:"flex items-center justify-between w-full",children:f.jsx("div",{className:"flex flex-row justify-center gap-2",children:s.length?f.jsxs(f.Fragment,{children:[f.jsx(Yn,{id:"auto-update",label:"Auto Update",checked:l,onChange:u}),f.jsx(ZX,{label:Jl(c.item_id),onClick:()=>{r(),i(c.item_id)},options:s.map(h=>({label:Jl(h.item_id),onClick:()=>d(h)}))})]}):f.jsx("p",{children:"loading versions..."})})})})]}):null},tJ=({isOpen:e,requestClose:t,onAccept:n})=>f.jsxs(sr,{isOpen:e,children:[f.jsx(ar,{title:"Disclaimer"}),f.jsxs(lr,{children:[f.jsx("p",{children:"BardsBallad is a system-agnostic character manager that supports a wide variety of user-created and open-license game systems"}),f.jsx("br",{}),f.jsx("p",{children:"Some content may be based on systems originally published under the ORC License, Creative Commons (CC-BY 4.0), or other open licenses. All such content is provided either by BardsBallad or individual users in compliance with their respective licenses."}),f.jsx("br",{}),f.jsx("p",{children:"BardsBallad is not affiliated with or endorsed by Paizo Inc., Wizards of the Coast, or any other publishers. Names like Pathfinder, Starfinder, or Dungeons & Dragons are trademarks of their respective owners and are only used to indicate compatibility where appropriate."}),f.jsx("br",{}),f.jsx("p",{children:"Users are solely responsible for the legality of content they upload or share. Please do not upload copyrighted material or publisher-owned setting content (such as Golarion or the Forgotten Realms) unless you have the appropriate rights."})]}),f.jsx(hr,{children:f.jsx(Rt,{color:"primary",onClick:()=>{n(!0),t()},children:"I Understand"})})]}),nJ=({data:e,isOpen:t,requestClose:n,onSave:r})=>f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:"Save New Version",onClose:n}),f.jsxs(lr,{children:[f.jsx("p",{children:'All of your changes are saved to a hidden "edits" copy of this version as you make them. This only saves your changes to a new public copy so that characters can use them.'}),f.jsx("p",{children:"Are you sure you'd like to save your changes to a new version."})]}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"light",onClick:n,children:"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{r(!0),n()},children:"Confirm"})]})]});function rJ(e,t,n){var r,i;typeof e=="function"?(r=t||[],i=n):(r=[],i=t);var o=$t.useRef({hasResult:!1,result:i,error:null}),s=$t.useReducer(function(u){return u+1},0);s[0];var a=s[1],l=$t.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")o.current.result=u.getValue(),o.current.hasResult=!0;else{var c=u.subscribe(function(d){o.current.result=d,o.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if($t.useDebugValue(o.current.result),$t.useEffect(function(){var u=l.subscribe(function(c){var d=o.current;(d.error!==null||d.result!==c)&&(d.error=null,d.result=c,d.hasResult=!0,a())},function(c){var d=o.current;d.error!==c&&(d.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),o.current.error)throw o.current.error;return o.current.result}function Zs(e,t,n){return rJ(function(){return OU(e)},t||[],n)}function iJ(){const e=Zs(()=>kt.systems.toArray(),[]),{user:t}=pr.useValue(),n=t?t.id:"none";return{systems:(e==null?void 0:e.filter(i=>{const o=i.deleted_at,s=i.user_id===n;return!o&&s}))||[],isLoading:e===void 0}}function EE(){const e=Zs(async()=>(await kt.versions.toArray()).filter(n=>{const r=n.deleted_at,i=n.local_id.split("|")[1]!==void 0;return!r&&!i}),[]);return{versions:e||[],isLoading:e===void 0}}const oJ=({data:e,isOpen:t,requestClose:n,onSave:r})=>{const{systems:i}=iJ(),{versions:o}=EE(),[s,a]=k.useState(i[0]),[l,u]=k.useState(o[0]),[c,d]=k.useState(""),[h,p]=k.useState(""),[b,g]=k.useState(!0),[x,y]=k.useState(!1);return k.useEffect(()=>{if(!i)return;const v=i[0];a(v),u(o.find(w=>w.reference_id===v.local_id))},[i]),k.useEffect(()=>{const v=async()=>{if(!await AG(s.local_id))return y(!0);y(!1)};s&&v()},[s]),f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:"Publish New System",onClose:n}),f.jsxs(lr,{children:[f.jsx(ht,{id:"type-to-publish",label:"Item Type",value:"system",onChange:v=>{},children:f.jsx("option",{value:"system",children:"System"})}),f.jsx(ht,{id:"item-to-publish",label:"System",value:s==null?void 0:s.local_id,onChange:v=>a(i.find(w=>w.local_id===v)),children:i.map(v=>f.jsx("option",{value:v.local_id,children:v.name}))}),f.jsx(dE,{id:"description",label:"Description",value:c,onChange:d}),f.jsx(Yn,{id:"is-public",label:"Is public?",checked:b,onChange:g}),f.jsx(ht,{id:"version-to-publish",label:"Version",value:l==null?void 0:l.local_id,onChange:v=>u(o.find(w=>w.local_id===v)),children:o==null?void 0:o.filter(v=>v.reference_id===s.local_id).map(v=>f.jsx("option",{value:v.local_id,children:Jl(v.local_id)},v.local_id))})]}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"light",onClick:n,children:"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{r({item:s,version:l,changelog:h,description:c,resource_type:"system",is_public:b}),n()},children:"Publish"})]})]})},sJ=({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o})=>f.jsxs(sr,{isOpen:n,onClose:r,children:[f.jsx(ar,{title:t,onClose:r}),f.jsx(lr,{children:f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("p",{children:"Welcome to BardsBallad we're a System Agnostic TTRPG Character Manager"}),f.jsx("p",{children:"Seems you're new here. Would you like to take a tour?"})]})}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"light",onClick:()=>{o(),r()},children:"No Thank You"}),f.jsx(Rt,{color:"primary",onClick:()=>{i(!1),r()},children:"Yes Please!"})]})]}),aJ=()=>{const e=Ny.useValue();return f.jsx(f.Fragment,{children:e.map(({id:t,modal:n})=>n.type==="blueprint"?f.jsx(bq,{title:n.title,data:n.data,isVisible:!0,requestClose:()=>ui(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="onboarding"?f.jsx(sJ,{data:n.data,title:n.title,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="PublishItem"?f.jsx(oJ,{data:n.data,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave},t):n.type==="SaveNewVersion"?f.jsx(nJ,{data:n.data,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave},t):n.type==="HandleConflicts"?f.jsx($q,{data:n.data,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave},t):n.type==="marketplace_view"?f.jsx(eJ,{data:n.data,title:n.title,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave},t):n.type==="authentication"?f.jsx(KG,{isOpen:!0,requestClose:()=>ui(t)},t):n.type==="import_file"?f.jsx(YG,{title:n.title,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave},t):n.type==="edit_object"?f.jsx(fE,{title:n.title,data:n.data,isVisible:!0,requestClose:()=>ui(t),onSave:n.onSave,onDelete:n.onDelete,types:n.types},t):n.type==="edit_blueprint_param"?f.jsx(Iq,{data:n.data,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="edit_string"?f.jsx(Oh,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="edit_number"?f.jsx(Pq,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>ui(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="confirm"?f.jsx(Oq,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>ui(t),onConfirm:n.onSave},t):n.type==="marketplace_disclaimer"?f.jsx(tJ,{isOpen:!0,requestClose:()=>ui(t),onAccept:n.onSave},t):f.jsxs("h1",{children:[n.type," is un supported."]}))})},SE=Ya(!1),c4=()=>SE.set(!0),Mp=()=>SE.set(!1);function lJ(e,t){const[n,r]=k.useState(null),i=k.useRef(null);return k.useEffect(()=>{let o=null;const s=()=>{if(e){if(o=document.querySelector(e),o){const a=o.getBoundingClientRect();r(l=>!l||JSON.stringify(l)!==JSON.stringify(a)?a:l)}i.current=requestAnimationFrame(s)}};return e&&s(),()=>{i.current&&cancelAnimationFrame(i.current)}},[e,t]),n}function uJ(e,t){if(!e||t==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const n=12;switch(t){case"top":return{top:"".concat(e.top-n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, -100%)"};case"bottom":return{top:"".concat(e.bottom+n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, 0)"};case"left":return{top:"".concat(e.top,"px"),left:"".concat(e.left-n,"px"),transform:"translate(-100%, 0)"};case"right":return{top:"".concat(e.top,"px"),left:"".concat(e.right+n,"px"),transform:"translate(0, 0)"};default:return{top:"".concat(e.bottom+n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, 0)"}}}const cJ=({steps:e,onFinish:t})=>{const[n,r]=k.useState(0),i=lJ(e[n].selector,!0),o=Eh(),s=e[n],a=()=>{s.navTo&&o(s.navTo),n+1<e.length?r(n+1):t()};return i?dI.createPortal(f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 pointer-events-auto"}),f.jsx("div",{className:"fixed border-2 border-yellow-400 pointer-events-auto z-50 rounded-lg transition-all duration-300",style:{top:i.top+window.scrollY,left:i.left+window.scrollX,width:i.width,height:i.height}}),f.jsxs("div",{className:"fixed z-50 p-4 bg-white text-black rounded shadow-xl max-w-xs",style:uJ(i,s.position||"bottom"),children:[f.jsx("p",{className:"mb-2",children:s.content}),!s.waitForClick&&f.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded",onClick:a,children:n+1<e.length?"Next":"Finish"})]})]}),document.body):null},dJ=[{id:"step1",selector:"#nav-Home",content:"Welcome to the app! This is the home page, where you can see our latest news and updates.",position:"bottom"},{id:"step2",selector:"#nav-Characters",content:"This is the character manager, where you can create and manage your characters. You can also import characters from json files.",position:"bottom",navTo:"characters"},{id:"step3",selector:"#nav-Library",content:"Library is where you can find all the systems you have downloaded. You can also create your own systems here.",position:"bottom",navTo:"library"},{id:"step4",selector:"#nav-Settings",content:"And this is the settings page, where you can change your settings and preferences. You can also manage your account here.",position:"top",navTo:"settings"},{id:"step5",selector:"#nav-Marketplace",content:"This is the marketplace, where you can find systems to use. You can search for systems by name or filter by license type.",position:"bottom",navTo:"marketplace"}],d4=k.createContext({}),fJ=()=>k.useContext(d4),hJ={success:"bg-green-600 text-white",error:"bg-red-600 text-white"},pJ=({id:e,message:t,type:n="success",onClose:r})=>f.jsxs("div",{className:"rounded-lg shadow-lg px-4 py-3 flex items-center justify-between w-72 ".concat(hJ[n]),children:[f.jsx("span",{children:t}),f.jsx("button",{onClick:r,children:f.jsx(QX,{className:"w-4 h-4 ml-2 opacity-80 hover:opacity-100"})})]}),gJ=({children:e})=>{const[t,n]=k.useState([]),r=o=>{n(s=>s.filter(a=>a.id!==o))},i=k.useCallback((o,s="success",a=3e3)=>{const l=oE();n(u=>[...u,{id:l,message:o,type:s}]),setTimeout(()=>r(l),a)},[]);return f.jsxs(d4.Provider,{value:{addToast:i},children:[e,f.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:t.map(o=>f.jsx(pJ,{...o,onClose:()=>r(o.id)},o.id))})]})},mJ=[{name:"Home",path:""},{name:"Marketplace",path:"marketplace"},{name:"Characters",path:"characters"},{name:"Library",path:"library"}],yJ=[{icon:()=>f.jsx("svg",{className:"flex-shrink-0 w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 21",children:f.jsx("path",{d:"m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"})}),name:"Settings",path:"settings"}],vJ=()=>{const e=SE.useValue(),t=pr.useValue(),[n,r]=k.useState(!1),i=k.useRef(!1);return k.useEffect(()=>i.current?void 0:(i.current=!0,(async()=>{await nf.get("onboarding-completed")||dn({type:"onboarding",data:null,title:"Welcome to BardsBallad!",onDelete:()=>{nf.set("onboarding-completed",!0)},onSave:()=>{c4(),r(!0)}})})(),()=>{g6("onboarding")}),[]),f.jsx("div",{className:"w-screen h-screen-dynamic bg-neutral-50 dark:bg-neutral-900 text-primary transition-colors overflow-x-hidden",children:f.jsxs(gJ,{children:[n&&f.jsx(cJ,{steps:dJ,onFinish:()=>{nf.set("onboarding-completed",!0),r(!1)}}),f.jsx("div",{onClick:Mp,className:"".concat(e?"":"-translate-x-full"," bg-neutral-950 opacity-65 fixed top-0 left-0 z-40 w-screen sm:w-64 h-screen-dynamic sm:translate-x-0")}),f.jsx("aside",{onClick:Mp,className:"".concat(e?"":"-translate-x-full"," border-r border-neutral-500 dark:border-neutral-700 bg-neutral-950 fixed top-0 left-0 z-40 w-64 h-screen-dynamic transition-transform sm:translate-x-0"),"aria-label":"Sidebar",children:f.jsxs("div",{className:"h-full flex flex-col justify-between px-3 py-4 overflow-y-auto bg-neutral-50 dark:bg-neutral-950",onClick:o=>o.stopPropagation(),children:[f.jsxs("div",{children:[f.jsxs("a",{className:"flex items-center ps-2.5 mb-5",children:[f.jsx("svg",{className:"h-11 me-3 sm:h-12",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 442 442",children:f.jsx("g",{children:f.jsxs("g",{children:[f.jsx("path",{className:"fill-brand-500",d:"M221,442c-59.03,0-114.53-22.99-156.27-64.73S0,280.03,0,221,22.99,106.47,64.73,64.73C106.47,22.99,161.97,0,221,0s114.53,22.99,156.27,64.73c41.74,41.74,64.73,97.24,64.73,156.27s-22.99,114.53-64.73,156.27-97.24,64.73-156.27,64.73ZM221,12C105.76,12,12,105.76,12,221s93.76,209,209,209,209-93.76,209-209S336.24,12,221,12Z"}),f.jsx("path",{className:"fill-brand-500",d:"M343,318c-10.28-3.95-23-4-30,1-8.96,6.4-14,18-27.89,17-13.33-.96-18.11-10-18.11-10,0,0,13-1,21-8,6.58-5.76,12-12,11-24-.91-10.96-8.94-16-18-16-14,0-22,11-22,11,0,0-3-11,10-30,14.43-21.09,37.58-34.03,45-50,13-28,8.03-51,8.03-51l5.18-5.04.76.92s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-3.19-3.94,7.19-6.99,2.42,2.93s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-4.83-5.96,7.26-7.07,3.43,4.15s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-5.83-7.19.83-.81s3.33,2.68,6-1c2.93-4.04-2-7-2-7l-13-15s-1-4-5-3c-4.95,1.24-4,5-4,5l-.34.22-6.66-8.22s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l4.32,5.24-8.36,5.3-5.4-6.66s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l3.05,3.69-8.25,5.23-4.8-5.92s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l2.44,2.96-91.7,58.17s-7.97,4.6-15.3,9c-5,3-9-4-9-4l-3-2-2.44,2s4.89,6.76,4.44,9c-1,5-5,1-5,1l-6-7-4-3-2,3,7.43,9s2.62,3,.57,5-6-3-6-3l-9.95-12-4.05-2-2,2,11,14s4,5,1,7-7-4-7-4l-14-18-5-2-1,3,14.89,23s4.11,4,.11,7c-3.39,2.55-6.85-1.6-6.85-1.6l-21.54-28-5.61-2.4-1,3,20,28s6.35,6.71,1,9c-7,3-11.75-4-11.75-4l-24.25-30-4-2-1,3,23.1,33s5.13,7,2.05,10c-3.08,3-8.92-2.5-8.92-2.5l-29.23-37.5-4-2-1,3,32.9,47s4.1,5,2.1,7c-3.23,3.23-6-1-6-1l-38-51-6-1-3,4s65.82,92,73,99,9.9,1,14,3,5.41,7.59,1,12c-6,6-11-1-11-1,0,0-68.15-92-78.4-106-10.26-14-15.22-27.04-16.6-38-2-16,2.57-39,20-43s33.07.64,42,13c13,18,18.46,26.33,29,34,11,8,33.57,10.15,49-4,12-11,9.91-29,9.91-29,0,0,20.47-10.15,26.09-27,7-21-8.5-37.38-3-59,3.12-12.27,14-22,28-22,18.03,0,23.78,11,23.78,11,0,0-5.65,0-10.78,5s-5.64,11.45-2,16c4,5,13,5,19,0,6.61-5.51,5.06-14,5.06-14,0,0,5.94-4,11.94,4,4.38,5.84,4.04,14.63,15,16,8,1,16-8,14-16-1.21-4.85-5.49-7.87-10-4-7,6,3.08,13.26-3,15-7,2-9-11-16-17-5.93-5.08-11-6-11-6,0,0-1-19-19-22-17.31-2.88-30.74,2.36-41,14-10.26,11.64-12.05,26-10,37s10.13,29,5,42-23.11,20-23.11,20c0,0-.89-11-5.89-17-6.46-7.75-13-13-27-12-10.02.72-23.05,11-21,25s17,15,17,15c0,0-9.27,9.07-27,4-14-4-14.89-13.18-30-22-20.23-11.82-37-6-42-3-4.62,2.77-18.99,11.98-19,40,0,24,13,40,13,40l-23,12s-6,2-8,7c-1.53,3.83,2,8,2,8l95,122s6.82,11,14,11c6,0,13-6,13-6,0,0,24.27-16,50.94-57s22.56-77.58,22.56-77.58l74.5-51.42s8-5,6-8c-1.76-2.64-9,3-9,3,0,0-116.44,74.29-119,76-3,2-4-2-4-2,0,0-2-6-6-10-2.7-2.7-6.08-3.16-7-5-1-2,1-4,3-5l108.67-73s8.99-8,25.33-5c8.31,1.53,15,8,15,8,0,0,7.97,8,9,18s-1.13,20-5.23,30-8.2,15-18.46,23c-10.26,8-25.2,13.19-37.31,20-16,9-22.84,24.61-27,35-2,5-4.18,20,3,31s24,15,24,15c0,0,3.85,5,10,9s14.02,5.61,22,5c13-1,16.25-8.83,24-14,6-4,16.18-4,24.38,1,8.2,5,15.62,16.58,15.62,28,0,12-1.8,19-10,27s-15.54,11-34,11-29-1-38-7c-11.91-7.94-12.92-15.81-24-28-10-11-21.69-15-34-15-8,0-15.49,1.49-24,10-7,7-7,18-7,18,0,0-4,2-10,9-5.14,5.99-10,13-17,14-10.58,1.51-17.59-2-17.59-2,0,0,1.62-3,.59-5s-3.9-3-8-3-6.74,4.26-2,9c3,3,6.52,5.77,17,7,17,2,22.94-7.94,28-13,7-7,11-8,11-8,0,0,2,5,7,8,3.15,1.89,10,3,15,1,5.95-2.38,7-10,4-15-2.78-4.63-12-5-12-5,0,0,3-8,16-6,8.95,1.38,13.96,5.04,28,18,13,12,30.32,14.88,50,16,35,2,47.44,0,59.74-10,12.31-10,15.54-33.28,13.26-44s-10.59-20-21-24ZM274,66c-7,4-12-2-11-7,.78-3.92,4-7,12-8,0,0,5.14,11.49-1,15ZM147,132c-1.05-6.32,3-16,13-17s12,6,12,12c0,10.44-7,16-7,16-9,0-17-5-18-11ZM164,252c0,10.49-8.51,19-19,19s-19-8.51-19-19,8.51-19,19-19,19,8.51,19,19ZM347,107s7.18,5.73,8,9c.49,1.94.03,3.42-.57,4.43l-12.11-14.93c3.12-.83,4.68,1.5,4.68,1.5ZM335.77,109.21l13.37,16.2-7.54,6.66-14.23-17.55c3.21-2.03,6.11-3.86,8.41-5.3ZM321.04,118.52l15.13,18.33-7.46,6.58-15.94-19.66c2.74-1.74,5.54-3.52,8.27-5.25ZM310,142c-8.3-6.64-18-5-18-5,0,0,6.33-4.04,14.44-9.21l16.85,20.42-4.29,3.79s-4-6-9-10ZM261,299s2-7,9-12,15-5,19-2c5.06,3.79,5.41,11.18,3,16-2,4-9.11,10.32-17,9-12-2-14-11-14-11ZM198,374c4.47,0,7,4,6,7-1.14,3.42-7,3-10,1-2.35-1.57-4-6-4-6,0,0,3-2,8-2Z"})]})})}),f.jsxs("div",{children:[f.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"BardsBallad"}),f.jsx("p",{className:"text-neutral-500",children:"v0.1.0"})]})]}),f.jsx("ul",{className:"pt-4 mt-4 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:mJ.map(o=>f.jsx("li",{children:f.jsx(em,{id:"nav-".concat(o.name),to:o.path,onClick:Mp,children:f.jsxs("div",{className:"flex items-center p-2 text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-100 dark:hover:bg-neutral-700 group",children:[f.jsxs("svg",{className:"w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 21",children:[f.jsx("path",{d:"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"}),f.jsx("path",{d:"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"})]}),f.jsx("span",{className:"ms-3",children:o.name})]})})},o.name))})]}),f.jsxs("div",{children:[f.jsxs("div",{id:"dropdown-cta",className:"p-4 mt-6 rounded-lg bg-brand-50 bg-gradient-to-r dark:from-brand-500 dark:to-brand-700",role:"alert",children:[f.jsx("div",{className:"flex items-center mb-3",children:f.jsx("span",{className:"bg-brand-100 text-brand-800 text-sm font-semibold me-2 px-2.5 py-0.5 rounded dark:bg-brand-200 dark:text-brand-900",children:"Beta"})}),f.jsx("p",{className:"mb-3 text-sm text-brand-800 dark:text-brand-100",children:"We're happy you're using the BardsBallad Beta! If you run into any problems please reach out to us through one of the platforms below!"})]}),f.jsxs("div",{className:"flex mt-3 gap-2 px-2",children:[f.jsx("a",{href:"https://discord.gg/a5qSfxv",target:"_blank",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 fill-neutral-300 hover:fill-brand-400 transition-colors",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M464 66.52A50 50 0 00414.12 17L97.64 16A49.65 49.65 0 0048 65.52V392c0 27.3 22.28 48 49.64 48H368l-13-44 109 100zM324.65 329.81s-8.72-10.39-16-19.32C340.39 301.55 352.5 282 352.5 282a139 139 0 01-27.85 14.25 173.31 173.31 0 01-35.11 10.39 170.05 170.05 0 01-62.72-.24 184.45 184.45 0 01-35.59-10.4 141.46 141.46 0 01-17.68-8.21c-.73-.48-1.45-.72-2.18-1.21-.49-.24-.73-.48-1-.48-4.36-2.42-6.78-4.11-6.78-4.11s11.62 19.09 42.38 28.26c-7.27 9.18-16.23 19.81-16.23 19.81-53.51-1.69-73.85-36.47-73.85-36.47 0-77.06 34.87-139.62 34.87-139.62 34.87-25.85 67.8-25.12 67.8-25.12l2.42 2.9c-43.59 12.32-63.44 31.4-63.44 31.4s5.32-2.9 14.28-6.77c25.91-11.35 46.5-14.25 55-15.21a24 24 0 014.12-.49 205.62 205.62 0 0148.91-.48 201.62 201.62 0 0172.89 22.95s-19.13-18.15-60.3-30.45l3.39-3.86s33.17-.73 67.81 25.16c0 0 34.87 62.56 34.87 139.62 0-.28-20.35 34.5-73.86 36.19z"}),f.jsx("path",{d:"M212.05 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.8 0 24.7-11.83 24.7-26.57.25-14.76-10.9-26.57-24.7-26.57zM300.43 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.81 0 24.7-11.83 24.7-26.57S314 218 300.43 218z"})]})}),f.jsx("a",{href:"https://github.com/KingCosmic/BardsBallad",target:"_blank",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 fill-neutral-300 hover:fill-brand-400 transition-colors",viewBox:"0 0 512 512",children:f.jsx("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"})})})]}),f.jsx("a",{href:"mailto:support@bardsballad.com",className:"text-neutral-300 px-2 mt-1 hover:text-brand-400 transition-colors",children:"support@bardsballad.com"}),f.jsxs("ul",{className:"pt-4 mt-4 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:[!t.isLoggedIn&&f.jsx("li",{children:f.jsx(Rt,{className:"w-full",color:"primary",onClick:()=>{dn({type:"authentication",title:"",data:null,onSave:()=>{}})},children:"Login / Register"})}),yJ.map(o=>f.jsx("li",{children:f.jsx(em,{id:"nav-".concat(o.name),to:o.path,onClick:Mp,children:f.jsxs("div",{className:"flex items-center p-2 text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-100 dark:hover:bg-neutral-700 group",children:[o.icon(),f.jsx("span",{className:"ms-3",children:o.name})]})})},o.name))]})]})]})}),f.jsx("div",{className:"sm:ml-64 h-screen-dynamic",children:f.jsx(TB,{})}),f.jsx(aJ,{})]})})},bJ=()=>f.jsxs("button",{onClick:c4,type:"button",className:"inline-flex items-center p-2 mt-2 ms-3 text-sm text-neutral-500 rounded-lg sm:hidden hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-200 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:ring-neutral-600",children:[f.jsx("span",{className:"sr-only",children:"Open sidebar"}),f.jsx("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})})]}),za=({title:e,options:t,hasSidebar:n=!1})=>f.jsx("nav",{className:(n?"md:w-[calc(100vw-32rem)]":"")+" bg-brand-50 dark:bg-neutral-950 sticky z-20 top-0 start-0 border-b border-neutral-200 dark:border-neutral-700",children:f.jsxs("div",{className:"flex flex-wrap items-center justify-between mx-auto sm:mx-0 p-4",children:[f.jsxs("div",{className:"flex",children:[f.jsx(bJ,{}),f.jsx("a",{className:"flex items-center space-x-3 rtl:space-x-reverse ml-4",children:f.jsx("span",{className:"text-2xl font-semibold whitespace-nowrap dark:text-white",children:e})})]}),f.jsx("div",{className:"items-center justify-between flex md:w-auto md:order-1",children:(t==null?void 0:t.length)&&f.jsx("ul",{className:"flex flex-col p-4 md:p-0 mt-4 font-medium border border-neutral-100 rounded-lg bg-neutral-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-neutral-800 md:dark:bg-neutral-900 dark:border-neutral-700",children:t==null?void 0:t.map(({Content:r,onClick:i})=>f.jsx("li",{onClick:i,children:f.jsx(r,{})}))})})]})}),wJ=[{title:"Added Eruda debugging support, and started work on theme system.",date:"Released on January 21st, 2025",description:"Check your settings for themes and to enable Eruda!"},{title:"Editor Released!",date:"Released on January 16th, 2025",description:"We've released the Editor portion of BarsBallad, this will allow you to make your own systems! It includes visual drag and drop creation of character of tabs, and a custom visual code editor."},{title:"Beta Release",date:"Released on August 14th, 2024",description:"We're releasing BardsBallad into open beta! Please share all feedback through discord and github and share us with your friends!"}],xJ=({title:e,isLatest:t,date:n,description:r})=>f.jsxs("li",{className:"mb-10 ms-6",children:[f.jsx("span",{className:"absolute flex items-center justify-center w-6 h-6 bg-brand-100 rounded-full -start-3 ring-8 ring-white dark:ring-neutral-900 dark:bg-brand-900",children:f.jsx("svg",{className:"w-2.5 h-2.5 text-brand-800 dark:text-brand-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})})}),f.jsxs("h3",{className:"flex items-center mb-1 text-lg font-semibold text-neutral-900 dark:text-white",children:[e,t?f.jsxs(f.Fragment,{children:[" ",f.jsx("span",{className:"bg-brand-100 text-brand-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-brand-900 dark:text-brand-300 ms-3",children:"Latest"})]}):null]}),f.jsx("time",{className:"block mb-2 text-sm font-normal leading-none text-neutral-400 dark:text-neutral-500",children:n}),f.jsx("p",{className:"mb-4 text-base font-normal text-neutral-500 dark:text-neutral-400",children:r})]}),_J=()=>f.jsxs("div",{children:[f.jsx(za,{title:"Home"}),f.jsx("ol",{className:"relative m-10 border-s border-neutral-200 dark:border-neutral-700",children:wJ.map((e,t)=>f.jsx(xJ,{title:e.title,isLatest:t===0,date:e.date,description:e.description},e.title))})]}),f4=k.createContext({});function Uc(){return k.useContext(f4)}const h4=({localData:e,children:t})=>{const n=Uc();return f.jsx(f4.Provider,{value:{...n,...e},children:t})};function X2(e,t){return e.nodes.find(n=>n.id===t)}const EJ={process:(e,t)=>{const n=e.input;for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"start","output")}},SJ={process:(e,t)=>{const{name:n}=t.data.param,r=e.getParam(t.id,n);e.setOutput(r)}};function kJ(e,t){return t?t.split("/").reduce((r,i)=>{if(r)return Array.isArray(r)?(r=r.find(o=>o.name===i),r||void 0):r[i]},e):void 0}const CJ={process:(e,t)=>{const n=e.getCharacter(),r=kJ(n,"data/".concat(t.data.path));return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},jJ={process:(e,t)=>{const n=e.getCharacter(),r=e.getParam(t.id,"input"),i=On(n,o=>cE(o,"data/".concat(t.data.path),r));return e.setCharacter(i),e.getConnectingNodeForHandle(t,"next","output")}},AJ={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),o=n.findIndex(s=>s.name===r.name)===-1?n.concat([r]):n.concat([]);return e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},RJ={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"name"),i=n.findIndex(s=>s.name===r);let o=n.concat();return i!==-1&&o.splice(i,1),e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},NJ={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),i=e.getParam(t.id,"name"),o=n.findIndex(a=>a.name===i);let s=n.concat();return o!==-1&&(s[o]=r),e.setParam(t.id,"output",s),e.getConnectingNodeForHandle(t,"next","output")}},TJ={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0&&e.getParam(t.id,"filtered?")){const s=[...n.get("newArray"),i[r-1]];n.set("newArray",s),e.setParam(t.id,"filterd",s)}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},IJ={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0){const o=e.getParam(t.id,"newitem");if(o){const s=[...n.get("newArray"),o];n.set("newArray",s),e.setParam(t.id,"filterd",s)}}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},PJ={process:(e,t)=>{const n=e.getParam(t.id,"base")||[],r=e.getParam(t.id,"name")||"",i=n.findIndex(o=>o.name===r);return e.setParam(t.id,"output",n[i]),e.getConnectingNodeForHandle(t,"next","output")}},OJ={process:(e,t)=>{const n=e.getParam(t.id,"input");for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"next","output")}},$J={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},MJ={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n.includes(r)),e.getConnectingNodeForHandle(t,"next","output")}},DJ={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},LJ={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},BJ={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",n.toString()),e.getConnectingNodeForHandle(t,"next","output")}},FJ={process:(e,t)=>{const n=t.data.spreadType;let r={_type:n};for(let i=0;i<n.properties.length;i++){const o=n.properties[i];let s=e.getParam(t.id,o.key);s===void 0&&(s=Zf(e.getSystem().types,o.typeData)),r[o.key]=s}return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},zJ={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},HJ={process:(e,t)=>{const n=e.getParam(t.id,"enum1"),r=e.getParam(t.id,"enum2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},UJ={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},WJ={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n/r),e.getConnectingNodeForHandle(t,"next","output")}},VJ={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n-r),e.getConnectingNodeForHandle(t,"next","output")}},qJ={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",Math.floor(n)),e.getConnectingNodeForHandle(t,"next","output")}},KJ={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},GJ={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n*r),e.getConnectingNodeForHandle(t,"next","output")}},YJ={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},XJ={process:(e,t)=>e.getParam(t.id,"input")?e.getConnectingNodeForHandle(t,"true","output"):e.getConnectingNodeForHandle(t,"false","output")},JJ={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",!n),e.getConnectingNodeForHandle(t,"next","output")}},QJ={process:(e,t)=>{const n=e.getParam(t.id,"data"),r=e.getSystem();dn({title:t.data.title,type:t.data.type,types:(r==null?void 0:r.types)||[],data:n,onSave:i=>{e.setParam(t.id,"newdata",i),e.processNodes(e.getConnectingNodeForHandle(t,"save","output"))},onDelete:()=>{e.processNodes(e.getConnectingNodeForHandle(t,"delete","output"))}})}},ZJ={process:(e,t)=>{const r=e.getSystem().data.find(i=>i.name===t.data.path);return e.setParam(t.id,"output",r==null?void 0:r.data),e.getConnectingNodeForHandle(t,"next","output")}},eQ={process:(e,t)=>{const n=e.getPage(),r=t.data.chosenState;if(!r)return;const i=n.state.findIndex(a=>a.name===r.name);if(i===-1)return;const o=e.getParam(t.id,r.name),s=On(n,a=>(a.state[i]={...a.state[i],value:o},a));return e.setPage(s),e.getConnectingNodeForHandle(t,"next","output")}};function tQ(e,t){if(["string","number"].includes(t.type))return Zf(e.types,t);if(t.isArray)return[];const r=e.types.find(o=>o.name===t.type);if(!r)return;let i={_type:{...r}};for(let o=0;o<r.properties.length;o++){const s=r.properties[o];let a=s.typeData;i[s.key]=Zf(e.types,a)}return i}const nQ={process:(e,t)=>{var o;const r=e.getPage().state.find(s=>s.name===t.data.chosenState.name);if(!r)return;const i=(o=r.value)!=null?o:tQ(e.getSystem(),r.type);return e.setParam(t.id,t.data.chosenState.name,i),e.getConnectingNodeForHandle(t,"next","output")}},rQ={entry:EJ,output:SJ,get_character_data:CJ,set_character_data:jJ,get_system_data:ZJ,get_page_data:nQ,set_page_data:eQ,number_to_string:BJ,add_to_array:AJ,array_get:PJ,array_remove:RJ,array_update:NJ,filter:TJ,map:IJ,string_new:$J,string_includes:MJ,string_compare:DJ,string_concat:LJ,spread_object:OJ,create_data_from_type:FJ,new_number:UJ,divide:WJ,add:KJ,subtract:VJ,floor:qJ,multiply:GJ,new_enum:zJ,enum_compare:HJ,boolean_new:YJ,boolean_branch:XJ,boolean_inverse:JJ,open_modal:QJ};function iQ(e){return rQ[e]||{process:()=>{}}}class ns{constructor(t){Wo(this,"blueprint");Wo(this,"state");Wo(this,"input",{});Wo(this,"nodeState",new Map);Wo(this,"params",new Map);Wo(this,"output",null);Wo(this,"callback",()=>{});this.blueprint=t}processBlueprint(t,n,r){const i=MO(this.blueprint);return this.state=n,this.input=t,this.callback=r,this.processNodes(i)}processNodes(t){const n=this.processNode(t);return n?this.processNodes(n):(this.callback(this.state),this.getOutput())}processNode(t){if(!t)return;const n=iQ(t.type||"");return!this.nodeState.get(t.id)&&n.init&&(this.nodeState.set(t.id,new Map),n.init(this,t)),n.process(this,t)}getConnectingNodeForHandle(t,n,r){const i=this.blueprint.edges.find(o=>{var s,a;return(r==="input"?o.target===t.id:o.source===t.id)&&(((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n&&r==="output"||((a=o.sourceHandle)==null?void 0:a.split("-")[0])===n&&r==="input")});if(i){if(r==="output")return X2(this.blueprint,i.target);if(r==="input")return X2(this.blueprint,i.source)}}getPossibleParamsForNode(t,n){return this.blueprint.edges.filter(r=>n==="input"?r.target===t:r.source===t).map(r=>{var i,o;return n==="input"?(i=r.targetHandle)==null?void 0:i.split("-")[0]:(o=r.sourceHandle)==null?void 0:o.split("-")[0]})}getParamType(t,n){var o;const i=this.blueprint.edges.filter(s=>{var a;return s.target===t&&((a=s.targetHandle)==null?void 0:a.split("-")[0])===n}).find(s=>this.params.get(s.id)!==void 0);return(o=i==null?void 0:i.targetHandle)==null?void 0:o.split("-")[1]}getParam(t,n){const i=this.blueprint.edges.filter(o=>{var s;return o.target===t&&((s=o.targetHandle)==null?void 0:s.split("-")[0])===n}).find(o=>this.params.get(o.id)!==void 0);return this.params.get((i==null?void 0:i.id)||"")}setParam(t,n,r){const i=this.blueprint.edges.filter(o=>{var s;return o.source===t&&((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n});for(let o=0;o<i.length;o++)this.params.set(i[o].id,r);return this.params}getCharacter(){return this.state.character}setCharacter(t){this.state.character=t}getSystem(){return this.state.system}setSystem(t){this.state.system=t}getPage(){return this.state.page}setPage(t){this.state.page=t}getOutput(){return this.output}setOutput(t){this.output=t}}const Ti={"no style":{background:"",border:"",hover:""},light:{background:"bg-white dark:bg-neutral-800",border:"border border-neutral-200 dark:border-neutral-600",hover:"cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700"},primary:{background:"bg-white dark:bg-brand-800",border:"border border-brand-200 dark:border-brand-600",hover:"cursor-pointer hover:bg-brand-100 dark:hover:bg-brand-700"},accent:{background:"bg-white dark:bg-accent-800",border:"border border-accent-200 dark:border-accent-600",hover:"cursor-pointer hover:bg-accent-100 dark:hover:bg-accent-700"},confirmation:{background:"bg-white dark:bg-green-800",border:"border border-green-200 dark:border-green-600",hover:"cursor-pointer hover:bg-green-100 dark:hover:bg-green-700"},warning:{background:"bg-white dark:bg-orange-800",border:"border border-orange-200 dark:border-orange-600",hover:"cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-700"}},J2={0:"0px",px:"1px","0.5":"0.125rem",1:"0.25rem","1.5":"0.375rem",2:"0.5rem","2.5":"0.625rem",3:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Ge={spacing:{...J2},size:{auto:"auto",full:"100%",half:"50%",third:"33%",...J2}},oQ=e=>{const t=Uc(),n=k.useMemo(()=>{var c;return(c=new ns(e.blueprint).processBlueprint(t,e.state,()=>{}))!=null?c:[]},[t,e.state]),r=k.useMemo(()=>e.dynamicVisibility?new ns(e.visibilityBlueprint).processBlueprint(t,e.state,()=>{})||!1:e.isVisible,[t,e.state]),i=k.useCallback(()=>{if(!e.isInteractive)return;new ns(e.onPress).processBlueprint(t,e.state,e.updateState)},[e.onPress,t,e.state,e.updateState]),o=k.useMemo(()=>{var l;return Ti[e.background]?(l=Ti[e.background])==null?void 0:l.background:""},[e.background]),s=k.useMemo(()=>{var l;return Ti[e.border]?(l=Ti[e.border])==null?void 0:l.border:""},[e.border]),a=k.useMemo(()=>{var l;return e.isInteractive?(l=Ti[e.hover])==null?void 0:l.hover:""},[e.isInteractive]);return f.jsx("div",{style:{display:r?e.display:"none",position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ge.spacing[e.gap],marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],paddingTop:Ge.spacing[e.paddingTop],paddingRight:Ge.spacing[e.paddingRight],paddingBottom:Ge.spacing[e.paddingBottom],paddingLeft:Ge.spacing[e.paddingLeft],height:Ge.size[e.height],width:Ge.size[e.width],maxHeight:Ge.size[e.maxHeight],maxWidth:Ge.size[e.maxWidth],minHeight:Ge.size[e.minHeight],minWidth:Ge.size[e.minWidth]},className:"".concat(o," ").concat(s," ").concat(a),onClick:i,children:e.isList?n.map(l=>f.jsx(h4,{localData:{[e.dataName]:l},children:e.children},l.name)):e.children})},Ii={colors:{base:{text:"text-neutral-800 dark:text-neutral-200",hover:"group-hover:text-neutral-700 dark:group-hover:text-neutral-300"},light:{text:"text-neutral-500 dark:text-neutral-400",hover:"group-hover:text-neutral-400 dark:group-hover:text-neutral-500"},primary:{text:"text-brand-600 dark:text-brand-400",hover:"group-hover:text-brand-700 dark:group-hover:text-brand-300"},accent:{text:"text-accent-600 dark:text-accent-400 hover:text-accent-700 dark:hover:text-accent-300",hover:"group-hover:text-accent-700 dark:group-hover:text-accent-300"},confirmation:{text:"text-green-600 dark:text-green-400",hover:"group-hover:text-green-700 dark:group-hover:text-green-300"},warning:{text:"text-orange-600 dark:text-orange-400",hover:"group-hover:text-orange-700 dark:group-hover:text-orange-300"},danger:{text:"text-red-600 dark:text-red-400",hover:"group-hover:text-red-700 dark:group-hover:text-red-300"}},weight:{thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},sizes:{xs:{fontSize:"0.75rem",lineHeight:"1rem"},sm:{fontSize:"0.875rem",lineHeight:"1.25rem"},base:{fontSize:"1rem",lineHeight:"1.5rem"},lg:{fontSize:"1.125rem",lineHeight:"1.75rem"},xl:{fontSize:"1.25rem",lineHeight:"1.75rem"},"2xl":{fontSize:"1.5rem",lineHeight:"2rem"},"3xl":{fontSize:"1.875rem",lineHeight:"2.25rem"},"4xl":{fontSize:"2.25rem",lineHeight:"2.5rem"},"5xl":{fontSize:"3rem",lineHeight:"1"},"6xl":{fontSize:"3.75rem",lineHeight:"1"},"7xl":{fontSize:"4.5rem",lineHeight:"1"},"8xl":{fontSize:"6rem",lineHeight:"1"},"9xl":{fontSize:"8rem",lineHeight:"1"}}},sQ=e=>{const t=Uc(),n=k.useMemo(()=>e.useBlueprintValue?new ns(e.blueprint).processBlueprint(t,e.state,()=>{})||"":e.text,[e.blueprint,t,e.useBlueprintValue,e.text]),r=k.useMemo(()=>{var o;return Ii.colors[e.color]?(o=Ii.colors[e.color])==null?void 0:o.text:""},[e.color]),i=k.useMemo(()=>Ii.weight[e.fontWeight]?Ii.weight[e.fontWeight]:"",[e.fontWeight]);return f.jsx("p",{style:{textAlign:e.textAlign,...Ii.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],paddingTop:Ge.spacing[e.paddingTop],paddingRight:Ge.spacing[e.paddingRight],paddingBottom:Ge.spacing[e.paddingBottom],paddingLeft:Ge.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:n})};function xr(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function eu(e){return!!e&&!!e[an]}function ls(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===gQ}(e)||Array.isArray(e)||!!e[sf]||!!(!((t=e.constructor)===null||t===void 0)&&t[sf])||mv(e)||yv(e))}function tu(e,t,n){n===void 0&&(n=!1),Ha(e)===0?(n?Object.keys:NE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ha(e){var t=e[an];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:mv(e)?2:yv(e)?3:0}function rh(e,t){return Ha(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kg(e,t){return Ha(e)===2?e.get(t):e[t]}function p4(e,t,n){var r=Ha(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function aQ(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function mv(e){return hQ&&e instanceof Map}function yv(e){return pQ&&e instanceof Set}function cr(e){return e.o||e.t}function kE(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=mQ(e);delete t[an];for(var n=NE(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function CE(e,t){return t===void 0&&(t=!1),jE(e)||eu(e)||!ls(e)||(Ha(e)>1&&(e.set=e.add=e.clear=e.delete=lQ),Object.freeze(e),t&&tu(e,function(n,r){return CE(r,!0)},!0)),e}function lQ(){xr(2)}function jE(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function rs(e){var t=qx[e];return t||xr(18,e),t}function g4(e,t){qx[e]||(qx[e]=t)}function Bm(){return oh}function pb(e,t){t&&(rs("Patches"),e.u=[],e.s=[],e.v=t)}function Fm(e){Vx(e),e.p.forEach(uQ),e.p=null}function Vx(e){e===oh&&(oh=e.l)}function Q2(e){return oh={p:[],l:oh,h:e,m:!0,_:0}}function uQ(e){var t=e[an];t.i===0||t.i===1?t.j():t.g=!0}function gb(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||rs("ES5").S(t,e,r),r?(n[an].P&&(Fm(t),xr(4)),ls(e)&&(e=zm(t,e),t.l||Hm(t,e)),t.u&&rs("Patches").M(n[an].t,e,t.u,t.s)):e=zm(t,n,[]),Fm(t),t.u&&t.v(t.u,t.s),e!==RE?e:void 0}function zm(e,t,n){if(jE(t))return t;var r=t[an];if(!r)return tu(t,function(a,l){return Z2(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Hm(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=kE(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),tu(o,function(a,l){return Z2(e,r,i,a,l,n,s)}),Hm(e,i,!1),n&&e.u&&rs("Patches").N(r,n,e.u,e.s)}return r.o}function Z2(e,t,n,r,i,o,s){if(eu(i)){var a=zm(e,i,o&&t&&t.i!==3&&!rh(t.R,r)?o.concat(r):void 0);if(p4(n,r,a),!eu(a))return;e.m=!1}else s&&n.add(i);if(ls(i)&&!jE(i)){if(!e.h.D&&e._<1)return;zm(e,i),t&&t.A.l||Hm(e,i)}}function Hm(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&CE(t,n)}function mb(e,t){var n=e[an];return(n?cr(n):e)[t]}function ej(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function js(e){e.P||(e.P=!0,e.l&&js(e.l))}function yb(e){e.o||(e.o=kE(e.t))}function ih(e,t,n){var r=mv(t)?rs("MapSet").F(t,n):yv(t)?rs("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:Bm(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=a,u=Kx;s&&(l=[a],u=Md);var c=Proxy.revocable(l,u),d=c.revoke,h=c.proxy;return a.k=h,a.j=d,h}(t,n):rs("ES5").J(t,n);return(n?n.A:Bm()).p.push(r),r}function cQ(e){return eu(e)||xr(22,e),function t(n){if(!ls(n))return n;var r,i=n[an],o=Ha(n);if(i){if(!i.P&&(i.i<4||!rs("ES5").K(i)))return i.t;i.I=!0,r=tj(n,o),i.I=!1}else r=tj(n,o);return tu(r,function(s,a){i&&kg(i.t,s)===a||p4(r,s,t(a))}),o===3?new Set(r):r}(e)}function tj(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return kE(e)}function dQ(){function e(r){if(!ls(r))return r;if(Array.isArray(r))return r.map(e);if(mv(r))return new Map(Array.from(r.entries()).map(function(s){return[s[0],e(s[1])]}));if(yv(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var o in r)i[o]=e(r[o]);return rh(r,sf)&&(i[sf]=r[sf]),i}function t(r){return eu(r)?e(r):r}var n="add";g4("Patches",{$:function(r,i){return i.forEach(function(o){for(var s=o.path,a=o.op,l=r,u=0;u<s.length-1;u++){var c=Ha(l),d=s[u];typeof d!="string"&&typeof d!="number"&&(d=""+d),c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||xr(24),typeof l=="function"&&d==="prototype"&&xr(24),typeof(l=kg(l,d))!="object"&&xr(15,s.join("/"))}var h=Ha(l),p=e(o.value),b=s[s.length-1];switch(a){case"replace":switch(h){case 2:return l.set(b,p);case 3:xr(16);default:return l[b]=p}case n:switch(h){case 1:return b==="-"?l.push(p):l.splice(b,0,p);case 2:return l.set(b,p);case 3:return l.add(p);default:return l[b]=p}case"remove":switch(h){case 1:return l.splice(b,1);case 2:return l.delete(b);case 3:return l.delete(o.value);default:return delete l[b]}default:xr(17,a)}}),r},N:function(r,i,o,s){switch(r.i){case 0:case 4:case 2:return function(a,l,u,c){var d=a.t,h=a.o;tu(a.R,function(p,b){var g=kg(d,p),x=kg(h,p),y=b?rh(d,p)?"replace":n:"remove";if(g!==x||y!=="replace"){var v=l.concat(p);u.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:x}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(g)}:{op:"replace",path:v,value:t(g)})}})}(r,i,o,s);case 5:case 1:return function(a,l,u,c){var d=a.t,h=a.R,p=a.o;if(p.length<d.length){var b=[p,d];d=b[0],p=b[1];var g=[c,u];u=g[0],c=g[1]}for(var x=0;x<d.length;x++)if(h[x]&&p[x]!==d[x]){var y=l.concat([x]);u.push({op:"replace",path:y,value:t(p[x])}),c.push({op:"replace",path:y,value:t(d[x])})}for(var v=d.length;v<p.length;v++){var w=l.concat([v]);u.push({op:n,path:w,value:t(p[v])})}d.length<p.length&&c.push({op:"replace",path:l.concat(["length"]),value:d.length})}(r,i,o,s);case 3:return function(a,l,u,c){var d=a.t,h=a.o,p=0;d.forEach(function(b){if(!h.has(b)){var g=l.concat([p]);u.push({op:"remove",path:g,value:b}),c.unshift({op:n,path:g,value:b})}p++}),p=0,h.forEach(function(b){if(!d.has(b)){var g=l.concat([p]);u.push({op:n,path:g,value:b}),c.unshift({op:"remove",path:g,value:b})}p++})}(r,i,o,s)}},M:function(r,i,o,s){o.push({op:"replace",path:[],value:i===RE?void 0:i}),s.push({op:"replace",path:[],value:r})}})}function fQ(){function e(a,l){function u(){this.constructor=a}i(a,l),a.prototype=(u.prototype=l.prototype,new u)}function t(a){a.o||(a.R=new Map,a.o=new Map(a.t))}function n(a){a.o||(a.o=new Set,a.t.forEach(function(l){if(ls(l)){var u=ih(a.A.h,l,a);a.p.set(l,u),a.o.add(u)}else a.o.add(l)}))}function r(a){a.g&&xr(3,JSON.stringify(cr(a)))}var i=function(a,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var d in c)c.hasOwnProperty(d)&&(u[d]=c[d])})(a,l)},o=function(){function a(u,c){return this[an]={i:2,l:c,A:c?c.A:Bm(),P:!1,I:!1,o:void 0,R:void 0,t:u,k:this,C:!1,g:!1},this}e(a,Map);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return cr(this[an]).size}}),l.has=function(u){return cr(this[an]).has(u)},l.set=function(u,c){var d=this[an];return r(d),cr(d).has(u)&&cr(d).get(u)===c||(t(d),js(d),d.R.set(u,!0),d.o.set(u,c),d.R.set(u,!0)),this},l.delete=function(u){if(!this.has(u))return!1;var c=this[an];return r(c),t(c),js(c),c.t.has(u)?c.R.set(u,!1):c.R.delete(u),c.o.delete(u),!0},l.clear=function(){var u=this[an];r(u),cr(u).size&&(t(u),js(u),u.R=new Map,tu(u.t,function(c){u.R.set(c,!1)}),u.o.clear())},l.forEach=function(u,c){var d=this;cr(this[an]).forEach(function(h,p){u.call(c,d.get(p),p,d)})},l.get=function(u){var c=this[an];r(c);var d=cr(c).get(u);if(c.I||!ls(d)||d!==c.t.get(u))return d;var h=ih(c.A.h,d,c);return t(c),c.o.set(u,h),h},l.keys=function(){return cr(this[an]).keys()},l.values=function(){var u,c=this,d=this.keys();return(u={})[Dp]=function(){return c.values()},u.next=function(){var h=d.next();return h.done?h:{done:!1,value:c.get(h.value)}},u},l.entries=function(){var u,c=this,d=this.keys();return(u={})[Dp]=function(){return c.entries()},u.next=function(){var h=d.next();if(h.done)return h;var p=c.get(h.value);return{done:!1,value:[h.value,p]}},u},l[Dp]=function(){return this.entries()},a}(),s=function(){function a(u,c){return this[an]={i:3,l:c,A:c?c.A:Bm(),P:!1,I:!1,o:void 0,t:u,k:this,p:new Map,g:!1,C:!1},this}e(a,Set);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return cr(this[an]).size}}),l.has=function(u){var c=this[an];return r(c),c.o?!!c.o.has(u)||!(!c.p.has(u)||!c.o.has(c.p.get(u))):c.t.has(u)},l.add=function(u){var c=this[an];return r(c),this.has(u)||(n(c),js(c),c.o.add(u)),this},l.delete=function(u){if(!this.has(u))return!1;var c=this[an];return r(c),n(c),js(c),c.o.delete(u)||!!c.p.has(u)&&c.o.delete(c.p.get(u))},l.clear=function(){var u=this[an];r(u),cr(u).size&&(n(u),js(u),u.o.clear())},l.values=function(){var u=this[an];return r(u),n(u),u.o.values()},l.entries=function(){var u=this[an];return r(u),n(u),u.o.entries()},l.keys=function(){return this.values()},l[Dp]=function(){return this.values()},l.forEach=function(u,c){for(var d=this.values(),h=d.next();!h.done;)u.call(c,h.value,h.value,this),h=d.next()},a}();g4("MapSet",{F:function(a,l){return new o(a,l)},T:function(a,l){return new s(a,l)}})}var nj,oh,AE=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",hQ=typeof Map<"u",pQ=typeof Set<"u",rj=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",RE=AE?Symbol.for("immer-nothing"):((nj={})["immer-nothing"]=!0,nj),sf=AE?Symbol.for("immer-draftable"):"__$immer_draftable",an=AE?Symbol.for("immer-state"):"__$immer_state",Dp=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",gQ=""+Object.prototype.constructor,NE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,mQ=Object.getOwnPropertyDescriptors||function(e){var t={};return NE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},qx={},Kx={get:function(e,t){if(t===an)return e;var n=cr(e);if(!rh(n,t))return function(i,o,s){var a,l=ej(o,s);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!ls(r)?r:r===mb(e.t,t)?(yb(e),e.o[t]=ih(e.A.h,r,e)):r},has:function(e,t){return t in cr(e)},ownKeys:function(e){return Reflect.ownKeys(cr(e))},set:function(e,t,n){var r=ej(cr(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=mb(cr(e),t),o=i==null?void 0:i[an];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(aQ(n,i)&&(n!==void 0||rh(e.t,t)))return!0;yb(e),js(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return mb(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,yb(e),js(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=cr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){xr(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){xr(12)}},Md={};tu(Kx,function(e,t){Md[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Md.deleteProperty=function(e,t){return Md.set.call(this,e,t,void 0)},Md.set=function(e,t,n){return Kx.set.call(this,e[0],t,n,e[0])};var yQ=function(){function e(n){var r=this;this.O=rj,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var l=r;return function(g){var x=this;g===void 0&&(g=a);for(var y=arguments.length,v=Array(y>1?y-1:0),w=1;w<y;w++)v[w-1]=arguments[w];return l.produce(g,function(E){var S;return(S=o).call.apply(S,[x,E].concat(v))})}}var u;if(typeof o!="function"&&xr(6),s!==void 0&&typeof s!="function"&&xr(7),ls(i)){var c=Q2(r),d=ih(r,i,void 0),h=!0;try{u=o(d),h=!1}finally{h?Fm(c):Vx(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(g){return pb(c,s),gb(g,c)},function(g){throw Fm(c),g}):(pb(c,s),gb(u,c))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===RE&&(u=void 0),r.D&&CE(u,!0),s){var p=[],b=[];rs("Patches").M(i,u,p,b),s(p,b)}return u}xr(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];return r.produceWithPatches(u,function(p){return i.apply(void 0,[p].concat(d))})};var s,a,l=r.produce(i,o,function(u,c){s=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,s,a]}):[l,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ls(n)||xr(8),eu(n)&&(n=cQ(n));var r=Q2(this),i=ih(this,n,void 0);return i[an].C=!0,Vx(r),i},t.finishDraft=function(n,r){var i=n&&n[an],o=i.A;return pb(o,r),gb(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!rj&&xr(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=rs("Patches").$;return eu(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Hi=new yQ,vQ=Hi.produce,ij=Hi.produceWithPatches.bind(Hi);Hi.setAutoFreeze.bind(Hi);Hi.setUseProxies.bind(Hi);var oj=Hi.applyPatches.bind(Hi);Hi.createDraft.bind(Hi);Hi.finishDraft.bind(Hi);function bQ(){this.__data__=[],this.size=0}var wQ=bQ;function xQ(e,t){return e===t||e!==e&&t!==t}var m4=xQ,_Q=m4;function EQ(e,t){for(var n=e.length;n--;)if(_Q(e[n][0],t))return n;return-1}var vv=EQ,SQ=vv,kQ=Array.prototype,CQ=kQ.splice;function jQ(e){var t=this.__data__,n=SQ(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():CQ.call(t,n,1),--this.size,!0}var AQ=jQ,RQ=vv;function NQ(e){var t=this.__data__,n=RQ(t,e);return n<0?void 0:t[n][1]}var TQ=NQ,IQ=vv;function PQ(e){return IQ(this.__data__,e)>-1}var OQ=PQ,$Q=vv;function MQ(e,t){var n=this.__data__,r=$Q(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var DQ=MQ,LQ=wQ,BQ=AQ,FQ=TQ,zQ=OQ,HQ=DQ;function Wc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Wc.prototype.clear=LQ;Wc.prototype.delete=BQ;Wc.prototype.get=FQ;Wc.prototype.has=zQ;Wc.prototype.set=HQ;var bv=Wc,UQ=bv;function WQ(){this.__data__=new UQ,this.size=0}var VQ=WQ;function qQ(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var KQ=qQ;function GQ(e){return this.__data__.get(e)}var YQ=GQ;function XQ(e){return this.__data__.has(e)}var JQ=XQ,QQ=typeof Qi=="object"&&Qi&&Qi.Object===Object&&Qi,y4=QQ,ZQ=y4,eZ=typeof self=="object"&&self&&self.Object===Object&&self,tZ=ZQ||eZ||Function("return this")(),hs=tZ,nZ=hs,rZ=nZ.Symbol,wv=rZ,sj=wv,v4=Object.prototype,iZ=v4.hasOwnProperty,oZ=v4.toString,bd=sj?sj.toStringTag:void 0;function sZ(e){var t=iZ.call(e,bd),n=e[bd];try{e[bd]=void 0;var r=!0}catch(o){}var i=oZ.call(e);return r&&(t?e[bd]=n:delete e[bd]),i}var aZ=sZ,lZ=Object.prototype,uZ=lZ.toString;function cZ(e){return uZ.call(e)}var dZ=cZ,aj=wv,fZ=aZ,hZ=dZ,pZ="[object Null]",gZ="[object Undefined]",lj=aj?aj.toStringTag:void 0;function mZ(e){return e==null?e===void 0?gZ:pZ:lj&&lj in Object(e)?fZ(e):hZ(e)}var xv=mZ;function yZ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var b4=yZ,vZ=xv,bZ=b4,wZ="[object AsyncFunction]",xZ="[object Function]",_Z="[object GeneratorFunction]",EZ="[object Proxy]";function SZ(e){if(!bZ(e))return!1;var t=vZ(e);return t==xZ||t==_Z||t==wZ||t==EZ}var TE=SZ;const kZ=Xs(TE);var CZ=hs,jZ=CZ["__core-js_shared__"],AZ=jZ,vb=AZ,uj=function(){var e=/[^.]+$/.exec(vb&&vb.keys&&vb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function RZ(e){return!!uj&&uj in e}var NZ=RZ,TZ=Function.prototype,IZ=TZ.toString;function PZ(e){if(e!=null){try{return IZ.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var w4=PZ,OZ=TE,$Z=NZ,MZ=b4,DZ=w4,LZ=/[\\^$.*+?()[\]{}|]/g,BZ=/^\[object .+?Constructor\]$/,FZ=Function.prototype,zZ=Object.prototype,HZ=FZ.toString,UZ=zZ.hasOwnProperty,WZ=RegExp("^"+HZ.call(UZ).replace(LZ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function VZ(e){if(!MZ(e)||$Z(e))return!1;var t=OZ(e)?WZ:BZ;return t.test(DZ(e))}var qZ=VZ;function KZ(e,t){return e==null?void 0:e[t]}var GZ=KZ,YZ=qZ,XZ=GZ;function JZ(e,t){var n=XZ(e,t);return YZ(n)?n:void 0}var cu=JZ,QZ=cu,ZZ=hs,eee=QZ(ZZ,"Map"),IE=eee,tee=cu,nee=tee(Object,"create"),_v=nee,cj=_v;function ree(){this.__data__=cj?cj(null):{},this.size=0}var iee=ree;function oee(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var see=oee,aee=_v,lee="__lodash_hash_undefined__",uee=Object.prototype,cee=uee.hasOwnProperty;function dee(e){var t=this.__data__;if(aee){var n=t[e];return n===lee?void 0:n}return cee.call(t,e)?t[e]:void 0}var fee=dee,hee=_v,pee=Object.prototype,gee=pee.hasOwnProperty;function mee(e){var t=this.__data__;return hee?t[e]!==void 0:gee.call(t,e)}var yee=mee,vee=_v,bee="__lodash_hash_undefined__";function wee(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vee&&t===void 0?bee:t,this}var xee=wee,_ee=iee,Eee=see,See=fee,kee=yee,Cee=xee;function Vc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vc.prototype.clear=_ee;Vc.prototype.delete=Eee;Vc.prototype.get=See;Vc.prototype.has=kee;Vc.prototype.set=Cee;var jee=Vc,dj=jee,Aee=bv,Ree=IE;function Nee(){this.size=0,this.__data__={hash:new dj,map:new(Ree||Aee),string:new dj}}var Tee=Nee;function Iee(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Pee=Iee,Oee=Pee;function $ee(e,t){var n=e.__data__;return Oee(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ev=$ee,Mee=Ev;function Dee(e){var t=Mee(this,e).delete(e);return this.size-=t?1:0,t}var Lee=Dee,Bee=Ev;function Fee(e){return Bee(this,e).get(e)}var zee=Fee,Hee=Ev;function Uee(e){return Hee(this,e).has(e)}var Wee=Uee,Vee=Ev;function qee(e,t){var n=Vee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Kee=qee,Gee=Tee,Yee=Lee,Xee=zee,Jee=Wee,Qee=Kee;function qc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}qc.prototype.clear=Gee;qc.prototype.delete=Yee;qc.prototype.get=Xee;qc.prototype.has=Jee;qc.prototype.set=Qee;var x4=qc,Zee=bv,ete=IE,tte=x4,nte=200;function rte(e,t){var n=this.__data__;if(n instanceof Zee){var r=n.__data__;if(!ete||r.length<nte-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new tte(r)}return n.set(e,t),this.size=n.size,this}var ite=rte,ote=bv,ste=VQ,ate=KQ,lte=YQ,ute=JQ,cte=ite;function Kc(e){var t=this.__data__=new ote(e);this.size=t.size}Kc.prototype.clear=ste;Kc.prototype.delete=ate;Kc.prototype.get=lte;Kc.prototype.has=ute;Kc.prototype.set=cte;var dte=Kc,fte="__lodash_hash_undefined__";function hte(e){return this.__data__.set(e,fte),this}var pte=hte;function gte(e){return this.__data__.has(e)}var mte=gte,yte=x4,vte=pte,bte=mte;function Um(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new yte;++t<n;)this.add(e[t])}Um.prototype.add=Um.prototype.push=vte;Um.prototype.has=bte;var wte=Um;function xte(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var _te=xte;function Ete(e,t){return e.has(t)}var Ste=Ete,kte=wte,Cte=_te,jte=Ste,Ate=1,Rte=2;function Nte(e,t,n,r,i,o){var s=n&Ate,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,h=!0,p=n&Rte?new kte:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var b=e[d],g=t[d];if(r)var x=s?r(g,b,d,t,e,o):r(b,g,d,e,t,o);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!Cte(t,function(y,v){if(!jte(p,v)&&(b===y||i(b,y,n,r,o)))return p.push(v)})){h=!1;break}}else if(!(b===g||i(b,g,n,r,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var _4=Nte,Tte=hs,Ite=Tte.Uint8Array,Pte=Ite;function Ote(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var $te=Ote;function Mte(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Dte=Mte,fj=wv,hj=Pte,Lte=m4,Bte=_4,Fte=$te,zte=Dte,Hte=1,Ute=2,Wte="[object Boolean]",Vte="[object Date]",qte="[object Error]",Kte="[object Map]",Gte="[object Number]",Yte="[object RegExp]",Xte="[object Set]",Jte="[object String]",Qte="[object Symbol]",Zte="[object ArrayBuffer]",ene="[object DataView]",pj=fj?fj.prototype:void 0,bb=pj?pj.valueOf:void 0;function tne(e,t,n,r,i,o,s){switch(n){case ene:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Zte:return!(e.byteLength!=t.byteLength||!o(new hj(e),new hj(t)));case Wte:case Vte:case Gte:return Lte(+e,+t);case qte:return e.name==t.name&&e.message==t.message;case Yte:case Jte:return e==t+"";case Kte:var a=Fte;case Xte:var l=r&Hte;if(a||(a=zte),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=Ute,s.set(e,t);var c=Bte(a(e),a(t),r,i,o,s);return s.delete(e),c;case Qte:if(bb)return bb.call(e)==bb.call(t)}return!1}var nne=tne;function rne(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var ine=rne,one=Array.isArray,PE=one,sne=ine,ane=PE;function lne(e,t,n){var r=t(e);return ane(e)?r:sne(r,n(e))}var une=lne;function cne(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}var dne=cne;function fne(){return[]}var hne=fne,pne=dne,gne=hne,mne=Object.prototype,yne=mne.propertyIsEnumerable,gj=Object.getOwnPropertySymbols,vne=gj?function(e){return e==null?[]:(e=Object(e),pne(gj(e),function(t){return yne.call(e,t)}))}:gne,bne=vne;function wne(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var xne=wne;function _ne(e){return e!=null&&typeof e=="object"}var Sv=_ne,Ene=xv,Sne=Sv,kne="[object Arguments]";function Cne(e){return Sne(e)&&Ene(e)==kne}var jne=Cne,mj=jne,Ane=Sv,E4=Object.prototype,Rne=E4.hasOwnProperty,Nne=E4.propertyIsEnumerable,Tne=mj(function(){return arguments}())?mj:function(e){return Ane(e)&&Rne.call(e,"callee")&&!Nne.call(e,"callee")},Ine=Tne,Wm={exports:{}};function Pne(){return!1}var One=Pne;Wm.exports;(function(e,t){var n=hs,r=One,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;e.exports=u})(Wm,Wm.exports);var S4=Wm.exports,$ne=9007199254740991,Mne=/^(?:0|[1-9]\d*)$/;function Dne(e,t){var n=typeof e;return t=t==null?$ne:t,!!t&&(n=="number"||n!="symbol"&&Mne.test(e))&&e>-1&&e%1==0&&e<t}var Lne=Dne,Bne=9007199254740991;function Fne(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Bne}var k4=Fne,zne=xv,Hne=k4,Une=Sv,Wne="[object Arguments]",Vne="[object Array]",qne="[object Boolean]",Kne="[object Date]",Gne="[object Error]",Yne="[object Function]",Xne="[object Map]",Jne="[object Number]",Qne="[object Object]",Zne="[object RegExp]",ere="[object Set]",tre="[object String]",nre="[object WeakMap]",rre="[object ArrayBuffer]",ire="[object DataView]",ore="[object Float32Array]",sre="[object Float64Array]",are="[object Int8Array]",lre="[object Int16Array]",ure="[object Int32Array]",cre="[object Uint8Array]",dre="[object Uint8ClampedArray]",fre="[object Uint16Array]",hre="[object Uint32Array]",bn={};bn[ore]=bn[sre]=bn[are]=bn[lre]=bn[ure]=bn[cre]=bn[dre]=bn[fre]=bn[hre]=!0;bn[Wne]=bn[Vne]=bn[rre]=bn[qne]=bn[ire]=bn[Kne]=bn[Gne]=bn[Yne]=bn[Xne]=bn[Jne]=bn[Qne]=bn[Zne]=bn[ere]=bn[tre]=bn[nre]=!1;function pre(e){return Une(e)&&Hne(e.length)&&!!bn[zne(e)]}var gre=pre;function mre(e){return function(t){return e(t)}}var yre=mre,Vm={exports:{}};Vm.exports;(function(e,t){var n=y4,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch(u){}}();e.exports=a})(Vm,Vm.exports);var OE=Vm.exports,vre=gre,bre=yre,yj=OE,vj=yj&&yj.isTypedArray,wre=vj?bre(vj):vre,C4=wre,xre=xne,_re=Ine,Ere=PE,Sre=S4,kre=Lne,Cre=C4,jre=Object.prototype,Are=jre.hasOwnProperty;function Rre(e,t){var n=Ere(e),r=!n&&_re(e),i=!n&&!r&&Sre(e),o=!n&&!r&&!i&&Cre(e),s=n||r||i||o,a=s?xre(e.length,String):[],l=a.length;for(var u in e)(t||Are.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||kre(u,l)))&&a.push(u);return a}var Nre=Rre,Tre=Object.prototype;function Ire(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Tre;return e===n}var Pre=Ire;function Ore(e,t){return function(n){return e(t(n))}}var $re=Ore,Mre=$re,Dre=Mre(Object.keys,Object),Lre=Dre,Bre=Pre,Fre=Lre,zre=Object.prototype,Hre=zre.hasOwnProperty;function Ure(e){if(!Bre(e))return Fre(e);var t=[];for(var n in Object(e))Hre.call(e,n)&&n!="constructor"&&t.push(n);return t}var Wre=Ure,Vre=TE,qre=k4;function Kre(e){return e!=null&&qre(e.length)&&!Vre(e)}var Gre=Kre,Yre=Nre,Xre=Wre,Jre=Gre;function Qre(e){return Jre(e)?Yre(e):Xre(e)}var Zre=Qre,eie=une,tie=bne,nie=Zre;function rie(e){return eie(e,nie,tie)}var iie=rie,bj=iie,oie=1,sie=Object.prototype,aie=sie.hasOwnProperty;function lie(e,t,n,r,i,o){var s=n&oie,a=bj(e),l=a.length,u=bj(t),c=u.length;if(l!=c&&!s)return!1;for(var d=l;d--;){var h=a[d];if(!(s?h in t:aie.call(t,h)))return!1}var p=o.get(e),b=o.get(t);if(p&&b)return p==t&&b==e;var g=!0;o.set(e,t),o.set(t,e);for(var x=s;++d<l;){h=a[d];var y=e[h],v=t[h];if(r)var w=s?r(v,y,h,t,e,o):r(y,v,h,e,t,o);if(!(w===void 0?y===v||i(y,v,n,r,o):w)){g=!1;break}x||(x=h=="constructor")}if(g&&!x){var E=e.constructor,S=t.constructor;E!=S&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof S=="function"&&S instanceof S)&&(g=!1)}return o.delete(e),o.delete(t),g}var uie=lie,cie=cu,die=hs,fie=cie(die,"DataView"),hie=fie,pie=cu,gie=hs,mie=pie(gie,"Promise"),yie=mie,vie=cu,bie=hs,wie=vie(bie,"Set"),xie=wie,_ie=cu,Eie=hs,Sie=_ie(Eie,"WeakMap"),kie=Sie,Gx=hie,Yx=IE,Xx=yie,Jx=xie,Qx=kie,j4=xv,Gc=w4,wj="[object Map]",Cie="[object Object]",xj="[object Promise]",_j="[object Set]",Ej="[object WeakMap]",Sj="[object DataView]",jie=Gc(Gx),Aie=Gc(Yx),Rie=Gc(Xx),Nie=Gc(Jx),Tie=Gc(Qx),wl=j4;(Gx&&wl(new Gx(new ArrayBuffer(1)))!=Sj||Yx&&wl(new Yx)!=wj||Xx&&wl(Xx.resolve())!=xj||Jx&&wl(new Jx)!=_j||Qx&&wl(new Qx)!=Ej)&&(wl=function(e){var t=j4(e),n=t==Cie?e.constructor:void 0,r=n?Gc(n):"";if(r)switch(r){case jie:return Sj;case Aie:return wj;case Rie:return xj;case Nie:return _j;case Tie:return Ej}return t});var Iie=wl,wb=dte,Pie=_4,Oie=nne,$ie=uie,kj=Iie,Cj=PE,jj=S4,Mie=C4,Die=1,Aj="[object Arguments]",Rj="[object Array]",Lp="[object Object]",Lie=Object.prototype,Nj=Lie.hasOwnProperty;function Bie(e,t,n,r,i,o){var s=Cj(e),a=Cj(t),l=s?Rj:kj(e),u=a?Rj:kj(t);l=l==Aj?Lp:l,u=u==Aj?Lp:u;var c=l==Lp,d=u==Lp,h=l==u;if(h&&jj(e)){if(!jj(t))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new wb),s||Mie(e)?Pie(e,t,n,r,i,o):Oie(e,t,l,n,r,i,o);if(!(n&Die)){var p=c&&Nj.call(e,"__wrapped__"),b=d&&Nj.call(t,"__wrapped__");if(p||b){var g=p?e.value():e,x=b?t.value():t;return o||(o=new wb),i(g,x,n,r,o)}}return h?(o||(o=new wb),$ie(e,t,n,r,i,o)):!1}var Fie=Bie,zie=Fie,Tj=Sv;function A4(e,t,n,r,i){return e===t?!0:e==null||t==null||!Tj(e)&&!Tj(t)?e!==e&&t!==t:zie(e,t,n,r,A4,i)}var Hie=A4,Uie=Hie;function Wie(e,t,n){n=typeof n=="function"?n:void 0;var r=n?n(e,t):void 0;return r===void 0?Uie(e,t,void 0,n):!!r}var Vie=Wie;const qie=Xs(Vie);var Kie=function(t,n,r,i){var o=r?r.call(i,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<s.length;u++){var c=s[u];if(!l(c))return!1;var d=t[c],h=n[c];if(o=r?r.call(i,d,h,c):void 0,o===!1||o===void 0&&d!==h)return!1}return!0};const Gie=Xs(Kie);let Yie=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var Xie="Invariant failed";function pn(e,t){if(!e)throw new Error(Xie)}typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/utils"]="0.2.5");var Ls="ROOT",R4="canvas-ROOT",Jie="Attempting to add a node with duplicated id",Qie="Node cannot be dropped into target parent",Zie="Target parent rejects incoming node",eoe="Current parent rejects outgoing node",Ij="Cannot move node that is not a direct child of a Canvas node",toe="Cannot move node into a non-Canvas parent",Pj="A top-level Node cannot be moved",noe="Cannot move node into a descendant",N4="The component type specified for this node (%node_type%) does not exist in the resolver",roe="The node has specified a canDrag() rule that prevents it from being dragged",ioe="An Error occurred while deserializing components: Cannot find component <%displayName% /> in resolver map. Please check your resolver in <Editor />\n\nAvailable components in resolver: %availableComponents%\n\nMore info: https://craft.js.org/r/docs/api/editor#props";function Oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(n),!0).forEach(function(r){or(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ooe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$4(r.key),r)}}function Xc(e,t,n){return t&&ooe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function or(e,t,n){return(t=$4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ic(e){return ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ic(e)}function Zx(e,t){return Zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Zx(e,t)}function xb(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e_(){return e_=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(o,s){for(;!Object.prototype.hasOwnProperty.call(o,s)&&(o=ic(o))!==null;);return o}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e_.apply(this,arguments)}function T4(e,t){return I4(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],c=!0,d=!1;try{if(a=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;c=!1}else for(;!(c=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);c=!0);}catch(h){d=!0,s=h}finally{try{if(!c&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(d)throw s}}return u}}(e,t)||$E(e,t)||O4()}function ni(e){return function(t){if(Array.isArray(t))return t_(t)}(e)||P4(e)||$E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I4(e){if(Array.isArray(e))return e}function P4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $E(e,t){if(e){if(typeof e=="string")return t_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t_(e,t):void 0}}function t_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O4(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $4(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}var Mn={UNDO:"HISTORY_UNDO",REDO:"HISTORY_REDO",THROTTLE:"HISTORY_THROTTLE",IGNORE:"HISTORY_IGNORE",MERGE:"HISTORY_MERGE",CLEAR:"HISTORY_CLEAR"},soe=function(){function e(){Yc(this,e),or(this,"timeline",[]),or(this,"pointer",-1)}return Xc(e,[{key:"add",value:function(t,n){t.length===0&&n.length===0||(this.pointer=this.pointer+1,this.timeline.length=this.pointer,this.timeline[this.pointer]={patches:t,inversePatches:n,timestamp:Date.now()})}},{key:"throttleAdd",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:500;if(t.length!==0||n.length!==0){if(this.timeline.length&&this.pointer>=0){var i=this.timeline[this.pointer],o=i.patches,s=i.inversePatches,a=i.timestamp;if(new Date().getTime()-a<r)return void(this.timeline[this.pointer]={timestamp:a,patches:[].concat(ni(o),ni(t)),inversePatches:[].concat(ni(n),ni(s))})}this.add(t,n)}}},{key:"merge",value:function(t,n){if(t.length!==0||n.length!==0)if(this.timeline.length&&this.pointer>=0){var r=this.timeline[this.pointer],i=r.inversePatches;this.timeline[this.pointer]={timestamp:r.timestamp,patches:[].concat(ni(r.patches),ni(t)),inversePatches:[].concat(ni(n),ni(i))}}else this.add(t,n)}},{key:"clear",value:function(){this.timeline=[],this.pointer=-1}},{key:"canUndo",value:function(){return this.pointer>=0}},{key:"canRedo",value:function(){return this.pointer<this.timeline.length-1}},{key:"undo",value:function(t){if(this.canUndo()){var n=this.timeline[this.pointer].inversePatches;return this.pointer=this.pointer-1,oj(t,n)}}},{key:"redo",value:function(t){if(this.canRedo())return this.pointer=this.pointer+1,oj(t,this.timeline[this.pointer].patches)}}]),e}();function aoe(e,t,n,r){var i,o=k.useMemo(function(){return new soe},[]),s=k.useRef([]),a=k.useRef(function(){});typeof e=="function"?i=e:(i=e.methods,s.current=e.ignoreHistoryForActions,a.current=e.normalizeHistory);var l=k.useRef(r);l.current=r;var u=k.useRef(t),c=k.useMemo(function(){var x=a.current,y=s.current,v=l.current;return function(w,E){var S,A=n&&$j(n,function(){return w},o),T=T4(ij(w,function(U){var J,H;switch(E.type){case Mn.UNDO:return o.undo(U);case Mn.REDO:return o.redo(U);case Mn.CLEAR:return o.clear(),Ji({},U);case Mn.IGNORE:case Mn.MERGE:case Mn.THROTTLE:var I,F=I4(H=E.payload)||P4(H)||$E(H)||O4(),K=F[0],X=F.slice(1);(I=i(U,A))[K].apply(I,ni(X));break;default:(J=i(U,A))[E.type].apply(J,ni(E.payload))}}),3),$=T[0],q=T[1],D=T[2];return S=$,v&&v($,w,{type:E.type,params:E.payload,patches:q},A,function(U){var J=ij($,U);S=J[0],q=[].concat(ni(q),ni(J[1])),D=[].concat(ni(J[2]),ni(D))}),[Mn.UNDO,Mn.REDO].includes(E.type)&&x&&(S=vQ(S,x)),[].concat(ni(y),[Mn.UNDO,Mn.REDO,Mn.IGNORE,Mn.CLEAR]).includes(E.type)||(E.type===Mn.THROTTLE?o.throttleAdd(q,D,E.config&&E.config.rate):E.type===Mn.MERGE?o.merge(q,D):o.add(q,D)),S}},[o,i,n]),d=k.useCallback(function(){return u.current},[]),h=k.useMemo(function(){return new loe(d)},[d]),p=k.useCallback(function(x){var y=c(u.current,x);u.current=y,h.notify()},[c,h]);k.useEffect(function(){h.notify()},[h]);var b=k.useMemo(function(){return n?$j(n,function(){return u.current},o):[]},[o,n]),g=k.useMemo(function(){var x=Object.keys(i(null,null)),y=s.current;return Ji(Ji({},x.reduce(function(v,w){return v[w]=function(){for(var E=arguments.length,S=new Array(E),A=0;A<E;A++)S[A]=arguments[A];return p({type:w,payload:S})},v},{})),{},{history:{undo:function(){return p({type:Mn.UNDO})},redo:function(){return p({type:Mn.REDO})},clear:function(){return p({type:Mn.CLEAR})},throttle:function(v){return Ji({},x.filter(function(w){return!y.includes(w)}).reduce(function(w,E){return w[E]=function(){for(var S=arguments.length,A=new Array(S),T=0;T<S;T++)A[T]=arguments[T];return p({type:Mn.THROTTLE,payload:[E].concat(A),config:{rate:v}})},w},{}))},ignore:function(){return Ji({},x.filter(function(v){return!y.includes(v)}).reduce(function(v,w){return v[w]=function(){for(var E=arguments.length,S=new Array(E),A=0;A<E;A++)S[A]=arguments[A];return p({type:Mn.IGNORE,payload:[w].concat(S)})},v},{}))},merge:function(){return Ji({},x.filter(function(v){return!y.includes(v)}).reduce(function(v,w){return v[w]=function(){for(var E=arguments.length,S=new Array(E),A=0;A<E;A++)S[A]=arguments[A];return p({type:Mn.MERGE,payload:[w].concat(S)})},v},{}))}}})},[p,i]);return k.useMemo(function(){return{getState:d,subscribe:function(x,y,v){return h.subscribe(x,y,v)},actions:g,query:b,history:o}},[g,b,h,d,o])}function $j(e,t,n){var r=Object.keys(e()).reduce(function(i,o){return Ji(Ji({},i),{},or({},o,function(){var s;return(s=e(t()))[o].apply(s,arguments)}))},{});return Ji(Ji({},r),{},{history:{canUndo:function(){return n.canUndo()},canRedo:function(){return n.canRedo()}}})}fQ(),dQ();var loe=function(){function e(t){Yc(this,e),or(this,"getState",void 0),or(this,"subscribers",[]),this.getState=t}return Xc(e,[{key:"subscribe",value:function(t,n,r){var i=this,o=new uoe(function(){return t(i.getState())},n,r);return this.subscribers.push(o),this.unsubscribe.bind(this,o)}},{key:"unsubscribe",value:function(t){if(this.subscribers.length){var n=this.subscribers.indexOf(t);if(n>-1)return this.subscribers.splice(n,1)}}},{key:"notify",value:function(){this.subscribers.forEach(function(t){return t.collect()})}}]),e}(),uoe=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];Yc(this,e),or(this,"collected",void 0),or(this,"collector",void 0),or(this,"onChange",void 0),or(this,"id",void 0),this.collector=t,this.onChange=n,r&&this.collect()}return Xc(e,[{key:"collect",value:function(){try{var t=this.collector();qie(t,this.collected)||(this.collected=t,this.onChange&&this.onChange(this.collected))}catch(n){console.warn(n)}}}]),e}(),sh=function(e){var t=e.getBoundingClientRect(),n=t.x,r=t.y,i=t.top,o=t.left,s=t.bottom,a=t.right,l=t.width,u=t.height,c=window.getComputedStyle(e),d={left:parseInt(c.marginLeft),right:parseInt(c.marginRight),bottom:parseInt(c.marginBottom),top:parseInt(c.marginTop)},h={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight),bottom:parseInt(c.paddingBottom),top:parseInt(c.paddingTop)};return{x:n,y:r,top:i,left:o,bottom:s,right:a,width:l,height:u,outerWidth:Math.round(l+d.left+d.right),outerHeight:Math.round(u+d.top+d.bottom),margin:d,padding:h,inFlow:e.parentElement&&!!function(p){var b=getComputedStyle(p);if(!(c.overflow&&c.overflow!=="visible"||b.float!=="none"||b.display==="grid"||b.display==="flex"&&b["flex-direction"]!=="column")){switch(c.position){case"static":case"relative":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(c.display){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}(e.parentElement)}};function coe(e,t){const{subscribe:n,getState:r,actions:i,query:o}=e,s=k.useRef(!0),a=k.useRef(null),l=k.useRef(t);l.current=t;const u=k.useCallback(h=>({...h,actions:i,query:o}),[i,o]);s.current&&t&&(a.current=t(r(),o),s.current=!1);const[c,d]=k.useState(u(a.current));return k.useEffect(()=>{let h;return l.current&&(h=n(p=>l.current(p,o),p=>{d(u(p))})),()=>{h&&h()}},[u,o,n]),c}var Rc,M4=function(){return Yie(arguments.length>0&&arguments[0]!==void 0?arguments[0]:10)},doe=function(){function e(){Yc(this,e),or(this,"isEnabled",!0),or(this,"elementIdMap",new WeakMap),or(this,"registry",new Map)}return Xc(e,[{key:"getElementId",value:function(t){var n=this.elementIdMap.get(t);if(n)return n;var r=M4();return this.elementIdMap.set(t,r),r}},{key:"getConnectorId",value:function(t,n){var r=this.getElementId(t);return"".concat(n,"--").concat(r)}},{key:"register",value:function(t,n){var r=this,i=this.getByElement(t,n.name);if(i){if(Gie(n.required,i.required))return i;this.getByElement(t,n.name).disable()}var o=null,s=this.getConnectorId(t,n.name);return this.registry.set(s,{id:s,required:n.required,enable:function(){o&&o(),o=n.connector(t,n.required,n.options)},disable:function(){o&&o()},remove:function(){return r.remove(s)}}),this.isEnabled&&this.registry.get(s).enable(),this.registry.get(s)}},{key:"get",value:function(t){return this.registry.get(t)}},{key:"remove",value:function(t){var n=this.get(t);n&&(n.disable(),this.registry.delete(n.id))}},{key:"enable",value:function(){this.isEnabled=!0,this.registry.forEach(function(t){t.enable()})}},{key:"disable",value:function(){this.isEnabled=!1,this.registry.forEach(function(t){t.disable()})}},{key:"getByElement",value:function(t,n){return this.get(this.getConnectorId(t,n))}},{key:"removeByElement",value:function(t,n){return this.remove(this.getConnectorId(t,n))}},{key:"clear",value:function(){this.disable(),this.elementIdMap=new WeakMap,this.registry=new Map}}]),e}();(function(e){e[e.HandlerDisabled=0]="HandlerDisabled",e[e.HandlerEnabled=1]="HandlerEnabled"})(Rc||(Rc={}));var D4=function(){function e(t){Yc(this,e),or(this,"options",void 0),or(this,"registry",new doe),or(this,"subscribers",new Set),this.options=t}return Xc(e,[{key:"listen",value:function(t){var n=this;return this.subscribers.add(t),function(){return n.subscribers.delete(t)}}},{key:"disable",value:function(){this.onDisable&&this.onDisable(),this.registry.disable(),this.subscribers.forEach(function(t){t(Rc.HandlerDisabled)})}},{key:"enable",value:function(){this.onEnable&&this.onEnable(),this.registry.enable(),this.subscribers.forEach(function(t){t(Rc.HandlerEnabled)})}},{key:"cleanup",value:function(){this.disable(),this.subscribers.clear(),this.registry.clear()}},{key:"addCraftEventListener",value:function(t,n,r,i){var o=function(s){(function(a,l,u){a.craft||(a.craft={stopPropagation:function(){},blockedEvents:{}});for(var c=a.craft&&a.craft.blockedEvents[l]||[],d=0;d<c.length;d++){var h=c[d];if(u!==h&&u.contains(h))return!0}return!1})(s,n,t)||(s.craft.stopPropagation=function(){s.craft.blockedEvents[n]||(s.craft.blockedEvents[n]=[]),s.craft.blockedEvents[n].push(t)},r(s))};return t.addEventListener(n,o,i),function(){return t.removeEventListener(n,o,i)}}},{key:"createConnectorsUsage",value:function(){var t=this,n=this.handlers(),r=new Set,i=!1,o=new Map;return{connectors:Object.entries(n).reduce(function(s,a){var l=T4(a,2),u=l[0],c=l[1];return Ji(Ji({},s),{},or({},u,function(d,h,p){var b=function(){var g=t.registry.register(d,{required:h,name:u,options:p,connector:c});return r.add(g.id),g};return o.set(t.registry.getConnectorId(d,u),b),i&&b(),d}))},{}),register:function(){i=!0,o.forEach(function(s){s()})},cleanup:function(){i=!1,r.forEach(function(s){return t.registry.remove(s)})}}}},{key:"derive",value:function(t,n){return new t(this,n)}},{key:"createProxyHandlers",value:function(t,n){var r=[],i=t.handlers(),o=new Proxy(i,{get:function(s,a,l){return a in i==0?Reflect.get(s,a,l):function(u){for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];var p=i[a].apply(i,[u].concat(d));p&&r.push(p)}}});return n(o),function(){r.forEach(function(s){s()})}}},{key:"reflect",value:function(t){return this.createProxyHandlers(this,t)}}]),e}(),foe=function(e){(function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&Zx(o,s)})(i,D4);var t,n,r=(t=i,n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}(),function(){var o,s=ic(t);if(n){var a=ic(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return function(l,u){if(u&&(typeof u=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xb(l)}(this,o)});function i(o,s){var a;return Yc(this,i),or(xb(a=r.call(this,s)),"derived",void 0),or(xb(a),"unsubscribeParentHandlerListener",void 0),a.derived=o,a.options=s,a.unsubscribeParentHandlerListener=a.derived.listen(function(l){switch(l){case Rc.HandlerEnabled:return a.enable();case Rc.HandlerDisabled:return a.disable();default:return}}),a}return Xc(i,[{key:"inherit",value:function(o){return this.createProxyHandlers(this.derived,o)}},{key:"cleanup",value:function(){e_(ic(i.prototype),"cleanup",this).call(this),this.unsubscribeParentHandlerListener()}}]),i}();function Mj(e,t){t&&(typeof e=="function"?e(t):e.current=t)}function hoe(e,t){const n=e.ref;return pn(typeof n!="string"),k.cloneElement(e,n?{ref:r=>{Mj(n,r),Mj(t,r)}}:{ref:t})}function poe(e){return(t=null,...n)=>{if(!k.isValidElement(t)){if(!t)return;const i=t;return i&&e(i,...n),i}const r=t;return function(i){if(typeof i.type!="string")throw new Error}(r),hoe(r,e)}}function L4(e){return Object.keys(e).reduce((t,n)=>(t[n]=poe((...r)=>e[n](...r)),t),{})}const goe=({style:e,className:t,parentDom:n})=>{const r=$t.createElement("div",{className:t,style:{position:"fixed",display:"block",opacity:1,borderStyle:"solid",borderWidth:"1px",borderColor:"transparent",zIndex:99999,...e}});return n&&n.ownerDocument!==document?dI.createPortal(r,n.ownerDocument.body):r};var Ua=function(e,t){var n="Deprecation warning: ".concat(e," will be deprecated in future relases."),r=t.suggest,i=t.doc;r&&(n+=" Please use ".concat(r," instead.")),i&&(n+="(".concat(i,")")),console.warn(n)},B4=function(){return typeof window<"u"},moe=function(){return B4()&&/Linux/i.test(window.navigator.userAgent)},yoe=function(){return B4()&&/Chrome/i.test(window.navigator.userAgent)},voe=cu;(function(){try{var e=voe(Object,"defineProperty");return e({},"",{}),e}catch(t){}})();var qm={exports:{}};qm.exports;(function(e,t){var n=hs,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,h=a?a(d):new u.constructor(d);return u.copy(h),h}e.exports=l})(qm,qm.exports);qm.exports;var Dj=wv,Lj=Dj?Dj.prototype:void 0;Lj&&Lj.valueOf;var Bj=OE;Bj&&Bj.isMap;var Fj=OE;Fj&&Fj.isSet;typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/core"]="0.2.12");const F4=$t.createContext(null),z4=({id:e,related:t=!1,children:n})=>$t.createElement(F4.Provider,{value:{id:e,related:t}},n);function zj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zj(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n_(e){return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n_(e)}function kv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function boe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W4(r.key),r)}}function Cv(e,t,n){return t&&boe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tr(e,t,n){return(t=W4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ME(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r_(e,t)}function Km(e){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Km(e)}function r_(e,t){return r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},r_(e,t)}function DE(e,t){if(e==null)return{};var n,r,i=function(s,a){if(s==null)return{};var l,u,c={},d=Object.keys(s);for(u=0;u<d.length;u++)a.indexOf(l=d[u])>=0||(c[l]=s[l]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LE(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Km(e);if(t){var i=Km(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(o,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dd(o)}(this,n)}}function H4(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],c=!0,d=!1;try{if(a=(i=i.call(n)).next,r!==0)for(;!(c=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);c=!0);}catch(h){d=!0,s=h}finally{try{if(!c&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(d)throw s}}return u}}(e,t)||U4(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ah(e){return function(t){if(Array.isArray(t))return i_(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||U4(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U4(e,t){if(e){if(typeof e=="string")return i_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i_(e,t):void 0}}function i_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W4(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}const BE=k.createContext(null);var V4=k.createContext(null),q4=function(){return k.useContext(V4)};function du(e){var t=q4(),n=k.useContext(BE);pn(n);var r=coe(n,e),i=k.useMemo(function(){return t&&t.createConnectorsUsage()},[t]);k.useEffect(function(){return i.register(),function(){i.cleanup()}},[i]);var o=k.useMemo(function(){return i&&L4(i.connectors)},[i]);return wn(wn({},r),{},{connectors:o,inContext:!!n,store:n})}var woe=["actions","query","connectors"];function jv(e){var t=k.useContext(F4);pn(t);var n=t.id,r=t.related,i=du(function(c){return n&&c.nodes[n]&&e&&e(c.nodes[n])}),o=i.actions,s=i.connectors,a=DE(i,woe),l=k.useMemo(function(){return L4({connect:function(c){return s.connect(c,n)},drag:function(c){return s.drag(c,n)}})},[s,n]),u=k.useMemo(function(){return{setProp:function(c,d){d?o.history.throttle(d).setProp(n,c):o.setProp(n,c)},setCustom:function(c,d){d?o.history.throttle(d).setCustom(n,c):o.setCustom(n,c)},setHidden:function(c){return o.setHidden(n,c)}}},[o,n]);return wn(wn({},a),{},{id:n,related:r,inNodeContext:!!t,actions:u,connectors:l})}var xoe=["id","related","actions","inNodeContext","connectors"];function ai(e){var t=jv(e),n=t.id,r=t.related,i=t.actions,o=t.inNodeContext,s=t.connectors;return wn(wn({},DE(t,xoe)),{},{actions:i,id:n,related:r,setProp:function(a,l){return Ua("useNode().setProp()",{suggest:"useNode().actions.setProp()"}),i.setProp(a,l)},inNodeContext:o,connectors:s})}const _oe=({render:e})=>{const{connectors:{connect:t,drag:n}}=ai();return typeof e.type=="string"?t(n($t.cloneElement(e))):e},Eoe=()=>{const{type:e,props:t,nodes:n,hydrationTimestamp:r}=jv(i=>({type:i.data.type,props:i.data.props,nodes:i.data.nodes,hydrationTimestamp:i._hydrationTimestamp}));return k.useMemo(()=>{let i=t.children;n&&n.length>0&&(i=$t.createElement($t.Fragment,null,n.map(s=>$t.createElement(FE,{id:s,key:s}))));const o=$t.createElement(e,t,i);return typeof e=="string"?$t.createElement(_oe,{render:o}):o},[e,t,r,n])},Soe=({render:e})=>{const{hidden:t}=jv(r=>({hidden:r.data.hidden})),{onRender:n}=du(r=>({onRender:r.options.onRender}));return t?null:$t.createElement(n,{render:e||$t.createElement(Eoe,null)})},FE=({id:e,render:t})=>$t.createElement(z4,{id:e},$t.createElement(Soe,{render:t})),o_={is:"div",canvas:!1,custom:{},hidden:!1},koe={is:"type",canvas:"isCanvas"};function fu({id:e,children:t,...n}){const{is:r}={...o_,...n},{query:i,actions:o}=du(),{id:s,inNodeContext:a}=jv(),[l]=k.useState(()=>{pn(!!e);const u=i.node(s).get();if(a){const c=u.data.linkedNodes[e]?i.node(u.data.linkedNodes[e]).get():null;if(c&&c.data.type===r)return c.id;const d=$t.createElement(fu,n,t),h=i.parseReactElement(d).toNodeTree();return o.history.ignore().addLinkedNodeFromTree(h,s,e),h.rootNodeId}return null});return l?$t.createElement(FE,{id:l}):null}const K4=()=>Ua("<Canvas />",{suggest:"<Element canvas={true} />"});function s_({...e}){return k.useEffect(()=>K4(),[]),$t.createElement(fu,{...e,canvas:!0})}const Coe=()=>{const{timestamp:e}=du(t=>({timestamp:t.nodes[Ls]&&t.nodes[Ls]._hydrationTimestamp}));return e?$t.createElement(FE,{id:Ls,key:e}):null},G4=({children:e,json:t,data:n})=>{const{actions:r,query:i}=du();t&&Ua("<Frame json={...} />",{suggest:"<Frame data={...} />"});const o=k.useRef(!1);if(!o.current){const s=n||t;if(s)r.history.ignore().deserialize(s);else if(e){const a=$t.Children.only(e),l=i.parseReactElement(a).toNodeTree((u,c)=>(c===a&&(u.id=Ls),u));r.history.ignore().addNodeTree(l)}o.current=!0}return $t.createElement(Coe,null)};var Hj;(function(e){e[e.Any=0]="Any",e[e.Id=1]="Id",e[e.Obj=2]="Obj"})(Hj||(Hj={}));const _b=e=>{const{addLinkedNodeFromTree:t,setDOM:n,setNodeEvent:r,replaceNodes:i,reset:o,...s}=e;return s};function Gs(e){const{connectors:t,actions:n,query:r,store:i,...o}=du(e),s=_b(n);return{connectors:t,actions:k.useMemo(()=>({...s,history:{...s.history,ignore:(...a)=>_b(s.history.ignore(...a)),throttle:(...a)=>_b(s.history.throttle(...a))}}),[s]),query:r,store:i,...o}}var Y4=function(e){return Object.fromEntries?Object.fromEntries(e):e.reduce(function(t,n){var r=H4(n,2),i=r[0],o=r[1];return wn(wn({},t),{},tr({},i,o))},{})},As=function(e,t,n){var r=Array.isArray(t)?t:[t],i=wn({existOnly:!1,idOnly:!1},n||{}),o=r.filter(function(s){return!!s}).map(function(s){return typeof s=="string"?{node:e[s],exists:!!e[s]}:n_(s)!=="object"||i.idOnly?{node:null,exists:!1}:{node:s,exists:!!e[s.id]}});return i.existOnly&&pn(o.filter(function(s){return!s.exists}).length===0),o},joe=["history"],_u=null,Gm=function(e,t){if(typeof t=="string")return t;var n,r=function(i,o){var s=function(a){if(_u&&_u.resolver===a)return _u.reversed;_u={resolver:a,reversed:new Map};for(var l=0,u=Object.entries(a);l<u.length;l++){var c=H4(u[l],2);_u.reversed.set(c[1],c[0])}return _u.reversed}(i).get(o);return s!==void 0?s:null}(e,t);return pn(r,N4.replace("%node_type%",(n=t).name||n.displayName)),r};const Aoe=(e,t)=>typeof e=="string"?e:{resolvedName:Gm(t,e)},a_=(e,t)=>{let{type:n,isCanvas:r,props:i}=e;return i=Object.keys(i).reduce((o,s)=>{const a=i[s];return a==null||typeof a=="function"||(o[s]=s==="children"&&typeof a!="string"?k.Children.map(a,l=>typeof l=="string"?l:a_(l,t)):typeof a.type=="function"?a_(a,t):a),o},{}),{type:Aoe(n,t),isCanvas:!!r,props:i}},Roe=(e,t)=>{const{type:n,props:r,isCanvas:i,name:o,...s}=e;return{...a_({type:n,isCanvas:i,props:r},t),...s}};function l_(e,t){pn(typeof t=="string");var n=e.nodes[t],r=function(i){return l_(e,i)};return{isCanvas:function(){return!!n.data.isCanvas},isRoot:function(){return n.id===Ls},isLinkedNode:function(){return n.data.parent&&r(n.data.parent).linkedNodes().includes(n.id)},isTopLevelNode:function(){return this.isRoot()||this.isLinkedNode()},isDeletable:function(){return!this.isTopLevelNode()},isParentOfTopLevelNodes:function(){return n.data.linkedNodes&&Object.keys(n.data.linkedNodes).length>0},isParentOfTopLevelCanvas:function(){return Ua("query.node(id).isParentOfTopLevelCanvas",{suggest:"query.node(id).isParentOfTopLevelNodes"}),this.isParentOfTopLevelNodes()},isSelected:function(){return e.events.selected.has(t)},isHovered:function(){return e.events.hovered.has(t)},isDragged:function(){return e.events.dragged.has(t)},get:function(){return n},ancestors:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return function o(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=e.nodes[s];return u?(a.push(s),u.data.parent&&(i||!i&&l===0)&&(a=o(u.data.parent,a,l+1)),a):a}(n.data.parent)},descendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return function s(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(i||!i&&u===0)&&e.nodes[a]&&(o!=="childNodes"&&r(a).linkedNodes().forEach(function(c){l.push(c),l=s(c,l,u+1)}),o!=="linkedNodes"&&r(a).childNodes().forEach(function(c){l.push(c),l=s(c,l,u+1)})),l}(t)},linkedNodes:function(){return Object.values(n.data.linkedNodes||{})},childNodes:function(){return n.data.nodes||[]},isDraggable:function(i){try{var o=n;return pn(!this.isTopLevelNode(),Pj),pn(l_(e,o.data.parent).isCanvas(),Ij),pn(o.rules.canDrag(o,r),roe),!0}catch(s){return i&&i(s),!1}},isDroppable:function(i,o){var s=As(e.nodes,i),a=n;try{pn(this.isCanvas(),toe),pn(a.rules.canMoveIn(s.map(function(u){return u.node}),a,r),Zie);var l={};return s.forEach(function(u){var c=u.node,d=u.exists;if(pn(c.rules.canDrop(a,c,r),Qie),d){pn(!r(c.id).isTopLevelNode(),Pj);var h=r(c.id).descendants(!0);pn(!h.includes(a.id)&&a.id!==c.id,noe);var p=c.data.parent&&e.nodes[c.data.parent];pn(p.data.isCanvas,Ij),pn(p||!p&&!e.nodes[c.id],Jie),p.id!==a.id&&(l[p.id]||(l[p.id]=[]),l[p.id].push(c))}}),Object.keys(l).forEach(function(u){var c=e.nodes[u];pn(c.rules.canMoveOut(l[u],c,r),eoe)}),!0}catch(u){return o&&o(u),!1}},toSerializedNode:function(){return Roe(n.data,e.options.resolver)},toNodeTree:function(i){var o=[t].concat(ah(this.descendants(!0,i))).reduce(function(s,a){return s[a]=r(a).get(),s},{});return{rootNodeId:t,nodes:o}},decendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return Ua("query.node(id).decendants",{suggest:"query.node(id).descendants"}),this.descendants(i)},isTopLevelCanvas:function(){return!this.isRoot()&&!n.data.parent}}}function X4(e,t,n,r){for(var i={parent:e,index:0,where:"before"},o=0,s=0,a=0,l=0,u=0,c=0,d=0,h=t.length;d<h;d++){var p=t[d];if(c=p.top+p.outerHeight,l=p.left+p.outerWidth/2,u=p.top+p.outerHeight/2,!(s&&p.left>s||a&&u>=a||o&&p.left+p.outerWidth<o))if(i.index=d,p.inFlow){if(r<u){i.where="before";break}i.where="after"}else r<c&&(a=c),n<l?(s=l,i.where="before"):(o=l,i.where="after")}return i}var Bp=function(e){return typeof e=="string"?e:e.name};function Uj(e,t){var n=e.data.type,r={id:e.id||M4(),_hydrationTimestamp:Date.now(),data:wn({type:n,name:Bp(n),displayName:Bp(n),props:{},custom:{},parent:null,isCanvas:!1,hidden:!1,nodes:[],linkedNodes:{}},e.data),info:{},related:{},events:{selected:!1,dragged:!1,hovered:!1},rules:{canDrag:function(){return!0},canDrop:function(){return!0},canMoveIn:function(){return!0},canMoveOut:function(){return!0}},dom:null};if(r.data.type===fu||r.data.type===s_){var i=wn(wn({},o_),r.data.props);r.data.props=Object.keys(r.data.props).reduce(function(a,l){return Object.keys(o_).includes(l)?r.data[koe[l]||l]=i[l]:a[l]=r.data.props[l],a},{}),r.data.name=Bp(n=r.data.type),r.data.displayName=Bp(n),r.data.type===s_&&(r.data.isCanvas=!0,K4())}t&&t(r);var o=n.craft;if(o){if(r.data.displayName=o.displayName||o.name||r.data.displayName,r.data.props=wn(wn({},o.props||o.defaultProps||{}),r.data.props),r.data.custom=wn(wn({},o.custom||{}),r.data.custom),o.isCanvas!=null&&(r.data.isCanvas=o.isCanvas),o.rules&&Object.keys(o.rules).forEach(function(a){["canDrag","canDrop","canMoveIn","canMoveOut"].includes(a)&&(r.rules[a]=o.rules[a])}),o.related){var s={id:r.id,related:!0};Object.keys(o.related).forEach(function(a){r.related[a]=function(l){return $t.createElement(z4,s,$t.createElement(o.related[a],l))}})}o.info&&(r.info=o.info)}return r}const u_=(e,t,n)=>{let{type:r,props:i}=e;const o=((a,l)=>typeof a=="object"&&a.resolvedName?a.resolvedName==="Canvas"?s_:l[a.resolvedName]:typeof a=="string"?a:null)(r,t);if(!o)return;i=Object.keys(i).reduce((a,l)=>{const u=i[l];return a[l]=u==null?null:typeof u=="object"&&u.resolvedName?u_(u,t):l==="children"&&Array.isArray(u)?u.map(c=>typeof c=="string"?c:u_(c,t)):u,a},{});const s={...$t.createElement(o,{...i})};return{...s,name:Gm(t,s.type)}},Noe=(e,t)=>{const{type:n,props:r,...i}=e;pn(n!==void 0&&typeof n=="string"||n!==void 0&&n.resolvedName!==void 0,ioe.replace("%displayName%",e.displayName).replace("%availableComponents%",Object.keys(t).join(", ")));const{type:o,name:s,props:a}=u_(e,t),{parent:l,custom:u,displayName:c,isCanvas:d,nodes:h,hidden:p}=i;return{type:o,name:s,displayName:c||s,props:a,custom:u||{},isCanvas:!!d,hidden:!!p,parent:l,linkedNodes:i.linkedNodes||i._childCanvas||{},nodes:h||[]}},Toe=(e,t)=>{if(t.length<1)return{[e.id]:e};const n=t.map(({rootNodeId:i})=>i),r={...e,data:{...e.data,nodes:n}};return t.reduce((i,o)=>{const s=o.nodes[o.rootNodeId];return{...i,...o.nodes,[s.id]:{...s,data:{...s.data,parent:e.id}}}},{[e.id]:r})},Ioe=(e,t)=>({rootNodeId:e.id,nodes:Toe(e,t)});function J4(e){const t=e&&e.options,n=()=>J4(e);return{getDropPlaceholder:(r,i,o,s=a=>e.nodes[a.id].dom)=>{const a=e.nodes[i],l=n().node(a.id).isCanvas()?a:e.nodes[a.data.parent];if(!l)return;const u=l.data.nodes||[],c=X4(l,u?u.reduce((p,b)=>{const g=s(e.nodes[b]);if(g){const x={id:b,...sh(g)};p.push(x)}return p},[]):[],o.x,o.y),d=u.length&&e.nodes[u[c.index]],h={placement:{...c,currentNode:d},error:null};return As(e.nodes,r).forEach(({node:p,exists:b})=>{b&&n().node(p.id).isDraggable(g=>h.error=g)}),n().node(l.id).isDroppable(r,p=>h.error=p),h},getOptions:()=>t,getNodes:()=>e.nodes,node:r=>l_(e,r),getSerializedNodes(){const r=Object.keys(e.nodes).map(i=>[i,this.node(i).toSerializedNode()]);return Y4(r)},getEvent:r=>function(i,o){var s=i.events[o];return{contains:function(a){return s.has(a)},isEmpty:function(){return this.all().length===0},first:function(){return this.all()[0]},last:function(){var a=this.all();return a[a.length-1]},all:function(){return Array.from(s)},size:function(){return this.all().length},at:function(a){return this.all()[a]},raw:function(){return s}}}(e,r),serialize(){return JSON.stringify(this.getSerializedNodes())},parseReactElement:r=>({toNodeTree(i){let o=function(a,l){let u=a;return typeof u=="string"&&(u=$t.createElement(k.Fragment,{},u)),Uj({data:{type:u.type,props:{...u.props}}},c=>{l&&l(c,u)})}(r,(a,l)=>{const u=Gm(e.options.resolver,a.data.type);a.data.displayName=a.data.displayName||u,a.data.name=u,i&&i(a,l)}),s=[];return r.props&&r.props.children&&(s=$t.Children.toArray(r.props.children).reduce((a,l)=>($t.isValidElement(l)&&a.push(n().parseReactElement(l).toNodeTree(i)),a),[])),Ioe(o,s)}}),parseSerializedNode:r=>({toNode(i){const o=Noe(r,e.options.resolver);pn(o.type);const s=typeof i=="string"&&i;return s&&Ua("query.parseSerializedNode(...).toNode(id)",{suggest:"query.parseSerializedNode(...).toNode(node => node.id = id)"}),n().parseFreshNode({...s?{id:s}:{},data:o}).toNode(!s&&i)}}),parseFreshNode:r=>({toNode:i=>Uj(r,o=>{o.data.parent===R4&&(o.data.parent=Ls);const s=Gm(e.options.resolver,o.data.type);pn(s!==null),o.data.displayName=o.data.displayName||s,o.data.name=s,i&&i(o)})}),createNode(r,i){Ua("query.createNode(".concat(r,")"),{suggest:"query.parseReactElement(".concat(r,").toNodeTree()")});const o=this.parseReactElement(r).toNodeTree(),s=o.nodes[o.rootNodeId];return i&&(i.id&&(s.id=i.id),i.data&&(s.data={...s.data,...i.data})),s},getState:()=>e}}var Poe=function(e){ME(n,D4);var t=LE(n);function n(){return kv(this,n),t.apply(this,arguments)}return Cv(n,[{key:"handlers",value:function(){return{connect:function(r,i){},select:function(r,i){},hover:function(r,i){},drag:function(r,i){},drop:function(r,i){},create:function(r,i,o){}}}}]),n}();(function(e){ME(n,foe);var t=LE(n);function n(){return kv(this,n),t.apply(this,arguments)}return Cv(n)})();var Wj=function(e){e.preventDefault()},c_=function(){function e(t,n){kv(this,e),tr(this,"store",void 0),tr(this,"dragTarget",void 0),tr(this,"currentDropTargetId",void 0),tr(this,"currentDropTargetCanvasAncestorId",void 0),tr(this,"currentIndicator",null),tr(this,"currentTargetId",void 0),tr(this,"currentTargetChildDimensions",void 0),tr(this,"dragError",void 0),tr(this,"draggedNodes",void 0),tr(this,"onScrollListener",void 0),this.store=t,this.dragTarget=n,this.currentDropTargetId=null,this.currentDropTargetCanvasAncestorId=null,this.currentTargetId=null,this.currentTargetChildDimensions=null,this.currentIndicator=null,this.dragError=null,this.draggedNodes=this.getDraggedNodes(),this.validateDraggedNodes(),this.onScrollListener=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollListener,!0),window.addEventListener("dragover",Wj,!1)}return Cv(e,[{key:"cleanup",value:function(){window.removeEventListener("scroll",this.onScrollListener,!0),window.removeEventListener("dragover",Wj,!1)}},{key:"onScroll",value:function(t){var n=t.target,r=this.store.query.node(Ls).get();n instanceof Element&&r&&r.dom&&n.contains(r.dom)&&(this.currentTargetChildDimensions=null)}},{key:"getDraggedNodes",value:function(){return As(this.store.query.getNodes(),this.dragTarget.type==="new"?this.dragTarget.tree.nodes[this.dragTarget.tree.rootNodeId]:this.dragTarget.nodes)}},{key:"validateDraggedNodes",value:function(){var t=this;this.dragTarget.type!=="new"&&this.draggedNodes.forEach(function(n){n.exists&&t.store.query.node(n.node.id).isDraggable(function(r){t.dragError=r})})}},{key:"isNearBorders",value:function(t,n,r){return t.top+e.BORDER_OFFSET>r||t.bottom-e.BORDER_OFFSET<r||t.left+e.BORDER_OFFSET>n||t.right-e.BORDER_OFFSET<n}},{key:"isDiff",value:function(t){return!this.currentIndicator||this.currentIndicator.placement.parent.id!==t.parent.id||this.currentIndicator.placement.index!==t.index||this.currentIndicator.placement.where!==t.where}},{key:"getChildDimensions",value:function(t){var n=this,r=this.currentTargetChildDimensions;return this.currentTargetId===t.id&&r?r:t.data.nodes.reduce(function(i,o){var s=n.store.query.node(o).get().dom;return s&&i.push(wn({id:o},sh(s))),i},[])}},{key:"getCanvasAncestor",value:function(t){var n=this;if(t===this.currentDropTargetId&&this.currentDropTargetCanvasAncestorId){var r=this.store.query.node(this.currentDropTargetCanvasAncestorId).get();if(r)return r}return function i(o){var s=n.store.query.node(o).get();return s&&s.data.isCanvas?s:s.data.parent?i(s.data.parent):null}(t)}},{key:"computeIndicator",value:function(t,n,r){var i=this.getCanvasAncestor(t);if(i&&(this.currentDropTargetId=t,this.currentDropTargetCanvasAncestorId=i.id,i.data.parent&&this.isNearBorders(sh(i.dom),n,r)&&!this.store.query.node(i.id).isLinkedNode()&&(i=this.store.query.node(i.data.parent).get()),i)){this.currentTargetChildDimensions=this.getChildDimensions(i),this.currentTargetId=i.id;var o=X4(i,this.currentTargetChildDimensions,n,r);if(this.isDiff(o)){var s=this.dragError;s||this.store.query.node(i.id).isDroppable(this.draggedNodes.map(function(u){return u.node}),function(u){s=u});var a=i.data.nodes[o.index],l=a&&this.store.query.node(a).get();return this.currentIndicator={placement:wn(wn({},o),{},{currentNode:l}),error:s},this.currentIndicator}}}},{key:"getIndicator",value:function(){return this.currentIndicator}}]),e}();tr(c_,"BORDER_OFFSET",10);var Vj=function(e,t){if(t.length===1||arguments.length>2&&arguments[2]!==void 0&&arguments[2]){var n=t[0].getBoundingClientRect(),r=n.width,i=n.height,o=t[0].cloneNode(!0);return o.style.position="absolute",o.style.left="-100%",o.style.top="-100%",o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.pointerEvents="none",o.classList.add("drag-shadow"),document.body.appendChild(o),e.dataTransfer.setDragImage(o,0,0),o}var s=document.createElement("div");return s.style.position="absolute",s.style.left="-100%",s.style.top="-100%",s.style.width="100%",s.style.height="100%",s.style.pointerEvents="none",s.classList.add("drag-shadow-container"),t.forEach(function(a){var l=a.getBoundingClientRect(),u=l.width,c=l.height,d=l.top,h=l.left,p=a.cloneNode(!0);p.style.position="absolute",p.style.left="".concat(h,"px"),p.style.top="".concat(d,"px"),p.style.width="".concat(u,"px"),p.style.height="".concat(c,"px"),p.classList.add("drag-shadow"),s.appendChild(p)}),document.body.appendChild(s),e.dataTransfer.setDragImage(s,e.clientX,e.clientY),s},Q4=function(e){ME(n,Poe);var t=LE(n);function n(){var r;kv(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return tr(Dd(r=t.call.apply(t,[this].concat(o))),"draggedElementShadow",void 0),tr(Dd(r),"dragTarget",void 0),tr(Dd(r),"positioner",null),tr(Dd(r),"currentSelectedElementIds",[]),r}return Cv(n,[{key:"onDisable",value:function(){this.options.store.actions.clearEvents()}},{key:"handlers",value:function(){var r=this,i=this.options.store;return{connect:function(o,s){return i.actions.setDOM(s,o),r.reflect(function(a){a.select(o,s),a.hover(o,s),a.drop(o,s)})},select:function(o,s){var a=r.addCraftEventListener(o,"mousedown",function(u){u.craft.stopPropagation();var c=[];if(s){var d=i.query,h=d.getEvent("selected").all();(r.options.isMultiSelectEnabled(u)||h.includes(s))&&(c=h.filter(function(p){var b=d.node(p).descendants(!0),g=d.node(p).ancestors(!0);return!b.includes(s)&&!g.includes(s)})),c.includes(s)||c.push(s)}i.actions.setNodeEvent("selected",c)}),l=r.addCraftEventListener(o,"click",function(u){u.craft.stopPropagation();var c=i.query.getEvent("selected").all(),d=r.options.isMultiSelectEnabled(u),h=r.currentSelectedElementIds.includes(s),p=ah(c);d&&h?(p.splice(p.indexOf(s),1),i.actions.setNodeEvent("selected",p)):!d&&c.length>1&&i.actions.setNodeEvent("selected",p=[s]),r.currentSelectedElementIds=p});return function(){a(),l()}},hover:function(o,s){var a=r.addCraftEventListener(o,"mouseover",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",s)}),l=null;return r.options.removeHoverOnMouseleave&&(l=r.addCraftEventListener(o,"mouseleave",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",null)})),function(){a(),l&&l()}},drop:function(o,s){var a=r.addCraftEventListener(o,"dragover",function(u){if(u.craft.stopPropagation(),u.preventDefault(),r.positioner){var c=r.positioner.computeIndicator(s,u.clientX,u.clientY);c&&i.actions.setIndicator(c)}}),l=r.addCraftEventListener(o,"dragenter",function(u){u.craft.stopPropagation(),u.preventDefault()});return function(){l(),a()}},drag:function(o,s){if(!i.query.node(s).isDraggable())return function(){};o.setAttribute("draggable","true");var a=r.addCraftEventListener(o,"dragstart",function(u){u.craft.stopPropagation();var c=i.query,d=i.actions,h=c.getEvent("selected").all(),p=r.options.isMultiSelectEnabled(u);r.currentSelectedElementIds.includes(s)||(h=p?[].concat(ah(h),[s]):[s],i.actions.setNodeEvent("selected",h)),d.setNodeEvent("dragged",h);var b=h.map(function(g){return c.node(g).get().dom});r.draggedElementShadow=Vj(u,b,n.forceSingleDragShadow),r.dragTarget={type:"existing",nodes:h},r.positioner=new c_(r.options.store,r.dragTarget)}),l=r.addCraftEventListener(o,"dragend",function(u){u.craft.stopPropagation(),r.dropElement(function(c,d){c.type!=="new"&&i.actions.move(c.nodes,d.placement.parent.id,d.placement.index+(d.placement.where==="after"?1:0))})});return function(){o.setAttribute("draggable","false"),a(),l()}},create:function(o,s,a){o.setAttribute("draggable","true");var l=r.addCraftEventListener(o,"dragstart",function(c){var d;if(c.craft.stopPropagation(),typeof s=="function"){var h=s();d=$t.isValidElement(h)?i.query.parseReactElement(h).toNodeTree():h}else d=i.query.parseReactElement(s).toNodeTree();r.draggedElementShadow=Vj(c,[c.currentTarget],n.forceSingleDragShadow),r.dragTarget={type:"new",tree:d},r.positioner=new c_(r.options.store,r.dragTarget)}),u=r.addCraftEventListener(o,"dragend",function(c){c.craft.stopPropagation(),r.dropElement(function(d,h){d.type!=="existing"&&(i.actions.addNodeTree(d.tree,h.placement.parent.id,h.placement.index+(h.placement.where==="after"?1:0)),a&&kZ(a.onCreate)&&a.onCreate(d.tree))})});return function(){o.removeAttribute("draggable"),l(),u()}}}}},{key:"dropElement",value:function(r){var i=this.options.store;if(this.positioner){var o=this.draggedElementShadow,s=this.positioner.getIndicator();this.dragTarget&&s&&!s.error&&r(this.dragTarget,s),o&&(o.parentNode.removeChild(o),this.draggedElementShadow=null),this.dragTarget=null,i.actions.setIndicator(null),i.actions.setNodeEvent("dragged",null),this.positioner.cleanup(),this.positioner=null}}}]),n}();function Ooe(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,i=0,o=0,s=0,a=0,l=e.where;return n?n.inFlow?(s=n.outerWidth,a=r,i=l==="before"?n.top:n.bottom,o=n.left):(s=r,a=n.outerHeight,i=n.top,o=l==="before"?n.left:n.left+n.outerWidth):t&&(i=t.top+t.padding.top,o=t.left+t.padding.left,s=t.outerWidth-t.padding.right-t.padding.left-t.margin.left-t.margin.right,a=r),{top:"".concat(i,"px"),left:"".concat(o,"px"),width:"".concat(s,"px"),height:"".concat(a,"px")}}tr(Q4,"forceSingleDragShadow",yoe()&&moe());const $oe=()=>{var i;const{indicator:e,indicatorOptions:t,enabled:n}=du(o=>({indicator:o.indicator,indicatorOptions:o.options.indicator,enabled:o.options.enabled})),r=q4();return k.useEffect(()=>{r&&(n?r.enable():r.disable())},[n,r]),e?$t.createElement(goe,{className:t.className,style:{...Ooe(e.placement,sh(e.placement.parent.dom),e.placement.currentNode&&sh(e.placement.currentNode.dom),t.thickness),backgroundColor:e.error?t.error:t.success,transition:t.transition||"0.2s ease-in",...(i=t.style)!=null?i:{}},parentDom:e.placement.parent.dom}):null},Moe=({children:e})=>{const t=k.useContext(BE),n=k.useMemo(()=>t.query.getOptions().handlers(t),[t]);return n?$t.createElement(V4.Provider,{value:n},$t.createElement($oe,null),e):null},qj={nodes:{},events:{dragged:new Set,selected:new Set,hovered:new Set},indicator:null,options:{onNodesChange:()=>null,onRender:({render:e})=>e,onBeforeMoveEnd:()=>null,resolver:{},enabled:!0,indicator:{error:"red",success:"rgb(98, 196, 98)"},handlers:e=>new Q4({store:e,removeHoverOnMouseleave:!1,isMultiSelectEnabled:t=>!!t.metaKey}),normalizeNodes:()=>{}}},Doe={methods:function(e,t){return wn(wn({},function(n,r){var i=function(a,l,u){if(function h(p,b){var g=a.nodes[p];typeof g.data.type!="string"&&pn(n.options.resolver[g.data.name],N4.replace("%node_type%","".concat(g.data.type.name))),n.nodes[p]=wn(wn({},g),{},{data:wn(wn({},g.data),{},{parent:b})}),g.data.nodes.length>0&&(delete n.nodes[p].data.props.children,g.data.nodes.forEach(function(x){return h(x,g.id)})),Object.values(g.data.linkedNodes).forEach(function(x){return h(x,g.id)})}(a.rootNodeId,l),l||a.rootNodeId!==Ls){var c=o(l);if(u.type!=="child")c.data.linkedNodes[u.id]=a.rootNodeId;else{var d=u.index;d!=null?c.data.nodes.splice(d,0,a.rootNodeId):c.data.nodes.push(a.rootNodeId)}}},o=function(a){pn(a);var l=n.nodes[a];return pn(l),l},s=function a(l){var u=n.nodes[l],c=n.nodes[u.data.parent];if(u.data.nodes&&ah(u.data.nodes).forEach(function(p){return a(p)}),u.data.linkedNodes&&Object.values(u.data.linkedNodes).map(function(p){return a(p)}),c.data.nodes.includes(l)){var d=c.data.nodes;d.splice(d.indexOf(l),1)}else{var h=Object.keys(c.data.linkedNodes).find(function(p){return c.data.linkedNodes[p]===p});h&&delete c.data.linkedNodes[h]}(function(p,b){Object.keys(p.events).forEach(function(g){var x=p.events[g];x&&x.has&&x.has(b)&&(p.events[g]=new Set(Array.from(x).filter(function(y){return b!==y})))})})(n,l),delete n.nodes[l]};return{addLinkedNodeFromTree:function(a,l,u){var c=o(l).data.linkedNodes[u];c&&s(c),i(a,l,{type:"linked",id:u})},add:function(a,l,u){var c=[a];Array.isArray(a)&&(Ua("actions.add(node: Node[])",{suggest:"actions.add(node: Node)"}),c=a),c.forEach(function(d){i({nodes:tr({},d.id,d),rootNodeId:d.id},l,{type:"child",index:u})})},addNodeTree:function(a,l,u){i(a,l,{type:"child",index:u})},delete:function(a){As(n.nodes,a,{existOnly:!0,idOnly:!0}).forEach(function(l){var u=l.node;pn(!r.node(u.id).isTopLevelNode()),s(u.id)})},deserialize:function(a){var l=typeof a=="string"?JSON.parse(a):a,u=Object.keys(l).map(function(c){var d=c;return c===R4&&(d=Ls),[d,r.parseSerializedNode(l[c]).toNode(function(h){return h.id=d})]});this.replaceNodes(Y4(u))},move:function(a,l,u){var c=As(n.nodes,a,{existOnly:!0}),d=n.nodes[l],h=new Set;c.forEach(function(p,b){var g=p.node,x=g.id,y=g.data.parent;r.node(l).isDroppable([x],function(E){throw new Error(E)}),n.options.onBeforeMoveEnd(g,d,n.nodes[y]);var v=n.nodes[y].data.nodes;h.add(v);var w=v.indexOf(x);v[w]="$$",d.data.nodes.splice(u+b,0,x),n.nodes[x].data.parent=l}),h.forEach(function(p){var b=p.length;ah(p).reverse().forEach(function(g,x){g==="$$"&&p.splice(b-1-x,1)})})},replaceNodes:function(a){this.clearEvents(),n.nodes=a},clearEvents:function(){this.setNodeEvent("selected",null),this.setNodeEvent("hovered",null),this.setNodeEvent("dragged",null),this.setIndicator(null)},reset:function(){this.clearEvents(),this.replaceNodes({})},setOptions:function(a){a(n.options)},setNodeEvent:function(a,l){if(n.events[a].forEach(function(d){n.nodes[d]&&(n.nodes[d].events[a]=!1)}),n.events[a]=new Set,l){var u=As(n.nodes,l,{idOnly:!0,existOnly:!0}),c=new Set(u.map(function(d){return d.node.id}));c.forEach(function(d){n.nodes[d].events[a]=!0}),n.events[a]=c}},setCustom:function(a,l){As(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.custom)})},setDOM:function(a,l){n.nodes[a]&&(n.nodes[a].dom=l)},setIndicator:function(a){a&&(!a.placement.parent.dom||a.placement.currentNode&&!a.placement.currentNode.dom)||(n.indicator=a)},setHidden:function(a,l){n.nodes[a].data.hidden=l},setProp:function(a,l){As(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.props)})},selectNode:function(a){if(a){var l=As(n.nodes,a,{idOnly:!0,existOnly:!0});this.setNodeEvent("selected",l.map(function(u){return u.node.id}))}else this.setNodeEvent("selected",null);this.setNodeEvent("hovered",null)}}}(e,t)),{},{setState:function(n){var r=DE(this,joe);n(e,r)}})},ignoreHistoryForActions:["setDOM","setNodeEvent","selectNode","clearEvents","setOptions","setIndicator"],normalizeHistory:e=>{Object.keys(e.events).forEach(t=>{Array.from(e.events[t]||[]).forEach(n=>{e.nodes[n]||e.events[t].delete(n)})}),Object.keys(e.nodes).forEach(t=>{const n=e.nodes[t];Object.keys(n.events).forEach(r=>{n.events[r]&&e.events[r]&&!e.events[r].has(n.id)&&(n.events[r]=!1)})})}},Loe=(e,t)=>aoe(Doe,{...qj,options:{...qj.options,...e}},J4,t),Boe=({children:e,...t})=>{t.resolver!==void 0&&pn(typeof t.resolver=="object"&&!Array.isArray(t.resolver)&&t.resolver!==null);const n=k.useRef(t),r=Loe(n.current,(i,o,s,a,l)=>{if(!s)return;const{patches:u,...c}=s;for(let d=0;d<u.length;d++){const{path:h}=u[d],p=h.length>2&&h[0]==="nodes"&&h[2]==="data";if([Mn.IGNORE,Mn.THROTTLE].includes(c.type)&&c.params&&(c.type=c.params[0]),["setState","deserialize"].includes(c.type)||p){l(b=>{i.options.normalizeNodes&&i.options.normalizeNodes(b,o,c,a)});break}}});return k.useEffect(()=>{r&&t.enabled!==void 0&&r.query.getOptions().enabled!==t.enabled&&r.actions.setOptions(i=>{i.enabled=t.enabled})},[r,t.enabled]),k.useEffect(()=>{r.subscribe(i=>({json:r.query.serialize()}),()=>{r.query.getOptions().onNodesChange(r.query)})},[r]),r?k.createElement(BE.Provider,{value:r},k.createElement(Moe,null,e)):null};function lh(){const{connectors:{connect:e,drag:t}}=ai();return f.jsx("div",{ref:n=>e(t(n)),style:{height:1,width:"100%",backgroundColor:"white"}})}function Foe(e){return f.jsx("div",{style:{height:1,width:"100%",backgroundColor:"white"}})}function zoe(){const{actions:{setProp:e}}=ai(t=>({}));return f.jsx("div",{})}lh.craft={rules:{canDrag:e=>e.data.props.text!=="Drag"},related:{settings:zoe}};function Hoe({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const[o,s]=k.useState(""),[a,l]=k.useState(""),[u,c]=k.useState({nodes:[],edges:[]});return k.useEffect(()=>{e&&(s(e.name),l(e.icon),c(e.blueprint))},[e]),f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:"Edit Button State",onClose:n}),f.jsxs(lr,{children:[f.jsx(Xt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:o,onChange:d=>s(d),isValid:!0,errorMessage:"Names must be unique"}),f.jsx("p",{onClick:()=>dn({type:"blueprint",title:"",data:u,onSave:d=>c(d)}),children:"On Click Action"})]}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),f.jsx(Rt,{color:"primary",onClick:()=>{r({name:o,icon:a,blueprint:u}),n()},children:"Update"})]})]})}const Za=k.forwardRef(({buttons:e,onClick:t,isOpen:n=!1},r)=>f.jsxs("div",{className:"absolute right-6 bottom-6 group",ref:r,children:[f.jsx("div",{className:"".concat(n?"flex":"hidden"," flex-col items-center mb-4 space-y-2"),children:e==null?void 0:e.map(i=>f.jsxs("button",{onClick:i.onClick,type:"button",className:"relative w-[52px] h-[52px] text-neutral-500 bg-white rounded-lg border border-neutral-200 hover:text-neutral-900 dark:border-neutral-600 shadow-sm dark:hover:text-white dark:text-neutral-400 hover:bg-neutral-50 dark:bg-neutral-700 dark:hover:bg-neutral-600 focus:ring-4 focus:ring-neutral-300 focus:outline-none dark:focus:ring-neutral-400",children:[f.jsx("svg",{className:"w-5 h-5 mx-auto","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:f.jsx("path",{d:"M14.419 10.581a3.564 3.564 0 0 0-2.574 1.1l-4.756-2.49a3.54 3.54 0 0 0 .072-.71 3.55 3.55 0 0 0-.043-.428L11.67 6.1a3.56 3.56 0 1 0-.831-2.265c.006.143.02.286.043.428L6.33 6.218a3.573 3.573 0 1 0-.175 4.743l4.756 2.491a3.58 3.58 0 1 0 3.508-2.871Z"})}),f.jsx("span",{className:"absolute block mb-px text-sm font-medium -translate-x-[100%] -translate-y-1/2 -start-3 top-1/2 shadow-black",children:i.name})]},i.name))}),f.jsxs("button",{id:"floating-action-button",onClick:()=>t?t():null,type:"button",className:"flex items-center justify-center text-white bg-brand-700 rounded-lg w-14 h-14 hover:bg-brand-800 dark:bg-brand-600 dark:hover:bg-brand-700",children:[f.jsx("svg",{className:"".concat(!t&&"group-hover:rotate-45 transition-transform"," w-5 h-5"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),f.jsx("span",{className:"sr-only",children:"Open actions menu"})]})]}));function uh({buttons:e}){const{connectors:{connect:t,drag:n}}=ai();return f.jsx(Za,{ref:r=>t(n(r)),buttons:e==null?void 0:e.map(r=>({name:r.name,icon:r.icon,onClick:()=>{}})),isOpen:!0})}function Uoe({blueprint:e,isList:t,buttons:n,state:r,updateState:i}){const o=Uc(),[s,a]=k.useState(!1),l=k.useCallback(()=>{if(t)return a(!s);new ns(e).processBlueprint(o,r,i)},[e,o,r,i,s,t]);return f.jsx(Za,{isOpen:s,onClick:l,buttons:n==null?void 0:n.map(u=>({name:u.name,icon:u.icon,onClick:()=>new ns(u.blueprint).processBlueprint(o,r,i)}))})}function Woe(){const{actions:{setProp:e},isList:t,buttons:n,blueprint:r}=ai(s=>({isList:s.data.props.isList,buttons:s.data.props.buttons,blueprint:s.data.props.blueprint})),[i,o]=k.useState(null);return f.jsxs("div",{children:[f.jsx(Yn,{id:"isList",label:"is List?",checked:t,onChange:s=>e(a=>a.isList=s)}),t?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[f.jsx("h5",{style:{marginLeft:10},children:"Buttons"}),f.jsx("div",{children:f.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:()=>e(s=>(s.buttons.find(a=>a.name==="new button")||s.buttons.push({name:"new button",icon:"",blueprint:{nodes:Hr(),edges:[]}}),s)),children:[f.jsx("svg",{className:"group-hover:rotate-45 transition-transform w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),f.jsx("span",{className:"sr-only",children:"Icon description"})]})})]}),f.jsx(Ph,{}),n.map(s=>f.jsx("p",{onClick:()=>o(s),children:s.name},s.name)),f.jsx(Hoe,{data:i,isOpen:i!==null,requestClose:()=>o(null),onSave:s=>e(a=>{for(let l=0;l<a.buttons.length;l++)a.buttons[l].name===i.name&&(a.buttons[l]=s);return a}),onDelete:()=>e(s=>s.buttons=s.buttons.filter(a=>a.name!==i.name))})]}):f.jsx("p",{onClick:()=>dn({type:"blueprint",title:"",data:r,onSave:s=>e(a=>a.blueprint=s)}),children:"On Click"})]})}const Voe={defaultProps:{isList:!1,buttons:[],blueprint:{nodes:Hr(),edges:[]}},related:{settings:Woe}};uh.craft=Voe;const qoe=e=>{const t=Uc(),[n,r]=k.useState("default"),i=k.useMemo(()=>{var l;return e.dynamicOptions?(l=new ns(e.optionsBlueprint).processBlueprint(t,e.state,e.updateState))!=null?l:[]:e.options},[t,e.state,e.updateState]),o=k.useCallback(s=>{new ns(e.onChange).processBlueprint({...t,selectedValue:s},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return f.jsxs(ht,{style:{marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],width:Ge.size[e.width],maxWidth:Ge.size[e.maxWidth],minWidth:Ge.size[e.minWidth]},id:e.label,label:e.label,value:n,onChange:s=>{r(s),o(i.find(a=>a.name===s))},children:[f.jsx("option",{disabled:!0,value:"default",children:"Select an option..."}),i.map(s=>f.jsx("option",{value:s.name,children:s.name},s.name))]})},Koe=e=>{const t=Uc(),n=k.useMemo(()=>new ns(e.getValue).processBlueprint(t,e.state,e.updateState),[e.getValue,t,e.state,e.updateState]),r=k.useCallback(i=>{new ns(e.onChange).processBlueprint({...t,"field value":i},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return f.jsx(Xt,{style:{marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],width:Ge.size[e.width],maxWidth:Ge.size[e.maxWidth],minWidth:Ge.size[e.minWidth]},id:e.label,label:e.label,type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,value:n,onChange:i=>r(i),isValid:!0,errorMessage:""})},Goe=({data:e,style:t,state:n,updateState:r})=>f.jsx("div",{style:t,children:f.jsx(h4,{localData:[],children:f.jsx(Z4,{node:e.ROOT,data:e,state:n,updateState:r})})}),Z4=({node:e,data:t,state:n,updateState:r})=>{const i=typeof e.type=="object"?e.type.resolvedName:e.type,o=e.nodes.map(s=>f.jsx(Z4,{node:t[s],data:t,state:n,updateState:r},s));switch(i){case"Container":return f.jsx(oQ,{...e.props,state:n,updateState:r,children:o});case"Text":return f.jsx(sQ,{...e.props,state:n,updateState:r});case"DesignerDivider":return f.jsx(Foe,{...e.props,state:n,updateState:r});case"FAB":return f.jsx(Uoe,{...e.props,state:n,updateState:r});case"Select":return f.jsx(qoe,{...e.props,state:n,updateState:r});case"TextInput":return f.jsx(Koe,{...e.props,state:n,updateState:r});default:return f.jsxs("h1",{children:["No component for type ",i]})}};var e$={exports:{}},Eb={exports:{}},Sb={exports:{}},kb={},wd={},Kj;function Yoe(){if(Kj)return wd;Kj=1,wd.byteLength=a,wd.toByteArray=u,wd.fromByteArray=h;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(p){var b=p.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=p.indexOf("=");g===-1&&(g=b);var x=g===b?0:4-g%4;return[g,x]}function a(p){var b=s(p),g=b[0],x=b[1];return(g+x)*3/4-x}function l(p,b,g){return(b+g)*3/4-g}function u(p){var b,g=s(p),x=g[0],y=g[1],v=new n(l(p,x,y)),w=0,E=y>0?x-4:x,S;for(S=0;S<E;S+=4)b=t[p.charCodeAt(S)]<<18|t[p.charCodeAt(S+1)]<<12|t[p.charCodeAt(S+2)]<<6|t[p.charCodeAt(S+3)],v[w++]=b>>16&255,v[w++]=b>>8&255,v[w++]=b&255;return y===2&&(b=t[p.charCodeAt(S)]<<2|t[p.charCodeAt(S+1)]>>4,v[w++]=b&255),y===1&&(b=t[p.charCodeAt(S)]<<10|t[p.charCodeAt(S+1)]<<4|t[p.charCodeAt(S+2)]>>2,v[w++]=b>>8&255,v[w++]=b&255),v}function c(p){return e[p>>18&63]+e[p>>12&63]+e[p>>6&63]+e[p&63]}function d(p,b,g){for(var x,y=[],v=b;v<g;v+=3)x=(p[v]<<16&16711680)+(p[v+1]<<8&65280)+(p[v+2]&255),y.push(c(x));return y.join("")}function h(p){for(var b,g=p.length,x=g%3,y=[],v=16383,w=0,E=g-x;w<E;w+=v)y.push(d(p,w,w+v>E?E:w+v));return x===1?(b=p[g-1],y.push(e[b>>2]+e[b<<4&63]+"==")):x===2&&(b=(p[g-2]<<8)+p[g-1],y.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),y.join("")}return wd}var Fp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Gj;function Xoe(){return Gj||(Gj=1,Fp.read=function(e,t,n,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=o*256+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=s*256+e[t+d],d+=h,c-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(p?-1:1)*s*Math.pow(2,o-r)},Fp.write=function(e,t,n,r,i,o){var s,a,l,u=o*8-i-1,c=(1<<u)-1,d=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,b=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s=s+d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=a&255,p+=b,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=s&255,p+=b,s/=256,u-=8);e[n+p-b]|=g*128}),Fp}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Yj;function el(){return Yj||(Yj=1,function(e){const t=Yoe(),n=Xoe(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const L=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf(L,j),L.foo()===42}catch(L){return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(L){if(L>i)throw new RangeError('The value "'+L+'" is invalid for option "size"');const j=new Uint8Array(L);return Object.setPrototypeOf(j,a.prototype),j}function a(L,j,R){if(typeof L=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(L)}return l(L,j,R)}a.poolSize=8192;function l(L,j,R){if(typeof L=="string")return h(L,j);if(ArrayBuffer.isView(L))return b(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(xe(L,ArrayBuffer)||L&&xe(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(L,SharedArrayBuffer)||L&&xe(L.buffer,SharedArrayBuffer)))return g(L,j,R);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Z=L.valueOf&&L.valueOf();if(Z!=null&&Z!==L)return a.from(Z,j,R);const de=x(L);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),j,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,j,R){return l(L,j,R)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function c(L,j,R){return u(L),L<=0?s(L):j!==void 0?typeof R=="string"?s(L).fill(j,R):s(L).fill(j):s(L)}a.alloc=function(L,j,R){return c(L,j,R)};function d(L){return u(L),s(L<0?0:y(L)|0)}a.allocUnsafe=function(L){return d(L)},a.allocUnsafeSlow=function(L){return d(L)};function h(L,j){if((typeof j!="string"||j==="")&&(j="utf8"),!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const R=w(L,j)|0;let Z=s(R);const de=Z.write(L,j);return de!==R&&(Z=Z.slice(0,de)),Z}function p(L){const j=L.length<0?0:y(L.length)|0,R=s(j);for(let Z=0;Z<j;Z+=1)R[Z]=L[Z]&255;return R}function b(L){if(xe(L,Uint8Array)){const j=new Uint8Array(L);return g(j.buffer,j.byteOffset,j.byteLength)}return p(L)}function g(L,j,R){if(j<0||L.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<j+(R||0))throw new RangeError('"length" is outside of buffer bounds');let Z;return j===void 0&&R===void 0?Z=new Uint8Array(L):R===void 0?Z=new Uint8Array(L,j):Z=new Uint8Array(L,j,R),Object.setPrototypeOf(Z,a.prototype),Z}function x(L){if(a.isBuffer(L)){const j=y(L.length)|0,R=s(j);return R.length===0||L.copy(R,0,0,j),R}if(L.length!==void 0)return typeof L.length!="number"||dt(L.length)?s(0):p(L);if(L.type==="Buffer"&&Array.isArray(L.data))return p(L.data)}function y(L){if(L>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return L|0}function v(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==a.prototype},a.compare=function(j,R){if(xe(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),xe(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),!a.isBuffer(j)||!a.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===R)return 0;let Z=j.length,de=R.length;for(let Ae=0,He=Math.min(Z,de);Ae<He;++Ae)if(j[Ae]!==R[Ae]){Z=j[Ae],de=R[Ae];break}return Z<de?-1:de<Z?1:0},a.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(j,R){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return a.alloc(0);let Z;if(R===void 0)for(R=0,Z=0;Z<j.length;++Z)R+=j[Z].length;const de=a.allocUnsafe(R);let Ae=0;for(Z=0;Z<j.length;++Z){let He=j[Z];if(xe(He,Uint8Array))Ae+He.length>de.length?(a.isBuffer(He)||(He=a.from(He)),He.copy(de,Ae)):Uint8Array.prototype.set.call(de,He,Ae);else if(a.isBuffer(He))He.copy(de,Ae);else throw new TypeError('"list" argument must be an Array of Buffers');Ae+=He.length}return de};function w(L,j){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||xe(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const R=L.length,Z=arguments.length>2&&arguments[2]===!0;if(!Z&&R===0)return 0;let de=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Fe(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Pe(L).length;default:if(de)return Z?-1:Fe(L).length;j=(""+j).toLowerCase(),de=!0}}a.byteLength=w;function E(L,j,R){let Z=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,j>>>=0,R<=j))return"";for(L||(L="utf8");;)switch(L){case"hex":return B(this,j,R);case"utf8":case"utf-8":return I(this,j,R);case"ascii":return X(this,j,R);case"latin1":case"binary":return O(this,j,R);case"base64":return H(this,j,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,j,R);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),Z=!0}}a.prototype._isBuffer=!0;function S(L,j,R){const Z=L[j];L[j]=L[R],L[R]=Z}a.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<j;R+=2)S(this,R,R+1);return this},a.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<j;R+=4)S(this,R,R+3),S(this,R+1,R+2);return this},a.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<j;R+=8)S(this,R,R+7),S(this,R+1,R+6),S(this,R+2,R+5),S(this,R+3,R+4);return this},a.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?I(this,0,j):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(j){if(!a.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:a.compare(this,j)===0},a.prototype.inspect=function(){let j="";const R=e.INSPECT_MAX_BYTES;return j=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(j+=" ... "),"<Buffer "+j+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(j,R,Z,de,Ae){if(xe(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(R===void 0&&(R=0),Z===void 0&&(Z=j?j.length:0),de===void 0&&(de=0),Ae===void 0&&(Ae=this.length),R<0||Z>j.length||de<0||Ae>this.length)throw new RangeError("out of range index");if(de>=Ae&&R>=Z)return 0;if(de>=Ae)return-1;if(R>=Z)return 1;if(R>>>=0,Z>>>=0,de>>>=0,Ae>>>=0,this===j)return 0;let He=Ae-de,Tt=Z-R;const Wt=Math.min(He,Tt),Ze=this.slice(de,Ae),Mt=j.slice(R,Z);for(let Pt=0;Pt<Wt;++Pt)if(Ze[Pt]!==Mt[Pt]){He=Ze[Pt],Tt=Mt[Pt];break}return He<Tt?-1:Tt<He?1:0};function A(L,j,R,Z,de){if(L.length===0)return-1;if(typeof R=="string"?(Z=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,dt(R)&&(R=de?0:L.length-1),R<0&&(R=L.length+R),R>=L.length){if(de)return-1;R=L.length-1}else if(R<0)if(de)R=0;else return-1;if(typeof j=="string"&&(j=a.from(j,Z)),a.isBuffer(j))return j.length===0?-1:T(L,j,R,Z,de);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(L,j,R):Uint8Array.prototype.lastIndexOf.call(L,j,R):T(L,[j],R,Z,de);throw new TypeError("val must be string, number or Buffer")}function T(L,j,R,Z,de){let Ae=1,He=L.length,Tt=j.length;if(Z!==void 0&&(Z=String(Z).toLowerCase(),Z==="ucs2"||Z==="ucs-2"||Z==="utf16le"||Z==="utf-16le")){if(L.length<2||j.length<2)return-1;Ae=2,He/=2,Tt/=2,R/=2}function Wt(Mt,Pt){return Ae===1?Mt[Pt]:Mt.readUInt16BE(Pt*Ae)}let Ze;if(de){let Mt=-1;for(Ze=R;Ze<He;Ze++)if(Wt(L,Ze)===Wt(j,Mt===-1?0:Ze-Mt)){if(Mt===-1&&(Mt=Ze),Ze-Mt+1===Tt)return Mt*Ae}else Mt!==-1&&(Ze-=Ze-Mt),Mt=-1}else for(R+Tt>He&&(R=He-Tt),Ze=R;Ze>=0;Ze--){let Mt=!0;for(let Pt=0;Pt<Tt;Pt++)if(Wt(L,Ze+Pt)!==Wt(j,Pt)){Mt=!1;break}if(Mt)return Ze}return-1}a.prototype.includes=function(j,R,Z){return this.indexOf(j,R,Z)!==-1},a.prototype.indexOf=function(j,R,Z){return A(this,j,R,Z,!0)},a.prototype.lastIndexOf=function(j,R,Z){return A(this,j,R,Z,!1)};function $(L,j,R,Z){R=Number(R)||0;const de=L.length-R;Z?(Z=Number(Z),Z>de&&(Z=de)):Z=de;const Ae=j.length;Z>Ae/2&&(Z=Ae/2);let He;for(He=0;He<Z;++He){const Tt=parseInt(j.substr(He*2,2),16);if(dt(Tt))return He;L[R+He]=Tt}return He}function q(L,j,R,Z){return qe(Fe(j,L.length-R),L,R,Z)}function D(L,j,R,Z){return qe(Ue(j),L,R,Z)}function U(L,j,R,Z){return qe(Pe(j),L,R,Z)}function J(L,j,R,Z){return qe(ue(j,L.length-R),L,R,Z)}a.prototype.write=function(j,R,Z,de){if(R===void 0)de="utf8",Z=this.length,R=0;else if(Z===void 0&&typeof R=="string")de=R,Z=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(Z)?(Z=Z>>>0,de===void 0&&(de="utf8")):(de=Z,Z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ae=this.length-R;if((Z===void 0||Z>Ae)&&(Z=Ae),j.length>0&&(Z<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let He=!1;for(;;)switch(de){case"hex":return $(this,j,R,Z);case"utf8":case"utf-8":return q(this,j,R,Z);case"ascii":case"latin1":case"binary":return D(this,j,R,Z);case"base64":return U(this,j,R,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,j,R,Z);default:if(He)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),He=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(L,j,R){return j===0&&R===L.length?t.fromByteArray(L):t.fromByteArray(L.slice(j,R))}function I(L,j,R){R=Math.min(L.length,R);const Z=[];let de=j;for(;de<R;){const Ae=L[de];let He=null,Tt=Ae>239?4:Ae>223?3:Ae>191?2:1;if(de+Tt<=R){let Wt,Ze,Mt,Pt;switch(Tt){case 1:Ae<128&&(He=Ae);break;case 2:Wt=L[de+1],(Wt&192)===128&&(Pt=(Ae&31)<<6|Wt&63,Pt>127&&(He=Pt));break;case 3:Wt=L[de+1],Ze=L[de+2],(Wt&192)===128&&(Ze&192)===128&&(Pt=(Ae&15)<<12|(Wt&63)<<6|Ze&63,Pt>2047&&(Pt<55296||Pt>57343)&&(He=Pt));break;case 4:Wt=L[de+1],Ze=L[de+2],Mt=L[de+3],(Wt&192)===128&&(Ze&192)===128&&(Mt&192)===128&&(Pt=(Ae&15)<<18|(Wt&63)<<12|(Ze&63)<<6|Mt&63,Pt>65535&&Pt<1114112&&(He=Pt))}}He===null?(He=65533,Tt=1):He>65535&&(He-=65536,Z.push(He>>>10&1023|55296),He=56320|He&1023),Z.push(He),de+=Tt}return K(Z)}const F=4096;function K(L){const j=L.length;if(j<=F)return String.fromCharCode.apply(String,L);let R="",Z=0;for(;Z<j;)R+=String.fromCharCode.apply(String,L.slice(Z,Z+=F));return R}function X(L,j,R){let Z="";R=Math.min(L.length,R);for(let de=j;de<R;++de)Z+=String.fromCharCode(L[de]&127);return Z}function O(L,j,R){let Z="";R=Math.min(L.length,R);for(let de=j;de<R;++de)Z+=String.fromCharCode(L[de]);return Z}function B(L,j,R){const Z=L.length;(!j||j<0)&&(j=0),(!R||R<0||R>Z)&&(R=Z);let de="";for(let Ae=j;Ae<R;++Ae)de+=gt[L[Ae]];return de}function P(L,j,R){const Z=L.slice(j,R);let de="";for(let Ae=0;Ae<Z.length-1;Ae+=2)de+=String.fromCharCode(Z[Ae]+Z[Ae+1]*256);return de}a.prototype.slice=function(j,R){const Z=this.length;j=~~j,R=R===void 0?Z:~~R,j<0?(j+=Z,j<0&&(j=0)):j>Z&&(j=Z),R<0?(R+=Z,R<0&&(R=0)):R>Z&&(R=Z),R<j&&(R=j);const de=this.subarray(j,R);return Object.setPrototypeOf(de,a.prototype),de};function G(L,j,R){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+j>R)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(j,R,Z){j=j>>>0,R=R>>>0,Z||G(j,R,this.length);let de=this[j],Ae=1,He=0;for(;++He<R&&(Ae*=256);)de+=this[j+He]*Ae;return de},a.prototype.readUintBE=a.prototype.readUIntBE=function(j,R,Z){j=j>>>0,R=R>>>0,Z||G(j,R,this.length);let de=this[j+--R],Ae=1;for(;R>0&&(Ae*=256);)de+=this[j+--R]*Ae;return de},a.prototype.readUint8=a.prototype.readUInt8=function(j,R){return j=j>>>0,R||G(j,1,this.length),this[j]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(j,R){return j=j>>>0,R||G(j,2,this.length),this[j]|this[j+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(j,R){return j=j>>>0,R||G(j,2,this.length),this[j]<<8|this[j+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(j,R){return j=j>>>0,R||G(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(j,R){return j=j>>>0,R||G(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},a.prototype.readBigUInt64LE=ft(function(j){j=j>>>0,te(j,"offset");const R=this[j],Z=this[j+7];(R===void 0||Z===void 0)&&ae(j,this.length-8);const de=R+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,Ae=this[++j]+this[++j]*2**8+this[++j]*2**16+Z*2**24;return BigInt(de)+(BigInt(Ae)<<BigInt(32))}),a.prototype.readBigUInt64BE=ft(function(j){j=j>>>0,te(j,"offset");const R=this[j],Z=this[j+7];(R===void 0||Z===void 0)&&ae(j,this.length-8);const de=R*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],Ae=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+Z;return(BigInt(de)<<BigInt(32))+BigInt(Ae)}),a.prototype.readIntLE=function(j,R,Z){j=j>>>0,R=R>>>0,Z||G(j,R,this.length);let de=this[j],Ae=1,He=0;for(;++He<R&&(Ae*=256);)de+=this[j+He]*Ae;return Ae*=128,de>=Ae&&(de-=Math.pow(2,8*R)),de},a.prototype.readIntBE=function(j,R,Z){j=j>>>0,R=R>>>0,Z||G(j,R,this.length);let de=R,Ae=1,He=this[j+--de];for(;de>0&&(Ae*=256);)He+=this[j+--de]*Ae;return Ae*=128,He>=Ae&&(He-=Math.pow(2,8*R)),He},a.prototype.readInt8=function(j,R){return j=j>>>0,R||G(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},a.prototype.readInt16LE=function(j,R){j=j>>>0,R||G(j,2,this.length);const Z=this[j]|this[j+1]<<8;return Z&32768?Z|4294901760:Z},a.prototype.readInt16BE=function(j,R){j=j>>>0,R||G(j,2,this.length);const Z=this[j+1]|this[j]<<8;return Z&32768?Z|4294901760:Z},a.prototype.readInt32LE=function(j,R){return j=j>>>0,R||G(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},a.prototype.readInt32BE=function(j,R){return j=j>>>0,R||G(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},a.prototype.readBigInt64LE=ft(function(j){j=j>>>0,te(j,"offset");const R=this[j],Z=this[j+7];(R===void 0||Z===void 0)&&ae(j,this.length-8);const de=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(Z<<24);return(BigInt(de)<<BigInt(32))+BigInt(R+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),a.prototype.readBigInt64BE=ft(function(j){j=j>>>0,te(j,"offset");const R=this[j],Z=this[j+7];(R===void 0||Z===void 0)&&ae(j,this.length-8);const de=(R<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(de)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+Z)}),a.prototype.readFloatLE=function(j,R){return j=j>>>0,R||G(j,4,this.length),n.read(this,j,!0,23,4)},a.prototype.readFloatBE=function(j,R){return j=j>>>0,R||G(j,4,this.length),n.read(this,j,!1,23,4)},a.prototype.readDoubleLE=function(j,R){return j=j>>>0,R||G(j,8,this.length),n.read(this,j,!0,52,8)},a.prototype.readDoubleBE=function(j,R){return j=j>>>0,R||G(j,8,this.length),n.read(this,j,!1,52,8)};function Q(L,j,R,Z,de,Ae){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>de||j<Ae)throw new RangeError('"value" argument is out of bounds');if(R+Z>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(j,R,Z,de){if(j=+j,R=R>>>0,Z=Z>>>0,!de){const Tt=Math.pow(2,8*Z)-1;Q(this,j,R,Z,Tt,0)}let Ae=1,He=0;for(this[R]=j&255;++He<Z&&(Ae*=256);)this[R+He]=j/Ae&255;return R+Z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(j,R,Z,de){if(j=+j,R=R>>>0,Z=Z>>>0,!de){const Tt=Math.pow(2,8*Z)-1;Q(this,j,R,Z,Tt,0)}let Ae=Z-1,He=1;for(this[R+Ae]=j&255;--Ae>=0&&(He*=256);)this[R+Ae]=j/He&255;return R+Z},a.prototype.writeUint8=a.prototype.writeUInt8=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,1,255,0),this[R]=j&255,R+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,2,65535,0),this[R]=j&255,this[R+1]=j>>>8,R+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,2,65535,0),this[R]=j>>>8,this[R+1]=j&255,R+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,4,4294967295,0),this[R+3]=j>>>24,this[R+2]=j>>>16,this[R+1]=j>>>8,this[R]=j&255,R+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,4,4294967295,0),this[R]=j>>>24,this[R+1]=j>>>16,this[R+2]=j>>>8,this[R+3]=j&255,R+4};function se(L,j,R,Z,de){Re(j,Z,de,L,R,7);let Ae=Number(j&BigInt(4294967295));L[R++]=Ae,Ae=Ae>>8,L[R++]=Ae,Ae=Ae>>8,L[R++]=Ae,Ae=Ae>>8,L[R++]=Ae;let He=Number(j>>BigInt(32)&BigInt(4294967295));return L[R++]=He,He=He>>8,L[R++]=He,He=He>>8,L[R++]=He,He=He>>8,L[R++]=He,R}function _e(L,j,R,Z,de){Re(j,Z,de,L,R,7);let Ae=Number(j&BigInt(4294967295));L[R+7]=Ae,Ae=Ae>>8,L[R+6]=Ae,Ae=Ae>>8,L[R+5]=Ae,Ae=Ae>>8,L[R+4]=Ae;let He=Number(j>>BigInt(32)&BigInt(4294967295));return L[R+3]=He,He=He>>8,L[R+2]=He,He=He>>8,L[R+1]=He,He=He>>8,L[R]=He,R+8}a.prototype.writeBigUInt64LE=ft(function(j,R=0){return se(this,j,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ft(function(j,R=0){return _e(this,j,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(j,R,Z,de){if(j=+j,R=R>>>0,!de){const Wt=Math.pow(2,8*Z-1);Q(this,j,R,Z,Wt-1,-Wt)}let Ae=0,He=1,Tt=0;for(this[R]=j&255;++Ae<Z&&(He*=256);)j<0&&Tt===0&&this[R+Ae-1]!==0&&(Tt=1),this[R+Ae]=(j/He>>0)-Tt&255;return R+Z},a.prototype.writeIntBE=function(j,R,Z,de){if(j=+j,R=R>>>0,!de){const Wt=Math.pow(2,8*Z-1);Q(this,j,R,Z,Wt-1,-Wt)}let Ae=Z-1,He=1,Tt=0;for(this[R+Ae]=j&255;--Ae>=0&&(He*=256);)j<0&&Tt===0&&this[R+Ae+1]!==0&&(Tt=1),this[R+Ae]=(j/He>>0)-Tt&255;return R+Z},a.prototype.writeInt8=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,1,127,-128),j<0&&(j=255+j+1),this[R]=j&255,R+1},a.prototype.writeInt16LE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,2,32767,-32768),this[R]=j&255,this[R+1]=j>>>8,R+2},a.prototype.writeInt16BE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,2,32767,-32768),this[R]=j>>>8,this[R+1]=j&255,R+2},a.prototype.writeInt32LE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,4,2147483647,-2147483648),this[R]=j&255,this[R+1]=j>>>8,this[R+2]=j>>>16,this[R+3]=j>>>24,R+4},a.prototype.writeInt32BE=function(j,R,Z){return j=+j,R=R>>>0,Z||Q(this,j,R,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[R]=j>>>24,this[R+1]=j>>>16,this[R+2]=j>>>8,this[R+3]=j&255,R+4},a.prototype.writeBigInt64LE=ft(function(j,R=0){return se(this,j,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ft(function(j,R=0){return _e(this,j,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(L,j,R,Z,de,Ae){if(R+Z>L.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function Te(L,j,R,Z,de){return j=+j,R=R>>>0,de||Ne(L,j,R,4),n.write(L,j,R,Z,23,4),R+4}a.prototype.writeFloatLE=function(j,R,Z){return Te(this,j,R,!0,Z)},a.prototype.writeFloatBE=function(j,R,Z){return Te(this,j,R,!1,Z)};function W(L,j,R,Z,de){return j=+j,R=R>>>0,de||Ne(L,j,R,8),n.write(L,j,R,Z,52,8),R+8}a.prototype.writeDoubleLE=function(j,R,Z){return W(this,j,R,!0,Z)},a.prototype.writeDoubleBE=function(j,R,Z){return W(this,j,R,!1,Z)},a.prototype.copy=function(j,R,Z,de){if(!a.isBuffer(j))throw new TypeError("argument should be a Buffer");if(Z||(Z=0),!de&&de!==0&&(de=this.length),R>=j.length&&(R=j.length),R||(R=0),de>0&&de<Z&&(de=Z),de===Z||j.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(Z<0||Z>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),j.length-R<de-Z&&(de=j.length-R+Z);const Ae=de-Z;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,Z,de):Uint8Array.prototype.set.call(j,this.subarray(Z,de),R),Ae},a.prototype.fill=function(j,R,Z,de){if(typeof j=="string"){if(typeof R=="string"?(de=R,R=0,Z=this.length):typeof Z=="string"&&(de=Z,Z=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!a.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(j.length===1){const He=j.charCodeAt(0);(de==="utf8"&&He<128||de==="latin1")&&(j=He)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(R<0||this.length<R||this.length<Z)throw new RangeError("Out of range index");if(Z<=R)return this;R=R>>>0,Z=Z===void 0?this.length:Z>>>0,j||(j=0);let Ae;if(typeof j=="number")for(Ae=R;Ae<Z;++Ae)this[Ae]=j;else{const He=a.isBuffer(j)?j:a.from(j,de),Tt=He.length;if(Tt===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(Ae=0;Ae<Z-R;++Ae)this[Ae+R]=He[Ae%Tt]}return this};const Y={};function ie(L,j,R){Y[L]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(L,"]"),this.stack,delete this.name}get code(){return L}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return"".concat(this.name," [").concat(L,"]: ").concat(this.message)}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?"".concat(L," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(L,j){return'The "'.concat(L,'" argument must be of type number. Received type ').concat(typeof j)},TypeError),ie("ERR_OUT_OF_RANGE",function(L,j,R){let Z='The value of "'.concat(L,'" is out of range.'),de=R;return Number.isInteger(R)&&Math.abs(R)>2**32?de=Oe(String(R)):typeof R=="bigint"&&(de=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(de=Oe(de)),de+="n"),Z+=" It must be ".concat(j,". Received ").concat(de),Z},RangeError);function Oe(L){let j="",R=L.length;const Z=L[0]==="-"?1:0;for(;R>=Z+4;R-=3)j="_".concat(L.slice(R-3,R)).concat(j);return"".concat(L.slice(0,R)).concat(j)}function Me(L,j,R){te(j,"offset"),(L[j]===void 0||L[j+R]===void 0)&&ae(j,L.length-(R+1))}function Re(L,j,R,Z,de,Ae){if(L>R||L<j){const He=typeof j=="bigint"?"n":"";let Tt;throw j===0||j===BigInt(0)?Tt=">= 0".concat(He," and < 2").concat(He," ** ").concat((Ae+1)*8).concat(He):Tt=">= -(2".concat(He," ** ").concat((Ae+1)*8-1).concat(He,") and < 2 ** ")+"".concat((Ae+1)*8-1).concat(He),new Y.ERR_OUT_OF_RANGE("value",Tt,L)}Me(Z,de,Ae)}function te(L,j){if(typeof L!="number")throw new Y.ERR_INVALID_ARG_TYPE(j,"number",L)}function ae(L,j,R){throw Math.floor(L)!==L?(te(L,R),new Y.ERR_OUT_OF_RANGE("offset","an integer",L)):j<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(j),L)}const pe=/[^+/0-9A-Za-z-_]/g;function We(L){if(L=L.split("=")[0],L=L.trim().replace(pe,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function Fe(L,j){j=j||1/0;let R;const Z=L.length;let de=null;const Ae=[];for(let He=0;He<Z;++He){if(R=L.charCodeAt(He),R>55295&&R<57344){if(!de){if(R>56319){(j-=3)>-1&&Ae.push(239,191,189);continue}else if(He+1===Z){(j-=3)>-1&&Ae.push(239,191,189);continue}de=R;continue}if(R<56320){(j-=3)>-1&&Ae.push(239,191,189),de=R;continue}R=(de-55296<<10|R-56320)+65536}else de&&(j-=3)>-1&&Ae.push(239,191,189);if(de=null,R<128){if((j-=1)<0)break;Ae.push(R)}else if(R<2048){if((j-=2)<0)break;Ae.push(R>>6|192,R&63|128)}else if(R<65536){if((j-=3)<0)break;Ae.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((j-=4)<0)break;Ae.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return Ae}function Ue(L){const j=[];for(let R=0;R<L.length;++R)j.push(L.charCodeAt(R)&255);return j}function ue(L,j){let R,Z,de;const Ae=[];for(let He=0;He<L.length&&!((j-=2)<0);++He)R=L.charCodeAt(He),Z=R>>8,de=R%256,Ae.push(de),Ae.push(Z);return Ae}function Pe(L){return t.toByteArray(We(L))}function qe(L,j,R,Z){let de;for(de=0;de<Z&&!(de+R>=j.length||de>=L.length);++de)j[de+R]=L[de];return de}function xe(L,j){return L instanceof j||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===j.name}function dt(L){return L!==L}const gt=function(){const L="0123456789abcdef",j=new Array(256);for(let R=0;R<16;++R){const Z=R*16;for(let de=0;de<16;++de)j[Z+de]=L[R]+L[de]}return j}();function ft(L){return typeof BigInt>"u"?At:L}function At(){throw new Error("BigInt not supported")}}(kb)),kb}var Cb,Xj;function In(){if(Xj)return Cb;Xj=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError("Expected input to be an Array, got ".concat(typeof n));let r="";for(let i=0;i<n.length;i++)r+="    ".concat(n[i].stack,"\n");super(r),this.name="AggregateError",this.errors=n}}return Cb={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},Cb}var jb={exports:{}},Ab,Jj;function t$(){return Jj||(Jj=1,Ab={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();if(r==="f")return i.toFixed(6);if(r==="j")return JSON.stringify(i);if(r==="s"&&typeof i=="object"){const o=i.constructor!==Object?i.constructor.name:"";return"".concat(o," {}").trim()}else return i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return"`".concat(e,"`")}else return'"'.concat(e,'"');return"'".concat(e,"'");case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return"".concat(String(e),"n");case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),Ab}var Rb,Qj;function li(){if(Qj)return Rb;Qj=1;const{format:e,inspect:t}=t$(),{AggregateError:n}=In(),r=globalThis.AggregateError||n,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",l={};function u(x,y){if(!x)throw new l.ERR_INTERNAL_ASSERTION(y)}function c(x){let y="",v=x.length;const w=x[0]==="-"?1:0;for(;v>=w+4;v-=3)y="_".concat(x.slice(v-3,v)).concat(y);return"".concat(x.slice(0,v)).concat(y)}function d(x,y,v){if(typeof y=="function")return u(y.length<=v.length,"Code: ".concat(x,"; The provided arguments length (").concat(v.length,") does not match the required ones (").concat(y.length,").")),y(...v);const w=(y.match(/%[dfijoOs]/g)||[]).length;return u(w===v.length,"Code: ".concat(x,"; The provided arguments length (").concat(v.length,") does not match the required ones (").concat(w,").")),v.length===0?y:e(y,...v)}function h(x,y,v){v||(v=Error);class w extends v{constructor(...S){super(d(x,y,S))}toString(){return"".concat(this.name," [").concat(x,"]: ").concat(this.message)}}Object.defineProperties(w.prototype,{name:{value:v.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return"".concat(this.name," [").concat(x,"]: ").concat(this.message)},writable:!0,enumerable:!1,configurable:!0}}),w.prototype.code=x,w.prototype[i]=!0,l[x]=w}function p(x){const y=a+x.name;return Object.defineProperty(x,"name",{value:y}),x}function b(x,y){if(x&&y&&x!==y){if(Array.isArray(y.errors))return y.errors.push(x),y;const v=new r([y,x],y.message);return v.code=y.code,v}return x||y}class g extends Error{constructor(y="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",v);super(y,v),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(x,y,v)=>{u(typeof x=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let w="The ";x.endsWith(" argument")?w+="".concat(x," "):w+='"'.concat(x,'" ').concat(x.includes(".")?"property":"argument"," "),w+="must be ";const E=[],S=[],A=[];for(const $ of y)u(typeof $=="string","All expected entries have to be of type string"),o.includes($)?E.push($.toLowerCase()):s.test($)?S.push($):(u($!=="object",'The value "object" should be written as "Object"'),A.push($));if(S.length>0){const $=E.indexOf("object");$!==-1&&(E.splice(E,$,1),S.push("Object"))}if(E.length>0){switch(E.length){case 1:w+="of type ".concat(E[0]);break;case 2:w+="one of type ".concat(E[0]," or ").concat(E[1]);break;default:{const $=E.pop();w+="one of type ".concat(E.join(", "),", or ").concat($)}}(S.length>0||A.length>0)&&(w+=" or ")}if(S.length>0){switch(S.length){case 1:w+="an instance of ".concat(S[0]);break;case 2:w+="an instance of ".concat(S[0]," or ").concat(S[1]);break;default:{const $=S.pop();w+="an instance of ".concat(S.join(", "),", or ").concat($)}}A.length>0&&(w+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(w+="an "),w+="".concat(A[0]);break;case 2:w+="one of ".concat(A[0]," or ").concat(A[1]);break;default:{const $=A.pop();w+="one of ".concat(A.join(", "),", or ").concat($)}}if(v==null)w+=". Received ".concat(v);else if(typeof v=="function"&&v.name)w+=". Received function ".concat(v.name);else if(typeof v=="object"){var T;if((T=v.constructor)!==null&&T!==void 0&&T.name)w+=". Received an instance of ".concat(v.constructor.name);else{const $=t(v,{depth:-1});w+=". Received ".concat($)}}else{let $=t(v,{colors:!1});$.length>25&&($="".concat($.slice(0,25),"...")),w+=". Received type ".concat(typeof v," (").concat($,")")}return w},TypeError),h("ERR_INVALID_ARG_VALUE",(x,y,v="is invalid")=>{let w=t(y);w.length>128&&(w=w.slice(0,128)+"...");const E=x.includes(".")?"property":"argument";return"The ".concat(E," '").concat(x,"' ").concat(v,". Received ").concat(w)},TypeError),h("ERR_INVALID_RETURN_VALUE",(x,y,v)=>{var w;const E=v!=null&&(w=v.constructor)!==null&&w!==void 0&&w.name?"instance of ".concat(v.constructor.name):"type ".concat(typeof v);return"Expected ".concat(x,' to be returned from the "').concat(y,'"')+" function but got ".concat(E,".")},TypeError),h("ERR_MISSING_ARGS",(...x)=>{u(x.length>0,"At least one arg needs to be specified");let y;const v=x.length;switch(x=(Array.isArray(x)?x:[x]).map(w=>'"'.concat(w,'"')).join(" or "),v){case 1:y+="The ".concat(x[0]," argument");break;case 2:y+="The ".concat(x[0]," and ").concat(x[1]," arguments");break;default:{const w=x.pop();y+="The ".concat(x.join(", "),", and ").concat(w," arguments")}break}return"".concat(y," must be specified")},TypeError),h("ERR_OUT_OF_RANGE",(x,y,v)=>{u(y,'Missing "range" argument');let w;if(Number.isInteger(v)&&Math.abs(v)>2**32)w=c(String(v));else if(typeof v=="bigint"){w=String(v);const E=BigInt(2)**BigInt(32);(v>E||v<-E)&&(w=c(w)),w+="n"}else w=t(v);return'The value of "'.concat(x,'" is out of range. It must be ').concat(y,". Received ").concat(w)},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Rb={AbortError:g,aggregateTwoErrors:p(b),hideStackFrames:p,codes:l},Rb}var xd={exports:{}},Zj;function ch(){if(Zj)return xd.exports;Zj=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return xd.exports=e,xd.exports.AbortSignal=t,xd.exports.default=e,xd.exports}var zp={exports:{}},eA;function Av(){if(eA)return zp.exports;eA=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(S,A,T){return Function.prototype.apply.call(S,A,T)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function r(E){console&&console.warn&&console.warn(E)}var i=Number.isNaN||function(S){return S!==S};function o(){o.init.call(this)}zp.exports=o,zp.exports.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");s=E}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function l(E){return E._maxListeners===void 0?o.defaultMaxListeners:E._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(S){for(var A=[],T=1;T<arguments.length;T++)A.push(arguments[T]);var $=S==="error",q=this._events;if(q!==void 0)$=$&&q.error===void 0;else if(!$)return!1;if($){var D;if(A.length>0&&(D=A[0]),D instanceof Error)throw D;var U=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw U.context=D,U}var J=q[S];if(J===void 0)return!1;if(typeof J=="function")t(J,this,A);else for(var H=J.length,I=b(J,H),T=0;T<H;++T)t(I[T],this,A);return!0};function u(E,S,A,T){var $,q,D;if(a(A),q=E._events,q===void 0?(q=E._events=Object.create(null),E._eventsCount=0):(q.newListener!==void 0&&(E.emit("newListener",S,A.listener?A.listener:A),q=E._events),D=q[S]),D===void 0)D=q[S]=A,++E._eventsCount;else if(typeof D=="function"?D=q[S]=T?[A,D]:[D,A]:T?D.unshift(A):D.push(A),$=l(E),$>0&&D.length>$&&!D.warned){D.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=E,U.type=S,U.count=D.length,r(U)}return E}o.prototype.addListener=function(S,A){return u(this,S,A,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(S,A){return u(this,S,A,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,S,A){var T={fired:!1,wrapFn:void 0,target:E,type:S,listener:A},$=c.bind(T);return $.listener=A,T.wrapFn=$,$}o.prototype.once=function(S,A){return a(A),this.on(S,d(this,S,A)),this},o.prototype.prependOnceListener=function(S,A){return a(A),this.prependListener(S,d(this,S,A)),this},o.prototype.removeListener=function(S,A){var T,$,q,D,U;if(a(A),$=this._events,$===void 0)return this;if(T=$[S],T===void 0)return this;if(T===A||T.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete $[S],$.removeListener&&this.emit("removeListener",S,T.listener||A));else if(typeof T!="function"){for(q=-1,D=T.length-1;D>=0;D--)if(T[D]===A||T[D].listener===A){U=T[D].listener,q=D;break}if(q<0)return this;q===0?T.shift():g(T,q),T.length===1&&($[S]=T[0]),$.removeListener!==void 0&&this.emit("removeListener",S,U||A)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(S){var A,T,$;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[S]),this;if(arguments.length===0){var q=Object.keys(T),D;for($=0;$<q.length;++$)D=q[$],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=T[S],typeof A=="function")this.removeListener(S,A);else if(A!==void 0)for($=A.length-1;$>=0;$--)this.removeListener(S,A[$]);return this};function h(E,S,A){var T=E._events;if(T===void 0)return[];var $=T[S];return $===void 0?[]:typeof $=="function"?A?[$.listener||$]:[$]:A?x($):b($,$.length)}o.prototype.listeners=function(S){return h(this,S,!0)},o.prototype.rawListeners=function(S){return h(this,S,!1)},o.listenerCount=function(E,S){return typeof E.listenerCount=="function"?E.listenerCount(S):p.call(E,S)},o.prototype.listenerCount=p;function p(E){var S=this._events;if(S!==void 0){var A=S[E];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function b(E,S){for(var A=new Array(S),T=0;T<S;++T)A[T]=E[T];return A}function g(E,S){for(;S+1<E.length;S++)E[S]=E[S+1];E.pop()}function x(E){for(var S=new Array(E.length),A=0;A<S.length;++A)S[A]=E[A].listener||E[A];return S}function y(E,S){return new Promise(function(A,T){function $(D){E.removeListener(S,q),T(D)}function q(){typeof E.removeListener=="function"&&E.removeListener("error",$),A([].slice.call(arguments))}w(E,S,q,{once:!0}),S!=="error"&&v(E,$,{once:!0})})}function v(E,S,A){typeof E.on=="function"&&w(E,"error",S,A)}function w(E,S,A,T){if(typeof E.on=="function")T.once?E.once(S,A):E.on(S,A);else if(typeof E.addEventListener=="function")E.addEventListener(S,function $(q){T.once&&E.removeEventListener(S,$),A(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return zp.exports}var tA;function Ei(){return tA||(tA=1,function(e){const t=el(),{format:n,inspect:r}=t$(),{codes:{ERR_INVALID_ARG_TYPE:i}}=li(),{kResistStopPropagation:o,AggregateError:s,SymbolDispose:a}=In(),l=globalThis.AbortSignal||ch().AbortSignal,u=globalThis.AbortController||ch().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||t.Blob,h=typeof d<"u"?function(x){return x instanceof d}:function(x){return!1},p=(g,x)=>{if(g!==void 0&&(g===null||typeof g!="object"||!("aborted"in g)))throw new i(x,"AbortSignal",g)},b=(g,x)=>{if(typeof g!="function")throw new i(x,"Function",g)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(g){let x=!1;return function(...y){x||(x=!0,g.apply(this,y))}},createDeferredPromise:function(){let g,x;return{promise:new Promise((v,w)=>{g=v,x=w}),resolve:g,reject:x}},promisify(g){return new Promise((x,y)=>{g((v,...w)=>v?y(v):x(...w))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(g){return g instanceof c},isArrayBufferView(g){return ArrayBuffer.isView(g)}},isBlob:h,deprecate(g,x){return g},addAbortListener:Av().addAbortListener||function(x,y){if(x===void 0)throw new i("signal","AbortSignal",x);p(x,"signal"),b(y,"listener");let v;return x.aborted?queueMicrotask(()=>y()):(x.addEventListener("abort",y,{__proto__:null,once:!0,[o]:!0}),v=()=>{x.removeEventListener("abort",y)}),{__proto__:null,[a](){var w;(w=v)===null||w===void 0||w()}}},AbortSignalAny:l.any||function(x){if(x.length===1)return x[0];const y=new u,v=()=>y.abort();return x.forEach(w=>{p(w,"signals"),w.addEventListener("abort",v,{once:!0})}),y.signal.addEventListener("abort",()=>{x.forEach(w=>w.removeEventListener("abort",v))},{once:!0}),y.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(jb)),jb.exports}var Hp={},Nb,nA;function zh(){if(nA)return Nb;nA=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:a,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:c,String:d,StringPrototypeToUpperCase:h,StringPrototypeTrim:p}=In(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:g,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:v,ERR_UNKNOWN_SIGNAL:w}}=li(),{normalizeEncoding:E}=Ei(),{isAsyncFunction:S,isArrayBufferView:A}=Ei().types,T={};function $(ue){return ue===(ue|0)}function q(ue){return ue===ue>>>0}const D=/^[0-7]+$/,U="must be a 32-bit unsigned integer or an octal string";function J(ue,Pe,qe){if(typeof ue>"u"&&(ue=qe),typeof ue=="string"){if(c(D,ue)===null)throw new y(Pe,ue,U);ue=l(ue,8)}return F(ue,Pe),ue}const H=b((ue,Pe,qe=a,xe=s)=>{if(typeof ue!="number")throw new x(Pe,"number",ue);if(!i(ue))throw new v(Pe,"an integer",ue);if(ue<qe||ue>xe)throw new v(Pe,">= ".concat(qe," && <= ").concat(xe),ue)}),I=b((ue,Pe,qe=-2147483648,xe=2147483647)=>{if(typeof ue!="number")throw new x(Pe,"number",ue);if(!i(ue))throw new v(Pe,"an integer",ue);if(ue<qe||ue>xe)throw new v(Pe,">= ".concat(qe," && <= ").concat(xe),ue)}),F=b((ue,Pe,qe=!1)=>{if(typeof ue!="number")throw new x(Pe,"number",ue);if(!i(ue))throw new v(Pe,"an integer",ue);const xe=qe?1:0,dt=4294967295;if(ue<xe||ue>dt)throw new v(Pe,">= ".concat(xe," && <= ").concat(dt),ue)});function K(ue,Pe){if(typeof ue!="string")throw new x(Pe,"string",ue)}function X(ue,Pe,qe=void 0,xe){if(typeof ue!="number")throw new x(Pe,"number",ue);if(qe!=null&&ue<qe||xe!=null&&ue>xe||(qe!=null||xe!=null)&&o(ue))throw new v(Pe,"".concat(qe!=null?">= ".concat(qe):"").concat(qe!=null&&xe!=null?" && ":"").concat(xe!=null?"<= ".concat(xe):""),ue)}const O=b((ue,Pe,qe)=>{if(!t(qe,ue)){const dt="must be one of: "+n(r(qe,gt=>typeof gt=="string"?"'".concat(gt,"'"):d(gt)),", ");throw new y(Pe,ue,dt)}});function B(ue,Pe){if(typeof ue!="boolean")throw new x(Pe,"boolean",ue)}function P(ue,Pe,qe){return ue==null||!u(ue,Pe)?qe:ue[Pe]}const G=b((ue,Pe,qe=null)=>{const xe=P(qe,"allowArray",!1),dt=P(qe,"allowFunction",!1);if(!P(qe,"nullable",!1)&&ue===null||!xe&&e(ue)||typeof ue!="object"&&(!dt||typeof ue!="function"))throw new x(Pe,"Object",ue)}),Q=b((ue,Pe)=>{if(ue!=null&&typeof ue!="object"&&typeof ue!="function")throw new x(Pe,"a dictionary",ue)}),se=b((ue,Pe,qe=0)=>{if(!e(ue))throw new x(Pe,"Array",ue);if(ue.length<qe){const xe="must be longer than ".concat(qe);throw new y(Pe,ue,xe)}});function _e(ue,Pe){se(ue,Pe);for(let qe=0;qe<ue.length;qe++)K(ue[qe],"".concat(Pe,"[").concat(qe,"]"))}function Ne(ue,Pe){se(ue,Pe);for(let qe=0;qe<ue.length;qe++)B(ue[qe],"".concat(Pe,"[").concat(qe,"]"))}function Te(ue,Pe){se(ue,Pe);for(let qe=0;qe<ue.length;qe++){const xe=ue[qe],dt="".concat(Pe,"[").concat(qe,"]");if(xe==null)throw new x(dt,"AbortSignal",xe);Me(xe,dt)}}function W(ue,Pe="signal"){if(K(ue,Pe),T[ue]===void 0)throw T[h(ue)]!==void 0?new w(ue+" (signals must use all capital letters)"):new w(ue)}const Y=b((ue,Pe="buffer")=>{if(!A(ue))throw new x(Pe,["Buffer","TypedArray","DataView"],ue)});function ie(ue,Pe){const qe=E(Pe),xe=ue.length;if(qe==="hex"&&xe%2!==0)throw new y("encoding",Pe,"is invalid for data of length ".concat(xe))}function Oe(ue,Pe="Port",qe=!0){if(typeof ue!="number"&&typeof ue!="string"||typeof ue=="string"&&p(ue).length===0||+ue!==+ue>>>0||ue>65535||ue===0&&!qe)throw new g(Pe,ue,qe);return ue|0}const Me=b((ue,Pe)=>{if(ue!==void 0&&(ue===null||typeof ue!="object"||!("aborted"in ue)))throw new x(Pe,"AbortSignal",ue)}),Re=b((ue,Pe)=>{if(typeof ue!="function")throw new x(Pe,"Function",ue)}),te=b((ue,Pe)=>{if(typeof ue!="function"||S(ue))throw new x(Pe,"Function",ue)}),ae=b((ue,Pe)=>{if(ue!==void 0)throw new x(Pe,"undefined",ue)});function pe(ue,Pe,qe){if(!t(qe,ue))throw new x(Pe,"('".concat(n(qe,"|"),"')"),ue)}const We=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Fe(ue,Pe){if(typeof ue>"u"||!c(We,ue))throw new y(Pe,ue,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ue(ue){if(typeof ue=="string")return Fe(ue,"hints"),ue;if(e(ue)){const Pe=ue.length;let qe="";if(Pe===0)return qe;for(let xe=0;xe<Pe;xe++){const dt=ue[xe];Fe(dt,"hints"),qe+=dt,xe!==Pe-1&&(qe+=", ")}return qe}throw new y("hints",ue,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Nb={isInt32:$,isUint32:q,parseFileMode:J,validateArray:se,validateStringArray:_e,validateBooleanArray:Ne,validateAbortSignalArray:Te,validateBoolean:B,validateBuffer:Y,validateDictionary:Q,validateEncoding:ie,validateFunction:Re,validateInt32:I,validateInteger:H,validateNumber:X,validateObject:G,validateOneOf:O,validatePlainFunction:te,validatePort:Oe,validateSignalName:W,validateString:K,validateUint32:F,validateUndefined:ae,validateUnion:pe,validateAbortSignal:Me,validateLinkHeaderValue:Ue},Nb}var Up={exports:{}},Tb={exports:{}},rA;function hu(){if(rA)return Tb.exports;rA=1;var e=Tb.exports={},t,n;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch(g){t=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=i}catch(g){n=i}})();function o(g){if(t===setTimeout)return setTimeout(g,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(g,0);try{return t(g,0)}catch(x){try{return t.call(null,g,0)}catch(y){return t.call(this,g,0)}}}function s(g){if(n===clearTimeout)return clearTimeout(g);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(g);try{return n(g)}catch(x){try{return n.call(null,g)}catch(y){return n.call(this,g)}}}var a=[],l=!1,u,c=-1;function d(){!l||!u||(l=!1,u.length?a=u.concat(a):c=-1,a.length&&h())}function h(){if(!l){var g=o(d);l=!0;for(var x=a.length;x;){for(u=a,a=[];++c<x;)u&&u[c].run();c=-1,x=a.length}u=null,l=!1,s(g)}}e.nextTick=function(g){var x=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)x[y-1]=arguments[y];a.push(new p(g,x)),a.length===1&&!l&&o(h)};function p(g,x){this.fun=g,this.array=x}p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(g){return[]},e.binding=function(g){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(g){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Tb.exports}var Ib,iA;function ea(){if(iA)return Ib;iA=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=In(),r=n("nodejs.stream.destroyed"),i=n("nodejs.stream.errored"),o=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),a=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function c(P,G=!1){var Q;return!!(P&&typeof P.pipe=="function"&&typeof P.on=="function"&&(!G||typeof P.pause=="function"&&typeof P.resume=="function")&&(!P._writableState||((Q=P._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!P._writableState||P._readableState))}function d(P){var G;return!!(P&&typeof P.write=="function"&&typeof P.on=="function"&&(!P._readableState||((G=P._writableState)===null||G===void 0?void 0:G.writable)!==!1))}function h(P){return!!(P&&typeof P.pipe=="function"&&P._readableState&&typeof P.on=="function"&&typeof P.write=="function")}function p(P){return P&&(P._readableState||P._writableState||typeof P.write=="function"&&typeof P.on=="function"||typeof P.pipe=="function"&&typeof P.on=="function")}function b(P){return!!(P&&!p(P)&&typeof P.pipeThrough=="function"&&typeof P.getReader=="function"&&typeof P.cancel=="function")}function g(P){return!!(P&&!p(P)&&typeof P.getWriter=="function"&&typeof P.abort=="function")}function x(P){return!!(P&&!p(P)&&typeof P.readable=="object"&&typeof P.writable=="object")}function y(P){return b(P)||g(P)||x(P)}function v(P,G){return P==null?!1:G===!0?typeof P[e]=="function":G===!1?typeof P[t]=="function":typeof P[e]=="function"||typeof P[t]=="function"}function w(P){if(!p(P))return null;const G=P._writableState,Q=P._readableState,se=G||Q;return!!(P.destroyed||P[r]||se!=null&&se.destroyed)}function E(P){if(!d(P))return null;if(P.writableEnded===!0)return!0;const G=P._writableState;return G!=null&&G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function S(P,G){if(!d(P))return null;if(P.writableFinished===!0)return!0;const Q=P._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||G===!1&&Q.ended===!0&&Q.length===0)}function A(P){if(!c(P))return null;if(P.readableEnded===!0)return!0;const G=P._readableState;return!G||G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function T(P,G){if(!c(P))return null;const Q=P._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||G===!1&&Q.ended===!0&&Q.length===0)}function $(P){return P&&P[o]!=null?P[o]:typeof(P==null?void 0:P.readable)!="boolean"?null:w(P)?!1:c(P)&&P.readable&&!T(P)}function q(P){return P&&P[s]!=null?P[s]:typeof(P==null?void 0:P.writable)!="boolean"?null:w(P)?!1:d(P)&&P.writable&&!E(P)}function D(P,G){return p(P)?w(P)?!0:!((G==null?void 0:G.readable)!==!1&&$(P)||(G==null?void 0:G.writable)!==!1&&q(P)):null}function U(P){var G,Q;return p(P)?P.writableErrored?P.writableErrored:(G=(Q=P._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&G!==void 0?G:null:null}function J(P){var G,Q;return p(P)?P.readableErrored?P.readableErrored:(G=(Q=P._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&G!==void 0?G:null:null}function H(P){if(!p(P))return null;if(typeof P.closed=="boolean")return P.closed;const G=P._writableState,Q=P._readableState;return typeof(G==null?void 0:G.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(G==null?void 0:G.closed)||(Q==null?void 0:Q.closed):typeof P._closed=="boolean"&&I(P)?P._closed:null}function I(P){return typeof P._closed=="boolean"&&typeof P._defaultKeepAlive=="boolean"&&typeof P._removedConnection=="boolean"&&typeof P._removedContLen=="boolean"}function F(P){return typeof P._sent100=="boolean"&&I(P)}function K(P){var G;return typeof P._consuming=="boolean"&&typeof P._dumped=="boolean"&&((G=P.req)===null||G===void 0?void 0:G.upgradeOrConnect)===void 0}function X(P){if(!p(P))return null;const G=P._writableState,Q=P._readableState,se=G||Q;return!se&&F(P)||!!(se&&se.autoDestroy&&se.emitClose&&se.closed===!1)}function O(P){var G;return!!(P&&((G=P[a])!==null&&G!==void 0?G:P.readableDidRead||P.readableAborted))}function B(P){var G,Q,se,_e,Ne,Te,W,Y,ie,Oe;return!!(P&&((G=(Q=(se=(_e=(Ne=(Te=P[i])!==null&&Te!==void 0?Te:P.readableErrored)!==null&&Ne!==void 0?Ne:P.writableErrored)!==null&&_e!==void 0?_e:(W=P._readableState)===null||W===void 0?void 0:W.errorEmitted)!==null&&se!==void 0?se:(Y=P._writableState)===null||Y===void 0?void 0:Y.errorEmitted)!==null&&Q!==void 0?Q:(ie=P._readableState)===null||ie===void 0?void 0:ie.errored)!==null&&G!==void 0?G:!((Oe=P._writableState)===null||Oe===void 0)&&Oe.errored))}return Ib={isDestroyed:w,kIsDestroyed:r,isDisturbed:O,kIsDisturbed:a,isErrored:B,kIsErrored:i,isReadable:$,kIsReadable:o,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:H,isDuplexNodeStream:h,isFinished:D,isIterable:v,isReadableNodeStream:c,isReadableStream:b,isReadableEnded:A,isReadableFinished:T,isReadableErrored:J,isNodeStream:p,isWebStream:y,isWritable:q,isWritableNodeStream:d,isWritableStream:g,isWritableEnded:E,isWritableFinished:S,isWritableErrored:U,isServerRequest:K,isServerResponse:F,willEmitClose:X,isTransformStream:x},Ib}var oA;function tl(){if(oA)return Up.exports;oA=1;const e=hu(),{AbortError:t,codes:n}=li(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=n,{kEmptyObject:o,once:s}=Ei(),{validateAbortSignal:a,validateFunction:l,validateObject:u,validateBoolean:c}=zh(),{Promise:d,PromisePrototypeThen:h,SymbolDispose:p}=In(),{isClosed:b,isReadable:g,isReadableNodeStream:x,isReadableStream:y,isReadableFinished:v,isReadableErrored:w,isWritable:E,isWritableNodeStream:S,isWritableStream:A,isWritableFinished:T,isWritableErrored:$,isNodeStream:q,willEmitClose:D,kIsClosedPromise:U}=ea();let J;function H(O){return O.setHeader&&typeof O.abort=="function"}const I=()=>{};function F(O,B,P){var G,Q;if(arguments.length===2?(P=B,B=o):B==null?B=o:u(B,"options"),l(P,"callback"),a(B.signal,"options.signal"),P=s(P),y(O)||A(O))return K(O,B,P);if(!q(O))throw new r("stream",["ReadableStream","WritableStream","Stream"],O);const se=(G=B.readable)!==null&&G!==void 0?G:x(O),_e=(Q=B.writable)!==null&&Q!==void 0?Q:S(O),Ne=O._writableState,Te=O._readableState,W=()=>{O.writable||Oe()};let Y=D(O)&&x(O)===se&&S(O)===_e,ie=T(O,!1);const Oe=()=>{ie=!0,O.destroyed&&(Y=!1),!(Y&&(!O.readable||se))&&(!se||Me)&&P.call(O)};let Me=v(O,!1);const Re=()=>{Me=!0,O.destroyed&&(Y=!1),!(Y&&(!O.writable||_e))&&(!_e||ie)&&P.call(O)},te=ue=>{P.call(O,ue)};let ae=b(O);const pe=()=>{ae=!0;const ue=$(O)||w(O);if(ue&&typeof ue!="boolean")return P.call(O,ue);if(se&&!Me&&x(O,!0)&&!v(O,!1))return P.call(O,new i);if(_e&&!ie&&!T(O,!1))return P.call(O,new i);P.call(O)},We=()=>{ae=!0;const ue=$(O)||w(O);if(ue&&typeof ue!="boolean")return P.call(O,ue);P.call(O)},Fe=()=>{O.req.on("finish",Oe)};H(O)?(O.on("complete",Oe),Y||O.on("abort",pe),O.req?Fe():O.on("request",Fe)):_e&&!Ne&&(O.on("end",W),O.on("close",W)),!Y&&typeof O.aborted=="boolean"&&O.on("aborted",pe),O.on("end",Re),O.on("finish",Oe),B.error!==!1&&O.on("error",te),O.on("close",pe),ae?e.nextTick(pe):Ne!=null&&Ne.errorEmitted||Te!=null&&Te.errorEmitted?Y||e.nextTick(We):(!se&&(!Y||g(O))&&(ie||E(O)===!1)||!_e&&(!Y||E(O))&&(Me||g(O)===!1)||Te&&O.req&&O.aborted)&&e.nextTick(We);const Ue=()=>{P=I,O.removeListener("aborted",pe),O.removeListener("complete",Oe),O.removeListener("abort",pe),O.removeListener("request",Fe),O.req&&O.req.removeListener("finish",Oe),O.removeListener("end",W),O.removeListener("close",W),O.removeListener("finish",Oe),O.removeListener("end",Re),O.removeListener("error",te),O.removeListener("close",pe)};if(B.signal&&!ae){const ue=()=>{const Pe=P;Ue(),Pe.call(O,new t(void 0,{cause:B.signal.reason}))};if(B.signal.aborted)e.nextTick(ue);else{J=J||Ei().addAbortListener;const Pe=J(B.signal,ue),qe=P;P=s((...xe)=>{Pe[p](),qe.apply(O,xe)})}}return Ue}function K(O,B,P){let G=!1,Q=I;if(B.signal)if(Q=()=>{G=!0,P.call(O,new t(void 0,{cause:B.signal.reason}))},B.signal.aborted)e.nextTick(Q);else{J=J||Ei().addAbortListener;const _e=J(B.signal,Q),Ne=P;P=s((...Te)=>{_e[p](),Ne.apply(O,Te)})}const se=(..._e)=>{G||e.nextTick(()=>P.apply(O,_e))};return h(O[U].promise,se,se),I}function X(O,B){var P;let G=!1;return B===null&&(B=o),(P=B)!==null&&P!==void 0&&P.cleanup&&(c(B.cleanup,"cleanup"),G=B.cleanup),new d((Q,se)=>{const _e=F(O,B,Ne=>{G&&_e(),Ne?se(Ne):Q()})})}return Up.exports=F,Up.exports.finished=X,Up.exports}var Pb,sA;function Jc(){if(sA)return Pb;sA=1;const e=hu(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=li(),{Symbol:i}=In(),{kIsDestroyed:o,isDestroyed:s,isFinished:a,isServerRequest:l}=ea(),u=i("kDestroy"),c=i("kConstruct");function d(D,U,J){D&&(D.stack,U&&!U.errored&&(U.errored=D),J&&!J.errored&&(J.errored=D))}function h(D,U){const J=this._readableState,H=this._writableState,I=H||J;return H!=null&&H.destroyed||J!=null&&J.destroyed?(typeof U=="function"&&U(),this):(d(D,H,J),H&&(H.destroyed=!0),J&&(J.destroyed=!0),I.constructed?p(this,D,U):this.once(u,function(F){p(this,t(F,D),U)}),this)}function p(D,U,J){let H=!1;function I(F){if(H)return;H=!0;const K=D._readableState,X=D._writableState;d(F,X,K),X&&(X.closed=!0),K&&(K.closed=!0),typeof J=="function"&&J(F),F?e.nextTick(b,D,F):e.nextTick(g,D)}try{D._destroy(U||null,I)}catch(F){I(F)}}function b(D,U){x(D,U),g(D)}function g(D){const U=D._readableState,J=D._writableState;J&&(J.closeEmitted=!0),U&&(U.closeEmitted=!0),(J!=null&&J.emitClose||U!=null&&U.emitClose)&&D.emit("close")}function x(D,U){const J=D._readableState,H=D._writableState;H!=null&&H.errorEmitted||J!=null&&J.errorEmitted||(H&&(H.errorEmitted=!0),J&&(J.errorEmitted=!0),D.emit("error",U))}function y(){const D=this._readableState,U=this._writableState;D&&(D.constructed=!0,D.closed=!1,D.closeEmitted=!1,D.destroyed=!1,D.errored=null,D.errorEmitted=!1,D.reading=!1,D.ended=D.readable===!1,D.endEmitted=D.readable===!1),U&&(U.constructed=!0,U.destroyed=!1,U.closed=!1,U.closeEmitted=!1,U.errored=null,U.errorEmitted=!1,U.finalCalled=!1,U.prefinished=!1,U.ended=U.writable===!1,U.ending=U.writable===!1,U.finished=U.writable===!1)}function v(D,U,J){const H=D._readableState,I=D._writableState;if(I!=null&&I.destroyed||H!=null&&H.destroyed)return this;H!=null&&H.autoDestroy||I!=null&&I.autoDestroy?D.destroy(U):U&&(U.stack,I&&!I.errored&&(I.errored=U),H&&!H.errored&&(H.errored=U),J?e.nextTick(x,D,U):x(D,U))}function w(D,U){if(typeof D._construct!="function")return;const J=D._readableState,H=D._writableState;J&&(J.constructed=!1),H&&(H.constructed=!1),D.once(c,U),!(D.listenerCount(c)>1)&&e.nextTick(E,D)}function E(D){let U=!1;function J(H){if(U){v(D,H!=null?H:new n);return}U=!0;const I=D._readableState,F=D._writableState,K=F||I;I&&(I.constructed=!0),F&&(F.constructed=!0),K.destroyed?D.emit(u,H):H?v(D,H,!0):e.nextTick(S,D)}try{D._construct(H=>{e.nextTick(J,H)})}catch(H){e.nextTick(J,H)}}function S(D){D.emit(c)}function A(D){return(D==null?void 0:D.setHeader)&&typeof D.abort=="function"}function T(D){D.emit("close")}function $(D,U){D.emit("error",U),e.nextTick(T,D)}function q(D,U){!D||s(D)||(!U&&!a(D)&&(U=new r),l(D)?(D.socket=null,D.destroy(U)):A(D)?D.abort():A(D.req)?D.req.abort():typeof D.destroy=="function"?D.destroy(U):typeof D.close=="function"?D.close():U?e.nextTick($,D,U):e.nextTick(T,D),D.destroyed||(D[o]=!0))}return Pb={construct:w,destroyer:q,destroy:h,undestroy:y,errorOrDestroy:v},Pb}var Ob,aA;function zE(){if(aA)return Ob;aA=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=In(),{EventEmitter:n}=Av();function r(o){n.call(this,o)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(o,s){const a=this;function l(g){o.writable&&o.write(g)===!1&&a.pause&&a.pause()}a.on("data",l);function u(){a.readable&&a.resume&&a.resume()}o.on("drain",u),!o._isStdio&&(!s||s.end!==!1)&&(a.on("end",d),a.on("close",h));let c=!1;function d(){c||(c=!0,o.end())}function h(){c||(c=!0,typeof o.destroy=="function"&&o.destroy())}function p(g){b(),n.listenerCount(this,"error")===0&&this.emit("error",g)}i(a,"error",p),i(o,"error",p);function b(){a.removeListener("data",l),o.removeListener("drain",u),a.removeListener("end",d),a.removeListener("close",h),a.removeListener("error",p),o.removeListener("error",p),a.removeListener("end",b),a.removeListener("close",b),o.removeListener("close",b)}return a.on("end",b),a.on("close",b),o.on("close",b),o.emit("pipe",a),o};function i(o,s,a){if(typeof o.prependListener=="function")return o.prependListener(s,a);!o._events||!o._events[s]?o.on(s,a):e(o._events[s])?o._events[s].unshift(a):o._events[s]=[a,o._events[s]]}return Ob={Stream:r,prependListener:i},Ob}var $b={exports:{}},lA;function Rv(){return lA||(lA=1,function(e){const{SymbolDispose:t}=In(),{AbortError:n,codes:r}=li(),{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=ea(),a=tl(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const c=(d,h)=>{if(typeof d!="object"||!("aborted"in d))throw new l(h,"AbortSignal",d)};e.exports.addAbortSignal=function(h,p){if(c(h,"signal"),!i(p)&&!o(p))throw new l("stream",["ReadableStream","WritableStream","Stream"],p);return e.exports.addAbortSignalNoValidate(h,p)},e.exports.addAbortSignalNoValidate=function(d,h){if(typeof d!="object"||!("aborted"in d))return h;const p=i(h)?()=>{h.destroy(new n(void 0,{cause:d.reason}))}:()=>{h[s](new n(void 0,{cause:d.reason}))};if(d.aborted)p();else{u=u||Ei().addAbortListener;const b=u(d,p);a(h,b[t])}return h}}($b)),$b.exports}var Mb,uA;function Joe(){if(uA)return Mb;uA=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=In(),{Buffer:i}=el(),{inspect:o}=Ei();return Mb=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const l={data:a,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(a){const l={data:a,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=a+l.data;return u}concat(a){if(this.length===0)return i.alloc(0);const l=i.allocUnsafe(a>>>0);let u=this.head,c=0;for(;u;)n(l,u.data,c),c+=u.data.length,u=u.next;return l}consume(a,l){const u=this.head.data;if(a<u.length){const c=u.slice(0,a);return this.head.data=u.slice(a),c}return a===u.length?this.shift():l?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[t](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let l="",u=this.head,c=0;do{const d=u.data;if(a>d.length)l+=d,a-=d.length;else{a===d.length?(l+=d,++c,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(d,0,a),this.head=u,u.data=e(d,a));break}++c}while((u=u.next)!==null);return this.length-=c,l}_getBuffer(a){const l=i.allocUnsafe(a),u=a;let c=this.head,d=0;do{const h=c.data;if(a>h.length)n(l,h,u-a),a-=h.length;else{a===h.length?(n(l,h,u-a),++d,c.next?this.head=c.next:this.head=this.tail=null):(n(l,new r(h.buffer,h.byteOffset,a),u-a),this.head=c,c.data=h.slice(a));break}++d}while((c=c.next)!==null);return this.length-=d,l}[Symbol.for("nodejs.util.inspect.custom")](a,l){return o(this,{...l,depth:0,customInspect:!1})}},Mb}var Db,cA;function Nv(){if(cA)return Db;cA=1;const{MathFloor:e,NumberIsInteger:t}=In(),{validateInteger:n}=zh(),{ERR_INVALID_ARG_VALUE:r}=li().codes;let i=16*1024,o=16;function s(c,d,h){return c.highWaterMark!=null?c.highWaterMark:d?c[h]:null}function a(c){return c?o:i}function l(c,d){n(d,"value",0),c?o=d:i=d}function u(c,d,h,p){const b=s(d,p,h);if(b!=null){if(!t(b)||b<0){const g=p?"options.".concat(h):"options.highWaterMark";throw new r(g,b)}return e(b)}return a(c.objectMode)}return Db={getHighWaterMark:u,getDefaultHighWaterMark:a,setDefaultHighWaterMark:l},Db}var Lb={},Wp={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var dA;function Qoe(){return dA||(dA=1,function(e,t){var n=el(),r=n.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o);function o(s,a,l){return r(s,a,l)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(Wp,Wp.exports)),Wp.exports}var fA;function Zoe(){if(fA)return Lb;fA=1;var e=Qoe().Buffer,t=e.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function r(y){var v=n(y);if(typeof v!="string"&&(e.isEncoding===t||!t(y)))throw new Error("Unknown encoding: "+y);return v||y}Lb.StringDecoder=i;function i(y){this.encoding=r(y);var v;switch(this.encoding){case"utf16le":this.text=d,this.end=h,v=4;break;case"utf8":this.fillLast=l,v=4;break;case"base64":this.text=p,this.end=b,v=3;break;default:this.write=g,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}i.prototype.write=function(y){if(y.length===0)return"";var v,w;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<y.length?v?v+this.text(y,w):this.text(y,w):v||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function s(y,v,w){var E=v.length-1;if(E<w)return 0;var S=o(v[E]);return S>=0?(S>0&&(y.lastNeed=S-1),S):--E<w||S===-2?0:(S=o(v[E]),S>=0?(S>0&&(y.lastNeed=S-2),S):--E<w||S===-2?0:(S=o(v[E]),S>=0?(S>0&&(S===2?S=0:y.lastNeed=S-3),S):0))}function a(y,v,w){if((v[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,""}}function l(y){var v=this.lastTotal-this.lastNeed,w=a(this,y);if(w!==void 0)return w;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function u(y,v){var w=s(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=w;var E=y.length-(w-this.lastNeed);return y.copy(this.lastChar,0,E),y.toString("utf8",v,E)}function c(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"":v}function d(y,v){if((y.length-v)%2===0){var w=y.toString("utf16le",v);if(w){var E=w.charCodeAt(w.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function h(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,w)}return v}function p(y,v){var w=(y.length-v)%3;return w===0?y.toString("base64",v):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-w))}function b(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function g(y){return y.toString(this.encoding)}function x(y){return y&&y.length?this.write(y):""}return Lb}var Bb,hA;function n$(){if(hA)return Bb;hA=1;const e=hu(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=In(),{Buffer:i}=el(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:s}=li().codes;function a(l,u,c){let d;if(typeof u=="string"||u instanceof i)return new l({objectMode:!0,...c,read(){this.push(u),this.push(null)}});let h;if(u&&u[n])h=!0,d=u[n]();else if(u&&u[r])h=!1,d=u[r]();else throw new o("iterable",["Iterable"],u);const p=new l({objectMode:!0,highWaterMark:1,...c});let b=!1;p._read=function(){b||(b=!0,x())},p._destroy=function(y,v){t(g(y),()=>e.nextTick(v,y),w=>e.nextTick(v,w||y))};async function g(y){const v=y!=null,w=typeof d.throw=="function";if(v&&w){const{value:E,done:S}=await d.throw(y);if(await E,S)return}if(typeof d.return=="function"){const{value:E}=await d.return();await E}}async function x(){for(;;){try{const{value:y,done:v}=h?await d.next():d.next();if(v)p.push(null);else{const w=y&&typeof y.then=="function"?await y:y;if(w===null)throw b=!1,new s;if(p.push(w))continue;b=!1}}catch(y){p.destroy(y)}break}}return p}return Bb=a,Bb}var Fb,pA;function Tv(){if(pA)return Fb;pA=1;const e=hu(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:l,SafeSet:u,SymbolAsyncDispose:c,SymbolAsyncIterator:d,Symbol:h}=In();Fb=xe,xe.ReadableState=qe;const{EventEmitter:p}=Av(),{Stream:b,prependListener:g}=zE(),{Buffer:x}=el(),{addAbortSignal:y}=Rv(),v=tl();let w=Ei().debuglog("stream",ee=>{w=ee});const E=Joe(),S=Jc(),{getHighWaterMark:A,getDefaultHighWaterMark:T}=Nv(),{aggregateTwoErrors:$,codes:{ERR_INVALID_ARG_TYPE:q,ERR_METHOD_NOT_IMPLEMENTED:D,ERR_OUT_OF_RANGE:U,ERR_STREAM_PUSH_AFTER_EOF:J,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:H},AbortError:I}=li(),{validateObject:F}=zh(),K=h("kPaused"),{StringDecoder:X}=Zoe(),O=n$();a(xe.prototype,b.prototype),a(xe,b);const B=()=>{},{errorOrDestroy:P}=S,G=1,Q=2,se=4,_e=8,Ne=16,Te=32,W=64,Y=128,ie=256,Oe=512,Me=1024,Re=2048,te=4096,ae=8192,pe=16384,We=32768,Fe=65536,Ue=1<<17,ue=1<<18;function Pe(ee){return{enumerable:!1,get(){return(this.state&ee)!==0},set(oe){oe?this.state|=ee:this.state&=~ee}}}o(qe.prototype,{objectMode:Pe(G),ended:Pe(Q),endEmitted:Pe(se),reading:Pe(_e),constructed:Pe(Ne),sync:Pe(Te),needReadable:Pe(W),emittedReadable:Pe(Y),readableListening:Pe(ie),resumeScheduled:Pe(Oe),errorEmitted:Pe(Me),emitClose:Pe(Re),autoDestroy:Pe(te),destroyed:Pe(ae),closed:Pe(pe),closeEmitted:Pe(We),multiAwaitDrain:Pe(Fe),readingMore:Pe(Ue),dataEmitted:Pe(ue)});function qe(ee,oe,et){typeof et!="boolean"&&(et=oe instanceof Ys()),this.state=Re|te|Ne|Te,ee&&ee.objectMode&&(this.state|=G),et&&ee&&ee.readableObjectMode&&(this.state|=G),this.highWaterMark=ee?A(this,ee,"readableHighWaterMark",et):T(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[K]=null,ee&&ee.emitClose===!1&&(this.state&=-2049),ee&&ee.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ee&&ee.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ee&&ee.encoding&&(this.decoder=new X(ee.encoding),this.encoding=ee.encoding)}function xe(ee){if(!(this instanceof xe))return new xe(ee);const oe=this instanceof Ys();this._readableState=new qe(ee,this,oe),ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy),typeof ee.construct=="function"&&(this._construct=ee.construct),ee.signal&&!oe&&y(ee.signal,this)),b.call(this,ee),S.construct(this,()=>{this._readableState.needReadable&&de(this,this._readableState)})}xe.prototype.destroy=S.destroy,xe.prototype._undestroy=S.undestroy,xe.prototype._destroy=function(ee,oe){oe(ee)},xe.prototype[p.captureRejectionSymbol]=function(ee){this.destroy(ee)},xe.prototype[c]=function(){let ee;return this.destroyed||(ee=this.readableEnded?null:new I,this.destroy(ee)),new l((oe,et)=>v(this,it=>it&&it!==ee?et(it):oe(null)))},xe.prototype.push=function(ee,oe){return dt(this,ee,oe,!1)},xe.prototype.unshift=function(ee,oe){return dt(this,ee,oe,!0)};function dt(ee,oe,et,it){w("readableAddChunk",oe);const vt=ee._readableState;let Dt;if(vt.state&G||(typeof oe=="string"?(et=et||vt.defaultEncoding,vt.encoding!==et&&(it&&vt.encoding?oe=x.from(oe,et).toString(vt.encoding):(oe=x.from(oe,et),et=""))):oe instanceof x?et="":b._isUint8Array(oe)?(oe=b._uint8ArrayToBuffer(oe),et=""):oe!=null&&(Dt=new q("chunk",["string","Buffer","Uint8Array"],oe))),Dt)P(ee,Dt);else if(oe===null)vt.state&=-9,j(ee,vt);else if(vt.state&G||oe&&oe.length>0)if(it)if(vt.state&se)P(ee,new H);else{if(vt.destroyed||vt.errored)return!1;gt(ee,vt,oe,!0)}else if(vt.ended)P(ee,new J);else{if(vt.destroyed||vt.errored)return!1;vt.state&=-9,vt.decoder&&!et?(oe=vt.decoder.write(oe),vt.objectMode||oe.length!==0?gt(ee,vt,oe,!1):de(ee,vt)):gt(ee,vt,oe,!1)}else it||(vt.state&=-9,de(ee,vt));return!vt.ended&&(vt.length<vt.highWaterMark||vt.length===0)}function gt(ee,oe,et,it){oe.flowing&&oe.length===0&&!oe.sync&&ee.listenerCount("data")>0?(oe.state&Fe?oe.awaitDrainWriters.clear():oe.awaitDrainWriters=null,oe.dataEmitted=!0,ee.emit("data",et)):(oe.length+=oe.objectMode?1:et.length,it?oe.buffer.unshift(et):oe.buffer.push(et),oe.state&W&&R(ee)),de(ee,oe)}xe.prototype.isPaused=function(){const ee=this._readableState;return ee[K]===!0||ee.flowing===!1},xe.prototype.setEncoding=function(ee){const oe=new X(ee);this._readableState.decoder=oe,this._readableState.encoding=this._readableState.decoder.encoding;const et=this._readableState.buffer;let it="";for(const vt of et)it+=oe.write(vt);return et.clear(),it!==""&&et.push(it),this._readableState.length=it.length,this};const ft=1073741824;function At(ee){if(ee>ft)throw new U("size","<= 1GiB",ee);return ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++,ee}function L(ee,oe){return ee<=0||oe.length===0&&oe.ended?0:oe.state&G?1:r(ee)?oe.flowing&&oe.length?oe.buffer.first().length:oe.length:ee<=oe.length?ee:oe.ended?oe.length:0}xe.prototype.read=function(ee){w("read",ee),ee===void 0?ee=NaN:n(ee)||(ee=i(ee,10));const oe=this._readableState,et=ee;if(ee>oe.highWaterMark&&(oe.highWaterMark=At(ee)),ee!==0&&(oe.state&=-129),ee===0&&oe.needReadable&&((oe.highWaterMark!==0?oe.length>=oe.highWaterMark:oe.length>0)||oe.ended))return w("read: emitReadable",oe.length,oe.ended),oe.length===0&&oe.ended?$o(this):R(this),null;if(ee=L(ee,oe),ee===0&&oe.ended)return oe.length===0&&$o(this),null;let it=(oe.state&W)!==0;if(w("need readable",it),(oe.length===0||oe.length-ee<oe.highWaterMark)&&(it=!0,w("length less than watermark",it)),oe.ended||oe.reading||oe.destroyed||oe.errored||!oe.constructed)it=!1,w("reading, ended or constructing",it);else if(it){w("do read"),oe.state|=_e|Te,oe.length===0&&(oe.state|=W);try{this._read(oe.highWaterMark)}catch(Dt){P(this,Dt)}oe.state&=-33,oe.reading||(ee=L(et,oe))}let vt;return ee>0?vt=ki(ee,oe):vt=null,vt===null?(oe.needReadable=oe.length<=oe.highWaterMark,ee=0):(oe.length-=ee,oe.multiAwaitDrain?oe.awaitDrainWriters.clear():oe.awaitDrainWriters=null),oe.length===0&&(oe.ended||(oe.needReadable=!0),et!==ee&&oe.ended&&$o(this)),vt!==null&&!oe.errorEmitted&&!oe.closeEmitted&&(oe.dataEmitted=!0,this.emit("data",vt)),vt};function j(ee,oe){if(w("onEofChunk"),!oe.ended){if(oe.decoder){const et=oe.decoder.end();et&&et.length&&(oe.buffer.push(et),oe.length+=oe.objectMode?1:et.length)}oe.ended=!0,oe.sync?R(ee):(oe.needReadable=!1,oe.emittedReadable=!0,Z(ee))}}function R(ee){const oe=ee._readableState;w("emitReadable",oe.needReadable,oe.emittedReadable),oe.needReadable=!1,oe.emittedReadable||(w("emitReadable",oe.flowing),oe.emittedReadable=!0,e.nextTick(Z,ee))}function Z(ee){const oe=ee._readableState;w("emitReadable_",oe.destroyed,oe.length,oe.ended),!oe.destroyed&&!oe.errored&&(oe.length||oe.ended)&&(ee.emit("readable"),oe.emittedReadable=!1),oe.needReadable=!oe.flowing&&!oe.ended&&oe.length<=oe.highWaterMark,Pt(ee)}function de(ee,oe){!oe.readingMore&&oe.constructed&&(oe.readingMore=!0,e.nextTick(Ae,ee,oe))}function Ae(ee,oe){for(;!oe.reading&&!oe.ended&&(oe.length<oe.highWaterMark||oe.flowing&&oe.length===0);){const et=oe.length;if(w("maybeReadMore read 0"),ee.read(0),et===oe.length)break}oe.readingMore=!1}xe.prototype._read=function(ee){throw new D("_read()")},xe.prototype.pipe=function(ee,oe){const et=this,it=this._readableState;it.pipes.length===1&&(it.multiAwaitDrain||(it.multiAwaitDrain=!0,it.awaitDrainWriters=new u(it.awaitDrainWriters?[it.awaitDrainWriters]:[]))),it.pipes.push(ee),w("pipe count=%d opts=%j",it.pipes.length,oe);const Dt=(!oe||oe.end!==!1)&&ee!==e.stdout&&ee!==e.stderr?gs:co;it.endEmitted?e.nextTick(Dt):et.once("end",Dt),ee.on("unpipe",Zt);function Zt(qn,Cr){w("onunpipe"),qn===et&&Cr&&Cr.hasUnpiped===!1&&(Cr.hasUnpiped=!0,Do())}function gs(){w("onend"),ee.end()}let kr,uo=!1;function Do(){w("cleanup"),ee.removeListener("close",gr),ee.removeListener("finish",Ci),kr&&ee.removeListener("drain",kr),ee.removeListener("error",Yr),ee.removeListener("unpipe",Zt),et.removeListener("end",gs),et.removeListener("end",co),et.removeListener("data",Gr),uo=!0,kr&&it.awaitDrainWriters&&(!ee._writableState||ee._writableState.needDrain)&&kr()}function na(){uo||(it.pipes.length===1&&it.pipes[0]===ee?(w("false write response, pause",0),it.awaitDrainWriters=ee,it.multiAwaitDrain=!1):it.pipes.length>1&&it.pipes.includes(ee)&&(w("false write response, pause",it.awaitDrainWriters.size),it.awaitDrainWriters.add(ee)),et.pause()),kr||(kr=He(et,ee),ee.on("drain",kr))}et.on("data",Gr);function Gr(qn){w("ondata");const Cr=ee.write(qn);w("dest.write",Cr),Cr===!1&&na()}function Yr(qn){if(w("onerror",qn),co(),ee.removeListener("error",Yr),ee.listenerCount("error")===0){const Cr=ee._writableState||ee._readableState;Cr&&!Cr.errorEmitted?P(ee,qn):ee.emit("error",qn)}}g(ee,"error",Yr);function gr(){ee.removeListener("finish",Ci),co()}ee.once("close",gr);function Ci(){w("onfinish"),ee.removeListener("close",gr),co()}ee.once("finish",Ci);function co(){w("unpipe"),et.unpipe(ee)}return ee.emit("pipe",et),ee.writableNeedDrain===!0?na():it.flowing||(w("pipe resume"),et.resume()),ee};function He(ee,oe){return function(){const it=ee._readableState;it.awaitDrainWriters===oe?(w("pipeOnDrain",1),it.awaitDrainWriters=null):it.multiAwaitDrain&&(w("pipeOnDrain",it.awaitDrainWriters.size),it.awaitDrainWriters.delete(oe)),(!it.awaitDrainWriters||it.awaitDrainWriters.size===0)&&ee.listenerCount("data")&&ee.resume()}}xe.prototype.unpipe=function(ee){const oe=this._readableState,et={hasUnpiped:!1};if(oe.pipes.length===0)return this;if(!ee){const vt=oe.pipes;oe.pipes=[],this.pause();for(let Dt=0;Dt<vt.length;Dt++)vt[Dt].emit("unpipe",this,{hasUnpiped:!1});return this}const it=t(oe.pipes,ee);return it===-1?this:(oe.pipes.splice(it,1),oe.pipes.length===0&&this.pause(),ee.emit("unpipe",this,et),this)},xe.prototype.on=function(ee,oe){const et=b.prototype.on.call(this,ee,oe),it=this._readableState;return ee==="data"?(it.readableListening=this.listenerCount("readable")>0,it.flowing!==!1&&this.resume()):ee==="readable"&&!it.endEmitted&&!it.readableListening&&(it.readableListening=it.needReadable=!0,it.flowing=!1,it.emittedReadable=!1,w("on readable",it.length,it.reading),it.length?R(this):it.reading||e.nextTick(Wt,this)),et},xe.prototype.addListener=xe.prototype.on,xe.prototype.removeListener=function(ee,oe){const et=b.prototype.removeListener.call(this,ee,oe);return ee==="readable"&&e.nextTick(Tt,this),et},xe.prototype.off=xe.prototype.removeListener,xe.prototype.removeAllListeners=function(ee){const oe=b.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&e.nextTick(Tt,this),oe};function Tt(ee){const oe=ee._readableState;oe.readableListening=ee.listenerCount("readable")>0,oe.resumeScheduled&&oe[K]===!1?oe.flowing=!0:ee.listenerCount("data")>0?ee.resume():oe.readableListening||(oe.flowing=null)}function Wt(ee){w("readable nexttick read 0"),ee.read(0)}xe.prototype.resume=function(){const ee=this._readableState;return ee.flowing||(w("resume"),ee.flowing=!ee.readableListening,Ze(this,ee)),ee[K]=!1,this};function Ze(ee,oe){oe.resumeScheduled||(oe.resumeScheduled=!0,e.nextTick(Mt,ee,oe))}function Mt(ee,oe){w("resume",oe.reading),oe.reading||ee.read(0),oe.resumeScheduled=!1,ee.emit("resume"),Pt(ee),oe.flowing&&!oe.reading&&ee.read(0)}xe.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[K]=!0,this};function Pt(ee){const oe=ee._readableState;for(w("flow",oe.flowing);oe.flowing&&ee.read()!==null;);}xe.prototype.wrap=function(ee){let oe=!1;ee.on("data",it=>{!this.push(it)&&ee.pause&&(oe=!0,ee.pause())}),ee.on("end",()=>{this.push(null)}),ee.on("error",it=>{P(this,it)}),ee.on("close",()=>{this.destroy()}),ee.on("destroy",()=>{this.destroy()}),this._read=()=>{oe&&ee.resume&&(oe=!1,ee.resume())};const et=s(ee);for(let it=1;it<et.length;it++){const vt=et[it];this[vt]===void 0&&typeof ee[vt]=="function"&&(this[vt]=ee[vt].bind(ee))}return this},xe.prototype[d]=function(){return Si(this)},xe.prototype.iterator=function(ee){return ee!==void 0&&F(ee,"options"),Si(this,ee)};function Si(ee,oe){typeof ee.read!="function"&&(ee=xe.wrap(ee,{objectMode:!0}));const et=ot(ee,oe);return et.stream=ee,et}async function*ot(ee,oe){let et=B;function it(Zt){this===ee?(et(),et=B):et=Zt}ee.on("readable",it);let vt;const Dt=v(ee,{writable:!1},Zt=>{vt=Zt?$(vt,Zt):null,et(),et=B});try{for(;;){const Zt=ee.destroyed?null:ee.read();if(Zt!==null)yield Zt;else{if(vt)throw vt;if(vt===null)return;await new l(it)}}}catch(Zt){throw vt=$(vt,Zt),vt}finally{(vt||(oe==null?void 0:oe.destroyOnReturn)!==!1)&&(vt===void 0||ee._readableState.autoDestroy)?S.destroyer(ee,null):(ee.off("readable",it),Dt())}}o(xe.prototype,{readable:{__proto__:null,get(){const ee=this._readableState;return!!ee&&ee.readable!==!1&&!ee.destroyed&&!ee.errorEmitted&&!ee.endEmitted},set(ee){this._readableState&&(this._readableState.readable=!!ee)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ee){this._readableState&&(this._readableState.destroyed=ee)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(qe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[K]!==!1},set(ee){this[K]=!!ee}}}),xe._fromList=ki;function ki(ee,oe){if(oe.length===0)return null;let et;return oe.objectMode?et=oe.buffer.shift():!ee||ee>=oe.length?(oe.decoder?et=oe.buffer.join(""):oe.buffer.length===1?et=oe.buffer.first():et=oe.buffer.concat(oe.length),oe.buffer.clear()):et=oe.buffer.consume(ee,oe.decoder),et}function $o(ee){const oe=ee._readableState;w("endReadable",oe.endEmitted),oe.endEmitted||(oe.ended=!0,e.nextTick(Mo,oe,ee))}function Mo(ee,oe){if(w("endReadableNT",ee.endEmitted,ee.length),!ee.errored&&!ee.closeEmitted&&!ee.endEmitted&&ee.length===0){if(ee.endEmitted=!0,oe.emit("end"),oe.writable&&oe.allowHalfOpen===!1)e.nextTick(ps,oe);else if(ee.autoDestroy){const et=oe._writableState;(!et||et.autoDestroy&&(et.finished||et.writable===!1))&&oe.destroy()}}}function ps(ee){ee.writable&&!ee.writableEnded&&!ee.destroyed&&ee.end()}xe.from=function(ee,oe){return O(xe,ee,oe)};let lo;function ta(){return lo===void 0&&(lo={}),lo}return xe.fromWeb=function(ee,oe){return ta().newStreamReadableFromReadableStream(ee,oe)},xe.toWeb=function(ee,oe){return ta().newReadableStreamFromStreamReadable(ee,oe)},xe.wrap=function(ee,oe){var et,it;return new xe({objectMode:(et=(it=ee.readableObjectMode)!==null&&it!==void 0?it:ee.objectMode)!==null&&et!==void 0?et:!0,...oe,destroy(vt,Dt){S.destroyer(ee,vt),Dt(vt)}}).wrap(ee)},Fb}var zb,gA;function HE(){if(gA)return zb;gA=1;const e=hu(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:l,SymbolHasInstance:u}=In();zb=F,F.WritableState=H;const{EventEmitter:c}=Av(),d=zE().Stream,{Buffer:h}=el(),p=Jc(),{addAbortSignal:b}=Rv(),{getHighWaterMark:g,getDefaultHighWaterMark:x}=Nv(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:$,ERR_UNKNOWN_ENCODING:q}=li().codes,{errorOrDestroy:D}=p;s(F.prototype,d.prototype),s(F,d);function U(){}const J=l("kOnFinished");function H(te,ae,pe){typeof pe!="boolean"&&(pe=ae instanceof Ys()),this.objectMode=!!(te&&te.objectMode),pe&&(this.objectMode=this.objectMode||!!(te&&te.writableObjectMode)),this.highWaterMark=te?g(this,te,"writableHighWaterMark",pe):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const We=!!(te&&te.decodeStrings===!1);this.decodeStrings=!We,this.defaultEncoding=te&&te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=P.bind(void 0,ae),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!te||te.emitClose!==!1,this.autoDestroy=!te||te.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function I(te){te.buffered=[],te.bufferedIndex=0,te.allBuffers=!0,te.allNoop=!0}H.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(H.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function F(te){const ae=this instanceof Ys();if(!ae&&!r(F,this))return new F(te);this._writableState=new H(te,this,ae),te&&(typeof te.write=="function"&&(this._write=te.write),typeof te.writev=="function"&&(this._writev=te.writev),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.final=="function"&&(this._final=te.final),typeof te.construct=="function"&&(this._construct=te.construct),te.signal&&b(te.signal,this)),d.call(this,te),p.construct(this,()=>{const pe=this._writableState;pe.writing||_e(this,pe),Y(this,pe)})}i(F,u,{__proto__:null,value:function(te){return r(this,te)?!0:this!==F?!1:te&&te._writableState instanceof H}}),F.prototype.pipe=function(){D(this,new E)};function K(te,ae,pe,We){const Fe=te._writableState;if(typeof pe=="function")We=pe,pe=Fe.defaultEncoding;else{if(!pe)pe=Fe.defaultEncoding;else if(pe!=="buffer"&&!h.isEncoding(pe))throw new q(pe);typeof We!="function"&&(We=U)}if(ae===null)throw new T;if(!Fe.objectMode)if(typeof ae=="string")Fe.decodeStrings!==!1&&(ae=h.from(ae,pe),pe="buffer");else if(ae instanceof h)pe="buffer";else if(d._isUint8Array(ae))ae=d._uint8ArrayToBuffer(ae),pe="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],ae);let Ue;return Fe.ending?Ue=new $:Fe.destroyed&&(Ue=new S("write")),Ue?(e.nextTick(We,Ue),D(te,Ue,!0),Ue):(Fe.pendingcb++,X(te,Fe,ae,pe,We))}F.prototype.write=function(te,ae,pe){return K(this,te,ae,pe)===!0},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){const te=this._writableState;te.corked&&(te.corked--,te.writing||_e(this,te))},F.prototype.setDefaultEncoding=function(ae){if(typeof ae=="string"&&(ae=a(ae)),!h.isEncoding(ae))throw new q(ae);return this._writableState.defaultEncoding=ae,this};function X(te,ae,pe,We,Fe){const Ue=ae.objectMode?1:pe.length;ae.length+=Ue;const ue=ae.length<ae.highWaterMark;return ue||(ae.needDrain=!0),ae.writing||ae.corked||ae.errored||!ae.constructed?(ae.buffered.push({chunk:pe,encoding:We,callback:Fe}),ae.allBuffers&&We!=="buffer"&&(ae.allBuffers=!1),ae.allNoop&&Fe!==U&&(ae.allNoop=!1)):(ae.writelen=Ue,ae.writecb=Fe,ae.writing=!0,ae.sync=!0,te._write(pe,We,ae.onwrite),ae.sync=!1),ue&&!ae.errored&&!ae.destroyed}function O(te,ae,pe,We,Fe,Ue,ue){ae.writelen=We,ae.writecb=ue,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new S("write")):pe?te._writev(Fe,ae.onwrite):te._write(Fe,Ue,ae.onwrite),ae.sync=!1}function B(te,ae,pe,We){--ae.pendingcb,We(pe),se(ae),D(te,pe)}function P(te,ae){const pe=te._writableState,We=pe.sync,Fe=pe.writecb;if(typeof Fe!="function"){D(te,new w);return}pe.writing=!1,pe.writecb=null,pe.length-=pe.writelen,pe.writelen=0,ae?(ae.stack,pe.errored||(pe.errored=ae),te._readableState&&!te._readableState.errored&&(te._readableState.errored=ae),We?e.nextTick(B,te,pe,ae,Fe):B(te,pe,ae,Fe)):(pe.buffered.length>pe.bufferedIndex&&_e(te,pe),We?pe.afterWriteTickInfo!==null&&pe.afterWriteTickInfo.cb===Fe?pe.afterWriteTickInfo.count++:(pe.afterWriteTickInfo={count:1,cb:Fe,stream:te,state:pe},e.nextTick(G,pe.afterWriteTickInfo)):Q(te,pe,1,Fe))}function G({stream:te,state:ae,count:pe,cb:We}){return ae.afterWriteTickInfo=null,Q(te,ae,pe,We)}function Q(te,ae,pe,We){for(!ae.ending&&!te.destroyed&&ae.length===0&&ae.needDrain&&(ae.needDrain=!1,te.emit("drain"));pe-- >0;)ae.pendingcb--,We();ae.destroyed&&se(ae),Y(te,ae)}function se(te){if(te.writing)return;for(let Fe=te.bufferedIndex;Fe<te.buffered.length;++Fe){var ae;const{chunk:Ue,callback:ue}=te.buffered[Fe],Pe=te.objectMode?1:Ue.length;te.length-=Pe,ue((ae=te.errored)!==null&&ae!==void 0?ae:new S("write"))}const pe=te[J].splice(0);for(let Fe=0;Fe<pe.length;Fe++){var We;pe[Fe]((We=te.errored)!==null&&We!==void 0?We:new S("end"))}I(te)}function _e(te,ae){if(ae.corked||ae.bufferProcessing||ae.destroyed||!ae.constructed)return;const{buffered:pe,bufferedIndex:We,objectMode:Fe}=ae,Ue=pe.length-We;if(!Ue)return;let ue=We;if(ae.bufferProcessing=!0,Ue>1&&te._writev){ae.pendingcb-=Ue-1;const Pe=ae.allNoop?U:xe=>{for(let dt=ue;dt<pe.length;++dt)pe[dt].callback(xe)},qe=ae.allNoop&&ue===0?pe:t(pe,ue);qe.allBuffers=ae.allBuffers,O(te,ae,!0,ae.length,qe,"",Pe),I(ae)}else{do{const{chunk:Pe,encoding:qe,callback:xe}=pe[ue];pe[ue++]=null;const dt=Fe?1:Pe.length;O(te,ae,!1,dt,Pe,qe,xe)}while(ue<pe.length&&!ae.writing);ue===pe.length?I(ae):ue>256?(pe.splice(0,ue),ae.bufferedIndex=0):ae.bufferedIndex=ue}ae.bufferProcessing=!1}F.prototype._write=function(te,ae,pe){if(this._writev)this._writev([{chunk:te,encoding:ae}],pe);else throw new v("_write()")},F.prototype._writev=null,F.prototype.end=function(te,ae,pe){const We=this._writableState;typeof te=="function"?(pe=te,te=null,ae=null):typeof ae=="function"&&(pe=ae,ae=null);let Fe;if(te!=null){const Ue=K(this,te,ae);Ue instanceof n&&(Fe=Ue)}return We.corked&&(We.corked=1,this.uncork()),Fe||(!We.errored&&!We.ending?(We.ending=!0,Y(this,We,!0),We.ended=!0):We.finished?Fe=new A("end"):We.destroyed&&(Fe=new S("end"))),typeof pe=="function"&&(Fe||We.finished?e.nextTick(pe,Fe):We[J].push(pe)),this};function Ne(te){return te.ending&&!te.destroyed&&te.constructed&&te.length===0&&!te.errored&&te.buffered.length===0&&!te.finished&&!te.writing&&!te.errorEmitted&&!te.closeEmitted}function Te(te,ae){let pe=!1;function We(Fe){if(pe){D(te,Fe!=null?Fe:w());return}if(pe=!0,ae.pendingcb--,Fe){const Ue=ae[J].splice(0);for(let ue=0;ue<Ue.length;ue++)Ue[ue](Fe);D(te,Fe,ae.sync)}else Ne(ae)&&(ae.prefinished=!0,te.emit("prefinish"),ae.pendingcb++,e.nextTick(ie,te,ae))}ae.sync=!0,ae.pendingcb++;try{te._final(We)}catch(Fe){We(Fe)}ae.sync=!1}function W(te,ae){!ae.prefinished&&!ae.finalCalled&&(typeof te._final=="function"&&!ae.destroyed?(ae.finalCalled=!0,Te(te,ae)):(ae.prefinished=!0,te.emit("prefinish")))}function Y(te,ae,pe){Ne(ae)&&(W(te,ae),ae.pendingcb===0&&(pe?(ae.pendingcb++,e.nextTick((We,Fe)=>{Ne(Fe)?ie(We,Fe):Fe.pendingcb--},te,ae)):Ne(ae)&&(ae.pendingcb++,ie(te,ae))))}function ie(te,ae){ae.pendingcb--,ae.finished=!0;const pe=ae[J].splice(0);for(let We=0;We<pe.length;We++)pe[We]();if(te.emit("finish"),ae.autoDestroy){const We=te._readableState;(!We||We.autoDestroy&&(We.endEmitted||We.readable===!1))&&te.destroy()}}o(F.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(te){this._writableState&&(this._writableState.destroyed=te)}},writable:{__proto__:null,get(){const te=this._writableState;return!!te&&te.writable!==!1&&!te.destroyed&&!te.errored&&!te.ending&&!te.ended},set(te){this._writableState&&(this._writableState.writable=!!te)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const te=this._writableState;return te?!te.destroyed&&!te.ending&&te.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Oe=p.destroy;F.prototype.destroy=function(te,ae){const pe=this._writableState;return!pe.destroyed&&(pe.bufferedIndex<pe.buffered.length||pe[J].length)&&e.nextTick(se,pe),Oe.call(this,te,ae),this},F.prototype._undestroy=p.undestroy,F.prototype._destroy=function(te,ae){ae(te)},F.prototype[c.captureRejectionSymbol]=function(te){this.destroy(te)};let Me;function Re(){return Me===void 0&&(Me={}),Me}return F.fromWeb=function(te,ae){return Re().newStreamWritableFromWritableStream(te,ae)},F.toWeb=function(te){return Re().newWritableStreamFromStreamWritable(te)},zb}var Hb,mA;function ese(){if(mA)return Hb;mA=1;const e=hu(),t=el(),{isReadable:n,isWritable:r,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:c}=ea(),d=tl(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:b}}=li(),{destroyer:g}=Jc(),x=Ys(),y=Tv(),v=HE(),{createDeferredPromise:w}=Ei(),E=n$(),S=globalThis.Blob||t.Blob,A=typeof S<"u"?function(H){return H instanceof S}:function(H){return!1},T=globalThis.AbortController||ch().AbortController,{FunctionPrototypeCall:$}=In();class q extends x{constructor(H){super(H),(H==null?void 0:H.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(H==null?void 0:H.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Hb=function J(H,I){if(l(H))return H;if(s(H))return U({readable:H});if(a(H))return U({writable:H});if(o(H))return U({writable:!1,readable:!1});if(u(H))return U({readable:y.fromWeb(H)});if(c(H))return U({writable:v.fromWeb(H)});if(typeof H=="function"){const{value:K,write:X,final:O,destroy:B}=D(H);if(i(K))return E(q,K,{objectMode:!0,write:X,final:O,destroy:B});const P=K==null?void 0:K.then;if(typeof P=="function"){let G;const Q=$(P,K,se=>{if(se!=null)throw new b("nully","body",se)},se=>{g(G,se)});return G=new q({objectMode:!0,readable:!1,write:X,final(se){O(async()=>{try{await Q,e.nextTick(se,null)}catch(_e){e.nextTick(se,_e)}})},destroy:B})}throw new b("Iterable, AsyncIterable or AsyncFunction",I,K)}if(A(H))return J(H.arrayBuffer());if(i(H))return E(q,H,{objectMode:!0,writable:!1});if(u(H==null?void 0:H.readable)&&c(H==null?void 0:H.writable))return q.fromWeb(H);if(typeof(H==null?void 0:H.writable)=="object"||typeof(H==null?void 0:H.readable)=="object"){const K=H!=null&&H.readable?s(H==null?void 0:H.readable)?H==null?void 0:H.readable:J(H.readable):void 0,X=H!=null&&H.writable?a(H==null?void 0:H.writable)?H==null?void 0:H.writable:J(H.writable):void 0;return U({readable:K,writable:X})}const F=H==null?void 0:H.then;if(typeof F=="function"){let K;return $(F,H,X=>{X!=null&&K.push(X),K.push(null)},X=>{g(K,X)}),K=new q({objectMode:!0,writable:!1,read(){}})}throw new p(I,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],H)};function D(J){let{promise:H,resolve:I}=w();const F=new T,K=F.signal;return{value:J(async function*(){for(;;){const O=H;H=null;const{chunk:B,done:P,cb:G}=await O;if(e.nextTick(G),P)return;if(K.aborted)throw new h(void 0,{cause:K.reason});({promise:H,resolve:I}=w()),yield B}}(),{signal:K}),write(O,B,P){const G=I;I=null,G({chunk:O,done:!1,cb:P})},final(O){const B=I;I=null,B({done:!0,cb:O})},destroy(O,B){F.abort(),B(O)}}}function U(J){const H=J.readable&&typeof J.readable.read!="function"?y.wrap(J.readable):J.readable,I=J.writable;let F=!!n(H),K=!!r(I),X,O,B,P,G;function Q(se){const _e=P;P=null,_e?_e(se):se&&G.destroy(se)}return G=new q({readableObjectMode:!!(H!=null&&H.readableObjectMode),writableObjectMode:!!(I!=null&&I.writableObjectMode),readable:F,writable:K}),K&&(d(I,se=>{K=!1,se&&g(H,se),Q(se)}),G._write=function(se,_e,Ne){I.write(se,_e)?Ne():X=Ne},G._final=function(se){I.end(),O=se},I.on("drain",function(){if(X){const se=X;X=null,se()}}),I.on("finish",function(){if(O){const se=O;O=null,se()}})),F&&(d(H,se=>{F=!1,se&&g(H,se),Q(se)}),H.on("readable",function(){if(B){const se=B;B=null,se()}}),H.on("end",function(){G.push(null)}),G._read=function(){for(;;){const se=H.read();if(se===null){B=G._read;return}if(!G.push(se))return}}),G._destroy=function(se,_e){!se&&P!==null&&(se=new h),B=null,X=null,O=null,P===null?_e(se):(P=_e,g(I,se),g(H,se))},G}return Hb}var Ub,yA;function Ys(){if(yA)return Ub;yA=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=In();Ub=s;const i=Tv(),o=HE();r(s.prototype,i.prototype),r(s,i);{const c=n(o.prototype);for(let d=0;d<c.length;d++){const h=c[d];s.prototype[h]||(s.prototype[h]=o.prototype[h])}}function s(c){if(!(this instanceof s))return new s(c);i.call(this,c),o.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let a;function l(){return a===void 0&&(a={}),a}s.fromWeb=function(c,d){return l().newStreamDuplexFromReadableWritablePair(c,d)},s.toWeb=function(c){return l().newReadableWritablePairFromDuplex(c)};let u;return s.from=function(c){return u||(u=ese()),u(c,"body")},Ub}var Wb,vA;function r$(){if(vA)return Wb;vA=1;const{ObjectSetPrototypeOf:e,Symbol:t}=In();Wb=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=li().codes,r=Ys(),{getHighWaterMark:i}=Nv();e(s.prototype,r.prototype),e(s,r);const o=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const c=u?i(this,u,"readableHighWaterMark",!0):null;c===0&&(u={...u,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[o]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function a(u){typeof this._flush=="function"&&!this.destroyed?this._flush((c,d)=>{if(c){u?u(c):this.destroy(c);return}d!=null&&this.push(d),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==a&&a.call(this)}return s.prototype._final=a,s.prototype._transform=function(u,c,d){throw new n("_transform()")},s.prototype._write=function(u,c,d){const h=this._readableState,p=this._writableState,b=h.length;this._transform(u,c,(g,x)=>{if(g){d(g);return}x!=null&&this.push(x),p.ended||b===h.length||h.length<h.highWaterMark?d():this[o]=d})},s.prototype._read=function(){if(this[o]){const u=this[o];this[o]=null,u()}},Wb}var Vb,bA;function i$(){if(bA)return Vb;bA=1;const{ObjectSetPrototypeOf:e}=In();Vb=n;const t=r$();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,i,o){o(null,r)},Vb}var qb,wA;function UE(){if(wA)return qb;wA=1;const e=hu(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:i}=In(),o=tl(),{once:s}=Ei(),a=Jc(),l=Ys(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:g}=li(),{validateFunction:x,validateAbortSignal:y}=zh(),{isIterable:v,isReadable:w,isReadableNodeStream:E,isNodeStream:S,isTransformStream:A,isWebStream:T,isReadableStream:$,isReadableFinished:q}=ea(),D=globalThis.AbortController||ch().AbortController;let U,J,H;function I(se,_e,Ne){let Te=!1;se.on("close",()=>{Te=!0});const W=o(se,{readable:_e,writable:Ne},Y=>{Te=!Y});return{destroy:Y=>{Te||(Te=!0,a.destroyer(se,Y||new p("pipe")))},cleanup:W}}function F(se){return x(se[se.length-1],"streams[stream.length - 1]"),se.pop()}function K(se){if(v(se))return se;if(E(se))return X(se);throw new c("val",["Readable","Iterable","AsyncIterable"],se)}async function*X(se){J||(J=Tv()),yield*J.prototype[r].call(se)}async function O(se,_e,Ne,{end:Te}){let W,Y=null;const ie=Re=>{if(Re&&(W=Re),Y){const te=Y;Y=null,te()}},Oe=()=>new n((Re,te)=>{W?te(W):Y=()=>{W?te(W):Re()}});_e.on("drain",ie);const Me=o(_e,{readable:!1},ie);try{_e.writableNeedDrain&&await Oe();for await(const Re of se)_e.write(Re)||await Oe();Te&&(_e.end(),await Oe()),Ne()}catch(Re){Ne(W!==Re?u(W,Re):Re)}finally{Me(),_e.off("drain",ie)}}async function B(se,_e,Ne,{end:Te}){A(_e)&&(_e=_e.writable);const W=_e.getWriter();try{for await(const Y of se)await W.ready,W.write(Y).catch(()=>{});await W.ready,Te&&await W.close(),Ne()}catch(Y){try{await W.abort(Y),Ne(Y)}catch(ie){Ne(ie)}}}function P(...se){return G(se,s(F(se)))}function G(se,_e,Ne){if(se.length===1&&t(se[0])&&(se=se[0]),se.length<2)throw new h("streams");const Te=new D,W=Te.signal,Y=Ne==null?void 0:Ne.signal,ie=[];y(Y,"options.signal");function Oe(){Fe(new g)}H=H||Ei().addAbortListener;let Me;Y&&(Me=H(Y,Oe));let Re,te;const ae=[];let pe=0;function We(qe){Fe(qe,--pe===0)}function Fe(qe,xe){var dt;if(qe&&(!Re||Re.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Re=qe),!(!Re&&!xe)){for(;ae.length;)ae.shift()(Re);(dt=Me)===null||dt===void 0||dt[i](),Te.abort(),xe&&(Re||ie.forEach(gt=>gt()),e.nextTick(_e,Re,te))}}let Ue;for(let qe=0;qe<se.length;qe++){const xe=se[qe],dt=qe<se.length-1,gt=qe>0,ft=dt||(Ne==null?void 0:Ne.end)!==!1,At=qe===se.length-1;if(S(xe)){let L=function(j){j&&j.name!=="AbortError"&&j.code!=="ERR_STREAM_PREMATURE_CLOSE"&&We(j)};if(ft){const{destroy:j,cleanup:R}=I(xe,dt,gt);ae.push(j),w(xe)&&At&&ie.push(R)}xe.on("error",L),w(xe)&&At&&ie.push(()=>{xe.removeListener("error",L)})}if(qe===0)if(typeof xe=="function"){if(Ue=xe({signal:W}),!v(Ue))throw new d("Iterable, AsyncIterable or Stream","source",Ue)}else v(xe)||E(xe)||A(xe)?Ue=xe:Ue=l.from(xe);else if(typeof xe=="function"){if(A(Ue)){var ue;Ue=K((ue=Ue)===null||ue===void 0?void 0:ue.readable)}else Ue=K(Ue);if(Ue=xe(Ue,{signal:W}),dt){if(!v(Ue,!0))throw new d("AsyncIterable","transform[".concat(qe-1,"]"),Ue)}else{var Pe;U||(U=i$());const L=new U({objectMode:!0}),j=(Pe=Ue)===null||Pe===void 0?void 0:Pe.then;if(typeof j=="function")pe++,j.call(Ue,de=>{te=de,de!=null&&L.write(de),ft&&L.end(),e.nextTick(We)},de=>{L.destroy(de),e.nextTick(We,de)});else if(v(Ue,!0))pe++,O(Ue,L,We,{end:ft});else if($(Ue)||A(Ue)){const de=Ue.readable||Ue;pe++,O(de,L,We,{end:ft})}else throw new d("AsyncIterable or Promise","destination",Ue);Ue=L;const{destroy:R,cleanup:Z}=I(Ue,!1,!0);ae.push(R),At&&ie.push(Z)}}else if(S(xe)){if(E(Ue)){pe+=2;const L=Q(Ue,xe,We,{end:ft});w(xe)&&At&&ie.push(L)}else if(A(Ue)||$(Ue)){const L=Ue.readable||Ue;pe++,O(L,xe,We,{end:ft})}else if(v(Ue))pe++,O(Ue,xe,We,{end:ft});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ue);Ue=xe}else if(T(xe)){if(E(Ue))pe++,B(K(Ue),xe,We,{end:ft});else if($(Ue)||v(Ue))pe++,B(Ue,xe,We,{end:ft});else if(A(Ue))pe++,B(Ue.readable,xe,We,{end:ft});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ue);Ue=xe}else Ue=l.from(xe)}return(W!=null&&W.aborted||Y!=null&&Y.aborted)&&e.nextTick(Oe),Ue}function Q(se,_e,Ne,{end:Te}){let W=!1;if(_e.on("close",()=>{W||Ne(new b)}),se.pipe(_e,{end:!1}),Te){let Y=function(){W=!0,_e.end()};q(se)?e.nextTick(Y):se.once("end",Y)}else Ne();return o(se,{readable:!0,writable:!1},Y=>{const ie=se._readableState;Y&&Y.code==="ERR_STREAM_PREMATURE_CLOSE"&&ie&&ie.ended&&!ie.errored&&!ie.errorEmitted?se.once("end",Ne).once("error",Ne):Ne(Y)}),o(_e,{readable:!1,writable:!0},Ne)}return qb={pipelineImpl:G,pipeline:P},qb}var Kb,xA;function o$(){if(xA)return Kb;xA=1;const{pipeline:e}=UE(),t=Ys(),{destroyer:n}=Jc(),{isNodeStream:r,isReadable:i,isWritable:o,isWebStream:s,isTransformStream:a,isWritableStream:l,isReadableStream:u}=ea(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:h}}=li(),p=tl();return Kb=function(...g){if(g.length===0)throw new h("streams");if(g.length===1)return t.from(g[0]);const x=[...g];if(typeof g[0]=="function"&&(g[0]=t.from(g[0])),typeof g[g.length-1]=="function"){const U=g.length-1;g[U]=t.from(g[U])}for(let U=0;U<g.length;++U)if(!(!r(g[U])&&!s(g[U]))){if(U<g.length-1&&!(i(g[U])||u(g[U])||a(g[U])))throw new d("streams[".concat(U,"]"),x[U],"must be readable");if(U>0&&!(o(g[U])||l(g[U])||a(g[U])))throw new d("streams[".concat(U,"]"),x[U],"must be writable")}let y,v,w,E,S;function A(U){const J=E;E=null,J?J(U):U?S.destroy(U):!D&&!q&&S.destroy()}const T=g[0],$=e(g,A),q=!!(o(T)||l(T)||a(T)),D=!!(i($)||u($)||a($));if(S=new t({writableObjectMode:!!(T!=null&&T.writableObjectMode),readableObjectMode:!!($!=null&&$.readableObjectMode),writable:q,readable:D}),q){if(r(T))S._write=function(J,H,I){T.write(J,H)?I():y=I},S._final=function(J){T.end(),v=J},T.on("drain",function(){if(y){const J=y;y=null,J()}});else if(s(T)){const H=(a(T)?T.writable:T).getWriter();S._write=async function(I,F,K){try{await H.ready,H.write(I).catch(()=>{}),K()}catch(X){K(X)}},S._final=async function(I){try{await H.ready,H.close().catch(()=>{}),v=I}catch(F){I(F)}}}const U=a($)?$.readable:$;p(U,()=>{if(v){const J=v;v=null,J()}})}if(D){if(r($))$.on("readable",function(){if(w){const U=w;w=null,U()}}),$.on("end",function(){S.push(null)}),S._read=function(){for(;;){const U=$.read();if(U===null){w=S._read;return}if(!S.push(U))return}};else if(s($)){const J=(a($)?$.readable:$).getReader();S._read=async function(){for(;;)try{const{value:H,done:I}=await J.read();if(!S.push(H))return;if(I){S.push(null);return}}catch(H){return}}}}return S._destroy=function(U,J){!U&&E!==null&&(U=new c),w=null,y=null,v=null,E===null?J(U):(E=J,r($)&&n($,U))},S},Kb}var _A;function tse(){if(_A)return Hp;_A=1;const e=globalThis.AbortController||ch().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:o}=li(),{validateAbortSignal:s,validateInteger:a,validateObject:l}=zh(),u=In().Symbol("kWeak"),c=In().Symbol("kResistStopPropagation"),{finished:d}=tl(),h=o$(),{addAbortSignalNoValidate:p}=Rv(),{isWritable:b,isNodeStream:g}=ea(),{deprecate:x}=Ei(),{ArrayPrototypePush:y,Boolean:v,MathFloor:w,Number:E,NumberIsNaN:S,Promise:A,PromiseReject:T,PromiseResolve:$,PromisePrototypeThen:q,Symbol:D}=In(),U=D("kEmpty"),J=D("kEof");function H(Y,ie){if(ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal"),g(Y)&&!b(Y))throw new t("stream",Y,"must be writable");const Oe=h(this,Y);return ie!=null&&ie.signal&&p(ie.signal,Oe),Oe}function I(Y,ie){if(typeof Y!="function")throw new n("fn",["Function","AsyncFunction"],Y);ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal");let Oe=1;(ie==null?void 0:ie.concurrency)!=null&&(Oe=w(ie.concurrency));let Me=Oe-1;return(ie==null?void 0:ie.highWaterMark)!=null&&(Me=w(ie.highWaterMark)),a(Oe,"options.concurrency",1),a(Me,"options.highWaterMark",0),Me+=Oe,(async function*(){const te=Ei().AbortSignalAny([ie==null?void 0:ie.signal].filter(v)),ae=this,pe=[],We={signal:te};let Fe,Ue,ue=!1,Pe=0;function qe(){ue=!0,xe()}function xe(){Pe-=1,dt()}function dt(){Ue&&!ue&&Pe<Oe&&pe.length<Me&&(Ue(),Ue=null)}async function gt(){try{for await(let ft of ae){if(ue)return;if(te.aborted)throw new o;try{if(ft=Y(ft,We),ft===U)continue;ft=$(ft)}catch(At){ft=T(At)}Pe+=1,q(ft,xe,qe),pe.push(ft),Fe&&(Fe(),Fe=null),!ue&&(pe.length>=Me||Pe>=Oe)&&await new A(At=>{Ue=At})}pe.push(J)}catch(ft){const At=T(ft);q(At,xe,qe),pe.push(At)}finally{ue=!0,Fe&&(Fe(),Fe=null)}}gt();try{for(;;){for(;pe.length>0;){const ft=await pe[0];if(ft===J)return;if(te.aborted)throw new o;ft!==U&&(yield ft),pe.shift(),dt()}await new A(ft=>{Fe=ft})}}finally{ue=!0,Ue&&(Ue(),Ue=null)}}).call(this)}function F(Y=void 0){return Y!=null&&l(Y,"options"),(Y==null?void 0:Y.signal)!=null&&s(Y.signal,"options.signal"),(async function*(){let Oe=0;for await(const Re of this){var Me;if(Y!=null&&(Me=Y.signal)!==null&&Me!==void 0&&Me.aborted)throw new o({cause:Y.signal.reason});yield[Oe++,Re]}}).call(this)}async function K(Y,ie=void 0){for await(const Oe of P.call(this,Y,ie))return!0;return!1}async function X(Y,ie=void 0){if(typeof Y!="function")throw new n("fn",["Function","AsyncFunction"],Y);return!await K.call(this,async(...Oe)=>!await Y(...Oe),ie)}async function O(Y,ie){for await(const Oe of P.call(this,Y,ie))return Oe}async function B(Y,ie){if(typeof Y!="function")throw new n("fn",["Function","AsyncFunction"],Y);async function Oe(Me,Re){return await Y(Me,Re),U}for await(const Me of I.call(this,Oe,ie));}function P(Y,ie){if(typeof Y!="function")throw new n("fn",["Function","AsyncFunction"],Y);async function Oe(Me,Re){return await Y(Me,Re)?Me:U}return I.call(this,Oe,ie)}class G extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Y,ie,Oe){var Me;if(typeof Y!="function")throw new n("reducer",["Function","AsyncFunction"],Y);Oe!=null&&l(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&s(Oe.signal,"options.signal");let Re=arguments.length>1;if(Oe!=null&&(Me=Oe.signal)!==null&&Me!==void 0&&Me.aborted){const Fe=new o(void 0,{cause:Oe.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(Fe)),Fe}const te=new e,ae=te.signal;if(Oe!=null&&Oe.signal){const Fe={once:!0,[u]:this,[c]:!0};Oe.signal.addEventListener("abort",()=>te.abort(),Fe)}let pe=!1;try{for await(const Fe of this){var We;if(pe=!0,Oe!=null&&(We=Oe.signal)!==null&&We!==void 0&&We.aborted)throw new o;Re?ie=await Y(ie,Fe,{signal:ae}):(ie=Fe,Re=!0)}if(!pe&&!Re)throw new G}finally{te.abort()}return ie}async function se(Y){Y!=null&&l(Y,"options"),(Y==null?void 0:Y.signal)!=null&&s(Y.signal,"options.signal");const ie=[];for await(const Me of this){var Oe;if(Y!=null&&(Oe=Y.signal)!==null&&Oe!==void 0&&Oe.aborted)throw new o(void 0,{cause:Y.signal.reason});y(ie,Me)}return ie}function _e(Y,ie){const Oe=I.call(this,Y,ie);return(async function*(){for await(const Re of Oe)yield*Re}).call(this)}function Ne(Y){if(Y=E(Y),S(Y))return 0;if(Y<0)throw new i("number",">= 0",Y);return Y}function Te(Y,ie=void 0){return ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal"),Y=Ne(Y),(async function*(){var Me;if(ie!=null&&(Me=ie.signal)!==null&&Me!==void 0&&Me.aborted)throw new o;for await(const te of this){var Re;if(ie!=null&&(Re=ie.signal)!==null&&Re!==void 0&&Re.aborted)throw new o;Y--<=0&&(yield te)}}).call(this)}function W(Y,ie=void 0){return ie!=null&&l(ie,"options"),(ie==null?void 0:ie.signal)!=null&&s(ie.signal,"options.signal"),Y=Ne(Y),(async function*(){var Me;if(ie!=null&&(Me=ie.signal)!==null&&Me!==void 0&&Me.aborted)throw new o;for await(const te of this){var Re;if(ie!=null&&(Re=ie.signal)!==null&&Re!==void 0&&Re.aborted)throw new o;if(Y-- >0&&(yield te),Y<=0)return}}).call(this)}return Hp.streamReturningOperators={asIndexedPairs:x(F,"readable.asIndexedPairs will be removed in a future version."),drop:Te,filter:P,flatMap:_e,map:I,take:W,compose:H},Hp.promiseReturningOperators={every:X,forEach:B,reduce:Q,toArray:se,some:K,find:O},Hp}var Gb,EA;function s$(){if(EA)return Gb;EA=1;const{ArrayPrototypePop:e,Promise:t}=In(),{isIterable:n,isNodeStream:r,isWebStream:i}=ea(),{pipelineImpl:o}=UE(),{finished:s}=tl();a$();function a(...l){return new t((u,c)=>{let d,h;const p=l[l.length-1];if(p&&typeof p=="object"&&!r(p)&&!n(p)&&!i(p)){const b=e(l);d=b.signal,h=b.end}o(l,(b,g)=>{b?c(b):u(g)},{signal:d,end:h})})}return Gb={finished:s,pipeline:a},Gb}var SA;function a$(){if(SA)return Sb.exports;SA=1;const{Buffer:e}=el(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=In(),{promisify:{custom:i}}=Ei(),{streamReturningOperators:o,promiseReturningOperators:s}=tse(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=li(),l=o$(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:c}=Nv(),{pipeline:d}=UE(),{destroyer:h}=Jc(),p=tl(),b=s$(),g=ea(),x=Sb.exports=zE().Stream;x.isDestroyed=g.isDestroyed,x.isDisturbed=g.isDisturbed,x.isErrored=g.isErrored,x.isReadable=g.isReadable,x.isWritable=g.isWritable,x.Readable=Tv();for(const v of n(o)){let E=function(...S){if(new.target)throw a();return x.Readable.from(r(w,this,S))};const w=o[v];t(E,"name",{__proto__:null,value:w.name}),t(E,"length",{__proto__:null,value:w.length}),t(x.Readable.prototype,v,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}for(const v of n(s)){let E=function(...S){if(new.target)throw a();return r(w,this,S)};const w=s[v];t(E,"name",{__proto__:null,value:w.name}),t(E,"length",{__proto__:null,value:w.length}),t(x.Readable.prototype,v,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}x.Writable=HE(),x.Duplex=Ys(),x.Transform=r$(),x.PassThrough=i$(),x.pipeline=d;const{addAbortSignal:y}=Rv();return x.addAbortSignal=y,x.finished=p,x.destroy=h,x.compose=l,x.setDefaultHighWaterMark=u,x.getDefaultHighWaterMark=c,t(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),t(d,i,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),t(p,i,{__proto__:null,enumerable:!0,get(){return b.finished}}),x.Stream=x,x._isUint8Array=function(w){return w instanceof Uint8Array},x._uint8ArrayToBuffer=function(w){return e.from(w.buffer,w.byteOffset,w.byteLength)},Sb.exports}var kA;function CA(){return kA||(kA=1,function(e){const t=a$(),n=s$(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(Eb)),Eb.exports}/*!
 LZ-UTF8 v0.6.3

 Copyright (c) 2021, Rotem Dan
 Released under the MIT license.

 Build date: 2022-07-06 

 Please report any issue at https://github.com/rotemdan/lzutf8.js/issues
*/(function(e){var t;(function(n){n.runningInNodeJS=function(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"},n.runningInMainNodeJSModule=function(){return n.runningInNodeJS()&&require.main===e},n.commonJSAvailable=function(){return!0},n.runningInWebWorker=function(){return typeof window>"u"&&typeof self=="object"&&typeof self.addEventListener=="function"&&typeof self.close=="function"},n.runningInNodeChildProcess=function(){return n.runningInNodeJS()&&typeof process.send=="function"},n.runningInNullOrigin=function(){return typeof window!="object"||typeof window.location!="object"||typeof document!="object"?!1:document.location.protocol!=="http:"&&document.location.protocol!=="https:"},n.webWorkersAvailable=function(){return!(typeof Worker!="function"||n.runningInNullOrigin()||n.runningInNodeJS()||navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},n.log=function(r,i){i===void 0&&(i=!1),typeof console=="object"&&(console.log(r),i&&typeof document=="object"&&(document.body.innerHTML+=r+"<br/>"))},n.createErrorMessage=function(r,i){if(i===void 0&&(i="Unhandled exception"),r==null)return i;if(i+=": ",typeof r.content=="object"){if(n.runningInNodeJS())return i+r.content.stack;var o=JSON.stringify(r.content);return o!=="{}"?i+o:i+r.content}else return typeof r.content=="string"?i+r.content:i+r},n.printExceptionAndStackTraceToConsole=function(r,i){i===void 0&&(i="Unhandled exception"),n.log(n.createErrorMessage(r,i))},n.getGlobalObject=function(){return typeof Qi=="object"?Qi:typeof window=="object"?window:typeof self=="object"?self:{}},n.toString=Object.prototype.toString,n.commonJSAvailable()&&(e.exports=n)})(t||(t={})),function(n){if(typeof Uint8Array=="function"&&new Uint8Array(1).subarray(1).byteLength!==0){var r=function(a,l){var u=function(d,h,p){return d<h?h:d>p?p:d};a=a|0,l=l|0,arguments.length<1&&(a=0),arguments.length<2&&(l=this.length),a<0&&(a=this.length+a),l<0&&(l=this.length+l),a=u(a,0,this.length),l=u(l,0,this.length);var c=l-a;return c<0&&(c=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,c)},i=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],o=void 0;if(typeof window=="object"?o=window:typeof self=="object"&&(o=self),o!==void 0)for(var s=0;s<i.length;s++)o[i[s]]&&(o[i[s]].prototype.subarray=r)}}();var t;(function(n){var r=function(){function i(){}return i.compressAsync=function(o,s,a){var l=new n.Timer,u=new n.Compressor;if(!a)throw new TypeError("compressAsync: No callback argument given");if(typeof o=="string")o=n.encodeUTF8(o);else if(o==null||!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));return}var c=n.ArrayTools.splitByteArray(o,s.blockSize),d=[],h=function(p){if(p<c.length){var b=void 0;try{b=u.compressBlock(c[p])}catch(x){a(void 0,x);return}d.push(b),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var g=n.ArrayTools.concatUint8Arrays(d);n.enqueueImmediate(function(){var x;try{x=n.CompressionCommon.encodeCompressedBytes(g,s.outputEncoding)}catch(y){a(void 0,y);return}n.enqueueImmediate(function(){return a(x)})})}};n.enqueueImmediate(function(){return h(0)})},i.createCompressionStream=function(){var o=new n.Compressor,s=CA(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,c){var d;try{d=n.BufferTools.uint8ArrayToBuffer(o.compressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(d),c()},a},i}();n.AsyncCompressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(){}return i.decompressAsync=function(o,s,a){if(!a)throw new TypeError("decompressAsync: No callback argument given");var l=new n.Timer;try{o=n.CompressionCommon.decodeCompressedBytes(o,s.inputEncoding)}catch(p){a(void 0,p);return}var u=new n.Decompressor,c=n.ArrayTools.splitByteArray(o,s.blockSize),d=[],h=function(p){if(p<c.length){var b=void 0;try{b=u.decompressBlock(c[p])}catch(x){a(void 0,x);return}d.push(b),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var g=n.ArrayTools.concatUint8Arrays(d);n.enqueueImmediate(function(){var x;try{x=n.CompressionCommon.encodeDecompressedBytes(g,s.outputEncoding)}catch(y){a(void 0,y);return}n.enqueueImmediate(function(){return a(x)})})}};n.enqueueImmediate(function(){return h(0)})},i.createDecompressionStream=function(){var o=new n.Decompressor,s=CA(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,c){var d;try{d=n.BufferTools.uint8ArrayToBuffer(o.decompressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(d),c()},a},i}();n.AsyncDecompressor=r})(t||(t={}));var t;(function(n){var r;(function(i){i.compressAsync=function(o,s,a){if(s.inputEncoding=="ByteArray"&&!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: input is not a Uint8Array"));return}var l={token:Math.random().toString(),type:"compress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(c){var d=c.data;!d||d.token!=l.token||(i.globalWorker.removeEventListener("message",u),d.type=="error"?a(void 0,new Error(d.error)):a(d.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.decompressAsync=function(o,s,a){var l={token:Math.random().toString(),type:"decompress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(c){var d=c.data;!d||d.token!=l.token||(i.globalWorker.removeEventListener("message",u),d.type=="error"?a(void 0,new Error(d.error)):a(d.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.installWebWorkerIfNeeded=function(){typeof self=="object"&&self.document===void 0&&self.addEventListener!=null&&(self.addEventListener("message",function(o){var s=o.data;if(s.type=="compress"){var a=void 0;try{a=n.compress(s.data,{outputEncoding:s.outputEncoding})}catch(c){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(c)},[]);return}var l={token:s.token,type:"compressionResult",data:a,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}else if(s.type=="decompress"){var u=void 0;try{u=n.decompress(s.data,{inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding})}catch(d){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(d)},[]);return}var l={token:s.token,type:"decompressionResult",data:u,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}}),self.addEventListener("error",function(o){n.log(n.createErrorMessage(o.error,"Unexpected LZUTF8 WebWorker exception"))}))},i.createGlobalWorkerIfNeeded=function(){if(i.globalWorker)return!0;if(!n.webWorkersAvailable())return!1;if(!i.scriptURI&&typeof document=="object"){var o=document.getElementById("lzutf8");o!=null&&(i.scriptURI=o.getAttribute("src")||void 0)}return i.scriptURI?(i.globalWorker=new Worker(i.scriptURI),!0):!1},i.terminate=function(){i.globalWorker&&(i.globalWorker.terminate(),i.globalWorker=void 0)}})(r=n.WebWorker||(n.WebWorker={})),r.installWebWorkerIfNeeded()})(t||(t={}));var t;(function(n){var r=function(){function i(o,s,a){this.container=o,this.startPosition=s,this.length=a}return i.prototype.get=function(o){return this.container[this.startPosition+o]},i.prototype.getInReversedOrder=function(o){return this.container[this.startPosition+this.length-1-o]},i.prototype.set=function(o,s){this.container[this.startPosition+o]=s},i}();n.ArraySegment=r})(t||(t={}));var t;(function(n){(function(r){r.copyElements=function(i,o,s,a,l){for(;l--;)s[a++]=i[o++]},r.zeroElements=function(i,o,s){for(;s--;)i[o++]=0},r.countNonzeroValuesInArray=function(i){for(var o=0,s=0;s<i.length;s++)i[s]&&o++;return o},r.truncateStartingElements=function(i,o){if(i.length<=o)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var s=i.length-o,a=0;a<o;a++)i[a]=i[s+a];i.length=o},r.doubleByteArrayCapacity=function(i){var o=new Uint8Array(i.length*2);return o.set(i),o},r.concatUint8Arrays=function(i){for(var o=0,s=0,a=i;s<a.length;s++){var l=a[s];o+=l.length}for(var u=new Uint8Array(o),c=0,d=0,h=i;d<h.length;d++){var l=h[d];u.set(l,c),c+=l.length}return u},r.splitByteArray=function(i,o){for(var s=[],a=0;a<i.length;){var l=Math.min(o,i.length-a);s.push(i.subarray(a,a+l)),a+=l}return s}})(n.ArrayTools||(n.ArrayTools={}))})(t||(t={}));var t;(function(n){(function(r){r.convertToUint8ArrayIfNeeded=function(i){return typeof Buffer=="function"&&Buffer.isBuffer(i)?r.bufferToUint8Array(i):i},r.uint8ArrayToBuffer=function(i){if(Buffer.prototype instanceof Uint8Array){var o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return Object.setPrototypeOf(o,Buffer.prototype),o}else{for(var s=i.length,a=new Buffer(s),l=0;l<s;l++)a[l]=i[l];return a}},r.bufferToUint8Array=function(i){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);for(var o=i.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=i[a];return s}})(n.BufferTools||(n.BufferTools={}))})(t||(t={}));var t;(function(n){(function(r){r.getCroppedBuffer=function(i,o,s,a){a===void 0&&(a=0);var l=new Uint8Array(s+a);return l.set(i.subarray(o,o+s)),l},r.getCroppedAndAppendedByteArray=function(i,o,s,a){return n.ArrayTools.concatUint8Arrays([i.subarray(o,o+s),a])},r.detectCompressionSourceEncoding=function(i){if(i==null)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if(typeof i=="string")return"String";if(i instanceof Uint8Array||typeof Buffer=="function"&&Buffer.isBuffer(i))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},r.encodeCompressedBytes=function(i,o){switch(o){case"ByteArray":return i;case"Buffer":return n.BufferTools.uint8ArrayToBuffer(i);case"Base64":return n.encodeBase64(i);case"BinaryString":return n.encodeBinaryString(i);case"StorageBinaryString":return n.encodeStorageBinaryString(i);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},r.decodeCompressedBytes=function(i,o){if(o==null)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(o){case"ByteArray":case"Buffer":var s=n.BufferTools.convertToUint8ArrayIfNeeded(i);if(!(s instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return s;case"Base64":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return n.decodeBase64(i);case"BinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return n.decodeBinaryString(i);case"StorageBinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return n.decodeStorageBinaryString(i);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(o,"'"))}},r.encodeDecompressedBytes=function(i,o){switch(o){case"String":return n.decodeUTF8(i);case"ByteArray":return i;case"Buffer":if(typeof Buffer!="function")throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return n.BufferTools.uint8ArrayToBuffer(i);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}})(n.CompressionCommon||(n.CompressionCommon={}))})(t||(t={}));var t;(function(n){var r;(function(i){var o=[],s;i.enqueueImmediate=function(a){o.push(a),o.length===1&&s()},i.initializeScheduler=function(){var a=function(){for(var d=0,h=o;d<h.length;d++){var p=h[d];try{p.call(void 0)}catch(b){n.printExceptionAndStackTraceToConsole(b,"enqueueImmediate exception")}}o.length=0};if(n.runningInNodeJS())s=function(){return setImmediate(function(){return a()})};else if(typeof window=="object"&&typeof window.addEventListener=="function"&&typeof window.postMessage=="function"){var l="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(d){d.data===l&&a()});var u;n.runningInNullOrigin()?u="*":u=window.location.href,s=function(){return window.postMessage(l,u)}}else if(typeof MessageChannel=="function"&&typeof MessagePort=="function"){var c=new MessageChannel;c.port1.onmessage=function(){return a()},s=function(){return c.port2.postMessage(0)}}else s=function(){return setTimeout(function(){return a()},0)}},i.initializeScheduler()})(r=n.EventLoop||(n.EventLoop={})),n.enqueueImmediate=function(i){return r.enqueueImmediate(i)}})(t||(t={}));var t;(function(n){(function(r){r.override=function(i,o){return r.extend(i,o)},r.extend=function(i,o){if(i==null)throw new TypeError("obj is null or undefined");if(typeof i!="object")throw new TypeError("obj is not an object");if(o==null&&(o={}),typeof o!="object")throw new TypeError("newProperties is not an object");if(o!=null)for(var s in o)i[s]=o[s];return i}})(n.ObjectTools||(n.ObjectTools={}))})(t||(t={}));var t;(function(n){n.getRandomIntegerInRange=function(r,i){return r+Math.floor(Math.random()*(i-r))},n.getRandomUTF16StringOfLength=function(r){for(var i="",o=0;o<r;o++){var s=void 0;do s=n.getRandomIntegerInRange(0,1114112);while(s>=55296&&s<=57343);i+=n.Encoding.CodePoint.decodeToString(s)}return i}})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=1024),this.outputBufferCapacity=o,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return i.prototype.appendCharCode=function(o){this.outputBuffer[this.outputPosition++]=o,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},i.prototype.appendCharCodes=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o[s])},i.prototype.appendString=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o.charCodeAt(s))},i.prototype.appendCodePoint=function(o){if(o<=65535)this.appendCharCode(o);else if(o<=1114111)this.appendCharCode(55296+(o-65536>>>10)),this.appendCharCode(56320+(o-65536&1023));else throw new Error("appendCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))},i.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},i.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},i}();n.StringBuilder=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.restart()}return i.prototype.restart=function(){this.startTime=i.getTimestamp()},i.prototype.getElapsedTime=function(){return i.getTimestamp()-this.startTime},i.prototype.getElapsedTimeAndRestart=function(){var o=this.getElapsedTime();return this.restart(),o},i.prototype.logAndRestart=function(o,s){s===void 0&&(s=!0);var a=this.getElapsedTime(),l="".concat(o,": ").concat(a.toFixed(3),"ms");return n.log(l,s),this.restart(),a},i.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},i.getMicrosecondTimestamp=function(){return Math.floor(i.getTimestamp()*1e3)},i.createGlobalTimestampFunction=function(){if(typeof process=="object"&&typeof process.hrtime=="function"){var o=0;this.timestampFunc=function(){var u=process.hrtime(),c=u[0]*1e3+u[1]/1e6;return o+c},o=Date.now()-this.timestampFunc()}else if(typeof chrome=="object"&&chrome.Interval){var s=Date.now(),a=new chrome.Interval;a.start(),this.timestampFunc=function(){return s+a.microseconds()/1e3}}else if(typeof performance=="object"&&performance.now){var l=Date.now()-performance.now();this.timestampFunc=function(){return l+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return new Date().getTime()}},i}();n.Timer=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,o&&typeof Uint32Array=="function"?this.prefixHashTable=new n.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new n.CompressorSimpleHashTable(this.PrefixHashTableSize)}return i.prototype.compressBlock=function(o){if(o==null)throw new TypeError("compressBlock: undefined or null input received");return typeof o=="string"&&(o=n.encodeUTF8(o)),o=n.BufferTools.convertToUint8ArrayIfNeeded(o),this.compressUtf8Block(o)},i.prototype.compressUtf8Block=function(o){if(!o||o.length==0)return new Uint8Array(0);var s=this.cropAndAddNewBytesToInputBuffer(o),a=this.inputBuffer,l=this.inputBuffer.length;this.outputBuffer=new Uint8Array(o.length),this.outputBufferPosition=0;for(var u=0,c=s;c<l;c++){var d=a[c],h=c<u;if(c>l-this.MinimumSequenceLength){h||this.outputRawByte(d);continue}var p=this.getBucketIndexForPrefix(c);if(!h){var b=this.findLongestMatch(c,p);b!=null&&(this.outputPointerBytes(b.length,b.distance),u=c+b.length,h=!0)}h||this.outputRawByte(d);var g=this.inputBufferStreamOffset+c;this.prefixHashTable.addValueToBucket(p,g)}return this.outputBuffer.subarray(0,this.outputBufferPosition)},i.prototype.findLongestMatch=function(o,s){var a=this.prefixHashTable.getArraySegmentForBucketIndex(s,this.reusableArraySegmentObject);if(a==null)return null;for(var l=this.inputBuffer,u,c=0,d=0;d<a.length;d++){var h=a.getInReversedOrder(d)-this.inputBufferStreamOffset,p=o-h,b=void 0;if(u===void 0?b=this.MinimumSequenceLength-1:u<128&&p>=128?b=c+(c>>>1):b=c,p>this.MaximumMatchDistance||b>=this.MaximumSequenceLength||o+b>=l.length)break;if(l[h+b]===l[o+b]){for(var g=0;;g++)if(o+g===l.length||l[h+g]!==l[o+g]){g>b&&(u=p,c=g);break}else if(g===this.MaximumSequenceLength)return{distance:p,length:this.MaximumSequenceLength}}}return u!==void 0?{distance:u,length:c}:null},i.prototype.getBucketIndexForPrefix=function(o){return(this.inputBuffer[o]*7880599+this.inputBuffer[o+1]*39601+this.inputBuffer[o+2]*199+this.inputBuffer[o+3])%this.PrefixHashTableSize},i.prototype.outputPointerBytes=function(o,s){s<128?(this.outputRawByte(192|o),this.outputRawByte(s)):(this.outputRawByte(224|o),this.outputRawByte(s>>>8),this.outputRawByte(s&255))},i.prototype.outputRawByte=function(o){this.outputBuffer[this.outputBufferPosition++]=o},i.prototype.cropAndAddNewBytesToInputBuffer=function(o){if(this.inputBuffer===void 0)return this.inputBuffer=o,0;var s=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),a=this.inputBuffer.length-s;return this.inputBuffer=n.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,a,s,o),this.inputBufferStreamOffset+=a,s},i}();n.Compressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(o*2),this.storage=new Uint32Array(o*2),this.storageIndex=1}return i.prototype.addValueToBucket=function(o,s){o<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var a=this.bucketLocators[o],l;if(a===0)a=this.storageIndex,l=1,this.storage[this.storageIndex]=s,this.storageIndex+=this.minimumBucketCapacity;else{l=this.bucketLocators[o+1],l===this.maximumBucketCapacity-1&&(l=this.truncateBucketToNewerElements(a,l,this.maximumBucketCapacity/2));var u=a+l;this.storage[u]===0?(this.storage[u]=s,u===this.storageIndex&&(this.storageIndex+=l)):(n.ArrayTools.copyElements(this.storage,a,this.storage,this.storageIndex,l),a=this.storageIndex,this.storageIndex+=l,this.storage[this.storageIndex++]=s,this.storageIndex+=l),l++}this.bucketLocators[o]=a,this.bucketLocators[o+1]=l},i.prototype.truncateBucketToNewerElements=function(o,s,a){var l=o+s-a;return n.ArrayTools.copyElements(this.storage,l,this.storage,o,a),n.ArrayTools.zeroElements(this.storage,o+a,s-a),a},i.prototype.compact=function(){var o=this.bucketLocators,s=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var a=0;a<o.length;a+=2){var l=o[a+1];l!==0&&(this.bucketLocators[a]=this.storageIndex,this.bucketLocators[a+1]=l,this.storageIndex+=Math.max(Math.min(l*2,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(this.storageIndex*8);for(var a=0;a<o.length;a+=2){var u=o[a];if(u!==0){var c=this.bucketLocators[a],d=this.bucketLocators[a+1];n.ArrayTools.copyElements(s,u,this.storage,c,d)}}},i.prototype.getArraySegmentForBucketIndex=function(o,s){o<<=1;var a=this.bucketLocators[o];return a===0?null:(s===void 0&&(s=new n.ArraySegment(this.storage,a,this.bucketLocators[o+1])),s)},i.prototype.getUsedBucketCount=function(){return Math.floor(n.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.bucketLocators.length;s+=2)o+=this.bucketLocators[s+1];return o},i}();n.CompressorCustomHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.maximumBucketCapacity=64,this.buckets=new Array(o)}return i.prototype.addValueToBucket=function(o,s){var a=this.buckets[o];a===void 0?this.buckets[o]=[s]:(a.length===this.maximumBucketCapacity-1&&n.ArrayTools.truncateStartingElements(a,this.maximumBucketCapacity/2),a.push(s))},i.prototype.getArraySegmentForBucketIndex=function(o,s){var a=this.buckets[o];return a===void 0?null:(s===void 0&&(s=new n.ArraySegment(a,0,a.length)),s)},i.prototype.getUsedBucketCount=function(){return n.ArrayTools.countNonzeroValuesInArray(this.buckets)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.buckets.length;s++)this.buckets[s]!==void 0&&(o+=this.buckets[s].length);return o},i}();n.CompressorSimpleHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.MaximumMatchDistance=32767,this.outputPosition=0}return i.prototype.decompressBlockToString=function(o){return o=n.BufferTools.convertToUint8ArrayIfNeeded(o),n.decodeUTF8(this.decompressBlock(o))},i.prototype.decompressBlock=function(o){this.inputBufferRemainder&&(o=n.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,o]),this.inputBufferRemainder=void 0);for(var s=this.cropOutputBufferToWindowAndInitialize(Math.max(o.length*4,1024)),a=0,l=o.length;a<l;a++){var u=o[a];if(u>>>6!=3){this.outputByte(u);continue}var c=u>>>5;if(a==l-1||a==l-2&&c==7){this.inputBufferRemainder=o.subarray(a);break}if(o[a+1]>>>7===1)this.outputByte(u);else{var d=u&31,h=void 0;c==6?(h=o[a+1],a+=1):(h=o[a+1]<<8|o[a+2],a+=2);for(var p=this.outputPosition-h,b=0;b<d;b++)this.outputByte(this.outputBuffer[p+b])}}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),n.CompressionCommon.getCroppedBuffer(this.outputBuffer,s,this.outputPosition-s)},i.prototype.outputByte=function(o){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=n.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=o},i.prototype.cropOutputBufferToWindowAndInitialize=function(o){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(o),0;var s=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=n.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-s,s,o),this.outputPosition=s,this.outputBufferRemainder){for(var a=0;a<this.outputBufferRemainder.length;a++)this.outputByte(this.outputBufferRemainder[a]);this.outputBufferRemainder=void 0}return s},i.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var o=1;o<=4&&this.outputPosition-o>=0;o++){var s=this.outputBuffer[this.outputPosition-o];if(o<4&&s>>>3===30||o<3&&s>>>4===14||o<2&&s>>>5===6){this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-o,this.outputPosition),this.outputPosition-=o;return}}},i}();n.Decompressor=r})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),s=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),a="=",l=61;i.encode=function(u){return!u||u.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(u).toString("base64"):i.encodeWithJS(u)},i.decode=function(u){return u?n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(u,"base64")):i.decodeWithJS(u):new Uint8Array(0)},i.encodeWithJS=function(u,c){if(c===void 0&&(c=!0),!u||u.length==0)return"";for(var d=o,h=new n.StringBuilder,p,b=0,g=u.length;b<g;b+=3)b<=g-3?(p=u[b]<<16|u[b+1]<<8|u[b+2],h.appendCharCode(d[p>>>18&63]),h.appendCharCode(d[p>>>12&63]),h.appendCharCode(d[p>>>6&63]),h.appendCharCode(d[p&63]),p=0):b===g-2?(p=u[b]<<16|u[b+1]<<8,h.appendCharCode(d[p>>>18&63]),h.appendCharCode(d[p>>>12&63]),h.appendCharCode(d[p>>>6&63]),c&&h.appendCharCode(l)):b===g-1&&(p=u[b]<<16,h.appendCharCode(d[p>>>18&63]),h.appendCharCode(d[p>>>12&63]),c&&(h.appendCharCode(l),h.appendCharCode(l)));return h.getOutputString()},i.decodeWithJS=function(u,c){if(!u||u.length==0)return new Uint8Array(0);var d=u.length%4;if(d===1)throw new Error("Invalid Base64 string: length % 4 == 1");d===2?u+=a+a:d===3&&(u+=a),c||(c=new Uint8Array(u.length));for(var h=0,p=u.length,b=0;b<p;b+=4){var g=s[u.charCodeAt(b)]<<18|s[u.charCodeAt(b+1)]<<12|s[u.charCodeAt(b+2)]<<6|s[u.charCodeAt(b+3)];c[h++]=g>>>16&255,c[h++]=g>>>8&255,c[h++]=g&255}return u.charCodeAt(p-1)==l&&h--,u.charCodeAt(p-2)==l&&h--,c.subarray(0,h)}})(r.Base64||(r.Base64={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){if(o==null)throw new TypeError("BinaryString.encode: undefined or null input received");if(o.length===0)return"";for(var s=o.length,a=new n.StringBuilder,l=0,u=1,c=0;c<s;c+=2){var d=void 0;c==s-1?d=o[c]<<8:d=o[c]<<8|o[c+1],a.appendCharCode(l<<16-u|d>>>u),l=d&(1<<u)-1,u===15?(a.appendCharCode(l),l=0,u=1):u+=1,c>=s-2&&a.appendCharCode(l<<16-u)}return a.appendCharCode(32768|s%2),a.getOutputString()},i.decode=function(o){if(typeof o!="string")throw new TypeError("BinaryString.decode: invalid input type");if(o=="")return new Uint8Array(0);for(var s=new Uint8Array(o.length*3),a=0,l=function(p){s[a++]=p>>>8,s[a++]=p&255},u=0,c=0,d=0;d<o.length;d++){var h=o.charCodeAt(d);if(h>=32768){h==32769&&a--,c=0;continue}c==0?u=h:(l(u<<c|h>>>15-c),u=h&(1<<15-c)-1),c==15?c=0:c+=1}return s.subarray(0,a)}})(r.BinaryString||(r.BinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encodeFromString=function(o,s){var a=o.charCodeAt(s);if(a<55296||a>56319)return a;var l=o.charCodeAt(s+1);if(l>=56320&&l<=57343)return 65536+((a-55296<<10)+(l-56320));throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(a,", followed by ").concat(l,", which is not a trailing surrogate character code."))},i.decodeToString=function(o){if(o<=65535)return String.fromCharCode(o);if(o<=1114111)return String.fromCharCode(55296+(o-65536>>>10),56320+(o-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))}})(r.CodePoint||(r.CodePoint={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];i.encode=function(s){for(var a=[],l=0;l<s.length;l++)a.push(o[s[l]]);return a.join(" ")}})(r.DecimalString||(r.DecimalString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){return r.BinaryString.encode(o).replace(/\0/g,"")},i.decode=function(o){return r.BinaryString.decode(o.replace(/\u8002/g,"\0"))}})(r.StorageBinaryString||(r.StorageBinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o,s;i.encode=function(a){return!a||a.length==0?new Uint8Array(0):n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(a,"utf8")):i.createNativeTextEncoderAndDecoderIfAvailable()?o.encode(a):i.encodeWithJS(a)},i.decode=function(a){return!a||a.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(a).toString("utf8"):i.createNativeTextEncoderAndDecoderIfAvailable()?s.decode(a):i.decodeWithJS(a)},i.encodeWithJS=function(a,l){if(!a||a.length==0)return new Uint8Array(0);l||(l=new Uint8Array(a.length*4));for(var u=0,c=0;c<a.length;c++){var d=r.CodePoint.encodeFromString(a,c);if(d<=127)l[u++]=d;else if(d<=2047)l[u++]=192|d>>>6,l[u++]=128|d&63;else if(d<=65535)l[u++]=224|d>>>12,l[u++]=128|d>>>6&63,l[u++]=128|d&63;else if(d<=1114111)l[u++]=240|d>>>18,l[u++]=128|d>>>12&63,l[u++]=128|d>>>6&63,l[u++]=128|d&63,c++;else throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)")}return l.subarray(0,u)},i.decodeWithJS=function(a,l,u){if(l===void 0&&(l=0),!a||a.length==0)return"";u===void 0&&(u=a.length);for(var c=new n.StringBuilder,d,h,p=l,b=u;p<b;){if(h=a[p],!(h>>>7))d=h,p+=1;else if(h>>>5===6){if(p+1>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);d=(h&31)<<6|a[p+1]&63,p+=2}else if(h>>>4===14){if(p+2>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);d=(h&15)<<12|(a[p+1]&63)<<6|a[p+2]&63,p+=3}else if(h>>>3===30){if(p+3>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);d=(h&7)<<18|(a[p+1]&63)<<12|(a[p+2]&63)<<6|a[p+3]&63,p+=4}else throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+p);c.appendCodePoint(d)}return c.getOutputString()},i.createNativeTextEncoderAndDecoderIfAvailable=function(){return o?!0:typeof TextEncoder=="function"?(o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8"),!0):!1}})(r.UTF8||(r.UTF8={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){function r(y,v){if(v===void 0&&(v={}),y==null)throw new TypeError("compress: undefined or null input received");var w=n.CompressionCommon.detectCompressionSourceEncoding(y);v=n.ObjectTools.override({inputEncoding:w,outputEncoding:"ByteArray"},v);var E=new n.Compressor,S=E.compressBlock(y);return n.CompressionCommon.encodeCompressedBytes(S,v.outputEncoding)}n.compress=r;function i(y,v){if(v===void 0&&(v={}),y==null)throw new TypeError("decompress: undefined or null input received");v=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},v);var w=n.CompressionCommon.decodeCompressedBytes(y,v.inputEncoding),E=new n.Decompressor,S=E.decompressBlock(w);return n.CompressionCommon.encodeDecompressedBytes(S,v.outputEncoding)}n.decompress=i;function o(y,v,w){w==null&&(w=function(){});var E;try{E=n.CompressionCommon.detectCompressionSourceEncoding(y)}catch(S){w(void 0,S);return}v=n.ObjectTools.override({inputEncoding:E,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},v),n.enqueueImmediate(function(){v.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.compressAsync(y,v,w):n.AsyncCompressor.compressAsync(y,v,w)})}n.compressAsync=o;function s(y,v,w){if(w==null&&(w=function(){}),y==null){w(void 0,new TypeError("decompressAsync: undefined or null input received"));return}v=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},v);var E=n.BufferTools.convertToUint8ArrayIfNeeded(y);n.EventLoop.enqueueImmediate(function(){v.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.decompressAsync(E,v,w):n.AsyncDecompressor.decompressAsync(y,v,w)})}n.decompressAsync=s;function a(){return n.AsyncCompressor.createCompressionStream()}n.createCompressionStream=a;function l(){return n.AsyncDecompressor.createDecompressionStream()}n.createDecompressionStream=l;function u(y){return n.Encoding.UTF8.encode(y)}n.encodeUTF8=u;function c(y){return n.Encoding.UTF8.decode(y)}n.decodeUTF8=c;function d(y){return n.Encoding.Base64.encode(y)}n.encodeBase64=d;function h(y){return n.Encoding.Base64.decode(y)}n.decodeBase64=h;function p(y){return n.Encoding.BinaryString.encode(y)}n.encodeBinaryString=p;function b(y){return n.Encoding.BinaryString.decode(y)}n.decodeBinaryString=b;function g(y){return n.Encoding.StorageBinaryString.encode(y)}n.encodeStorageBinaryString=g;function x(y){return n.Encoding.StorageBinaryString.decode(y)}n.decodeStorageBinaryString=x})(t||(t={}))})(e$);var nse=e$.exports;const Wa=Xs(nse);function l$(){const e=Zs(async()=>(await kt.systems.toArray()).filter(n=>!n.deleted_at),[]);return{systems:e||[],isLoading:e===void 0}}function u$(){const e=Zs(async()=>(await kt.characters.toArray()).filter(n=>!n.deleted_at),[]);return{characters:e||[],isLoading:e===void 0}}const c$=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string({invalid_type_error:"user_id must be a string"}),name:ct.string(),data:ct.object({}),system:ct.object({local_id:ct.string(),version_id:ct.string()}),created_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).optional()}),rse=async(e,t,n)=>{try{const{user:r}=pr.get(),i=(r==null?void 0:r.id)||"none";let o=await Dr();for(;!await Ta(o);)o=await Dr();const s={local_id:o,user_id:i,name:e,data:t,system:n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},a=c$.safeParse(s);if(!a.success){console.log("Invalid character data:",a.error.format());return}let l=await Cn.get("updated_characters")||[];return l.includes(s.local_id)||await Cn.set("updated_characters",[...l,s.local_id]),await kt.characters.add(s)}catch(r){console.log("Error creating character:",r)}},ise=async(e,t)=>{try{let n=await Cn.get("updated_characters")||[];return n.includes(e)||await Cn.set("updated_characters",[...n,e]),await kt.characters.update(e,{name:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error renaming character:",n)}},ose=async(e,t)=>{try{let n=await Cn.get("updated_characters")||[];return n.includes(e)||await Cn.set("updated_characters",[...n,e]),await kt.characters.update(e,{data:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error updating character data:",n)}},sse=async e=>{try{let t=await Cn.get("updated_characters")||[];return t.includes(e)||await Cn.set("updated_characters",[...t,e]),await kt.characters.update(e,{deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(t){console.log("Error deleting character:",t)}},ase=async e=>{try{let t=e.local_id||"deviceId-".concat(oE());if(await kt.characters.get({id:e.id||""})!==void 0){console.log("Character already exists in the database");return}if(await kt.characters.get({local_id:t})!==void 0){console.log("Character already exists in the database");return}if(!await kt.systems.get({local_id:e.system.local_id})){console.log("System not found in the database");return}const i={...e,updated_at:new Date().toISOString()};{const o=c$.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}}return await kt.characters.add(i)}catch(t){console.log("Error creating system:",t)}};var xo,De=typeof window<"u"?window:void 0,mi=typeof globalThis<"u"?globalThis:De,d$=Array.prototype,jA=d$.forEach,AA=d$.indexOf,Oi=mi==null?void 0:mi.navigator,xt=mi==null?void 0:mi.document,fi=mi==null?void 0:mi.location,d_=mi==null?void 0:mi.fetch,f_=mi!=null&&mi.XMLHttpRequest&&"withCredentials"in new mi.XMLHttpRequest?mi.XMLHttpRequest:void 0,RA=mi==null?void 0:mi.AbortController,ci=Oi==null?void 0:Oi.userAgent,Ut=De!=null?De:{},Rs={DEBUG:!1,LIB_VERSION:"1.240.5"},Yb="$copy_autocapture",lse=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(e){e.GZipJS="gzip-js",e.Base64="base64"})(xo||(xo={}));var use=["fatal","error","warning","log","info","debug"];function Yt(e,t){return e.indexOf(t)!==-1}var Iv=function(e){return e.trim()},h_=function(e){return e.replace(/^\$/,"")},cse=Array.isArray,f$=Object.prototype,h$=f$.hasOwnProperty,Pv=f$.toString,Ln=cse||function(e){return Pv.call(e)==="[object Array]"},no=e=>typeof e=="function",Bn=e=>e===Object(e)&&!Ln(e),Uu=e=>{if(Bn(e)){for(var t in e)if(h$.call(e,t))return!1;return!0}return!1},yt=e=>e===void 0,Qn=e=>Pv.call(e)=="[object String]",p_=e=>Qn(e)&&e.trim().length===0,nl=e=>e===null,sn=e=>yt(e)||nl(e),Br=e=>Pv.call(e)=="[object Number]",Ps=e=>Pv.call(e)==="[object Boolean]",dse=e=>e instanceof FormData,fse=e=>Yt(lse,e),p$=e=>{var t={t:function(n){if(De&&(Rs.DEBUG||Ut.POSTHOG_DEBUG)&&!yt(De.console)&&De.console){for(var r=("__rrweb_original__"in De.console[n])?De.console[n].__rrweb_original__:De.console[n],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];r(e,...o)}},info:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];console.error(e,...r)},uninitializedWarning:n=>{t.error("You must initialize PostHog before calling "+n)},createLogger:n=>p$(e+" "+n)};return t},Ct=p$("[PostHog.js]"),Kr=Ct.createLogger,hse=Kr("[ExternalScriptsLoader]"),NA=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return hse.warn(t+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=xt==null?void 0:xt.querySelectorAll("script");if(r){for(var i=0;i<r.length;i++)if(r[i].src===t)return n()}var o=()=>{if(!xt)return n("document not found");var s=xt.createElement("script");if(s.type="text/javascript",s.crossOrigin="anonymous",s.src=t,s.onload=u=>n(void 0,u),s.onerror=u=>n(u),e.config.prepare_external_dependency_script&&(s=e.config.prepare_external_dependency_script(s)),!s)return n("prepare_external_dependency_script returned null");var a,l=xt.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(s,l[0]):xt.body.appendChild(s)};xt!=null&&xt.body?o():xt==null||xt.addEventListener("DOMContentLoaded",o)};function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bt.apply(this,arguments)}function g$(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Ut.__PosthogExtensions__=Ut.__PosthogExtensions__||{},Ut.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{var r="/static/"+t+".js?v="+e.version;if(t==="remote-config"&&(r="/array/"+e.config.token+"/config.js"),t==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var o=e.requestRouter.endpointFor("assets",r);NA(e,o,n)},Ut.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{var r=e.requestRouter.endpointFor("api",t);NA(e,r,n)};var Ym={};function Pa(e,t,n){if(Ln(e)){if(jA&&e.forEach===jA)e.forEach(t,n);else if("length"in e&&e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===Ym)return}}}function fn(e,t,n){if(!sn(e)){if(Ln(e))return Pa(e,t,n);if(dse(e)){for(var r of e.entries())if(t.call(n,r[1],r[0])===Ym)return}else for(var i in e)if(h$.call(e,i)&&t.call(n,e[i],i)===Ym)return}}var Kn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pa(n,function(i){for(var o in i)i[o]!==void 0&&(e[o]=i[o])}),e},Ov=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pa(n,function(i){Pa(i,function(o){e.push(o)})}),e};function Cg(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var TA=function(e){try{return e()}catch(t){return}},pse=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(i){Ct.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ct.critical(i)}}},WE=function(e){var t={};return fn(e,function(n,r){(Qn(n)&&n.length>0||Br(n))&&(t[r]=n)}),t};function gse(e,t){return n=e,r=o=>Qn(o)&&!nl(t)?o.slice(0,t):o,i=new Set,function o(s,a){return s!==Object(s)?r?r(s,a):s:i.has(s)?void 0:(i.add(s),Ln(s)?(l=[],Pa(s,u=>{l.push(o(u))})):(l={},fn(s,(u,c)=>{i.has(u)||(l[c]=o(u,c))})),l);var l}(n);var n,r,i}var mse=["herokuapp.com","vercel.app","netlify.app"];function yse(e){var t=e==null?void 0:e.hostname;if(!Qn(t))return!1;var n=t.split(".").slice(-2).join(".");for(var r of mse)if(n===r)return!1;return!0}function m$(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function Rn(e,t,n,r){var{capture:i=!1,passive:o=!0}=r!=null?r:{};e==null||e.addEventListener(t,n,{capture:i,passive:o})}var y$="$people_distinct_id",Ld="__alias",Bd="__timers",IA="$autocapture_disabled_server_side",g_="$heatmaps_enabled_server_side",PA="$exception_capture_enabled_server_side",OA="$web_vitals_enabled_server_side",v$="$dead_clicks_enabled_server_side",$A="$web_vitals_allowed_metrics",m_="$session_recording_enabled_server_side",MA="$console_log_recording_enabled_server_side",DA="$session_recording_network_payload_capture",LA="$session_recording_masking",BA="$session_recording_canvas_recording",FA="$replay_sample_rate",zA="$replay_minimum_duration",HA="$replay_script_config",Xm="$sesid",Fd="$session_is_sampled",y_="$session_recording_url_trigger_activated_session",v_="$session_recording_event_trigger_activated_session",Wu="$enabled_feature_flags",jg="$early_access_features",b_="$feature_flag_details",zd="$stored_person_properties",xl="$stored_group_properties",w_="$surveys",Vp="$surveys_activated",Jm="$flag_call_reported",_s="$user_state",x_="$client_session_props",__="$capture_rate_limit",E_="$initial_campaign_params",S_="$initial_referrer_info",k_="$initial_person_info",Qm="$epp",b$="__POSTHOG_TOOLBAR__",UA="$posthog_cookieless",vse=[y$,Ld,"__cmpns",Bd,m_,g_,Xm,Wu,_s,jg,b_,xl,zd,w_,Jm,x_,__,E_,S_,Qm];function WA(e){return e instanceof Element&&(e.id===b$||!(e.closest==null||!e.closest(".toolbar-global-fade-container")))}function $v(e){return!!e&&e.nodeType===1}function Oa(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function w$(e){return!!e&&e.nodeType===3}function x$(e){return!!e&&e.nodeType===11}function VE(e){return e?Iv(e).split(/\s+/):[]}function VA(e){var t=De==null?void 0:De.location.href;return!!(t&&e&&e.some(n=>t.match(n)))}function Zm(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return VE(t)}function _$(e){return sn(e)?null:Iv(e).split(/(\s+)/).filter(t=>Nc(t)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Mv(e){var t="";return j_(e)&&!k$(e)&&e.childNodes&&e.childNodes.length&&fn(e.childNodes,function(n){var r;w$(n)&&n.textContent&&(t+=(r=_$(n.textContent))!==null&&r!==void 0?r:"")}),Iv(t)}function E$(e){return yt(e.target)?e.srcElement||null:(t=e.target)!=null&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var C_=["a","button","form","input","select","textarea","label"];function S$(e){var t=e.parentNode;return!(!t||!$v(t))&&t}function bse(e,t,n,r,i){var o,s,a;if(n===void 0&&(n=void 0),!De||!e||Oa(e,"html")||!$v(e)||(o=n)!=null&&o.url_allowlist&&!VA(n.url_allowlist)||(s=n)!=null&&s.url_ignorelist&&VA(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(x=>t.type===x))return!1}for(var u=!1,c=[e],d=!0,h=e;h.parentNode&&!Oa(h,"body");)if(x$(h.parentNode))c.push(h.parentNode.host),h=h.parentNode.host;else{if(!(d=S$(h)))break;if(r||C_.indexOf(d.tagName.toLowerCase())>-1)u=!0;else{var p=De.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(u=!0)}c.push(d),h=d}if(!function(x,y){var v=y==null?void 0:y.element_allowlist;if(yt(v))return!0;var w=function(A){if(v.some(T=>A.tagName.toLowerCase()===T))return{v:!0}};for(var E of x){var S=w(E);if(typeof S=="object")return S.v}return!1}(c,n)||!function(x,y){var v=y==null?void 0:y.css_selector_allowlist;if(yt(v))return!0;var w=function(A){if(v.some(T=>A.matches(T)))return{v:!0}};for(var E of x){var S=w(E);if(typeof S=="object")return S.v}return!1}(c,n))return!1;var b=De.getComputedStyle(e);if(b&&b.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var g=e.tagName.toLowerCase();switch(g){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(C_.indexOf(g)>-1||e.getAttribute("contenteditable")==="true")}}function j_(e){for(var t=e;t.parentNode&&!Oa(t,"body");t=t.parentNode){var n=Zm(t);if(Yt(n,"ph-sensitive")||Yt(n,"ph-no-capture"))return!1}if(Yt(Zm(e),"ph-include"))return!0;var r=e.type||"";if(Qn(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!(Qn(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function k$(e){return!!(Oa(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Oa(e,"select")||Oa(e,"textarea")||e.getAttribute("contenteditable")==="true")}var C$="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",wse=new RegExp("^(?:"+C$+")$"),xse=new RegExp(C$),j$="\\d{3}-?\\d{2}-?\\d{4}",_se=new RegExp("^("+j$+")$"),Ese=new RegExp("("+j$+")");function Nc(e,t){return t===void 0&&(t=!0),!(sn(e)||Qn(e)&&(e=Iv(e),(t?wse:xse).test((e||"").replace(/[- ]/g,""))||(t?_se:Ese).test(e)))}function A$(e){var t=Mv(e);return Nc(t=(t+" "+R$(e)).trim())?t:""}function R$(e){var t="";return e&&e.childNodes&&e.childNodes.length&&fn(e.childNodes,function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=Mv(n);t=(t+" "+i).trim(),n.childNodes&&n.childNodes.length&&(t=(t+" "+R$(n)).trim())}catch(o){Ct.error("[AutoCapture]",o)}}),t}function Sse(e){return function(t){var n=t.map(r=>{var i,o,s="";if(r.tag_name&&(s+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))s+="."+a.replace(/"/g,"");var l=bt({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(o=r.nth_of_type)!==null&&o!==void 0?o:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return Cg(l).sort((c,d)=>{var[h]=c,[p]=d;return h.localeCompare(p)}).forEach(c=>{var[d,h]=c;return u[qA(d.toString())]=qA(h.toString())}),s+=":",s+=Cg(l).map(c=>{var[d,h]=c;return d+'="'+h+'"'}).join("")});return n.join(";")}(function(t){return t.map(n=>{var r,i,o={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)==null?void 0:i.slice(0,2048),attr_class:kse(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Cg(n).filter(s=>{var[a]=s;return a.indexOf("attr__")===0}).forEach(s=>{var[a,l]=s;return o.attributes[a]=l}),o})}(e))}function qA(e){return e.replace(/"|\\"/g,'\\"')}function kse(e){var t=e.attr__class;return t?Ln(t)?t:VE(t):void 0}class N${constructor(){this.clicks=[]}isRageClick(t,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(t-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:t,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:t,y:n,timestamp:r}];return!1}}var Cse=["localhost","127.0.0.1"],Tc=e=>{var t=xt==null?void 0:xt.createElement("a");return yt(t)?null:(t.href=e,t)},jse=function(e,t){var n,r;t===void 0&&(t="&");var i=[];return fn(e,function(o,s){yt(o)||yt(s)||s==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(o)?o.name:o.toString()),r=encodeURIComponent(s),i[i.length]=r+"="+n)}),i.join(t)},ey=function(e,t){for(var n,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t){n=o;break}}if(!Ln(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch(a){Ct.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},qE=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),i=r[0]||"",o=r[1],s=i.split("?"),a=s[1],l=s[0],u=(a||"").split("&"),c=[],d=0;d<u.length;d++){var h=u[d].split("=");Ln(h)&&(t.includes(h[0])?c.push(h[0]+"="+n):c.push(u[d]))}var p=l;return a!=null&&(p+="?"+c.join("&")),o!=null&&(p+="#"+o),p},ty=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},KA=Kr("[AutoCapture]");function Xb(e,t){return t.length>e?t.slice(0,e)+"...":t}function Ase(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!$v(t));return t}function Rse(e,t,n,r){var i=e.tagName.toLowerCase(),o={tag_name:i};C_.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?o.$el_text=Xb(1024,A$(e)):o.$el_text=Xb(1024,Mv(e)));var s=Zm(e);s.length>0&&(o.classes=s.filter(function(c){return c!==""})),fn(e.attributes,function(c){var d;if((!k$(e)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(r==null||!r.includes(c.name))&&!t&&Nc(c.value)&&(d=c.name,!Qn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var h=c.value;c.name==="class"&&(h=VE(h).join(" ")),o["attr__"+c.name]=Xb(1024,h)}});for(var a=1,l=1,u=e;u=Ase(u);)a++,u.tagName===e.tagName&&l++;return o.nth_child=a,o.nth_of_type=l,o}function Nse(e,t){for(var n,r,{e:i,maskAllElementAttributes:o,maskAllText:s,elementAttributeIgnoreList:a,elementsChainAsString:l}=t,u=[e],c=e;c.parentNode&&!Oa(c,"body");)x$(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var d,h=[],p={},b=!1,g=!1;if(fn(u,E=>{var S=j_(E);E.tagName.toLowerCase()==="a"&&(b=E.getAttribute("href"),b=S&&b&&Nc(b)&&b),Yt(Zm(E),"ph-no-capture")&&(g=!0),h.push(Rse(E,o,s,a));var A=function(T){if(!j_(T))return{};var $={};return fn(T.attributes,function(q){if(q.name&&q.name.indexOf("data-ph-capture-attribute")===0){var D=q.name.replace("data-ph-capture-attribute-",""),U=q.value;D&&U&&Nc(U)&&($[D]=U)}}),$}(E);Kn(p,A)}),g)return{props:{},explicitNoCapture:g};if(s||(e.tagName.toLowerCase()==="a"||e.tagName.toLowerCase()==="button"?h[0].$el_text=A$(e):h[0].$el_text=Mv(e)),b){var x,y;h[0].attr__href=b;var v=(x=Tc(b))==null?void 0:x.host,w=De==null||(y=De.location)==null?void 0:y.host;v&&w&&v!==w&&(d=b)}return{props:Kn({$event_type:i.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:Sse(h)},(n=h[0])!=null&&n.$el_text?{$el_text:(r=h[0])==null?void 0:r.$el_text}:{},d&&i.type==="click"?{$external_click_url:d}:{},p)}}class Tse{constructor(t){this.i=!1,this.o=null,this.rageclicks=new N$,this.h=!1,this.instance=t,this.m=null}get S(){var t,n,r=Bn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(t=r.url_allowlist)==null?void 0:t.map(i=>new RegExp(i)),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map(i=>new RegExp(i)),r}$(){if(this.isBrowserSupported()){if(De&&xt){var t=r=>{r=r||(De==null?void 0:De.event);try{this.k(r)}catch(i){KA.error("Failed to capture event",i)}};if(Rn(xt,"submit",t,{capture:!0}),Rn(xt,"change",t,{capture:!0}),Rn(xt,"click",t,{capture:!0}),this.S.capture_copied_text){var n=r=>{r=r||(De==null?void 0:De.event),this.k(r,Yb)};Rn(xt,"copy",n,{capture:!0}),Rn(xt,"cut",n,{capture:!0})}}}else KA.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.h=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[IA]:!!t.autocapture_opt_out}),this.o=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.m=t}getElementSelectors(t){var n,r=[];return(n=this.m)==null||n.forEach(i=>{var o=xt==null?void 0:xt.querySelectorAll(i);o==null||o.forEach(s=>{t===s&&r.push(i)})}),r}get isEnabled(){var t,n,r=(t=this.instance.persistence)==null?void 0:t.props[IA],i=this.o;if(nl(i)&&!Ps(r)&&!this.instance.config.advanced_disable_decide)return!1;var o=(n=this.o)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!o}k(t,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,i=E$(t);w$(i)&&(i=i.parentNode||null),n==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.k(t,"$rageclick");var o=n===Yb;if(i&&bse(i,t,this.S,o,o?["copy","cut"]:void 0)){var{props:s,explicitNoCapture:a}=Nse(i,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(s.$element_selectors=l),n===Yb){var u,c=_$(De==null||(u=De.getSelection())==null?void 0:u.toString()),d=t.type||"clipboard";if(!c)return!1;s.$selected_content=c,s.$copy_type=d}return this.instance.capture(n,s),!0}}}isBrowserSupported(){return no(xt==null?void 0:xt.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Br(e)&&isFinite(e)&&Math.floor(e)===e});var GA="0123456789abcdef";class ny{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=t/Math.pow(2,40),o[1]=t/Math.pow(2,32),o[2]=t/Math.pow(2,24),o[3]=t/Math.pow(2,16),o[4]=t/Math.pow(2,8),o[5]=t,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new ny(o)}toString(){for(var t="",n=0;n<this.bytes.length;n++)t=t+GA.charAt(this.bytes[n]>>>4)+GA.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new ny(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(var n=0;n<16;n++){var r=this.bytes[n]-t.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class Ise{constructor(){this.I=0,this.P=0,this.R=new Pse}generate(){var t=this.generateOrAbort();if(yt(t)){this.I=0;var n=this.generateOrAbort();if(yt(n))throw new Error("Could not generate UUID after timestamp reset");return n}return t}generateOrAbort(){var t=Date.now();if(t>this.I)this.I=t,this.T();else{if(!(t+1e4>this.I))return;this.P++,this.P>4398046511103&&(this.I++,this.T())}return ny.fromFieldsV7(this.I,Math.trunc(this.P/Math.pow(2,30)),this.P&Math.pow(2,30)-1,this.R.nextUint32())}T(){this.P=1024*this.R.nextUint32()+(1023&this.R.nextUint32())}}var YA,T$=e=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};De&&!yt(De.crypto)&&crypto.getRandomValues&&(T$=e=>crypto.getRandomValues(e));class Pse{constructor(){this.M=new Uint32Array(8),this.C=1/0}nextUint32(){return this.C>=this.M.length&&(T$(this.M),this.C=0),this.M[this.C++]}}var xa=()=>Ose().toString(),Ose=()=>(YA||(YA=new Ise)).generate(),$se="Thu, 01 Jan 1970 00:00:00 GMT",_d="",Mse=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function Dse(e,t){if(t){var n=function(i,o){if(o===void 0&&(o=xt),_d)return _d;if(!o||["localhost","127.0.0.1"].includes(i))return"";for(var s=i.split("."),a=Math.min(s.length,8),l="dmn_chk_"+xa(),u=new RegExp("(^|;)\\s*"+l+"=1");!_d&&a--;){var c=s.slice(a).join("."),d=l+"=1;domain=."+c;o.cookie=d,u.test(o.cookie)&&(o.cookie=d+";expires="+$se,_d=c)}return _d}(e);if(!n){var r=(i=>{var o=i.match(Mse);return o?o[0]:""})(e);r!==n&&Ct.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var pa,Bs={O:()=>!!xt,F:function(e){Ct.error("cookieStore error: "+e)},A:function(e){if(xt){try{for(var t=e+"=",n=xt.cookie.split(";").filter(o=>o.length),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return decodeURIComponent(i.substring(t.length,i.length))}}catch(o){}return null}},D:function(e){var t;try{t=JSON.parse(Bs.A(e))||{}}catch(n){}return t},j:function(e,t,n,r,i){if(xt)try{var o="",s="",a=Dse(xt.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),o="; expires="+l.toUTCString()}i&&(s="; secure");var u=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return u.length>3686.4&&Ct.warn("cookieStore warning: large cookie, len="+u.length),xt.cookie=u,u}catch(c){return}},L:function(e,t){try{Bs.j(e,"",-1,t)}catch(n){return}}},Jb=null,rr={O:function(){if(!nl(Jb))return Jb;var e=!0;if(yt(De))e=!1;else try{var t="__mplssupport__";rr.j(t,"xyz"),rr.A(t)!=='"xyz"'&&(e=!1),rr.L(t)}catch(n){e=!1}return e||Ct.error("localStorage unsupported; falling back to cookie store"),Jb=e,e},F:function(e){Ct.error("localStorage error: "+e)},A:function(e){try{return De==null?void 0:De.localStorage.getItem(e)}catch(t){rr.F(t)}return null},D:function(e){try{return JSON.parse(rr.A(e))||{}}catch(t){}return null},j:function(e,t){try{De==null||De.localStorage.setItem(e,JSON.stringify(t))}catch(n){rr.F(n)}},L:function(e){try{De==null||De.localStorage.removeItem(e)}catch(t){rr.F(t)}}},Lse=["distinct_id",Xm,Fd,Qm,k_],qp=bt({},rr,{D:function(e){try{var t={};try{t=Bs.D(e)||{}}catch(r){}var n=Kn(t,JSON.parse(rr.A(e)||"{}"));return rr.j(e,n),n}catch(r){}return null},j:function(e,t,n,r,i,o){try{rr.j(e,t,void 0,void 0,o);var s={};Lse.forEach(a=>{t[a]&&(s[a]=t[a])}),Object.keys(s).length&&Bs.j(e,s,n,r,i,o)}catch(a){rr.F(a)}},L:function(e,t){try{De==null||De.localStorage.removeItem(e),Bs.L(e,t)}catch(n){rr.F(n)}}}),Kp={},Bse={O:function(){return!0},F:function(e){Ct.error("memoryStorage error: "+e)},A:function(e){return Kp[e]||null},D:function(e){return Kp[e]||null},j:function(e,t){Kp[e]=t},L:function(e){delete Kp[e]}},cl=null,wr={O:function(){if(!nl(cl))return cl;if(cl=!0,yt(De))cl=!1;else try{var e="__support__";wr.j(e,"xyz"),wr.A(e)!=='"xyz"'&&(cl=!1),wr.L(e)}catch(t){cl=!1}return cl},F:function(e){Ct.error("sessionStorage error: ",e)},A:function(e){try{return De==null?void 0:De.sessionStorage.getItem(e)}catch(t){wr.F(t)}return null},D:function(e){try{return JSON.parse(wr.A(e))||null}catch(t){}return null},j:function(e,t){try{De==null||De.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){wr.F(n)}},L:function(e){try{De==null||De.sessionStorage.removeItem(e)}catch(t){wr.F(t)}}};(function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"})(pa||(pa={}));class Fse{constructor(t){this._instance=t}get S(){return this._instance.config}get consent(){return this.N()?pa.DENIED:this.U}isOptedOut(){return this.consent===pa.DENIED||this.consent===pa.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.q.j(this.B,t?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.q.L(this.B,this.S.cross_subdomain_cookie)}get B(){var{token:t,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+t}get U(){var t=this.q.A(this.B);return t==="1"?pa.GRANTED:t==="0"?pa.DENIED:pa.PENDING}get q(){if(!this.H){var t=this.S.opt_out_capturing_persistence_type;this.H=t==="localStorage"?rr:Bs;var n=t==="localStorage"?Bs:rr;n.A(this.B)&&(this.H.A(this.B)||this.optInOut(n.A(this.B)==="1"),n.L(this.B,this.S.cross_subdomain_cookie))}return this.H}N(){return!!this.S.respect_dnt&&!!m$([Oi==null?void 0:Oi.doNotTrack,Oi==null?void 0:Oi.msDoNotTrack,Ut.doNotTrack],t=>Yt([!0,1,"1","yes"],t))}}var Gp=Kr("[Dead Clicks]"),zse=()=>!0,Hse=e=>{var t,n=!((t=e.instance.persistence)==null||!t.get_property(v$)),r=e.instance.config.capture_dead_clicks;return Ps(r)?r:n};class I${get lazyLoadedDeadClicksAutocapture(){return this.W}constructor(t,n,r){this.instance=t,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[v$]:t==null?void 0:t.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.G(()=>{this.J()})}G(t){var n,r;(n=Ut.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&t(),(r=Ut.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",i=>{i?Gp.error("failed to load script",i):t()})}J(){var t;if(xt){if(!this.W&&(t=Ut.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture){var n=Bn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.W=Ut.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.W.start(xt),Gp.info("starting...")}}else Gp.error("`document` not found. Cannot start.")}stop(){this.W&&(this.W.stop(),this.W=void 0,Gp.info("stopping..."))}}var Qb=Kr("[ExceptionAutocapture]");class Use{constructor(t){var n;this.V=()=>{var r;if(De&&this.isEnabled&&(r=Ut.__PosthogExtensions__)!=null&&r.errorWrappingFunctions){var i=Ut.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=Ut.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,s=Ut.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.K&&this.S.capture_unhandled_errors&&(this.K=i(this.captureException.bind(this))),!this.Y&&this.S.capture_unhandled_rejections&&(this.Y=o(this.captureException.bind(this))),!this.X&&this.S.capture_console_errors&&(this.X=s(this.captureException.bind(this)))}catch(a){Qb.error("failed to start",a),this.Z()}}},this._instance=t,this.tt=!((n=this._instance.persistence)==null||!n.props[PA]),this.S=this.it(),this.startIfEnabled()}it(){var t=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Bn(t)?n=bt({},n,t):(yt(t)?this.tt:t)&&(n=bt({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Qb.info("enabled"),this.G(this.V))}G(t){var n,r;(n=Ut.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&t(),(r=Ut.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",i=>{if(i)return Qb.error("failed to load script",i);t()})}Z(){var t,n,r;(t=this.K)==null||t.call(this),this.K=void 0,(n=this.Y)==null||n.call(this),this.Y=void 0,(r=this.X)==null||r.call(this),this.X=void 0}onRemoteConfig(t){var n=t.autocaptureExceptions;this.tt=!!n||!1,this.S=this.it(),this._instance.persistence&&this._instance.persistence.register({[PA]:this.tt}),this.startIfEnabled()}captureException(t){var n=this._instance.requestRouter.endpointFor("ui");t.$exception_personURL=n+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id(),this._instance.exceptions.sendExceptionEvent(t)}}function P$(e){return!yt(Event)&&O$(e,Event)}function O$(e,t){try{return e instanceof t}catch(n){return!1}}function $$(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return O$(e,Error)}}function Ag(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function Zb(e){return Ag(e,"DOMError")}var XA=/\(error: (.*)\)/,JA=50,Vu="?";function ew(e,t,n,r){var i={platform:"web:javascript",filename:e,function:t==="<anonymous>"?Vu:t,in_app:!0};return yt(n)||(i.lineno=n),yt(r)||(i.colno=r),i}var Wse=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Vse=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qse=/\((\S*)(?::(\d+))(?::(\d+))\)/,Kse=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Gse=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Yse=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.sort((i,o)=>i[0]-o[0]).map(i=>i[1]);return function(i,o){o===void 0&&(o=0);for(var s=[],a=i.split("\n"),l=o;l<a.length;l++){var u=a[l];if(!(u.length>1024)){var c=XA.test(u)?u.replace(XA,"$1"):u;if(!c.match(/\S*Error: /)){for(var d of r){var h=d(c);if(h){s.push(h);break}}if(s.length>=JA)break}}}return function(p){if(!p.length)return[];var b=Array.from(p);return b.reverse(),b.slice(0,JA).map(g=>bt({},g,{filename:g.filename||Xse(b).filename,function:g.function||Vu}))}(s)}}([30,e=>{var t=Wse.exec(e);if(t){var[,n,r,i]=t;return ew(n,Vu,+r,+i)}var o=Vse.exec(e);if(o){if(o[2]&&o[2].indexOf("eval")===0){var s=qse.exec(o[2]);s&&(o[2]=s[1],o[3]=s[2],o[4]=s[3])}var[a,l]=ZA(o[1]||Vu,o[2]);return ew(l,a,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}}],[50,e=>{var t=Kse.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=Gse.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],i=t[1]||Vu;return[i,r]=ZA(i,r),ew(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]);function Xse(e){return e[e.length-1]||{}}var Yp,QA,tw,ZA=(e,t)=>{var n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Vu,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},Jse=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function KE(e,t){t===void 0&&(t=0);var n=e.stacktrace||e.stack||"",r=function(s){return s&&Qse.test(s.message)?1:0}(e);try{var i=Yse,o=function(s,a){var l=function(u){var c=globalThis._posthogChunkIds;if(!c)return{};var d=Object.keys(c);return tw&&d.length===QA||(QA=d.length,tw=d.reduce((h,p)=>{Yp||(Yp={});var b=Yp[p];if(b)h[b[0]]=b[1];else for(var g=u(p),x=g.length-1;x>=0;x--){var y=g[x],v=y==null?void 0:y.filename,w=c[p];if(v&&w){h[v]=w,Yp[p]=[v,w];break}}return h},{})),tw}(a);return s.forEach(u=>{u.filename&&(u.chunk_id=l[u.filename])}),s}(i(n,r),i);return o.slice(0,o.length-t)}catch(s){}return[]}var Qse=/Minified React error #\d+;/i;function Zse(e,t){var n,r,i=KE(e),o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)!==null&&r!==void 0&&r;return{type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:e.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(e),stacktrace:{frames:i,type:"raw"},mechanism:{handled:o,synthetic:s}}}function M$(e,t){var n=Zse(e,t);return e.cause&&$$(e.cause)&&e.cause!==e?[n,...M$(e.cause,{handled:t==null?void 0:t.handled,synthetic:t==null?void 0:t.synthetic})]:[n]}function nw(e,t){return{$exception_list:M$(e,t),$exception_level:"error"}}function rw(e,t){var n,r,i,o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,a={type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:(i=t==null?void 0:t.defaultExceptionType)!==null&&i!==void 0?i:"Error",value:e||(t==null?void 0:t.defaultExceptionMessage),mechanism:{handled:o,synthetic:s}};if(t!=null&&t.syntheticException){var l=KE(t.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function eae(e){return Qn(e)&&!p_(e)&&use.indexOf(e)>=0}function tae(e,t){var n,r,i=(n=t==null?void 0:t.handled)===null||n===void 0||n,o=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,s=t!=null&&t.overrideExceptionType?t.overrideExceptionType:P$(e)?e.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(c,d){d===void 0&&(d=40);var h=Object.keys(c);if(h.sort(),!h.length)return"[object has no keys]";for(var p=h.length;p>0;p--){var b=h.slice(0,p).join(", ");if(!(b.length>d))return p===h.length||b.length<=d?b:b.slice(0,d)+"..."}return""}(e),l={type:s,value:a,mechanism:{handled:i,synthetic:o}};if(t!=null&&t.syntheticException){var u=KE(t==null?void 0:t.syntheticException,1);u.length&&(l.stacktrace={frames:u,type:"raw"})}return{$exception_list:[l],$exception_level:eae(e.level)?e.level:"error"}}function nae(e,t){var{error:n,event:r}=e,i={$exception_list:[]},o=n||r;if(Zb(o)||function(h){return Ag(h,"DOMException")}(o)){var s=o;if(function(h){return"stack"in h}(o))i=nw(o,t);else{var a=s.name||(Zb(s)?"DOMError":"DOMException"),l=s.message?a+": "+s.message:a;i=rw(l,bt({},t,{overrideExceptionType:Zb(s)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in s&&(i.$exception_DOMException_code=""+s.code),i}if(function(h){return Ag(h,"ErrorEvent")}(o)&&o.error)return nw(o.error,t);if($$(o))return nw(o,t);if(function(h){return Ag(h,"Object")}(o)||P$(o))return tae(o,t);if(yt(n)&&Qn(r)){var u="Error",c=r,d=r.match(Jse);return d&&(u=d[1],c=d[2]),rw(c,bt({},t,{overrideExceptionType:u,defaultExceptionMessage:c}))}return rw(o,t)}function eR(e,t,n){try{if(!(t in e))return()=>{};var r=e[t],i=n(r);return no(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,()=>{e[t]=r}}catch(o){return()=>{}}}class rae{constructor(t){var n;this._instance=t,this.et=(De==null||(n=De.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ct.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.rt&&this.rt(),this.rt=void 0,Ct.info("History API monitoring stopped")}monitorHistoryChanges(){var t,n;if(De&&De.history){var r=this;(t=De.history.pushState)!=null&&t.__posthog_wrapped__||eR(De.history,"pushState",i=>function(o,s,a){i.call(this,o,s,a),r.st("pushState")}),(n=De.history.replaceState)!=null&&n.__posthog_wrapped__||eR(De.history,"replaceState",i=>function(o,s,a){i.call(this,o,s,a),r.st("replaceState")}),this.nt()}}st(t){try{var n,r=De==null||(n=De.location)==null?void 0:n.pathname;if(!r)return;r!==this.et&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:t}),this.et=r}catch(i){Ct.error("Error capturing "+t+" pageview",i)}}nt(){if(!this.rt){var t=()=>{this.st("popstate")};Rn(De,"popstate",t),this.rt=()=>{De&&De.removeEventListener("popstate",t)}}}}function ry(e){var t,n;return((t=JSON.stringify(e,(n=[],function(r,i){if(Bn(i)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(i)?"[Circular]":(n.push(i),i)}return i})))==null?void 0:t.length)||0}function A_(e,t){if(t===void 0&&(t=66060288e-1),e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[A_({size:ry(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),A_({size:ry(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap(o=>o)}return[e]}var Es=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Es||{}),go=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(go||{}),R_="[SessionRecording]",N_="redacted",Xp={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},iae=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],oae=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],sae=["/s/","/e/","/i/"];function tR(e,t,n,r){if(sn(e))return e;var i=(t==null?void 0:t["content-length"])||function(o){return new Blob([o]).size}(e);return Qn(i)&&(i=parseInt(i)),i>n?R_+" "+r+" body too large to record ("+i+" bytes)":e}function nR(e,t){if(sn(e))return e;var n=e;return Nc(n,!1)||(n=R_+" "+t+" body "+N_),fn(oae,r=>{var i,o;(i=n)!=null&&i.length&&((o=n)==null?void 0:o.indexOf(r))!==-1&&(n=R_+" "+t+" body "+N_+" as might contain: "+r)}),n}var aae=(e,t)=>{var n,r,i,o={payloadSizeLimitBytes:Xp.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Xp.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...Xp.payloadHostDenyList]},s=e.session_recording.recordHeaders!==!1&&t.recordHeaders,a=e.session_recording.recordBody!==!1&&t.recordBody,l=e.capture_performance!==!1&&t.recordPerformance,u=(n=o,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=tR(h.requestBody,h.requestHeaders,i,"Request")),h!=null&&h.responseBody&&(h.responseBody=tR(h.responseBody,h.responseHeaders,i,"Response")),h)),c=h=>{return u(((g,x)=>{var y,v=Tc(g.name),w=x.indexOf("http")===0?(y=Tc(x))==null?void 0:y.pathname:x;w==="/"&&(w="");var E=v==null?void 0:v.pathname.replace(w||"","");if(!(v&&E&&sae.some(S=>E.indexOf(S)===0)))return g})((b=(p=h).requestHeaders,sn(b)||fn(Object.keys(b!=null?b:{}),g=>{iae.includes(g.toLowerCase())&&(b[g]=N_)}),p),e.api_host));var p,b},d=no(e.session_recording.maskNetworkRequestFn);return d&&no(e.session_recording.maskCapturedNetworkRequestFn)&&Ct.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=h=>{var p=e.session_recording.maskNetworkRequestFn({url:h.name});return bt({},h,{name:p==null?void 0:p.url})}),o.maskRequestFn=no(e.session_recording.maskCapturedNetworkRequestFn)?h=>{var p,b=c(h);return b&&(p=e.session_recording.maskCapturedNetworkRequestFn==null?void 0:e.session_recording.maskCapturedNetworkRequestFn(b))!==null&&p!==void 0?p:void 0}:h=>function(p){if(!yt(p))return p.requestBody=nR(p.requestBody,"Request"),p.responseBody=nR(p.responseBody,"Response"),p}(c(h)),bt({},Xp,o,{recordHeaders:s,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function eo(e,t,n,r,i){return t>n&&(Ct.warn("min cannot be greater than max."),t=n),Br(e)?e>n?(r&&Ct.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r&&Ct.warn(r+" cannot be less than min: "+t+". Using min value instead."),t):e:(r&&Ct.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),eo(i||n,t,n,r))}class lae{constructor(t,n){var r,i;n===void 0&&(n={}),this.ot=100,this.lt=10,this.ut={},this.ht={},this.dt=()=>{Object.keys(this.ut).forEach(o=>{this.ut[o]=this.ut[o]+this.lt,this.ut[o]>=this.ot&&delete this.ut[o]})},this.vt=o=>{var s=this._rrweb.mirror.getNode(o);if((s==null?void 0:s.nodeName)!=="svg"&&s instanceof Element){var a=s.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[o,s]},this.ct=o=>{var s,a,l,u,c,d,h,p;return((s=(a=o.removes)==null?void 0:a.length)!==null&&s!==void 0?s:0)+((l=(u=o.attributes)==null?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(d=o.texts)==null?void 0:d.length)!==null&&c!==void 0?c:0)+((h=(p=o.adds)==null?void 0:p.length)!==null&&h!==void 0?h:0)},this.throttleMutations=o=>{if(o.type!==3||o.data.source!==0)return o;var s=o.data,a=this.ct(s);s.attributes&&(s.attributes=s.attributes.filter(u=>{var c,d,h,[p,b]=this.vt(u.id);return this.ut[p]===0?!1:(this.ut[p]=(c=this.ut[p])!==null&&c!==void 0?c:this.ot,this.ut[p]=Math.max(this.ut[p]-1,0),this.ut[p]===0&&(this.ht[p]||(this.ht[p]=!0,(d=(h=this.ft).onBlockedNode)==null||d.call(h,p,b))),u)}));var l=this.ct(s);return l!==0||a===l?o:void 0},this._rrweb=t,this.ft=n,this.lt=eo((r=this.ft.refillRate)!==null&&r!==void 0?r:this.lt,0,100,"mutation throttling refill rate"),this.ot=eo((i=this.ft.bucketSize)!==null&&i!==void 0?i:this.ot,0,100,"mutation throttling bucket size"),setInterval(()=>{this.dt()},1e3)}}var ro=Uint8Array,yi=Uint16Array,Ic=Uint32Array,GE=new ro([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),YE=new ro([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rR=new ro([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D$=function(e,t){for(var n=new yi(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Ic(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},L$=D$(GE,2),uae=L$[0],T_=L$[1];uae[28]=258,T_[258]=28;for(var iR=D$(YE,0)[1],B$=new yi(32768),_n=0;_n<32768;++_n){var dl=(43690&_n)>>>1|(21845&_n)<<1;dl=(61680&(dl=(52428&dl)>>>2|(13107&dl)<<2))>>>4|(3855&dl)<<4,B$[_n]=((65280&dl)>>>8|(255&dl)<<8)>>>1}var af=function(e,t,n){for(var r=e.length,i=0,o=new yi(t);i<r;++i)++o[e[i]-1];var s,a=new yi(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;for(s=new yi(r),i=0;i<r;++i)s[i]=B$[a[e[i]-1]++]>>>15-e[i];return s},nu=new ro(288);for(_n=0;_n<144;++_n)nu[_n]=8;for(_n=144;_n<256;++_n)nu[_n]=9;for(_n=256;_n<280;++_n)nu[_n]=7;for(_n=280;_n<288;++_n)nu[_n]=8;var iy=new ro(32);for(_n=0;_n<32;++_n)iy[_n]=5;var cae=af(nu,9),dae=af(iy,5),F$=function(e){return(e/8>>0)+(7&e&&1)},z$=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof yi?yi:e instanceof Ic?Ic:ro)(n-t);return r.set(e.subarray(t,n)),r},bs=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},Ed=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},iw=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new ro(0),0];if(i==1){var s=new ro(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(S,A){return S.f-A.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=o[0].s;for(r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var p=new yi(h+1),b=I_(n[c-1],p,0);if(b>t){r=0;var g=0,x=b-t,y=1<<x;for(o.sort(function(S,A){return p[A.s]-p[S.s]||S.f-A.f});r<i;++r){var v=o[r].s;if(!(p[v]>t))break;g+=y-(1<<b-p[v]),p[v]=t}for(g>>>=x;g>0;){var w=o[r].s;p[w]<t?g-=1<<t-p[w]++-1:++r}for(;r>=0&&g;--r){var E=o[r].s;p[E]==t&&(--p[E],++g)}b=t}return[new ro(p),b]},I_=function(e,t,n){return e.s==-1?Math.max(I_(e.l,t,n+1),I_(e.r,t,n+1)):t[e.s]=n},oR=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new yi(++t),r=0,i=e[0],o=1,s=function(l){n[r++]=l},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},Sd=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},P_=function(e,t,n){var r=n.length,i=F$(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},sR=function(e,t,n,r,i,o,s,a,l,u,c){bs(t,c++,n),++i[256];for(var d=iw(i,15),h=d[0],p=d[1],b=iw(o,15),g=b[0],x=b[1],y=oR(h),v=y[0],w=y[1],E=oR(g),S=E[0],A=E[1],T=new yi(19),$=0;$<v.length;++$)T[31&v[$]]++;for($=0;$<S.length;++$)T[31&S[$]]++;for(var q=iw(T,7),D=q[0],U=q[1],J=19;J>4&&!D[rR[J-1]];--J);var H,I,F,K,X=u+5<<3,O=Sd(i,nu)+Sd(o,iy)+s,B=Sd(i,h)+Sd(o,g)+s+14+3*J+Sd(T,D)+(2*T[16]+3*T[17]+7*T[18]);if(X<=O&&X<=B)return P_(t,c,e.subarray(l,l+u));if(bs(t,c,1+(B<O)),c+=2,B<O){H=af(h,p),I=h,F=af(g,x),K=g;var P=af(D,U);for(bs(t,c,w-257),bs(t,c+5,A-1),bs(t,c+10,J-4),c+=14,$=0;$<J;++$)bs(t,c+3*$,D[rR[$]]);c+=3*J;for(var G=[v,S],Q=0;Q<2;++Q){var se=G[Q];for($=0;$<se.length;++$){var _e=31&se[$];bs(t,c,P[_e]),c+=D[_e],_e>15&&(bs(t,c,se[$]>>>5&127),c+=se[$]>>>12)}}}else H=cae,I=nu,F=dae,K=iy;for($=0;$<a;++$)if(r[$]>255){_e=r[$]>>>18&31,Ed(t,c,H[_e+257]),c+=I[_e+257],_e>7&&(bs(t,c,r[$]>>>23&31),c+=GE[_e]);var Ne=31&r[$];Ed(t,c,F[Ne]),c+=K[Ne],Ne>3&&(Ed(t,c,r[$]>>>5&8191),c+=YE[Ne])}else Ed(t,c,H[r[$]]),c+=I[r[$]];return Ed(t,c,H[256]),c+I[256]},fae=new Ic([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hae=function(){for(var e=new Ic(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),pae=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=hae[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}},gae=function(e,t,n,r,i){return function(o,s,a,l,u,c){var d=o.length,h=new ro(l+d+5*(1+Math.floor(d/7e3))+u),p=h.subarray(l,h.length-u),b=0;if(!s||d<8)for(var g=0;g<=d;g+=65535){var x=g+65535;x<d?b=P_(p,b,o.subarray(g,x)):(p[g]=c,b=P_(p,b,o.subarray(g,d)))}else{for(var y=fae[s-1],v=y>>>13,w=8191&y,E=(1<<a)-1,S=new yi(32768),A=new yi(E+1),T=Math.ceil(a/3),$=2*T,q=function(Fe){return(o[Fe]^o[Fe+1]<<T^o[Fe+2]<<$)&E},D=new Ic(25e3),U=new yi(288),J=new yi(32),H=0,I=0,F=(g=0,0),K=0,X=0;g<d;++g){var O=q(g),B=32767&g,P=A[O];if(S[B]=P,A[O]=B,K<=g){var G=d-g;if((H>7e3||F>24576)&&G>423){b=sR(o,p,0,D,U,J,I,F,X,g-X,b),F=H=I=0,X=g;for(var Q=0;Q<286;++Q)U[Q]=0;for(Q=0;Q<30;++Q)J[Q]=0}var se=2,_e=0,Ne=w,Te=B-P&32767;if(G>2&&O==q(g-Te))for(var W=Math.min(v,G)-1,Y=Math.min(32767,g),ie=Math.min(258,G);Te<=Y&&--Ne&&B!=P;){if(o[g+se]==o[g+se-Te]){for(var Oe=0;Oe<ie&&o[g+Oe]==o[g+Oe-Te];++Oe);if(Oe>se){if(se=Oe,_e=Te,Oe>W)break;var Me=Math.min(Te,Oe-2),Re=0;for(Q=0;Q<Me;++Q){var te=g-Te+Q+32768&32767,ae=te-S[te]+32768&32767;ae>Re&&(Re=ae,P=te)}}}Te+=(B=P)-(P=S[B])+32768&32767}if(_e){D[F++]=268435456|T_[se]<<18|iR[_e];var pe=31&T_[se],We=31&iR[_e];I+=GE[pe]+YE[We],++U[257+pe],++J[We],K=g+se,++H}else D[F++]=o[g],++U[o[g]]}}b=sR(o,p,c,D,U,J,I,F,X,g-X,b)}return z$(h,0,l+F$(b)+u)}(e,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!0)},O_=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},mae=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&O_(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},yae=function(e){return 10+(e.filename&&e.filename.length+1||0)};function H$(e,t){t===void 0&&(t={});var n=pae(),r=e.length;n.p(e);var i=gae(e,t,yae(t),8),o=i.length;return mae(i,t),O_(i,o-8,n.d()),O_(i,o-4,r),i}function U$(e,t){var n=e.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(e);for(var r=new ro(e.length+(e.length>>>1)),i=0,o=function(u){r[i++]=u},s=0;s<n;++s){if(i+5>r.length){var a=new ro(i+8+(n-s<<1));a.set(r),r=a}var l=e.charCodeAt(s);l<128||t?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return z$(r,0,i)}function vae(e,t){return function(n){for(var r=0,i=0;i<n.length;i++)r=(r<<5)-r+n.charCodeAt(i),r|=0;return Math.abs(r)}(e)%100<eo(100*t,0,100)}var Va="disabled",XE="sampled",oy="active",ru="buffering",JE="paused",QE="trigger",is=QE+"_activated",Ur=QE+"_pending",us=QE+"_"+Va;function aR(e,t){return t.some(n=>n.matching==="regex"&&new RegExp(n.url).test(e))}class W${constructor(t){this.gt=t}triggerStatus(t){var n=this.gt.map(r=>r.triggerStatus(t));return n.includes(is)?is:n.includes(Ur)?Ur:us}stop(){this.gt.forEach(t=>t.stop())}}class V${constructor(t){this.gt=t}triggerStatus(t){var n=new Set;for(var r of this.gt)n.add(r.triggerStatus(t));switch(n.delete(us),n.size){case 0:return us;case 1:return Array.from(n)[0];default:return Ur}}stop(){this.gt.forEach(t=>t.stop())}}class bae{triggerStatus(){return Ur}stop(){}}class wae{constructor(t){this._t=[],this.bt=[],this.urlBlocked=!1,this._instance=t}onRemoteConfig(t){var n,r;this._t=((n=t.sessionRecording)==null?void 0:n.urlTriggers)||[],this.bt=((r=t.sessionRecording)==null?void 0:r.urlBlocklist)||[]}wt(t){var n;return this._t.length===0?us:((n=this._instance)==null?void 0:n.get_property(y_))===t?is:Ur}triggerStatus(t){var n=this.wt(t),r=n===is?is:n===Ur?Ur:us;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(t,n,r){if(De!==void 0&&De.location.href){var i=De.location.href,o=this.urlBlocked,s=aR(i,this.bt);o&&s||(s&&!o?t():!s&&o&&n(),aR(i,this._t)&&r("url"))}}stop(){}}class xae{constructor(t){this.linkedFlag=null,this.linkedFlagSeen=!1,this.yt=()=>{},this._instance=t}triggerStatus(){var t=Ur;return sn(this.linkedFlag)&&(t=us),this.linkedFlagSeen&&(t=is),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:t}),t}onRemoteConfig(t,n){var r;if(this.linkedFlag=((r=t.sessionRecording)==null?void 0:r.linkedFlag)||null,!sn(this.linkedFlag)&&!this.linkedFlagSeen){var i=Qn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,o=Qn(this.linkedFlag)?null:this.linkedFlag.variant;this.yt=this._instance.onFeatureFlags((s,a)=>{var l=Bn(a)&&i in a&&(o?a[i]===o:a[i]===!0);l&&n(i,o),this.linkedFlagSeen=l})}}stop(){this.yt()}}class _ae{constructor(t){this.St=[],this._instance=t}onRemoteConfig(t){var n;this.St=((n=t.sessionRecording)==null?void 0:n.eventTriggers)||[]}$t(t){var n;return this.St.length===0?us:((n=this._instance)==null?void 0:n.get_property(v_))===t?is:Ur}triggerStatus(t){var n=this.$t(t),r=n===is?is:n===Ur?Ur:us;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}}function Eae(e){return e.isRecordingEnabled?ru:Va}function Sae(e){if(!e.receivedDecide)return ru;if(!e.isRecordingEnabled)return Va;if(e.urlTriggerMatching.urlBlocked)return JE;var t=e.isSampled===!0,n=new W$([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?XE:n===is?oy:n===Ur?ru:e.isSampled===!1?Va:oy}function kae(e){if(!e.receivedDecide)return ru;if(!e.isRecordingEnabled)return Va;if(e.urlTriggerMatching.urlBlocked)return JE;var t=new V$([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),n=t!==us,r=Ps(e.isSampled);return n&&t===Ur?ru:n&&t===us||r&&!e.isSampled?Va:e.isSampled===!0?XE:oy}var Hd="[SessionRecording]",Pr=Kr(Hd);function Jp(){var e,t;return Ut==null||(e=Ut.__PosthogExtensions__)==null||(t=e.rrweb)==null?void 0:t.record}var Cae=3e5,jae=[go.MouseMove,go.MouseInteraction,go.Scroll,go.ViewportResize,go.Input,go.TouchMove,go.MediaInteraction,go.Drag],lR=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function fl(e){return function(t,n){for(var r="",i=0;i<t.length;){var o=t[i++];r+=String.fromCharCode(o)}return r}(H$(U$(JSON.stringify(e))))}function uR(e){return e.type===Es.Custom&&e.data.tag==="sessionIdle"}class Aae{get sessionId(){return this.kt}get xt(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Et}get It(){if(!this._instance.sessionManager)throw new Error(Hd+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Pt(){var t,n;return this.Rt.triggerStatus(this.sessionId)===Ur?6e4:(t=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&t!==void 0?t:Cae}get Tt(){var t=this._instance.get_property(Fd);return Ps(t)?t:null}get Mt(){var t,n,r=(t=this.M)==null?void 0:t.data[((n=this.M)==null?void 0:n.data.length)-1],{sessionStartTimestamp:i}=this.It.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-i:null}get Ct(){var t=!!this._instance.get_property(m_),n=!this._instance.config.disable_session_recording;return De&&t&&n}get Ot(){var t=!!this._instance.get_property(MA),n=this._instance.config.enable_recording_console_log;return n!=null?n:t}get Ft(){var t,n,r,i,o,s,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(BA),u=(t=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&t!==void 0&&t,c=(r=(i=a==null?void 0:a.canvasFps)!==null&&i!==void 0?i:l==null?void 0:l.fps)!==null&&r!==void 0?r:4,d=(o=(s=a==null?void 0:a.canvasQuality)!==null&&s!==void 0?s:l==null?void 0:l.quality)!==null&&o!==void 0?o:.4;if(typeof d=="string"){var h=parseFloat(d);d=isNaN(h)?.4:h}return{enabled:u,fps:eo(c,0,12,"canvas recording fps",4),quality:eo(d,0,1,"canvas recording quality",.4)}}get At(){var t,n,r=this._instance.get_property(DA),i={recordHeaders:(t=this._instance.config.session_recording)==null?void 0:t.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},o=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),s=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=Bn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Ps(a)?a:r!=null&&r.capturePerformance);return o||s||l?{recordHeaders:o,recordBody:s,recordPerformance:l}:void 0}get Dt(){var t,n,r,i,o,s,a=this._instance.get_property(LA),l={maskAllInputs:(t=this._instance.config.session_recording)==null?void 0:t.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},u=(i=l==null?void 0:l.maskAllInputs)!==null&&i!==void 0?i:a==null?void 0:a.maskAllInputs,c=(o=l==null?void 0:l.maskTextSelector)!==null&&o!==void 0?o:a==null?void 0:a.maskTextSelector,d=(s=l==null?void 0:l.blockSelector)!==null&&s!==void 0?s:a==null?void 0:a.blockSelector;return yt(u)&&yt(c)&&yt(d)?void 0:{maskAllInputs:u==null||u,maskTextSelector:c,blockSelector:d}}get jt(){var t=this._instance.get_property(FA);return Br(t)?t:null}get Lt(){var t=this._instance.get_property(zA);return Br(t)?t:null}get status(){return this.Nt?this.zt({receivedDecide:this.Nt,isRecordingEnabled:this.Ct,isSampled:this.Tt,urlTriggerMatching:this.Ut,eventTriggerMatching:this.qt,linkedFlagMatching:this.Bt,sessionId:this.sessionId}):ru}constructor(t){if(this.zt=Eae,this.Nt=!1,this.Ht=[],this.Wt="unknown",this.Gt=Date.now(),this.Rt=new bae,this.Jt=void 0,this.Vt=void 0,this.Kt=void 0,this.Yt=void 0,this.Xt=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.Qt=()=>{this.Zt()},this.ti=()=>{this.ii("browser offline",{})},this.ei=()=>{this.ii("browser online",{})},this.ri=()=>{if(xt!=null&&xt.visibilityState){var i="window "+xt.visibilityState;this.ii(i,{})}},this._instance=t,this.Et=!1,this.si="/s/",this.ni=void 0,this.Nt=!1,!this._instance.sessionManager)throw Pr.error("started without valid sessionManager"),new Error(Hd+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Hd+" cannot be used with __preview_experimental_cookieless_mode.");this.Bt=new xae(this._instance),this.Ut=new wae(this._instance),this.qt=new _ae(this._instance);var{sessionId:n,windowId:r}=this.It.checkAndGetSessionAndWindowId();this.kt=n,this.oi=r,this.M=this.ai(),this.xt>=this.It.sessionTimeoutMs&&Pr.warn("session_idle_threshold_ms ("+this.xt+") is greater than the session timeout ("+this.It.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(t){this.Ct?(this.li(t),Rn(De,"beforeunload",this.Qt),Rn(De,"offline",this.ti),Rn(De,"online",this.ei),Rn(De,"visibilitychange",this.ri),this.ui(),this.hi(),sn(this.Jt)&&(this.Jt=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this.di(n==null?void 0:n.properties.$current_url):"";if(!r)return;this.ii("$pageview",{href:r})}}catch(i){Pr.error("Could not add $pageview to rrweb session",i)}})),this.Vt||(this.Vt=this.It.onSessionId((n,r,i)=>{var o,s,a,l;i&&(this.ii("$session_id_change",{sessionId:n,windowId:r,changeReason:i}),(o=this._instance)==null||(s=o.persistence)==null||s.unregister(v_),(a=this._instance)==null||(l=a.persistence)==null||l.unregister(y_))}))):this.stopRecording()}stopRecording(){var t,n,r,i;this.Et&&this.ni&&(this.ni(),this.ni=void 0,this.Et=!1,De==null||De.removeEventListener("beforeunload",this.Qt),De==null||De.removeEventListener("offline",this.ti),De==null||De.removeEventListener("online",this.ei),De==null||De.removeEventListener("visibilitychange",this.ri),this.ai(),clearInterval(this.vi),(t=this.Jt)==null||t.call(this),this.Jt=void 0,(n=this.Xt)==null||n.call(this),this.Xt=void 0,(r=this.Vt)==null||r.call(this),this.Vt=void 0,(i=this.Yt)==null||i.call(this),this.Yt=void 0,this.qt.stop(),this.Ut.stop(),this.Bt.stop(),Pr.info("stopped"))}ci(){var t;(t=this._instance.persistence)==null||t.unregister(Fd)}fi(t){var n,r=this.kt!==t,i=this.jt;if(Br(i)){var o=this.Tt,s=r||!Ps(o),a=s?vae(t,i):o;s&&(a?this.pi(XE):Pr.warn("Sample rate ("+i+") has determined that this sessionId ("+t+") will not be sent to the server."),this.ii("samplingDecisionMade",{sampleRate:i,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Fd]:a})}else this.ci()}onRemoteConfig(t){var n,r,i,o;this.ii("$remote_config_received",t),this.gi(t),(n=t.sessionRecording)!=null&&n.endpoint&&(this.si=(o=t.sessionRecording)==null?void 0:o.endpoint),this.ui(),((r=t.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.zt=Sae,this.Rt=new W$([this.qt,this.Ut])):(this.zt=kae,this.Rt=new V$([this.qt,this.Ut])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(i=t.sessionRecording)==null?void 0:i.triggerMatchType}),this.Ut.onRemoteConfig(t),this.qt.onRemoteConfig(t),this.Bt.onRemoteConfig(t,(s,a)=>{this.pi("linked_flag_matched",{flag:s,variant:a})}),this.Nt=!0,this.startIfEnabledOrStop()}ui(){Br(this.jt)&&sn(this.Yt)&&(this.Yt=this.It.onSessionId(t=>{this.fi(t)}))}gi(t){if(this._instance.persistence){var n,r=this._instance.persistence,i=()=>{var o,s,a,l,u,c,d,h,p,b=(o=t.sessionRecording)==null?void 0:o.sampleRate,g=sn(b)?null:parseFloat(b);sn(g)&&this.ci();var x=(s=t.sessionRecording)==null?void 0:s.minimumDurationMilliseconds;r.register({[m_]:!!t.sessionRecording,[MA]:(a=t.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[DA]:bt({capturePerformance:t.capturePerformance},(l=t.sessionRecording)==null?void 0:l.networkPayloadCapture),[LA]:(u=t.sessionRecording)==null?void 0:u.masking,[BA]:{enabled:(c=t.sessionRecording)==null?void 0:c.recordCanvas,fps:(d=t.sessionRecording)==null?void 0:d.canvasFps,quality:(h=t.sessionRecording)==null?void 0:h.canvasQuality},[FA]:g,[zA]:yt(x)?null:x,[HA]:(p=t.sessionRecording)==null?void 0:p.scriptConfig})};i(),(n=this.Kt)==null||n.call(this),this.Kt=this.It.onSessionId(i)}}log(t,n){var r;n===void 0&&(n="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(t)]}},timestamp:Date.now()})}li(t){if(!yt(Object.assign)&&!yt(Array.from)&&!(this.Et||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Et=!0,this.It.checkAndGetSessionAndWindowId(),Jp()?this.mi():(n=Ut.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.bi,r=>{if(r)return Pr.error("could not load recorder",r);this.mi()}),Pr.info("starting"),this.status===oy&&this.pi(t||"recording_initialized")}}get bi(){var t,n,r;return((t=this._instance)==null||(n=t.persistence)==null||(r=n.get_property(HA))==null?void 0:r.script)||"recorder"}wi(t){var n;return t.type===3&&jae.indexOf((n=t.data)==null?void 0:n.source)!==-1}yi(t){var n=this.wi(t);n||this.Wt||t.timestamp-this.Gt>this.xt&&(this.Wt=!0,clearInterval(this.vi),this.ii("sessionIdle",{eventTimestamp:t.timestamp,lastActivityTimestamp:this.Gt,threshold:this.xt,bufferLength:this.M.data.length,bufferSize:this.M.size}),this.Zt());var r=!1;if(n&&(this.Gt=t.timestamp,this.Wt)){var i=this.Wt==="unknown";this.Wt=!1,i||(this.ii("sessionNoLongerIdle",{reason:"user activity",type:t.type}),r=!0)}if(!this.Wt){var{windowId:o,sessionId:s}=this.It.checkAndGetSessionAndWindowId(!n,t.timestamp),a=this.kt!==s,l=this.oi!==o;this.oi=o,this.kt=s,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Si()}}$i(t){try{return t.rrwebMethod(),!0}catch(n){return this.Ht.length<10?this.Ht.push({enqueuedAt:t.enqueuedAt||Date.now(),attempt:t.attempt++,rrwebMethod:t.rrwebMethod}):Pr.warn("could not emit queued rrweb event.",n,t),!1}}ii(t,n){return this.$i(lR(()=>Jp().addCustomEvent(t,n)))}ki(){return this.$i(lR(()=>Jp().takeFullSnapshot()))}mi(){var t,n,r,i,o={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},s=this._instance.config.session_recording;for(var[a,l]of Object.entries(s||{}))a in o&&(a==="maskInputOptions"?o.maskInputOptions=bt({password:!0},l):o[a]=l);this.Ft&&this.Ft.enabled&&(o.recordCanvas=!0,o.sampling={canvas:this.Ft.fps},o.dataURLOptions={type:"image/webp",quality:this.Ft.quality}),this.Dt&&(o.maskAllInputs=(n=this.Dt.maskAllInputs)===null||n===void 0||n,o.maskTextSelector=(r=this.Dt.maskTextSelector)!==null&&r!==void 0?r:void 0,o.blockSelector=(i=this.Dt.blockSelector)!==null&&i!==void 0?i:void 0);var u=Jp();if(u){this.xi=(t=this.xi)!==null&&t!==void 0?t:new lae(u,{refillRate:this._instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this._instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(d,h)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";Pr.info(p,{node:h}),this.log(Hd+" "+p,"warn")}});var c=this.Ei();this.ni=u(bt({emit:d=>{this.onRRwebEmit(d)},plugins:c},o)),this.Gt=Date.now(),this.Wt=Ps(this.Wt)?this.Wt:"unknown",this.ii("$session_options",{sessionRecordingOptions:o,activePlugins:c.map(d=>d==null?void 0:d.name)}),this.ii("$posthog_config",{config:this._instance.config})}else Pr.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Si(){if(this.vi&&clearInterval(this.vi),this.Wt!==!0){var t=this.Pt;t&&(this.vi=setInterval(()=>{this.ki()},t))}}Ei(){var t,n,r,i,o=[],s=(t=Ut.__PosthogExtensions__)==null||(n=t.rrwebPlugins)==null?void 0:n.getRecordConsolePlugin;s&&this.Ot&&o.push(s());var a=(r=Ut.__PosthogExtensions__)==null||(i=r.rrwebPlugins)==null?void 0:i.getRecordNetworkPlugin;return this.At&&no(a)&&(!Cse.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?o.push(a(aae(this._instance.config,this.At))):Pr.info("NetworkCapture not started because we are on localhost.")),o}onRRwebEmit(t){var n;if(this.Ii(),t&&Bn(t)){if(t.type===Es.Meta){var r=this.di(t.data.href);if(this.Pi=r,!r)return;t.data.href=r}else this.Ri();if(this.Ut.checkUrlTriggerConditions(()=>this.Ti(),()=>this.Mi(),h=>this.Ci(h)),!this.Ut.urlBlocked||(i=t).type===Es.Custom&&i.data.tag==="recording paused"){var i;t.type===Es.FullSnapshot&&this.Si(),t.type===Es.FullSnapshot&&this.Nt&&this.Rt.triggerStatus(this.sessionId)===Ur&&this.ai();var o=this.xi?this.xi.throttleMutations(t):t;if(o){var s=function(h){var p=h;if(p&&Bn(p)&&p.type===6&&Bn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var b=[],g=0;g<p.data.payload.payload.length;g++)p.data.payload.payload[g]&&p.data.payload.payload[g].length>2e3?b.push(p.data.payload.payload[g].slice(0,2e3)+"...[truncated]"):b.push(p.data.payload.payload[g]);return p.data.payload.payload=b,h}return h}(o);if(this.yi(s),this.Wt!==!0||uR(s)){if(uR(s)){var a=s.data.payload;if(a){var l=a.lastActivityTimestamp,u=a.threshold;s.timestamp=l+u}}var c=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(h){if(ry(h)<1024)return h;try{if(h.type===Es.FullSnapshot)return bt({},h,{data:fl(h.data),cv:"2024-10"});if(h.type===Es.IncrementalSnapshot&&h.data.source===go.Mutation)return bt({},h,{cv:"2024-10",data:bt({},h.data,{texts:fl(h.data.texts),attributes:fl(h.data.attributes),removes:fl(h.data.removes),adds:fl(h.data.adds)})});if(h.type===Es.IncrementalSnapshot&&h.data.source===go.StyleSheetRule)return bt({},h,{cv:"2024-10",data:bt({},h.data,{adds:h.data.adds?fl(h.data.adds):void 0,removes:h.data.removes?fl(h.data.removes):void 0})})}catch(p){Pr.error("could not compress event - will use uncompressed event",p)}return h}(s):s,d={$snapshot_bytes:ry(c),$snapshot_data:c,$session_id:this.kt,$window_id:this.oi};this.status!==Va?this.Oi(d):this.ai()}}}}}Ri(){if(!this._instance.config.capture_pageview&&De){var t=this.di(De.location.href);this.Pi!==t&&(this.ii("$url_changed",{href:t}),this.Pi=t)}}Ii(){if(this.Ht.length){var t=[...this.Ht];this.Ht=[],t.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.$i(n)})}}di(t){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:t};return(r=i=n.maskNetworkRequestFn(i))==null?void 0:r.url}return t}ai(){return this.M={size:0,data:[],sessionId:this.kt,windowId:this.oi},this.M}Zt(){this.Fi&&(clearTimeout(this.Fi),this.Fi=void 0);var t=this.Lt,n=this.Mt,r=Br(n)&&n>=0,i=Br(t)&&r&&n<t;return this.status===ru||this.status===JE||this.status===Va||i?(this.Fi=setTimeout(()=>{this.Zt()},2e3),this.M):(this.M.data.length>0&&A_(this.M).forEach(o=>{this.Ai({$snapshot_bytes:o.size,$snapshot_data:o.data,$session_id:o.sessionId,$window_id:o.windowId,$lib:"web",$lib_version:Rs.LIB_VERSION})}),this.ai())}Oi(t){var n,r=2+(((n=this.M)==null?void 0:n.data.length)||0);!this.Wt&&(this.M.size+t.$snapshot_bytes+r>943718.4||this.M.sessionId!==this.kt)&&(this.M=this.Zt()),this.M.size+=t.$snapshot_bytes,this.M.data.push(t.$snapshot_data),this.Fi||this.Wt||(this.Fi=setTimeout(()=>{this.Zt()},2e3))}Ai(t){this._instance.capture("$snapshot",t,{_url:this._instance.requestRouter.endpointFor("api",this.si),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}Ci(t){var n,r;this.Rt.triggerStatus(this.sessionId)===Ur&&((n=this._instance)==null||(r=n.persistence)==null||r.register({[t==="url"?y_:v_]:this.kt}),this.Zt(),this.pi(t+"_trigger_matched"))}Ti(){this.Ut.urlBlocked||(this.Ut.urlBlocked=!0,clearInterval(this.vi),Pr.info("recording paused due to URL blocker"),this.ii("recording paused",{reason:"url blocker"}))}Mi(){this.Ut.urlBlocked&&(this.Ut.urlBlocked=!1,this.ki(),this.Si(),this.ii("recording resumed",{reason:"left blocked url"}),Pr.info("recording resumed"))}hi(){this.qt.St.length!==0&&sn(this.Xt)&&(this.Xt=this._instance.on("eventCaptured",t=>{try{this.qt.St.includes(t.event)&&this.Ci("event")}catch(n){Pr.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Bt.linkedFlagSeen=!0,this.ki(),this.pi("linked_flag_overridden")}overrideSampling(){var t;(t=this._instance.persistence)==null||t.register({[Fd]:!0}),this.ki(),this.pi("sampling_overridden")}overrideTrigger(t){this.Ci(t)}pi(t,n){this._instance.register_for_session({$session_recording_start_reason:t}),Pr.info(t.replace("_"," "),n),Yt(["recording_initialized","session_id_changed"],t)||this.ii(t,n)}get sdkDebugProperties(){var{sessionStartTimestamp:t}=this.It.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.M.data.length,$sdk_debug_replay_internal_buffer_size:this.M.size,$sdk_debug_current_session_duration:this.Mt,$sdk_debug_session_start:t}}}var ow=Kr("[SegmentIntegration]");function Rae(e,t){var n=e.config.segment;if(!n)return t();(function(r,i){var o=r.config.segment;if(!o)return i();var s=l=>{var u=()=>l.anonymousId()||xa();r.config.get_device_id=u,l.id()&&(r.register({distinct_id:l.id(),$device_id:u()}),r.persistence.set_property(_s,"identified")),i()},a=o.user();"then"in a&&no(a.then)?a.then(l=>s(l)):s(a)})(e,()=>{n.register((r=>{Promise&&Promise.resolve||ow.warn("This browser does not have Promise support, and can not use the segment integration");var i=(o,s)=>{var a;if(!s)return o;o.event.userId||o.event.anonymousId===r.get_distinct_id()||(ow.info("No userId set, resetting PostHog"),r.reset()),o.event.userId&&o.event.userId!==r.get_distinct_id()&&(ow.info("UserId set, identifying with PostHog"),r.identify(o.event.userId));var l=r.Di(s,(a=o.event.properties)!==null&&a!==void 0?a:{},new Date);return o.event.properties=Object.assign({},l,o.event.properties),o};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:o=>i(o,o.event.event),page:o=>i(o,"$pageview"),identify:o=>i(o,"$identify"),screen:o=>i(o,"$screen")}})(e)).then(()=>{t()})})}var q$="posthog-js";function K$(e,t){var{organization:n,projectId:r,prefix:i,severityAllowList:o=["error"]}=t===void 0?{}:t;return s=>{var a,l,u,c,d;if(!(o==="*"||o.includes(s.level))||!e.__loaded)return s;s.tags||(s.tags={});var h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());s.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var p=((a=s.exception)==null?void 0:a.values)||[],b=p.map(x=>bt({},x,{stacktrace:x.stacktrace?bt({},x.stacktrace,{type:"raw",frames:(x.stacktrace.frames||[]).map(y=>bt({},y,{platform:"web:javascript"}))}):void 0})),g={$exception_message:((l=p[0])==null?void 0:l.value)||s.message,$exception_type:(u=p[0])==null?void 0:u.type,$exception_personURL:h,$exception_level:s.level,$exception_list:b,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((c=p[0])==null?void 0:c.value)||s.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:s.tags};return n&&r&&(g.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+s.event_id),e.exceptions.sendExceptionEvent(g),s}}class Nae{constructor(t,n,r,i,o){this.name=q$,this.setupOnce=function(s){s(K$(t,{organization:n,projectId:r,prefix:i,severityAllowList:o}))}}}var Ss,Tae=De!=null&&De.location?ty(De.location.hash,"__posthog")||ty(location.hash,"state"):null,cR="_postHogToolbarParams",dR=Kr("[Toolbar]");(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"})(Ss||(Ss={}));class Iae{constructor(t){this.instance=t}ji(t){Ut.ph_toolbar_state=t}Li(){var t;return(t=Ut.ph_toolbar_state)!==null&&t!==void 0?t:Ss.UNINITIALIZED}maybeLoadToolbar(t,n,r){var i,o;if(t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!De||!xt)return!1;t=(i=t)!==null&&i!==void 0?i:De.location,r=(o=r)!==null&&o!==void 0?o:De.history;try{if(!n){try{De.localStorage.setItem("test","test"),De.localStorage.removeItem("test")}catch(u){return!1}n=De==null?void 0:De.localStorage}var s,a=Tae||ty(t.hash,"__posthog")||ty(t.hash,"state"),l=a?TA(()=>JSON.parse(atob(decodeURIComponent(a))))||TA(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((s=l).source="url",s&&Object.keys(s).length>0&&(l.desiredHash?t.hash=l.desiredHash:r?r.replaceState(r.state,"",t.pathname+t.search):t.hash="")):((s=JSON.parse(n.getItem(cR)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch(u){return!1}}Ni(t){var n=Ut.ph_load_toolbar||Ut.ph_load_editor;!sn(n)&&no(n)?n(t,this.instance):dR.warn("No toolbar load function found")}loadToolbar(t){var n=!(xt==null||!xt.getElementById(b$));if(!De||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=bt({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(De.localStorage.setItem(cR,JSON.stringify(bt({},i,{source:void 0}))),this.Li()===Ss.LOADED)this.Ni(i);else if(this.Li()===Ss.UNINITIALIZED){var o;this.ji(Ss.LOADING),(o=Ut.__PosthogExtensions__)==null||o.loadExternalDependency==null||o.loadExternalDependency(this.instance,"toolbar",s=>{if(s)return dR.error("[Toolbar] Failed to load",s),void this.ji(Ss.UNINITIALIZED);this.ji(Ss.LOADED),this.Ni(i)}),Rn(De,"turbolinks:load",()=>{this.ji(Ss.UNINITIALIZED),this.loadToolbar(i)})}return!0}zi(t){return this.loadToolbar(t)}maybeLoadEditor(t,n,r){return t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(t,n,r)}}var Pae=Kr("[TracingHeaders]");class Oae{constructor(t){this.Ui=void 0,this.qi=void 0,this.V=()=>{var n,r,i,o;yt(this.Ui)&&((n=Ut.__PosthogExtensions__)==null||(r=n.tracingHeadersPatchFns)==null||r._patchXHR(this._instance.sessionManager)),yt(this.qi)&&((i=Ut.__PosthogExtensions__)==null||(o=i.tracingHeadersPatchFns)==null||o._patchFetch(this._instance.sessionManager))},this._instance=t}G(t){var n,r;(n=Ut.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&t(),(r=Ut.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",i=>{if(i)return Pae.error("failed to load script",i);t()})}startIfEnabledOrStop(){var t,n;this._instance.config.__add_tracing_headers?this.G(this.V):((t=this.Ui)==null||t.call(this),(n=this.qi)==null||n.call(this),this.Ui=void 0,this.qi=void 0)}}var ua=Kr("[Web Vitals]"),fR=9e5;class $ae{constructor(t){var n;this.Bi=!1,this.i=!1,this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Hi=()=>{clearTimeout(this.Wi),this.M.metrics.length!==0&&(this._instance.capture("$web_vitals",this.M.metrics.reduce((r,i)=>bt({},r,{["$web_vitals_"+i.name+"_event"]:bt({},i),["$web_vitals_"+i.name+"_value"]:i.value}),{})),this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Gi=r=>{var i,o=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(yt(o))ua.error("Could not read session ID. Dropping metrics!");else{this.M=this.M||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var s=this.Ji();yt(s)||(sn(r==null?void 0:r.name)||sn(r==null?void 0:r.value)?ua.error("Invalid metric received",r):this.Vi&&r.value>=this.Vi?ua.error("Ignoring metric with value >= "+this.Vi,r):(this.M.url!==s&&(this.Hi(),this.Wi=setTimeout(this.Hi,this.flushToCaptureTimeoutMs)),yt(this.M.url)&&(this.M.url=s),this.M.firstMetricTimestamp=yt(this.M.firstMetricTimestamp)?Date.now():this.M.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.M.metrics.push(bt({},r,{$current_url:s,$session_id:o.sessionId,$window_id:o.windowId,timestamp:Date.now()})),this.M.metrics.length===this.allowedMetrics.length&&this.Hi()))}},this.V=()=>{var r,i,o,s,a=Ut.__PosthogExtensions__;yt(a)||yt(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:o,onINP:s}=a.postHogWebVitalsCallbacks),r&&i&&o&&s?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Gi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Gi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&o(this.Gi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&s(this.Gi.bind(this)),this.i=!0):ua.error("web vitals callbacks not loaded - not starting")},this._instance=t,this.Bi=!((n=this._instance.persistence)==null||!n.props[OA]),this.startIfEnabled()}get allowedMetrics(){var t,n,r=Bn(this._instance.config.capture_performance)?(t=this._instance.config.capture_performance)==null?void 0:t.web_vitals_allowed_metrics:void 0;return yt(r)?((n=this._instance.persistence)==null?void 0:n.props[$A])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Bn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Vi(){var t=Bn(this._instance.config.capture_performance)&&Br(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:fR;return 0<t&&t<=6e4?fR:t}get isEnabled(){var t=fi==null?void 0:fi.protocol;if(t!=="http:"&&t!=="https:")return ua.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=Bn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Ps(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Ps(n)?n:this.Bi}startIfEnabled(){this.isEnabled&&!this.i&&(ua.info("enabled, starting..."),this.G(this.V))}onRemoteConfig(t){var n=Bn(t.capturePerformance)&&!!t.capturePerformance.web_vitals,r=Bn(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[OA]:n}),this._instance.persistence.register({[$A]:r})),this.Bi=n,this.startIfEnabled()}G(t){var n,r;(n=Ut.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&t(),(r=Ut.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",i=>{i?ua.error("failed to load script",i):t()})}Ji(){var t=De?De.location.href:void 0;return t||ua.error("Could not determine current URL"),t}}var Mae=Kr("[Heatmaps]");function hR(e){return Bn(e)&&"clientX"in e&&"clientY"in e&&Br(e.clientX)&&Br(e.clientY)}class Dae{constructor(t){var n;this.rageclicks=new N$,this.Bi=!1,this.i=!1,this.Ki=null,this.instance=t,this.Bi=!((n=this.instance.persistence)==null||!n.props[g_])}get flushIntervalMilliseconds(){var t=5e3;return Bn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return yt(this.instance.config.capture_heatmaps)?yt(this.instance.config.enable_heatmaps)?this.Bi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;Mae.info("starting..."),this.Yi(),this.Ki=setInterval(this.Xi.bind(this),this.flushIntervalMilliseconds)}else{var t,n;clearInterval((t=this.Ki)!==null&&t!==void 0?t:void 0),(n=this.Qi)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(t){var n=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[g_]:n}),this.Bi=n,this.startIfEnabled()}getAndClearBuffer(){var t=this.M;return this.M=void 0,t}Zi(t){this.te(t.originalEvent,"deadclick")}Yi(){De&&xt&&(Rn(De,"beforeunload",this.Xi.bind(this)),Rn(xt,"click",t=>this.te(t||(De==null?void 0:De.event)),{capture:!0}),Rn(xt,"mousemove",t=>this.ie(t||(De==null?void 0:De.event)),{capture:!0}),this.Qi=new I$(this.instance,zse,this.Zi.bind(this)),this.Qi.startIfEnabled(),this.i=!0)}ee(t,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),o=this.instance.scrollManager.scrollElement(),s=function(a,l,u){for(var c=a;c&&$v(c)&&!Oa(c,"body");){if(c===u)return!1;if(Yt(l,De==null?void 0:De.getComputedStyle(c).position))return!0;c=S$(c)}return!1}(E$(t),["fixed","sticky"],o);return{x:t.clientX+(s?0:i),y:t.clientY+(s?0:r),target_fixed:s,type:n}}te(t,n){var r;if(n===void 0&&(n="click"),!WA(t.target)&&hR(t)){var i=this.ee(t,n);(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.re(bt({},i,{type:"rageclick"})),this.re(i)}}ie(t){!WA(t.target)&&hR(t)&&(clearTimeout(this.se),this.se=setTimeout(()=>{this.re(this.ee(t,"mousemove"))},500))}re(t){if(De){var n=De.location.href;this.M=this.M||{},this.M[n]||(this.M[n]=[]),this.M[n].push(t)}}Xi(){this.M&&!Uu(this.M)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class Lae{constructor(t){this._instance=t}doPageView(t,n){var r,i=this.ne(t,n);return this.oe={pathname:(r=De==null?void 0:De.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:t},this._instance.scrollManager.resetContext(),i}doPageLeave(t){var n;return this.ne(t,(n=this.oe)==null?void 0:n.pageViewId)}doEvent(){var t;return{$pageview_id:(t=this.oe)==null?void 0:t.pageViewId}}ne(t,n){var r=this.oe;if(!r)return{$pageview_id:n};var i={$pageview_id:n,$prev_pageview_id:r.pageViewId},o=this._instance.scrollManager.getContext();if(o&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:d}=o;if(!(yt(s)||yt(a)||yt(l)||yt(u)||yt(c)||yt(d))){s=Math.ceil(s),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),d=Math.ceil(d);var h=s<=1?1:eo(a/s,0,1),p=s<=1?1:eo(l/s,0,1),b=u<=1?1:eo(c/u,0,1),g=u<=1?1:eo(d/u,0,1);i=Kn(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:b,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:g})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(t.getTime()-r.timestamp.getTime())/1e3),i}}class Bae{constructor(t){this._instance=t}sendExceptionEvent(t){this._instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var io="Mobile",sy="iOS",Xo="Android",dh="Tablet",G$=Xo+" "+dh,Y$="iPad",X$="Apple",J$=X$+" Watch",fh="Safari",Pc="BlackBerry",Q$="Samsung",Z$=Q$+"Browser",e5=Q$+" Internet",iu="Chrome",Fae=iu+" OS",t5=iu+" "+sy,ZE="Internet Explorer",n5=ZE+" "+io,eS="Opera",zae=eS+" Mini",tS="Edge",r5="Microsoft "+tS,oc="Firefox",i5=oc+" "+sy,hh="Nintendo",ph="PlayStation",sc="Xbox",o5=Xo+" "+io,s5=io+" "+fh,Ud="Windows",$_=Ud+" Phone",pR="Nokia",M_="Ouya",a5="Generic",Hae=a5+" "+io.toLowerCase(),l5=a5+" "+dh.toLowerCase(),D_="Konqueror",Zr="(\\d+(\\.\\d+)?)",sw=new RegExp("Version/"+Zr),Uae=new RegExp(sc,"i"),Wae=new RegExp(ph+" \\w+","i"),Vae=new RegExp(hh+" \\w+","i"),nS=new RegExp(Pc+"|PlayBook|BB10","i"),qae={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Kae=(e,t)=>t&&Yt(t,X$)||function(n){return Yt(n,fh)&&!Yt(n,iu)&&!Yt(n,Xo)}(e),u5=function(e,t){return t=t||"",Yt(e," OPR/")&&Yt(e,"Mini")?zae:Yt(e," OPR/")?eS:nS.test(e)?Pc:Yt(e,"IE"+io)||Yt(e,"WPDesktop")?n5:Yt(e,Z$)?e5:Yt(e,tS)||Yt(e,"Edg/")?r5:Yt(e,"FBIOS")?"Facebook "+io:Yt(e,"UCWEB")||Yt(e,"UCBrowser")?"UC Browser":Yt(e,"CriOS")?t5:Yt(e,"CrMo")||Yt(e,iu)?iu:Yt(e,Xo)&&Yt(e,fh)?o5:Yt(e,"FxiOS")?i5:Yt(e.toLowerCase(),D_.toLowerCase())?D_:Kae(e,t)?Yt(e,io)?s5:fh:Yt(e,oc)?oc:Yt(e,"MSIE")||Yt(e,"Trident/")?ZE:Yt(e,"Gecko")?oc:""},Gae={[n5]:[new RegExp("rv:"+Zr)],[r5]:[new RegExp(tS+"?\\/"+Zr)],[iu]:[new RegExp("("+iu+"|CrMo)\\/"+Zr)],[t5]:[new RegExp("CriOS\\/"+Zr)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Zr)],[fh]:[sw],[s5]:[sw],[eS]:[new RegExp("(Opera|OPR)\\/"+Zr)],[oc]:[new RegExp(oc+"\\/"+Zr)],[i5]:[new RegExp("FxiOS\\/"+Zr)],[D_]:[new RegExp("Konqueror[:/]?"+Zr,"i")],[Pc]:[new RegExp(Pc+" "+Zr),sw],[o5]:[new RegExp("android\\s"+Zr,"i")],[e5]:[new RegExp(Z$+"\\/"+Zr)],[ZE]:[new RegExp("(rv:|MSIE )"+Zr)],Mozilla:[new RegExp("rv:"+Zr)]},Yae=function(e,t){var n=u5(e,t),r=Gae[n];if(yt(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=e.match(o);if(s)return parseFloat(s[s.length-2])}return null},gR=[[new RegExp(sc+"; "+sc+" (.*?)[);]","i"),e=>[sc,e&&e[1]||""]],[new RegExp(hh,"i"),[hh,""]],[new RegExp(ph,"i"),[ph,""]],[nS,[Pc,""]],[new RegExp(Ud,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[$_,""];if(new RegExp(io).test(t)&&!/IEMobile\b/.test(t))return[Ud+" "+io,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=qae[r]||"";return/arm/i.test(t)&&(i="RT"),[Ud,i]}return[Ud,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[sy,t.join(".")]}return[sy,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=yt(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+Xo+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Xo+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[Xo,t.join(".")]}return[Xo,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Fae,""]],[/Linux|debian/i,["Linux",""]]],mR=function(e){return Vae.test(e)?hh:Wae.test(e)?ph:Uae.test(e)?sc:new RegExp(M_,"i").test(e)?M_:new RegExp("("+$_+"|WPDesktop)","i").test(e)?$_:/iPad/.test(e)?Y$:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?J$:nS.test(e)?Pc:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(pR,"i").test(e)?pR:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(io).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?Xo:G$:Xo:new RegExp("(pda|"+io+")","i").test(e)?Hae:new RegExp(dh,"i").test(e)&&!new RegExp(dh+" pc","i").test(e)?l5:""},Qp="https?://(.*)",Dv=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Xae=Ov(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Dv),rS="<masked>";function c5(e,t,n){if(!xt)return{};var r=t?Ov([],Dv,n||[]):[];return d5(qE(xt.URL,r,rS),e)}function d5(e,t){var n=Xae.concat(t||[]),r={};return fn(n,function(i){var o=ey(e,i);r[i]=o||null}),r}function f5(e){var t=function(o){return o?o.search(Qp+"google.([^/?]*)")===0?"google":o.search(Qp+"bing.com")===0?"bing":o.search(Qp+"yahoo.com")===0?"yahoo":o.search(Qp+"duckduckgo.com")===0?"duckduckgo":null:null}(e),n=t!="yahoo"?"q":"p",r={};if(!nl(t)){r.$search_engine=t;var i=xt?ey(xt.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function yR(){return navigator.language||navigator.userLanguage}function h5(){return(xt==null?void 0:xt.referrer)||"$direct"}function p5(e,t){var n=e?Ov([],Dv,t||[]):[],r=fi==null?void 0:fi.href.substring(0,1e3);return{r:h5().substring(0,1e3),u:r?qE(r,n,rS):void 0}}function g5(e){var t,{r:n,u:r}=e,i={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(t=Tc(n))==null?void 0:t.host};if(r){i.$current_url=r;var o=Tc(r);i.$host=o==null?void 0:o.host,i.$pathname=o==null?void 0:o.pathname;var s=d5(r);Kn(i,s)}if(n){var a=f5(n);Kn(i,a)}return i}function m5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}function Jae(){try{return new Date().getTimezoneOffset()}catch(e){return}}function Qae(e,t){if(!ci)return{};var n,r,i,o=e?Ov([],Dv,t||[]):[],[s,a]=function(l){for(var u=0;u<gR.length;u++){var[c,d]=gR[u],h=c.exec(l),p=h&&(no(d)?d(h,l):d);if(p)return p}return["",""]}(ci);return Kn(WE({$os:s,$os_version:a,$browser:u5(ci,navigator.vendor),$device:mR(ci),$device_type:(r=ci,i=mR(r),i===Y$||i===G$||i==="Kobo"||i==="Kindle Fire"||i===l5?dh:i===hh||i===sc||i===ph||i===M_?"Console":i===J$?"Wearable":i?io:"Desktop"),$timezone:m5(),$timezone_offset:Jae()}),{$current_url:qE(fi==null?void 0:fi.href,o,rS),$host:fi==null?void 0:fi.host,$pathname:fi==null?void 0:fi.pathname,$raw_user_agent:ci.length>1e3?ci.substring(0,997)+"...":ci,$browser_version:Yae(ci,navigator.vendor),$browser_language:yR(),$browser_language_prefix:(n=yR(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:De==null?void 0:De.screen.height,$screen_width:De==null?void 0:De.screen.width,$viewport_height:De==null?void 0:De.innerHeight,$viewport_width:De==null?void 0:De.innerWidth,$lib:"web",$lib_version:Rs.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var L_,Ko=Kr("[FeatureFlags]"),aw="$active_feature_flags",Eu="$override_feature_flags",vR="$feature_flag_payloads",kd="$override_feature_flag_payloads",bR="$feature_flag_request_id",wR=e=>{var t={};for(var[n,r]of Cg(e||{}))r&&(t[n]=r);return t},Zae=e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(n=>{var r;return[n,(r=t[n].variant)!==null&&r!==void 0?r:t[n].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(n=>t[n].enabled).filter(n=>{var r;return(r=t[n].metadata)==null?void 0:r.payload}).map(n=>{var r;return[n,(r=t[n].metadata)==null?void 0:r.payload]}))):Ko.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e};(function(e){e.FeatureFlags="feature_flags",e.Recordings="recordings"})(L_||(L_={}));class ele{constructor(t){this.ae=!1,this.le=!1,this.ue=!1,this.he=!1,this.de=!1,this.ve=!1,this.ce=!1,this._instance=t,this.featureFlagEventHandlers=[]}decide(){if(this._instance.config.__preview_remote_config)this.ve=!0;else{var t=!this.fe&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.pe({disableFlags:t})}}get hasLoadedFlags(){return this.le}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this._instance.get_property(b_),n=this._instance.get_property(Eu),r=this._instance.get_property(kd);if(!r&&!n)return t||{};var i=Kn({},t||{}),o=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var s of o){var a,l,u=i[s],c=n==null?void 0:n[s],d=yt(c)?(a=u==null?void 0:u.enabled)!==null&&a!==void 0&&a:!!c,h=yt(c)?u.variant:typeof c=="string"?c:void 0,p=r==null?void 0:r[s],b=bt({},u,{enabled:d,variant:d?h!=null?h:u==null?void 0:u.variant:void 0});d!==(u==null?void 0:u.enabled)&&(b.original_enabled=u==null?void 0:u.enabled),h!==(u==null?void 0:u.variant)&&(b.original_variant=u==null?void 0:u.variant),p&&(b.metadata=bt({},u==null?void 0:u.metadata,{payload:p,original_payload:u==null||(l=u.metadata)==null?void 0:l.payload})),i[s]=b}return this.ae||(Ko.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:r,finalDetails:i}),this.ae=!0),i}getFlagVariants(){var t=this._instance.get_property(Wu),n=this._instance.get_property(Eu);if(!n)return t||{};for(var r=Kn({},t),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||(Ko.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:n,finalFlags:r}),this.ae=!0),r}getFlagPayloads(){var t=this._instance.get_property(vR),n=this._instance.get_property(kd);if(!n)return t||{};for(var r=Kn({},t||{}),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||(Ko.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:n,finalPayloads:r}),this.ae=!0),r}reloadFeatureFlags(){this.he||this._instance.config.advanced_disable_feature_flags||this.fe||(this.fe=setTimeout(()=>{this.pe()},5))}ge(){clearTimeout(this.fe),this.fe=void 0}ensureFlagsLoaded(){this.le||this.ue||this.fe||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.he=t}pe(t){var n;if(this.ge(),!this._instance.config.advanced_disable_decide)if(this.ue)this.de=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:bt({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(zd)||{}),group_properties:this._instance.get_property(xl)};(t!=null&&t.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var i=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config;i&&(r.timezone=m5()),this.ue=!0,this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api",i?"/flags/?v=2":"/decide/?v=4"),data:r,compression:this._instance.config.disable_compression?void 0:xo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:o=>{var s,a,l,u=!0;o.statusCode===200&&(this.de||(this.$anon_distinct_id=void 0),u=!1),this.ue=!1,this.ve||(this.ve=!0,this._instance.me((l=o.json)!==null&&l!==void 0?l:{})),r.disable_flags&&!this.de||(this.ce=!u,o.json&&(s=o.json.quotaLimited)!=null&&s.includes(L_.FeatureFlags)?Ko.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(this.receivedFeatureFlags((a=o.json)!==null&&a!==void 0?a:{},u),this.de&&(this.de=!1,this.pe())))}})}}getFeatureFlag(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[t],i=""+r,o=this._instance.get_property(bR)||void 0,s=this._instance.get_property(Jm)||{};if((n.send_event||!("send_event"in n))&&(!(t in s)||!s[t].includes(i))){var a,l,u,c,d,h,p,b,g,x,y;Ln(s[t])?s[t].push(i):s[t]=[i],(a=this._instance.persistence)==null||a.register({[Jm]:s});var v=this.getFeatureFlagDetails(t),w={$feature_flag:t,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:o,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(u=l.featureFlags)==null?void 0:u[t])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(d=c.featureFlagPayloads)==null?void 0:d[t])||null,$used_bootstrap_value:!this.ce};yt(v==null||(h=v.metadata)==null?void 0:h.version)||(w.$feature_flag_version=v.metadata.version);var E,S=(p=v==null||(b=v.reason)==null?void 0:b.description)!==null&&p!==void 0?p:v==null||(g=v.reason)==null?void 0:g.code;S&&(w.$feature_flag_reason=S),v!=null&&(x=v.metadata)!=null&&x.id&&(w.$feature_flag_id=v.metadata.id),yt(v==null?void 0:v.original_variant)&&yt(v==null?void 0:v.original_enabled)||(w.$feature_flag_original_response=yt(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(y=v.metadata)!=null&&y.original_payload&&(w.$feature_flag_original_payload=v==null||(E=v.metadata)==null?void 0:E.original_payload),this._instance.capture("$feature_flag_called",w)}return r}Ko.warn('getFeatureFlag for key "'+t+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,n){var r=this._instance.config.token;this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api","/decide/?v=4"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:xo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var o,s=(o=i.json)==null?void 0:o.featureFlagPayloads;n((s==null?void 0:s[t])||void 0)}})}isFeatureEnabled(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(t,n);Ko.warn('isFeatureEnabled for key "'+t+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==t)}receivedFeatureFlags(t,n){if(this._instance.persistence){this.le=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),o=this.getFlagsWithDetails();(function(s,a,l,u,c){l===void 0&&(l={}),u===void 0&&(u={}),c===void 0&&(c={});var d=Zae(s),h=d.flags,p=d.featureFlags,b=d.featureFlagPayloads;if(p){var g=s.requestId;if(Ln(p)){Ko.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var x={};if(p)for(var y=0;y<p.length;y++)x[p[y]]=!0;a&&a.register({[aw]:p,[Wu]:x})}else{var v=p,w=b,E=h;s.errorsWhileComputingFlags&&(v=bt({},l,v),w=bt({},u,w),E=bt({},c,E)),a&&a.register(bt({[aw]:Object.keys(wR(v)),[Wu]:v||{},[vR]:w||{},[b_]:E||{}},g?{[bR]:g}:{}))}}})(t,this._instance.persistence,r,i,o),this.be(n)}}override(t,n){n===void 0&&(n=!1),Ko.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:n})}overrideFeatureFlags(t){if(!this._instance.__loaded||!this._instance.persistence)return Ko.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(t===!1)return this._instance.persistence.unregister(Eu),this._instance.persistence.unregister(kd),void this.be();if(t&&typeof t=="object"&&("flags"in t||"payloads"in t)){var n,r=t;if(this.ae=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(Eu);else if(r.flags)if(Ln(r.flags)){for(var i={},o=0;o<r.flags.length;o++)i[r.flags[o]]=!0;this._instance.persistence.register({[Eu]:i})}else this._instance.persistence.register({[Eu]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(kd):r.payloads&&this._instance.persistence.register({[kd]:r.payloads})),void this.be()}this.be()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.le){var{flags:n,flagVariants:r}=this.we();t(n,r)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,n){var r,i=(this._instance.get_property(jg)||[]).find(l=>l.flagKey===t),o={["$feature_enrollment/"+t]:n},s={$feature_flag:t,$feature_enrollment:n,$set:o};i&&(s.$early_access_feature_name=i.name),this._instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(o,!1);var a=bt({},this.getFlagVariants(),{[t]:n});(r=this._instance.persistence)==null||r.register({[aw]:Object.keys(wR(a)),[Wu]:a}),this.be()}getEarlyAccessFeatures(t,n,r){n===void 0&&(n=!1);var i=this._instance.get_property(jg),o=r?"&"+r.map(s=>"stage="+s).join("&"):"";if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+o),method:"GET",callback:s=>{var a;if(s.json){var l=s.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[jg]:l}),t(l)}}})}we(){var t=this.getFlags(),n=this.getFlagVariants();return{flags:t.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,i)=>(r[i]=n[i],r),{})}}be(t){var{flags:n,flagVariants:r}=this.we();this.featureFlagEventHandlers.forEach(i=>i(n,r,{errorsLoading:t}))}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(zd)||{};this._instance.register({[zd]:bt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(zd)}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(xl)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=bt({},r[i],t[i]),delete t[i]}),this._instance.register({[xl]:bt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var n=this._instance.get_property(xl)||{};this._instance.register({[xl]:bt({},n,{[t]:{}})})}else this._instance.unregister(xl)}}var tle=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class lw{constructor(t){this.S=t,this.props={},this.ye=!1,this.Se=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(t),this.q=this.$e(t),this.load(),t.debug&&Ct.info("Persistence loaded",t.persistence,bt({},this.props)),this.update_config(t,t),this.save()}$e(t){tle.indexOf(t.persistence.toLowerCase())===-1&&(Ct.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var n=t.persistence.toLowerCase();return n==="localstorage"&&rr.O()?rr:n==="localstorage+cookie"&&qp.O()?qp:n==="sessionstorage"&&wr.O()?wr:n==="memory"?Bse:n==="cookie"?Bs:qp.O()?qp:Bs}properties(){var t={};return fn(this.props,function(n,r){if(r===Wu&&Bn(n))for(var i=Object.keys(n),o=0;o<i.length;o++)t["$feature/"+i[o]]=n[i[o]];else a=r,l=!1,(nl(s=vse)?l:AA&&s.indexOf===AA?s.indexOf(a)!=-1:(fn(s,function(u){if(l||(l=u===a))return Ym}),l))||(t[r]=n);var s,a,l}),t}load(){if(!this.ke){var t=this.q.D(this.Se);t&&(this.props=Kn({},t))}}save(){this.ke||this.q.j(this.Se,this.props,this.xe,this.Ee,this.Ie,this.S.debug)}remove(){this.q.L(this.Se,!1),this.q.L(this.Se,!0)}clear(){this.remove(),this.props={}}register_once(t,n,r){if(Bn(t)){yt(n)&&(n="None"),this.xe=yt(r)?this.Pe:r;var i=!1;if(fn(t,(o,s)=>{this.props.hasOwnProperty(s)&&this.props[s]!==n||(this.props[s]=o,i=!0)}),i)return this.save(),!0}return!1}register(t,n){if(Bn(t)){this.xe=yt(n)?this.Pe:n;var r=!1;if(fn(t,(i,o)=>{t.hasOwnProperty(o)&&this.props[o]!==i&&(this.props[o]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.ye){var t=c5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Uu(WE(t))||this.register(t),this.ye=!0}}update_search_keyword(){var t;this.register((t=xt==null?void 0:xt.referrer)?f5(t):{})}update_referrer_info(){var t;this.register_once({$referrer:h5(),$referring_domain:xt!=null&&xt.referrer&&((t=Tc(xt.referrer))==null?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[E_]||this.props[S_]||this.register_once({[k_]:p5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};fn([S_,E_],s=>{var a=this.props[s];a&&fn(a,function(l,u){t["$initial_"+h_(u)]=l})});var n,r,i=this.props[k_];if(i){var o=(n=g5(i),r={},fn(n,function(s,a){r["$initial_"+h_(a)]=s}),r);Kn(t,o)}return t}safe_merge(t){return fn(this.props,function(n,r){r in t||(t[r]=n)}),t}update_config(t,n){if(this.Pe=this.xe=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==n.persistence){var r=this.$e(t),i=this.props;this.clear(),this.q=r,this.props=i,this.save()}}set_disabled(t){this.ke=t,this.ke?this.remove():this.save()}set_cross_subdomain(t){t!==this.Ee&&(this.Ee=t,this.remove(),this.save())}set_secure(t){t!==this.Ie&&(this.Ie=t,this.remove(),this.save())}set_event_timer(t,n){var r=this.props[Bd]||{};r[t]=n,this.props[Bd]=r,this.save()}remove_event_timer(t){var n=(this.props[Bd]||{})[t];return yt(n)||(delete this.props[Bd][t],this.save()),n}get_property(t){return this.props[t]}set_property(t,n){this.props[t]=n,this.save()}}class y5{constructor(){this.Re={},this.Re={}}on(t,n){return this.Re[t]||(this.Re[t]=[]),this.Re[t].push(n),()=>{this.Re[t]=this.Re[t].filter(r=>r!==n)}}emit(t,n){for(var r of this.Re[t]||[])r(n);for(var i of this.Re["*"]||[])i(t,n)}}var ay=function(e,t){if(!function(n){try{new RegExp(n)}catch(r){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(n){return!1}};class El{constructor(t){this.Te=new y5,this.Me=(n,r)=>this.Ce(n,r)&&this.Oe(n,r)&&this.Fe(n,r),this.Ce=(n,r)=>r==null||!r.event||(n==null?void 0:n.event)===(r==null?void 0:r.event),this._instance=t,this.Ae=new Set,this.De=new Set}init(){var t;if(!yt((t=this._instance)==null?void 0:t.je)){var n;(n=this._instance)==null||n.je((r,i)=>{this.on(r,i)})}}register(t){var n,r;if(!yt((n=this._instance)==null?void 0:n.je)&&(t.forEach(s=>{var a,l;(a=this.De)==null||a.add(s),(l=s.steps)==null||l.forEach(u=>{var c;(c=this.Ae)==null||c.add((u==null?void 0:u.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var i,o=new Set;t.forEach(s=>{var a;(a=s.steps)==null||a.forEach(l=>{l!=null&&l.selector&&o.add(l==null?void 0:l.selector)})}),(i=this._instance)==null||i.autocapture.setElementSelectors(o)}}on(t,n){var r;n!=null&&t.length!=0&&(this.Ae.has(t)||this.Ae.has(n==null?void 0:n.event))&&this.De&&((r=this.De)==null?void 0:r.size)>0&&this.De.forEach(i=>{this.Le(n,i)&&this.Te.emit("actionCaptured",i.name)})}Ne(t){this.onAction("actionCaptured",n=>t(n))}Le(t,n){if((n==null?void 0:n.steps)==null)return!1;for(var r of n.steps)if(this.Me(t,r))return!0;return!1}onAction(t,n){return this.Te.on(t,n)}Oe(t,n){if(n!=null&&n.url){var r,i=t==null||(r=t.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!El.ze(i,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static ze(t,n,r){switch(r){case"regex":return!!De&&ay(t,n);case"exact":return n===t;case"contains":var i=El.Ue(n).replace(/_/g,".").replace(/%/g,".*");return ay(t,i);default:return!1}}static Ue(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Fe(t,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.qe(t).some(o=>!(n!=null&&n.href&&!El.ze(o.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||o.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!El.ze(o.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!El.ze(o.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var r,i=t==null||(r=t.properties)==null?void 0:r.$element_selectors;if(!i||!i.includes(n==null?void 0:n.selector))return!1}return!0}qe(t){return(t==null?void 0:t.properties.$elements)==null?[]:t==null?void 0:t.properties.$elements}}var er=Kr("[Surveys]");class nle{constructor(t){this._instance=t,this.Be=new Map,this.He=new Map}register(t){var n;yt((n=this._instance)==null?void 0:n.je)||(this.We(t),this.Ge(t))}Ge(t){var n=t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.actions)&&((o=r.conditions)==null||(s=o.actions)==null||(a=s.values)==null?void 0:a.length)>0});n.length!==0&&(this.Je==null&&(this.Je=new El(this._instance),this.Je.init(),this.Je.Ne(r=>{this.onAction(r)})),n.forEach(r=>{var i,o,s,a,l,u,c,d,h,p;r.conditions&&(i=r.conditions)!=null&&i.actions&&(o=r.conditions)!=null&&(s=o.actions)!=null&&s.values&&((a=r.conditions)==null||(l=a.actions)==null||(u=l.values)==null?void 0:u.length)>0&&((c=this.Je)==null||c.register(r.conditions.actions.values),(d=r.conditions)==null||(h=d.actions)==null||(p=h.values)==null||p.forEach(b=>{if(b&&b.name){var g=this.He.get(b.name);g&&g.push(r.id),this.He.set(b.name,g||[r.id])}}))}))}We(t){var n;t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.events)&&((o=r.conditions)==null||(s=o.events)==null||(a=s.values)==null?void 0:a.length)>0}).length!==0&&((n=this._instance)==null||n.je((r,i)=>{this.onEvent(r,i)}),t.forEach(r=>{var i,o,s;(i=r.conditions)==null||(o=i.events)==null||(s=o.values)==null||s.forEach(a=>{if(a&&a.name){var l=this.Be.get(a.name);l&&l.push(r.id),this.Be.set(a.name,l||[r.id])}})}))}onEvent(t,n){var r,i,o=((r=this._instance)==null||(i=r.persistence)==null?void 0:i.props[Vp])||[];if(t==="survey shown"&&n&&o.length>0){var s;er.info("survey event matched, removing survey from activated surveys",{event:t,eventPayload:n,existingActivatedSurveys:o});var a=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(a){var l=o.indexOf(a);l>=0&&(o.splice(l,1),this.Ve(o))}}else this.Be.has(t)&&(er.info("survey event matched, updating activated surveys",{event:t,surveys:this.Be.get(t)}),this.Ve(o.concat(this.Be.get(t)||[])))}onAction(t){var n,r,i=((n=this._instance)==null||(r=n.persistence)==null?void 0:r.props[Vp])||[];this.He.has(t)&&this.Ve(i.concat(this.He.get(t)||[]))}Ve(t){var n,r;(n=this._instance)==null||(r=n.persistence)==null||r.register({[Vp]:[...new Set(t)]})}getSurveys(){var t,n,r=(t=this._instance)==null||(n=t.persistence)==null?void 0:n.props[Vp];return r||[]}getEventToSurveys(){return this.Be}Ke(){return this.Je}}class rle{constructor(t){this.Ye=null,this.Xe=!1,this.Qe=!1,this.Ze=[],this._instance=t,this._surveyEventReceiver=null}onRemoteConfig(t){var n=t.surveys;if(sn(n))return er.warn("Decide not loaded yet. Not loading surveys.");var r=Ln(n);this.tr=r?n.length>0:n,er.info("decide response received, hasSurveys: "+this.tr),this.tr&&this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith("seenSurvey_")||r!=null&&r.startsWith("inProgressSurvey_"))&&t.push(r)}t.forEach(i=>localStorage.removeItem(i))}loadIfEnabled(){if(!this.Ye)if(this.Qe)er.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)er.info("Disabled. Not loading surveys.");else if(this.tr){var t=Ut==null?void 0:Ut.__PosthogExtensions__;if(t){this.Qe=!0;try{var n=t.generateSurveys;if(n)return void this.ir(n);var r=t.loadExternalDependency;if(!r)return void this.er("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",i=>{i||!t.generateSurveys?this.er("Could not load surveys script",i):this.ir(t.generateSurveys)})}catch(i){throw this.er("Error initializing surveys",i),i}finally{this.Qe=!1}}else er.error("PostHog Extensions not found.")}else er.info("No surveys to load.")}ir(t){this.Ye=t(this._instance),this._surveyEventReceiver=new nle(this._instance),er.info("Surveys loaded successfully"),this.rr({isLoaded:!0})}er(t,n){er.error(t,n),this.rr({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.Ze.push(t),this.Ye&&this.rr({isLoaded:!0}),()=>{this.Ze=this.Ze.filter(n=>n!==t)}}getSurveys(t,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return er.info("Disabled. Not loading surveys."),t([]);var r=this._instance.get_property(w_);if(r&&!n)return t(r,{isLoaded:!0});if(this.Xe)return t([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Xe=!0,this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var o;this.Xe=!1;var s=i.statusCode;if(s!==200||!i.json){var a="Surveys API could not be loaded, status: "+s;return er.error(a),t([],{isLoaded:!1,error:a})}var l,u=i.json.surveys||[],c=u.filter(d=>function(h){return!(!h.start_date||h.end_date)}(d)&&(function(h){var p,b,g;return!((p=h.conditions)==null||(b=p.events)==null||(g=b.values)==null||!g.length)}(d)||function(h){var p,b,g;return!((p=h.conditions)==null||(b=p.actions)==null||(g=b.values)==null||!g.length)}(d)));return c.length>0&&((l=this._surveyEventReceiver)==null||l.register(c)),(o=this._instance.persistence)==null||o.register({[w_]:u}),t(u,{isLoaded:!0})}})}catch(i){throw this.Xe=!1,i}}rr(t){for(var n of this.Ze)try{t.isLoaded?this.getSurveys(n):n([],t)}catch(r){er.error("Error in survey callback",r)}}getActiveMatchingSurveys(t,n){if(n===void 0&&(n=!1),!sn(this.Ye))return this.Ye.getActiveMatchingSurveys(t,n);er.warn("init was not called")}sr(t){var n=null;return this.getSurveys(r=>{var i;n=(i=r.find(o=>o.id===t))!==null&&i!==void 0?i:null}),n}nr(t){if(sn(this.Ye))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof t=="string"?this.sr(t):t;return n?this.Ye.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(sn(this.Ye))return er.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.nr(t);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(t,n){return sn(this.Ye)?(er.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(i=>{var o,s=(o=i.find(l=>l.id===t))!==null&&o!==void 0?o:null;if(s){var a=this.nr(s);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(t,n){if(sn(this.Ye))er.warn("init was not called");else{var r=this.sr(t),i=xt==null?void 0:xt.querySelector(n);r?i?this.Ye.renderSurvey(r,i):er.warn("Survey element not found"):er.warn("Survey not found")}}}var xR=Kr("[RateLimiter]");class ile{constructor(t){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var o=i.text;if(o&&o.length)try{(JSON.parse(o).quota_limited||[]).forEach(s=>{xR.info((s||"events")+" is quota limited."),this.serverLimits[s]=new Date().getTime()+6e4})}catch(s){return void xR.warn('could not rate limit - continuing. Error: "'+(s==null?void 0:s.message)+'"',{text:o})}},this.instance=t,this.captureEventsPerSecond=((n=t.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=t.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var n,r,i;t===void 0&&(t=!1);var o=new Date().getTime(),s=(n=(r=this.instance.persistence)==null?void 0:r.get_property(__))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:o};s.tokens+=(o-s.last)/1e3*this.captureEventsPerSecond,s.last=o,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var a=s.tokens<1;return a||t||(s.tokens=Math.max(0,s.tokens-1)),!a||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(__,s),{isRateLimited:a,remainingTokens:s.tokens}}isServerRateLimited(t){var n=this.serverLimits[t||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var hl=Kr("[RemoteConfig]");class ole{constructor(t){this._instance=t}get remoteConfig(){var t,n;return(t=Ut._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.config}ar(t){var n,r;(n=Ut.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=Ut.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>t(this.remoteConfig)):(hl.error("PostHog Extensions not found. Cannot load remote config."),t())}lr(t){this._instance._e({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{t(n.json)}})}load(){try{if(this.remoteConfig)return hl.info("Using preloaded remote config",this.remoteConfig),void this.me(this.remoteConfig);if(this._instance.config.advanced_disable_decide)return void hl.warn("Remote config is disabled. Falling back to local config.");this.ar(t=>{if(!t)return hl.info("No config found after loading remote JS config. Falling back to JSON."),void this.lr(n=>{this.me(n)});this.me(t)})}catch(t){hl.error("Error loading remote config",t)}}me(t){t?this._instance.config.__preview_remote_config?(this._instance.me(t),t.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):hl.info("__preview_remote_config is disabled. Logging config instead",t):hl.error("Failed to fetch remote config from PostHog.")}}var sle=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=e.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),nl(a)||(n>t&&(o+=e.substring(t,n)),o+=a,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o},ale=!!f_||!!d_,_R="text/plain",ly=(e,t)=>{var[n,r]=e.split("?"),i=bt({},t);r==null||r.split("&").forEach(s=>{var[a]=s.split("=");delete i[a]});var o=jse(i);return n+"?"+(o=o?(r?r+"&":"")+o:r)},Wd=(e,t)=>JSON.stringify(e,(n,r)=>typeof r=="bigint"?r.toString():r,t),uw=e=>{var{data:t,compression:n}=e;if(t){if(n===xo.GZipJS){var r=H$(U$(Wd(t)),{mtime:0}),i=new Blob([r],{type:_R});return{contentType:_R,body:i,estimatedSize:i.size}}if(n===xo.Base64){var o=function(l){var u,c,d,h,p,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,x=0,y="",v=[];if(!l)return l;l=sle(l);do u=(p=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,c=p>>12&63,d=p>>6&63,h=63&p,v[x++]=b.charAt(u)+b.charAt(c)+b.charAt(d)+b.charAt(h);while(g<l.length);switch(y=v.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(Wd(t)),s=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Wd(l)))(o);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var a=Wd(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},lf=[];d_&&lf.push({transport:"fetch",method:e=>{var t,n,{contentType:r,body:i,estimatedSize:o}=(t=uw(e))!==null&&t!==void 0?t:{},s=new Headers;fn(e.headers,function(c,d){s.append(d,c)}),r&&s.append("Content-Type",r);var a=e.url,l=null;if(RA){var u=new RA;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),e.timeout)}}d_(a,bt({method:(e==null?void 0:e.method)||"GET",headers:s,keepalive:e.method==="POST"&&(o||0)<52428.8,body:i,signal:(n=l)==null?void 0:n.signal},e.fetchOptions)).then(c=>c.text().then(d=>{var h={statusCode:c.status,text:d};if(c.status===200)try{h.json=JSON.parse(d)}catch(p){Ct.error(p)}e.callback==null||e.callback(h)})).catch(c=>{Ct.error(c),e.callback==null||e.callback({statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),f_&&lf.push({transport:"XHR",method:e=>{var t,n=new f_;n.open(e.method||"GET",e.url,!0);var{contentType:r,body:i}=(t=uw(e))!==null&&t!==void 0?t:{};fn(e.headers,function(o,s){n.setRequestHeader(s,o)}),r&&n.setRequestHeader("Content-Type",r),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch(s){}e.callback==null||e.callback(o)}},n.send(i)}}),Oi!=null&&Oi.sendBeacon&&lf.push({transport:"sendBeacon",method:e=>{var t=ly(e.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=uw(e))!==null&&n!==void 0?n:{},o=typeof i=="string"?new Blob([i],{type:r}):i;Oi.sendBeacon(t,o)}catch(s){}}});var B_=3e3;class lle{constructor(t,n){this.ur=!0,this.hr=[],this.dr=eo((n==null?void 0:n.flush_interval_ms)||B_,250,5e3,"flush interval",B_),this.vr=t}enqueue(t){this.hr.push(t),this.cr||this.pr()}unload(){this.gr();var t=this.hr.length>0?this._r():{},n=Object.values(t);[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.vr(bt({},r,{transport:"sendBeacon"}))})}enable(){this.ur=!1,this.pr()}pr(){var t=this;this.ur||(this.cr=setTimeout(()=>{if(this.gr(),this.hr.length>0){var n=this._r(),r=function(o){var s=n[o],a=new Date().getTime();s.data&&Ln(s.data)&&fn(s.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),t.vr(s)};for(var i in n)r(i)}},this.dr))}gr(){clearTimeout(this.cr),this.cr=void 0}_r(){var t={};return fn(this.hr,n=>{var r,i=n,o=(i?i.batchKey:null)||i.url;yt(t[o])&&(t[o]=bt({},i,{data:[]})),(r=t[o].data)==null||r.push(i.data)}),this.hr=[],t}}var ule=["retriesPerformedSoFar"];class cle{constructor(t){this.mr=!1,this.br=3e3,this.hr=[],this._instance=t,this.hr=[],this.wr=!0,!yt(De)&&"onLine"in De.navigator&&(this.wr=De.navigator.onLine,Rn(De,"online",()=>{this.wr=!0,this.Xi()}),Rn(De,"offline",()=>{this.wr=!1}))}get length(){return this.hr.length}retriableRequest(t){var{retriesPerformedSoFar:n}=t,r=g$(t,ule);Br(n)&&n>0&&(r.url=ly(r.url,{retry_count:n})),this._instance._e(bt({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n!=null?n:0)<10?this.yr(bt({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(i)}}))}yr(t){var n=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=n+1;var r=function(s){var a=3e3*Math.pow(2,s),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),i=Date.now()+r;this.hr.push({retryAt:i,requestOptions:t});var o="Enqueued failed request for retry in "+r;navigator.onLine||(o+=" (Browser is offline)"),Ct.warn(o),this.mr||(this.mr=!0,this.Sr())}Sr(){this.$r&&clearTimeout(this.$r),this.$r=setTimeout(()=>{this.wr&&this.hr.length>0&&this.Xi(),this.Sr()},this.br)}Xi(){var t=Date.now(),n=[],r=this.hr.filter(o=>o.retryAt<t||(n.push(o),!1));if(this.hr=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:t}of(this.$r&&(clearTimeout(this.$r),this.$r=void 0),this.hr))try{this._instance._e(bt({},t,{transport:"sendBeacon"}))}catch(n){Ct.error(n)}this.hr=[]}}class dle{constructor(t){this.kr=()=>{var n,r,i,o;this.Er||(this.Er={});var s=this.scrollElement(),a=this.scrollY(),l=s?Math.max(0,s.scrollHeight-s.clientHeight):0,u=a+((s==null?void 0:s.clientHeight)||0),c=(s==null?void 0:s.scrollHeight)||0;this.Er.lastScrollY=Math.ceil(a),this.Er.maxScrollY=Math.max(a,(n=this.Er.maxScrollY)!==null&&n!==void 0?n:0),this.Er.maxScrollHeight=Math.max(l,(r=this.Er.maxScrollHeight)!==null&&r!==void 0?r:0),this.Er.lastContentY=u,this.Er.maxContentY=Math.max(u,(i=this.Er.maxContentY)!==null&&i!==void 0?i:0),this.Er.maxContentHeight=Math.max(c,(o=this.Er.maxContentHeight)!==null&&o!==void 0?o:0)},this._instance=t}getContext(){return this.Er}resetContext(){var t=this.Er;return setTimeout(this.kr,0),t}startMeasuringScrollPosition(){Rn(De,"scroll",this.kr,{capture:!0}),Rn(De,"scrollend",this.kr,{capture:!0}),Rn(De,"resize",this.kr)}scrollElement(){if(!this._instance.config.scroll_root_selector)return De==null?void 0:De.document.documentElement;var t=Ln(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of t){var r=De==null?void 0:De.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return De&&(De.scrollY||De.pageYOffset||De.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return De&&(De.scrollX||De.pageXOffset||De.document.documentElement.scrollLeft)||0}}var fle=e=>p5(e==null?void 0:e.config.mask_personal_data_properties,e==null?void 0:e.config.custom_personal_data_properties);class hle{constructor(t,n,r,i){this.Ir=o=>{var s=this.Pr();if(!s||s.sessionId!==o){var a={sessionId:o,props:this.Rr(this._instance)};this.Tr.register({[x_]:a})}},this._instance=t,this.Mr=n,this.Tr=r,this.Rr=i||fle,this.Mr.onSessionId(this.Ir)}Pr(){return this.Tr.props[x_]}getSetOnceProps(){var t,n=(t=this.Pr())==null?void 0:t.props;return n?"r"in n?g5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var t={};return fn(WE(this.getSetOnceProps()),(n,r)=>{r==="$current_url"&&(r="url"),t["$session_entry_"+h_(r)]=n}),t}}var ER=Kr("[SessionId]");class ple{constructor(t,n,r){var i;if(this.Cr=[],!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=t.config,this.Tr=t.persistence,this.oi=void 0,this.kt=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Or=n||xa,this.Fr=r||xa;var o=this.S.persistence_name||this.S.token,s=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*eo(s,60,36e3,"session_idle_timeout_seconds",1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ar(),this.Dr="ph_"+o+"_window_id",this.jr="ph_"+o+"_primary_window_exists",this.Lr()){var a=wr.D(this.Dr),l=wr.D(this.jr);a&&!l?this.oi=a:wr.L(this.Dr),wr.j(this.jr,!0)}if((i=this.S.bootstrap)!=null&&i.sessionID)try{var u=(c=>{var d=c.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Nr(this.S.bootstrap.sessionID,new Date().getTime(),u)}catch(c){ER.error("Invalid sessionID in bootstrap",c)}this.zr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return yt(this.Cr)&&(this.Cr=[]),this.Cr.push(t),this.kt&&t(this.kt,this.oi),()=>{this.Cr=this.Cr.filter(n=>n!==t)}}Lr(){return this.S.persistence!=="memory"&&!this.Tr.ke&&wr.O()}Ur(t){t!==this.oi&&(this.oi=t,this.Lr()&&wr.j(this.Dr,t))}qr(){return this.oi?this.oi:this.Lr()?wr.D(this.Dr):null}Nr(t,n,r){t===this.kt&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.kt=t,this.Tr.register({[Xm]:[n,t,r]}))}Br(){if(this.kt&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.kt,this._sessionStartTimestamp];var t=this.Tr.props[Xm];return Ln(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.Nr(null,null,null)}zr(){Rn(De,"beforeunload",()=>{this.Lr()&&wr.L(this.jr)},{capture:!1})}checkAndGetSessionAndWindowId(t,n){if(t===void 0&&(t=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[i,o,s]=this.Br(),a=this.qr(),l=Br(s)&&s>0&&Math.abs(r-s)>864e5,u=!1,c=!o,d=!t&&Math.abs(r-i)>this.sessionTimeoutMs;c||d||l?(o=this.Or(),a=this.Fr(),ER.info("new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:l}}),s=r,u=!0):a||(a=this.Fr(),u=!0);var h=i===0||!t||l?r:i,p=s===0?new Date().getTime():s;return this.Ur(a),this.Nr(o,h,p),t||this.Ar(),u&&this.Cr.forEach(b=>b(o,a,u?{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:o,windowId:a,sessionStartTimestamp:p,changeReason:u?{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}Ar(){clearTimeout(this.Hr),this.Hr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var gle=["$set_once","$set"],ca=Kr("[SiteApps]");class mle{constructor(t){this._instance=t,this.Wr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Gr(t,n){if(n){var r=this.globalsForEvent(n);this.Wr.push(r),this.Wr.length>1e3&&(this.Wr=this.Wr.slice(10))}}get siteAppLoaders(){var t,n;return(t=Ut._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.siteApps}init(){if(this.isEnabled){var t=this._instance.je(this.Gr.bind(this));this.Jr=()=>{t(),this.Wr=[],this.Jr=void 0}}}globalsForEvent(t){var n,r,i,o,s,a,l;if(!t)throw new Error("Event payload is required");var u={},c=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[h,p]of Object.entries(d))u[h]={id:c[h],type:h,properties:p};var{$set_once:b,$set:g}=t;return{event:bt({},g$(t,gle),{properties:bt({},t.properties,g?{$set:bt({},(n=(r=t.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},g)}:{},b?{$set_once:bt({},(i=(o=t.properties)==null?void 0:o.$set_once)!==null&&i!==void 0?i:{},b)}:{}),elements_chain:(s=(a=t.properties)==null?void 0:a.$elements_chain)!==null&&s!==void 0?s:"",distinct_id:(l=t.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(t){var n=this.apps[t.id],r=()=>{var a;!n.errored&&this.Wr.length&&(ca.info("Processing "+this.Wr.length+" events for site app with id "+t.id),this.Wr.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.Jr)==null||a.call(this))},i=!1,o=a=>{n.errored=!a,n.loaded=!0,ca.info("Site app with id "+t.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:s}=t.init({posthog:this._instance,callback:a=>{o(a)}});s&&(n.processEvent=s),i=!0}catch(a){ca.error("Error while initializing PostHog app with config id "+t.id,a),o(!1)}if(i&&n.loaded)try{r()}catch(a){ca.error("Error while processing buffered events PostHog app with config id "+t.id,a),n.errored=!0}}Vr(){var t=this.siteAppLoaders||[];for(var n of t)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of t)this.setupSiteApp(r)}Kr(t){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(t);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(i){ca.error("Error while processing event "+t.event+" for site app "+r.id,i)}}}onRemoteConfig(t){var n,r,i,o=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.Vr(),void this._instance.on("eventCaptured",u=>this.Kr(u))):void ca.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Jr)==null||r.call(this),(i=t.siteApps)!=null&&i.length)if(this.isEnabled){var s=function(u,c){var d;Ut["__$$ph_site_app_"+u]=o._instance,(d=Ut.__PosthogExtensions__)==null||d.loadSiteApp==null||d.loadSiteApp(o._instance,c,h=>{if(h)return ca.error("Error while initializing PostHog app with config id "+u,h)})};for(var{id:a,url:l}of t.siteApps)s(a,l)}else ca.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var Rl,yle=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","bytespider"],SR=function(e,t){if(!e)return!1;var n=e.toLowerCase();return yle.concat(t||[]).some(r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1})},v5=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&SR(n,t))return!0;try{var r=e==null?void 0:e.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>SR(i==null?void 0:i.brand,t)))return!0}catch(i){}return!!e.webdriver};function kR(e,t,n){return Wd({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}(function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"})(Rl||(Rl={}));var CR="i.posthog.com";class vle{constructor(t){this.Yr={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}get uiHost(){var t,n=(t=this.instance.config.ui_host)==null?void 0:t.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+CR,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.Yr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=Rl.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=Rl.EU:this.Yr[this.apiHost]=Rl.CUSTOM),this.Yr[this.apiHost]}endpointFor(t,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),t==="ui")return this.uiHost+n;if(this.region===Rl.CUSTOM)return this.apiHost+n;var r=CR+n;switch(t){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var ble={icontains:(e,t)=>!!De&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!De&&t.href.toLowerCase().indexOf(e.toLowerCase())===-1,regex:(e,t)=>!!De&&ay(t.href,e),not_regex:(e,t)=>!!De&&!ay(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class Or{constructor(t){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments(i=>{Or.Xr("retrieved web experiments from the server"),n.Qr=new Map,i.forEach(o=>{if(o.feature_flag_key){var s;n.Qr&&(Or.Xr("setting flag key ",o.feature_flag_key," to web experiment ",o),(s=n.Qr)==null||s.set(o.feature_flag_key,o));var a=n._instance.getFeatureFlag(o.feature_flag_key);Qn(a)&&o.variants[a]&&n.Zr(o.name,a,o.variants[a].transforms)}else if(o.variants)for(var l in o.variants){var u=o.variants[l];Or.ts(u)&&n.Zr(o.name,l,u.transforms)}})},r)},this._instance=t,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(t){if(this._is_bot())Or.Xr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(sn(this.Qr))return this.Qr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();Or.Xr("applying feature flags",t),t.forEach(n=>{var r;if(this.Qr&&(r=this.Qr)!=null&&r.has(n)){var i,o=this._instance.getFeatureFlag(n),s=(i=this.Qr)==null?void 0:i.get(n);o&&s!=null&&s.variants[o]&&this.Zr(s.name,o,s.variants[o].transforms)}})}}previewWebExperiment(){var t=Or.getWindowLocation();if(t!=null&&t.search){var n=ey(t==null?void 0:t.search,"__experiment_id"),r=ey(t==null?void 0:t.search,"__experiment_variant");n&&r&&(Or.Xr("previewing web experiments "+n+" && "+r),this.getWebExperiments(i=>{this.es(parseInt(n),r,i)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,n,r){if(this._instance.config.disable_web_experiments&&!r)return t([]);var i=this._instance.get_property("$web_experiments");if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:o=>{if(o.statusCode!==200||!o.json)return t([]);var s=o.json.experiments||[];return t(s)}})}es(t,n,r){var i=r.filter(o=>o.id===t);i&&i.length>0&&(Or.Xr("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this.Zr(i[0].name,n,i[0].variants[n].transforms))}static ts(t){return!sn(t.conditions)&&Or.rs(t)&&Or.ss(t)}static rs(t){var n;if(sn(t.conditions)||sn((n=t.conditions)==null?void 0:n.url))return!0;var r,i,o,s=Or.getWindowLocation();return!!s&&((r=t.conditions)==null||!r.url||ble[(i=(o=t.conditions)==null?void 0:o.urlMatchType)!==null&&i!==void 0?i:"icontains"](t.conditions.url,s))}static getWindowLocation(){return De==null?void 0:De.location}static ss(t){var n;if(sn(t.conditions)||sn((n=t.conditions)==null?void 0:n.utm))return!0;var r=c5();if(r.utm_source){var i,o,s,a,l,u,c,d,h,p,b,g,x,y,v,w,E=(i=t.conditions)==null||(o=i.utm)==null||!o.utm_campaign||((s=t.conditions)==null||(a=s.utm)==null?void 0:a.utm_campaign)==r.utm_campaign,S=(l=t.conditions)==null||(u=l.utm)==null||!u.utm_source||((c=t.conditions)==null||(d=c.utm)==null?void 0:d.utm_source)==r.utm_source,A=(h=t.conditions)==null||(p=h.utm)==null||!p.utm_medium||((b=t.conditions)==null||(g=b.utm)==null?void 0:g.utm_medium)==r.utm_medium,T=(x=t.conditions)==null||(y=x.utm)==null||!y.utm_term||((v=t.conditions)==null||(w=v.utm)==null?void 0:w.utm_term)==r.utm_term;return E&&A&&T&&S}return!1}static Xr(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ct.info("[WebExperiments] "+t,r)}Zr(t,n,r){this._is_bot()?Or.Xr("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(i=>{if(i.selector){var o;Or.Xr("applying transform of variant "+n+" for experiment "+t+" ",i);var s=(o=document)==null?void 0:o.querySelectorAll(i.selector);s==null||s.forEach(a=>{var l=a;i.html&&(l.innerHTML=i.html),i.css&&l.setAttribute("style",i.css)})}}):Or.Xr("Control variants leave the page unmodified.")}_is_bot(){return Oi&&this._instance?v5(Oi,this._instance.config.custom_blocked_useragents):void 0}}var uf={},F_=()=>{},ku="posthog",b5=!ale&&(ci==null?void 0:ci.indexOf("MSIE"))===-1&&(ci==null?void 0:ci.indexOf("Mozilla"))===-1,jR=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:yse(xt==null?void 0:xt.location),persistence:"localStorage+cookie",persistence_name:"",loaded:F_,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:fi&&Qn(fi==null?void 0:fi.search)&&fi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(De==null||(e=De.location)==null?void 0:e.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var n="Bad HTTP status: "+t.statusCode+" "+t.text;Ct.error(n)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:B_},_onCapture:F_}},AR=e=>{var t={};yt(e.process_person)||(t.person_profiles=e.process_person),yt(e.xhr_headers)||(t.request_headers=e.xhr_headers),yt(e.cookie_name)||(t.persistence_name=e.cookie_name),yt(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),yt(e.store_google)||(t.save_campaign_params=e.store_google),yt(e.verbose)||(t.debug=e.verbose);var n=Kn({},t,e);return Ln(e.property_blacklist)&&(yt(e.property_denylist)?n.property_denylist=e.property_blacklist:Ln(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:Ct.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class wle{constructor(){this.__forceAllowLocalhost=!1}get ns(){return this.__forceAllowLocalhost}set ns(t){Ct.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}class Lv{get decideEndpointWasHit(){var t,n;return(t=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&t!==void 0&&t}constructor(){this.webPerformance=new wle,this.os=!1,this.version=Rs.LIB_VERSION,this.ls=new y5,this.config=jR(),this.SentryIntegration=Nae,this.sentryIntegration=t=>function(n,r){var i=K$(n,r);return{name:q$,processEvent:o=>i(o)}}(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.us=!1,this.hs=null,this.ds=null,this.vs=null,this.featureFlags=new ele(this),this.toolbar=new Iae(this),this.scrollManager=new dle(this),this.pageViewManager=new Lae(this),this.surveys=new rle(this),this.experiments=new Or(this),this.exceptions=new Bae(this),this.rateLimiter=new ile(this),this.requestRouter=new vle(this),this.consent=new Fse(this),this.people={set:(t,n,r)=>{var i=Qn(t)?{[t]:n}:t;this.setPersonProperties(i),r==null||r({})},set_once:(t,n,r)=>{var i=Qn(t)?{[t]:n}:t;this.setPersonProperties(void 0,i),r==null||r({})}},this.on("eventCaptured",t=>Ct.info('send "'+(t==null?void 0:t.event)+'"',t))}init(t,n,r){if(r&&r!==ku){var i,o=(i=uf[r])!==null&&i!==void 0?i:new Lv;return o._init(t,n,r),uf[r]=o,uf[ku][r]=o,o}return this._init(t,n,r)}_init(t,n,r){var i,o;if(n===void 0&&(n={}),yt(t)||p_(t))return Ct.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ct.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.cs=[],n.person_profiles&&(this.ds=n.person_profiles),this.set_config(Kn({},jR(),AR(n),{name:r,token:t})),this.config.on_xhr_error&&Ct.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:xo.GZipJS,this.persistence=new lw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new lw(bt({},this.config,{persistence:"sessionStorage"}));var s=bt({},this.persistence.props),a=bt({},this.sessionPersistence.props);if(this.fs=new lle(y=>this.ps(y),this.config.request_queue_config),this.gs=new cle(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new ple(this),this.sessionPropsManager=new hle(this,this.sessionManager,this.persistence)),new Oae(this).startIfEnabledOrStop(),this.siteApps=new mle(this),(i=this.siteApps)==null||i.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new Aae(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new Tse(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Dae(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new $ae(this),this.exceptionObserver=new Use(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new I$(this,Hse),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new rae(this),this.historyAutocapture.startIfEnabled(),Rs.DEBUG=Rs.DEBUG||this.config.debug,Rs.DEBUG&&Ct.info("Starting in debug mode",{this:this,config:n,thisC:bt({},this.config),p:s,s:a}),this._s(),((o=n.bootstrap)==null?void 0:o.distinctID)!==void 0){var l,u,c=this.config.get_device_id(xa()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?c:n.bootstrap.distinctID;this.persistence.set_property(_s,(u=n.bootstrap)!=null&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.bs()){var h,p,b=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlags)||{}).filter(y=>{var v,w;return!((v=n.bootstrap)==null||(w=v.featureFlags)==null||!w[y])}).reduce((y,v)=>{var w,E;return y[v]=((w=n.bootstrap)==null||(E=w.featureFlags)==null?void 0:E[v])||!1,y},{}),g=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>b[y]).reduce((y,v)=>{var w,E,S,A;return(w=n.bootstrap)!=null&&(E=w.featureFlagPayloads)!=null&&E[v]&&(y[v]=(S=n.bootstrap)==null||(A=S.featureFlagPayloads)==null?void 0:A[v]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:b,featureFlagPayloads:g})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:UA,$device_id:null},"");else if(!this.get_distinct_id()){var x=this.config.get_device_id(xa());this.register_once({distinct_id:x,$device_id:x},""),this.persistence.set_property(_s,"anonymous")}return Rn(De,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?Rae(this,()=>this.ws()):this.ws(),no(this.config._onCapture)&&this.config._onCapture!==F_&&(Ct.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this}me(t){var n,r,i,o,s,a,l,u;if(!xt||!xt.body)return Ct.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.me(t)},500);this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=Yt(t.supportedCompression,xo.GZipJS)?xo.GZipJS:Yt(t.supportedCompression,xo.Base64)?xo.Base64:void 0),(n=t.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.ds?this.ds:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(t),(i=this.sessionRecording)==null||i.onRemoteConfig(t),(o=this.autocapture)==null||o.onRemoteConfig(t),(s=this.heatmaps)==null||s.onRemoteConfig(t),this.surveys.onRemoteConfig(t),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(t),(l=this.exceptionObserver)==null||l.onRemoteConfig(t),(u=this.deadClicksAutocapture)==null||u.onRemoteConfig(t)}ws(){try{this.config.loaded(this)}catch(t){Ct.critical("`loaded` function failed",t)}this.ys(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Ss()},1),new ole(this).load(),this.featureFlags.decide()}ys(){var t;this.has_opted_out_capturing()||this.config.request_batching&&((t=this.fs)==null||t.enable())}_dom_loaded(){this.has_opted_out_capturing()||Pa(this.__request_queue,t=>this.ps(t)),this.__request_queue=[],this.ys()}_handle_unload(){var t,n;this.config.request_batching?(this.$s()&&this.capture("$pageleave"),(t=this.fs)==null||t.unload(),(n=this.gs)==null||n.unload()):this.$s()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_e(t){this.__loaded&&(b5?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=ly(t.url,{ip:this.config.ip?1:0}),t.headers=bt({},this.config.request_headers),t.compression=t.compression==="best-available"?this.compression:t.compression,t.fetchOptions=t.fetchOptions||this.config.fetch_options,(n=>{var r,i,o,s=bt({},n);s.timeout=s.timeout||6e4,s.url=ly(s.url,{_:new Date().getTime().toString(),ver:Rs.LIB_VERSION,compression:s.compression});var a=(r=s.transport)!==null&&r!==void 0?r:"fetch",l=(i=(o=m$(lf,u=>u.transport===a))==null?void 0:o.method)!==null&&i!==void 0?i:lf[0].method;if(!l)throw new Error("No available transport method");l(s)})(bt({},t,{callback:n=>{var r,i;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,n)),t.callback==null||t.callback(n)}}))))}ps(t){this.gs?this.gs.retriableRequest(t):this._e(t)}_execute_array(t){var n,r=[],i=[],o=[];Pa(t,a=>{a&&(n=a[0],Ln(n)?o.push(a):no(a)?a.call(this):Ln(a)&&n==="alias"?r.push(a):Ln(a)&&n.indexOf("capture")!==-1&&no(this[n])?o.push(a):i.push(a))});var s=function(a,l){Pa(a,function(u){if(Ln(u[0])){var c=l;fn(u,function(d){c=c[d[0]].apply(c,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};s(r,this),s(i,this),s(o,this)}bs(){var t,n;return((t=this.config.bootstrap)==null?void 0:t.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.fs){if(!this.consent.isOptedOut())if(!yt(t)&&Qn(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){n!=null&&n.$current_url&&!Qn(n==null?void 0:n.$current_url)&&(Ct.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,a=(r==null?void 0:r.timestamp)||s,l=xa(),u={uuid:l,event:t,properties:this.Di(t,n||{},a,l)};o&&(u.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r!=null&&r.$set&&(u.$set=r==null?void 0:r.$set);var c=this.ks(r==null?void 0:r.$set_once);c&&(u.$set_once=c),(u=gse(u,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,yt(r==null?void 0:r.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=s);var d=bt({},u.properties.$set,u.$set);if(Uu(d)||this.setPersonPropertiesForFlags(d),!sn(this.config.before_send)){var h=this.xs(u);if(!h)return;u=h}this.ls.emit("eventCaptured",u);var p={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.ps(p):this.fs.enqueue(p),u}Ct.critical("This capture call is ignored due to client rate limiting.")}}else Ct.error("No event name provided to posthog.capture")}else Ct.uninitializedWarning("posthog.capture")}je(t){return this.on("eventCaptured",n=>t(n.event,n))}Di(t,n,r,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=this.persistence.remove_event_timer(t),s=bt({},n);if(s.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(s.$cookieless_mode=!0),t==="$snapshot"){var a=bt({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=a.distinct_id,(!Qn(s.distinct_id)&&!Br(s.distinct_id)||p_(s.distinct_id))&&Ct.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var l,u=Qae(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:c,windowId:d}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=c,s.$window_id=d}this.sessionPropsManager&&Kn(s,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&Kn(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=(h=this.gs)==null?void 0:h.length}catch(x){s.$sdk_debug_error_capturing_properties=String(x)}if(this.requestRouter.region===Rl.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),l=t==="$pageview"?this.pageViewManager.doPageView(r,i):t==="$pageleave"?this.pageViewManager.doPageLeave(r):this.pageViewManager.doEvent(),s=Kn(s,l),t==="$pageview"&&xt&&(s.title=xt.title),!yt(o)){var p=r.getTime()-o;s.$duration=parseFloat((p/1e3).toFixed(3))}ci&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Kn({},u,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Ln(this.config.property_denylist)?fn(this.config.property_denylist,function(x){delete s[x]}):Ct.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var b=this.config.sanitize_properties;b&&(Ct.error("sanitize_properties is deprecated. Use before_send instead"),s=b(s,t));var g=this.Es();return s.$process_person_profile=g,g&&this.Is("_calculate_event_properties"),s}ks(t){var n;if(!this.persistence||!this.Es()||this.os)return t;var r=this.persistence.get_initial_props(),i=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),o=Kn({},r,i||{},t||{}),s=this.config.sanitize_properties;return s&&(Ct.error("sanitize_properties is deprecated. Use before_send instead"),o=s(o,"$set_once")),this.os=!0,Uu(o)?void 0:o}register(t,n){var r;(r=this.persistence)==null||r.register(t,n)}register_once(t,n,r){var i;(i=this.persistence)==null||i.register_once(t,n,r)}register_for_session(t){var n;(n=this.sessionPersistence)==null||n.register(t)}unregister(t){var n;(n=this.persistence)==null||n.unregister(t)}unregister_for_session(t){var n;(n=this.sessionPersistence)==null||n.unregister(t)}Ps(t,n){this.register({[t]:n})}getFeatureFlag(t,n){return this.featureFlags.getFeatureFlag(t,n)}getFeatureFlagPayload(t){var n=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(n)}catch(r){return n}}isFeatureEnabled(t,n){return this.featureFlags.isFeatureEnabled(t,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(t,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,n)}getEarlyAccessFeatures(t,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(t,n,r)}on(t,n){return this.ls.on(t,n)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(t))!==null&&n!==void 0?n:()=>{}}getSurveys(t,n){n===void 0&&(n=!1),this.surveys.getSurveys(t,n)}getActiveMatchingSurveys(t,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(t,n)}renderSurvey(t,n){this.surveys.renderSurvey(t,n)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(t,n)}identify(t,n,r){if(!this.__loaded||!this.persistence)return Ct.uninitializedWarning("posthog.identify");if(Br(t)&&(t=t.toString(),Ct.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t){if(["distinct_id","distinctid"].includes(t.toLowerCase()))Ct.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(this.Is("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var o=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}t!==i&&t!==this.get_property(Ld)&&(this.unregister(Ld),this.register({distinct_id:t}));var s=(this.persistence.get_property(_s)||"anonymous")==="anonymous";t!==i&&s?(this.persistence.set_property(_s,"identified"),this.setPersonPropertiesForFlags(bt({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.vs=kR(t,n,r),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),t!==i&&(this.reloadFeatureFlags(),this.unregister(Jm))}}else Ct.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,n){if((t||n)&&this.Is("posthog.setPersonProperties")){var r=kR(this.get_distinct_id(),t,n);this.vs!==r?(this.setPersonPropertiesForFlags(bt({},n||{},t||{})),this.capture("$set",{$set:t||{},$set_once:n||{}}),this.vs=r):Ct.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,n,r){if(t&&n){if(this.Is("posthog.group")){var i=this.getGroups();i[t]!==n&&this.resetGroupPropertiesForFlags(t),this.register({$groups:bt({},i,{[t]:n})}),r&&(this.capture("$groupidentify",{$group_type:t,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[t]:r})),i[t]===n||r||this.reloadFeatureFlags()}}else Ct.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(t,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0),this.Is("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,n)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var n,r,i,o;if(Ct.info("reset"),!this.__loaded)return Ct.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),(i=this.persistence)==null||i.set_property(_s,"anonymous"),(o=this.sessionManager)==null||o.resetSessionId(),this.vs=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:UA,$device_id:null},"");else{var a=this.config.get_device_id(xa());this.register_once({distinct_id:a,$device_id:t?a:s},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,n;return(t=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(t!=null&&t.withTimestamp&&r){var o,s=(o=t.timestampLookBack)!==null&&o!==void 0?o:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-s,0)}return i}alias(t,n){return t===this.get_property(y$)?(Ct.critical("Attempting to create alias for existing People user - aborting."),-2):this.Is("posthog.alias")?(yt(n)&&(n=this.get_distinct_id()),t!==n?(this.Ps(Ld,t),this.capture("$create_alias",{alias:t,distinct_id:n})):(Ct.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var n,r,i,o,s=bt({},this.config);Bn(t)&&(Kn(this.config,AR(t)),(n=this.persistence)==null||n.update_config(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new lw(bt({},this.config,{persistence:"sessionStorage"})),rr.O()&&rr.A("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Rs.DEBUG=!0,Ct.info("set_config",JSON.stringify({config:t,oldConfig:s,newConfig:bt({},this.config)},null,2))),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._s())}startSessionRecording(t){var n=t===!0,r={sampling:n||!(t==null||!t.sampling),linked_flag:n||!(t==null||!t.linked_flag),url_trigger:n||!(t==null||!t.url_trigger),event_trigger:n||!(t==null||!t.event_trigger)};if(Object.values(r).some(Boolean)){var i,o,s,a,l;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((o=this.sessionRecording)==null||o.overrideSampling()),r.linked_flag&&((s=this.sessionRecording)==null||s.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!((t=this.sessionRecording)==null||!t.started)}captureException(t,n){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(bt({},nae((i=>i instanceof Error)(t)?{error:t,event:t.message}:{event:t},{syntheticException:r}),n))}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var n;return(n=this.persistence)==null?void 0:n.props[t]}getSessionProperty(t){var n;return(n=this.sessionPersistence)==null?void 0:n.props[t]}toString(){var t,n=(t=this.config.name)!==null&&t!==void 0?t:ku;return n!==ku&&(n=ku+"."+n),n}_isIdentified(){var t,n;return((t=this.persistence)==null?void 0:t.get_property(_s))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(_s))==="identified"}Es(){var t,n,r,i;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Uu(this.getGroups())&&((t=this.persistence)==null||(n=t.props)==null||!n[Ld])&&((r=this.persistence)==null||(i=r.props)==null||!i[Qm]))}$s(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Es()||this.Is("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Is(t){return this.config.person_profiles==="never"?(Ct.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Ps(Qm,!0),!0)}_s(){var t,n,r,i,o=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||o&&!!s;((t=this.persistence)==null?void 0:t.ke)!==a&&((r=this.persistence)==null||r.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.ke)!==a&&((i=this.sessionPersistence)==null||i.set_disabled(a))}opt_in_capturing(t){var n;this.consent.optInOut(!0),this._s(),(yt(t==null?void 0:t.captureEventName)||t!=null&&t.captureEventName)&&this.capture((n=t==null?void 0:t.captureEventName)!==null&&n!==void 0?n:"$opt_in",t==null?void 0:t.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Ss()}opt_out_capturing(){this.consent.optInOut(!1),this._s()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return Oi?v5(Oi,this.config.custom_blocked_useragents):void 0}Ss(){xt&&(xt.visibilityState==="visible"?this.us||(this.us=!0,this.capture("$pageview",{title:xt.title},{send_instantly:!0}),this.hs&&(xt.removeEventListener("visibilitychange",this.hs),this.hs=null)):this.hs||(this.hs=this.Ss.bind(this),Rn(xt,"visibilitychange",this.hs)))}debug(t){t===!1?(De==null||De.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(De==null||De.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}xs(t){if(sn(this.config.before_send))return t;var n=Ln(this.config.before_send)?this.config.before_send:[this.config.before_send],r=t;for(var i of n){if(r=i(r),sn(r)){var o="Event '"+t.event+"' was rejected in beforeSend function";return fse(t.event)?Ct.warn(o+". This can cause unexpected behavior."):Ct.info(o),null}r.properties&&!Uu(r.properties)||Ct.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var t;return(t=this.pageViewManager.oe)==null?void 0:t.pageViewId}captureTraceFeedback(t,n){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:n})}captureTraceMetric(t,n,r){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:n,$ai_metric_value:String(r)})}}(function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=pse(e.prototype[t[n]])})(Lv,["identify"]);var RR,NR,TR,IR,PR,OR;(function(e){e.Button="button",e.Tab="tab",e.Selector="selector"})(RR||(RR={})),function(e){e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}(NR||(NR={})),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(TR||(TR={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(IR||(IR={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(PR||(PR={})),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}(OR||(OR={}));var $R,Cu=($R=uf[ku]=new Lv,function(){function e(){e.done||(e.done=!0,b5=!1,fn(uf,function(t){t._dom_loaded()}))}xt!=null&&xt.addEventListener?xt.readyState==="complete"?e():Rn(xt,"DOMContentLoaded",e,{capture:!1}):De&&Ct.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),$R),iS=k.createContext({client:Cu});function w5(e,t,n){if(n===void 0&&(n=new WeakMap),e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(n.has(e)&&n.get(e)===t)return!0;n.set(e,t);var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var o=0,s=r;o<s.length;o++){var a=s[o];if(!i.includes(a)||!w5(e[a],t[a],n))return!1}return!0}function xle(e){var t=e.children,n=e.client,r=e.apiKey,i=e.options,o=k.useRef(null),s=k.useMemo(function(){return n?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),i&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Cu)},[n,r,JSON.stringify(i)]);return k.useEffect(function(){if(!n){var a=o.current;a?(r!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),i&&!w5(i,a.options)&&Cu.set_config(i),o.current={apiKey:r,options:i!=null?i:{}}):(Cu.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Cu.init(r,i),o.current={apiKey:r,options:i!=null?i:{}})}},[n,r,JSON.stringify(i)]),$t.createElement(iS.Provider,{value:{client:s}},t)}var _le=function(){var e=k.useContext(iS).client;return e},z_=function(e,t){return z_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},z_(e,t)};function Ele(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");z_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var cw=function(e){return typeof e=="function"},Sle={componentStack:null,error:null},kle={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(e){Ele(t,e);function t(n){var r=e.call(this,n)||this;return r.state=Sle,r}return t.prototype.componentDidCatch=function(n,r){var i=r.componentStack,o=this.props.additionalProperties;this.setState({error:n,componentStack:i});var s;cw(o)?s=o(n):typeof o=="object"&&(s=o);var a=this.context.client;a.captureException(n,s)},t.prototype.render=function(){var n=this.props,r=n.children,i=n.fallback,o=this.state;if(o.componentStack==null)return cw(r)?r():r;var s=cw(i)?$t.createElement(i,{error:o.error,componentStack:o.componentStack}):i;return $t.isValidElement(s)?s:(console.warn(kle.INVALID_FALLBACK),$t.createElement($t.Fragment,null))},t.contextType=iS,t})($t.Component);function Cle(e){var p,b;const{systems:t}=l$(),{versions:n}=EE(),{characters:r}=u$(),i=_le(),[o,s]=k.useState(t[0]),[a,l]=k.useState(n[0]),[u,c]=k.useState(0),[d,h]=k.useState({local_id:"",user_id:"none",name:"Aliza Cartwight",data:(p=a==null?void 0:a.data.defaultCharacterData)!=null?p:{},system:{local_id:"",version_id:""},created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return k.useEffect(()=>{const g=t[0];if(!g)return;s(g);let x;x=n.filter(v=>v.reference_id===g.local_id).sort((v,w)=>{if(!v||!w)return 0;const E=new Date(v.created_at),S=new Date(w.created_at);return E>S?1:0})[0],x&&(l(x),h({...d,data:structuredClone(x.data.defaultCharacterData),system:{local_id:g.local_id,version_id:x.local_id}}))},[t,n]),e.isOpen?o?f.jsxs(sr,{isOpen:e.isOpen,onClose:()=>e.setIsOpen(!1),children:[f.jsx(ar,{title:"Create Character",onClose:()=>e.setIsOpen(!1)}),f.jsx(lr,{children:u===0&&f.jsxs(f.Fragment,{children:[f.jsx(Xt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:d.name,onChange:g=>h({...d,name:g}),isValid:!r.find(g=>g.name===d.name)&&d.name.length>0,errorMessage:"Names must be unique and not empty."}),f.jsx(ht,{id:"character-system",label:"Tabletop System",value:o.local_id,onChange:g=>{const x=t.find(v=>v.local_id===g);if(!x)return;const y=n.filter(v=>v.reference_id===x.local_id).sort((v,w)=>{const E=new Date(v.created_at),S=new Date(w.created_at);return E>S?1:0})[0];y&&(s(x),l(y),h({...d,data:structuredClone(y.data.defaultCharacterData),system:{local_id:x.local_id,version_id:y.local_id}}))},children:t.map(g=>f.jsx("option",{value:g.local_id,children:g.name},g.local_id))}),f.jsx(ht,{id:"character-system-version",label:"System Version",value:(b=a==null?void 0:a.local_id)!=null?b:"",onChange:g=>{const x=n.find(y=>y.local_id===g);x&&(l(x),h({...d,data:structuredClone(x.data.defaultCharacterData),system:{local_id:o.local_id,version_id:x.local_id}}))},children:n.map(g=>f.jsx("option",{value:g.local_id,children:Jl(g.local_id)},g.local_id))})]})}),f.jsxs(hr,{children:[f.jsx("nav",{className:"flex flex-grow mr-4","aria-label":"Breadcrumb",children:f.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse",children:[f.jsx("li",{className:"inline-flex items-center cursor-pointer",onClick:()=>c(0),children:f.jsxs("p",{className:"inline-flex items-center text-sm font-medium text-neutral-700 hover:text-brand-600 dark:text-neutral-400 dark:hover:text-white",children:[f.jsx("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})}),"Basics"]})}),a==null?void 0:a.data.creator.map((g,x)=>u<x+1?f.jsx(f.Fragment,{}):f.jsx("li",{className:"cursor-pointer",onClick:()=>c(x+1),children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("svg",{className:"rtl:rotate-180 w-3 h-3 text-neutral-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})}),f.jsx("p",{className:"ms-1 text-sm font-medium text-neutral-700 hover:text-brand-600 md:ms-2 dark:text-neutral-400 dark:hover:text-white",children:g.name})]})}))]})}),f.jsx(Rt,{id:"create-character-button",color:"primary",onClick:async()=>{await rse(d.name,d.data,d.system),s(t[0]),e.setIsOpen(!1),i.capture("character_created",{character_name:d.name})},children:"Create"})]})]}):f.jsxs(sr,{isOpen:e.isOpen,onClose:()=>e.setIsOpen(!1),children:[f.jsx(ar,{title:"Error grabbing system",onClose:()=>e.setIsOpen(!1)}),f.jsx(lr,{children:f.jsx("h3",{children:"There was an error grabbing a default system, please refresh to load base data or make / import something!"})}),f.jsx(hr,{children:f.jsx(Rt,{color:"primary",onClick:()=>e.setIsOpen(!1),children:"Close"})})]}):f.jsx(f.Fragment,{})}const x5=(e,t)=>{const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="".concat(t,".json"),i.click(),URL.revokeObjectURL(r),i.remove()},H_=k.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1}),MR=k.forwardRef(({children:e,label:t,...n},r)=>{const[i,o]=k.useState(!1),[s,a]=k.useState(!1),[l,u]=k.useState(null),c=k.useRef([]),d=k.useRef([]),h=k.useContext(H_),p=Qa(),b=vX(),g=Ja(),x=Y3(),y=g!=null,{floatingStyles:v,refs:w,context:E}=o4({nodeId:b,open:i,onOpenChange:o,placement:y?"right-start":"bottom-start",middleware:[W3({mainAxis:y?0:4,alignmentAxis:y?-4:0}),q3(),V3()],whileElementsMounted:oX}),S=xX(E,{enabled:y,delay:{open:75},handleClose:WX({blockPointerEvents:!0})}),A=r4(E,{event:"mousedown",toggle:!y,ignoreMouse:y}),T=a4(E,{role:"menu"}),$=i4(E,{bubbles:!0}),q=BX(E,{listRef:c,activeIndex:l,nested:y,onNavigate:u}),D=zX(E,{listRef:d,onMatch:i?u:void 0,activeIndex:l}),{getReferenceProps:U,getFloatingProps:J,getItemProps:H}=s4([S,A,T,$,q,D]);return k.useEffect(()=>{if(!p)return;function I(){o(!1)}function F(K){K.nodeId!==b&&K.parentId===g&&o(!1)}return p.events.on("click",I),p.events.on("menuopen",F),()=>{p.events.off("click",I),p.events.off("menuopen",F)}},[p,b,g]),k.useEffect(()=>{i&&p&&p.events.emit("menuopen",{parentId:g,nodeId:b})},[p,i,b,g]),f.jsxs(bX,{id:b,children:[f.jsxs("button",{ref:K3([w.setReference,x.ref,r]),tabIndex:y?h.activeIndex===x.index?0:-1:void 0,role:y?"menuitem":void 0,"data-open":i?"":void 0,"data-nested":y?"":void 0,"data-focus-inside":s?"":void 0,className:"bg-neutral-800 text-neutral-50 dark:bg-neutral-500 dark:text-neutral-50 hover:bg-neutral-800 hover:text-neutral-50 dark:hover:bg-neutral-200 dark:hover:text-neutral-950 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 rounded-lg px-4 py-2 text-sm font-medium",...U(h.getItemProps({...n,onFocus(I){var F;(F=n.onFocus)==null||F.call(n,I),a(!1),h.setHasFocusInside(!0)}})),children:[t,y&&f.jsx("span",{"aria-hidden":!0,style:{marginLeft:10,fontSize:10},children:""})]}),f.jsx(H_.Provider,{value:{activeIndex:l,setActiveIndex:u,getItemProps:H,setHasFocusInside:a,isOpen:i},children:f.jsx(fX,{elementsRef:c,labelsRef:d,children:i&&f.jsx(AX,{children:f.jsx(PX,{context:E,modal:!1,initialFocus:y?-1:0,returnFocus:!y,children:f.jsx("div",{ref:w.setFloating,className:"flex flex-col w-48 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",style:v,...J(),children:e})})})})})]})}),qu=k.forwardRef(({label:e,disabled:t,...n},r)=>{const i=k.useContext(H_),o=Y3({label:t?null:e}),s=Qa(),a=o.index===i.activeIndex;return f.jsx("button",{...n,ref:K3([o.ref,r]),type:"button",role:"menuitem",className:"bg-neutral-50 text-neutral-950 dark:bg-neutral-800 dark:text-neutral-50 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-lg px-4 py-2 text-sm font-medium",tabIndex:a?0:-1,disabled:t,...i.getItemProps({onClick(l){var u;(u=n.onClick)==null||u.call(n,l),s==null||s.events.emit("click")},onFocus(l){var u;(u=n.onFocus)==null||u.call(n,l),i.setHasFocusInside(!0)}}),children:e})}),_5=k.forwardRef((e,t)=>Ja()===null?f.jsx(wX,{children:f.jsx(MR,{...e,ref:t})}):f.jsx(MR,{...e,ref:t})),jle=e=>e>0,Ale=()=>{const{characters:e,isLoading:t}=u$(),{systems:n}=l$(),{versions:r}=EE(),{isLoggedIn:i,user:o,synced_characters:s}=pr.useValue(),[a,l]=k.useState(!1),[u,c]=k.useState(!1);return t?f.jsx(f.Fragment,{}):f.jsxs("div",{children:[f.jsx(za,{title:"Characters"}),f.jsx(Cle,{isOpen:u,setIsOpen:c}),f.jsxs("div",{className:"p-4",children:[e.length?e.map(d=>{var h,p,b,g;return f.jsxs("div",{className:"relative flex flex-col max-w-96 p-4 transition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",children:[f.jsxs(em,{to:d.local_id,className:"flex items-start space-x-4",children:[f.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:f.jsx("span",{className:"text-xl font-bold text-white",children:d.name[0]})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:d.name}),f.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[(h=n.find(x=>x.local_id===d.system.local_id))==null?void 0:h.name,"  Version ",Jl((b=(p=r.find(x=>x.local_id===d.system.version_id))==null?void 0:p.local_id)!=null?b:"")]})]})]}),f.jsx("div",{className:"flex justify-end gap-2 mt-4 border-t pt-3 dark:border-neutral-700",children:f.jsxs(_5,{label:"Options",children:[jle((g=o==null?void 0:o.role)!=null?g:0)&&f.jsx(qu,{label:s.includes(d.local_id)?"UnSync":"Sync",onClick:()=>{let x=[];s.includes(d.local_id)?x=s.filter(y=>y!==d.local_id):length<3&&(x=[...s,d.local_id]),m3(x)}}),f.jsx(qu,{label:"export",onClick:()=>x5(d,"".concat(d.name,"-export"))}),f.jsx(qu,{label:"rename",onClick:()=>dn({type:"edit_string",title:"Rename Character",data:d.name,onSave:x=>{ise(d.local_id,x)}})}),f.jsx(qu,{label:"delete",onClick:()=>dn({type:"confirm",title:"Delete Character",data:{type:"danger",message:"Are you sure you want to delete this character?"},onSave:()=>sse(d.local_id)})})]})})]},d.local_id)}):f.jsx("h5",{children:"Doesn't look like you have any characters yet? Try creating one!"}),f.jsx(Za,{isOpen:a,onClick:()=>l(!a),buttons:[{name:"Create Character",icon:"",onClick:()=>c(!0)},{name:"Import Character",icon:"",onClick:()=>dn({type:"import_file",title:"Import Character",data:void 0,onSave:async d=>{try{const h=JSON.parse(d);h&&await ase(h)}catch(h){console.error(h)}}})}]})]})]})};function Rle(e){return Zs(()=>kt.characters.get(e||""),[e])}var Nle=Object.getOwnPropertyNames,Tle=Object.getOwnPropertySymbols,Ile=Object.prototype.hasOwnProperty;function DR(e,t){return function(r,i,o){return e(r,i,o)&&t(r,i,o)}}function Zp(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=e(n,r,i);return o.delete(n),o.delete(r),l}}function LR(e){return Nle(e).concat(Tle(e))}var Ple=Object.hasOwn||function(e,t){return Ile.call(e,t)};function pu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Ole="__v",$le="__o",Mle="_owner",BR=Object.getOwnPropertyDescriptor,FR=Object.keys;function Dle(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Lle(e,t){return pu(e.getTime(),t.getTime())}function Ble(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Fle(e,t){return e===t}function zR(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.entries(),s,a,l=0;(s=o.next())&&!s.done;){for(var u=t.entries(),c=!1,d=0;(a=u.next())&&!a.done;){if(i[d]){d++;continue}var h=s.value,p=a.value;if(n.equals(h[0],p[0],l,d,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}var zle=pu;function Hle(e,t,n){var r=FR(e),i=r.length;if(FR(t).length!==i)return!1;for(;i-- >0;)if(!E5(e,t,n,r[i]))return!1;return!0}function Cd(e,t,n){var r=LR(e),i=r.length;if(LR(t).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],!E5(e,t,n,o)||(s=BR(e,o),a=BR(t,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function Ule(e,t){return pu(e.valueOf(),t.valueOf())}function Wle(e,t){return e.source===t.source&&e.flags===t.flags}function HR(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.values(),s,a;(s=o.next())&&!s.done;){for(var l=t.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(s.value,a.value,s.value,a.value,e,t,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function Vle(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function qle(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function E5(e,t,n,r){return(r===Mle||r===$le||r===Ole)&&(e.$$typeof||t.$$typeof)?!0:Ple(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Kle="[object Arguments]",Gle="[object Boolean]",Yle="[object Date]",Xle="[object Error]",Jle="[object Map]",Qle="[object Number]",Zle="[object Object]",eue="[object RegExp]",tue="[object Set]",nue="[object String]",rue="[object URL]",iue=Array.isArray,UR=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,WR=Object.assign,oue=Object.prototype.toString.call.bind(Object.prototype.toString);function sue(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,o=e.areMapsEqual,s=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,c=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(b,g,x){if(b===g)return!0;if(b==null||g==null)return!1;var y=typeof b;if(y!==typeof g)return!1;if(y!=="object")return y==="number"?s(b,g,x):y==="function"?i(b,g,x):!1;var v=b.constructor;if(v!==g.constructor)return!1;if(v===Object)return a(b,g,x);if(iue(b))return t(b,g,x);if(UR!=null&&UR(b))return d(b,g,x);if(v===Date)return n(b,g,x);if(v===RegExp)return u(b,g,x);if(v===Map)return o(b,g,x);if(v===Set)return c(b,g,x);var w=oue(b);return w===Yle?n(b,g,x):w===eue?u(b,g,x):w===Jle?o(b,g,x):w===tue?c(b,g,x):w===Zle?typeof b.then!="function"&&typeof g.then!="function"&&a(b,g,x):w===rue?h(b,g,x):w===Xle?r(b,g,x):w===Kle?a(b,g,x):w===Gle||w===Qle||w===nue?l(b,g,x):!1}}function aue(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?Cd:Dle,areDatesEqual:Lle,areErrorsEqual:Ble,areFunctionsEqual:Fle,areMapsEqual:r?DR(zR,Cd):zR,areNumbersEqual:zle,areObjectsEqual:r?Cd:Hle,arePrimitiveWrappersEqual:Ule,areRegExpsEqual:Wle,areSetsEqual:r?DR(HR,Cd):HR,areTypedArraysEqual:r?Cd:Vle,areUrlsEqual:qle};if(n&&(i=WR({},i,n(i))),t){var o=Zp(i.areArraysEqual),s=Zp(i.areMapsEqual),a=Zp(i.areObjectsEqual),l=Zp(i.areSetsEqual);i=WR({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function lue(e){return function(t,n,r,i,o,s,a){return e(t,n,a)}}function uue(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(l,u){var c=r(),d=c.cache,h=d===void 0?t?new WeakMap:void 0:d,p=c.meta;return n(l,u,{cache:h,equals:i,meta:p,strict:o})};if(t)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,u){return n(l,u,s)}}var eg=rl();rl({strict:!0});rl({circular:!0});rl({circular:!0,strict:!0});rl({createInternalComparator:function(){return pu}});rl({strict:!0,createInternalComparator:function(){return pu}});rl({circular:!0,createInternalComparator:function(){return pu}});rl({circular:!0,createInternalComparator:function(){return pu},strict:!0});function rl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,o=e.strict,s=o===void 0?!1:o,a=aue(e),l=sue(a),u=r?r(l):lue(l);return uue({circular:n,comparator:l,createState:i,equals:u,strict:s})}const cue=async e=>{try{return await kt.versions.get(e)}catch(t){console.log("Error getting subscription:",t);return}},due=()=>{const{id:e}=_I(),t=Rle(e),[n,r]=k.useState(null),i=k.useCallback(o=>{if(!t||!n)return;const s=o.system.pages.findIndex(a=>a.name===o.page.name);eg(t,o.character)&&eg(n,o.system)&&eg(o.system.pages[s],o.page)||(ose(t.local_id,o.character.data),r({...o.system,pages:o.system.pages.map(a=>a.name===o.page.name?o.page:a)}))},[t,n]);return k.useEffect(()=>{(async()=>{if(!t)return;const s=await cue(t.system.version_id);s&&(eg(n,s.data)||r(s.data))})()},[t]),t?n?f.jsxs("div",{className:"flex flex-col h-full w-full",children:[f.jsx("p",{id:"loading-text",className:"hidden",children:"loading..."}),f.jsx(za,{title:t.name}),f.jsxs("div",{className:"flex flex-row flex-grow overflow-hidden",children:[f.jsx("div",{className:"relative w-full lg:w-1/2 max-h-full flex flex-col",children:f.jsx("div",{className:"overflow-y-scroll p-4",children:f.jsx(VR,{className:"first-tab-selector",system:n,character:t,updateState:i})})}),f.jsx("div",{className:"relative w-1/2 hidden flex-col lg:flex max-h-full",children:f.jsx("div",{className:"overflow-y-scroll p-4",children:f.jsx(VR,{className:"second-tab-selector",system:n,character:t,updateState:i})})})]})]}):f.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading system data..."}):f.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading character data..."})},VR=({system:e,character:t,updateState:n,className:r})=>{const[i,o]=k.useState(e.pages[0].name);return f.jsxs(f.Fragment,{children:[f.jsx(ht,{className:r,id:"tab-selector",label:"",value:i,onChange:o,children:e.pages.map(s=>f.jsx("option",{value:s.name,children:s.name},s.name))}),e.pages.map(s=>f.jsx(fue,{character:t,system:e,page:s,currentTab:i,updateState:n},s.name))]})};function fue({page:e,character:t,system:n,currentTab:r,updateState:i}){const o=k.useMemo(()=>e.lexical?JSON.parse(Wa.decompress(Wa.decodeBase64(e.lexical))):{},[e.lexical]);return r!==e.name?f.jsx(f.Fragment,{}):f.jsx(Goe,{data:o,state:{character:t,system:n,page:e},updateState:i})}const oS=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string(),data:ct.any(),reference_id:ct.string({invalid_type_error:"reference_id must be a string"}),reference_type:ct.enum(["system","character"]),created_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).nullable().optional()}),hue=async(e,t)=>{try{let n=await Dr();for(;!await Ta(n);)n=await Dr();const{user:r}=pr.get(),i=r?r.id:"none",o={...e,local_id:n,user_id:i},s=Ih.safeParse(o);if(!s.success){console.log("Invalid system data:",s.error.format());return}await kt.systems.add(o);let a=await Dr();for(;!await Ta(a);)a=await Dr();const l={...t,local_id:a,reference_id:n,user_id:i},u=oS.safeParse(l);if(!u.success){console.log("Invalid Version data:",u.error.format());return}await kt.versions.add(l);let c=await Dr();for(;!await Ta(c);)c=await Dr();await kt.subscriptions.add({local_id:c,user_id:i,resource_type:"system",resource_id:n,version_id:a,auto_update:!1,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null})}catch(n){console.log("Error importing system or version or creating subscription:",n)}};function pue(){const e=Zs(async()=>(await kt.subscriptions.toArray()).filter(n=>!n.deleted_at),[]);return{subscriptions:e||[],isLoading:e===void 0}}function gue(e){const t=Zs(async()=>{let n;switch(e.resource_type){case"system":n=await kt.systems.where("local_id").equals(e.resource_id).toArray();break}if(!n||n.length===0)return;const r=await kt.versions.where("local_id").equals(e.version_id).toArray();if(!(!r||r.length===0))return{baseData:n[0],versionData:r[0]}},[]);return{query:t,isLoading:t===void 0}}const mue=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string({invalid_type_error:"user_id must be a string"}),resource_type:ct.enum(["system","character","module","plugin"]),resource_id:ct.string({invalid_type_error:"resource_id must be a string"}),version_id:ct.string(),auto_update:ct.boolean().optional().default(!0),subscribed_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).nullable().optional()}),sS=async(e,t,n,r)=>{try{const{user:i}=pr.get(),o=(i==null?void 0:i.id)||"none";let s=await Dr();for(;!await Ta(s);)s=await Dr();const a={local_id:s,user_id:o,resource_type:e,resource_id:t,version_id:n,auto_update:r,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},l=mue.safeParse(a);if(!l.success){console.log("Invalid subscription data:",l.error.format());return}return await kt.subscriptions.add(a),a}catch(i){console.log("Error creating subscription:",i)}},yue=async e=>{try{let t=await Dr();for(;!await Ta(t);)t=await Dr();const{user:n}=pr.get(),r=n?n.id:"none",i={...e,local_id:t,user_id:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deleted_at:null},o=Ih.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}return await kt.systems.add(i),i}catch(t){console.log("Error creating system:",t)}},vue=async(e,t,n)=>{try{let r=await Dr();for(;!await Ta(r);)r=await Dr();const{user:i}=pr.get(),o=(i==null?void 0:i.id)||"none",s={local_id:r,user_id:o,data:n,reference_id:t,reference_type:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},a=oS.safeParse(s);if(!a.success){console.log("Invalid subscription data:",a.error.format());return}return await kt.versions.add(s),s}catch(r){console.log("Error creating subscription:",r)}},bue=async(e,t)=>{const n=await yue(e);if(!n)return;const r=await vue("system",n.local_id,t.data);!r||await sS("system",n.local_id,r.local_id,!1)},wue=({subscription:e})=>{const{query:t,isLoading:n}=gue(e);let r=Eh();const{user:i}=pr.useValue();if(n||!t)return f.jsx(f.Fragment,{});const{baseData:o,versionData:s}=t,a=i&&o.user_id&&i.id===o.user_id||!o.user_id&&!o.id;return f.jsxs("div",{className:"relative flex flex-col max-w-96 p-4 transition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",children:[f.jsxs("div",{className:"flex items-start space-x-4",children:[f.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:f.jsx("span",{className:"text-xl font-bold text-white",children:o.name[0]})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:o.name}),f.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["Version ",Jl(s.local_id)]})]})]}),f.jsx("div",{className:"flex justify-end gap-2 mt-4 border-t pt-3 dark:border-neutral-700",children:f.jsxs(_5,{label:"Options",children:[f.jsx(qu,{label:"Edit",onClick:()=>a?r("/library/".concat(e.resource_type,"/").concat(s.local_id)):bue(o,s)}),f.jsx(qu,{label:"export",onClick:()=>x5({system:t.baseData,version:t.versionData},"".concat(t.baseData.name,"-").concat(t.versionData.local_id))})]})})]},e.local_id)},xue=()=>{const{subscriptions:e,isLoading:t}=pue(),[n,r]=k.useState(!1);return f.jsxs("div",{children:[f.jsx(za,{title:"Library"}),f.jsxs("div",{className:"p-4",children:[t?f.jsx("h5",{className:"mb-4 text-xl",children:"Loading..."}):f.jsx("h5",{className:"flex flex-col gap-4",children:f.jsxs("div",{children:[f.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Systems"}),f.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.filter(i=>i.resource_type==="system").map(i=>f.jsx(wue,{subscription:i},i.local_id))})]})}),f.jsx(Za,{isOpen:n,onClick:()=>r(!n),buttons:[{name:"Create System",icon:"",onClick:()=>{}},{name:"Import System",icon:"",onClick:()=>dn({type:"import_file",title:"Import System",data:void 0,onSave:async i=>{try{const o=JSON.parse(i);o&&o.system&&o.version&&await hue(o.system,o.version)}catch(o){console.error(o)}}})}]})]})]})};function S5({types:e,onDelete:t,onSave:n,isVisible:r,requestClose:i,data:o}){var p,b;const s=un.useValue(),a=Vn(s.versionId),[l,u]=k.useState({name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"}),[c,d]=k.useState(((p=a==null?void 0:a.data)==null?void 0:p.types.find(g=>g.name===l.typeData.type))||null),h=(g,x,y)=>{u(On(x,v=>(cE(v,g,y),v)))};return k.useEffect(()=>{var x;const g=o||{name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"};u(g),d(((x=a==null?void 0:a.data)==null?void 0:x.types.find(y=>y.name===g.typeData.type))||null)},[o,u,d]),o?f.jsxs(sr,{isOpen:r,onClose:i,children:[f.jsx(ar,{title:"Edit ".concat(o.name),onClose:i}),f.jsxs(lr,{children:[f.jsx(Xt,{id:"data-name",label:"Name",isValid:!0,errorMessage:"",value:l.name,onChange:g=>u({...l,name:g})}),f.jsxs(ht,{id:"data-type",label:"Type",value:(c==null?void 0:c.name)||"",onChange:g=>{var y;const x=((y=a==null?void 0:a.data)==null?void 0:y.types.find(v=>v.name===g))||null;d(x),u({...l,data:l.typeData.isArray?[]:eh(e,x||g),typeData:{...l.typeData,type:g}})},children:[f.jsx("option",{value:"string",children:"string"}),f.jsx("option",{value:"number",children:"number"}),f.jsx("option",{value:"boolean",children:"boolean"}),f.jsx("option",{value:"enum",children:"enum"}),(b=a==null?void 0:a.data)==null?void 0:b.types.map(g=>f.jsx("option",{value:g.name,children:g.name},g.name))]}),c&&f.jsx("div",{children:f.jsx(Yn,{id:"is-array",label:"Is Array?",checked:l.typeData.isArray,onChange:g=>{u(g?{...l,data:[],typeData:{...l.typeData,isArray:g}}:{...l,data:eh(e,l.typeData.type),typeData:{...l.typeData,isArray:g}})}})}),f.jsx("div",{className:"h-2"}),c&&l.typeData.isArray?f.jsx(_ue,{types:e,type:c,title:"data",data:l.data,onAdd:g=>{console.log("adding item"),h("data",l,[...l.data,g])},onChange:(g,x)=>h(g,l,x),onDelete:g=>h("data",l,l.data.filter(x=>x.name!==g))}):k5(c||{name:l.typeData.type,properties:[]},l.data||l,l,l.typeData,"value",h)]}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{t&&t(),i()},children:t?"Delete":"Close"}),f.jsx(Rt,{color:"primary",onClick:()=>{n(l),i()},children:"Update"})]})]}):f.jsx(f.Fragment,{})}function k5(e,t,n,r,i,o){var s;switch(e.name){case"string":return r.useTextArea?f.jsx(dE,{id:i,label:i,value:t,onChange:a=>o("data",n,a)}):f.jsx(Xt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,a)});case"number":return f.jsx(Xt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,+a)});case"boolean":return f.jsx(Yn,{id:i,label:i,checked:t,onChange:a=>o("data",n,a)});case"enum":return f.jsx(ht,{id:i,label:i,value:t,onChange:a=>o("data",n,a),children:(s=r.options)==null?void 0:s.map(a=>f.jsx("option",{value:a,children:a},a))});case"blueprint":return f.jsx("div",{children:"TODO"});default:return f.jsx("div",{children:e.properties.map(a=>k5({name:a.typeData.type,properties:[]},t[a.key]||"",n,a.typeData,a.key,(l,u,c)=>{o("data/".concat(a.key),u,c)}))},i)}}function _ue({types:e,title:t,data:n,type:r,onAdd:i,onChange:o,onDelete:s}){const[a,l]=k.useState(null);return f.jsxs("div",{children:[f.jsx(fE,{title:"Edit Data",types:e,onDelete:()=>s(a.name),onSave:u=>o("".concat(t,"/").concat(a.name),u),isVisible:a!==null,requestClose:()=>l(null),data:a}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("p",{children:t}),f.jsx("p",{onClick:()=>i(eh(e,r)),children:"Add"})]}),f.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),f.jsx("div",{className:"flex flex-col gap-1 mt-3",children:n.map(u=>f.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>l(u),children:f.jsx("p",{children:u.name})},u.name))})]})}const C5=async(e,t)=>On(e,n=>{let r=[];if(t==="builder"?r=n.creator:t==="character"&&(r=n.pages),r.findIndex(s=>s.name==="New Page")!==-1)return;let o={name:"New Page",blueprint:{nodes:Hr(),edges:[]},lexical:"",state:[]};t==="builder"?n.creator.push(o):t==="character"&&n.pages.push(o)}),j5=async(e,t,n,r,i)=>On(e,o=>{let s=[];t==="builder"?s=o.creator:t==="character"&&(s=o.pages);const a=s.findIndex(u=>u.name===n);if(a===-1||s[a].state.find(u=>u.name===r))return;let l={name:r,type:i,value:void 0};t==="builder"?o.creator[a].state.push(l):t==="character"&&o.pages[a].state.push(l)}),Eue=async e=>On(e,t=>{t.data.findIndex(r=>r.name==="New Data")===-1&&t.data.push({name:"New Data",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1},data:"lorem ipsum"})}),Sue=async(e,t)=>On(e,n=>{n.types.push({name:t,properties:[{key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}}]})}),kue=async(e,t,n)=>On(e,r=>{const i=r.types.findIndex(o=>o.name===t);i!==-1&&r.types[i].properties.push(n)}),A5=(e,t,n)=>On(e,r=>{const o=(t==="character"?r.pages:r.creator).findIndex(s=>s.name===n);o===-1&&(t==="character"?r.pages.splice(o,1):t==="builder"&&r.creator.splice(o,1))}),Cue=async(e,t)=>On(e,n=>{const r=n.data.findIndex(i=>i.name===t);r!==-1&&n.data.splice(r,1)}),jue=async(e,t)=>On(e,n=>{const r=n.types.findIndex(i=>i.name===t);r!==-1&&n.types.splice(r,1)}),Aue=async(e,t,n)=>On(e,r=>{for(let i=0;i<r.types.length;i++){const o=r.types[i];if(o.name!==t)continue;const s=o.properties.findIndex(a=>a.key===n);if(s===-1)return;o.properties.splice(s,1)}}),R5=async(e,t,n,r)=>On(e,i=>{const s=(t==="character"?i.pages:i.creator).findIndex(a=>a.name===n);s===-1&&(t==="character"?i.pages[s].name=r:t==="builder"&&(i.creator[s].name=r))}),Rue=async(e,t,n)=>On(e,r=>{const i=r.types.findIndex(o=>o.name===t);i!==-1&&(r.types[i].name=n)}),dw=async(e,t)=>On(e,n=>{n.defaultCharacterData=t}),N5=async(e,t,n,r)=>On(e,i=>{const s=(t==="character"?i.pages:i.creator).findIndex(a=>a.name===n);s!==-1&&(t==="character"?i.pages[s].blueprint=r:t==="builder"&&(i.creator[s].blueprint=r))}),T5=async(e,t,n,r,i)=>On(e,o=>{const s=t==="character"?o.pages:o.creator;for(let a=0;a<s.length;a++){const l=s[a];if(l.name!==n)continue;const u=l.state.findIndex(c=>c.name===r);if(u===-1)return;r!==i.name?(l.state.splice(u,1),l.state.push(i)):l.state[u]=i}}),qR=async(e,t)=>{if(t==="{}")return;const n=Wa.encodeBase64(Wa.compress(t)),r=un.get();return On(e,i=>{if(r.tab==="editor"){const o=i.pages.findIndex(s=>s.name===r.characterPage);if(o===-1)return;i.pages[o].lexical=n}else if(r.tab==="creator"){const o=i.creator.findIndex(s=>s.name===r.creatorPage);if(o===-1)return;i.creator[o].lexical=n}})},Nue=async(e,t,n)=>On(e,r=>{const i=r.data.findIndex(o=>o.name===t);i!==-1&&(t!==n.name?(r.data.splice(i,1),r.data.push(n)):r.data[i]=n)}),Tue=async(e,t,n,r)=>On(e,i=>{for(let o=0;o<i.types.length;o++){const s=i.types[o];if(s.name!==t)continue;const a=s.properties.findIndex(l=>l.key===n);if(a===-1)return;n!==r.key?(s.properties.splice(a,1),s.properties.push(r)):s.properties[a]=r}});async function mn(e,t){if(!await kt.versions.get(e))return;const r=await t;if(r)try{return await kt.versions.update(e,{data:r})}catch(i){console.log("Error updating version resource:",i)}}const Iue=({editsId:e,versionedResource:t})=>{const[n,r]=k.useState(null);return console.log(t),f.jsxs(f.Fragment,{children:[f.jsx(S5,{types:t.data.types,onDelete:()=>{const i=On(t.data.defaultCharacterData,o=>{delete o[(n==null?void 0:n.name)||""],o._type.properties=o._type.properties.filter(s=>s.key!==(n==null?void 0:n.name))});mn(e,dw(t.data,i))},onSave:i=>{const o=i.name,s=i.typeData,a=i.data,l=On(t.data.defaultCharacterData,u=>{delete u[(n==null?void 0:n.name)||""],u[o]=a;for(let c=0;c<u._type.properties.length;c++){const d=u._type.properties[c];d.key===(n==null?void 0:n.name)&&(d.key=o,d.typeData=s)}});mn(e,dw(t.data,l))},isVisible:n!==null,requestClose:()=>r(null),data:n}),f.jsx("div",{className:"flex flex-col gap-1",children:t.data.defaultCharacterData._type.properties.map(i=>{const o=i.key,s=t.data.defaultCharacterData[o],a=i.typeData;let l=s._type?void 0:a.type;return f.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>r({name:o,typeData:a,data:s}),children:f.jsxs("p",{children:[o," - ",l," ",a.isArray?"(Array)":""]})},o)})}),f.jsx(Za,{onClick:()=>{const i={...t.data.defaultCharacterData,newKey:"new value",_type:{name:t.data.defaultCharacterData._type.name||"",properties:[...t.data.defaultCharacterData._type.properties||[],{key:"newKey",typeData:{type:"string",useTextarea:!1,isArray:!1}}]}};mn(e,dw(t.data,i))}})]})},Pue=({editsId:e,versionedResource:t})=>{const[n,r]=k.useState(null);return f.jsxs(f.Fragment,{children:[f.jsx(S5,{types:t.data.types,onDelete:()=>mn(e,Cue(t.data,n.name)),onSave:i=>mn(e,Nue(t.data,n.name,i)),isVisible:n!==null,requestClose:()=>r(null),data:n}),f.jsx("div",{className:"flex flex-col gap-1",children:t.data.data.map(i=>f.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>r(i),children:f.jsxs("p",{children:[i.name," - ",i.typeData.type," ",i.typeData.isArray?"(Array)":""]})},i.name))}),f.jsx(Za,{onClick:()=>mn(e,Eue(t.data))})]})},Oue=({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i})=>{var b,g,x;const[o,s]=k.useState(""),[a,l]=k.useState({type:"",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}),[u,c]=k.useState(null),d=un.useValue(),h=Vn(d.versionId),p=k.useMemo(()=>h==null?void 0:h.data.types.find(y=>y.name===(e==null?void 0:e.typeName)),[e,h]);return k.useEffect(()=>{e&&(s(e.key),l({useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[],...e.typeData}))},[e]),f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:"Edit Type Property",onClose:n}),f.jsxs(lr,{children:[f.jsx(Xt,{id:"key",label:"key",placeholder:"baba yaga",value:o,onChange:s,isValid:!0,errorMessage:""}),f.jsxs(ht,{id:"type",label:"Type",value:a.type,onChange:y=>l({...a,type:y}),children:[f.jsx("option",{value:"string",children:"string"}),f.jsx("option",{value:"number",children:"number"}),f.jsx("option",{value:"boolean",children:"boolean"}),f.jsx("option",{value:"enum",children:"enum"}),f.jsx("option",{value:"blueprint",children:"blueprint"}),h==null?void 0:h.data.types.map(y=>f.jsx("option",{value:y.name,children:y.name},y.name))]}),f.jsx(Yn,{id:"is-array",label:"Is Array?",checked:a.isArray,onChange:y=>l({...a,isArray:y})}),a.type==="string"&&!a.isArray&&f.jsx(Yn,{id:"use-textarea",label:"Use Textarea?",checked:a.useTextArea,onChange:y=>l({...a,useTextArea:y})}),a.type==="enum"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("p",{children:"Options"}),f.jsx("div",{onClick:()=>{var v;((v=a.options)==null?void 0:v.findIndex(w=>w==="New Option"))===-1&&l({...a,options:[...a.options||[],"New Option"]})},children:f.jsx("p",{children:"Add"})})]}),f.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),f.jsx("div",{children:(b=a.options)==null?void 0:b.map(y=>f.jsx("div",{onClick:()=>c(y),children:f.jsx("p",{children:y})},y))})]}),a.type==="blueprint"&&f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsxs(ht,{id:"output-type",label:"Output Type",value:a.outputType||"none",onChange:y=>l({...a,outputType:y}),children:[f.jsx("option",{value:"none",children:"none"}),f.jsx("option",{value:"string",children:"string"}),f.jsx("option",{value:"number",children:"number"}),f.jsx("option",{value:"boolean",children:"boolean"}),f.jsx("option",{value:"enum",children:"enum"}),f.jsx("option",{value:"blueprint",children:"blueprint"}),(g=h==null?void 0:h.data)==null?void 0:g.types.map(y=>f.jsx("option",{value:y.name,children:y.name},y.name))]}),f.jsx(Yn,{id:"is-output-an-array",label:"Is Array?",checked:a.isOutputAnArray,onChange:y=>l({...a,isOutputAnArray:y})})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("p",{children:"Inputs"}),f.jsx("div",{onClick:()=>{var v;((v=a.inputs)==null?void 0:v.findIndex(w=>w.name==="New Input"))===-1&&l({...a,inputs:[...a.inputs||[],{name:"New Input",type:"string",isArray:!1}]})},children:f.jsx("p",{children:"Add"})})]}),f.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),f.jsx("div",{children:(x=a.inputs)==null?void 0:x.map(y=>f.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>dn({type:"edit_blueprint_param",title:"Edit Blueprint Param",data:y,onSave:v=>{let w=[...a.inputs||[]];const E=w.findIndex(S=>S.name===y.name);E!==-1&&(w[E]=v,l({...a,inputs:w}))},onDelete:()=>{var w;const v=(w=a.inputs)==null?void 0:w.filter(E=>E.name!==y.name);l({...a,inputs:v})}}),children:f.jsxs("p",{children:[y.name," - ",y.type,y.isArray?"(Array)":""]})},y.name))})]}),f.jsx(Oh,{data:u,isOpen:u!==null,requestClose:()=>c(null),onSave:y=>{let v=[...a.options||[]];const w=v.findIndex(E=>E===u);w!==-1&&(v[w]=y,l({...a,options:v}))}})]}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{i(),n()},disabled:(p==null?void 0:p.properties.length)===1,children:"Delete"}),f.jsx(Rt,{color:"primary",onClick:()=>{if(!o||!a)return n();r({key:o,typeData:a}),n()},children:"Update"})]})]})},Hh=({children:e})=>f.jsx("div",{children:e}),Fr=({children:e,id:t,title:n,isOpen:r,toggleState:i})=>f.jsxs(f.Fragment,{children:[f.jsx("h2",{children:f.jsxs("button",{type:"button",onClick:()=>i(!r),className:"".concat(r&&"bg-brand-100 dark:bg-neutral-800 text-brand-600 dark:text-white"," flex items-center justify-between w-full p-5 font-medium rtl:text-right text-neutral-500 border border-neutral-200 dark:border-neutral-700 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 gap-3"),children:[f.jsx("span",{children:n}),f.jsx("svg",{"data-accordion-icon":!0,className:"".concat(r?"":"rotate-180"," w-3 h-3 shrink-0"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),f.jsx("div",{className:"".concat(r?"flex":"hidden"," w-full"),children:f.jsx("div",{className:"p-5 w-full border border-t-0 border-neutral-200 dark:border-neutral-700",children:e})})]}),$ue=({editsId:e,versionedResource:t})=>{const[n,r]=k.useState(null),[i,o]=k.useState(null),[s,a]=k.useState(-1);return f.jsxs(f.Fragment,{children:[f.jsx(Oue,{data:n,isOpen:n!==null,requestClose:()=>r(null),onSave:l=>mn(e,Tue(t.data,(n==null?void 0:n.typeName)||"",(n==null?void 0:n.key)||"",l)),onDelete:()=>mn(e,Aue(t.data,(n==null?void 0:n.typeName)||"",(n==null?void 0:n.key)||""))}),f.jsx(Oh,{data:i,isOpen:i!==null,requestClose:()=>o(null),onSave:l=>mn(e,Rue(t.data,i||"",l))}),f.jsx(Hh,{children:t.data.types.map((l,u)=>f.jsxs(Fr,{id:l.name,title:l.name,isOpen:s===u,toggleState:c=>a(c?u:-1),children:[f.jsxs("div",{children:[f.jsx(Rt,{color:"light",onClick:()=>o(l.name),children:"Edit Name"}),f.jsx(Rt,{color:"light",onClick:async()=>{let c={key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}};await mn(e,kue(t.data,l.name,c)),r({...c,typeName:l.name})},children:"Add Property"}),f.jsx(Rt,{color:"danger",onClick:()=>mn(e,jue(t.data,l.name)),children:"Delete Type"})]}),f.jsx("div",{className:"flex flex-col gap-1 mt-3",children:l.properties.map(c=>{var d;return f.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>r({...c,typeName:l.name}),children:f.jsxs("p",{children:[c.key," - ",c.typeData.type," ",c.typeData.isArray?"(Array)":""," ",(d=c.typeData.options)==null?void 0:d.join(",")]})},c.key)})})]},l.name))}),f.jsx(Za,{onClick:async()=>{await mn(e,Sue(t.data,"New Type")),o("New Type")}})]})};function Bv(e){const{query:t}=Gs();return I5(t,e)}function I5(e,t){const n=e.node(t).get();if(!n.data.parent)return[];const r=e.node(n.data.parent).get();return[...r.data.props.local||[],...I5(e,r.id)]}function Mue(){const{id:e,actions:{setProp:t},showPlaceholder:n,isVisible:r,dynamicVisibility:i,visibilityBlueprint:o,isList:s,dataName:a,blueprint:l,isInteractive:u,onPress:c,display:d,position:h,top:p,right:b,bottom:g,left:x,flexDirection:y,alignItems:v,justifyContent:w,gap:E,rows:S,columns:A,marginTop:T,marginRight:$,marginBottom:q,marginLeft:D,paddingTop:U,paddingRight:J,paddingBottom:H,paddingLeft:I,height:F,width:K,maxHeight:X,maxWidth:O,minHeight:B,minWidth:P,background:G,border:Q,hover:se}=ai(W=>({showPlaceholder:W.data.props.showPlaceholder,isVisible:W.data.props.isVisible,dynamicVisibility:W.data.props.dynamicVisibility,visibilityBlueprint:W.data.props.visibilityBlueprint,isList:W.data.props.isList,dataName:W.data.props.dataName,blueprint:W.data.props.blueprint,isInteractive:W.data.props.isInteractive,onPress:W.data.props.onPress,display:W.data.props.display,position:W.data.props.position,top:W.data.props.top,right:W.data.props.right,bottom:W.data.props.bottom,left:W.data.props.left,flexDirection:W.data.props.flexDirection,alignItems:W.data.props.alignItems,justifyContent:W.data.props.justifyContent,gap:W.data.props.gap,rows:W.data.props.rows,columns:W.data.props.columns,marginTop:W.data.props.marginTop,marginRight:W.data.props.marginRight,marginBottom:W.data.props.marginBottom,marginLeft:W.data.props.marginLeft,paddingTop:W.data.props.paddingTop,paddingRight:W.data.props.paddingRight,paddingBottom:W.data.props.paddingBottom,paddingLeft:W.data.props.paddingLeft,height:W.data.props.height,width:W.data.props.width,maxHeight:W.data.props.maxHeight,maxWidth:W.data.props.maxWidth,minHeight:W.data.props.minHeight,minWidth:W.data.props.minWidth,background:W.data.props.background,border:W.data.props.border,hover:W.data.props.hover})),[_e,Ne]=k.useState(-1),Te=Bv(e);return k.useEffect(()=>{t(W=>(W.blueprint={edges:W.blueprint.edges,nodes:Eo(W.blueprint.nodes,Te)},W.visibilityBlueprint={edges:W.visibilityBlueprint.edges,nodes:Eo(W.visibilityBlueprint.nodes,Te)},W.onPress={edges:W.onPress.edges,nodes:Eo(W.onPress.nodes,Te)},W))},[Te]),f.jsxs(Hh,{children:[f.jsx(Yn,{id:"show-placeholder",label:"Visible?",checked:n,onChange:W=>t(Y=>Y.showPlaceholder=W)}),f.jsxs(Fr,{id:"visibility",title:"Visibility",isOpen:_e===0,toggleState:W=>Ne(W?0:-1),children:[f.jsx(Yn,{id:"dynamic-visiblity",label:"Dynamic Visibility?",checked:i,onChange:W=>t(Y=>Y.dynamicVisibility=W)}),i?f.jsx("p",{onClick:()=>dn({type:"blueprint",title:"",data:o,onSave:W=>{t(Y=>Y.visibilityBlueprint=W)}}),children:"Visibility Blueprint"}):f.jsx(Yn,{id:"is-visible",label:"Visible?",checked:r,onChange:W=>t(Y=>Y.isVisible=W)})]}),f.jsxs(Fr,{id:"list",title:"List",isOpen:_e===1,toggleState:W=>Ne(W?1:-1),children:[f.jsx(Yn,{id:"is-list",label:"Is Dynamic List",checked:s,onChange:W=>{t(Y=>(Y.isList=W,Y.local=W?[{name:a,type:_m(l),isArray:!1}]:[],Y))}}),f.jsx(Xt,{id:"variable-name",label:"Variable Name",isValid:!0,errorMessage:"",value:a,onChange:W=>{t(Y=>{Y.dataName=W;const ie=Y.local.findIndex(Oe=>Oe.name===a);if(ie!==-1)return Y.local[ie].name=W,Y})}}),f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"",data:l,onSave:W=>{t(Y=>{Y.blueprint=W;const ie=Y.local.findIndex(Oe=>Oe.name===a);if(ie!==-1)return Y.local[ie].type=_m(W),Y})}}),children:"List Data Blueprint"})]}),f.jsxs(Fr,{id:"input",title:"Input",isOpen:_e===2,toggleState:W=>Ne(W?2:-1),children:[f.jsx(Yn,{id:"is-interactive",label:"Is Interactive?",checked:u,onChange:W=>t(Y=>Y.isInteractive=W)}),f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"",data:c,onSave:W=>{t(Y=>Y.onPress=W)}}),children:"On Press Blueprint"})]}),f.jsxs(Fr,{id:"layout",title:"Layout",isOpen:_e===3,toggleState:W=>Ne(W?3:-1),children:[f.jsxs(ht,{id:"display",label:"Display",value:d,onChange:W=>t(Y=>Y.display=W),children:[f.jsx("option",{value:"block",children:"Block"}),f.jsx("option",{value:"flex",children:"Flex"}),f.jsx("option",{value:"grid",children:"Grid"})]}),f.jsxs(ht,{id:"position",label:"Position",value:h,onChange:W=>t(Y=>Y.position=W),children:[f.jsx("option",{value:"static",children:"Static"}),f.jsx("option",{value:"relative",children:"Relative"}),f.jsx("option",{value:"absolute",children:"Absolute"}),f.jsx("option",{value:"fixed",children:"Fixed"}),f.jsx("option",{value:"sticky",children:"Sticky"})]}),h!=="static"?f.jsxs(f.Fragment,{children:[f.jsx(Xt,{id:"top",label:"Top",isValid:!0,errorMessage:"",value:p,onChange:W=>t(Y=>Y.top=W)}),f.jsx(Xt,{id:"right",label:"Right",isValid:!0,errorMessage:"",value:b,onChange:W=>t(Y=>Y.right=W)}),f.jsx(Xt,{id:"bottom",label:"Bottom",isValid:!0,errorMessage:"",value:g,onChange:W=>t(Y=>Y.bottom=W)}),f.jsx(Xt,{id:"left",label:"Left",isValid:!0,errorMessage:"",value:x,onChange:W=>t(Y=>Y.left=W)})]}):null,d==="grid"?f.jsxs(f.Fragment,{children:[f.jsx(Xt,{id:"columns",label:"Columns",isValid:!0,errorMessage:"",value:A,onChange:W=>t(Y=>Y.columns=W)}),f.jsx(Xt,{id:"rows",label:"Rows",isValid:!0,errorMessage:"",value:S,onChange:W=>t(Y=>Y.rows=W)})]}):null,["flex","grid"].includes(d)?f.jsxs(f.Fragment,{children:[f.jsxs(ht,{id:"flex-direction",label:"Flex Direction",value:y,onChange:W=>t(Y=>Y.flexDirection=W),children:[f.jsx("option",{value:"row",children:"Row"}),f.jsx("option",{value:"column",children:"Column"}),f.jsx("option",{value:"row-reverse",children:"Reverse Row"}),f.jsx("option",{value:"column-reverse",children:"Reverse Column"})]}),f.jsxs(ht,{id:"align-items",label:"Align Items",value:v,onChange:W=>t(Y=>Y.alignItems=W),children:[f.jsx("option",{value:"initial",children:"Initial"}),f.jsx("option",{value:"inherit",children:"Inherit"}),f.jsx("option",{value:"normal",children:"Normal"}),f.jsx("option",{value:"stretch",children:"Stretch"}),f.jsx("option",{value:"center",children:"Center"}),f.jsx("option",{value:"flex-start",children:"Flex-Start"}),f.jsx("option",{value:"flex-end",children:"Flex-End"}),f.jsx("option",{value:"start",children:"Start"}),f.jsx("option",{value:"end",children:"End"}),f.jsx("option",{value:"baseline",children:"Baseline"})]}),f.jsxs(ht,{id:"justify-content",label:"Justify Content",value:w,onChange:W=>t(Y=>Y.justifyContent=W),children:[f.jsx("option",{value:"initial",children:"Initial"}),f.jsx("option",{value:"inherit",children:"Inherit"}),f.jsx("option",{value:"stretch",children:"Stretch"}),f.jsx("option",{value:"center",children:"Center"}),f.jsx("option",{value:"flex-start",children:"Flex-Start"}),f.jsx("option",{value:"flex-end",children:"Flex-End"}),f.jsx("option",{value:"space-between",children:"Space-Between"}),f.jsx("option",{value:"space-around",children:"Space-Around"}),f.jsx("option",{value:"space-evenly",children:"Space-Evenly"})]}),f.jsx(ht,{id:"container-gap",label:"Gap",value:E,onChange:W=>t(Y=>Y.gap=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))})]}):null]}),f.jsxs(Fr,{id:"spacing",title:"Spacing",isOpen:_e===4,toggleState:W=>Ne(W?4:-1),children:[f.jsx(ht,{id:"margin-top",label:"Margin Top",value:T,onChange:W=>t(Y=>Y.marginTop=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"margin-right",label:"Margin Right",value:$,onChange:W=>t(Y=>Y.marginRight=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"margin-bottom",label:"Margin Bottom",value:q,onChange:W=>t(Y=>Y.marginBottom=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"margin-left",label:"Margin Left",value:D,onChange:W=>t(Y=>Y.marginTop=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"padding-top",label:"Padding Top",value:U,onChange:W=>t(Y=>Y.paddingTop=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"padding-right",label:"Padding Right",value:J,onChange:W=>t(Y=>Y.paddingRight=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"padding-bottom",label:"Padding Bottom",value:H,onChange:W=>t(Y=>Y.paddingBottom=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"padding-left",label:"Padding Left",value:I,onChange:W=>t(Y=>Y.paddingLeft=W),children:Object.keys(Ge.spacing).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"width",label:"Width",value:K,onChange:W=>t(Y=>Y.width=W),children:Object.keys(Ge.size).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"height",label:"Height",value:F,onChange:W=>t(Y=>Y.height=W),children:Object.keys(Ge.size).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"max-width",label:"Max Width",value:O,onChange:W=>t(Y=>Y.maxWidth=W),children:Object.keys(Ge.size).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"max-height",label:"Max Height",value:X,onChange:W=>t(Y=>Y.maxHeight=W),children:Object.keys(Ge.size).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"min-width",label:"Min Width",value:P,onChange:W=>t(Y=>Y.minWidth=W),children:Object.keys(Ge.size).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"min-height",label:"Min Height",value:B,onChange:W=>t(Y=>Y.minHeight=W),children:Object.keys(Ge.size).map(W=>f.jsx("option",{value:W,children:W},W))})]}),f.jsxs(Fr,{id:"styling",title:"Styling",isOpen:_e===5,toggleState:W=>Ne(W?5:-1),children:[f.jsx(ht,{id:"container-background",label:"Background",value:G,onChange:W=>t(Y=>Y.background=W),children:Object.keys(Ti).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"container-border",label:"Border",value:Q,onChange:W=>t(Y=>Y.border=W),children:Object.keys(Ti).map(W=>f.jsx("option",{value:W,children:W},W))}),f.jsx(ht,{id:"container-hover",label:"Hover",value:se,onChange:W=>t(Y=>Y.hover=W),children:Object.keys(Ti).map(W=>f.jsx("option",{value:W,children:W},W))})]})]})}function ou(e){const{connectors:{connect:t,drag:n}}=ai(),r=k.useMemo(()=>{var s;return Ti[e.background]?(s=Ti[e.background])==null?void 0:s.background:""},[e.background]),i=k.useMemo(()=>{var s;return Ti[e.border]?(s=Ti[e.border])==null?void 0:s.border:""},[e.border]),o=k.useMemo(()=>{var s;return e.isInteractive?(s=Ti[e.hover])==null?void 0:s.hover:""},[e.isInteractive]);return f.jsx("div",{ref:s=>t(n(s)),style:{display:e.display,position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ge.spacing[e.gap],marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],paddingTop:Ge.spacing[e.paddingTop],paddingRight:Ge.spacing[e.paddingRight],paddingBottom:Ge.spacing[e.paddingBottom],paddingLeft:Ge.spacing[e.paddingLeft],height:Ge.size[e.height],width:Ge.size[e.width],maxHeight:Ge.size[e.maxHeight],maxWidth:Ge.size[e.maxWidth],minHeight:Ge.size[e.minHeight],minWidth:Ge.size[e.minWidth]},className:"".concat(r," ").concat(i," ").concat(o),children:e.children?e.children:e.showPlaceholder?f.jsx("div",{children:"Add An Item!"}):null})}const Due={defaultProps:{showPlaceholder:!0,dynamicVisibility:!1,visibilityBlueprint:{nodes:Hr([],{name:"isVisible",type:"boolean",isArray:!1}),edges:[]},isVisible:!0,isList:!1,dataName:"listItem",blueprint:{nodes:Hr([],{name:"listItem",type:"any",isArray:!0}),edges:[]},local:[],isInteractive:!1,onPress:{nodes:Hr([]),edges:[]},display:"flex",position:"static",top:"0px",right:"0px",bottom:"0px",left:"0px",flexDirection:"column",alignItems:"normal",justifyContent:"initial",gap:"0",rows:0,columns:0,marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"4",paddingRight:"4",paddingBottom:"4",paddingLeft:"4",height:"auto",width:"auto",maxHeight:"none",maxWidth:"none",minHeight:"none",minWidth:"none",background:"no style",border:"no style",hover:"no style"},rules:{canMoveIn:(e,t,n)=>t.data.props.isList?t.data.nodes.length===0:!0},related:{settings:Mue}};ou.craft=Due;function Lue(){const{id:e,actions:{setProp:t},useBlueprintValue:n,blueprint:r,text:i,color:o,fontSize:s,fontWeight:a,textAlign:l,textDecoration:u,textTransform:c,marginTop:d,marginRight:h,marginBottom:p,marginLeft:b,paddingTop:g,paddingRight:x,paddingBottom:y,paddingLeft:v}=ai(A=>({useBlueprintValue:A.data.props.useBlueprintValue||!1,blueprint:A.data.props.blueprint,text:A.data.props.text||"",color:A.data.props.color,fontFamily:A.data.props.fontFamily,fontSize:A.data.props.fontSize,fontWeight:A.data.props.fontWeight,fontStyle:A.data.props.fontStyle,letterSpacing:A.data.props.letterSpacing,lineHeight:A.data.props.lineHeight,textAlign:A.data.props.textAlign||"left",textDecoration:A.data.props.textDecoration||"none",textTransform:A.data.props.textTransform||"none",marginTop:A.data.props.marginTop||"0px",marginRight:A.data.props.marginRight||"0px",marginBottom:A.data.props.marginBottom||"0px",marginLeft:A.data.props.marginLeft||"0px",paddingTop:A.data.props.paddingTop||"0px",paddingRight:A.data.props.paddingRight||"0px",paddingBottom:A.data.props.paddingBottom||"0px",paddingLeft:A.data.props.paddingLeft||"0px"})),[w,E]=k.useState(-1),S=Bv(e);return k.useEffect(()=>{t(A=>(A.blueprint={edges:A.blueprint.edges,nodes:Eo(A.blueprint.nodes,S)},A))},[]),f.jsxs(Hh,{children:[f.jsxs(Fr,{id:"content",title:"Content",isOpen:w===0,toggleState:A=>E(A?0:-1),children:[f.jsx(Yn,{id:"use-blueprint-value",label:"Use Blueprint Value?",checked:n,onChange:A=>t(T=>T.useBlueprintValue=A)}),n?f.jsx(Rt,{color:"primary",onClick:()=>dn({type:"blueprint",title:"Text Value",data:r,onSave:A=>t(T=>{T.blueprint=A})}),children:"Edit Blueprint Value"}):f.jsx(Xt,{id:"text",label:"Text",placeholder:"lorem ipsum",value:i,onChange:A=>t(T=>T.text=A),isValid:!0,errorMessage:""})]}),f.jsxs(Fr,{id:"content-styling",title:"Content Styling",isOpen:w===1,toggleState:A=>E(A?1:-1),children:[f.jsx(ht,{id:"color",label:"Color",value:o,onChange:A=>t(T=>T.color=A),children:Object.keys(Ii.colors).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"font-size",label:"Font Size",value:s,onChange:A=>t(T=>T.fontSize=A),children:Object.keys(Ii.sizes).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"font-weight",label:"Font Weight",value:a,onChange:A=>t(T=>T.fontWeight=A),children:Object.keys(Ii.weight).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsxs(ht,{id:"text-align",label:"Text Align",value:l,onChange:A=>t(T=>T.textAlign=A),children:[f.jsx("option",{value:"left",children:"Left"}),f.jsx("option",{value:"center",children:"Center"}),f.jsx("option",{value:"right",children:"Right"})]}),f.jsxs(ht,{id:"text-decoration",label:"Text Decoration",value:u,onChange:A=>t(T=>T.textDecoration=A),children:[f.jsx("option",{value:"none",children:"None"}),f.jsx("option",{value:"underline",children:"Underline"}),f.jsx("option",{value:"line-through",children:"Line-Through"})]}),f.jsxs(ht,{id:"text-transform",label:"Text Transform",value:c,onChange:A=>t(T=>T.textTransform=A),children:[f.jsx("option",{value:"none",children:"None"}),f.jsx("option",{value:"uppercase",children:"Uppercase"}),f.jsx("option",{value:"lowercase",children:"Lowercase"})]})]}),f.jsxs(Fr,{id:"spacing",title:"Spacing",isOpen:w===2,toggleState:A=>E(A?2:-1),children:[f.jsx(ht,{id:"margin-top",label:"Margin Top",value:d,onChange:A=>t(T=>T.marginTop=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"margin-right",label:"Margin Right",value:h,onChange:A=>t(T=>T.marginRight=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"margin-bottom",label:"Margin Bottom",value:p,onChange:A=>t(T=>T.marginBottom=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"margin-left",label:"Margin Left",value:b,onChange:A=>t(T=>T.marginTop=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"padding-top",label:"Padding Top",value:g,onChange:A=>t(T=>T.paddingTop=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"padding-right",label:"Padding Right",value:x,onChange:A=>t(T=>T.paddingRight=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"padding-bottom",label:"Padding Bottom",value:y,onChange:A=>t(T=>T.paddingBottom=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))}),f.jsx(ht,{id:"padding-left",label:"Padding Left",value:v,onChange:A=>t(T=>T.paddingLeft=A),children:Object.keys(Ge.spacing).map(A=>f.jsx("option",{value:A,children:A},A))})]})]})}function su(e){const{connectors:{connect:t,drag:n}}=ai(),r=k.useMemo(()=>{var o;return Ii.colors[e.color]?(o=Ii.colors[e.color])==null?void 0:o.text:""},[e.color]),i=k.useMemo(()=>Ii.weight[e.fontWeight]?Ii.weight[e.fontWeight]:"",[e.fontWeight]);return f.jsx("p",{ref:o=>t(n(o)),style:{textAlign:e.textAlign,...Ii.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],paddingTop:Ge.spacing[e.paddingTop],paddingRight:Ge.spacing[e.paddingRight],paddingBottom:Ge.spacing[e.paddingBottom],paddingLeft:Ge.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:e.text})}const Bue={defaultProps:{useBlueprintValue:!1,blueprint:{nodes:Hr([],{name:"output",type:"string",isArray:!1}),edges:[]},text:"hello world",color:"base",fontSize:"base",textAlign:"left",textDecoration:"none",textTransform:"none",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"0",paddingRight:"0",paddingBottom:"0",paddingLeft:"0"},rules:{},related:{settings:Lue}};su.craft=Bue;const Fue="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",zue=({versionedResource:e})=>{const t=un.useValue(),{actions:n}=Gs();return k.useEffect(()=>{var i;let r=(i=e.data.pages.find(o=>o.name===t.characterPage))==null?void 0:i.lexical;r||(r=Fue),n.deserialize(Wa.decompress(Wa.decodeBase64(r)))},[t.characterPage]),f.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:f.jsx(G4,{children:f.jsx(fu,{is:ou,canvas:!0,children:f.jsx(su,{text:"Testing the world"})})})})},Hue=({})=>f.jsx(f.Fragment,{children:f.jsx("p",{children:"TODO"})});function gh({placeholder:e}){const{connectors:{connect:t,drag:n}}=ai();return f.jsx("div",{ref:r=>t(n(r))})}function Uue(){const{actions:{setProp:e},placeholder:t,blueprint:n}=ai(r=>({placeholder:r.data.props.placeholder,blueprint:r.data.props.blueprint}));return f.jsx(f.Fragment,{})}gh.craft={rules:{},related:{settings:Uue}};function P5({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const o=un.useValue(),s=Vn(o.versionId),[a,l]=k.useState(""),[u,c]=k.useState(""),[d,h]=k.useState(!1);return k.useEffect(()=>{e&&(l(e.name),c(e.type.type),h(e.type.isArray||!1))},[e]),s?f.jsxs(sr,{isOpen:t,onClose:n,children:[f.jsx(ar,{title:"Add Page State",onClose:n}),f.jsxs(lr,{children:[f.jsx(Xt,{id:"var-name",label:"Variable Name",value:a,onChange:l,isValid:!0,errorMessage:""}),f.jsxs(ht,{id:"var-type",label:"Type",value:u,onChange:c,children:[f.jsx("option",{value:"string",children:"string"}),f.jsx("option",{value:"number",children:"number"}),f.jsx("option",{value:"boolean",children:"boolean"}),f.jsx("option",{value:"enum",children:"enum"}),s.data.types.map(p=>f.jsx("option",{value:p.name,children:p.name},p.name))]}),f.jsx(Yn,{id:"is-array",label:"Is Array?",checked:d,onChange:h})]}),f.jsxs(hr,{children:[f.jsx(Rt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),f.jsx(Rt,{color:"primary",onClick:()=>{if(!a||!u||!e)return n();r({name:a,type:{type:u,isArray:d,useTextArea:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}}),n()},children:"Confirm"})]})]}):f.jsx(f.Fragment,{})}const O5=()=>{const{nodes:e,actions:t,isActive:n}=Gs(d=>({nodes:d.nodes,isActive:d.events.selected})),[r,i]=$t.useState({}),[o,s]=$t.useState(""),{connectors:{select:a}}=Gs(),l=d=>{i(h=>({...h,[d]:!h[d]}))},u=d=>{var x;const h=e[d];if(!h)return null;const p=r[d],b=h.data.nodes&&h.data.nodes.length>0,g=n.has(d);return f.jsxs("div",{className:"select-none",children:[f.jsxs("div",{ref:y=>a(y,d),className:"\n            flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors duration-200 hover:bg-secondary/80\n            ".concat(g?"bg-blue-500/20 text-blue-700 dark:text-blue-300":"","\n            ").concat(o===d&&!g?"bg-secondary/50":"","\n          "),onMouseEnter:()=>s(d),onMouseLeave:()=>s(""),children:[b?f.jsx("button",{onClick:y=>{y.stopPropagation(),l(d)},className:"w-4 h-4 flex items-center justify-center hover:bg-secondary/80 rounded",children:p?f.jsx(u4,{className:"w-4 h-4"}):f.jsx(GX,{className:"w-4 h-4"})}):f.jsx("div",{className:"w-4"}),f.jsx("button",{onClick:y=>{y.stopPropagation(),t.setHidden(d,!h.data.hidden)},className:"text-foreground/80 hover:text-foreground",children:h.data.hidden?f.jsx(YX,{className:"w-4 h-4"}):f.jsx(XX,{className:"w-4 h-4"})}),f.jsx("span",{className:"text-sm font-medium",children:((x=h.data.custom)==null?void 0:x.displayName)||h.data.displayName||h.data.name})]}),b&&p&&f.jsx("div",{className:"ml-1.5 border-l border-border/50 pl-2 mt-1",children:h.data.nodes.map(y=>u(y))})]},d)},c=Object.keys(e).filter(d=>!e[d].data.parent);return f.jsxs("div",{className:"p-4 space-y-2",children:[f.jsxs("div",{className:"text-sm font-medium flex items-center gap-2 px-2",children:[f.jsx(JX,{className:"w-4 h-4"}),"Layers"]}),f.jsx("div",{className:"space-y-1",children:c.map(d=>u(d))})]})};function Wue(){const e=un.useValue(),t=Vn(e.versionId),n=k.useMemo(()=>t==null?void 0:t.data.pages.find(h=>h.name===e.characterPage),[t,e.characterPage]),[r,i]=k.useState("components"),[o,s]=k.useState(null),[a,l]=k.useState(null),{connectors:u}=Gs(),{selected:c,actions:d}=Gs((h,p)=>{const[b]=h.events.selected;let g;return b&&(g={id:b,name:h.nodes[b].data.name,settings:h.nodes[b].related&&h.nodes[b].related.settings,isDeletable:p.node(b).isDeletable()}),{selected:g}});return t?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[f.jsx(ht,{id:"page",label:"Page",value:e.characterPage,onChange:KC,children:t.data.pages.map(h=>f.jsx("option",{value:h.name,children:h.name},h.name))}),f.jsxs("button",{type:"button",onClick:()=>mn(e.versionId,C5(t.data,"character")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[f.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),f.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),f.jsxs(ht,{id:"designer-tab",label:"",value:r,onChange:i,children:[f.jsx("option",{value:"components",children:"Components"}),f.jsx("option",{value:"details",children:"Details"}),f.jsx("option",{value:"state",children:"Page Info"})]}),f.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?f.jsxs(f.Fragment,{children:[f.jsx("h4",{className:"",children:"Components"}),f.jsxs("div",{className:"flex flex-col my-4",children:[f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(fu,{is:ou,canvas:!0})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(su,{text:"Hi World"})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),f.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(gh,{placeholder:"Search...",blueprint:{nodes:Hr([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(lh,{})),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(uh,{isList:!1,buttons:[],blueprint:{nodes:Hr(),edges:[]}})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&c?f.jsxs(f.Fragment,{children:[c.settings&&$t.createElement(c.settings),c.isDeletable?f.jsx(Rt,{className:"mt-4",color:"danger",onClick:()=>{d.delete(c.id)},children:"Delete"}):null]}):r==="state"?f.jsxs(f.Fragment,{children:[f.jsx(Oh,{data:a,isOpen:a!==null,requestClose:()=>l(null),onSave:h=>{mn(t.local_id,R5(t.data,"character",a,h)),KC(h)}}),f.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[f.jsx(Rt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{mn(t.local_id,A5(t.data,"character",e.characterPage))},children:"Delete"}),f.jsx(Rt,{color:"primary",onClick:()=>l(e.characterPage),children:"Rename"})]}),f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"Page Blueprint",data:n==null?void 0:n.blueprint,onSave:h=>mn(t.local_id,N5(t.data,"character",e.characterPage,h))}),children:"Edit Page Blueprint"}),f.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[f.jsx("div",{style:{display:"flex",alignItems:"center"},children:f.jsx("h5",{children:"Page State"})}),f.jsxs("button",{onClick:()=>mn(t.local_id,j5(t.data,"character",e.characterPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],outputType:"string",isOutputAnArray:!1,inputs:[]})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[f.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),f.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),f.jsx(Ph,{}),f.jsx("div",{children:n==null?void 0:n.state.map(h=>f.jsx("div",{onClick:()=>s(h),children:f.jsxs("p",{children:[h.name," | ",h.type.type,h.type.isArray?"(Array)":""]})},h.name))}),f.jsx(P5,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:h=>mn(t.local_id,T5(t.data,"character",e.characterPage,o.name,{...h,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?f.jsx(O5,{}):null]}):f.jsx(f.Fragment,{})}function Vue(){const{id:e,actions:{setProp:t},label:n,dynamicOptions:r,optionsBlueprint:i,onChange:o,marginTop:s,marginRight:a,marginBottom:l,marginLeft:u,width:c,maxWidth:d,minWidth:h}=ai(x=>({label:x.data.props.label,dynamicOptions:x.data.props.dynamicOptions,optionsBlueprint:x.data.props.optionsBlueprint,options:x.data.props.options,onChange:x.data.props.onChange,marginTop:x.data.props.marginTop,marginRight:x.data.props.marginRight,marginBottom:x.data.props.marginBottom,marginLeft:x.data.props.marginLeft,width:x.data.props.width,maxWidth:x.data.props.maxWidth,minWidth:x.data.props.minWidth})),[p,b]=k.useState(-1),g=Bv(e);return k.useEffect(()=>{t(x=>(x.optionsBlueprint={edges:x.optionsBlueprint.edges,nodes:Eo(x.optionsBlueprint.nodes,g)},x.onChange={edges:x.onChange.edges,nodes:Eo(x.onChange.nodes,g)},x))},[g]),f.jsxs(Hh,{children:[f.jsx(Fr,{id:"label",title:"Label",isOpen:p===0,toggleState:x=>b(x?0:-1),children:f.jsx(Xt,{id:"label",label:"Update Label",value:n,onChange:x=>t(y=>y.label=x),isValid:!0,errorMessage:""})}),f.jsxs(Fr,{id:"options",title:"Options",isOpen:p===1,toggleState:x=>b(x?1:-1),children:[f.jsx(Yn,{id:"dynamic-options",label:"Dynamic Options?",checked:r,onChange:x=>t(y=>y.dynamicOptions=x)}),r?f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"",data:i,onSave:x=>{t(y=>(y.optionsBlueprint=x,y.onChange={edges:y.onChange.edges,nodes:Eo(y.onChange.nodes,[...g,{name:"selectedValue",type:_m(x),isArray:!1}])},y))}}),children:"Options Blueprint"}):f.jsx("p",{children:"TODO: handle options."}),f.jsx("div",{className:"h-2"}),f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"",data:o,onSave:x=>{t(y=>y.onChange=x)}}),children:"onChange Blueprint"})]}),f.jsxs(Fr,{id:"spacing",title:"Spacing",isOpen:p===2,toggleState:x=>b(x?2:-1),children:[f.jsx(ht,{id:"margin-top",label:"Margin Top",value:s,onChange:x=>t(y=>y.marginTop=x),children:Object.keys(Ge.spacing).map(x=>f.jsx("option",{value:x,children:x},x))}),f.jsx(ht,{id:"margin-right",label:"Margin Right",value:a,onChange:x=>t(y=>y.marginRight=x),children:Object.keys(Ge.spacing).map(x=>f.jsx("option",{value:x,children:x},x))}),f.jsx(ht,{id:"margin-bottom",label:"Margin Bottom",value:l,onChange:x=>t(y=>y.marginBottom=x),children:Object.keys(Ge.spacing).map(x=>f.jsx("option",{value:x,children:x},x))}),f.jsx(ht,{id:"margin-left",label:"Margin Left",value:u,onChange:x=>t(y=>y.marginTop=x),children:Object.keys(Ge.spacing).map(x=>f.jsx("option",{value:x,children:x},x))}),f.jsx(ht,{id:"width",label:"Width",value:c,onChange:x=>t(y=>y.width=x),children:Object.keys(Ge.size).map(x=>f.jsx("option",{value:x,children:x},x))}),f.jsx(ht,{id:"max-width",label:"Max Width",value:d,onChange:x=>t(y=>y.maxWidth=x),children:Object.keys(Ge.size).map(x=>f.jsx("option",{value:x,children:x},x))}),f.jsx(ht,{id:"min-width",label:"Min Width",value:h,onChange:x=>t(y=>y.minWidth=x),children:Object.keys(Ge.size).map(x=>f.jsx("option",{value:x,children:x},x))})]})]})}function uy(e){var i;const{connectors:{connect:t,drag:n}}=ai(),r=k.useMemo(()=>[],[]);return f.jsx(ht,{ref:o=>t(n(o)),style:{marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],width:Ge.size[e.width],maxWidth:Ge.size[e.maxWidth],minWidth:Ge.size[e.minWidth]},id:e.label,label:e.label,value:(i=r[0])==null?void 0:i.name,onChange:()=>{},children:r.map(o=>f.jsx("option",{children:o.name},o.name))})}const que={defaultProps:{label:"Select",dynamicOptions:!1,optionsBlueprint:{nodes:Hr([],{name:"options",type:"any",isArray:!0}),edges:[]},options:[],onChange:{nodes:Hr([{name:"selectedValue",type:"object",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:Vue}};uy.craft=que;function Kue(){const{id:e,actions:{setProp:t},label:n,type:r,minNumber:i,maxNumber:o,getValue:s,onChange:a,marginTop:l,marginRight:u,marginBottom:c,marginLeft:d,width:h,maxWidth:p,minWidth:b}=ai(v=>({label:v.data.props.label,type:v.data.props.type,minNumber:v.data.props.minNumber,maxNumber:v.data.props.maxNumber,getValue:v.data.props.getValue,onChange:v.data.props.onChange,marginTop:v.data.props.marginTop,marginRight:v.data.props.marginRight,marginBottom:v.data.props.marginBottom,marginLeft:v.data.props.marginLeft,width:v.data.props.width,maxWidth:v.data.props.maxWidth,minWidth:v.data.props.minWidth})),[g,x]=k.useState(-1),y=Bv(e);return k.useEffect(()=>{t(v=>{v.getValue={edges:v.getValue.edges,nodes:Eo(v.getValue.nodes,y,{name:"value",type:r==="text"?"string":"number",isArray:!1})},v.onChange={edges:v.onChange.edges,nodes:Eo(v.onChange.nodes,[...y,{name:"field value",type:r==="text"?"string":"number",isArray:!1}])}})},[y]),f.jsxs(Hh,{children:[f.jsx(Fr,{id:"label",title:"Label",isOpen:g===0,toggleState:v=>x(v?0:-1),children:f.jsx(Xt,{id:"label",label:"Update Label",value:n,onChange:v=>t(w=>w.label=v),isValid:!0,errorMessage:""})}),f.jsxs(Fr,{id:"data",title:"Data",isOpen:g===1,toggleState:v=>x(v?1:-1),children:[f.jsx(ht,{id:"input-type",label:"Type",value:r,onChange:v=>{t(w=>(w.type=v,w.getValue.nodes=Eo(w.getValue.nodes,y,{name:"value",type:v==="text"?"string":"number",isArray:!1}),w.onChange.nodes=Eo(w.onChange.nodes,[...y,{name:"field value",type:v==="text"?"string":"number",isArray:!1}]),w))},children:["text","number"].map(v=>f.jsx("option",{value:v,children:v},v))}),r==="number"&&f.jsxs(f.Fragment,{children:[f.jsx(Xt,{id:"min-number",label:"Min Number",type:"number",value:i,onChange:v=>t(w=>w.minNumber=v),isValid:!0,errorMessage:""}),f.jsx(Xt,{id:"max-number",label:"Max Number",type:"number",value:o,onChange:v=>t(w=>w.maxNumber=v),isValid:!0,errorMessage:""})]}),f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"",data:s,onSave:v=>{t(w=>w.getValue=v)}}),children:"Get Value Blueprint"}),f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"",data:a,onSave:v=>{t(w=>w.onChange=v)}}),children:"onChange Blueprint"})]}),f.jsxs(Fr,{id:"spacing",title:"Spacing",isOpen:g===2,toggleState:v=>x(v?2:-1),children:[f.jsx(ht,{id:"margin-top",label:"Margin Top",value:l,onChange:v=>t(w=>w.marginTop=v),children:Object.keys(Ge.spacing).map(v=>f.jsx("option",{value:v,children:v},v))}),f.jsx(ht,{id:"margin-right",label:"Margin Right",value:u,onChange:v=>t(w=>w.marginRight=v),children:Object.keys(Ge.spacing).map(v=>f.jsx("option",{value:v,children:v},v))}),f.jsx(ht,{id:"margin-bottom",label:"Margin Bottom",value:c,onChange:v=>t(w=>w.marginBottom=v),children:Object.keys(Ge.spacing).map(v=>f.jsx("option",{value:v,children:v},v))}),f.jsx(ht,{id:"margin-left",label:"Margin Left",value:d,onChange:v=>t(w=>w.marginTop=v),children:Object.keys(Ge.spacing).map(v=>f.jsx("option",{value:v,children:v},v))}),f.jsx(ht,{id:"width",label:"Width",value:h,onChange:v=>t(w=>w.width=v),children:Object.keys(Ge.size).map(v=>f.jsx("option",{value:v,children:v},v))}),f.jsx(ht,{id:"max-width",label:"Max Width",value:p,onChange:v=>t(w=>w.maxWidth=v),children:Object.keys(Ge.size).map(v=>f.jsx("option",{value:v,children:v},v))}),f.jsx(ht,{id:"min-width",label:"Min Width",value:b,onChange:v=>t(w=>w.minWidth=v),children:Object.keys(Ge.size).map(v=>f.jsx("option",{value:v,children:v},v))})]})]})}function cy(e){const{connectors:{connect:t,drag:n}}=ai();return f.jsx(Xt,{ref:r=>t(n(r)),style:{marginTop:Ge.spacing[e.marginTop],marginRight:Ge.spacing[e.marginRight],marginBottom:Ge.spacing[e.marginBottom],marginLeft:Ge.spacing[e.marginLeft],width:Ge.size[e.width],maxWidth:Ge.size[e.maxWidth],minWidth:Ge.size[e.minWidth]},type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,isValid:!0,errorMessage:"",id:e.label,label:e.label,value:"",onChange:()=>{}})}const Gue={defaultProps:{label:"Select",type:"text",minNumber:0,maxNumber:100,getValue:{nodes:Hr([],{name:"value",type:"string",isArray:!1}),edges:[]},onChange:{nodes:Hr([{name:"field value",type:"string",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:Kue}};cy.craft=Gue;const Yue=()=>{const e=un.useValue(),t=Vn(e.versionId),n=k.useMemo(()=>t==null?void 0:t.data.creator.find(h=>h.name===e.creatorPage),[t,e.creatorPage]),[r,i]=k.useState("components"),[o,s]=k.useState(null),[a,l]=k.useState(null),{connectors:u}=Gs(),{selected:c,actions:d}=Gs((h,p)=>{const[b]=h.events.selected;let g;return b&&(g={id:b,name:h.nodes[b].data.name,settings:h.nodes[b].related&&h.nodes[b].related.settings,isDeletable:p.node(b).isDeletable()}),{selected:g}});return t?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[f.jsx(ht,{id:"page",label:"Page",value:e.creatorPage,onChange:qC,children:t.data.creator.map(h=>f.jsx("option",{value:h.name,children:h.name},h.name))}),f.jsxs("button",{type:"button",onClick:()=>mn(t.local_id,C5(t.data,"builder")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[f.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),f.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),f.jsxs(ht,{id:"designer-tab",label:"",value:r,onChange:i,children:[f.jsx("option",{value:"components",children:"Components"}),f.jsx("option",{value:"details",children:"Details"}),f.jsx("option",{value:"state",children:"Page Info"})]}),f.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?f.jsxs(f.Fragment,{children:[f.jsx("h4",{className:"",children:"Components"}),f.jsxs("div",{className:"flex flex-col my-4",children:[f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(fu,{is:ou,canvas:!0})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(su,{text:"Hi World"})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),f.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(gh,{placeholder:"Search...",blueprint:{nodes:Hr([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(uy,{})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Select"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(cy,{})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text Input"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(lh,{})),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),f.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,f.jsx(uh,{isList:!1,buttons:[],blueprint:{nodes:Hr(),edges:[]}})),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[f.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),f.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),f.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&c?f.jsxs(f.Fragment,{children:[c.settings&&$t.createElement(c.settings),c.isDeletable?f.jsx(Rt,{className:"mt-4",color:"danger",onClick:()=>{d.delete(c.id)},children:"Delete"}):null]}):r==="state"?f.jsxs(f.Fragment,{children:[f.jsx(Oh,{data:a,isOpen:a!==null,requestClose:()=>l(null),onSave:h=>{mn(t.local_id,R5(t.data,"builder",a,h)),qC(h)}}),f.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[f.jsx(Rt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{mn(t.local_id,A5(t.data,"builder",e.creatorPage))},children:"Delete"}),f.jsx(Rt,{color:"light",onClick:()=>l(e.creatorPage),children:"Rename"})]}),f.jsx(Rt,{color:"light",onClick:()=>dn({type:"blueprint",title:"Page Blueprint",data:n==null?void 0:n.blueprint,onSave:h=>mn(t.local_id,N5(t.data,"builder",e.creatorPage,h))}),children:"Edit Page Blueprint"}),f.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[f.jsx("div",{style:{display:"flex",alignItems:"center"},children:f.jsx("h5",{children:"Page State"})}),f.jsxs("button",{onClick:()=>mn(t.local_id,j5(t.data,"builder",e.creatorPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],inputs:[],outputType:"none",isOutputAnArray:!1})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[f.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:f.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),f.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),f.jsx(Ph,{}),f.jsx("div",{className:"pt-2 flex flex-col gap-y-2",children:n==null?void 0:n.state.map(h=>f.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>s(h),children:f.jsxs("p",{children:[h.name," | ",h.type.type,h.type.isArray?"(Array)":""]})},h.name))}),f.jsx(P5,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:h=>mn(t.local_id,T5(t.data,"builder",e.creatorPage,o.name,{...h,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?f.jsx(O5,{}):null]}):f.jsx(f.Fragment,{})};function $5(e){const t=Zs(()=>kt.versions.get(e||""),[e]);if(t)return{...t,data:t==null?void 0:t.data}}function Xue(){const e=un.useValue();return $5(e.versionId)?f.jsx("aside",{className:"border-l border-neutral-500 dark:border-neutral-700 fixed top-0 right-0 z-40 w-64 h-screen transition-transform translate-x-full sm:-translate-x-0","aria-label":"Editor Sidebar",children:f.jsxs("div",{className:"h-full flex flex-col px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-neutral-950",children:[f.jsx("div",{className:"py-4 mb-4 border-b border-neutral-200 dark:border-neutral-700",children:f.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"Details"})}),e.tab==="character"?f.jsx("p",{children:"Default Character data, used for types in GetCharacterData nodes and such."}):e.tab==="data"?f.jsx("p",{children:"Custom data for the system (Items, classes, etc.)"}):e.tab==="types"?f.jsx("p",{children:"The data types for everything in this system."}):e.tab==="editor"?f.jsx(Wue,{}):e.tab==="creator"&&f.jsx(Yue,{})]})}):f.jsx(f.Fragment,{})}const Jue="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",Que=({versionedResource:e})=>{const t=un.useValue(),{actions:n}=Gs();return k.useEffect(()=>{var i;let r=(i=e.data.creator.find(o=>o.name===t.creatorPage))==null?void 0:i.lexical;r||(r=Jue),n.deserialize(Wa.decompress(Wa.decodeBase64(r)))},[t.creatorPage]),f.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:f.jsx(G4,{children:f.jsx(fu,{is:ou,canvas:!0,children:f.jsx(su,{text:"Testing the world"})})})})};function Zue(e){return Zs(()=>kt.systems.get(e||""),[e])}const ece=()=>{const{id:e}=_I();let t=Eh();const n=k.useMemo(()=>e?"".concat(e,"|edits"):void 0,[e]),r=$5(e),i=Vn(n),o=Zue(i==null?void 0:i.reference_id),s=un.useValue();k.useEffect(()=>{!n||n===s.versionId||un.set(u=>({...u,versionId:n}))},[n,s]);const a=k.useMemo(()=>({Container:ou,Text:su,Select:uy,TextInput:cy,FAB:uh,Searchbar:gh,DesignerDivider:lh}),[ou,su,uy,cy,uh,gh,lh]),l=k.useCallback(u=>{i&&mn(i.local_id,qR(i.data,u.serialize()))},[i,mn,qR]);return n?i?o?f.jsx(Boe,{resolver:a,onNodesChange:l,children:f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsx(za,{title:o.name,options:[{onClick:()=>dn({type:"SaveNewVersion",title:"none",data:"none",onSave:async u=>{const c=await xx(i);!c||!await sS("system",c.reference_id,c.local_id,!1)||r&&(await xx(r,n),t("/library"))}}),Content:()=>f.jsx("p",{className:"block cursor-pointer py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 md:dark:text-blue-500",children:"Save Version"})}],hasSidebar:!0}),f.jsxs("div",{className:"p-4 sm:mr-64 relative flex flex-col flex-grow",children:[f.jsxs(ht,{id:"tab-selector",label:"",value:s.tab,onChange:IU,children:[f.jsx("option",{value:"character",children:"Character"}),f.jsx("option",{value:"data",children:"Data"}),f.jsx("option",{value:"types",children:"Types"}),f.jsx("option",{value:"functions",children:"Functions"}),f.jsx("option",{value:"editor",children:"Editor"}),f.jsx("option",{value:"creator",children:"Creator"})]}),s.tab==="character"?f.jsx(Iue,{editsId:n,versionedResource:i}):s.tab==="data"?f.jsx(Pue,{editsId:n,versionedResource:i}):s.tab==="types"?f.jsx($ue,{editsId:n,versionedResource:i}):s.tab==="functions"?f.jsx(Hue,{versionedResource:i}):s.tab==="editor"?f.jsx(zue,{versionedResource:i}):s.tab==="creator"&&f.jsx(Que,{versionedResource:i})]}),f.jsx(Xue,{})]})}):f.jsx(f.Fragment,{children:"Loading System..."}):f.jsx(f.Fragment,{children:"Loading Edits..."}):f.jsx(f.Fragment,{children:"id not defined..."})},M5=Ya([{name:"BardsBallad",light:{background:"#121217",brand:{50:"#fcf9f0",100:"#f9f2db",200:"#f2e1b6",300:"#eacc87",400:"#e3b667",500:"#d99736",600:"#cb802b",700:"#a86426",800:"#875025",900:"#6d4221",950:"#3b210f"},neutral:{50:"#f8f9fb",100:"#f0f1f5",200:"#d9dbe3",300:"#babdcf",400:"#9499b3",500:"#6e7499",600:"#575e7f",700:"#464d66",800:"#393d50",900:"#2e3240",950:"#191c27"},orange:{50:"#fff7eb",100:"#ffe9c6",200:"#ffcd87",300:"#ffac4a",400:"#ff8a16",500:"#e67300",600:"#c35e00",700:"#9e4c00",800:"#7a3b00",900:"#5e2f00",950:"#351a00"},red:{50:"#fff5f5",100:"#ffe5e5",200:"#ffbdbd",300:"#ff8f8f",400:"#ff5c5c",500:"#ff3030",600:"#e52626",700:"#b31f1f",800:"#8c1919",900:"#6a1414",950:"#410d0d"},blue:{50:"#f3faff",100:"#e2f3ff",200:"#bce1ff",300:"#82cbff",400:"#41b2ff",500:"#1f93e6",600:"#166eb3",700:"#125892",800:"#0f4776",900:"#0d3a5e",950:"#07233b"},green:{50:"#f3fcf5",100:"#e4f8e8",200:"#c3edcb",300:"#92d8a4",400:"#57be75",500:"#35a257",600:"#298548",700:"#236e3b",800:"#1c552f",900:"#164429",950:"#0b2617"}}},{name:"ValentinesDay",light:{background:"#442835",brand:{50:"#fff7f9",100:"#ffeef2",200:"#fed7e2",300:"#fbb6ce",400:"#f687b3",500:"#ed64a6",600:"#d53f8c",700:"#b83280",800:"#97266d",900:"#702459",950:"#521640"},neutral:{50:"#fdf7f9",100:"#faf0f3",200:"#f4d9e1",300:"#e8b8ca",400:"#d68aa8",500:"#b76d89",600:"#91536b",700:"#734256",800:"#5b3544",900:"#442835",950:"#2b1821"},orange:{50:"#fff8f1",100:"#ffe8d8",200:"#ffd0ae",300:"#ffaf7e",400:"#ff8552",500:"#f75e28",600:"#d9471a",700:"#b43716",800:"#8c2c13",900:"#6c2311",950:"#3e1409"},red:{50:"#fff5f5",100:"#ffe3e3",200:"#ffbaba",300:"#ff8989",400:"#ff5c5c",500:"#fc2626",600:"#d21f1f",700:"#aa1919",800:"#851515",900:"#661010",950:"#400909"},blue:{50:"#f5f8ff",100:"#ebf2ff",200:"#cbdcff",300:"#a2bfff",400:"#799fff",500:"#567dff",600:"#455fd4",700:"#394aa9",800:"#303b85",900:"#262e66",950:"#171a40"},green:{50:"#f5fdf7",100:"#e7f8eb",200:"#c6edcf",300:"#95dca7",400:"#5fc67d",500:"#3ca75e",600:"#2e8749",700:"#266e3d",800:"#205530",900:"#1a4226",950:"#0d2615"}}}]),tce=()=>{let e=document.createElement("script");e.id="eruda-script",e.src="https://cdn.jsdelivr.net/npm/eruda",document.body.append(e),e.onload=()=>{eruda.init()}},nce=()=>{const e=document.getElementById("eruda-script");e&&(eruda.destroy(),e.remove())},Uh=Ya({theme:"BardsBallad",scheme:"dark",isErudaActive:!1},{onSet:(e,t)=>{SO.set("settings",e),t.isErudaActive&&!e.isErudaActive?nce():!t.isErudaActive&&e.isErudaActive&&tce(),(e.theme!==t.theme||e.scheme!==t.scheme)&&D5()}}),rce=async()=>{const e=await SO.get("settings");e&&Uh.set(e)};rce();const ice=e=>{Uh.set(t=>({...t,isErudaActive:e}))},oce=e=>{Uh.set(t=>({...t,theme:e}))},D5=()=>{const e=M5.get(),t=Uh.get(),n=e.find(r=>r.name===t.theme);if(n){document.documentElement.style.setProperty("--background",n.light.background);for(let r in n.light.brand)document.documentElement.style.setProperty("--brand-".concat(r),n.light.brand[r]);for(let r in n.light.neutral)document.documentElement.style.setProperty("--neutral-".concat(r),n.light.neutral[r]);for(let r in n.light.orange)document.documentElement.style.setProperty("--orange-".concat(r),n.light.orange[r]);for(let r in n.light.red)document.documentElement.style.setProperty("--red-".concat(r),n.light.red[r]);for(let r in n.light.blue)document.documentElement.style.setProperty("--blue-".concat(r),n.light.blue[r]);for(let r in n.light.green)document.documentElement.style.setProperty("--green-".concat(r),n.light.green[r])}},sce={0:"free",1:"premium",2:"fancy",3:"developer"};function ace(e){return sce[e]||"free"}const lce=()=>f.jsx("p",{children:"hello"}),uce=({tabs:e,props:t})=>{var i;const[n,r]=k.useState(e[0].id);return f.jsxs("div",{className:"w-full mt-5",children:[f.jsx("div",{className:"flex space-x-2 border-b border-neutral-700",children:e.map(o=>f.jsx("button",{onClick:()=>{r(o.id)},className:"py-2 px-4 text-sm font-medium transition-colors border-brand-500 ".concat(n===o.id?"border-b-2 text-brand-500":"text-neutral-400 hover:text-brand-400"),children:o.label},o.id))}),f.jsx("div",{className:"p-4",children:((i=e.find(o=>o.id===n))==null?void 0:i.Content(t))||f.jsx(lce,{})})]})},cce=[{id:"profile",label:"Profile",Content:({isLoggedIn:e,user:t})=>f.jsx("div",{className:"max-w-5xl mx-auto",children:e&&t?f.jsxs("div",{className:"my-2 flex flex-col gap-4 lg:grid lg:grid-cols-2 rtl:space-x-reverse flex-wrap",children:[f.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-neutral-500 border",children:[f.jsx("p",{className:"text-lg",children:"Username"}),f.jsx("p",{children:t.username})]}),f.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-neutral-500 border",children:[f.jsx("p",{className:"text-lg",children:"Email"}),f.jsx("p",{children:t.email})]}),f.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-brand-500 border",children:[f.jsx("p",{className:"text-lg",children:"Subscription"}),f.jsxs("p",{className:"mb-4",children:["Current Tier: ",ace(t.role)]}),f.jsx(Rt,{color:"primary",onClick:async()=>{let n="";if(t.role===0){const{url:r}=await WG();n=r}else if(t.role===1){const{url:r}=await VG();n=r}window.open(n,"_self")},children:t.role===0?"Subscribe":t.role===1?"Manage Subscription":"Thank you for everything!"})]}),f.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-red-500 border",children:[f.jsx("p",{className:"text-lg",children:"Danger Zone"}),f.jsx("p",{className:"mb-4 text-red-500",children:"All local data is cleared (unsynced data will be lost)"}),f.jsx(Rt,{color:"danger",onClick:()=>dn({type:"confirm",title:"Logout",data:{type:"danger",message:"All local data is cleared (unsynced data will be lost)"},onSave:$G}),children:"Logout"})]})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[f.jsx("p",{className:"text-lg",children:"You are not logged in"}),f.jsx("p",{className:"mb-4",children:"Login to access your profile"}),f.jsx(Rt,{color:"light",onClick:()=>{dn({type:"authentication",title:"",data:null,onSave:()=>{}})},children:"Login / Register"})]})})},{id:"general",label:"General",Content:({settings:e,themes:t})=>f.jsx(ht,{id:"theme",label:"Theme",value:e.theme,onChange:oce,children:t.map(n=>f.jsx("option",{value:n.name,children:n.name}))})},{id:"developer",label:"Developer",Content:({settings:e})=>f.jsxs(f.Fragment,{children:[f.jsxs("p",{className:"my-2",children:[f.jsx("a",{className:"underline",href:"https://eruda.liriliri.io/",target:"_blank",children:"Eruda"})," allows access to the development console on mobile."]}),f.jsx(Yn,{id:"use-eruda",label:"Load Eruda",checked:e.isErudaActive,onChange:ice})]})}],dce=()=>{const e=M5.useValue(),t=Uh.useValue(),{isLoggedIn:n,user:r}=pr.useValue();return f.jsxs("div",{children:[f.jsx(za,{title:"Settings"}),f.jsx(uce,{tabs:cce,props:{themes:e,settings:t,isLoggedIn:n,user:r}})]})},KR="system-checkpoint",fce=async()=>{const e=await Cn.get(KR);console.log("pulling systems");const{checkpoint:t,documents:n}=await FG(e,20);return await Cn.set(KR,t),n},hce=async()=>{const e=await kt.systems.toArray(),t=await kt.characters.toArray(),n=Bc(await Er.get("token"));if(!n)return[];const r=await Cn.get("synced_characters")||[],i=n.role>0,o=e.filter(l=>{if(!(l.user_id===n.id))return!1;const d=t.find(p=>p.system.local_id===l.local_id&&r.includes)!==void 0,h=!l.id&&i;return d||h}),{conflicts:s,ids:a}=await zG(o);return s},pce=async e=>kt.systems.bulkPut(e),gce=async()=>await kt.systems.toArray(),GR="version-checkpoint",mce=async()=>{const e=await Cn.get(GR);console.log("pulling versions");const{checkpoint:t,documents:n}=await MG(e,20);return await Cn.set(GR,t),n},yce=async()=>{const e=await kt.versions.toArray(),t=await kt.characters.toArray(),n=Bc(await Er.get("token"));if(!n)return[];const r=await Cn.get("synced_characters")||[],i=n.role>0,o=e.filter(l=>{if(!(l.user_id===n.id))return!1;const d=t.find(p=>p.system.version_id===l.local_id&&r.includes)!==void 0,h=!l.id&&i;return d||h}),{conflicts:s,ids:a}=await DG(o);return s},vce=async e=>kt.versions.bulkPut(e),bce=async()=>await kt.versions.toArray(),YR="character-checkpoint",wce=async()=>{const e=await Cn.get(YR);console.log("pulling characters");const{checkpoint:t,documents:n}=await HG(e,20);return await Cn.set(YR,t),n},xce=async()=>{const e=await kt.characters.toArray(),t=Bc(await Er.get("token"));if(!t)return[];const n=t.role>0,r=await Cn.get("updated_characters"),i=await Cn.get("synced_characters")||[],o=e.filter(l=>{const u=i.includes(l.local_id),c=r.includes(l.local_id);return n&&c?!0:u&&c}),{conflicts:s,ids:a}=await UG(o);return s},_ce=async e=>kt.characters.bulkPut(e),Ece=async()=>await kt.characters.toArray(),XR="subscription-checkpoint",Sce=async()=>{const e=await Cn.get(XR);console.log("pulling subscriptions");const{checkpoint:t,documents:n}=await LG(e,20);return await Cn.set(XR,t),n},kce=async()=>{const e=await kt.subscriptions.toArray(),t=await kt.characters.toArray(),n=Bc(await Er.get("token"));if(!n)return[];const r=await Cn.get("synced_characters")||[],i=n.role>0,o=e.filter(l=>{if(!(l.user_id===n.id))return!1;const d=t.find(p=>{const b=p.system.version_id===l.version_id&&p.system.local_id===l.resource_id,g=r.includes(p.local_id);return b&&g})!==void 0,h=!l.id&&i;return d||h}),{conflicts:s,ids:a}=await BG(o);return s},Cce=async e=>kt.subscriptions.bulkPut(e),jce=async()=>await kt.subscriptions.toArray(),aS=Ya({isOnline:navigator.onLine}),Fv=e=>aS.set(t=>({...t,isOnline:e})),Ace=10,JR=[{name:"Subscriptions",get:jce,bulkPut:Cce,pull:Sce,push:kce},{name:"Systems",get:gce,bulkPut:pce,pull:fce,push:hce},{name:"Versions",get:bce,bulkPut:vce,pull:mce,push:yce},{name:"Characters",get:Ece,bulkPut:_ce,pull:wce,push:xce}];bE().then(e=>{Fv(e)});const L5=async()=>{try{const e=await bE(),{isLoggedIn:t}=pr.get();Fv(e),e&&t&&await lS()}catch(e){console.error("Error in sync",e)}setTimeout(L5,10*1e3)};L5();async function B5(e){return e.length===0?[]:new Promise(t=>{dn({title:"Handle Conflicts",type:"handleConflicts",data:e,onSave:t})})}async function Rce(e,t,n){let r=!0;for(;r;){const i=await t();console.log("sync documents",i);const o=i.flatMap(l=>{const u=n.find(h=>h.local_id===l.local_id);if(!u)return[];const c=new Date(u.updated_at).getTime(),d=new Date(l.updated_at).getTime();return c>d?{local:u,remote:l}:[]}),s=await B5(o);i.length<Ace&&(r=!1);const a=i.map(l=>s.find(u=>u.local_id===l.local_id)||l);await e(a),console.log("bulk put",i.length)}}async function Nce(e,t){let n=!0;for(;n;){const r=await t();r.length===0&&(n=!1,console.log("no conflicts"));const i=await B5(r);await e(i),console.log("conflicts handled",r.length)}}const lS=async()=>{const{isOnline:e}=aS.get();if(!e)return;const t=await Cn.get("synced_characters")||[];await m3(t);for(let n=0;n<JR.length;n++){const r=JR[n];await Rce(r.bulkPut,r.pull,await r.get()),await Nce(r.bulkPut,r.push)}};window.addEventListener("online",async()=>{console.log("online");const e=await bE();if(Fv(e),!e){console.log("not connected");return}lS()});window.addEventListener("offline",()=>{console.log("offline"),Fv(!1)});const Tce=()=>{const e=Eh(),t=()=>{e("/settings")};return k.useEffect(()=>{qG()},[]),f.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[f.jsx("h1",{children:"Subscription Successful!"}),f.jsx("p",{children:"Thank you for subscribing to Bard's Ballad. Your subscription was processed successfully."}),f.jsx("p",{children:"We hope you enjoy all the premium features and content!"}),f.jsx("button",{onClick:t,style:{marginTop:"1rem",padding:"0.5rem 1rem",fontSize:"1rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Back to Settings"})]})},Ice=async e=>{try{if(await kt.systems.get(e.local_id))return null;const t=Ih.safeParse(e);return t.success?(await kt.systems.add(e),e):(console.log("Invalid system data:",t.error.format()),null)}catch(t){return console.log("Error saving system:",t),null}},Pce=async e=>{try{if(await kt.versions.get(e.local_id))return null;const t=oS.safeParse(e);return t.success?(await kt.versions.add(e),e):(console.log("Invalid version data:",t.error.format()),null)}catch(t){return console.log("Error saving version:",t),null}},Oce=({item:e})=>{const{addToast:t}=fJ();return f.jsx("div",{className:"relative cursor-pointer flex flex-col max-w-96 p-4 tranasition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",onClick:()=>dn({type:"marketplace_view",title:e.name,data:e,onSave:async n=>{try{const r=await IG(n),{baseData:i,versionData:o}=r,s=await Ice(i);if(!s)return t("Failed to create system.","error");const a=await Pce(o);if(!a)return t("Failed to create version.","error");if(!await sS("system",s.local_id,a.local_id,!1))return t("Failed to create subscription.","error");t("Subscription created!","success")}catch(r){t("Error creating subscription","error")}}}),children:f.jsxs("div",{className:"flex items-start space-x-4",children:[f.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:f.jsx("span",{className:"text-xl font-bold text-white",children:e.name[0]})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:e.name}),f.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[e.creator_username," | Version ",Jl(e.version)]})]})]})},e.name)},$ce=()=>{const[e,t]=k.useState([]),{isLoggedIn:n}=pr.useValue(),{isOnline:r}=aS.useValue();return k.useEffect(()=>{if(!r)return t([]);(async()=>{const o=await NG();t(o)})()},[r]),k.useEffect(()=>{(async()=>{await nf.get("seen-marketplace-disclaimer")||dn({title:"",type:"marketplace_disclaimer",data:"",onSave:()=>{nf.set("seen-marketplace-disclaimer",!0)}})})()},[]),r?f.jsxs("div",{children:[f.jsx(za,{title:"Marketplace"}),f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"flex flex-col items-center justify-center",children:f.jsxs("div",{className:'bg-brand-700 rounded-lg p-8 text-center w-full md:w-10/12 h-40 bg-[url("/marketplace.png")] bg-cover bg-no-repeat bg-top',children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Welcome to the Marketplace!"}),f.jsx("p",{className:"text-neutral-100",children:"Explore and discover new systems and datapacks."})]})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Featured Systems"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:e.map((i,o)=>f.jsx(Oce,{item:i},o))})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Featured Themes"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"})]})]}),n&&f.jsx(Za,{onClick:()=>dn({type:"PublishItem",title:"none",data:"none",onSave:RG})})]}):f.jsxs("div",{className:"h-full",children:[f.jsx(za,{title:"Marketplace"}),f.jsx("div",{className:"flex justify-center items-center p-4",children:f.jsx("h2",{className:"text-3xl",children:"Marketplace is not available while you're offline!"})})]})};window.trySync=lS;window.updateFromAuth=async()=>{const{user:e}=pr.get(),t=e?e.id:"none",n=await Er.get("deviceId")||"";await vE(t,n)};D5();const Mce=()=>(k.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh","".concat(t,"px"))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),f.jsx(r6,{children:f.jsx(PB,{children:f.jsxs(Gi,{path:"/",element:f.jsx(vJ,{}),children:[f.jsx(Gi,{index:!0,element:f.jsx(_J,{})}),f.jsxs(Gi,{path:"characters",children:[f.jsx(Gi,{index:!0,element:f.jsx(Ale,{})}),f.jsx(Gi,{path:":id",element:f.jsx(due,{})})]}),f.jsx(Gi,{path:"marketplace",element:f.jsx($ce,{})}),f.jsxs(Gi,{path:"library",children:[f.jsx(Gi,{index:!0,element:f.jsx(xue,{})}),f.jsx(Gi,{path:"system/:id",element:f.jsx(ece,{})})]}),f.jsx(Gi,{path:"settings",element:f.jsx(dce,{})}),f.jsx(Gi,{path:"subscription-confirmation",element:f.jsx(Tce,{})})]})})})),Dce={api_host:void 0},Lce=document.getElementById("root"),Bce=fI(Lce);Bce.render(f.jsx($t.StrictMode,{children:f.jsx(xle,{apiKey:"",options:Dce,children:f.jsx(Mce,{})})}));export{p3 as W,zce as __vite_legacy_guard};
