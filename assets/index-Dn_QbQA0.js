var g$=Object.defineProperty;var m$=(e,t,n)=>t in e?g$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ko=(e,t,n)=>m$(e,typeof t!="symbol"?t+"":t,n);function Zue(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function y$(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ri=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ta(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function v$(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var BN={exports:{}},Km={},zN={exports:{}},Xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch=Symbol.for("react.element"),x$=Symbol.for("react.portal"),b$=Symbol.for("react.fragment"),w$=Symbol.for("react.strict_mode"),_$=Symbol.for("react.profiler"),S$=Symbol.for("react.provider"),E$=Symbol.for("react.context"),k$=Symbol.for("react.forward_ref"),C$=Symbol.for("react.suspense"),j$=Symbol.for("react.memo"),A$=Symbol.for("react.lazy"),dE=Symbol.iterator;function N$(e){return e===null||typeof e!="object"?null:(e=dE&&e[dE]||e["@@iterator"],typeof e=="function"?e:null)}var HN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WN=Object.assign,UN={};function Tc(e,t,n){this.props=e,this.context=t,this.refs=UN,this.updater=n||HN}Tc.prototype.isReactComponent={};Tc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function VN(){}VN.prototype=Tc.prototype;function h_(e,t,n){this.props=e,this.context=t,this.refs=UN,this.updater=n||HN}var p_=h_.prototype=new VN;p_.constructor=h_;WN(p_,Tc.prototype);p_.isPureReactComponent=!0;var fE=Array.isArray,qN=Object.prototype.hasOwnProperty,g_={current:null},KN={key:!0,ref:!0,__self:!0,__source:!0};function GN(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)qN.call(t,r)&&!KN.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ch,type:e,key:o,ref:s,props:i,_owner:g_.current}}function R$(e,t){return{$$typeof:ch,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function m_(e){return typeof e=="object"&&e!==null&&e.$$typeof===ch}function T$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var hE=/\/+/g;function Bv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?T$(""+e.key):t.toString(36)}function Up(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ch:case x$:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Bv(s,0):r,fE(i)?(n="",e!=null&&(n=e.replace(hE,"$&/")+"/"),Up(i,t,n,"",function(u){return u})):i!=null&&(m_(i)&&(i=R$(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(hE,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",fE(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+Bv(o,a);s+=Up(o,t,n,l,i)}else if(l=N$(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+Bv(o,a++),s+=Up(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Xh(e,t,n){if(e==null)return e;var r=[],i=0;return Up(e,r,"","",function(o){return t.call(n,o,i++)}),r}function I$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ni={current:null},Vp={transition:null},P$={ReactCurrentDispatcher:ni,ReactCurrentBatchConfig:Vp,ReactCurrentOwner:g_};function YN(){throw Error("act(...) is not supported in production builds of React.")}Xt.Children={map:Xh,forEach:function(e,t,n){Xh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xh(e,function(){t++}),t},toArray:function(e){return Xh(e,function(t){return t})||[]},only:function(e){if(!m_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xt.Component=Tc;Xt.Fragment=b$;Xt.Profiler=_$;Xt.PureComponent=h_;Xt.StrictMode=w$;Xt.Suspense=C$;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P$;Xt.act=YN;Xt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=WN({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=g_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)qN.call(t,l)&&!KN.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ch,type:e.type,key:i,ref:o,props:r,_owner:s}};Xt.createContext=function(e){return e={$$typeof:E$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:S$,_context:e},e.Consumer=e};Xt.createElement=GN;Xt.createFactory=function(e){var t=GN.bind(null,e);return t.type=e,t};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(e){return{$$typeof:k$,render:e}};Xt.isValidElement=m_;Xt.lazy=function(e){return{$$typeof:A$,_payload:{_status:-1,_result:e},_init:I$}};Xt.memo=function(e,t){return{$$typeof:j$,type:e,compare:t===void 0?null:t}};Xt.startTransition=function(e){var t=Vp.transition;Vp.transition={};try{e()}finally{Vp.transition=t}};Xt.unstable_act=YN;Xt.useCallback=function(e,t){return ni.current.useCallback(e,t)};Xt.useContext=function(e){return ni.current.useContext(e)};Xt.useDebugValue=function(){};Xt.useDeferredValue=function(e){return ni.current.useDeferredValue(e)};Xt.useEffect=function(e,t){return ni.current.useEffect(e,t)};Xt.useId=function(){return ni.current.useId()};Xt.useImperativeHandle=function(e,t,n){return ni.current.useImperativeHandle(e,t,n)};Xt.useInsertionEffect=function(e,t){return ni.current.useInsertionEffect(e,t)};Xt.useLayoutEffect=function(e,t){return ni.current.useLayoutEffect(e,t)};Xt.useMemo=function(e,t){return ni.current.useMemo(e,t)};Xt.useReducer=function(e,t,n){return ni.current.useReducer(e,t,n)};Xt.useRef=function(e){return ni.current.useRef(e)};Xt.useState=function(e){return ni.current.useState(e)};Xt.useSyncExternalStore=function(e,t,n){return ni.current.useSyncExternalStore(e,t,n)};Xt.useTransition=function(){return ni.current.useTransition()};Xt.version="18.3.1";zN.exports=Xt;var j=zN.exports;const Tt=ta(j),XN=y$({__proto__:null,default:Tt},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O$=j,$$=Symbol.for("react.element"),M$=Symbol.for("react.fragment"),D$=Object.prototype.hasOwnProperty,L$=O$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F$={key:!0,ref:!0,__self:!0,__source:!0};function JN(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)D$.call(t,r)&&!F$.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:$$,type:e,key:o,ref:s,props:i,_owner:L$.current}}Km.Fragment=M$;Km.jsx=JN;Km.jsxs=JN;BN.exports=Km;var c=BN.exports,QN={exports:{}},zi={},ZN={exports:{}},eR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,H){var $=B.length;B.push(H);e:for(;0<$;){var Y=$-1>>>1,se=B[Y];if(0<i(se,H))B[Y]=H,B[$]=se,$=Y;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],$=B.pop();if($!==H){B[0]=$;e:for(var Y=0,se=B.length,ue=se>>>1;Y<ue;){var Ce=2*(Y+1)-1,Ne=B[Ce],Te=Ce+1,U=B[Te];if(0>i(Ne,$))Te<se&&0>i(U,Ne)?(B[Y]=U,B[Te]=$,Y=Te):(B[Y]=Ne,B[Ce]=$,Y=Ce);else if(Te<se&&0>i(U,$))B[Y]=U,B[Te]=$,Y=Te;else break e}}return H}function i(B,H){var $=B.sortIndex-H.sortIndex;return $!==0?$:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,f=null,h=3,p=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(B){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=B)r(u),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(u)}}function S(B){if(y=!1,m(B),!v)if(n(l)!==null)v=!0,G(E);else{var H=n(u);H!==null&&te(S,H.startTime-B)}}function E(B,H){v=!1,y&&(y=!1,x(I),I=-1),p=!0;var $=h;try{for(m(H),f=n(l);f!==null&&(!(f.expirationTime>H)||B&&!M());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,h=f.priorityLevel;var se=Y(f.expirationTime<=H);H=e.unstable_now(),typeof se=="function"?f.callback=se:f===n(l)&&r(l),m(H)}else r(l);f=n(l)}if(f!==null)var ue=!0;else{var Ce=n(u);Ce!==null&&te(S,Ce.startTime-H),ue=!1}return ue}finally{f=null,h=$,p=!1}}var k=!1,N=null,I=-1,z=5,O=-1;function M(){return!(e.unstable_now()-O<z)}function K(){if(N!==null){var B=e.unstable_now();O=B;var H=!0;try{H=N(!0,B)}finally{H?D():(k=!1,N=null)}}else k=!1}var D;if(typeof b=="function")D=function(){b(K)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,q=L.port2;L.port1.onmessage=K,D=function(){q.postMessage(null)}}else D=function(){w(K,0)};function G(B){N=B,k||(k=!0,D())}function te(B,H){I=w(function(){B(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,G(E))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(B){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var $=h;h=H;try{return B()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=h;h=B;try{return H()}finally{h=$}},e.unstable_scheduleCallback=function(B,H,$){var Y=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Y+$:Y):$=Y,B){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=$+se,B={id:d++,callback:H,priorityLevel:B,startTime:$,expirationTime:se,sortIndex:-1},$>Y?(B.sortIndex=$,t(u,B),n(l)===null&&B===n(u)&&(y?(x(I),I=-1):y=!0,te(S,$-Y))):(B.sortIndex=se,t(l,B),v||p||(v=!0,G(E))),B},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(B){var H=h;return function(){var $=h;h=H;try{return B.apply(this,arguments)}finally{h=$}}}})(eR);ZN.exports=eR;var B$=ZN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z$=j,Mi=B$;function nt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tR=new Set,lf={};function Zl(e,t){tc(e,t),tc(e+"Capture",t)}function tc(e,t){for(lf[e]=t,e=0;e<t.length;e++)tR.add(t[e])}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lx=Object.prototype.hasOwnProperty,H$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pE={},gE={};function W$(e){return Lx.call(gE,e)?!0:Lx.call(pE,e)?!1:H$.test(e)?gE[e]=!0:(pE[e]=!0,!1)}function U$(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V$(e,t,n,r){if(t===null||typeof t>"u"||U$(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ri(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Sr[e]=new ri(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Sr[t]=new ri(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Sr[e]=new ri(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Sr[e]=new ri(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Sr[e]=new ri(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Sr[e]=new ri(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Sr[e]=new ri(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Sr[e]=new ri(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Sr[e]=new ri(e,5,!1,e.toLowerCase(),null,!1,!1)});var y_=/[\-:]([a-z])/g;function v_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y_,v_);Sr[t]=new ri(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y_,v_);Sr[t]=new ri(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y_,v_);Sr[t]=new ri(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Sr[e]=new ri(e,1,!1,e.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Sr[e]=new ri(e,1,!1,e.toLowerCase(),null,!0,!0)});function x_(e,t,n,r){var i=Sr.hasOwnProperty(t)?Sr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(V$(t,n,i,r)&&(n=null),r||i===null?W$(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var na=z$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jh=Symbol.for("react.element"),Eu=Symbol.for("react.portal"),ku=Symbol.for("react.fragment"),b_=Symbol.for("react.strict_mode"),Fx=Symbol.for("react.profiler"),nR=Symbol.for("react.provider"),rR=Symbol.for("react.context"),w_=Symbol.for("react.forward_ref"),Bx=Symbol.for("react.suspense"),zx=Symbol.for("react.suspense_list"),__=Symbol.for("react.memo"),ya=Symbol.for("react.lazy"),iR=Symbol.for("react.offscreen"),mE=Symbol.iterator;function od(e){return e===null||typeof e!="object"?null:(e=mE&&e[mE]||e["@@iterator"],typeof e=="function"?e:null)}var $n=Object.assign,zv;function Cd(e){if(zv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zv=t&&t[1]||""}return"\n"+zv+e}var Hv=!1;function Wv(e,t){if(!e||Hv)return"";Hv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{Hv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Cd(e):""}function q$(e){switch(e.tag){case 5:return Cd(e.type);case 16:return Cd("Lazy");case 13:return Cd("Suspense");case 19:return Cd("SuspenseList");case 0:case 2:case 15:return e=Wv(e.type,!1),e;case 11:return e=Wv(e.type.render,!1),e;case 1:return e=Wv(e.type,!0),e;default:return""}}function Hx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ku:return"Fragment";case Eu:return"Portal";case Fx:return"Profiler";case b_:return"StrictMode";case Bx:return"Suspense";case zx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rR:return(e.displayName||"Context")+".Consumer";case nR:return(e._context.displayName||"Context")+".Provider";case w_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case __:return t=e.displayName||null,t!==null?t:Hx(e.type)||"Memo";case ya:t=e._payload,e=e._init;try{return Hx(e(t))}catch(n){}}return null}function K$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hx(t);case 8:return t===b_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ba(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function G$(e){var t=oR(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qh(e){e._valueTracker||(e._valueTracker=G$(e))}function sR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=oR(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Wx(e,t){var n=t.checked;return $n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function yE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ba(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aR(e,t){t=t.checked,t!=null&&x_(e,"checked",t,!1)}function Ux(e,t){aR(e,t);var n=Ba(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vx(e,t.type,n):t.hasOwnProperty("defaultValue")&&Vx(e,t.type,Ba(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Vx(e,t,n){(t!=="number"||yg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var jd=Array.isArray;function Hu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ba(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function qx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(nt(91));return $n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(nt(92));if(jd(n)){if(1<n.length)throw Error(nt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ba(n)}}function lR(e,t){var n=Ba(t.value),r=Ba(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function bE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zh,cR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zh=Zh||document.createElement("div"),Zh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ud={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y$=["Webkit","ms","Moz","O"];Object.keys(Ud).forEach(function(e){Y$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ud[t]=Ud[e]})});function dR(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ud.hasOwnProperty(e)&&Ud[e]?(""+t).trim():t+"px"}function fR(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=dR(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var X$=$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gx(e,t){if(t){if(X$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(nt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(nt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(nt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(nt(62))}}function Yx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xx=null;function S_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jx=null,Wu=null,Uu=null;function wE(e){if(e=hh(e)){if(typeof Jx!="function")throw Error(nt(280));var t=e.stateNode;t&&(t=Qm(t),Jx(e.stateNode,e.type,t))}}function hR(e){Wu?Uu?Uu.push(e):Uu=[e]:Wu=e}function pR(){if(Wu){var e=Wu,t=Uu;if(Uu=Wu=null,wE(e),t)for(e=0;e<t.length;e++)wE(t[e])}}function gR(e,t){return e(t)}function mR(){}var Uv=!1;function yR(e,t,n){if(Uv)return e(t,n);Uv=!0;try{return gR(e,t,n)}finally{Uv=!1,(Wu!==null||Uu!==null)&&(mR(),pR())}}function cf(e,t){var n=e.stateNode;if(n===null)return null;var r=Qm(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(nt(231,t,typeof n));return n}var Qx=!1;if(Us)try{var sd={};Object.defineProperty(sd,"passive",{get:function(){Qx=!0}}),window.addEventListener("test",sd,sd),window.removeEventListener("test",sd,sd)}catch(e){Qx=!1}function J$(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Vd=!1,vg=null,xg=!1,Zx=null,Q$={onError:function(e){Vd=!0,vg=e}};function Z$(e,t,n,r,i,o,s,a,l){Vd=!1,vg=null,J$.apply(Q$,arguments)}function eM(e,t,n,r,i,o,s,a,l){if(Z$.apply(this,arguments),Vd){if(Vd){var u=vg;Vd=!1,vg=null}else throw Error(nt(198));xg||(xg=!0,Zx=u)}}function eu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _E(e){if(eu(e)!==e)throw Error(nt(188))}function tM(e){var t=e.alternate;if(!t){if(t=eu(e),t===null)throw Error(nt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return _E(i),e;if(o===r)return _E(i),t;o=o.sibling}throw Error(nt(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(nt(189))}}if(n.alternate!==r)throw Error(nt(190))}if(n.tag!==3)throw Error(nt(188));return n.stateNode.current===n?e:t}function xR(e){return e=tM(e),e!==null?bR(e):null}function bR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bR(e);if(t!==null)return t;e=e.sibling}return null}var wR=Mi.unstable_scheduleCallback,SE=Mi.unstable_cancelCallback,nM=Mi.unstable_shouldYield,rM=Mi.unstable_requestPaint,Gn=Mi.unstable_now,iM=Mi.unstable_getCurrentPriorityLevel,E_=Mi.unstable_ImmediatePriority,_R=Mi.unstable_UserBlockingPriority,bg=Mi.unstable_NormalPriority,oM=Mi.unstable_LowPriority,SR=Mi.unstable_IdlePriority,Gm=null,es=null;function sM(e){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Gm,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Eo=Math.clz32?Math.clz32:uM,aM=Math.log,lM=Math.LN2;function uM(e){return e>>>=0,e===0?32:31-(aM(e)/lM|0)|0}var ep=64,tp=4194304;function Ad(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Ad(a):(o&=s,o!==0&&(r=Ad(o)))}else s=n&~i,s!==0?r=Ad(s):o!==0&&(r=Ad(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Eo(t),i=1<<n,r|=e[n],t&=~i;return r}function cM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dM(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Eo(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=cM(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function eb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ER(){var e=ep;return ep<<=1,!(ep&4194240)&&(ep=64),e}function Vv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Eo(t),e[t]=n}function fM(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Eo(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function k_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Eo(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var fn=0;function kR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CR,C_,jR,AR,NR,tb=!1,np=[],ja=null,Aa=null,Na=null,df=new Map,ff=new Map,wa=[],hM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EE(e,t){switch(e){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":df.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ff.delete(t.pointerId)}}function ad(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=hh(t),t!==null&&C_(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pM(e,t,n,r,i){switch(t){case"focusin":return ja=ad(ja,e,t,n,r,i),!0;case"dragenter":return Aa=ad(Aa,e,t,n,r,i),!0;case"mouseover":return Na=ad(Na,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return df.set(o,ad(df.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ff.set(o,ad(ff.get(o)||null,e,t,n,r,i)),!0}return!1}function RR(e){var t=bl(e.target);if(t!==null){var n=eu(t);if(n!==null){if(t=n.tag,t===13){if(t=vR(n),t!==null){e.blockedOn=t,NR(e.priority,function(){jR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xx=r,n.target.dispatchEvent(r),Xx=null}else return t=hh(n),t!==null&&C_(t),e.blockedOn=n,!1;t.shift()}return!0}function kE(e,t,n){qp(e)&&n.delete(t)}function gM(){tb=!1,ja!==null&&qp(ja)&&(ja=null),Aa!==null&&qp(Aa)&&(Aa=null),Na!==null&&qp(Na)&&(Na=null),df.forEach(kE),ff.forEach(kE)}function ld(e,t){e.blockedOn===t&&(e.blockedOn=null,tb||(tb=!0,Mi.unstable_scheduleCallback(Mi.unstable_NormalPriority,gM)))}function hf(e){function t(i){return ld(i,e)}if(0<np.length){ld(np[0],e);for(var n=1;n<np.length;n++){var r=np[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ja!==null&&ld(ja,e),Aa!==null&&ld(Aa,e),Na!==null&&ld(Na,e),df.forEach(t),ff.forEach(t),n=0;n<wa.length;n++)r=wa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<wa.length&&(n=wa[0],n.blockedOn===null);)RR(n),n.blockedOn===null&&wa.shift()}var Vu=na.ReactCurrentBatchConfig,_g=!0;function mM(e,t,n,r){var i=fn,o=Vu.transition;Vu.transition=null;try{fn=1,j_(e,t,n,r)}finally{fn=i,Vu.transition=o}}function yM(e,t,n,r){var i=fn,o=Vu.transition;Vu.transition=null;try{fn=4,j_(e,t,n,r)}finally{fn=i,Vu.transition=o}}function j_(e,t,n,r){if(_g){var i=nb(e,t,n,r);if(i===null)t0(e,t,r,Sg,n),EE(e,r);else if(pM(i,e,t,n,r))r.stopPropagation();else if(EE(e,r),t&4&&-1<hM.indexOf(e)){for(;i!==null;){var o=hh(i);if(o!==null&&CR(o),o=nb(e,t,n,r),o===null&&t0(e,t,r,Sg,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else t0(e,t,r,null,n)}}var Sg=null;function nb(e,t,n,r){if(Sg=null,e=S_(r),e=bl(e),e!==null)if(t=eu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vR(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sg=e,null}function TR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iM()){case E_:return 1;case _R:return 4;case bg:case oM:return 16;case SR:return 536870912;default:return 16}default:return 16}}var Ea=null,A_=null,Kp=null;function IR(){if(Kp)return Kp;var e,t=A_,n=t.length,r,i="value"in Ea?Ea.value:Ea.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Kp=i.slice(e,1<r?1-r:void 0)}function Gp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rp(){return!0}function CE(){return!1}function Hi(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?rp:CE,this.isPropagationStopped=CE,this}return $n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rp)},persist:function(){},isPersistent:rp}),t}var Ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N_=Hi(Ic),fh=$n({},Ic,{view:0,detail:0}),vM=Hi(fh),qv,Kv,ud,Ym=$n({},fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ud&&(ud&&e.type==="mousemove"?(qv=e.screenX-ud.screenX,Kv=e.screenY-ud.screenY):Kv=qv=0,ud=e),qv)},movementY:function(e){return"movementY"in e?e.movementY:Kv}}),jE=Hi(Ym),xM=$n({},Ym,{dataTransfer:0}),bM=Hi(xM),wM=$n({},fh,{relatedTarget:0}),Gv=Hi(wM),_M=$n({},Ic,{animationName:0,elapsedTime:0,pseudoElement:0}),SM=Hi(_M),EM=$n({},Ic,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kM=Hi(EM),CM=$n({},Ic,{data:0}),AE=Hi(CM),jM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=NM[e])?!!t[e]:!1}function R_(){return RM}var TM=$n({},fh,{key:function(e){if(e.key){var t=jM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R_,charCode:function(e){return e.type==="keypress"?Gp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),IM=Hi(TM),PM=$n({},Ym,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NE=Hi(PM),OM=$n({},fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R_}),$M=Hi(OM),MM=$n({},Ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),DM=Hi(MM),LM=$n({},Ym,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),FM=Hi(LM),BM=[9,13,27,32],T_=Us&&"CompositionEvent"in window,qd=null;Us&&"documentMode"in document&&(qd=document.documentMode);var zM=Us&&"TextEvent"in window&&!qd,PR=Us&&(!T_||qd&&8<qd&&11>=qd),RE=" ",TE=!1;function OR(e,t){switch(e){case"keyup":return BM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $R(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cu=!1;function HM(e,t){switch(e){case"compositionend":return $R(t);case"keypress":return t.which!==32?null:(TE=!0,RE);case"textInput":return e=t.data,e===RE&&TE?null:e;default:return null}}function WM(e,t){if(Cu)return e==="compositionend"||!T_&&OR(e,t)?(e=IR(),Kp=A_=Ea=null,Cu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PR&&t.locale!=="ko"?null:t.data;default:return null}}var UM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UM[e.type]:t==="textarea"}function MR(e,t,n,r){hR(r),t=Eg(t,"onChange"),0<t.length&&(n=new N_("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kd=null,pf=null;function VM(e){KR(e,0)}function Xm(e){var t=Nu(e);if(sR(t))return e}function qM(e,t){if(e==="change")return t}var DR=!1;if(Us){var Yv;if(Us){var Xv="oninput"in document;if(!Xv){var PE=document.createElement("div");PE.setAttribute("oninput","return;"),Xv=typeof PE.oninput=="function"}Yv=Xv}else Yv=!1;DR=Yv&&(!document.documentMode||9<document.documentMode)}function OE(){Kd&&(Kd.detachEvent("onpropertychange",LR),pf=Kd=null)}function LR(e){if(e.propertyName==="value"&&Xm(pf)){var t=[];MR(t,pf,e,S_(e)),yR(VM,t)}}function KM(e,t,n){e==="focusin"?(OE(),Kd=t,pf=n,Kd.attachEvent("onpropertychange",LR)):e==="focusout"&&OE()}function GM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xm(pf)}function YM(e,t){if(e==="click")return Xm(t)}function XM(e,t){if(e==="input"||e==="change")return Xm(t)}function JM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ao=typeof Object.is=="function"?Object.is:JM;function gf(e,t){if(Ao(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lx.call(t,i)||!Ao(e[i],t[i]))return!1}return!0}function $E(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ME(e,t){var n=$E(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$E(n)}}function FR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?FR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BR(){for(var e=window,t=yg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=yg(e.document)}return t}function I_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function QM(e){var t=BR(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&FR(n.ownerDocument.documentElement,n)){if(r!==null&&I_(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ME(n,o);var s=ME(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZM=Us&&"documentMode"in document&&11>=document.documentMode,ju=null,rb=null,Gd=null,ib=!1;function DE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ib||ju==null||ju!==yg(r)||(r=ju,"selectionStart"in r&&I_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gd&&gf(Gd,r)||(Gd=r,r=Eg(rb,"onSelect"),0<r.length&&(t=new N_("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ju)))}function ip(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Au={animationend:ip("Animation","AnimationEnd"),animationiteration:ip("Animation","AnimationIteration"),animationstart:ip("Animation","AnimationStart"),transitionend:ip("Transition","TransitionEnd")},Jv={},zR={};Us&&(zR=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function Jm(e){if(Jv[e])return Jv[e];if(!Au[e])return e;var t=Au[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zR)return Jv[e]=t[n];return e}var HR=Jm("animationend"),WR=Jm("animationiteration"),UR=Jm("animationstart"),VR=Jm("transitionend"),qR=new Map,LE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(e,t){qR.set(e,t),Zl(t,[e])}for(var Qv=0;Qv<LE.length;Qv++){var Zv=LE[Qv],eD=Zv.toLowerCase(),tD=Zv[0].toUpperCase()+Zv.slice(1);Xa(eD,"on"+tD)}Xa(HR,"onAnimationEnd");Xa(WR,"onAnimationIteration");Xa(UR,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(VR,"onTransitionEnd");tc("onMouseEnter",["mouseout","mouseover"]);tc("onMouseLeave",["mouseout","mouseover"]);tc("onPointerEnter",["pointerout","pointerover"]);tc("onPointerLeave",["pointerout","pointerover"]);Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function FE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,eM(r,t,void 0,e),e.currentTarget=null}function KR(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;FE(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;FE(i,a,u),o=l}}}if(xg)throw e=Zx,xg=!1,Zx=null,e}function wn(e,t){var n=t[ub];n===void 0&&(n=t[ub]=new Set);var r=e+"__bubble";n.has(r)||(GR(t,e,2,!1),n.add(r))}function e0(e,t,n){var r=0;t&&(r|=4),GR(n,e,r,t)}var op="_reactListening"+Math.random().toString(36).slice(2);function mf(e){if(!e[op]){e[op]=!0,tR.forEach(function(n){n!=="selectionchange"&&(nD.has(n)||e0(n,!1,e),e0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[op]||(t[op]=!0,e0("selectionchange",!1,t))}}function GR(e,t,n,r){switch(TR(t)){case 1:var i=mM;break;case 4:i=yM;break;default:i=j_}n=i.bind(null,t,n,e),i=void 0,!Qx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function t0(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=bl(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}yR(function(){var u=o,d=S_(n),f=[];e:{var h=qR.get(e);if(h!==void 0){var p=N_,v=e;switch(e){case"keypress":if(Gp(n)===0)break e;case"keydown":case"keyup":p=IM;break;case"focusin":v="focus",p=Gv;break;case"focusout":v="blur",p=Gv;break;case"beforeblur":case"afterblur":p=Gv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=jE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$M;break;case HR:case WR:case UR:p=SM;break;case VR:p=DM;break;case"scroll":p=vM;break;case"wheel":p=FM;break;case"copy":case"cut":case"paste":p=kM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=NE}var y=(t&4)!==0,w=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var b=u,m;b!==null;){m=b;var S=m.stateNode;if(m.tag===5&&S!==null&&(m=S,x!==null&&(S=cf(b,x),S!=null&&y.push(yf(b,S,m)))),w)break;b=b.return}0<y.length&&(h=new p(h,v,null,n,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Xx&&(v=n.relatedTarget||n.fromElement)&&(bl(v)||v[Vs]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=u,v=v?bl(v):null,v!==null&&(w=eu(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(y=jE,S="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=NE,S="onPointerLeave",x="onPointerEnter",b="pointer"),w=p==null?h:Nu(p),m=v==null?h:Nu(v),h=new y(S,b+"leave",p,n,d),h.target=w,h.relatedTarget=m,S=null,bl(d)===u&&(y=new y(x,b+"enter",v,n,d),y.target=m,y.relatedTarget=w,S=y),w=S,p&&v)t:{for(y=p,x=v,b=0,m=y;m;m=pu(m))b++;for(m=0,S=x;S;S=pu(S))m++;for(;0<b-m;)y=pu(y),b--;for(;0<m-b;)x=pu(x),m--;for(;b--;){if(y===x||x!==null&&y===x.alternate)break t;y=pu(y),x=pu(x)}y=null}else y=null;p!==null&&BE(f,h,p,y,!1),v!==null&&w!==null&&BE(f,w,v,y,!0)}}e:{if(h=u?Nu(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var E=qM;else if(IE(h))if(DR)E=XM;else{E=GM;var k=KM}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=YM);if(E&&(E=E(e,u))){MR(f,E,n,d);break e}k&&k(e,h,u),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Vx(h,"number",h.value)}switch(k=u?Nu(u):window,e){case"focusin":(IE(k)||k.contentEditable==="true")&&(ju=k,rb=u,Gd=null);break;case"focusout":Gd=rb=ju=null;break;case"mousedown":ib=!0;break;case"contextmenu":case"mouseup":case"dragend":ib=!1,DE(f,n,d);break;case"selectionchange":if(ZM)break;case"keydown":case"keyup":DE(f,n,d)}var N;if(T_)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Cu?OR(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(PR&&n.locale!=="ko"&&(Cu||I!=="onCompositionStart"?I==="onCompositionEnd"&&Cu&&(N=IR()):(Ea=d,A_="value"in Ea?Ea.value:Ea.textContent,Cu=!0)),k=Eg(u,I),0<k.length&&(I=new AE(I,e,null,n,d),f.push({event:I,listeners:k}),N?I.data=N:(N=$R(n),N!==null&&(I.data=N)))),(N=zM?HM(e,n):WM(e,n))&&(u=Eg(u,"onBeforeInput"),0<u.length&&(d=new AE("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=N))}KR(f,t)})}function yf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Eg(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=cf(e,n),o!=null&&r.unshift(yf(e,o,i)),o=cf(e,t),o!=null&&r.push(yf(e,o,i))),e=e.return}return r}function pu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function BE(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=cf(n,o),l!=null&&s.unshift(yf(n,l,a))):i||(l=cf(n,o),l!=null&&s.push(yf(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var rD=/\r\n?/g,iD=/\u0000|\uFFFD/g;function zE(e){return(typeof e=="string"?e:""+e).replace(rD,"\n").replace(iD,"")}function sp(e,t,n){if(t=zE(t),zE(e)!==t&&n)throw Error(nt(425))}function kg(){}var ob=null,sb=null;function ab(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lb=typeof setTimeout=="function"?setTimeout:void 0,oD=typeof clearTimeout=="function"?clearTimeout:void 0,HE=typeof Promise=="function"?Promise:void 0,sD=typeof queueMicrotask=="function"?queueMicrotask:typeof HE<"u"?function(e){return HE.resolve(null).then(e).catch(aD)}:lb;function aD(e){setTimeout(function(){throw e})}function n0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),hf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);hf(t)}function Ra(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function WE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pc=Math.random().toString(36).slice(2),Qo="__reactFiber$"+Pc,vf="__reactProps$"+Pc,Vs="__reactContainer$"+Pc,ub="__reactEvents$"+Pc,lD="__reactListeners$"+Pc,uD="__reactHandles$"+Pc;function bl(e){var t=e[Qo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vs]||n[Qo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=WE(e);e!==null;){if(n=e[Qo])return n;e=WE(e)}return t}e=n,n=e.parentNode}return null}function hh(e){return e=e[Qo]||e[Vs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(nt(33))}function Qm(e){return e[vf]||null}var cb=[],Ru=-1;function Ja(e){return{current:e}}function kn(e){0>Ru||(e.current=cb[Ru],cb[Ru]=null,Ru--)}function bn(e,t){Ru++,cb[Ru]=e.current,e.current=t}var za={},Br=Ja(za),mi=Ja(!1),Pl=za;function nc(e,t){var n=e.type.contextTypes;if(!n)return za;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yi(e){return e=e.childContextTypes,e!=null}function Cg(){kn(mi),kn(Br)}function UE(e,t,n){if(Br.current!==za)throw Error(nt(168));bn(Br,t),bn(mi,n)}function YR(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(nt(108,K$(e)||"Unknown",i));return $n({},n,r)}function jg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||za,Pl=Br.current,bn(Br,e),bn(mi,mi.current),!0}function VE(e,t,n){var r=e.stateNode;if(!r)throw Error(nt(169));n?(e=YR(e,t,Pl),r.__reactInternalMemoizedMergedChildContext=e,kn(mi),kn(Br),bn(Br,e)):kn(mi),bn(mi,n)}var Ns=null,Zm=!1,r0=!1;function XR(e){Ns===null?Ns=[e]:Ns.push(e)}function cD(e){Zm=!0,XR(e)}function Qa(){if(!r0&&Ns!==null){r0=!0;var e=0,t=fn;try{var n=Ns;for(fn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ns=null,Zm=!1}catch(i){throw Ns!==null&&(Ns=Ns.slice(e+1)),wR(E_,Qa),i}finally{fn=t,r0=!1}}return null}var Tu=[],Iu=0,Ag=null,Ng=0,qi=[],Ki=0,Ol=null,Os=1,$s="";function hl(e,t){Tu[Iu++]=Ng,Tu[Iu++]=Ag,Ag=e,Ng=t}function JR(e,t,n){qi[Ki++]=Os,qi[Ki++]=$s,qi[Ki++]=Ol,Ol=e;var r=Os;e=$s;var i=32-Eo(r)-1;r&=~(1<<i),n+=1;var o=32-Eo(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Os=1<<32-Eo(t)+i|n<<i|r,$s=o+e}else Os=1<<o|n<<i|r,$s=e}function P_(e){e.return!==null&&(hl(e,1),JR(e,1,0))}function O_(e){for(;e===Ag;)Ag=Tu[--Iu],Tu[Iu]=null,Ng=Tu[--Iu],Tu[Iu]=null;for(;e===Ol;)Ol=qi[--Ki],qi[Ki]=null,$s=qi[--Ki],qi[Ki]=null,Os=qi[--Ki],qi[Ki]=null}var Pi=null,Ti=null,jn=!1,yo=null;function QR(e,t){var n=Yi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pi=e,Ti=Ra(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pi=e,Ti=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ol!==null?{id:Os,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pi=e,Ti=null,!0):!1;default:return!1}}function db(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fb(e){if(jn){var t=Ti;if(t){var n=t;if(!qE(e,t)){if(db(e))throw Error(nt(418));t=Ra(n.nextSibling);var r=Pi;t&&qE(e,t)?QR(r,n):(e.flags=e.flags&-4097|2,jn=!1,Pi=e)}}else{if(db(e))throw Error(nt(418));e.flags=e.flags&-4097|2,jn=!1,Pi=e}}}function KE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pi=e}function ap(e){if(e!==Pi)return!1;if(!jn)return KE(e),jn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ab(e.type,e.memoizedProps)),t&&(t=Ti)){if(db(e))throw ZR(),Error(nt(418));for(;t;)QR(e,t),t=Ra(t.nextSibling)}if(KE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(nt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ti=Ra(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ti=null}}else Ti=Pi?Ra(e.stateNode.nextSibling):null;return!0}function ZR(){for(var e=Ti;e;)e=Ra(e.nextSibling)}function rc(){Ti=Pi=null,jn=!1}function $_(e){yo===null?yo=[e]:yo.push(e)}var dD=na.ReactCurrentBatchConfig;function cd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(nt(309));var r=n.stateNode}if(!r)throw Error(nt(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(nt(284));if(!n._owner)throw Error(nt(290,e))}return e}function lp(e,t){throw e=Object.prototype.toString.call(t),Error(nt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function GE(e){var t=e._init;return t(e._payload)}function eT(e){function t(x,b){if(e){var m=x.deletions;m===null?(x.deletions=[b],x.flags|=16):m.push(b)}}function n(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function r(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function i(x,b){return x=Oa(x,b),x.index=0,x.sibling=null,x}function o(x,b,m){return x.index=m,e?(m=x.alternate,m!==null?(m=m.index,m<b?(x.flags|=2,b):m):(x.flags|=2,b)):(x.flags|=1048576,b)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,b,m,S){return b===null||b.tag!==6?(b=c0(m,x.mode,S),b.return=x,b):(b=i(b,m),b.return=x,b)}function l(x,b,m,S){var E=m.type;return E===ku?d(x,b,m.props.children,S,m.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ya&&GE(E)===b.type)?(S=i(b,m.props),S.ref=cd(x,b,m),S.return=x,S):(S=tg(m.type,m.key,m.props,null,x.mode,S),S.ref=cd(x,b,m),S.return=x,S)}function u(x,b,m,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==m.containerInfo||b.stateNode.implementation!==m.implementation?(b=d0(m,x.mode,S),b.return=x,b):(b=i(b,m.children||[]),b.return=x,b)}function d(x,b,m,S,E){return b===null||b.tag!==7?(b=Al(m,x.mode,S,E),b.return=x,b):(b=i(b,m),b.return=x,b)}function f(x,b,m){if(typeof b=="string"&&b!==""||typeof b=="number")return b=c0(""+b,x.mode,m),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jh:return m=tg(b.type,b.key,b.props,null,x.mode,m),m.ref=cd(x,null,b),m.return=x,m;case Eu:return b=d0(b,x.mode,m),b.return=x,b;case ya:var S=b._init;return f(x,S(b._payload),m)}if(jd(b)||od(b))return b=Al(b,x.mode,m,null),b.return=x,b;lp(x,b)}return null}function h(x,b,m,S){var E=b!==null?b.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return E!==null?null:a(x,b,""+m,S);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Jh:return m.key===E?l(x,b,m,S):null;case Eu:return m.key===E?u(x,b,m,S):null;case ya:return E=m._init,h(x,b,E(m._payload),S)}if(jd(m)||od(m))return E!==null?null:d(x,b,m,S,null);lp(x,m)}return null}function p(x,b,m,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(m)||null,a(b,x,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Jh:return x=x.get(S.key===null?m:S.key)||null,l(b,x,S,E);case Eu:return x=x.get(S.key===null?m:S.key)||null,u(b,x,S,E);case ya:var k=S._init;return p(x,b,m,k(S._payload),E)}if(jd(S)||od(S))return x=x.get(m)||null,d(b,x,S,E,null);lp(b,S)}return null}function v(x,b,m,S){for(var E=null,k=null,N=b,I=b=0,z=null;N!==null&&I<m.length;I++){N.index>I?(z=N,N=null):z=N.sibling;var O=h(x,N,m[I],S);if(O===null){N===null&&(N=z);break}e&&N&&O.alternate===null&&t(x,N),b=o(O,b,I),k===null?E=O:k.sibling=O,k=O,N=z}if(I===m.length)return n(x,N),jn&&hl(x,I),E;if(N===null){for(;I<m.length;I++)N=f(x,m[I],S),N!==null&&(b=o(N,b,I),k===null?E=N:k.sibling=N,k=N);return jn&&hl(x,I),E}for(N=r(x,N);I<m.length;I++)z=p(N,x,I,m[I],S),z!==null&&(e&&z.alternate!==null&&N.delete(z.key===null?I:z.key),b=o(z,b,I),k===null?E=z:k.sibling=z,k=z);return e&&N.forEach(function(M){return t(x,M)}),jn&&hl(x,I),E}function y(x,b,m,S){var E=od(m);if(typeof E!="function")throw Error(nt(150));if(m=E.call(m),m==null)throw Error(nt(151));for(var k=E=null,N=b,I=b=0,z=null,O=m.next();N!==null&&!O.done;I++,O=m.next()){N.index>I?(z=N,N=null):z=N.sibling;var M=h(x,N,O.value,S);if(M===null){N===null&&(N=z);break}e&&N&&M.alternate===null&&t(x,N),b=o(M,b,I),k===null?E=M:k.sibling=M,k=M,N=z}if(O.done)return n(x,N),jn&&hl(x,I),E;if(N===null){for(;!O.done;I++,O=m.next())O=f(x,O.value,S),O!==null&&(b=o(O,b,I),k===null?E=O:k.sibling=O,k=O);return jn&&hl(x,I),E}for(N=r(x,N);!O.done;I++,O=m.next())O=p(N,x,I,O.value,S),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?I:O.key),b=o(O,b,I),k===null?E=O:k.sibling=O,k=O);return e&&N.forEach(function(K){return t(x,K)}),jn&&hl(x,I),E}function w(x,b,m,S){if(typeof m=="object"&&m!==null&&m.type===ku&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Jh:e:{for(var E=m.key,k=b;k!==null;){if(k.key===E){if(E=m.type,E===ku){if(k.tag===7){n(x,k.sibling),b=i(k,m.props.children),b.return=x,x=b;break e}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ya&&GE(E)===k.type){n(x,k.sibling),b=i(k,m.props),b.ref=cd(x,k,m),b.return=x,x=b;break e}n(x,k);break}else t(x,k);k=k.sibling}m.type===ku?(b=Al(m.props.children,x.mode,S,m.key),b.return=x,x=b):(S=tg(m.type,m.key,m.props,null,x.mode,S),S.ref=cd(x,b,m),S.return=x,x=S)}return s(x);case Eu:e:{for(k=m.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===m.containerInfo&&b.stateNode.implementation===m.implementation){n(x,b.sibling),b=i(b,m.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else t(x,b);b=b.sibling}b=d0(m,x.mode,S),b.return=x,x=b}return s(x);case ya:return k=m._init,w(x,b,k(m._payload),S)}if(jd(m))return v(x,b,m,S);if(od(m))return y(x,b,m,S);lp(x,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,b!==null&&b.tag===6?(n(x,b.sibling),b=i(b,m),b.return=x,x=b):(n(x,b),b=c0(m,x.mode,S),b.return=x,x=b),s(x)):n(x,b)}return w}var ic=eT(!0),tT=eT(!1),Rg=Ja(null),Tg=null,Pu=null,M_=null;function D_(){M_=Pu=Tg=null}function L_(e){var t=Rg.current;kn(Rg),e._currentValue=t}function hb(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qu(e,t){Tg=e,M_=Pu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fi=!0),e.firstContext=null)}function to(e){var t=e._currentValue;if(M_!==e)if(e={context:e,memoizedValue:t,next:null},Pu===null){if(Tg===null)throw Error(nt(308));Pu=e,Tg.dependencies={lanes:0,firstContext:e}}else Pu=Pu.next=e;return t}var wl=null;function F_(e){wl===null?wl=[e]:wl.push(e)}function nT(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,F_(t)):(n.next=i.next,i.next=n),t.interleaved=n,qs(e,r)}function qs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var va=!1;function B_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,on&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qs(e,n)}return i=r.interleaved,i===null?(t.next=t,F_(r)):(t.next=i.next,i.next=t),r.interleaved=t,qs(e,n)}function Yp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,k_(e,n)}}function YE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ig(e,t,n,r){var i=e.updateQueue;va=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,d=u=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,y=a;switch(h=t,p=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=$n({},f,h);break e;case 2:va=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Ml|=s,e.lanes=s,e.memoizedState=f}}function XE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(nt(191,i));i.call(r)}}}var ph={},ts=Ja(ph),xf=Ja(ph),bf=Ja(ph);function _l(e){if(e===ph)throw Error(nt(174));return e}function z_(e,t){switch(bn(bf,t),bn(xf,e),bn(ts,ph),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kx(t,e)}kn(ts),bn(ts,t)}function oc(){kn(ts),kn(xf),kn(bf)}function iT(e){_l(bf.current);var t=_l(ts.current),n=Kx(t,e.type);t!==n&&(bn(xf,e),bn(ts,n))}function H_(e){xf.current===e&&(kn(ts),kn(xf))}var Rn=Ja(0);function Pg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var i0=[];function W_(){for(var e=0;e<i0.length;e++)i0[e]._workInProgressVersionPrimary=null;i0.length=0}var Xp=na.ReactCurrentDispatcher,o0=na.ReactCurrentBatchConfig,$l=0,In=null,ar=null,pr=null,Og=!1,Yd=!1,wf=0,fD=0;function Rr(){throw Error(nt(321))}function U_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ao(e[n],t[n]))return!1;return!0}function V_(e,t,n,r,i,o){if($l=o,In=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xp.current=e===null||e.memoizedState===null?mD:yD,e=n(r,i),Yd){o=0;do{if(Yd=!1,wf=0,25<=o)throw Error(nt(301));o+=1,pr=ar=null,t.updateQueue=null,Xp.current=vD,e=n(r,i)}while(Yd)}if(Xp.current=$g,t=ar!==null&&ar.next!==null,$l=0,pr=ar=In=null,Og=!1,t)throw Error(nt(300));return e}function q_(){var e=wf!==0;return wf=0,e}function Jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?In.memoizedState=pr=e:pr=pr.next=e,pr}function no(){if(ar===null){var e=In.alternate;e=e!==null?e.memoizedState:null}else e=ar.next;var t=pr===null?In.memoizedState:pr.next;if(t!==null)pr=t,ar=e;else{if(e===null)throw Error(nt(310));ar=e,e={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},pr===null?In.memoizedState=pr=e:pr=pr.next=e}return pr}function _f(e,t){return typeof t=="function"?t(e):t}function s0(e){var t=no(),n=t.queue;if(n===null)throw Error(nt(311));n.lastRenderedReducer=e;var r=ar,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var d=u.lane;if(($l&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,In.lanes|=d,Ml|=d}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Ao(r,t.memoizedState)||(fi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,In.lanes|=o,Ml|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function a0(e){var t=no(),n=t.queue;if(n===null)throw Error(nt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Ao(o,t.memoizedState)||(fi=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function oT(){}function sT(e,t){var n=In,r=no(),i=t(),o=!Ao(r.memoizedState,i);if(o&&(r.memoizedState=i,fi=!0),r=r.queue,K_(uT.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||pr!==null&&pr.memoizedState.tag&1){if(n.flags|=2048,Sf(9,lT.bind(null,n,r,i,t),void 0,null),gr===null)throw Error(nt(349));$l&30||aT(n,t,i)}return i}function aT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=In.updateQueue,t===null?(t={lastEffect:null,stores:null},In.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lT(e,t,n,r){t.value=n,t.getSnapshot=r,cT(t)&&dT(e)}function uT(e,t,n){return n(function(){cT(t)&&dT(e)})}function cT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ao(e,n)}catch(r){return!0}}function dT(e){var t=qs(e,1);t!==null&&ko(t,e,1,-1)}function JE(e){var t=Jo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_f,lastRenderedState:e},t.queue=e,e=e.dispatch=gD.bind(null,In,e),[t.memoizedState,e]}function Sf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=In.updateQueue,t===null?(t={lastEffect:null,stores:null},In.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fT(){return no().memoizedState}function Jp(e,t,n,r){var i=Jo();In.flags|=e,i.memoizedState=Sf(1|t,n,void 0,r===void 0?null:r)}function ey(e,t,n,r){var i=no();r=r===void 0?null:r;var o=void 0;if(ar!==null){var s=ar.memoizedState;if(o=s.destroy,r!==null&&U_(r,s.deps)){i.memoizedState=Sf(t,n,o,r);return}}In.flags|=e,i.memoizedState=Sf(1|t,n,o,r)}function QE(e,t){return Jp(8390656,8,e,t)}function K_(e,t){return ey(2048,8,e,t)}function hT(e,t){return ey(4,2,e,t)}function pT(e,t){return ey(4,4,e,t)}function gT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mT(e,t,n){return n=n!=null?n.concat([e]):null,ey(4,4,gT.bind(null,t,e),n)}function G_(){}function yT(e,t){var n=no();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&U_(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vT(e,t){var n=no();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&U_(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xT(e,t,n){return $l&21?(Ao(n,t)||(n=ER(),In.lanes|=n,Ml|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fi=!0),e.memoizedState=n)}function hD(e,t){var n=fn;fn=n!==0&&4>n?n:4,e(!0);var r=o0.transition;o0.transition={};try{e(!1),t()}finally{fn=n,o0.transition=r}}function bT(){return no().memoizedState}function pD(e,t,n){var r=Pa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wT(e))_T(t,n);else if(n=nT(e,t,n,r),n!==null){var i=Qr();ko(n,e,r,i),ST(n,t,r)}}function gD(e,t,n){var r=Pa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wT(e))_T(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Ao(a,s)){var l=t.interleaved;l===null?(i.next=i,F_(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch(u){}finally{}n=nT(e,t,i,r),n!==null&&(i=Qr(),ko(n,e,r,i),ST(n,t,r))}}function wT(e){var t=e.alternate;return e===In||t!==null&&t===In}function _T(e,t){Yd=Og=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ST(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,k_(e,n)}}var $g={readContext:to,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},mD={readContext:to,useCallback:function(e,t){return Jo().memoizedState=[e,t===void 0?null:t],e},useContext:to,useEffect:QE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jp(4194308,4,gT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jp(4,2,e,t)},useMemo:function(e,t){var n=Jo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Jo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pD.bind(null,In,e),[r.memoizedState,e]},useRef:function(e){var t=Jo();return e={current:e},t.memoizedState=e},useState:JE,useDebugValue:G_,useDeferredValue:function(e){return Jo().memoizedState=e},useTransition:function(){var e=JE(!1),t=e[0];return e=hD.bind(null,e[1]),Jo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=In,i=Jo();if(jn){if(n===void 0)throw Error(nt(407));n=n()}else{if(n=t(),gr===null)throw Error(nt(349));$l&30||aT(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,QE(uT.bind(null,r,o,e),[e]),r.flags|=2048,Sf(9,lT.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Jo(),t=gr.identifierPrefix;if(jn){var n=$s,r=Os;n=(r&~(1<<32-Eo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=wf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fD++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yD={readContext:to,useCallback:yT,useContext:to,useEffect:K_,useImperativeHandle:mT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:vT,useReducer:s0,useRef:fT,useState:function(){return s0(_f)},useDebugValue:G_,useDeferredValue:function(e){var t=no();return xT(t,ar.memoizedState,e)},useTransition:function(){var e=s0(_f)[0],t=no().memoizedState;return[e,t]},useMutableSource:oT,useSyncExternalStore:sT,useId:bT,unstable_isNewReconciler:!1},vD={readContext:to,useCallback:yT,useContext:to,useEffect:K_,useImperativeHandle:mT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:vT,useReducer:a0,useRef:fT,useState:function(){return a0(_f)},useDebugValue:G_,useDeferredValue:function(e){var t=no();return ar===null?t.memoizedState=e:xT(t,ar.memoizedState,e)},useTransition:function(){var e=a0(_f)[0],t=no().memoizedState;return[e,t]},useMutableSource:oT,useSyncExternalStore:sT,useId:bT,unstable_isNewReconciler:!1};function ho(e,t){if(e&&e.defaultProps){t=$n({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pb(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:$n({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ty={isMounted:function(e){return(e=e._reactInternals)?eu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qr(),i=Pa(e),o=Ls(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ta(e,o,i),t!==null&&(ko(t,e,i,r),Yp(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qr(),i=Pa(e),o=Ls(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ta(e,o,i),t!==null&&(ko(t,e,i,r),Yp(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qr(),r=Pa(e),i=Ls(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ta(e,i,r),t!==null&&(ko(t,e,r,n),Yp(t,e,r))}};function ZE(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!gf(n,r)||!gf(i,o):!0}function ET(e,t,n){var r=!1,i=za,o=t.contextType;return typeof o=="object"&&o!==null?o=to(o):(i=yi(t)?Pl:Br.current,r=t.contextTypes,o=(r=r!=null)?nc(e,i):za),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ty,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ek(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ty.enqueueReplaceState(t,t.state,null)}function gb(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},B_(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=to(o):(o=yi(t)?Pl:Br.current,i.context=nc(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(pb(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ty.enqueueReplaceState(i,i.state,null),Ig(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function sc(e,t){try{var n="",r=t;do n+=q$(r),r=r.return;while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function l0(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function mb(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xD=typeof WeakMap=="function"?WeakMap:Map;function kT(e,t,n){n=Ls(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dg||(Dg=!0,Cb=r),mb(e,t)},n}function CT(e,t,n){n=Ls(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){mb(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mb(e,t),typeof r!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function tk(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new xD;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=PD.bind(null,e,t,n),t.then(e,e))}function nk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rk(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ls(-1,1),t.tag=2,Ta(n,t,1))),n.lanes|=1),e)}var bD=na.ReactCurrentOwner,fi=!1;function Xr(e,t,n,r){t.child=e===null?tT(t,null,n,r):ic(t,e.child,n,r)}function ik(e,t,n,r,i){n=n.render;var o=t.ref;return qu(t,i),r=V_(e,t,n,r,o,i),n=q_(),e!==null&&!fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i)):(jn&&n&&P_(t),t.flags|=1,Xr(e,t,r,i),t.child)}function ok(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!n1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,jT(e,t,o,r,i)):(e=tg(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:gf,n(s,r)&&e.ref===t.ref)return Ks(e,t,i)}return t.flags|=1,e=Oa(o,r),e.ref=t.ref,e.return=t,t.child=e}function jT(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(gf(o,r)&&e.ref===t.ref)if(fi=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(fi=!0);else return t.lanes=e.lanes,Ks(e,t,i)}return yb(e,t,n,r,i)}function AT(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn($u,ki),ki|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bn($u,ki),ki|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,bn($u,ki),ki|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,bn($u,ki),ki|=r;return Xr(e,t,i,n),t.child}function NT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yb(e,t,n,r,i){var o=yi(n)?Pl:Br.current;return o=nc(t,o),qu(t,i),n=V_(e,t,n,r,o,i),r=q_(),e!==null&&!fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i)):(jn&&r&&P_(t),t.flags|=1,Xr(e,t,n,i),t.child)}function sk(e,t,n,r,i){if(yi(n)){var o=!0;jg(t)}else o=!1;if(qu(t,i),t.stateNode===null)Qp(e,t),ET(t,n,r),gb(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=to(u):(u=yi(n)?Pl:Br.current,u=nc(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ek(t,s,r,u),va=!1;var h=t.memoizedState;s.state=h,Ig(t,r,s,i),l=t.memoizedState,a!==r||h!==l||mi.current||va?(typeof d=="function"&&(pb(t,n,d,r),l=t.memoizedState),(a=va||ZE(t,n,a,r,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rT(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ho(t.type,a),s.props=u,f=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=to(l):(l=yi(n)?Pl:Br.current,l=nc(t,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==l)&&ek(t,s,r,l),va=!1,h=t.memoizedState,s.state=h,Ig(t,r,s,i);var v=t.memoizedState;a!==f||h!==v||mi.current||va?(typeof p=="function"&&(pb(t,n,p,r),v=t.memoizedState),(u=va||ZE(t,n,u,r,h,v,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return vb(e,t,n,r,o,i)}function vb(e,t,n,r,i,o){NT(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&VE(t,n,!1),Ks(e,t,o);r=t.stateNode,bD.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=ic(t,e.child,null,o),t.child=ic(t,null,a,o)):Xr(e,t,a,o),t.memoizedState=r.state,i&&VE(t,n,!0),t.child}function RT(e){var t=e.stateNode;t.pendingContext?UE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&UE(e,t.context,!1),z_(e,t.containerInfo)}function ak(e,t,n,r,i){return rc(),$_(i),t.flags|=256,Xr(e,t,n,r),t.child}var xb={dehydrated:null,treeContext:null,retryLane:0};function bb(e){return{baseLanes:e,cachePool:null,transitions:null}}function TT(e,t,n){var r=t.pendingProps,i=Rn.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),bn(Rn,i&1),e===null)return fb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=iy(s,r,0,null),e=Al(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=bb(n),t.memoizedState=xb,e):Y_(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wD(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Oa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Oa(a,o):(o=Al(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?bb(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=xb,r}return o=e.child,e=o.sibling,r=Oa(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Y_(e,t){return t=iy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function up(e,t,n,r){return r!==null&&$_(r),ic(t,e.child,null,n),e=Y_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wD(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=l0(Error(nt(422))),up(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=iy({mode:"visible",children:r.children},i,0,null),o=Al(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ic(t,e.child,null,s),t.child.memoizedState=bb(s),t.memoizedState=xb,o);if(!(t.mode&1))return up(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(nt(419)),r=l0(o,r,void 0),up(e,t,s,r)}if(a=(s&e.childLanes)!==0,fi||a){if(r=gr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,qs(e,i),ko(r,e,i,-1))}return t1(),r=l0(Error(nt(421))),up(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=OD.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ti=Ra(i.nextSibling),Pi=t,jn=!0,yo=null,e!==null&&(qi[Ki++]=Os,qi[Ki++]=$s,qi[Ki++]=Ol,Os=e.id,$s=e.overflow,Ol=t),t=Y_(t,r.children),t.flags|=4096,t)}function lk(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hb(e.return,t,n)}function u0(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function IT(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Xr(e,t,r.children,n),r=Rn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lk(e,n,t);else if(e.tag===19)lk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bn(Rn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Pg(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),u0(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Pg(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}u0(t,!0,n,null,o);break;case"together":u0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ml|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(nt(153));if(t.child!==null){for(e=t.child,n=Oa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Oa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _D(e,t,n){switch(t.tag){case 3:RT(t),rc();break;case 5:iT(t);break;case 1:yi(t.type)&&jg(t);break;case 4:z_(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;bn(Rg,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(bn(Rn,Rn.current&1),t.flags|=128,null):n&t.child.childLanes?TT(e,t,n):(bn(Rn,Rn.current&1),e=Ks(e,t,n),e!==null?e.sibling:null);bn(Rn,Rn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return IT(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bn(Rn,Rn.current),r)break;return null;case 22:case 23:return t.lanes=0,AT(e,t,n)}return Ks(e,t,n)}var PT,wb,OT,$T;PT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wb=function(){};OT=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,_l(ts.current);var o=null;switch(n){case"input":i=Wx(e,i),r=Wx(e,r),o=[];break;case"select":i=$n({},i,{value:void 0}),r=$n({},r,{value:void 0}),o=[];break;case"textarea":i=qx(e,i),r=qx(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=kg)}Gx(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(lf.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(lf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&wn("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};$T=function(e,t,n,r){n!==r&&(t.flags|=4)};function dd(e,t){if(!jn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Tr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function SD(e,t,n){var r=t.pendingProps;switch(O_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(t),null;case 1:return yi(t.type)&&Cg(),Tr(t),null;case 3:return r=t.stateNode,oc(),kn(mi),kn(Br),W_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ap(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yo!==null&&(Nb(yo),yo=null))),wb(e,t),Tr(t),null;case 5:H_(t);var i=_l(bf.current);if(n=t.type,e!==null&&t.stateNode!=null)OT(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(nt(166));return Tr(t),null}if(e=_l(ts.current),ap(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Qo]=t,r[vf]=o,e=(t.mode&1)!==0,n){case"dialog":wn("cancel",r),wn("close",r);break;case"iframe":case"object":case"embed":wn("load",r);break;case"video":case"audio":for(i=0;i<Nd.length;i++)wn(Nd[i],r);break;case"source":wn("error",r);break;case"img":case"image":case"link":wn("error",r),wn("load",r);break;case"details":wn("toggle",r);break;case"input":yE(r,o),wn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},wn("invalid",r);break;case"textarea":xE(r,o),wn("invalid",r)}Gx(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&sp(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&sp(r.textContent,a,e),i=["children",""+a]):lf.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&wn("scroll",r)}switch(n){case"input":Qh(r),vE(r,o,!0);break;case"textarea":Qh(r),bE(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=kg)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uR(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Qo]=t,e[vf]=r,PT(e,t,!1,!1),t.stateNode=e;e:{switch(s=Yx(n,r),n){case"dialog":wn("cancel",e),wn("close",e),i=r;break;case"iframe":case"object":case"embed":wn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nd.length;i++)wn(Nd[i],e);i=r;break;case"source":wn("error",e),i=r;break;case"img":case"image":case"link":wn("error",e),wn("load",e),i=r;break;case"details":wn("toggle",e),i=r;break;case"input":yE(e,r),i=Wx(e,r),wn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=$n({},r,{value:void 0}),wn("invalid",e);break;case"textarea":xE(e,r),i=qx(e,r),wn("invalid",e);break;default:i=r}Gx(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?fR(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cR(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&uf(e,l):typeof l=="number"&&uf(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(lf.hasOwnProperty(o)?l!=null&&o==="onScroll"&&wn("scroll",e):l!=null&&x_(e,o,l,s))}switch(n){case"input":Qh(e),vE(e,r,!1);break;case"textarea":Qh(e),bE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ba(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Hu(e,!!r.multiple,o,!1):r.defaultValue!=null&&Hu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=kg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Tr(t),null;case 6:if(e&&t.stateNode!=null)$T(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(nt(166));if(n=_l(bf.current),_l(ts.current),ap(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qo]=t,(o=r.nodeValue!==n)&&(e=Pi,e!==null))switch(e.tag){case 3:sp(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sp(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qo]=t,t.stateNode=r}return Tr(t),null;case 13:if(kn(Rn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(jn&&Ti!==null&&t.mode&1&&!(t.flags&128))ZR(),rc(),t.flags|=98560,o=!1;else if(o=ap(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(nt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(nt(317));o[Qo]=t}else rc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Tr(t),o=!1}else yo!==null&&(Nb(yo),yo=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Rn.current&1?ur===0&&(ur=3):t1())),t.updateQueue!==null&&(t.flags|=4),Tr(t),null);case 4:return oc(),wb(e,t),e===null&&mf(t.stateNode.containerInfo),Tr(t),null;case 10:return L_(t.type._context),Tr(t),null;case 17:return yi(t.type)&&Cg(),Tr(t),null;case 19:if(kn(Rn),o=t.memoizedState,o===null)return Tr(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)dd(o,!1);else{if(ur!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Pg(e),s!==null){for(t.flags|=128,dd(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bn(Rn,Rn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Gn()>ac&&(t.flags|=128,r=!0,dd(o,!1),t.lanes=4194304)}else{if(!r)if(e=Pg(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),dd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!jn)return Tr(t),null}else 2*Gn()-o.renderingStartTime>ac&&n!==1073741824&&(t.flags|=128,r=!0,dd(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Gn(),t.sibling=null,n=Rn.current,bn(Rn,r?n&1|2:n&1),t):(Tr(t),null);case 22:case 23:return e1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ki&1073741824&&(Tr(t),t.subtreeFlags&6&&(t.flags|=8192)):Tr(t),null;case 24:return null;case 25:return null}throw Error(nt(156,t.tag))}function ED(e,t){switch(O_(t),t.tag){case 1:return yi(t.type)&&Cg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oc(),kn(mi),kn(Br),W_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return H_(t),null;case 13:if(kn(Rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(nt(340));rc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kn(Rn),null;case 4:return oc(),null;case 10:return L_(t.type._context),null;case 22:case 23:return e1(),null;case 24:return null;default:return null}}var cp=!1,Or=!1,kD=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Ou(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fn(e,t,r)}else n.current=null}function _b(e,t,n){try{n()}catch(r){Fn(e,t,r)}}var uk=!1;function CD(e,t){if(ob=_g,e=BR(),I_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var s=0,a=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===i&&(a=s),h===o&&++d===r&&(l=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sb={focusedElem:e,selectionRange:n},_g=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){t=_t;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:ho(t.type,y),w);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(nt(163))}}catch(S){Fn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}return v=uk,uk=!1,v}function Xd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&_b(t,n,o)}i=i.next}while(i!==r)}}function ny(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Sb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function MT(e){var t=e.alternate;t!==null&&(e.alternate=null,MT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qo],delete t[vf],delete t[ub],delete t[lD],delete t[uD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function DT(e){return e.tag===5||e.tag===3||e.tag===4}function ck(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||DT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kg));else if(r!==4&&(e=e.child,e!==null))for(Eb(e,t,n),e=e.sibling;e!==null;)Eb(e,t,n),e=e.sibling}function kb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kb(e,t,n),e=e.sibling;e!==null;)kb(e,t,n),e=e.sibling}var xr=null,go=!1;function fa(e,t,n){for(n=n.child;n!==null;)LT(e,t,n),n=n.sibling}function LT(e,t,n){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Gm,n)}catch(a){}switch(n.tag){case 5:Or||Ou(n,t);case 6:var r=xr,i=go;xr=null,fa(e,t,n),xr=r,go=i,xr!==null&&(go?(e=xr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xr.removeChild(n.stateNode));break;case 18:xr!==null&&(go?(e=xr,n=n.stateNode,e.nodeType===8?n0(e.parentNode,n):e.nodeType===1&&n0(e,n),hf(e)):n0(xr,n.stateNode));break;case 4:r=xr,i=go,xr=n.stateNode.containerInfo,go=!0,fa(e,t,n),xr=r,go=i;break;case 0:case 11:case 14:case 15:if(!Or&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&_b(n,t,s),i=i.next}while(i!==r)}fa(e,t,n);break;case 1:if(!Or&&(Ou(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fn(n,t,a)}fa(e,t,n);break;case 21:fa(e,t,n);break;case 22:n.mode&1?(Or=(r=Or)||n.memoizedState!==null,fa(e,t,n),Or=r):fa(e,t,n);break;default:fa(e,t,n)}}function dk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kD),t.forEach(function(r){var i=$D.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:xr=a.stateNode,go=!1;break e;case 3:xr=a.stateNode.containerInfo,go=!0;break e;case 4:xr=a.stateNode.containerInfo,go=!0;break e}a=a.return}if(xr===null)throw Error(nt(160));LT(o,s,i),xr=null,go=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Fn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)FT(t,e),t=t.sibling}function FT(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fo(t,e),Go(e),r&4){try{Xd(3,e,e.return),ny(3,e)}catch(y){Fn(e,e.return,y)}try{Xd(5,e,e.return)}catch(y){Fn(e,e.return,y)}}break;case 1:fo(t,e),Go(e),r&512&&n!==null&&Ou(n,n.return);break;case 5:if(fo(t,e),Go(e),r&512&&n!==null&&Ou(n,n.return),e.flags&32){var i=e.stateNode;try{uf(i,"")}catch(y){Fn(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&aR(i,o),Yx(a,s);var u=Yx(a,o);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?fR(i,f):d==="dangerouslySetInnerHTML"?cR(i,f):d==="children"?uf(i,f):x_(i,d,f,u)}switch(a){case"input":Ux(i,o);break;case"textarea":lR(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Hu(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Hu(i,!!o.multiple,o.defaultValue,!0):Hu(i,!!o.multiple,o.multiple?[]:"",!1))}i[vf]=o}catch(y){Fn(e,e.return,y)}}break;case 6:if(fo(t,e),Go(e),r&4){if(e.stateNode===null)throw Error(nt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Fn(e,e.return,y)}}break;case 3:if(fo(t,e),Go(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hf(t.containerInfo)}catch(y){Fn(e,e.return,y)}break;case 4:fo(t,e),Go(e);break;case 13:fo(t,e),Go(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Q_=Gn())),r&4&&dk(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Or=(u=Or)||d,fo(t,e),Or=u):fo(t,e),Go(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(_t=e,d=e.child;d!==null;){for(f=_t=d;_t!==null;){switch(h=_t,p=h.child,h.tag){case 0:case 11:case 14:case 15:Xd(4,h,h.return);break;case 1:Ou(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Fn(r,n,y)}}break;case 5:Ou(h,h.return);break;case 22:if(h.memoizedState!==null){hk(f);continue}}p!==null?(p.return=h,_t=p):hk(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dR("display",s))}catch(y){Fn(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Fn(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fo(t,e),Go(e),r&4&&dk(e);break;case 21:break;default:fo(t,e),Go(e)}}function Go(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(DT(n)){var r=n;break e}n=n.return}throw Error(nt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(uf(i,""),r.flags&=-33);var o=ck(e);kb(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=ck(e);Eb(e,a,s);break;default:throw Error(nt(161))}}catch(l){Fn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jD(e,t,n){_t=e,BT(e)}function BT(e,t,n){for(var r=(e.mode&1)!==0;_t!==null;){var i=_t,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||cp;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Or;a=cp;var u=Or;if(cp=s,(Or=l)&&!u)for(_t=i;_t!==null;)s=_t,l=s.child,s.tag===22&&s.memoizedState!==null?pk(i):l!==null?(l.return=s,_t=l):pk(i);for(;o!==null;)_t=o,BT(o),o=o.sibling;_t=i,cp=a,Or=u}fk(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,_t=o):fk(e)}}function fk(e){for(;_t!==null;){var t=_t;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Or||ny(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Or)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ho(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&XE(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}XE(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&hf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(nt(163))}Or||t.flags&512&&Sb(t)}catch(h){Fn(t,t.return,h)}}if(t===e){_t=null;break}if(n=t.sibling,n!==null){n.return=t.return,_t=n;break}_t=t.return}}function hk(e){for(;_t!==null;){var t=_t;if(t===e){_t=null;break}var n=t.sibling;if(n!==null){n.return=t.return,_t=n;break}_t=t.return}}function pk(e){for(;_t!==null;){var t=_t;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ny(4,t)}catch(l){Fn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Fn(t,i,l)}}var o=t.return;try{Sb(t)}catch(l){Fn(t,o,l)}break;case 5:var s=t.return;try{Sb(t)}catch(l){Fn(t,s,l)}}}catch(l){Fn(t,t.return,l)}if(t===e){_t=null;break}var a=t.sibling;if(a!==null){a.return=t.return,_t=a;break}_t=t.return}}var AD=Math.ceil,Mg=na.ReactCurrentDispatcher,X_=na.ReactCurrentOwner,Ji=na.ReactCurrentBatchConfig,on=0,gr=null,er=null,_r=0,ki=0,$u=Ja(0),ur=0,Ef=null,Ml=0,ry=0,J_=0,Jd=null,li=null,Q_=0,ac=1/0,ks=null,Dg=!1,Cb=null,Ia=null,dp=!1,ka=null,Lg=0,Qd=0,jb=null,Zp=-1,eg=0;function Qr(){return on&6?Gn():Zp!==-1?Zp:Zp=Gn()}function Pa(e){return e.mode&1?on&2&&_r!==0?_r&-_r:dD.transition!==null?(eg===0&&(eg=ER()),eg):(e=fn,e!==0||(e=window.event,e=e===void 0?16:TR(e.type)),e):1}function ko(e,t,n,r){if(50<Qd)throw Qd=0,jb=null,Error(nt(185));dh(e,n,r),(!(on&2)||e!==gr)&&(e===gr&&(!(on&2)&&(ry|=n),ur===4&&_a(e,_r)),vi(e,r),n===1&&on===0&&!(t.mode&1)&&(ac=Gn()+500,Zm&&Qa()))}function vi(e,t){var n=e.callbackNode;dM(e,t);var r=wg(e,e===gr?_r:0);if(r===0)n!==null&&SE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&SE(n),t===1)e.tag===0?cD(gk.bind(null,e)):XR(gk.bind(null,e)),sD(function(){!(on&6)&&Qa()}),n=null;else{switch(kR(r)){case 1:n=E_;break;case 4:n=_R;break;case 16:n=bg;break;case 536870912:n=SR;break;default:n=bg}n=GT(n,zT.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zT(e,t){if(Zp=-1,eg=0,on&6)throw Error(nt(327));var n=e.callbackNode;if(Ku()&&e.callbackNode!==n)return null;var r=wg(e,e===gr?_r:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fg(e,r);else{t=r;var i=on;on|=2;var o=WT();(gr!==e||_r!==t)&&(ks=null,ac=Gn()+500,jl(e,t));do try{TD();break}catch(a){HT(e,a)}while(!0);D_(),Mg.current=o,on=i,er!==null?t=0:(gr=null,_r=0,t=ur)}if(t!==0){if(t===2&&(i=eb(e),i!==0&&(r=i,t=Ab(e,i))),t===1)throw n=Ef,jl(e,0),_a(e,r),vi(e,Gn()),n;if(t===6)_a(e,r);else{if(i=e.current.alternate,!(r&30)&&!ND(i)&&(t=Fg(e,r),t===2&&(o=eb(e),o!==0&&(r=o,t=Ab(e,o))),t===1))throw n=Ef,jl(e,0),_a(e,r),vi(e,Gn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(nt(345));case 2:pl(e,li,ks);break;case 3:if(_a(e,r),(r&130023424)===r&&(t=Q_+500-Gn(),10<t)){if(wg(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Qr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=lb(pl.bind(null,e,li,ks),t);break}pl(e,li,ks);break;case 4:if(_a(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Eo(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AD(r/1960))-r,10<r){e.timeoutHandle=lb(pl.bind(null,e,li,ks),r);break}pl(e,li,ks);break;case 5:pl(e,li,ks);break;default:throw Error(nt(329))}}}return vi(e,Gn()),e.callbackNode===n?zT.bind(null,e):null}function Ab(e,t){var n=Jd;return e.current.memoizedState.isDehydrated&&(jl(e,t).flags|=256),e=Fg(e,t),e!==2&&(t=li,li=n,t!==null&&Nb(t)),e}function Nb(e){li===null?li=e:li.push.apply(li,e)}function ND(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ao(o(),i))return!1}catch(s){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _a(e,t){for(t&=~J_,t&=~ry,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Eo(t),r=1<<n;e[n]=-1,t&=~r}}function gk(e){if(on&6)throw Error(nt(327));Ku();var t=wg(e,0);if(!(t&1))return vi(e,Gn()),null;var n=Fg(e,t);if(e.tag!==0&&n===2){var r=eb(e);r!==0&&(t=r,n=Ab(e,r))}if(n===1)throw n=Ef,jl(e,0),_a(e,t),vi(e,Gn()),n;if(n===6)throw Error(nt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pl(e,li,ks),vi(e,Gn()),null}function Z_(e,t){var n=on;on|=1;try{return e(t)}finally{on=n,on===0&&(ac=Gn()+500,Zm&&Qa())}}function Dl(e){ka!==null&&ka.tag===0&&!(on&6)&&Ku();var t=on;on|=1;var n=Ji.transition,r=fn;try{if(Ji.transition=null,fn=1,e)return e()}finally{fn=r,Ji.transition=n,on=t,!(on&6)&&Qa()}}function e1(){ki=$u.current,kn($u)}function jl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,oD(n)),er!==null)for(n=er.return;n!==null;){var r=n;switch(O_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cg();break;case 3:oc(),kn(mi),kn(Br),W_();break;case 5:H_(r);break;case 4:oc();break;case 13:kn(Rn);break;case 19:kn(Rn);break;case 10:L_(r.type._context);break;case 22:case 23:e1()}n=n.return}if(gr=e,er=e=Oa(e.current,null),_r=ki=t,ur=0,Ef=null,J_=ry=Ml=0,li=Jd=null,wl!==null){for(t=0;t<wl.length;t++)if(n=wl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}wl=null}return e}function HT(e,t){do{var n=er;try{if(D_(),Xp.current=$g,Og){for(var r=In.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Og=!1}if($l=0,pr=ar=In=null,Yd=!1,wf=0,X_.current=null,n===null||n.return===null){ur=1,Ef=t,er=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=_r,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=nk(s);if(p!==null){p.flags&=-257,rk(p,s,a,o,t),p.mode&1&&tk(o,u,t),t=p,l=u;var v=t.updateQueue;if(v===null){var y=new Set;y.add(l),t.updateQueue=y}else v.add(l);break e}else{if(!(t&1)){tk(o,u,t),t1();break e}l=Error(nt(426))}}else if(jn&&a.mode&1){var w=nk(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),rk(w,s,a,o,t),$_(sc(l,a));break e}}o=l=sc(l,a),ur!==4&&(ur=2),Jd===null?Jd=[o]:Jd.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=kT(o,l,t);YE(o,x);break e;case 1:a=l;var b=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ia===null||!Ia.has(m)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=CT(o,a,t);YE(o,S);break e}}o=o.return}while(o!==null)}VT(n)}catch(E){t=E,er===n&&n!==null&&(er=n=n.return);continue}break}while(!0)}function WT(){var e=Mg.current;return Mg.current=$g,e===null?$g:e}function t1(){(ur===0||ur===3||ur===2)&&(ur=4),gr===null||!(Ml&268435455)&&!(ry&268435455)||_a(gr,_r)}function Fg(e,t){var n=on;on|=2;var r=WT();(gr!==e||_r!==t)&&(ks=null,jl(e,t));do try{RD();break}catch(i){HT(e,i)}while(!0);if(D_(),on=n,Mg.current=r,er!==null)throw Error(nt(261));return gr=null,_r=0,ur}function RD(){for(;er!==null;)UT(er)}function TD(){for(;er!==null&&!nM();)UT(er)}function UT(e){var t=KT(e.alternate,e,ki);e.memoizedProps=e.pendingProps,t===null?VT(e):er=t,X_.current=null}function VT(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ED(n,t),n!==null){n.flags&=32767,er=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ur=6,er=null;return}}else if(n=SD(n,t,ki),n!==null){er=n;return}if(t=t.sibling,t!==null){er=t;return}er=t=e}while(t!==null);ur===0&&(ur=5)}function pl(e,t,n){var r=fn,i=Ji.transition;try{Ji.transition=null,fn=1,ID(e,t,n,r)}finally{Ji.transition=i,fn=r}return null}function ID(e,t,n,r){do Ku();while(ka!==null);if(on&6)throw Error(nt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(nt(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(fM(e,o),e===gr&&(er=gr=null,_r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dp||(dp=!0,GT(bg,function(){return Ku(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ji.transition,Ji.transition=null;var s=fn;fn=1;var a=on;on|=4,X_.current=null,CD(e,n),FT(n,e),QM(sb),_g=!!ob,sb=ob=null,e.current=n,jD(n),rM(),on=a,fn=s,Ji.transition=o}else e.current=n;if(dp&&(dp=!1,ka=e,Lg=i),o=e.pendingLanes,o===0&&(Ia=null),sM(n.stateNode),vi(e,Gn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dg)throw Dg=!1,e=Cb,Cb=null,e;return Lg&1&&e.tag!==0&&Ku(),o=e.pendingLanes,o&1?e===jb?Qd++:(Qd=0,jb=e):Qd=0,Qa(),null}function Ku(){if(ka!==null){var e=kR(Lg),t=Ji.transition,n=fn;try{if(Ji.transition=null,fn=16>e?16:e,ka===null)var r=!1;else{if(e=ka,ka=null,Lg=0,on&6)throw Error(nt(331));var i=on;for(on|=4,_t=e.current;_t!==null;){var o=_t,s=o.child;if(_t.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(_t=u;_t!==null;){var d=_t;switch(d.tag){case 0:case 11:case 15:Xd(8,d,o)}var f=d.child;if(f!==null)f.return=d,_t=f;else for(;_t!==null;){d=_t;var h=d.sibling,p=d.return;if(MT(d),d===u){_t=null;break}if(h!==null){h.return=p,_t=h;break}_t=p}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}_t=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,_t=s;else e:for(;_t!==null;){if(o=_t,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xd(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,_t=x;break e}_t=o.return}}var b=e.current;for(_t=b;_t!==null;){s=_t;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,_t=m;else e:for(s=b;_t!==null;){if(a=_t,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ny(9,a)}}catch(E){Fn(a,a.return,E)}if(a===s){_t=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,_t=S;break e}_t=a.return}}if(on=i,Qa(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Gm,e)}catch(E){}r=!0}return r}finally{fn=n,Ji.transition=t}}return!1}function mk(e,t,n){t=sc(n,t),t=kT(e,t,1),e=Ta(e,t,1),t=Qr(),e!==null&&(dh(e,1,t),vi(e,t))}function Fn(e,t,n){if(e.tag===3)mk(e,e,n);else for(;t!==null;){if(t.tag===3){mk(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ia===null||!Ia.has(r))){e=sc(n,e),e=CT(t,e,1),t=Ta(t,e,1),e=Qr(),t!==null&&(dh(t,1,e),vi(t,e));break}}t=t.return}}function PD(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Qr(),e.pingedLanes|=e.suspendedLanes&n,gr===e&&(_r&n)===n&&(ur===4||ur===3&&(_r&130023424)===_r&&500>Gn()-Q_?jl(e,0):J_|=n),vi(e,t)}function qT(e,t){t===0&&(e.mode&1?(t=tp,tp<<=1,!(tp&130023424)&&(tp=4194304)):t=1);var n=Qr();e=qs(e,t),e!==null&&(dh(e,t,n),vi(e,n))}function OD(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qT(e,n)}function $D(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(nt(314))}r!==null&&r.delete(t),qT(e,n)}var KT;KT=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mi.current)fi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return fi=!1,_D(e,t,n);fi=!!(e.flags&131072)}else fi=!1,jn&&t.flags&1048576&&JR(t,Ng,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qp(e,t),e=t.pendingProps;var i=nc(t,Br.current);qu(t,n),i=V_(null,t,r,e,i,n);var o=q_();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)?(o=!0,jg(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,B_(t),i.updater=ty,t.stateNode=i,i._reactInternals=t,gb(t,r,e,n),t=vb(null,t,r,!0,o,n)):(t.tag=0,jn&&o&&P_(t),Xr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qp(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=DD(r),e=ho(r,e),i){case 0:t=yb(null,t,r,e,n);break e;case 1:t=sk(null,t,r,e,n);break e;case 11:t=ik(null,t,r,e,n);break e;case 14:t=ok(null,t,r,ho(r.type,e),n);break e}throw Error(nt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ho(r,i),yb(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ho(r,i),sk(e,t,r,i,n);case 3:e:{if(RT(t),e===null)throw Error(nt(387));r=t.pendingProps,o=t.memoizedState,i=o.element,rT(e,t),Ig(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=sc(Error(nt(423)),t),t=ak(e,t,r,n,i);break e}else if(r!==i){i=sc(Error(nt(424)),t),t=ak(e,t,r,n,i);break e}else for(Ti=Ra(t.stateNode.containerInfo.firstChild),Pi=t,jn=!0,yo=null,n=tT(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rc(),r===i){t=Ks(e,t,n);break e}Xr(e,t,r,n)}t=t.child}return t;case 5:return iT(t),e===null&&fb(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,ab(r,i)?s=null:o!==null&&ab(r,o)&&(t.flags|=32),NT(e,t),Xr(e,t,s,n),t.child;case 6:return e===null&&fb(t),null;case 13:return TT(e,t,n);case 4:return z_(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ic(t,null,r,n):Xr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ho(r,i),ik(e,t,r,i,n);case 7:return Xr(e,t,t.pendingProps,n),t.child;case 8:return Xr(e,t,t.pendingProps.children,n),t.child;case 12:return Xr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,bn(Rg,r._currentValue),r._currentValue=s,o!==null)if(Ao(o.value,s)){if(o.children===i.children&&!mi.current){t=Ks(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ls(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),hb(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(nt(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),hb(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Xr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,qu(t,n),i=to(i),r=r(i),t.flags|=1,Xr(e,t,r,n),t.child;case 14:return r=t.type,i=ho(r,t.pendingProps),i=ho(r.type,i),ok(e,t,r,i,n);case 15:return jT(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ho(r,i),Qp(e,t),t.tag=1,yi(r)?(e=!0,jg(t)):e=!1,qu(t,n),ET(t,r,i),gb(t,r,i,n),vb(null,t,r,!0,e,n);case 19:return IT(e,t,n);case 22:return AT(e,t,n)}throw Error(nt(156,t.tag))};function GT(e,t){return wR(e,t)}function MD(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(e,t,n,r){return new MD(e,t,n,r)}function n1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function DD(e){if(typeof e=="function")return n1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===w_)return 11;if(e===__)return 14}return 2}function Oa(e,t){var n=e.alternate;return n===null?(n=Yi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function tg(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")n1(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ku:return Al(n.children,i,o,t);case b_:s=8,i|=8;break;case Fx:return e=Yi(12,n,t,i|2),e.elementType=Fx,e.lanes=o,e;case Bx:return e=Yi(13,n,t,i),e.elementType=Bx,e.lanes=o,e;case zx:return e=Yi(19,n,t,i),e.elementType=zx,e.lanes=o,e;case iR:return iy(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nR:s=10;break e;case rR:s=9;break e;case w_:s=11;break e;case __:s=14;break e;case ya:s=16,r=null;break e}throw Error(nt(130,e==null?e:typeof e,""))}return t=Yi(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Al(e,t,n,r){return e=Yi(7,e,r,t),e.lanes=n,e}function iy(e,t,n,r){return e=Yi(22,e,r,t),e.elementType=iR,e.lanes=n,e.stateNode={isHidden:!1},e}function c0(e,t,n){return e=Yi(6,e,null,t),e.lanes=n,e}function d0(e,t,n){return t=Yi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function LD(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vv(0),this.expirationTimes=Vv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function r1(e,t,n,r,i,o,s,a,l){return e=new LD(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Yi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},B_(o),e}function FD(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function YT(e){if(!e)return za;e=e._reactInternals;e:{if(eu(e)!==e||e.tag!==1)throw Error(nt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(nt(171))}if(e.tag===1){var n=e.type;if(yi(n))return YR(e,n,t)}return t}function XT(e,t,n,r,i,o,s,a,l){return e=r1(n,r,!0,e,i,o,s,a,l),e.context=YT(null),n=e.current,r=Qr(),i=Pa(n),o=Ls(r,i),o.callback=t!=null?t:null,Ta(n,o,i),e.current.lanes=i,dh(e,i,r),vi(e,r),e}function oy(e,t,n,r){var i=t.current,o=Qr(),s=Pa(i);return n=YT(n),t.context===null?t.context=n:t.pendingContext=n,t=Ls(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ta(i,t,s),e!==null&&(ko(e,i,s,o),Yp(e,i,s)),s}function Bg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function i1(e,t){yk(e,t),(e=e.alternate)&&yk(e,t)}function BD(){return null}var JT=typeof reportError=="function"?reportError:function(e){console.error(e)};function o1(e){this._internalRoot=e}sy.prototype.render=o1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(nt(409));oy(e,t,null,null)};sy.prototype.unmount=o1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dl(function(){oy(null,e,null,null)}),t[Vs]=null}};function sy(e){this._internalRoot=e}sy.prototype.unstable_scheduleHydration=function(e){if(e){var t=AR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wa.length&&t!==0&&t<wa[n].priority;n++);wa.splice(n,0,e),n===0&&RR(e)}};function s1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ay(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vk(){}function zD(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Bg(s);o.call(u)}}var s=XT(t,r,e,0,null,!1,!1,"",vk);return e._reactRootContainer=s,e[Vs]=s.current,mf(e.nodeType===8?e.parentNode:e),Dl(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Bg(l);a.call(u)}}var l=r1(e,0,!1,null,null,!1,!1,"",vk);return e._reactRootContainer=l,e[Vs]=l.current,mf(e.nodeType===8?e.parentNode:e),Dl(function(){oy(t,l,n,r)}),l}function ly(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Bg(s);a.call(l)}}oy(t,s,e,i)}else s=zD(n,t,e,i,r);return Bg(s)}CR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ad(t.pendingLanes);n!==0&&(k_(t,n|1),vi(t,Gn()),!(on&6)&&(ac=Gn()+500,Qa()))}break;case 13:Dl(function(){var r=qs(e,1);if(r!==null){var i=Qr();ko(r,e,1,i)}}),i1(e,1)}};C_=function(e){if(e.tag===13){var t=qs(e,134217728);if(t!==null){var n=Qr();ko(t,e,134217728,n)}i1(e,134217728)}};jR=function(e){if(e.tag===13){var t=Pa(e),n=qs(e,t);if(n!==null){var r=Qr();ko(n,e,t,r)}i1(e,t)}};AR=function(){return fn};NR=function(e,t){var n=fn;try{return fn=e,t()}finally{fn=n}};Jx=function(e,t,n){switch(t){case"input":if(Ux(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Qm(r);if(!i)throw Error(nt(90));sR(r),Ux(r,i)}}}break;case"textarea":lR(e,n);break;case"select":t=n.value,t!=null&&Hu(e,!!n.multiple,t,!1)}};gR=Z_;mR=Dl;var HD={usingClientEntryPoint:!1,Events:[hh,Nu,Qm,hR,pR,Z_]},fd={findFiberByHostInstance:bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WD={bundleType:fd.bundleType,version:fd.version,rendererPackageName:fd.rendererPackageName,rendererConfig:fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xR(e),e===null?null:e.stateNode},findFiberByHostInstance:fd.findFiberByHostInstance||BD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fp.isDisabled&&fp.supportsFiber)try{Gm=fp.inject(WD),es=fp}catch(e){}}zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HD;zi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s1(t))throw Error(nt(200));return FD(e,t,null,n)};zi.createRoot=function(e,t){if(!s1(e))throw Error(nt(299));var n=!1,r="",i=JT;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=r1(e,1,!1,null,null,n,!1,r,i),e[Vs]=t.current,mf(e.nodeType===8?e.parentNode:e),new o1(t)};zi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(nt(188)):(e=Object.keys(e).join(","),Error(nt(268,e)));return e=xR(t),e=e===null?null:e.stateNode,e};zi.flushSync=function(e){return Dl(e)};zi.hydrate=function(e,t,n){if(!ay(t))throw Error(nt(200));return ly(null,e,t,!0,n)};zi.hydrateRoot=function(e,t,n){if(!s1(e))throw Error(nt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=JT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=XT(t,null,e,1,n!=null?n:null,i,!1,o,s),e[Vs]=t.current,mf(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new sy(t)};zi.render=function(e,t,n){if(!ay(t))throw Error(nt(200));return ly(null,e,t,!1,n)};zi.unmountComponentAtNode=function(e){if(!ay(e))throw Error(nt(40));return e._reactRootContainer?(Dl(function(){ly(null,null,e,!1,function(){e._reactRootContainer=null,e[Vs]=null})}),!0):!1};zi.unstable_batchedUpdates=Z_;zi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ay(n))throw Error(nt(200));if(e==null||e._reactInternals===void 0)throw Error(nt(38));return ly(e,t,n,!1,r)};zi.version="18.3.1-next-f1338f8080-20240426";function QT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QT)}catch(e){console.error(e)}}QT(),QN.exports=zi;var uy=QN.exports;const ZT=ta(uy);var e3,xk=uy;e3=xk.createRoot,xk.hydrateRoot;var a1={};Object.defineProperty(a1,"__esModule",{value:!0});a1.parse=XD;a1.serialize=JD;const UD=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,VD=/^[\u0021-\u003A\u003C-\u007E]*$/,qD=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,KD=/^[\u0020-\u003A\u003D-\u007E]*$/,GD=Object.prototype.toString,YD=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function XD(e,t){const n=new YD,r=e.length;if(r<2)return n;const i=(t==null?void 0:t.decode)||QD;let o=0;do{const s=e.indexOf("=",o);if(s===-1)break;const a=e.indexOf(";",o),l=a===-1?r:a;if(s>l){o=e.lastIndexOf(";",s-1)+1;continue}const u=bk(e,o,s),d=wk(e,s,u),f=e.slice(u,d);if(n[f]===void 0){let h=bk(e,s+1,l),p=wk(e,l,h);const v=i(e.slice(h,p));n[f]=v}o=l+1}while(o<r);return n}function bk(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function wk(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function JD(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!UD.test(e))throw new TypeError("argument name is invalid: ".concat(e));const i=r(t);if(!VD.test(i))throw new TypeError("argument val is invalid: ".concat(t));let o=e+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError("option maxAge is invalid: ".concat(n.maxAge));o+="; Max-Age="+n.maxAge}if(n.domain){if(!qD.test(n.domain))throw new TypeError("option domain is invalid: ".concat(n.domain));o+="; Domain="+n.domain}if(n.path){if(!KD.test(n.path))throw new TypeError("option path is invalid: ".concat(n.path));o+="; Path="+n.path}if(n.expires){if(!ZD(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError("option expires is invalid: ".concat(n.expires));o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid: ".concat(n.priority))}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid: ".concat(n.sameSite))}return o}function QD(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch(t){return e}}function ZD(e){return GD.call(e)==="[object Date]"}var _k="popstate";function e6(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return Rb("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kf(i)}return n6(t,n,null,e)}function Pn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function as(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function t6(){return Math.random().toString(36).substring(2,10)}function Sk(e,t){return{usr:e.state,key:e.key,idx:t}}function Rb(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Oc(t):t,state:n,key:t&&t.key||r||t6()}}function kf({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Oc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function n6(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=d();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function d(){return(s.state||{idx:null}).idx}function f(){a="POP";let w=d(),x=w==null?null:w-u;u=w,l&&l({action:a,location:y.location,delta:x})}function h(w,x){a="PUSH";let b=Rb(y.location,w,x);u=d()+1;let m=Sk(b,u),S=y.createHref(b);try{s.pushState(m,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}o&&l&&l({action:a,location:y.location,delta:1})}function p(w,x){a="REPLACE";let b=Rb(y.location,w,x);u=d();let m=Sk(b,u),S=y.createHref(b);s.replaceState(m,"",S),o&&l&&l({action:a,location:y.location,delta:0})}function v(w){return r6(w)}let y={get action(){return a},get location(){return e(i,s)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(_k,f),l=w,()=>{i.removeEventListener(_k,f),l=null}},createHref(w){return t(i,w)},createURL:v,encodeLocation(w){let x=v(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(w){return s.go(w)}};return y}function r6(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:kf(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function t3(e,t,n="/"){return i6(e,t,n,!1)}function i6(e,t,n,r){let i=typeof t=="string"?Oc(t):t,o=Gs(i.pathname||"/",n);if(o==null)return null;let s=n3(e);o6(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=m6(o);a=p6(s[l],u,r)}return a}function n3(e,t=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Pn(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length));let u=Fs([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(Pn(o.index!==!0,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(u,'".')),n3(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:f6(u,o.index),routesMeta:d})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of r3(o.path))i(o,s,l)}),t}function r3(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=r3(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function o6(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:h6(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var s6=/^:[\w-]+$/,a6=3,l6=2,u6=1,c6=10,d6=-2,Ek=e=>e==="*";function f6(e,t){let n=e.split("/"),r=n.length;return n.some(Ek)&&(r+=d6),t&&(r+=l6),n.filter(i=>!Ek(i)).reduce((i,o)=>i+(s6.test(o)?a6:o===""?u6:c6),r)}function h6(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function p6(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=zg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=zg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Fs([o,f.pathname]),pathnameBase:b6(Fs([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Fs([o,f.pathnameBase]))}return s}function zg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=g6(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let v=a[h]||"";s=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function g6(e,t=!1,n=!0){as(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function m6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return as(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function Gs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function y6(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Oc(e):e;return{pathname:n?n.startsWith("/")?n:v6(n,t):t,search:w6(r),hash:_6(i)}}function v6(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function f0(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function x6(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function i3(e){let t=x6(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function o3(e,t,n,r=!1){let i;typeof e=="string"?i=Oc(e):(i={...e},Pn(!i.pathname||!i.pathname.includes("?"),f0("?","pathname","search",i)),Pn(!i.pathname||!i.pathname.includes("#"),f0("#","pathname","hash",i)),Pn(!i.search||!i.search.includes("#"),f0("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=t.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=y6(i,a),u=s&&s!=="/"&&s.endsWith("/"),d=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Fs=e=>e.join("/").replace(/\/\/+/g,"/"),b6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),w6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function S6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var s3=["POST","PUT","PATCH","DELETE"];new Set(s3);var E6=["GET",...s3];new Set(E6);var $c=j.createContext(null);$c.displayName="DataRouter";var cy=j.createContext(null);cy.displayName="DataRouterState";var a3=j.createContext({isTransitioning:!1});a3.displayName="ViewTransition";var k6=j.createContext(new Map);k6.displayName="Fetchers";var C6=j.createContext(null);C6.displayName="Await";var ps=j.createContext(null);ps.displayName="Navigation";var gh=j.createContext(null);gh.displayName="Location";var Po=j.createContext({outlet:null,matches:[],isDataRoute:!1});Po.displayName="Route";var l1=j.createContext(null);l1.displayName="RouteError";function j6(e,{relative:t}={}){Pn(mh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(ps),{hash:i,pathname:o,search:s}=yh(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:Fs([n,o])),r.createHref({pathname:a,search:s,hash:i})}function mh(){return j.useContext(gh)!=null}function tu(){return Pn(mh(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(gh).location}var l3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function u3(e){j.useContext(ps).static||j.useLayoutEffect(e)}function nu(){let{isDataRoute:e}=j.useContext(Po);return e?H6():A6()}function A6(){Pn(mh(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext($c),{basename:t,navigator:n}=j.useContext(ps),{matches:r}=j.useContext(Po),{pathname:i}=tu(),o=JSON.stringify(i3(r)),s=j.useRef(!1);return u3(()=>{s.current=!0}),j.useCallback((l,u={})=>{if(as(s.current,l3),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=o3(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Fs([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,i,e])}var N6=j.createContext(null);function R6(e){let t=j.useContext(Po).outlet;return t&&j.createElement(N6.Provider,{value:e},t)}function u1(){let{matches:e}=j.useContext(Po),t=e[e.length-1];return t?t.params:{}}function yh(e,{relative:t}={}){let{matches:n}=j.useContext(Po),{pathname:r}=tu(),i=JSON.stringify(i3(n));return j.useMemo(()=>o3(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function T6(e,t){return c3(e,t)}function c3(e,t,n,r){var b;Pn(mh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=j.useContext(ps),{matches:s}=j.useContext(Po),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",f=a&&a.route;{let m=f&&f.path||"";d3(u,!f||m.endsWith("*")||m.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(m,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(m,'"> to <Route path="').concat(m==="/"?"*":"".concat(m,"/*"),'">.'))}let h=tu(),p;if(t){let m=typeof t=="string"?Oc(t):t;Pn(d==="/"||((b=m.pathname)==null?void 0:b.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(m.pathname,'" was given in the `location` prop.')),p=m}else p=h;let v=p.pathname||"/",y=v;if(d!=="/"){let m=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=!o&&n&&n.matches&&n.matches.length>0?n.matches:t3(e,{pathname:y});as(f||w!=null,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),as(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=M6(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:Fs([d,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?d:Fs([d,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,n,r);return t&&x?j.createElement(gh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function I6(){let e=z6(),t=S6(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,s)}var P6=j.createElement(I6,null),O6=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(Po.Provider,{value:this.props.routeContext},j.createElement(l1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $6({routeContext:e,match:t,children:n}){let r=j.useContext($c);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Po.Provider,{value:e},n)}function M6(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Pn(l>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:f}=n,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,d)=>{let f,h=!1,p=null,v=null;n&&(f=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||P6,s&&(a<0&&d===0?(d3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,v=null):a===d&&(h=!0,v=u.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,d+1)),w=()=>{let x;return f?x=p:h?x=v:u.route.Component?x=j.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,j.createElement($6,{match:u,routeContext:{outlet:l,matches:y,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?j.createElement(O6,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}function c1(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function D6(e){let t=j.useContext($c);return Pn(t,c1(e)),t}function L6(e){let t=j.useContext(cy);return Pn(t,c1(e)),t}function F6(e){let t=j.useContext(Po);return Pn(t,c1(e)),t}function d1(e){let t=F6(e),n=t.matches[t.matches.length-1];return Pn(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function B6(){return d1("useRouteId")}function z6(){var r;let e=j.useContext(l1),t=L6("useRouteError"),n=d1("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function H6(){let{router:e}=D6("useNavigate"),t=d1("useNavigate"),n=j.useRef(!1);return u3(()=>{n.current=!0}),j.useCallback(async(i,o={})=>{as(n.current,l3),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var kk={};function d3(e,t,n){!t&&!kk[e]&&(kk[e]=!0,as(!1,n))}j.memo(W6);function W6({routes:e,future:t,state:n}){return c3(e,void 0,n,t)}function U6(e){return R6(e.context)}function si(e){Pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function V6({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Pn(!mh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=j.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=Oc(n));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:h="default"}=n,p=j.useMemo(()=>{let v=Gs(l,s);return v==null?null:{location:{pathname:v,search:u,hash:d,state:f,key:h},navigationType:r}},[s,l,u,d,f,h,r]);return as(p!=null,'<Router basename="'.concat(s,'"> is not able to match the URL "').concat(l).concat(u).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),p==null?null:j.createElement(ps.Provider,{value:a},j.createElement(gh.Provider,{children:t,value:p}))}function q6({children:e,location:t}){return T6(Tb(e),t)}function Tb(e,t=[]){let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let o=[...t,i];if(r.type===j.Fragment){n.push.apply(n,Tb(r.props.children,o));return}Pn(r.type===si,"[".concat(typeof r.type=="string"?r.type:r.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),Pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Tb(r.props.children,o)),n.push(s)}),n}var ng="get",rg="application/x-www-form-urlencoded";function dy(e){return e!=null&&typeof e.tagName=="string"}function K6(e){return dy(e)&&e.tagName.toLowerCase()==="button"}function G6(e){return dy(e)&&e.tagName.toLowerCase()==="form"}function Y6(e){return dy(e)&&e.tagName.toLowerCase()==="input"}function X6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function J6(e,t){return e.button===0&&(!t||t==="_self")&&!X6(e)}var hp=null;function Q6(){if(hp===null)try{new FormData(document.createElement("form"),0),hp=!1}catch(e){hp=!0}return hp}var Z6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function h0(e){return e!=null&&!Z6.has(e)?(as(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(rg,'"')),null):e}function eL(e,t){let n,r,i,o,s;if(G6(e)){let a=e.getAttribute("action");r=a?Gs(a,t):null,n=e.getAttribute("method")||ng,i=h0(e.getAttribute("enctype"))||rg,o=new FormData(e)}else if(K6(e)||Y6(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Gs(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ng,i=h0(e.getAttribute("formenctype"))||h0(a.getAttribute("enctype"))||rg,o=new FormData(a,e),!Q6()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?"".concat(u,"."):"";o.append("".concat(h,"x"),"0"),o.append("".concat(h,"y"),"0")}else u&&o.append(u,f)}}else{if(dy(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ng,r=null,i=rg,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function f1(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function tL(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function rL(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await tL(o,n);return s.links?s.links():[]}return[]}));return aL(r.flat(1).filter(nL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Ck(e,t,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function iL(e,t,{includeHydrateFallback:n}={}){return oL(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function oL(e){return[...new Set(e)]}function sL(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function aL(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(sL(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lL=new Set([100,101,204,205]);function uL(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Gs(n.pathname,t)==="/"?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}function f3(){let e=j.useContext($c);return f1(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function cL(){let e=j.useContext(cy);return f1(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var h1=j.createContext(void 0);h1.displayName="FrameworkContext";function h3(){let e=j.useContext(h1);return f1(e,"You must render this element inside a <HydratedRouter> element"),e}function dL(e,t){let n=j.useContext(h1),[r,i]=j.useState(!1),[o,s]=j.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=j.useRef(null);j.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let y=x=>{x.forEach(b=>{s(b.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return h.current&&w.observe(h.current),()=>{w.disconnect()}}},[e]),j.useEffect(()=>{if(r){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[r]);let p=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,h,{}]:[o,h,{onFocus:hd(a,p),onBlur:hd(l,v),onMouseEnter:hd(u,p),onMouseLeave:hd(d,v),onTouchStart:hd(f,p)}]:[!1,h,{}]}function hd(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function fL({page:e,...t}){let{router:n}=f3(),r=j.useMemo(()=>t3(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?j.createElement(pL,{page:e,matches:r,...t}):null}function hL(e){let{manifest:t,routeModules:n}=h3(),[r,i]=j.useState([]);return j.useEffect(()=>{let o=!1;return rL(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function pL({page:e,matches:t,...n}){let r=tu(),{manifest:i,routeModules:o}=h3(),{basename:s}=f3(),{loaderData:a,matches:l}=cL(),u=j.useMemo(()=>Ck(e,t,l,i,r,"data"),[e,t,l,i,r]),d=j.useMemo(()=>Ck(e,t,l,i,r,"assets"),[e,t,l,i,r]),f=j.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,y=!1;if(t.forEach(x=>{var m;let b=i.routes[x.route.id];!b||!b.hasLoader||(!u.some(S=>S.route.id===x.route.id)&&x.route.id in a&&((m=o[x.route.id])!=null&&m.shouldRevalidate)||b.hasClientLoader?y=!0:v.add(x.route.id))}),v.size===0)return[];let w=uL(e,s);return y&&v.size>0&&w.searchParams.set("_routes",t.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[s,a,r,i,u,t,e,o]),h=j.useMemo(()=>iL(d,i),[d,i]),p=hL(d);return j.createElement(j.Fragment,null,f.map(v=>j.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),h.map(v=>j.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),p.map(({key:v,link:y})=>j.createElement("link",{key:v,...y})))}function gL(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var p3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{p3&&(window.__reactRouterVersion="7.6.0")}catch(e){}function mL({basename:e,children:t,window:n}){let r=j.useRef();r.current==null&&(r.current=e6({window:n,v5Compat:!0}));let i=r.current,[o,s]=j.useState({action:i.action,location:i.location}),a=j.useCallback(l=>{j.startTransition(()=>s(l))},[s]);return j.useLayoutEffect(()=>i.listen(a),[i,a]),j.createElement(V6,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var g3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m3=j.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...h},p){let{basename:v}=j.useContext(ps),y=typeof u=="string"&&g3.test(u),w,x=!1;if(typeof u=="string"&&y&&(w=u,p3))try{let z=new URL(window.location.href),O=u.startsWith("//")?new URL(z.protocol+u):new URL(u),M=Gs(O.pathname,v);O.origin===z.origin&&M!=null?u=M+O.search+O.hash:x=!0}catch(z){as(!1,'<Link to="'.concat(u,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let b=j6(u,{relative:i}),[m,S,E]=dL(r,h),k=xL(u,{replace:s,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f});function N(z){t&&t(z),z.defaultPrevented||k(z)}let I=j.createElement("a",{...h,...E,href:w||b,onClick:x||o?t:N,ref:gL(p,S),target:l,"data-discover":!y&&n==="render"?"true":void 0});return m&&!y?j.createElement(j.Fragment,null,I,j.createElement(fL,{page:b})):I});m3.displayName="Link";var Ib=j.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},d){let f=yh(s,{relative:u.relative}),h=tu(),p=j.useContext(cy),{navigator:v,basename:y}=j.useContext(ps),w=p!=null&&EL(f)&&a===!0,x=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=h.pathname,m=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(b=b.toLowerCase(),m=m?m.toLowerCase():null,x=x.toLowerCase()),m&&y&&(m=Gs(m,y)||m);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let E=b===x||!i&&b.startsWith(x)&&b.charAt(S)==="/",k=m!=null&&(m===x||!i&&m.startsWith(x)&&m.charAt(x.length)==="/"),N={isActive:E,isPending:k,isTransitioning:w},I=E?t:void 0,z;typeof r=="function"?z=r(N):z=[r,E?"active":null,k?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(N):o;return j.createElement(m3,{...u,"aria-current":I,className:z,ref:d,style:O,to:s,viewTransition:a},typeof l=="function"?l(N):l)});Ib.displayName="NavLink";var yL=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=ng,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...h},p)=>{let v=_L(),y=SL(a,{relative:u}),w=s.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&g3.test(a),b=m=>{if(l&&l(m),m.defaultPrevented)return;m.preventDefault();let S=m.nativeEvent.submitter,E=(S==null?void 0:S.getAttribute("formmethod"))||s;v(S||m.currentTarget,{fetcherKey:t,method:E,navigate:n,replace:i,state:o,relative:u,preventScrollReset:d,viewTransition:f})};return j.createElement("form",{ref:p,method:w,action:y,onSubmit:r?l:b,...h,"data-discover":!x&&e==="render"?"true":void 0})});yL.displayName="Form";function vL(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function y3(e){let t=j.useContext($c);return Pn(t,vL(e)),t}function xL(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=nu(),l=tu(),u=yh(e,{relative:o});return j.useCallback(d=>{if(J6(d,t)){d.preventDefault();let f=n!==void 0?n:kf(l)===kf(u);a(e,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,t,e,i,o,s])}var bL=0,wL=()=>"__".concat(String(++bL),"__");function _L(){let{router:e}=y3("useSubmit"),{basename:t}=j.useContext(ps),n=B6();return j.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=eL(r,t);if(i.navigate===!1){let d=i.fetcherKey||wL();await e.fetch(d,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function SL(e,{relative:t}={}){let{basename:n}=j.useContext(ps),r=j.useContext(Po);Pn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...yh(e||".",{relative:t})},s=tu();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();o.search=d?"?".concat(d):""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Fs([n,o.pathname])),kf(o)}function EL(e,t={}){let n=j.useContext(a3);Pn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=y3("useViewTransitionState"),i=yh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Gs(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Gs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zg(i.pathname,s)!=null||zg(i.pathname,o)!=null}[...lL];var p1={};Object.defineProperty(p1,"__esModule",{value:!0});var ra=p1.newRidgeState=void 0;const Hg=j,v3=typeof window<"u"||typeof document<"u"?Hg.useLayoutEffect:Hg.useEffect,x3=(e,t)=>e===t,jk={};function kL(e,t=x3){const n=(0,Hg.useRef)(jk);let r=n.current;return v3(()=>{n.current=r}),(n.current===jk||!t(e,n.current))&&(r=e),r}function CL(e,t){let n=[],r=e;function i(u,d){const f=r;r=u instanceof Function?u(r):u,setTimeout(()=>{var h;n.forEach(p=>p(r,f)),d==null||d(r,f),(h=t==null?void 0:t.onSet)===null||h===void 0||h.call(t,r,f)})}function o(u){return n.push(u),()=>{n=n.filter(d=>d!==u)}}function s(u){v3(()=>o(u),[u])}function a(){const[u,d]=(0,Hg.useState)(r);return s(d),[u,i]}function l(u,d=x3){const[f]=a();return kL(u(f),d)}return{use:a,useSelector:l,useValue:()=>a()[0],get:()=>r,set:i,reset:()=>i(e),subscribe:o}}ra=p1.newRidgeState=CL;let jL=0;const fy=ra([]);function At(e,t){const n=jL++;return fy.set(r=>[...r,{id:n,tag:e,Component:t}]),n}function Hn(e){fy.set(t=>t.filter(n=>n.id!==e))}function AL(e){fy.set(t=>t.filter(n=>n.tag!==e))}const NL=()=>{const e=fy.useValue();return c.jsx("div",{style:{zIndex:9999},children:e.map(({id:t,Component:n})=>c.jsx(n,{id:t},t))})},g1=ra(!1),b3=()=>g1.set(!0),pp=()=>g1.set(!1);class Rd extends Error{}Rd.prototype.name="InvalidTokenError";function RL(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function TL(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return RL(t)}catch(n){return atob(t)}}function Mc(e,t){if(typeof e!="string")throw new Rd("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Rd("Invalid token specified: missing part #".concat(n+1));let i;try{i=TL(r)}catch(o){throw new Rd("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(o.message,")"))}try{return JSON.parse(i)}catch(o){throw new Rd("Invalid token specified: invalid json for part #".concat(n+1," (").concat(o.message,")"))}}function gp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var w3={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(u,d){if(!i[u]){if(!r[u]){var f=typeof gp=="function"&&gp;if(!d&&f)return f(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[u]={exports:{}};r[u][0].call(p.exports,function(v){var y=r[u][1][v];return s(y||v)},p,p.exports,n,r,i,o)}return i[u].exports}for(var a=typeof gp=="function"&&gp,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var l=0,u=new s(v),d=o.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=v,a=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var w=o.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},o.document.documentElement.appendChild(w)}:a=function(){setTimeout(v,0)};var h,p=[];function v(){h=!0;for(var w,x,b=p.length;b;){for(x=p,p=[],w=-1;++w<b;)x[w]();b=p.length}h=!1}r.exports=y;function y(w){p.push(w)===1&&!h&&a()}}).call(this,typeof Ri<"u"?Ri:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,E!==s&&y(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,k){if(typeof E!="function"&&this.state===u||typeof k!="function"&&this.state===l)return this;var N=new this.constructor(s);if(this.state!==d){var I=this.state===u?E:k;p(N,I,this.outcome)}else this.queue.push(new h(N,E,k));return N};function h(E,k,N){this.promise=E,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},h.prototype.otherCallFulfilled=function(E){p(this.promise,this.onFulfilled,E)},h.prototype.callRejected=function(E){a.reject(this.promise,E)},h.prototype.otherCallRejected=function(E){p(this.promise,this.onRejected,E)};function p(E,k,N){o(function(){var I;try{I=k(N)}catch(z){return a.reject(E,z)}I===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,I)})}a.resolve=function(E,k){var N=w(v,k);if(N.status==="error")return a.reject(E,N.value);var I=N.value;if(I)y(E,I);else{E.state=u,E.outcome=k;for(var z=-1,O=E.queue.length;++z<O;)E.queue[z].callFulfilled(k)}return E},a.reject=function(E,k){E.state=l,E.outcome=k;for(var N=-1,I=E.queue.length;++N<I;)E.queue[N].callRejected(k);return E};function v(E){var k=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof k=="function")return function(){k.apply(E,arguments)}}function y(E,k){var N=!1;function I(K){N||(N=!0,a.reject(E,K))}function z(K){N||(N=!0,a.resolve(E,K))}function O(){k(z,I)}var M=w(O);M.status==="error"&&I(M.value)}function w(E,k){var N={};try{N.value=E(k),N.status="success"}catch(I){N.status="error",N.value=I}return N}f.resolve=x;function x(E){return E instanceof this?E:a.resolve(new this(s),E)}f.reject=b;function b(E){var k=new this(s);return a.reject(k,E)}f.all=m;function m(E){var k=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=E.length,I=!1;if(!N)return this.resolve([]);for(var z=new Array(N),O=0,M=-1,K=new this(s);++M<N;)D(E[M],M);return K;function D(L,q){k.resolve(L).then(G,function(te){I||(I=!0,a.reject(K,te))});function G(te){z[q]=te,++O===N&&!I&&(I=!0,a.resolve(K,z))}}}f.race=S;function S(E){var k=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=E.length,I=!1;if(!N)return this.resolve([]);for(var z=-1,O=new this(s);++z<N;)M(E[z]);return O;function M(K){k.resolve(K).then(function(D){I||(I=!0,a.resolve(O,D))},function(D){I||(I=!0,a.reject(O,D))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof Ri<"u"?Ri:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V};function s(V,le){if(!(V instanceof le))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(V){return}}var l=a();function u(){try{if(!l||!l.open)return!1;var V=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),le=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!V||le)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(Q){return!1}}function d(V,le){V=V||[],le=le||{};try{return new Blob(V,le)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var Q=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ce=new Q,we=0;we<V.length;we+=1)ce.append(V[we]);return ce.getBlob(le.type)}}typeof Promise>"u"&&n(3);var f=Promise;function h(V,le){le&&V.then(function(Q){le(null,Q)},function(Q){le(Q)})}function p(V,le,Q){typeof le=="function"&&V.then(le),typeof Q=="function"&&V.catch(Q)}function v(V){return typeof V!="string"&&(console.warn(V+" used as a key, but it is not a string."),V=String(V)),V}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",x=void 0,b={},m=Object.prototype.toString,S="readonly",E="readwrite";function k(V){for(var le=V.length,Q=new ArrayBuffer(le),ce=new Uint8Array(Q),we=0;we<le;we++)ce[we]=V.charCodeAt(we);return Q}function N(V){return new f(function(le){var Q=V.transaction(w,E),ce=d([""]);Q.objectStore(w).put(ce,"key"),Q.onabort=function(we){we.preventDefault(),we.stopPropagation(),le(!1)},Q.oncomplete=function(){var we=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);le(pe||!we||parseInt(we[1],10)>=43)}}).catch(function(){return!1})}function I(V){return typeof x=="boolean"?f.resolve(x):N(V).then(function(le){return x=le,x})}function z(V){var le=b[V.name],Q={};Q.promise=new f(function(ce,we){Q.resolve=ce,Q.reject=we}),le.deferredOperations.push(Q),le.dbReady?le.dbReady=le.dbReady.then(function(){return Q.promise}):le.dbReady=Q.promise}function O(V){var le=b[V.name],Q=le.deferredOperations.pop();if(Q)return Q.resolve(),Q.promise}function M(V,le){var Q=b[V.name],ce=Q.deferredOperations.pop();if(ce)return ce.reject(le),ce.promise}function K(V,le){return new f(function(Q,ce){if(b[V.name]=b[V.name]||se(),V.db)if(le)z(V),V.db.close();else return Q(V.db);var we=[V.name];le&&we.push(V.version);var pe=l.open.apply(l,we);le&&(pe.onupgradeneeded=function(Le){var Xe=pe.result;try{Xe.createObjectStore(V.storeName),Le.oldVersion<=1&&Xe.createObjectStore(w)}catch(Qe){if(Qe.name==="ConstraintError")console.warn('The database "'+V.name+'" has been upgraded from version '+Le.oldVersion+" to version "+Le.newVersion+', but the storage "'+V.storeName+'" already exists.');else throw Qe}}),pe.onerror=function(Le){Le.preventDefault(),ce(pe.error)},pe.onsuccess=function(){var Le=pe.result;Le.onversionchange=function(Xe){Xe.target.close()},Q(Le),O(V)}})}function D(V){return K(V,!1)}function L(V){return K(V,!0)}function q(V,le){if(!V.db)return!0;var Q=!V.db.objectStoreNames.contains(V.storeName),ce=V.version<V.db.version,we=V.version>V.db.version;if(ce&&(V.version!==le&&console.warn('The database "'+V.name+"\" can't be downgraded from version "+V.db.version+" to version "+V.version+"."),V.version=V.db.version),we||Q){if(Q){var pe=V.db.version+1;pe>V.version&&(V.version=pe)}return!0}return!1}function G(V){return new f(function(le,Q){var ce=new FileReader;ce.onerror=Q,ce.onloadend=function(we){var pe=btoa(we.target.result||"");le({__local_forage_encoded_blob:!0,data:pe,type:V.type})},ce.readAsBinaryString(V)})}function te(V){var le=k(atob(V.data));return d([le],{type:V.type})}function B(V){return V&&V.__local_forage_encoded_blob}function H(V){var le=this,Q=le._initReady().then(function(){var ce=b[le._dbInfo.name];if(ce&&ce.dbReady)return ce.dbReady});return p(Q,V,V),Q}function $(V){z(V);for(var le=b[V.name],Q=le.forages,ce=0;ce<Q.length;ce++){var we=Q[ce];we._dbInfo.db&&(we._dbInfo.db.close(),we._dbInfo.db=null)}return V.db=null,D(V).then(function(pe){return V.db=pe,q(V)?L(V):pe}).then(function(pe){V.db=le.db=pe;for(var Le=0;Le<Q.length;Le++)Q[Le]._dbInfo.db=pe}).catch(function(pe){throw M(V,pe),pe})}function Y(V,le,Q,ce){ce===void 0&&(ce=1);try{var we=V.db.transaction(V.storeName,le);Q(null,we)}catch(pe){if(ce>0&&(!V.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return f.resolve().then(function(){if(!V.db||pe.name==="NotFoundError"&&!V.db.objectStoreNames.contains(V.storeName)&&V.version<=V.db.version)return V.db&&(V.version=V.db.version+1),L(V)}).then(function(){return $(V).then(function(){Y(V,le,Q,ce-1)})}).catch(Q);Q(pe)}}function se(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ue(V){var le=this,Q={db:null};if(V)for(var ce in V)Q[ce]=V[ce];var we=b[Q.name];we||(we=se(),b[Q.name]=we),we.forages.push(le),le._initReady||(le._initReady=le.ready,le.ready=H);var pe=[];function Le(){return f.resolve()}for(var Xe=0;Xe<we.forages.length;Xe++){var Qe=we.forages[Xe];Qe!==le&&pe.push(Qe._initReady().catch(Le))}var Je=we.forages.slice(0);return f.all(pe).then(function(){return Q.db=we.db,D(Q)}).then(function(lt){return Q.db=lt,q(Q,le._defaultConfig.version)?L(Q):lt}).then(function(lt){Q.db=we.db=lt,le._dbInfo=Q;for(var St=0;St<Je.length;St++){var Bt=Je[St];Bt!==le&&(Bt._dbInfo.db=Q.db,Bt._dbInfo.version=Q.version)}})}function Ce(V,le){var Q=this;V=v(V);var ce=new f(function(we,pe){Q.ready().then(function(){Y(Q._dbInfo,S,function(Le,Xe){if(Le)return pe(Le);try{var Qe=Xe.objectStore(Q._dbInfo.storeName),Je=Qe.get(V);Je.onsuccess=function(){var lt=Je.result;lt===void 0&&(lt=null),B(lt)&&(lt=te(lt)),we(lt)},Je.onerror=function(){pe(Je.error)}}catch(lt){pe(lt)}})}).catch(pe)});return h(ce,le),ce}function Ne(V,le){var Q=this,ce=new f(function(we,pe){Q.ready().then(function(){Y(Q._dbInfo,S,function(Le,Xe){if(Le)return pe(Le);try{var Qe=Xe.objectStore(Q._dbInfo.storeName),Je=Qe.openCursor(),lt=1;Je.onsuccess=function(){var St=Je.result;if(St){var Bt=St.value;B(Bt)&&(Bt=te(Bt));var Qt=V(Bt,St.key,lt++);Qt!==void 0?we(Qt):St.continue()}else we()},Je.onerror=function(){pe(Je.error)}}catch(St){pe(St)}})}).catch(pe)});return h(ce,le),ce}function Te(V,le,Q){var ce=this;V=v(V);var we=new f(function(pe,Le){var Xe;ce.ready().then(function(){return Xe=ce._dbInfo,m.call(le)==="[object Blob]"?I(Xe.db).then(function(Qe){return Qe?le:G(le)}):le}).then(function(Qe){Y(ce._dbInfo,E,function(Je,lt){if(Je)return Le(Je);try{var St=lt.objectStore(ce._dbInfo.storeName);Qe===null&&(Qe=void 0);var Bt=St.put(Qe,V);lt.oncomplete=function(){Qe===void 0&&(Qe=null),pe(Qe)},lt.onabort=lt.onerror=function(){var Qt=Bt.error?Bt.error:Bt.transaction.error;Le(Qt)}}catch(Qt){Le(Qt)}})}).catch(Le)});return h(we,Q),we}function U(V,le){var Q=this;V=v(V);var ce=new f(function(we,pe){Q.ready().then(function(){Y(Q._dbInfo,E,function(Le,Xe){if(Le)return pe(Le);try{var Qe=Xe.objectStore(Q._dbInfo.storeName),Je=Qe.delete(V);Xe.oncomplete=function(){we()},Xe.onerror=function(){pe(Je.error)},Xe.onabort=function(){var lt=Je.error?Je.error:Je.transaction.error;pe(lt)}}catch(lt){pe(lt)}})}).catch(pe)});return h(ce,le),ce}function ee(V){var le=this,Q=new f(function(ce,we){le.ready().then(function(){Y(le._dbInfo,E,function(pe,Le){if(pe)return we(pe);try{var Xe=Le.objectStore(le._dbInfo.storeName),Qe=Xe.clear();Le.oncomplete=function(){ce()},Le.onabort=Le.onerror=function(){var Je=Qe.error?Qe.error:Qe.transaction.error;we(Je)}}catch(Je){we(Je)}})}).catch(we)});return h(Q,V),Q}function re(V){var le=this,Q=new f(function(ce,we){le.ready().then(function(){Y(le._dbInfo,S,function(pe,Le){if(pe)return we(pe);try{var Xe=Le.objectStore(le._dbInfo.storeName),Qe=Xe.count();Qe.onsuccess=function(){ce(Qe.result)},Qe.onerror=function(){we(Qe.error)}}catch(Je){we(Je)}})}).catch(we)});return h(Q,V),Q}function De(V,le){var Q=this,ce=new f(function(we,pe){if(V<0){we(null);return}Q.ready().then(function(){Y(Q._dbInfo,S,function(Le,Xe){if(Le)return pe(Le);try{var Qe=Xe.objectStore(Q._dbInfo.storeName),Je=!1,lt=Qe.openKeyCursor();lt.onsuccess=function(){var St=lt.result;if(!St){we(null);return}V===0||Je?we(St.key):(Je=!0,St.advance(V))},lt.onerror=function(){pe(lt.error)}}catch(St){pe(St)}})}).catch(pe)});return h(ce,le),ce}function Ye(V){var le=this,Q=new f(function(ce,we){le.ready().then(function(){Y(le._dbInfo,S,function(pe,Le){if(pe)return we(pe);try{var Xe=Le.objectStore(le._dbInfo.storeName),Qe=Xe.openKeyCursor(),Je=[];Qe.onsuccess=function(){var lt=Qe.result;if(!lt){ce(Je);return}Je.push(lt.key),lt.continue()},Qe.onerror=function(){we(Qe.error)}}catch(lt){we(lt)}})}).catch(we)});return h(Q,V),Q}function ze(V,le){le=y.apply(this,arguments);var Q=this.config();V=typeof V!="function"&&V||{},V.name||(V.name=V.name||Q.name,V.storeName=V.storeName||Q.storeName);var ce=this,we;if(!V.name)we=f.reject("Invalid arguments");else{var pe=V.name===Q.name&&ce._dbInfo.db,Le=pe?f.resolve(ce._dbInfo.db):D(V).then(function(Xe){var Qe=b[V.name],Je=Qe.forages;Qe.db=Xe;for(var lt=0;lt<Je.length;lt++)Je[lt]._dbInfo.db=Xe;return Xe});V.storeName?we=Le.then(function(Xe){if(Xe.objectStoreNames.contains(V.storeName)){var Qe=Xe.version+1;z(V);var Je=b[V.name],lt=Je.forages;Xe.close();for(var St=0;St<lt.length;St++){var Bt=lt[St];Bt._dbInfo.db=null,Bt._dbInfo.version=Qe}var Qt=new f(function(an,Dn){var jt=l.open(V.name,Qe);jt.onerror=function(Cr){var ol=jt.result;ol.close(),Dn(Cr)},jt.onupgradeneeded=function(){var Cr=jt.result;Cr.deleteObjectStore(V.storeName)},jt.onsuccess=function(){var Cr=jt.result;Cr.close(),an(Cr)}});return Qt.then(function(an){Je.db=an;for(var Dn=0;Dn<lt.length;Dn++){var jt=lt[Dn];jt._dbInfo.db=an,O(jt._dbInfo)}}).catch(function(an){throw(M(V,an)||f.resolve()).catch(function(){}),an})}}):we=Le.then(function(Xe){z(V);var Qe=b[V.name],Je=Qe.forages;Xe.close();for(var lt=0;lt<Je.length;lt++){var St=Je[lt];St._dbInfo.db=null}var Bt=new f(function(Qt,an){var Dn=l.deleteDatabase(V.name);Dn.onerror=function(){var jt=Dn.result;jt&&jt.close(),an(Dn.error)},Dn.onblocked=function(){console.warn('dropInstance blocked for database "'+V.name+'" until all open connections are closed')},Dn.onsuccess=function(){var jt=Dn.result;jt&&jt.close(),Qt(jt)}});return Bt.then(function(Qt){Qe.db=Qt;for(var an=0;an<Je.length;an++){var Dn=Je[an];O(Dn._dbInfo)}}).catch(function(Qt){throw(M(V,Qt)||f.resolve()).catch(function(){}),Qt})})}return h(we,le),we}var ie={_driver:"asyncStorage",_initStorage:ue,_support:u(),iterate:Ne,getItem:Ce,setItem:Te,removeItem:U,clear:ee,length:re,key:De,keys:Ye,dropInstance:ze};function fe(){return typeof openDatabase=="function"}var Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",We="~~local_forage_type~",Ue=/^~~local_forage_type~([^~]+)~/,Ke="__lfsc__:",he=Ke.length,Be="arbf",qe="blob",$e="si08",Nt="ui08",yn="uic8",Ct="si16",rn="si32",F="ur16",A="ui32",R="fl32",J="fl64",de=he+Be.length,je=Object.prototype.toString;function Fe(V){var le=V.length*.75,Q=V.length,ce,we=0,pe,Le,Xe,Qe;V[V.length-1]==="="&&(le--,V[V.length-2]==="="&&le--);var Je=new ArrayBuffer(le),lt=new Uint8Array(Je);for(ce=0;ce<Q;ce+=4)pe=Se.indexOf(V[ce]),Le=Se.indexOf(V[ce+1]),Xe=Se.indexOf(V[ce+2]),Qe=Se.indexOf(V[ce+3]),lt[we++]=pe<<2|Le>>4,lt[we++]=(Le&15)<<4|Xe>>2,lt[we++]=(Xe&3)<<6|Qe&63;return Je}function Rt(V){var le=new Uint8Array(V),Q="",ce;for(ce=0;ce<le.length;ce+=3)Q+=Se[le[ce]>>2],Q+=Se[(le[ce]&3)<<4|le[ce+1]>>4],Q+=Se[(le[ce+1]&15)<<2|le[ce+2]>>6],Q+=Se[le[ce+2]&63];return le.length%3===2?Q=Q.substring(0,Q.length-1)+"=":le.length%3===1&&(Q=Q.substring(0,Q.length-2)+"=="),Q}function Gt(V,le){var Q="";if(V&&(Q=je.call(V)),V&&(Q==="[object ArrayBuffer]"||V.buffer&&je.call(V.buffer)==="[object ArrayBuffer]")){var ce,we=Ke;V instanceof ArrayBuffer?(ce=V,we+=Be):(ce=V.buffer,Q==="[object Int8Array]"?we+=$e:Q==="[object Uint8Array]"?we+=Nt:Q==="[object Uint8ClampedArray]"?we+=yn:Q==="[object Int16Array]"?we+=Ct:Q==="[object Uint16Array]"?we+=F:Q==="[object Int32Array]"?we+=rn:Q==="[object Uint32Array]"?we+=A:Q==="[object Float32Array]"?we+=R:Q==="[object Float64Array]"?we+=J:le(new Error("Failed to get type for BinaryArray"))),le(we+Rt(ce))}else if(Q==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Le=We+V.type+"~"+Rt(this.result);le(Ke+qe+Le)},pe.readAsArrayBuffer(V)}else try{le(JSON.stringify(V))}catch(Le){console.error("Couldn't convert value into a JSON string: ",V),le(null,Le)}}function st(V){if(V.substring(0,he)!==Ke)return JSON.parse(V);var le=V.substring(de),Q=V.substring(he,de),ce;if(Q===qe&&Ue.test(le)){var we=le.match(Ue);ce=we[1],le=le.substring(we[0].length)}var pe=Fe(le);switch(Q){case Be:return pe;case qe:return d([pe],{type:ce});case $e:return new Int8Array(pe);case Nt:return new Uint8Array(pe);case yn:return new Uint8ClampedArray(pe);case Ct:return new Int16Array(pe);case F:return new Uint16Array(pe);case rn:return new Int32Array(pe);case A:return new Uint32Array(pe);case R:return new Float32Array(pe);case J:return new Float64Array(pe);default:throw new Error("Unkown type: "+Q)}}var Jt={serialize:Gt,deserialize:st,stringToBuffer:Fe,bufferToString:Rt};function $t(V,le,Q,ce){V.executeSql("CREATE TABLE IF NOT EXISTS "+le.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Q,ce)}function so(V){var le=this,Q={db:null};if(V)for(var ce in V)Q[ce]=typeof V[ce]!="string"?V[ce].toString():V[ce];var we=new f(function(pe,Le){try{Q.db=openDatabase(Q.name,String(Q.version),Q.description,Q.size)}catch(Xe){return Le(Xe)}Q.db.transaction(function(Xe){$t(Xe,Q,function(){le._dbInfo=Q,pe()},function(Qe,Je){Le(Je)})},Le)});return Q.serializer=Jt,we}function at(V,le,Q,ce,we,pe){V.executeSql(Q,ce,we,function(Le,Xe){Xe.code===Xe.SYNTAX_ERR?Le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[le.storeName],function(Qe,Je){Je.rows.length?pe(Qe,Xe):$t(Qe,le,function(){Qe.executeSql(Q,ce,we,pe)},pe)},pe):pe(Le,Xe)},pe)}function Do(V,le){var Q=this;V=v(V);var ce=new f(function(we,pe){Q.ready().then(function(){var Le=Q._dbInfo;Le.db.transaction(function(Xe){at(Xe,Le,"SELECT * FROM "+Le.storeName+" WHERE key = ? LIMIT 1",[V],function(Qe,Je){var lt=Je.rows.length?Je.rows.item(0).value:null;lt&&(lt=Le.serializer.deserialize(lt)),we(lt)},function(Qe,Je){pe(Je)})})}).catch(pe)});return h(ce,le),ce}function Lo(V,le){var Q=this,ce=new f(function(we,pe){Q.ready().then(function(){var Le=Q._dbInfo;Le.db.transaction(function(Xe){at(Xe,Le,"SELECT * FROM "+Le.storeName,[],function(Qe,Je){for(var lt=Je.rows,St=lt.length,Bt=0;Bt<St;Bt++){var Qt=lt.item(Bt),an=Qt.value;if(an&&(an=Le.serializer.deserialize(an)),an=V(an,Qt.key,Bt+1),an!==void 0){we(an);return}}we()},function(Qe,Je){pe(Je)})})}).catch(pe)});return h(ce,le),ce}function Fo(V,le,Q,ce){var we=this;V=v(V);var pe=new f(function(Le,Xe){we.ready().then(function(){le===void 0&&(le=null);var Qe=le,Je=we._dbInfo;Je.serializer.serialize(le,function(lt,St){St?Xe(St):Je.db.transaction(function(Bt){at(Bt,Je,"INSERT OR REPLACE INTO "+Je.storeName+" (key, value) VALUES (?, ?)",[V,lt],function(){Le(Qe)},function(Qt,an){Xe(an)})},function(Bt){if(Bt.code===Bt.QUOTA_ERR){if(ce>0){Le(Fo.apply(we,[V,Qe,Q,ce-1]));return}Xe(Bt)}})})}).catch(Xe)});return h(pe,Q),pe}function vs(V,le,Q){return Fo.apply(this,[V,le,Q,1])}function ao(V,le){var Q=this;V=v(V);var ce=new f(function(we,pe){Q.ready().then(function(){var Le=Q._dbInfo;Le.db.transaction(function(Xe){at(Xe,Le,"DELETE FROM "+Le.storeName+" WHERE key = ?",[V],function(){we()},function(Qe,Je){pe(Je)})})}).catch(pe)});return h(ce,le),ce}function aa(V){var le=this,Q=new f(function(ce,we){le.ready().then(function(){var pe=le._dbInfo;pe.db.transaction(function(Le){at(Le,pe,"DELETE FROM "+pe.storeName,[],function(){ce()},function(Xe,Qe){we(Qe)})})}).catch(we)});return h(Q,V),Q}function X(V){var le=this,Q=new f(function(ce,we){le.ready().then(function(){var pe=le._dbInfo;pe.db.transaction(function(Le){at(Le,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(Xe,Qe){var Je=Qe.rows.item(0).c;ce(Je)},function(Xe,Qe){we(Qe)})})}).catch(we)});return h(Q,V),Q}function ne(V,le){var Q=this,ce=new f(function(we,pe){Q.ready().then(function(){var Le=Q._dbInfo;Le.db.transaction(function(Xe){at(Xe,Le,"SELECT key FROM "+Le.storeName+" WHERE id = ? LIMIT 1",[V+1],function(Qe,Je){var lt=Je.rows.length?Je.rows.item(0).key:null;we(lt)},function(Qe,Je){pe(Je)})})}).catch(pe)});return h(ce,le),ce}function tt(V){var le=this,Q=new f(function(ce,we){le.ready().then(function(){var pe=le._dbInfo;pe.db.transaction(function(Le){at(Le,pe,"SELECT key FROM "+pe.storeName,[],function(Xe,Qe){for(var Je=[],lt=0;lt<Qe.rows.length;lt++)Je.push(Qe.rows.item(lt).key);ce(Je)},function(Xe,Qe){we(Qe)})})}).catch(we)});return h(Q,V),Q}function ot(V){return new f(function(le,Q){V.transaction(function(ce){ce.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(we,pe){for(var Le=[],Xe=0;Xe<pe.rows.length;Xe++)Le.push(pe.rows.item(Xe).name);le({db:V,storeNames:Le})},function(we,pe){Q(pe)})},function(ce){Q(ce)})})}function mt(V,le){le=y.apply(this,arguments);var Q=this.config();V=typeof V!="function"&&V||{},V.name||(V.name=V.name||Q.name,V.storeName=V.storeName||Q.storeName);var ce=this,we;return V.name?we=new f(function(pe){var Le;V.name===Q.name?Le=ce._dbInfo.db:Le=openDatabase(V.name,"","",0),V.storeName?pe({db:Le,storeNames:[V.storeName]}):pe(ot(Le))}).then(function(pe){return new f(function(Le,Xe){pe.db.transaction(function(Qe){function Je(Qt){return new f(function(an,Dn){Qe.executeSql("DROP TABLE IF EXISTS "+Qt,[],function(){an()},function(jt,Cr){Dn(Cr)})})}for(var lt=[],St=0,Bt=pe.storeNames.length;St<Bt;St++)lt.push(Je(pe.storeNames[St]));f.all(lt).then(function(){Le()}).catch(function(Qt){Xe(Qt)})},function(Qe){Xe(Qe)})})}):we=f.reject("Invalid arguments"),h(we,le),we}var Ot={_driver:"webSQLStorage",_initStorage:so,_support:fe(),iterate:Lo,getItem:Do,setItem:vs,removeItem:ao,clear:aa,length:X,key:ne,keys:tt,dropInstance:mt};function Zt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(V){return!1}}function xs(V,le){var Q=V.name+"/";return V.storeName!==le.storeName&&(Q+=V.storeName+"/"),Q}function Er(){var V="_localforage_support_test";try{return localStorage.setItem(V,!0),localStorage.removeItem(V),!1}catch(le){return!0}}function lo(){return!Er()||localStorage.length>0}function Bo(V){var le=this,Q={};if(V)for(var ce in V)Q[ce]=V[ce];return Q.keyPrefix=xs(V,le._defaultConfig),lo()?(le._dbInfo=Q,Q.serializer=Jt,f.resolve()):f.reject()}function la(V){var le=this,Q=le.ready().then(function(){for(var ce=le._dbInfo.keyPrefix,we=localStorage.length-1;we>=0;we--){var pe=localStorage.key(we);pe.indexOf(ce)===0&&localStorage.removeItem(pe)}});return h(Q,V),Q}function Ur(V,le){var Q=this;V=v(V);var ce=Q.ready().then(function(){var we=Q._dbInfo,pe=localStorage.getItem(we.keyPrefix+V);return pe&&(pe=we.serializer.deserialize(pe)),pe});return h(ce,le),ce}function Vr(V,le){var Q=this,ce=Q.ready().then(function(){for(var we=Q._dbInfo,pe=we.keyPrefix,Le=pe.length,Xe=localStorage.length,Qe=1,Je=0;Je<Xe;Je++){var lt=localStorage.key(Je);if(lt.indexOf(pe)===0){var St=localStorage.getItem(lt);if(St&&(St=we.serializer.deserialize(St)),St=V(St,lt.substring(Le),Qe++),St!==void 0)return St}}});return h(ce,le),ce}function mr(V,le){var Q=this,ce=Q.ready().then(function(){var we=Q._dbInfo,pe;try{pe=localStorage.key(V)}catch(Le){pe=null}return pe&&(pe=pe.substring(we.keyPrefix.length)),pe});return h(ce,le),ce}function Si(V){var le=this,Q=le.ready().then(function(){for(var ce=le._dbInfo,we=localStorage.length,pe=[],Le=0;Le<we;Le++){var Xe=localStorage.key(Le);Xe.indexOf(ce.keyPrefix)===0&&pe.push(Xe.substring(ce.keyPrefix.length))}return pe});return h(Q,V),Q}function uo(V){var le=this,Q=le.keys().then(function(ce){return ce.length});return h(Q,V),Q}function Qn(V,le){var Q=this;V=v(V);var ce=Q.ready().then(function(){var we=Q._dbInfo;localStorage.removeItem(we.keyPrefix+V)});return h(ce,le),ce}function kr(V,le,Q){var ce=this;V=v(V);var we=ce.ready().then(function(){le===void 0&&(le=null);var pe=le;return new f(function(Le,Xe){var Qe=ce._dbInfo;Qe.serializer.serialize(le,function(Je,lt){if(lt)Xe(lt);else try{localStorage.setItem(Qe.keyPrefix+V,Je),Le(pe)}catch(St){(St.name==="QuotaExceededError"||St.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Xe(St),Xe(St)}})})});return h(we,Q),we}function co(V,le){if(le=y.apply(this,arguments),V=typeof V!="function"&&V||{},!V.name){var Q=this.config();V.name=V.name||Q.name,V.storeName=V.storeName||Q.storeName}var ce=this,we;return V.name?we=new f(function(pe){V.storeName?pe(xs(V,ce._defaultConfig)):pe(V.name+"/")}).then(function(pe){for(var Le=localStorage.length-1;Le>=0;Le--){var Xe=localStorage.key(Le);Xe.indexOf(pe)===0&&localStorage.removeItem(Xe)}}):we=f.reject("Invalid arguments"),h(we,le),we}var cu={_driver:"localStorageWrapper",_initStorage:Bo,_support:Zt(),iterate:Vr,getItem:Ur,setItem:kr,removeItem:Qn,clear:la,length:uo,key:mr,keys:Si,dropInstance:co},rl=function(le,Q){return le===Q||typeof le=="number"&&typeof Q=="number"&&isNaN(le)&&isNaN(Q)},vn=function(le,Q){for(var ce=le.length,we=0;we<ce;){if(rl(le[we],Q))return!0;we++}return!1},Wi=Array.isArray||function(V){return Object.prototype.toString.call(V)==="[object Array]"},yr={},il={},qr={INDEXEDDB:ie,WEBSQL:Ot,LOCALSTORAGE:cu},ua=[qr.INDEXEDDB._driver,qr.WEBSQL._driver,qr.LOCALSTORAGE._driver],zo=["dropInstance"],bs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(zo),Ui={description:"",driver:ua.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function du(V,le){V[le]=function(){var Q=arguments;return V.ready().then(function(){return V[le].apply(V,Q)})}}function Ho(){for(var V=1;V<arguments.length;V++){var le=arguments[V];if(le)for(var Q in le)le.hasOwnProperty(Q)&&(Wi(le[Q])?arguments[0][Q]=le[Q].slice():arguments[0][Q]=le[Q])}return arguments[0]}var fu=function(){function V(le){s(this,V);for(var Q in qr)if(qr.hasOwnProperty(Q)){var ce=qr[Q],we=ce._driver;this[Q]=we,yr[we]||this.defineDriver(ce)}this._defaultConfig=Ho({},Ui),this._config=Ho({},this._defaultConfig,le),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return V.prototype.config=function(Q){if((typeof Q>"u"?"undefined":o(Q))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ce in Q){if(ce==="storeName"&&(Q[ce]=Q[ce].replace(/\W/g,"_")),ce==="version"&&typeof Q[ce]!="number")return new Error("Database version must be a number.");this._config[ce]=Q[ce]}return"driver"in Q&&Q.driver?this.setDriver(this._config.driver):!0}else return typeof Q=="string"?this._config[Q]:this._config},V.prototype.defineDriver=function(Q,ce,we){var pe=new f(function(Le,Xe){try{var Qe=Q._driver,Je=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Q._driver){Xe(Je);return}for(var lt=bs.concat("_initStorage"),St=0,Bt=lt.length;St<Bt;St++){var Qt=lt[St],an=!vn(zo,Qt);if((an||Q[Qt])&&typeof Q[Qt]!="function"){Xe(Je);return}}var Dn=function(){for(var ol=function(Uo){return function(){var Mh=new Error("Method "+Uo+" is not implemented by the current driver"),Qc=f.reject(Mh);return h(Qc,arguments[arguments.length-1]),Qc}},Xc=0,Kr=zo.length;Xc<Kr;Xc++){var Wo=zo[Xc];Q[Wo]||(Q[Wo]=ol(Wo))}};Dn();var jt=function(ol){yr[Qe]&&console.info("Redefining LocalForage driver: "+Qe),yr[Qe]=Q,il[Qe]=ol,Le()};"_support"in Q?Q._support&&typeof Q._support=="function"?Q._support().then(jt,Xe):jt(!!Q._support):jt(!0)}catch(Cr){Xe(Cr)}});return p(pe,ce,we),pe},V.prototype.driver=function(){return this._driver||null},V.prototype.getDriver=function(Q,ce,we){var pe=yr[Q]?f.resolve(yr[Q]):f.reject(new Error("Driver not found."));return p(pe,ce,we),pe},V.prototype.getSerializer=function(Q){var ce=f.resolve(Jt);return p(ce,Q),ce},V.prototype.ready=function(Q){var ce=this,we=ce._driverSet.then(function(){return ce._ready===null&&(ce._ready=ce._initDriver()),ce._ready});return p(we,Q,Q),we},V.prototype.setDriver=function(Q,ce,we){var pe=this;Wi(Q)||(Q=[Q]);var Le=this._getSupportedDrivers(Q);function Xe(){pe._config.driver=pe.driver()}function Qe(St){return pe._extend(St),Xe(),pe._ready=pe._initStorage(pe._config),pe._ready}function Je(St){return function(){var Bt=0;function Qt(){for(;Bt<St.length;){var an=St[Bt];return Bt++,pe._dbInfo=null,pe._ready=null,pe.getDriver(an).then(Qe).catch(Qt)}Xe();var Dn=new Error("No available storage method found.");return pe._driverSet=f.reject(Dn),pe._driverSet}return Qt()}}var lt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=lt.then(function(){var St=Le[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(St).then(function(Bt){pe._driver=Bt._driver,Xe(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=Je(Le)})}).catch(function(){Xe();var St=new Error("No available storage method found.");return pe._driverSet=f.reject(St),pe._driverSet}),p(this._driverSet,ce,we),this._driverSet},V.prototype.supports=function(Q){return!!il[Q]},V.prototype._extend=function(Q){Ho(this,Q)},V.prototype._getSupportedDrivers=function(Q){for(var ce=[],we=0,pe=Q.length;we<pe;we++){var Le=Q[we];this.supports(Le)&&ce.push(Le)}return ce},V.prototype._wrapLibraryMethodsWithReady=function(){for(var Q=0,ce=bs.length;Q<ce;Q++)du(this,bs[Q])},V.prototype.createInstance=function(Q){return new V(Q)},V}(),Ut=new fu;r.exports=Ut},{3:3}]},{},[4])(4)})})(w3);var IL=w3.exports;const Wg=ta(IL),ig={SecureStorage:"ionicSecureStorage",IndexedDB:Wg.INDEXEDDB,LocalStorage:Wg.LOCALSTORAGE},Ak={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[ig.SecureStorage,ig.IndexedDB,ig.LocalStorage]};let PL=class{constructor(t=Ak){this._db=null,this._secureStorageDriver=null;const n=Object.assign({},Ak,t||{});this._config=n}async create(){const t=Wg.createInstance(this._config);return this._db=t,await t.setDriver(this._config.driverOrder||[]),this}async defineDriver(t){return t._driver===ig.SecureStorage&&(this._secureStorageDriver=t),Wg.defineDriver(t)}get driver(){var t;return((t=this._db)===null||t===void 0?void 0:t.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(t){return this.assertDb().getItem(t)}set(t,n){return this.assertDb().setItem(t,n)}remove(t){return this.assertDb().removeItem(t)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(t){return this.assertDb().iterate(t)}setEncryptionKey(t){var n;if(this._secureStorageDriver)(n=this._secureStorageDriver)===null||n===void 0||n.setEncryptionKey(t);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}};class hy{constructor(t){Ko(this,"store");Ko(this,"isCreated",!1);this.store=new PL({name:t}),this.createStorage()}async createStorage(){await this.store.create(),this.isCreated=!0}get(t){return this.store.get(t)}set(t,n){return this.store.set(t,n)}remove(t){return this.store.remove(t)}clear(){return this.store.clear()}keys(){return this.store.keys()}length(){return this.store.length()}forEach(t){return this.store.forEach(t)}}const _3=new hy("settings"),Lr=new hy("auth"),hn=new hy("sync"),Zd=new hy("misc"),OL={isLoggedIn:!1,user:null,synced_characters:[]},rr=ra(OL),$L=async()=>{const e=await Lr.get("token");if(e){const t=Mc(e);rr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]})}},py=async e=>{await Lr.set("token",e);const t=Mc(e);return rr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characters||[]}),t},Nk=e=>{rr.set(t=>({...t,synced_characters:e})),hn.set("synced_characters",e)};$L();function ML(e,t){const[n,r]=j.useState(null),i=j.useRef(null);return j.useEffect(()=>{let o=null;const s=()=>{if(e){if(o=document.querySelector(e),o){const a=o.getBoundingClientRect();r(l=>!l||JSON.stringify(l)!==JSON.stringify(a)?a:l)}i.current=requestAnimationFrame(s)}};return e&&s(),()=>{i.current&&cancelAnimationFrame(i.current)}},[e,t]),n}function DL(e,t){if(!e||t==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const n=12;switch(t){case"top":return{top:"".concat(e.top-n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, -100%)"};case"bottom":return{top:"".concat(e.bottom+n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, 0)"};case"left":return{top:"".concat(e.top,"px"),left:"".concat(e.left-n,"px"),transform:"translate(-100%, 0)"};case"right":return{top:"".concat(e.top,"px"),left:"".concat(e.right+n,"px"),transform:"translate(0, 0)"};default:return{top:"".concat(e.bottom+n,"px"),left:"".concat(e.left,"px"),transform:"translate(0, 0)"}}}const LL=({steps:e,onFinish:t})=>{const[n,r]=j.useState(0),i=ML(e[n].selector,!0),o=nu(),s=e[n],a=()=>{s.navTo&&o(s.navTo),n+1<e.length?r(n+1):t()};return i?ZT.createPortal(c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 pointer-events-auto"}),c.jsx("div",{className:"fixed border-2 border-yellow-400 pointer-events-auto z-50 rounded-lg transition-all duration-300",style:{top:i.top+window.scrollY,left:i.left+window.scrollX,width:i.width,height:i.height}}),c.jsxs("div",{className:"fixed z-50 p-4 bg-white text-black rounded shadow-xl max-w-xs",style:DL(i,s.position||"bottom"),children:[c.jsx("p",{className:"mb-2",children:s.content}),!s.waitForClick&&c.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded",onClick:a,children:n+1<e.length?"Next":"Finish"})]})]}),document.body):null},FL=[{id:"step1",selector:"#nav-Home",content:"Welcome to the app! This is the home page, where you can see our latest news and updates.",position:"bottom"},{id:"step2",selector:"#nav-Characters",content:"This is the character manager, where you can create and manage your characters. You can also import characters from json files.",position:"bottom",navTo:"characters"},{id:"step3",selector:"#nav-Library",content:"Library is where you can find all the systems you have downloaded. You can also create your own systems here.",position:"bottom",navTo:"library"},{id:"step4",selector:"#nav-Settings",content:"And this is the settings page, where you can change your settings and preferences. You can also manage your account here.",position:"top",navTo:"settings"},{id:"step5",selector:"#nav-Marketplace",content:"This is the marketplace, where you can find systems to use. You can search for systems by name or filter by license type.",position:"bottom",navTo:"marketplace"}];/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S3=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>j.createElement("svg",{ref:l,...zL,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:S3("lucide",i),...a},[...s.map(([u,d])=>j.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=(e,t)=>{const n=j.forwardRef(({className:r,...i},o)=>j.createElement(HL,{ref:o,iconNode:t,className:S3("lucide-".concat(BL(e)),r),...i}));return n.displayName="".concat(e),n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=ru("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=ru("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=ru("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=ru("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=ru("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=ru("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=ru("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),GL={success:"bg-green-600 text-white",error:"bg-red-600 text-white"},YL=({id:e,message:t,type:n="success",onClose:r})=>c.jsxs("div",{className:"rounded-lg shadow-lg px-4 py-3 flex items-center justify-between w-72 ".concat(GL[n]),children:[c.jsx("span",{children:t}),c.jsx("button",{onClick:r,children:c.jsx(E3,{className:"w-4 h-4 ml-2 opacity-80 hover:opacity-100"})})]}),vr=[];for(let e=0;e<256;++e)vr.push((e+256).toString(16).slice(1));function XL(e,t=0){return(vr[e[t+0]]+vr[e[t+1]]+vr[e[t+2]]+vr[e[t+3]]+"-"+vr[e[t+4]]+vr[e[t+5]]+"-"+vr[e[t+6]]+vr[e[t+7]]+"-"+vr[e[t+8]]+vr[e[t+9]]+"-"+vr[e[t+10]]+vr[e[t+11]]+vr[e[t+12]]+vr[e[t+13]]+vr[e[t+14]]+vr[e[t+15]]).toLowerCase()}let p0;const JL=new Uint8Array(16);function QL(){if(!p0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");p0=crypto.getRandomValues.bind(crypto)}return p0(JL)}const ZL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rk={randomUUID:ZL};function y1(e,t,n){var i,o,s;if(Rk.randomUUID&&!e)return Rk.randomUUID();e=e||{};const r=(s=(o=e.random)!=null?o:(i=e.rng)==null?void 0:i.call(e))!=null?s:QL();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,XL(r)}const v1=ra([]),k3=e=>{v1.set(t=>t.filter(n=>n.id!==e))},cn=(e,t="success",n=3e3)=>{const r=y1();v1.set(i=>[...i,{id:r,message:e,type:t}]),setTimeout(()=>k3(r),n)},eF=()=>{const e=v1.useValue();return c.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map(t=>c.jsx(YL,{...t,onClose:()=>k3(t.id)},t.id))})},Tk={primary:"fantasy-accent-gradient text-fantasy-dark transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40 border-none",light:"text-neutral-900 bg-white border-neutral-300 hover:bg-neutral-100 focus:ring-neutral-100 dark:bg-neutral-800 dark:text-white dark:border-neutral-600 dark:hover:bg-neutral-700 dark:hover:border-neutral-600 dark:focus:ring-neutral-700",danger:"border-red-600 text-red-600 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-red-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition",disabled:"border-neutral-600 bg-neutral-400 text-fantasy-text-muted cursor-not-allowed opacity-50"},xt=({children:e,className:t="",color:n,disabled:r=!1,onClick:i,id:o})=>c.jsx("button",{id:o,type:"button",className:"".concat(r?Tk.disabled:Tk[n]," me-2.5 focus:ring-4 border focus:outline-none font-medium rounded-lg transition text-sm px-4 py-2 text-center ").concat(t),onClick:r?void 0:i,children:e}),Wn=({children:e,isOpen:t,onClose:n,className:r=""})=>c.jsx("div",{tabIndex:-1,"aria-hidden":"true",className:"".concat(t?"flex":"hidden"," bg-black/70 absolute top-0 right-0 left-0 bottom-0 z-50 justify-center items-center w-screen max-h-screen"),onClick:n,children:c.jsx("div",{className:"relative min-w-96 max-w-2xl",onClick:i=>i.stopPropagation(),children:c.jsx("div",{className:"relative rounded-lg shadow bg-fantasy-light border border-fantasy-border ".concat(r),children:e})})}),Un=({children:e,className:t=""})=>c.jsx("div",{className:t||"p-4 md:p-5 space-y-4 max-h-96 overflow-y-auto",children:e}),Xn=({children:e})=>c.jsx("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-neutral-700",children:e}),Vn=({title:e,onClose:t})=>c.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-neutral-700",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e}),t&&c.jsxs("button",{type:"button",onClick:t,className:"text-neutral-400 bg-transparent hover:bg-neutral-200 hover:text-neutral-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-neutral-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[c.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),c.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),tF=({yes:e,no:t})=>c.jsxs(Wn,{isOpen:!0,onClose:t,children:[c.jsx(Vn,{title:"Welcome Adventurer",onClose:t}),c.jsx(Un,{children:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Welcome to BardsBallad we're a System Agnostic TTRPG Character Manager"}),c.jsx("p",{children:"Seems you're new here. Would you like to take a tour?"})]})}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"light",onClick:t,children:"No Thank You"}),c.jsx(xt,{color:"primary",onClick:e,children:"Yes Please!"})]})]}),Vt=j.forwardRef(({id:e,label:t,placeholder:n,value:r,onChange:i,isValid:o,errorMessage:s,style:a,minNumber:l,maxNumber:u,type:d="text"},f)=>{const h=o?"":"text-red-700 dark:text-red-500",p=o?"border border-neutral-600":"bg-red-50 border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500",v=o?"":"text-red-600 dark:text-red-500";return c.jsxs("div",{className:"mb-6",style:a,ref:f,children:[c.jsx("label",{htmlFor:e,className:"".concat(h," block mb-2 text-sm font-medium"),children:t}),c.jsx("input",{id:e,type:d,value:r,min:l,max:u,onChange:y=>i(y.target.value),placeholder:n,className:"".concat(p," text-sm rounded-lg block w-full p-2.5 dark:bg-neutral-700 dark:placeholder:text-neutral-300")}),c.jsx("p",{className:"".concat(v," mt-2 text-sm"),children:o?"":s})]})}),nF="modulepreload",rF=function(e){return"/"+e},Ik={},iF=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=rF(l),l in Ik)return;Ik[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(l,'"]').concat(d)))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":nF,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(l))))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var lc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(lc||(lc={}));class g0 extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const oF=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},sF=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>t!==null?t.name:oF(e),o=()=>i()!=="web",s=f=>{const h=u.get(f);return!!(h!=null&&h.platforms.has(i())||a(f))},a=f=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===f)},l=f=>e.console.error(f),u=new Map,d=(f,h={})=>{const p=u.get(f);if(p)return console.warn('Capacitor plugin "'.concat(f,'" already registered. Cannot register plugins twice.')),p.proxy;const v=i(),y=a(f);let w;const x=async()=>(!w&&v in h?w=typeof h[v]=="function"?w=await h[v]():w=h[v]:t!==null&&!w&&"web"in h&&(w=typeof h.web=="function"?w=await h.web():w=h.web),w),b=(I,z)=>{var O,M;if(y){const K=y==null?void 0:y.methods.find(D=>z===D.name);if(K)return K.rtype==="promise"?D=>n.nativePromise(f,z.toString(),D):(D,L)=>n.nativeCallback(f,z.toString(),D,L);if(I)return(O=I[z])===null||O===void 0?void 0:O.bind(I)}else{if(I)return(M=I[z])===null||M===void 0?void 0:M.bind(I);throw new g0('"'.concat(f,'" plugin is not implemented on ').concat(v),lc.Unimplemented)}},m=I=>{let z;const O=(...M)=>{const K=x().then(D=>{const L=b(D,I);if(L){const q=L(...M);return z=q==null?void 0:q.remove,q}else throw new g0('"'.concat(f,".").concat(I,'()" is not implemented on ').concat(v),lc.Unimplemented)});return I==="addListener"&&(K.remove=async()=>z()),K};return O.toString=()=>"".concat(I.toString(),"() { [capacitor code] }"),Object.defineProperty(O,"name",{value:I,writable:!1,configurable:!1}),O},S=m("addListener"),E=m("removeListener"),k=(I,z)=>{const O=S({eventName:I},z),M=async()=>{const D=await O;E({eventName:I,callbackId:D},z)},K=new Promise(D=>O.then(()=>D({remove:M})));return K.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},K},N=new Proxy({},{get(I,z){switch(z){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?k:S;case"removeListener":return E;default:return m(z)}}});return r[f]=N,u.set(f,{name:f,proxy:N,platforms:new Set([...Object.keys(h),...y?[v]:[]])}),N};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=i,n.handleError=l,n.isNativePlatform=o,n.isPluginAvailable=s,n.registerPlugin=d,n.Exception=g0,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},aF=e=>e.Capacitor=sF(e),Pb=aF(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),x1=Pb.registerPlugin;class C3{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,n);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const i=this.listeners[t];if(!i){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}i.forEach(o=>o(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new Pb.Exception(t,lc.Unimplemented)}unavailable(t="not available"){return new Pb.Exception(t,lc.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const i=r.indexOf(n);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const Pk=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ok=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lF extends C3{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Ok(i).trim(),o=Ok(o).trim(),n[i]=o}),n}async setCookie(t){try{const n=Pk(t.key),r=Pk(t.value),i="; expires=".concat((t.expires||"").replace("expires=","")),o=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?"domain=".concat(t.url):"";document.cookie="".concat(n,"=").concat(r||"").concat(i,"; path=").concat(o,"; ").concat(s,";")}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie="".concat(t.key,"=; Max-Age=0")}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}x1("CapacitorCookies",{web:()=>new lF});const uF=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),cF=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,o,s)=>(i[o]=e[t[s]],i),{})},dF=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[o,s]=i;let a,l;return Array.isArray(s)?(l="",s.forEach(u=>{a=t?encodeURIComponent(u):u,l+="".concat(o,"=").concat(a,"&")}),l.slice(0,-1)):(a=t?encodeURIComponent(s):s,l="".concat(o,"=").concat(a)),"".concat(r,"&").concat(l)},"").substr(1):null,fF=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=cF(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))o.set(s,a);n.body=o.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((a,l)=>{o.append(l,a)});else for(const a of Object.keys(e.data))o.append(a,e.data[a]);n.body=o;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(i.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class hF extends C3{async request(t){const n=fF(t,t.webFetchExtra),r=dF(t.params,t.shouldEncodeUrlParams),i=r?"".concat(t.url,"?").concat(r):t.url,o=await fetch(i,n),s=o.headers.get("content-type")||"";let{responseType:a="text"}=o.ok?t:{};s.includes("application/json")&&(a="json");let l,u;switch(a){case"arraybuffer":case"blob":u=await o.blob(),l=await uF(u);break;case"json":l=await o.json();break;case"document":case"text":default:l=await o.text()}const d={};return o.headers.forEach((f,h)=>{d[h]=f}),{data:l,headers:d,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}x1("CapacitorHttp",{web:()=>new hF});const pF=x1("Device",{web:()=>iF(()=>import("./web-ns11_Diu.js"),[]).then(e=>new e.DeviceWeb)});function gF(){const e=navigator.userAgent,t=navigator.platform,n=navigator.language;return"Web-".concat(t,"-").concat(n,"-").concat(e.slice(0,15))}async function mF(){const e=await pF.getInfo();return"".concat(e.manufacturer||"Unknown"," ").concat(e.model||"Device")}async function j3(){return window.Capacitor&&window.Capacitor.isNativePlatform?await mF():gF()}var A3={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ri,function(){var n=function(g,_){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(C[P]=T[P])})(g,_)},r=function(){return(r=Object.assign||function(g){for(var _,C=1,T=arguments.length;C<T;C++)for(var P in _=arguments[C])Object.prototype.hasOwnProperty.call(_,P)&&(g[P]=_[P]);return g}).apply(this,arguments)};function i(g,_,C){for(var T,P=0,W=_.length;P<W;P++)!T&&P in _||((T=T||Array.prototype.slice.call(_,0,P))[P]=_[P]);return g.concat(T||Array.prototype.slice.call(_))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ri,s=Object.keys,a=Array.isArray;function l(g,_){return typeof _!="object"||s(_).forEach(function(C){g[C]=_[C]}),g}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function f(g,_){return d.call(g,_)}function h(g,_){typeof _=="function"&&(_=_(u(g))),(typeof Reflect>"u"?s:Reflect.ownKeys)(_).forEach(function(C){v(g,C,_[C])})}var p=Object.defineProperty;function v(g,_,C,T){p(g,_,l(C&&f(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},T))}function y(g){return{from:function(_){return g.prototype=Object.create(_.prototype),v(g.prototype,"constructor",g),{extend:h.bind(null,g.prototype)}}}}var w=Object.getOwnPropertyDescriptor,x=[].slice;function b(g,_,C){return x.call(g,_,C)}function m(g,_){return _(g)}function S(g){if(!g)throw new Error("Assertion Failed")}function E(g){o.setImmediate?setImmediate(g):setTimeout(g,0)}function k(g,_){if(typeof _=="string"&&f(g,_))return g[_];if(!_)return g;if(typeof _!="string"){for(var C=[],T=0,P=_.length;T<P;++T){var W=k(g,_[T]);C.push(W)}return C}var Z=_.indexOf(".");if(Z!==-1){var oe=g[_.substr(0,Z)];return oe==null?void 0:k(oe,_.substr(Z+1))}}function N(g,_,C){if(g&&_!==void 0&&!("isFrozen"in Object&&Object.isFrozen(g)))if(typeof _!="string"&&"length"in _){S(typeof C!="string"&&"length"in C);for(var T=0,P=_.length;T<P;++T)N(g,_[T],C[T])}else{var W,Z,oe=_.indexOf(".");oe!==-1?(W=_.substr(0,oe),(Z=_.substr(oe+1))===""?C===void 0?a(g)&&!isNaN(parseInt(W))?g.splice(W,1):delete g[W]:g[W]=C:N(oe=!(oe=g[W])||!f(g,W)?g[W]={}:oe,Z,C)):C===void 0?a(g)&&!isNaN(parseInt(_))?g.splice(_,1):delete g[_]:g[_]=C}}function I(g){var _,C={};for(_ in g)f(g,_)&&(C[_]=g[_]);return C}var z=[].concat;function O(g){return z.apply([],g)}var rn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(g){return["Int","Uint","Float"].map(function(_){return _+g+"Array"})}))).filter(function(g){return o[g]}),M=new Set(rn.map(function(g){return o[g]})),K=null;function D(g){return K=new WeakMap,g=function _(C){if(!C||typeof C!="object")return C;var T=K.get(C);if(T)return T;if(a(C)){T=[],K.set(C,T);for(var P=0,W=C.length;P<W;++P)T.push(_(C[P]))}else if(M.has(C.constructor))T=C;else{var Z,oe=u(C);for(Z in T=oe===Object.prototype?{}:Object.create(oe),K.set(C,T),C)f(C,Z)&&(T[Z]=_(C[Z]))}return T}(g),K=null,g}var L={}.toString;function q(g){return L.call(g).slice(8,-1)}var G=typeof Symbol<"u"?Symbol.iterator:"@@iterator",te=typeof G=="symbol"?function(g){var _;return g!=null&&(_=g[G])&&_.apply(g)}:function(){return null};function B(g,_){return _=g.indexOf(_),0<=_&&g.splice(_,1),0<=_}var H={};function $(g){var _,C,T,P;if(arguments.length===1){if(a(g))return g.slice();if(this===H&&typeof g=="string")return[g];if(P=te(g)){for(C=[];!(T=P.next()).done;)C.push(T.value);return C}if(g==null)return[g];if(typeof(_=g.length)!="number")return[g];for(C=new Array(_);_--;)C[_]=g[_];return C}for(_=arguments.length,C=new Array(_);_--;)C[_]=arguments[_];return C}var Y=typeof Symbol<"u"?function(g){return g[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Vi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ct),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ue(g,_){this.name=g,this.message=_}function Ce(g,_){return g+". Errors: "+Object.keys(_).map(function(C){return _[C].toString()}).filter(function(C,T,P){return P.indexOf(C)===T}).join("\n")}function Ne(g,_,C,T){this.failures=_,this.failedKeys=T,this.successCount=C,this.message=Ce(g,_)}function Te(g,_){this.name="BulkError",this.failures=Object.keys(_).map(function(C){return _[C]}),this.failuresByPos=_,this.message=Ce(g,this.failures)}y(ue).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(Ne).from(ue),y(Te).from(ue);var U=Vi.reduce(function(g,_){return g[_]=_+"Error",g},{}),ee=ue,re=Vi.reduce(function(g,_){var C=_+"Error";function T(P,W){this.name=C,P?typeof P=="string"?(this.message="".concat(P).concat(W?"\n "+W:""),this.inner=W||null):typeof P=="object"&&(this.message="".concat(P.name," ").concat(P.message),this.inner=P):(this.message=se[_]||C,this.inner=null)}return y(T).from(ee),g[_]=T,g},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var De=Ct.reduce(function(g,_){return g[_+"Error"]=re[_],g},{}),Ye=Vi.reduce(function(g,_){return["Syntax","Type","Range"].indexOf(_)===-1&&(g[_+"Error"]=re[_]),g},{});function ze(){}function ie(g){return g}function fe(g,_){return g==null||g===ie?_:function(C){return _(g(C))}}function Se(g,_){return function(){g.apply(this,arguments),_.apply(this,arguments)}}function We(g,_){return g===ze?_:function(){var C=g.apply(this,arguments);C!==void 0&&(arguments[0]=C);var T=this.onsuccess,P=this.onerror;this.onsuccess=null,this.onerror=null;var W=_.apply(this,arguments);return T&&(this.onsuccess=this.onsuccess?Se(T,this.onsuccess):T),P&&(this.onerror=this.onerror?Se(P,this.onerror):P),W!==void 0?W:C}}function Ue(g,_){return g===ze?_:function(){g.apply(this,arguments);var C=this.onsuccess,T=this.onerror;this.onsuccess=this.onerror=null,_.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?Se(C,this.onsuccess):C),T&&(this.onerror=this.onerror?Se(T,this.onerror):T)}}function Ke(g,_){return g===ze?_:function(C){var T=g.apply(this,arguments);l(C,T);var P=this.onsuccess,W=this.onerror;return this.onsuccess=null,this.onerror=null,C=_.apply(this,arguments),P&&(this.onsuccess=this.onsuccess?Se(P,this.onsuccess):P),W&&(this.onerror=this.onerror?Se(W,this.onerror):W),T===void 0?C===void 0?void 0:C:l(T,C)}}function he(g,_){return g===ze?_:function(){return _.apply(this,arguments)!==!1&&g.apply(this,arguments)}}function Be(g,_){return g===ze?_:function(){var C=g.apply(this,arguments);if(C&&typeof C.then=="function"){for(var T=this,P=arguments.length,W=new Array(P);P--;)W[P]=arguments[P];return C.then(function(){return _.apply(T,W)})}return _.apply(this,arguments)}}Ye.ModifyError=Ne,Ye.DexieError=ue,Ye.BulkError=Te;var qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $e(g){qe=g}var Nt={},yn=100,rn=typeof Promise>"u"?[]:function(){var g=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[g,u(g),g];var _=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[_,u(_),g]}(),Ct=rn[0],Vi=rn[1],rn=rn[2],Vi=Vi&&Vi.then,F=Ct&&Ct.constructor,A=!!rn,R=function(g,_){Jt.push([g,_]),de&&(queueMicrotask(X),de=!1)},J=!0,de=!0,je=[],Fe=[],Rt=ie,Gt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ze,pgp:!1,env:{},finalize:ze},st=Gt,Jt=[],$t=0,so=[];function at(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var _=this._PSD=st;if(typeof g!="function"){if(g!==Nt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Fo(this,this._value))}this._state=null,this._value=null,++_.ref,function C(T,P){try{P(function(W){if(T._state===null){if(W===T)throw new TypeError("A promise cannot be resolved with itself.");var Z=T._lib&&ne();W&&typeof W.then=="function"?C(T,function(oe,ge){W instanceof at?W._then(oe,ge):W.then(oe,ge)}):(T._state=!0,T._value=W,vs(T)),Z&&tt()}},Fo.bind(null,T))}catch(W){Fo(T,W)}}(this,g)}var Do={get:function(){var g=st,_=Bo;function C(T,P){var W=this,Z=!g.global&&(g!==st||_!==Bo),oe=Z&&!mr(),ge=new at(function(ve,_e){ao(W,new Lo(cu(T,g,Z,oe),cu(P,g,Z,oe),ve,_e,g))});return this._consoleTask&&(ge._consoleTask=this._consoleTask),ge}return C.prototype=Nt,C},set:function(g){v(this,"then",g&&g.prototype===Nt?Do:{get:function(){return g},set:Do.set})}};function Lo(g,_,C,T,P){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof _=="function"?_:null,this.resolve=C,this.reject=T,this.psd=P}function Fo(g,_){var C,T;Fe.push(_),g._state===null&&(C=g._lib&&ne(),_=Rt(_),g._state=!1,g._value=_,T=g,je.some(function(P){return P._value===T._value})||je.push(T),vs(g),C&&tt())}function vs(g){var _=g._listeners;g._listeners=[];for(var C=0,T=_.length;C<T;++C)ao(g,_[C]);var P=g._PSD;--P.ref||P.finalize(),$t===0&&(++$t,R(function(){--$t==0&&ot()},[]))}function ao(g,_){if(g._state!==null){var C=g._state?_.onFulfilled:_.onRejected;if(C===null)return(g._state?_.resolve:_.reject)(g._value);++_.psd.ref,++$t,R(aa,[C,g,_])}else g._listeners.push(_)}function aa(g,_,C){try{var T,P=_._value;!_._state&&Fe.length&&(Fe=[]),T=qe&&_._consoleTask?_._consoleTask.run(function(){return g(P)}):g(P),_._state||Fe.indexOf(P)!==-1||function(W){for(var Z=je.length;Z;)if(je[--Z]._value===W._value)return je.splice(Z,1)}(_),C.resolve(T)}catch(W){C.reject(W)}finally{--$t==0&&ot(),--C.psd.ref||C.psd.finalize()}}function X(){co(Gt,function(){ne()&&tt()})}function ne(){var g=J;return de=J=!1,g}function tt(){var g,_,C;do for(;0<Jt.length;)for(g=Jt,Jt=[],C=g.length,_=0;_<C;++_){var T=g[_];T[0].apply(null,T[1])}while(0<Jt.length);de=J=!0}function ot(){var g=je;je=[],g.forEach(function(T){T._PSD.onunhandled.call(null,T._value,T)});for(var _=so.slice(0),C=_.length;C;)_[--C]()}function mt(g){return new at(Nt,!1,g)}function Ot(g,_){var C=st;return function(){var T=ne(),P=st;try{return Qn(C,!0),g.apply(this,arguments)}catch(W){_&&_(W)}finally{Qn(P,!1),T&&tt()}}}h(at.prototype,{then:Do,_then:function(g,_){ao(this,new Lo(null,null,g,_,st))},catch:function(g){if(arguments.length===1)return this.then(null,g);var _=g,C=arguments[1];return typeof _=="function"?this.then(null,function(T){return(T instanceof _?C:mt)(T)}):this.then(null,function(T){return(T&&T.name===_?C:mt)(T)})},finally:function(g){return this.then(function(_){return at.resolve(g()).then(function(){return _})},function(_){return at.resolve(g()).then(function(){return mt(_)})})},timeout:function(g,_){var C=this;return g<1/0?new at(function(T,P){var W=setTimeout(function(){return P(new re.Timeout(_))},g);C.then(T,P).finally(clearTimeout.bind(null,W))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(at.prototype,Symbol.toStringTag,"Dexie.Promise"),Gt.env=kr(),h(at,{all:function(){var g=$.apply(null,arguments).map(Si);return new at(function(_,C){g.length===0&&_([]);var T=g.length;g.forEach(function(P,W){return at.resolve(P).then(function(Z){g[W]=Z,--T||_(g)},C)})})},resolve:function(g){return g instanceof at?g:g&&typeof g.then=="function"?new at(function(_,C){g.then(_,C)}):new at(Nt,!0,g)},reject:mt,race:function(){var g=$.apply(null,arguments).map(Si);return new at(function(_,C){g.map(function(T){return at.resolve(T).then(_,C)})})},PSD:{get:function(){return st},set:function(g){return st=g}},totalEchoes:{get:function(){return Bo}},newPSD:Ur,usePSD:co,scheduler:{get:function(){return R},set:function(g){R=g}},rejectionMapper:{get:function(){return Rt},set:function(g){Rt=g}},follow:function(g,_){return new at(function(C,T){return Ur(function(P,W){var Z=st;Z.unhandleds=[],Z.onunhandled=W,Z.finalize=Se(function(){var oe,ge=this;oe=function(){ge.unhandleds.length===0?P():W(ge.unhandleds[0])},so.push(function ve(){oe(),so.splice(so.indexOf(ve),1)}),++$t,R(function(){--$t==0&&ot()},[])},Z.finalize),g()},_,C,T)})}}),F&&(F.allSettled&&v(at,"allSettled",function(){var g=$.apply(null,arguments).map(Si);return new at(function(_){g.length===0&&_([]);var C=g.length,T=new Array(C);g.forEach(function(P,W){return at.resolve(P).then(function(Z){return T[W]={status:"fulfilled",value:Z}},function(Z){return T[W]={status:"rejected",reason:Z}}).then(function(){return--C||_(T)})})})}),F.any&&typeof AggregateError<"u"&&v(at,"any",function(){var g=$.apply(null,arguments).map(Si);return new at(function(_,C){g.length===0&&C(new AggregateError([]));var T=g.length,P=new Array(T);g.forEach(function(W,Z){return at.resolve(W).then(function(oe){return _(oe)},function(oe){P[Z]=oe,--T||C(new AggregateError(P))})})})}),F.withResolvers&&(at.withResolvers=F.withResolvers));var Zt={awaits:0,echoes:0,id:0},xs=0,Er=[],lo=0,Bo=0,la=0;function Ur(g,_,C,T){var P=st,W=Object.create(P);return W.parent=P,W.ref=0,W.global=!1,W.id=++la,Gt.env,W.env=A?{Promise:at,PromiseProp:{value:at,configurable:!0,writable:!0},all:at.all,race:at.race,allSettled:at.allSettled,any:at.any,resolve:at.resolve,reject:at.reject}:{},_&&l(W,_),++P.ref,W.finalize=function(){--this.parent.ref||this.parent.finalize()},T=co(W,g,C,T),W.ref===0&&W.finalize(),T}function Vr(){return Zt.id||(Zt.id=++xs),++Zt.awaits,Zt.echoes+=yn,Zt.id}function mr(){return!!Zt.awaits&&(--Zt.awaits==0&&(Zt.id=0),Zt.echoes=Zt.awaits*yn,!0)}function Si(g){return Zt.echoes&&g&&g.constructor===F?(Vr(),g.then(function(_){return mr(),_},function(_){return mr(),vn(_)})):g}function uo(){var g=Er[Er.length-1];Er.pop(),Qn(g,!1)}function Qn(g,_){var C,T=st;(_?!Zt.echoes||lo++&&g===st:!lo||--lo&&g===st)||queueMicrotask(_?(function(P){++Bo,Zt.echoes&&--Zt.echoes!=0||(Zt.echoes=Zt.awaits=Zt.id=0),Er.push(st),Qn(P,!0)}).bind(null,g):uo),g!==st&&(st=g,T===Gt&&(Gt.env=kr()),A&&(C=Gt.env.Promise,_=g.env,(T.global||g.global)&&(Object.defineProperty(o,"Promise",_.PromiseProp),C.all=_.all,C.race=_.race,C.resolve=_.resolve,C.reject=_.reject,_.allSettled&&(C.allSettled=_.allSettled),_.any&&(C.any=_.any))))}function kr(){var g=o.Promise;return A?{Promise:g,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:g.all,race:g.race,allSettled:g.allSettled,any:g.any,resolve:g.resolve,reject:g.reject}:{}}function co(g,_,C,T,P){var W=st;try{return Qn(g,!0),_(C,T,P)}finally{Qn(W,!1)}}function cu(g,_,C,T){return typeof g!="function"?g:function(){var P=st;C&&Vr(),Qn(_,!0);try{return g.apply(this,arguments)}finally{Qn(P,!1),T&&queueMicrotask(mr)}}}function rl(g){Promise===F&&Zt.echoes===0?lo===0?g():enqueueNativeMicroTask(g):setTimeout(g,0)}(""+Vi).indexOf("[native code]")===-1&&(Vr=mr=ze);var vn=at.reject,Wi="",yr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",il="String expected.",qr=[],ua="__dbnames",zo="readonly",bs="readwrite";function Ui(g,_){return g?_?function(){return g.apply(this,arguments)&&_.apply(this,arguments)}:g:_}var du={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ho(g){return typeof g!="string"||/\./.test(g)?function(_){return _}:function(_){return _[g]===void 0&&g in _&&delete(_=D(_))[g],_}}function fu(){throw re.Type()}function Ut(g,_){try{var C=V(g),T=V(_);if(C!==T)return C==="Array"?1:T==="Array"?-1:C==="binary"?1:T==="binary"?-1:C==="string"?1:T==="string"?-1:C==="Date"?1:T!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return _<g?1:g<_?-1:0;case"binary":return function(P,W){for(var Z=P.length,oe=W.length,ge=Z<oe?Z:oe,ve=0;ve<ge;++ve)if(P[ve]!==W[ve])return P[ve]<W[ve]?-1:1;return Z===oe?0:Z<oe?-1:1}(le(g),le(_));case"Array":return function(P,W){for(var Z=P.length,oe=W.length,ge=Z<oe?Z:oe,ve=0;ve<ge;++ve){var _e=Ut(P[ve],W[ve]);if(_e!==0)return _e}return Z===oe?0:Z<oe?-1:1}(g,_)}}catch(P){}return NaN}function V(g){var _=typeof g;return _!="object"?_:ArrayBuffer.isView(g)?"binary":(g=q(g),g==="ArrayBuffer"?"binary":g)}function le(g){return g instanceof Uint8Array?g:ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g)}var Q=(ce.prototype._trans=function(g,_,C){var T=this._tx||st.trans,P=this.name,W=qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function Z(ve,_e,ae){if(!ae.schema[P])throw new re.NotFound("Table "+P+" not part of transaction");return _(ae.idbtrans,ae)}var oe=ne();try{var ge=T&&T.db._novip===this.db._novip?T===st.trans?T._promise(g,Z,C):Ur(function(){return T._promise(g,Z,C)},{trans:T,transless:st.transless||st}):function ve(_e,ae,ke,me){if(_e.idbdb&&(_e._state.openComplete||st.letThrough||_e._vip)){var be=_e._createTransaction(ae,ke,_e._dbSchema);try{be.create(),_e._state.PR1398_maxLoop=3}catch(Ee){return Ee.name===U.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return ve(_e,ae,ke,me)})):vn(Ee)}return be._promise(ae,function(Ee,xe){return Ur(function(){return st.trans=be,me(Ee,xe,be)})}).then(function(Ee){if(ae==="readwrite")try{be.idbtrans.commit()}catch(xe){}return ae==="readonly"?Ee:be._completion.then(function(){return Ee})})}if(_e._state.openComplete)return vn(new re.DatabaseClosed(_e._state.dbOpenError));if(!_e._state.isBeingOpened){if(!_e._state.autoOpen)return vn(new re.DatabaseClosed);_e.open().catch(ze)}return _e._state.dbReadyPromise.then(function(){return ve(_e,ae,ke,me)})}(this.db,g,[this.name],Z);return W&&(ge._consoleTask=W,ge=ge.catch(function(ve){return console.trace(ve),vn(ve)})),ge}finally{oe&&tt()}},ce.prototype.get=function(g,_){var C=this;return g&&g.constructor===Object?this.where(g).first(_):g==null?vn(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(T){return C.core.get({trans:T,key:g}).then(function(P){return C.hook.reading.fire(P)})}).then(_)},ce.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(a(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var _=s(g);if(_.length===1)return this.where(_[0]).equals(g[_[0]]);var C=this.schema.indexes.concat(this.schema.primKey).filter(function(oe){if(oe.compound&&_.every(function(ve){return 0<=oe.keyPath.indexOf(ve)})){for(var ge=0;ge<_.length;++ge)if(_.indexOf(oe.keyPath[ge])===-1)return!1;return!0}return!1}).sort(function(oe,ge){return oe.keyPath.length-ge.keyPath.length})[0];if(C&&this.db._maxKey!==Wi){var W=C.keyPath.slice(0,_.length);return this.where(W).equals(W.map(function(ge){return g[ge]}))}!C&&qe&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(_.join("+"),"]"));var T=this.schema.idxByName;function P(oe,ge){return Ut(oe,ge)===0}var Z=_.reduce(function(ae,ge){var ve=ae[0],_e=ae[1],ae=T[ge],ke=g[ge];return[ve||ae,ve||!ae?Ui(_e,ae&&ae.multi?function(me){return me=k(me,ge),a(me)&&me.some(function(be){return P(ke,be)})}:function(me){return P(ke,k(me,ge))}):_e]},[null,null]),W=Z[0],Z=Z[1];return W?this.where(W.name).equals(g[W.keyPath]).filter(Z):C?this.filter(Z):this.where(_).equals("")},ce.prototype.filter=function(g){return this.toCollection().and(g)},ce.prototype.count=function(g){return this.toCollection().count(g)},ce.prototype.offset=function(g){return this.toCollection().offset(g)},ce.prototype.limit=function(g){return this.toCollection().limit(g)},ce.prototype.each=function(g){return this.toCollection().each(g)},ce.prototype.toArray=function(g){return this.toCollection().toArray(g)},ce.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ce.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,a(g)?"[".concat(g.join("+"),"]"):g))},ce.prototype.reverse=function(){return this.toCollection().reverse()},ce.prototype.mapToClass=function(g){var _,C=this.db,T=this.name;function P(){return _!==null&&_.apply(this,arguments)||this}(this.schema.mappedClass=g).prototype instanceof fu&&(function(ge,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");function _e(){this.constructor=ge}n(ge,ve),ge.prototype=ve===null?Object.create(ve):(_e.prototype=ve.prototype,new _e)}(P,_=g),Object.defineProperty(P.prototype,"db",{get:function(){return C},enumerable:!1,configurable:!0}),P.prototype.table=function(){return T},g=P);for(var W=new Set,Z=g.prototype;Z;Z=u(Z))Object.getOwnPropertyNames(Z).forEach(function(ge){return W.add(ge)});function oe(ge){if(!ge)return ge;var ve,_e=Object.create(g.prototype);for(ve in ge)if(!W.has(ve))try{_e[ve]=ge[ve]}catch(ae){}return _e}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=oe,this.hook("reading",oe),g},ce.prototype.defineClass=function(){return this.mapToClass(function(g){l(this,g)})},ce.prototype.add=function(g,_){var C=this,T=this.schema.primKey,P=T.auto,W=T.keyPath,Z=g;return W&&P&&(Z=Ho(W)(g)),this._trans("readwrite",function(oe){return C.core.mutate({trans:oe,type:"add",keys:_!=null?[_]:null,values:[Z]})}).then(function(oe){return oe.numFailures?at.reject(oe.failures[0]):oe.lastResult}).then(function(oe){if(W)try{N(g,W,oe)}catch(ge){}return oe})},ce.prototype.update=function(g,_){return typeof g!="object"||a(g)?this.where(":id").equals(g).modify(_):(g=k(g,this.schema.primKey.keyPath),g===void 0?vn(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(g).modify(_))},ce.prototype.put=function(g,_){var C=this,T=this.schema.primKey,P=T.auto,W=T.keyPath,Z=g;return W&&P&&(Z=Ho(W)(g)),this._trans("readwrite",function(oe){return C.core.mutate({trans:oe,type:"put",values:[Z],keys:_!=null?[_]:null})}).then(function(oe){return oe.numFailures?at.reject(oe.failures[0]):oe.lastResult}).then(function(oe){if(W)try{N(g,W,oe)}catch(ge){}return oe})},ce.prototype.delete=function(g){var _=this;return this._trans("readwrite",function(C){return _.core.mutate({trans:C,type:"delete",keys:[g]})}).then(function(C){return C.numFailures?at.reject(C.failures[0]):void 0})},ce.prototype.clear=function(){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"deleteRange",range:du})}).then(function(_){return _.numFailures?at.reject(_.failures[0]):void 0})},ce.prototype.bulkGet=function(g){var _=this;return this._trans("readonly",function(C){return _.core.getMany({keys:g,trans:C}).then(function(T){return T.map(function(P){return _.hook.reading.fire(P)})})})},ce.prototype.bulkAdd=function(g,_,C){var T=this,P=Array.isArray(_)?_:void 0,W=(C=C||(P?void 0:_))?C.allKeys:void 0;return this._trans("readwrite",function(Z){var ve=T.schema.primKey,oe=ve.auto,ve=ve.keyPath;if(ve&&P)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(P&&P.length!==g.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var ge=g.length,ve=ve&&oe?g.map(Ho(ve)):g;return T.core.mutate({trans:Z,type:"add",keys:P,values:ve,wantResults:W}).then(function(be){var ae=be.numFailures,ke=be.results,me=be.lastResult,be=be.failures;if(ae===0)return W?ke:me;throw new Te("".concat(T.name,".bulkAdd(): ").concat(ae," of ").concat(ge," operations failed"),be)})})},ce.prototype.bulkPut=function(g,_,C){var T=this,P=Array.isArray(_)?_:void 0,W=(C=C||(P?void 0:_))?C.allKeys:void 0;return this._trans("readwrite",function(Z){var ve=T.schema.primKey,oe=ve.auto,ve=ve.keyPath;if(ve&&P)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(P&&P.length!==g.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var ge=g.length,ve=ve&&oe?g.map(Ho(ve)):g;return T.core.mutate({trans:Z,type:"put",keys:P,values:ve,wantResults:W}).then(function(be){var ae=be.numFailures,ke=be.results,me=be.lastResult,be=be.failures;if(ae===0)return W?ke:me;throw new Te("".concat(T.name,".bulkPut(): ").concat(ae," of ").concat(ge," operations failed"),be)})})},ce.prototype.bulkUpdate=function(g){var _=this,C=this.core,T=g.map(function(Z){return Z.key}),P=g.map(function(Z){return Z.changes}),W=[];return this._trans("readwrite",function(Z){return C.getMany({trans:Z,keys:T,cache:"clone"}).then(function(oe){var ge=[],ve=[];g.forEach(function(ae,ke){var me=ae.key,be=ae.changes,Ee=oe[ke];if(Ee){for(var xe=0,Ae=Object.keys(be);xe<Ae.length;xe++){var Pe=Ae[xe],Oe=be[Pe];if(Pe===_.schema.primKey.keyPath){if(Ut(Oe,me)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else N(Ee,Pe,Oe)}W.push(ke),ge.push(me),ve.push(Ee)}});var _e=ge.length;return C.mutate({trans:Z,type:"put",keys:ge,values:ve,updates:{keys:T,changeSpecs:P}}).then(function(ae){var ke=ae.numFailures,me=ae.failures;if(ke===0)return _e;for(var be=0,Ee=Object.keys(me);be<Ee.length;be++){var xe,Ae=Ee[be],Pe=W[Number(Ae)];Pe!=null&&(xe=me[Ae],delete me[Ae],me[Pe]=xe)}throw new Te("".concat(_.name,".bulkUpdate(): ").concat(ke," of ").concat(_e," operations failed"),me)})})})},ce.prototype.bulkDelete=function(g){var _=this,C=g.length;return this._trans("readwrite",function(T){return _.core.mutate({trans:T,type:"delete",keys:g})}).then(function(Z){var P=Z.numFailures,W=Z.lastResult,Z=Z.failures;if(P===0)return W;throw new Te("".concat(_.name,".bulkDelete(): ").concat(P," of ").concat(C," operations failed"),Z)})},ce);function ce(){}function we(g){function _(Z,oe){if(oe){for(var ge=arguments.length,ve=new Array(ge-1);--ge;)ve[ge-1]=arguments[ge];return C[Z].subscribe.apply(null,ve),g}if(typeof Z=="string")return C[Z]}var C={};_.addEventType=W;for(var T=1,P=arguments.length;T<P;++T)W(arguments[T]);return _;function W(Z,oe,ge){if(typeof Z!="object"){var ve;oe=oe||he;var _e={subscribers:[],fire:ge=ge||ze,subscribe:function(ae){_e.subscribers.indexOf(ae)===-1&&(_e.subscribers.push(ae),_e.fire=oe(_e.fire,ae))},unsubscribe:function(ae){_e.subscribers=_e.subscribers.filter(function(ke){return ke!==ae}),_e.fire=_e.subscribers.reduce(oe,ge)}};return C[Z]=_[Z]=_e}s(ve=Z).forEach(function(ae){var ke=ve[ae];if(a(ke))W(ae,ve[ae][0],ve[ae][1]);else{if(ke!=="asap")throw new re.InvalidArgument("Invalid event config");var me=W(ae,ie,function(){for(var be=arguments.length,Ee=new Array(be);be--;)Ee[be]=arguments[be];me.subscribers.forEach(function(xe){E(function(){xe.apply(null,Ee)})})})}})}}function pe(g,_){return y(_).from({prototype:g}),_}function Le(g,_){return!(g.filter||g.algorithm||g.or)&&(_?g.justLimit:!g.replayFilter)}function Xe(g,_){g.filter=Ui(g.filter,_)}function Qe(g,_,C){var T=g.replayFilter;g.replayFilter=T?function(){return Ui(T(),_())}:_,g.justLimit=C&&!T}function Je(g,_){if(g.isPrimKey)return _.primaryKey;var C=_.getIndexByKeyPath(g.index);if(!C)throw new re.Schema("KeyPath "+g.index+" on object store "+_.name+" is not indexed");return C}function lt(g,_,C){var T=Je(g,_.schema);return _.openCursor({trans:C,values:!g.keysOnly,reverse:g.dir==="prev",unique:!!g.unique,query:{index:T,range:g.range}})}function St(g,_,C,T){var P=g.replayFilter?Ui(g.filter,g.replayFilter()):g.filter;if(g.or){var W={},Z=function(oe,ge,ve){var _e,ae;P&&!P(ge,ve,function(ke){return ge.stop(ke)},function(ke){return ge.fail(ke)})||((ae=""+(_e=ge.primaryKey))=="[object ArrayBuffer]"&&(ae=""+new Uint8Array(_e)),f(W,ae)||(W[ae]=!0,_(oe,ge,ve)))};return Promise.all([g.or._iterate(Z,C),Bt(lt(g,T,C),g.algorithm,Z,!g.keysOnly&&g.valueMapper)])}return Bt(lt(g,T,C),Ui(g.algorithm,P),_,!g.keysOnly&&g.valueMapper)}function Bt(g,_,C,T){var P=Ot(T?function(W,Z,oe){return C(T(W),Z,oe)}:C);return g.then(function(W){if(W)return W.start(function(){var Z=function(){return W.continue()};_&&!_(W,function(oe){return Z=oe},function(oe){W.stop(oe),Z=ze},function(oe){W.fail(oe),Z=ze})||P(W.value,W,function(oe){return Z=oe}),Z()})})}var Qt=(an.prototype.execute=function(g){var _=this["@@propmod"];if(_.add!==void 0){var C=_.add;if(a(C))return i(i([],a(g)?g:[],!0),C).sort();if(typeof C=="number")return(Number(g)||0)+C;if(typeof C=="bigint")try{return BigInt(g)+C}catch(P){return BigInt(0)+C}throw new TypeError("Invalid term ".concat(C))}if(_.remove!==void 0){var T=_.remove;if(a(T))return a(g)?g.filter(function(P){return!T.includes(P)}).sort():[];if(typeof T=="number")return Number(g)-T;if(typeof T=="bigint")try{return BigInt(g)-T}catch(P){return BigInt(0)-T}throw new TypeError("Invalid subtrahend ".concat(T))}return C=(C=_.replacePrefix)===null||C===void 0?void 0:C[0],C&&typeof g=="string"&&g.startsWith(C)?_.replacePrefix[1]+g.substring(C.length):g},an);function an(g){this["@@propmod"]=g}var Dn=(jt.prototype._read=function(g,_){var C=this._ctx;return C.error?C.table._trans(null,vn.bind(null,C.error)):C.table._trans("readonly",g).then(_)},jt.prototype._write=function(g){var _=this._ctx;return _.error?_.table._trans(null,vn.bind(null,_.error)):_.table._trans("readwrite",g,"locked")},jt.prototype._addAlgorithm=function(g){var _=this._ctx;_.algorithm=Ui(_.algorithm,g)},jt.prototype._iterate=function(g,_){return St(this._ctx,g,_,this._ctx.table.core)},jt.prototype.clone=function(g){var _=Object.create(this.constructor.prototype),C=Object.create(this._ctx);return g&&l(C,g),_._ctx=C,_},jt.prototype.raw=function(){return this._ctx.valueMapper=null,this},jt.prototype.each=function(g){var _=this._ctx;return this._read(function(C){return St(_,g,C,_.table.core)})},jt.prototype.count=function(g){var _=this;return this._read(function(C){var T=_._ctx,P=T.table.core;if(Le(T,!0))return P.count({trans:C,query:{index:Je(T,P.schema),range:T.range}}).then(function(Z){return Math.min(Z,T.limit)});var W=0;return St(T,function(){return++W,!1},C,P).then(function(){return W})}).then(g)},jt.prototype.sortBy=function(g,_){var C=g.split(".").reverse(),T=C[0],P=C.length-1;function W(ge,ve){return ve?W(ge[C[ve]],ve-1):ge[T]}var Z=this._ctx.dir==="next"?1:-1;function oe(ge,ve){return Ut(W(ge,P),W(ve,P))*Z}return this.toArray(function(ge){return ge.sort(oe)}).then(_)},jt.prototype.toArray=function(g){var _=this;return this._read(function(C){var T=_._ctx;if(T.dir==="next"&&Le(T,!0)&&0<T.limit){var P=T.valueMapper,W=Je(T,T.table.core.schema);return T.table.core.query({trans:C,limit:T.limit,values:!0,query:{index:W,range:T.range}}).then(function(oe){return oe=oe.result,P?oe.map(P):oe})}var Z=[];return St(T,function(oe){return Z.push(oe)},C,T.table.core).then(function(){return Z})},g)},jt.prototype.offset=function(g){var _=this._ctx;return g<=0||(_.offset+=g,Le(_)?Qe(_,function(){var C=g;return function(T,P){return C===0||(C===1?--C:P(function(){T.advance(C),C=0}),!1)}}):Qe(_,function(){var C=g;return function(){return--C<0}})),this},jt.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),Qe(this._ctx,function(){var _=g;return function(C,T,P){return--_<=0&&T(P),0<=_}},!0),this},jt.prototype.until=function(g,_){return Xe(this._ctx,function(C,T,P){return!g(C.value)||(T(P),_)}),this},jt.prototype.first=function(g){return this.limit(1).toArray(function(_){return _[0]}).then(g)},jt.prototype.last=function(g){return this.reverse().first(g)},jt.prototype.filter=function(g){var _;return Xe(this._ctx,function(C){return g(C.value)}),(_=this._ctx).isMatch=Ui(_.isMatch,g),this},jt.prototype.and=function(g){return this.filter(g)},jt.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},jt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},jt.prototype.desc=function(){return this.reverse()},jt.prototype.eachKey=function(g){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(C,T){g(T.key,T)})},jt.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},jt.prototype.eachPrimaryKey=function(g){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(C,T){g(T.primaryKey,T)})},jt.prototype.keys=function(g){var _=this._ctx;_.keysOnly=!_.isMatch;var C=[];return this.each(function(T,P){C.push(P.key)}).then(function(){return C}).then(g)},jt.prototype.primaryKeys=function(g){var _=this._ctx;if(_.dir==="next"&&Le(_,!0)&&0<_.limit)return this._read(function(T){var P=Je(_,_.table.core.schema);return _.table.core.query({trans:T,values:!1,limit:_.limit,query:{index:P,range:_.range}})}).then(function(T){return T.result}).then(g);_.keysOnly=!_.isMatch;var C=[];return this.each(function(T,P){C.push(P.primaryKey)}).then(function(){return C}).then(g)},jt.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},jt.prototype.firstKey=function(g){return this.limit(1).keys(function(_){return _[0]}).then(g)},jt.prototype.lastKey=function(g){return this.reverse().firstKey(g)},jt.prototype.distinct=function(){var g=this._ctx,g=g.index&&g.table.schema.idxByName[g.index];if(!g||!g.multi)return this;var _={};return Xe(this._ctx,function(P){var T=P.primaryKey.toString(),P=f(_,T);return _[T]=!0,!P}),this},jt.prototype.modify=function(g){var _=this,C=this._ctx;return this._write(function(T){var P,W,Z;Z=typeof g=="function"?g:(P=s(g),W=P.length,function(xe){for(var Ae=!1,Pe=0;Pe<W;++Pe){var Oe=P[Pe],He=g[Oe],rt=k(xe,Oe);He instanceof Qt?(N(xe,Oe,He.execute(rt)),Ae=!0):rt!==He&&(N(xe,Oe,He),Ae=!0)}return Ae});var oe=C.table.core,ae=oe.schema.primaryKey,ge=ae.outbound,ve=ae.extractKey,_e=200,ae=_.db._options.modifyChunkSize;ae&&(_e=typeof ae=="object"?ae[oe.name]||ae["*"]||200:ae);function ke(xe,Oe){var Pe=Oe.failures,Oe=Oe.numFailures;be+=xe-Oe;for(var He=0,rt=s(Pe);He<rt.length;He++){var ft=rt[He];me.push(Pe[ft])}}var me=[],be=0,Ee=[];return _.clone().primaryKeys().then(function(xe){function Ae(Oe){var He=Math.min(_e,xe.length-Oe);return oe.getMany({trans:T,keys:xe.slice(Oe,Oe+He),cache:"immutable"}).then(function(rt){for(var ft=[],it=[],ut=ge?[]:null,ht=[],dt=0;dt<He;++dt){var wt=rt[dt],Dt={value:D(wt),primKey:xe[Oe+dt]};Z.call(Dt,Dt.value,Dt)!==!1&&(Dt.value==null?ht.push(xe[Oe+dt]):ge||Ut(ve(wt),ve(Dt.value))===0?(it.push(Dt.value),ge&&ut.push(xe[Oe+dt])):(ht.push(xe[Oe+dt]),ft.push(Dt.value)))}return Promise.resolve(0<ft.length&&oe.mutate({trans:T,type:"add",values:ft}).then(function(qt){for(var Kt in qt.failures)ht.splice(parseInt(Kt),1);ke(ft.length,qt)})).then(function(){return(0<it.length||Pe&&typeof g=="object")&&oe.mutate({trans:T,type:"put",keys:ut,values:it,criteria:Pe,changeSpec:typeof g!="function"&&g,isAdditionalChunk:0<Oe}).then(function(qt){return ke(it.length,qt)})}).then(function(){return(0<ht.length||Pe&&g===Cr)&&oe.mutate({trans:T,type:"delete",keys:ht,criteria:Pe,isAdditionalChunk:0<Oe}).then(function(qt){return ke(ht.length,qt)})}).then(function(){return xe.length>Oe+He&&Ae(Oe+_e)})})}var Pe=Le(C)&&C.limit===1/0&&(typeof g!="function"||g===Cr)&&{index:C.index,range:C.range};return Ae(0).then(function(){if(0<me.length)throw new Ne("Error modifying one or more objects",me,be,Ee);return xe.length})})})},jt.prototype.delete=function(){var g=this._ctx,_=g.range;return Le(g)&&(g.isPrimKey||_.type===3)?this._write(function(C){var T=g.table.core.schema.primaryKey,P=_;return g.table.core.count({trans:C,query:{index:T,range:P}}).then(function(W){return g.table.core.mutate({trans:C,type:"deleteRange",range:P}).then(function(Z){var oe=Z.failures;if(Z.lastResult,Z.results,Z=Z.numFailures,Z)throw new Ne("Could not delete some values",Object.keys(oe).map(function(ge){return oe[ge]}),W-Z);return W-Z})})}):this.modify(Cr)},jt);function jt(){}var Cr=function(g,_){return _.value=null};function ol(g,_){return g<_?-1:g===_?0:1}function Xc(g,_){return _<g?-1:g===_?0:1}function Kr(g,_,C){return g=g instanceof Qc?new g.Collection(g):g,g._ctx.error=new(C||TypeError)(_),g}function Wo(g){return new g.Collection(g,function(){return Mh("")}).limit(0)}function Jc(g,_,C,T){var P,W,Z,oe,ge,ve,_e,ae=C.length;if(!C.every(function(be){return typeof be=="string"}))return Kr(g,il);function ke(be){P=be==="next"?function(xe){return xe.toUpperCase()}:function(xe){return xe.toLowerCase()},W=be==="next"?function(xe){return xe.toLowerCase()}:function(xe){return xe.toUpperCase()},Z=be==="next"?ol:Xc;var Ee=C.map(function(xe){return{lower:W(xe),upper:P(xe)}}).sort(function(xe,Ae){return Z(xe.lower,Ae.lower)});oe=Ee.map(function(xe){return xe.upper}),ge=Ee.map(function(xe){return xe.lower}),_e=(ve=be)==="next"?"":T}ke("next"),g=new g.Collection(g,function(){return Uo(oe[0],ge[ae-1]+T)}),g._ondirectionchange=function(be){ke(be)};var me=0;return g._addAlgorithm(function(be,Ee,xe){var Ae=be.key;if(typeof Ae!="string")return!1;var Pe=W(Ae);if(_(Pe,ge,me))return!0;for(var Oe=null,He=me;He<ae;++He){var rt=function(ft,it,ut,ht,dt,wt){for(var Dt=Math.min(ft.length,ht.length),qt=-1,Kt=0;Kt<Dt;++Kt){var Ei=it[Kt];if(Ei!==ht[Kt])return dt(ft[Kt],ut[Kt])<0?ft.substr(0,Kt)+ut[Kt]+ut.substr(Kt+1):dt(ft[Kt],ht[Kt])<0?ft.substr(0,Kt)+ht[Kt]+ut.substr(Kt+1):0<=qt?ft.substr(0,qt)+it[qt]+ut.substr(qt+1):null;dt(ft[Kt],Ei)<0&&(qt=Kt)}return Dt<ht.length&&wt==="next"?ft+ut.substr(ft.length):Dt<ft.length&&wt==="prev"?ft.substr(0,ut.length):qt<0?null:ft.substr(0,qt)+ht[qt]+ut.substr(qt+1)}(Ae,Pe,oe[He],ge[He],Z,ve);rt===null&&Oe===null?me=He+1:(Oe===null||0<Z(Oe,rt))&&(Oe=rt)}return Ee(Oe!==null?function(){be.continue(Oe+_e)}:xe),!1}),g}function Uo(g,_,C,T){return{type:2,lower:g,upper:_,lowerOpen:C,upperOpen:T}}function Mh(g){return{type:1,lower:g,upper:g}}var Qc=(Object.defineProperty(fr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),fr.prototype.between=function(g,_,C,T){C=C!==!1,T=T===!0;try{return 0<this._cmp(g,_)||this._cmp(g,_)===0&&(C||T)&&(!C||!T)?Wo(this):new this.Collection(this,function(){return Uo(g,_,!C,!T)})}catch(P){return Kr(this,yr)}},fr.prototype.equals=function(g){return g==null?Kr(this,yr):new this.Collection(this,function(){return Mh(g)})},fr.prototype.above=function(g){return g==null?Kr(this,yr):new this.Collection(this,function(){return Uo(g,void 0,!0)})},fr.prototype.aboveOrEqual=function(g){return g==null?Kr(this,yr):new this.Collection(this,function(){return Uo(g,void 0,!1)})},fr.prototype.below=function(g){return g==null?Kr(this,yr):new this.Collection(this,function(){return Uo(void 0,g,!1,!0)})},fr.prototype.belowOrEqual=function(g){return g==null?Kr(this,yr):new this.Collection(this,function(){return Uo(void 0,g)})},fr.prototype.startsWith=function(g){return typeof g!="string"?Kr(this,il):this.between(g,g+Wi,!0,!0)},fr.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):Jc(this,function(_,C){return _.indexOf(C[0])===0},[g],Wi)},fr.prototype.equalsIgnoreCase=function(g){return Jc(this,function(_,C){return _===C[0]},[g],"")},fr.prototype.anyOfIgnoreCase=function(){var g=$.apply(H,arguments);return g.length===0?Wo(this):Jc(this,function(_,C){return C.indexOf(_)!==-1},g,"")},fr.prototype.startsWithAnyOfIgnoreCase=function(){var g=$.apply(H,arguments);return g.length===0?Wo(this):Jc(this,function(_,C){return C.some(function(T){return _.indexOf(T)===0})},g,Wi)},fr.prototype.anyOf=function(){var g=this,_=$.apply(H,arguments),C=this._cmp;try{_.sort(C)}catch(W){return Kr(this,yr)}if(_.length===0)return Wo(this);var T=new this.Collection(this,function(){return Uo(_[0],_[_.length-1])});T._ondirectionchange=function(W){C=W==="next"?g._ascending:g._descending,_.sort(C)};var P=0;return T._addAlgorithm(function(W,Z,oe){for(var ge=W.key;0<C(ge,_[P]);)if(++P===_.length)return Z(oe),!1;return C(ge,_[P])===0||(Z(function(){W.continue(_[P])}),!1)}),T},fr.prototype.notEqual=function(g){return this.inAnyRange([[-1/0,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},fr.prototype.noneOf=function(){var g=$.apply(H,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch(C){return Kr(this,yr)}var _=g.reduce(function(C,T){return C?C.concat([[C[C.length-1][1],T]]):[[-1/0,T]]},null);return _.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(_,{includeLowers:!1,includeUppers:!1})},fr.prototype.inAnyRange=function(Ae,_){var C=this,T=this._cmp,P=this._ascending,W=this._descending,Z=this._min,oe=this._max;if(Ae.length===0)return Wo(this);if(!Ae.every(function(Pe){return Pe[0]!==void 0&&Pe[1]!==void 0&&P(Pe[0],Pe[1])<=0}))return Kr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var ge=!_||_.includeLowers!==!1,ve=_&&_.includeUppers===!0,_e,ae=P;function ke(Pe,Oe){return ae(Pe[0],Oe[0])}try{(_e=Ae.reduce(function(Pe,Oe){for(var He=0,rt=Pe.length;He<rt;++He){var ft=Pe[He];if(T(Oe[0],ft[1])<0&&0<T(Oe[1],ft[0])){ft[0]=Z(ft[0],Oe[0]),ft[1]=oe(ft[1],Oe[1]);break}}return He===rt&&Pe.push(Oe),Pe},[])).sort(ke)}catch(Pe){return Kr(this,yr)}var me=0,be=ve?function(Pe){return 0<P(Pe,_e[me][1])}:function(Pe){return 0<=P(Pe,_e[me][1])},Ee=ge?function(Pe){return 0<W(Pe,_e[me][0])}:function(Pe){return 0<=W(Pe,_e[me][0])},xe=be,Ae=new this.Collection(this,function(){return Uo(_e[0][0],_e[_e.length-1][1],!ge,!ve)});return Ae._ondirectionchange=function(Pe){ae=Pe==="next"?(xe=be,P):(xe=Ee,W),_e.sort(ke)},Ae._addAlgorithm(function(Pe,Oe,He){for(var rt,ft=Pe.key;xe(ft);)if(++me===_e.length)return Oe(He),!1;return!be(rt=ft)&&!Ee(rt)||(C._cmp(ft,_e[me][1])===0||C._cmp(ft,_e[me][0])===0||Oe(function(){ae===P?Pe.continue(_e[me][0]):Pe.continue(_e[me][1])}),!1)}),Ae},fr.prototype.startsWithAnyOf=function(){var g=$.apply(H,arguments);return g.every(function(_){return typeof _=="string"})?g.length===0?Wo(this):this.inAnyRange(g.map(function(_){return[_,_+Wi]})):Kr(this,"startsWithAnyOf() only works with strings")},fr);function fr(){}function Vo(g){return Ot(function(_){return Zc(_),g(_.target.error),!1})}function Zc(g){g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()}var ed="storagemutated",vv="x-storagemutated-1",ca=we(null,ed),Q5=(qo.prototype._lock=function(){return S(!st.global),++this._reculock,this._reculock!==1||st.global||(st.lockOwnerFor=this),this},qo.prototype._unlock=function(){if(S(!st.global),--this._reculock==0)for(st.global||(st.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var g=this._blockedFuncs.shift();try{co(g[1],g[0])}catch(_){}}return this},qo.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},qo.prototype.create=function(g){var _=this;if(!this.mode)return this;var C=this.db.idbdb,T=this.db._state.dbOpenError;if(S(!this.idbtrans),!g&&!C)switch(T&&T.name){case"DatabaseClosedError":throw new re.DatabaseClosed(T);case"MissingAPIError":throw new re.MissingAPI(T.message,T);default:throw new re.OpenFailed(T)}if(!this.active)throw new re.TransactionInactive;return S(this._completion._state===null),(g=this.idbtrans=g||(this.db.core||C).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ot(function(P){Zc(P),_._reject(g.error)}),g.onabort=Ot(function(P){Zc(P),_.active&&_._reject(new re.Abort(g.error)),_.active=!1,_.on("abort").fire(P)}),g.oncomplete=Ot(function(){_.active=!1,_._resolve(),"mutatedParts"in g&&ca.storagemutated.fire(g.mutatedParts)}),this},qo.prototype._promise=function(g,_,C){var T=this;if(g==="readwrite"&&this.mode!=="readwrite")return vn(new re.ReadOnly("Transaction is readonly"));if(!this.active)return vn(new re.TransactionInactive);if(this._locked())return new at(function(W,Z){T._blockedFuncs.push([function(){T._promise(g,_,C).then(W,Z)},st])});if(C)return Ur(function(){var W=new at(function(Z,oe){T._lock();var ge=_(Z,oe,T);ge&&ge.then&&ge.then(Z,oe)});return W.finally(function(){return T._unlock()}),W._lib=!0,W});var P=new at(function(W,Z){var oe=_(W,Z,T);oe&&oe.then&&oe.then(W,Z)});return P._lib=!0,P},qo.prototype._root=function(){return this.parent?this.parent._root():this},qo.prototype.waitFor=function(g){var _,C=this._root(),T=at.resolve(g);C._waitingFor?C._waitingFor=C._waitingFor.then(function(){return T}):(C._waitingFor=T,C._waitingQueue=[],_=C.idbtrans.objectStore(C.storeNames[0]),function W(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(_.get(-1/0).onsuccess=W)}());var P=C._waitingFor;return new at(function(W,Z){T.then(function(oe){return C._waitingQueue.push(Ot(W.bind(null,oe)))},function(oe){return C._waitingQueue.push(Ot(Z.bind(null,oe)))}).finally(function(){C._waitingFor===P&&(C._waitingFor=null)})})},qo.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},qo.prototype.table=function(g){var _=this._memoizedTables||(this._memoizedTables={});if(f(_,g))return _[g];var C=this.schema[g];if(!C)throw new re.NotFound("Table "+g+" not part of transaction");return C=new this.db.Table(g,C,this),C.core=this.db.core.table(g),_[g]=C},qo);function qo(){}function xv(g,_,C,T,P,W,Z){return{name:g,keyPath:_,unique:C,multi:T,auto:P,compound:W,src:(C&&!Z?"&":"")+(T?"*":"")+(P?"++":"")+YS(_)}}function YS(g){return typeof g=="string"?g:g?"["+[].join.call(g,"+")+"]":""}function bv(g,_,C){return{name:g,primKey:_,indexes:C,mappedClass:null,idxByName:(T=function(P){return[P.name,P]},C.reduce(function(P,W,Z){return Z=T(W,Z),Z&&(P[Z[0]]=Z[1]),P},{}))};var T}var td=function(g){try{return g.only([[]]),td=function(){return[[]]},[[]]}catch(_){return td=function(){return Wi},Wi}};function wv(g){return g==null?function(){}:typeof g=="string"?(_=g).split(".").length===1?function(C){return C[_]}:function(C){return k(C,_)}:function(C){return k(C,g)};var _}function XS(g){return[].slice.call(g)}var Z5=0;function nd(g){return g==null?":id":typeof g=="string"?g:"[".concat(g.join("+"),"]")}function e$(g,_,ge){function T(xe){if(xe.type===3)return null;if(xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var me=xe.lower,be=xe.upper,Ee=xe.lowerOpen,xe=xe.upperOpen;return me===void 0?be===void 0?null:_.upperBound(be,!!xe):be===void 0?_.lowerBound(me,!!Ee):_.bound(me,be,!!Ee,!!xe)}function P(ke){var me,be=ke.name;return{name:be,schema:ke,mutate:function(Ee){var xe=Ee.trans,Ae=Ee.type,Pe=Ee.keys,Oe=Ee.values,He=Ee.range;return new Promise(function(rt,ft){rt=Ot(rt);var it=xe.objectStore(be),ut=it.keyPath==null,ht=Ae==="put"||Ae==="add";if(!ht&&Ae!=="delete"&&Ae!=="deleteRange")throw new Error("Invalid operation type: "+Ae);var dt,wt=(Pe||Oe||{length:1}).length;if(Pe&&Oe&&Pe.length!==Oe.length)throw new Error("Given keys array must have same length as given values array.");if(wt===0)return rt({numFailures:0,failures:{},results:[],lastResult:void 0});function Dt(Gr){++Ei,Zc(Gr)}var qt=[],Kt=[],Ei=0;if(Ae==="deleteRange"){if(He.type===4)return rt({numFailures:Ei,failures:Kt,results:[],lastResult:void 0});He.type===3?qt.push(dt=it.clear()):qt.push(dt=it.delete(T(He)))}else{var ut=ht?ut?[Oe,Pe]:[Oe,null]:[Pe,null],Mt=ut[0],Ar=ut[1];if(ht)for(var Nr=0;Nr<wt;++Nr)qt.push(dt=Ar&&Ar[Nr]!==void 0?it[Ae](Mt[Nr],Ar[Nr]):it[Ae](Mt[Nr])),dt.onerror=Dt;else for(Nr=0;Nr<wt;++Nr)qt.push(dt=it[Ae](Mt[Nr])),dt.onerror=Dt}function Yh(Gr){Gr=Gr.target.result,qt.forEach(function(ll,Fv){return ll.error!=null&&(Kt[Fv]=ll.error)}),rt({numFailures:Ei,failures:Kt,results:Ae==="delete"?Pe:qt.map(function(ll){return ll.result}),lastResult:Gr})}dt.onerror=function(Gr){Dt(Gr),Yh(Gr)},dt.onsuccess=Yh})},getMany:function(Ee){var xe=Ee.trans,Ae=Ee.keys;return new Promise(function(Pe,Oe){Pe=Ot(Pe);for(var He,rt=xe.objectStore(be),ft=Ae.length,it=new Array(ft),ut=0,ht=0,dt=function(qt){qt=qt.target,it[qt._pos]=qt.result,++ht===ut&&Pe(it)},wt=Vo(Oe),Dt=0;Dt<ft;++Dt)Ae[Dt]!=null&&((He=rt.get(Ae[Dt]))._pos=Dt,He.onsuccess=dt,He.onerror=wt,++ut);ut===0&&Pe(it)})},get:function(Ee){var xe=Ee.trans,Ae=Ee.key;return new Promise(function(Pe,Oe){Pe=Ot(Pe);var He=xe.objectStore(be).get(Ae);He.onsuccess=function(rt){return Pe(rt.target.result)},He.onerror=Vo(Oe)})},query:(me=ve,function(Ee){return new Promise(function(xe,Ae){xe=Ot(xe);var Pe,Oe,He,ut=Ee.trans,rt=Ee.values,ft=Ee.limit,dt=Ee.query,it=ft===1/0?void 0:ft,ht=dt.index,dt=dt.range,ut=ut.objectStore(be),ht=ht.isPrimaryKey?ut:ut.index(ht.name),dt=T(dt);if(ft===0)return xe({result:[]});me?((it=rt?ht.getAll(dt,it):ht.getAllKeys(dt,it)).onsuccess=function(wt){return xe({result:wt.target.result})},it.onerror=Vo(Ae)):(Pe=0,Oe=!rt&&"openKeyCursor"in ht?ht.openKeyCursor(dt):ht.openCursor(dt),He=[],Oe.onsuccess=function(wt){var Dt=Oe.result;return Dt?(He.push(rt?Dt.value:Dt.primaryKey),++Pe===ft?xe({result:He}):void Dt.continue()):xe({result:He})},Oe.onerror=Vo(Ae))})}),openCursor:function(Ee){var xe=Ee.trans,Ae=Ee.values,Pe=Ee.query,Oe=Ee.reverse,He=Ee.unique;return new Promise(function(rt,ft){rt=Ot(rt);var ht=Pe.index,it=Pe.range,ut=xe.objectStore(be),ut=ht.isPrimaryKey?ut:ut.index(ht.name),ht=Oe?He?"prevunique":"prev":He?"nextunique":"next",dt=!Ae&&"openKeyCursor"in ut?ut.openKeyCursor(T(it),ht):ut.openCursor(T(it),ht);dt.onerror=Vo(ft),dt.onsuccess=Ot(function(wt){var Dt,qt,Kt,Ei,Mt=dt.result;Mt?(Mt.___id=++Z5,Mt.done=!1,Dt=Mt.continue.bind(Mt),qt=(qt=Mt.continuePrimaryKey)&&qt.bind(Mt),Kt=Mt.advance.bind(Mt),Ei=function(){throw new Error("Cursor not stopped")},Mt.trans=xe,Mt.stop=Mt.continue=Mt.continuePrimaryKey=Mt.advance=function(){throw new Error("Cursor not started")},Mt.fail=Ot(ft),Mt.next=function(){var Ar=this,Nr=1;return this.start(function(){return Nr--?Ar.continue():Ar.stop()}).then(function(){return Ar})},Mt.start=function(Ar){function Nr(){if(dt.result)try{Ar()}catch(Gr){Mt.fail(Gr)}else Mt.done=!0,Mt.start=function(){throw new Error("Cursor behind last entry")},Mt.stop()}var Yh=new Promise(function(Gr,ll){Gr=Ot(Gr),dt.onerror=Vo(ll),Mt.fail=ll,Mt.stop=function(Fv){Mt.stop=Mt.continue=Mt.continuePrimaryKey=Mt.advance=Ei,Gr(Fv)}});return dt.onsuccess=Ot(function(Gr){dt.onsuccess=Nr,Nr()}),Mt.continue=Dt,Mt.continuePrimaryKey=qt,Mt.advance=Kt,Nr(),Yh},rt(Mt)):rt(null)},ft)})},count:function(Ee){var xe=Ee.query,Ae=Ee.trans,Pe=xe.index,Oe=xe.range;return new Promise(function(He,rt){var ft=Ae.objectStore(be),it=Pe.isPrimaryKey?ft:ft.index(Pe.name),ft=T(Oe),it=ft?it.count(ft):it.count();it.onsuccess=Ot(function(ut){return He(ut.target.result)}),it.onerror=Vo(rt)})}}}var W,Z,oe,_e=(Z=ge,oe=XS((W=g).objectStoreNames),{schema:{name:W.name,tables:oe.map(function(ke){return Z.objectStore(ke)}).map(function(ke){var me=ke.keyPath,xe=ke.autoIncrement,be=a(me),Ee={},xe={name:ke.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:me==null,compound:be,keyPath:me,autoIncrement:xe,unique:!0,extractKey:wv(me)},indexes:XS(ke.indexNames).map(function(Ae){return ke.index(Ae)}).map(function(He){var Pe=He.name,Oe=He.unique,rt=He.multiEntry,He=He.keyPath,rt={name:Pe,compound:a(He),keyPath:He,unique:Oe,multiEntry:rt,extractKey:wv(He)};return Ee[nd(He)]=rt}),getIndexByKeyPath:function(Ae){return Ee[nd(Ae)]}};return Ee[":id"]=xe.primaryKey,me!=null&&(Ee[nd(me)]=xe.primaryKey),xe})},hasGetAll:0<oe.length&&"getAll"in Z.objectStore(oe[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ge=_e.schema,ve=_e.hasGetAll,_e=ge.tables.map(P),ae={};return _e.forEach(function(ke){return ae[ke.name]=ke}),{stack:"dbcore",transaction:g.transaction.bind(g),table:function(ke){if(!ae[ke])throw new Error("Table '".concat(ke,"' not found"));return ae[ke]},MIN_KEY:-1/0,MAX_KEY:td(_),schema:ge}}function t$(g,_,C,T){var P=C.IDBKeyRange;return C.indexedDB,{dbcore:(T=e$(_,P,T),g.dbcore.reduce(function(W,Z){return Z=Z.create,r(r({},W),Z(W))},T))}}function Dh(g,T){var C=T.db,T=t$(g._middlewares,C,g._deps,T);g.core=T.dbcore,g.tables.forEach(function(P){var W=P.name;g.core.schema.tables.some(function(Z){return Z.name===W})&&(P.core=g.core.table(W),g[W]instanceof g.Table&&(g[W].core=P.core))})}function Lh(g,_,C,T){C.forEach(function(P){var W=T[P];_.forEach(function(Z){var oe=function ge(ve,_e){return w(ve,_e)||(ve=u(ve))&&ge(ve,_e)}(Z,P);(!oe||"value"in oe&&oe.value===void 0)&&(Z===g.Transaction.prototype||Z instanceof g.Transaction?v(Z,P,{get:function(){return this.table(P)},set:function(ge){p(this,P,{value:ge,writable:!0,configurable:!0,enumerable:!0})}}):Z[P]=new g.Table(P,W))})})}function _v(g,_){_.forEach(function(C){for(var T in C)C[T]instanceof g.Table&&delete C[T]})}function n$(g,_){return g._cfg.version-_._cfg.version}function r$(g,_,C,T){var P=g._dbSchema;C.objectStoreNames.contains("$meta")&&!P.$meta&&(P.$meta=bv("$meta",QS("")[0],[]),g._storeNames.push("$meta"));var W=g._createTransaction("readwrite",g._storeNames,P);W.create(C),W._completion.catch(T);var Z=W._reject.bind(W),oe=st.transless||st;Ur(function(){return st.trans=W,st.transless=oe,_!==0?(Dh(g,C),ve=_,((ge=W).storeNames.includes("$meta")?ge.table("$meta").get("version").then(function(_e){return _e!=null?_e:ve}):at.resolve(ve)).then(function(_e){return ke=_e,me=W,be=C,Ee=[],_e=(ae=g)._versions,xe=ae._dbSchema=Bh(0,ae.idbdb,be),(_e=_e.filter(function(Ae){return Ae._cfg.version>=ke})).length!==0?(_e.forEach(function(Ae){Ee.push(function(){var Pe=xe,Oe=Ae._cfg.dbschema;zh(ae,Pe,be),zh(ae,Oe,be),xe=ae._dbSchema=Oe;var He=Sv(Pe,Oe);He.add.forEach(function(ht){Ev(be,ht[0],ht[1].primKey,ht[1].indexes)}),He.change.forEach(function(ht){if(ht.recreate)throw new re.Upgrade("Not yet support for changing primary key");var dt=be.objectStore(ht.name);ht.add.forEach(function(wt){return Fh(dt,wt)}),ht.change.forEach(function(wt){dt.deleteIndex(wt.name),Fh(dt,wt)}),ht.del.forEach(function(wt){return dt.deleteIndex(wt)})});var rt=Ae._cfg.contentUpgrade;if(rt&&Ae._cfg.version>ke){Dh(ae,be),me._memoizedTables={};var ft=I(Oe);He.del.forEach(function(ht){ft[ht]=Pe[ht]}),_v(ae,[ae.Transaction.prototype]),Lh(ae,[ae.Transaction.prototype],s(ft),ft),me.schema=ft;var it,ut=Y(rt);return ut&&Vr(),He=at.follow(function(){var ht;(it=rt(me))&&ut&&(ht=mr.bind(null,null),it.then(ht,ht))}),it&&typeof it.then=="function"?at.resolve(it):He.then(function(){return it})}}),Ee.push(function(Pe){var Oe,He,rt=Ae._cfg.dbschema;Oe=rt,He=Pe,[].slice.call(He.db.objectStoreNames).forEach(function(ft){return Oe[ft]==null&&He.db.deleteObjectStore(ft)}),_v(ae,[ae.Transaction.prototype]),Lh(ae,[ae.Transaction.prototype],ae._storeNames,ae._dbSchema),me.schema=ae._dbSchema}),Ee.push(function(Pe){ae.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ae.idbdb.version/10)===Ae._cfg.version?(ae.idbdb.deleteObjectStore("$meta"),delete ae._dbSchema.$meta,ae._storeNames=ae._storeNames.filter(function(Oe){return Oe!=="$meta"})):Pe.objectStore("$meta").put(Ae._cfg.version,"version"))})}),function Ae(){return Ee.length?at.resolve(Ee.shift()(me.idbtrans)).then(Ae):at.resolve()}().then(function(){JS(xe,be)})):at.resolve();var ae,ke,me,be,Ee,xe}).catch(Z)):(s(P).forEach(function(_e){Ev(C,_e,P[_e].primKey,P[_e].indexes)}),Dh(g,C),void at.follow(function(){return g.on.populate.fire(W)}).catch(Z));var ge,ve})}function i$(g,_){JS(g._dbSchema,_),_.db.version%10!=0||_.objectStoreNames.contains("$meta")||_.db.createObjectStore("$meta").add(Math.ceil(_.db.version/10-1),"version");var C=Bh(0,g.idbdb,_);zh(g,g._dbSchema,_);for(var T=0,P=Sv(C,g._dbSchema).change;T<P.length;T++){var W=function(Z){if(Z.change.length||Z.recreate)return console.warn("Unable to patch indexes of table ".concat(Z.name," because it has changes on the type of index or primary key.")),{value:void 0};var oe=_.objectStore(Z.name);Z.add.forEach(function(ge){qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Z.name,".").concat(ge.src)),Fh(oe,ge)})}(P[T]);if(typeof W=="object")return W.value}}function Sv(g,_){var C,T={del:[],add:[],change:[]};for(C in g)_[C]||T.del.push(C);for(C in _){var P=g[C],W=_[C];if(P){var Z={name:C,def:W,recreate:!1,del:[],add:[],change:[]};if(""+(P.primKey.keyPath||"")!=""+(W.primKey.keyPath||"")||P.primKey.auto!==W.primKey.auto)Z.recreate=!0,T.change.push(Z);else{var oe=P.idxByName,ge=W.idxByName,ve=void 0;for(ve in oe)ge[ve]||Z.del.push(ve);for(ve in ge){var _e=oe[ve],ae=ge[ve];_e?_e.src!==ae.src&&Z.change.push(ae):Z.add.push(ae)}(0<Z.del.length||0<Z.add.length||0<Z.change.length)&&T.change.push(Z)}}else T.add.push([C,W])}return T}function Ev(g,_,C,T){var P=g.db.createObjectStore(_,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return T.forEach(function(W){return Fh(P,W)}),P}function JS(g,_){s(g).forEach(function(C){_.db.objectStoreNames.contains(C)||(qe&&console.debug("Dexie: Creating missing table",C),Ev(_,C,g[C].primKey,g[C].indexes))})}function Fh(g,_){g.createIndex(_.name,_.keyPath,{unique:_.unique,multiEntry:_.multi})}function Bh(g,_,C){var T={};return b(_.objectStoreNames,0).forEach(function(P){for(var W=C.objectStore(P),Z=xv(YS(ve=W.keyPath),ve||"",!0,!1,!!W.autoIncrement,ve&&typeof ve!="string",!0),oe=[],ge=0;ge<W.indexNames.length;++ge){var _e=W.index(W.indexNames[ge]),ve=_e.keyPath,_e=xv(_e.name,ve,!!_e.unique,!!_e.multiEntry,!1,ve&&typeof ve!="string",!1);oe.push(_e)}T[P]=bv(P,Z,oe)}),T}function zh(g,_,C){for(var T=C.db.objectStoreNames,P=0;P<T.length;++P){var W=T[P],Z=C.objectStore(W);g._hasGetAll="getAll"in Z;for(var oe=0;oe<Z.indexNames.length;++oe){var ge=Z.indexNames[oe],ve=Z.index(ge).keyPath,_e=typeof ve=="string"?ve:"["+b(ve).join("+")+"]";!_[W]||(ve=_[W].idxByName[_e])&&(ve.name=ge,delete _[W].idxByName[_e],_[W].idxByName[ge]=ve)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(g._hasGetAll=!1)}function QS(g){return g.split(",").map(function(_,C){var T=(_=_.trim()).replace(/([&*]|\+\+)/g,""),P=/^\[/.test(T)?T.match(/^\[(.*)\]$/)[1].split("+"):T;return xv(T,P||null,/\&/.test(_),/\*/.test(_),/\+\+/.test(_),a(P),C===0)})}var o$=(Hh.prototype._parseStoresSpec=function(g,_){s(g).forEach(function(C){if(g[C]!==null){var T=QS(g[C]),P=T.shift();if(P.unique=!0,P.multi)throw new re.Schema("Primary key cannot be multi-valued");T.forEach(function(W){if(W.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!W.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),_[C]=bv(C,P,T)}})},Hh.prototype.stores=function(C){var _=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,C):C;var C=_._versions,T={},P={};return C.forEach(function(W){l(T,W._cfg.storesSource),P=W._cfg.dbschema={},W._parseStoresSpec(T,P)}),_._dbSchema=P,_v(_,[_._allTables,_,_.Transaction.prototype]),Lh(_,[_._allTables,_,_.Transaction.prototype,this._cfg.tables],s(P),P),_._storeNames=s(P),this},Hh.prototype.upgrade=function(g){return this._cfg.contentUpgrade=Be(this._cfg.contentUpgrade||ze,g),this},Hh);function Hh(){}function kv(g,_){var C=g._dbNamesDB;return C||(C=g._dbNamesDB=new ws(ua,{addons:[],indexedDB:g,IDBKeyRange:_})).version(1).stores({dbnames:"name"}),C.table("dbnames")}function Cv(g){return g&&typeof g.databases=="function"}function jv(g){return Ur(function(){return st.letThrough=!0,g()})}function Av(g){return!("from"in g)}var jr=function(g,_){if(!this){var C=new jr;return g&&"d"in g&&l(C,g),C}l(this,arguments.length?{d:1,from:g,to:1<arguments.length?_:g}:{d:0})};function rd(g,_,C){var T=Ut(_,C);if(!isNaN(T)){if(0<T)throw RangeError();if(Av(g))return l(g,{from:_,to:C,d:1});var P=g.l,T=g.r;if(Ut(C,g.from)<0)return P?rd(P,_,C):g.l={from:_,to:C,d:1,l:null,r:null},eE(g);if(0<Ut(_,g.to))return T?rd(T,_,C):g.r={from:_,to:C,d:1,l:null,r:null},eE(g);Ut(_,g.from)<0&&(g.from=_,g.l=null,g.d=T?T.d+1:1),0<Ut(C,g.to)&&(g.to=C,g.r=null,g.d=g.l?g.l.d+1:1),C=!g.r,P&&!g.l&&id(g,P),T&&C&&id(g,T)}}function id(g,_){Av(_)||function C(T,ge){var W=ge.from,Z=ge.to,oe=ge.l,ge=ge.r;rd(T,W,Z),oe&&C(T,oe),ge&&C(T,ge)}(g,_)}function ZS(g,_){var C=Wh(_),T=C.next();if(T.done)return!1;for(var P=T.value,W=Wh(g),Z=W.next(P.from),oe=Z.value;!T.done&&!Z.done;){if(Ut(oe.from,P.to)<=0&&0<=Ut(oe.to,P.from))return!0;Ut(P.from,oe.from)<0?P=(T=C.next(oe.from)).value:oe=(Z=W.next(P.from)).value}return!1}function Wh(g){var _=Av(g)?null:{s:0,n:g};return{next:function(C){for(var T=0<arguments.length;_;)switch(_.s){case 0:if(_.s=1,T)for(;_.n.l&&Ut(C,_.n.from)<0;)_={up:_,n:_.n.l,s:1};else for(;_.n.l;)_={up:_,n:_.n.l,s:1};case 1:if(_.s=2,!T||Ut(C,_.n.to)<=0)return{value:_.n,done:!1};case 2:if(_.n.r){_.s=3,_={up:_,n:_.n.r,s:0};continue}case 3:_=_.up}return{done:!0}}}}function eE(g){var _,C,T=(((_=g.r)===null||_===void 0?void 0:_.d)||0)-(((C=g.l)===null||C===void 0?void 0:C.d)||0),P=1<T?"r":T<-1?"l":"";P&&(_=P=="r"?"l":"r",C=r({},g),T=g[P],g.from=T.from,g.to=T.to,g[P]=T[P],C[P]=T[_],(g[_]=C).d=tE(C)),g.d=tE(g)}function tE(C){var _=C.r,C=C.l;return(_?C?Math.max(_.d,C.d):_.d:C?C.d:0)+1}function Uh(g,_){return s(_).forEach(function(C){g[C]?id(g[C],_[C]):g[C]=function T(P){var W,Z,oe={};for(W in P)f(P,W)&&(Z=P[W],oe[W]=!Z||typeof Z!="object"||M.has(Z.constructor)?Z:T(Z));return oe}(_[C])}),g}function Nv(g,_){return g.all||_.all||Object.keys(g).some(function(C){return _[C]&&ZS(_[C],g[C])})}h(jr.prototype,((Vi={add:function(g){return id(this,g),this},addKey:function(g){return rd(this,g,g),this},addKeys:function(g){var _=this;return g.forEach(function(C){return rd(_,C,C)}),this},hasKey:function(g){var _=Wh(this).next(g).value;return _&&Ut(_.from,g)<=0&&0<=Ut(_.to,g)}})[G]=function(){return Wh(this)},Vi));var sl={},Rv={},Tv=!1;function Vh(g){Uh(Rv,g),Tv||(Tv=!0,setTimeout(function(){Tv=!1,Iv(Rv,!(Rv={}))},0))}function Iv(g,_){_===void 0&&(_=!1);var C=new Set;if(g.all)for(var T=0,P=Object.values(sl);T<P.length;T++)nE(Z=P[T],g,C,_);else for(var W in g){var Z,oe=/^idb\:\/\/(.*)\/(.*)\//.exec(W);oe&&(W=oe[1],oe=oe[2],(Z=sl["idb://".concat(W,"/").concat(oe)])&&nE(Z,g,C,_))}C.forEach(function(ge){return ge()})}function nE(g,_,C,T){for(var P=[],W=0,Z=Object.entries(g.queries.query);W<Z.length;W++){for(var oe=Z[W],ge=oe[0],ve=[],_e=0,ae=oe[1];_e<ae.length;_e++){var ke=ae[_e];Nv(_,ke.obsSet)?ke.subscribers.forEach(function(xe){return C.add(xe)}):T&&ve.push(ke)}T&&P.push([ge,ve])}if(T)for(var me=0,be=P;me<be.length;me++){var Ee=be[me],ge=Ee[0],ve=Ee[1];g.queries.query[ge]=ve}}function s$(g){var _=g._state,C=g._deps.indexedDB;if(_.isBeingOpened||g.idbdb)return _.dbReadyPromise.then(function(){return _.dbOpenError?vn(_.dbOpenError):g});_.isBeingOpened=!0,_.dbOpenError=null,_.openComplete=!1;var T=_.openCanceller,P=Math.round(10*g.verno),W=!1;function Z(){if(_.openCanceller!==T)throw new re.DatabaseClosed("db.open() was cancelled")}function oe(){return new at(function(ke,me){if(Z(),!C)throw new re.MissingAPI;var be=g.name,Ee=_.autoSchema||!P?C.open(be):C.open(be,P);if(!Ee)throw new re.MissingAPI;Ee.onerror=Vo(me),Ee.onblocked=Ot(g._fireOnBlocked),Ee.onupgradeneeded=Ot(function(xe){var Ae;_e=Ee.transaction,_.autoSchema&&!g._options.allowEmptyDB?(Ee.onerror=Zc,_e.abort(),Ee.result.close(),(Ae=C.deleteDatabase(be)).onsuccess=Ae.onerror=Ot(function(){me(new re.NoSuchDatabase("Database ".concat(be," doesnt exist")))})):(_e.onerror=Vo(me),xe=xe.oldVersion>Math.pow(2,62)?0:xe.oldVersion,ae=xe<1,g.idbdb=Ee.result,W&&i$(g,_e),r$(g,xe/10,_e,me))},me),Ee.onsuccess=Ot(function(){_e=null;var xe,Ae,Pe,Oe,He,rt=g.idbdb=Ee.result,ft=b(rt.objectStoreNames);if(0<ft.length)try{var it=rt.transaction((Oe=ft).length===1?Oe[0]:Oe,"readonly");if(_.autoSchema)Ae=rt,Pe=it,(xe=g).verno=Ae.version/10,Pe=xe._dbSchema=Bh(0,Ae,Pe),xe._storeNames=b(Ae.objectStoreNames,0),Lh(xe,[xe._allTables],s(Pe),Pe);else if(zh(g,g._dbSchema,it),((He=Sv(Bh(0,(He=g).idbdb,it),He._dbSchema)).add.length||He.change.some(function(ut){return ut.add.length||ut.change.length}))&&!W)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),rt.close(),P=rt.version+1,W=!0,ke(oe());Dh(g,it)}catch(ut){}qr.push(g),rt.onversionchange=Ot(function(ut){_.vcFired=!0,g.on("versionchange").fire(ut)}),rt.onclose=Ot(function(ut){g.on("close").fire(ut)}),ae&&(He=g._deps,it=be,rt=He.indexedDB,He=He.IDBKeyRange,Cv(rt)||it===ua||kv(rt,He).put({name:it}).catch(ze)),ke()},me)}).catch(function(ke){switch(ke==null?void 0:ke.name){case"UnknownError":if(0<_.PR1398_maxLoop)return _.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),oe();break;case"VersionError":if(0<P)return P=0,oe()}return at.reject(ke)})}var ge,ve=_.dbReadyResolve,_e=null,ae=!1;return at.race([T,(typeof navigator>"u"?at.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function me(){return indexedDB.databases().finally(ke)}ge=setInterval(me,100),me()}).finally(function(){return clearInterval(ge)}):Promise.resolve()).then(oe)]).then(function(){return Z(),_.onReadyBeingFired=[],at.resolve(jv(function(){return g.on.ready.fire(g.vip)})).then(function ke(){if(0<_.onReadyBeingFired.length){var me=_.onReadyBeingFired.reduce(Be,ze);return _.onReadyBeingFired=[],at.resolve(jv(function(){return me(g.vip)})).then(ke)}})}).finally(function(){_.openCanceller===T&&(_.onReadyBeingFired=null,_.isBeingOpened=!1)}).catch(function(ke){_.dbOpenError=ke;try{_e&&_e.abort()}catch(me){}return T===_.openCanceller&&g._close(),vn(ke)}).finally(function(){_.openComplete=!0,ve()}).then(function(){var ke;return ae&&(ke={},g.tables.forEach(function(me){me.schema.indexes.forEach(function(be){be.name&&(ke["idb://".concat(g.name,"/").concat(me.name,"/").concat(be.name)]=new jr(-1/0,[[[]]]))}),ke["idb://".concat(g.name,"/").concat(me.name,"/")]=ke["idb://".concat(g.name,"/").concat(me.name,"/:dels")]=new jr(-1/0,[[[]]])}),ca(ed).fire(ke),Iv(ke,!0)),g})}function Pv(g){function _(W){return g.next(W)}var C=P(_),T=P(function(W){return g.throw(W)});function P(W){return function(ge){var oe=W(ge),ge=oe.value;return oe.done?ge:ge&&typeof ge.then=="function"?ge.then(C,T):a(ge)?Promise.all(ge).then(C,T):C(ge)}}return P(_)()}function qh(g,_,C){for(var T=a(g)?g.slice():[g],P=0;P<C;++P)T.push(_);return T}var a$={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(g){return r(r({},g),{table:function(_){var C=g.table(_),T=C.schema,P={},W=[];function Z(ae,ke,me){var be=nd(ae),Ee=P[be]=P[be]||[],xe=ae==null?0:typeof ae=="string"?1:ae.length,Ae=0<ke,Ae=r(r({},me),{name:Ae?"".concat(be,"(virtual-from:").concat(me.name,")"):me.name,lowLevelIndex:me,isVirtual:Ae,keyTail:ke,keyLength:xe,extractKey:wv(ae),unique:!Ae&&me.unique});return Ee.push(Ae),Ae.isPrimaryKey||W.push(Ae),1<xe&&Z(xe===2?ae[0]:ae.slice(0,xe-1),ke+1,me),Ee.sort(function(Pe,Oe){return Pe.keyTail-Oe.keyTail}),Ae}_=Z(T.primaryKey.keyPath,0,T.primaryKey),P[":id"]=[_];for(var oe=0,ge=T.indexes;oe<ge.length;oe++){var ve=ge[oe];Z(ve.keyPath,0,ve)}function _e(ae){var ke,me=ae.query.index;return me.isVirtual?r(r({},ae),{query:{index:me.lowLevelIndex,range:(ke=ae.query.range,me=me.keyTail,{type:ke.type===1?2:ke.type,lower:qh(ke.lower,ke.lowerOpen?g.MAX_KEY:g.MIN_KEY,me),lowerOpen:!0,upper:qh(ke.upper,ke.upperOpen?g.MIN_KEY:g.MAX_KEY,me),upperOpen:!0})}}):ae}return r(r({},C),{schema:r(r({},T),{primaryKey:_,indexes:W,getIndexByKeyPath:function(ae){return(ae=P[nd(ae)])&&ae[0]}}),count:function(ae){return C.count(_e(ae))},query:function(ae){return C.query(_e(ae))},openCursor:function(ae){var ke=ae.query.index,me=ke.keyTail,be=ke.isVirtual,Ee=ke.keyLength;return be?C.openCursor(_e(ae)).then(function(Ae){return Ae&&xe(Ae)}):C.openCursor(ae);function xe(Ae){return Object.create(Ae,{continue:{value:function(Pe){Pe!=null?Ae.continue(qh(Pe,ae.reverse?g.MAX_KEY:g.MIN_KEY,me)):ae.unique?Ae.continue(Ae.key.slice(0,Ee).concat(ae.reverse?g.MIN_KEY:g.MAX_KEY,me)):Ae.continue()}},continuePrimaryKey:{value:function(Pe,Oe){Ae.continuePrimaryKey(qh(Pe,g.MAX_KEY,me),Oe)}},primaryKey:{get:function(){return Ae.primaryKey}},key:{get:function(){var Pe=Ae.key;return Ee===1?Pe[0]:Pe.slice(0,Ee)}},value:{get:function(){return Ae.value}}})}}})}})}};function Ov(g,_,C,T){return C=C||{},T=T||"",s(g).forEach(function(P){var W,Z,oe;f(_,P)?(W=g[P],Z=_[P],typeof W=="object"&&typeof Z=="object"&&W&&Z?(oe=q(W))!==q(Z)?C[T+P]=_[P]:oe==="Object"?Ov(W,Z,C,T+P+"."):W!==Z&&(C[T+P]=_[P]):W!==Z&&(C[T+P]=_[P])):C[T+P]=void 0}),s(_).forEach(function(P){f(g,P)||(C[T+P]=_[P])}),C}function $v(g,_){return _.type==="delete"?_.keys:_.keys||_.values.map(g.extractKey)}var l$={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(g){return r(r({},g),{table:function(_){var C=g.table(_),T=C.schema.primaryKey;return r(r({},C),{mutate:function(P){var W=st.trans,Z=W.table(_).hook,oe=Z.deleting,ge=Z.creating,ve=Z.updating;switch(P.type){case"add":if(ge.fire===ze)break;return W._promise("readwrite",function(){return _e(P)},!0);case"put":if(ge.fire===ze&&ve.fire===ze)break;return W._promise("readwrite",function(){return _e(P)},!0);case"delete":if(oe.fire===ze)break;return W._promise("readwrite",function(){return _e(P)},!0);case"deleteRange":if(oe.fire===ze)break;return W._promise("readwrite",function(){return function ae(ke,me,be){return C.query({trans:ke,values:!1,query:{index:T,range:me},limit:be}).then(function(Ee){var xe=Ee.result;return _e({type:"delete",keys:xe,trans:ke}).then(function(Ae){return 0<Ae.numFailures?Promise.reject(Ae.failures[0]):xe.length<be?{failures:[],numFailures:0,lastResult:void 0}:ae(ke,r(r({},me),{lower:xe[xe.length-1],lowerOpen:!0}),be)})})}(P.trans,P.range,1e4)},!0)}return C.mutate(P);function _e(ae){var ke,me,be,Ee=st.trans,xe=ae.keys||$v(T,ae);if(!xe)throw new Error("Keys missing");return(ae=ae.type==="add"||ae.type==="put"?r(r({},ae),{keys:xe}):r({},ae)).type!=="delete"&&(ae.values=i([],ae.values)),ae.keys&&(ae.keys=i([],ae.keys)),ke=C,be=xe,((me=ae).type==="add"?Promise.resolve([]):ke.getMany({trans:me.trans,keys:be,cache:"immutable"})).then(function(Ae){var Pe=xe.map(function(Oe,He){var rt,ft,it,ut=Ae[He],ht={onerror:null,onsuccess:null};return ae.type==="delete"?oe.fire.call(ht,Oe,ut,Ee):ae.type==="add"||ut===void 0?(rt=ge.fire.call(ht,Oe,ae.values[He],Ee),Oe==null&&rt!=null&&(ae.keys[He]=Oe=rt,T.outbound||N(ae.values[He],T.keyPath,Oe))):(rt=Ov(ut,ae.values[He]),(ft=ve.fire.call(ht,rt,Oe,ut,Ee))&&(it=ae.values[He],Object.keys(ft).forEach(function(dt){f(it,dt)?it[dt]=ft[dt]:N(it,dt,ft[dt])}))),ht});return C.mutate(ae).then(function(Oe){for(var He=Oe.failures,rt=Oe.results,ft=Oe.numFailures,Oe=Oe.lastResult,it=0;it<xe.length;++it){var ut=(rt||xe)[it],ht=Pe[it];ut==null?ht.onerror&&ht.onerror(He[it]):ht.onsuccess&&ht.onsuccess(ae.type==="put"&&Ae[it]?ae.values[it]:ut)}return{failures:He,results:rt,numFailures:ft,lastResult:Oe}}).catch(function(Oe){return Pe.forEach(function(He){return He.onerror&&He.onerror(Oe)}),Promise.reject(Oe)})})}}})}})}};function rE(g,_,C){try{if(!_||_.keys.length<g.length)return null;for(var T=[],P=0,W=0;P<_.keys.length&&W<g.length;++P)Ut(_.keys[P],g[W])===0&&(T.push(C?D(_.values[P]):_.values[P]),++W);return T.length===g.length?T:null}catch(Z){return null}}var u$={stack:"dbcore",level:-1,create:function(g){return{table:function(_){var C=g.table(_);return r(r({},C),{getMany:function(T){if(!T.cache)return C.getMany(T);var P=rE(T.keys,T.trans._cache,T.cache==="clone");return P?at.resolve(P):C.getMany(T).then(function(W){return T.trans._cache={keys:T.keys,values:T.cache==="clone"?D(W):W},W})},mutate:function(T){return T.type!=="add"&&(T.trans._cache=null),C.mutate(T)}})}}}};function iE(g,_){return g.trans.mode==="readonly"&&!!g.subscr&&!g.trans.explicit&&g.trans.db._options.cache!=="disabled"&&!_.schema.primaryKey.outbound}function oE(g,_){switch(g){case"query":return _.values&&!_.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var c$={stack:"dbcore",level:0,name:"Observability",create:function(g){var _=g.schema.name,C=new jr(g.MIN_KEY,g.MAX_KEY);return r(r({},g),{transaction:function(T,P,W){if(st.subscr&&P!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(st.querier));return g.transaction(T,P,W)},table:function(T){var P=g.table(T),W=P.schema,Z=W.primaryKey,ae=W.indexes,oe=Z.extractKey,ge=Z.outbound,ve=Z.autoIncrement&&ae.filter(function(me){return me.compound&&me.keyPath.includes(Z.keyPath)}),_e=r(r({},P),{mutate:function(me){function be(dt){return dt="idb://".concat(_,"/").concat(T,"/").concat(dt),Oe[dt]||(Oe[dt]=new jr)}var Ee,xe,Ae,Pe=me.trans,Oe=me.mutatedParts||(me.mutatedParts={}),He=be(""),rt=be(":dels"),ft=me.type,ht=me.type==="deleteRange"?[me.range]:me.type==="delete"?[me.keys]:me.values.length<50?[$v(Z,me).filter(function(dt){return dt}),me.values]:[],it=ht[0],ut=ht[1],ht=me.trans._cache;return a(it)?(He.addKeys(it),(ht=ft==="delete"||it.length===ut.length?rE(it,ht):null)||rt.addKeys(it),(ht||ut)&&(Ee=be,xe=ht,Ae=ut,W.indexes.forEach(function(dt){var wt=Ee(dt.name||"");function Dt(Kt){return Kt!=null?dt.extractKey(Kt):null}function qt(Kt){return dt.multiEntry&&a(Kt)?Kt.forEach(function(Ei){return wt.addKey(Ei)}):wt.addKey(Kt)}(xe||Ae).forEach(function(Kt,Ar){var Mt=xe&&Dt(xe[Ar]),Ar=Ae&&Dt(Ae[Ar]);Ut(Mt,Ar)!==0&&(Mt!=null&&qt(Mt),Ar!=null&&qt(Ar))})}))):it?(ut={from:(ut=it.lower)!==null&&ut!==void 0?ut:g.MIN_KEY,to:(ut=it.upper)!==null&&ut!==void 0?ut:g.MAX_KEY},rt.add(ut),He.add(ut)):(He.add(C),rt.add(C),W.indexes.forEach(function(dt){return be(dt.name).add(C)})),P.mutate(me).then(function(dt){return!it||me.type!=="add"&&me.type!=="put"||(He.addKeys(dt.results),ve&&ve.forEach(function(wt){for(var Dt=me.values.map(function(Mt){return wt.extractKey(Mt)}),qt=wt.keyPath.findIndex(function(Mt){return Mt===Z.keyPath}),Kt=0,Ei=dt.results.length;Kt<Ei;++Kt)Dt[Kt][qt]=dt.results[Kt];be(wt.name).addKeys(Dt)})),Pe.mutatedParts=Uh(Pe.mutatedParts||{},Oe),dt})}}),ae=function(be){var Ee=be.query,be=Ee.index,Ee=Ee.range;return[be,new jr((be=Ee.lower)!==null&&be!==void 0?be:g.MIN_KEY,(Ee=Ee.upper)!==null&&Ee!==void 0?Ee:g.MAX_KEY)]},ke={get:function(me){return[Z,new jr(me.key)]},getMany:function(me){return[Z,new jr().addKeys(me.keys)]},count:ae,query:ae,openCursor:ae};return s(ke).forEach(function(me){_e[me]=function(be){var Ee=st.subscr,xe=!!Ee,Ae=iE(st,P)&&oE(me,be)?be.obsSet={}:Ee;if(xe){var Pe=function(ut){return ut="idb://".concat(_,"/").concat(T,"/").concat(ut),Ae[ut]||(Ae[ut]=new jr)},Oe=Pe(""),He=Pe(":dels"),Ee=ke[me](be),xe=Ee[0],Ee=Ee[1];if((me==="query"&&xe.isPrimaryKey&&!be.values?He:Pe(xe.name||"")).add(Ee),!xe.isPrimaryKey){if(me!=="count"){var rt=me==="query"&&ge&&be.values&&P.query(r(r({},be),{values:!1}));return P[me].apply(this,arguments).then(function(ut){if(me==="query"){if(ge&&be.values)return rt.then(function(Dt){return Dt=Dt.result,Oe.addKeys(Dt),ut});var ht=be.values?ut.result.map(oe):ut.result;(be.values?Oe:He).addKeys(ht)}else if(me==="openCursor"){var dt=ut,wt=be.values;return dt&&Object.create(dt,{key:{get:function(){return He.addKey(dt.primaryKey),dt.key}},primaryKey:{get:function(){var Dt=dt.primaryKey;return He.addKey(Dt),Dt}},value:{get:function(){return wt&&Oe.addKey(dt.primaryKey),dt.value}}})}return ut})}He.add(C)}}return P[me].apply(this,arguments)}}),_e}})}};function sE(g,_,C){if(C.numFailures===0)return _;if(_.type==="deleteRange")return null;var T=_.keys?_.keys.length:"values"in _&&_.values?_.values.length:1;return C.numFailures===T?null:(_=r({},_),a(_.keys)&&(_.keys=_.keys.filter(function(P,W){return!(W in C.failures)})),"values"in _&&a(_.values)&&(_.values=_.values.filter(function(P,W){return!(W in C.failures)})),_)}function Mv(g,_){return C=g,((T=_).lower===void 0||(T.lowerOpen?0<Ut(C,T.lower):0<=Ut(C,T.lower)))&&(g=g,(_=_).upper===void 0||(_.upperOpen?Ut(g,_.upper)<0:Ut(g,_.upper)<=0));var C,T}function aE(g,_,ke,T,P,W){if(!ke||ke.length===0)return g;var Z=_.query.index,oe=Z.multiEntry,ge=_.query.range,ve=T.schema.primaryKey.extractKey,_e=Z.extractKey,ae=(Z.lowLevelIndex||Z).extractKey,ke=ke.reduce(function(me,be){var Ee=me,xe=[];if(be.type==="add"||be.type==="put")for(var Ae=new jr,Pe=be.values.length-1;0<=Pe;--Pe){var Oe,He=be.values[Pe],rt=ve(He);Ae.hasKey(rt)||(Oe=_e(He),(oe&&a(Oe)?Oe.some(function(dt){return Mv(dt,ge)}):Mv(Oe,ge))&&(Ae.addKey(rt),xe.push(He)))}switch(be.type){case"add":var ft=new jr().addKeys(_.values?me.map(function(wt){return ve(wt)}):me),Ee=me.concat(_.values?xe.filter(function(wt){return wt=ve(wt),!ft.hasKey(wt)&&(ft.addKey(wt),!0)}):xe.map(function(wt){return ve(wt)}).filter(function(wt){return!ft.hasKey(wt)&&(ft.addKey(wt),!0)}));break;case"put":var it=new jr().addKeys(be.values.map(function(wt){return ve(wt)}));Ee=me.filter(function(wt){return!it.hasKey(_.values?ve(wt):wt)}).concat(_.values?xe:xe.map(function(wt){return ve(wt)}));break;case"delete":var ut=new jr().addKeys(be.keys);Ee=me.filter(function(wt){return!ut.hasKey(_.values?ve(wt):wt)});break;case"deleteRange":var ht=be.range;Ee=me.filter(function(wt){return!Mv(ve(wt),ht)})}return Ee},g);return ke===g?g:(ke.sort(function(me,be){return Ut(ae(me),ae(be))||Ut(ve(me),ve(be))}),_.limit&&_.limit<1/0&&(ke.length>_.limit?ke.length=_.limit:g.length===_.limit&&ke.length<_.limit&&(P.dirty=!0)),W?Object.freeze(ke):ke)}function lE(g,_){return Ut(g.lower,_.lower)===0&&Ut(g.upper,_.upper)===0&&!!g.lowerOpen==!!_.lowerOpen&&!!g.upperOpen==!!_.upperOpen}function d$(g,_){return function(C,T,P,W){if(C===void 0)return T!==void 0?-1:0;if(T===void 0)return 1;if((T=Ut(C,T))===0){if(P&&W)return 0;if(P)return 1;if(W)return-1}return T}(g.lower,_.lower,g.lowerOpen,_.lowerOpen)<=0&&0<=function(C,T,P,W){if(C===void 0)return T!==void 0?1:0;if(T===void 0)return-1;if((T=Ut(C,T))===0){if(P&&W)return 0;if(P)return-1;if(W)return 1}return T}(g.upper,_.upper,g.upperOpen,_.upperOpen)}function f$(g,_,C,T){g.subscribers.add(C),T.addEventListener("abort",function(){var P,W;g.subscribers.delete(C),g.subscribers.size===0&&(P=g,W=_,setTimeout(function(){P.subscribers.size===0&&B(W,P)},3e3))})}var h$={stack:"dbcore",level:0,name:"Cache",create:function(g){var _=g.schema.name;return r(r({},g),{transaction:function(C,T,P){var W,Z,oe=g.transaction(C,T,P);return T==="readwrite"&&(Z=(W=new AbortController).signal,P=function(ge){return function(){if(W.abort(),T==="readwrite"){for(var ve=new Set,_e=0,ae=C;_e<ae.length;_e++){var ke=ae[_e],me=sl["idb://".concat(_,"/").concat(ke)];if(me){var be=g.table(ke),Ee=me.optimisticOps.filter(function(wt){return wt.trans===oe});if(oe._explicit&&ge&&oe.mutatedParts)for(var xe=0,Ae=Object.values(me.queries.query);xe<Ae.length;xe++)for(var Pe=0,Oe=(ft=Ae[xe]).slice();Pe<Oe.length;Pe++)Nv((it=Oe[Pe]).obsSet,oe.mutatedParts)&&(B(ft,it),it.subscribers.forEach(function(wt){return ve.add(wt)}));else if(0<Ee.length){me.optimisticOps=me.optimisticOps.filter(function(wt){return wt.trans!==oe});for(var He=0,rt=Object.values(me.queries.query);He<rt.length;He++)for(var ft,it,ut,ht=0,dt=(ft=rt[He]).slice();ht<dt.length;ht++)(it=dt[ht]).res!=null&&oe.mutatedParts&&(ge&&!it.dirty?(ut=Object.isFrozen(it.res),ut=aE(it.res,it.req,Ee,be,it,ut),it.dirty?(B(ft,it),it.subscribers.forEach(function(wt){return ve.add(wt)})):ut!==it.res&&(it.res=ut,it.promise=at.resolve({result:ut}))):(it.dirty&&B(ft,it),it.subscribers.forEach(function(wt){return ve.add(wt)})))}}}ve.forEach(function(wt){return wt()})}}},oe.addEventListener("abort",P(!1),{signal:Z}),oe.addEventListener("error",P(!1),{signal:Z}),oe.addEventListener("complete",P(!0),{signal:Z})),oe},table:function(C){var T=g.table(C),P=T.schema.primaryKey;return r(r({},T),{mutate:function(W){var Z=st.trans;if(P.outbound||Z.db._options.cache==="disabled"||Z.explicit||Z.idbtrans.mode!=="readwrite")return T.mutate(W);var oe=sl["idb://".concat(_,"/").concat(C)];return oe?(Z=T.mutate(W),W.type!=="add"&&W.type!=="put"||!(50<=W.values.length||$v(P,W).some(function(ge){return ge==null}))?(oe.optimisticOps.push(W),W.mutatedParts&&Vh(W.mutatedParts),Z.then(function(ge){0<ge.numFailures&&(B(oe.optimisticOps,W),(ge=sE(0,W,ge))&&oe.optimisticOps.push(ge),W.mutatedParts&&Vh(W.mutatedParts))}),Z.catch(function(){B(oe.optimisticOps,W),W.mutatedParts&&Vh(W.mutatedParts)})):Z.then(function(ge){var ve=sE(0,r(r({},W),{values:W.values.map(function(_e,ae){var ke;return ge.failures[ae]?_e:(_e=(ke=P.keyPath)!==null&&ke!==void 0&&ke.includes(".")?D(_e):r({},_e),N(_e,P.keyPath,ge.results[ae]),_e)})}),ge);oe.optimisticOps.push(ve),queueMicrotask(function(){return W.mutatedParts&&Vh(W.mutatedParts)})}),Z):T.mutate(W)},query:function(W){if(!iE(st,T)||!oE("query",W))return T.query(W);var Z=((ve=st.trans)===null||ve===void 0?void 0:ve.db._options.cache)==="immutable",ae=st,oe=ae.requery,ge=ae.signal,ve=function(be,Ee,xe,Ae){var Pe=sl["idb://".concat(be,"/").concat(Ee)];if(!Pe)return[];if(!(Ee=Pe.queries[xe]))return[null,!1,Pe,null];var Oe=Ee[(Ae.query?Ae.query.index.name:null)||""];if(!Oe)return[null,!1,Pe,null];switch(xe){case"query":var He=Oe.find(function(rt){return rt.req.limit===Ae.limit&&rt.req.values===Ae.values&&lE(rt.req.query.range,Ae.query.range)});return He?[He,!0,Pe,Oe]:[Oe.find(function(rt){return("limit"in rt.req?rt.req.limit:1/0)>=Ae.limit&&(!Ae.values||rt.req.values)&&d$(rt.req.query.range,Ae.query.range)}),!1,Pe,Oe];case"count":return He=Oe.find(function(rt){return lE(rt.req.query.range,Ae.query.range)}),[He,!!He,Pe,Oe]}}(_,C,"query",W),_e=ve[0],ae=ve[1],ke=ve[2],me=ve[3];return _e&&ae?_e.obsSet=W.obsSet:(ae=T.query(W).then(function(be){var Ee=be.result;if(_e&&(_e.res=Ee),Z){for(var xe=0,Ae=Ee.length;xe<Ae;++xe)Object.freeze(Ee[xe]);Object.freeze(Ee)}else be.result=D(Ee);return be}).catch(function(be){return me&&_e&&B(me,_e),Promise.reject(be)}),_e={obsSet:W.obsSet,promise:ae,subscribers:new Set,type:"query",req:W,dirty:!1},me?me.push(_e):(me=[_e],(ke=ke||(sl["idb://".concat(_,"/").concat(C)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[W.query.index.name||""]=me)),f$(_e,me,oe,ge),_e.promise.then(function(be){return{result:aE(be.result,W,ke==null?void 0:ke.optimisticOps,T,_e,Z)}})}})}})}};function Kh(g,_){return new Proxy(g,{get:function(C,T,P){return T==="db"?_:Reflect.get(C,T,P)}})}var ws=(Kn.prototype.version=function(g){if(isNaN(g)||g<.1)throw new re.Type("Given version is not a positive number");if(g=Math.round(10*g)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var _=this._versions,C=_.filter(function(T){return T._cfg.version===g})[0];return C||(C=new this.Version(g),_.push(C),_.sort(n$),C.stores({}),this._state.autoSchema=!1,C)},Kn.prototype._whenReady=function(g){var _=this;return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?g():new at(function(C,T){if(_._state.openComplete)return T(new re.DatabaseClosed(_._state.dbOpenError));if(!_._state.isBeingOpened){if(!_._state.autoOpen)return void T(new re.DatabaseClosed);_.open().catch(ze)}_._state.dbReadyPromise.then(C,T)}).then(g)},Kn.prototype.use=function(g){var _=g.stack,C=g.create,T=g.level,P=g.name;return P&&this.unuse({stack:_,name:P}),g=this._middlewares[_]||(this._middlewares[_]=[]),g.push({stack:_,create:C,level:T==null?10:T,name:P}),g.sort(function(W,Z){return W.level-Z.level}),this},Kn.prototype.unuse=function(g){var _=g.stack,C=g.name,T=g.create;return _&&this._middlewares[_]&&(this._middlewares[_]=this._middlewares[_].filter(function(P){return T?P.create!==T:!!C&&P.name!==C})),this},Kn.prototype.open=function(){var g=this;return co(Gt,function(){return s$(g)})},Kn.prototype._close=function(){var g=this._state,_=qr.indexOf(this);if(0<=_&&qr.splice(_,1),this.idbdb){try{this.idbdb.close()}catch(C){}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new at(function(C){g.dbReadyResolve=C}),g.openCanceller=new at(function(C,T){g.cancelOpen=T}))},Kn.prototype.close=function(C){var _=(C===void 0?{disableAutoOpen:!0}:C).disableAutoOpen,C=this._state;_?(C.isBeingOpened&&C.cancelOpen(new re.DatabaseClosed),this._close(),C.autoOpen=!1,C.dbOpenError=new re.DatabaseClosed):(this._close(),C.autoOpen=this._options.autoOpen||C.isBeingOpened,C.openComplete=!1,C.dbOpenError=null)},Kn.prototype.delete=function(g){var _=this;g===void 0&&(g={disableAutoOpen:!0});var C=0<arguments.length&&typeof arguments[0]!="object",T=this._state;return new at(function(P,W){function Z(){_.close(g);var oe=_._deps.indexedDB.deleteDatabase(_.name);oe.onsuccess=Ot(function(){var ge,ve,_e;ge=_._deps,ve=_.name,_e=ge.indexedDB,ge=ge.IDBKeyRange,Cv(_e)||ve===ua||kv(_e,ge).delete(ve).catch(ze),P()}),oe.onerror=Vo(W),oe.onblocked=_._fireOnBlocked}if(C)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");T.isBeingOpened?T.dbReadyPromise.then(Z):Z()})},Kn.prototype.backendDB=function(){return this.idbdb},Kn.prototype.isOpen=function(){return this.idbdb!==null},Kn.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},Kn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Kn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Kn.prototype,"tables",{get:function(){var g=this;return s(this._allTables).map(function(_){return g._allTables[_]})},enumerable:!1,configurable:!0}),Kn.prototype.transaction=function(){var g=(function(_,C,T){var P=arguments.length;if(P<2)throw new re.InvalidArgument("Too few arguments");for(var W=new Array(P-1);--P;)W[P-1]=arguments[P];return T=W.pop(),[_,O(W),T]}).apply(this,arguments);return this._transaction.apply(this,g)},Kn.prototype._transaction=function(g,_,C){var T=this,P=st.trans;P&&P.db===this&&g.indexOf("!")===-1||(P=null);var W,Z,oe=g.indexOf("?")!==-1;g=g.replace("!","").replace("?","");try{if(Z=_.map(function(ve){if(ve=ve instanceof T.Table?ve.name:ve,typeof ve!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ve}),g=="r"||g===zo)W=zo;else{if(g!="rw"&&g!=bs)throw new re.InvalidArgument("Invalid transaction mode: "+g);W=bs}if(P){if(P.mode===zo&&W===bs){if(!oe)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");P=null}P&&Z.forEach(function(ve){if(P&&P.storeNames.indexOf(ve)===-1){if(!oe)throw new re.SubTransaction("Table "+ve+" not included in parent transaction.");P=null}}),oe&&P&&!P.active&&(P=null)}}catch(ve){return P?P._promise(null,function(_e,ae){ae(ve)}):vn(ve)}var ge=(function ve(_e,ae,ke,me,be){return at.resolve().then(function(){var Ee=st.transless||st,xe=_e._createTransaction(ae,ke,_e._dbSchema,me);if(xe.explicit=!0,Ee={trans:xe,transless:Ee},me)xe.idbtrans=me.idbtrans;else try{xe.create(),xe.idbtrans._explicit=!0,_e._state.PR1398_maxLoop=3}catch(Oe){return Oe.name===U.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return ve(_e,ae,ke,null,be)})):vn(Oe)}var Ae,Pe=Y(be);return Pe&&Vr(),Ee=at.follow(function(){var Oe;(Ae=be.call(xe,xe))&&(Pe?(Oe=mr.bind(null,null),Ae.then(Oe,Oe)):typeof Ae.next=="function"&&typeof Ae.throw=="function"&&(Ae=Pv(Ae)))},Ee),(Ae&&typeof Ae.then=="function"?at.resolve(Ae).then(function(Oe){return xe.active?Oe:vn(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ee.then(function(){return Ae})).then(function(Oe){return me&&xe._resolve(),xe._completion.then(function(){return Oe})}).catch(function(Oe){return xe._reject(Oe),vn(Oe)})})}).bind(null,this,W,Z,P,C);return P?P._promise(W,ge,"lock"):st.trans?co(st.transless,function(){return T._whenReady(ge)}):this._whenReady(ge)},Kn.prototype.table=function(g){if(!f(this._allTables,g))throw new re.InvalidTable("Table ".concat(g," does not exist"));return this._allTables[g]},Kn);function Kn(g,_){var C=this;this._middlewares={},this.verno=0;var T=Kn.dependencies;this._options=_=r({addons:Kn.addons,autoOpen:!0,indexedDB:T.indexedDB,IDBKeyRange:T.IDBKeyRange,cache:"cloned"},_),this._deps={indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange},T=_.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var P,W,Z,oe,ge,ve={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ze,dbReadyPromise:null,cancelOpen:ze,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:_.autoOpen};ve.dbReadyPromise=new at(function(ae){ve.dbReadyResolve=ae}),ve.openCanceller=new at(function(ae,ke){ve.cancelOpen=ke}),this._state=ve,this.name=g,this.on=we(this,"populate","blocked","versionchange","close",{ready:[Be,ze]}),this.on.ready.subscribe=m(this.on.ready.subscribe,function(ae){return function(ke,me){Kn.vip(function(){var be,Ee=C._state;Ee.openComplete?(Ee.dbOpenError||at.resolve().then(ke),me&&ae(ke)):Ee.onReadyBeingFired?(Ee.onReadyBeingFired.push(ke),me&&ae(ke)):(ae(ke),be=C,me||ae(function xe(){be.on.ready.unsubscribe(ke),be.on.ready.unsubscribe(xe)}))})}}),this.Collection=(P=this,pe(Dn.prototype,function(Ae,xe){this.db=P;var me=du,be=null;if(xe)try{me=xe()}catch(Pe){be=Pe}var Ee=Ae._ctx,xe=Ee.table,Ae=xe.hook.reading.fire;this._ctx={table:xe,index:Ee.index,isPrimKey:!Ee.index||xe.schema.primKey.keyPath&&Ee.index===xe.schema.primKey.name,range:me,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:be,or:Ee.or,valueMapper:Ae!==ie?Ae:null}})),this.Table=(W=this,pe(Q.prototype,function(ae,ke,me){this.db=W,this._tx=me,this.name=ae,this.schema=ke,this.hook=W._allTables[ae]?W._allTables[ae].hook:we(null,{creating:[We,ze],reading:[fe,ie],updating:[Ke,ze],deleting:[Ue,ze]})})),this.Transaction=(Z=this,pe(Q5.prototype,function(ae,ke,me,be,Ee){var xe=this;this.db=Z,this.mode=ae,this.storeNames=ke,this.schema=me,this.chromeTransactionDurability=be,this.idbtrans=null,this.on=we(this,"complete","error","abort"),this.parent=Ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new at(function(Ae,Pe){xe._resolve=Ae,xe._reject=Pe}),this._completion.then(function(){xe.active=!1,xe.on.complete.fire()},function(Ae){var Pe=xe.active;return xe.active=!1,xe.on.error.fire(Ae),xe.parent?xe.parent._reject(Ae):Pe&&xe.idbtrans&&xe.idbtrans.abort(),vn(Ae)})})),this.Version=(oe=this,pe(o$.prototype,function(ae){this.db=oe,this._cfg={version:ae,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ge=this,pe(Qc.prototype,function(ae,ke,me){if(this.db=ge,this._ctx={table:ae,index:ke===":id"?null:ke,or:me},this._cmp=this._ascending=Ut,this._descending=function(be,Ee){return Ut(Ee,be)},this._max=function(be,Ee){return 0<Ut(be,Ee)?be:Ee},this._min=function(be,Ee){return Ut(be,Ee)<0?be:Ee},this._IDBKeyRange=ge._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(ae){0<ae.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(ae){!ae.newVersion||ae.newVersion<ae.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(ae.oldVersion/10))}),this._maxKey=td(_.IDBKeyRange),this._createTransaction=function(ae,ke,me,be){return new C.Transaction(ae,ke,me,C._options.chromeTransactionDurability,be)},this._fireOnBlocked=function(ae){C.on("blocked").fire(ae),qr.filter(function(ke){return ke.name===C.name&&ke!==C&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(ae)})},this.use(u$),this.use(h$),this.use(c$),this.use(a$),this.use(l$);var _e=new Proxy(this,{get:function(ae,ke,me){if(ke==="_vip")return!0;if(ke==="table")return function(Ee){return Kh(C.table(Ee),_e)};var be=Reflect.get(ae,ke,me);return be instanceof Q?Kh(be,_e):ke==="tables"?be.map(function(Ee){return Kh(Ee,_e)}):ke==="_createTransaction"?function(){return Kh(be.apply(this,arguments),_e)}:be}});this.vip=_e,T.forEach(function(ae){return ae(C)})}var Gh,Vi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",p$=(Dv.prototype.subscribe=function(g,_,C){return this._subscribe(g&&typeof g!="function"?g:{next:g,error:_,complete:C})},Dv.prototype[Vi]=function(){return this},Dv);function Dv(g){this._subscribe=g}try{Gh={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(g){Gh={indexedDB:null,IDBKeyRange:null}}function uE(g){var _,C=!1,T=new p$(function(P){var W=Y(g),Z,oe=!1,ge={},ve={},_e={get closed(){return oe},unsubscribe:function(){oe||(oe=!0,Z&&Z.abort(),ae&&ca.storagemutated.unsubscribe(me))}};P.start&&P.start(_e);var ae=!1,ke=function(){return rl(be)},me=function(Ee){Uh(ge,Ee),Nv(ve,ge)&&ke()},be=function(){var Ee,xe,Ae;!oe&&Gh.indexedDB&&(ge={},Ee={},Z&&Z.abort(),Z=new AbortController,Ae=function(Pe){var Oe=ne();try{W&&Vr();var He=Ur(g,Pe);return He=W?He.finally(mr):He}finally{Oe&&tt()}}(xe={subscr:Ee,signal:Z.signal,requery:ke,querier:g,trans:null}),Promise.resolve(Ae).then(function(Pe){C=!0,_=Pe,oe||xe.signal.aborted||(ge={},function(Oe){for(var He in Oe)if(f(Oe,He))return;return 1}(ve=Ee)||ae||(ca(ed,me),ae=!0),rl(function(){return!oe&&P.next&&P.next(Pe)}))},function(Pe){C=!1,["DatabaseClosedError","AbortError"].includes(Pe==null?void 0:Pe.name)||oe||rl(function(){oe||P.error&&P.error(Pe)})}))};return setTimeout(ke,0),_e});return T.hasValue=function(){return C},T.getValue=function(){return _},T}var al=ws;function Lv(g){var _=da;try{da=!0,ca.storagemutated.fire(g),Iv(g,!0)}finally{da=_}}h(al,r(r({},Ye),{delete:function(g){return new al(g,{addons:[]}).delete()},exists:function(g){return new al(g,{addons:[]}).open().then(function(_){return _.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(g){try{return _=al.dependencies,C=_.indexedDB,_=_.IDBKeyRange,(Cv(C)?Promise.resolve(C.databases()).then(function(T){return T.map(function(P){return P.name}).filter(function(P){return P!==ua})}):kv(C,_).toCollection().primaryKeys()).then(g)}catch(T){return vn(new re.MissingAPI)}var _,C},defineClass:function(){return function(g){l(this,g)}},ignoreTransaction:function(g){return st.trans?co(st.transless,g):g()},vip:jv,async:function(g){return function(){try{var _=Pv(g.apply(this,arguments));return _&&typeof _.then=="function"?_:at.resolve(_)}catch(C){return vn(C)}}},spawn:function(g,_,C){try{var T=Pv(g.apply(C,_||[]));return T&&typeof T.then=="function"?T:at.resolve(T)}catch(P){return vn(P)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(g,_){return _=at.resolve(typeof g=="function"?al.ignoreTransaction(g):g).timeout(_||6e4),st.trans?st.trans.waitFor(_):_},Promise:at,debug:{get:function(){return qe},set:function(g){$e(g)}},derive:y,extend:l,props:h,override:m,Events:we,on:ca,liveQuery:uE,extendObservabilitySet:Uh,getByKeyPath:k,setByKeyPath:N,delByKeyPath:function(g,_){typeof _=="string"?N(g,_,void 0):"length"in _&&[].map.call(_,function(C){N(g,C,void 0)})},shallowClone:I,deepClone:D,getObjectDiff:Ov,cmp:Ut,asap:E,minKey:-1/0,addons:[],connections:qr,errnames:U,dependencies:Gh,cache:sl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(g){return parseInt(g)}).reduce(function(g,_,C){return g+_/Math.pow(10,2*C)})})),al.maxKey=td(al.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ca(ed,function(g){da||(g=new CustomEvent(vv,{detail:g}),da=!0,dispatchEvent(g),da=!1)}),addEventListener(vv,function(g){g=g.detail,da||Lv(g)}));var hu,da=!1,cE=function(){};return typeof BroadcastChannel<"u"&&((cE=function(){(hu=new BroadcastChannel(vv)).onmessage=function(g){return g.data&&Lv(g.data)}})(),typeof hu.unref=="function"&&hu.unref(),ca(ed,function(g){da||hu.postMessage(g)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(g){if(!ws.disableBfCache&&g.persisted){qe&&console.debug("Dexie: handling persisted pagehide"),hu!=null&&hu.close();for(var _=0,C=qr;_<C.length;_++)C[_].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(g){!ws.disableBfCache&&g.persisted&&(qe&&console.debug("Dexie: handling persisted pageshow"),cE(),Lv({all:new jr(-1/0,[[]])}))})),at.rejectionMapper=function(g,_){return!g||g instanceof ue||g instanceof TypeError||g instanceof SyntaxError||!g.name||!De[g.name]?g:(_=new De[g.name](_||g.message,g),"stack"in g&&v(_,"stack",{get:function(){return this.inner.stack}}),_)},$e(qe),r(ws,Object.freeze({__proto__:null,Dexie:ws,liveQuery:uE,Entity:fu,cmp:Ut,PropModification:Qt,replacePrefix:function(g,_){return new Qt({replacePrefix:[g,_]})},add:function(g){return new Qt({add:g})},remove:function(g){return new Qt({remove:g})},default:ws,RangeSet:jr,mergeRanges:id,rangesOverlap:ZS}),{default:ws}),ws})})(A3);var yF=A3.exports;const Ob=ta(yF),$k=Symbol.for("Dexie"),Ug=globalThis[$k]||(globalThis[$k]=Ob);if(Ob.semVer!==Ug.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(Ob.semVer," and ").concat(Ug.semVer));const{liveQuery:vF,mergeRanges:tce,rangesOverlap:nce,RangeSet:rce,cmp:ice,Entity:oce,PropModification:sce,replacePrefix:ace,add:lce,remove:uce}=Ug;var tn;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(const a of o)s[a]=i[a];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},e.find=(i,o)=>{for(const s of i)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?"'".concat(s,"'"):s).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(tn||(tn={}));var $b;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})($b||($b={}));const vt=tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rs=e=>{switch(typeof e){case"undefined":return vt.undefined;case"string":return vt.string;case"number":return isNaN(e)?vt.nan:vt.number;case"boolean":return vt.boolean;case"function":return vt.function;case"bigint":return vt.bigint;case"symbol":return vt.symbol;case"object":return Array.isArray(e)?vt.array:e===null?vt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?vt.promise:typeof Map<"u"&&e instanceof Map?vt.map:typeof Set<"u"&&e instanceof Set?vt.set:typeof Date<"u"&&e instanceof Date?vt.date:vt.object;default:return vt.unknown}},Ze=tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xF=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Oi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(s))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}static assert(t){if(!(t instanceof Oi))throw new Error("Not a ZodError: ".concat(t))}toString(){return this.message}get message(){return JSON.stringify(this.issues,tn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Oi.create=e=>new Oi(e);const uc=(e,t)=>{let n;switch(e.code){case Ze.invalid_type:e.received===vt.undefined?n="Required":n="Expected ".concat(e.expected,", received ").concat(e.received);break;case Ze.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,tn.jsonStringifyReplacer));break;case Ze.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(tn.joinValues(e.keys,", "));break;case Ze.invalid_union:n="Invalid input";break;case Ze.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(tn.joinValues(e.options));break;case Ze.invalid_enum_value:n="Invalid enum value. Expected ".concat(tn.joinValues(e.options),", received '").concat(e.received,"'");break;case Ze.invalid_arguments:n="Invalid function arguments";break;case Ze.invalid_return_type:n="Invalid function return type";break;case Ze.invalid_date:n="Invalid date";break;case Ze.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),typeof e.validation.position=="number"&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):tn.assertNever(e.validation):e.validation!=="regex"?n="Invalid ".concat(e.validation):n="Invalid";break;case Ze.too_small:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):n="Invalid input";break;case Ze.too_big:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="bigint"?n="BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):n="Invalid input";break;case Ze.custom:n="Invalid input";break;case Ze.invalid_intersection_types:n="Intersection results could not be merged";break;case Ze.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case Ze.not_finite:n="Number must be finite";break;default:n=t.defaultError,tn.assertNever(e)}return{message:n}};let N3=uc;function bF(e){N3=e}function Vg(){return N3}const qg=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}},wF=[];function pt(e,t){const n=Vg(),r=qg({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===uc?void 0:uc].filter(i=>!!i)});e.common.issues.push(r)}class zr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return Pt;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const o=await i.key,s=await i.value;r.push({key:o,value:s})}return zr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Pt;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:t.value,value:r}}}const Pt=Object.freeze({status:"aborted"}),Mu=e=>({status:"dirty",value:e}),ti=e=>({status:"valid",value:e}),Mb=e=>e.status==="aborted",Db=e=>e.status==="dirty",Ll=e=>e.status==="valid",Cf=e=>typeof Promise<"u"&&e instanceof Promise;function Kg(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function R3(e,t,n,r,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var kt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(kt||(kt={}));var Td,Id;class ls{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Mk=(e,t)=>{if(Ll(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Oi(e.common.issues);return this._error=n,this._error}}};function Ft(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(s,a)=>{var l,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d!=null?d:a.defaultError}:typeof a.data>"u"?{message:(l=d!=null?d:r)!==null&&l!==void 0?l:a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:(u=d!=null?d:n)!==null&&u!==void 0?u:a.defaultError}},description:i}}class Wt{get description(){return this._def.description}_getType(t){return Rs(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Rs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new zr,ctx:{common:t.parent.common,data:t.data,parsedType:Rs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Cf(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rs(t)},o=this._parseSync({data:t,path:i.path,parent:i});return Mk(i,o)}"~validate"(t){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rs(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:i});return Ll(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(o=>Ll(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rs(t)},i=this._parse({data:t,path:r.path,parent:r}),o=await(Cf(i)?i:Promise.resolve(i));return Mk(r,o)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const s=t(i),a=()=>o.addIssue({code:Ze.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new No({schema:this,typeName:It.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ns.create(this,this._def)}nullable(){return Va.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Co.create(this)}promise(){return dc.create(this,this._def)}or(t){return Rf.create([this,t],this._def)}and(t){return Tf.create(this,t,this._def)}transform(t){return new No({...Ft(this._def),schema:this,typeName:It.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Mf({...Ft(this._def),innerType:this,defaultValue:n,typeName:It.ZodDefault})}brand(){return new b1({typeName:It.ZodBranded,type:this,...Ft(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Df({...Ft(this._def),innerType:this,catchValue:n,typeName:It.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return vh.create(this,t)}readonly(){return Lf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _F=/^c[^\s-]{8,}$/i,SF=/^[0-9a-z]+$/,EF=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CF=/^[a-z0-9_-]{21}$/i,jF=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,AF=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,NF=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let m0;const TF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,IF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,PF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,OF=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$F=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,MF=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,T3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",DF=new RegExp("^".concat(T3,"$"));function I3(e){let t="[0-5]\\d";e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):e.precision==null&&(t="".concat(t,"(\\.\\d+)?"));const n=e.precision?"+":"?";return"([01]\\d|2[0-3]):[0-5]\\d(:".concat(t,")").concat(n)}function LF(e){return new RegExp("^".concat(I3(e),"$"))}function P3(e){let t="".concat(T3,"T").concat(I3(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}function FF(e,t){return!!((t==="v4"||!t)&&TF.test(e)||(t==="v6"||!t)&&PF.test(e))}function BF(e,t){if(!jF.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch(n){return!1}}function zF(e,t){return!!((t==="v4"||!t)&&IF.test(e)||(t==="v6"||!t)&&OF.test(e))}class wo extends Wt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==vt.string){const o=this._getOrReturnCtx(t);return pt(o,{code:Ze.invalid_type,expected:vt.string,received:o.parsedType}),Pt}const r=new zr;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,a=t.data.length<o.value;(s||a)&&(i=this._getOrReturnCtx(t,i),s?pt(i,{code:Ze.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&pt(i,{code:Ze.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")NF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"email",code:Ze.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")m0||(m0=new RegExp(RF,"u")),m0.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"emoji",code:Ze.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")kF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"uuid",code:Ze.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")CF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"nanoid",code:Ze.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")_F.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"cuid",code:Ze.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")SF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"cuid2",code:Ze.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")EF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"ulid",code:Ze.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch(s){i=this._getOrReturnCtx(t,i),pt(i,{validation:"url",code:Ze.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"regex",code:Ze.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?P3(o).test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?DF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?LF(o).test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?AF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"duration",code:Ze.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?FF(t.data,o.version)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"ip",code:Ze.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?BF(t.data,o.alg)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"jwt",code:Ze.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?zF(t.data,o.version)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"cidr",code:Ze.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?$F.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"base64",code:Ze.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?MF.test(t.data)||(i=this._getOrReturnCtx(t,i),pt(i,{validation:"base64url",code:Ze.invalid_string,message:o.message}),r.dirty()):tn.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Ze.invalid_string,...kt.errToObj(r)})}_addCheck(t){return new wo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...kt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...kt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...kt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...kt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...kt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...kt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...kt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...kt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...kt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...kt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...kt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...kt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...kt.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...kt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...kt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...kt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...kt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...kt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...kt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...kt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...kt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...kt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...kt.errToObj(n)})}nonempty(t){return this.min(1,kt.errToObj(t))}trim(){return new wo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}wo.create=e=>{var t;return new wo({checks:[],typeName:It.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ft(e)})};function HF(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(e.toFixed(i).replace(".","")),s=parseInt(t.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}class Ha extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==vt.number){const o=this._getOrReturnCtx(t);return pt(o,{code:Ze.invalid_type,expected:vt.number,received:o.parsedType}),Pt}let r;const i=new zr;for(const o of this._def.checks)o.kind==="int"?tn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?HF(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.not_finite,message:o.message}),i.dirty()):tn.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,kt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,kt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,kt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,kt.toString(n))}setLimit(t,n,r,i){return new Ha({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:kt.toString(i)}]})}_addCheck(t){return new Ha({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:kt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:kt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:kt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:kt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:kt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:kt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:kt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:kt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:kt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&tn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Ha.create=e=>new Ha({checks:[],typeName:It.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ft(e)});class Wa extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(o){return this._getInvalidInput(t)}if(this._getType(t)!==vt.bigint)return this._getInvalidInput(t);let r;const i=new zr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),pt(r,{code:Ze.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):tn.assertNever(o);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return pt(n,{code:Ze.invalid_type,expected:vt.bigint,received:n.parsedType}),Pt}gte(t,n){return this.setLimit("min",t,!0,kt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,kt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,kt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,kt.toString(n))}setLimit(t,n,r,i){return new Wa({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:kt.toString(i)}]})}_addCheck(t){return new Wa({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:kt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:kt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:kt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:kt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:kt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Wa.create=e=>{var t;return new Wa({checks:[],typeName:It.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ft(e)})};class jf extends Wt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==vt.boolean){const r=this._getOrReturnCtx(t);return pt(r,{code:Ze.invalid_type,expected:vt.boolean,received:r.parsedType}),Pt}return ti(t.data)}}jf.create=e=>new jf({typeName:It.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ft(e)});class Fl extends Wt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==vt.date){const o=this._getOrReturnCtx(t);return pt(o,{code:Ze.invalid_type,expected:vt.date,received:o.parsedType}),Pt}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return pt(o,{code:Ze.invalid_date}),Pt}const r=new zr;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),pt(i,{code:Ze.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):tn.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Fl({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:kt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:kt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Fl.create=e=>new Fl({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:It.ZodDate,...Ft(e)});class Gg extends Wt{_parse(t){if(this._getType(t)!==vt.symbol){const r=this._getOrReturnCtx(t);return pt(r,{code:Ze.invalid_type,expected:vt.symbol,received:r.parsedType}),Pt}return ti(t.data)}}Gg.create=e=>new Gg({typeName:It.ZodSymbol,...Ft(e)});class Af extends Wt{_parse(t){if(this._getType(t)!==vt.undefined){const r=this._getOrReturnCtx(t);return pt(r,{code:Ze.invalid_type,expected:vt.undefined,received:r.parsedType}),Pt}return ti(t.data)}}Af.create=e=>new Af({typeName:It.ZodUndefined,...Ft(e)});class Nf extends Wt{_parse(t){if(this._getType(t)!==vt.null){const r=this._getOrReturnCtx(t);return pt(r,{code:Ze.invalid_type,expected:vt.null,received:r.parsedType}),Pt}return ti(t.data)}}Nf.create=e=>new Nf({typeName:It.ZodNull,...Ft(e)});class cc extends Wt{constructor(){super(...arguments),this._any=!0}_parse(t){return ti(t.data)}}cc.create=e=>new cc({typeName:It.ZodAny,...Ft(e)});class Nl extends Wt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ti(t.data)}}Nl.create=e=>new Nl({typeName:It.ZodUnknown,...Ft(e)});class Ys extends Wt{_parse(t){const n=this._getOrReturnCtx(t);return pt(n,{code:Ze.invalid_type,expected:vt.never,received:n.parsedType}),Pt}}Ys.create=e=>new Ys({typeName:It.ZodNever,...Ft(e)});class Yg extends Wt{_parse(t){if(this._getType(t)!==vt.undefined){const r=this._getOrReturnCtx(t);return pt(r,{code:Ze.invalid_type,expected:vt.void,received:r.parsedType}),Pt}return ti(t.data)}}Yg.create=e=>new Yg({typeName:It.ZodVoid,...Ft(e)});class Co extends Wt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==vt.array)return pt(n,{code:Ze.invalid_type,expected:vt.array,received:n.parsedType}),Pt;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(s||a)&&(pt(n,{code:s?Ze.too_big:Ze.too_small,minimum:a?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(pt(n,{code:Ze.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(pt(n,{code:Ze.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,a)=>i.type._parseAsync(new ls(n,s,n.path,a)))).then(s=>zr.mergeArray(r,s));const o=[...n.data].map((s,a)=>i.type._parseSync(new ls(n,s,n.path,a)));return zr.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new Co({...this._def,minLength:{value:t,message:kt.toString(n)}})}max(t,n){return new Co({...this._def,maxLength:{value:t,message:kt.toString(n)}})}length(t,n){return new Co({...this._def,exactLength:{value:t,message:kt.toString(n)}})}nonempty(t){return this.min(1,t)}}Co.create=(e,t)=>new Co({type:e,minLength:null,maxLength:null,exactLength:null,typeName:It.ZodArray,...Ft(t)});function bu(e){if(e instanceof Nn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=ns.create(bu(r))}return new Nn({...e._def,shape:()=>t})}else return e instanceof Co?new Co({...e._def,type:bu(e.element)}):e instanceof ns?ns.create(bu(e.unwrap())):e instanceof Va?Va.create(bu(e.unwrap())):e instanceof us?us.create(e.items.map(t=>bu(t))):e}class Nn extends Wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=tn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==vt.object){const u=this._getOrReturnCtx(t);return pt(u,{code:Ze.invalid_type,expected:vt.object,received:u.parsedType}),Pt}const{status:r,ctx:i}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ys&&this._def.unknownKeys==="strip"))for(const u in i.data)s.includes(u)||a.push(u);const l=[];for(const u of s){const d=o[u],f=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new ls(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ys){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")a.length>0&&(pt(i,{code:Ze.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of a){const f=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new ls(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>zr.mergeObjectSync(r,u)):zr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return kt.errToObj,new Nn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o,s,a;const l=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=kt.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Nn({...this._def,unknownKeys:"strip"})}passthrough(){return new Nn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Nn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Nn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:It.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Nn({...this._def,catchall:t})}pick(t){const n={};return tn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Nn({...this._def,shape:()=>n})}omit(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Nn({...this._def,shape:()=>n})}deepPartial(){return bu(this)}partial(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new Nn({...this._def,shape:()=>n})}required(t){const n={};return tn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof ns;)o=o._def.innerType;n[r]=o}}),new Nn({...this._def,shape:()=>n})}keyof(){return O3(tn.objectKeys(this.shape))}}Nn.create=(e,t)=>new Nn({shape:()=>e,unknownKeys:"strip",catchall:Ys.create(),typeName:It.ZodObject,...Ft(t)});Nn.strictCreate=(e,t)=>new Nn({shape:()=>e,unknownKeys:"strict",catchall:Ys.create(),typeName:It.ZodObject,...Ft(t)});Nn.lazycreate=(e,t)=>new Nn({shape:e,unknownKeys:"strip",catchall:Ys.create(),typeName:It.ZodObject,...Ft(t)});class Rf extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(a=>new Oi(a.ctx.common.issues));return pt(n,{code:Ze.invalid_union,unionErrors:s}),Pt}if(n.common.async)return Promise.all(r.map(async o=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(l=>new Oi(l));return pt(n,{code:Ze.invalid_union,unionErrors:a}),Pt}}get options(){return this._def.options}}Rf.create=(e,t)=>new Rf({options:e,typeName:It.ZodUnion,...Ft(t)});const Es=e=>e instanceof Pf?Es(e.schema):e instanceof No?Es(e.innerType()):e instanceof Of?[e.value]:e instanceof Ua?e.options:e instanceof $f?tn.objectValues(e.enum):e instanceof Mf?Es(e._def.innerType):e instanceof Af?[void 0]:e instanceof Nf?[null]:e instanceof ns?[void 0,...Es(e.unwrap())]:e instanceof Va?[null,...Es(e.unwrap())]:e instanceof b1||e instanceof Lf?Es(e.unwrap()):e instanceof Df?Es(e._def.innerType):[];class gy extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==vt.object)return pt(n,{code:Ze.invalid_type,expected:vt.object,received:n.parsedType}),Pt;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(pt(n,{code:Ze.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Pt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const o of n){const s=Es(o.shape[t]);if(!s.length)throw new Error("A discriminator value for key `".concat(t,"` could not be extracted from all schema options"));for(const a of s){if(i.has(a))throw new Error("Discriminator property ".concat(String(t)," has duplicate value ").concat(String(a)));i.set(a,o)}}return new gy({typeName:It.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Ft(r)})}}function Lb(e,t){const n=Rs(e),r=Rs(t);if(e===t)return{valid:!0,data:e};if(n===vt.object&&r===vt.object){const i=tn.objectKeys(t),o=tn.objectKeys(e).filter(a=>i.indexOf(a)!==-1),s={...e,...t};for(const a of o){const l=Lb(e[a],t[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(n===vt.array&&r===vt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const s=e[o],a=t[o],l=Lb(s,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===vt.date&&r===vt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Tf extends Wt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(o,s)=>{if(Mb(o)||Mb(s))return Pt;const a=Lb(o.value,s.value);return a.valid?((Db(o)||Db(s))&&n.dirty(),{status:n.value,value:a.data}):(pt(r,{code:Ze.invalid_intersection_types}),Pt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Tf.create=(e,t,n)=>new Tf({left:e,right:t,typeName:It.ZodIntersection,...Ft(n)});class us extends Wt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.array)return pt(r,{code:Ze.invalid_type,expected:vt.array,received:r.parsedType}),Pt;if(r.data.length<this._def.items.length)return pt(r,{code:Ze.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pt;!this._def.rest&&r.data.length>this._def.items.length&&(pt(r,{code:Ze.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((s,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ls(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>zr.mergeArray(n,s)):zr.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new us({...this._def,rest:t})}}us.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new us({items:e,typeName:It.ZodTuple,rest:null,...Ft(t)})};class If extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.object)return pt(r,{code:Ze.invalid_type,expected:vt.object,received:r.parsedType}),Pt;const i=[],o=this._def.keyType,s=this._def.valueType;for(const a in r.data)i.push({key:o._parse(new ls(r,a,r.path,a)),value:s._parse(new ls(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?zr.mergeObjectAsync(n,i):zr.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Wt?new If({keyType:t,valueType:n,typeName:It.ZodRecord,...Ft(r)}):new If({keyType:wo.create(),valueType:t,typeName:It.ZodRecord,...Ft(n)})}}class Xg extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.map)return pt(r,{code:Ze.invalid_type,expected:vt.map,received:r.parsedType}),Pt;const i=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new ls(r,a,r.path,[u,"key"])),value:o._parse(new ls(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return Pt;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(u.value,d.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return Pt;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(u.value,d.value)}return{status:n.value,value:a}}}}Xg.create=(e,t,n)=>new Xg({valueType:t,keyType:e,typeName:It.ZodMap,...Ft(n)});class Bl extends Wt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.set)return pt(r,{code:Ze.invalid_type,expected:vt.set,received:r.parsedType}),Pt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(pt(r,{code:Ze.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(pt(r,{code:Ze.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return Pt;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>o._parse(new ls(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(t,n){return new Bl({...this._def,minSize:{value:t,message:kt.toString(n)}})}max(t,n){return new Bl({...this._def,maxSize:{value:t,message:kt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Bl.create=(e,t)=>new Bl({valueType:e,minSize:null,maxSize:null,typeName:It.ZodSet,...Ft(t)});class Gu extends Wt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==vt.function)return pt(n,{code:Ze.invalid_type,expected:vt.function,received:n.parsedType}),Pt;function r(a,l){return qg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Vg(),uc].filter(u=>!!u),issueData:{code:Ze.invalid_arguments,argumentsError:l}})}function i(a,l){return qg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Vg(),uc].filter(u=>!!u),issueData:{code:Ze.invalid_return_type,returnTypeError:l}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof dc){const a=this;return ti(async function(...l){const u=new Oi([]),d=await a._def.args.parseAsync(l,o).catch(p=>{throw u.addIssue(r(l,p)),u}),f=await Reflect.apply(s,this,d);return await a._def.returns._def.type.parseAsync(f,o).catch(p=>{throw u.addIssue(i(f,p)),u})})}else{const a=this;return ti(function(...l){const u=a._def.args.safeParse(l,o);if(!u.success)throw new Oi([r(l,u.error)]);const d=Reflect.apply(s,this,u.data),f=a._def.returns.safeParse(d,o);if(!f.success)throw new Oi([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Gu({...this._def,args:us.create(t).rest(Nl.create())})}returns(t){return new Gu({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Gu({args:t||us.create([]).rest(Nl.create()),returns:n||Nl.create(),typeName:It.ZodFunction,...Ft(r)})}}class Pf extends Wt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Pf.create=(e,t)=>new Pf({getter:e,typeName:It.ZodLazy,...Ft(t)});class Of extends Wt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return pt(n,{received:n.data,code:Ze.invalid_literal,expected:this._def.value}),Pt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Of.create=(e,t)=>new Of({value:e,typeName:It.ZodLiteral,...Ft(t)});function O3(e,t){return new Ua({values:e,typeName:It.ZodEnum,...Ft(t)})}class Ua extends Wt{constructor(){super(...arguments),Td.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return pt(n,{expected:tn.joinValues(r),received:n.parsedType,code:Ze.invalid_type}),Pt}if(Kg(this,Td)||R3(this,Td,new Set(this._def.values)),!Kg(this,Td).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return pt(n,{received:n.data,code:Ze.invalid_enum_value,options:r}),Pt}return ti(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Ua.create(t,{...this._def,...n})}exclude(t,n=this._def){return Ua.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Td=new WeakMap;Ua.create=O3;class $f extends Wt{constructor(){super(...arguments),Id.set(this,void 0)}_parse(t){const n=tn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==vt.string&&r.parsedType!==vt.number){const i=tn.objectValues(n);return pt(r,{expected:tn.joinValues(i),received:r.parsedType,code:Ze.invalid_type}),Pt}if(Kg(this,Id)||R3(this,Id,new Set(tn.getValidEnumValues(this._def.values))),!Kg(this,Id).has(t.data)){const i=tn.objectValues(n);return pt(r,{received:r.data,code:Ze.invalid_enum_value,options:i}),Pt}return ti(t.data)}get enum(){return this._def.values}}Id=new WeakMap;$f.create=(e,t)=>new $f({values:e,typeName:It.ZodNativeEnum,...Ft(t)});class dc extends Wt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==vt.promise&&n.common.async===!1)return pt(n,{code:Ze.invalid_type,expected:vt.promise,received:n.parsedType}),Pt;const r=n.parsedType===vt.promise?n.data:Promise.resolve(n.data);return ti(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}dc.create=(e,t)=>new dc({type:e,typeName:It.ZodPromise,...Ft(t)});class No extends Wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===It.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:s=>{pt(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(r.data,o);if(r.common.async)return Promise.resolve(s).then(async a=>{if(n.value==="aborted")return Pt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Pt:l.status==="dirty"||n.value==="dirty"?Mu(l.value):l});{if(n.value==="aborted")return Pt;const a=this._def.schema._parseSync({data:s,path:r.path,parent:r});return a.status==="aborted"?Pt:a.status==="dirty"||n.value==="dirty"?Mu(a.value):a}}if(i.type==="refinement"){const s=a=>{const l=i.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Pt:(a.status==="dirty"&&n.dirty(),s(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Pt:(a.status==="dirty"&&n.dirty(),s(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ll(s))return s;const a=i.transform(s.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Ll(s)?Promise.resolve(i.transform(s.value,o)).then(a=>({status:n.value,value:a})):s);tn.assertNever(i)}}No.create=(e,t,n)=>new No({schema:e,typeName:It.ZodEffects,effect:t,...Ft(n)});No.createWithPreprocess=(e,t,n)=>new No({schema:t,effect:{type:"preprocess",transform:e},typeName:It.ZodEffects,...Ft(n)});class ns extends Wt{_parse(t){return this._getType(t)===vt.undefined?ti(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ns.create=(e,t)=>new ns({innerType:e,typeName:It.ZodOptional,...Ft(t)});class Va extends Wt{_parse(t){return this._getType(t)===vt.null?ti(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Va.create=(e,t)=>new Va({innerType:e,typeName:It.ZodNullable,...Ft(t)});class Mf extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===vt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Mf.create=(e,t)=>new Mf({innerType:e,typeName:It.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ft(t)});class Df extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Cf(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Oi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Oi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Df.create=(e,t)=>new Df({innerType:e,typeName:It.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ft(t)});class Jg extends Wt{_parse(t){if(this._getType(t)!==vt.nan){const r=this._getOrReturnCtx(t);return pt(r,{code:Ze.invalid_type,expected:vt.nan,received:r.parsedType}),Pt}return{status:"valid",value:t.data}}}Jg.create=e=>new Jg({typeName:It.ZodNaN,...Ft(e)});const WF=Symbol("zod_brand");class b1 extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class vh extends Wt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Pt:o.status==="dirty"?(n.dirty(),Mu(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Pt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new vh({in:t,out:n,typeName:It.ZodPipeline})}}class Lf extends Wt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Ll(i)&&(i.value=Object.freeze(i.value)),i);return Cf(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Lf.create=(e,t)=>new Lf({innerType:e,typeName:It.ZodReadonly,...Ft(t)});function Dk(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function $3(e,t={},n){return e?cc.create().superRefine((r,i)=>{var o,s;const a=e(r);if(a instanceof Promise)return a.then(l=>{var u,d;if(!l){const f=Dk(t,r),h=(d=(u=f.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...f,fatal:h})}});if(!a){const l=Dk(t,r),u=(s=(o=l.fatal)!==null&&o!==void 0?o:n)!==null&&s!==void 0?s:!0;i.addIssue({code:"custom",...l,fatal:u})}}):cc.create()}const UF={object:Nn.lazycreate};var It;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(It||(It={}));const VF=(e,t={message:"Input not instance of ".concat(e.name)})=>$3(n=>n instanceof e,t),M3=wo.create,D3=Ha.create,qF=Jg.create,KF=Wa.create,L3=jf.create,GF=Fl.create,YF=Gg.create,XF=Af.create,JF=Nf.create,QF=cc.create,ZF=Nl.create,e8=Ys.create,t8=Yg.create,n8=Co.create,r8=Nn.create,i8=Nn.strictCreate,o8=Rf.create,s8=gy.create,a8=Tf.create,l8=us.create,u8=If.create,c8=Xg.create,d8=Bl.create,f8=Gu.create,h8=Pf.create,p8=Of.create,g8=Ua.create,m8=$f.create,y8=dc.create,Lk=No.create,v8=ns.create,x8=Va.create,b8=No.createWithPreprocess,w8=vh.create,_8=()=>M3().optional(),S8=()=>D3().optional(),E8=()=>L3().optional(),k8={string:e=>wo.create({...e,coerce:!0}),number:e=>Ha.create({...e,coerce:!0}),boolean:e=>jf.create({...e,coerce:!0}),bigint:e=>Wa.create({...e,coerce:!0}),date:e=>Fl.create({...e,coerce:!0})},C8=Pt;var Ge=Object.freeze({__proto__:null,defaultErrorMap:uc,setErrorMap:bF,getErrorMap:Vg,makeIssue:qg,EMPTY_PATH:wF,addIssueToContext:pt,ParseStatus:zr,INVALID:Pt,DIRTY:Mu,OK:ti,isAborted:Mb,isDirty:Db,isValid:Ll,isAsync:Cf,get util(){return tn},get objectUtil(){return $b},ZodParsedType:vt,getParsedType:Rs,ZodType:Wt,datetimeRegex:P3,ZodString:wo,ZodNumber:Ha,ZodBigInt:Wa,ZodBoolean:jf,ZodDate:Fl,ZodSymbol:Gg,ZodUndefined:Af,ZodNull:Nf,ZodAny:cc,ZodUnknown:Nl,ZodNever:Ys,ZodVoid:Yg,ZodArray:Co,ZodObject:Nn,ZodUnion:Rf,ZodDiscriminatedUnion:gy,ZodIntersection:Tf,ZodTuple:us,ZodRecord:If,ZodMap:Xg,ZodSet:Bl,ZodFunction:Gu,ZodLazy:Pf,ZodLiteral:Of,ZodEnum:Ua,ZodNativeEnum:$f,ZodPromise:dc,ZodEffects:No,ZodTransformer:No,ZodOptional:ns,ZodNullable:Va,ZodDefault:Mf,ZodCatch:Df,ZodNaN:Jg,BRAND:WF,ZodBranded:b1,ZodPipeline:vh,ZodReadonly:Lf,custom:$3,Schema:Wt,ZodSchema:Wt,late:UF,get ZodFirstPartyTypeKind(){return It},coerce:k8,any:QF,array:n8,bigint:KF,boolean:L3,date:GF,discriminatedUnion:s8,effect:Lk,enum:g8,function:f8,instanceof:VF,intersection:a8,lazy:h8,literal:p8,map:c8,nan:qF,nativeEnum:m8,never:e8,null:JF,nullable:x8,number:D3,object:r8,oboolean:E8,onumber:S8,optional:v8,ostring:_8,pipeline:w8,preprocess:b8,promise:y8,record:u8,set:d8,strictObject:i8,string:M3,symbol:YF,transformer:Lk,tuple:l8,undefined:XF,union:o8,unknown:ZF,void:t8,NEVER:C8,ZodIssueCode:Ze,quotelessJson:xF,ZodError:Oi});const w1=Ge.object({id:Ge.string({invalid_type_error:"id must be a string"}).max(100,"id cannot be longer than 100 characters").optional(),local_id:Ge.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:Ge.string(),name:Ge.string(),forked_from:Ge.string().nullable().optional(),version:Ge.string().optional(),created_at:Ge.string().datetime({offset:!0}),updated_at:Ge.string().datetime({offset:!0})}),et=new Ug("bardsballad");et.version(1).stores({characters:"local_id, updatedAt, id",systems:"local_id, id",datapacks:"local_id, id",subscriptions:"local_id, user_id, resource_id, version_id",versions:"local_id, reference_id, id",typeHashes:"local_id"});async function F3(e,t){const[n,r,i,o]=await Promise.all([et.characters.toArray(),et.systems.toArray(),et.subscriptions.toArray(),et.versions.toArray()]),s=new Map;let a=[];n.forEach(f=>{const[h,...p]=f.local_id.split("-");if(f.user_id!=="none"||h!=="none")return;const v="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,v),a.push({...f,user_id:e,local_id:v})});let l=[];r.forEach(f=>{const[h,...p]=f.local_id.split("-"),v=f.user_id==="none",y=i.find(x=>x.resource_id===f.local_id);if(!v&&!y)return;const w="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,w),l.push({...f,user_id:e,local_id:w})});let u=[];o.forEach(f=>{const[h,...p]=f.local_id.split("-"),v=f.user_id==="none",y=i.find(x=>x.version_id===f.local_id);if(!v&&!y)return;const w="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,w),u.push({...f,user_id:e,local_id:w})});let d=[];i.forEach(f=>{const[h,...p]=f.local_id.split("-");if(!(f.user_id==="none"))return;const y="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,y),d.push({...f,user_id:e,local_id:y})}),a=a.map(f=>({...f,system:{local_id:s.get(f.system.local_id),version_id:s.get(f.system.version_id)}})),d=d.map(f=>({...f,resource_id:s.get(f.resource_id),version_id:s.get(f.version_id)})),u=u.map(f=>({...f,reference_id:s.get(f.reference_id)})),await Promise.all([et.subscriptions.clear(),et.versions.clear(),et.systems.clear(),et.characters.clear()]),et.characters.bulkPut(a),et.systems.bulkPut(l),et.versions.bulkPut(u),et.subscriptions.bulkPut(d)}function B3(e,t){return function(){return e.apply(t,arguments)}}const{toString:j8}=Object.prototype,{getPrototypeOf:_1}=Object,{iterator:my,toStringTag:z3}=Symbol,yy=(e=>t=>{const n=j8.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Oo=e=>(e=e.toLowerCase(),t=>yy(t)===e),vy=e=>t=>typeof t===e,{isArray:Dc}=Array,Ff=vy("undefined");function A8(e){return e!==null&&!Ff(e)&&e.constructor!==null&&!Ff(e.constructor)&&xi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const H3=Oo("ArrayBuffer");function N8(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&H3(e.buffer),t}const R8=vy("string"),xi=vy("function"),W3=vy("number"),xy=e=>e!==null&&typeof e=="object",T8=e=>e===!0||e===!1,og=e=>{if(yy(e)!=="object")return!1;const t=_1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(z3 in e)&&!(my in e)},I8=Oo("Date"),P8=Oo("File"),O8=Oo("Blob"),$8=Oo("FileList"),M8=e=>xy(e)&&xi(e.pipe),D8=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||xi(e.append)&&((t=yy(e))==="formdata"||t==="object"&&xi(e.toString)&&e.toString()==="[object FormData]"))},L8=Oo("URLSearchParams"),[F8,B8,z8,H8]=["ReadableStream","Request","Response","Headers"].map(Oo),W8=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xh(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Dc(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let a;for(r=0;r<s;r++)a=o[r],t.call(null,e[a],a,e)}}function U3(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Sl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V3=e=>!Ff(e)&&e!==Sl;function Fb(){const{caseless:e}=V3(this)&&this||{},t={},n=(r,i)=>{const o=e&&U3(t,i)||i;og(t[o])&&og(r)?t[o]=Fb(t[o],r):og(r)?t[o]=Fb({},r):Dc(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&xh(arguments[r],n);return t}const U8=(e,t,n,{allOwnKeys:r}={})=>(xh(t,(i,o)=>{n&&xi(i)?e[o]=B3(i,n):e[o]=i},{allOwnKeys:r}),e),V8=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),q8=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},K8=(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=n!==!1&&_1(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},G8=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Y8=e=>{if(!e)return null;if(Dc(e))return e;let t=e.length;if(!W3(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},X8=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&_1(Uint8Array)),J8=(e,t)=>{const r=(e&&e[my]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},Q8=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Z8=Oo("HTMLFormElement"),eB=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Fk=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),tB=Oo("RegExp"),q3=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};xh(n,(i,o)=>{let s;(s=t(i,o,e))!==!1&&(r[o]=s||i)}),Object.defineProperties(e,r)},nB=e=>{q3(e,(t,n)=>{if(xi(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(xi(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},rB=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Dc(e)?r(e):r(String(e).split(t)),n},iB=()=>{},oB=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function sB(e){return!!(e&&xi(e.append)&&e[z3]==="FormData"&&e[my])}const aB=e=>{const t=new Array(10),n=(r,i)=>{if(xy(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=Dc(r)?[]:{};return xh(r,(s,a)=>{const l=n(s,i+1);!Ff(l)&&(o[a]=l)}),t[i]=void 0,o}}return r};return n(e,0)},lB=Oo("AsyncFunction"),uB=e=>e&&(xy(e)||xi(e))&&xi(e.then)&&xi(e.catch),K3=((e,t)=>e?setImmediate:t?((n,r)=>(Sl.addEventListener("message",({source:i,data:o})=>{i===Sl&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Sl.postMessage(n,"*")}))("axios@".concat(Math.random()),[]):n=>setTimeout(n))(typeof setImmediate=="function",xi(Sl.postMessage)),cB=typeof queueMicrotask<"u"?queueMicrotask.bind(Sl):typeof process<"u"&&process.nextTick||K3,dB=e=>e!=null&&xi(e[my]),Me={isArray:Dc,isArrayBuffer:H3,isBuffer:A8,isFormData:D8,isArrayBufferView:N8,isString:R8,isNumber:W3,isBoolean:T8,isObject:xy,isPlainObject:og,isReadableStream:F8,isRequest:B8,isResponse:z8,isHeaders:H8,isUndefined:Ff,isDate:I8,isFile:P8,isBlob:O8,isRegExp:tB,isFunction:xi,isStream:M8,isURLSearchParams:L8,isTypedArray:X8,isFileList:$8,forEach:xh,merge:Fb,extend:U8,trim:W8,stripBOM:V8,inherits:q8,toFlatObject:K8,kindOf:yy,kindOfTest:Oo,endsWith:G8,toArray:Y8,forEachEntry:J8,matchAll:Q8,isHTMLForm:Z8,hasOwnProperty:Fk,hasOwnProp:Fk,reduceDescriptors:q3,freezeMethods:nB,toObjectSet:rB,toCamelCase:eB,noop:iB,toFiniteNumber:oB,findKey:U3,global:Sl,isContextDefined:V3,isSpecCompliantForm:sB,toJSONObject:aB,isAsyncFn:lB,isThenable:uB,setImmediate:K3,asap:cB,isIterable:dB};function Lt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Me.inherits(Lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Me.toJSONObject(this.config),code:this.code,status:this.status}}});const G3=Lt.prototype,Y3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Y3[e]={value:e}});Object.defineProperties(Lt,Y3);Object.defineProperty(G3,"isAxiosError",{value:!0});Lt.from=(e,t,n,r,i,o)=>{const s=Object.create(G3);return Me.toFlatObject(e,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Lt.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const fB=null;function Bb(e){return Me.isPlainObject(e)||Me.isArray(e)}function X3(e){return Me.endsWith(e,"[]")?e.slice(0,-2):e}function Bk(e,t,n){return e?e.concat(t).map(function(i,o){return i=X3(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function hB(e){return Me.isArray(e)&&!e.some(Bb)}const pB=Me.toFlatObject(Me,{},null,function(t){return/^is[A-Z]/.test(t)});function by(e,t,n){if(!Me.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Me.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!Me.isUndefined(w[y])});const r=n.metaTokens,i=n.visitor||d,o=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Me.isSpecCompliantForm(t);if(!Me.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(Me.isDate(v))return v.toISOString();if(!l&&Me.isBlob(v))throw new Lt("Blob is not supported. Use a Buffer instead.");return Me.isArrayBuffer(v)||Me.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,y,w){let x=v;if(v&&!w&&typeof v=="object"){if(Me.endsWith(y,"{}"))y=r?y:y.slice(0,-2),v=JSON.stringify(v);else if(Me.isArray(v)&&hB(v)||(Me.isFileList(v)||Me.endsWith(y,"[]"))&&(x=Me.toArray(v)))return y=X3(y),x.forEach(function(m,S){!(Me.isUndefined(m)||m===null)&&t.append(s===!0?Bk([y],S,o):s===null?y:y+"[]",u(m))}),!1}return Bb(v)?!0:(t.append(Bk(w,y,o),u(v)),!1)}const f=[],h=Object.assign(pB,{defaultVisitor:d,convertValue:u,isVisitable:Bb});function p(v,y){if(!Me.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(v),Me.forEach(v,function(x,b){(!(Me.isUndefined(x)||x===null)&&i.call(t,x,Me.isString(b)?b.trim():b,y,h))===!0&&p(x,y?y.concat(b):[b])}),f.pop()}}if(!Me.isObject(e))throw new TypeError("data must be an object");return p(e),t}function zk(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function S1(e,t){this._pairs=[],e&&by(e,this,t)}const J3=S1.prototype;J3.append=function(t,n){this._pairs.push([t,n])};J3.toString=function(t){const n=t?function(r){return t.call(this,r,zk)}:zk;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function gB(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Q3(e,t,n){if(!t)return e;const r=n&&n.encode||gB;Me.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=Me.isURLSearchParams(t)?t.toString():new S1(t,n).toString(r),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Hk{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Me.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Z3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mB=typeof URLSearchParams<"u"?URLSearchParams:S1,yB=typeof FormData<"u"?FormData:null,vB=typeof Blob<"u"?Blob:null,xB={isBrowser:!0,classes:{URLSearchParams:mB,FormData:yB,Blob:vB},protocols:["http","https","file","blob","url","data"]},E1=typeof window<"u"&&typeof document<"u",zb=typeof navigator=="object"&&navigator||void 0,bB=E1&&(!zb||["ReactNative","NativeScript","NS"].indexOf(zb.product)<0),wB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_B=E1&&window.location.href||"http://localhost",SB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:E1,hasStandardBrowserEnv:bB,hasStandardBrowserWebWorkerEnv:wB,navigator:zb,origin:_B},Symbol.toStringTag,{value:"Module"})),Dr={...SB,...xB};function EB(e,t){return by(e,new Dr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return Dr.isNode&&Me.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function kB(e){return Me.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function CB(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function eI(e){function t(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=o>=n.length;return s=!s&&Me.isArray(i)?i.length:s,l?(Me.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!a):((!i[s]||!Me.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],o)&&Me.isArray(i[s])&&(i[s]=CB(i[s])),!a)}if(Me.isFormData(e)&&Me.isFunction(e.entries)){const n={};return Me.forEachEntry(e,(r,i)=>{t(kB(r),i,n,0)}),n}return null}function jB(e,t,n){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const bh={transitional:Z3,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Me.isObject(t);if(o&&Me.isHTMLForm(t)&&(t=new FormData(t)),Me.isFormData(t))return i?JSON.stringify(eI(t)):t;if(Me.isArrayBuffer(t)||Me.isBuffer(t)||Me.isStream(t)||Me.isFile(t)||Me.isBlob(t)||Me.isReadableStream(t))return t;if(Me.isArrayBufferView(t))return t.buffer;if(Me.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return EB(t,this.formSerializer).toString();if((a=Me.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return by(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),jB(t)):t}],transformResponse:[function(t){const n=this.transitional||bh.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Me.isResponse(t)||Me.isReadableStream(t))return t;if(t&&Me.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?Lt.from(a,Lt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dr.classes.FormData,Blob:Dr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Me.forEach(["delete","get","head","post","put","patch"],e=>{bh.headers[e]={}});const AB=Me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NB=e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&AB[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Wk=Symbol("internals");function pd(e){return e&&String(e).trim().toLowerCase()}function sg(e){return e===!1||e==null?e:Me.isArray(e)?e.map(sg):String(e)}function RB(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const TB=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function y0(e,t,n,r,i){if(Me.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Me.isString(t)){if(Me.isString(r))return t.indexOf(r)!==-1;if(Me.isRegExp(r))return r.test(t)}}function IB(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function PB(e,t){const n=Me.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,s){return this[r].call(this,t,i,o,s)},configurable:!0})})}let bi=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(a,l,u){const d=pd(l);if(!d)throw new Error("header name must be a non-empty string");const f=Me.findKey(i,d);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||l]=sg(a))}const s=(a,l)=>Me.forEach(a,(u,d)=>o(u,d,l));if(Me.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(Me.isString(t)&&(t=t.trim())&&!TB(t))s(NB(t),n);else if(Me.isObject(t)&&Me.isIterable(t)){let a={},l,u;for(const d of t){if(!Me.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?Me.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(a,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=pd(t),t){const r=Me.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return RB(i);if(Me.isFunction(n))return n.call(this,i,r);if(Me.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=pd(t),t){const r=Me.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||y0(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(s){if(s=pd(s),s){const a=Me.findKey(r,s);a&&(!n||y0(r,r[a],a,n))&&(delete r[a],i=!0)}}return Me.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||y0(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Me.forEach(this,(i,o)=>{const s=Me.findKey(r,o);if(s){n[s]=sg(i),delete n[o];return}const a=t?IB(o):String(o).trim();a!==o&&delete n[o],n[a]=sg(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Me.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Me.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Wk]=this[Wk]={accessors:{}}).accessors,i=this.prototype;function o(s){const a=pd(s);r[a]||(PB(i,s),r[a]=!0)}return Me.isArray(t)?t.forEach(o):o(t),this}};bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Me.reduceDescriptors(bi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Me.freezeMethods(bi);function v0(e,t){const n=this||bh,r=t||n,i=bi.from(r.headers);let o=r.data;return Me.forEach(e,function(a){o=a.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function tI(e){return!!(e&&e.__CANCEL__)}function Lc(e,t,n){Lt.call(this,e==null?"canceled":e,Lt.ERR_CANCELED,t,n),this.name="CanceledError"}Me.inherits(Lc,Lt,{__CANCEL__:!0});function nI(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Lt("Request failed with status code "+n.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function OB(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function $B(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,s;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),d=r[o];s||(s=u),n[i]=l,r[i]=u;let f=o,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-s<t)return;const p=d&&u-d;return p?Math.round(h*1e3/p):void 0}}function MB(e,t){let n=0,r=1e3/t,i,o;const s=(u,d=Date.now())=>{n=d,i=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?s(u,d):(i=u,o||(o=setTimeout(()=>{o=null,s(i)},r-f)))},()=>i&&s(i)]}const Qg=(e,t,n=3)=>{let r=0;const i=$B(50,250);return MB(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,l=s-r,u=i(l),d=s<=a;r=s;const f={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-s)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},Uk=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Vk=e=>(...t)=>Me.asap(()=>e(...t)),DB=Dr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Dr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Dr.origin),Dr.navigator&&/(msie|trident)/i.test(Dr.navigator.userAgent)):()=>!0,LB=Dr.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];Me.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Me.isString(r)&&s.push("path="+r),Me.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function FB(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function BB(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function rI(e,t,n){let r=!FB(t);return e&&(r||n==!1)?BB(e,t):t}const qk=e=>e instanceof bi?{...e}:e;function zl(e,t){t=t||{};const n={};function r(u,d,f,h){return Me.isPlainObject(u)&&Me.isPlainObject(d)?Me.merge.call({caseless:h},u,d):Me.isPlainObject(d)?Me.merge({},d):Me.isArray(d)?d.slice():d}function i(u,d,f,h){if(Me.isUndefined(d)){if(!Me.isUndefined(u))return r(void 0,u,f,h)}else return r(u,d,f,h)}function o(u,d){if(!Me.isUndefined(d))return r(void 0,d)}function s(u,d){if(Me.isUndefined(d)){if(!Me.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function a(u,d,f){if(f in t)return r(u,d);if(f in e)return r(void 0,u)}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(u,d,f)=>i(qk(u),qk(d),f,!0)};return Me.forEach(Object.keys(Object.assign({},e,t)),function(d){const f=l[d]||i,h=f(e[d],t[d],d);Me.isUndefined(h)&&f!==a||(n[d]=h)}),n}const iI=e=>{const t=zl({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=bi.from(s),t.url=Q3(rI(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Me.isFormData(n)){if(Dr.hasStandardBrowserEnv||Dr.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[u,...d]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Dr.hasStandardBrowserEnv&&(r&&Me.isFunction(r)&&(r=r(t)),r||r!==!1&&DB(t.url))){const u=i&&o&&LB.read(o);u&&s.set(i,u)}return t},zB=typeof XMLHttpRequest<"u",HB=zB&&function(e){return new Promise(function(n,r){const i=iI(e);let o=i.data;const s=bi.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,d,f,h,p,v;function y(){p&&p(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function x(){if(!w)return;const m=bi.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:m,config:e,request:w};nI(function(N){n(N),y()},function(N){r(N),y()},E),w=null}"onloadend"in w?w.onloadend=x:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(x)},w.onabort=function(){w&&(r(new Lt("Request aborted",Lt.ECONNABORTED,e,w)),w=null)},w.onerror=function(){r(new Lt("Network Error",Lt.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||Z3;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new Lt(S,E.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,e,w)),w=null},o===void 0&&s.setContentType(null),"setRequestHeader"in w&&Me.forEach(s.toJSON(),function(S,E){w.setRequestHeader(E,S)}),Me.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),a&&a!=="json"&&(w.responseType=i.responseType),u&&([h,v]=Qg(u,!0),w.addEventListener("progress",h)),l&&w.upload&&([f,p]=Qg(l),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=m=>{w&&(r(!m||m.type?new Lc(null,e,w):m),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const b=OB(i.url);if(b&&Dr.protocols.indexOf(b)===-1){r(new Lt("Unsupported protocol "+b+":",Lt.ERR_BAD_REQUEST,e));return}w.send(o||null)})},WB=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(u){if(!i){i=!0,a();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Lt?d:new Lc(d instanceof Error?d.message:d))}};let s=t&&setTimeout(()=>{s=null,o(new Lt("timeout ".concat(t," of ms exceeded"),Lt.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>Me.asap(a),l}},UB=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},VB=async function*(e,t){for await(const n of qB(e))yield*UB(n,t)},qB=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Kk=(e,t,n,r)=>{const i=VB(e,t);let o=0,s,a=l=>{s||(s=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await i.next();if(u){a(),l.close();return}let f=d.byteLength;if(n){let h=o+=f;n(h)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},wy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",oI=wy&&typeof ReadableStream=="function",KB=wy&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),sI=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},GB=oI&&sI(()=>{let e=!1;const t=new Request(Dr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Gk=64*1024,Hb=oI&&sI(()=>Me.isReadableStream(new Response("").body)),Zg={stream:Hb&&(e=>e.body)};wy&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Zg[t]&&(Zg[t]=Me.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Lt("Response type '".concat(t,"' is not supported"),Lt.ERR_NOT_SUPPORT,r)})})})(new Response);const YB=async e=>{if(e==null)return 0;if(Me.isBlob(e))return e.size;if(Me.isSpecCompliantForm(e))return(await new Request(Dr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Me.isArrayBufferView(e)||Me.isArrayBuffer(e))return e.byteLength;if(Me.isURLSearchParams(e)&&(e=e+""),Me.isString(e))return(await KB(e)).byteLength},XB=async(e,t)=>{const n=Me.toFiniteNumber(e.getContentLength());return n==null?YB(t):n},JB=wy&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:h}=iI(e);u=u?(u+"").toLowerCase():"text";let p=WB([i,o&&o.toAbortSignal()],s),v;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let w;try{if(l&&GB&&n!=="get"&&n!=="head"&&(w=await XB(d,r))!==0){let E=new Request(t,{method:"POST",body:r,duplex:"half"}),k;if(Me.isFormData(r)&&(k=E.headers.get("content-type"))&&d.setContentType(k),E.body){const[N,I]=Uk(w,Qg(Vk(l)));r=Kk(E.body,Gk,N,I)}}Me.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;v=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:x?f:void 0});let b=await fetch(v);const m=Hb&&(u==="stream"||u==="response");if(Hb&&(a||m&&y)){const E={};["status","statusText","headers"].forEach(z=>{E[z]=b[z]});const k=Me.toFiniteNumber(b.headers.get("content-length")),[N,I]=a&&Uk(k,Qg(Vk(a),!0))||[];b=new Response(Kk(b.body,Gk,N,()=>{I&&I(),y&&y()}),E)}u=u||"text";let S=await Zg[Me.findKey(Zg,u)||"text"](b,e);return!m&&y&&y(),await new Promise((E,k)=>{nI(E,k,{data:S,headers:bi.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:v})})}catch(x){throw y&&y(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,e,v),{cause:x.cause||x}):Lt.from(x,x&&x.code,e,v)}}),Wb={http:fB,xhr:HB,fetch:JB};Me.forEach(Wb,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const Yk=e=>"- ".concat(e),QB=e=>Me.isFunction(e)||e===null||e===!1,aI={getAdapter:e=>{e=Me.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let s;if(r=n,!QB(n)&&(r=Wb[(s=String(n)).toLowerCase()],r===void 0))throw new Lt("Unknown adapter '".concat(s,"'"));if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([a,l])=>"adapter ".concat(a," ")+(l===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?"since :\n"+o.map(Yk).join("\n"):" "+Yk(o[0]):"as no adapter specified";throw new Lt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:Wb};function x0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lc(null,e)}function Xk(e){return x0(e),e.headers=bi.from(e.headers),e.data=v0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),aI.getAdapter(e.adapter||bh.adapter)(e).then(function(r){return x0(e),r.data=v0.call(e,e.transformResponse,r),r.headers=bi.from(r.headers),r},function(r){return tI(r)||(x0(e),r&&r.response&&(r.response.data=v0.call(e,e.transformResponse,r.response),r.response.headers=bi.from(r.response.headers))),Promise.reject(r)})}const lI="1.9.0",_y={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_y[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Jk={};_y.transitional=function(t,n,r){function i(o,s){return"[Axios v"+lI+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,a)=>{if(t===!1)throw new Lt(i(s," has been removed"+(n?" in "+n:"")),Lt.ERR_DEPRECATED);return n&&!Jk[s]&&(Jk[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,a):!0}};_y.spelling=function(t){return(n,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(t)),!0)};function ZB(e,t,n){if(typeof e!="object")throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const a=e[o],l=a===void 0||s(a,o,e);if(l!==!0)throw new Lt("option "+o+" must be "+l,Lt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Lt("Unknown option "+o,Lt.ERR_BAD_OPTION)}}const ag={assertOptions:ZB,validators:_y},Yo=ag.validators;let Rl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Hk,response:new Hk}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+o):r.stack=o}catch(s){}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=zl(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&ag.assertOptions(r,{silentJSONParsing:Yo.transitional(Yo.boolean),forcedJSONParsing:Yo.transitional(Yo.boolean),clarifyTimeoutError:Yo.transitional(Yo.boolean)},!1),i!=null&&(Me.isFunction(i)?n.paramsSerializer={serialize:i}:ag.assertOptions(i,{encode:Yo.function,serialize:Yo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ag.assertOptions(n,{baseUrl:Yo.spelling("baseURL"),withXsrfToken:Yo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&Me.merge(o.common,o[n.method]);o&&Me.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),n.headers=bi.concat(s,o);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,f=0,h;if(!l){const v=[Xk.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,u),h=v.length,d=Promise.resolve(n);f<h;)d=d.then(v[f++],v[f++]);return d}h=a.length;let p=n;for(f=0;f<h;){const v=a[f++],y=a[f++];try{p=v(p)}catch(w){y.call(this,w);break}}try{d=Xk.call(this,p)}catch(v){return Promise.reject(v)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=zl(this.defaults,t);const n=rI(t.baseURL,t.url,t.allowAbsoluteUrls);return Q3(n,t.params,t.paramsSerializer)}};Me.forEach(["delete","get","head","options"],function(t){Rl.prototype[t]=function(n,r){return this.request(zl(r||{},{method:t,url:n,data:(r||{}).data}))}});Me.forEach(["post","put","patch"],function(t){function n(r){return function(o,s,a){return this.request(zl(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Rl.prototype[t]=n(),Rl.prototype[t+"Form"]=n(!0)});let e7=class uI{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(a=>{r.subscribe(a),o=a}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},t(function(o,s,a){r.reason||(r.reason=new Lc(o,s,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new uI(function(i){t=i}),cancel:t}}};function t7(e){return function(n){return e.apply(null,n)}}function n7(e){return Me.isObject(e)&&e.isAxiosError===!0}const Ub={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ub).forEach(([e,t])=>{Ub[t]=e});function cI(e){const t=new Rl(e),n=B3(Rl.prototype.request,t);return Me.extend(n,Rl.prototype,t,{allOwnKeys:!0}),Me.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return cI(zl(e,i))},n}const Jn=cI(bh);Jn.Axios=Rl;Jn.CanceledError=Lc;Jn.CancelToken=e7;Jn.isCancel=tI;Jn.VERSION=lI;Jn.toFormData=by;Jn.AxiosError=Lt;Jn.Cancel=Jn.CanceledError;Jn.all=function(t){return Promise.all(t)};Jn.spread=t7;Jn.isAxiosError=n7;Jn.mergeConfig=zl;Jn.AxiosHeaders=bi;Jn.formToJSON=e=>eI(Me.isHTMLForm(e)?new FormData(e):e);Jn.getAdapter=aI.getAdapter;Jn.HttpStatusCode=Ub;Jn.default=Jn;const{Axios:fce,AxiosError:hce,CanceledError:pce,isCancel:gce,CancelToken:mce,VERSION:yce,all:vce,Cancel:xce,isAxiosError:bce,spread:wce,toFormData:_ce,AxiosHeaders:Sce,HttpStatusCode:Ece,formToJSON:kce,getAdapter:Cce,mergeConfig:jce}=Jn;function r7(e){if(!e||!/^(\d{1,3}\.){3}\d{1,3}$/.test(e))throw new Error("Invalid IPv4 address format");const t=e.split(".").map(Number);if(t.some(n=>n<0||n>255))throw new Error("IP octets must be between 0 and 255");return t[0]<<24|t[1]<<16|t[2]<<8|t[3]}const gu={CLASS_A:{MIN:10<<24,MAX:10<<24|16777215},CLASS_B:{MIN:172<<24|16<<16,MAX:172<<24|31<<16|65535},CLASS_C:{MIN:192<<24|168<<16,MAX:192<<24|168<<16|65535}};function i7(){const e=window.location.hostname;if(e==="localhost"||e==="127.0.0.1")return!0;if(!/^(\d{1,3}\.){3}\d{1,3}$/.test(e))return!1;try{const t=r7(e);return t>=gu.CLASS_A.MIN&&t<=gu.CLASS_A.MAX||t>=gu.CLASS_B.MIN&&t<=gu.CLASS_B.MAX||t>=gu.CLASS_C.MIN&&t<=gu.CLASS_C.MAX}catch(t){return!1}}const An=Jn.create({baseURL:i7()?"http://".concat(window.location.hostname,":3000/v1"):"https://api.bardsballad.com/v1"});An.interceptors.request.use(async e=>{const t=await Lr.get("token"),n=await Lr.get("apiKey");return t&&(e.headers.Authorization="Bearer ".concat(t),e.headers["x-api-key"]=n||""),e});An.interceptors.response.use(e=>{const t=e.headers.authorization,n=e.headers["x-api-key"];if(t){const r=t.replace("Bearer ","");py(r)}if(n&&Lr.set("apiKey",n),e.data&&typeof e.data=="object"&&"data"in e.data){const{error:r,data:i}=e.data;r&&r.trim()!==""&&(cn(r,"error"),console.warn("API Error:",r)),e.data=i}return e},e=>{if(e.response&&e.response.data){const{error:t,data:n}=e.response.data;t&&t.trim()!==""&&cn(t,"error")}return Promise.reject(e)});const o7=async(e,t)=>{const n=await An.post("/auth/login",{username:e,password:t,deviceName:await j3(),deviceId:await Lr.get("deviceId")});if(n.status===400)return typeof n.data=="string"?{success:!1,error:"Required parameters are missing"}:n.data.existing?{success:!1,error:"Username and/or email already taken"}:{success:!1,error:"Input validation failed"};if(n.status===500)return{success:!1,error:"Failed to create user"};const{accessToken:r,apiKey:i,deviceId:o}=n.data;if(!(r&&i&&o))return cn("please report this code: #RRFV","error"),{success:!1,error:"please report this code: #RRFV"};const s=await py(r);return Lr.set("apiKey",i),Lr.set("deviceId",o),F3(s.id,o),{success:!0}},s7=async(e,t,n)=>{const r=await An.post("/auth/register",{username:e,email:t,password:n,deviceName:await j3()});if(r.status===400)return{success:!1,error:r.data};if(r.status===403)return{success:!1,error:"Invalid username/email or password"};const{accessToken:i,apiKey:o,deviceId:s}=r.data;if(!(i&&o&&s))return cn("please report this code: #RRFV","error"),{success:!1,error:"please report this code: #RRFV"};const a=await py(i);return Lr.set("apiKey",o),Lr.set("deviceId",s),F3(a.id,s),{success:!0}},dI=({id:e})=>{const[t,n]=j.useState(!1),[r,i]=j.useState(""),[o,s]=j.useState(""),[a,l]=j.useState(""),[u,d]=j.useState(""),[f,h]=j.useState(!1),[p,v]=j.useState(),[y,w]=j.useState(""),x=j.useMemo(()=>t?"Sign Up":"Login",[t]),b=j.useCallback(()=>Hn(e),[e]),m=async()=>await s7(r,o,a),S=async()=>await o7(r,a);return c.jsxs(Wn,{isOpen:!0,onClose:b,className:"",children:[c.jsx(Vn,{title:x,onClose:b}),c.jsxs(Un,{children:[f?c.jsx("h1",{children:"Loading..."}):p===!0?c.jsxs(c.Fragment,{children:[c.jsx("h1",{children:"Authentication successful!"}),c.jsx(xt,{color:"primary",onClick:b,children:"Close"})]}):p===!1?c.jsxs(c.Fragment,{children:[c.jsx("h1",{children:y}),c.jsx(xt,{color:"light",onClick:()=>{w(""),v(void 0)},children:"Try Again"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Vt,{id:"username",label:t?"Username":"Username or Email",placeholder:"Username",value:r,onChange:i,isValid:!0,errorMessage:""}),t&&c.jsx(Vt,{id:"email",label:"Email",placeholder:"support@bardsballad.com",value:o,onChange:s,isValid:!0,errorMessage:""}),c.jsx(Vt,{id:"password",label:"Password",type:"password",placeholder:"OogaBooga1234",value:a,onChange:l,isValid:!0,errorMessage:""}),t&&c.jsx(Vt,{id:"confirm-password",label:"Confirm Password",type:"password",placeholder:"OogaBooga1234",value:u,onChange:d,isValid:u.length===0||u===a,errorMessage:"Passwords don't match"}),c.jsx(xt,{id:"signup",color:"primary",onClick:async()=>{const E=t?m:S;try{h(!0);const{success:k,error:N}=await E();h(!1),v(k),N&&w(N)}catch(k){h(!1),v(!1),w("Error occured during authentication, try again please.")}},children:x}),c.jsx("div",{className:"flex flex-col mt-4 items-center justify-center text-sm",children:c.jsxs("h3",{children:[c.jsx("span",{className:"cursor-default dark:text-neutral-300",children:t?"Already have an account?":"Don't have an account?"}),c.jsx("span",{className:"group text-fantasy-accent transition-all duration-100 ease-in-out cursor-pointer",onClick:()=>n(!t),children:c.jsx("span",{className:"bg-left-bottom ml-1 bg-gradient-to-r from-fantasy-accent-light to-fantasy-accent-dark bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:t?"Login":"Sign Up"})})]})})]}),c.jsx("div",{className:"text-neutral-500 flex text-center flex-col mt-4 items-center text-sm",children:c.jsxs("p",{className:"cursor-default",children:["By ",t?"signing up":"logging in",", you agree to our"," ",c.jsx("a",{className:"group text-fantasy-accent transition-all duration-100 ease-in-out",href:"https://bardsballad.com/terms-of-service",target:"_blank",rel:"noopener noreferrer",children:c.jsxs("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-fantasy-accent-light to-fantasy-accent-dark bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:["Terms of Service"," "]})}),"and"," ",c.jsx("a",{className:"group text-fantasy-accent transition-all duration-100 ease-in-out",href:"https://bardsballad.com/privacy-policy",target:"_blank",rel:"noopener noreferrer",children:c.jsx("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-fantasy-accent-light to-fantasy-accent-dark bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:"Privacy Policy"})})]})})]})]})},a7=[{icon:"",name:"Home",path:""},{icon:"",name:"Marketplace",path:"marketplace"},{icon:"",name:"Characters",path:"characters"},{icon:"",name:"Library",path:"library"},{icon:"",name:"Garbage",path:"garbage"}],l7=[{icon:()=>c.jsx("svg",{className:"flex-shrink-0 w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 21",children:c.jsx("path",{d:"m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"})}),name:"Settings",path:"settings"}],u7=()=>{const e=g1.useValue(),t=rr.useValue(),[n,r]=j.useState(!1),i=j.useRef(!1);return j.useEffect(()=>i.current?void 0:(i.current=!0,(async()=>{await Zd.get("onboarding-completed")||At("onboarding",({id:a})=>c.jsx(tF,{yes:()=>{Hn(a),b3(),r(!0)},no:()=>{Hn(a),Zd.set("onboarding-completed",!0)}}))})(),()=>{AL("onboarding")}),[]),c.jsxs("div",{className:"w-screen h-screen-dynamic transition-colors overflow-x-hidden fantasy-gradient fantasy-atmospheric text-fantasy-text",children:[c.jsx("div",{className:"fixed inset-0 pointer-events-none z-10",id:"particleContainer"}),c.jsx(eF,{}),n&&c.jsx(LL,{steps:FL,onFinish:()=>{Zd.set("onboarding-completed",!0),r(!1)}}),c.jsx("div",{onClick:pp,className:"".concat(e?"":"-translate-x-full"," bg-neutral-950 opacity-65 fixed top-0 left-0 z-40 w-screen sm:w-64 h-screen-dynamic sm:translate-x-0")}),c.jsx("aside",{onClick:pp,className:"".concat(e?"":"-translate-x-full"," bg-fantasy-glass backdrop-blur-lg border-r border-fantasy-border shadow-2xl fixed top-0 left-0 z-40 w-64 h-screen-dynamic transition-transform sm:translate-x-0"),"aria-label":"Sidebar",children:c.jsxs("div",{className:"h-full flex flex-col justify-between px-3 py-4 overflow-y-auto",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center mb-10 text-fantasy-accent font-bold text-lg",children:[c.jsx("svg",{className:"h-11 sm:h-12 mr-2.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 442 442",children:c.jsx("g",{children:c.jsxs("g",{children:[c.jsx("path",{className:"fill-fantasy-accent",d:"M221,442c-59.03,0-114.53-22.99-156.27-64.73S0,280.03,0,221,22.99,106.47,64.73,64.73C106.47,22.99,161.97,0,221,0s114.53,22.99,156.27,64.73c41.74,41.74,64.73,97.24,64.73,156.27s-22.99,114.53-64.73,156.27-97.24,64.73-156.27,64.73ZM221,12C105.76,12,12,105.76,12,221s93.76,209,209,209,209-93.76,209-209S336.24,12,221,12Z"}),c.jsx("path",{className:"fill-fantasy-accent",d:"M343,318c-10.28-3.95-23-4-30,1-8.96,6.4-14,18-27.89,17-13.33-.96-18.11-10-18.11-10,0,0,13-1,21-8,6.58-5.76,12-12,11-24-.91-10.96-8.94-16-18-16-14,0-22,11-22,11,0,0-3-11,10-30,14.43-21.09,37.58-34.03,45-50,13-28,8.03-51,8.03-51l5.18-5.04.76.92s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-3.19-3.94,7.19-6.99,2.42,2.93s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-4.83-5.96,7.26-7.07,3.43,4.15s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-5.83-7.19.83-.81s3.33,2.68,6-1c2.93-4.04-2-7-2-7l-13-15s-1-4-5-3c-4.95,1.24-4,5-4,5l-.34.22-6.66-8.22s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l4.32,5.24-8.36,5.3-5.4-6.66s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l3.05,3.69-8.25,5.23-4.8-5.92s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l2.44,2.96-91.7,58.17s-7.97,4.6-15.3,9c-5,3-9-4-9-4l-3-2-2.44,2s4.89,6.76,4.44,9c-1,5-5,1-5,1l-6-7-4-3-2,3,7.43,9s2.62,3,.57,5-6-3-6-3l-9.95-12-4.05-2-2,2,11,14s4,5,1,7-7-4-7-4l-14-18-5-2-1,3,14.89,23s4.11,4,.11,7c-3.39,2.55-6.85-1.6-6.85-1.6l-21.54-28-5.61-2.4-1,3,20,28s6.35,6.71,1,9c-7,3-11.75-4-11.75-4l-24.25-30-4-2-1,3,23.1,33s5.13,7,2.05,10c-3.08,3-8.92-2.5-8.92-2.5l-29.23-37.5-4-2-1,3,32.9,47s4.1,5,2.1,7c-3.23,3.23-6-1-6-1l-38-51-6-1-3,4s65.82,92,73,99,9.9,1,14,3,5.41,7.59,1,12c-6,6-11-1-11-1,0,0-68.15-92-78.4-106-10.26-14-15.22-27.04-16.6-38-2-16,2.57-39,20-43s33.07.64,42,13c13,18,18.46,26.33,29,34,11,8,33.57,10.15,49-4,12-11,9.91-29,9.91-29,0,0,20.47-10.15,26.09-27,7-21-8.5-37.38-3-59,3.12-12.27,14-22,28-22,18.03,0,23.78,11,23.78,11,0,0-5.65,0-10.78,5s-5.64,11.45-2,16c4,5,13,5,19,0,6.61-5.51,5.06-14,5.06-14,0,0,5.94-4,11.94,4,4.38,5.84,4.04,14.63,15,16,8,1,16-8,14-16-1.21-4.85-5.49-7.87-10-4-7,6,3.08,13.26-3,15-7,2-9-11-16-17-5.93-5.08-11-6-11-6,0,0-1-19-19-22-17.31-2.88-30.74,2.36-41,14-10.26,11.64-12.05,26-10,37s10.13,29,5,42-23.11,20-23.11,20c0,0-.89-11-5.89-17-6.46-7.75-13-13-27-12-10.02.72-23.05,11-21,25s17,15,17,15c0,0-9.27,9.07-27,4-14-4-14.89-13.18-30-22-20.23-11.82-37-6-42-3-4.62,2.77-18.99,11.98-19,40,0,24,13,40,13,40l-23,12s-6,2-8,7c-1.53,3.83,2,8,2,8l95,122s6.82,11,14,11c6,0,13-6,13-6,0,0,24.27-16,50.94-57s22.56-77.58,22.56-77.58l74.5-51.42s8-5,6-8c-1.76-2.64-9,3-9,3,0,0-116.44,74.29-119,76-3,2-4-2-4-2,0,0-2-6-6-10-2.7-2.7-6.08-3.16-7-5-1-2,1-4,3-5l108.67-73s8.99-8,25.33-5c8.31,1.53,15,8,15,8,0,0,7.97,8,9,18s-1.13,20-5.23,30-8.2,15-18.46,23c-10.26,8-25.2,13.19-37.31,20-16,9-22.84,24.61-27,35-2,5-4.18,20,3,31s24,15,24,15c0,0,3.85,5,10,9s14.02,5.61,22,5c13-1,16.25-8.83,24-14,6-4,16.18-4,24.38,1,8.2,5,15.62,16.58,15.62,28,0,12-1.8,19-10,27s-15.54,11-34,11-29-1-38-7c-11.91-7.94-12.92-15.81-24-28-10-11-21.69-15-34-15-8,0-15.49,1.49-24,10-7,7-7,18-7,18,0,0-4,2-10,9-5.14,5.99-10,13-17,14-10.58,1.51-17.59-2-17.59-2,0,0,1.62-3,.59-5s-3.9-3-8-3-6.74,4.26-2,9c3,3,6.52,5.77,17,7,17,2,22.94-7.94,28-13,7-7,11-8,11-8,0,0,2,5,7,8,3.15,1.89,10,3,15,1,5.95-2.38,7-10,4-15-2.78-4.63-12-5-12-5,0,0,3-8,16-6,8.95,1.38,13.96,5.04,28,18,13,12,30.32,14.88,50,16,35,2,47.44,0,59.74-10,12.31-10,15.54-33.28,13.26-44s-10.59-20-21-24ZM274,66c-7,4-12-2-11-7,.78-3.92,4-7,12-8,0,0,5.14,11.49-1,15ZM147,132c-1.05-6.32,3-16,13-17s12,6,12,12c0,10.44-7,16-7,16-9,0-17-5-18-11ZM164,252c0,10.49-8.51,19-19,19s-19-8.51-19-19,8.51-19,19-19,19,8.51,19,19ZM347,107s7.18,5.73,8,9c.49,1.94.03,3.42-.57,4.43l-12.11-14.93c3.12-.83,4.68,1.5,4.68,1.5ZM335.77,109.21l13.37,16.2-7.54,6.66-14.23-17.55c3.21-2.03,6.11-3.86,8.41-5.3ZM321.04,118.52l15.13,18.33-7.46,6.58-15.94-19.66c2.74-1.74,5.54-3.52,8.27-5.25ZM310,142c-8.3-6.64-18-5-18-5,0,0,6.33-4.04,14.44-9.21l16.85,20.42-4.29,3.79s-4-6-9-10ZM261,299s2-7,9-12,15-5,19-2c5.06,3.79,5.41,11.18,3,16-2,4-9.11,10.32-17,9-12-2-14-11-14-11ZM198,374c4.47,0,7,4,6,7-1.14,3.42-7,3-10,1-2.35-1.57-4-6-4-6,0,0,3-2,8-2Z"})]})})}),c.jsx("p",{children:"BardsBallad"})]}),c.jsx("ul",{className:"space-y-2",children:a7.map(o=>c.jsx("li",{children:c.jsx(Ib,{id:"nav-".concat(o.name),to:o.path,onClick:pp,children:({isActive:s,isPending:a})=>c.jsxs("div",{className:"nav-item flex items-center px-4 py-3 rounded-lg cursor-pointer transition-all duration-300 ".concat(s?"bg-fantasy-accent/20 border-l-4 border-fantasy-accent":"hover:bg-fantasy-accent/10 hover:translate-x-1"),children:[c.jsx("span",{className:"mr-3 text-base",children:o.icon}),c.jsx("p",{children:o.name})]})})},o.name))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl p-4 mt-5 text-sm leading-relaxed",role:"alert",children:[c.jsx("span",{className:"bg-fantasy-accent text-fantasy-dark px-2 py-0.5 rounded text-sm font-bold mb-2 inline-block",children:"Beta"}),c.jsx("p",{children:"We're happy you're using the BardsBallad Beta! If you run into any problems please reach out to us through one of the platforms below!"})]}),c.jsxs("div",{className:"flex items-center my-2 gap-2 px-1",children:[c.jsx("a",{href:"https://discord.gg/a5qSfxv",target:"_blank",className:"hover:bg-fantasy-accent/10 p-1 rounded",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 fill-fantasy-text-muted hover:fill-fantasy-text transition-colors",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M464 66.52A50 50 0 00414.12 17L97.64 16A49.65 49.65 0 0048 65.52V392c0 27.3 22.28 48 49.64 48H368l-13-44 109 100zM324.65 329.81s-8.72-10.39-16-19.32C340.39 301.55 352.5 282 352.5 282a139 139 0 01-27.85 14.25 173.31 173.31 0 01-35.11 10.39 170.05 170.05 0 01-62.72-.24 184.45 184.45 0 01-35.59-10.4 141.46 141.46 0 01-17.68-8.21c-.73-.48-1.45-.72-2.18-1.21-.49-.24-.73-.48-1-.48-4.36-2.42-6.78-4.11-6.78-4.11s11.62 19.09 42.38 28.26c-7.27 9.18-16.23 19.81-16.23 19.81-53.51-1.69-73.85-36.47-73.85-36.47 0-77.06 34.87-139.62 34.87-139.62 34.87-25.85 67.8-25.12 67.8-25.12l2.42 2.9c-43.59 12.32-63.44 31.4-63.44 31.4s5.32-2.9 14.28-6.77c25.91-11.35 46.5-14.25 55-15.21a24 24 0 014.12-.49 205.62 205.62 0 0148.91-.48 201.62 201.62 0 0172.89 22.95s-19.13-18.15-60.3-30.45l3.39-3.86s33.17-.73 67.81 25.16c0 0 34.87 62.56 34.87 139.62 0-.28-20.35 34.5-73.86 36.19z"}),c.jsx("path",{d:"M212.05 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.8 0 24.7-11.83 24.7-26.57.25-14.76-10.9-26.57-24.7-26.57zM300.43 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.81 0 24.7-11.83 24.7-26.57S314 218 300.43 218z"})]})}),c.jsx("a",{href:"https://github.com/KingCosmic/BardsBallad",target:"_blank",className:"hover:bg-fantasy-accent/10 p-1 rounded",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-7 fill-fantasy-text-muted hover:fill-fantasy-text transition-colors",viewBox:"0 0 512 512",children:c.jsx("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"})})}),c.jsx("a",{href:"mailto:support@bardsballad.com",target:"_blank",className:"hover:bg-fantasy-accent/10 p-1 rounded",children:c.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 fill-fantasy-text-muted hover:fill-fantasy-text transition-colors",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 5.25L3 6V18L3.75 18.75H20.25L21 18V6L20.25 5.25H3.75ZM4.5 7.6955V17.25H19.5V7.69525L11.9999 14.5136L4.5 7.6955ZM18.3099 6.75H5.68986L11.9999 12.4864L18.3099 6.75Z"})," "]})]})})]}),c.jsxs("ul",{className:"pt-4 mt-2 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:[!t.isLoggedIn&&c.jsx("li",{className:"w-full",children:c.jsx("button",{className:"w-full fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>At("auth",({id:o})=>c.jsx(dI,{id:o})),children:"Login / Register"})}),l7.map(o=>c.jsx("li",{children:c.jsx(Ib,{id:"nav-".concat(o.name),to:o.path,onClick:pp,children:({isActive:s,isPending:a})=>c.jsxs("div",{className:"nav-item flex items-center px-4 py-3 rounded-lg cursor-pointer transition-all duration-300 ".concat(s?"bg-fantasy-accent/20 border-l-4 border-fantasy-accent":"hover:bg-fantasy-accent/10 hover:translate-x-1"),children:[c.jsx("span",{className:"mr-3 text-base",children:o.icon()}),c.jsx("p",{children:o.name})]})})},o.name))]})]})]})}),c.jsx("div",{className:"sm:ml-64 h-screen-dynamic p-8 lg:p-10",children:c.jsx(U6,{})}),c.jsx(NL,{})]})},c7=()=>c.jsxs("button",{onClick:b3,type:"button",className:"sm:hidden bg-fantasy-glass border border-fantasy-border rounded-lg p-4 mr-4 backdrop-blur-lg text-fantasy-accent text-lg transition-all duration-300 hover:bg-fantasy-accent/20 hover:scale-105",children:[c.jsx("span",{className:"sr-only",children:"Open sidebar"}),c.jsx("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})})]}),cs=({title:e,subtitle:t="",options:n,hasSidebar:r=!1})=>c.jsxs("div",{className:"flex flex-row justify-between mb-8 ".concat(r?"lg:w-[calc(100vw-36rem)]":""),children:[c.jsxs("div",{className:"flex flex-row items-start",children:[c.jsx(c7,{}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-light text-fantasy-text mb-2 drop-shadow-lg",children:e}),c.jsx("p",{className:"text-sm text-fantasy-accent/80",children:t})]})]}),c.jsx("div",{className:"flex flex-row-reverse items-center",children:(n==null?void 0:n.length)&&c.jsx("ul",{className:"flex flex-row gap-2",children:n==null?void 0:n.map(({Content:i,onClick:o},s)=>c.jsx("li",{onClick:o,className:"flex justify-center items-center bg-fantasy-dark text-fantasy-text border border-fantasy-border p-4 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-dark/40 cursor-pointer",children:c.jsx(i,{})},s))})})]}),d7=[{title:"Added Eruda debugging support, and started work on theme system.",date:"Released on January 21st, 2025",description:"Check your settings for themes and to enable Eruda!"},{title:"Editor Released!",date:"Released on January 16th, 2025",description:"We've released the Editor portion of BarsBallad, this will allow you to make your own systems! It includes visual drag and drop creation of character of tabs, and a custom visual code editor."},{title:"Beta Release",date:"Released on August 14th, 2024",description:"We're releasing BardsBallad into open beta! Please share all feedback through discord and github and share us with your friends!"}],f7=({title:e,isLatest:t,date:n,description:r})=>c.jsxs("li",{className:"mb-10 ms-6",children:[c.jsx("span",{className:"absolute flex items-center justify-center w-6 h-6 rounded-full -start-3 ring-8 ring-fantasy-dark bg-fantasy-medium",children:c.jsx("svg",{className:"w-2.5 h-2.5 text-fantasy-accent","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})})}),c.jsxs("h3",{className:"flex items-center mb-1 text-lg font-semibold text-fantasy-text",children:[e,t?c.jsxs(c.Fragment,{children:[" ",c.jsx("span",{className:"bg-fantasy-accent text-fantasy-dark text-sm font-medium me-2 px-2.5 py-0.5 rounded ms-3",children:"Latest"})]}):null]}),c.jsx("time",{className:"block mb-2 text-sm font-normal leading-none text-fantasy-text-muted",children:n}),c.jsx("p",{className:"mb-4 text-base font-normal text-fantasy-text-muted",children:r})]}),h7=()=>c.jsxs("div",{children:[c.jsx(cs,{title:"Home"}),c.jsx("ol",{className:"relative m-10 border-s border-fantasy-border",children:d7.map((e,t)=>c.jsx(f7,{title:e.title,isLatest:t===0,date:e.date,description:e.description},e.title))})]}),ct=j.forwardRef(({id:e,label:t,value:n,onChange:r,children:i,style:o,containerClassName:s,labelClassName:a,className:l},u)=>c.jsxs("div",{className:s||"mb-6",style:o,ref:u,children:[c.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white ".concat(a),children:t}),c.jsx("select",{id:e,className:"".concat(l," block w-full p-3 bg-fantasy-dark text-fantasy-text border border-fantasy-border rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-dark/40 cursor-pointer"),value:n,onChange:d=>r(d.target.value),children:i})]})),fI=j.createContext({});function Fc(){return j.useContext(fI)}const hI=({localData:e,children:t})=>{const n=Fc();return c.jsx(fI.Provider,{value:{...n,...e},children:t})};function pI(e){return e.nodes.find(t=>t.type==="entry")}function Qk(e,t){return e.nodes.find(n=>n.id===t)}const p7={process:(e,t)=>{const n=e.input;for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"start","output")}},g7={process:(e,t)=>{const{name:n}=t.data.param,r=e.getParam(t.id,n);e.setOutput(r)}};function m7(e,t){return t?t.split("/").reduce((r,i)=>{if(r)return Array.isArray(r)?(r=r.find(o=>o.name===i),r||void 0):r[i]},e):void 0}const y7={process:(e,t)=>{const n=e.getCharacter(),r=m7(n,"data/".concat(t.data.path));return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}};function k1(e,t,n){const r=t.split("/");if(!r.length)return e;const i=r.pop(),o=r.reduce((s,a)=>{if(s)return Array.isArray(s)?(s=s.find(l=>l.name===a),s||void 0):s[a]},e);if(!o)return e;if(Array.isArray(o)){const s=o.findIndex(a=>a.name===i);if(s===-1)return e;o[s]=n}else o[i]=n;return e}var gI=Symbol.for("immer-nothing"),Zk=Symbol.for("immer-draftable"),Di=Symbol.for("immer-state");function vo(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var fc=Object.getPrototypeOf;function hc(e){return!!e&&!!e[Di]}function Hl(e){var t;return e?mI(e)||Array.isArray(e)||!!e[Zk]||!!((t=e.constructor)!=null&&t[Zk])||Ey(e)||ky(e):!1}var v7=Object.prototype.constructor.toString();function mI(e){if(!e||typeof e!="object")return!1;const t=fc(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===v7}function em(e,t){Sy(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Sy(e){const t=e[Di];return t?t.type_:Array.isArray(e)?1:Ey(e)?2:ky(e)?3:0}function Vb(e,t){return Sy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yI(e,t,n){const r=Sy(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function x7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ey(e){return e instanceof Map}function ky(e){return e instanceof Set}function gl(e){return e.copy_||e.base_}function qb(e,t){if(Ey(e))return new Map(e);if(ky(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=mI(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Di];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(fc(e),r)}else{const r=fc(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function C1(e,t=!1){return Cy(e)||hc(e)||!Hl(e)||(Sy(e)>1&&(e.set=e.add=e.clear=e.delete=b7),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>C1(r,!0))),e}function b7(){vo(2)}function Cy(e){return Object.isFrozen(e)}var w7={};function Wl(e){const t=w7[e];return t||vo(0,e),t}var Bf;function vI(){return Bf}function _7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function e2(e,t){t&&(Wl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Kb(e){Gb(e),e.drafts_.forEach(S7),e.drafts_=null}function Gb(e){e===Bf&&(Bf=e.parent_)}function t2(e){return Bf=_7(Bf,e)}function S7(e){const t=e[Di];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function n2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Di].modified_&&(Kb(t),vo(4)),Hl(e)&&(e=tm(t,e),t.parent_||nm(t,e)),t.patches_&&Wl("Patches").generateReplacementPatches_(n[Di].base_,e,t.patches_,t.inversePatches_)):e=tm(t,n,[]),Kb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gI?e:void 0}function tm(e,t,n){if(Cy(t))return t;const r=t[Di];if(!r)return em(t,(i,o)=>r2(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return nm(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),em(o,(a,l)=>r2(e,r,i,a,l,n,s)),nm(e,i,!1),n&&e.patches_&&Wl("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function r2(e,t,n,r,i,o,s){if(hc(i)){const a=o&&t&&t.type_!==3&&!Vb(t.assigned_,r)?o.concat(r):void 0,l=tm(e,i,a);if(yI(n,r,l),hc(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Hl(i)&&!Cy(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tm(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&nm(e,i)}}function nm(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&C1(t,n)}function E7(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:vI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=j1;n&&(i=[r],o=zf);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var j1={get(e,t){if(t===Di)return e;const n=gl(e);if(!Vb(n,t))return k7(e,n,t);const r=n[t];return e.finalized_||!Hl(r)?r:r===b0(e.base_,t)?(w0(e),e.copy_[t]=Xb(r,e)):r},has(e,t){return t in gl(e)},ownKeys(e){return Reflect.ownKeys(gl(e))},set(e,t,n){const r=xI(gl(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=b0(gl(e),t),o=i==null?void 0:i[Di];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(x7(n,i)&&(n!==void 0||Vb(e.base_,t)))return!0;w0(e),Yb(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return b0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,w0(e),Yb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=gl(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){vo(11)},getPrototypeOf(e){return fc(e.base_)},setPrototypeOf(){vo(12)}},zf={};em(j1,(e,t)=>{zf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zf.deleteProperty=function(e,t){return zf.set.call(this,e,t,void 0)};zf.set=function(e,t,n){return j1.set.call(this,e[0],t,n,e[0])};function b0(e,t){const n=e[Di];return(n?gl(n):e)[t]}function k7(e,t,n){var i;const r=xI(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function xI(e,t){if(!(t in e))return;let n=fc(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=fc(n)}}function Yb(e){e.modified_||(e.modified_=!0,e.parent_&&Yb(e.parent_))}function w0(e){e.copy_||(e.copy_=qb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var C7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&vo(6),r!==void 0&&typeof r!="function"&&vo(7);let i;if(Hl(t)){const o=t2(this),s=Xb(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?Kb(o):Gb(o)}return e2(o,r),n2(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===gI&&(i=void 0),this.autoFreeze_&&C1(i,!0),r){const o=[],s=[];Wl("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else vo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Hl(e)||vo(8),hc(e)&&(e=j7(e));const t=t2(this),n=Xb(e,void 0);return n[Di].isManual_=!0,Gb(t),n}finishDraft(e,t){const n=e&&e[Di];(!n||!n.isManual_)&&vo(9);const{scope_:r}=n;return e2(r,t),n2(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Wl("Patches").applyPatches_;return hc(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Xb(e,t){const n=Ey(e)?Wl("MapSet").proxyMap_(e,t):ky(e)?Wl("MapSet").proxySet_(e,t):E7(e,t);return(t?t.scope_:vI()).drafts_.push(n),n}function j7(e){return hc(e)||vo(10,e),bI(e)}function bI(e){if(!Hl(e)||Cy(e))return e;const t=e[Di];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=qb(e,t.scope_.immer_.useStrictShallowCopy_)}else n=qb(e,!0);return em(n,(r,i)=>{yI(n,r,bI(i))}),t&&(t.finalized_=!1),n}var Li=new C7,pn=Li.produce;Li.produceWithPatches.bind(Li);Li.setAutoFreeze.bind(Li);Li.setUseStrictShallowCopy.bind(Li);Li.applyPatches.bind(Li);Li.createDraft.bind(Li);Li.finishDraft.bind(Li);const A7={process:(e,t)=>{const n=e.getCharacter(),r=e.getParam(t.id,"input"),i=pn(n,o=>k1(o,"data/".concat(t.data.path),r));return e.setCharacter(i),e.getConnectingNodeForHandle(t,"next","output")}},N7={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),o=n.findIndex(s=>s.name===r.name)===-1?n.concat([r]):n.concat([]);return e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},R7={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"name"),i=n.findIndex(s=>s.name===r);let o=n.concat();return i!==-1&&o.splice(i,1),e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},T7={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),i=e.getParam(t.id,"name"),o=n.findIndex(a=>a.name===i);let s=n.concat();return o!==-1&&(s[o]=r),e.setParam(t.id,"output",s),e.getConnectingNodeForHandle(t,"next","output")}},I7={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0&&e.getParam(t.id,"filtered?")){const s=[...n.get("newArray"),i[r-1]];n.set("newArray",s),e.setParam(t.id,"filterd",s)}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},P7={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0){const o=e.getParam(t.id,"newitem");if(o){const s=[...n.get("newArray"),o];n.set("newArray",s),e.setParam(t.id,"filterd",s)}}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},O7={process:(e,t)=>{const n=e.getParam(t.id,"base")||[],r=e.getParam(t.id,"name")||"",i=n.findIndex(o=>o.name===r);return e.setParam(t.id,"output",n[i]),e.getConnectingNodeForHandle(t,"next","output")}},$7={process:(e,t)=>{const n=e.getParam(t.id,"input");for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"next","output")}},M7={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},D7={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n.includes(r)),e.getConnectingNodeForHandle(t,"next","output")}},L7={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},F7={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},B7={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",n.toString()),e.getConnectingNodeForHandle(t,"next","output")}};function dr(e=[],t){const n=[];return n.push({id:"1",type:"entry",data:{params:e},position:{x:100,y:100}}),t&&n.push({id:"2",type:"output",data:{param:t},position:{x:250,y:100}}),n}function _o(e=[],t=[],n){const r=e.findIndex(o=>o.type==="entry");if(r===-1||(e[r].data.params=t,!n))return e;const i=e.findIndex(o=>o.type==="output");return i===-1||(e[i].data.param=n),e}function z7(e){switch(e){case"get_system_data":return{path:"",type:"unknown"};case"get_page_data":return{path:"",type:"unknown"};case"get_character_data":return{path:"",type:"unknown"};case"set_system_data":return{path:"",type:"unknown"};case"set_page_data":return{path:"",type:"unknown"};case"set_character_data":return{path:"",type:"unknown"};case"open_modal":return{type:"edit_object",title:"edit object",inputType:""};case"create_data_from_type":return{spreadType:{name:"",properties:[]}};case"spread_object":return{inputType:"unknown"};case"add_to_array":return{inputType:"unknown"};case"array_remove":return{inputType:"unknown"};case"array_update":return{inputType:"unknown"};case"array_get":return{inputType:"unknown"};case"filter":return{inputType:"unknown"};case"map":return{inputType:"unknown"};case"string_new":return{value:""};case"string_includes":return{string1:"",string2:""};case"string_compare":return{string1:"",string2:""};case"string_concat":return{string1:"",string2:""};case"number_to_string":return{number:0};case"new_number":return{value:0};case"add":return{number1:0,number2:0};case"subtract":return{number1:0,number2:0};case"divide":return{number1:0,number2:0};case"multiply":return{number1:0,number2:0};case"floor":return{number:0};case"new_enum":return{value:""};case"enum_compare":return{input:""};case"boolean_new":return{value:!1};case"boolean_branch":return{boolean:!1};case"boolean_inverse":return{};case"blueprint_run":return{params:[],returnType:"none",inputs:{},outputs:{}};default:return null}}function pc(e,t){if(typeof t=="string")return Hf(e,{type:t,isArray:!1,options:[],isOutputAnArray:!1,inputs:[],outputType:"none"});let n={_type:{...t}};for(let r=0;r<t.properties.length;r++){const i=t.properties[r];let o=i.typeData;n[i.key]=Hf(e,o)}return n}function Hf(e,t){if(t.isArray)return[];switch(t.type){case"string":return"Lorem Ipsum";case"number":return 1;case"boolean":return!1;case"enum":return t.options?[t.options[0]]:["undefined options"];case"blueprint":return{nodes:dr(t.inputs,t.outputType!=="none"?{name:"output",type:t.outputType||"none",isArray:t.isOutputAnArray||!1}:void 0),edges:[]};default:const n=e.find(r=>r.name===t.type);return n?pc(e,n):"Type ".concat(t.type," not found.")}}const H7={process:(e,t)=>{const n=t.data.spreadType;let r={_type:n};for(let i=0;i<n.properties.length;i++){const o=n.properties[i];let s=e.getParam(t.id,o.key);s===void 0&&(s=Hf(e.getSystem().types,o.typeData)),r[o.key]=s}return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},W7={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},U7={process:(e,t)=>{const n=e.getParam(t.id,"enum1"),r=e.getParam(t.id,"enum2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},V7={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},q7={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n/r),e.getConnectingNodeForHandle(t,"next","output")}},K7={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n-r),e.getConnectingNodeForHandle(t,"next","output")}},G7={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",Math.floor(n)),e.getConnectingNodeForHandle(t,"next","output")}},Y7={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},X7={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n*r),e.getConnectingNodeForHandle(t,"next","output")}},J7={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},Q7={process:(e,t)=>e.getParam(t.id,"input")?e.getConnectingNodeForHandle(t,"true","output"):e.getConnectingNodeForHandle(t,"false","output")},Z7={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",!n),e.getConnectingNodeForHandle(t,"next","output")}},Bc=()=>c.jsx("div",{className:"h-px w-full bg-neutral-200 dark:bg-neutral-700"}),A1=({id:e,label:t,value:n,onChange:r})=>c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-fantasy-text",children:t}),c.jsx("textarea",{id:e,rows:4,value:n,onChange:i=>r(i.target.value),className:"block p-2.5 w-full text-sm placeholder-fantasy-text-muted text-fantasy-text bg-fantasy-dark rounded-lg border border-fantasy-border focus:ring-fantasy-accent focus:border-fantasy-accent"})]}),tr=({id:e,label:t,checked:n,onChange:r})=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{id:e,type:"checkbox",checked:n,onChange:()=>r(!n),className:"w-4 h-4 rounded focus:ring-2 focus:ring-fantasy-accent ring-offset-fantasy-text-muted border-fantasy-border"}),c.jsx("label",{htmlFor:e,className:"ms-2 text-sm font-medium text-fantasy-text",children:t})]});function ir(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ir(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var e9={value:()=>{}};function jy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new lg(n)}function lg(e){this._=e}function t9(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}lg.prototype=jy.prototype={constructor:lg,on:function(e,t){var n=this._,r=t9(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=n9(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=i2(n[i],e.name,t);else if(t==null)for(i in n)n[i]=i2(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lg(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function n9(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function i2(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=e9,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jb="http://www.w3.org/1999/xhtml";const o2={svg:"http://www.w3.org/2000/svg",xhtml:Jb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ay(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),o2.hasOwnProperty(t)?{space:o2[t],local:e}:e}function r9(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Jb&&t.documentElement.namespaceURI===Jb?t.createElement(e):t.createElementNS(n,e)}}function i9(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wI(e){var t=Ay(e);return(t.local?i9:r9)(t)}function o9(){}function N1(e){return e==null?o9:function(){return this.querySelector(e)}}function s9(e){typeof e!="function"&&(e=N1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,d=0;d<s;++d)(l=o[d])&&(u=e.call(l,l.__data__,d,o))&&("__data__"in l&&(u.__data__=l.__data__),a[d]=u);return new Fi(r,this._parents)}function a9(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function l9(){return[]}function _I(e){return e==null?l9:function(){return this.querySelectorAll(e)}}function u9(e){return function(){return a9(e.apply(this,arguments))}}function c9(e){typeof e=="function"?e=u9(e):e=_I(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new Fi(r,i)}function SI(e){return function(){return this.matches(e)}}function EI(e){return function(t){return t.matches(e)}}var d9=Array.prototype.find;function f9(e){return function(){return d9.call(this.children,e)}}function h9(){return this.firstElementChild}function p9(e){return this.select(e==null?h9:f9(typeof e=="function"?e:EI(e)))}var g9=Array.prototype.filter;function m9(){return Array.from(this.children)}function y9(e){return function(){return g9.call(this.children,e)}}function v9(e){return this.selectAll(e==null?m9:y9(typeof e=="function"?e:EI(e)))}function x9(e){typeof e!="function"&&(e=SI(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Fi(r,this._parents)}function kI(e){return new Array(e.length)}function b9(){return new Fi(this._enter||this._groups.map(kI),this._parents)}function rm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}rm.prototype={constructor:rm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function w9(e){return function(){return e}}function _9(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new rm(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function S9(e,t,n,r,i,o,s){var a,l,u=new Map,d=t.length,f=o.length,h=new Array(d),p;for(a=0;a<d;++a)(l=t[a])&&(h[a]=p=s.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<f;++a)p=s.call(e,o[a],a,o)+"",(l=u.get(p))?(r[a]=l,l.__data__=o[a],u.delete(p)):n[a]=new rm(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function E9(e){return e.__data__}function k9(e,t){if(!arguments.length)return Array.from(this,E9);var n=t?S9:_9,r=this._parents,i=this._groups;typeof e!="function"&&(e=w9(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var d=r[u],f=i[u],h=f.length,p=C9(e.call(d,d&&d.__data__,u,r)),v=p.length,y=a[u]=new Array(v),w=s[u]=new Array(v),x=l[u]=new Array(h);n(d,f,y,w,x,p,t);for(var b=0,m=0,S,E;b<v;++b)if(S=y[b]){for(b>=m&&(m=b+1);!(E=w[m])&&++m<v;);S._next=E||null}}return s=new Fi(s,r),s._enter=a,s._exit=l,s}function C9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function j9(){return new Fi(this._exit||this._groups.map(kI),this._parents)}function A9(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function N9(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],d=r[l],f=u.length,h=a[l]=new Array(f),p,v=0;v<f;++v)(p=u[v]||d[v])&&(h[v]=p);for(;l<i;++l)a[l]=n[l];return new Fi(a,this._parents)}function R9(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function T9(e){e||(e=I9);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,d=0;d<a;++d)(u=s[d])&&(l[d]=u);l.sort(t)}return new Fi(i,this._parents).order()}function I9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function P9(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function O9(){return Array.from(this)}function $9(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function M9(){let e=0;for(const t of this)++e;return e}function D9(){return!this.node()}function L9(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function F9(e){return function(){this.removeAttribute(e)}}function B9(e){return function(){this.removeAttributeNS(e.space,e.local)}}function z9(e,t){return function(){this.setAttribute(e,t)}}function H9(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function W9(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function U9(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function V9(e,t){var n=Ay(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?B9:F9:typeof t=="function"?n.local?U9:W9:n.local?H9:z9)(n,t))}function CI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function q9(e){return function(){this.style.removeProperty(e)}}function K9(e,t,n){return function(){this.style.setProperty(e,t,n)}}function G9(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Y9(e,t,n){return arguments.length>1?this.each((t==null?q9:typeof t=="function"?G9:K9)(e,t,n==null?"":n)):gc(this.node(),e)}function gc(e,t){return e.style.getPropertyValue(t)||CI(e).getComputedStyle(e,null).getPropertyValue(t)}function X9(e){return function(){delete this[e]}}function J9(e,t){return function(){this[e]=t}}function Q9(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Z9(e,t){return arguments.length>1?this.each((t==null?X9:typeof t=="function"?Q9:J9)(e,t)):this.node()[e]}function jI(e){return e.trim().split(/^|\s+/)}function R1(e){return e.classList||new AI(e)}function AI(e){this._node=e,this._names=jI(e.getAttribute("class")||"")}AI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function NI(e,t){for(var n=R1(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function RI(e,t){for(var n=R1(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ez(e){return function(){NI(this,e)}}function tz(e){return function(){RI(this,e)}}function nz(e,t){return function(){(t.apply(this,arguments)?NI:RI)(this,e)}}function rz(e,t){var n=jI(e+"");if(arguments.length<2){for(var r=R1(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?nz:t?ez:tz)(n,t))}function iz(){this.textContent=""}function oz(e){return function(){this.textContent=e}}function sz(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function az(e){return arguments.length?this.each(e==null?iz:(typeof e=="function"?sz:oz)(e)):this.node().textContent}function lz(){this.innerHTML=""}function uz(e){return function(){this.innerHTML=e}}function cz(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function dz(e){return arguments.length?this.each(e==null?lz:(typeof e=="function"?cz:uz)(e)):this.node().innerHTML}function fz(){this.nextSibling&&this.parentNode.appendChild(this)}function hz(){return this.each(fz)}function pz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gz(){return this.each(pz)}function mz(e){var t=typeof e=="function"?e:wI(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yz(){return null}function vz(e,t){var n=typeof e=="function"?e:wI(e),r=t==null?yz:typeof t=="function"?t:N1(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xz(){var e=this.parentNode;e&&e.removeChild(this)}function bz(){return this.each(xz)}function wz(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _z(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sz(e){return this.select(e?_z:wz)}function Ez(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kz(e){return function(t){e.call(this,t,this.__data__)}}function Cz(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jz(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Az(e,t,n){return function(){var r=this.__on,i,o=kz(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Nz(e,t,n){var r=Cz(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,d;l<u;++l)for(i=0,d=a[l];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?Az:jz,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function TI(e,t,n){var r=CI(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Rz(e,t){return function(){return TI(this,e,t)}}function Tz(e,t){return function(){return TI(this,e,t.apply(this,arguments))}}function Iz(e,t){return this.each((typeof t=="function"?Tz:Rz)(e,t))}function*Pz(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var II=[null];function Fi(e,t){this._groups=e,this._parents=t}function wh(){return new Fi([[document.documentElement]],II)}function Oz(){return this}Fi.prototype=wh.prototype={constructor:Fi,select:s9,selectAll:c9,selectChild:p9,selectChildren:v9,filter:x9,data:k9,enter:b9,exit:j9,join:A9,merge:N9,selection:Oz,order:R9,sort:T9,call:P9,nodes:O9,node:$9,size:M9,empty:D9,each:L9,attr:V9,style:Y9,property:Z9,classed:rz,text:az,html:dz,raise:hz,lower:gz,append:mz,insert:vz,remove:bz,clone:Sz,datum:Ez,on:Nz,dispatch:Iz,[Symbol.iterator]:Pz};function ji(e){return typeof e=="string"?new Fi([[document.querySelector(e)]],[document.documentElement]):new Fi([[e]],II)}function $z(e){let t;for(;t=e.sourceEvent;)e=t;return e}function mo(e,t){if(e=$z(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Mz={passive:!1},Wf={capture:!0,passive:!1};function _0(e){e.stopImmediatePropagation()}function Yu(e){e.preventDefault(),e.stopImmediatePropagation()}function PI(e){var t=e.document.documentElement,n=ji(e).on("dragstart.drag",Yu,Wf);"onselectstart"in t?n.on("selectstart.drag",Yu,Wf):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function OI(e,t){var n=e.document.documentElement,r=ji(e).on("dragstart.drag",null);t&&(r.on("click.drag",Yu,Wf),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const mp=e=>()=>e;function Qb(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Qb.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Dz(e){return!e.ctrlKey&&!e.button}function Lz(){return this.parentNode}function Fz(e,t){return t==null?{x:e.x,y:e.y}:t}function Bz(){return navigator.maxTouchPoints||"ontouchstart"in this}function $I(){var e=Dz,t=Lz,n=Fz,r=Bz,i={},o=jy("start","drag","end"),s=0,a,l,u,d,f=0;function h(S){S.on("mousedown.drag",p).filter(r).on("touchstart.drag",w).on("touchmove.drag",x,Mz).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,E){if(!(d||!e.call(this,S,E))){var k=m(this,t.call(this,S,E),S,E,"mouse");k&&(ji(S.view).on("mousemove.drag",v,Wf).on("mouseup.drag",y,Wf),PI(S.view),_0(S),u=!1,a=S.clientX,l=S.clientY,k("start",S))}}function v(S){if(Yu(S),!u){var E=S.clientX-a,k=S.clientY-l;u=E*E+k*k>f}i.mouse("drag",S)}function y(S){ji(S.view).on("mousemove.drag mouseup.drag",null),OI(S.view,u),Yu(S),i.mouse("end",S)}function w(S,E){if(e.call(this,S,E)){var k=S.changedTouches,N=t.call(this,S,E),I=k.length,z,O;for(z=0;z<I;++z)(O=m(this,N,S,E,k[z].identifier,k[z]))&&(_0(S),O("start",S,k[z]))}}function x(S){var E=S.changedTouches,k=E.length,N,I;for(N=0;N<k;++N)(I=i[E[N].identifier])&&(Yu(S),I("drag",S,E[N]))}function b(S){var E=S.changedTouches,k=E.length,N,I;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),N=0;N<k;++N)(I=i[E[N].identifier])&&(_0(S),I("end",S,E[N]))}function m(S,E,k,N,I,z){var O=o.copy(),M=mo(z||k,E),K,D,L;if((L=n.call(S,new Qb("beforestart",{sourceEvent:k,target:h,identifier:I,active:s,x:M[0],y:M[1],dx:0,dy:0,dispatch:O}),N))!=null)return K=L.x-M[0]||0,D=L.y-M[1]||0,function q(G,te,B){var H=M,$;switch(G){case"start":i[I]=q,$=s++;break;case"end":delete i[I],--s;case"drag":M=mo(B||te,E),$=s;break}O.call(G,S,new Qb(G,{sourceEvent:te,subject:L,target:h,identifier:I,active:$,x:M[0]+K,y:M[1]+D,dx:M[0]-H[0],dy:M[1]-H[1],dispatch:O}),N)}}return h.filter=function(S){return arguments.length?(e=typeof S=="function"?S:mp(!!S),h):e},h.container=function(S){return arguments.length?(t=typeof S=="function"?S:mp(S),h):t},h.subject=function(S){return arguments.length?(n=typeof S=="function"?S:mp(S),h):n},h.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:mp(!!S),h):r},h.on=function(){var S=o.on.apply(o,arguments);return S===o?h:S},h.clickDistance=function(S){return arguments.length?(f=(S=+S)*S,h):Math.sqrt(f)},h}function T1(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function MI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _h(){}var Uf=.7,im=1/Uf,Xu="\\s*([+-]?\\d+)\\s*",Vf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zz=/^#([0-9a-f]{3,8})$/,Hz=new RegExp("^rgb\\(".concat(Xu,",").concat(Xu,",").concat(Xu,"\\)$")),Wz=new RegExp("^rgb\\(".concat(rs,",").concat(rs,",").concat(rs,"\\)$")),Uz=new RegExp("^rgba\\(".concat(Xu,",").concat(Xu,",").concat(Xu,",").concat(Vf,"\\)$")),Vz=new RegExp("^rgba\\(".concat(rs,",").concat(rs,",").concat(rs,",").concat(Vf,"\\)$")),qz=new RegExp("^hsl\\(".concat(Vf,",").concat(rs,",").concat(rs,"\\)$")),Kz=new RegExp("^hsla\\(".concat(Vf,",").concat(rs,",").concat(rs,",").concat(Vf,"\\)$")),s2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};T1(_h,qf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:a2,formatHex:a2,formatHex8:Gz,formatHsl:Yz,formatRgb:l2,toString:l2});function a2(){return this.rgb().formatHex()}function Gz(){return this.rgb().formatHex8()}function Yz(){return DI(this).formatHsl()}function l2(){return this.rgb().formatRgb()}function qf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zz.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?u2(t):n===3?new hi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Hz.exec(e))?new hi(t[1],t[2],t[3],1):(t=Wz.exec(e))?new hi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Uz.exec(e))?yp(t[1],t[2],t[3],t[4]):(t=Vz.exec(e))?yp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qz.exec(e))?f2(t[1],t[2]/100,t[3]/100,1):(t=Kz.exec(e))?f2(t[1],t[2]/100,t[3]/100,t[4]):s2.hasOwnProperty(e)?u2(s2[e]):e==="transparent"?new hi(NaN,NaN,NaN,0):null}function u2(e){return new hi(e>>16&255,e>>8&255,e&255,1)}function yp(e,t,n,r){return r<=0&&(e=t=n=NaN),new hi(e,t,n,r)}function Xz(e){return e instanceof _h||(e=qf(e)),e?(e=e.rgb(),new hi(e.r,e.g,e.b,e.opacity)):new hi}function Zb(e,t,n,r){return arguments.length===1?Xz(e):new hi(e,t,n,r==null?1:r)}function hi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}T1(hi,Zb,MI(_h,{brighter(e){return e=e==null?im:Math.pow(im,e),new hi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Uf:Math.pow(Uf,e),new hi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hi(Tl(this.r),Tl(this.g),Tl(this.b),om(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:c2,formatHex:c2,formatHex8:Jz,formatRgb:d2,toString:d2}));function c2(){return"#".concat(El(this.r)).concat(El(this.g)).concat(El(this.b))}function Jz(){return"#".concat(El(this.r)).concat(El(this.g)).concat(El(this.b)).concat(El((isNaN(this.opacity)?1:this.opacity)*255))}function d2(){const e=om(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(Tl(this.r),", ").concat(Tl(this.g),", ").concat(Tl(this.b)).concat(e===1?")":", ".concat(e,")"))}function om(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function El(e){return e=Tl(e),(e<16?"0":"")+e.toString(16)}function f2(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xo(e,t,n,r)}function DI(e){if(e instanceof xo)return new xo(e.h,e.s,e.l,e.opacity);if(e instanceof _h||(e=qf(e)),!e)return new xo;if(e instanceof xo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new xo(s,a,l,e.opacity)}function Qz(e,t,n,r){return arguments.length===1?DI(e):new xo(e,t,n,r==null?1:r)}function xo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}T1(xo,Qz,MI(_h,{brighter(e){return e=e==null?im:Math.pow(im,e),new xo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Uf:Math.pow(Uf,e),new xo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new hi(S0(e>=240?e-240:e+120,i,r),S0(e,i,r),S0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new xo(h2(this.h),vp(this.s),vp(this.l),om(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=om(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(h2(this.h),", ").concat(vp(this.s)*100,"%, ").concat(vp(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function h2(e){return e=(e||0)%360,e<0?e+360:e}function vp(e){return Math.max(0,Math.min(1,e||0))}function S0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const LI=e=>()=>e;function Zz(e,t){return function(n){return e+n*t}}function eH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function tH(e){return(e=+e)==1?FI:function(t,n){return n-t?eH(t,n,e):LI(isNaN(t)?n:t)}}function FI(e,t){var n=t-e;return n?Zz(e,n):LI(isNaN(e)?t:e)}const p2=function e(t){var n=tH(t);function r(i,o){var s=n((i=Zb(i)).r,(o=Zb(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=FI(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function xa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ew=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,E0=new RegExp(ew.source,"g");function nH(e){return function(){return e}}function rH(e){return function(t){return e(t)+""}}function iH(e,t){var n=ew.lastIndex=E0.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=ew.exec(e))&&(i=E0.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:xa(r,i)})),n=E0.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?rH(l[0].x):nH(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)a[(f=l[d]).i]=f.x(u);return a.join("")})}var g2=180/Math.PI,tw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function BI(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*g2,skewX:Math.atan(l)*g2,scaleX:s,scaleY:a}}var xp;function oH(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tw:BI(t.a,t.b,t.c,t.d,t.e,t.f)}function sH(e){return e==null||(xp||(xp=document.createElementNS("http://www.w3.org/2000/svg","g")),xp.setAttribute("transform",e),!(e=xp.transform.baseVal.consolidate()))?tw:(e=e.matrix,BI(e.a,e.b,e.c,e.d,e.e,e.f))}function zI(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,d,f,h,p,v){if(u!==f||d!==h){var y=p.push("translate(",null,t,null,n);v.push({i:y-4,x:xa(u,f)},{i:y-2,x:xa(d,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function s(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:xa(u,d)})):d&&f.push(i(f)+"rotate("+d+r)}function a(u,d,f,h){u!==d?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:xa(u,d)}):d&&f.push(i(f)+"skewX("+d+r)}function l(u,d,f,h,p,v){if(u!==f||d!==h){var y=p.push(i(p)+"scale(",null,",",null,")");v.push({i:y-4,x:xa(u,f)},{i:y-2,x:xa(d,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),o(u.translateX,u.translateY,d.translateX,d.translateY,f,h),s(u.rotate,d.rotate,f,h),a(u.skewX,d.skewX,f,h),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var v=-1,y=h.length,w;++v<y;)f[(w=h[v]).i]=w.x(p);return f.join("")}}}var aH=zI(oH,"px, ","px)","deg)"),lH=zI(sH,", ",")",")"),uH=1e-12;function m2(e){return((e=Math.exp(e))+1/e)/2}function cH(e){return((e=Math.exp(e))-1/e)/2}function dH(e){return((e=Math.exp(2*e))-1)/(e+1)}const fH=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],d=s[0],f=s[1],h=s[2],p=d-a,v=f-l,y=p*p+v*v,w,x;if(y<uH)x=Math.log(h/u)/t,w=function(N){return[a+N*p,l+N*v,u*Math.exp(t*N*x)]};else{var b=Math.sqrt(y),m=(h*h-u*u+r*y)/(2*u*n*b),S=(h*h-u*u-r*y)/(2*h*n*b),E=Math.log(Math.sqrt(m*m+1)-m),k=Math.log(Math.sqrt(S*S+1)-S);x=(k-E)/t,w=function(N){var I=N*x,z=m2(E),O=u/(n*b)*(z*dH(t*I+E)-cH(E));return[a+O*p,l+O*v,u*z/m2(t*I+E)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var mc=0,Pd=0,gd=0,HI=1e3,sm,Od,am=0,Ul=0,Ny=0,Kf=typeof performance=="object"&&performance.now?performance:Date,WI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function I1(){return Ul||(WI(hH),Ul=Kf.now()+Ny)}function hH(){Ul=0}function lm(){this._call=this._time=this._next=null}lm.prototype=UI.prototype={constructor:lm,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?I1():+n)+(t==null?0:+t),!this._next&&Od!==this&&(Od?Od._next=this:sm=this,Od=this),this._call=e,this._time=n,nw()},stop:function(){this._call&&(this._call=null,this._time=1/0,nw())}};function UI(e,t,n){var r=new lm;return r.restart(e,t,n),r}function pH(){I1(),++mc;for(var e=sm,t;e;)(t=Ul-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mc}function y2(){Ul=(am=Kf.now())+Ny,mc=Pd=0;try{pH()}finally{mc=0,mH(),Ul=0}}function gH(){var e=Kf.now(),t=e-am;t>HI&&(Ny-=t,am=e)}function mH(){for(var e,t=sm,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:sm=n);Od=e,nw(r)}function nw(e){if(!mc){Pd&&(Pd=clearTimeout(Pd));var t=e-Ul;t>24?(e<1/0&&(Pd=setTimeout(y2,e-Kf.now()-Ny)),gd&&(gd=clearInterval(gd))):(gd||(am=Kf.now(),gd=setInterval(gH,HI)),mc=1,WI(y2))}}function v2(e,t,n){var r=new lm;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var yH=jy("start","end","cancel","interrupt"),vH=[],VI=0,x2=1,rw=2,ug=3,b2=4,iw=5,cg=6;function Ry(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;xH(e,n,{name:t,index:r,group:i,on:yH,tween:vH,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:VI})}function P1(e,t){var n=$o(e,t);if(n.state>VI)throw new Error("too late; already scheduled");return n}function gs(e,t){var n=$o(e,t);if(n.state>ug)throw new Error("too late; already running");return n}function $o(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function xH(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=UI(o,0,n.time);function o(u){n.state=x2,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,f,h,p;if(n.state!==x2)return l();for(d in r)if(p=r[d],p.name===n.name){if(p.state===ug)return v2(s);p.state===b2?(p.state=cg,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[d]):+d<t&&(p.state=cg,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[d])}if(v2(function(){n.state===ug&&(n.state=b2,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=rw,n.on.call("start",e,e.__data__,n.index,n.group),n.state===rw){for(n.state=ug,i=new Array(h=n.tween.length),d=0,f=-1;d<h;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=iw,1),f=-1,h=i.length;++f<h;)i[f].call(e,d);n.state===iw&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=cg,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function dg(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>rw&&r.state<iw,r.state=cg,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function bH(e){return this.each(function(){dg(this,e)})}function wH(e,t){var n,r;return function(){var i=gs(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function _H(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=gs(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function SH(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=$o(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?wH:_H)(n,e,t))}function O1(e,t,n){var r=e._id;return e.each(function(){var i=gs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return $o(i,r).value[t]}}function qI(e,t){var n;return(typeof t=="number"?xa:t instanceof qf?p2:(n=qf(t))?(t=n,p2):iH)(e,t)}function EH(e){return function(){this.removeAttribute(e)}}function kH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function CH(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function jH(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function AH(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function NH(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function RH(e,t){var n=Ay(e),r=n==="transform"?lH:qI;return this.attrTween(e,typeof t=="function"?(n.local?NH:AH)(n,r,O1(this,"attr."+e,t)):t==null?(n.local?kH:EH)(n):(n.local?jH:CH)(n,r,t))}function TH(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IH(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function PH(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&IH(e,o)),n}return i._value=t,i}function OH(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&TH(e,o)),n}return i._value=t,i}function $H(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ay(e);return this.tween(n,(r.local?PH:OH)(r,t))}function MH(e,t){return function(){P1(this,e).delay=+t.apply(this,arguments)}}function DH(e,t){return t=+t,function(){P1(this,e).delay=t}}function LH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?MH:DH)(t,e)):$o(this.node(),t).delay}function FH(e,t){return function(){gs(this,e).duration=+t.apply(this,arguments)}}function BH(e,t){return t=+t,function(){gs(this,e).duration=t}}function zH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?FH:BH)(t,e)):$o(this.node(),t).duration}function HH(e,t){if(typeof t!="function")throw new Error;return function(){gs(this,e).ease=t}}function WH(e){var t=this._id;return arguments.length?this.each(HH(t,e)):$o(this.node(),t).ease}function UH(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;gs(this,e).ease=n}}function VH(e){if(typeof e!="function")throw new Error;return this.each(UH(this._id,e))}function qH(e){typeof e!="function"&&(e=SI(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Xs(r,this._parents,this._name,this._id)}function KH(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],d=l.length,f=s[a]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;a<r;++a)s[a]=t[a];return new Xs(s,this._parents,this._name,this._id)}function GH(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function YH(e,t,n){var r,i,o=GH(t)?P1:gs;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function XH(e,t){var n=this._id;return arguments.length<2?$o(this.node(),n).on.on(e):this.each(YH(n,e,t))}function JH(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function QH(){return this.on("end.remove",JH(this._id))}function ZH(e){var t=this._name,n=this._id;typeof e!="function"&&(e=N1(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),d,f,h=0;h<l;++h)(d=a[h])&&(f=e.call(d,d.__data__,h,a))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,Ry(u[h],t,n,h,u,$o(d,n)));return new Xs(o,this._parents,t,n)}function eW(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_I(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,d,f=0;f<u;++f)if(d=l[f]){for(var h=e.call(d,d.__data__,f,l),p,v=$o(d,n),y=0,w=h.length;y<w;++y)(p=h[y])&&Ry(p,t,n,y,h,v);o.push(h),s.push(d)}return new Xs(o,s,t,n)}var tW=wh.prototype.constructor;function nW(){return new tW(this._groups,this._parents)}function rW(e,t){var n,r,i;return function(){var o=gc(this,e),s=(this.style.removeProperty(e),gc(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function KI(e){return function(){this.style.removeProperty(e)}}function iW(e,t,n){var r,i=n+"",o;return function(){var s=gc(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function oW(e,t,n){var r,i,o;return function(){var s=gc(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),gc(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function sW(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=gs(this,e),u=l.on,d=l.value[o]==null?a||(a=KI(t)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(s,i=d),l.on=r}}function aW(e,t,n){var r=(e+="")=="transform"?aH:qI;return t==null?this.styleTween(e,rW(e,r)).on("end.style."+e,KI(e)):typeof t=="function"?this.styleTween(e,oW(e,r,O1(this,"style."+e,t))).each(sW(this._id,e)):this.styleTween(e,iW(e,r,t),n).on("end.style."+e,null)}function lW(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function uW(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&lW(e,s,n)),r}return o._value=t,o}function cW(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,uW(e,t,n==null?"":n))}function dW(e){return function(){this.textContent=e}}function fW(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function hW(e){return this.tween("text",typeof e=="function"?fW(O1(this,"text",e)):dW(e==null?"":e+""))}function pW(e){return function(t){this.textContent=e.call(this,t)}}function gW(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&pW(i)),t}return r._value=e,r}function mW(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,gW(e))}function yW(){for(var e=this._name,t=this._id,n=GI(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var d=$o(l,t);Ry(l,e,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Xs(r,this._parents,e,n)}function vW(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=gs(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var xW=0;function Xs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function GI(){return++xW}var _s=wh.prototype;Xs.prototype={constructor:Xs,select:ZH,selectAll:eW,selectChild:_s.selectChild,selectChildren:_s.selectChildren,filter:qH,merge:KH,selection:nW,transition:yW,call:_s.call,nodes:_s.nodes,node:_s.node,size:_s.size,empty:_s.empty,each:_s.each,on:XH,attr:RH,attrTween:$H,style:aW,styleTween:cW,text:hW,textTween:mW,remove:QH,tween:SH,delay:LH,duration:zH,ease:WH,easeVarying:VH,end:vW,[Symbol.iterator]:_s[Symbol.iterator]};function bW(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wW={time:null,delay:0,duration:250,ease:bW};function _W(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}function SW(e){var t,n;e instanceof Xs?(t=e._id,e=e._name):(t=GI(),(n=wW).time=I1(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Ry(l,e,t,u,s,n||_W(l,t));return new Xs(r,this._parents,e,t)}wh.prototype.interrupt=bH;wh.prototype.transition=SW;const bp=e=>()=>e;function EW(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ms(e,t,n){this.k=e,this.x=t,this.y=n}Ms.prototype={constructor:Ms,scale:function(e){return e===1?this:new Ms(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ms(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ty=new Ms(1,0,0);YI.prototype=Ms.prototype;function YI(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ty;return e.__zoom}function k0(e){e.stopImmediatePropagation()}function md(e){e.preventDefault(),e.stopImmediatePropagation()}function kW(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function CW(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function w2(){return this.__zoom||Ty}function jW(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function AW(){return navigator.maxTouchPoints||"ontouchstart"in this}function NW(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function XI(){var e=kW,t=CW,n=NW,r=jW,i=AW,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=fH,u=jy("start","zoom","end"),d,f,h,p=500,v=150,y=0,w=10;function x(L){L.property("__zoom",w2).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(L,q,G,te){var B=L.selection?L.selection():L;B.property("__zoom",w2),L!==B?E(L,q,G,te):B.interrupt().each(function(){k(this,arguments).event(te).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},x.scaleBy=function(L,q,G,te){x.scaleTo(L,function(){var B=this.__zoom.k,H=typeof q=="function"?q.apply(this,arguments):q;return B*H},G,te)},x.scaleTo=function(L,q,G,te){x.transform(L,function(){var B=t.apply(this,arguments),H=this.__zoom,$=G==null?S(B):typeof G=="function"?G.apply(this,arguments):G,Y=H.invert($),se=typeof q=="function"?q.apply(this,arguments):q;return n(m(b(H,se),$,Y),B,s)},G,te)},x.translateBy=function(L,q,G,te){x.transform(L,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof G=="function"?G.apply(this,arguments):G),t.apply(this,arguments),s)},null,te)},x.translateTo=function(L,q,G,te,B){x.transform(L,function(){var H=t.apply(this,arguments),$=this.__zoom,Y=te==null?S(H):typeof te=="function"?te.apply(this,arguments):te;return n(Ty.translate(Y[0],Y[1]).scale($.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof G=="function"?-G.apply(this,arguments):-G),H,s)},te,B)};function b(L,q){return q=Math.max(o[0],Math.min(o[1],q)),q===L.k?L:new Ms(q,L.x,L.y)}function m(L,q,G){var te=q[0]-G[0]*L.k,B=q[1]-G[1]*L.k;return te===L.x&&B===L.y?L:new Ms(L.k,te,B)}function S(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function E(L,q,G,te){L.on("start.zoom",function(){k(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(te).end()}).tween("zoom",function(){var B=this,H=arguments,$=k(B,H).event(te),Y=t.apply(B,H),se=G==null?S(Y):typeof G=="function"?G.apply(B,H):G,ue=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),Ce=B.__zoom,Ne=typeof q=="function"?q.apply(B,H):q,Te=l(Ce.invert(se).concat(ue/Ce.k),Ne.invert(se).concat(ue/Ne.k));return function(U){if(U===1)U=Ne;else{var ee=Te(U),re=ue/ee[2];U=new Ms(re,se[0]-ee[0]*re,se[1]-ee[1]*re)}$.zoom(null,U)}})}function k(L,q,G){return!G&&L.__zooming||new N(L,q)}function N(L,q){this.that=L,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,q),this.taps=0}N.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,q){return this.mouse&&L!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var q=ji(this.that).datum();u.call(L,this.that,new EW(L,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),q)}};function I(L,...q){if(!e.apply(this,arguments))return;var G=k(this,q).event(L),te=this.__zoom,B=Math.max(o[0],Math.min(o[1],te.k*Math.pow(2,r.apply(this,arguments)))),H=mo(L);if(G.wheel)(G.mouse[0][0]!==H[0]||G.mouse[0][1]!==H[1])&&(G.mouse[1]=te.invert(G.mouse[0]=H)),clearTimeout(G.wheel);else{if(te.k===B)return;G.mouse=[H,te.invert(H)],dg(this),G.start()}md(L),G.wheel=setTimeout($,v),G.zoom("mouse",n(m(b(te,B),G.mouse[0],G.mouse[1]),G.extent,s));function $(){G.wheel=null,G.end()}}function z(L,...q){if(h||!e.apply(this,arguments))return;var G=L.currentTarget,te=k(this,q,!0).event(L),B=ji(L.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",ue,!0),H=mo(L,G),$=L.clientX,Y=L.clientY;PI(L.view),k0(L),te.mouse=[H,this.__zoom.invert(H)],dg(this),te.start();function se(Ce){if(md(Ce),!te.moved){var Ne=Ce.clientX-$,Te=Ce.clientY-Y;te.moved=Ne*Ne+Te*Te>y}te.event(Ce).zoom("mouse",n(m(te.that.__zoom,te.mouse[0]=mo(Ce,G),te.mouse[1]),te.extent,s))}function ue(Ce){B.on("mousemove.zoom mouseup.zoom",null),OI(Ce.view,te.moved),md(Ce),te.event(Ce).end()}}function O(L,...q){if(e.apply(this,arguments)){var G=this.__zoom,te=mo(L.changedTouches?L.changedTouches[0]:L,this),B=G.invert(te),H=G.k*(L.shiftKey?.5:2),$=n(m(b(G,H),te,B),t.apply(this,q),s);md(L),a>0?ji(this).transition().duration(a).call(E,$,te,L):ji(this).call(x.transform,$,te,L)}}function M(L,...q){if(e.apply(this,arguments)){var G=L.touches,te=G.length,B=k(this,q,L.changedTouches.length===te).event(L),H,$,Y,se;for(k0(L),$=0;$<te;++$)Y=G[$],se=mo(Y,this),se=[se,this.__zoom.invert(se),Y.identifier],B.touch0?!B.touch1&&B.touch0[2]!==se[2]&&(B.touch1=se,B.taps=0):(B.touch0=se,H=!0,B.taps=1+!!d);d&&(d=clearTimeout(d)),H&&(B.taps<2&&(f=se[0],d=setTimeout(function(){d=null},p)),dg(this),B.start())}}function K(L,...q){if(this.__zooming){var G=k(this,q).event(L),te=L.changedTouches,B=te.length,H,$,Y,se;for(md(L),H=0;H<B;++H)$=te[H],Y=mo($,this),G.touch0&&G.touch0[2]===$.identifier?G.touch0[0]=Y:G.touch1&&G.touch1[2]===$.identifier&&(G.touch1[0]=Y);if($=G.that.__zoom,G.touch1){var ue=G.touch0[0],Ce=G.touch0[1],Ne=G.touch1[0],Te=G.touch1[1],U=(U=Ne[0]-ue[0])*U+(U=Ne[1]-ue[1])*U,ee=(ee=Te[0]-Ce[0])*ee+(ee=Te[1]-Ce[1])*ee;$=b($,Math.sqrt(U/ee)),Y=[(ue[0]+Ne[0])/2,(ue[1]+Ne[1])/2],se=[(Ce[0]+Te[0])/2,(Ce[1]+Te[1])/2]}else if(G.touch0)Y=G.touch0[0],se=G.touch0[1];else return;G.zoom("touch",n(m($,Y,se),G.extent,s))}}function D(L,...q){if(this.__zooming){var G=k(this,q).event(L),te=L.changedTouches,B=te.length,H,$;for(k0(L),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),H=0;H<B;++H)$=te[H],G.touch0&&G.touch0[2]===$.identifier?delete G.touch0:G.touch1&&G.touch1[2]===$.identifier&&delete G.touch1;if(G.touch1&&!G.touch0&&(G.touch0=G.touch1,delete G.touch1),G.touch0)G.touch0[1]=this.__zoom.invert(G.touch0[0]);else if(G.end(),G.taps===2&&($=mo($,this),Math.hypot(f[0]-$[0],f[1]-$[1])<w)){var Y=ji(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return x.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:bp(+L),x):r},x.filter=function(L){return arguments.length?(e=typeof L=="function"?L:bp(!!L),x):e},x.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:bp(!!L),x):i},x.extent=function(L){return arguments.length?(t=typeof L=="function"?L:bp([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),x):t},x.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],x):[o[0],o[1]]},x.translateExtent=function(L){return arguments.length?(s[0][0]=+L[0][0],s[1][0]=+L[1][0],s[0][1]=+L[0][1],s[1][1]=+L[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(L){return arguments.length?(n=L,x):n},x.duration=function(L){return arguments.length?(a=+L,x):a},x.interpolate=function(L){return arguments.length?(l=L,x):l},x.on=function(){var L=u.on.apply(u,arguments);return L===u?x:L},x.clickDistance=function(L){return arguments.length?(y=(L=+L)*L,x):Math.sqrt(y)},x.tapDistance=function(L){return arguments.length?(w=+L,x):w},x}const Ro={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>"The old edge with id=".concat(e," does not exist."),error009:e=>'Marker type "'.concat(e,"\" doesn't exist."),error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>"Couldn't create edge for ".concat(e,' handle id: "').concat(e==="source"?n:r,'", edge id: ').concat(t,"."),error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),error012:e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),error013:(e="react")=>"It seems that you haven't loaded the styles. Please import '@xyflow/".concat(e,"/dist/style.css' or base.css to make sure everything is working properly."),error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Gf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],JI=["Enter"," ","Escape"];var yc;(function(e){e.Strict="strict",e.Loose="loose"})(yc||(yc={}));var Il;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Il||(Il={}));var Yf;(function(e){e.Partial="partial",e.Full="full"})(Yf||(Yf={}));const QI={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Sa;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Sa||(Sa={}));var um;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(um||(um={}));var ye;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ye||(ye={}));const _2={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function RW(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function S2(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function ZI(e){return e===null?null:e?"valid":"invalid"}const eP=e=>"id"in e&&"source"in e&&"target"in e,TW=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),$1=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Sh=(e,t=[0,0])=>{var a;const{width:n,height:r}=ia(e),i=(a=e.origin)!=null?a:t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},IW=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):$1(i)?i:t.nodeLookup.get(i.id));const a=s?cm(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Iy(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Py(n)},Eh=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=cm(r);n=Iy(n,i)}}),Py(n)},tP=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{var u,d,f,h,p,v;const a={...kh(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const y of e.values()){const{measured:w,selectable:x=!0,hidden:b=!1}=y;if(s&&!x||b)continue;const m=(f=(d=(u=w.width)!=null?u:y.width)!=null?d:y.initialWidth)!=null?f:null,S=(v=(p=(h=w.height)!=null?h:y.height)!=null?p:y.initialHeight)!=null?v:null,E=Xf(a,xc(y)),k=(m!=null?m:0)*(S!=null?S:0),N=o&&E>0;(!y.internals.handleBounds||N||E>=k||y.dragging)&&l.push(y)}return l},PW=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function OW(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function $W({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){var d,f,h;if(e.size===0)return Promise.resolve(!0);const a=OW(e,s),l=Eh(a),u=M1(l,t,n,(d=s==null?void 0:s.minZoom)!=null?d:i,(f=s==null?void 0:s.maxZoom)!=null?f:o,(h=s==null?void 0:s.padding)!=null?h:.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function nP({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){var p,v,y;const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},d=(p=s.origin)!=null?p:r;let f=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",Ro.error005());else{const w=a.measured.width,x=a.measured.height;w&&x&&(f=[[l,u],[l+w,u+x]])}else a&&bc(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const h=bc(f)?Vl(t,f,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",Ro.error015())),{position:{x:h.x-l+((v=s.measured.width)!=null?v:0)*d[0],y:h.y-u+((y=s.measured.height)!=null?y:0)*d[1]},positionAbsolute:h}}async function MW({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(h=>h.id)),s=[];for(const h of n){if(h.deletable===!1)continue;const p=o.has(h.id),v=!p&&h.parentId&&s.find(y=>y.id===h.parentId);(p||v)&&s.push(h)}const a=new Set(t.map(h=>h.id)),l=r.filter(h=>h.deletable!==!1),d=PW(s,l);for(const h of l)a.has(h.id)&&!d.find(v=>v.id===h.id)&&d.push(h);if(!i)return{edges:d,nodes:s};const f=await i({nodes:s,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:s}:{edges:[],nodes:[]}:f}const vc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Vl=(e={x:0,y:0},t,n)=>{var r,i;return{x:vc(e.x,t[0][0],t[1][0]-((r=n==null?void 0:n.width)!=null?r:0)),y:vc(e.y,t[0][1],t[1][1]-((i=n==null?void 0:n.height)!=null?i:0))}};function rP(e,t,n){const{width:r,height:i}=ia(n),{x:o,y:s}=n.internals.positionAbsolute;return Vl(e,[[o,s],[o+r,s+i]],t)}const E2=(e,t,n)=>e<t?vc(Math.abs(e-t),1,t)/t:e>n?-vc(Math.abs(e-n),1,t)/t:0,iP=(e,t,n=15,r=40)=>{const i=E2(e.x,r,t.width-r)*n,o=E2(e.y,r,t.height-r)*n;return[i,o]},Iy=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ow=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Py=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),xc=(e,t=[0,0])=>{var i,o,s,a,l,u,d,f;const{x:n,y:r}=$1(e)?e.internals.positionAbsolute:Sh(e,t);return{x:n,y:r,width:(a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0,height:(f=(d=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?d:e.initialHeight)!=null?f:0}},cm=(e,t=[0,0])=>{var i,o,s,a,l,u,d,f;const{x:n,y:r}=$1(e)?e.internals.positionAbsolute:Sh(e,t);return{x:n,y:r,x2:n+((a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0),y2:r+((f=(d=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?d:e.initialHeight)!=null?f:0)}},oP=(e,t)=>Py(Iy(ow(e),ow(t))),Xf=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},k2=e=>So(e.width)&&So(e.height)&&So(e.x)&&So(e.y),So=e=>!isNaN(e)&&isFinite(e),DW=(e,t)=>{},Oy=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),kh=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?Oy(a,s):a},dm=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function mu(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}function LW(e,t,n){var r,i,o,s,a,l,u,d;if(typeof e=="string"||typeof e=="number"){const f=mu(e,n),h=mu(e,t);return{top:f,right:h,bottom:f,left:h,x:h*2,y:f*2}}if(typeof e=="object"){const f=mu((i=(r=e.top)!=null?r:e.y)!=null?i:0,n),h=mu((s=(o=e.bottom)!=null?o:e.y)!=null?s:0,n),p=mu((l=(a=e.left)!=null?a:e.x)!=null?l:0,t),v=mu((d=(u=e.right)!=null?u:e.x)!=null?d:0,t);return{top:f,right:v,bottom:h,left:p,x:p+v,y:f+h}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function FW(e,t,n,r,i,o){const{x:s,y:a}=dm(e,[t,n,r]),{x:l,y:u}=dm({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=i-l,f=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(f)}}const M1=(e,t,n,r,i,o)=>{const s=LW(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),d=vc(u,r,i),f=e.x+e.width/2,h=e.y+e.height/2,p=t/2-f*d,v=n/2-h*d,y=FW(e,p,v,d,t,n),w={left:Math.min(y.left-s.left,0),top:Math.min(y.top-s.top,0),right:Math.min(y.right-s.right,0),bottom:Math.min(y.bottom-s.bottom,0)};return{x:p-w.left+w.right,y:v-w.top+w.bottom,zoom:d}},fm=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function bc(e){return e!==void 0&&e!=="parent"}function ia(e){var t,n,r,i,o,s,a,l;return{width:(i=(r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!=null?i:0,height:(l=(a=(s=(o=e.measured)==null?void 0:o.height)!=null?s:e.height)!=null?a:e.initialHeight)!=null?l:0}}function sP(e){var t,n,r,i,o,s;return((r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!==void 0&&((s=(o=(i=e.measured)==null?void 0:i.height)!=null?o:e.height)!=null?s:e.initialHeight)!==void 0}function aP(e,t={width:0,height:0},n,r,i){var a,l;const o={...e},s=r.get(n);if(s){const u=s.origin||i;o.x+=s.internals.positionAbsolute.x-((a=t.width)!=null?a:0)*u[0],o.y+=s.internals.positionAbsolute.y-((l=t.height)!=null?l:0)*u[1]}return o}function C2(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function BW(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function ef(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){var d,f;const{x:o,y:s}=Bs(e),a=kh({x:o-((d=i==null?void 0:i.left)!=null?d:0),y:s-((f=i==null?void 0:i.top)!=null?f:0)},r),{x:l,y:u}=n?Oy(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const D1=e=>({width:e.offsetWidth,height:e.offsetHeight}),lP=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},zW=["INPUT","SELECT","TEXTAREA"];function uP(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:zW.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const cP=e=>"clientX"in e,Bs=(e,t)=>{var o,s,a,l;const n=cP(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((a=t==null?void 0:t.left)!=null?a:0),y:i-((l=t==null?void 0:t.top)!=null?l:0)}},j2=(e,t,n,r,i)=>{const o=t.querySelectorAll(".".concat(e));return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...D1(s)}})};function dP({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,d=Math.abs(l-e),f=Math.abs(u-t);return[l,u,d,f]}function wp(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function A2({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case ye.Left:return[t-wp(t-r,o),n];case ye.Right:return[t+wp(r-t,o),n];case ye.Top:return[t,n-wp(n-i,o)];case ye.Bottom:return[t,n+wp(i-n,o)]}}function fP({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top,curvature:s=.25}){const[a,l]=A2({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,d]=A2({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[f,h,p,v]=dP({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:d});return["M".concat(e,",").concat(t," C").concat(a,",").concat(l," ").concat(u,",").concat(d," ").concat(r,",").concat(i),f,h,p,v]}function hP({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function HW({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function WW({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=Iy(cm(e),cm(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Xf(s,Py(o))>0}const UW=({source:e,sourceHandle:t,target:n,targetHandle:r})=>"xy-edge__".concat(e).concat(t||"","-").concat(n).concat(r||""),VW=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),pP=(e,t)=>{if(!e.source||!e.target)return t;let n;return eP(e)?n={...e}:n={...e,id:UW(e)},VW(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function gP({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=hP({sourceX:e,sourceY:t,targetX:n,targetY:r});return["M ".concat(e,",").concat(t,"L ").concat(n,",").concat(r),i,o,s,a]}const N2={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},qW=({source:e,sourcePosition:t=ye.Bottom,target:n})=>t===ye.Left||t===ye.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},R2=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function KW({source:e,sourcePosition:t=ye.Bottom,target:n,targetPosition:r=ye.Top,center:i,offset:o}){var N,I;const s=N2[t],a=N2[r],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},d=qW({source:l,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],v,y;const w={x:0,y:0},x={x:0,y:0},[b,m,S,E]=hP({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){v=(N=i.x)!=null?N:b,y=(I=i.y)!=null?I:m;const z=[{x:v,y:l.y},{x:v,y:u.y}],O=[{x:l.x,y},{x:u.x,y}];s[f]===h?p=f==="x"?z:O:p=f==="x"?O:z}else{const z=[{x:l.x,y:u.y}],O=[{x:u.x,y:l.y}];if(f==="x"?p=s.x===h?O:z:p=s.y===h?z:O,t===r){const q=Math.abs(e[f]-n[f]);if(q<=o){const G=Math.min(o-1,o-q);s[f]===h?w[f]=(l[f]>e[f]?-1:1)*G:x[f]=(u[f]>n[f]?-1:1)*G}}if(t!==r){const q=f==="x"?"y":"x",G=s[f]===a[q],te=l[q]>u[q],B=l[q]<u[q];(s[f]===1&&(!G&&te||G&&B)||s[f]!==1&&(!G&&B||G&&te))&&(p=f==="x"?z:O)}const M={x:l.x+w.x,y:l.y+w.y},K={x:u.x+x.x,y:u.y+x.y},D=Math.max(Math.abs(M.x-p[0].x),Math.abs(K.x-p[0].x)),L=Math.max(Math.abs(M.y-p[0].y),Math.abs(K.y-p[0].y));D>=L?(v=(M.x+K.x)/2,y=p[0].y):(v=p[0].x,y=(M.y+K.y)/2)}return[[e,{x:l.x+w.x,y:l.y+w.y},...p,{x:u.x+x.x,y:u.y+x.y},n],v,y,S,E]}function GW(e,t,n,r){const i=Math.min(R2(e,t)/2,R2(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return"L".concat(o," ").concat(s);if(e.y===s){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return"L ".concat(o+i*u,",").concat(s,"Q ").concat(o,",").concat(s," ").concat(o,",").concat(s+i*d)}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(o,",").concat(s+i*l,"Q ").concat(o,",").concat(s," ").concat(o+i*a,",").concat(s)}function sw({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20}){const[d,f,h,p,v]=KW({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u});return[d.reduce((w,x,b)=>{let m="";return b>0&&b<d.length-1?m=GW(d[b-1],x,d[b+1],s):m="".concat(b===0?"M":"L").concat(x.x," ").concat(x.y),w+=m,w},""),f,h,p,v]}function T2(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function YW(e){var f,h,p,v,y;const{sourceNode:t,targetNode:n}=e;if(!T2(t)||!T2(n))return null;const r=t.internals.handleBounds||I2(t.handles),i=n.internals.handleBounds||I2(n.handles),o=P2((f=r==null?void 0:r.source)!=null?f:[],e.sourceHandle),s=P2(e.connectionMode===yc.Strict?(h=i==null?void 0:i.target)!=null?h:[]:((p=i==null?void 0:i.target)!=null?p:[]).concat((v=i==null?void 0:i.source)!=null?v:[]),e.targetHandle);if(!o||!s)return(y=e.onError)==null||y.call(e,"008",Ro.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||ye.Bottom,l=(s==null?void 0:s.position)||ye.Top,u=Jf(t,o,a),d=Jf(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:l}}function I2(e){var r,i;if(!e)return null;const t=[],n=[];for(const o of e)o.width=(r=o.width)!=null?r:1,o.height=(i=o.height)!=null?i:1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Jf(e,t,n=ye.Left,r=!1){var u,d,f;const i=((u=t==null?void 0:t.x)!=null?u:0)+e.internals.positionAbsolute.x,o=((d=t==null?void 0:t.y)!=null?d:0)+e.internals.positionAbsolute.y,{width:s,height:a}=t!=null?t:ia(e);if(r)return{x:i+s/2,y:o+a/2};switch((f=t==null?void 0:t.position)!=null?f:n){case ye.Top:return{x:i+s/2,y:o};case ye.Right:return{x:i+s,y:o+a/2};case ye.Bottom:return{x:i+s/2,y:o+a};case ye.Left:return{x:i,y:o+a/2}}}function P2(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function aw(e,t){if(!e)return"";if(typeof e=="string")return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map(r=>"".concat(r,"=").concat(e[r])).join("&"))}function XW(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=aw(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const L1={nodeOrigin:[0,0],nodeExtent:Gf,elevateNodesOnSelect:!0,defaults:{}},JW={...L1,checkEquality:!0};function F1(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function QW(e,t,n){const r=F1(L1,n);for(const i of e.values())if(i.parentId)B1(i,e,t,r);else{const o=Sh(i,r.nodeOrigin),s=bc(i.extent)?i.extent:r.nodeExtent,a=Vl(o,s,ia(i));i.internals.positionAbsolute=a}}function lw(e,t,n,r){var l,u;const i=F1(JW,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const d of e){let f=s.get(d.id);if(i.checkEquality&&d===(f==null?void 0:f.internals.userNode))t.set(d.id,f);else{const h=Sh(d,i.nodeOrigin),p=bc(d.extent)?d.extent:i.nodeExtent,v=Vl(h,p,ia(d));f={...i.defaults,...d,measured:{width:(l=d.measured)==null?void 0:l.width,height:(u=d.measured)==null?void 0:u.height},internals:{positionAbsolute:v,handleBounds:d.measured?f==null?void 0:f.internals.handleBounds:void 0,z:mP(d,a),userNode:d}},t.set(d.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(o=!1),d.parentId&&B1(f,t,n,r)}return o}function ZW(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function B1(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=F1(L1,r),a=e.parentId,l=t.get(a);if(!l){console.warn("Parent node ".concat(a," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));return}ZW(e,n);const u=i?1e3:0,{x:d,y:f,z:h}=eU(e,l,o,s,u),{positionAbsolute:p}=e.internals,v=d!==p.x||f!==p.y;(v||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:d,y:f}:p,z:h}})}function mP(e,t){return(So(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function eU(e,t,n,r,i){var p;const{x:o,y:s}=t.internals.positionAbsolute,a=ia(e),l=Sh(e,n),u=bc(e.extent)?Vl(l,e.extent,a):l;let d=Vl({x:o+u.x,y:s+u.y},r,a);e.extent==="parent"&&(d=rP(d,a,t));const f=mP(e,i),h=(p=t.internals.z)!=null?p:0;return{x:d.x,y:d.y,z:h>f?h:f}}function z1(e,t,n,r=[0,0]){var s,a;const i=[],o=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const d=(a=(s=o.get(l.parentId))==null?void 0:s.expandedRect)!=null?a:xc(u),f=oP(d,l.rect);o.set(l.parentId,{expandedRect:f,parent:u})}return o.size>0&&o.forEach(({expandedRect:l,parent:u},d)=>{var S,E;const f=u.internals.positionAbsolute,h=ia(u),p=(S=u.origin)!=null?S:r,v=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,y=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0,w=Math.max(h.width,Math.round(l.width)),x=Math.max(h.height,Math.round(l.height)),b=(w-h.width)*p[0],m=(x-h.height)*p[1];(v>0||y>0||b||m)&&(i.push({id:d,type:"position",position:{x:u.position.x-v+b,y:u.position.y-y+m}}),(E=n.get(d))==null||E.forEach(k=>{e.some(N=>N.id===k.id)||i.push({id:k.id,type:"position",position:{x:k.position.x+v,y:k.position.y+y}})})),(h.width<l.width||h.height<l.height||v||y)&&i.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:w+(v?p[0]*v-b:0),height:x+(y?p[1]*y-m:0)}})}),i}function tU(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const h of e.values()){const p=t.get(h.id);if(!p)continue;if(p.hidden){t.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),a=!0;continue}const v=D1(h.nodeElement),y=p.measured.width!==v.width||p.measured.height!==v.height;if(!!(v.width&&v.height&&(y||!p.internals.handleBounds||h.force))){const x=h.nodeElement.getBoundingClientRect(),b=bc(p.extent)?p.extent:o;let{positionAbsolute:m}=p.internals;p.parentId&&p.extent==="parent"?m=rP(m,v,t.get(p.parentId)):b&&(m=Vl(m,b,v));const S={...p,measured:v,internals:{...p.internals,positionAbsolute:m,handleBounds:{source:j2("source",h.nodeElement,x,d,p.id),target:j2("target",h.nodeElement,x,d,p.id)}}};t.set(p.id,S),p.parentId&&B1(S,t,n,{nodeOrigin:i}),a=!0,y&&(l.push({id:p.id,type:"dimensions",dimensions:v}),p.expandParent&&p.parentId&&f.push({id:p.id,parentId:p.parentId,rect:xc(S,i)}))}}if(f.length>0){const h=z1(f,t,n,i);l.push(...h)}return{changes:l,updatedInternals:a}}async function nU({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function O2(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s="".concat(i,"-").concat(e);const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s="".concat(i,"-").concat(e,"-").concat(o);const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function yP(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},u="".concat(i,"-").concat(s,"--").concat(o,"-").concat(a),d="".concat(o,"-").concat(a,"--").concat(i,"-").concat(s);O2("source",l,d,e,i,s),O2("target",l,u,e,o,a),t.set(r.id,r)}}function rU(e,t){if(e===null||t===null)return!1;const n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].id!==r[i].id||n[i].type!==r[i].type||!Object.is(n[i].data,r[i].data))return!1;return!0}function vP(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:vP(n,t):!1}function $2(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function iU(e,t,n,r){var o,s;const i=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!vP(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(a);u&&i.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:(o=u.measured.width)!=null?o:0,height:(s=u.measured.height)!=null?s:0}})}return i}function C0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[u,d]of t){const f=(s=n.get(u))==null?void 0:s.internals.userNode;f&&i.push({...f,position:d.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function oU({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},d=null,f=!1,h=null,p=!1;function v({noDragClassName:w,handleSelector:x,domNode:b,isSelectable:m,nodeId:S,nodeClickDistance:E=0}){h=ji(b);function k({x:O,y:M},K){const{nodeLookup:D,nodeExtent:L,snapGrid:q,snapToGrid:G,nodeOrigin:te,onNodeDrag:B,onSelectionDrag:H,onError:$,updateNodePositions:Y}=t();o={x:O,y:M};let se=!1,ue={x:0,y:0,x2:0,y2:0};if(a.size>1&&L){const Ce=Eh(a);ue=ow(Ce)}for(const[Ce,Ne]of a){if(!D.has(Ce))continue;let Te={x:O-Ne.distance.x,y:M-Ne.distance.y};G&&(Te=Oy(Te,q));let U=[[L[0][0],L[0][1]],[L[1][0],L[1][1]]];if(a.size>1&&L&&!Ne.extent){const{positionAbsolute:De}=Ne.internals,Ye=De.x-ue.x+L[0][0],ze=De.x+Ne.measured.width-ue.x2+L[1][0],ie=De.y-ue.y+L[0][1],fe=De.y+Ne.measured.height-ue.y2+L[1][1];U=[[Ye,ie],[ze,fe]]}const{position:ee,positionAbsolute:re}=nP({nodeId:Ce,nextPosition:Te,nodeLookup:D,nodeExtent:U,nodeOrigin:te,onError:$});se=se||Ne.position.x!==ee.x||Ne.position.y!==ee.y,Ne.position=ee,Ne.internals.positionAbsolute=re}if(se&&(Y(a,!0),K&&(r||B||!S&&H))){const[Ce,Ne]=C0({nodeId:S,dragItems:a,nodeLookup:D});r==null||r(K,a,Ce,Ne),B==null||B(K,Ce,Ne),S||H==null||H(K,Ne)}}async function N(){var G,te;if(!d)return;const{transform:O,panBy:M,autoPanSpeed:K,autoPanOnNodeDrag:D}=t();if(!D){l=!1,cancelAnimationFrame(s);return}const[L,q]=iP(u,d,K);(L!==0||q!==0)&&(o.x=((G=o.x)!=null?G:0)-L/O[2],o.y=((te=o.y)!=null?te:0)-q/O[2],await M({x:L,y:q})&&k(o,null)),s=requestAnimationFrame(N)}function I(O){var se;const{nodeLookup:M,multiSelectionActive:K,nodesDraggable:D,transform:L,snapGrid:q,snapToGrid:G,selectNodesOnDrag:te,onNodeDragStart:B,onSelectionDragStart:H,unselectNodesAndEdges:$}=t();f=!0,(!te||!m)&&!K&&S&&((se=M.get(S))!=null&&se.selected||$()),m&&te&&S&&(e==null||e(S));const Y=ef(O.sourceEvent,{transform:L,snapGrid:q,snapToGrid:G,containerBounds:d});if(o=Y,a=iU(M,D,Y,S),a.size>0&&(n||B||!S&&H)){const[ue,Ce]=C0({nodeId:S,dragItems:a,nodeLookup:M});n==null||n(O.sourceEvent,a,ue,Ce),B==null||B(O.sourceEvent,ue,Ce),S||H==null||H(O.sourceEvent,Ce)}}const z=$I().clickDistance(E).on("start",O=>{const{domNode:M,nodeDragThreshold:K,transform:D,snapGrid:L,snapToGrid:q}=t();d=(M==null?void 0:M.getBoundingClientRect())||null,p=!1,K===0&&I(O),o=ef(O.sourceEvent,{transform:D,snapGrid:L,snapToGrid:q,containerBounds:d}),u=Bs(O.sourceEvent,d)}).on("drag",O=>{var B,H;const{autoPanOnNodeDrag:M,transform:K,snapGrid:D,snapToGrid:L,nodeDragThreshold:q,nodeLookup:G}=t(),te=ef(O.sourceEvent,{transform:K,snapGrid:D,snapToGrid:L,containerBounds:d});if((O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||S&&!G.has(S))&&(p=!0),!p){if(!l&&M&&f&&(l=!0,N()),!f){const $=te.xSnapped-((B=o.x)!=null?B:0),Y=te.ySnapped-((H=o.y)!=null?H:0);Math.sqrt($*$+Y*Y)>q&&I(O)}(o.x!==te.xSnapped||o.y!==te.ySnapped)&&a&&f&&(u=Bs(O.sourceEvent,d),k(te,O.sourceEvent))}}).on("end",O=>{if(!(!f||p)&&(l=!1,f=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:M,updateNodePositions:K,onNodeDragStop:D,onSelectionDragStop:L}=t();if(K(a,!1),i||D||!S&&L){const[q,G]=C0({nodeId:S,dragItems:a,nodeLookup:M,dragging:!1});i==null||i(O.sourceEvent,a,q,G),D==null||D(O.sourceEvent,q,G),S||L==null||L(O.sourceEvent,G)}}}).filter(O=>{const M=O.target;return!O.button&&(!w||!$2(M,".".concat(w),b))&&(!x||$2(M,x,b))});h.call(z)}function y(){h==null||h.on(".drag",null)}return{update:v,destroy:y}}function sU(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Xf(i,xc(o))>0&&r.push(o);return r}const aU=250;function lU(e,t,n,r){var a,l,u,d,f;let i=[],o=1/0;const s=sU(e,n,t+aU);for(const h of s){const p=[...(l=(a=h.internals.handleBounds)==null?void 0:a.source)!=null?l:[],...(d=(u=h.internals.handleBounds)==null?void 0:u.target)!=null?d:[]];for(const v of p){if(r.nodeId===v.nodeId&&r.type===v.type&&r.id===v.id)continue;const{x:y,y:w}=Jf(h,v,v.position,!0),x=Math.sqrt(Math.pow(y-e.x,2)+Math.pow(w-e.y,2));x>t||(x<o?(i=[{...v,x:y,y:w}],o=x):x===o&&i.push({...v,x:y,y:w}))}}if(!i.length)return null;if(i.length>1){const h=r.type==="source"?"target":"source";return(f=i.find(p=>p.type===h))!=null?f:i[0]}return i[0]}function xP(e,t,n,r,i,o=!1){var u,d,f,h,p,v;const s=r.get(e);if(!s)return null;const a=i==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...(f=(d=s.internals.handleBounds)==null?void 0:d.source)!=null?f:[],...(p=(h=s.internals.handleBounds)==null?void 0:h.target)!=null?p:[]],l=(v=n?a==null?void 0:a.find(y=>y.id===n):a==null?void 0:a[0])!=null?v:null;return l&&o?{...l,...Jf(s,l,l.position,!0)}:l}function bP(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function uU(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const wP=()=>!0;function cU(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:d,flowId:f,panBy:h,cancelConnection:p,onConnectStart:v,onConnect:y,onConnectEnd:w,isValidConnection:x=wP,onReconnectEnd:b,updateConnection:m,getTransform:S,getFromHandle:E,autoPanSpeed:k}){const N=lP(e.target);let I=0,z;const{x:O,y:M}=Bs(e),K=N==null?void 0:N.elementFromPoint(O,M),D=bP(o,K),L=a==null?void 0:a.getBoundingClientRect();if(!L||!D)return;const q=xP(i,D,r,l,t);if(!q)return;let G=Bs(e,L),te=!1,B=null,H=!1,$=null;function Y(){if(!d||!L)return;const[re,De]=iP(G,L,k);h({x:re,y:De}),I=requestAnimationFrame(Y)}const se={...q,nodeId:i,type:D,position:q.position},ue=l.get(i),Ne={inProgress:!0,isValid:null,from:Jf(ue,se,ye.Left,!0),fromHandle:se,fromPosition:se.position,fromNode:ue,to:G,toHandle:null,toPosition:_2[se.position],toNode:null};m(Ne);let Te=Ne;v==null||v(e,{nodeId:i,handleId:r,handleType:D});function U(re){if(!E()||!se){ee(re);return}const De=S();G=Bs(re,L),z=lU(kh(G,De,!1,[1,1]),n,l,se),te||(Y(),te=!0);const Ye=_P(re,{handle:z,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:x,doc:N,lib:u,flowId:f,nodeLookup:l});$=Ye.handleDomNode,B=Ye.connection,H=uU(!!z,Ye.isValid);const ze={...Te,isValid:H,to:z&&H?dm({x:z.x,y:z.y},De):G,toHandle:Ye.toHandle,toPosition:H&&Ye.toHandle?Ye.toHandle.position:_2[se.position],toNode:Ye.toHandle?l.get(Ye.toHandle.nodeId):null};H&&z&&Te.toHandle&&ze.toHandle&&Te.toHandle.type===ze.toHandle.type&&Te.toHandle.nodeId===ze.toHandle.nodeId&&Te.toHandle.id===ze.toHandle.id&&Te.to.x===ze.to.x&&Te.to.y===ze.to.y||(m(ze),Te=ze)}function ee(re){(z||$)&&B&&H&&(y==null||y(B));const{inProgress:De,...Ye}=Te,ze={...Ye,toPosition:Te.toHandle?Te.toPosition:null};w==null||w(re,ze),o&&(b==null||b(re,ze)),p(),cancelAnimationFrame(I),te=!1,H=!1,B=null,$=null,N.removeEventListener("mousemove",U),N.removeEventListener("mouseup",ee),N.removeEventListener("touchmove",U),N.removeEventListener("touchend",ee)}N.addEventListener("mousemove",U),N.addEventListener("mouseup",ee),N.addEventListener("touchmove",U),N.addEventListener("touchend",ee)}function _P(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=wP,nodeLookup:d}){const f=o==="target",h=t?s.querySelector(".".concat(a,'-flow__handle[data-id="').concat(l,"-").concat(t==null?void 0:t.nodeId,"-").concat(t==null?void 0:t.id,"-").concat(t==null?void 0:t.type,'"]')):null,{x:p,y:v}=Bs(e),y=s.elementFromPoint(p,v),w=y!=null&&y.classList.contains("".concat(a,"-flow__handle"))?y:h,x={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const b=bP(void 0,w),m=w.getAttribute("data-nodeid"),S=w.getAttribute("data-handleid"),E=w.classList.contains("connectable"),k=w.classList.contains("connectableend");if(!m||!b)return x;const N={source:f?m:r,sourceHandle:f?S:i,target:f?r:m,targetHandle:f?i:S};x.connection=N;const z=E&&k&&(n===yc.Strict?f&&b==="source"||!f&&b==="target":m!==r||S!==i);x.isValid=z&&u(N),x.toHandle=xP(m,b,S,d,n,!1)}return x}const uw={onPointerDown:cU,isValid:_P};function dU({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ji(e);function o({translateExtent:a,width:l,height:u,zoomStep:d=10,pannable:f=!0,zoomable:h=!0,inversePan:p=!1}){const v=m=>{const S=n();if(m.sourceEvent.type!=="wheel"||!t)return;const E=-m.sourceEvent.deltaY*(m.sourceEvent.deltaMode===1?.05:m.sourceEvent.deltaMode?1:.002)*d,k=S[2]*Math.pow(2,E);t.scaleTo(k)};let y=[0,0];const w=m=>{var S,E;(m.sourceEvent.type==="mousedown"||m.sourceEvent.type==="touchstart")&&(y=[(S=m.sourceEvent.clientX)!=null?S:m.sourceEvent.touches[0].clientX,(E=m.sourceEvent.clientY)!=null?E:m.sourceEvent.touches[0].clientY])},x=m=>{var O,M;const S=n();if(m.sourceEvent.type!=="mousemove"&&m.sourceEvent.type!=="touchmove"||!t)return;const E=[(O=m.sourceEvent.clientX)!=null?O:m.sourceEvent.touches[0].clientX,(M=m.sourceEvent.clientY)!=null?M:m.sourceEvent.touches[0].clientY],k=[E[0]-y[0],E[1]-y[1]];y=E;const N=r()*Math.max(S[2],Math.log(S[2]))*(p?-1:1),I={x:S[0]-k[0]*N,y:S[1]-k[1]*N},z=[[0,0],[l,u]];t.setViewportConstrained({x:I.x,y:I.y,zoom:S[2]},z,a)},b=XI().on("start",w).on("zoom",f?x:null).on("zoom.wheel",h?v:null);i.call(b,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:mo}}const fU=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,$y=e=>({x:e.x,y:e.y,zoom:e.k}),j0=({x:e,y:t,zoom:n})=>Ty.translate(e,t).scale(n),Du=(e,t)=>e.target.closest(".".concat(t)),SP=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),A0=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},EP=e=>{const t=e.ctrlKey&&fm()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function hU({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return d=>{if(Du(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(d.ctrlKey&&s){const w=mo(d),x=EP(d),b=f*Math.pow(2,x);r.scaleTo(n,b,w,d);return}const h=d.deltaMode===1?20:1;let p=i===Il.Vertical?0:d.deltaX*h,v=i===Il.Horizontal?0:d.deltaY*h;!fm()&&d.shiftKey&&i!==Il.Vertical&&(p=d.deltaY*h,v=0),r.translateBy(n,-(p/f)*o,-(v/f)*o,{internal:!0});const y=$y(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(d,y)),e.isPanScrolling&&(l==null||l(d,y),e.panScrollTimeout=setTimeout(()=>{u==null||u(d,y),e.isPanScrolling=!1},150))}}function pU({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=Du(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function gU({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=$y(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function mU({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a,l;e.usedRightMouseButton=!!(n&&SP(t,(s=e.mouseButton)!=null?s:0)),(a=o.sourceEvent)!=null&&a.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((l=o.sourceEvent)!=null&&l.internal)&&(i==null||i(o.sourceEvent,$y(o.transform)))}}function yU({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a,l;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&SP(t,(l=e.mouseButton)!=null?l:0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&fU(e.prevViewport,s.transform))){const u=$y(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function vU({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u}){return d=>{var v;const f=e||t,h=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(Du(d,"".concat(u,"-flow__node"))||Du(d,"".concat(u,"-flow__edge"))))return!0;if(!r&&!f&&!i&&!o&&!n||s||Du(d,a)&&d.type==="wheel"||Du(d,l)&&(d.type!=="wheel"||i&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((v=d.touches)==null?void 0:v.length)>1)return d.preventDefault(),!1;if(!f&&!i&&!h&&d.type==="wheel"||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&p}}function xU({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=XI().clickDistance(!So(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),p=ji(e).call(h);m({x:o.x,y:o.y,zoom:vc(o.zoom,t,n)},[[0,0],[f.width,f.height]],i);const v=p.on("wheel.zoom"),y=p.on("dblclick.zoom");h.wheelDelta(EP);function w(K,D){return p?new Promise(L=>{h==null||h.transform(A0(p,D==null?void 0:D.duration,()=>L(!0)),K)}):Promise.resolve(!1)}function x({noWheelClassName:K,noPanClassName:D,onPaneContextMenu:L,userSelectionActive:q,panOnScroll:G,panOnDrag:te,panOnScrollMode:B,panOnScrollSpeed:H,preventScrolling:$,zoomOnPinch:Y,zoomOnScroll:se,zoomOnDoubleClick:ue,zoomActivationKeyPressed:Ce,lib:Ne,onTransformChange:Te}){q&&!d.isZoomingOrPanning&&b();const ee=G&&!Ce&&!q?hU({zoomPanValues:d,noWheelClassName:K,d3Selection:p,d3Zoom:h,panOnScrollMode:B,panOnScrollSpeed:H,zoomOnPinch:Y,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):pU({noWheelClassName:K,preventScrolling:$,d3ZoomHandler:v});if(p.on("wheel.zoom",ee,{passive:!1}),!q){const De=gU({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:a});h.on("start",De);const Ye=mU({zoomPanValues:d,panOnDrag:te,onPaneContextMenu:!!L,onPanZoom:s,onTransformChange:Te});h.on("zoom",Ye);const ze=yU({zoomPanValues:d,panOnDrag:te,panOnScroll:G,onPaneContextMenu:L,onPanZoomEnd:l,onDraggingChange:u});h.on("end",ze)}const re=vU({zoomActivationKeyPressed:Ce,panOnDrag:te,zoomOnScroll:se,panOnScroll:G,zoomOnDoubleClick:ue,zoomOnPinch:Y,userSelectionActive:q,noPanClassName:D,noWheelClassName:K,lib:Ne});h.filter(re),ue?p.on("dblclick.zoom",y):p.on("dblclick.zoom",null)}function b(){h.on("zoom",null)}async function m(K,D,L){const q=j0(K),G=h==null?void 0:h.constrain()(q,D,L);return G&&await w(G),new Promise(te=>te(G))}async function S(K,D){const L=j0(K);return await w(L,D),new Promise(q=>q(L))}function E(K){if(p){const D=j0(K),L=p.property("__zoom");(L.k!==K.zoom||L.x!==K.x||L.y!==K.y)&&(h==null||h.transform(p,D,null,{sync:!0}))}}function k(){const K=p?YI(p.node()):{x:0,y:0,k:1};return{x:K.x,y:K.y,zoom:K.k}}function N(K,D){return p?new Promise(L=>{h==null||h.scaleTo(A0(p,D==null?void 0:D.duration,()=>L(!0)),K)}):Promise.resolve(!1)}function I(K,D){return p?new Promise(L=>{h==null||h.scaleBy(A0(p,D==null?void 0:D.duration,()=>L(!0)),K)}):Promise.resolve(!1)}function z(K){h==null||h.scaleExtent(K)}function O(K){h==null||h.translateExtent(K)}function M(K){const D=!So(K)||K<0?0:K;h==null||h.clickDistance(D)}return{update:x,destroy:b,setViewport:S,setViewportConstrained:m,getViewport:k,scaleTo:N,scaleBy:I,setScaleExtent:z,setTranslateExtent:O,syncViewport:E,setClickDistance:M}}var tf;(function(e){e.Line="line",e.Handle="handle"})(tf||(tf={}));function bU({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function wU(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function ha(e,t){return Math.max(0,t-e)}function pa(e,t){return Math.max(0,e-t)}function _p(e,t,n){return Math.max(0,t-e,e-n)}function M2(e,t){return e?!t:t}function _U(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:u}=t;const{isHorizontal:d,isVertical:f}=t,h=d&&f,{xSnapped:p,ySnapped:v}=n,{minWidth:y,maxWidth:w,minHeight:x,maxHeight:b}=r,{x:m,y:S,width:E,height:k,aspectRatio:N}=e;let I=Math.floor(d?p-e.pointerX:0),z=Math.floor(f?v-e.pointerY:0);const O=E+(l?-I:I),M=k+(u?-z:z),K=-o[0]*E,D=-o[1]*k;let L=_p(O,y,w),q=_p(M,x,b);if(s){let B=0,H=0;l&&I<0?B=ha(m+I+K,s[0][0]):!l&&I>0&&(B=pa(m+O+K,s[1][0])),u&&z<0?H=ha(S+z+D,s[0][1]):!u&&z>0&&(H=pa(S+M+D,s[1][1])),L=Math.max(L,B),q=Math.max(q,H)}if(a){let B=0,H=0;l&&I>0?B=pa(m+I,a[0][0]):!l&&I<0&&(B=ha(m+O,a[1][0])),u&&z>0?H=pa(S+z,a[0][1]):!u&&z<0&&(H=ha(S+M,a[1][1])),L=Math.max(L,B),q=Math.max(q,H)}if(i){if(d){const B=_p(O/N,x,b)*N;if(L=Math.max(L,B),s){let H=0;!l&&!u||l&&!u&&h?H=pa(S+D+O/N,s[1][1])*N:H=ha(S+D+(l?I:-I)/N,s[0][1])*N,L=Math.max(L,H)}if(a){let H=0;!l&&!u||l&&!u&&h?H=ha(S+O/N,a[1][1])*N:H=pa(S+(l?I:-I)/N,a[0][1])*N,L=Math.max(L,H)}}if(f){const B=_p(M*N,y,w)/N;if(q=Math.max(q,B),s){let H=0;!l&&!u||u&&!l&&h?H=pa(m+M*N+K,s[1][0])/N:H=ha(m+(u?z:-z)*N+K,s[0][0])/N,q=Math.max(q,H)}if(a){let H=0;!l&&!u||u&&!l&&h?H=ha(m+M*N,a[1][0])/N:H=pa(m+(u?z:-z)*N,a[0][0])/N,q=Math.max(q,H)}}}z=z+(z<0?q:-q),I=I+(I<0?L:-L),i&&(h?O>M*N?z=(M2(l,u)?-I:I)/N:I=(M2(l,u)?-z:z)*N:d?(z=I/N,u=l):(I=z*N,l=u));const G=l?m+I:m,te=u?S+z:S;return{width:E+(l?-I:I),height:k+(u?-z:z),x:o[0]*I*(l?-1:1)+G,y:o[1]*z*(u?-1:1)+te}}const kP={width:0,height:0,x:0,y:0},SU={...kP,pointerX:0,pointerY:0,aspectRatio:1};function EU(e){return[[0,0],[e.measured.width,e.measured.height]]}function kU(e,t,n){var u,d;const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=(u=e.measured.width)!=null?u:0,s=(d=e.measured.height)!=null?d:0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function CU({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=ji(e);function s({controlPosition:l,boundaries:u,keepAspectRatio:d,resizeDirection:f,onResizeStart:h,onResize:p,onResizeEnd:v,shouldResize:y}){let w={...kP},x={...SU};const b=wU(l);let m,S=null,E=[],k,N,I;const z=$I().on("start",O=>{var H,$,Y,se,ue,Ce;const{nodeLookup:M,transform:K,snapGrid:D,snapToGrid:L,nodeOrigin:q,paneDomNode:G}=n();if(m=M.get(t),!m)return;S=(H=G==null?void 0:G.getBoundingClientRect())!=null?H:null;const{xSnapped:te,ySnapped:B}=ef(O.sourceEvent,{transform:K,snapGrid:D,snapToGrid:L,containerBounds:S});w={width:($=m.measured.width)!=null?$:0,height:(Y=m.measured.height)!=null?Y:0,x:(se=m.position.x)!=null?se:0,y:(ue=m.position.y)!=null?ue:0},x={...w,pointerX:te,pointerY:B,aspectRatio:w.width/w.height},k=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(k=M.get(m.parentId),N=k&&m.extent==="parent"?EU(k):void 0),E=[],I=void 0;for(const[Ne,Te]of M)if(Te.parentId===t&&(E.push({id:Ne,position:{...Te.position},extent:Te.extent}),Te.extent==="parent"||Te.expandParent)){const U=kU(Te,m,(Ce=Te.origin)!=null?Ce:q);I?I=[[Math.min(U[0][0],I[0][0]),Math.min(U[0][1],I[0][1])],[Math.max(U[1][0],I[1][0]),Math.max(U[1][1],I[1][1])]]:I=U}h==null||h(O,{...w})}).on("drag",O=>{var fe,Se,We;const{transform:M,snapGrid:K,snapToGrid:D,nodeOrigin:L}=n(),q=ef(O.sourceEvent,{transform:M,snapGrid:K,snapToGrid:D,containerBounds:S}),G=[];if(!m)return;const{x:te,y:B,width:H,height:$}=w,Y={},se=(fe=m.origin)!=null?fe:L,{width:ue,height:Ce,x:Ne,y:Te}=_U(x,b,q,u,d,se,N,I),U=ue!==H,ee=Ce!==$,re=Ne!==te&&U,De=Te!==B&&ee;if(!re&&!De&&!U&&!ee)return;if((re||De||se[0]===1||se[1]===1)&&(Y.x=re?Ne:w.x,Y.y=De?Te:w.y,w.x=Y.x,w.y=Y.y,E.length>0)){const Ue=Ne-te,Ke=Te-B;for(const he of E)he.position={x:he.position.x-Ue+se[0]*(ue-H),y:he.position.y-Ke+se[1]*(Ce-$)},G.push(he)}if((U||ee)&&(Y.width=U&&(!f||f==="horizontal")?ue:w.width,Y.height=ee&&(!f||f==="vertical")?Ce:w.height,w.width=Y.width,w.height=Y.height),k&&m.expandParent){const Ue=se[0]*((Se=Y.width)!=null?Se:0);Y.x&&Y.x<Ue&&(w.x=Ue,x.x=x.x-(Y.x-Ue));const Ke=se[1]*((We=Y.height)!=null?We:0);Y.y&&Y.y<Ke&&(w.y=Ke,x.y=x.y-(Y.y-Ke))}const Ye=bU({width:w.width,prevWidth:H,height:w.height,prevHeight:$,affectsX:b.affectsX,affectsY:b.affectsY}),ze={...w,direction:Ye};(y==null?void 0:y(O,ze))!==!1&&(p==null||p(O,ze),r(Y,G))}).on("end",O=>{v==null||v(O,{...w}),i==null||i({...w})});o.call(z)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var CP={exports:{}},jP={},AP={exports:{}},NP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=j;function jU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var AU=typeof Object.is=="function"?Object.is:jU,NU=wc.useState,RU=wc.useEffect,TU=wc.useLayoutEffect,IU=wc.useDebugValue;function PU(e,t){var n=t(),r=NU({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return TU(function(){i.value=n,i.getSnapshot=t,N0(i)&&o({inst:i})},[e,n,t]),RU(function(){return N0(i)&&o({inst:i}),e(function(){N0(i)&&o({inst:i})})},[e]),IU(n),n}function N0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!AU(e,n)}catch(r){return!0}}function OU(e,t){return t()}var $U=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?OU:PU;NP.useSyncExternalStore=wc.useSyncExternalStore!==void 0?wc.useSyncExternalStore:$U;AP.exports=NP;var MU=AP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My=j,DU=MU;function LU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FU=typeof Object.is=="function"?Object.is:LU,BU=DU.useSyncExternalStore,zU=My.useRef,HU=My.useEffect,WU=My.useMemo,UU=My.useDebugValue;jP.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=zU(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=WU(function(){function l(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&s.hasValue){var v=s.value;if(i(v,p))return f=v}return f=p}if(v=f,FU(d,p))return v;var y=r(p);return i!==void 0&&i(v,y)?(d=p,v):(d=p,f=y)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var a=BU(e,o[0],o[1]);return HU(function(){s.hasValue=!0,s.value=a},[a]),UU(a),a};CP.exports=jP;var VU=CP.exports;const qU=ta(VU),KU={LEGACY:!1},D2=e=>{let t;const n=new Set,r=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=(f!=null?f:typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,p))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(KU?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},GU=e=>e?D2(e):D2,{useDebugValue:YU}=Tt,{useSyncExternalStoreWithSelector:XU}=qU,JU=e=>e;function RP(e,t=JU,n){const r=XU(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return YU(r),r}const L2=(e,t)=>{const n=GU(e),r=(i,o=t)=>RP(n,i,o);return Object.assign(r,n),r},QU=(e,t)=>e?L2(e,t):L2;function qn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Dy=j.createContext(null),ZU=Dy.Provider,TP=Ro.error001();function en(e,t){const n=j.useContext(Dy);if(n===null)throw new Error(TP);return RP(n,e,t)}function Cn(){const e=j.useContext(Dy);if(e===null)throw new Error(TP);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const F2={display:"none"},eV={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},IP="react-flow__node-desc",PP="react-flow__edge-desc",tV="react-flow__aria-live",nV=e=>e.ariaLiveMessage;function rV({rfId:e}){const t=en(nV);return c.jsx("div",{id:"".concat(tV,"-").concat(e),"aria-live":"assertive","aria-atomic":"true",style:eV,children:t})}function iV({rfId:e,disableKeyboardA11y:t}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{id:"".concat(IP,"-").concat(e),style:F2,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),c.jsx("div",{id:"".concat(PP,"-").concat(e),style:F2,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&c.jsx(rV,{rfId:e})]})}const oV=e=>e.userSelectionActive?"none":"all",Ch=j.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},o)=>{const s=en(oV),a="".concat(e).split("-");return c.jsx("div",{className:ir(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:o,...i,children:t})});Ch.displayName="Panel";function sV({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:c.jsx(Ch,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:c.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const aV=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Sp=e=>e.id;function lV(e,t){return qn(e.selectedNodes.map(Sp),t.selectedNodes.map(Sp))&&qn(e.selectedEdges.map(Sp),t.selectedEdges.map(Sp))}function uV({onSelectionChange:e}){const t=Cn(),{selectedNodes:n,selectedEdges:r}=en(aV,lV);return j.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(o=>o(i))},[n,r,e]),null}const cV=e=>!!e.onSelectionChangeHandlers;function dV({onSelectionChange:e}){const t=en(cV);return e||t?c.jsx(uV,{onSelectionChange:e}):null}const OP=[0,0],fV={x:0,y:0,zoom:1},hV=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],B2=[...hV,"rfId"],pV=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),z2={translateExtent:Gf,nodeOrigin:OP,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function gV(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:o,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:u}=en(pV,qn),d=Cn();j.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{f.current=z2,a()}),[]);const f=j.useRef(z2);return j.useEffect(()=>{for(const h of B2){const p=e[h],v=f.current[h];p!==v&&(typeof e[h]>"u"||(h==="nodes"?t(p):h==="edges"?n(p):h==="minZoom"?r(p):h==="maxZoom"?i(p):h==="translateExtent"?o(p):h==="nodeExtent"?s(p):h==="paneClickDistance"?u(p):h==="fitView"?d.setState({fitViewQueued:p}):h==="fitViewOptions"?d.setState({fitViewOptions:p}):d.setState({[h]:p})))}f.current=e},B2.map(h=>e[h])),null}function H2(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function mV(e){var r;const[t,n]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){n(e);return}const i=H2(),o=()=>n(i!=null&&i.matches?"dark":"light");return o(),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}},[e]),t!==null?t:(r=H2())!=null&&r.matches?"dark":"light"}const W2=typeof document<"u"?document:null;function Qf(e=null,t={target:W2,actInsideInputWithModifier:!0}){const[n,r]=j.useState(!1),i=j.useRef(!1),o=j.useRef(new Set([])),[s,a]=j.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+","\n").replace("\n\n","\n+").split("\n")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return j.useEffect(()=>{const l=(t==null?void 0:t.target)||W2;if(e!==null){const u=h=>{var y,w;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&uP(h))return!1;const v=V2(h.code,a);if(o.current.add(h[v]),U2(s,o.current,!1)){const x=((w=(y=h.composedPath)==null?void 0:y.call(h))==null?void 0:w[0])||h.target,b=(x==null?void 0:x.nodeName)==="BUTTON"||(x==null?void 0:x.nodeName)==="A";t.preventDefault!==!1&&(i.current||!b)&&h.preventDefault(),r(!0)}},d=h=>{const p=V2(h.code,a);U2(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[p]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,r]),n}function U2(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function V2(e,t){return t.includes(e)?"code":"key"}const yV=()=>{const e=Cn();return j.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var a,l,u;const{transform:[r,i,o],panZoom:s}=e.getState();return s?(await s.setViewport({x:(a=t.x)!=null?a:r,y:(l=t.y)!=null?l:i,zoom:(u=t.zoom)!=null?u:o},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:i,height:o,maxZoom:s,panZoom:a}=e.getState(),l=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=i/2-t*l,d=o/2-n*l;return a?(await a.setViewport({x:u,y:d,zoom:l},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var u;const{width:r,height:i,minZoom:o,maxZoom:s,panZoom:a}=e.getState(),l=M1(t,r,i,o,s,(u=n==null?void 0:n.padding)!=null?u:.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{var h,p;const{transform:r,snapGrid:i,snapToGrid:o,domNode:s}=e.getState();if(!s)return t;const{x:a,y:l}=s.getBoundingClientRect(),u={x:t.x-a,y:t.y-l},d=(h=n.snapGrid)!=null?h:i,f=(p=n.snapToGrid)!=null?p:o;return kh(u,r,f,d)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),s=dm(t,n);return{x:s.x+i,y:s.y+o}}}),[])};function $P(e,t){const n=[],r=new Map,i=[];for(const o of e)if(o.type==="add"){i.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const s=r.get(o.id);s?s.push(o):r.set(o.id,[o])}for(const o of t){const s=r.get(o.id);if(!s){n.push(o);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...o};for(const l of s)vV(l,a);n.push(a)}return i.length&&i.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function vV(e,t){var n;switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&((n=t.measured)!=null||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function MP(e,t){return $P(e,t)}function DP(e,t){return $P(e,t)}function ml(e,t){return{id:e,type:"select",selected:t}}function Lu(e,t=new Set,n=!1){const r=[];for(const[i,o]of e){const s=t.has(i);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),r.push(ml(o.id,s)))}return r}function q2({items:e=[],lookup:t}){var i,o;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,a]of e.entries()){const l=t.get(a.id),u=(o=(i=l==null?void 0:l.internals)==null?void 0:i.userNode)!=null?o:l;u!==void 0&&u!==a&&n.push({id:a.id,item:a,type:"replace"}),u===void 0&&n.push({item:a,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function K2(e){return{id:e.id,type:"remove"}}const G2=e=>TW(e),xV=e=>eP(e);function LP(e){return j.forwardRef(e)}const bV=typeof window<"u"?j.useLayoutEffect:j.useEffect;function Y2(e){const[t,n]=j.useState(BigInt(0)),[r]=j.useState(()=>wV(()=>n(i=>i+BigInt(1))));return bV(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function wV(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const FP=j.createContext(null);function _V({children:e}){const t=Cn(),n=j.useCallback(a=>{const{nodes:l=[],setNodes:u,hasDefaultNodes:d,onNodesChange:f,nodeLookup:h,fitViewQueued:p}=t.getState();let v=l;for(const y of a)v=typeof y=="function"?y(v):y;if(d)u(v);else{const y=q2({items:v,lookup:h});y.length>0?f==null||f(y):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:x,setNodes:b}=t.getState();w&&b(x)})}},[]),r=Y2(n),i=j.useCallback(a=>{const{edges:l=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:h}=t.getState();let p=l;for(const v of a)p=typeof v=="function"?v(p):v;d?u(p):f&&f(q2({items:p,lookup:h}))},[]),o=Y2(i),s=j.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return c.jsx(FP.Provider,{value:s,children:e})}function SV(){const e=j.useContext(FP);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const EV=e=>!!e.panZoom;function gn(){const e=yV(),t=Cn(),n=SV(),r=en(EV),i=j.useMemo(()=>{const o=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},l=f=>{var x,b,m,S;const{nodeLookup:h,nodeOrigin:p}=t.getState(),v=G2(f)?f:h.get(f.id),y=v.parentId?aP(v.position,v.measured,v.parentId,h,p):v.position,w={...v,position:y,width:(b=(x=v.measured)==null?void 0:x.width)!=null?b:v.width,height:(S=(m=v.measured)==null?void 0:m.height)!=null?S:v.height};return xc(w)},u=(f,h,p={replace:!1})=>{s(v=>v.map(y=>{if(y.id===f){const w=typeof h=="function"?h(y):h;return p.replace&&G2(w)?w:{...y,...w}}return y}))},d=(f,h,p={replace:!1})=>{a(v=>v.map(y=>{if(y.id===f){const w=typeof h=="function"?h(y):h;return p.replace&&xV(w)?w:{...y,...w}}return y}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var h;return(h=o(f))==null?void 0:h.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(h=>({...h}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:a,addNodes:f=>{const h=Array.isArray(f)?f:[f];n.nodeQueue.push(p=>[...p,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];n.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:p}=t.getState(),[v,y,w]=p;return{nodes:f.map(x=>({...x})),edges:h.map(x=>({...x})),viewport:{x:v,y,zoom:w}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:p,edges:v,onNodesDelete:y,onEdgesDelete:w,triggerNodeChanges:x,triggerEdgeChanges:b,onDelete:m,onBeforeDelete:S}=t.getState(),{nodes:E,edges:k}=await MW({nodesToRemove:f,edgesToRemove:h,nodes:p,edges:v,onBeforeDelete:S}),N=k.length>0,I=E.length>0;if(N){const z=k.map(K2);w==null||w(k),b(z)}if(I){const z=E.map(K2);y==null||y(E),x(z)}return(I||N)&&(m==null||m({nodes:E,edges:k})),{deletedNodes:E,deletedEdges:k}},getIntersectingNodes:(f,h=!0,p)=>{const v=k2(f),y=v?f:l(f),w=p!==void 0;return y?(p||t.getState().nodes).filter(x=>{const b=t.getState().nodeLookup.get(x.id);if(b&&!v&&(x.id===f.id||!b.internals.positionAbsolute))return!1;const m=xc(w?x:b),S=Xf(m,y);return h&&S>0||S>=y.width*y.height}):[]},isNodeIntersecting:(f,h,p=!0)=>{const y=k2(f)?f:l(f);if(!y)return!1;const w=Xf(y,h);return p&&w>0||w>=y.width*y.height},updateNode:u,updateNodeData:(f,h,p={replace:!1})=>{u(f,v=>{const y=typeof h=="function"?h(v):h;return p.replace?{...v,data:y}:{...v,data:{...v.data,...y}}},p)},updateEdge:d,updateEdgeData:(f,h,p={replace:!1})=>{d(f,v=>{const y=typeof h=="function"?h(v):h;return p.replace?{...v,data:y}:{...v,data:{...v.data,...y}}},p)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:p}=t.getState();return IW(f,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:f,id:h,nodeId:p})=>{var v,y;return Array.from((y=(v=t.getState().connectionLookup.get("".concat(p,"-").concat(f).concat(h?"-".concat(h):"")))==null?void 0:v.values())!=null?y:[])},getNodeConnections:({type:f,handleId:h,nodeId:p})=>{var v,y;return Array.from((y=(v=t.getState().connectionLookup.get("".concat(p).concat(f?h?"-".concat(f,"-").concat(h):"-".concat(f):"")))==null?void 0:v.values())!=null?y:[])},fitView:async f=>{var p;const h=(p=t.getState().fitViewResolver)!=null?p:BW();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),n.nodeQueue.push(v=>[...v]),h.promise}}},[]);return j.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const X2=e=>e.selected,kV={actInsideInputWithModifier:!1},CV=typeof window<"u"?window:void 0;function jV({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Cn(),{deleteElements:r}=gn(),i=Qf(e,kV),o=Qf(t,{target:CV});j.useEffect(()=>{if(i){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(X2),edges:s.filter(X2)}),n.setState({nodesSelectionActive:!1})}},[i]),j.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function AV(e){const t=Cn();j.useEffect(()=>{const n=()=>{var i,o;if(!e.current)return!1;const r=D1(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Ro.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Ly={position:"absolute",width:"100%",height:"100%",top:0,left:0},NV=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function RV({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:o=Il.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:u,minZoom:d,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:p=!0,children:v,noWheelClassName:y,noPanClassName:w,onViewportChange:x,isControlledViewport:b,paneClickDistance:m}){const S=Cn(),E=j.useRef(null),{userSelectionActive:k,lib:N}=en(NV,qn),I=Qf(h),z=j.useRef();AV(E);const O=j.useCallback(M=>{x==null||x({x:M[0],y:M[1],zoom:M[2]}),b||S.setState({transform:M})},[x,b]);return j.useEffect(()=>{if(E.current){z.current=xU({domNode:E.current,minZoom:d,maxZoom:f,translateExtent:u,viewport:l,paneClickDistance:m,onDraggingChange:L=>S.setState({paneDragging:L}),onPanZoomStart:(L,q)=>{const{onViewportChangeStart:G,onMoveStart:te}=S.getState();te==null||te(L,q),G==null||G(q)},onPanZoom:(L,q)=>{const{onViewportChange:G,onMove:te}=S.getState();te==null||te(L,q),G==null||G(q)},onPanZoomEnd:(L,q)=>{const{onViewportChangeEnd:G,onMoveEnd:te}=S.getState();te==null||te(L,q),G==null||G(q)}});const{x:M,y:K,zoom:D}=z.current.getViewport();return S.setState({panZoom:z.current,transform:[M,K,D],domNode:E.current.closest(".react-flow")}),()=>{var L;(L=z.current)==null||L.destroy()}}},[]),j.useEffect(()=>{var M;(M=z.current)==null||M.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:o,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:I,preventScrolling:p,noPanClassName:w,userSelectionActive:k,noWheelClassName:y,lib:N,onTransformChange:O})},[e,t,n,r,i,o,s,a,I,p,w,k,y,N,O]),c.jsx("div",{className:"react-flow__renderer",ref:E,style:Ly,children:v})}const TV=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function IV(){const{userSelectionActive:e,userSelectionRect:t}=en(TV,qn);return e&&t?c.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const R0=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},PV=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function OV({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Yf.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:o,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:h,children:p}){const v=Cn(),{userSelectionActive:y,elementsSelectable:w,dragging:x,connectionInProgress:b}=en(PV,qn),m=w&&(e||y),S=j.useRef(null),E=j.useRef(),k=j.useRef(new Set),N=j.useRef(new Set),I=j.useRef(!1),z=j.useRef(!1),O=te=>{if(I.current||b){I.current=!1;return}a==null||a(te),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},M=te=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){te.preventDefault();return}l==null||l(te)},K=u?te=>u(te):void 0,D=te=>{var se,ue;const{resetSelectedElements:B,domNode:H}=v.getState();if(E.current=H==null?void 0:H.getBoundingClientRect(),!w||!e||te.button!==0||te.target!==S.current||!E.current)return;(ue=(se=te.target)==null?void 0:se.setPointerCapture)==null||ue.call(se,te.pointerId),z.current=!0,I.current=!1;const{x:$,y:Y}=Bs(te.nativeEvent,E.current);B(),v.setState({userSelectionRect:{width:0,height:0,startX:$,startY:Y,x:$,y:Y}}),o==null||o(te)},L=te=>{var fe,Se;const{userSelectionRect:B,transform:H,nodeLookup:$,edgeLookup:Y,connectionLookup:se,triggerNodeChanges:ue,triggerEdgeChanges:Ce,defaultEdgeOptions:Ne}=v.getState();if(!E.current||!B)return;I.current=!0;const{x:Te,y:U}=Bs(te.nativeEvent,E.current),{startX:ee,startY:re}=B,De={startX:ee,startY:re,x:Te<ee?Te:ee,y:U<re?U:re,width:Math.abs(Te-ee),height:Math.abs(U-re)},Ye=k.current,ze=N.current;k.current=new Set(tP($,De,H,n===Yf.Partial,!0).map(We=>We.id)),N.current=new Set;const ie=(fe=Ne==null?void 0:Ne.selectable)!=null?fe:!0;for(const We of k.current){const Ue=se.get(We);if(Ue)for(const{edgeId:Ke}of Ue.values()){const he=Y.get(Ke);he&&((Se=he.selectable)!=null?Se:ie)&&N.current.add(Ke)}}if(!C2(Ye,k.current)){const We=Lu($,k.current,!0);ue(We)}if(!C2(ze,N.current)){const We=Lu(Y,N.current);Ce(We)}v.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},q=te=>{var H,$;if(te.button!==0||!z.current)return;($=(H=te.target)==null?void 0:H.releasePointerCapture)==null||$.call(H,te.pointerId);const{userSelectionRect:B}=v.getState();!y&&B&&te.target===S.current&&(O==null||O(te)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:k.current.size>0}),s==null||s(te),(t||i)&&(I.current=!1),z.current=!1},G=r===!0||Array.isArray(r)&&r.includes(0);return c.jsxs("div",{className:ir(["react-flow__pane",{draggable:G,dragging:x,selection:e}]),onClick:m?void 0:R0(O,S),onContextMenu:R0(M,S),onWheel:R0(K,S),onPointerEnter:m?void 0:d,onPointerDown:m?D:f,onPointerMove:m?L:f,onPointerUp:m?q:void 0,onPointerLeave:h,ref:S,style:Ly,children:[p,c.jsx(IV,{})]})}function cw({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",Ro.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):i([e])}function BP({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,nodeClickDistance:s}){const a=Cn(),[l,u]=j.useState(!1),d=j.useRef();return j.useEffect(()=>{d.current=oU({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{cw({id:f,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),j.useEffect(()=>{var f,h;if(t)(f=d.current)==null||f.destroy();else if(e.current)return(h=d.current)==null||h.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:i,nodeClickDistance:s}),()=>{var p;(p=d.current)==null||p.destroy()}},[n,r,t,o,e,i]),l}const $V=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function zP(){const e=Cn();return j.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:o,nodesDraggable:s,onError:a,updateNodePositions:l,nodeLookup:u,nodeOrigin:d}=e.getState(),f=new Map,h=$V(s),p=i?o[0]:5,v=i?o[1]:5,y=n.direction.x*p*n.factor,w=n.direction.y*v*n.factor;for(const[,x]of u){if(!h(x))continue;let b={x:x.internals.positionAbsolute.x+y,y:x.internals.positionAbsolute.y+w};i&&(b=Oy(b,o));const{position:m,positionAbsolute:S}=nP({nodeId:x.id,nextPosition:b,nodeLookup:u,nodeExtent:r,nodeOrigin:d,onError:a});x.position=m,x.internals.positionAbsolute=S,f.set(x.id,x)}l(f)},[])}const H1=j.createContext(null),MV=H1.Provider;H1.Consumer;const W1=()=>j.useContext(H1),DV=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),LV=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:o,connection:s}=r,{fromHandle:a,toHandle:l,isValid:u}=s,d=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:d,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:o===yc.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:d&&u}};function FV({type:e="source",position:t=ye.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:l,className:u,onMouseDown:d,onTouchStart:f,...h},p){var q,G;const v=s||null,y=e==="target",w=Cn(),x=W1(),{connectOnClick:b,noPanClassName:m,rfId:S}=en(DV,qn),{connectingFrom:E,connectingTo:k,clickConnecting:N,isPossibleEndHandle:I,connectionInProcess:z,clickConnectionInProcess:O,valid:M}=en(LV(x,v,e),qn);x||(G=(q=w.getState()).onError)==null||G.call(q,"010",Ro.error010());const K=te=>{const{defaultEdgeOptions:B,onConnect:H,hasDefaultEdges:$}=w.getState(),Y={...B,...te};if($){const{edges:se,setEdges:ue}=w.getState();ue(pP(Y,se))}H==null||H(Y),a==null||a(Y)},D=te=>{if(!x)return;const B=cP(te.nativeEvent);if(i&&(B&&te.button===0||!B)){const H=w.getState();uw.onPointerDown(te.nativeEvent,{autoPanOnConnect:H.autoPanOnConnect,connectionMode:H.connectionMode,connectionRadius:H.connectionRadius,domNode:H.domNode,nodeLookup:H.nodeLookup,lib:H.lib,isTarget:y,handleId:v,nodeId:x,flowId:H.rfId,panBy:H.panBy,cancelConnection:H.cancelConnection,onConnectStart:H.onConnectStart,onConnectEnd:H.onConnectEnd,updateConnection:H.updateConnection,onConnect:K,isValidConnection:n||H.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:H.autoPanSpeed})}B?d==null||d(te):f==null||f(te)},L=te=>{const{onClickConnectStart:B,onClickConnectEnd:H,connectionClickStartHandle:$,connectionMode:Y,isValidConnection:se,lib:ue,rfId:Ce,nodeLookup:Ne,connection:Te}=w.getState();if(!x||!$&&!i)return;if(!$){B==null||B(te.nativeEvent,{nodeId:x,handleId:v,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:x,type:e,id:v}});return}const U=lP(te.target),ee=n||se,{connection:re,isValid:De}=uw.isValid(te.nativeEvent,{handle:{nodeId:x,id:v,type:e},connectionMode:Y,fromNodeId:$.nodeId,fromHandleId:$.id||null,fromType:$.type,isValidConnection:ee,flowId:Ce,doc:U,lib:ue,nodeLookup:Ne});De&&re&&K(re);const Ye=structuredClone(Te);delete Ye.inProgress,Ye.toPosition=Ye.toHandle?Ye.toHandle.position:null,H==null||H(te,Ye),w.setState({connectionClickStartHandle:null})};return c.jsx("div",{"data-handleid":v,"data-nodeid":x,"data-handlepos":t,"data-id":"".concat(S,"-").concat(x,"-").concat(v,"-").concat(e),className:ir(["react-flow__handle","react-flow__handle-".concat(t),"nodrag",m,u,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:o,clickconnecting:N,connectingfrom:E,connectingto:k,valid:M,connectionindicator:r&&(!z||I)&&(z||O?o:i)}]),onMouseDown:D,onTouchStart:D,onClick:b?L:void 0,ref:p,...h,children:l})}const Re=j.memo(LP(FV));function BV({data:e,isConnectable:t,sourcePosition:n=ye.Bottom}){return c.jsxs(c.Fragment,{children:[e==null?void 0:e.label,c.jsx(Re,{type:"source",position:n,isConnectable:t})]})}function zV({data:e,isConnectable:t,targetPosition:n=ye.Top,sourcePosition:r=ye.Bottom}){return c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,c.jsx(Re,{type:"source",position:r,isConnectable:t})]})}function HV(){return null}function WV({data:e,isConnectable:t,targetPosition:n=ye.Top}){return c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const hm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},J2={input:BV,default:zV,output:WV,group:HV};function UV(e){var t,n,r,i,o,s,a,l,u,d;return e.internals.handleBounds===void 0?{width:(r=(t=e.width)!=null?t:e.initialWidth)!=null?r:(n=e.style)==null?void 0:n.width,height:(s=(i=e.height)!=null?i:e.initialHeight)!=null?s:(o=e.style)==null?void 0:o.height}:{width:(l=e.width)!=null?l:(a=e.style)==null?void 0:a.width,height:(d=e.height)!=null?d:(u=e.style)==null?void 0:u.height}}const VV=e=>{const{width:t,height:n,x:r,y:i}=Eh(e.nodeLookup,{filter:o=>!!o.selected});return{width:So(t)?t:null,height:So(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(i,"px)")}};function qV({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Cn(),{width:i,height:o,transformString:s,userSelectionActive:a}=en(VV,qn),l=zP(),u=j.useRef(null);if(j.useEffect(()=>{var h;n||(h=u.current)==null||h.focus({preventScroll:!0})},[n]),BP({nodeRef:u}),a||!i||!o)return null;const d=e?h=>{const p=r.getState().nodes.filter(v=>v.selected);e(h,p)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(hm,h.key)&&(h.preventDefault(),l({direction:hm[h.key],factor:h.shiftKey?4:1}))};return c.jsx("div",{className:ir(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:c.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:o}})})}const Q2=typeof window<"u"?window:void 0,KV=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function HP({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:d,selectionMode:f,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:x,zoomOnScroll:b,zoomOnPinch:m,panOnScroll:S,panOnScrollSpeed:E,panOnScrollMode:k,zoomOnDoubleClick:N,panOnDrag:I,defaultViewport:z,translateExtent:O,minZoom:M,maxZoom:K,preventScrolling:D,onSelectionContextMenu:L,noWheelClassName:q,noPanClassName:G,disableKeyboardA11y:te,onViewportChange:B,isControlledViewport:H}){const{nodesSelectionActive:$,userSelectionActive:Y}=en(KV),se=Qf(u,{target:Q2}),ue=Qf(y,{target:Q2}),Ce=ue||I,Ne=ue||S,Te=d&&Ce!==!0,U=se||Y||Te;return jV({deleteKeyCode:l,multiSelectionKeyCode:v}),c.jsx(RV,{onPaneContextMenu:o,elementsSelectable:x,zoomOnScroll:b,zoomOnPinch:m,panOnScroll:Ne,panOnScrollSpeed:E,panOnScrollMode:k,zoomOnDoubleClick:N,panOnDrag:!se&&Ce,defaultViewport:z,translateExtent:O,minZoom:M,maxZoom:K,zoomActivationKeyCode:w,preventScrolling:D,noWheelClassName:q,noPanClassName:G,onViewportChange:B,isControlledViewport:H,paneClickDistance:a,children:c.jsxs(OV,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:Ce,isSelecting:!!U,selectionMode:f,selectionKeyPressed:se,selectionOnDrag:Te,children:[e,$&&c.jsx(qV,{onSelectionContextMenu:L,noPanClassName:G,disableKeyboardA11y:te})]})})}HP.displayName="FlowRenderer";const GV=j.memo(HP),YV=e=>t=>e?tP(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function XV(e){return en(j.useCallback(YV(e),[e]),qn)}const JV=e=>e.updateNodeInternals;function QV(){const e=en(JV),[t]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const o=i.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:i.target,force:!0})}),e(r)}));return j.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function ZV({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=Cn(),o=j.useRef(null),s=j.useRef(null),a=j.useRef(e.sourcePosition),l=j.useRef(e.targetPosition),u=j.useRef(t),d=n&&!!e.internals.handleBounds;return j.useEffect(()=>{o.current&&!e.hidden&&(!d||s.current!==o.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(o.current),s.current=o.current)},[d,e.hidden]),j.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),j.useEffect(()=>{if(o.current){const f=u.current!==t,h=a.current!==e.sourcePosition,p=l.current!==e.targetPosition;(f||h||p)&&(u.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function eq({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:o,onDoubleClick:s,nodesDraggable:a,elementsSelectable:l,nodesConnectable:u,nodesFocusable:d,resizeObserver:f,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:v,rfId:y,nodeTypes:w,nodeClickDistance:x,onError:b}){var U,ee;const{node:m,internals:S,isParent:E}=en(re=>{const De=re.nodeLookup.get(e),Ye=re.parentLookup.has(e);return{node:De,internals:De.internals,isParent:Ye}},qn);let k=m.type||"default",N=(w==null?void 0:w[k])||J2[k];N===void 0&&(b==null||b("003",Ro.error003(k)),k="default",N=J2.default);const I=!!(m.draggable||a&&typeof m.draggable>"u"),z=!!(m.selectable||l&&typeof m.selectable>"u"),O=!!(m.connectable||u&&typeof m.connectable>"u"),M=!!(m.focusable||d&&typeof m.focusable>"u"),K=Cn(),D=sP(m),L=ZV({node:m,nodeType:k,hasDimensions:D,resizeObserver:f}),q=BP({nodeRef:L,disabled:m.hidden||!I,noDragClassName:h,handleSelector:m.dragHandle,nodeId:e,isSelectable:z,nodeClickDistance:x}),G=zP();if(m.hidden)return null;const te=ia(m),B=UV(m),H=z||I||t||n||r||i,$=n?re=>n(re,{...S.userNode}):void 0,Y=r?re=>r(re,{...S.userNode}):void 0,se=i?re=>i(re,{...S.userNode}):void 0,ue=o?re=>o(re,{...S.userNode}):void 0,Ce=s?re=>s(re,{...S.userNode}):void 0,Ne=re=>{const{selectNodesOnDrag:De,nodeDragThreshold:Ye}=K.getState();z&&(!De||!I||Ye>0)&&cw({id:e,store:K,nodeRef:L}),t&&t(re,{...S.userNode})},Te=re=>{if(!(uP(re.nativeEvent)||v))if(JI.includes(re.key)&&z){const De=re.key==="Escape";cw({id:e,store:K,unselect:De,nodeRef:L})}else I&&m.selected&&Object.prototype.hasOwnProperty.call(hm,re.key)&&(re.preventDefault(),K.setState({ariaLiveMessage:"Moved selected node ".concat(re.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~S.positionAbsolute.x,", y: ").concat(~~S.positionAbsolute.y)}),G({direction:hm[re.key],factor:re.shiftKey?4:1}))};return c.jsx("div",{className:ir(["react-flow__node","react-flow__node-".concat(k),{[p]:I},m.className,{selected:m.selected,selectable:z,parent:E,draggable:I,dragging:q}]),ref:L,style:{zIndex:S.z,transform:"translate(".concat(S.positionAbsolute.x,"px,").concat(S.positionAbsolute.y,"px)"),pointerEvents:H?"all":"none",visibility:D?"visible":"hidden",...m.style,...B},"data-id":e,"data-testid":"rf__node-".concat(e),onMouseEnter:$,onMouseMove:Y,onMouseLeave:se,onContextMenu:ue,onClick:Ne,onDoubleClick:Ce,onKeyDown:M?Te:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":v?void 0:"".concat(IP,"-").concat(y),"aria-label":m.ariaLabel,children:c.jsx(MV,{value:e,children:c.jsx(N,{id:e,data:m.data,type:k,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:(U=m.selected)!=null?U:!1,selectable:z,draggable:I,deletable:(ee=m.deletable)!=null?ee:!0,isConnectable:O,sourcePosition:m.sourcePosition,targetPosition:m.targetPosition,dragging:q,dragHandle:m.dragHandle,zIndex:S.z,parentId:m.parentId,...te})})})}const tq=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function WP(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:o}=en(tq,qn),s=XV(e.onlyRenderVisibleElements),a=QV();return c.jsx("div",{className:"react-flow__nodes",style:Ly,children:s.map(l=>c.jsx(eq,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:o},l))})}WP.displayName="NodeRenderer";const nq=j.memo(WP);function rq(e){return en(j.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const o=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);o&&s&&WW({sourceNode:o,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),qn)}const iq=({color:e="none",strokeWidth:t=1})=>c.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),oq=({color:e="none",strokeWidth:t=1})=>c.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Z2={[um.Arrow]:iq,[um.ArrowClosed]:oq};function sq(e){const t=Cn();return j.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(Z2,e)?Z2[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",Ro.error009(e)),null)},[e])}const aq=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const l=sq(t);return l?c.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:"".concat(r),markerHeight:"".concat(i),viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:c.jsx(l,{color:n,strokeWidth:s})}):null},UP=({defaultColor:e,rfId:t})=>{const n=en(o=>o.edges),r=en(o=>o.defaultEdgeOptions),i=j.useMemo(()=>XW(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?c.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:c.jsx("defs",{children:i.map(o=>c.jsx(aq,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};UP.displayName="MarkerDefinitions";var lq=j.memo(UP);function VP({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:o,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...d}){const[f,h]=j.useState({x:1,y:0,width:0,height:0}),p=ir(["react-flow__edge-textwrapper",u]),v=j.useRef(null);return j.useEffect(()=>{if(v.current){const y=v.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),n?c.jsxs("g",{transform:"translate(".concat(e-f.width/2," ").concat(t-f.height/2,")"),className:p,visibility:f.width?"visible":"hidden",...d,children:[i&&c.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),c.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:v,style:r,children:n}),l]}):null}VP.displayName="EdgeText";const uq=j.memo(VP);function Fy({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:u=20,...d}){return c.jsxs(c.Fragment,{children:[c.jsx("path",{...d,d:e,fill:"none",className:ir(["react-flow__edge-path",d.className])}),u&&c.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&So(t)&&So(n)?c.jsx(uq,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function eC({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===ye.Left||e===ye.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function qP({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top}){const[s,a]=eC({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=eC({pos:o,x1:r,y1:i,x2:e,y2:t}),[d,f,h,p]=dP({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:u});return["M".concat(e,",").concat(t," C").concat(s,",").concat(a," ").concat(l,",").concat(u," ").concat(r,",").concat(i),d,f,h,p]}function KP(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s,targetPosition:a,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:w,interactionWidth:x})=>{const[b,m,S]=qP({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a}),E=e.isInternal?void 0:t;return c.jsx(Fy,{id:E,path:b,labelX:m,labelY:S,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:w,interactionWidth:x})})}const cq=KP({isInternal:!1}),GP=KP({isInternal:!0});cq.displayName="SimpleBezierEdge";GP.displayName="SimpleBezierEdgeInternal";function YP(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,sourcePosition:p=ye.Bottom,targetPosition:v=ye.Top,markerEnd:y,markerStart:w,pathOptions:x,interactionWidth:b})=>{const[m,S,E]=sw({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:o,targetPosition:v,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset}),k=e.isInternal?void 0:t;return c.jsx(Fy,{id:k,path:m,labelX:S,labelY:E,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:y,markerStart:w,interactionWidth:b})})}const XP=YP({isInternal:!1}),JP=YP({isInternal:!0});XP.displayName="SmoothStepEdge";JP.displayName="SmoothStepEdgeInternal";function QP(e){return j.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return c.jsx(XP,{...n,id:r,pathOptions:j.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const dq=QP({isInternal:!1}),ZP=QP({isInternal:!0});dq.displayName="StepEdge";ZP.displayName="StepEdgeInternal";function e4(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,interactionWidth:y})=>{const[w,x,b]=gP({sourceX:n,sourceY:r,targetX:i,targetY:o}),m=e.isInternal?void 0:t;return c.jsx(Fy,{id:m,path:w,labelX:x,labelY:b,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:v,interactionWidth:y})})}const fq=e4({isInternal:!1}),t4=e4({isInternal:!0});fq.displayName="StraightEdge";t4.displayName="StraightEdgeInternal";function n4(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s=ye.Bottom,targetPosition:a=ye.Top,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:w,pathOptions:x,interactionWidth:b})=>{const[m,S,E]=fP({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a,curvature:x==null?void 0:x.curvature}),k=e.isInternal?void 0:t;return c.jsx(Fy,{id:k,path:m,labelX:S,labelY:E,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:v,markerEnd:y,markerStart:w,interactionWidth:b})})}const hq=n4({isInternal:!1}),r4=n4({isInternal:!0});hq.displayName="BezierEdge";r4.displayName="BezierEdgeInternal";const tC={default:r4,straight:t4,step:ZP,smoothstep:JP,simplebezier:GP},nC={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},pq=(e,t,n)=>n===ye.Left?e-t:n===ye.Right?e+t:e,gq=(e,t,n)=>n===ye.Top?e-t:n===ye.Bottom?e+t:e,rC="react-flow__edgeupdater";function iC({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a}){return c.jsx("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:ir([rC,"".concat(rC,"-").concat(a)]),cx:pq(t,r,e),cy:gq(n,r,e),r,stroke:"transparent",fill:"transparent"})}function mq({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a,targetPosition:l,onReconnect:u,onReconnectStart:d,onReconnectEnd:f,setReconnecting:h,setUpdateHover:p}){const v=Cn(),y=(S,E)=>{if(S.button!==0)return;const{autoPanOnConnect:k,domNode:N,isValidConnection:I,connectionMode:z,connectionRadius:O,lib:M,onConnectStart:K,onConnectEnd:D,cancelConnection:L,nodeLookup:q,rfId:G,panBy:te,updateConnection:B}=v.getState(),H=E.type==="target";h(!0),d==null||d(S,n,E.type);const $=(se,ue)=>{h(!1),f==null||f(se,n,E.type,ue)},Y=se=>u==null?void 0:u(n,se);uw.onPointerDown(S.nativeEvent,{autoPanOnConnect:k,connectionMode:z,connectionRadius:O,domNode:N,handleId:E.id,nodeId:E.nodeId,nodeLookup:q,isTarget:H,edgeUpdaterType:E.type,lib:M,flowId:G,cancelConnection:L,panBy:te,isValidConnection:I,onConnect:Y,onConnectStart:K,onConnectEnd:D,onReconnectEnd:$,updateConnection:B,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle})},w=S=>{var E;return y(S,{nodeId:n.target,id:(E=n.targetHandle)!=null?E:null,type:"target"})},x=S=>{var E;return y(S,{nodeId:n.source,id:(E=n.sourceHandle)!=null?E:null,type:"source"})},b=()=>p(!0),m=()=>p(!1);return c.jsxs(c.Fragment,{children:[(e===!0||e==="source")&&c.jsx(iC,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:b,onMouseOut:m,type:"source"}),(e===!0||e==="target")&&c.jsx(iC,{position:l,centerX:o,centerY:s,radius:t,onMouseDown:x,onMouseEnter:b,onMouseOut:m,type:"target"})]})}function yq({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:v,edgeTypes:y,noPanClassName:w,onError:x,disableKeyboardA11y:b}){var ze;let m=en(ie=>ie.edgeLookup.get(e));const S=en(ie=>ie.defaultEdgeOptions);m=S?{...S,...m}:m;let E=m.type||"default",k=(y==null?void 0:y[E])||tC[E];k===void 0&&(x==null||x("011",Ro.error011(E)),E="default",k=tC.default);const N=!!(m.focusable||t&&typeof m.focusable>"u"),I=typeof f<"u"&&(m.reconnectable||n&&typeof m.reconnectable>"u"),z=!!(m.selectable||r&&typeof m.selectable>"u"),O=j.useRef(null),[M,K]=j.useState(!1),[D,L]=j.useState(!1),q=Cn(),{zIndex:G,sourceX:te,sourceY:B,targetX:H,targetY:$,sourcePosition:Y,targetPosition:se}=en(j.useCallback(ie=>{const fe=ie.nodeLookup.get(m.source),Se=ie.nodeLookup.get(m.target);if(!fe||!Se)return{zIndex:m.zIndex,...nC};const We=YW({id:e,sourceNode:fe,targetNode:Se,sourceHandle:m.sourceHandle||null,targetHandle:m.targetHandle||null,connectionMode:ie.connectionMode,onError:x});return{zIndex:HW({selected:m.selected,zIndex:m.zIndex,sourceNode:fe,targetNode:Se,elevateOnSelect:ie.elevateEdgesOnSelect}),...We||nC}},[m.source,m.target,m.sourceHandle,m.targetHandle,m.selected,m.zIndex]),qn),ue=j.useMemo(()=>m.markerStart?"url('#".concat(aw(m.markerStart,v),"')"):void 0,[m.markerStart,v]),Ce=j.useMemo(()=>m.markerEnd?"url('#".concat(aw(m.markerEnd,v),"')"):void 0,[m.markerEnd,v]);if(m.hidden||te===null||B===null||H===null||$===null)return null;const Ne=ie=>{var Ue;const{addSelectedEdges:fe,unselectNodesAndEdges:Se,multiSelectionActive:We}=q.getState();z&&(q.setState({nodesSelectionActive:!1}),m.selected&&We?(Se({nodes:[],edges:[m]}),(Ue=O.current)==null||Ue.blur()):fe([e])),i&&i(ie,m)},Te=o?ie=>{o(ie,{...m})}:void 0,U=s?ie=>{s(ie,{...m})}:void 0,ee=a?ie=>{a(ie,{...m})}:void 0,re=l?ie=>{l(ie,{...m})}:void 0,De=u?ie=>{u(ie,{...m})}:void 0,Ye=ie=>{var fe;if(!b&&JI.includes(ie.key)&&z){const{unselectNodesAndEdges:Se,addSelectedEdges:We}=q.getState();ie.key==="Escape"?((fe=O.current)==null||fe.blur(),Se({edges:[m]})):We([e])}};return c.jsx("svg",{style:{zIndex:G},children:c.jsxs("g",{className:ir(["react-flow__edge","react-flow__edge-".concat(E),m.className,w,{selected:m.selected,animated:m.animated,inactive:!z&&!i,updating:M,selectable:z}]),onClick:Ne,onDoubleClick:Te,onContextMenu:U,onMouseEnter:ee,onMouseMove:re,onMouseLeave:De,onKeyDown:N?Ye:void 0,tabIndex:N?0:void 0,role:N?"button":"img","data-id":e,"data-testid":"rf__edge-".concat(e),"aria-label":m.ariaLabel===null?void 0:m.ariaLabel||"Edge from ".concat(m.source," to ").concat(m.target),"aria-describedby":N?"".concat(PP,"-").concat(v):void 0,ref:O,children:[!D&&c.jsx(k,{id:e,source:m.source,target:m.target,type:m.type,selected:m.selected,animated:m.animated,selectable:z,deletable:(ze=m.deletable)!=null?ze:!0,label:m.label,labelStyle:m.labelStyle,labelShowBg:m.labelShowBg,labelBgStyle:m.labelBgStyle,labelBgPadding:m.labelBgPadding,labelBgBorderRadius:m.labelBgBorderRadius,sourceX:te,sourceY:B,targetX:H,targetY:$,sourcePosition:Y,targetPosition:se,data:m.data,style:m.style,sourceHandleId:m.sourceHandle,targetHandleId:m.targetHandle,markerStart:ue,markerEnd:Ce,pathOptions:"pathOptions"in m?m.pathOptions:void 0,interactionWidth:m.interactionWidth}),I&&c.jsx(mq,{edge:m,isReconnectable:I,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:te,sourceY:B,targetX:H,targetY:$,sourcePosition:Y,targetPosition:se,setUpdateHover:K,setReconnecting:L})]})})}const vq=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function i4({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:v,disableKeyboardA11y:y}){const{edgesFocusable:w,edgesReconnectable:x,elementsSelectable:b,onError:m}=en(vq,qn),S=rq(t);return c.jsxs("div",{className:"react-flow__edges",children:[c.jsx(lq,{defaultColor:e,rfId:n}),S.map(E=>c.jsx(yq,{id:E,edgesFocusable:w,edgesReconnectable:x,elementsSelectable:b,noPanClassName:i,onReconnect:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:d,reconnectRadius:f,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:v,rfId:n,onError:m,edgeTypes:r,disableKeyboardA11y:y},E))]})}i4.displayName="EdgeRenderer";const xq=j.memo(i4),bq=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function wq({children:e}){const t=en(bq);return c.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function _q(e){const t=gn(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Sq=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Eq(e){const t=en(Sq),n=Cn();return j.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function kq(e){return e.connection.inProgress?{...e.connection,to:kh(e.connection.to,e.transform)}:{...e.connection}}function Cq(e){return kq}function jq(e){const t=Cq();return en(t,qn)}const Aq=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Nq({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:o,height:s,isValid:a,inProgress:l}=en(Aq,qn);return!(o&&i&&l)?null:c.jsx("svg",{style:e,width:o,height:s,className:"react-flow__connectionline react-flow__container",children:c.jsx("g",{className:ir(["react-flow__connection",ZI(a)]),children:c.jsx(o4,{style:t,type:n,CustomComponent:r,isValid:a})})})}const o4=({style:e,type:t=Sa.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:o,fromNode:s,fromHandle:a,fromPosition:l,to:u,toNode:d,toHandle:f,toPosition:h}=jq();if(!i)return;if(n)return c.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:h,connectionStatus:ZI(r),toNode:d,toHandle:f});let p="";const v={sourceX:o.x,sourceY:o.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:h};switch(t){case Sa.Bezier:[p]=fP(v);break;case Sa.SimpleBezier:[p]=qP(v);break;case Sa.Step:[p]=sw({...v,borderRadius:0});break;case Sa.SmoothStep:[p]=sw(v);break;default:[p]=gP(v)}return c.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};o4.displayName="ConnectionLine";const Rq={};function oC(e=Rq){j.useRef(e),Cn(),j.useEffect(()=>{},[e])}function Tq(){Cn(),j.useRef(!1),j.useEffect(()=>{},[])}function s4({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:o,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:p,connectionLineType:v,connectionLineStyle:y,connectionLineComponent:w,connectionLineContainerStyle:x,selectionKeyCode:b,selectionOnDrag:m,selectionMode:S,multiSelectionKeyCode:E,panActivationKeyCode:k,zoomActivationKeyCode:N,deleteKeyCode:I,onlyRenderVisibleElements:z,elementsSelectable:O,defaultViewport:M,translateExtent:K,minZoom:D,maxZoom:L,preventScrolling:q,defaultMarkerColor:G,zoomOnScroll:te,zoomOnPinch:B,panOnScroll:H,panOnScrollSpeed:$,panOnScrollMode:Y,zoomOnDoubleClick:se,panOnDrag:ue,onPaneClick:Ce,onPaneMouseEnter:Ne,onPaneMouseMove:Te,onPaneMouseLeave:U,onPaneScroll:ee,onPaneContextMenu:re,paneClickDistance:De,nodeClickDistance:Ye,onEdgeContextMenu:ze,onEdgeMouseEnter:ie,onEdgeMouseMove:fe,onEdgeMouseLeave:Se,reconnectRadius:We,onReconnect:Ue,onReconnectStart:Ke,onReconnectEnd:he,noDragClassName:Be,noWheelClassName:qe,noPanClassName:$e,disableKeyboardA11y:Nt,nodeExtent:yn,rfId:Ct,viewport:rn,onViewportChange:F}){return oC(e),oC(t),Tq(),_q(n),Eq(rn),c.jsx(GV,{onPaneClick:Ce,onPaneMouseEnter:Ne,onPaneMouseMove:Te,onPaneMouseLeave:U,onPaneContextMenu:re,onPaneScroll:ee,paneClickDistance:De,deleteKeyCode:I,selectionKeyCode:b,selectionOnDrag:m,selectionMode:S,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:E,panActivationKeyCode:k,zoomActivationKeyCode:N,elementsSelectable:O,zoomOnScroll:te,zoomOnPinch:B,zoomOnDoubleClick:se,panOnScroll:H,panOnScrollSpeed:$,panOnScrollMode:Y,panOnDrag:ue,defaultViewport:M,translateExtent:K,minZoom:D,maxZoom:L,onSelectionContextMenu:f,preventScrolling:q,noDragClassName:Be,noWheelClassName:qe,noPanClassName:$e,disableKeyboardA11y:Nt,onViewportChange:F,isControlledViewport:!!rn,children:c.jsxs(wq,{children:[c.jsx(xq,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:Ue,onReconnectStart:Ke,onReconnectEnd:he,onlyRenderVisibleElements:z,onEdgeContextMenu:ze,onEdgeMouseEnter:ie,onEdgeMouseMove:fe,onEdgeMouseLeave:Se,reconnectRadius:We,defaultMarkerColor:G,noPanClassName:$e,disableKeyboardA11y:Nt,rfId:Ct}),c.jsx(Nq,{style:y,type:v,component:w,containerStyle:x}),c.jsx("div",{className:"react-flow__edgelabel-renderer"}),c.jsx(nq,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:Ye,onlyRenderVisibleElements:z,noPanClassName:$e,noDragClassName:Be,disableKeyboardA11y:Nt,nodeExtent:yn,rfId:Ct}),c.jsx("div",{className:"react-flow__viewport-portal"})]})})}s4.displayName="GraphView";const Iq=j.memo(s4),sC=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l=.5,maxZoom:u=2,nodeOrigin:d,nodeExtent:f}={})=>{var k,N,I;const h=new Map,p=new Map,v=new Map,y=new Map,w=(k=r!=null?r:t)!=null?k:[],x=(N=n!=null?n:e)!=null?N:[],b=d!=null?d:[0,0],m=f!=null?f:Gf;yP(v,y,w);const S=lw(x,h,p,{nodeOrigin:b,nodeExtent:m,elevateNodesOnSelect:!1});let E=[0,0,1];if(s&&i&&o){const z=Eh(h,{filter:D=>!!((D.width||D.initialWidth)&&(D.height||D.initialHeight))}),{x:O,y:M,zoom:K}=M1(z,i,o,l,u,(I=a==null?void 0:a.padding)!=null?I:.1);E=[O,M,K]}return{rfId:"1",width:0,height:0,transform:E,nodes:x,nodesInitialized:S,nodeLookup:h,parentLookup:p,edges:w,edgeLookup:y,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:u,translateExtent:Gf,nodeExtent:m,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:yc.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s!=null?s:!1,fitViewOptions:a,fitViewResolver:null,connection:{...QI},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:DW,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Pq=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:d,nodeExtent:f})=>QU((h,p)=>{async function v(){const{nodeLookup:y,panZoom:w,fitViewOptions:x,fitViewResolver:b,width:m,height:S,minZoom:E,maxZoom:k}=p();w&&(await $W({nodes:y,width:m,height:S,panZoom:w,minZoom:E,maxZoom:k},x),b==null||b.resolve(!0),h({fitViewResolver:null}))}return{...sC({nodes:e,edges:t,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:d,nodeExtent:f,defaultNodes:n,defaultEdges:r}),setNodes:y=>{const{nodeLookup:w,parentLookup:x,nodeOrigin:b,elevateNodesOnSelect:m,fitViewQueued:S}=p(),E=lw(y,w,x,{nodeOrigin:b,nodeExtent:f,elevateNodesOnSelect:m,checkEquality:!0});S&&E?(v(),h({nodes:y,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:y,nodesInitialized:E})},setEdges:y=>{const{connectionLookup:w,edgeLookup:x}=p();yP(w,x,y),h({edges:y})},setDefaultNodesAndEdges:(y,w)=>{if(y){const{setNodes:x}=p();x(y),h({hasDefaultNodes:!0})}if(w){const{setEdges:x}=p();x(w),h({hasDefaultEdges:!0})}},updateNodeInternals:y=>{const{triggerNodeChanges:w,nodeLookup:x,parentLookup:b,domNode:m,nodeOrigin:S,nodeExtent:E,debug:k,fitViewQueued:N}=p(),{changes:I,updatedInternals:z}=tU(y,x,b,m,S,E);z&&(QW(x,b,{nodeOrigin:S,nodeExtent:E}),N?(v(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(I==null?void 0:I.length)>0&&(k&&console.log("React Flow: trigger node changes",I),w==null||w(I)))},updateNodePositions:(y,w=!1)=>{var E,k;const x=[],b=[],{nodeLookup:m,triggerNodeChanges:S}=p();for(const[N,I]of y){const z=m.get(N),O=!!(z!=null&&z.expandParent&&(z!=null&&z.parentId)&&(I!=null&&I.position)),M={id:N,type:"position",position:O?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:w};O&&z.parentId&&x.push({id:N,parentId:z.parentId,rect:{...I.internals.positionAbsolute,width:(E=I.measured.width)!=null?E:0,height:(k=I.measured.height)!=null?k:0}}),b.push(M)}if(x.length>0){const{parentLookup:N,nodeOrigin:I}=p(),z=z1(x,m,N,I);b.push(...z)}S(b)},triggerNodeChanges:y=>{const{onNodesChange:w,setNodes:x,nodes:b,hasDefaultNodes:m,debug:S}=p();if(y!=null&&y.length){if(m){const E=MP(y,b);x(E)}S&&console.log("React Flow: trigger node changes",y),w==null||w(y)}},triggerEdgeChanges:y=>{const{onEdgesChange:w,setEdges:x,edges:b,hasDefaultEdges:m,debug:S}=p();if(y!=null&&y.length){if(m){const E=DP(y,b);x(E)}S&&console.log("React Flow: trigger edge changes",y),w==null||w(y)}},addSelectedNodes:y=>{const{multiSelectionActive:w,edgeLookup:x,nodeLookup:b,triggerNodeChanges:m,triggerEdgeChanges:S}=p();if(w){const E=y.map(k=>ml(k,!0));m(E);return}m(Lu(b,new Set([...y]),!0)),S(Lu(x))},addSelectedEdges:y=>{const{multiSelectionActive:w,edgeLookup:x,nodeLookup:b,triggerNodeChanges:m,triggerEdgeChanges:S}=p();if(w){const E=y.map(k=>ml(k,!0));S(E);return}S(Lu(x,new Set([...y]))),m(Lu(b,new Set,!0))},unselectNodesAndEdges:({nodes:y,edges:w}={})=>{const{edges:x,nodes:b,nodeLookup:m,triggerNodeChanges:S,triggerEdgeChanges:E}=p(),k=y||b,N=w||x,I=k.map(O=>{const M=m.get(O.id);return M&&(M.selected=!1),ml(O.id,!1)}),z=N.map(O=>ml(O.id,!1));S(I),E(z)},setMinZoom:y=>{const{panZoom:w,maxZoom:x}=p();w==null||w.setScaleExtent([y,x]),h({minZoom:y})},setMaxZoom:y=>{const{panZoom:w,minZoom:x}=p();w==null||w.setScaleExtent([x,y]),h({maxZoom:y})},setTranslateExtent:y=>{var w;(w=p().panZoom)==null||w.setTranslateExtent(y),h({translateExtent:y})},setPaneClickDistance:y=>{var w;(w=p().panZoom)==null||w.setClickDistance(y)},resetSelectedElements:()=>{const{edges:y,nodes:w,triggerNodeChanges:x,triggerEdgeChanges:b,elementsSelectable:m}=p();if(!m)return;const S=w.reduce((k,N)=>N.selected?[...k,ml(N.id,!1)]:k,[]),E=y.reduce((k,N)=>N.selected?[...k,ml(N.id,!1)]:k,[]);x(S),b(E)},setNodeExtent:y=>{const{nodes:w,nodeLookup:x,parentLookup:b,nodeOrigin:m,elevateNodesOnSelect:S,nodeExtent:E}=p();y[0][0]===E[0][0]&&y[0][1]===E[0][1]&&y[1][0]===E[1][0]&&y[1][1]===E[1][1]||(lw(w,x,b,{nodeOrigin:m,nodeExtent:y,elevateNodesOnSelect:S,checkEquality:!1}),h({nodeExtent:y}))},panBy:y=>{const{transform:w,width:x,height:b,panZoom:m,translateExtent:S}=p();return nU({delta:y,panZoom:m,transform:w,translateExtent:S,width:x,height:b})},cancelConnection:()=>{h({connection:{...QI}})},updateConnection:y=>{h({connection:y})},reset:()=>h({...sC()})}},Object.is);function Oq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:o,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:l,fitView:u,nodeOrigin:d,nodeExtent:f,children:h}){const[p]=j.useState(()=>Pq({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:u,minZoom:s,maxZoom:a,fitViewOptions:l,nodeOrigin:d,nodeExtent:f}));return c.jsx(ZU,{value:p,children:c.jsx(_V,{children:h})})}function $q({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:s,fitView:a,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:h}){return j.useContext(Dy)?c.jsx(c.Fragment,{children:e}):c.jsx(Oq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:s,fitView:a,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:d,nodeOrigin:f,nodeExtent:h,children:e})}const Mq={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Dq({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o,edgeTypes:s,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:b,onNodeMouseMove:m,onNodeMouseLeave:S,onNodeContextMenu:E,onNodeDoubleClick:k,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:z,onNodesDelete:O,onEdgesDelete:M,onDelete:K,onSelectionChange:D,onSelectionDragStart:L,onSelectionDrag:q,onSelectionDragStop:G,onSelectionContextMenu:te,onSelectionStart:B,onSelectionEnd:H,onBeforeDelete:$,connectionMode:Y,connectionLineType:se=Sa.Bezier,connectionLineStyle:ue,connectionLineComponent:Ce,connectionLineContainerStyle:Ne,deleteKeyCode:Te="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:ee=!1,selectionMode:re=Yf.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Ye=fm()?"Meta":"Control",zoomActivationKeyCode:ze=fm()?"Meta":"Control",snapToGrid:ie,snapGrid:fe,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:We,nodesDraggable:Ue,nodesConnectable:Ke,nodesFocusable:he,nodeOrigin:Be=OP,edgesFocusable:qe,edgesReconnectable:$e,elementsSelectable:Nt=!0,defaultViewport:yn=fV,minZoom:Ct=.5,maxZoom:rn=2,translateExtent:F=Gf,preventScrolling:A=!0,nodeExtent:R,defaultMarkerColor:J="#b1b1b7",zoomOnScroll:de=!0,zoomOnPinch:je=!0,panOnScroll:Fe=!1,panOnScrollSpeed:Rt=.5,panOnScrollMode:Gt=Il.Free,zoomOnDoubleClick:st=!0,panOnDrag:Jt=!0,onPaneClick:$t,onPaneMouseEnter:so,onPaneMouseMove:at,onPaneMouseLeave:Do,onPaneScroll:Lo,onPaneContextMenu:Fo,paneClickDistance:vs=0,nodeClickDistance:ao=0,children:aa,onReconnect:X,onReconnectStart:ne,onReconnectEnd:tt,onEdgeContextMenu:ot,onEdgeDoubleClick:mt,onEdgeMouseEnter:Ot,onEdgeMouseMove:Zt,onEdgeMouseLeave:xs,reconnectRadius:Er=10,onNodesChange:lo,onEdgesChange:Bo,noDragClassName:la="nodrag",noWheelClassName:Ur="nowheel",noPanClassName:Vr="nopan",fitView:mr,fitViewOptions:Si,connectOnClick:uo,attributionPosition:Qn,proOptions:kr,defaultEdgeOptions:co,elevateNodesOnSelect:cu,elevateEdgesOnSelect:rl,disableKeyboardA11y:vn=!1,autoPanOnConnect:Wi,autoPanOnNodeDrag:yr,autoPanSpeed:il,connectionRadius:qr,isValidConnection:ua,onError:zo,style:bs,id:Ui,nodeDragThreshold:du,viewport:Ho,onViewportChange:fu,width:Ut,height:V,colorMode:le="light",debug:Q,onScroll:ce,...we},pe){const Le=Ui||"1",Xe=mV(le),Qe=j.useCallback(Je=>{Je.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ce==null||ce(Je)},[ce]);return c.jsx("div",{"data-testid":"rf__wrapper",...we,onScroll:Qe,style:{...bs,...Mq},ref:pe,className:ir(["react-flow",i,Xe]),id:Ui,children:c.jsxs($q,{nodes:e,edges:t,width:Ut,height:V,fitView:mr,fitViewOptions:Si,minZoom:Ct,maxZoom:rn,nodeOrigin:Be,nodeExtent:R,children:[c.jsx(Iq,{onInit:u,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:b,onNodeMouseMove:m,onNodeMouseLeave:S,onNodeContextMenu:E,onNodeDoubleClick:k,nodeTypes:o,edgeTypes:s,connectionLineType:se,connectionLineStyle:ue,connectionLineComponent:Ce,connectionLineContainerStyle:Ne,selectionKeyCode:U,selectionOnDrag:ee,selectionMode:re,deleteKeyCode:Te,multiSelectionKeyCode:Ye,panActivationKeyCode:De,zoomActivationKeyCode:ze,onlyRenderVisibleElements:Se,defaultViewport:yn,translateExtent:F,minZoom:Ct,maxZoom:rn,preventScrolling:A,zoomOnScroll:de,zoomOnPinch:je,zoomOnDoubleClick:st,panOnScroll:Fe,panOnScrollSpeed:Rt,panOnScrollMode:Gt,panOnDrag:Jt,onPaneClick:$t,onPaneMouseEnter:so,onPaneMouseMove:at,onPaneMouseLeave:Do,onPaneScroll:Lo,onPaneContextMenu:Fo,paneClickDistance:vs,nodeClickDistance:ao,onSelectionContextMenu:te,onSelectionStart:B,onSelectionEnd:H,onReconnect:X,onReconnectStart:ne,onReconnectEnd:tt,onEdgeContextMenu:ot,onEdgeDoubleClick:mt,onEdgeMouseEnter:Ot,onEdgeMouseMove:Zt,onEdgeMouseLeave:xs,reconnectRadius:Er,defaultMarkerColor:J,noDragClassName:la,noWheelClassName:Ur,noPanClassName:Vr,rfId:Le,disableKeyboardA11y:vn,nodeExtent:R,viewport:Ho,onViewportChange:fu}),c.jsx(gV,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:Ue,nodesConnectable:Ke,nodesFocusable:he,edgesFocusable:qe,edgesReconnectable:$e,elementsSelectable:Nt,elevateNodesOnSelect:cu,elevateEdgesOnSelect:rl,minZoom:Ct,maxZoom:rn,nodeExtent:R,onNodesChange:lo,onEdgesChange:Bo,snapToGrid:ie,snapGrid:fe,connectionMode:Y,translateExtent:F,connectOnClick:uo,defaultEdgeOptions:co,fitView:mr,fitViewOptions:Si,onNodesDelete:O,onEdgesDelete:M,onDelete:K,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:z,onSelectionDrag:q,onSelectionDragStart:L,onSelectionDragStop:G,onMove:d,onMoveStart:f,onMoveEnd:h,noPanClassName:Vr,nodeOrigin:Be,rfId:Le,autoPanOnConnect:Wi,autoPanOnNodeDrag:yr,autoPanSpeed:il,onError:zo,connectionRadius:qr,isValidConnection:ua,selectNodesOnDrag:We,nodeDragThreshold:du,onBeforeDelete:$,paneClickDistance:vs,debug:Q}),c.jsx(dV,{onSelectionChange:D}),aa,c.jsx(sV,{proOptions:kr,position:Qn}),c.jsx(iV,{rfId:Le,disableKeyboardA11y:vn})]})})}var Lq=LP(Dq);function Hr(){const e=Cn();return j.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),i=Array.isArray(t)?t:[t],o=new Map;i.forEach(s=>{const a=n==null?void 0:n.querySelector('.react-flow__node[data-id="'.concat(s,'"]'));a&&o.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(o,{triggerFitView:!1}))},[])}const Fq=Ro.error014();function Mo({id:e,handleType:t,handleId:n,onConnect:r,onDisconnect:i}={}){const o=W1(),s=e!=null?e:o;if(!s)throw new Error(Fq);const a=j.useRef(null),l=en(u=>u.connectionLookup.get("".concat(s).concat(t?n?"-".concat(t,"-").concat(n):"-".concat(t):"")),RW);return j.useEffect(()=>{if(a.current&&a.current!==l){const u=l!=null?l:new Map;S2(a.current,u,i),S2(u,a.current,r)}a.current=l!=null?l:new Map},[l,r,i]),j.useMemo(()=>{var u;return Array.from((u=l==null?void 0:l.values())!=null?u:[])},[l])}function By(e){return en(j.useCallback(n=>{var s;const r=[],i=Array.isArray(e),o=i?e:[e];for(const a of o){const l=n.nodeLookup.get(a);l&&r.push({id:l.id,type:l.type,data:l.data})}return i?r:(s=r[0])!=null?s:null},[e]),rU)}function Bq({dimensions:e,lineWidth:t,variant:n,className:r}){return c.jsx("path",{strokeWidth:t,d:"M".concat(e[0]/2," 0 V").concat(e[1]," M0 ").concat(e[1]/2," H").concat(e[0]),className:ir(["react-flow__background-pattern",n,r])})}function zq({radius:e,className:t}){return c.jsx("circle",{cx:e,cy:e,r:e,className:ir(["react-flow__background-pattern","dots",t])})}var $a;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})($a||($a={}));const Hq={[$a.Dots]:1,[$a.Lines]:1,[$a.Cross]:6},Wq=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function a4({id:e,variant:t=$a.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=0,color:s,bgColor:a,style:l,className:u,patternClassName:d}){const f=j.useRef(null),{transform:h,patternId:p}=en(Wq,qn),v=r||Hq[t],y=t===$a.Dots,w=t===$a.Cross,x=Array.isArray(n)?n:[n,n],b=[x[0]*h[2]||1,x[1]*h[2]||1],m=v*h[2],S=Array.isArray(o)?o:[o,o],E=w?[m,m]:b,k=[S[0]*h[2]||1+E[0]/2,S[1]*h[2]||1+E[1]/2],N="".concat(p).concat(e||"");return c.jsxs("svg",{className:ir(["react-flow__background",u]),style:{...l,...Ly,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[c.jsx("pattern",{id:N,x:h[0]%b[0],y:h[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(k[0],",-").concat(k[1],")"),children:y?c.jsx(zq,{radius:m/2,className:d}):c.jsx(Bq,{dimensions:E,lineWidth:i,variant:t,className:d})}),c.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(N,")")})]})}a4.displayName="Background";const Uq=j.memo(a4);function Vq(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:c.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function qq(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:c.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Kq(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:c.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Gq(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Yq(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ep({children:e,className:t,...n}){return c.jsx("button",{type:"button",className:ir(["react-flow__controls-button",t]),...n,children:e})}const Xq=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function l4({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:u,children:d,position:f="bottom-left",orientation:h="vertical","aria-label":p="React Flow controls"}){const v=Cn(),{isInteractive:y,minZoomReached:w,maxZoomReached:x}=en(Xq,qn),{zoomIn:b,zoomOut:m,fitView:S}=gn(),E=()=>{b(),o==null||o()},k=()=>{m(),s==null||s()},N=()=>{S(i),a==null||a()},I=()=>{v.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)},z=h==="horizontal"?"horizontal":"vertical";return c.jsxs(Ch,{className:ir(["react-flow__controls",z,u]),position:f,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&c.jsxs(c.Fragment,{children:[c.jsx(Ep,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:c.jsx(Vq,{})}),c.jsx(Ep,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:c.jsx(qq,{})})]}),n&&c.jsx(Ep,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view",children:c.jsx(Kq,{})}),r&&c.jsx(Ep,{className:"react-flow__controls-interactive",onClick:I,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?c.jsx(Yq,{}):c.jsx(Gq,{})}),d]})}l4.displayName="Controls";const Jq=j.memo(l4);function Qq({id:e,x:t,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:l,className:u,borderRadius:d,shapeRendering:f,selected:h,onClick:p}){const{background:v,backgroundColor:y}=o||{},w=s||v||y;return c.jsx("rect",{className:ir(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:d,ry:d,width:r,height:i,style:{fill:w,stroke:a,strokeWidth:l},shapeRendering:f,onClick:p?x=>p(x,e):void 0})}const Zq=j.memo(Qq),eK=e=>e.nodes.map(t=>t.id),T0=e=>e instanceof Function?e:()=>e;function tK({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:o=Zq,onClick:s}){const a=en(eK,qn),l=T0(t),u=T0(e),d=T0(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return c.jsx(c.Fragment,{children:a.map(h=>c.jsx(rK,{id:h,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:o,onClick:s,shapeRendering:f},h))})}function nK({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:s,NodeComponent:a,onClick:l}){const{node:u,x:d,y:f,width:h,height:p}=en(v=>{const{internals:y}=v.nodeLookup.get(e),w=y.userNode,{x,y:b}=y.positionAbsolute,{width:m,height:S}=ia(w);return{node:w,x,y:b,width:m,height:S}},qn);return!u||u.hidden||!sP(u)?null:c.jsx(a,{x:d,y:f,width:h,height:p,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:o,shapeRendering:s,onClick:l,id:u.id})}const rK=j.memo(nK);var iK=j.memo(tK);const oK=200,sK=150,aK=e=>!e.hidden,lK=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?oP(Eh(e.nodeLookup,{filter:aK}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},uK="react-flow__minimap-desc";function u4({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:l,maskColor:u,maskStrokeColor:d,maskStrokeWidth:f,position:h="bottom-right",onClick:p,onNodeClick:v,pannable:y=!1,zoomable:w=!1,ariaLabel:x="React Flow mini map",inversePan:b,zoomStep:m=10,offsetScale:S=5}){var Ye,ze;const E=Cn(),k=j.useRef(null),{boundingRect:N,viewBB:I,rfId:z,panZoom:O,translateExtent:M,flowWidth:K,flowHeight:D}=en(lK,qn),L=(Ye=e==null?void 0:e.width)!=null?Ye:oK,q=(ze=e==null?void 0:e.height)!=null?ze:sK,G=N.width/L,te=N.height/q,B=Math.max(G,te),H=B*L,$=B*q,Y=S*B,se=N.x-(H-N.width)/2-Y,ue=N.y-($-N.height)/2-Y,Ce=H+Y*2,Ne=$+Y*2,Te="".concat(uK,"-").concat(z),U=j.useRef(0),ee=j.useRef();U.current=B,j.useEffect(()=>{if(k.current&&O)return ee.current=dU({domNode:k.current,panZoom:O,getTransform:()=>E.getState().transform,getViewScale:()=>U.current}),()=>{var ie;(ie=ee.current)==null||ie.destroy()}},[O]),j.useEffect(()=>{var ie;(ie=ee.current)==null||ie.update({translateExtent:M,width:K,height:D,inversePan:b,pannable:y,zoomStep:m,zoomable:w})},[y,w,b,m,M,K,D]);const re=p?ie=>{var We;const[fe,Se]=((We=ee.current)==null?void 0:We.pointer(ie))||[0,0];p(ie,{x:fe,y:Se})}:void 0,De=v?j.useCallback((ie,fe)=>{const Se=E.getState().nodeLookup.get(fe).internals.userNode;v(ie,Se)},[]):void 0;return c.jsx(Ch,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*B:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:ir(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:c.jsxs("svg",{width:L,height:q,viewBox:"".concat(se," ").concat(ue," ").concat(Ce," ").concat(Ne),className:"react-flow__minimap-svg",role:"img","aria-labelledby":Te,ref:k,onClick:re,children:[x&&c.jsx("title",{id:Te,children:x}),c.jsx(iK,{onClick:De,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),c.jsx("path",{className:"react-flow__minimap-mask",d:"M".concat(se-Y,",").concat(ue-Y,"h").concat(Ce+Y*2,"v").concat(Ne+Y*2,"h").concat(-Ce-Y*2,"z\n        M").concat(I.x,",").concat(I.y,"h").concat(I.width,"v").concat(I.height,"h").concat(-I.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}u4.displayName="MiniMap";const cK=j.memo(u4);function dK({nodeId:e,position:t,variant:n=tf.Handle,className:r,style:i={},children:o,color:s,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,shouldResize:p,onResizeStart:v,onResize:y,onResizeEnd:w}){const x=W1(),b=typeof e=="string"?e:x,m=Cn(),S=j.useRef(null),E=n===tf.Line?"right":"bottom-right",k=t!=null?t:E,N=j.useRef(null);j.useEffect(()=>{if(!(!S.current||!b))return N.current||(N.current=CU({domNode:S.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:M,transform:K,snapGrid:D,snapToGrid:L,nodeOrigin:q,domNode:G}=m.getState();return{nodeLookup:M,transform:K,snapGrid:D,snapToGrid:L,nodeOrigin:q,paneDomNode:G}},onChange:(M,K)=>{var $,Y,se,ue,Ce,Ne,Te;const{triggerNodeChanges:D,nodeLookup:L,parentLookup:q,nodeOrigin:G}=m.getState(),te=[],B={x:M.x,y:M.y},H=L.get(b);if(H&&H.expandParent&&H.parentId){const U=($=H.origin)!=null?$:G,ee=(se=(Y=M.width)!=null?Y:H.measured.width)!=null?se:0,re=(Ce=(ue=M.height)!=null?ue:H.measured.height)!=null?Ce:0,De={id:H.id,parentId:H.parentId,rect:{width:ee,height:re,...aP({x:(Ne=M.x)!=null?Ne:H.position.x,y:(Te=M.y)!=null?Te:H.position.y},{width:ee,height:re},H.parentId,L,U)}},Ye=z1([De],L,q,G);te.push(...Ye),B.x=M.x?Math.max(U[0]*ee,M.x):void 0,B.y=M.y?Math.max(U[1]*re,M.y):void 0}if(B.x!==void 0&&B.y!==void 0){const U={id:b,type:"position",position:{...B}};te.push(U)}if(M.width!==void 0&&M.height!==void 0){const ee={id:b,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:M.width,height:M.height}};te.push(ee)}for(const U of K){const ee={...U,type:"position"};te.push(ee)}D(te)},onEnd:({width:M,height:K})=>{const D={id:b,type:"dimensions",resizing:!1,dimensions:{width:M,height:K}};m.getState().triggerNodeChanges([D])}})),N.current.update({controlPosition:k,boundaries:{minWidth:a,minHeight:l,maxWidth:u,maxHeight:d},keepAspectRatio:f,resizeDirection:h,onResizeStart:v,onResize:y,onResizeEnd:w,shouldResize:p}),()=>{var M;(M=N.current)==null||M.destroy()}},[k,a,l,u,d,f,v,y,w,p]);const I=k.split("-"),z=n===tf.Line?"borderColor":"backgroundColor",O=s?{...i,[z]:s}:i;return c.jsx("div",{className:ir(["react-flow__resize-control","nodrag",...I,n,r]),ref:S,style:O,children:o})}j.memo(dK);function fK({id:e,top:t,left:n,right:r,bottom:i,...o}){const{getNode:s,setNodes:a,addNodes:l,setEdges:u}=gn(),d=j.useCallback(()=>{const p=s(e);if(!p)return;const v={x:p.position.x+50,y:p.position.y+50};l({...p,selected:!1,dragging:!1,id:"".concat(p.id,"-copy"),position:v})},[e,s,l]),f=j.useMemo(()=>{var p;return((p=s(e))==null?void 0:p.type)||""},[e,s]),h=j.useCallback(()=>{a(p=>p.filter(v=>v.id!==e)),u(p=>p.filter(v=>v.source!==e))},[e,a,u]);return c.jsx("div",{style:{position:"absolute",top:t,left:n,right:r,bottom:i,zIndex:9999},className:"context-menu",...o,children:c.jsxs("div",{children:[c.jsxs("p",{children:["node: ",e]}),["entry","output"].includes(f)?c.jsx(c.Fragment,{}):c.jsxs(c.Fragment,{children:[c.jsx("p",{color:"medium",onClick:d,children:"duplicate"}),c.jsx("p",{color:"danger",onClick:h,children:"delete"})]})]})})}function aC(e,t){return Math.floor(Math.random()*(t-e+1))+e}function hK({top:e,left:t,right:n,bottom:r,rawX:i,rawY:o,...s}){const{addNodes:a,getNodes:l,screenToFlowPosition:u}=gn(),d=j.useCallback(p=>{const v=l(),{x:y,y:w}=u({x:i,y:o});let x=""+aC(1,2e3);for(;v.find(m=>m.id===x);)x=""+aC(1,2e3);const b=z7(p);b&&a({id:x,type:p,data:b,position:{x:y,y:w},selected:!1,dragging:!1})},[a,l,u]),[f,h]=j.useState(-1);return c.jsx("div",{className:"absolute bg-black shadow-lg rounded-md p-2 text-sm context-menu",style:{top:e-50,left:t,right:n,bottom:r,zIndex:9999},...s,children:c.jsxs("ul",{children:[c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(1),onMouseLeave:()=>h(-1),children:["Character",f===1&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("get_character_data"),children:"Get Character Data"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("set_character_data"),children:"Set Character Data"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(2),onMouseLeave:()=>h(-1),children:["Page",f===2&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("get_page_data"),children:"Get Page Data"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("set_page_data"),children:"Set Page Data"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(3),onMouseLeave:()=>h(-1),children:["System",f===3&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("get_system_data"),children:"Get System Data"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("set_system_data"),children:"Set System Data"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(4),onMouseLeave:()=>h(-1),children:["Array",f===4&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("array_get"),children:"Get Item"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("add_to_array"),children:"Add Item"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("array_remove"),children:"Remove Item"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("array_update"),children:"Update Item"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("filter"),children:"Filter"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("map"),children:"Map"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(5),onMouseLeave:()=>h(-1),children:["Object",f===5&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("spread_object"),children:"Spread Object"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("create_data_from_type"),children:"Create Object From Type"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(6),onMouseLeave:()=>h(-1),children:["String",f===6&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("string_new"),children:"New String"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("string_includes"),children:"Includes"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("string_compare"),children:"Compare"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("string_concat"),children:"Concat"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(7),onMouseLeave:()=>h(-1),children:["Numbers",f===7&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("new_number"),children:"New Number"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("divide"),children:"Divide"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("add"),children:"Add"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("subtract"),children:"Subtract"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("multiply"),children:"Multiply"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("floor"),children:"Floor"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("number_to_string"),children:"Number To String"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(8),onMouseLeave:()=>h(-1),children:["Enums",f===8&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("new_enum"),children:"New Enum"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("enum_compare"),children:"Compare Enum"})]})]}),c.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(9),onMouseLeave:()=>h(-1),children:["Booleans",f===9&&c.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("boolean_new"),children:"New Boolean"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("boolean_branch"),children:"Branch"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>d("boolean_inverse"),children:"Inverse"})]})]}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>d("open_modal"),children:"Open Modal"}),c.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>d("blueprint_run"),children:"Run Blueprint"})]})})}const pK={characterPage:"Info",modalsPage:"Start",creatorPage:"Start",tab:"character",versionId:""},sn=ra(pK);function lC(e){sn.set(t=>({...t,creatorPage:e}))}function uC(e){sn.set(t=>({...t,characterPage:e}))}function cC(e){sn.set(t=>({...t,modalsPage:e}))}function gK(e){sn.set(t=>({...t,tab:e}))}const nn=({children:e,title:t})=>c.jsxs("a",{className:"block max-w-sm p-6 bg-white border border-neutral-200 rounded-lg shadow hover:bg-neutral-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700",children:[c.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-neutral-900 dark:text-white",children:t}),c.jsx("div",{className:"font-normal text-neutral-700 dark:text-neutral-400",children:e})]}),dn=async()=>{const e=await Lr.get("deviceId")||"none";return"".concat(e,"-").concat(y1())},Zr=async e=>{const t=await Promise.all(et.tables.map(n=>n.get(e)));for(let n=0;n<t.length;n++)if(t[n])return!1;return!0},dw=async(e,t,n=!1)=>{try{const{user:r}=rr.get(),i=r?r.id:"none";let o=t!=null?t:await dn();if(!n)for(;!await Zr(o);)o=await dn();const s={...e,user_id:i,local_id:o,id:n?e.id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await et.versions.put(s),s}catch(r){console.log("Error creating versioned resource:",r)}};function mK(e,t,n){var r,i;typeof e=="function"?(r=t||[],i=n):(r=[],i=t);var o=Tt.useRef({hasResult:!1,result:i,error:null}),s=Tt.useReducer(function(u){return u+1},0);s[0];var a=s[1],l=Tt.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")o.current.result=u.getValue(),o.current.hasResult=!0;else{var d=u.subscribe(function(f){o.current.result=f,o.current.hasResult=!0});typeof d=="function"?d():d.unsubscribe()}return u},r);if(Tt.useDebugValue(o.current.result),Tt.useEffect(function(){var u=l.subscribe(function(d){var f=o.current;(f.error!==null||f.result!==d)&&(f.error=null,f.result=d,f.hasResult=!0,a())},function(d){var f=o.current;f.error!==d&&(f.error=d,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),o.current.error)throw o.current.error;return o.current.result}function oo(e,t,n){return mK(function(){return vF(e)},t||[],n)}function Mn(e){const[t]=j.useMemo(()=>(e==null?void 0:e.split("|"))||[""],[e]),n=oo(async()=>({hasLooked:!0,edits:await et.versions.get(e!=null?e:"")}),[e]);return j.useEffect(()=>{(async()=>{if(!e||!n||n.hasLooked&&n.edits)return;const o=await et.versions.get(t);o&&await dw(o,e)})()},[n,e]),j.useMemo(()=>!n||!n.edits?void 0:{...n.edits,data:n.edits.data},[n])}function yK({id:e,data:{spreadType:t}}){const{updateNodeData:n}=gn(),r=sn.useValue(),i=Mn(r.versionId);return c.jsxs(nn,{title:"Create Object From Type",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(ct,{id:"type-".concat(e),label:"Type",value:t.name,onChange:o=>n(e,{spreadType:i==null?void 0:i.data.types.find(s=>s.name===o)}),children:i==null?void 0:i.data.types.map(o=>c.jsx("option",{value:o.name,children:o.name},o.name))}),t.properties.map(o=>c.jsxs("p",{style:{marginTop:5},children:["(",o.typeData.type,o.typeData.isArray?"[]":"",") ",o.key]},o.key)),c.jsxs("p",{style:{textAlign:"right"},children:["(",t.name,") output"]}),t.properties.map((o,s)=>c.jsx(Re,{type:"target",id:"".concat(o.key,"-").concat(o.typeData.type).concat(o.typeData.isArray?"(Array)":""),position:ye.Left,style:{top:129+26*s,bottom:"auto"}},o.key)),c.jsx(Re,{type:"source",id:"output-".concat(t.name),position:ye.Right,style:{top:129+24*t.properties.length,bottom:"auto"}})]})}const vK=j.memo(yK),xK=({id:e,data:{params:t}})=>{const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId);return j.useEffect(()=>{let s={};for(let a=0;a<t.length;a++){const l=t[a];s["".concat(l.name,"-").concat(l.type)]=o==null?void 0:o.data.types.find(u=>u.name===l.type)}n(e,{outputs:s}),r(e)},[t,o]),c.jsxs(nn,{title:"Entry",children:[c.jsx(Re,{type:"source",id:"start-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t.map(s=>c.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",s.type,s.isArray?"[]":"",") ",s.name]},s.name)),t.map((s,a)=>c.jsx(Re,{type:"source",id:"".concat(s.name,"-").concat(s.type),position:ye.Right,style:{top:85+25*a,bottom:"auto"}},s.name))]})},bK=j.memo(xK);function c4(e,t){var s;if(!e||!t)return"unknown";const n=t.split("/"),r=n.pop();if(!r)return"unknown";const i=n.reduce((a,l)=>{if(a)return Array.isArray(a)?(a=a.find(u=>u.name===l),a||void 0):a[l]},e);if(!i)return;const o=(s=i._type)==null?void 0:s.properties.find(a=>a.key===r);return i._type&&o&&o.typeData.type?o.typeData.isArray?"".concat(o.typeData.type,"(Array)"):o.typeData.type:"unknown"}function wK({id:e,data:{path:t,type:n,outputs:r}}){const{updateNodeData:i}=gn(),o=Hr(),s=sn.useValue(),a=Mn(s.versionId),l=j.useCallback(u=>{const d=c4((a==null?void 0:a.data.defaultCharacterData)||{},u),f=d.split("(")[0];i(e,{path:u,type:d,outputs:{["output-".concat(d)]:a==null?void 0:a.data.types.find(h=>h.name===f)}}),o(e)},[e,i,o,a]);return c.jsxs(nn,{title:"Get Character Data",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(Vt,{id:"get-character-".concat(e),label:"Path",value:t,onChange:l,isValid:!0,errorMessage:""}),c.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?c.jsx(Re,{type:"source",id:"output-".concat(n),position:ye.Right,style:{bottom:20,top:"auto"}}):null]})}const _K=j.memo(wK);function SK({id:e,data:{chosenState:t}}){const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId),s=Mo(),a=j.useMemo(()=>s.filter(d=>d.source!==e).map(d=>d.source),[s]),l=By(a),u=j.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(d=>d.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(d=>d.name===i.creatorPage)},[o,i]);return j.useEffect(()=>{let d={};t||(t=(u==null?void 0:u.state[0])||null),t&&(d["".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":"")]=(o==null?void 0:o.data.types.find(f=>f.name===t.type.type))||null),n(e,{chosenState:t,outputs:d}),r(e)},[s,l,o,u]),c.jsxs(nn,{title:"Get Page State",children:[c.jsx(ct,{id:"set-state-".concat(e),label:"State to grab",value:(t==null?void 0:t.name)||"",onChange:d=>{const f=u==null?void 0:u.state.find(h=>h.name===d);n(e,{chosenState:f,outputs:{["".concat(f.name,"-").concat(f.type.type).concat(f.type.isArray?"(Array)":"")]:o==null?void 0:o.data.types.find(h=>h.name===f.type.type)}}),r(e)},children:u==null?void 0:u.state.map(d=>c.jsx("option",{value:d.name,children:d.name},d.name))}),t?c.jsxs("p",{className:"text-right",children:[t.type.type,t.type.isArray?"[]":""]}):c.jsx("p",{className:"text-right",children:"select a page state to get."}),c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t&&c.jsx(Re,{type:"source",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ye.Right,style:{top:122,bottom:"auto"}})]})}const EK=j.memo(SK);function kK({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=gn(),i=Hr(),o=sn.useValue(),s=Mn(o.versionId),a=j.useCallback(l=>{var f;const u=(f=s==null?void 0:s.data.data.find(h=>h.name===l))==null?void 0:f.typeData,d=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:d}),i(e)},[e,r,i,s]);return j.useEffect(()=>{var f,h;if(t)return;const l=(f=s==null?void 0:s.data.data[0])==null?void 0:f.name,u=(h=s==null?void 0:s.data.data[0])==null?void 0:h.typeData,d=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:d}),i(e)},[]),c.jsxs(nn,{title:"Get System Data",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(ct,{id:"get-system-".concat(e),label:"Data",value:t,onChange:a,children:s==null?void 0:s.data.data.map(l=>c.jsx("option",{value:l.name,children:l.name}))}),c.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?c.jsx(Re,{type:"source",id:"output-".concat(n),position:ye.Right,style:{bottom:20,top:"auto"}}):null]})}const CK=j.memo(kK),jK=({id:e,data:{type:t,title:n,inputType:r}})=>{const{updateNodeData:i}=gn(),o=Hr(),s=sn.useValue(),a=Mn(s.versionId);return Mo({handleType:"target",handleId:"data-any",onConnect:l=>{const u=l[0];if(!u||!u.sourceHandle)return;const d=u.sourceHandle.split("-")[1];d&&(i(e,{inputType:d}),o(e))},onDisconnect:()=>{i(e,{inputType:"unknown"}),o(e)}}),c.jsxs(nn,{title:"Open Modal",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsxs(ct,{id:"modal-type",label:"Modal Type",value:t,onChange:l=>i(e,{type:l}),children:[c.jsx("option",{value:"edit_object",children:"Edit Object"}),c.jsx("option",{value:"edit_number",children:"Edit Number"}),c.jsx("option",{value:"edit_string",children:"Edit String"}),a==null?void 0:a.data.modals.map(l=>c.jsx("option",{value:l.name,children:l.name}))]}),c.jsx(Vt,{id:"modal-title",label:"Modal Title",value:n,onChange:l=>i(e,{title:l}),isValid:!0,errorMessage:""}),c.jsxs("p",{style:{marginTop:10},children:["input data (",r,")"]}),c.jsx(Re,{type:"target",id:"data-any",position:ye.Left,style:{top:145,bottom:"auto"}}),c.jsx("p",{style:{textAlign:"right"},children:"on save"}),c.jsx(Re,{type:"source",id:"save-node",position:ye.Right,style:{top:168,bottom:"auto"}}),c.jsxs("p",{style:{textAlign:"right"},children:["data (",r,")"]}),c.jsx(Re,{type:"source",id:"newdata-".concat(r),position:ye.Right,style:{top:192,bottom:"auto"}}),c.jsx("p",{style:{marginTop:10,textAlign:"right"},children:"on delete"}),c.jsx(Re,{type:"source",id:"delete-node",position:ye.Right,style:{top:222,bottom:"auto"}})]})},AK=j.memo(jK);function NK({id:e,data:{param:t,inputType:n}}){const{updateNodeData:r}=gn(),i=Hr(),o="".concat(t.name,"-").concat(t.isArray?"array":t.type);return Mo({handleType:"target",handleId:o,onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(r(e,{inputType:u}),i(e))},onDisconnect:()=>{r(e,{inputType:"any"}),i(e)}}),c.jsxs(nn,{title:"Output",children:[c.jsx(Re,{type:"target",id:"end-node",position:ye.Left,style:{top:28,bottom:"auto"}}),c.jsx("p",{style:{textAlign:"left",marginTop:5},children:t.isArray?"".concat(n).concat(t.isArray?"(Array)":""):t.type}),c.jsx(Re,{type:"target",id:o,position:ye.Left,style:{top:85,bottom:"auto"}})]})}const RK=j.memo(NK);function TK({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=gn(),i=Hr(),o=sn.useValue(),s=Mn(o.versionId),a=j.useCallback(l=>{const u=c4((s==null?void 0:s.data.defaultCharacterData)||{},l);r(e,{path:l,type:u}),i(e)},[e,r,i,s]);return c.jsxs(nn,{title:"Set Character Data",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(Vt,{id:"set-character-".concat(e),label:"Path",value:t,onChange:a,isValid:!0,errorMessage:""}),c.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?c.jsx(Re,{type:"target",id:"input-".concat(n),position:ye.Left,style:{bottom:20,top:"auto"}}):null]})}const IK=j.memo(TK);function PK({id:e,data:{chosenState:t}}){const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId),s=j.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(a=>a.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(a=>a.name===i.creatorPage)},[o,i]);return j.useEffect(()=>{t||(t=(s==null?void 0:s.state[0])||null),n(e,{chosenState:t})},[s,t]),c.jsxs(nn,{title:"Set Page State",children:[c.jsx(ct,{id:"set-state-".concat(e),label:"State to change",value:(t==null?void 0:t.name)||"",onChange:a=>{n(e,{chosenState:s==null?void 0:s.state.find(l=>l.name===a)}),r(e)},children:s==null?void 0:s.state.map(a=>c.jsx("option",{value:a.name,children:a.name},a.name))}),t?c.jsxs("p",{children:[t.type.type,t.type.isArray?"[]":""]}):c.jsx("p",{children:"select a page state to set."}),c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t&&c.jsx(Re,{type:"target",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ye.Left,style:{top:122,bottom:"auto"}})]})}const OK=j.memo(PK);function $K({id:e,data:t}){const{updateNodeData:n}=gn();return c.jsxs(nn,{title:"Set System Data",children:[c.jsx(Vt,{id:"path",label:"Path",placeholder:"path/to/data",value:t.path,onChange:i=>n(e,{path:i}),isValid:!0,errorMessage:""}),c.jsxs("p",{children:["Calculated type ","unknown"]}),c.jsx(Re,{type:"target",position:ye.Left}),c.jsx(Re,{type:"source",position:ye.Right})]})}const MK=j.memo($K);function DK({id:e,data:{inputType:t}}){var l,u;const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue();Mn(i.versionId);const o=Mo(),s=j.useMemo(()=>o.filter(d=>d.source!==e).map(d=>d.source),[o]),a=By(s);return j.useEffect(()=>{var p,v,y,w,x;let d={};for(let b=0;b<o.length;b++){const m=o[b];if((m.source===e?"output":"input")==="output")continue;const E=a.find(N=>N.id===m.source);if(!(E!=null&&E.data)||!(E!=null&&E.data.outputs))continue;const k=((p=E==null?void 0:E.data)==null?void 0:p.outputs)[(v=m.sourceHandle)!=null?v:""];d[(y=m.targetHandle)!=null?y:""]=k}const f=(w=d["input-object"])!=null?w:{name:"unknown",properties:[]};let h={};for(let b=0;b<((x=t==null?void 0:t.properties)==null?void 0:x.length);b++){const m=t.properties[b];h["".concat(m.key,"-").concat(m.typeData.type).concat(m.typeData.isArray?"(Array)":"")]={name:m.typeData.type}}n(e,{inputs:d,inputType:f,outputs:h}),r(e)},[o,a]),c.jsxs(nn,{title:"Spread Object",children:[c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t==null?void 0:t.name]}),c.jsx("p",{style:{textAlign:"right"},children:"Spread"}),(l=t==null?void 0:t.properties)==null?void 0:l.map(d=>c.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",d.typeData.type,d.typeData.isArray?"[]":"",") ",d.key]},d.key)),c.jsx(Re,{type:"target",id:"input-object",position:ye.Left,style:{top:80,bottom:"auto"}}),(u=t==null?void 0:t.properties)==null?void 0:u.map((d,f)=>c.jsx(Re,{type:"source",id:"".concat(d.key,"-").concat(d.typeData.type).concat(d.typeData.isArray?"(Array)":""),position:ye.Right,style:{top:130+26*f,bottom:"auto"}},d.key))]})}const LK=j.memo(DK);function FK({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=gn();return c.jsxs(nn,{title:"String Includes",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"String 1"}),c.jsx("p",{style:{marginTop:5},children:"String 2"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) Included?"}),c.jsx(Re,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const BK=j.memo(FK);function zK(e){return c.jsxs(nn,{title:"String Compare",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"String 1"}),c.jsx("p",{style:{marginTop:5},children:"String 2"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),c.jsx(Re,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const HK=j.memo(zK);function WK({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=gn();return c.jsxs(nn,{title:"Concat String",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"String 1"}),c.jsx("p",{style:{marginTop:5},children:"String 2"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(string) concated string"}),c.jsx(Re,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-string",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const UK=j.memo(WK);function VK({id:e,data:{inputType:t}}){const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId);return Mo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),c.jsxs(nn,{title:"Remove Item In Array",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{marginTop:5},children:"name (string)"}),c.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),c.jsx(Re,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const qK=j.memo(VK);function KK({id:e,data:{inputType:t}}){const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId);return Mo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),c.jsxs(nn,{title:"Add Item To Array",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{style:{marginTop:5},children:["new Item (",t,")"]}),c.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),c.jsx(Re,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",id:"newItem-".concat(t),position:ye.Left,style:{top:106,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const GK=j.memo(KK);function YK({id:e,data:{inputType:t}}){const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId);return Mo({handleType:"target",handleId:"input-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),c.jsxs(nn,{title:"Filter Array",children:[c.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),c.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),c.jsx("p",{style:{textAlign:"left",marginTop:5},children:"Filtered? (boolean)"}),c.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"Filtered Array"})]}),c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"input-array",position:ye.Left,style:{top:65,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"loop-node",position:ye.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",id:"loopcompleted-node",position:ye.Left,style:{top:125,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"filtered?-boolean",position:ye.Left,style:{top:150,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:188,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"completed-node",position:ye.Right,style:{top:228,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"filterd-".concat(t,"(Array)"),position:ye.Right,style:{top:255,bottom:"auto"}})]})]})}const XK=j.memo(YK);function JK({id:e,data:{inputType:t,mapType:n}}){const{updateNodeData:r}=gn(),i=Hr(),o=sn.useValue(),s=Mn(o.versionId);return Mo({handleType:"target",handleId:"input-array",onConnect:a=>{const l=a[0];if(!l||!l.sourceHandle)return;const u=l.sourceHandle.split("-")[1];if(!u)return;const d=u.split("(")[0];d&&(r(e,{inputType:d}),i(e))},onDisconnect:()=>{r(e,{inputType:"unknown"}),i(e)}}),c.jsxs(nn,{title:"Map Array",children:[c.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),c.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),c.jsx(ct,{id:"map-type-".concat(e),label:"Input Type",value:n,onChange:a=>{r(e,{mapType:a}),i(e)},children:s==null?void 0:s.data.types.map(a=>c.jsx("option",{value:a.name,children:a.name},a.name))}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),c.jsxs("p",{style:{textAlign:"left",marginTop:5},children:["item (",n,")"]}),c.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"New Array"})]}),c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"input-array",position:ye.Left,style:{top:65,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"loop-node",position:ye.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",id:"loopcompleted-node",position:ye.Left,style:{top:125,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"newitem-".concat(t),position:ye.Left,style:{top:150,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:188,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"completed-node",position:ye.Right,style:{top:228,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"filterd-".concat(n,"(Array)"),position:ye.Right,style:{top:255,bottom:"auto"}})]})]})}const QK=j.memo(JK);function ZK({id:e,data:{inputType:t}}){const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId);return Mo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),j.useEffect(()=>{o&&r(e)},[o,t]),c.jsxs(nn,{title:"Update Item In Array",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{marginTop:5},children:"name (string)"}),c.jsxs("p",{style:{marginTop:10},children:["new Item (",t,")"]}),c.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),c.jsx(Re,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"newItem-".concat(t),position:ye.Left,style:{top:138,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:162,bottom:"auto"}})]})]})}const eG=j.memo(ZK),U1=Ge.object({type:Ge.string(),gen:Ge.any().optional(),useTextArea:Ge.boolean().optional(),isArray:Ge.boolean().optional(),options:Ge.array(Ge.string()).optional(),outputType:Ge.string().optional(),isOutputAnArray:Ge.boolean().optional(),inputs:Ge.array(Ge.any()).optional()}),tG=Ge.object({name:Ge.string(),typeData:U1,data:Ge.any()}),I0=Ge.object({name:Ge.string(),blueprint:Ge.object({nodes:Ge.array(Ge.any()),edges:Ge.array(Ge.any())}),lexical:Ge.string(),state:Ge.array(Ge.object({name:Ge.string(),type:U1,value:Ge.any()}))}),nG=Ge.object({name:Ge.string(),properties:Ge.array(Ge.object({key:Ge.string(),typeData:U1}))}),rG=Ge.object({name:Ge.string(),description:Ge.string(),blueprint:Ge.object({nodes:Ge.array(Ge.any()),edges:Ge.array(Ge.any())})});Ge.object({creator:Ge.array(I0),modals:Ge.array(I0),pages:Ge.array(I0),version:Ge.string(),data:Ge.array(tG),defaultCharacterData:Ge.any(),types:Ge.array(nG),actions:Ge.array(rG)});const zy=Ge.object({id:Ge.string({invalid_type_error:"id must be a string"}).max(100,"id cannot be longer than 100 characters").optional(),local_id:Ge.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:Ge.string(),name:Ge.string(),forked_from:Ge.string().nullable().optional(),version:Ge.string().optional(),created_at:Ge.string().datetime({offset:!0}),updated_at:Ge.string().datetime({offset:!0}),deleted_at:Ge.string().datetime({offset:!0}).nullable().optional()});function iG({id:e,data:{inputType:t}}){const{updateNodeData:n}=gn(),r=Hr(),i=sn.useValue(),o=Mn(i.versionId),s=Mo(),a=j.useMemo(()=>s.filter(u=>u.source!==e).map(u=>u.source),[s]),l=By(a);return j.useEffect(()=>{var f,h,p,v;let u={};for(let y=0;y<s.length;y++){const w=s[y];if((w.source===e?"output":"input")==="output")continue;const b=l.find(S=>S.id===w.source);if(!(b!=null&&b.data)||!(b!=null&&b.data.outputs))continue;console.log(w.sourceHandle);const m=((f=b==null?void 0:b.data)==null?void 0:f.outputs)[(h=w.sourceHandle)!=null?h:""];console.log(m),u[(p=w.targetHandle)!=null?p:""]=m}console.log(u);const d=((v=u["base-array"])!=null?v:{name:"unknown"}).name;n(e,{inputs:u,inputType:d,outputs:{["output-".concat(d)]:o==null?void 0:o.data.types.find(y=>y.name===d)}}),r(e)},[s,l,zy]),j.useEffect(()=>{o&&r(e)},[o,t]),c.jsxs(nn,{title:"Get Item In Array",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{marginTop:5},children:"name (string)"}),c.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t," Item"]})]}),c.jsx(Re,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const oG=j.memo(iG);function sG({id:e,data:{value:t}}){const{updateNodeData:n}=gn();return c.jsxs(nn,{title:"Number",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(Vt,{id:"number-".concat(e),label:"String Value",value:t.toString(),onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),c.jsx(Re,{type:"source",id:"output-number",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const aG=j.memo(sG);function lG(e){return c.jsxs(nn,{title:"Subtract",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"number 1"}),c.jsx("p",{style:{marginTop:5},children:"number 2"}),c.jsx("p",{style:{marginTop:5},children:"output"}),c.jsx(Re,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const uG=j.memo(lG);function cG(e){return c.jsxs(nn,{title:"Divide",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"number 1"}),c.jsx("p",{style:{marginTop:5},children:"number 2"}),c.jsx("p",{style:{marginTop:5},children:"output"}),c.jsx(Re,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const dG=j.memo(cG);function fG(e){return c.jsxs(nn,{title:"Floor",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"number"}),c.jsx("p",{style:{marginTop:5},children:"output"}),c.jsx(Re,{type:"target",id:"input-number",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-number",position:ye.Right,style:{top:110,bottom:"auto"}})]})}const hG=j.memo(fG);function pG(e){return c.jsxs(nn,{title:"Add",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"number 1"}),c.jsx("p",{style:{marginTop:5},children:"number 2"}),c.jsx("p",{style:{marginTop:5},children:"output"}),c.jsx(Re,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const gG=j.memo(pG);function mG(e){return c.jsxs(nn,{title:"Multiply",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"number 1"}),c.jsx("p",{style:{marginTop:5},children:"number 2"}),c.jsx("p",{style:{marginTop:5},children:"output"}),c.jsx(Re,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const yG=j.memo(mG);function vG(e){return c.jsxs(nn,{title:"Number To String",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"number"}),c.jsx("p",{style:{marginTop:5,textAlign:"right"},children:"string"}),c.jsx(Re,{type:"target",id:"input-number",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-string",position:ye.Right,style:{top:110,bottom:"auto"}})]})}const xG=j.memo(vG);function bG(e){return c.jsxs(nn,{title:"Enum Compare",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"Enum 1"}),c.jsx("p",{style:{marginTop:5},children:"Enum 2"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),c.jsx(Re,{type:"target",id:"enum1-enum",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"target",id:"enum2-enum",position:ye.Left,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const wG=j.memo(bG);function _G({id:e,data:{value:t}}){const{updateNodeData:n}=gn();return c.jsxs(nn,{title:"Enum",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(Vt,{id:"enum-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),c.jsx(Re,{type:"source",id:"output-enum",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const SG=j.memo(_G);function EG(e){return c.jsxs(nn,{title:"Branch",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"true"}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"false"}),c.jsx(Re,{type:"target",id:"input-boolean",position:ye.Left,style:{top:85,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"true-node",position:ye.Right,style:{top:110,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"false-node",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const kG=j.memo(EG);function CG(e){return c.jsxs(nn,{title:"Inverse Boolean",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),c.jsx(Re,{type:"target",id:"input-boolean",position:ye.Left,style:{top:80,bottom:"auto"}}),c.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) output"}),c.jsx(Re,{type:"source",id:"output-boolean",position:ye.Right,style:{top:55,bottom:"auto"}})]})}const jG=j.memo(CG);function AG({id:e,data:{value:t}}){const{updateNodeData:n}=gn();return c.jsxs(nn,{title:"String",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(Vt,{id:"string-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),c.jsx(Re,{type:"source",id:"output-string",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const NG=j.memo(AG);function RG({id:e,data:{value:t}}){const{updateNodeData:n}=gn();return c.jsxs(nn,{title:"Boolean",children:[c.jsx(Re,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx(tr,{id:"boolean-".concat(e),label:"Value",checked:t,onChange:r=>n(e,{value:r})}),c.jsx(Re,{type:"source",id:"output-boolean",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const TG=j.memo(RG);function pm(e){return e.nodes.find(n=>n.type==="output").data.inputType}function IG(e){return pI(e).data.params}const PG=({id:e,data:{params:t,returnType:n,inputs:r,outputs:i}})=>{const{updateNodeData:o}=gn(),s=Hr(),a=Mo(),l=j.useMemo(()=>a.filter(d=>d.source!==e).map(d=>d.source),[a]),u=By(l);return j.useEffect(()=>{var v,y;let d={};for(let w=0;w<a.length;w++){const x=a[w];if((x.source===e?"output":"input")==="output")continue;const m=u.find(E=>E.id===x.source);if(m!=null&&m.data||m!=null&&m.data.outputs)continue;const S=((v=m==null?void 0:m.data)==null?void 0:v.outputs)[x.sourceHandle||""];d[x.targetHandle||""]=S}const f=(y=d["data-blueprint"])==null?void 0:y.data;let h=[],p="none";f&&(h=IG(f),p=pm(f)),o(e,{inputs:d,params:h,returnType:p}),s(e)},[a,u]),c.jsxs(nn,{title:"Run Blueprint",children:[c.jsx(Re,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),c.jsx(Re,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),c.jsx("p",{style:{marginTop:10},children:"blueprint"}),c.jsx(Re,{type:"target",id:"data-blueprint",position:ye.Left,style:{top:60,bottom:"auto"}}),t.map((d,f)=>{const h="".concat(d.type).concat(d.isArray?"(Array)":"");return c.jsxs("div",{children:[c.jsxs("p",{children:[d.name," ",h]}),c.jsx(Re,{type:"target",id:"".concat(d.name,"-").concat(h),position:ye.Left,style:{top:70+10*f,bottom:"auto"}})]},d.name)}),n!=="none"&&c.jsxs("div",{children:[c.jsxs("p",{children:["output ",n]}),c.jsx(Re,{type:"source",id:"output-".concat(n),position:ye.Right,style:{top:80+10*t.length,bottom:"auto"}})]})]})},OG=j.memo(PG),$G={entry:bK,output:RK,get_character_data:_K,set_character_data:IK,get_page_data:EK,set_page_data:OK,get_system_data:CK,set_system_data:MK,add_to_array:GK,array_remove:qK,array_update:eG,array_get:oG,filter:XK,map:QK,spread_object:LK,create_data_from_type:vK,string_new:NG,string_includes:BK,string_compare:HK,string_concat:UK,new_number:aG,number_to_string:xG,divide:dG,add:gG,subtract:uG,multiply:yG,floor:hG,new_enum:SG,enum_compare:wG,boolean_new:TG,boolean_branch:kG,boolean_inverse:jG,open_modal:AK,blueprint_run:OG};function MG(e){const[t,n]=j.useState([]),[r,i]=j.useState([]);j.useEffect(()=>{n(e.nodes),i(e.edges)},[e]);function o(l){n(MP(l,t))}function s(l){i(DP(l,r))}function a(l){i(pP(l,r))}return{nodes:t,edges:r,onNodesChange:o,onEdgesChange:s,onConnect:a}}const DG=e=>{if(!e.sourceHandle||!e.targetHandle)return!1;const t=e.sourceHandle.split("-")[1],n=e.targetHandle.split("-")[1];return!t||!n?!1:n==="object"&&!["string","number","boolean","enum","blueprint"].includes(t)||n==="array"&&t.endsWith("(Array)")||n==="any"||t==="any"?!0:t===n},ei=({id:e,data:t,onSave:n})=>{const[r,i]=j.useState(null),[o,s]=j.useState(null),a=j.useRef(null),{nodes:l,edges:u,onNodesChange:d,onEdgesChange:f,onConnect:h}=MG(t),p=j.useCallback((x,b)=>{if(x.preventDefault(),!a||!a.current)return;const m=a.current.getBoundingClientRect();i({id:b.id,top:x.clientY<m.height-200&&x.clientY,left:x.clientX<m.width-200&&x.clientX,right:x.clientX>=m.width-200&&m.width-x.clientX,bottom:x.clientY>=m.height-200&&m.height-x.clientY}),s(null)},[i]),v=j.useCallback(async({nodes:x,edges:b})=>!x.find(m=>["entry","output"].includes(m.type)),[]),y=j.useCallback(x=>{if(x.preventDefault(),!a||!a.current)return;const b=a.current.getBoundingClientRect();s({top:x.clientY<b.height-200&&x.clientY,left:x.clientX<b.width-200&&x.clientX,right:x.clientX>=b.width-200&&b.width-x.clientX,bottom:x.clientY>=b.height-200&&b.height-x.clientY,rawX:x.clientX,rawY:x.clientY}),i(null)},[s]),w=j.useCallback(()=>{i(null),s(null)},[i,s]);return c.jsx("div",{className:"flex z-50 absolute top-0 left-0 w-screen h-screen",children:c.jsxs(Lq,{ref:a,nodes:l,edges:u,onNodesChange:d,onEdgesChange:f,onConnect:h,onBeforeDelete:v,isValidConnection:DG,onPaneClick:w,onNodeContextMenu:p,onPaneContextMenu:y,nodeTypes:$G,colorMode:"system",children:[c.jsx(cK,{}),c.jsx(Uq,{}),c.jsx(Jq,{}),r&&c.jsx(fK,{onClick:w,...r}),o&&c.jsx(hK,{onClick:w,...o}),c.jsxs(Ch,{position:"top-right",children:[c.jsx(xt,{color:"danger",onClick:()=>Hn(e),children:"Close"}),c.jsx(xt,{color:"primary",onClick:()=>{n({nodes:l,edges:u}),Hn(e)},children:"Confirm"})]})]})})};function V1({id:e,title:t,onDelete:n,onSave:r,data:i,types:o,type:s,typeData:a}){const[l,u]=j.useState(null),d=j.useCallback(()=>Hn(e),[e]),f=(h,p,v)=>{u(pn(p,y=>(h?k1(y,h,v):y=v,y)))};return j.useEffect(()=>{u(i||null)},[i,u]),l?c.jsxs(Wn,{isOpen:!0,onClose:d,children:[c.jsx(Vn,{title:t,onClose:d}),c.jsx(Un,{children:s&&a?q1(o,s,l,l,a,"",f):LG(l,o,f)}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:()=>{n&&n(),d()},children:n?"Delete":"Close"}),c.jsx(xt,{color:"primary",onClick:()=>{r(l),d()},children:"Update"})]})]}):c.jsx(c.Fragment,{})}function LG(e,t,n){return c.jsx("div",{children:e._type.properties.map(r=>{const i=r.key,o=e[i];let a=r.typeData.type;return c.jsx("div",{children:q1(t,a,o,e,r.typeData,i,n)},i)})})}function q1(e,t,n,r,i,o,s){var l;const a=e.find(u=>u.name===t);if(t&&i.isArray)return c.jsx(FG,{types:e,type:a,title:o,data:n,onAdd:u=>s(o,r,[...n,u]),onChange:(u,d)=>s(u,r,d),onDelete:u=>s(o,r,n.filter(d=>d.name!==u))});switch(t){case"string":return i.useTextArea?c.jsx(A1,{id:o,label:o,value:n,onChange:u=>s(o,r,u)}):c.jsx(Vt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,u)});case"number":return c.jsx(Vt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,+u)});case"boolean":return c.jsx(tr,{id:o,label:o,checked:n,onChange:u=>s(o,r,u)});case"enum":return c.jsx(ct,{id:o,label:o,value:n,onChange:u=>s(o,r,u),children:(l=i.options)==null?void 0:l.map(u=>c.jsx("option",{value:u,children:u},u))});case"blueprint":return c.jsxs(xt,{color:"light",onClick:()=>At("blueprint",({id:u})=>c.jsx(ei,{id:u,data:n,onSave:d=>s(o,r,d)})),children:["Edit ",o]},o);default:return c.jsxs("div",{className:"mb-2",children:[c.jsx("p",{className:"my-2",children:o}),c.jsx(Bc,{}),c.jsx("div",{className:"h-2"}),a.properties.map(u=>{var d;return q1(e,u.typeData.type,(d=n[u.key])!=null?d:"",r,u.typeData,u.key,(f,h,p)=>{s("".concat(o,"/").concat(f),h,p)})})]},o)}}function FG({title:e,data:t,type:n,types:r,onAdd:i,onChange:o,onDelete:s}){const[a,l]=j.useState(null);return c.jsxs("div",{className:"mt-3",children:[c.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("p",{children:e}),c.jsx("p",{onClick:()=>i(pc(r,n)),children:"Add"})]}),c.jsx(Bc,{}),c.jsx("div",{className:"flex flex-col gap-1 mt-3",children:t.map(u=>c.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>At("edit-object",({id:d})=>c.jsx(V1,{id:d,title:"Edit ".concat(u.name),types:r,onDelete:()=>s(u.name),onSave:f=>{const h=[...t],p=h.findIndex(v=>v.name===u.name);h[p]=f,o("".concat(e),h)},data:u})),children:c.jsx("p",{children:u.name})},u.name))})]},a==null?void 0:a.name)}function BG({id:e,data:t,title:n="Edit Number",onSave:r}){const[i,o]=j.useState("");j.useEffect(()=>{t&&o(t)},[t]);const s=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:s,children:[c.jsx(Vn,{title:n,onClose:s}),c.jsx(Un,{children:c.jsx(Vt,{type:"number",id:"name",label:"Name",placeholder:"baba yaga",value:i,onChange:o,isValid:!0,errorMessage:""})}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:s,children:"Delete"}),c.jsx(xt,{color:"primary",onClick:()=>{i&&(r(i),s())},children:"Update"})]})]})}function ds({id:e,data:t,title:n="Edit string",onSave:r,onDelete:i}){const[o,s]=j.useState(t),a=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:a,children:[c.jsx(Vn,{title:n,onClose:a}),c.jsx(Un,{children:c.jsx(Vt,{id:"name",label:"String",placeholder:"baba yaga",value:o,onChange:s,isValid:!0,errorMessage:""})}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:a,children:i?"Delete":"Close"}),c.jsx(xt,{color:"primary",onClick:()=>{o&&(r(o),a())},children:"Update"})]})]})}var d4={exports:{}},P0={exports:{}},O0={exports:{}},$0={},yd={},dC;function zG(){if(dC)return yd;dC=1,yd.byteLength=a,yd.toByteArray=u,yd.fromByteArray=h;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(p){var v=p.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=p.indexOf("=");y===-1&&(y=v);var w=y===v?0:4-y%4;return[y,w]}function a(p){var v=s(p),y=v[0],w=v[1];return(y+w)*3/4-w}function l(p,v,y){return(v+y)*3/4-y}function u(p){var v,y=s(p),w=y[0],x=y[1],b=new n(l(p,w,x)),m=0,S=x>0?w-4:w,E;for(E=0;E<S;E+=4)v=t[p.charCodeAt(E)]<<18|t[p.charCodeAt(E+1)]<<12|t[p.charCodeAt(E+2)]<<6|t[p.charCodeAt(E+3)],b[m++]=v>>16&255,b[m++]=v>>8&255,b[m++]=v&255;return x===2&&(v=t[p.charCodeAt(E)]<<2|t[p.charCodeAt(E+1)]>>4,b[m++]=v&255),x===1&&(v=t[p.charCodeAt(E)]<<10|t[p.charCodeAt(E+1)]<<4|t[p.charCodeAt(E+2)]>>2,b[m++]=v>>8&255,b[m++]=v&255),b}function d(p){return e[p>>18&63]+e[p>>12&63]+e[p>>6&63]+e[p&63]}function f(p,v,y){for(var w,x=[],b=v;b<y;b+=3)w=(p[b]<<16&16711680)+(p[b+1]<<8&65280)+(p[b+2]&255),x.push(d(w));return x.join("")}function h(p){for(var v,y=p.length,w=y%3,x=[],b=16383,m=0,S=y-w;m<S;m+=b)x.push(f(p,m,m+b>S?S:m+b));return w===1?(v=p[y-1],x.push(e[v>>2]+e[v<<4&63]+"==")):w===2&&(v=(p[y-2]<<8)+p[y-1],x.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),x.join("")}return yd}var kp={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var fC;function HG(){return fC||(fC=1,kp.read=function(e,t,n,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,u=l>>1,d=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-d)-1,p>>=-d,d+=a;d>0;o=o*256+e[t+f],f+=h,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=r;d>0;s=s*256+e[t+f],f+=h,d-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(p?-1:1)*s*Math.pow(2,o-r)},kp.write=function(e,t,n,r,i,o){var s,a,l,u=o*8-i-1,d=(1<<u)-1,f=d>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,v=r?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?t+=h/l:t+=h*Math.pow(2,1-f),t*l>=2&&(s++,l/=2),s+f>=d?(a=0,s=d):s+f>=1?(a=(t*l-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=a&255,p+=v,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=s&255,p+=v,s/=256,u-=8);e[n+p-v]|=y*128}),kp}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hC;function Za(){return hC||(hC=1,function(e){const t=zG(),n=HG(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const F=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(F,A),F.foo()===42}catch(F){return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(F){if(F>i)throw new RangeError('The value "'+F+'" is invalid for option "size"');const A=new Uint8Array(F);return Object.setPrototypeOf(A,a.prototype),A}function a(F,A,R){if(typeof F=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(F)}return l(F,A,R)}a.poolSize=8192;function l(F,A,R){if(typeof F=="string")return h(F,A);if(ArrayBuffer.isView(F))return v(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if($e(F,ArrayBuffer)||F&&$e(F.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(F,SharedArrayBuffer)||F&&$e(F.buffer,SharedArrayBuffer)))return y(F,A,R);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const J=F.valueOf&&F.valueOf();if(J!=null&&J!==F)return a.from(J,A,R);const de=w(F);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return a.from(F[Symbol.toPrimitive]("string"),A,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}a.from=function(F,A,R){return l(F,A,R)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function d(F,A,R){return u(F),F<=0?s(F):A!==void 0?typeof R=="string"?s(F).fill(A,R):s(F).fill(A):s(F)}a.alloc=function(F,A,R){return d(F,A,R)};function f(F){return u(F),s(F<0?0:x(F)|0)}a.allocUnsafe=function(F){return f(F)},a.allocUnsafeSlow=function(F){return f(F)};function h(F,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const R=m(F,A)|0;let J=s(R);const de=J.write(F,A);return de!==R&&(J=J.slice(0,de)),J}function p(F){const A=F.length<0?0:x(F.length)|0,R=s(A);for(let J=0;J<A;J+=1)R[J]=F[J]&255;return R}function v(F){if($e(F,Uint8Array)){const A=new Uint8Array(F);return y(A.buffer,A.byteOffset,A.byteLength)}return p(F)}function y(F,A,R){if(A<0||F.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<A+(R||0))throw new RangeError('"length" is outside of buffer bounds');let J;return A===void 0&&R===void 0?J=new Uint8Array(F):R===void 0?J=new Uint8Array(F,A):J=new Uint8Array(F,A,R),Object.setPrototypeOf(J,a.prototype),J}function w(F){if(a.isBuffer(F)){const A=x(F.length)|0,R=s(A);return R.length===0||F.copy(R,0,0,A),R}if(F.length!==void 0)return typeof F.length!="number"||Nt(F.length)?s(0):p(F);if(F.type==="Buffer"&&Array.isArray(F.data))return p(F.data)}function x(F){if(F>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return F|0}function b(F){return+F!=F&&(F=0),a.alloc(+F)}a.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==a.prototype},a.compare=function(A,R){if($e(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),$e(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),!a.isBuffer(A)||!a.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===R)return 0;let J=A.length,de=R.length;for(let je=0,Fe=Math.min(J,de);je<Fe;++je)if(A[je]!==R[je]){J=A[je],de=R[je];break}return J<de?-1:de<J?1:0},a.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(A,R){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return a.alloc(0);let J;if(R===void 0)for(R=0,J=0;J<A.length;++J)R+=A[J].length;const de=a.allocUnsafe(R);let je=0;for(J=0;J<A.length;++J){let Fe=A[J];if($e(Fe,Uint8Array))je+Fe.length>de.length?(a.isBuffer(Fe)||(Fe=a.from(Fe)),Fe.copy(de,je)):Uint8Array.prototype.set.call(de,Fe,je);else if(a.isBuffer(Fe))Fe.copy(de,je);else throw new TypeError('"list" argument must be an Array of Buffers');je+=Fe.length}return de};function m(F,A){if(a.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||$e(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);const R=F.length,J=arguments.length>2&&arguments[2]===!0;if(!J&&R===0)return 0;let de=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Ue(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Be(F).length;default:if(de)return J?-1:Ue(F).length;A=(""+A).toLowerCase(),de=!0}}a.byteLength=m;function S(F,A,R){let J=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,A>>>=0,R<=A))return"";for(F||(F="utf8");;)switch(F){case"hex":return H(this,A,R);case"utf8":case"utf-8":return L(this,A,R);case"ascii":return te(this,A,R);case"latin1":case"binary":return B(this,A,R);case"base64":return D(this,A,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,A,R);default:if(J)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),J=!0}}a.prototype._isBuffer=!0;function E(F,A,R){const J=F[A];F[A]=F[R],F[R]=J}a.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<A;R+=2)E(this,R,R+1);return this},a.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<A;R+=4)E(this,R,R+3),E(this,R+1,R+2);return this},a.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<A;R+=8)E(this,R,R+7),E(this,R+1,R+6),E(this,R+2,R+5),E(this,R+3,R+4);return this},a.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?L(this,0,A):S.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(A){if(!a.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:a.compare(this,A)===0},a.prototype.inspect=function(){let A="";const R=e.INSPECT_MAX_BYTES;return A=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(A+=" ... "),"<Buffer "+A+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(A,R,J,de,je){if($e(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(R===void 0&&(R=0),J===void 0&&(J=A?A.length:0),de===void 0&&(de=0),je===void 0&&(je=this.length),R<0||J>A.length||de<0||je>this.length)throw new RangeError("out of range index");if(de>=je&&R>=J)return 0;if(de>=je)return-1;if(R>=J)return 1;if(R>>>=0,J>>>=0,de>>>=0,je>>>=0,this===A)return 0;let Fe=je-de,Rt=J-R;const Gt=Math.min(Fe,Rt),st=this.slice(de,je),Jt=A.slice(R,J);for(let $t=0;$t<Gt;++$t)if(st[$t]!==Jt[$t]){Fe=st[$t],Rt=Jt[$t];break}return Fe<Rt?-1:Rt<Fe?1:0};function k(F,A,R,J,de){if(F.length===0)return-1;if(typeof R=="string"?(J=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Nt(R)&&(R=de?0:F.length-1),R<0&&(R=F.length+R),R>=F.length){if(de)return-1;R=F.length-1}else if(R<0)if(de)R=0;else return-1;if(typeof A=="string"&&(A=a.from(A,J)),a.isBuffer(A))return A.length===0?-1:N(F,A,R,J,de);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(F,A,R):Uint8Array.prototype.lastIndexOf.call(F,A,R):N(F,[A],R,J,de);throw new TypeError("val must be string, number or Buffer")}function N(F,A,R,J,de){let je=1,Fe=F.length,Rt=A.length;if(J!==void 0&&(J=String(J).toLowerCase(),J==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(F.length<2||A.length<2)return-1;je=2,Fe/=2,Rt/=2,R/=2}function Gt(Jt,$t){return je===1?Jt[$t]:Jt.readUInt16BE($t*je)}let st;if(de){let Jt=-1;for(st=R;st<Fe;st++)if(Gt(F,st)===Gt(A,Jt===-1?0:st-Jt)){if(Jt===-1&&(Jt=st),st-Jt+1===Rt)return Jt*je}else Jt!==-1&&(st-=st-Jt),Jt=-1}else for(R+Rt>Fe&&(R=Fe-Rt),st=R;st>=0;st--){let Jt=!0;for(let $t=0;$t<Rt;$t++)if(Gt(F,st+$t)!==Gt(A,$t)){Jt=!1;break}if(Jt)return st}return-1}a.prototype.includes=function(A,R,J){return this.indexOf(A,R,J)!==-1},a.prototype.indexOf=function(A,R,J){return k(this,A,R,J,!0)},a.prototype.lastIndexOf=function(A,R,J){return k(this,A,R,J,!1)};function I(F,A,R,J){R=Number(R)||0;const de=F.length-R;J?(J=Number(J),J>de&&(J=de)):J=de;const je=A.length;J>je/2&&(J=je/2);let Fe;for(Fe=0;Fe<J;++Fe){const Rt=parseInt(A.substr(Fe*2,2),16);if(Nt(Rt))return Fe;F[R+Fe]=Rt}return Fe}function z(F,A,R,J){return qe(Ue(A,F.length-R),F,R,J)}function O(F,A,R,J){return qe(Ke(A),F,R,J)}function M(F,A,R,J){return qe(Be(A),F,R,J)}function K(F,A,R,J){return qe(he(A,F.length-R),F,R,J)}a.prototype.write=function(A,R,J,de){if(R===void 0)de="utf8",J=this.length,R=0;else if(J===void 0&&typeof R=="string")de=R,J=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(J)?(J=J>>>0,de===void 0&&(de="utf8")):(de=J,J=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const je=this.length-R;if((J===void 0||J>je)&&(J=je),A.length>0&&(J<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let Fe=!1;for(;;)switch(de){case"hex":return I(this,A,R,J);case"utf8":case"utf-8":return z(this,A,R,J);case"ascii":case"latin1":case"binary":return O(this,A,R,J);case"base64":return M(this,A,R,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,A,R,J);default:if(Fe)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Fe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(F,A,R){return A===0&&R===F.length?t.fromByteArray(F):t.fromByteArray(F.slice(A,R))}function L(F,A,R){R=Math.min(F.length,R);const J=[];let de=A;for(;de<R;){const je=F[de];let Fe=null,Rt=je>239?4:je>223?3:je>191?2:1;if(de+Rt<=R){let Gt,st,Jt,$t;switch(Rt){case 1:je<128&&(Fe=je);break;case 2:Gt=F[de+1],(Gt&192)===128&&($t=(je&31)<<6|Gt&63,$t>127&&(Fe=$t));break;case 3:Gt=F[de+1],st=F[de+2],(Gt&192)===128&&(st&192)===128&&($t=(je&15)<<12|(Gt&63)<<6|st&63,$t>2047&&($t<55296||$t>57343)&&(Fe=$t));break;case 4:Gt=F[de+1],st=F[de+2],Jt=F[de+3],(Gt&192)===128&&(st&192)===128&&(Jt&192)===128&&($t=(je&15)<<18|(Gt&63)<<12|(st&63)<<6|Jt&63,$t>65535&&$t<1114112&&(Fe=$t))}}Fe===null?(Fe=65533,Rt=1):Fe>65535&&(Fe-=65536,J.push(Fe>>>10&1023|55296),Fe=56320|Fe&1023),J.push(Fe),de+=Rt}return G(J)}const q=4096;function G(F){const A=F.length;if(A<=q)return String.fromCharCode.apply(String,F);let R="",J=0;for(;J<A;)R+=String.fromCharCode.apply(String,F.slice(J,J+=q));return R}function te(F,A,R){let J="";R=Math.min(F.length,R);for(let de=A;de<R;++de)J+=String.fromCharCode(F[de]&127);return J}function B(F,A,R){let J="";R=Math.min(F.length,R);for(let de=A;de<R;++de)J+=String.fromCharCode(F[de]);return J}function H(F,A,R){const J=F.length;(!A||A<0)&&(A=0),(!R||R<0||R>J)&&(R=J);let de="";for(let je=A;je<R;++je)de+=yn[F[je]];return de}function $(F,A,R){const J=F.slice(A,R);let de="";for(let je=0;je<J.length-1;je+=2)de+=String.fromCharCode(J[je]+J[je+1]*256);return de}a.prototype.slice=function(A,R){const J=this.length;A=~~A,R=R===void 0?J:~~R,A<0?(A+=J,A<0&&(A=0)):A>J&&(A=J),R<0?(R+=J,R<0&&(R=0)):R>J&&(R=J),R<A&&(R=A);const de=this.subarray(A,R);return Object.setPrototypeOf(de,a.prototype),de};function Y(F,A,R){if(F%1!==0||F<0)throw new RangeError("offset is not uint");if(F+A>R)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(A,R,J){A=A>>>0,R=R>>>0,J||Y(A,R,this.length);let de=this[A],je=1,Fe=0;for(;++Fe<R&&(je*=256);)de+=this[A+Fe]*je;return de},a.prototype.readUintBE=a.prototype.readUIntBE=function(A,R,J){A=A>>>0,R=R>>>0,J||Y(A,R,this.length);let de=this[A+--R],je=1;for(;R>0&&(je*=256);)de+=this[A+--R]*je;return de},a.prototype.readUint8=a.prototype.readUInt8=function(A,R){return A=A>>>0,R||Y(A,1,this.length),this[A]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(A,R){return A=A>>>0,R||Y(A,2,this.length),this[A]|this[A+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(A,R){return A=A>>>0,R||Y(A,2,this.length),this[A]<<8|this[A+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(A,R){return A=A>>>0,R||Y(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(A,R){return A=A>>>0,R||Y(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},a.prototype.readBigUInt64LE=Ct(function(A){A=A>>>0,ie(A,"offset");const R=this[A],J=this[A+7];(R===void 0||J===void 0)&&fe(A,this.length-8);const de=R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,je=this[++A]+this[++A]*2**8+this[++A]*2**16+J*2**24;return BigInt(de)+(BigInt(je)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ct(function(A){A=A>>>0,ie(A,"offset");const R=this[A],J=this[A+7];(R===void 0||J===void 0)&&fe(A,this.length-8);const de=R*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],je=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+J;return(BigInt(de)<<BigInt(32))+BigInt(je)}),a.prototype.readIntLE=function(A,R,J){A=A>>>0,R=R>>>0,J||Y(A,R,this.length);let de=this[A],je=1,Fe=0;for(;++Fe<R&&(je*=256);)de+=this[A+Fe]*je;return je*=128,de>=je&&(de-=Math.pow(2,8*R)),de},a.prototype.readIntBE=function(A,R,J){A=A>>>0,R=R>>>0,J||Y(A,R,this.length);let de=R,je=1,Fe=this[A+--de];for(;de>0&&(je*=256);)Fe+=this[A+--de]*je;return je*=128,Fe>=je&&(Fe-=Math.pow(2,8*R)),Fe},a.prototype.readInt8=function(A,R){return A=A>>>0,R||Y(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},a.prototype.readInt16LE=function(A,R){A=A>>>0,R||Y(A,2,this.length);const J=this[A]|this[A+1]<<8;return J&32768?J|4294901760:J},a.prototype.readInt16BE=function(A,R){A=A>>>0,R||Y(A,2,this.length);const J=this[A+1]|this[A]<<8;return J&32768?J|4294901760:J},a.prototype.readInt32LE=function(A,R){return A=A>>>0,R||Y(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},a.prototype.readInt32BE=function(A,R){return A=A>>>0,R||Y(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},a.prototype.readBigInt64LE=Ct(function(A){A=A>>>0,ie(A,"offset");const R=this[A],J=this[A+7];(R===void 0||J===void 0)&&fe(A,this.length-8);const de=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(J<<24);return(BigInt(de)<<BigInt(32))+BigInt(R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),a.prototype.readBigInt64BE=Ct(function(A){A=A>>>0,ie(A,"offset");const R=this[A],J=this[A+7];(R===void 0||J===void 0)&&fe(A,this.length-8);const de=(R<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(de)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+J)}),a.prototype.readFloatLE=function(A,R){return A=A>>>0,R||Y(A,4,this.length),n.read(this,A,!0,23,4)},a.prototype.readFloatBE=function(A,R){return A=A>>>0,R||Y(A,4,this.length),n.read(this,A,!1,23,4)},a.prototype.readDoubleLE=function(A,R){return A=A>>>0,R||Y(A,8,this.length),n.read(this,A,!0,52,8)},a.prototype.readDoubleBE=function(A,R){return A=A>>>0,R||Y(A,8,this.length),n.read(this,A,!1,52,8)};function se(F,A,R,J,de,je){if(!a.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>de||A<je)throw new RangeError('"value" argument is out of bounds');if(R+J>F.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(A,R,J,de){if(A=+A,R=R>>>0,J=J>>>0,!de){const Rt=Math.pow(2,8*J)-1;se(this,A,R,J,Rt,0)}let je=1,Fe=0;for(this[R]=A&255;++Fe<J&&(je*=256);)this[R+Fe]=A/je&255;return R+J},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(A,R,J,de){if(A=+A,R=R>>>0,J=J>>>0,!de){const Rt=Math.pow(2,8*J)-1;se(this,A,R,J,Rt,0)}let je=J-1,Fe=1;for(this[R+je]=A&255;--je>=0&&(Fe*=256);)this[R+je]=A/Fe&255;return R+J},a.prototype.writeUint8=a.prototype.writeUInt8=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,1,255,0),this[R]=A&255,R+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,2,65535,0),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,2,65535,0),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,4,4294967295,0),this[R+3]=A>>>24,this[R+2]=A>>>16,this[R+1]=A>>>8,this[R]=A&255,R+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,4,4294967295,0),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4};function ue(F,A,R,J,de){ze(A,J,de,F,R,7);let je=Number(A&BigInt(4294967295));F[R++]=je,je=je>>8,F[R++]=je,je=je>>8,F[R++]=je,je=je>>8,F[R++]=je;let Fe=Number(A>>BigInt(32)&BigInt(4294967295));return F[R++]=Fe,Fe=Fe>>8,F[R++]=Fe,Fe=Fe>>8,F[R++]=Fe,Fe=Fe>>8,F[R++]=Fe,R}function Ce(F,A,R,J,de){ze(A,J,de,F,R,7);let je=Number(A&BigInt(4294967295));F[R+7]=je,je=je>>8,F[R+6]=je,je=je>>8,F[R+5]=je,je=je>>8,F[R+4]=je;let Fe=Number(A>>BigInt(32)&BigInt(4294967295));return F[R+3]=Fe,Fe=Fe>>8,F[R+2]=Fe,Fe=Fe>>8,F[R+1]=Fe,Fe=Fe>>8,F[R]=Fe,R+8}a.prototype.writeBigUInt64LE=Ct(function(A,R=0){return ue(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ct(function(A,R=0){return Ce(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(A,R,J,de){if(A=+A,R=R>>>0,!de){const Gt=Math.pow(2,8*J-1);se(this,A,R,J,Gt-1,-Gt)}let je=0,Fe=1,Rt=0;for(this[R]=A&255;++je<J&&(Fe*=256);)A<0&&Rt===0&&this[R+je-1]!==0&&(Rt=1),this[R+je]=(A/Fe>>0)-Rt&255;return R+J},a.prototype.writeIntBE=function(A,R,J,de){if(A=+A,R=R>>>0,!de){const Gt=Math.pow(2,8*J-1);se(this,A,R,J,Gt-1,-Gt)}let je=J-1,Fe=1,Rt=0;for(this[R+je]=A&255;--je>=0&&(Fe*=256);)A<0&&Rt===0&&this[R+je+1]!==0&&(Rt=1),this[R+je]=(A/Fe>>0)-Rt&255;return R+J},a.prototype.writeInt8=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,1,127,-128),A<0&&(A=255+A+1),this[R]=A&255,R+1},a.prototype.writeInt16LE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,2,32767,-32768),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeInt16BE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,2,32767,-32768),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeInt32LE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,4,2147483647,-2147483648),this[R]=A&255,this[R+1]=A>>>8,this[R+2]=A>>>16,this[R+3]=A>>>24,R+4},a.prototype.writeInt32BE=function(A,R,J){return A=+A,R=R>>>0,J||se(this,A,R,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4},a.prototype.writeBigInt64LE=Ct(function(A,R=0){return ue(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ct(function(A,R=0){return Ce(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(F,A,R,J,de,je){if(R+J>F.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function Te(F,A,R,J,de){return A=+A,R=R>>>0,de||Ne(F,A,R,4),n.write(F,A,R,J,23,4),R+4}a.prototype.writeFloatLE=function(A,R,J){return Te(this,A,R,!0,J)},a.prototype.writeFloatBE=function(A,R,J){return Te(this,A,R,!1,J)};function U(F,A,R,J,de){return A=+A,R=R>>>0,de||Ne(F,A,R,8),n.write(F,A,R,J,52,8),R+8}a.prototype.writeDoubleLE=function(A,R,J){return U(this,A,R,!0,J)},a.prototype.writeDoubleBE=function(A,R,J){return U(this,A,R,!1,J)},a.prototype.copy=function(A,R,J,de){if(!a.isBuffer(A))throw new TypeError("argument should be a Buffer");if(J||(J=0),!de&&de!==0&&(de=this.length),R>=A.length&&(R=A.length),R||(R=0),de>0&&de<J&&(de=J),de===J||A.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),A.length-R<de-J&&(de=A.length-R+J);const je=de-J;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,J,de):Uint8Array.prototype.set.call(A,this.subarray(J,de),R),je},a.prototype.fill=function(A,R,J,de){if(typeof A=="string"){if(typeof R=="string"?(de=R,R=0,J=this.length):typeof J=="string"&&(de=J,J=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!a.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(A.length===1){const Fe=A.charCodeAt(0);(de==="utf8"&&Fe<128||de==="latin1")&&(A=Fe)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(R<0||this.length<R||this.length<J)throw new RangeError("Out of range index");if(J<=R)return this;R=R>>>0,J=J===void 0?this.length:J>>>0,A||(A=0);let je;if(typeof A=="number")for(je=R;je<J;++je)this[je]=A;else{const Fe=a.isBuffer(A)?A:a.from(A,de),Rt=Fe.length;if(Rt===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(je=0;je<J-R;++je)this[je+R]=Fe[je%Rt]}return this};const ee={};function re(F,A,R){ee[F]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(F,"]"),this.stack,delete this.name}get code(){return F}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return"".concat(this.name," [").concat(F,"]: ").concat(this.message)}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(F){return F?"".concat(F," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(F,A){return'The "'.concat(F,'" argument must be of type number. Received type ').concat(typeof A)},TypeError),re("ERR_OUT_OF_RANGE",function(F,A,R){let J='The value of "'.concat(F,'" is out of range.'),de=R;return Number.isInteger(R)&&Math.abs(R)>2**32?de=De(String(R)):typeof R=="bigint"&&(de=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(de=De(de)),de+="n"),J+=" It must be ".concat(A,". Received ").concat(de),J},RangeError);function De(F){let A="",R=F.length;const J=F[0]==="-"?1:0;for(;R>=J+4;R-=3)A="_".concat(F.slice(R-3,R)).concat(A);return"".concat(F.slice(0,R)).concat(A)}function Ye(F,A,R){ie(A,"offset"),(F[A]===void 0||F[A+R]===void 0)&&fe(A,F.length-(R+1))}function ze(F,A,R,J,de,je){if(F>R||F<A){const Fe=typeof A=="bigint"?"n":"";let Rt;throw A===0||A===BigInt(0)?Rt=">= 0".concat(Fe," and < 2").concat(Fe," ** ").concat((je+1)*8).concat(Fe):Rt=">= -(2".concat(Fe," ** ").concat((je+1)*8-1).concat(Fe,") and < 2 ** ")+"".concat((je+1)*8-1).concat(Fe),new ee.ERR_OUT_OF_RANGE("value",Rt,F)}Ye(J,de,je)}function ie(F,A){if(typeof F!="number")throw new ee.ERR_INVALID_ARG_TYPE(A,"number",F)}function fe(F,A,R){throw Math.floor(F)!==F?(ie(F,R),new ee.ERR_OUT_OF_RANGE("offset","an integer",F)):A<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(A),F)}const Se=/[^+/0-9A-Za-z-_]/g;function We(F){if(F=F.split("=")[0],F=F.trim().replace(Se,""),F.length<2)return"";for(;F.length%4!==0;)F=F+"=";return F}function Ue(F,A){A=A||1/0;let R;const J=F.length;let de=null;const je=[];for(let Fe=0;Fe<J;++Fe){if(R=F.charCodeAt(Fe),R>55295&&R<57344){if(!de){if(R>56319){(A-=3)>-1&&je.push(239,191,189);continue}else if(Fe+1===J){(A-=3)>-1&&je.push(239,191,189);continue}de=R;continue}if(R<56320){(A-=3)>-1&&je.push(239,191,189),de=R;continue}R=(de-55296<<10|R-56320)+65536}else de&&(A-=3)>-1&&je.push(239,191,189);if(de=null,R<128){if((A-=1)<0)break;je.push(R)}else if(R<2048){if((A-=2)<0)break;je.push(R>>6|192,R&63|128)}else if(R<65536){if((A-=3)<0)break;je.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((A-=4)<0)break;je.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return je}function Ke(F){const A=[];for(let R=0;R<F.length;++R)A.push(F.charCodeAt(R)&255);return A}function he(F,A){let R,J,de;const je=[];for(let Fe=0;Fe<F.length&&!((A-=2)<0);++Fe)R=F.charCodeAt(Fe),J=R>>8,de=R%256,je.push(de),je.push(J);return je}function Be(F){return t.toByteArray(We(F))}function qe(F,A,R,J){let de;for(de=0;de<J&&!(de+R>=A.length||de>=F.length);++de)A[de+R]=F[de];return de}function $e(F,A){return F instanceof A||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===A.name}function Nt(F){return F!==F}const yn=function(){const F="0123456789abcdef",A=new Array(256);for(let R=0;R<16;++R){const J=R*16;for(let de=0;de<16;++de)A[J+de]=F[R]+F[de]}return A}();function Ct(F){return typeof BigInt>"u"?rn:F}function rn(){throw new Error("BigInt not supported")}}($0)),$0}var M0,pC;function On(){if(pC)return M0;pC=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError("Expected input to be an Array, got ".concat(typeof n));let r="";for(let i=0;i<n.length;i++)r+="    ".concat(n[i].stack,"\n");super(r),this.name="AggregateError",this.errors=n}}return M0={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},M0}var D0={exports:{}},L0,gC;function f4(){return gC||(gC=1,L0={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();if(r==="f")return i.toFixed(6);if(r==="j")return JSON.stringify(i);if(r==="s"&&typeof i=="object"){const o=i.constructor!==Object?i.constructor.name:"";return"".concat(o," {}").trim()}else return i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return"`".concat(e,"`")}else return'"'.concat(e,'"');return"'".concat(e,"'");case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return"".concat(String(e),"n");case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),L0}var F0,mC;function ii(){if(mC)return F0;mC=1;const{format:e,inspect:t}=f4(),{AggregateError:n}=On(),r=globalThis.AggregateError||n,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",l={};function u(w,x){if(!w)throw new l.ERR_INTERNAL_ASSERTION(x)}function d(w){let x="",b=w.length;const m=w[0]==="-"?1:0;for(;b>=m+4;b-=3)x="_".concat(w.slice(b-3,b)).concat(x);return"".concat(w.slice(0,b)).concat(x)}function f(w,x,b){if(typeof x=="function")return u(x.length<=b.length,"Code: ".concat(w,"; The provided arguments length (").concat(b.length,") does not match the required ones (").concat(x.length,").")),x(...b);const m=(x.match(/%[dfijoOs]/g)||[]).length;return u(m===b.length,"Code: ".concat(w,"; The provided arguments length (").concat(b.length,") does not match the required ones (").concat(m,").")),b.length===0?x:e(x,...b)}function h(w,x,b){b||(b=Error);class m extends b{constructor(...E){super(f(w,x,E))}toString(){return"".concat(this.name," [").concat(w,"]: ").concat(this.message)}}Object.defineProperties(m.prototype,{name:{value:b.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return"".concat(this.name," [").concat(w,"]: ").concat(this.message)},writable:!0,enumerable:!1,configurable:!0}}),m.prototype.code=w,m.prototype[i]=!0,l[w]=m}function p(w){const x=a+w.name;return Object.defineProperty(w,"name",{value:x}),w}function v(w,x){if(w&&x&&w!==x){if(Array.isArray(x.errors))return x.errors.push(w),x;const b=new r([x,w],x.message);return b.code=x.code,b}return w||x}class y extends Error{constructor(x="The operation was aborted",b=void 0){if(b!==void 0&&typeof b!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",b);super(x,b),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(w,x,b)=>{u(typeof w=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let m="The ";w.endsWith(" argument")?m+="".concat(w," "):m+='"'.concat(w,'" ').concat(w.includes(".")?"property":"argument"," "),m+="must be ";const S=[],E=[],k=[];for(const I of x)u(typeof I=="string","All expected entries have to be of type string"),o.includes(I)?S.push(I.toLowerCase()):s.test(I)?E.push(I):(u(I!=="object",'The value "object" should be written as "Object"'),k.push(I));if(E.length>0){const I=S.indexOf("object");I!==-1&&(S.splice(S,I,1),E.push("Object"))}if(S.length>0){switch(S.length){case 1:m+="of type ".concat(S[0]);break;case 2:m+="one of type ".concat(S[0]," or ").concat(S[1]);break;default:{const I=S.pop();m+="one of type ".concat(S.join(", "),", or ").concat(I)}}(E.length>0||k.length>0)&&(m+=" or ")}if(E.length>0){switch(E.length){case 1:m+="an instance of ".concat(E[0]);break;case 2:m+="an instance of ".concat(E[0]," or ").concat(E[1]);break;default:{const I=E.pop();m+="an instance of ".concat(E.join(", "),", or ").concat(I)}}k.length>0&&(m+=" or ")}switch(k.length){case 0:break;case 1:k[0].toLowerCase()!==k[0]&&(m+="an "),m+="".concat(k[0]);break;case 2:m+="one of ".concat(k[0]," or ").concat(k[1]);break;default:{const I=k.pop();m+="one of ".concat(k.join(", "),", or ").concat(I)}}if(b==null)m+=". Received ".concat(b);else if(typeof b=="function"&&b.name)m+=". Received function ".concat(b.name);else if(typeof b=="object"){var N;if((N=b.constructor)!==null&&N!==void 0&&N.name)m+=". Received an instance of ".concat(b.constructor.name);else{const I=t(b,{depth:-1});m+=". Received ".concat(I)}}else{let I=t(b,{colors:!1});I.length>25&&(I="".concat(I.slice(0,25),"...")),m+=". Received type ".concat(typeof b," (").concat(I,")")}return m},TypeError),h("ERR_INVALID_ARG_VALUE",(w,x,b="is invalid")=>{let m=t(x);m.length>128&&(m=m.slice(0,128)+"...");const S=w.includes(".")?"property":"argument";return"The ".concat(S," '").concat(w,"' ").concat(b,". Received ").concat(m)},TypeError),h("ERR_INVALID_RETURN_VALUE",(w,x,b)=>{var m;const S=b!=null&&(m=b.constructor)!==null&&m!==void 0&&m.name?"instance of ".concat(b.constructor.name):"type ".concat(typeof b);return"Expected ".concat(w,' to be returned from the "').concat(x,'"')+" function but got ".concat(S,".")},TypeError),h("ERR_MISSING_ARGS",(...w)=>{u(w.length>0,"At least one arg needs to be specified");let x;const b=w.length;switch(w=(Array.isArray(w)?w:[w]).map(m=>'"'.concat(m,'"')).join(" or "),b){case 1:x+="The ".concat(w[0]," argument");break;case 2:x+="The ".concat(w[0]," and ").concat(w[1]," arguments");break;default:{const m=w.pop();x+="The ".concat(w.join(", "),", and ").concat(m," arguments")}break}return"".concat(x," must be specified")},TypeError),h("ERR_OUT_OF_RANGE",(w,x,b)=>{u(x,'Missing "range" argument');let m;if(Number.isInteger(b)&&Math.abs(b)>2**32)m=d(String(b));else if(typeof b=="bigint"){m=String(b);const S=BigInt(2)**BigInt(32);(b>S||b<-S)&&(m=d(m)),m+="n"}else m=t(b);return'The value of "'.concat(w,'" is out of range. It must be ').concat(x,". Received ").concat(m)},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),F0={AbortError:y,aggregateTwoErrors:p(v),hideStackFrames:p,codes:l},F0}var vd={exports:{}},yC;function Zf(){if(yC)return vd.exports;yC=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return vd.exports=e,vd.exports.AbortSignal=t,vd.exports.default=e,vd.exports}var Cp={exports:{}},vC;function Hy(){if(vC)return Cp.exports;vC=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(E,k,N){return Function.prototype.apply.call(E,k,N)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:n=function(E){return Object.getOwnPropertyNames(E)};function r(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(E){return E!==E};function o(){o.init.call(this)}Cp.exports=o,Cp.exports.once=x,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");s=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function l(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(E){for(var k=[],N=1;N<arguments.length;N++)k.push(arguments[N]);var I=E==="error",z=this._events;if(z!==void 0)I=I&&z.error===void 0;else if(!I)return!1;if(I){var O;if(k.length>0&&(O=k[0]),O instanceof Error)throw O;var M=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw M.context=O,M}var K=z[E];if(K===void 0)return!1;if(typeof K=="function")t(K,this,k);else for(var D=K.length,L=v(K,D),N=0;N<D;++N)t(L[N],this,k);return!0};function u(S,E,k,N){var I,z,O;if(a(k),z=S._events,z===void 0?(z=S._events=Object.create(null),S._eventsCount=0):(z.newListener!==void 0&&(S.emit("newListener",E,k.listener?k.listener:k),z=S._events),O=z[E]),O===void 0)O=z[E]=k,++S._eventsCount;else if(typeof O=="function"?O=z[E]=N?[k,O]:[O,k]:N?O.unshift(k):O.push(k),I=l(S),I>0&&O.length>I&&!O.warned){O.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=S,M.type=E,M.count=O.length,r(M)}return S}o.prototype.addListener=function(E,k){return u(this,E,k,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(E,k){return u(this,E,k,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(S,E,k){var N={fired:!1,wrapFn:void 0,target:S,type:E,listener:k},I=d.bind(N);return I.listener=k,N.wrapFn=I,I}o.prototype.once=function(E,k){return a(k),this.on(E,f(this,E,k)),this},o.prototype.prependOnceListener=function(E,k){return a(k),this.prependListener(E,f(this,E,k)),this},o.prototype.removeListener=function(E,k){var N,I,z,O,M;if(a(k),I=this._events,I===void 0)return this;if(N=I[E],N===void 0)return this;if(N===k||N.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete I[E],I.removeListener&&this.emit("removeListener",E,N.listener||k));else if(typeof N!="function"){for(z=-1,O=N.length-1;O>=0;O--)if(N[O]===k||N[O].listener===k){M=N[O].listener,z=O;break}if(z<0)return this;z===0?N.shift():y(N,z),N.length===1&&(I[E]=N[0]),I.removeListener!==void 0&&this.emit("removeListener",E,M||k)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(E){var k,N,I;if(N=this._events,N===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete N[E]),this;if(arguments.length===0){var z=Object.keys(N),O;for(I=0;I<z.length;++I)O=z[I],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=N[E],typeof k=="function")this.removeListener(E,k);else if(k!==void 0)for(I=k.length-1;I>=0;I--)this.removeListener(E,k[I]);return this};function h(S,E,k){var N=S._events;if(N===void 0)return[];var I=N[E];return I===void 0?[]:typeof I=="function"?k?[I.listener||I]:[I]:k?w(I):v(I,I.length)}o.prototype.listeners=function(E){return h(this,E,!0)},o.prototype.rawListeners=function(E){return h(this,E,!1)},o.listenerCount=function(S,E){return typeof S.listenerCount=="function"?S.listenerCount(E):p.call(S,E)},o.prototype.listenerCount=p;function p(S){var E=this._events;if(E!==void 0){var k=E[S];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(S,E){for(var k=new Array(E),N=0;N<E;++N)k[N]=S[N];return k}function y(S,E){for(;E+1<S.length;E++)S[E]=S[E+1];S.pop()}function w(S){for(var E=new Array(S.length),k=0;k<E.length;++k)E[k]=S[k].listener||S[k];return E}function x(S,E){return new Promise(function(k,N){function I(O){S.removeListener(E,z),N(O)}function z(){typeof S.removeListener=="function"&&S.removeListener("error",I),k([].slice.call(arguments))}m(S,E,z,{once:!0}),E!=="error"&&b(S,I,{once:!0})})}function b(S,E,k){typeof S.on=="function"&&m(S,"error",E,k)}function m(S,E,k,N){if(typeof S.on=="function")N.once?S.once(E,k):S.on(E,k);else if(typeof S.addEventListener=="function")S.addEventListener(E,function I(z){N.once&&S.removeEventListener(E,I),k(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Cp.exports}var xC;function wi(){return xC||(xC=1,function(e){const t=Za(),{format:n,inspect:r}=f4(),{codes:{ERR_INVALID_ARG_TYPE:i}}=ii(),{kResistStopPropagation:o,AggregateError:s,SymbolDispose:a}=On(),l=globalThis.AbortSignal||Zf().AbortSignal,u=globalThis.AbortController||Zf().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||t.Blob,h=typeof f<"u"?function(w){return w instanceof f}:function(w){return!1},p=(y,w)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new i(w,"AbortSignal",y)},v=(y,w)=>{if(typeof y!="function")throw new i(w,"Function",y)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(y){let w=!1;return function(...x){w||(w=!0,y.apply(this,x))}},createDeferredPromise:function(){let y,w;return{promise:new Promise((b,m)=>{y=b,w=m}),resolve:y,reject:w}},promisify(y){return new Promise((w,x)=>{y((b,...m)=>b?x(b):w(...m))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(y){return y instanceof d},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:h,deprecate(y,w){return y},addAbortListener:Hy().addAbortListener||function(w,x){if(w===void 0)throw new i("signal","AbortSignal",w);p(w,"signal"),v(x,"listener");let b;return w.aborted?queueMicrotask(()=>x()):(w.addEventListener("abort",x,{__proto__:null,once:!0,[o]:!0}),b=()=>{w.removeEventListener("abort",x)}),{__proto__:null,[a](){var m;(m=b)===null||m===void 0||m()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const x=new u,b=()=>x.abort();return w.forEach(m=>{p(m,"signals"),m.addEventListener("abort",b,{once:!0})}),x.signal.addEventListener("abort",()=>{w.forEach(m=>m.removeEventListener("abort",b))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(D0)),D0.exports}var jp={},B0,bC;function jh(){if(bC)return B0;bC=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:a,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:f,StringPrototypeToUpperCase:h,StringPrototypeTrim:p}=On(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:m}}=ii(),{normalizeEncoding:S}=wi(),{isAsyncFunction:E,isArrayBufferView:k}=wi().types,N={};function I(he){return he===(he|0)}function z(he){return he===he>>>0}const O=/^[0-7]+$/,M="must be a 32-bit unsigned integer or an octal string";function K(he,Be,qe){if(typeof he>"u"&&(he=qe),typeof he=="string"){if(d(O,he)===null)throw new x(Be,he,M);he=l(he,8)}return q(he,Be),he}const D=v((he,Be,qe=a,$e=s)=>{if(typeof he!="number")throw new w(Be,"number",he);if(!i(he))throw new b(Be,"an integer",he);if(he<qe||he>$e)throw new b(Be,">= ".concat(qe," && <= ").concat($e),he)}),L=v((he,Be,qe=-2147483648,$e=2147483647)=>{if(typeof he!="number")throw new w(Be,"number",he);if(!i(he))throw new b(Be,"an integer",he);if(he<qe||he>$e)throw new b(Be,">= ".concat(qe," && <= ").concat($e),he)}),q=v((he,Be,qe=!1)=>{if(typeof he!="number")throw new w(Be,"number",he);if(!i(he))throw new b(Be,"an integer",he);const $e=qe?1:0,Nt=4294967295;if(he<$e||he>Nt)throw new b(Be,">= ".concat($e," && <= ").concat(Nt),he)});function G(he,Be){if(typeof he!="string")throw new w(Be,"string",he)}function te(he,Be,qe=void 0,$e){if(typeof he!="number")throw new w(Be,"number",he);if(qe!=null&&he<qe||$e!=null&&he>$e||(qe!=null||$e!=null)&&o(he))throw new b(Be,"".concat(qe!=null?">= ".concat(qe):"").concat(qe!=null&&$e!=null?" && ":"").concat($e!=null?"<= ".concat($e):""),he)}const B=v((he,Be,qe)=>{if(!t(qe,he)){const Nt="must be one of: "+n(r(qe,yn=>typeof yn=="string"?"'".concat(yn,"'"):f(yn)),", ");throw new x(Be,he,Nt)}});function H(he,Be){if(typeof he!="boolean")throw new w(Be,"boolean",he)}function $(he,Be,qe){return he==null||!u(he,Be)?qe:he[Be]}const Y=v((he,Be,qe=null)=>{const $e=$(qe,"allowArray",!1),Nt=$(qe,"allowFunction",!1);if(!$(qe,"nullable",!1)&&he===null||!$e&&e(he)||typeof he!="object"&&(!Nt||typeof he!="function"))throw new w(Be,"Object",he)}),se=v((he,Be)=>{if(he!=null&&typeof he!="object"&&typeof he!="function")throw new w(Be,"a dictionary",he)}),ue=v((he,Be,qe=0)=>{if(!e(he))throw new w(Be,"Array",he);if(he.length<qe){const $e="must be longer than ".concat(qe);throw new x(Be,he,$e)}});function Ce(he,Be){ue(he,Be);for(let qe=0;qe<he.length;qe++)G(he[qe],"".concat(Be,"[").concat(qe,"]"))}function Ne(he,Be){ue(he,Be);for(let qe=0;qe<he.length;qe++)H(he[qe],"".concat(Be,"[").concat(qe,"]"))}function Te(he,Be){ue(he,Be);for(let qe=0;qe<he.length;qe++){const $e=he[qe],Nt="".concat(Be,"[").concat(qe,"]");if($e==null)throw new w(Nt,"AbortSignal",$e);Ye($e,Nt)}}function U(he,Be="signal"){if(G(he,Be),N[he]===void 0)throw N[h(he)]!==void 0?new m(he+" (signals must use all capital letters)"):new m(he)}const ee=v((he,Be="buffer")=>{if(!k(he))throw new w(Be,["Buffer","TypedArray","DataView"],he)});function re(he,Be){const qe=S(Be),$e=he.length;if(qe==="hex"&&$e%2!==0)throw new x("encoding",Be,"is invalid for data of length ".concat($e))}function De(he,Be="Port",qe=!0){if(typeof he!="number"&&typeof he!="string"||typeof he=="string"&&p(he).length===0||+he!==+he>>>0||he>65535||he===0&&!qe)throw new y(Be,he,qe);return he|0}const Ye=v((he,Be)=>{if(he!==void 0&&(he===null||typeof he!="object"||!("aborted"in he)))throw new w(Be,"AbortSignal",he)}),ze=v((he,Be)=>{if(typeof he!="function")throw new w(Be,"Function",he)}),ie=v((he,Be)=>{if(typeof he!="function"||E(he))throw new w(Be,"Function",he)}),fe=v((he,Be)=>{if(he!==void 0)throw new w(Be,"undefined",he)});function Se(he,Be,qe){if(!t(qe,he))throw new w(Be,"('".concat(n(qe,"|"),"')"),he)}const We=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ue(he,Be){if(typeof he>"u"||!d(We,he))throw new x(Be,he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ke(he){if(typeof he=="string")return Ue(he,"hints"),he;if(e(he)){const Be=he.length;let qe="";if(Be===0)return qe;for(let $e=0;$e<Be;$e++){const Nt=he[$e];Ue(Nt,"hints"),qe+=Nt,$e!==Be-1&&(qe+=", ")}return qe}throw new x("hints",he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return B0={isInt32:I,isUint32:z,parseFileMode:K,validateArray:ue,validateStringArray:Ce,validateBooleanArray:Ne,validateAbortSignalArray:Te,validateBoolean:H,validateBuffer:ee,validateDictionary:se,validateEncoding:re,validateFunction:ze,validateInt32:L,validateInteger:D,validateNumber:te,validateObject:Y,validateOneOf:B,validatePlainFunction:ie,validatePort:De,validateSignalName:U,validateString:G,validateUint32:q,validateUndefined:fe,validateUnion:Se,validateAbortSignal:Ye,validateLinkHeaderValue:Ke},B0}var Ap={exports:{}},z0={exports:{}},wC;function iu(){if(wC)return z0.exports;wC=1;var e=z0.exports={},t,n;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch(y){t=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=i}catch(y){n=i}})();function o(y){if(t===setTimeout)return setTimeout(y,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch(w){try{return t.call(null,y,0)}catch(x){return t.call(this,y,0)}}}function s(y){if(n===clearTimeout)return clearTimeout(y);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(y);try{return n(y)}catch(w){try{return n.call(null,y)}catch(x){return n.call(this,y)}}}var a=[],l=!1,u,d=-1;function f(){!l||!u||(l=!1,u.length?a=u.concat(a):d=-1,a.length&&h())}function h(){if(!l){var y=o(f);l=!0;for(var w=a.length;w;){for(u=a,a=[];++d<w;)u&&u[d].run();d=-1,w=a.length}u=null,l=!1,s(y)}}e.nextTick=function(y){var w=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)w[x-1]=arguments[x];a.push(new p(y,w)),a.length===1&&!l&&o(h)};function p(y,w){this.fun=y,this.array=w}p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function v(){}return e.on=v,e.addListener=v,e.once=v,e.off=v,e.removeListener=v,e.removeAllListeners=v,e.emit=v,e.prependListener=v,e.prependOnceListener=v,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},z0.exports}var H0,_C;function oa(){if(_C)return H0;_C=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=On(),r=n("nodejs.stream.destroyed"),i=n("nodejs.stream.errored"),o=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),a=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d($,Y=!1){var se;return!!($&&typeof $.pipe=="function"&&typeof $.on=="function"&&(!Y||typeof $.pause=="function"&&typeof $.resume=="function")&&(!$._writableState||((se=$._readableState)===null||se===void 0?void 0:se.readable)!==!1)&&(!$._writableState||$._readableState))}function f($){var Y;return!!($&&typeof $.write=="function"&&typeof $.on=="function"&&(!$._readableState||((Y=$._writableState)===null||Y===void 0?void 0:Y.writable)!==!1))}function h($){return!!($&&typeof $.pipe=="function"&&$._readableState&&typeof $.on=="function"&&typeof $.write=="function")}function p($){return $&&($._readableState||$._writableState||typeof $.write=="function"&&typeof $.on=="function"||typeof $.pipe=="function"&&typeof $.on=="function")}function v($){return!!($&&!p($)&&typeof $.pipeThrough=="function"&&typeof $.getReader=="function"&&typeof $.cancel=="function")}function y($){return!!($&&!p($)&&typeof $.getWriter=="function"&&typeof $.abort=="function")}function w($){return!!($&&!p($)&&typeof $.readable=="object"&&typeof $.writable=="object")}function x($){return v($)||y($)||w($)}function b($,Y){return $==null?!1:Y===!0?typeof $[e]=="function":Y===!1?typeof $[t]=="function":typeof $[e]=="function"||typeof $[t]=="function"}function m($){if(!p($))return null;const Y=$._writableState,se=$._readableState,ue=Y||se;return!!($.destroyed||$[r]||ue!=null&&ue.destroyed)}function S($){if(!f($))return null;if($.writableEnded===!0)return!0;const Y=$._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function E($,Y){if(!f($))return null;if($.writableFinished===!0)return!0;const se=$._writableState;return se!=null&&se.errored?!1:typeof(se==null?void 0:se.finished)!="boolean"?null:!!(se.finished||Y===!1&&se.ended===!0&&se.length===0)}function k($){if(!d($))return null;if($.readableEnded===!0)return!0;const Y=$._readableState;return!Y||Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function N($,Y){if(!d($))return null;const se=$._readableState;return se!=null&&se.errored?!1:typeof(se==null?void 0:se.endEmitted)!="boolean"?null:!!(se.endEmitted||Y===!1&&se.ended===!0&&se.length===0)}function I($){return $&&$[o]!=null?$[o]:typeof($==null?void 0:$.readable)!="boolean"?null:m($)?!1:d($)&&$.readable&&!N($)}function z($){return $&&$[s]!=null?$[s]:typeof($==null?void 0:$.writable)!="boolean"?null:m($)?!1:f($)&&$.writable&&!S($)}function O($,Y){return p($)?m($)?!0:!((Y==null?void 0:Y.readable)!==!1&&I($)||(Y==null?void 0:Y.writable)!==!1&&z($)):null}function M($){var Y,se;return p($)?$.writableErrored?$.writableErrored:(Y=(se=$._writableState)===null||se===void 0?void 0:se.errored)!==null&&Y!==void 0?Y:null:null}function K($){var Y,se;return p($)?$.readableErrored?$.readableErrored:(Y=(se=$._readableState)===null||se===void 0?void 0:se.errored)!==null&&Y!==void 0?Y:null:null}function D($){if(!p($))return null;if(typeof $.closed=="boolean")return $.closed;const Y=$._writableState,se=$._readableState;return typeof(Y==null?void 0:Y.closed)=="boolean"||typeof(se==null?void 0:se.closed)=="boolean"?(Y==null?void 0:Y.closed)||(se==null?void 0:se.closed):typeof $._closed=="boolean"&&L($)?$._closed:null}function L($){return typeof $._closed=="boolean"&&typeof $._defaultKeepAlive=="boolean"&&typeof $._removedConnection=="boolean"&&typeof $._removedContLen=="boolean"}function q($){return typeof $._sent100=="boolean"&&L($)}function G($){var Y;return typeof $._consuming=="boolean"&&typeof $._dumped=="boolean"&&((Y=$.req)===null||Y===void 0?void 0:Y.upgradeOrConnect)===void 0}function te($){if(!p($))return null;const Y=$._writableState,se=$._readableState,ue=Y||se;return!ue&&q($)||!!(ue&&ue.autoDestroy&&ue.emitClose&&ue.closed===!1)}function B($){var Y;return!!($&&((Y=$[a])!==null&&Y!==void 0?Y:$.readableDidRead||$.readableAborted))}function H($){var Y,se,ue,Ce,Ne,Te,U,ee,re,De;return!!($&&((Y=(se=(ue=(Ce=(Ne=(Te=$[i])!==null&&Te!==void 0?Te:$.readableErrored)!==null&&Ne!==void 0?Ne:$.writableErrored)!==null&&Ce!==void 0?Ce:(U=$._readableState)===null||U===void 0?void 0:U.errorEmitted)!==null&&ue!==void 0?ue:(ee=$._writableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&se!==void 0?se:(re=$._readableState)===null||re===void 0?void 0:re.errored)!==null&&Y!==void 0?Y:!((De=$._writableState)===null||De===void 0)&&De.errored))}return H0={isDestroyed:m,kIsDestroyed:r,isDisturbed:B,kIsDisturbed:a,isErrored:H,kIsErrored:i,isReadable:I,kIsReadable:o,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:D,isDuplexNodeStream:h,isFinished:O,isIterable:b,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:k,isReadableFinished:N,isReadableErrored:K,isNodeStream:p,isWebStream:x,isWritable:z,isWritableNodeStream:f,isWritableStream:y,isWritableEnded:S,isWritableFinished:E,isWritableErrored:M,isServerRequest:G,isServerResponse:q,willEmitClose:te,isTransformStream:w},H0}var SC;function el(){if(SC)return Ap.exports;SC=1;const e=iu(),{AbortError:t,codes:n}=ii(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=n,{kEmptyObject:o,once:s}=wi(),{validateAbortSignal:a,validateFunction:l,validateObject:u,validateBoolean:d}=jh(),{Promise:f,PromisePrototypeThen:h,SymbolDispose:p}=On(),{isClosed:v,isReadable:y,isReadableNodeStream:w,isReadableStream:x,isReadableFinished:b,isReadableErrored:m,isWritable:S,isWritableNodeStream:E,isWritableStream:k,isWritableFinished:N,isWritableErrored:I,isNodeStream:z,willEmitClose:O,kIsClosedPromise:M}=oa();let K;function D(B){return B.setHeader&&typeof B.abort=="function"}const L=()=>{};function q(B,H,$){var Y,se;if(arguments.length===2?($=H,H=o):H==null?H=o:u(H,"options"),l($,"callback"),a(H.signal,"options.signal"),$=s($),x(B)||k(B))return G(B,H,$);if(!z(B))throw new r("stream",["ReadableStream","WritableStream","Stream"],B);const ue=(Y=H.readable)!==null&&Y!==void 0?Y:w(B),Ce=(se=H.writable)!==null&&se!==void 0?se:E(B),Ne=B._writableState,Te=B._readableState,U=()=>{B.writable||De()};let ee=O(B)&&w(B)===ue&&E(B)===Ce,re=N(B,!1);const De=()=>{re=!0,B.destroyed&&(ee=!1),!(ee&&(!B.readable||ue))&&(!ue||Ye)&&$.call(B)};let Ye=b(B,!1);const ze=()=>{Ye=!0,B.destroyed&&(ee=!1),!(ee&&(!B.writable||Ce))&&(!Ce||re)&&$.call(B)},ie=he=>{$.call(B,he)};let fe=v(B);const Se=()=>{fe=!0;const he=I(B)||m(B);if(he&&typeof he!="boolean")return $.call(B,he);if(ue&&!Ye&&w(B,!0)&&!b(B,!1))return $.call(B,new i);if(Ce&&!re&&!N(B,!1))return $.call(B,new i);$.call(B)},We=()=>{fe=!0;const he=I(B)||m(B);if(he&&typeof he!="boolean")return $.call(B,he);$.call(B)},Ue=()=>{B.req.on("finish",De)};D(B)?(B.on("complete",De),ee||B.on("abort",Se),B.req?Ue():B.on("request",Ue)):Ce&&!Ne&&(B.on("end",U),B.on("close",U)),!ee&&typeof B.aborted=="boolean"&&B.on("aborted",Se),B.on("end",ze),B.on("finish",De),H.error!==!1&&B.on("error",ie),B.on("close",Se),fe?e.nextTick(Se):Ne!=null&&Ne.errorEmitted||Te!=null&&Te.errorEmitted?ee||e.nextTick(We):(!ue&&(!ee||y(B))&&(re||S(B)===!1)||!Ce&&(!ee||S(B))&&(Ye||y(B)===!1)||Te&&B.req&&B.aborted)&&e.nextTick(We);const Ke=()=>{$=L,B.removeListener("aborted",Se),B.removeListener("complete",De),B.removeListener("abort",Se),B.removeListener("request",Ue),B.req&&B.req.removeListener("finish",De),B.removeListener("end",U),B.removeListener("close",U),B.removeListener("finish",De),B.removeListener("end",ze),B.removeListener("error",ie),B.removeListener("close",Se)};if(H.signal&&!fe){const he=()=>{const Be=$;Ke(),Be.call(B,new t(void 0,{cause:H.signal.reason}))};if(H.signal.aborted)e.nextTick(he);else{K=K||wi().addAbortListener;const Be=K(H.signal,he),qe=$;$=s((...$e)=>{Be[p](),qe.apply(B,$e)})}}return Ke}function G(B,H,$){let Y=!1,se=L;if(H.signal)if(se=()=>{Y=!0,$.call(B,new t(void 0,{cause:H.signal.reason}))},H.signal.aborted)e.nextTick(se);else{K=K||wi().addAbortListener;const Ce=K(H.signal,se),Ne=$;$=s((...Te)=>{Ce[p](),Ne.apply(B,Te)})}const ue=(...Ce)=>{Y||e.nextTick(()=>$.apply(B,Ce))};return h(B[M].promise,ue,ue),L}function te(B,H){var $;let Y=!1;return H===null&&(H=o),($=H)!==null&&$!==void 0&&$.cleanup&&(d(H.cleanup,"cleanup"),Y=H.cleanup),new f((se,ue)=>{const Ce=q(B,H,Ne=>{Y&&Ce(),Ne?ue(Ne):se()})})}return Ap.exports=q,Ap.exports.finished=te,Ap.exports}var W0,EC;function zc(){if(EC)return W0;EC=1;const e=iu(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=ii(),{Symbol:i}=On(),{kIsDestroyed:o,isDestroyed:s,isFinished:a,isServerRequest:l}=oa(),u=i("kDestroy"),d=i("kConstruct");function f(O,M,K){O&&(O.stack,M&&!M.errored&&(M.errored=O),K&&!K.errored&&(K.errored=O))}function h(O,M){const K=this._readableState,D=this._writableState,L=D||K;return D!=null&&D.destroyed||K!=null&&K.destroyed?(typeof M=="function"&&M(),this):(f(O,D,K),D&&(D.destroyed=!0),K&&(K.destroyed=!0),L.constructed?p(this,O,M):this.once(u,function(q){p(this,t(q,O),M)}),this)}function p(O,M,K){let D=!1;function L(q){if(D)return;D=!0;const G=O._readableState,te=O._writableState;f(q,te,G),te&&(te.closed=!0),G&&(G.closed=!0),typeof K=="function"&&K(q),q?e.nextTick(v,O,q):e.nextTick(y,O)}try{O._destroy(M||null,L)}catch(q){L(q)}}function v(O,M){w(O,M),y(O)}function y(O){const M=O._readableState,K=O._writableState;K&&(K.closeEmitted=!0),M&&(M.closeEmitted=!0),(K!=null&&K.emitClose||M!=null&&M.emitClose)&&O.emit("close")}function w(O,M){const K=O._readableState,D=O._writableState;D!=null&&D.errorEmitted||K!=null&&K.errorEmitted||(D&&(D.errorEmitted=!0),K&&(K.errorEmitted=!0),O.emit("error",M))}function x(){const O=this._readableState,M=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),M&&(M.constructed=!0,M.destroyed=!1,M.closed=!1,M.closeEmitted=!1,M.errored=null,M.errorEmitted=!1,M.finalCalled=!1,M.prefinished=!1,M.ended=M.writable===!1,M.ending=M.writable===!1,M.finished=M.writable===!1)}function b(O,M,K){const D=O._readableState,L=O._writableState;if(L!=null&&L.destroyed||D!=null&&D.destroyed)return this;D!=null&&D.autoDestroy||L!=null&&L.autoDestroy?O.destroy(M):M&&(M.stack,L&&!L.errored&&(L.errored=M),D&&!D.errored&&(D.errored=M),K?e.nextTick(w,O,M):w(O,M))}function m(O,M){if(typeof O._construct!="function")return;const K=O._readableState,D=O._writableState;K&&(K.constructed=!1),D&&(D.constructed=!1),O.once(d,M),!(O.listenerCount(d)>1)&&e.nextTick(S,O)}function S(O){let M=!1;function K(D){if(M){b(O,D!=null?D:new n);return}M=!0;const L=O._readableState,q=O._writableState,G=q||L;L&&(L.constructed=!0),q&&(q.constructed=!0),G.destroyed?O.emit(u,D):D?b(O,D,!0):e.nextTick(E,O)}try{O._construct(D=>{e.nextTick(K,D)})}catch(D){e.nextTick(K,D)}}function E(O){O.emit(d)}function k(O){return(O==null?void 0:O.setHeader)&&typeof O.abort=="function"}function N(O){O.emit("close")}function I(O,M){O.emit("error",M),e.nextTick(N,O)}function z(O,M){!O||s(O)||(!M&&!a(O)&&(M=new r),l(O)?(O.socket=null,O.destroy(M)):k(O)?O.abort():k(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(M):typeof O.close=="function"?O.close():M?e.nextTick(I,O,M):e.nextTick(N,O),O.destroyed||(O[o]=!0))}return W0={construct:m,destroyer:z,destroy:h,undestroy:x,errorOrDestroy:b},W0}var U0,kC;function K1(){if(kC)return U0;kC=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=On(),{EventEmitter:n}=Hy();function r(o){n.call(this,o)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(o,s){const a=this;function l(y){o.writable&&o.write(y)===!1&&a.pause&&a.pause()}a.on("data",l);function u(){a.readable&&a.resume&&a.resume()}o.on("drain",u),!o._isStdio&&(!s||s.end!==!1)&&(a.on("end",f),a.on("close",h));let d=!1;function f(){d||(d=!0,o.end())}function h(){d||(d=!0,typeof o.destroy=="function"&&o.destroy())}function p(y){v(),n.listenerCount(this,"error")===0&&this.emit("error",y)}i(a,"error",p),i(o,"error",p);function v(){a.removeListener("data",l),o.removeListener("drain",u),a.removeListener("end",f),a.removeListener("close",h),a.removeListener("error",p),o.removeListener("error",p),a.removeListener("end",v),a.removeListener("close",v),o.removeListener("close",v)}return a.on("end",v),a.on("close",v),o.on("close",v),o.emit("pipe",a),o};function i(o,s,a){if(typeof o.prependListener=="function")return o.prependListener(s,a);!o._events||!o._events[s]?o.on(s,a):e(o._events[s])?o._events[s].unshift(a):o._events[s]=[a,o._events[s]]}return U0={Stream:r,prependListener:i},U0}var V0={exports:{}},CC;function Wy(){return CC||(CC=1,function(e){const{SymbolDispose:t}=On(),{AbortError:n,codes:r}=ii(),{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=oa(),a=el(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(f,h)=>{if(typeof f!="object"||!("aborted"in f))throw new l(h,"AbortSignal",f)};e.exports.addAbortSignal=function(h,p){if(d(h,"signal"),!i(p)&&!o(p))throw new l("stream",["ReadableStream","WritableStream","Stream"],p);return e.exports.addAbortSignalNoValidate(h,p)},e.exports.addAbortSignalNoValidate=function(f,h){if(typeof f!="object"||!("aborted"in f))return h;const p=i(h)?()=>{h.destroy(new n(void 0,{cause:f.reason}))}:()=>{h[s](new n(void 0,{cause:f.reason}))};if(f.aborted)p();else{u=u||wi().addAbortListener;const v=u(f,p);a(h,v[t])}return h}}(V0)),V0.exports}var q0,jC;function WG(){if(jC)return q0;jC=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=On(),{Buffer:i}=Za(),{inspect:o}=wi();return q0=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const l={data:a,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(a){const l={data:a,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=a+l.data;return u}concat(a){if(this.length===0)return i.alloc(0);const l=i.allocUnsafe(a>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(a,l){const u=this.head.data;if(a<u.length){const d=u.slice(0,a);return this.head.data=u.slice(a),d}return a===u.length?this.shift():l?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[t](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let l="",u=this.head,d=0;do{const f=u.data;if(a>f.length)l+=f,a-=f.length;else{a===f.length?(l+=f,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(f,0,a),this.head=u,u.data=e(f,a));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(a){const l=i.allocUnsafe(a),u=a;let d=this.head,f=0;do{const h=d.data;if(a>h.length)n(l,h,u-a),a-=h.length;else{a===h.length?(n(l,h,u-a),++f,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(h.buffer,h.byteOffset,a),u-a),this.head=d,d.data=h.slice(a));break}++f}while((d=d.next)!==null);return this.length-=f,l}[Symbol.for("nodejs.util.inspect.custom")](a,l){return o(this,{...l,depth:0,customInspect:!1})}},q0}var K0,AC;function Uy(){if(AC)return K0;AC=1;const{MathFloor:e,NumberIsInteger:t}=On(),{validateInteger:n}=jh(),{ERR_INVALID_ARG_VALUE:r}=ii().codes;let i=16*1024,o=16;function s(d,f,h){return d.highWaterMark!=null?d.highWaterMark:f?d[h]:null}function a(d){return d?o:i}function l(d,f){n(f,"value",0),d?o=f:i=f}function u(d,f,h,p){const v=s(f,p,h);if(v!=null){if(!t(v)||v<0){const y=p?"options.".concat(h):"options.highWaterMark";throw new r(y,v)}return e(v)}return a(d.objectMode)}return K0={getHighWaterMark:u,getDefaultHighWaterMark:a,setDefaultHighWaterMark:l},K0}var G0={},Np={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var NC;function UG(){return NC||(NC=1,function(e,t){var n=Za(),r=n.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o);function o(s,a,l){return r(s,a,l)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(Np,Np.exports)),Np.exports}var RC;function VG(){if(RC)return G0;RC=1;var e=UG().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var b;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(b)return;x=(""+x).toLowerCase(),b=!0}}function r(x){var b=n(x);if(typeof b!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return b||x}G0.StringDecoder=i;function i(x){this.encoding=r(x);var b;switch(this.encoding){case"utf16le":this.text=f,this.end=h,b=4;break;case"utf8":this.fillLast=l,b=4;break;case"base64":this.text=p,this.end=v,b=3;break;default:this.write=y,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(b)}i.prototype.write=function(x){if(x.length===0)return"";var b,m;if(this.lastNeed){if(b=this.fillLast(x),b===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<x.length?b?b+this.text(x,m):this.text(x,m):b||""},i.prototype.end=d,i.prototype.text=u,i.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function o(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function s(x,b,m){var S=b.length-1;if(S<m)return 0;var E=o(b[S]);return E>=0?(E>0&&(x.lastNeed=E-1),E):--S<m||E===-2?0:(E=o(b[S]),E>=0?(E>0&&(x.lastNeed=E-2),E):--S<m||E===-2?0:(E=o(b[S]),E>=0?(E>0&&(E===2?E=0:x.lastNeed=E-3),E):0))}function a(x,b,m){if((b[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var b=this.lastTotal-this.lastNeed,m=a(this,x);if(m!==void 0)return m;if(this.lastNeed<=x.length)return x.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,b,0,x.length),this.lastNeed-=x.length}function u(x,b){var m=s(this,x,b);if(!this.lastNeed)return x.toString("utf8",b);this.lastTotal=m;var S=x.length-(m-this.lastNeed);return x.copy(this.lastChar,0,S),x.toString("utf8",b,S)}function d(x){var b=x&&x.length?this.write(x):"";return this.lastNeed?b+"":b}function f(x,b){if((x.length-b)%2===0){var m=x.toString("utf16le",b);if(m){var S=m.charCodeAt(m.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",b,x.length-1)}function h(x){var b=x&&x.length?this.write(x):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,m)}return b}function p(x,b){var m=(x.length-b)%3;return m===0?x.toString("base64",b):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",b,x.length-m))}function v(x){var b=x&&x.length?this.write(x):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function y(x){return x.toString(this.encoding)}function w(x){return x&&x.length?this.write(x):""}return G0}var Y0,TC;function h4(){if(TC)return Y0;TC=1;const e=iu(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=On(),{Buffer:i}=Za(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:s}=ii().codes;function a(l,u,d){let f;if(typeof u=="string"||u instanceof i)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let h;if(u&&u[n])h=!0,f=u[n]();else if(u&&u[r])h=!1,f=u[r]();else throw new o("iterable",["Iterable"],u);const p=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;p._read=function(){v||(v=!0,w())},p._destroy=function(x,b){t(y(x),()=>e.nextTick(b,x),m=>e.nextTick(b,m||x))};async function y(x){const b=x!=null,m=typeof f.throw=="function";if(b&&m){const{value:S,done:E}=await f.throw(x);if(await S,E)return}if(typeof f.return=="function"){const{value:S}=await f.return();await S}}async function w(){for(;;){try{const{value:x,done:b}=h?await f.next():f.next();if(b)p.push(null);else{const m=x&&typeof x.then=="function"?await x:x;if(m===null)throw v=!1,new s;if(p.push(m))continue;v=!1}}catch(x){p.destroy(x)}break}}return p}return Y0=a,Y0}var X0,IC;function Vy(){if(IC)return X0;IC=1;const e=iu(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:f,Symbol:h}=On();X0=$e,$e.ReadableState=qe;const{EventEmitter:p}=Hy(),{Stream:v,prependListener:y}=K1(),{Buffer:w}=Za(),{addAbortSignal:x}=Wy(),b=el();let m=wi().debuglog("stream",X=>{m=X});const S=WG(),E=zc(),{getHighWaterMark:k,getDefaultHighWaterMark:N}=Uy(),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:M,ERR_STREAM_PUSH_AFTER_EOF:K,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:L}=ii(),{validateObject:q}=jh(),G=h("kPaused"),{StringDecoder:te}=VG(),B=h4();a($e.prototype,v.prototype),a($e,v);const H=()=>{},{errorOrDestroy:$}=E,Y=1,se=2,ue=4,Ce=8,Ne=16,Te=32,U=64,ee=128,re=256,De=512,Ye=1024,ze=2048,ie=4096,fe=8192,Se=16384,We=32768,Ue=65536,Ke=1<<17,he=1<<18;function Be(X){return{enumerable:!1,get(){return(this.state&X)!==0},set(ne){ne?this.state|=X:this.state&=~X}}}o(qe.prototype,{objectMode:Be(Y),ended:Be(se),endEmitted:Be(ue),reading:Be(Ce),constructed:Be(Ne),sync:Be(Te),needReadable:Be(U),emittedReadable:Be(ee),readableListening:Be(re),resumeScheduled:Be(De),errorEmitted:Be(Ye),emitClose:Be(ze),autoDestroy:Be(ie),destroyed:Be(fe),closed:Be(Se),closeEmitted:Be(We),multiAwaitDrain:Be(Ue),readingMore:Be(Ke),dataEmitted:Be(he)});function qe(X,ne,tt){typeof tt!="boolean"&&(tt=ne instanceof Js()),this.state=ze|ie|Ne|Te,X&&X.objectMode&&(this.state|=Y),tt&&X&&X.readableObjectMode&&(this.state|=Y),this.highWaterMark=X?k(this,X,"readableHighWaterMark",tt):N(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[G]=null,X&&X.emitClose===!1&&(this.state&=-2049),X&&X.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=X&&X.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,X&&X.encoding&&(this.decoder=new te(X.encoding),this.encoding=X.encoding)}function $e(X){if(!(this instanceof $e))return new $e(X);const ne=this instanceof Js();this._readableState=new qe(X,this,ne),X&&(typeof X.read=="function"&&(this._read=X.read),typeof X.destroy=="function"&&(this._destroy=X.destroy),typeof X.construct=="function"&&(this._construct=X.construct),X.signal&&!ne&&x(X.signal,this)),v.call(this,X),E.construct(this,()=>{this._readableState.needReadable&&de(this,this._readableState)})}$e.prototype.destroy=E.destroy,$e.prototype._undestroy=E.undestroy,$e.prototype._destroy=function(X,ne){ne(X)},$e.prototype[p.captureRejectionSymbol]=function(X){this.destroy(X)},$e.prototype[d]=function(){let X;return this.destroyed||(X=this.readableEnded?null:new L,this.destroy(X)),new l((ne,tt)=>b(this,ot=>ot&&ot!==X?tt(ot):ne(null)))},$e.prototype.push=function(X,ne){return Nt(this,X,ne,!1)},$e.prototype.unshift=function(X,ne){return Nt(this,X,ne,!0)};function Nt(X,ne,tt,ot){m("readableAddChunk",ne);const mt=X._readableState;let Ot;if(mt.state&Y||(typeof ne=="string"?(tt=tt||mt.defaultEncoding,mt.encoding!==tt&&(ot&&mt.encoding?ne=w.from(ne,tt).toString(mt.encoding):(ne=w.from(ne,tt),tt=""))):ne instanceof w?tt="":v._isUint8Array(ne)?(ne=v._uint8ArrayToBuffer(ne),tt=""):ne!=null&&(Ot=new z("chunk",["string","Buffer","Uint8Array"],ne))),Ot)$(X,Ot);else if(ne===null)mt.state&=-9,A(X,mt);else if(mt.state&Y||ne&&ne.length>0)if(ot)if(mt.state&ue)$(X,new D);else{if(mt.destroyed||mt.errored)return!1;yn(X,mt,ne,!0)}else if(mt.ended)$(X,new K);else{if(mt.destroyed||mt.errored)return!1;mt.state&=-9,mt.decoder&&!tt?(ne=mt.decoder.write(ne),mt.objectMode||ne.length!==0?yn(X,mt,ne,!1):de(X,mt)):yn(X,mt,ne,!1)}else ot||(mt.state&=-9,de(X,mt));return!mt.ended&&(mt.length<mt.highWaterMark||mt.length===0)}function yn(X,ne,tt,ot){ne.flowing&&ne.length===0&&!ne.sync&&X.listenerCount("data")>0?(ne.state&Ue?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null,ne.dataEmitted=!0,X.emit("data",tt)):(ne.length+=ne.objectMode?1:tt.length,ot?ne.buffer.unshift(tt):ne.buffer.push(tt),ne.state&U&&R(X)),de(X,ne)}$e.prototype.isPaused=function(){const X=this._readableState;return X[G]===!0||X.flowing===!1},$e.prototype.setEncoding=function(X){const ne=new te(X);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;const tt=this._readableState.buffer;let ot="";for(const mt of tt)ot+=ne.write(mt);return tt.clear(),ot!==""&&tt.push(ot),this._readableState.length=ot.length,this};const Ct=1073741824;function rn(X){if(X>Ct)throw new M("size","<= 1GiB",X);return X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++,X}function F(X,ne){return X<=0||ne.length===0&&ne.ended?0:ne.state&Y?1:r(X)?ne.flowing&&ne.length?ne.buffer.first().length:ne.length:X<=ne.length?X:ne.ended?ne.length:0}$e.prototype.read=function(X){m("read",X),X===void 0?X=NaN:n(X)||(X=i(X,10));const ne=this._readableState,tt=X;if(X>ne.highWaterMark&&(ne.highWaterMark=rn(X)),X!==0&&(ne.state&=-129),X===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return m("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Lo(this):R(this),null;if(X=F(X,ne),X===0&&ne.ended)return ne.length===0&&Lo(this),null;let ot=(ne.state&U)!==0;if(m("need readable",ot),(ne.length===0||ne.length-X<ne.highWaterMark)&&(ot=!0,m("length less than watermark",ot)),ne.ended||ne.reading||ne.destroyed||ne.errored||!ne.constructed)ot=!1,m("reading, ended or constructing",ot);else if(ot){m("do read"),ne.state|=Ce|Te,ne.length===0&&(ne.state|=U);try{this._read(ne.highWaterMark)}catch(Ot){$(this,Ot)}ne.state&=-33,ne.reading||(X=F(tt,ne))}let mt;return X>0?mt=Do(X,ne):mt=null,mt===null?(ne.needReadable=ne.length<=ne.highWaterMark,X=0):(ne.length-=X,ne.multiAwaitDrain?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null),ne.length===0&&(ne.ended||(ne.needReadable=!0),tt!==X&&ne.ended&&Lo(this)),mt!==null&&!ne.errorEmitted&&!ne.closeEmitted&&(ne.dataEmitted=!0,this.emit("data",mt)),mt};function A(X,ne){if(m("onEofChunk"),!ne.ended){if(ne.decoder){const tt=ne.decoder.end();tt&&tt.length&&(ne.buffer.push(tt),ne.length+=ne.objectMode?1:tt.length)}ne.ended=!0,ne.sync?R(X):(ne.needReadable=!1,ne.emittedReadable=!0,J(X))}}function R(X){const ne=X._readableState;m("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(m("emitReadable",ne.flowing),ne.emittedReadable=!0,e.nextTick(J,X))}function J(X){const ne=X._readableState;m("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&!ne.errored&&(ne.length||ne.ended)&&(X.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,$t(X)}function de(X,ne){!ne.readingMore&&ne.constructed&&(ne.readingMore=!0,e.nextTick(je,X,ne))}function je(X,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){const tt=ne.length;if(m("maybeReadMore read 0"),X.read(0),tt===ne.length)break}ne.readingMore=!1}$e.prototype._read=function(X){throw new O("_read()")},$e.prototype.pipe=function(X,ne){const tt=this,ot=this._readableState;ot.pipes.length===1&&(ot.multiAwaitDrain||(ot.multiAwaitDrain=!0,ot.awaitDrainWriters=new u(ot.awaitDrainWriters?[ot.awaitDrainWriters]:[]))),ot.pipes.push(X),m("pipe count=%d opts=%j",ot.pipes.length,ne);const Ot=(!ne||ne.end!==!1)&&X!==e.stdout&&X!==e.stderr?xs:uo;ot.endEmitted?e.nextTick(Ot):tt.once("end",Ot),X.on("unpipe",Zt);function Zt(Qn,kr){m("onunpipe"),Qn===tt&&kr&&kr.hasUnpiped===!1&&(kr.hasUnpiped=!0,Bo())}function xs(){m("onend"),X.end()}let Er,lo=!1;function Bo(){m("cleanup"),X.removeListener("close",mr),X.removeListener("finish",Si),Er&&X.removeListener("drain",Er),X.removeListener("error",Vr),X.removeListener("unpipe",Zt),tt.removeListener("end",xs),tt.removeListener("end",uo),tt.removeListener("data",Ur),lo=!0,Er&&ot.awaitDrainWriters&&(!X._writableState||X._writableState.needDrain)&&Er()}function la(){lo||(ot.pipes.length===1&&ot.pipes[0]===X?(m("false write response, pause",0),ot.awaitDrainWriters=X,ot.multiAwaitDrain=!1):ot.pipes.length>1&&ot.pipes.includes(X)&&(m("false write response, pause",ot.awaitDrainWriters.size),ot.awaitDrainWriters.add(X)),tt.pause()),Er||(Er=Fe(tt,X),X.on("drain",Er))}tt.on("data",Ur);function Ur(Qn){m("ondata");const kr=X.write(Qn);m("dest.write",kr),kr===!1&&la()}function Vr(Qn){if(m("onerror",Qn),uo(),X.removeListener("error",Vr),X.listenerCount("error")===0){const kr=X._writableState||X._readableState;kr&&!kr.errorEmitted?$(X,Qn):X.emit("error",Qn)}}y(X,"error",Vr);function mr(){X.removeListener("finish",Si),uo()}X.once("close",mr);function Si(){m("onfinish"),X.removeListener("close",mr),uo()}X.once("finish",Si);function uo(){m("unpipe"),tt.unpipe(X)}return X.emit("pipe",tt),X.writableNeedDrain===!0?la():ot.flowing||(m("pipe resume"),tt.resume()),X};function Fe(X,ne){return function(){const ot=X._readableState;ot.awaitDrainWriters===ne?(m("pipeOnDrain",1),ot.awaitDrainWriters=null):ot.multiAwaitDrain&&(m("pipeOnDrain",ot.awaitDrainWriters.size),ot.awaitDrainWriters.delete(ne)),(!ot.awaitDrainWriters||ot.awaitDrainWriters.size===0)&&X.listenerCount("data")&&X.resume()}}$e.prototype.unpipe=function(X){const ne=this._readableState,tt={hasUnpiped:!1};if(ne.pipes.length===0)return this;if(!X){const mt=ne.pipes;ne.pipes=[],this.pause();for(let Ot=0;Ot<mt.length;Ot++)mt[Ot].emit("unpipe",this,{hasUnpiped:!1});return this}const ot=t(ne.pipes,X);return ot===-1?this:(ne.pipes.splice(ot,1),ne.pipes.length===0&&this.pause(),X.emit("unpipe",this,tt),this)},$e.prototype.on=function(X,ne){const tt=v.prototype.on.call(this,X,ne),ot=this._readableState;return X==="data"?(ot.readableListening=this.listenerCount("readable")>0,ot.flowing!==!1&&this.resume()):X==="readable"&&!ot.endEmitted&&!ot.readableListening&&(ot.readableListening=ot.needReadable=!0,ot.flowing=!1,ot.emittedReadable=!1,m("on readable",ot.length,ot.reading),ot.length?R(this):ot.reading||e.nextTick(Gt,this)),tt},$e.prototype.addListener=$e.prototype.on,$e.prototype.removeListener=function(X,ne){const tt=v.prototype.removeListener.call(this,X,ne);return X==="readable"&&e.nextTick(Rt,this),tt},$e.prototype.off=$e.prototype.removeListener,$e.prototype.removeAllListeners=function(X){const ne=v.prototype.removeAllListeners.apply(this,arguments);return(X==="readable"||X===void 0)&&e.nextTick(Rt,this),ne};function Rt(X){const ne=X._readableState;ne.readableListening=X.listenerCount("readable")>0,ne.resumeScheduled&&ne[G]===!1?ne.flowing=!0:X.listenerCount("data")>0?X.resume():ne.readableListening||(ne.flowing=null)}function Gt(X){m("readable nexttick read 0"),X.read(0)}$e.prototype.resume=function(){const X=this._readableState;return X.flowing||(m("resume"),X.flowing=!X.readableListening,st(this,X)),X[G]=!1,this};function st(X,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,e.nextTick(Jt,X,ne))}function Jt(X,ne){m("resume",ne.reading),ne.reading||X.read(0),ne.resumeScheduled=!1,X.emit("resume"),$t(X),ne.flowing&&!ne.reading&&X.read(0)}$e.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[G]=!0,this};function $t(X){const ne=X._readableState;for(m("flow",ne.flowing);ne.flowing&&X.read()!==null;);}$e.prototype.wrap=function(X){let ne=!1;X.on("data",ot=>{!this.push(ot)&&X.pause&&(ne=!0,X.pause())}),X.on("end",()=>{this.push(null)}),X.on("error",ot=>{$(this,ot)}),X.on("close",()=>{this.destroy()}),X.on("destroy",()=>{this.destroy()}),this._read=()=>{ne&&X.resume&&(ne=!1,X.resume())};const tt=s(X);for(let ot=1;ot<tt.length;ot++){const mt=tt[ot];this[mt]===void 0&&typeof X[mt]=="function"&&(this[mt]=X[mt].bind(X))}return this},$e.prototype[f]=function(){return so(this)},$e.prototype.iterator=function(X){return X!==void 0&&q(X,"options"),so(this,X)};function so(X,ne){typeof X.read!="function"&&(X=$e.wrap(X,{objectMode:!0}));const tt=at(X,ne);return tt.stream=X,tt}async function*at(X,ne){let tt=H;function ot(Zt){this===X?(tt(),tt=H):tt=Zt}X.on("readable",ot);let mt;const Ot=b(X,{writable:!1},Zt=>{mt=Zt?I(mt,Zt):null,tt(),tt=H});try{for(;;){const Zt=X.destroyed?null:X.read();if(Zt!==null)yield Zt;else{if(mt)throw mt;if(mt===null)return;await new l(ot)}}}catch(Zt){throw mt=I(mt,Zt),mt}finally{(mt||(ne==null?void 0:ne.destroyOnReturn)!==!1)&&(mt===void 0||X._readableState.autoDestroy)?E.destroyer(X,null):(X.off("readable",ot),Ot())}}o($e.prototype,{readable:{__proto__:null,get(){const X=this._readableState;return!!X&&X.readable!==!1&&!X.destroyed&&!X.errorEmitted&&!X.endEmitted},set(X){this._readableState&&(this._readableState.readable=!!X)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(X){this._readableState&&(this._readableState.flowing=X)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(X){this._readableState&&(this._readableState.destroyed=X)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(qe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[G]!==!1},set(X){this[G]=!!X}}}),$e._fromList=Do;function Do(X,ne){if(ne.length===0)return null;let tt;return ne.objectMode?tt=ne.buffer.shift():!X||X>=ne.length?(ne.decoder?tt=ne.buffer.join(""):ne.buffer.length===1?tt=ne.buffer.first():tt=ne.buffer.concat(ne.length),ne.buffer.clear()):tt=ne.buffer.consume(X,ne.decoder),tt}function Lo(X){const ne=X._readableState;m("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,e.nextTick(Fo,ne,X))}function Fo(X,ne){if(m("endReadableNT",X.endEmitted,X.length),!X.errored&&!X.closeEmitted&&!X.endEmitted&&X.length===0){if(X.endEmitted=!0,ne.emit("end"),ne.writable&&ne.allowHalfOpen===!1)e.nextTick(vs,ne);else if(X.autoDestroy){const tt=ne._writableState;(!tt||tt.autoDestroy&&(tt.finished||tt.writable===!1))&&ne.destroy()}}}function vs(X){X.writable&&!X.writableEnded&&!X.destroyed&&X.end()}$e.from=function(X,ne){return B($e,X,ne)};let ao;function aa(){return ao===void 0&&(ao={}),ao}return $e.fromWeb=function(X,ne){return aa().newStreamReadableFromReadableStream(X,ne)},$e.toWeb=function(X,ne){return aa().newReadableStreamFromStreamReadable(X,ne)},$e.wrap=function(X,ne){var tt,ot;return new $e({objectMode:(tt=(ot=X.readableObjectMode)!==null&&ot!==void 0?ot:X.objectMode)!==null&&tt!==void 0?tt:!0,...ne,destroy(mt,Ot){E.destroyer(X,mt),Ot(mt)}}).wrap(X)},X0}var J0,PC;function G1(){if(PC)return J0;PC=1;const e=iu(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:l,SymbolHasInstance:u}=On();J0=q,q.WritableState=D;const{EventEmitter:d}=Hy(),f=K1().Stream,{Buffer:h}=Za(),p=zc(),{addAbortSignal:v}=Wy(),{getHighWaterMark:y,getDefaultHighWaterMark:w}=Uy(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:m,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:k,ERR_STREAM_NULL_VALUES:N,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:z}=ii().codes,{errorOrDestroy:O}=p;s(q.prototype,f.prototype),s(q,f);function M(){}const K=l("kOnFinished");function D(ie,fe,Se){typeof Se!="boolean"&&(Se=fe instanceof Js()),this.objectMode=!!(ie&&ie.objectMode),Se&&(this.objectMode=this.objectMode||!!(ie&&ie.writableObjectMode)),this.highWaterMark=ie?y(this,ie,"writableHighWaterMark",Se):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const We=!!(ie&&ie.decodeStrings===!1);this.decodeStrings=!We,this.defaultEncoding=ie&&ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=$.bind(void 0,fe),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ie||ie.emitClose!==!1,this.autoDestroy=!ie||ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[K]=[]}function L(ie){ie.buffered=[],ie.bufferedIndex=0,ie.allBuffers=!0,ie.allNoop=!0}D.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function q(ie){const fe=this instanceof Js();if(!fe&&!r(q,this))return new q(ie);this._writableState=new D(ie,this,fe),ie&&(typeof ie.write=="function"&&(this._write=ie.write),typeof ie.writev=="function"&&(this._writev=ie.writev),typeof ie.destroy=="function"&&(this._destroy=ie.destroy),typeof ie.final=="function"&&(this._final=ie.final),typeof ie.construct=="function"&&(this._construct=ie.construct),ie.signal&&v(ie.signal,this)),f.call(this,ie),p.construct(this,()=>{const Se=this._writableState;Se.writing||Ce(this,Se),ee(this,Se)})}i(q,u,{__proto__:null,value:function(ie){return r(this,ie)?!0:this!==q?!1:ie&&ie._writableState instanceof D}}),q.prototype.pipe=function(){O(this,new S)};function G(ie,fe,Se,We){const Ue=ie._writableState;if(typeof Se=="function")We=Se,Se=Ue.defaultEncoding;else{if(!Se)Se=Ue.defaultEncoding;else if(Se!=="buffer"&&!h.isEncoding(Se))throw new z(Se);typeof We!="function"&&(We=M)}if(fe===null)throw new N;if(!Ue.objectMode)if(typeof fe=="string")Ue.decodeStrings!==!1&&(fe=h.from(fe,Se),Se="buffer");else if(fe instanceof h)Se="buffer";else if(f._isUint8Array(fe))fe=f._uint8ArrayToBuffer(fe),Se="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],fe);let Ke;return Ue.ending?Ke=new I:Ue.destroyed&&(Ke=new E("write")),Ke?(e.nextTick(We,Ke),O(ie,Ke,!0),Ke):(Ue.pendingcb++,te(ie,Ue,fe,Se,We))}q.prototype.write=function(ie,fe,Se){return G(this,ie,fe,Se)===!0},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){const ie=this._writableState;ie.corked&&(ie.corked--,ie.writing||Ce(this,ie))},q.prototype.setDefaultEncoding=function(fe){if(typeof fe=="string"&&(fe=a(fe)),!h.isEncoding(fe))throw new z(fe);return this._writableState.defaultEncoding=fe,this};function te(ie,fe,Se,We,Ue){const Ke=fe.objectMode?1:Se.length;fe.length+=Ke;const he=fe.length<fe.highWaterMark;return he||(fe.needDrain=!0),fe.writing||fe.corked||fe.errored||!fe.constructed?(fe.buffered.push({chunk:Se,encoding:We,callback:Ue}),fe.allBuffers&&We!=="buffer"&&(fe.allBuffers=!1),fe.allNoop&&Ue!==M&&(fe.allNoop=!1)):(fe.writelen=Ke,fe.writecb=Ue,fe.writing=!0,fe.sync=!0,ie._write(Se,We,fe.onwrite),fe.sync=!1),he&&!fe.errored&&!fe.destroyed}function B(ie,fe,Se,We,Ue,Ke,he){fe.writelen=We,fe.writecb=he,fe.writing=!0,fe.sync=!0,fe.destroyed?fe.onwrite(new E("write")):Se?ie._writev(Ue,fe.onwrite):ie._write(Ue,Ke,fe.onwrite),fe.sync=!1}function H(ie,fe,Se,We){--fe.pendingcb,We(Se),ue(fe),O(ie,Se)}function $(ie,fe){const Se=ie._writableState,We=Se.sync,Ue=Se.writecb;if(typeof Ue!="function"){O(ie,new m);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,fe?(fe.stack,Se.errored||(Se.errored=fe),ie._readableState&&!ie._readableState.errored&&(ie._readableState.errored=fe),We?e.nextTick(H,ie,Se,fe,Ue):H(ie,Se,fe,Ue)):(Se.buffered.length>Se.bufferedIndex&&Ce(ie,Se),We?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===Ue?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:Ue,stream:ie,state:Se},e.nextTick(Y,Se.afterWriteTickInfo)):se(ie,Se,1,Ue))}function Y({stream:ie,state:fe,count:Se,cb:We}){return fe.afterWriteTickInfo=null,se(ie,fe,Se,We)}function se(ie,fe,Se,We){for(!fe.ending&&!ie.destroyed&&fe.length===0&&fe.needDrain&&(fe.needDrain=!1,ie.emit("drain"));Se-- >0;)fe.pendingcb--,We();fe.destroyed&&ue(fe),ee(ie,fe)}function ue(ie){if(ie.writing)return;for(let Ue=ie.bufferedIndex;Ue<ie.buffered.length;++Ue){var fe;const{chunk:Ke,callback:he}=ie.buffered[Ue],Be=ie.objectMode?1:Ke.length;ie.length-=Be,he((fe=ie.errored)!==null&&fe!==void 0?fe:new E("write"))}const Se=ie[K].splice(0);for(let Ue=0;Ue<Se.length;Ue++){var We;Se[Ue]((We=ie.errored)!==null&&We!==void 0?We:new E("end"))}L(ie)}function Ce(ie,fe){if(fe.corked||fe.bufferProcessing||fe.destroyed||!fe.constructed)return;const{buffered:Se,bufferedIndex:We,objectMode:Ue}=fe,Ke=Se.length-We;if(!Ke)return;let he=We;if(fe.bufferProcessing=!0,Ke>1&&ie._writev){fe.pendingcb-=Ke-1;const Be=fe.allNoop?M:$e=>{for(let Nt=he;Nt<Se.length;++Nt)Se[Nt].callback($e)},qe=fe.allNoop&&he===0?Se:t(Se,he);qe.allBuffers=fe.allBuffers,B(ie,fe,!0,fe.length,qe,"",Be),L(fe)}else{do{const{chunk:Be,encoding:qe,callback:$e}=Se[he];Se[he++]=null;const Nt=Ue?1:Be.length;B(ie,fe,!1,Nt,Be,qe,$e)}while(he<Se.length&&!fe.writing);he===Se.length?L(fe):he>256?(Se.splice(0,he),fe.bufferedIndex=0):fe.bufferedIndex=he}fe.bufferProcessing=!1}q.prototype._write=function(ie,fe,Se){if(this._writev)this._writev([{chunk:ie,encoding:fe}],Se);else throw new b("_write()")},q.prototype._writev=null,q.prototype.end=function(ie,fe,Se){const We=this._writableState;typeof ie=="function"?(Se=ie,ie=null,fe=null):typeof fe=="function"&&(Se=fe,fe=null);let Ue;if(ie!=null){const Ke=G(this,ie,fe);Ke instanceof n&&(Ue=Ke)}return We.corked&&(We.corked=1,this.uncork()),Ue||(!We.errored&&!We.ending?(We.ending=!0,ee(this,We,!0),We.ended=!0):We.finished?Ue=new k("end"):We.destroyed&&(Ue=new E("end"))),typeof Se=="function"&&(Ue||We.finished?e.nextTick(Se,Ue):We[K].push(Se)),this};function Ne(ie){return ie.ending&&!ie.destroyed&&ie.constructed&&ie.length===0&&!ie.errored&&ie.buffered.length===0&&!ie.finished&&!ie.writing&&!ie.errorEmitted&&!ie.closeEmitted}function Te(ie,fe){let Se=!1;function We(Ue){if(Se){O(ie,Ue!=null?Ue:m());return}if(Se=!0,fe.pendingcb--,Ue){const Ke=fe[K].splice(0);for(let he=0;he<Ke.length;he++)Ke[he](Ue);O(ie,Ue,fe.sync)}else Ne(fe)&&(fe.prefinished=!0,ie.emit("prefinish"),fe.pendingcb++,e.nextTick(re,ie,fe))}fe.sync=!0,fe.pendingcb++;try{ie._final(We)}catch(Ue){We(Ue)}fe.sync=!1}function U(ie,fe){!fe.prefinished&&!fe.finalCalled&&(typeof ie._final=="function"&&!fe.destroyed?(fe.finalCalled=!0,Te(ie,fe)):(fe.prefinished=!0,ie.emit("prefinish")))}function ee(ie,fe,Se){Ne(fe)&&(U(ie,fe),fe.pendingcb===0&&(Se?(fe.pendingcb++,e.nextTick((We,Ue)=>{Ne(Ue)?re(We,Ue):Ue.pendingcb--},ie,fe)):Ne(fe)&&(fe.pendingcb++,re(ie,fe))))}function re(ie,fe){fe.pendingcb--,fe.finished=!0;const Se=fe[K].splice(0);for(let We=0;We<Se.length;We++)Se[We]();if(ie.emit("finish"),fe.autoDestroy){const We=ie._readableState;(!We||We.autoDestroy&&(We.endEmitted||We.readable===!1))&&ie.destroy()}}o(q.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(ie){this._writableState&&(this._writableState.destroyed=ie)}},writable:{__proto__:null,get(){const ie=this._writableState;return!!ie&&ie.writable!==!1&&!ie.destroyed&&!ie.errored&&!ie.ending&&!ie.ended},set(ie){this._writableState&&(this._writableState.writable=!!ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const ie=this._writableState;return ie?!ie.destroyed&&!ie.ending&&ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const De=p.destroy;q.prototype.destroy=function(ie,fe){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[K].length)&&e.nextTick(ue,Se),De.call(this,ie,fe),this},q.prototype._undestroy=p.undestroy,q.prototype._destroy=function(ie,fe){fe(ie)},q.prototype[d.captureRejectionSymbol]=function(ie){this.destroy(ie)};let Ye;function ze(){return Ye===void 0&&(Ye={}),Ye}return q.fromWeb=function(ie,fe){return ze().newStreamWritableFromWritableStream(ie,fe)},q.toWeb=function(ie){return ze().newWritableStreamFromStreamWritable(ie)},J0}var Q0,OC;function qG(){if(OC)return Q0;OC=1;const e=iu(),t=Za(),{isReadable:n,isWritable:r,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=oa(),f=el(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:v}}=ii(),{destroyer:y}=zc(),w=Js(),x=Vy(),b=G1(),{createDeferredPromise:m}=wi(),S=h4(),E=globalThis.Blob||t.Blob,k=typeof E<"u"?function(D){return D instanceof E}:function(D){return!1},N=globalThis.AbortController||Zf().AbortController,{FunctionPrototypeCall:I}=On();class z extends w{constructor(D){super(D),(D==null?void 0:D.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(D==null?void 0:D.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Q0=function K(D,L){if(l(D))return D;if(s(D))return M({readable:D});if(a(D))return M({writable:D});if(o(D))return M({writable:!1,readable:!1});if(u(D))return M({readable:x.fromWeb(D)});if(d(D))return M({writable:b.fromWeb(D)});if(typeof D=="function"){const{value:G,write:te,final:B,destroy:H}=O(D);if(i(G))return S(z,G,{objectMode:!0,write:te,final:B,destroy:H});const $=G==null?void 0:G.then;if(typeof $=="function"){let Y;const se=I($,G,ue=>{if(ue!=null)throw new v("nully","body",ue)},ue=>{y(Y,ue)});return Y=new z({objectMode:!0,readable:!1,write:te,final(ue){B(async()=>{try{await se,e.nextTick(ue,null)}catch(Ce){e.nextTick(ue,Ce)}})},destroy:H})}throw new v("Iterable, AsyncIterable or AsyncFunction",L,G)}if(k(D))return K(D.arrayBuffer());if(i(D))return S(z,D,{objectMode:!0,writable:!1});if(u(D==null?void 0:D.readable)&&d(D==null?void 0:D.writable))return z.fromWeb(D);if(typeof(D==null?void 0:D.writable)=="object"||typeof(D==null?void 0:D.readable)=="object"){const G=D!=null&&D.readable?s(D==null?void 0:D.readable)?D==null?void 0:D.readable:K(D.readable):void 0,te=D!=null&&D.writable?a(D==null?void 0:D.writable)?D==null?void 0:D.writable:K(D.writable):void 0;return M({readable:G,writable:te})}const q=D==null?void 0:D.then;if(typeof q=="function"){let G;return I(q,D,te=>{te!=null&&G.push(te),G.push(null)},te=>{y(G,te)}),G=new z({objectMode:!0,writable:!1,read(){}})}throw new p(L,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],D)};function O(K){let{promise:D,resolve:L}=m();const q=new N,G=q.signal;return{value:K(async function*(){for(;;){const B=D;D=null;const{chunk:H,done:$,cb:Y}=await B;if(e.nextTick(Y),$)return;if(G.aborted)throw new h(void 0,{cause:G.reason});({promise:D,resolve:L}=m()),yield H}}(),{signal:G}),write(B,H,$){const Y=L;L=null,Y({chunk:B,done:!1,cb:$})},final(B){const H=L;L=null,H({done:!0,cb:B})},destroy(B,H){q.abort(),H(B)}}}function M(K){const D=K.readable&&typeof K.readable.read!="function"?x.wrap(K.readable):K.readable,L=K.writable;let q=!!n(D),G=!!r(L),te,B,H,$,Y;function se(ue){const Ce=$;$=null,Ce?Ce(ue):ue&&Y.destroy(ue)}return Y=new z({readableObjectMode:!!(D!=null&&D.readableObjectMode),writableObjectMode:!!(L!=null&&L.writableObjectMode),readable:q,writable:G}),G&&(f(L,ue=>{G=!1,ue&&y(D,ue),se(ue)}),Y._write=function(ue,Ce,Ne){L.write(ue,Ce)?Ne():te=Ne},Y._final=function(ue){L.end(),B=ue},L.on("drain",function(){if(te){const ue=te;te=null,ue()}}),L.on("finish",function(){if(B){const ue=B;B=null,ue()}})),q&&(f(D,ue=>{q=!1,ue&&y(D,ue),se(ue)}),D.on("readable",function(){if(H){const ue=H;H=null,ue()}}),D.on("end",function(){Y.push(null)}),Y._read=function(){for(;;){const ue=D.read();if(ue===null){H=Y._read;return}if(!Y.push(ue))return}}),Y._destroy=function(ue,Ce){!ue&&$!==null&&(ue=new h),H=null,te=null,B=null,$===null?Ce(ue):($=Ce,y(L,ue),y(D,ue))},Y}return Q0}var Z0,$C;function Js(){if($C)return Z0;$C=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=On();Z0=s;const i=Vy(),o=G1();r(s.prototype,i.prototype),r(s,i);{const d=n(o.prototype);for(let f=0;f<d.length;f++){const h=d[f];s.prototype[h]||(s.prototype[h]=o.prototype[h])}}function s(d){if(!(this instanceof s))return new s(d);i.call(this,d),o.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let a;function l(){return a===void 0&&(a={}),a}s.fromWeb=function(d,f){return l().newStreamDuplexFromReadableWritablePair(d,f)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return s.from=function(d){return u||(u=qG()),u(d,"body")},Z0}var ex,MC;function p4(){if(MC)return ex;MC=1;const{ObjectSetPrototypeOf:e,Symbol:t}=On();ex=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=ii().codes,r=Js(),{getHighWaterMark:i}=Uy();e(s.prototype,r.prototype),e(s,r);const o=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const d=u?i(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[o]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function a(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,f)=>{if(d){u?u(d):this.destroy(d);return}f!=null&&this.push(f),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==a&&a.call(this)}return s.prototype._final=a,s.prototype._transform=function(u,d,f){throw new n("_transform()")},s.prototype._write=function(u,d,f){const h=this._readableState,p=this._writableState,v=h.length;this._transform(u,d,(y,w)=>{if(y){f(y);return}w!=null&&this.push(w),p.ended||v===h.length||h.length<h.highWaterMark?f():this[o]=f})},s.prototype._read=function(){if(this[o]){const u=this[o];this[o]=null,u()}},ex}var tx,DC;function g4(){if(DC)return tx;DC=1;const{ObjectSetPrototypeOf:e}=On();tx=n;const t=p4();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,i,o){o(null,r)},tx}var nx,LC;function Y1(){if(LC)return nx;LC=1;const e=iu(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:i}=On(),o=el(),{once:s}=wi(),a=zc(),l=Js(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:y}=ii(),{validateFunction:w,validateAbortSignal:x}=jh(),{isIterable:b,isReadable:m,isReadableNodeStream:S,isNodeStream:E,isTransformStream:k,isWebStream:N,isReadableStream:I,isReadableFinished:z}=oa(),O=globalThis.AbortController||Zf().AbortController;let M,K,D;function L(ue,Ce,Ne){let Te=!1;ue.on("close",()=>{Te=!0});const U=o(ue,{readable:Ce,writable:Ne},ee=>{Te=!ee});return{destroy:ee=>{Te||(Te=!0,a.destroyer(ue,ee||new p("pipe")))},cleanup:U}}function q(ue){return w(ue[ue.length-1],"streams[stream.length - 1]"),ue.pop()}function G(ue){if(b(ue))return ue;if(S(ue))return te(ue);throw new d("val",["Readable","Iterable","AsyncIterable"],ue)}async function*te(ue){K||(K=Vy()),yield*K.prototype[r].call(ue)}async function B(ue,Ce,Ne,{end:Te}){let U,ee=null;const re=ze=>{if(ze&&(U=ze),ee){const ie=ee;ee=null,ie()}},De=()=>new n((ze,ie)=>{U?ie(U):ee=()=>{U?ie(U):ze()}});Ce.on("drain",re);const Ye=o(Ce,{readable:!1},re);try{Ce.writableNeedDrain&&await De();for await(const ze of ue)Ce.write(ze)||await De();Te&&(Ce.end(),await De()),Ne()}catch(ze){Ne(U!==ze?u(U,ze):ze)}finally{Ye(),Ce.off("drain",re)}}async function H(ue,Ce,Ne,{end:Te}){k(Ce)&&(Ce=Ce.writable);const U=Ce.getWriter();try{for await(const ee of ue)await U.ready,U.write(ee).catch(()=>{});await U.ready,Te&&await U.close(),Ne()}catch(ee){try{await U.abort(ee),Ne(ee)}catch(re){Ne(re)}}}function $(...ue){return Y(ue,s(q(ue)))}function Y(ue,Ce,Ne){if(ue.length===1&&t(ue[0])&&(ue=ue[0]),ue.length<2)throw new h("streams");const Te=new O,U=Te.signal,ee=Ne==null?void 0:Ne.signal,re=[];x(ee,"options.signal");function De(){Ue(new y)}D=D||wi().addAbortListener;let Ye;ee&&(Ye=D(ee,De));let ze,ie;const fe=[];let Se=0;function We(qe){Ue(qe,--Se===0)}function Ue(qe,$e){var Nt;if(qe&&(!ze||ze.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ze=qe),!(!ze&&!$e)){for(;fe.length;)fe.shift()(ze);(Nt=Ye)===null||Nt===void 0||Nt[i](),Te.abort(),$e&&(ze||re.forEach(yn=>yn()),e.nextTick(Ce,ze,ie))}}let Ke;for(let qe=0;qe<ue.length;qe++){const $e=ue[qe],Nt=qe<ue.length-1,yn=qe>0,Ct=Nt||(Ne==null?void 0:Ne.end)!==!1,rn=qe===ue.length-1;if(E($e)){let F=function(A){A&&A.name!=="AbortError"&&A.code!=="ERR_STREAM_PREMATURE_CLOSE"&&We(A)};if(Ct){const{destroy:A,cleanup:R}=L($e,Nt,yn);fe.push(A),m($e)&&rn&&re.push(R)}$e.on("error",F),m($e)&&rn&&re.push(()=>{$e.removeListener("error",F)})}if(qe===0)if(typeof $e=="function"){if(Ke=$e({signal:U}),!b(Ke))throw new f("Iterable, AsyncIterable or Stream","source",Ke)}else b($e)||S($e)||k($e)?Ke=$e:Ke=l.from($e);else if(typeof $e=="function"){if(k(Ke)){var he;Ke=G((he=Ke)===null||he===void 0?void 0:he.readable)}else Ke=G(Ke);if(Ke=$e(Ke,{signal:U}),Nt){if(!b(Ke,!0))throw new f("AsyncIterable","transform[".concat(qe-1,"]"),Ke)}else{var Be;M||(M=g4());const F=new M({objectMode:!0}),A=(Be=Ke)===null||Be===void 0?void 0:Be.then;if(typeof A=="function")Se++,A.call(Ke,de=>{ie=de,de!=null&&F.write(de),Ct&&F.end(),e.nextTick(We)},de=>{F.destroy(de),e.nextTick(We,de)});else if(b(Ke,!0))Se++,B(Ke,F,We,{end:Ct});else if(I(Ke)||k(Ke)){const de=Ke.readable||Ke;Se++,B(de,F,We,{end:Ct})}else throw new f("AsyncIterable or Promise","destination",Ke);Ke=F;const{destroy:R,cleanup:J}=L(Ke,!1,!0);fe.push(R),rn&&re.push(J)}}else if(E($e)){if(S(Ke)){Se+=2;const F=se(Ke,$e,We,{end:Ct});m($e)&&rn&&re.push(F)}else if(k(Ke)||I(Ke)){const F=Ke.readable||Ke;Se++,B(F,$e,We,{end:Ct})}else if(b(Ke))Se++,B(Ke,$e,We,{end:Ct});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Ke=$e}else if(N($e)){if(S(Ke))Se++,H(G(Ke),$e,We,{end:Ct});else if(I(Ke)||b(Ke))Se++,H(Ke,$e,We,{end:Ct});else if(k(Ke))Se++,H(Ke.readable,$e,We,{end:Ct});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Ke=$e}else Ke=l.from($e)}return(U!=null&&U.aborted||ee!=null&&ee.aborted)&&e.nextTick(De),Ke}function se(ue,Ce,Ne,{end:Te}){let U=!1;if(Ce.on("close",()=>{U||Ne(new v)}),ue.pipe(Ce,{end:!1}),Te){let ee=function(){U=!0,Ce.end()};z(ue)?e.nextTick(ee):ue.once("end",ee)}else Ne();return o(ue,{readable:!0,writable:!1},ee=>{const re=ue._readableState;ee&&ee.code==="ERR_STREAM_PREMATURE_CLOSE"&&re&&re.ended&&!re.errored&&!re.errorEmitted?ue.once("end",Ne).once("error",Ne):Ne(ee)}),o(Ce,{readable:!1,writable:!0},Ne)}return nx={pipelineImpl:Y,pipeline:$},nx}var rx,FC;function m4(){if(FC)return rx;FC=1;const{pipeline:e}=Y1(),t=Js(),{destroyer:n}=zc(),{isNodeStream:r,isReadable:i,isWritable:o,isWebStream:s,isTransformStream:a,isWritableStream:l,isReadableStream:u}=oa(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:h}}=ii(),p=el();return rx=function(...y){if(y.length===0)throw new h("streams");if(y.length===1)return t.from(y[0]);const w=[...y];if(typeof y[0]=="function"&&(y[0]=t.from(y[0])),typeof y[y.length-1]=="function"){const M=y.length-1;y[M]=t.from(y[M])}for(let M=0;M<y.length;++M)if(!(!r(y[M])&&!s(y[M]))){if(M<y.length-1&&!(i(y[M])||u(y[M])||a(y[M])))throw new f("streams[".concat(M,"]"),w[M],"must be readable");if(M>0&&!(o(y[M])||l(y[M])||a(y[M])))throw new f("streams[".concat(M,"]"),w[M],"must be writable")}let x,b,m,S,E;function k(M){const K=S;S=null,K?K(M):M?E.destroy(M):!O&&!z&&E.destroy()}const N=y[0],I=e(y,k),z=!!(o(N)||l(N)||a(N)),O=!!(i(I)||u(I)||a(I));if(E=new t({writableObjectMode:!!(N!=null&&N.writableObjectMode),readableObjectMode:!!(I!=null&&I.readableObjectMode),writable:z,readable:O}),z){if(r(N))E._write=function(K,D,L){N.write(K,D)?L():x=L},E._final=function(K){N.end(),b=K},N.on("drain",function(){if(x){const K=x;x=null,K()}});else if(s(N)){const D=(a(N)?N.writable:N).getWriter();E._write=async function(L,q,G){try{await D.ready,D.write(L).catch(()=>{}),G()}catch(te){G(te)}},E._final=async function(L){try{await D.ready,D.close().catch(()=>{}),b=L}catch(q){L(q)}}}const M=a(I)?I.readable:I;p(M,()=>{if(b){const K=b;b=null,K()}})}if(O){if(r(I))I.on("readable",function(){if(m){const M=m;m=null,M()}}),I.on("end",function(){E.push(null)}),E._read=function(){for(;;){const M=I.read();if(M===null){m=E._read;return}if(!E.push(M))return}};else if(s(I)){const K=(a(I)?I.readable:I).getReader();E._read=async function(){for(;;)try{const{value:D,done:L}=await K.read();if(!E.push(D))return;if(L){E.push(null);return}}catch(D){return}}}}return E._destroy=function(M,K){!M&&S!==null&&(M=new d),m=null,x=null,b=null,S===null?K(M):(S=K,r(I)&&n(I,M))},E},rx}var BC;function KG(){if(BC)return jp;BC=1;const e=globalThis.AbortController||Zf().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:o}=ii(),{validateAbortSignal:s,validateInteger:a,validateObject:l}=jh(),u=On().Symbol("kWeak"),d=On().Symbol("kResistStopPropagation"),{finished:f}=el(),h=m4(),{addAbortSignalNoValidate:p}=Wy(),{isWritable:v,isNodeStream:y}=oa(),{deprecate:w}=wi(),{ArrayPrototypePush:x,Boolean:b,MathFloor:m,Number:S,NumberIsNaN:E,Promise:k,PromiseReject:N,PromiseResolve:I,PromisePrototypeThen:z,Symbol:O}=On(),M=O("kEmpty"),K=O("kEof");function D(ee,re){if(re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal"),y(ee)&&!v(ee))throw new t("stream",ee,"must be writable");const De=h(this,ee);return re!=null&&re.signal&&p(re.signal,De),De}function L(ee,re){if(typeof ee!="function")throw new n("fn",["Function","AsyncFunction"],ee);re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal");let De=1;(re==null?void 0:re.concurrency)!=null&&(De=m(re.concurrency));let Ye=De-1;return(re==null?void 0:re.highWaterMark)!=null&&(Ye=m(re.highWaterMark)),a(De,"options.concurrency",1),a(Ye,"options.highWaterMark",0),Ye+=De,(async function*(){const ie=wi().AbortSignalAny([re==null?void 0:re.signal].filter(b)),fe=this,Se=[],We={signal:ie};let Ue,Ke,he=!1,Be=0;function qe(){he=!0,$e()}function $e(){Be-=1,Nt()}function Nt(){Ke&&!he&&Be<De&&Se.length<Ye&&(Ke(),Ke=null)}async function yn(){try{for await(let Ct of fe){if(he)return;if(ie.aborted)throw new o;try{if(Ct=ee(Ct,We),Ct===M)continue;Ct=I(Ct)}catch(rn){Ct=N(rn)}Be+=1,z(Ct,$e,qe),Se.push(Ct),Ue&&(Ue(),Ue=null),!he&&(Se.length>=Ye||Be>=De)&&await new k(rn=>{Ke=rn})}Se.push(K)}catch(Ct){const rn=N(Ct);z(rn,$e,qe),Se.push(rn)}finally{he=!0,Ue&&(Ue(),Ue=null)}}yn();try{for(;;){for(;Se.length>0;){const Ct=await Se[0];if(Ct===K)return;if(ie.aborted)throw new o;Ct!==M&&(yield Ct),Se.shift(),Nt()}await new k(Ct=>{Ue=Ct})}}finally{he=!0,Ke&&(Ke(),Ke=null)}}).call(this)}function q(ee=void 0){return ee!=null&&l(ee,"options"),(ee==null?void 0:ee.signal)!=null&&s(ee.signal,"options.signal"),(async function*(){let De=0;for await(const ze of this){var Ye;if(ee!=null&&(Ye=ee.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o({cause:ee.signal.reason});yield[De++,ze]}}).call(this)}async function G(ee,re=void 0){for await(const De of $.call(this,ee,re))return!0;return!1}async function te(ee,re=void 0){if(typeof ee!="function")throw new n("fn",["Function","AsyncFunction"],ee);return!await G.call(this,async(...De)=>!await ee(...De),re)}async function B(ee,re){for await(const De of $.call(this,ee,re))return De}async function H(ee,re){if(typeof ee!="function")throw new n("fn",["Function","AsyncFunction"],ee);async function De(Ye,ze){return await ee(Ye,ze),M}for await(const Ye of L.call(this,De,re));}function $(ee,re){if(typeof ee!="function")throw new n("fn",["Function","AsyncFunction"],ee);async function De(Ye,ze){return await ee(Ye,ze)?Ye:M}return L.call(this,De,re)}class Y extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function se(ee,re,De){var Ye;if(typeof ee!="function")throw new n("reducer",["Function","AsyncFunction"],ee);De!=null&&l(De,"options"),(De==null?void 0:De.signal)!=null&&s(De.signal,"options.signal");let ze=arguments.length>1;if(De!=null&&(Ye=De.signal)!==null&&Ye!==void 0&&Ye.aborted){const Ue=new o(void 0,{cause:De.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(Ue)),Ue}const ie=new e,fe=ie.signal;if(De!=null&&De.signal){const Ue={once:!0,[u]:this,[d]:!0};De.signal.addEventListener("abort",()=>ie.abort(),Ue)}let Se=!1;try{for await(const Ue of this){var We;if(Se=!0,De!=null&&(We=De.signal)!==null&&We!==void 0&&We.aborted)throw new o;ze?re=await ee(re,Ue,{signal:fe}):(re=Ue,ze=!0)}if(!Se&&!ze)throw new Y}finally{ie.abort()}return re}async function ue(ee){ee!=null&&l(ee,"options"),(ee==null?void 0:ee.signal)!=null&&s(ee.signal,"options.signal");const re=[];for await(const Ye of this){var De;if(ee!=null&&(De=ee.signal)!==null&&De!==void 0&&De.aborted)throw new o(void 0,{cause:ee.signal.reason});x(re,Ye)}return re}function Ce(ee,re){const De=L.call(this,ee,re);return(async function*(){for await(const ze of De)yield*ze}).call(this)}function Ne(ee){if(ee=S(ee),E(ee))return 0;if(ee<0)throw new i("number",">= 0",ee);return ee}function Te(ee,re=void 0){return re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal"),ee=Ne(ee),(async function*(){var Ye;if(re!=null&&(Ye=re.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o;for await(const ie of this){var ze;if(re!=null&&(ze=re.signal)!==null&&ze!==void 0&&ze.aborted)throw new o;ee--<=0&&(yield ie)}}).call(this)}function U(ee,re=void 0){return re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal"),ee=Ne(ee),(async function*(){var Ye;if(re!=null&&(Ye=re.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o;for await(const ie of this){var ze;if(re!=null&&(ze=re.signal)!==null&&ze!==void 0&&ze.aborted)throw new o;if(ee-- >0&&(yield ie),ee<=0)return}}).call(this)}return jp.streamReturningOperators={asIndexedPairs:w(q,"readable.asIndexedPairs will be removed in a future version."),drop:Te,filter:$,flatMap:Ce,map:L,take:U,compose:D},jp.promiseReturningOperators={every:te,forEach:H,reduce:se,toArray:ue,some:G,find:B},jp}var ix,zC;function y4(){if(zC)return ix;zC=1;const{ArrayPrototypePop:e,Promise:t}=On(),{isIterable:n,isNodeStream:r,isWebStream:i}=oa(),{pipelineImpl:o}=Y1(),{finished:s}=el();v4();function a(...l){return new t((u,d)=>{let f,h;const p=l[l.length-1];if(p&&typeof p=="object"&&!r(p)&&!n(p)&&!i(p)){const v=e(l);f=v.signal,h=v.end}o(l,(v,y)=>{v?d(v):u(y)},{signal:f,end:h})})}return ix={finished:s,pipeline:a},ix}var HC;function v4(){if(HC)return O0.exports;HC=1;const{Buffer:e}=Za(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=On(),{promisify:{custom:i}}=wi(),{streamReturningOperators:o,promiseReturningOperators:s}=KG(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=ii(),l=m4(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Uy(),{pipeline:f}=Y1(),{destroyer:h}=zc(),p=el(),v=y4(),y=oa(),w=O0.exports=K1().Stream;w.isDestroyed=y.isDestroyed,w.isDisturbed=y.isDisturbed,w.isErrored=y.isErrored,w.isReadable=y.isReadable,w.isWritable=y.isWritable,w.Readable=Vy();for(const b of n(o)){let S=function(...E){if(new.target)throw a();return w.Readable.from(r(m,this,E))};const m=o[b];t(S,"name",{__proto__:null,value:m.name}),t(S,"length",{__proto__:null,value:m.length}),t(w.Readable.prototype,b,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const b of n(s)){let S=function(...E){if(new.target)throw a();return r(m,this,E)};const m=s[b];t(S,"name",{__proto__:null,value:m.name}),t(S,"length",{__proto__:null,value:m.length}),t(w.Readable.prototype,b,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}w.Writable=G1(),w.Duplex=Js(),w.Transform=p4(),w.PassThrough=g4(),w.pipeline=f;const{addAbortSignal:x}=Wy();return w.addAbortSignal=x,w.finished=p,w.destroy=h,w.compose=l,w.setDefaultHighWaterMark=u,w.getDefaultHighWaterMark=d,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(f,i,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(p,i,{__proto__:null,enumerable:!0,get(){return v.finished}}),w.Stream=w,w._isUint8Array=function(m){return m instanceof Uint8Array},w._uint8ArrayToBuffer=function(m){return e.from(m.buffer,m.byteOffset,m.byteLength)},O0.exports}var WC;function UC(){return WC||(WC=1,function(e){const t=v4(),n=y4(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(P0)),P0.exports}/*!
 LZ-UTF8 v0.6.3

 Copyright (c) 2021, Rotem Dan
 Released under the MIT license.

 Build date: 2022-07-06 

 Please report any issue at https://github.com/rotemdan/lzutf8.js/issues
*/(function(e){var t;(function(n){n.runningInNodeJS=function(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"},n.runningInMainNodeJSModule=function(){return n.runningInNodeJS()&&require.main===e},n.commonJSAvailable=function(){return!0},n.runningInWebWorker=function(){return typeof window>"u"&&typeof self=="object"&&typeof self.addEventListener=="function"&&typeof self.close=="function"},n.runningInNodeChildProcess=function(){return n.runningInNodeJS()&&typeof process.send=="function"},n.runningInNullOrigin=function(){return typeof window!="object"||typeof window.location!="object"||typeof document!="object"?!1:document.location.protocol!=="http:"&&document.location.protocol!=="https:"},n.webWorkersAvailable=function(){return!(typeof Worker!="function"||n.runningInNullOrigin()||n.runningInNodeJS()||navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},n.log=function(r,i){i===void 0&&(i=!1),typeof console=="object"&&(console.log(r),i&&typeof document=="object"&&(document.body.innerHTML+=r+"<br/>"))},n.createErrorMessage=function(r,i){if(i===void 0&&(i="Unhandled exception"),r==null)return i;if(i+=": ",typeof r.content=="object"){if(n.runningInNodeJS())return i+r.content.stack;var o=JSON.stringify(r.content);return o!=="{}"?i+o:i+r.content}else return typeof r.content=="string"?i+r.content:i+r},n.printExceptionAndStackTraceToConsole=function(r,i){i===void 0&&(i="Unhandled exception"),n.log(n.createErrorMessage(r,i))},n.getGlobalObject=function(){return typeof Ri=="object"?Ri:typeof window=="object"?window:typeof self=="object"?self:{}},n.toString=Object.prototype.toString,n.commonJSAvailable()&&(e.exports=n)})(t||(t={})),function(n){if(typeof Uint8Array=="function"&&new Uint8Array(1).subarray(1).byteLength!==0){var r=function(a,l){var u=function(f,h,p){return f<h?h:f>p?p:f};a=a|0,l=l|0,arguments.length<1&&(a=0),arguments.length<2&&(l=this.length),a<0&&(a=this.length+a),l<0&&(l=this.length+l),a=u(a,0,this.length),l=u(l,0,this.length);var d=l-a;return d<0&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)},i=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],o=void 0;if(typeof window=="object"?o=window:typeof self=="object"&&(o=self),o!==void 0)for(var s=0;s<i.length;s++)o[i[s]]&&(o[i[s]].prototype.subarray=r)}}();var t;(function(n){var r=function(){function i(){}return i.compressAsync=function(o,s,a){var l=new n.Timer,u=new n.Compressor;if(!a)throw new TypeError("compressAsync: No callback argument given");if(typeof o=="string")o=n.encodeUTF8(o);else if(o==null||!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));return}var d=n.ArrayTools.splitByteArray(o,s.blockSize),f=[],h=function(p){if(p<d.length){var v=void 0;try{v=u.compressBlock(d[p])}catch(w){a(void 0,w);return}f.push(v),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var y=n.ArrayTools.concatUint8Arrays(f);n.enqueueImmediate(function(){var w;try{w=n.CompressionCommon.encodeCompressedBytes(y,s.outputEncoding)}catch(x){a(void 0,x);return}n.enqueueImmediate(function(){return a(w)})})}};n.enqueueImmediate(function(){return h(0)})},i.createCompressionStream=function(){var o=new n.Compressor,s=UC(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,d){var f;try{f=n.BufferTools.uint8ArrayToBuffer(o.compressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(f),d()},a},i}();n.AsyncCompressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(){}return i.decompressAsync=function(o,s,a){if(!a)throw new TypeError("decompressAsync: No callback argument given");var l=new n.Timer;try{o=n.CompressionCommon.decodeCompressedBytes(o,s.inputEncoding)}catch(p){a(void 0,p);return}var u=new n.Decompressor,d=n.ArrayTools.splitByteArray(o,s.blockSize),f=[],h=function(p){if(p<d.length){var v=void 0;try{v=u.decompressBlock(d[p])}catch(w){a(void 0,w);return}f.push(v),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var y=n.ArrayTools.concatUint8Arrays(f);n.enqueueImmediate(function(){var w;try{w=n.CompressionCommon.encodeDecompressedBytes(y,s.outputEncoding)}catch(x){a(void 0,x);return}n.enqueueImmediate(function(){return a(w)})})}};n.enqueueImmediate(function(){return h(0)})},i.createDecompressionStream=function(){var o=new n.Decompressor,s=UC(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,d){var f;try{f=n.BufferTools.uint8ArrayToBuffer(o.decompressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(f),d()},a},i}();n.AsyncDecompressor=r})(t||(t={}));var t;(function(n){var r;(function(i){i.compressAsync=function(o,s,a){if(s.inputEncoding=="ByteArray"&&!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: input is not a Uint8Array"));return}var l={token:Math.random().toString(),type:"compress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(d){var f=d.data;!f||f.token!=l.token||(i.globalWorker.removeEventListener("message",u),f.type=="error"?a(void 0,new Error(f.error)):a(f.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.decompressAsync=function(o,s,a){var l={token:Math.random().toString(),type:"decompress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(d){var f=d.data;!f||f.token!=l.token||(i.globalWorker.removeEventListener("message",u),f.type=="error"?a(void 0,new Error(f.error)):a(f.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.installWebWorkerIfNeeded=function(){typeof self=="object"&&self.document===void 0&&self.addEventListener!=null&&(self.addEventListener("message",function(o){var s=o.data;if(s.type=="compress"){var a=void 0;try{a=n.compress(s.data,{outputEncoding:s.outputEncoding})}catch(d){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(d)},[]);return}var l={token:s.token,type:"compressionResult",data:a,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}else if(s.type=="decompress"){var u=void 0;try{u=n.decompress(s.data,{inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding})}catch(f){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(f)},[]);return}var l={token:s.token,type:"decompressionResult",data:u,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}}),self.addEventListener("error",function(o){n.log(n.createErrorMessage(o.error,"Unexpected LZUTF8 WebWorker exception"))}))},i.createGlobalWorkerIfNeeded=function(){if(i.globalWorker)return!0;if(!n.webWorkersAvailable())return!1;if(!i.scriptURI&&typeof document=="object"){var o=document.getElementById("lzutf8");o!=null&&(i.scriptURI=o.getAttribute("src")||void 0)}return i.scriptURI?(i.globalWorker=new Worker(i.scriptURI),!0):!1},i.terminate=function(){i.globalWorker&&(i.globalWorker.terminate(),i.globalWorker=void 0)}})(r=n.WebWorker||(n.WebWorker={})),r.installWebWorkerIfNeeded()})(t||(t={}));var t;(function(n){var r=function(){function i(o,s,a){this.container=o,this.startPosition=s,this.length=a}return i.prototype.get=function(o){return this.container[this.startPosition+o]},i.prototype.getInReversedOrder=function(o){return this.container[this.startPosition+this.length-1-o]},i.prototype.set=function(o,s){this.container[this.startPosition+o]=s},i}();n.ArraySegment=r})(t||(t={}));var t;(function(n){(function(r){r.copyElements=function(i,o,s,a,l){for(;l--;)s[a++]=i[o++]},r.zeroElements=function(i,o,s){for(;s--;)i[o++]=0},r.countNonzeroValuesInArray=function(i){for(var o=0,s=0;s<i.length;s++)i[s]&&o++;return o},r.truncateStartingElements=function(i,o){if(i.length<=o)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var s=i.length-o,a=0;a<o;a++)i[a]=i[s+a];i.length=o},r.doubleByteArrayCapacity=function(i){var o=new Uint8Array(i.length*2);return o.set(i),o},r.concatUint8Arrays=function(i){for(var o=0,s=0,a=i;s<a.length;s++){var l=a[s];o+=l.length}for(var u=new Uint8Array(o),d=0,f=0,h=i;f<h.length;f++){var l=h[f];u.set(l,d),d+=l.length}return u},r.splitByteArray=function(i,o){for(var s=[],a=0;a<i.length;){var l=Math.min(o,i.length-a);s.push(i.subarray(a,a+l)),a+=l}return s}})(n.ArrayTools||(n.ArrayTools={}))})(t||(t={}));var t;(function(n){(function(r){r.convertToUint8ArrayIfNeeded=function(i){return typeof Buffer=="function"&&Buffer.isBuffer(i)?r.bufferToUint8Array(i):i},r.uint8ArrayToBuffer=function(i){if(Buffer.prototype instanceof Uint8Array){var o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return Object.setPrototypeOf(o,Buffer.prototype),o}else{for(var s=i.length,a=new Buffer(s),l=0;l<s;l++)a[l]=i[l];return a}},r.bufferToUint8Array=function(i){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);for(var o=i.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=i[a];return s}})(n.BufferTools||(n.BufferTools={}))})(t||(t={}));var t;(function(n){(function(r){r.getCroppedBuffer=function(i,o,s,a){a===void 0&&(a=0);var l=new Uint8Array(s+a);return l.set(i.subarray(o,o+s)),l},r.getCroppedAndAppendedByteArray=function(i,o,s,a){return n.ArrayTools.concatUint8Arrays([i.subarray(o,o+s),a])},r.detectCompressionSourceEncoding=function(i){if(i==null)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if(typeof i=="string")return"String";if(i instanceof Uint8Array||typeof Buffer=="function"&&Buffer.isBuffer(i))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},r.encodeCompressedBytes=function(i,o){switch(o){case"ByteArray":return i;case"Buffer":return n.BufferTools.uint8ArrayToBuffer(i);case"Base64":return n.encodeBase64(i);case"BinaryString":return n.encodeBinaryString(i);case"StorageBinaryString":return n.encodeStorageBinaryString(i);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},r.decodeCompressedBytes=function(i,o){if(o==null)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(o){case"ByteArray":case"Buffer":var s=n.BufferTools.convertToUint8ArrayIfNeeded(i);if(!(s instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return s;case"Base64":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return n.decodeBase64(i);case"BinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return n.decodeBinaryString(i);case"StorageBinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return n.decodeStorageBinaryString(i);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(o,"'"))}},r.encodeDecompressedBytes=function(i,o){switch(o){case"String":return n.decodeUTF8(i);case"ByteArray":return i;case"Buffer":if(typeof Buffer!="function")throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return n.BufferTools.uint8ArrayToBuffer(i);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}})(n.CompressionCommon||(n.CompressionCommon={}))})(t||(t={}));var t;(function(n){var r;(function(i){var o=[],s;i.enqueueImmediate=function(a){o.push(a),o.length===1&&s()},i.initializeScheduler=function(){var a=function(){for(var f=0,h=o;f<h.length;f++){var p=h[f];try{p.call(void 0)}catch(v){n.printExceptionAndStackTraceToConsole(v,"enqueueImmediate exception")}}o.length=0};if(n.runningInNodeJS())s=function(){return setImmediate(function(){return a()})};else if(typeof window=="object"&&typeof window.addEventListener=="function"&&typeof window.postMessage=="function"){var l="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(f){f.data===l&&a()});var u;n.runningInNullOrigin()?u="*":u=window.location.href,s=function(){return window.postMessage(l,u)}}else if(typeof MessageChannel=="function"&&typeof MessagePort=="function"){var d=new MessageChannel;d.port1.onmessage=function(){return a()},s=function(){return d.port2.postMessage(0)}}else s=function(){return setTimeout(function(){return a()},0)}},i.initializeScheduler()})(r=n.EventLoop||(n.EventLoop={})),n.enqueueImmediate=function(i){return r.enqueueImmediate(i)}})(t||(t={}));var t;(function(n){(function(r){r.override=function(i,o){return r.extend(i,o)},r.extend=function(i,o){if(i==null)throw new TypeError("obj is null or undefined");if(typeof i!="object")throw new TypeError("obj is not an object");if(o==null&&(o={}),typeof o!="object")throw new TypeError("newProperties is not an object");if(o!=null)for(var s in o)i[s]=o[s];return i}})(n.ObjectTools||(n.ObjectTools={}))})(t||(t={}));var t;(function(n){n.getRandomIntegerInRange=function(r,i){return r+Math.floor(Math.random()*(i-r))},n.getRandomUTF16StringOfLength=function(r){for(var i="",o=0;o<r;o++){var s=void 0;do s=n.getRandomIntegerInRange(0,1114112);while(s>=55296&&s<=57343);i+=n.Encoding.CodePoint.decodeToString(s)}return i}})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=1024),this.outputBufferCapacity=o,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return i.prototype.appendCharCode=function(o){this.outputBuffer[this.outputPosition++]=o,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},i.prototype.appendCharCodes=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o[s])},i.prototype.appendString=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o.charCodeAt(s))},i.prototype.appendCodePoint=function(o){if(o<=65535)this.appendCharCode(o);else if(o<=1114111)this.appendCharCode(55296+(o-65536>>>10)),this.appendCharCode(56320+(o-65536&1023));else throw new Error("appendCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))},i.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},i.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},i}();n.StringBuilder=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.restart()}return i.prototype.restart=function(){this.startTime=i.getTimestamp()},i.prototype.getElapsedTime=function(){return i.getTimestamp()-this.startTime},i.prototype.getElapsedTimeAndRestart=function(){var o=this.getElapsedTime();return this.restart(),o},i.prototype.logAndRestart=function(o,s){s===void 0&&(s=!0);var a=this.getElapsedTime(),l="".concat(o,": ").concat(a.toFixed(3),"ms");return n.log(l,s),this.restart(),a},i.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},i.getMicrosecondTimestamp=function(){return Math.floor(i.getTimestamp()*1e3)},i.createGlobalTimestampFunction=function(){if(typeof process=="object"&&typeof process.hrtime=="function"){var o=0;this.timestampFunc=function(){var u=process.hrtime(),d=u[0]*1e3+u[1]/1e6;return o+d},o=Date.now()-this.timestampFunc()}else if(typeof chrome=="object"&&chrome.Interval){var s=Date.now(),a=new chrome.Interval;a.start(),this.timestampFunc=function(){return s+a.microseconds()/1e3}}else if(typeof performance=="object"&&performance.now){var l=Date.now()-performance.now();this.timestampFunc=function(){return l+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return new Date().getTime()}},i}();n.Timer=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,o&&typeof Uint32Array=="function"?this.prefixHashTable=new n.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new n.CompressorSimpleHashTable(this.PrefixHashTableSize)}return i.prototype.compressBlock=function(o){if(o==null)throw new TypeError("compressBlock: undefined or null input received");return typeof o=="string"&&(o=n.encodeUTF8(o)),o=n.BufferTools.convertToUint8ArrayIfNeeded(o),this.compressUtf8Block(o)},i.prototype.compressUtf8Block=function(o){if(!o||o.length==0)return new Uint8Array(0);var s=this.cropAndAddNewBytesToInputBuffer(o),a=this.inputBuffer,l=this.inputBuffer.length;this.outputBuffer=new Uint8Array(o.length),this.outputBufferPosition=0;for(var u=0,d=s;d<l;d++){var f=a[d],h=d<u;if(d>l-this.MinimumSequenceLength){h||this.outputRawByte(f);continue}var p=this.getBucketIndexForPrefix(d);if(!h){var v=this.findLongestMatch(d,p);v!=null&&(this.outputPointerBytes(v.length,v.distance),u=d+v.length,h=!0)}h||this.outputRawByte(f);var y=this.inputBufferStreamOffset+d;this.prefixHashTable.addValueToBucket(p,y)}return this.outputBuffer.subarray(0,this.outputBufferPosition)},i.prototype.findLongestMatch=function(o,s){var a=this.prefixHashTable.getArraySegmentForBucketIndex(s,this.reusableArraySegmentObject);if(a==null)return null;for(var l=this.inputBuffer,u,d=0,f=0;f<a.length;f++){var h=a.getInReversedOrder(f)-this.inputBufferStreamOffset,p=o-h,v=void 0;if(u===void 0?v=this.MinimumSequenceLength-1:u<128&&p>=128?v=d+(d>>>1):v=d,p>this.MaximumMatchDistance||v>=this.MaximumSequenceLength||o+v>=l.length)break;if(l[h+v]===l[o+v]){for(var y=0;;y++)if(o+y===l.length||l[h+y]!==l[o+y]){y>v&&(u=p,d=y);break}else if(y===this.MaximumSequenceLength)return{distance:p,length:this.MaximumSequenceLength}}}return u!==void 0?{distance:u,length:d}:null},i.prototype.getBucketIndexForPrefix=function(o){return(this.inputBuffer[o]*7880599+this.inputBuffer[o+1]*39601+this.inputBuffer[o+2]*199+this.inputBuffer[o+3])%this.PrefixHashTableSize},i.prototype.outputPointerBytes=function(o,s){s<128?(this.outputRawByte(192|o),this.outputRawByte(s)):(this.outputRawByte(224|o),this.outputRawByte(s>>>8),this.outputRawByte(s&255))},i.prototype.outputRawByte=function(o){this.outputBuffer[this.outputBufferPosition++]=o},i.prototype.cropAndAddNewBytesToInputBuffer=function(o){if(this.inputBuffer===void 0)return this.inputBuffer=o,0;var s=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),a=this.inputBuffer.length-s;return this.inputBuffer=n.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,a,s,o),this.inputBufferStreamOffset+=a,s},i}();n.Compressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(o*2),this.storage=new Uint32Array(o*2),this.storageIndex=1}return i.prototype.addValueToBucket=function(o,s){o<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var a=this.bucketLocators[o],l;if(a===0)a=this.storageIndex,l=1,this.storage[this.storageIndex]=s,this.storageIndex+=this.minimumBucketCapacity;else{l=this.bucketLocators[o+1],l===this.maximumBucketCapacity-1&&(l=this.truncateBucketToNewerElements(a,l,this.maximumBucketCapacity/2));var u=a+l;this.storage[u]===0?(this.storage[u]=s,u===this.storageIndex&&(this.storageIndex+=l)):(n.ArrayTools.copyElements(this.storage,a,this.storage,this.storageIndex,l),a=this.storageIndex,this.storageIndex+=l,this.storage[this.storageIndex++]=s,this.storageIndex+=l),l++}this.bucketLocators[o]=a,this.bucketLocators[o+1]=l},i.prototype.truncateBucketToNewerElements=function(o,s,a){var l=o+s-a;return n.ArrayTools.copyElements(this.storage,l,this.storage,o,a),n.ArrayTools.zeroElements(this.storage,o+a,s-a),a},i.prototype.compact=function(){var o=this.bucketLocators,s=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var a=0;a<o.length;a+=2){var l=o[a+1];l!==0&&(this.bucketLocators[a]=this.storageIndex,this.bucketLocators[a+1]=l,this.storageIndex+=Math.max(Math.min(l*2,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(this.storageIndex*8);for(var a=0;a<o.length;a+=2){var u=o[a];if(u!==0){var d=this.bucketLocators[a],f=this.bucketLocators[a+1];n.ArrayTools.copyElements(s,u,this.storage,d,f)}}},i.prototype.getArraySegmentForBucketIndex=function(o,s){o<<=1;var a=this.bucketLocators[o];return a===0?null:(s===void 0&&(s=new n.ArraySegment(this.storage,a,this.bucketLocators[o+1])),s)},i.prototype.getUsedBucketCount=function(){return Math.floor(n.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.bucketLocators.length;s+=2)o+=this.bucketLocators[s+1];return o},i}();n.CompressorCustomHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.maximumBucketCapacity=64,this.buckets=new Array(o)}return i.prototype.addValueToBucket=function(o,s){var a=this.buckets[o];a===void 0?this.buckets[o]=[s]:(a.length===this.maximumBucketCapacity-1&&n.ArrayTools.truncateStartingElements(a,this.maximumBucketCapacity/2),a.push(s))},i.prototype.getArraySegmentForBucketIndex=function(o,s){var a=this.buckets[o];return a===void 0?null:(s===void 0&&(s=new n.ArraySegment(a,0,a.length)),s)},i.prototype.getUsedBucketCount=function(){return n.ArrayTools.countNonzeroValuesInArray(this.buckets)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.buckets.length;s++)this.buckets[s]!==void 0&&(o+=this.buckets[s].length);return o},i}();n.CompressorSimpleHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.MaximumMatchDistance=32767,this.outputPosition=0}return i.prototype.decompressBlockToString=function(o){return o=n.BufferTools.convertToUint8ArrayIfNeeded(o),n.decodeUTF8(this.decompressBlock(o))},i.prototype.decompressBlock=function(o){this.inputBufferRemainder&&(o=n.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,o]),this.inputBufferRemainder=void 0);for(var s=this.cropOutputBufferToWindowAndInitialize(Math.max(o.length*4,1024)),a=0,l=o.length;a<l;a++){var u=o[a];if(u>>>6!=3){this.outputByte(u);continue}var d=u>>>5;if(a==l-1||a==l-2&&d==7){this.inputBufferRemainder=o.subarray(a);break}if(o[a+1]>>>7===1)this.outputByte(u);else{var f=u&31,h=void 0;d==6?(h=o[a+1],a+=1):(h=o[a+1]<<8|o[a+2],a+=2);for(var p=this.outputPosition-h,v=0;v<f;v++)this.outputByte(this.outputBuffer[p+v])}}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),n.CompressionCommon.getCroppedBuffer(this.outputBuffer,s,this.outputPosition-s)},i.prototype.outputByte=function(o){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=n.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=o},i.prototype.cropOutputBufferToWindowAndInitialize=function(o){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(o),0;var s=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=n.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-s,s,o),this.outputPosition=s,this.outputBufferRemainder){for(var a=0;a<this.outputBufferRemainder.length;a++)this.outputByte(this.outputBufferRemainder[a]);this.outputBufferRemainder=void 0}return s},i.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var o=1;o<=4&&this.outputPosition-o>=0;o++){var s=this.outputBuffer[this.outputPosition-o];if(o<4&&s>>>3===30||o<3&&s>>>4===14||o<2&&s>>>5===6){this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-o,this.outputPosition),this.outputPosition-=o;return}}},i}();n.Decompressor=r})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),s=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),a="=",l=61;i.encode=function(u){return!u||u.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(u).toString("base64"):i.encodeWithJS(u)},i.decode=function(u){return u?n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(u,"base64")):i.decodeWithJS(u):new Uint8Array(0)},i.encodeWithJS=function(u,d){if(d===void 0&&(d=!0),!u||u.length==0)return"";for(var f=o,h=new n.StringBuilder,p,v=0,y=u.length;v<y;v+=3)v<=y-3?(p=u[v]<<16|u[v+1]<<8|u[v+2],h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),h.appendCharCode(f[p>>>6&63]),h.appendCharCode(f[p&63]),p=0):v===y-2?(p=u[v]<<16|u[v+1]<<8,h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),h.appendCharCode(f[p>>>6&63]),d&&h.appendCharCode(l)):v===y-1&&(p=u[v]<<16,h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),d&&(h.appendCharCode(l),h.appendCharCode(l)));return h.getOutputString()},i.decodeWithJS=function(u,d){if(!u||u.length==0)return new Uint8Array(0);var f=u.length%4;if(f===1)throw new Error("Invalid Base64 string: length % 4 == 1");f===2?u+=a+a:f===3&&(u+=a),d||(d=new Uint8Array(u.length));for(var h=0,p=u.length,v=0;v<p;v+=4){var y=s[u.charCodeAt(v)]<<18|s[u.charCodeAt(v+1)]<<12|s[u.charCodeAt(v+2)]<<6|s[u.charCodeAt(v+3)];d[h++]=y>>>16&255,d[h++]=y>>>8&255,d[h++]=y&255}return u.charCodeAt(p-1)==l&&h--,u.charCodeAt(p-2)==l&&h--,d.subarray(0,h)}})(r.Base64||(r.Base64={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){if(o==null)throw new TypeError("BinaryString.encode: undefined or null input received");if(o.length===0)return"";for(var s=o.length,a=new n.StringBuilder,l=0,u=1,d=0;d<s;d+=2){var f=void 0;d==s-1?f=o[d]<<8:f=o[d]<<8|o[d+1],a.appendCharCode(l<<16-u|f>>>u),l=f&(1<<u)-1,u===15?(a.appendCharCode(l),l=0,u=1):u+=1,d>=s-2&&a.appendCharCode(l<<16-u)}return a.appendCharCode(32768|s%2),a.getOutputString()},i.decode=function(o){if(typeof o!="string")throw new TypeError("BinaryString.decode: invalid input type");if(o=="")return new Uint8Array(0);for(var s=new Uint8Array(o.length*3),a=0,l=function(p){s[a++]=p>>>8,s[a++]=p&255},u=0,d=0,f=0;f<o.length;f++){var h=o.charCodeAt(f);if(h>=32768){h==32769&&a--,d=0;continue}d==0?u=h:(l(u<<d|h>>>15-d),u=h&(1<<15-d)-1),d==15?d=0:d+=1}return s.subarray(0,a)}})(r.BinaryString||(r.BinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encodeFromString=function(o,s){var a=o.charCodeAt(s);if(a<55296||a>56319)return a;var l=o.charCodeAt(s+1);if(l>=56320&&l<=57343)return 65536+((a-55296<<10)+(l-56320));throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(a,", followed by ").concat(l,", which is not a trailing surrogate character code."))},i.decodeToString=function(o){if(o<=65535)return String.fromCharCode(o);if(o<=1114111)return String.fromCharCode(55296+(o-65536>>>10),56320+(o-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))}})(r.CodePoint||(r.CodePoint={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];i.encode=function(s){for(var a=[],l=0;l<s.length;l++)a.push(o[s[l]]);return a.join(" ")}})(r.DecimalString||(r.DecimalString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){return r.BinaryString.encode(o).replace(/\0/g,"")},i.decode=function(o){return r.BinaryString.decode(o.replace(/\u8002/g,"\0"))}})(r.StorageBinaryString||(r.StorageBinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o,s;i.encode=function(a){return!a||a.length==0?new Uint8Array(0):n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(a,"utf8")):i.createNativeTextEncoderAndDecoderIfAvailable()?o.encode(a):i.encodeWithJS(a)},i.decode=function(a){return!a||a.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(a).toString("utf8"):i.createNativeTextEncoderAndDecoderIfAvailable()?s.decode(a):i.decodeWithJS(a)},i.encodeWithJS=function(a,l){if(!a||a.length==0)return new Uint8Array(0);l||(l=new Uint8Array(a.length*4));for(var u=0,d=0;d<a.length;d++){var f=r.CodePoint.encodeFromString(a,d);if(f<=127)l[u++]=f;else if(f<=2047)l[u++]=192|f>>>6,l[u++]=128|f&63;else if(f<=65535)l[u++]=224|f>>>12,l[u++]=128|f>>>6&63,l[u++]=128|f&63;else if(f<=1114111)l[u++]=240|f>>>18,l[u++]=128|f>>>12&63,l[u++]=128|f>>>6&63,l[u++]=128|f&63,d++;else throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)")}return l.subarray(0,u)},i.decodeWithJS=function(a,l,u){if(l===void 0&&(l=0),!a||a.length==0)return"";u===void 0&&(u=a.length);for(var d=new n.StringBuilder,f,h,p=l,v=u;p<v;){if(h=a[p],!(h>>>7))f=h,p+=1;else if(h>>>5===6){if(p+1>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&31)<<6|a[p+1]&63,p+=2}else if(h>>>4===14){if(p+2>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&15)<<12|(a[p+1]&63)<<6|a[p+2]&63,p+=3}else if(h>>>3===30){if(p+3>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&7)<<18|(a[p+1]&63)<<12|(a[p+2]&63)<<6|a[p+3]&63,p+=4}else throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+p);d.appendCodePoint(f)}return d.getOutputString()},i.createNativeTextEncoderAndDecoderIfAvailable=function(){return o?!0:typeof TextEncoder=="function"?(o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8"),!0):!1}})(r.UTF8||(r.UTF8={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){function r(x,b){if(b===void 0&&(b={}),x==null)throw new TypeError("compress: undefined or null input received");var m=n.CompressionCommon.detectCompressionSourceEncoding(x);b=n.ObjectTools.override({inputEncoding:m,outputEncoding:"ByteArray"},b);var S=new n.Compressor,E=S.compressBlock(x);return n.CompressionCommon.encodeCompressedBytes(E,b.outputEncoding)}n.compress=r;function i(x,b){if(b===void 0&&(b={}),x==null)throw new TypeError("decompress: undefined or null input received");b=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},b);var m=n.CompressionCommon.decodeCompressedBytes(x,b.inputEncoding),S=new n.Decompressor,E=S.decompressBlock(m);return n.CompressionCommon.encodeDecompressedBytes(E,b.outputEncoding)}n.decompress=i;function o(x,b,m){m==null&&(m=function(){});var S;try{S=n.CompressionCommon.detectCompressionSourceEncoding(x)}catch(E){m(void 0,E);return}b=n.ObjectTools.override({inputEncoding:S,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},b),n.enqueueImmediate(function(){b.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.compressAsync(x,b,m):n.AsyncCompressor.compressAsync(x,b,m)})}n.compressAsync=o;function s(x,b,m){if(m==null&&(m=function(){}),x==null){m(void 0,new TypeError("decompressAsync: undefined or null input received"));return}b=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},b);var S=n.BufferTools.convertToUint8ArrayIfNeeded(x);n.EventLoop.enqueueImmediate(function(){b.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.decompressAsync(S,b,m):n.AsyncDecompressor.decompressAsync(x,b,m)})}n.decompressAsync=s;function a(){return n.AsyncCompressor.createCompressionStream()}n.createCompressionStream=a;function l(){return n.AsyncDecompressor.createDecompressionStream()}n.createDecompressionStream=l;function u(x){return n.Encoding.UTF8.encode(x)}n.encodeUTF8=u;function d(x){return n.Encoding.UTF8.decode(x)}n.decodeUTF8=d;function f(x){return n.Encoding.Base64.encode(x)}n.encodeBase64=f;function h(x){return n.Encoding.Base64.decode(x)}n.decodeBase64=h;function p(x){return n.Encoding.BinaryString.encode(x)}n.encodeBinaryString=p;function v(x){return n.Encoding.BinaryString.decode(x)}n.decodeBinaryString=v;function y(x){return n.Encoding.StorageBinaryString.encode(x)}n.encodeStorageBinaryString=y;function w(x){return n.Encoding.StorageBinaryString.decode(x)}n.decodeStorageBinaryString=w})(t||(t={}))})(d4);var GG=d4.exports;const ro=ta(GG),YG=({id:e,state:t,title:n="Unknown Modal",updateState:r,onSave:i,onDelete:o})=>{const{page:s,character:a,system:l}=t,u=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:u,children:[c.jsx(Vn,{title:n,onClose:u}),c.jsx(Un,{children:c.jsx(XG,{page:s,character:a,system:l,updateState:r})}),c.jsx(Xn,{children:c.jsx(xt,{color:"light",onClick:u,children:"close"})})]})};function XG({page:e,character:t,system:n,updateState:r}){const i=j.useMemo(()=>e.lexical?JSON.parse(ro.decompress(ro.decodeBase64(e.lexical))):{},[e.lexical]);return c.jsx(iO,{data:i,state:{character:t,system:n,page:e},updateState:r})}const JG=[{type:"edit_object",renderElement:(e,t,n,r,i,o)=>{const s=t.getSystem();return c.jsx(V1,{id:e,title:n,data:r,types:s.types,onSave:i,onDelete:o})}},{type:"edit_number",renderElement:(e,t,n,r,i,o)=>c.jsx(BG,{id:e,title:n,data:r,onSave:i})},{type:"edit_string",renderElement:(e,t,n,r,i,o)=>c.jsx(ds,{id:e,title:n,data:r,onSave:i})}],QG={process:(e,t)=>{const n=e.getParam(t.id,"data"),r=e.getSystem(),i=[...JG,...r.modals.map(o=>({type:o.name,renderElement:(s,a,l,u,d,f)=>c.jsx(YG,{id:s,state:{...a.getState(),page:o},title:l,updateState:a.callback,onSave:d})}))];At("blueprint-opened-modal",({id:o})=>i.find(s=>s.type===t.data.type).renderElement(o,e,t.data.title,n,s=>{e.setParam(t.id,"newdata",s),e.processNodes(e.getConnectingNodeForHandle(t,"save","output"))},()=>{e.processNodes(e.getConnectingNodeForHandle(t,"delete","output"))}))}},ZG={process:(e,t)=>{const r=e.getSystem().data.find(i=>i.name===t.data.path);return e.setParam(t.id,"output",r==null?void 0:r.data),e.getConnectingNodeForHandle(t,"next","output")}},eY={process:(e,t)=>{const n=e.getPage(),r=t.data.chosenState;if(!r)return;const i=n.state.findIndex(a=>a.name===r.name);if(i===-1)return;const o=e.getParam(t.id,r.name),s=pn(n,a=>(a.state[i]={...a.state[i],value:o},a));return e.setPage(s),e.getConnectingNodeForHandle(t,"next","output")}};function tY(e,t){if(["string","number"].includes(t.type))return Hf(e.types,t);if(t.isArray)return[];const r=e.types.find(o=>o.name===t.type);if(!r)return;let i={_type:{...r}};for(let o=0;o<r.properties.length;o++){const s=r.properties[o];let a=s.typeData;i[s.key]=Hf(e.types,a)}return i}const nY={process:(e,t)=>{var o;const r=e.getPage().state.find(s=>s.name===t.data.chosenState.name);if(!r)return;const i=(o=r.value)!=null?o:tY(e.getSystem(),r.type);return e.setParam(t.id,t.data.chosenState.name,i),e.getConnectingNodeForHandle(t,"next","output")}},rY={entry:p7,output:g7,get_character_data:y7,set_character_data:A7,get_system_data:ZG,get_page_data:nY,set_page_data:eY,number_to_string:B7,add_to_array:N7,array_get:O7,array_remove:R7,array_update:T7,filter:I7,map:P7,string_new:M7,string_includes:D7,string_compare:L7,string_concat:F7,spread_object:$7,create_data_from_type:H7,new_number:V7,divide:q7,add:Y7,subtract:K7,floor:G7,multiply:X7,new_enum:W7,enum_compare:U7,boolean_new:J7,boolean_branch:Q7,boolean_inverse:Z7,open_modal:QG};function iY(e){return rY[e]||{process:()=>{}}}class jo{constructor(t){Ko(this,"blueprint");Ko(this,"state");Ko(this,"input",{});Ko(this,"nodeState",new Map);Ko(this,"params",new Map);Ko(this,"output",null);Ko(this,"callback",()=>{});this.blueprint=t}processBlueprint(t,n,r){const i=pI(this.blueprint);return this.state=n,this.input=t,this.callback=r,this.processNodes(i)}processNodes(t){const n=this.processNode(t);return n?this.processNodes(n):(this.callback(this.state),this.getOutput())}processNode(t){if(!t)return;const n=iY(t.type||"");return!this.nodeState.get(t.id)&&n.init&&(this.nodeState.set(t.id,new Map),n.init(this,t)),n.process(this,t)}getConnectingNodeForHandle(t,n,r){const i=this.blueprint.edges.find(o=>{var s,a;return(r==="input"?o.target===t.id:o.source===t.id)&&(((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n&&r==="output"||((a=o.sourceHandle)==null?void 0:a.split("-")[0])===n&&r==="input")});if(i){if(r==="output")return Qk(this.blueprint,i.target);if(r==="input")return Qk(this.blueprint,i.source)}}getPossibleParamsForNode(t,n){return this.blueprint.edges.filter(r=>n==="input"?r.target===t:r.source===t).map(r=>{var i,o;return n==="input"?(i=r.targetHandle)==null?void 0:i.split("-")[0]:(o=r.sourceHandle)==null?void 0:o.split("-")[0]})}getParamType(t,n){var o;const i=this.blueprint.edges.filter(s=>{var a;return s.target===t&&((a=s.targetHandle)==null?void 0:a.split("-")[0])===n}).find(s=>this.params.get(s.id)!==void 0);return(o=i==null?void 0:i.targetHandle)==null?void 0:o.split("-")[1]}getParam(t,n){const i=this.blueprint.edges.filter(o=>{var s;return o.target===t&&((s=o.targetHandle)==null?void 0:s.split("-")[0])===n}).find(o=>this.params.get(o.id)!==void 0);return this.params.get((i==null?void 0:i.id)||"")}setParam(t,n,r){const i=this.blueprint.edges.filter(o=>{var s;return o.source===t&&((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n});for(let o=0;o<i.length;o++)this.params.set(i[o].id,r);return this.params}getState(){return this.state}getCharacter(){return this.state.character}setCharacter(t){this.state.character=t}getSystem(){return this.state.system}setSystem(t){this.state.system=t}getPage(){return this.state.page}setPage(t){this.state.page=t}getOutput(){return this.output}setOutput(t){this.output=t}}const Ai={"no style":{background:"",border:"",hover:""},light:{background:"bg-white dark:bg-neutral-800",border:"border border-neutral-200 dark:border-neutral-600",hover:"cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700"},primary:{background:"bg-white dark:bg-fantasy-accent",border:"border border-fantasy-border",hover:"cursor-pointer hover:bg-fantasy-accent-dark"},accent:{background:"bg-white dark:bg-accent-800",border:"border border-accent-200 dark:border-accent-600",hover:"cursor-pointer hover:bg-accent-100 dark:hover:bg-accent-700"},confirmation:{background:"bg-white dark:bg-green-800",border:"border border-green-200 dark:border-green-600",hover:"cursor-pointer hover:bg-green-100 dark:hover:bg-green-700"},warning:{background:"bg-white dark:bg-orange-800",border:"border border-orange-200 dark:border-orange-600",hover:"cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-700"}},VC={0:"0px",px:"1px","0.5":"0.125rem",1:"0.25rem","1.5":"0.375rem",2:"0.5rem","2.5":"0.625rem",3:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Ve={spacing:{...VC},size:{auto:"auto",full:"100%",half:"50%",third:"33%",...VC}};function yu(e,t,n){var s;let r=(s=n.initialDeps)!=null?s:[],i;function o(){var a,l,u,d;let f;n.key&&((a=n.debug)!=null&&a.call(n))&&(f=Date.now());const h=e();if(!(h.length!==r.length||h.some((y,w)=>r[w]!==y)))return i;r=h;let v;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(v=Date.now()),i=t(...h),n.key&&((u=n.debug)!=null&&u.call(n))){const y=Math.round((Date.now()-f)*100)/100,w=Math.round((Date.now()-v)*100)/100,x=w/16,b=(m,S)=>{for(m=String(m);m.length<S;)m=" "+m;return m};console.info("%c ".concat(b(w,5)," /").concat(b(y,5)," ms"),"\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(".concat(Math.max(0,Math.min(120-120*x,120)),"deg 100% 31%);"),n==null?void 0:n.key)}return(d=n==null?void 0:n.onChange)==null||d.call(n,i),i}return o.updateDeps=a=>{r=a},o}function qC(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const oY=(e,t)=>Math.abs(e-t)<=1,sY=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},KC=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},aY=e=>e,lY=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},uY=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=s=>{const{width:a,height:l}=s;t({width:Math.round(a),height:Math.round(l)})};if(i(KC(n)),!r.ResizeObserver)return()=>{};const o=new r.ResizeObserver(s=>{const a=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const u=l.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(KC(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},GC={passive:!0},YC=typeof window>"u"?!0:"onscrollend"in window,cY=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const o=e.options.useScrollendEvent&&YC?()=>{}:sY(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:f,isRtl:h}=e.options;i=f?n.scrollLeft*(h&&-1||1):n.scrollTop,o(),t(i,d)},a=s(!0),l=s(!1);l(),n.addEventListener("scroll",a,GC);const u=e.options.useScrollendEvent&&YC;return u&&n.addEventListener("scrollend",l,GC),()=>{n.removeEventListener("scroll",a),u&&n.removeEventListener("scrollend",l)}},dY=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},fY=(e,{adjustments:t=0,behavior:n},r)=>{var i,o;const s=e+t;(o=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||o.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class hY{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(o=>{const s=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var o;return(o=r())==null?void 0:o.observe(i,{box:"border-box"})},unobserve:i=>{var o;return(o=r())==null?void 0:o.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:aY,rangeExtractor:lY,onChange:()=>{},measureElement:dY,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=yu(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var i;var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(i=(n=this.scrollElement)==null?void 0:n.window)!=null?i:null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>{var n;return this.options.enabled?(this.scrollRect=(n=this.scrollRect)!=null?n:this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0)},this.getScrollOffset=()=>{var n;return this.options.enabled?(this.scrollOffset=(n=this.scrollOffset)!=null?n:typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.scrollOffset):(this.scrollOffset=null,0)},this.getFurthestMeasurement=(n,r)=>{const i=new Map,o=new Map;for(let s=r-1;s>=0;s--){const a=n[s];if(i.has(a.lane))continue;const l=o.get(a.lane);if(l==null||a.end>l.end?o.set(a.lane,a):a.end<l.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((s,a)=>s.end===a.end?s.index-a.index:s.end-a.end)[0]:void 0},this.getMeasurementOptions=yu(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,o,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:o,enabled:s}),{key:!1}),this.getMeasurements=yu(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:o,enabled:s},a)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let d=l;d<n;d++){const f=o(d),h=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),p=h?h.end+this.options.gap:r+i,v=a.get(f),y=typeof v=="number"?v:this.options.estimateSize(d),w=p+y,x=h?h.lane:d%this.options.lanes;u[d]={index:d,start:p,size:y,end:w,key:f,lane:x}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=yu(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,o)=>this.range=n.length>0&&r>0?pY({measurements:n,outerSize:r,scrollOffset:i,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=yu(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,o,s)=>o===null||s===null?[]:n({startIndex:o,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn("Missing attribute name '".concat(r,"={index}' on measured element.")),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),o=this.measurementsCache[i];if(!o)return;const s=o.key,a=this.elementsCache.get(s);a!==n&&(a&&this.observer.unobserve(a),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{var a;const i=this.measurementsCache[n];if(!i)return;const o=(a=this.itemSizeCache.get(i.key))!=null?a:i.size,s=r-o;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=yu(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let o=0,s=n.length;o<s;o++){const a=n[o],l=r[a];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return qC(r[x4(0,r.length-1,i=>qC(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const o=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+o?"end":"start"),r==="center"?n+=(i-o)/2:r==="end"&&(n-=o);const a=this.getTotalSize()-o;return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const o=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+o-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];const a=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const o=this.getOffsetForIndex(n,r);if(!o)return;const[s,a]=o;this._scrollToOffset(s,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const u=this.getOffsetForIndex(n,a);if(!u)return;const[d]=u,f=this.getScrollOffset();oY(d,f)||this.scrollToIndex(n,{align:a,behavior:i})}else this.scrollToIndex(n,{align:a,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var o;var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=(o=(n=r[r.length-1])==null?void 0:n.end)!=null?o:0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(l=>l===null);){const l=r[a];s[l.lane]===null&&(s[l.lane]=l.end),a--}i=Math.max(...s.filter(l=>l!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const x4=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else if(o>r)t=i-1;else return i}return e>0?e-1:0};function pY({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,o=l=>e[l].start;if(e.length<=r)return{startIndex:0,endIndex:i};let s=x4(0,i,o,n),a=s;if(r===1)for(;a<i&&e[a].end<n+t;)a++;else if(r>1){const l=Array(r).fill(0);for(;a<i&&l.some(d=>d<n+t);){const d=e[a];l[d.lane]=d.end,a++}const u=Array(r).fill(n+t);for(;s>=0&&u.some(d=>d>=n);){const d=e[s];u[d.lane]=d.start,s--}s=Math.max(0,s-s%r),a=Math.min(i,a+(r-1-a%r))}return{startIndex:s,endIndex:a}}const XC=typeof document<"u"?j.useLayoutEffect:j.useEffect;function gY(e){const t=j.useReducer(()=>({}),{})[1],n={...e,onChange:(i,o)=>{var s;o?uy.flushSync(t):t(),(s=e.onChange)==null||s.call(e,i,o)}},[r]=j.useState(()=>new hY(n));return r.setOptions(n),XC(()=>r._didMount(),[]),XC(()=>r._willUpdate()),r}function mY(e){return gY({observeElementRect:uY,observeElementOffset:cY,scrollToFn:fY,...e})}const yY=e=>{var d,f;const t=Fc(),n=j.useMemo(()=>{var v;return(v=new jo(e.blueprint).processBlueprint(t,e.state,()=>{}))!=null?v:[]},[t,e.state]),r=j.useMemo(()=>e.dynamicVisibility?new jo(e.visibilityBlueprint).processBlueprint(t,e.state,()=>{})||!1:e.isVisible,[t,e.state]),i=j.useCallback(()=>{if(!e.isInteractive)return;new jo(e.onPress).processBlueprint(t,e.state,e.updateState)},[e.onPress,t,e.state,e.updateState]),o=j.useMemo(()=>{var h;return Ai[e.background]?(h=Ai[e.background])==null?void 0:h.background:""},[e.background]),s=j.useMemo(()=>{var h;return Ai[e.border]?(h=Ai[e.border])==null?void 0:h.border:""},[e.border]),a=j.useMemo(()=>{var h;return e.isInteractive?(h=Ai[e.hover])==null?void 0:h.hover:""},[e.isInteractive]),l=j.useRef(null),u=mY({count:n.length,getScrollElement:()=>l.current,estimateSize:()=>35,overscan:4});return c.jsx("div",{ref:l,style:{display:r?e.display:"none",position:e.isList?"relative":e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ve.spacing[e.gap],marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft],height:e.isList?"".concat(u.getTotalSize()+n.length*8,"px"):Ve.size[e.height],width:e.isList?"100%":Ve.size[e.width],maxHeight:Ve.size[e.maxHeight],maxWidth:Ve.size[e.maxWidth],minHeight:Ve.size[e.minHeight],minWidth:Ve.size[e.minWidth]},className:"".concat(o," ").concat(s," ").concat(a),onClick:i,children:e.isList?c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat((f=(d=n[0])==null?void 0:d.start)!=null?f:8,"px)"),display:e.display,flexDirection:e.flexDirection,gap:Ve.spacing[e.gap]},children:u.getVirtualItems().map(h=>{const p=n[h.index];return c.jsx("div",{"data-index":h.index,ref:u.measureElement,children:c.jsx(hI,{localData:{[e.dataName]:p},children:e.children})},h.key)})}):e.children})},Ni={colors:{base:{text:"text-neutral-800 dark:text-neutral-200",hover:"group-hover:text-neutral-700 dark:group-hover:text-neutral-300"},light:{text:"text-neutral-500 dark:text-neutral-400",hover:"group-hover:text-neutral-400 dark:group-hover:text-neutral-500"},primary:{text:"text-fantasy-accent",hover:"group-hover:text-fantasy-light"},accent:{text:"text-accent-600 dark:text-accent-400 hover:text-accent-700 dark:hover:text-accent-300",hover:"group-hover:text-accent-700 dark:group-hover:text-accent-300"},confirmation:{text:"text-green-600 dark:text-green-400",hover:"group-hover:text-green-700 dark:group-hover:text-green-300"},warning:{text:"text-orange-600 dark:text-orange-400",hover:"group-hover:text-orange-700 dark:group-hover:text-orange-300"},danger:{text:"text-red-600 dark:text-red-400",hover:"group-hover:text-red-700 dark:group-hover:text-red-300"}},weight:{thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},sizes:{xs:{fontSize:"0.75rem",lineHeight:"1rem"},sm:{fontSize:"0.875rem",lineHeight:"1.25rem"},base:{fontSize:"1rem",lineHeight:"1.5rem"},lg:{fontSize:"1.125rem",lineHeight:"1.75rem"},xl:{fontSize:"1.25rem",lineHeight:"1.75rem"},"2xl":{fontSize:"1.5rem",lineHeight:"2rem"},"3xl":{fontSize:"1.875rem",lineHeight:"2.25rem"},"4xl":{fontSize:"2.25rem",lineHeight:"2.5rem"},"5xl":{fontSize:"3rem",lineHeight:"1"},"6xl":{fontSize:"3.75rem",lineHeight:"1"},"7xl":{fontSize:"4.5rem",lineHeight:"1"},"8xl":{fontSize:"6rem",lineHeight:"1"},"9xl":{fontSize:"8rem",lineHeight:"1"}}},vY=e=>{const t=Fc(),n=j.useMemo(()=>e.useBlueprintValue?new jo(e.blueprint).processBlueprint(t,e.state,()=>{})||"":e.text,[e.blueprint,t,e.useBlueprintValue,e.text]),r=j.useMemo(()=>{var o;return Ni.colors[e.color]?(o=Ni.colors[e.color])==null?void 0:o.text:""},[e.color]),i=j.useMemo(()=>Ni.weight[e.fontWeight]?Ni.weight[e.fontWeight]:"",[e.fontWeight]);return c.jsx("p",{style:{textAlign:e.textAlign,...Ni.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:n})};function wr(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ql(e){return!!e&&!!e[un]}function fs(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===jY}(e)||Array.isArray(e)||!!e[nf]||!!(!((t=e.constructor)===null||t===void 0)&&t[nf])||qy(e)||Ky(e))}function Kl(e,t,n){n===void 0&&(n=!1),qa(e)===0?(n?Object.keys:tS)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function qa(e){var t=e[un];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:qy(e)?2:Ky(e)?3:0}function eh(e,t){return qa(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fg(e,t){return qa(e)===2?e.get(t):e[t]}function b4(e,t,n){var r=qa(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function xY(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function qy(e){return kY&&e instanceof Map}function Ky(e){return CY&&e instanceof Set}function hr(e){return e.o||e.t}function X1(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=AY(e);delete t[un];for(var n=tS(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function J1(e,t){return t===void 0&&(t=!1),Q1(e)||ql(e)||!fs(e)||(qa(e)>1&&(e.set=e.add=e.clear=e.delete=bY),Object.freeze(e),t&&Kl(e,function(n,r){return J1(r,!0)},!0)),e}function bY(){wr(2)}function Q1(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function is(e){var t=hw[e];return t||wr(18,e),t}function w4(e,t){hw[e]||(hw[e]=t)}function gm(){return nh}function ox(e,t){t&&(is("Patches"),e.u=[],e.s=[],e.v=t)}function mm(e){fw(e),e.p.forEach(wY),e.p=null}function fw(e){e===nh&&(nh=e.l)}function JC(e){return nh={p:[],l:nh,h:e,m:!0,_:0}}function wY(e){var t=e[un];t.i===0||t.i===1?t.j():t.g=!0}function sx(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||is("ES5").S(t,e,r),r?(n[un].P&&(mm(t),wr(4)),fs(e)&&(e=ym(t,e),t.l||vm(t,e)),t.u&&is("Patches").M(n[un].t,e,t.u,t.s)):e=ym(t,n,[]),mm(t),t.u&&t.v(t.u,t.s),e!==eS?e:void 0}function ym(e,t,n){if(Q1(t))return t;var r=t[un];if(!r)return Kl(t,function(a,l){return QC(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return vm(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=X1(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),Kl(o,function(a,l){return QC(e,r,i,a,l,n,s)}),vm(e,i,!1),n&&e.u&&is("Patches").N(r,n,e.u,e.s)}return r.o}function QC(e,t,n,r,i,o,s){if(ql(i)){var a=ym(e,i,o&&t&&t.i!==3&&!eh(t.R,r)?o.concat(r):void 0);if(b4(n,r,a),!ql(a))return;e.m=!1}else s&&n.add(i);if(fs(i)&&!Q1(i)){if(!e.h.D&&e._<1)return;ym(e,i),t&&t.A.l||vm(e,i)}}function vm(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&J1(t,n)}function ax(e,t){var n=e[un];return(n?hr(n):e)[t]}function ZC(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ts(e){e.P||(e.P=!0,e.l&&Ts(e.l))}function lx(e){e.o||(e.o=X1(e.t))}function th(e,t,n){var r=qy(t)?is("MapSet").F(t,n):Ky(t)?is("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:gm(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=a,u=pw;s&&(l=[a],u=$d);var d=Proxy.revocable(l,u),f=d.revoke,h=d.proxy;return a.k=h,a.j=f,h}(t,n):is("ES5").J(t,n);return(n?n.A:gm()).p.push(r),r}function _Y(e){return ql(e)||wr(22,e),function t(n){if(!fs(n))return n;var r,i=n[un],o=qa(n);if(i){if(!i.P&&(i.i<4||!is("ES5").K(i)))return i.t;i.I=!0,r=ej(n,o),i.I=!1}else r=ej(n,o);return Kl(r,function(s,a){i&&fg(i.t,s)===a||b4(r,s,t(a))}),o===3?new Set(r):r}(e)}function ej(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return X1(e)}function SY(){function e(r){if(!fs(r))return r;if(Array.isArray(r))return r.map(e);if(qy(r))return new Map(Array.from(r.entries()).map(function(s){return[s[0],e(s[1])]}));if(Ky(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var o in r)i[o]=e(r[o]);return eh(r,nf)&&(i[nf]=r[nf]),i}function t(r){return ql(r)?e(r):r}var n="add";w4("Patches",{$:function(r,i){return i.forEach(function(o){for(var s=o.path,a=o.op,l=r,u=0;u<s.length-1;u++){var d=qa(l),f=s[u];typeof f!="string"&&typeof f!="number"&&(f=""+f),d!==0&&d!==1||f!=="__proto__"&&f!=="constructor"||wr(24),typeof l=="function"&&f==="prototype"&&wr(24),typeof(l=fg(l,f))!="object"&&wr(15,s.join("/"))}var h=qa(l),p=e(o.value),v=s[s.length-1];switch(a){case"replace":switch(h){case 2:return l.set(v,p);case 3:wr(16);default:return l[v]=p}case n:switch(h){case 1:return v==="-"?l.push(p):l.splice(v,0,p);case 2:return l.set(v,p);case 3:return l.add(p);default:return l[v]=p}case"remove":switch(h){case 1:return l.splice(v,1);case 2:return l.delete(v);case 3:return l.delete(o.value);default:return delete l[v]}default:wr(17,a)}}),r},N:function(r,i,o,s){switch(r.i){case 0:case 4:case 2:return function(a,l,u,d){var f=a.t,h=a.o;Kl(a.R,function(p,v){var y=fg(f,p),w=fg(h,p),x=v?eh(f,p)?"replace":n:"remove";if(y!==w||x!=="replace"){var b=l.concat(p);u.push(x==="remove"?{op:x,path:b}:{op:x,path:b,value:w}),d.push(x===n?{op:"remove",path:b}:x==="remove"?{op:n,path:b,value:t(y)}:{op:"replace",path:b,value:t(y)})}})}(r,i,o,s);case 5:case 1:return function(a,l,u,d){var f=a.t,h=a.R,p=a.o;if(p.length<f.length){var v=[p,f];f=v[0],p=v[1];var y=[d,u];u=y[0],d=y[1]}for(var w=0;w<f.length;w++)if(h[w]&&p[w]!==f[w]){var x=l.concat([w]);u.push({op:"replace",path:x,value:t(p[w])}),d.push({op:"replace",path:x,value:t(f[w])})}for(var b=f.length;b<p.length;b++){var m=l.concat([b]);u.push({op:n,path:m,value:t(p[b])})}f.length<p.length&&d.push({op:"replace",path:l.concat(["length"]),value:f.length})}(r,i,o,s);case 3:return function(a,l,u,d){var f=a.t,h=a.o,p=0;f.forEach(function(v){if(!h.has(v)){var y=l.concat([p]);u.push({op:"remove",path:y,value:v}),d.unshift({op:n,path:y,value:v})}p++}),p=0,h.forEach(function(v){if(!f.has(v)){var y=l.concat([p]);u.push({op:n,path:y,value:v}),d.unshift({op:"remove",path:y,value:v})}p++})}(r,i,o,s)}},M:function(r,i,o,s){o.push({op:"replace",path:[],value:i===eS?void 0:i}),s.push({op:"replace",path:[],value:r})}})}function EY(){function e(a,l){function u(){this.constructor=a}i(a,l),a.prototype=(u.prototype=l.prototype,new u)}function t(a){a.o||(a.R=new Map,a.o=new Map(a.t))}function n(a){a.o||(a.o=new Set,a.t.forEach(function(l){if(fs(l)){var u=th(a.A.h,l,a);a.p.set(l,u),a.o.add(u)}else a.o.add(l)}))}function r(a){a.g&&wr(3,JSON.stringify(hr(a)))}var i=function(a,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])})(a,l)},o=function(){function a(u,d){return this[un]={i:2,l:d,A:d?d.A:gm(),P:!1,I:!1,o:void 0,R:void 0,t:u,k:this,C:!1,g:!1},this}e(a,Map);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return hr(this[un]).size}}),l.has=function(u){return hr(this[un]).has(u)},l.set=function(u,d){var f=this[un];return r(f),hr(f).has(u)&&hr(f).get(u)===d||(t(f),Ts(f),f.R.set(u,!0),f.o.set(u,d),f.R.set(u,!0)),this},l.delete=function(u){if(!this.has(u))return!1;var d=this[un];return r(d),t(d),Ts(d),d.t.has(u)?d.R.set(u,!1):d.R.delete(u),d.o.delete(u),!0},l.clear=function(){var u=this[un];r(u),hr(u).size&&(t(u),Ts(u),u.R=new Map,Kl(u.t,function(d){u.R.set(d,!1)}),u.o.clear())},l.forEach=function(u,d){var f=this;hr(this[un]).forEach(function(h,p){u.call(d,f.get(p),p,f)})},l.get=function(u){var d=this[un];r(d);var f=hr(d).get(u);if(d.I||!fs(f)||f!==d.t.get(u))return f;var h=th(d.A.h,f,d);return t(d),d.o.set(u,h),h},l.keys=function(){return hr(this[un]).keys()},l.values=function(){var u,d=this,f=this.keys();return(u={})[Rp]=function(){return d.values()},u.next=function(){var h=f.next();return h.done?h:{done:!1,value:d.get(h.value)}},u},l.entries=function(){var u,d=this,f=this.keys();return(u={})[Rp]=function(){return d.entries()},u.next=function(){var h=f.next();if(h.done)return h;var p=d.get(h.value);return{done:!1,value:[h.value,p]}},u},l[Rp]=function(){return this.entries()},a}(),s=function(){function a(u,d){return this[un]={i:3,l:d,A:d?d.A:gm(),P:!1,I:!1,o:void 0,t:u,k:this,p:new Map,g:!1,C:!1},this}e(a,Set);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return hr(this[un]).size}}),l.has=function(u){var d=this[un];return r(d),d.o?!!d.o.has(u)||!(!d.p.has(u)||!d.o.has(d.p.get(u))):d.t.has(u)},l.add=function(u){var d=this[un];return r(d),this.has(u)||(n(d),Ts(d),d.o.add(u)),this},l.delete=function(u){if(!this.has(u))return!1;var d=this[un];return r(d),n(d),Ts(d),d.o.delete(u)||!!d.p.has(u)&&d.o.delete(d.p.get(u))},l.clear=function(){var u=this[un];r(u),hr(u).size&&(n(u),Ts(u),u.o.clear())},l.values=function(){var u=this[un];return r(u),n(u),u.o.values()},l.entries=function(){var u=this[un];return r(u),n(u),u.o.entries()},l.keys=function(){return this.values()},l[Rp]=function(){return this.values()},l.forEach=function(u,d){for(var f=this.values(),h=f.next();!h.done;)u.call(d,h.value,h.value,this),h=f.next()},a}();w4("MapSet",{F:function(a,l){return new o(a,l)},T:function(a,l){return new s(a,l)}})}var tj,nh,Z1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",kY=typeof Map<"u",CY=typeof Set<"u",nj=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",eS=Z1?Symbol.for("immer-nothing"):((tj={})["immer-nothing"]=!0,tj),nf=Z1?Symbol.for("immer-draftable"):"__$immer_draftable",un=Z1?Symbol.for("immer-state"):"__$immer_state",Rp=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",jY=""+Object.prototype.constructor,tS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,AY=Object.getOwnPropertyDescriptors||function(e){var t={};return tS(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},hw={},pw={get:function(e,t){if(t===un)return e;var n=hr(e);if(!eh(n,t))return function(i,o,s){var a,l=ZC(o,s);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!fs(r)?r:r===ax(e.t,t)?(lx(e),e.o[t]=th(e.A.h,r,e)):r},has:function(e,t){return t in hr(e)},ownKeys:function(e){return Reflect.ownKeys(hr(e))},set:function(e,t,n){var r=ZC(hr(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ax(hr(e),t),o=i==null?void 0:i[un];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(xY(n,i)&&(n!==void 0||eh(e.t,t)))return!0;lx(e),Ts(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return ax(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,lx(e),Ts(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=hr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){wr(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){wr(12)}},$d={};Kl(pw,function(e,t){$d[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),$d.deleteProperty=function(e,t){return $d.set.call(this,e,t,void 0)},$d.set=function(e,t,n){return pw.set.call(this,e[0],t,n,e[0])};var NY=function(){function e(n){var r=this;this.O=nj,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var l=r;return function(y){var w=this;y===void 0&&(y=a);for(var x=arguments.length,b=Array(x>1?x-1:0),m=1;m<x;m++)b[m-1]=arguments[m];return l.produce(y,function(S){var E;return(E=o).call.apply(E,[w,S].concat(b))})}}var u;if(typeof o!="function"&&wr(6),s!==void 0&&typeof s!="function"&&wr(7),fs(i)){var d=JC(r),f=th(r,i,void 0),h=!0;try{u=o(f),h=!1}finally{h?mm(d):fw(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(y){return ox(d,s),sx(y,d)},function(y){throw mm(d),y}):(ox(d,s),sx(u,d))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===eS&&(u=void 0),r.D&&J1(u,!0),s){var p=[],v=[];is("Patches").M(i,u,p,v),s(p,v)}return u}wr(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var d=arguments.length,f=Array(d>1?d-1:0),h=1;h<d;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(p){return i.apply(void 0,[p].concat(f))})};var s,a,l=r.produce(i,o,function(u,d){s=u,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,s,a]}):[l,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){fs(n)||wr(8),ql(n)&&(n=_Y(n));var r=JC(this),i=th(this,n,void 0);return i[un].C=!0,fw(r),i},t.finishDraft=function(n,r){var i=n&&n[un],o=i.A;return ox(o,r),sx(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!nj&&wr(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=is("Patches").$;return ql(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Bi=new NY,RY=Bi.produce,rj=Bi.produceWithPatches.bind(Bi);Bi.setAutoFreeze.bind(Bi);Bi.setUseProxies.bind(Bi);var ij=Bi.applyPatches.bind(Bi);Bi.createDraft.bind(Bi);Bi.finishDraft.bind(Bi);function TY(){this.__data__=[],this.size=0}var IY=TY;function PY(e,t){return e===t||e!==e&&t!==t}var _4=PY,OY=_4;function $Y(e,t){for(var n=e.length;n--;)if(OY(e[n][0],t))return n;return-1}var Gy=$Y,MY=Gy,DY=Array.prototype,LY=DY.splice;function FY(e){var t=this.__data__,n=MY(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():LY.call(t,n,1),--this.size,!0}var BY=FY,zY=Gy;function HY(e){var t=this.__data__,n=zY(t,e);return n<0?void 0:t[n][1]}var WY=HY,UY=Gy;function VY(e){return UY(this.__data__,e)>-1}var qY=VY,KY=Gy;function GY(e,t){var n=this.__data__,r=KY(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var YY=GY,XY=IY,JY=BY,QY=WY,ZY=qY,eX=YY;function Hc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hc.prototype.clear=XY;Hc.prototype.delete=JY;Hc.prototype.get=QY;Hc.prototype.has=ZY;Hc.prototype.set=eX;var Yy=Hc,tX=Yy;function nX(){this.__data__=new tX,this.size=0}var rX=nX;function iX(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var oX=iX;function sX(e){return this.__data__.get(e)}var aX=sX;function lX(e){return this.__data__.has(e)}var uX=lX,cX=typeof Ri=="object"&&Ri&&Ri.Object===Object&&Ri,S4=cX,dX=S4,fX=typeof self=="object"&&self&&self.Object===Object&&self,hX=dX||fX||Function("return this")(),ms=hX,pX=ms,gX=pX.Symbol,Xy=gX,oj=Xy,E4=Object.prototype,mX=E4.hasOwnProperty,yX=E4.toString,xd=oj?oj.toStringTag:void 0;function vX(e){var t=mX.call(e,xd),n=e[xd];try{e[xd]=void 0;var r=!0}catch(o){}var i=yX.call(e);return r&&(t?e[xd]=n:delete e[xd]),i}var xX=vX,bX=Object.prototype,wX=bX.toString;function _X(e){return wX.call(e)}var SX=_X,sj=Xy,EX=xX,kX=SX,CX="[object Null]",jX="[object Undefined]",aj=sj?sj.toStringTag:void 0;function AX(e){return e==null?e===void 0?jX:CX:aj&&aj in Object(e)?EX(e):kX(e)}var Jy=AX;function NX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var k4=NX,RX=Jy,TX=k4,IX="[object AsyncFunction]",PX="[object Function]",OX="[object GeneratorFunction]",$X="[object Proxy]";function MX(e){if(!TX(e))return!1;var t=RX(e);return t==PX||t==OX||t==IX||t==$X}var nS=MX;const DX=ta(nS);var LX=ms,FX=LX["__core-js_shared__"],BX=FX,ux=BX,lj=function(){var e=/[^.]+$/.exec(ux&&ux.keys&&ux.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function zX(e){return!!lj&&lj in e}var HX=zX,WX=Function.prototype,UX=WX.toString;function VX(e){if(e!=null){try{return UX.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var C4=VX,qX=nS,KX=HX,GX=k4,YX=C4,XX=/[\\^$.*+?()[\]{}|]/g,JX=/^\[object .+?Constructor\]$/,QX=Function.prototype,ZX=Object.prototype,eJ=QX.toString,tJ=ZX.hasOwnProperty,nJ=RegExp("^"+eJ.call(tJ).replace(XX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rJ(e){if(!GX(e)||KX(e))return!1;var t=qX(e)?nJ:JX;return t.test(YX(e))}var iJ=rJ;function oJ(e,t){return e==null?void 0:e[t]}var sJ=oJ,aJ=iJ,lJ=sJ;function uJ(e,t){var n=lJ(e,t);return aJ(n)?n:void 0}var ou=uJ,cJ=ou,dJ=ms,fJ=cJ(dJ,"Map"),rS=fJ,hJ=ou,pJ=hJ(Object,"create"),Qy=pJ,uj=Qy;function gJ(){this.__data__=uj?uj(null):{},this.size=0}var mJ=gJ;function yJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vJ=yJ,xJ=Qy,bJ="__lodash_hash_undefined__",wJ=Object.prototype,_J=wJ.hasOwnProperty;function SJ(e){var t=this.__data__;if(xJ){var n=t[e];return n===bJ?void 0:n}return _J.call(t,e)?t[e]:void 0}var EJ=SJ,kJ=Qy,CJ=Object.prototype,jJ=CJ.hasOwnProperty;function AJ(e){var t=this.__data__;return kJ?t[e]!==void 0:jJ.call(t,e)}var NJ=AJ,RJ=Qy,TJ="__lodash_hash_undefined__";function IJ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=RJ&&t===void 0?TJ:t,this}var PJ=IJ,OJ=mJ,$J=vJ,MJ=EJ,DJ=NJ,LJ=PJ;function Wc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Wc.prototype.clear=OJ;Wc.prototype.delete=$J;Wc.prototype.get=MJ;Wc.prototype.has=DJ;Wc.prototype.set=LJ;var FJ=Wc,cj=FJ,BJ=Yy,zJ=rS;function HJ(){this.size=0,this.__data__={hash:new cj,map:new(zJ||BJ),string:new cj}}var WJ=HJ;function UJ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var VJ=UJ,qJ=VJ;function KJ(e,t){var n=e.__data__;return qJ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Zy=KJ,GJ=Zy;function YJ(e){var t=GJ(this,e).delete(e);return this.size-=t?1:0,t}var XJ=YJ,JJ=Zy;function QJ(e){return JJ(this,e).get(e)}var ZJ=QJ,eQ=Zy;function tQ(e){return eQ(this,e).has(e)}var nQ=tQ,rQ=Zy;function iQ(e,t){var n=rQ(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var oQ=iQ,sQ=WJ,aQ=XJ,lQ=ZJ,uQ=nQ,cQ=oQ;function Uc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Uc.prototype.clear=sQ;Uc.prototype.delete=aQ;Uc.prototype.get=lQ;Uc.prototype.has=uQ;Uc.prototype.set=cQ;var j4=Uc,dQ=Yy,fQ=rS,hQ=j4,pQ=200;function gQ(e,t){var n=this.__data__;if(n instanceof dQ){var r=n.__data__;if(!fQ||r.length<pQ-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new hQ(r)}return n.set(e,t),this.size=n.size,this}var mQ=gQ,yQ=Yy,vQ=rX,xQ=oX,bQ=aX,wQ=uX,_Q=mQ;function Vc(e){var t=this.__data__=new yQ(e);this.size=t.size}Vc.prototype.clear=vQ;Vc.prototype.delete=xQ;Vc.prototype.get=bQ;Vc.prototype.has=wQ;Vc.prototype.set=_Q;var SQ=Vc,EQ="__lodash_hash_undefined__";function kQ(e){return this.__data__.set(e,EQ),this}var CQ=kQ;function jQ(e){return this.__data__.has(e)}var AQ=jQ,NQ=j4,RQ=CQ,TQ=AQ;function xm(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new NQ;++t<n;)this.add(e[t])}xm.prototype.add=xm.prototype.push=RQ;xm.prototype.has=TQ;var IQ=xm;function PQ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var OQ=PQ;function $Q(e,t){return e.has(t)}var MQ=$Q,DQ=IQ,LQ=OQ,FQ=MQ,BQ=1,zQ=2;function HQ(e,t,n,r,i,o){var s=n&BQ,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,p=n&zQ?new DQ:void 0;for(o.set(e,t),o.set(t,e);++f<a;){var v=e[f],y=t[f];if(r)var w=s?r(y,v,f,t,e,o):r(v,y,f,e,t,o);if(w!==void 0){if(w)continue;h=!1;break}if(p){if(!LQ(t,function(x,b){if(!FQ(p,b)&&(v===x||i(v,x,n,r,o)))return p.push(b)})){h=!1;break}}else if(!(v===y||i(v,y,n,r,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var A4=HQ,WQ=ms,UQ=WQ.Uint8Array,VQ=UQ;function qQ(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var KQ=qQ;function GQ(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var YQ=GQ,dj=Xy,fj=VQ,XQ=_4,JQ=A4,QQ=KQ,ZQ=YQ,eZ=1,tZ=2,nZ="[object Boolean]",rZ="[object Date]",iZ="[object Error]",oZ="[object Map]",sZ="[object Number]",aZ="[object RegExp]",lZ="[object Set]",uZ="[object String]",cZ="[object Symbol]",dZ="[object ArrayBuffer]",fZ="[object DataView]",hj=dj?dj.prototype:void 0,cx=hj?hj.valueOf:void 0;function hZ(e,t,n,r,i,o,s){switch(n){case fZ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case dZ:return!(e.byteLength!=t.byteLength||!o(new fj(e),new fj(t)));case nZ:case rZ:case sZ:return XQ(+e,+t);case iZ:return e.name==t.name&&e.message==t.message;case aZ:case uZ:return e==t+"";case oZ:var a=QQ;case lZ:var l=r&eZ;if(a||(a=ZQ),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=tZ,s.set(e,t);var d=JQ(a(e),a(t),r,i,o,s);return s.delete(e),d;case cZ:if(cx)return cx.call(e)==cx.call(t)}return!1}var pZ=hZ;function gZ(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var mZ=gZ,yZ=Array.isArray,iS=yZ,vZ=mZ,xZ=iS;function bZ(e,t,n){var r=t(e);return xZ(e)?r:vZ(r,n(e))}var wZ=bZ;function _Z(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}var SZ=_Z;function EZ(){return[]}var kZ=EZ,CZ=SZ,jZ=kZ,AZ=Object.prototype,NZ=AZ.propertyIsEnumerable,pj=Object.getOwnPropertySymbols,RZ=pj?function(e){return e==null?[]:(e=Object(e),CZ(pj(e),function(t){return NZ.call(e,t)}))}:jZ,TZ=RZ;function IZ(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var PZ=IZ;function OZ(e){return e!=null&&typeof e=="object"}var ev=OZ,$Z=Jy,MZ=ev,DZ="[object Arguments]";function LZ(e){return MZ(e)&&$Z(e)==DZ}var FZ=LZ,gj=FZ,BZ=ev,N4=Object.prototype,zZ=N4.hasOwnProperty,HZ=N4.propertyIsEnumerable,WZ=gj(function(){return arguments}())?gj:function(e){return BZ(e)&&zZ.call(e,"callee")&&!HZ.call(e,"callee")},UZ=WZ,bm={exports:{}};function VZ(){return!1}var qZ=VZ;bm.exports;(function(e,t){var n=ms,r=qZ,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;e.exports=u})(bm,bm.exports);var R4=bm.exports,KZ=9007199254740991,GZ=/^(?:0|[1-9]\d*)$/;function YZ(e,t){var n=typeof e;return t=t==null?KZ:t,!!t&&(n=="number"||n!="symbol"&&GZ.test(e))&&e>-1&&e%1==0&&e<t}var XZ=YZ,JZ=9007199254740991;function QZ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=JZ}var T4=QZ,ZZ=Jy,eee=T4,tee=ev,nee="[object Arguments]",ree="[object Array]",iee="[object Boolean]",oee="[object Date]",see="[object Error]",aee="[object Function]",lee="[object Map]",uee="[object Number]",cee="[object Object]",dee="[object RegExp]",fee="[object Set]",hee="[object String]",pee="[object WeakMap]",gee="[object ArrayBuffer]",mee="[object DataView]",yee="[object Float32Array]",vee="[object Float64Array]",xee="[object Int8Array]",bee="[object Int16Array]",wee="[object Int32Array]",_ee="[object Uint8Array]",See="[object Uint8ClampedArray]",Eee="[object Uint16Array]",kee="[object Uint32Array]",_n={};_n[yee]=_n[vee]=_n[xee]=_n[bee]=_n[wee]=_n[_ee]=_n[See]=_n[Eee]=_n[kee]=!0;_n[nee]=_n[ree]=_n[gee]=_n[iee]=_n[mee]=_n[oee]=_n[see]=_n[aee]=_n[lee]=_n[uee]=_n[cee]=_n[dee]=_n[fee]=_n[hee]=_n[pee]=!1;function Cee(e){return tee(e)&&eee(e.length)&&!!_n[ZZ(e)]}var jee=Cee;function Aee(e){return function(t){return e(t)}}var Nee=Aee,wm={exports:{}};wm.exports;(function(e,t){var n=S4,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch(u){}}();e.exports=a})(wm,wm.exports);var oS=wm.exports,Ree=jee,Tee=Nee,mj=oS,yj=mj&&mj.isTypedArray,Iee=yj?Tee(yj):Ree,I4=Iee,Pee=PZ,Oee=UZ,$ee=iS,Mee=R4,Dee=XZ,Lee=I4,Fee=Object.prototype,Bee=Fee.hasOwnProperty;function zee(e,t){var n=$ee(e),r=!n&&Oee(e),i=!n&&!r&&Mee(e),o=!n&&!r&&!i&&Lee(e),s=n||r||i||o,a=s?Pee(e.length,String):[],l=a.length;for(var u in e)(t||Bee.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Dee(u,l)))&&a.push(u);return a}var Hee=zee,Wee=Object.prototype;function Uee(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Wee;return e===n}var Vee=Uee;function qee(e,t){return function(n){return e(t(n))}}var Kee=qee,Gee=Kee,Yee=Gee(Object.keys,Object),Xee=Yee,Jee=Vee,Qee=Xee,Zee=Object.prototype,ete=Zee.hasOwnProperty;function tte(e){if(!Jee(e))return Qee(e);var t=[];for(var n in Object(e))ete.call(e,n)&&n!="constructor"&&t.push(n);return t}var nte=tte,rte=nS,ite=T4;function ote(e){return e!=null&&ite(e.length)&&!rte(e)}var ste=ote,ate=Hee,lte=nte,ute=ste;function cte(e){return ute(e)?ate(e):lte(e)}var dte=cte,fte=wZ,hte=TZ,pte=dte;function gte(e){return fte(e,pte,hte)}var mte=gte,vj=mte,yte=1,vte=Object.prototype,xte=vte.hasOwnProperty;function bte(e,t,n,r,i,o){var s=n&yte,a=vj(e),l=a.length,u=vj(t),d=u.length;if(l!=d&&!s)return!1;for(var f=l;f--;){var h=a[f];if(!(s?h in t:xte.call(t,h)))return!1}var p=o.get(e),v=o.get(t);if(p&&v)return p==t&&v==e;var y=!0;o.set(e,t),o.set(t,e);for(var w=s;++f<l;){h=a[f];var x=e[h],b=t[h];if(r)var m=s?r(b,x,h,t,e,o):r(x,b,h,e,t,o);if(!(m===void 0?x===b||i(x,b,n,r,o):m)){y=!1;break}w||(w=h=="constructor")}if(y&&!w){var S=e.constructor,E=t.constructor;S!=E&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof E=="function"&&E instanceof E)&&(y=!1)}return o.delete(e),o.delete(t),y}var wte=bte,_te=ou,Ste=ms,Ete=_te(Ste,"DataView"),kte=Ete,Cte=ou,jte=ms,Ate=Cte(jte,"Promise"),Nte=Ate,Rte=ou,Tte=ms,Ite=Rte(Tte,"Set"),Pte=Ite,Ote=ou,$te=ms,Mte=Ote($te,"WeakMap"),Dte=Mte,gw=kte,mw=rS,yw=Nte,vw=Pte,xw=Dte,P4=Jy,qc=C4,xj="[object Map]",Lte="[object Object]",bj="[object Promise]",wj="[object Set]",_j="[object WeakMap]",Sj="[object DataView]",Fte=qc(gw),Bte=qc(mw),zte=qc(yw),Hte=qc(vw),Wte=qc(xw),yl=P4;(gw&&yl(new gw(new ArrayBuffer(1)))!=Sj||mw&&yl(new mw)!=xj||yw&&yl(yw.resolve())!=bj||vw&&yl(new vw)!=wj||xw&&yl(new xw)!=_j)&&(yl=function(e){var t=P4(e),n=t==Lte?e.constructor:void 0,r=n?qc(n):"";if(r)switch(r){case Fte:return Sj;case Bte:return xj;case zte:return bj;case Hte:return wj;case Wte:return _j}return t});var Ute=yl,dx=SQ,Vte=A4,qte=pZ,Kte=wte,Ej=Ute,kj=iS,Cj=R4,Gte=I4,Yte=1,jj="[object Arguments]",Aj="[object Array]",Tp="[object Object]",Xte=Object.prototype,Nj=Xte.hasOwnProperty;function Jte(e,t,n,r,i,o){var s=kj(e),a=kj(t),l=s?Aj:Ej(e),u=a?Aj:Ej(t);l=l==jj?Tp:l,u=u==jj?Tp:u;var d=l==Tp,f=u==Tp,h=l==u;if(h&&Cj(e)){if(!Cj(t))return!1;s=!0,d=!1}if(h&&!d)return o||(o=new dx),s||Gte(e)?Vte(e,t,n,r,i,o):qte(e,t,l,n,r,i,o);if(!(n&Yte)){var p=d&&Nj.call(e,"__wrapped__"),v=f&&Nj.call(t,"__wrapped__");if(p||v){var y=p?e.value():e,w=v?t.value():t;return o||(o=new dx),i(y,w,n,r,o)}}return h?(o||(o=new dx),Kte(e,t,n,r,i,o)):!1}var Qte=Jte,Zte=Qte,Rj=ev;function O4(e,t,n,r,i){return e===t?!0:e==null||t==null||!Rj(e)&&!Rj(t)?e!==e&&t!==t:Zte(e,t,n,r,O4,i)}var ene=O4,tne=ene;function nne(e,t,n){n=typeof n=="function"?n:void 0;var r=n?n(e,t):void 0;return r===void 0?tne(e,t,void 0,n):!!r}var rne=nne;const ine=ta(rne);var one=function(t,n,r,i){var o=r?r.call(i,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<s.length;u++){var d=s[u];if(!l(d))return!1;var f=t[d],h=n[d];if(o=r?r.call(i,f,h,d):void 0,o===!1||o===void 0&&f!==h)return!1}return!0};const sne=ta(one);let ane=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var lne="Invariant failed";function xn(e,t){if(!e)throw new Error(lne)}typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/utils"]="0.2.5");var zs="ROOT",$4="canvas-ROOT",une="Attempting to add a node with duplicated id",cne="Node cannot be dropped into target parent",dne="Target parent rejects incoming node",fne="Current parent rejects outgoing node",Tj="Cannot move node that is not a direct child of a Canvas node",hne="Cannot move node into a non-Canvas parent",Ij="A top-level Node cannot be moved",pne="Cannot move node into a descendant",M4="The component type specified for this node (%node_type%) does not exist in the resolver",gne="The node has specified a canDrag() rule that prevents it from being dragged",mne="An Error occurred while deserializing components: Cannot find component <%displayName% /> in resolver map. Please check your resolver in <Editor />\n\nAvailable components in resolver: %availableComponents%\n\nMore info: https://craft.js.org/r/docs/api/editor#props";function Pj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(n),!0).forEach(function(r){cr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z4(r.key),r)}}function Gc(e,t,n){return t&&yne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cr(e,t,n){return(t=z4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ju(e){return Ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ju(e)}function bw(e,t){return bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bw(e,t)}function fx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ww(){return ww=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(o,s){for(;!Object.prototype.hasOwnProperty.call(o,s)&&(o=Ju(o))!==null;);return o}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ww.apply(this,arguments)}function D4(e,t){return L4(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],d=!0,f=!1;try{if(a=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);d=!0);}catch(h){f=!0,s=h}finally{try{if(!d&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}(e,t)||sS(e,t)||B4()}function Jr(e){return function(t){if(Array.isArray(t))return _w(t)}(e)||F4(e)||sS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L4(e){if(Array.isArray(e))return e}function F4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sS(e,t){if(e){if(typeof e=="string")return _w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_w(e,t):void 0}}function _w(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B4(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z4(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}var Ln={UNDO:"HISTORY_UNDO",REDO:"HISTORY_REDO",THROTTLE:"HISTORY_THROTTLE",IGNORE:"HISTORY_IGNORE",MERGE:"HISTORY_MERGE",CLEAR:"HISTORY_CLEAR"},vne=function(){function e(){Kc(this,e),cr(this,"timeline",[]),cr(this,"pointer",-1)}return Gc(e,[{key:"add",value:function(t,n){t.length===0&&n.length===0||(this.pointer=this.pointer+1,this.timeline.length=this.pointer,this.timeline[this.pointer]={patches:t,inversePatches:n,timestamp:Date.now()})}},{key:"throttleAdd",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:500;if(t.length!==0||n.length!==0){if(this.timeline.length&&this.pointer>=0){var i=this.timeline[this.pointer],o=i.patches,s=i.inversePatches,a=i.timestamp;if(new Date().getTime()-a<r)return void(this.timeline[this.pointer]={timestamp:a,patches:[].concat(Jr(o),Jr(t)),inversePatches:[].concat(Jr(n),Jr(s))})}this.add(t,n)}}},{key:"merge",value:function(t,n){if(t.length!==0||n.length!==0)if(this.timeline.length&&this.pointer>=0){var r=this.timeline[this.pointer],i=r.inversePatches;this.timeline[this.pointer]={timestamp:r.timestamp,patches:[].concat(Jr(r.patches),Jr(t)),inversePatches:[].concat(Jr(n),Jr(i))}}else this.add(t,n)}},{key:"clear",value:function(){this.timeline=[],this.pointer=-1}},{key:"canUndo",value:function(){return this.pointer>=0}},{key:"canRedo",value:function(){return this.pointer<this.timeline.length-1}},{key:"undo",value:function(t){if(this.canUndo()){var n=this.timeline[this.pointer].inversePatches;return this.pointer=this.pointer-1,ij(t,n)}}},{key:"redo",value:function(t){if(this.canRedo())return this.pointer=this.pointer+1,ij(t,this.timeline[this.pointer].patches)}}]),e}();function xne(e,t,n,r){var i,o=j.useMemo(function(){return new vne},[]),s=j.useRef([]),a=j.useRef(function(){});typeof e=="function"?i=e:(i=e.methods,s.current=e.ignoreHistoryForActions,a.current=e.normalizeHistory);var l=j.useRef(r);l.current=r;var u=j.useRef(t),d=j.useMemo(function(){var w=a.current,x=s.current,b=l.current;return function(m,S){var E,k=n&&Oj(n,function(){return m},o),N=D4(rj(m,function(M){var K,D;switch(S.type){case Ln.UNDO:return o.undo(M);case Ln.REDO:return o.redo(M);case Ln.CLEAR:return o.clear(),Gi({},M);case Ln.IGNORE:case Ln.MERGE:case Ln.THROTTLE:var L,q=L4(D=S.payload)||F4(D)||sS(D)||B4(),G=q[0],te=q.slice(1);(L=i(M,k))[G].apply(L,Jr(te));break;default:(K=i(M,k))[S.type].apply(K,Jr(S.payload))}}),3),I=N[0],z=N[1],O=N[2];return E=I,b&&b(I,m,{type:S.type,params:S.payload,patches:z},k,function(M){var K=rj(I,M);E=K[0],z=[].concat(Jr(z),Jr(K[1])),O=[].concat(Jr(K[2]),Jr(O))}),[Ln.UNDO,Ln.REDO].includes(S.type)&&w&&(E=RY(E,w)),[].concat(Jr(x),[Ln.UNDO,Ln.REDO,Ln.IGNORE,Ln.CLEAR]).includes(S.type)||(S.type===Ln.THROTTLE?o.throttleAdd(z,O,S.config&&S.config.rate):S.type===Ln.MERGE?o.merge(z,O):o.add(z,O)),E}},[o,i,n]),f=j.useCallback(function(){return u.current},[]),h=j.useMemo(function(){return new bne(f)},[f]),p=j.useCallback(function(w){var x=d(u.current,w);u.current=x,h.notify()},[d,h]);j.useEffect(function(){h.notify()},[h]);var v=j.useMemo(function(){return n?Oj(n,function(){return u.current},o):[]},[o,n]),y=j.useMemo(function(){var w=Object.keys(i(null,null)),x=s.current;return Gi(Gi({},w.reduce(function(b,m){return b[m]=function(){for(var S=arguments.length,E=new Array(S),k=0;k<S;k++)E[k]=arguments[k];return p({type:m,payload:E})},b},{})),{},{history:{undo:function(){return p({type:Ln.UNDO})},redo:function(){return p({type:Ln.REDO})},clear:function(){return p({type:Ln.CLEAR})},throttle:function(b){return Gi({},w.filter(function(m){return!x.includes(m)}).reduce(function(m,S){return m[S]=function(){for(var E=arguments.length,k=new Array(E),N=0;N<E;N++)k[N]=arguments[N];return p({type:Ln.THROTTLE,payload:[S].concat(k),config:{rate:b}})},m},{}))},ignore:function(){return Gi({},w.filter(function(b){return!x.includes(b)}).reduce(function(b,m){return b[m]=function(){for(var S=arguments.length,E=new Array(S),k=0;k<S;k++)E[k]=arguments[k];return p({type:Ln.IGNORE,payload:[m].concat(E)})},b},{}))},merge:function(){return Gi({},w.filter(function(b){return!x.includes(b)}).reduce(function(b,m){return b[m]=function(){for(var S=arguments.length,E=new Array(S),k=0;k<S;k++)E[k]=arguments[k];return p({type:Ln.MERGE,payload:[m].concat(E)})},b},{}))}}})},[p,i]);return j.useMemo(function(){return{getState:f,subscribe:function(w,x,b){return h.subscribe(w,x,b)},actions:y,query:v,history:o}},[y,v,h,f,o])}function Oj(e,t,n){var r=Object.keys(e()).reduce(function(i,o){return Gi(Gi({},i),{},cr({},o,function(){var s;return(s=e(t()))[o].apply(s,arguments)}))},{});return Gi(Gi({},r),{},{history:{canUndo:function(){return n.canUndo()},canRedo:function(){return n.canRedo()}}})}EY(),SY();var bne=function(){function e(t){Kc(this,e),cr(this,"getState",void 0),cr(this,"subscribers",[]),this.getState=t}return Gc(e,[{key:"subscribe",value:function(t,n,r){var i=this,o=new wne(function(){return t(i.getState())},n,r);return this.subscribers.push(o),this.unsubscribe.bind(this,o)}},{key:"unsubscribe",value:function(t){if(this.subscribers.length){var n=this.subscribers.indexOf(t);if(n>-1)return this.subscribers.splice(n,1)}}},{key:"notify",value:function(){this.subscribers.forEach(function(t){return t.collect()})}}]),e}(),wne=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];Kc(this,e),cr(this,"collected",void 0),cr(this,"collector",void 0),cr(this,"onChange",void 0),cr(this,"id",void 0),this.collector=t,this.onChange=n,r&&this.collect()}return Gc(e,[{key:"collect",value:function(){try{var t=this.collector();ine(t,this.collected)||(this.collected=t,this.onChange&&this.onChange(this.collected))}catch(n){console.warn(n)}}}]),e}(),rh=function(e){var t=e.getBoundingClientRect(),n=t.x,r=t.y,i=t.top,o=t.left,s=t.bottom,a=t.right,l=t.width,u=t.height,d=window.getComputedStyle(e),f={left:parseInt(d.marginLeft),right:parseInt(d.marginRight),bottom:parseInt(d.marginBottom),top:parseInt(d.marginTop)},h={left:parseInt(d.paddingLeft),right:parseInt(d.paddingRight),bottom:parseInt(d.paddingBottom),top:parseInt(d.paddingTop)};return{x:n,y:r,top:i,left:o,bottom:s,right:a,width:l,height:u,outerWidth:Math.round(l+f.left+f.right),outerHeight:Math.round(u+f.top+f.bottom),margin:f,padding:h,inFlow:e.parentElement&&!!function(p){var v=getComputedStyle(p);if(!(d.overflow&&d.overflow!=="visible"||v.float!=="none"||v.display==="grid"||v.display==="flex"&&v["flex-direction"]!=="column")){switch(d.position){case"static":case"relative":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(d.display){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}(e.parentElement)}};function _ne(e,t){const{subscribe:n,getState:r,actions:i,query:o}=e,s=j.useRef(!0),a=j.useRef(null),l=j.useRef(t);l.current=t;const u=j.useCallback(h=>({...h,actions:i,query:o}),[i,o]);s.current&&t&&(a.current=t(r(),o),s.current=!1);const[d,f]=j.useState(u(a.current));return j.useEffect(()=>{let h;return l.current&&(h=n(p=>l.current(p,o),p=>{f(u(p))})),()=>{h&&h()}},[u,o,n]),d}var _c,H4=function(){return ane(arguments.length>0&&arguments[0]!==void 0?arguments[0]:10)},Sne=function(){function e(){Kc(this,e),cr(this,"isEnabled",!0),cr(this,"elementIdMap",new WeakMap),cr(this,"registry",new Map)}return Gc(e,[{key:"getElementId",value:function(t){var n=this.elementIdMap.get(t);if(n)return n;var r=H4();return this.elementIdMap.set(t,r),r}},{key:"getConnectorId",value:function(t,n){var r=this.getElementId(t);return"".concat(n,"--").concat(r)}},{key:"register",value:function(t,n){var r=this,i=this.getByElement(t,n.name);if(i){if(sne(n.required,i.required))return i;this.getByElement(t,n.name).disable()}var o=null,s=this.getConnectorId(t,n.name);return this.registry.set(s,{id:s,required:n.required,enable:function(){o&&o(),o=n.connector(t,n.required,n.options)},disable:function(){o&&o()},remove:function(){return r.remove(s)}}),this.isEnabled&&this.registry.get(s).enable(),this.registry.get(s)}},{key:"get",value:function(t){return this.registry.get(t)}},{key:"remove",value:function(t){var n=this.get(t);n&&(n.disable(),this.registry.delete(n.id))}},{key:"enable",value:function(){this.isEnabled=!0,this.registry.forEach(function(t){t.enable()})}},{key:"disable",value:function(){this.isEnabled=!1,this.registry.forEach(function(t){t.disable()})}},{key:"getByElement",value:function(t,n){return this.get(this.getConnectorId(t,n))}},{key:"removeByElement",value:function(t,n){return this.remove(this.getConnectorId(t,n))}},{key:"clear",value:function(){this.disable(),this.elementIdMap=new WeakMap,this.registry=new Map}}]),e}();(function(e){e[e.HandlerDisabled=0]="HandlerDisabled",e[e.HandlerEnabled=1]="HandlerEnabled"})(_c||(_c={}));var W4=function(){function e(t){Kc(this,e),cr(this,"options",void 0),cr(this,"registry",new Sne),cr(this,"subscribers",new Set),this.options=t}return Gc(e,[{key:"listen",value:function(t){var n=this;return this.subscribers.add(t),function(){return n.subscribers.delete(t)}}},{key:"disable",value:function(){this.onDisable&&this.onDisable(),this.registry.disable(),this.subscribers.forEach(function(t){t(_c.HandlerDisabled)})}},{key:"enable",value:function(){this.onEnable&&this.onEnable(),this.registry.enable(),this.subscribers.forEach(function(t){t(_c.HandlerEnabled)})}},{key:"cleanup",value:function(){this.disable(),this.subscribers.clear(),this.registry.clear()}},{key:"addCraftEventListener",value:function(t,n,r,i){var o=function(s){(function(a,l,u){a.craft||(a.craft={stopPropagation:function(){},blockedEvents:{}});for(var d=a.craft&&a.craft.blockedEvents[l]||[],f=0;f<d.length;f++){var h=d[f];if(u!==h&&u.contains(h))return!0}return!1})(s,n,t)||(s.craft.stopPropagation=function(){s.craft.blockedEvents[n]||(s.craft.blockedEvents[n]=[]),s.craft.blockedEvents[n].push(t)},r(s))};return t.addEventListener(n,o,i),function(){return t.removeEventListener(n,o,i)}}},{key:"createConnectorsUsage",value:function(){var t=this,n=this.handlers(),r=new Set,i=!1,o=new Map;return{connectors:Object.entries(n).reduce(function(s,a){var l=D4(a,2),u=l[0],d=l[1];return Gi(Gi({},s),{},cr({},u,function(f,h,p){var v=function(){var y=t.registry.register(f,{required:h,name:u,options:p,connector:d});return r.add(y.id),y};return o.set(t.registry.getConnectorId(f,u),v),i&&v(),f}))},{}),register:function(){i=!0,o.forEach(function(s){s()})},cleanup:function(){i=!1,r.forEach(function(s){return t.registry.remove(s)})}}}},{key:"derive",value:function(t,n){return new t(this,n)}},{key:"createProxyHandlers",value:function(t,n){var r=[],i=t.handlers(),o=new Proxy(i,{get:function(s,a,l){return a in i==0?Reflect.get(s,a,l):function(u){for(var d=arguments.length,f=new Array(d>1?d-1:0),h=1;h<d;h++)f[h-1]=arguments[h];var p=i[a].apply(i,[u].concat(f));p&&r.push(p)}}});return n(o),function(){r.forEach(function(s){s()})}}},{key:"reflect",value:function(t){return this.createProxyHandlers(this,t)}}]),e}(),Ene=function(e){(function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&bw(o,s)})(i,W4);var t,n,r=(t=i,n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}(),function(){var o,s=Ju(t);if(n){var a=Ju(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return function(l,u){if(u&&(typeof u=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fx(l)}(this,o)});function i(o,s){var a;return Kc(this,i),cr(fx(a=r.call(this,s)),"derived",void 0),cr(fx(a),"unsubscribeParentHandlerListener",void 0),a.derived=o,a.options=s,a.unsubscribeParentHandlerListener=a.derived.listen(function(l){switch(l){case _c.HandlerEnabled:return a.enable();case _c.HandlerDisabled:return a.disable();default:return}}),a}return Gc(i,[{key:"inherit",value:function(o){return this.createProxyHandlers(this.derived,o)}},{key:"cleanup",value:function(){ww(Ju(i.prototype),"cleanup",this).call(this),this.unsubscribeParentHandlerListener()}}]),i}();function $j(e,t){t&&(typeof e=="function"?e(t):e.current=t)}function kne(e,t){const n=e.ref;return xn(typeof n!="string"),j.cloneElement(e,n?{ref:r=>{$j(n,r),$j(t,r)}}:{ref:t})}function Cne(e){return(t=null,...n)=>{if(!j.isValidElement(t)){if(!t)return;const i=t;return i&&e(i,...n),i}const r=t;return function(i){if(typeof i.type!="string")throw new Error}(r),kne(r,e)}}function U4(e){return Object.keys(e).reduce((t,n)=>(t[n]=Cne((...r)=>e[n](...r)),t),{})}const jne=({style:e,className:t,parentDom:n})=>{const r=Tt.createElement("div",{className:t,style:{position:"fixed",display:"block",opacity:1,borderStyle:"solid",borderWidth:"1px",borderColor:"transparent",zIndex:99999,...e}});return n&&n.ownerDocument!==document?ZT.createPortal(r,n.ownerDocument.body):r};var Ka=function(e,t){var n="Deprecation warning: ".concat(e," will be deprecated in future relases."),r=t.suggest,i=t.doc;r&&(n+=" Please use ".concat(r," instead.")),i&&(n+="(".concat(i,")")),console.warn(n)},V4=function(){return typeof window<"u"},Ane=function(){return V4()&&/Linux/i.test(window.navigator.userAgent)},Nne=function(){return V4()&&/Chrome/i.test(window.navigator.userAgent)},Rne=ou;(function(){try{var e=Rne(Object,"defineProperty");return e({},"",{}),e}catch(t){}})();var _m={exports:{}};_m.exports;(function(e,t){var n=ms,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function l(u,d){if(d)return u.slice();var f=u.length,h=a?a(f):new u.constructor(f);return u.copy(h),h}e.exports=l})(_m,_m.exports);_m.exports;var Mj=Xy,Dj=Mj?Mj.prototype:void 0;Dj&&Dj.valueOf;var Lj=oS;Lj&&Lj.isMap;var Fj=oS;Fj&&Fj.isSet;typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/core"]="0.2.12");const q4=Tt.createContext(null),K4=({id:e,related:t=!1,children:n})=>Tt.createElement(q4.Provider,{value:{id:e,related:t}},n);function Bj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bj(Object(n),!0).forEach(function(r){sr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sw(e){return Sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sw(e)}function tv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X4(r.key),r)}}function nv(e,t,n){return t&&Tne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sr(e,t,n){return(t=X4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ew(e,t)}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sm(e)}function Ew(e,t){return Ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ew(e,t)}function lS(e,t){if(e==null)return{};var n,r,i=function(s,a){if(s==null)return{};var l,u,d={},f=Object.keys(s);for(u=0;u<f.length;u++)a.indexOf(l=f[u])>=0||(d[l]=s[l]);return d}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Md(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uS(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Sm(e);if(t){var i=Sm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(o,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Md(o)}(this,n)}}function G4(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],d=!0,f=!1;try{if(a=(i=i.call(n)).next,r!==0)for(;!(d=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);d=!0);}catch(h){f=!0,s=h}finally{try{if(!d&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}(e,t)||Y4(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ih(e){return function(t){if(Array.isArray(t))return kw(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Y4(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y4(e,t){if(e){if(typeof e=="string")return kw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kw(e,t):void 0}}function kw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X4(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}const cS=j.createContext(null);var J4=j.createContext(null),Q4=function(){return j.useContext(J4)};function su(e){var t=Q4(),n=j.useContext(cS);xn(n);var r=_ne(n,e),i=j.useMemo(function(){return t&&t.createConnectorsUsage()},[t]);j.useEffect(function(){return i.register(),function(){i.cleanup()}},[i]);var o=j.useMemo(function(){return i&&U4(i.connectors)},[i]);return Sn(Sn({},r),{},{connectors:o,inContext:!!n,store:n})}var Ine=["actions","query","connectors"];function rv(e){var t=j.useContext(q4);xn(t);var n=t.id,r=t.related,i=su(function(d){return n&&d.nodes[n]&&e&&e(d.nodes[n])}),o=i.actions,s=i.connectors,a=lS(i,Ine),l=j.useMemo(function(){return U4({connect:function(d){return s.connect(d,n)},drag:function(d){return s.drag(d,n)}})},[s,n]),u=j.useMemo(function(){return{setProp:function(d,f){f?o.history.throttle(f).setProp(n,d):o.setProp(n,d)},setCustom:function(d,f){f?o.history.throttle(f).setCustom(n,d):o.setCustom(n,d)},setHidden:function(d){return o.setHidden(n,d)}}},[o,n]);return Sn(Sn({},a),{},{id:n,related:r,inNodeContext:!!t,actions:u,connectors:l})}var Pne=["id","related","actions","inNodeContext","connectors"];function oi(e){var t=rv(e),n=t.id,r=t.related,i=t.actions,o=t.inNodeContext,s=t.connectors;return Sn(Sn({},lS(t,Pne)),{},{actions:i,id:n,related:r,setProp:function(a,l){return Ka("useNode().setProp()",{suggest:"useNode().actions.setProp()"}),i.setProp(a,l)},inNodeContext:o,connectors:s})}const One=({render:e})=>{const{connectors:{connect:t,drag:n}}=oi();return typeof e.type=="string"?t(n(Tt.cloneElement(e))):e},$ne=()=>{const{type:e,props:t,nodes:n,hydrationTimestamp:r}=rv(i=>({type:i.data.type,props:i.data.props,nodes:i.data.nodes,hydrationTimestamp:i._hydrationTimestamp}));return j.useMemo(()=>{let i=t.children;n&&n.length>0&&(i=Tt.createElement(Tt.Fragment,null,n.map(s=>Tt.createElement(dS,{id:s,key:s}))));const o=Tt.createElement(e,t,i);return typeof e=="string"?Tt.createElement(One,{render:o}):o},[e,t,r,n])},Mne=({render:e})=>{const{hidden:t}=rv(r=>({hidden:r.data.hidden})),{onRender:n}=su(r=>({onRender:r.options.onRender}));return t?null:Tt.createElement(n,{render:e||Tt.createElement($ne,null)})},dS=({id:e,render:t})=>Tt.createElement(K4,{id:e},Tt.createElement(Mne,{render:t})),Cw={is:"div",canvas:!1,custom:{},hidden:!1},Dne={is:"type",canvas:"isCanvas"};function sa({id:e,children:t,...n}){const{is:r}={...Cw,...n},{query:i,actions:o}=su(),{id:s,inNodeContext:a}=rv(),[l]=j.useState(()=>{xn(!!e);const u=i.node(s).get();if(a){const d=u.data.linkedNodes[e]?i.node(u.data.linkedNodes[e]).get():null;if(d&&d.data.type===r)return d.id;const f=Tt.createElement(sa,n,t),h=i.parseReactElement(f).toNodeTree();return o.history.ignore().addLinkedNodeFromTree(h,s,e),h.rootNodeId}return null});return l?Tt.createElement(dS,{id:l}):null}const Z4=()=>Ka("<Canvas />",{suggest:"<Element canvas={true} />"});function jw({...e}){return j.useEffect(()=>Z4(),[]),Tt.createElement(sa,{...e,canvas:!0})}const Lne=()=>{const{timestamp:e}=su(t=>({timestamp:t.nodes[zs]&&t.nodes[zs]._hydrationTimestamp}));return e?Tt.createElement(dS,{id:zs,key:e}):null},fS=({children:e,json:t,data:n})=>{const{actions:r,query:i}=su();t&&Ka("<Frame json={...} />",{suggest:"<Frame data={...} />"});const o=j.useRef(!1);if(!o.current){const s=n||t;if(s)r.history.ignore().deserialize(s);else if(e){const a=Tt.Children.only(e),l=i.parseReactElement(a).toNodeTree((u,d)=>(d===a&&(u.id=zs),u));r.history.ignore().addNodeTree(l)}o.current=!0}return Tt.createElement(Lne,null)};var zj;(function(e){e[e.Any=0]="Any",e[e.Id=1]="Id",e[e.Obj=2]="Obj"})(zj||(zj={}));const hx=e=>{const{addLinkedNodeFromTree:t,setDOM:n,setNodeEvent:r,replaceNodes:i,reset:o,...s}=e;return s};function To(e){const{connectors:t,actions:n,query:r,store:i,...o}=su(e),s=hx(n);return{connectors:t,actions:j.useMemo(()=>({...s,history:{...s.history,ignore:(...a)=>hx(s.history.ignore(...a)),throttle:(...a)=>hx(s.history.throttle(...a))}}),[s]),query:r,store:i,...o}}var eO=function(e){return Object.fromEntries?Object.fromEntries(e):e.reduce(function(t,n){var r=G4(n,2),i=r[0],o=r[1];return Sn(Sn({},t),{},sr({},i,o))},{})},Is=function(e,t,n){var r=Array.isArray(t)?t:[t],i=Sn({existOnly:!1,idOnly:!1},n||{}),o=r.filter(function(s){return!!s}).map(function(s){return typeof s=="string"?{node:e[s],exists:!!e[s]}:Sw(s)!=="object"||i.idOnly?{node:null,exists:!1}:{node:s,exists:!!e[s.id]}});return i.existOnly&&xn(o.filter(function(s){return!s.exists}).length===0),o},Fne=["history"],vu=null,Em=function(e,t){if(typeof t=="string")return t;var n,r=function(i,o){var s=function(a){if(vu&&vu.resolver===a)return vu.reversed;vu={resolver:a,reversed:new Map};for(var l=0,u=Object.entries(a);l<u.length;l++){var d=G4(u[l],2);vu.reversed.set(d[1],d[0])}return vu.reversed}(i).get(o);return s!==void 0?s:null}(e,t);return xn(r,M4.replace("%node_type%",(n=t).name||n.displayName)),r};const Bne=(e,t)=>typeof e=="string"?e:{resolvedName:Em(t,e)},Aw=(e,t)=>{let{type:n,isCanvas:r,props:i}=e;return i=Object.keys(i).reduce((o,s)=>{const a=i[s];return a==null||typeof a=="function"||(o[s]=s==="children"&&typeof a!="string"?j.Children.map(a,l=>typeof l=="string"?l:Aw(l,t)):typeof a.type=="function"?Aw(a,t):a),o},{}),{type:Bne(n,t),isCanvas:!!r,props:i}},zne=(e,t)=>{const{type:n,props:r,isCanvas:i,name:o,...s}=e;return{...Aw({type:n,isCanvas:i,props:r},t),...s}};function Nw(e,t){xn(typeof t=="string");var n=e.nodes[t],r=function(i){return Nw(e,i)};return{isCanvas:function(){return!!n.data.isCanvas},isRoot:function(){return n.id===zs},isLinkedNode:function(){return n.data.parent&&r(n.data.parent).linkedNodes().includes(n.id)},isTopLevelNode:function(){return this.isRoot()||this.isLinkedNode()},isDeletable:function(){return!this.isTopLevelNode()},isParentOfTopLevelNodes:function(){return n.data.linkedNodes&&Object.keys(n.data.linkedNodes).length>0},isParentOfTopLevelCanvas:function(){return Ka("query.node(id).isParentOfTopLevelCanvas",{suggest:"query.node(id).isParentOfTopLevelNodes"}),this.isParentOfTopLevelNodes()},isSelected:function(){return e.events.selected.has(t)},isHovered:function(){return e.events.hovered.has(t)},isDragged:function(){return e.events.dragged.has(t)},get:function(){return n},ancestors:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return function o(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=e.nodes[s];return u?(a.push(s),u.data.parent&&(i||!i&&l===0)&&(a=o(u.data.parent,a,l+1)),a):a}(n.data.parent)},descendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return function s(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(i||!i&&u===0)&&e.nodes[a]&&(o!=="childNodes"&&r(a).linkedNodes().forEach(function(d){l.push(d),l=s(d,l,u+1)}),o!=="linkedNodes"&&r(a).childNodes().forEach(function(d){l.push(d),l=s(d,l,u+1)})),l}(t)},linkedNodes:function(){return Object.values(n.data.linkedNodes||{})},childNodes:function(){return n.data.nodes||[]},isDraggable:function(i){try{var o=n;return xn(!this.isTopLevelNode(),Ij),xn(Nw(e,o.data.parent).isCanvas(),Tj),xn(o.rules.canDrag(o,r),gne),!0}catch(s){return i&&i(s),!1}},isDroppable:function(i,o){var s=Is(e.nodes,i),a=n;try{xn(this.isCanvas(),hne),xn(a.rules.canMoveIn(s.map(function(u){return u.node}),a,r),dne);var l={};return s.forEach(function(u){var d=u.node,f=u.exists;if(xn(d.rules.canDrop(a,d,r),cne),f){xn(!r(d.id).isTopLevelNode(),Ij);var h=r(d.id).descendants(!0);xn(!h.includes(a.id)&&a.id!==d.id,pne);var p=d.data.parent&&e.nodes[d.data.parent];xn(p.data.isCanvas,Tj),xn(p||!p&&!e.nodes[d.id],une),p.id!==a.id&&(l[p.id]||(l[p.id]=[]),l[p.id].push(d))}}),Object.keys(l).forEach(function(u){var d=e.nodes[u];xn(d.rules.canMoveOut(l[u],d,r),fne)}),!0}catch(u){return o&&o(u),!1}},toSerializedNode:function(){return zne(n.data,e.options.resolver)},toNodeTree:function(i){var o=[t].concat(ih(this.descendants(!0,i))).reduce(function(s,a){return s[a]=r(a).get(),s},{});return{rootNodeId:t,nodes:o}},decendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return Ka("query.node(id).decendants",{suggest:"query.node(id).descendants"}),this.descendants(i)},isTopLevelCanvas:function(){return!this.isRoot()&&!n.data.parent}}}function tO(e,t,n,r){for(var i={parent:e,index:0,where:"before"},o=0,s=0,a=0,l=0,u=0,d=0,f=0,h=t.length;f<h;f++){var p=t[f];if(d=p.top+p.outerHeight,l=p.left+p.outerWidth/2,u=p.top+p.outerHeight/2,!(s&&p.left>s||a&&u>=a||o&&p.left+p.outerWidth<o))if(i.index=f,p.inFlow){if(r<u){i.where="before";break}i.where="after"}else r<d&&(a=d),n<l?(s=l,i.where="before"):(o=l,i.where="after")}return i}var Ip=function(e){return typeof e=="string"?e:e.name};function Hj(e,t){var n=e.data.type,r={id:e.id||H4(),_hydrationTimestamp:Date.now(),data:Sn({type:n,name:Ip(n),displayName:Ip(n),props:{},custom:{},parent:null,isCanvas:!1,hidden:!1,nodes:[],linkedNodes:{}},e.data),info:{},related:{},events:{selected:!1,dragged:!1,hovered:!1},rules:{canDrag:function(){return!0},canDrop:function(){return!0},canMoveIn:function(){return!0},canMoveOut:function(){return!0}},dom:null};if(r.data.type===sa||r.data.type===jw){var i=Sn(Sn({},Cw),r.data.props);r.data.props=Object.keys(r.data.props).reduce(function(a,l){return Object.keys(Cw).includes(l)?r.data[Dne[l]||l]=i[l]:a[l]=r.data.props[l],a},{}),r.data.name=Ip(n=r.data.type),r.data.displayName=Ip(n),r.data.type===jw&&(r.data.isCanvas=!0,Z4())}t&&t(r);var o=n.craft;if(o){if(r.data.displayName=o.displayName||o.name||r.data.displayName,r.data.props=Sn(Sn({},o.props||o.defaultProps||{}),r.data.props),r.data.custom=Sn(Sn({},o.custom||{}),r.data.custom),o.isCanvas!=null&&(r.data.isCanvas=o.isCanvas),o.rules&&Object.keys(o.rules).forEach(function(a){["canDrag","canDrop","canMoveIn","canMoveOut"].includes(a)&&(r.rules[a]=o.rules[a])}),o.related){var s={id:r.id,related:!0};Object.keys(o.related).forEach(function(a){r.related[a]=function(l){return Tt.createElement(K4,s,Tt.createElement(o.related[a],l))}})}o.info&&(r.info=o.info)}return r}const Rw=(e,t,n)=>{let{type:r,props:i}=e;const o=((a,l)=>typeof a=="object"&&a.resolvedName?a.resolvedName==="Canvas"?jw:l[a.resolvedName]:typeof a=="string"?a:null)(r,t);if(!o)return;i=Object.keys(i).reduce((a,l)=>{const u=i[l];return a[l]=u==null?null:typeof u=="object"&&u.resolvedName?Rw(u,t):l==="children"&&Array.isArray(u)?u.map(d=>typeof d=="string"?d:Rw(d,t)):u,a},{});const s={...Tt.createElement(o,{...i})};return{...s,name:Em(t,s.type)}},Hne=(e,t)=>{const{type:n,props:r,...i}=e;xn(n!==void 0&&typeof n=="string"||n!==void 0&&n.resolvedName!==void 0,mne.replace("%displayName%",e.displayName).replace("%availableComponents%",Object.keys(t).join(", ")));const{type:o,name:s,props:a}=Rw(e,t),{parent:l,custom:u,displayName:d,isCanvas:f,nodes:h,hidden:p}=i;return{type:o,name:s,displayName:d||s,props:a,custom:u||{},isCanvas:!!f,hidden:!!p,parent:l,linkedNodes:i.linkedNodes||i._childCanvas||{},nodes:h||[]}},Wne=(e,t)=>{if(t.length<1)return{[e.id]:e};const n=t.map(({rootNodeId:i})=>i),r={...e,data:{...e.data,nodes:n}};return t.reduce((i,o)=>{const s=o.nodes[o.rootNodeId];return{...i,...o.nodes,[s.id]:{...s,data:{...s.data,parent:e.id}}}},{[e.id]:r})},Une=(e,t)=>({rootNodeId:e.id,nodes:Wne(e,t)});function nO(e){const t=e&&e.options,n=()=>nO(e);return{getDropPlaceholder:(r,i,o,s=a=>e.nodes[a.id].dom)=>{const a=e.nodes[i],l=n().node(a.id).isCanvas()?a:e.nodes[a.data.parent];if(!l)return;const u=l.data.nodes||[],d=tO(l,u?u.reduce((p,v)=>{const y=s(e.nodes[v]);if(y){const w={id:v,...rh(y)};p.push(w)}return p},[]):[],o.x,o.y),f=u.length&&e.nodes[u[d.index]],h={placement:{...d,currentNode:f},error:null};return Is(e.nodes,r).forEach(({node:p,exists:v})=>{v&&n().node(p.id).isDraggable(y=>h.error=y)}),n().node(l.id).isDroppable(r,p=>h.error=p),h},getOptions:()=>t,getNodes:()=>e.nodes,node:r=>Nw(e,r),getSerializedNodes(){const r=Object.keys(e.nodes).map(i=>[i,this.node(i).toSerializedNode()]);return eO(r)},getEvent:r=>function(i,o){var s=i.events[o];return{contains:function(a){return s.has(a)},isEmpty:function(){return this.all().length===0},first:function(){return this.all()[0]},last:function(){var a=this.all();return a[a.length-1]},all:function(){return Array.from(s)},size:function(){return this.all().length},at:function(a){return this.all()[a]},raw:function(){return s}}}(e,r),serialize(){return JSON.stringify(this.getSerializedNodes())},parseReactElement:r=>({toNodeTree(i){let o=function(a,l){let u=a;return typeof u=="string"&&(u=Tt.createElement(j.Fragment,{},u)),Hj({data:{type:u.type,props:{...u.props}}},d=>{l&&l(d,u)})}(r,(a,l)=>{const u=Em(e.options.resolver,a.data.type);a.data.displayName=a.data.displayName||u,a.data.name=u,i&&i(a,l)}),s=[];return r.props&&r.props.children&&(s=Tt.Children.toArray(r.props.children).reduce((a,l)=>(Tt.isValidElement(l)&&a.push(n().parseReactElement(l).toNodeTree(i)),a),[])),Une(o,s)}}),parseSerializedNode:r=>({toNode(i){const o=Hne(r,e.options.resolver);xn(o.type);const s=typeof i=="string"&&i;return s&&Ka("query.parseSerializedNode(...).toNode(id)",{suggest:"query.parseSerializedNode(...).toNode(node => node.id = id)"}),n().parseFreshNode({...s?{id:s}:{},data:o}).toNode(!s&&i)}}),parseFreshNode:r=>({toNode:i=>Hj(r,o=>{o.data.parent===$4&&(o.data.parent=zs);const s=Em(e.options.resolver,o.data.type);xn(s!==null),o.data.displayName=o.data.displayName||s,o.data.name=s,i&&i(o)})}),createNode(r,i){Ka("query.createNode(".concat(r,")"),{suggest:"query.parseReactElement(".concat(r,").toNodeTree()")});const o=this.parseReactElement(r).toNodeTree(),s=o.nodes[o.rootNodeId];return i&&(i.id&&(s.id=i.id),i.data&&(s.data={...s.data,...i.data})),s},getState:()=>e}}var Vne=function(e){aS(n,W4);var t=uS(n);function n(){return tv(this,n),t.apply(this,arguments)}return nv(n,[{key:"handlers",value:function(){return{connect:function(r,i){},select:function(r,i){},hover:function(r,i){},drag:function(r,i){},drop:function(r,i){},create:function(r,i,o){}}}}]),n}();(function(e){aS(n,Ene);var t=uS(n);function n(){return tv(this,n),t.apply(this,arguments)}return nv(n)})();var Wj=function(e){e.preventDefault()},Tw=function(){function e(t,n){tv(this,e),sr(this,"store",void 0),sr(this,"dragTarget",void 0),sr(this,"currentDropTargetId",void 0),sr(this,"currentDropTargetCanvasAncestorId",void 0),sr(this,"currentIndicator",null),sr(this,"currentTargetId",void 0),sr(this,"currentTargetChildDimensions",void 0),sr(this,"dragError",void 0),sr(this,"draggedNodes",void 0),sr(this,"onScrollListener",void 0),this.store=t,this.dragTarget=n,this.currentDropTargetId=null,this.currentDropTargetCanvasAncestorId=null,this.currentTargetId=null,this.currentTargetChildDimensions=null,this.currentIndicator=null,this.dragError=null,this.draggedNodes=this.getDraggedNodes(),this.validateDraggedNodes(),this.onScrollListener=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollListener,!0),window.addEventListener("dragover",Wj,!1)}return nv(e,[{key:"cleanup",value:function(){window.removeEventListener("scroll",this.onScrollListener,!0),window.removeEventListener("dragover",Wj,!1)}},{key:"onScroll",value:function(t){var n=t.target,r=this.store.query.node(zs).get();n instanceof Element&&r&&r.dom&&n.contains(r.dom)&&(this.currentTargetChildDimensions=null)}},{key:"getDraggedNodes",value:function(){return Is(this.store.query.getNodes(),this.dragTarget.type==="new"?this.dragTarget.tree.nodes[this.dragTarget.tree.rootNodeId]:this.dragTarget.nodes)}},{key:"validateDraggedNodes",value:function(){var t=this;this.dragTarget.type!=="new"&&this.draggedNodes.forEach(function(n){n.exists&&t.store.query.node(n.node.id).isDraggable(function(r){t.dragError=r})})}},{key:"isNearBorders",value:function(t,n,r){return t.top+e.BORDER_OFFSET>r||t.bottom-e.BORDER_OFFSET<r||t.left+e.BORDER_OFFSET>n||t.right-e.BORDER_OFFSET<n}},{key:"isDiff",value:function(t){return!this.currentIndicator||this.currentIndicator.placement.parent.id!==t.parent.id||this.currentIndicator.placement.index!==t.index||this.currentIndicator.placement.where!==t.where}},{key:"getChildDimensions",value:function(t){var n=this,r=this.currentTargetChildDimensions;return this.currentTargetId===t.id&&r?r:t.data.nodes.reduce(function(i,o){var s=n.store.query.node(o).get().dom;return s&&i.push(Sn({id:o},rh(s))),i},[])}},{key:"getCanvasAncestor",value:function(t){var n=this;if(t===this.currentDropTargetId&&this.currentDropTargetCanvasAncestorId){var r=this.store.query.node(this.currentDropTargetCanvasAncestorId).get();if(r)return r}return function i(o){var s=n.store.query.node(o).get();return s&&s.data.isCanvas?s:s.data.parent?i(s.data.parent):null}(t)}},{key:"computeIndicator",value:function(t,n,r){var i=this.getCanvasAncestor(t);if(i&&(this.currentDropTargetId=t,this.currentDropTargetCanvasAncestorId=i.id,i.data.parent&&this.isNearBorders(rh(i.dom),n,r)&&!this.store.query.node(i.id).isLinkedNode()&&(i=this.store.query.node(i.data.parent).get()),i)){this.currentTargetChildDimensions=this.getChildDimensions(i),this.currentTargetId=i.id;var o=tO(i,this.currentTargetChildDimensions,n,r);if(this.isDiff(o)){var s=this.dragError;s||this.store.query.node(i.id).isDroppable(this.draggedNodes.map(function(u){return u.node}),function(u){s=u});var a=i.data.nodes[o.index],l=a&&this.store.query.node(a).get();return this.currentIndicator={placement:Sn(Sn({},o),{},{currentNode:l}),error:s},this.currentIndicator}}}},{key:"getIndicator",value:function(){return this.currentIndicator}}]),e}();sr(Tw,"BORDER_OFFSET",10);var Uj=function(e,t){if(t.length===1||arguments.length>2&&arguments[2]!==void 0&&arguments[2]){var n=t[0].getBoundingClientRect(),r=n.width,i=n.height,o=t[0].cloneNode(!0);return o.style.position="absolute",o.style.left="-100%",o.style.top="-100%",o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.pointerEvents="none",o.classList.add("drag-shadow"),document.body.appendChild(o),e.dataTransfer.setDragImage(o,0,0),o}var s=document.createElement("div");return s.style.position="absolute",s.style.left="-100%",s.style.top="-100%",s.style.width="100%",s.style.height="100%",s.style.pointerEvents="none",s.classList.add("drag-shadow-container"),t.forEach(function(a){var l=a.getBoundingClientRect(),u=l.width,d=l.height,f=l.top,h=l.left,p=a.cloneNode(!0);p.style.position="absolute",p.style.left="".concat(h,"px"),p.style.top="".concat(f,"px"),p.style.width="".concat(u,"px"),p.style.height="".concat(d,"px"),p.classList.add("drag-shadow"),s.appendChild(p)}),document.body.appendChild(s),e.dataTransfer.setDragImage(s,e.clientX,e.clientY),s},rO=function(e){aS(n,Vne);var t=uS(n);function n(){var r;tv(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return sr(Md(r=t.call.apply(t,[this].concat(o))),"draggedElementShadow",void 0),sr(Md(r),"dragTarget",void 0),sr(Md(r),"positioner",null),sr(Md(r),"currentSelectedElementIds",[]),r}return nv(n,[{key:"onDisable",value:function(){this.options.store.actions.clearEvents()}},{key:"handlers",value:function(){var r=this,i=this.options.store;return{connect:function(o,s){return i.actions.setDOM(s,o),r.reflect(function(a){a.select(o,s),a.hover(o,s),a.drop(o,s)})},select:function(o,s){var a=r.addCraftEventListener(o,"mousedown",function(u){u.craft.stopPropagation();var d=[];if(s){var f=i.query,h=f.getEvent("selected").all();(r.options.isMultiSelectEnabled(u)||h.includes(s))&&(d=h.filter(function(p){var v=f.node(p).descendants(!0),y=f.node(p).ancestors(!0);return!v.includes(s)&&!y.includes(s)})),d.includes(s)||d.push(s)}i.actions.setNodeEvent("selected",d)}),l=r.addCraftEventListener(o,"click",function(u){u.craft.stopPropagation();var d=i.query.getEvent("selected").all(),f=r.options.isMultiSelectEnabled(u),h=r.currentSelectedElementIds.includes(s),p=ih(d);f&&h?(p.splice(p.indexOf(s),1),i.actions.setNodeEvent("selected",p)):!f&&d.length>1&&i.actions.setNodeEvent("selected",p=[s]),r.currentSelectedElementIds=p});return function(){a(),l()}},hover:function(o,s){var a=r.addCraftEventListener(o,"mouseover",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",s)}),l=null;return r.options.removeHoverOnMouseleave&&(l=r.addCraftEventListener(o,"mouseleave",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",null)})),function(){a(),l&&l()}},drop:function(o,s){var a=r.addCraftEventListener(o,"dragover",function(u){if(u.craft.stopPropagation(),u.preventDefault(),r.positioner){var d=r.positioner.computeIndicator(s,u.clientX,u.clientY);d&&i.actions.setIndicator(d)}}),l=r.addCraftEventListener(o,"dragenter",function(u){u.craft.stopPropagation(),u.preventDefault()});return function(){l(),a()}},drag:function(o,s){if(!i.query.node(s).isDraggable())return function(){};o.setAttribute("draggable","true");var a=r.addCraftEventListener(o,"dragstart",function(u){u.craft.stopPropagation();var d=i.query,f=i.actions,h=d.getEvent("selected").all(),p=r.options.isMultiSelectEnabled(u);r.currentSelectedElementIds.includes(s)||(h=p?[].concat(ih(h),[s]):[s],i.actions.setNodeEvent("selected",h)),f.setNodeEvent("dragged",h);var v=h.map(function(y){return d.node(y).get().dom});r.draggedElementShadow=Uj(u,v,n.forceSingleDragShadow),r.dragTarget={type:"existing",nodes:h},r.positioner=new Tw(r.options.store,r.dragTarget)}),l=r.addCraftEventListener(o,"dragend",function(u){u.craft.stopPropagation(),r.dropElement(function(d,f){d.type!=="new"&&i.actions.move(d.nodes,f.placement.parent.id,f.placement.index+(f.placement.where==="after"?1:0))})});return function(){o.setAttribute("draggable","false"),a(),l()}},create:function(o,s,a){o.setAttribute("draggable","true");var l=r.addCraftEventListener(o,"dragstart",function(d){var f;if(d.craft.stopPropagation(),typeof s=="function"){var h=s();f=Tt.isValidElement(h)?i.query.parseReactElement(h).toNodeTree():h}else f=i.query.parseReactElement(s).toNodeTree();r.draggedElementShadow=Uj(d,[d.currentTarget],n.forceSingleDragShadow),r.dragTarget={type:"new",tree:f},r.positioner=new Tw(r.options.store,r.dragTarget)}),u=r.addCraftEventListener(o,"dragend",function(d){d.craft.stopPropagation(),r.dropElement(function(f,h){f.type!=="existing"&&(i.actions.addNodeTree(f.tree,h.placement.parent.id,h.placement.index+(h.placement.where==="after"?1:0)),a&&DX(a.onCreate)&&a.onCreate(f.tree))})});return function(){o.removeAttribute("draggable"),l(),u()}}}}},{key:"dropElement",value:function(r){var i=this.options.store;if(this.positioner){var o=this.draggedElementShadow,s=this.positioner.getIndicator();this.dragTarget&&s&&!s.error&&r(this.dragTarget,s),o&&(o.parentNode.removeChild(o),this.draggedElementShadow=null),this.dragTarget=null,i.actions.setIndicator(null),i.actions.setNodeEvent("dragged",null),this.positioner.cleanup(),this.positioner=null}}}]),n}();function qne(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,i=0,o=0,s=0,a=0,l=e.where;return n?n.inFlow?(s=n.outerWidth,a=r,i=l==="before"?n.top:n.bottom,o=n.left):(s=r,a=n.outerHeight,i=n.top,o=l==="before"?n.left:n.left+n.outerWidth):t&&(i=t.top+t.padding.top,o=t.left+t.padding.left,s=t.outerWidth-t.padding.right-t.padding.left-t.margin.left-t.margin.right,a=r),{top:"".concat(i,"px"),left:"".concat(o,"px"),width:"".concat(s,"px"),height:"".concat(a,"px")}}sr(rO,"forceSingleDragShadow",Nne()&&Ane());const Kne=()=>{var i;const{indicator:e,indicatorOptions:t,enabled:n}=su(o=>({indicator:o.indicator,indicatorOptions:o.options.indicator,enabled:o.options.enabled})),r=Q4();return j.useEffect(()=>{r&&(n?r.enable():r.disable())},[n,r]),e?Tt.createElement(jne,{className:t.className,style:{...qne(e.placement,rh(e.placement.parent.dom),e.placement.currentNode&&rh(e.placement.currentNode.dom),t.thickness),backgroundColor:e.error?t.error:t.success,transition:t.transition||"0.2s ease-in",...(i=t.style)!=null?i:{}},parentDom:e.placement.parent.dom}):null},Gne=({children:e})=>{const t=j.useContext(cS),n=j.useMemo(()=>t.query.getOptions().handlers(t),[t]);return n?Tt.createElement(J4.Provider,{value:n},Tt.createElement(Kne,null),e):null},Vj={nodes:{},events:{dragged:new Set,selected:new Set,hovered:new Set},indicator:null,options:{onNodesChange:()=>null,onRender:({render:e})=>e,onBeforeMoveEnd:()=>null,resolver:{},enabled:!0,indicator:{error:"red",success:"rgb(98, 196, 98)"},handlers:e=>new rO({store:e,removeHoverOnMouseleave:!1,isMultiSelectEnabled:t=>!!t.metaKey}),normalizeNodes:()=>{}}},Yne={methods:function(e,t){return Sn(Sn({},function(n,r){var i=function(a,l,u){if(function h(p,v){var y=a.nodes[p];typeof y.data.type!="string"&&xn(n.options.resolver[y.data.name],M4.replace("%node_type%","".concat(y.data.type.name))),n.nodes[p]=Sn(Sn({},y),{},{data:Sn(Sn({},y.data),{},{parent:v})}),y.data.nodes.length>0&&(delete n.nodes[p].data.props.children,y.data.nodes.forEach(function(w){return h(w,y.id)})),Object.values(y.data.linkedNodes).forEach(function(w){return h(w,y.id)})}(a.rootNodeId,l),l||a.rootNodeId!==zs){var d=o(l);if(u.type!=="child")d.data.linkedNodes[u.id]=a.rootNodeId;else{var f=u.index;f!=null?d.data.nodes.splice(f,0,a.rootNodeId):d.data.nodes.push(a.rootNodeId)}}},o=function(a){xn(a);var l=n.nodes[a];return xn(l),l},s=function a(l){var u=n.nodes[l],d=n.nodes[u.data.parent];if(u.data.nodes&&ih(u.data.nodes).forEach(function(p){return a(p)}),u.data.linkedNodes&&Object.values(u.data.linkedNodes).map(function(p){return a(p)}),d.data.nodes.includes(l)){var f=d.data.nodes;f.splice(f.indexOf(l),1)}else{var h=Object.keys(d.data.linkedNodes).find(function(p){return d.data.linkedNodes[p]===p});h&&delete d.data.linkedNodes[h]}(function(p,v){Object.keys(p.events).forEach(function(y){var w=p.events[y];w&&w.has&&w.has(v)&&(p.events[y]=new Set(Array.from(w).filter(function(x){return v!==x})))})})(n,l),delete n.nodes[l]};return{addLinkedNodeFromTree:function(a,l,u){var d=o(l).data.linkedNodes[u];d&&s(d),i(a,l,{type:"linked",id:u})},add:function(a,l,u){var d=[a];Array.isArray(a)&&(Ka("actions.add(node: Node[])",{suggest:"actions.add(node: Node)"}),d=a),d.forEach(function(f){i({nodes:sr({},f.id,f),rootNodeId:f.id},l,{type:"child",index:u})})},addNodeTree:function(a,l,u){i(a,l,{type:"child",index:u})},delete:function(a){Is(n.nodes,a,{existOnly:!0,idOnly:!0}).forEach(function(l){var u=l.node;xn(!r.node(u.id).isTopLevelNode()),s(u.id)})},deserialize:function(a){var l=typeof a=="string"?JSON.parse(a):a,u=Object.keys(l).map(function(d){var f=d;return d===$4&&(f=zs),[f,r.parseSerializedNode(l[d]).toNode(function(h){return h.id=f})]});this.replaceNodes(eO(u))},move:function(a,l,u){var d=Is(n.nodes,a,{existOnly:!0}),f=n.nodes[l],h=new Set;d.forEach(function(p,v){var y=p.node,w=y.id,x=y.data.parent;r.node(l).isDroppable([w],function(S){throw new Error(S)}),n.options.onBeforeMoveEnd(y,f,n.nodes[x]);var b=n.nodes[x].data.nodes;h.add(b);var m=b.indexOf(w);b[m]="$$",f.data.nodes.splice(u+v,0,w),n.nodes[w].data.parent=l}),h.forEach(function(p){var v=p.length;ih(p).reverse().forEach(function(y,w){y==="$$"&&p.splice(v-1-w,1)})})},replaceNodes:function(a){this.clearEvents(),n.nodes=a},clearEvents:function(){this.setNodeEvent("selected",null),this.setNodeEvent("hovered",null),this.setNodeEvent("dragged",null),this.setIndicator(null)},reset:function(){this.clearEvents(),this.replaceNodes({})},setOptions:function(a){a(n.options)},setNodeEvent:function(a,l){if(n.events[a].forEach(function(f){n.nodes[f]&&(n.nodes[f].events[a]=!1)}),n.events[a]=new Set,l){var u=Is(n.nodes,l,{idOnly:!0,existOnly:!0}),d=new Set(u.map(function(f){return f.node.id}));d.forEach(function(f){n.nodes[f].events[a]=!0}),n.events[a]=d}},setCustom:function(a,l){Is(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.custom)})},setDOM:function(a,l){n.nodes[a]&&(n.nodes[a].dom=l)},setIndicator:function(a){a&&(!a.placement.parent.dom||a.placement.currentNode&&!a.placement.currentNode.dom)||(n.indicator=a)},setHidden:function(a,l){n.nodes[a].data.hidden=l},setProp:function(a,l){Is(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.props)})},selectNode:function(a){if(a){var l=Is(n.nodes,a,{idOnly:!0,existOnly:!0});this.setNodeEvent("selected",l.map(function(u){return u.node.id}))}else this.setNodeEvent("selected",null);this.setNodeEvent("hovered",null)}}}(e,t)),{},{setState:function(n){var r=lS(this,Fne);n(e,r)}})},ignoreHistoryForActions:["setDOM","setNodeEvent","selectNode","clearEvents","setOptions","setIndicator"],normalizeHistory:e=>{Object.keys(e.events).forEach(t=>{Array.from(e.events[t]||[]).forEach(n=>{e.nodes[n]||e.events[t].delete(n)})}),Object.keys(e.nodes).forEach(t=>{const n=e.nodes[t];Object.keys(n.events).forEach(r=>{n.events[r]&&e.events[r]&&!e.events[r].has(n.id)&&(n.events[r]=!1)})})}},Xne=(e,t)=>xne(Yne,{...Vj,options:{...Vj.options,...e}},nO,t),Jne=({children:e,...t})=>{t.resolver!==void 0&&xn(typeof t.resolver=="object"&&!Array.isArray(t.resolver)&&t.resolver!==null);const n=j.useRef(t),r=Xne(n.current,(i,o,s,a,l)=>{if(!s)return;const{patches:u,...d}=s;for(let f=0;f<u.length;f++){const{path:h}=u[f],p=h.length>2&&h[0]==="nodes"&&h[2]==="data";if([Ln.IGNORE,Ln.THROTTLE].includes(d.type)&&d.params&&(d.type=d.params[0]),["setState","deserialize"].includes(d.type)||p){l(v=>{i.options.normalizeNodes&&i.options.normalizeNodes(v,o,d,a)});break}}});return j.useEffect(()=>{r&&t.enabled!==void 0&&r.query.getOptions().enabled!==t.enabled&&r.actions.setOptions(i=>{i.enabled=t.enabled})},[r,t.enabled]),j.useEffect(()=>{r.subscribe(i=>({json:r.query.serialize()}),()=>{r.query.getOptions().onNodesChange(r.query)})},[r]),r?j.createElement(cS.Provider,{value:r},j.createElement(Gne,null,e)):null};function Sc(){const{connectors:{connect:e,drag:t}}=oi();return c.jsx("div",{ref:n=>e(t(n)),style:{height:1,width:"100%",backgroundColor:"white"}})}function Qne(e){return c.jsx("div",{style:{height:1,width:"100%",backgroundColor:"white"}})}function Zne(){const{actions:{setProp:e}}=oi(t=>({}));return c.jsx("div",{})}Sc.craft={rules:{canDrag:e=>e.data.props.text!=="Drag"},related:{settings:Zne}};const hS=({filters:e,placeholder:t,onSearch:n})=>{const[r,i]=j.useState(!1);return c.jsx("form",{className:"bg-fantasy-glass rounded-lg border border-fantasy-border",children:c.jsxs("div",{className:"flex relative",children:[c.jsx("label",{htmlFor:"search-dropdown",className:"sr-only",children:"Search"}),c.jsxs("div",{className:"flex relative w-full",children:[c.jsxs("button",{type:"submit",className:"p-2.5 text-sm font-medium h-full text-fantasy-text",children:[c.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),c.jsx("span",{className:"sr-only",children:"Search"})]}),c.jsx("input",{type:"search",id:"search-dropdown",className:"block p-2.5 w-full bg-transparent z-20 text-sm text-fantasy-text placeholder:text-fantasy-text-muted focus:ring-fantasy-accent focus:ring-1 focus:outline-none focus:ring-fantasy-accent-dark",placeholder:t})]}),c.jsxs("button",{id:"dropdown-button",className:"shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center rounded-e-lg border-l border-fantasy-medium hover:bg-fantasy-light focus:ring-1 focus:outline-none focus:ring-fantasy-accent-dark",type:"button",onClick:()=>i(!r),children:["All"," ",c.jsx("svg",{className:"w-2.5 h-2.5 ms-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),c.jsx("div",{id:"dropdown",className:"".concat(r?"":"hidden"," absolute top-full end-0 mt-3 z-10 bg-neutral-50 divide-y divide-neutral-100 rounded-lg shadow-sm w-44"),children:c.jsx("ul",{className:"py-2 text-sm text-neutral-700 dark:text-neutral-200","aria-labelledby":"dropdown-button",children:e.map(o=>c.jsx("li",{children:c.jsx("button",{type:"button",className:"inline-flex w-full px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-neutral-50",children:o.title})},o.title))})})]})})};function Ec({placeholder:e}){const{connectors:{connect:t,drag:n}}=oi();return c.jsx("div",{ref:r=>t(n(r)),children:c.jsx(hS,{filters:[],placeholder:e,onSearch:()=>{}})})}function ere(){return c.jsx(hS,{filters:[],placeholder:"testing",onSearch:()=>{}})}function tre(){const{actions:{setProp:e},placeholder:t,blueprint:n}=oi(r=>({placeholder:r.data.props.placeholder,blueprint:r.data.props.blueprint}));return c.jsx(c.Fragment,{children:c.jsx(Vt,{id:"searchbar-placeholder",label:"Placeholder",value:t,onChange:r=>e(i=>i.placeholder=r),isValid:!0,errorMessage:""})})}Ec.craft={rules:{},related:{settings:tre}};function nre({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const[o,s]=j.useState(""),[a,l]=j.useState(""),[u,d]=j.useState({nodes:[],edges:[]});return j.useEffect(()=>{e&&(s(e.name),l(e.icon),d(e.blueprint))},[e]),c.jsxs(Wn,{isOpen:t,onClose:n,children:[c.jsx(Vn,{title:"Edit Button State",onClose:n}),c.jsxs(Un,{children:[c.jsx(Vt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:o,onChange:f=>s(f),isValid:!0,errorMessage:"Names must be unique"}),c.jsx("p",{onClick:()=>At("blueprint",({id:f})=>c.jsx(ei,{id:f,data:u,onSave:h=>d(h)})),children:"On Click Action"})]}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),c.jsx(xt,{color:"primary",onClick:()=>{r({name:o,icon:a,blueprint:u}),n()},children:"Update"})]})]})}const au=j.forwardRef(({buttons:e,onClick:t,isOpen:n=!1},r)=>c.jsxs("div",{className:"absolute right-6 bottom-6 group",ref:r,children:[c.jsx("div",{className:"".concat(n?"flex":"hidden"," flex-col items-center mb-4 space-y-2"),children:e==null?void 0:e.map(i=>c.jsxs("button",{onClick:i.onClick,type:"button",className:"relative w-[52px] h-[52px] text-neutral-500 bg-white rounded-lg border border-neutral-200 hover:text-neutral-900 dark:border-neutral-600 shadow-sm dark:hover:text-white dark:text-neutral-400 hover:bg-neutral-50 dark:bg-neutral-700 dark:hover:bg-neutral-600 focus:ring-4 focus:ring-neutral-300 focus:outline-none dark:focus:ring-neutral-400",children:[c.jsx("svg",{className:"w-5 h-5 mx-auto","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:c.jsx("path",{d:"M14.419 10.581a3.564 3.564 0 0 0-2.574 1.1l-4.756-2.49a3.54 3.54 0 0 0 .072-.71 3.55 3.55 0 0 0-.043-.428L11.67 6.1a3.56 3.56 0 1 0-.831-2.265c.006.143.02.286.043.428L6.33 6.218a3.573 3.573 0 1 0-.175 4.743l4.756 2.491a3.58 3.58 0 1 0 3.508-2.871Z"})}),c.jsx("span",{className:"absolute block mb-px text-sm font-medium -translate-x-[100%] -translate-y-1/2 -start-3 top-1/2 shadow-black",children:i.name})]},i.name))}),c.jsxs("button",{id:"floating-action-button",onClick:()=>t?t():null,type:"button",className:"flex items-center justify-center border border-fantasy-border text-fantasy-text bg-fantasy-glass rounded-lg w-14 h-14 transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40",children:[c.jsx("svg",{className:"".concat(!t&&"group-hover:rotate-45 transition-transform"," w-5 h-5"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Open actions menu"})]})]}));function kc({buttons:e}){const{connectors:{connect:t,drag:n}}=oi();return c.jsx(au,{ref:r=>t(n(r)),buttons:e==null?void 0:e.map(r=>({name:r.name,icon:r.icon,onClick:()=>{}})),isOpen:!0})}function rre({blueprint:e,isList:t,buttons:n,state:r,updateState:i}){const o=Fc(),[s,a]=j.useState(!1),l=j.useCallback(()=>{if(t)return a(!s);new jo(e).processBlueprint(o,r,i)},[e,o,r,i,s,t]);return c.jsx(au,{isOpen:s,onClick:l,buttons:n==null?void 0:n.map(u=>({name:u.name,icon:u.icon,onClick:()=>new jo(u.blueprint).processBlueprint(o,r,i)}))})}function ire(){const{actions:{setProp:e},isList:t,buttons:n,blueprint:r}=oi(s=>({isList:s.data.props.isList,buttons:s.data.props.buttons,blueprint:s.data.props.blueprint})),[i,o]=j.useState(null);return c.jsxs("div",{children:[c.jsx(tr,{id:"isList",label:"is List?",checked:t,onChange:s=>e(a=>a.isList=s)}),t?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsx("h5",{style:{marginLeft:10},children:"Buttons"}),c.jsx("div",{children:c.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:()=>e(s=>(s.buttons.find(a=>a.name==="new button")||s.buttons.push({name:"new button",icon:"",blueprint:{nodes:dr(),edges:[]}}),s)),children:[c.jsx("svg",{className:"group-hover:rotate-45 transition-transform w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Icon description"})]})})]}),c.jsx(Bc,{}),n.map(s=>c.jsx("p",{onClick:()=>o(s),children:s.name},s.name)),c.jsx(nre,{data:i,isOpen:i!==null,requestClose:()=>o(null),onSave:s=>e(a=>{for(let l=0;l<a.buttons.length;l++)a.buttons[l].name===i.name&&(a.buttons[l]=s);return a}),onDelete:()=>e(s=>s.buttons=s.buttons.filter(a=>a.name!==i.name))})]}):c.jsx("p",{onClick:()=>At("blueprint",({id:s})=>c.jsx(ei,{id:s,data:r,onSave:a=>e(l=>l.blueprint=a)})),children:"On Click"})]})}const ore={defaultProps:{isList:!1,buttons:[],blueprint:{nodes:dr(),edges:[]}},related:{settings:ire}};kc.craft=ore;const sre=e=>{const t=Fc(),[n,r]=j.useState("default"),i=j.useMemo(()=>{var l;return e.dynamicOptions?(l=new jo(e.optionsBlueprint).processBlueprint(t,e.state,e.updateState))!=null?l:[]:e.options},[t,e.state,e.updateState]),o=j.useCallback(s=>{new jo(e.onChange).processBlueprint({...t,selectedValue:s},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return c.jsxs(ct,{style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,value:n,onChange:s=>{r(s),o(i.find(a=>a.name===s))},children:[c.jsx("option",{disabled:!0,value:"default",children:"Select an option..."}),i.map(s=>c.jsx("option",{value:s.name,children:s.name},s.name))]})},are=e=>{const t=Fc(),n=j.useMemo(()=>new jo(e.getValue).processBlueprint(t,e.state,e.updateState),[e.getValue,t,e.state,e.updateState]),r=j.useCallback(i=>{new jo(e.onChange).processBlueprint({...t,"field value":i},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return c.jsx(Vt,{style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,value:n,onChange:i=>r(i),isValid:!0,errorMessage:""})},iO=({data:e,style:t,state:n,updateState:r})=>c.jsx("div",{style:t,children:c.jsx(hI,{localData:[],children:c.jsx(oO,{node:e.ROOT,data:e,state:n,updateState:r})})}),oO=({node:e,data:t,state:n,updateState:r})=>{const i=typeof e.type=="object"?e.type.resolvedName:e.type,o=e.nodes.map(s=>c.jsx(oO,{node:t[s],data:t,state:n,updateState:r},s));switch(i){case"Container":return c.jsx(yY,{...e.props,state:n,updateState:r,children:o});case"Text":return c.jsx(vY,{...e.props,state:n,updateState:r});case"DesignerDivider":return c.jsx(Qne,{...e.props,state:n,updateState:r});case"FAB":return c.jsx(rre,{...e.props,state:n,updateState:r});case"Select":return c.jsx(sre,{...e.props,state:n,updateState:r});case"TextInput":return c.jsx(are,{...e.props,state:n,updateState:r});case"Searchbar":return c.jsx(ere,{});default:return c.jsxs("h1",{children:["No component for type ",i]})}};function sO(){const e=oo(async()=>(await et.characters.toArray()).filter(n=>!n.deleted_at),[]);return{characters:e||[],isLoading:e===void 0}}const aO=Ge.object({id:Ge.string({invalid_type_error:"id must be a string"}).optional(),local_id:Ge.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:Ge.string({invalid_type_error:"user_id must be a string"}),name:Ge.string(),data:Ge.object({}),system:Ge.object({local_id:Ge.string(),version_id:Ge.string()}),version:Ge.string().optional(),datapacks:Ge.array(Ge.object({pack_id:Ge.string(),version_id:Ge.string()})),created_at:Ge.string().datetime({offset:!0}),updated_at:Ge.string().datetime({offset:!0}),deleted_at:Ge.string().datetime({offset:!0}).optional()}),lre=async(e,t,n,r)=>{try{const{user:i}=rr.get(),o=(i==null?void 0:i.id)||"none";let s=await dn();for(;!await Zr(s);)s=await dn();const a={local_id:s,user_id:o,name:e,data:t,system:n,datapacks:r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},l=aO.safeParse(a);if(!l.success){console.log("Invalid character data:",l.error.format());return}let u=await hn.get("updated_characters")||[];return u.includes(a.local_id)||await hn.set("updated_characters",[...u,a.local_id]),await et.characters.add(a)}catch(i){cn("Error creating Character.","error"),console.log("Error creating character:",i)}},ure=async(e,t)=>{try{let n=await hn.get("updated_characters")||[];return n.includes(e)||await hn.set("updated_characters",[...n,e]),await et.characters.update(e,{name:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error renaming character:",n)}},cre=async(e,t)=>{try{let n=await hn.get("updated_characters")||[];return n.includes(e)||await hn.set("updated_characters",[...n,e]),await et.characters.update(e,{data:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error updating character data:",n)}},dre=async e=>{try{let t=await hn.get("updated_characters")||[];return t.includes(e)||await hn.set("updated_characters",[...t,e]),await et.characters.update(e,{deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(t){console.log("Error deleting character:",t)}},fre=async e=>{try{let t=e.local_id||"deviceId-".concat(y1());if(await et.characters.get({id:e.id||""})!==void 0){console.log("Character already exists in the database");return}if(await et.characters.get({local_id:t})!==void 0){console.log("Character already exists in the database");return}if(!await et.systems.get({local_id:e.system.local_id})){console.log("System not found in the database");return}const i={...e,updated_at:new Date().toISOString()};{const o=aO.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}}return await et.characters.add(i)}catch(t){console.log("Error creating system:",t)}};var bo,Ie=typeof window<"u"?window:void 0,pi=typeof globalThis<"u"?globalThis:Ie,lO=Array.prototype,qj=lO.forEach,Kj=lO.indexOf,Ii=pi==null?void 0:pi.navigator,bt=pi==null?void 0:pi.document,ui=pi==null?void 0:pi.location,Iw=pi==null?void 0:pi.fetch,Pw=pi!=null&&pi.XMLHttpRequest&&"withCredentials"in new pi.XMLHttpRequest?pi.XMLHttpRequest:void 0,Gj=pi==null?void 0:pi.AbortController,ai=Ii==null?void 0:Ii.userAgent,zt=Ie!=null?Ie:{},Ps={DEBUG:!1,LIB_VERSION:"1.240.5"},px="$copy_autocapture",hre=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(e){e.GZipJS="gzip-js",e.Base64="base64"})(bo||(bo={}));var pre=["fatal","error","warning","log","info","debug"];function Yt(e,t){return e.indexOf(t)!==-1}var iv=function(e){return e.trim()},Ow=function(e){return e.replace(/^\$/,"")},gre=Array.isArray,uO=Object.prototype,cO=uO.hasOwnProperty,ov=uO.toString,Bn=gre||function(e){return ov.call(e)==="[object Array]"},Qi=e=>typeof e=="function",zn=e=>e===Object(e)&&!Bn(e),Fu=e=>{if(zn(e)){for(var t in e)if(cO.call(e,t))return!1;return!0}return!1},gt=e=>e===void 0,nr=e=>ov.call(e)=="[object String]",$w=e=>nr(e)&&e.trim().length===0,tl=e=>e===null,ln=e=>gt(e)||tl(e),$r=e=>ov.call(e)=="[object Number]",Ds=e=>ov.call(e)==="[object Boolean]",mre=e=>e instanceof FormData,yre=e=>Yt(hre,e),dO=e=>{var t={t:function(n){if(Ie&&(Ps.DEBUG||zt.POSTHOG_DEBUG)&&!gt(Ie.console)&&Ie.console){for(var r=("__rrweb_original__"in Ie.console[n])?Ie.console[n].__rrweb_original__:Ie.console[n],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];r(e,...o)}},info:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];console.error(e,...r)},uninitializedWarning:n=>{t.error("You must initialize PostHog before calling "+n)},createLogger:n=>dO(e+" "+n)};return t},Et=dO("[PostHog.js]"),Wr=Et.createLogger,vre=Wr("[ExternalScriptsLoader]"),Yj=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return vre.warn(t+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=bt==null?void 0:bt.querySelectorAll("script");if(r){for(var i=0;i<r.length;i++)if(r[i].src===t)return n()}var o=()=>{if(!bt)return n("document not found");var s=bt.createElement("script");if(s.type="text/javascript",s.crossOrigin="anonymous",s.src=t,s.onload=u=>n(void 0,u),s.onerror=u=>n(u),e.config.prepare_external_dependency_script&&(s=e.config.prepare_external_dependency_script(s)),!s)return n("prepare_external_dependency_script returned null");var a,l=bt.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(s,l[0]):bt.body.appendChild(s)};bt!=null&&bt.body?o():bt==null||bt.addEventListener("DOMContentLoaded",o)};function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt.apply(this,arguments)}function fO(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}zt.__PosthogExtensions__=zt.__PosthogExtensions__||{},zt.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{var r="/static/"+t+".js?v="+e.version;if(t==="remote-config"&&(r="/array/"+e.config.token+"/config.js"),t==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var o=e.requestRouter.endpointFor("assets",r);Yj(e,o,n)},zt.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{var r=e.requestRouter.endpointFor("api",t);Yj(e,r,n)};var km={};function Ma(e,t,n){if(Bn(e)){if(qj&&e.forEach===qj)e.forEach(t,n);else if("length"in e&&e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===km)return}}}function mn(e,t,n){if(!ln(e)){if(Bn(e))return Ma(e,t,n);if(mre(e)){for(var r of e.entries())if(t.call(n,r[1],r[0])===km)return}else for(var i in e)if(cO.call(e,i)&&t.call(n,e[i],i)===km)return}}var Zn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ma(n,function(i){for(var o in i)i[o]!==void 0&&(e[o]=i[o])}),e},sv=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ma(n,function(i){Ma(i,function(o){e.push(o)})}),e};function hg(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var Xj=function(e){try{return e()}catch(t){return}},xre=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(i){Et.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Et.critical(i)}}},pS=function(e){var t={};return mn(e,function(n,r){(nr(n)&&n.length>0||$r(n))&&(t[r]=n)}),t};function bre(e,t){return n=e,r=o=>nr(o)&&!tl(t)?o.slice(0,t):o,i=new Set,function o(s,a){return s!==Object(s)?r?r(s,a):s:i.has(s)?void 0:(i.add(s),Bn(s)?(l=[],Ma(s,u=>{l.push(o(u))})):(l={},mn(s,(u,d)=>{i.has(u)||(l[d]=o(u,d))})),l);var l}(n);var n,r,i}var wre=["herokuapp.com","vercel.app","netlify.app"];function _re(e){var t=e==null?void 0:e.hostname;if(!nr(t))return!1;var n=t.split(".").slice(-2).join(".");for(var r of wre)if(n===r)return!1;return!0}function hO(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function Tn(e,t,n,r){var{capture:i=!1,passive:o=!0}=r!=null?r:{};e==null||e.addEventListener(t,n,{capture:i,passive:o})}var pO="$people_distinct_id",Dd="__alias",Ld="__timers",Jj="$autocapture_disabled_server_side",Mw="$heatmaps_enabled_server_side",Qj="$exception_capture_enabled_server_side",Zj="$web_vitals_enabled_server_side",gO="$dead_clicks_enabled_server_side",eA="$web_vitals_allowed_metrics",Dw="$session_recording_enabled_server_side",tA="$console_log_recording_enabled_server_side",nA="$session_recording_network_payload_capture",rA="$session_recording_masking",iA="$session_recording_canvas_recording",oA="$replay_sample_rate",sA="$replay_minimum_duration",aA="$replay_script_config",Cm="$sesid",Fd="$session_is_sampled",Lw="$session_recording_url_trigger_activated_session",Fw="$session_recording_event_trigger_activated_session",Bu="$enabled_feature_flags",pg="$early_access_features",Bw="$feature_flag_details",Bd="$stored_person_properties",vl="$stored_group_properties",zw="$surveys",Pp="$surveys_activated",jm="$flag_call_reported",Cs="$user_state",Hw="$client_session_props",Ww="$capture_rate_limit",Uw="$initial_campaign_params",Vw="$initial_referrer_info",qw="$initial_person_info",Am="$epp",mO="__POSTHOG_TOOLBAR__",lA="$posthog_cookieless",Sre=[pO,Dd,"__cmpns",Ld,Dw,Mw,Cm,Bu,Cs,pg,Bw,vl,Bd,zw,jm,Hw,Ww,Uw,Vw,Am];function uA(e){return e instanceof Element&&(e.id===mO||!(e.closest==null||!e.closest(".toolbar-global-fade-container")))}function av(e){return!!e&&e.nodeType===1}function Da(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function yO(e){return!!e&&e.nodeType===3}function vO(e){return!!e&&e.nodeType===11}function gS(e){return e?iv(e).split(/\s+/):[]}function cA(e){var t=Ie==null?void 0:Ie.location.href;return!!(t&&e&&e.some(n=>t.match(n)))}function Nm(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return gS(t)}function xO(e){return ln(e)?null:iv(e).split(/(\s+)/).filter(t=>Cc(t)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function lv(e){var t="";return Gw(e)&&!_O(e)&&e.childNodes&&e.childNodes.length&&mn(e.childNodes,function(n){var r;yO(n)&&n.textContent&&(t+=(r=xO(n.textContent))!==null&&r!==void 0?r:"")}),iv(t)}function bO(e){return gt(e.target)?e.srcElement||null:(t=e.target)!=null&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var Kw=["a","button","form","input","select","textarea","label"];function wO(e){var t=e.parentNode;return!(!t||!av(t))&&t}function Ere(e,t,n,r,i){var o,s,a;if(n===void 0&&(n=void 0),!Ie||!e||Da(e,"html")||!av(e)||(o=n)!=null&&o.url_allowlist&&!cA(n.url_allowlist)||(s=n)!=null&&s.url_ignorelist&&cA(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(w=>t.type===w))return!1}for(var u=!1,d=[e],f=!0,h=e;h.parentNode&&!Da(h,"body");)if(vO(h.parentNode))d.push(h.parentNode.host),h=h.parentNode.host;else{if(!(f=wO(h)))break;if(r||Kw.indexOf(f.tagName.toLowerCase())>-1)u=!0;else{var p=Ie.getComputedStyle(f);p&&p.getPropertyValue("cursor")==="pointer"&&(u=!0)}d.push(f),h=f}if(!function(w,x){var b=x==null?void 0:x.element_allowlist;if(gt(b))return!0;var m=function(k){if(b.some(N=>k.tagName.toLowerCase()===N))return{v:!0}};for(var S of w){var E=m(S);if(typeof E=="object")return E.v}return!1}(d,n)||!function(w,x){var b=x==null?void 0:x.css_selector_allowlist;if(gt(b))return!0;var m=function(k){if(b.some(N=>k.matches(N)))return{v:!0}};for(var S of w){var E=m(S);if(typeof E=="object")return E.v}return!1}(d,n))return!1;var v=Ie.getComputedStyle(e);if(v&&v.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var y=e.tagName.toLowerCase();switch(y){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Kw.indexOf(y)>-1||e.getAttribute("contenteditable")==="true")}}function Gw(e){for(var t=e;t.parentNode&&!Da(t,"body");t=t.parentNode){var n=Nm(t);if(Yt(n,"ph-sensitive")||Yt(n,"ph-no-capture"))return!1}if(Yt(Nm(e),"ph-include"))return!0;var r=e.type||"";if(nr(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!(nr(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function _O(e){return!!(Da(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Da(e,"select")||Da(e,"textarea")||e.getAttribute("contenteditable")==="true")}var SO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",kre=new RegExp("^(?:"+SO+")$"),Cre=new RegExp(SO),EO="\\d{3}-?\\d{2}-?\\d{4}",jre=new RegExp("^("+EO+")$"),Are=new RegExp("("+EO+")");function Cc(e,t){return t===void 0&&(t=!0),!(ln(e)||nr(e)&&(e=iv(e),(t?kre:Cre).test((e||"").replace(/[- ]/g,""))||(t?jre:Are).test(e)))}function kO(e){var t=lv(e);return Cc(t=(t+" "+CO(e)).trim())?t:""}function CO(e){var t="";return e&&e.childNodes&&e.childNodes.length&&mn(e.childNodes,function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=lv(n);t=(t+" "+i).trim(),n.childNodes&&n.childNodes.length&&(t=(t+" "+CO(n)).trim())}catch(o){Et.error("[AutoCapture]",o)}}),t}function Nre(e){return function(t){var n=t.map(r=>{var i,o,s="";if(r.tag_name&&(s+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))s+="."+a.replace(/"/g,"");var l=yt({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(o=r.nth_of_type)!==null&&o!==void 0?o:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return hg(l).sort((d,f)=>{var[h]=d,[p]=f;return h.localeCompare(p)}).forEach(d=>{var[f,h]=d;return u[dA(f.toString())]=dA(h.toString())}),s+=":",s+=hg(l).map(d=>{var[f,h]=d;return f+'="'+h+'"'}).join("")});return n.join(";")}(function(t){return t.map(n=>{var r,i,o={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)==null?void 0:i.slice(0,2048),attr_class:Rre(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return hg(n).filter(s=>{var[a]=s;return a.indexOf("attr__")===0}).forEach(s=>{var[a,l]=s;return o.attributes[a]=l}),o})}(e))}function dA(e){return e.replace(/"|\\"/g,'\\"')}function Rre(e){var t=e.attr__class;return t?Bn(t)?t:gS(t):void 0}class jO{constructor(){this.clicks=[]}isRageClick(t,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(t-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:t,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:t,y:n,timestamp:r}];return!1}}var Tre=["localhost","127.0.0.1"],jc=e=>{var t=bt==null?void 0:bt.createElement("a");return gt(t)?null:(t.href=e,t)},Ire=function(e,t){var n,r;t===void 0&&(t="&");var i=[];return mn(e,function(o,s){gt(o)||gt(s)||s==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(o)?o.name:o.toString()),r=encodeURIComponent(s),i[i.length]=r+"="+n)}),i.join(t)},Rm=function(e,t){for(var n,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t){n=o;break}}if(!Bn(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch(a){Et.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},mS=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),i=r[0]||"",o=r[1],s=i.split("?"),a=s[1],l=s[0],u=(a||"").split("&"),d=[],f=0;f<u.length;f++){var h=u[f].split("=");Bn(h)&&(t.includes(h[0])?d.push(h[0]+"="+n):d.push(u[f]))}var p=l;return a!=null&&(p+="?"+d.join("&")),o!=null&&(p+="#"+o),p},Tm=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},fA=Wr("[AutoCapture]");function gx(e,t){return t.length>e?t.slice(0,e)+"...":t}function Pre(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!av(t));return t}function Ore(e,t,n,r){var i=e.tagName.toLowerCase(),o={tag_name:i};Kw.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?o.$el_text=gx(1024,kO(e)):o.$el_text=gx(1024,lv(e)));var s=Nm(e);s.length>0&&(o.classes=s.filter(function(d){return d!==""})),mn(e.attributes,function(d){var f;if((!_O(e)||["name","id","class","aria-label"].indexOf(d.name)!==-1)&&(r==null||!r.includes(d.name))&&!t&&Cc(d.value)&&(f=d.name,!nr(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var h=d.value;d.name==="class"&&(h=gS(h).join(" ")),o["attr__"+d.name]=gx(1024,h)}});for(var a=1,l=1,u=e;u=Pre(u);)a++,u.tagName===e.tagName&&l++;return o.nth_child=a,o.nth_of_type=l,o}function $re(e,t){for(var n,r,{e:i,maskAllElementAttributes:o,maskAllText:s,elementAttributeIgnoreList:a,elementsChainAsString:l}=t,u=[e],d=e;d.parentNode&&!Da(d,"body");)vO(d.parentNode)?(u.push(d.parentNode.host),d=d.parentNode.host):(u.push(d.parentNode),d=d.parentNode);var f,h=[],p={},v=!1,y=!1;if(mn(u,S=>{var E=Gw(S);S.tagName.toLowerCase()==="a"&&(v=S.getAttribute("href"),v=E&&v&&Cc(v)&&v),Yt(Nm(S),"ph-no-capture")&&(y=!0),h.push(Ore(S,o,s,a));var k=function(N){if(!Gw(N))return{};var I={};return mn(N.attributes,function(z){if(z.name&&z.name.indexOf("data-ph-capture-attribute")===0){var O=z.name.replace("data-ph-capture-attribute-",""),M=z.value;O&&M&&Cc(M)&&(I[O]=M)}}),I}(S);Zn(p,k)}),y)return{props:{},explicitNoCapture:y};if(s||(e.tagName.toLowerCase()==="a"||e.tagName.toLowerCase()==="button"?h[0].$el_text=kO(e):h[0].$el_text=lv(e)),v){var w,x;h[0].attr__href=v;var b=(w=jc(v))==null?void 0:w.host,m=Ie==null||(x=Ie.location)==null?void 0:x.host;b&&m&&b!==m&&(f=v)}return{props:Zn({$event_type:i.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:Nre(h)},(n=h[0])!=null&&n.$el_text?{$el_text:(r=h[0])==null?void 0:r.$el_text}:{},f&&i.type==="click"?{$external_click_url:f}:{},p)}}class Mre{constructor(t){this.i=!1,this.o=null,this.rageclicks=new jO,this.h=!1,this.instance=t,this.m=null}get S(){var t,n,r=zn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(t=r.url_allowlist)==null?void 0:t.map(i=>new RegExp(i)),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map(i=>new RegExp(i)),r}$(){if(this.isBrowserSupported()){if(Ie&&bt){var t=r=>{r=r||(Ie==null?void 0:Ie.event);try{this.k(r)}catch(i){fA.error("Failed to capture event",i)}};if(Tn(bt,"submit",t,{capture:!0}),Tn(bt,"change",t,{capture:!0}),Tn(bt,"click",t,{capture:!0}),this.S.capture_copied_text){var n=r=>{r=r||(Ie==null?void 0:Ie.event),this.k(r,px)};Tn(bt,"copy",n,{capture:!0}),Tn(bt,"cut",n,{capture:!0})}}}else fA.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.h=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Jj]:!!t.autocapture_opt_out}),this.o=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.m=t}getElementSelectors(t){var n,r=[];return(n=this.m)==null||n.forEach(i=>{var o=bt==null?void 0:bt.querySelectorAll(i);o==null||o.forEach(s=>{t===s&&r.push(i)})}),r}get isEnabled(){var t,n,r=(t=this.instance.persistence)==null?void 0:t.props[Jj],i=this.o;if(tl(i)&&!Ds(r)&&!this.instance.config.advanced_disable_decide)return!1;var o=(n=this.o)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!o}k(t,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,i=bO(t);yO(i)&&(i=i.parentNode||null),n==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.k(t,"$rageclick");var o=n===px;if(i&&Ere(i,t,this.S,o,o?["copy","cut"]:void 0)){var{props:s,explicitNoCapture:a}=$re(i,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(s.$element_selectors=l),n===px){var u,d=xO(Ie==null||(u=Ie.getSelection())==null?void 0:u.toString()),f=t.type||"clipboard";if(!d)return!1;s.$selected_content=d,s.$copy_type=f}return this.instance.capture(n,s),!0}}}isBrowserSupported(){return Qi(bt==null?void 0:bt.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return $r(e)&&isFinite(e)&&Math.floor(e)===e});var hA="0123456789abcdef";class Im{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=t/Math.pow(2,40),o[1]=t/Math.pow(2,32),o[2]=t/Math.pow(2,24),o[3]=t/Math.pow(2,16),o[4]=t/Math.pow(2,8),o[5]=t,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new Im(o)}toString(){for(var t="",n=0;n<this.bytes.length;n++)t=t+hA.charAt(this.bytes[n]>>>4)+hA.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new Im(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(var n=0;n<16;n++){var r=this.bytes[n]-t.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class Dre{constructor(){this.I=0,this.P=0,this.R=new Lre}generate(){var t=this.generateOrAbort();if(gt(t)){this.I=0;var n=this.generateOrAbort();if(gt(n))throw new Error("Could not generate UUID after timestamp reset");return n}return t}generateOrAbort(){var t=Date.now();if(t>this.I)this.I=t,this.T();else{if(!(t+1e4>this.I))return;this.P++,this.P>4398046511103&&(this.I++,this.T())}return Im.fromFieldsV7(this.I,Math.trunc(this.P/Math.pow(2,30)),this.P&Math.pow(2,30)-1,this.R.nextUint32())}T(){this.P=1024*this.R.nextUint32()+(1023&this.R.nextUint32())}}var pA,AO=e=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};Ie&&!gt(Ie.crypto)&&crypto.getRandomValues&&(AO=e=>crypto.getRandomValues(e));class Lre{constructor(){this.M=new Uint32Array(8),this.C=1/0}nextUint32(){return this.C>=this.M.length&&(AO(this.M),this.C=0),this.M[this.C++]}}var Ca=()=>Fre().toString(),Fre=()=>(pA||(pA=new Dre)).generate(),Bre="Thu, 01 Jan 1970 00:00:00 GMT",bd="",zre=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function Hre(e,t){if(t){var n=function(i,o){if(o===void 0&&(o=bt),bd)return bd;if(!o||["localhost","127.0.0.1"].includes(i))return"";for(var s=i.split("."),a=Math.min(s.length,8),l="dmn_chk_"+Ca(),u=new RegExp("(^|;)\\s*"+l+"=1");!bd&&a--;){var d=s.slice(a).join("."),f=l+"=1;domain=."+d;o.cookie=f,u.test(o.cookie)&&(o.cookie=f+";expires="+Bre,bd=d)}return bd}(e);if(!n){var r=(i=>{var o=i.match(zre);return o?o[0]:""})(e);r!==n&&Et.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var ba,Hs={O:()=>!!bt,F:function(e){Et.error("cookieStore error: "+e)},A:function(e){if(bt){try{for(var t=e+"=",n=bt.cookie.split(";").filter(o=>o.length),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return decodeURIComponent(i.substring(t.length,i.length))}}catch(o){}return null}},D:function(e){var t;try{t=JSON.parse(Hs.A(e))||{}}catch(n){}return t},j:function(e,t,n,r,i){if(bt)try{var o="",s="",a=Hre(bt.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),o="; expires="+l.toUTCString()}i&&(s="; secure");var u=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return u.length>3686.4&&Et.warn("cookieStore warning: large cookie, len="+u.length),bt.cookie=u,u}catch(d){return}},L:function(e,t){try{Hs.j(e,"",-1,t)}catch(n){return}}},mx=null,lr={O:function(){if(!tl(mx))return mx;var e=!0;if(gt(Ie))e=!1;else try{var t="__mplssupport__";lr.j(t,"xyz"),lr.A(t)!=='"xyz"'&&(e=!1),lr.L(t)}catch(n){e=!1}return e||Et.error("localStorage unsupported; falling back to cookie store"),mx=e,e},F:function(e){Et.error("localStorage error: "+e)},A:function(e){try{return Ie==null?void 0:Ie.localStorage.getItem(e)}catch(t){lr.F(t)}return null},D:function(e){try{return JSON.parse(lr.A(e))||{}}catch(t){}return null},j:function(e,t){try{Ie==null||Ie.localStorage.setItem(e,JSON.stringify(t))}catch(n){lr.F(n)}},L:function(e){try{Ie==null||Ie.localStorage.removeItem(e)}catch(t){lr.F(t)}}},Wre=["distinct_id",Cm,Fd,Am,qw],Op=yt({},lr,{D:function(e){try{var t={};try{t=Hs.D(e)||{}}catch(r){}var n=Zn(t,JSON.parse(lr.A(e)||"{}"));return lr.j(e,n),n}catch(r){}return null},j:function(e,t,n,r,i,o){try{lr.j(e,t,void 0,void 0,o);var s={};Wre.forEach(a=>{t[a]&&(s[a]=t[a])}),Object.keys(s).length&&Hs.j(e,s,n,r,i,o)}catch(a){lr.F(a)}},L:function(e,t){try{Ie==null||Ie.localStorage.removeItem(e),Hs.L(e,t)}catch(n){lr.F(n)}}}),$p={},Ure={O:function(){return!0},F:function(e){Et.error("memoryStorage error: "+e)},A:function(e){return $p[e]||null},D:function(e){return $p[e]||null},j:function(e,t){$p[e]=t},L:function(e){delete $p[e]}},ul=null,br={O:function(){if(!tl(ul))return ul;if(ul=!0,gt(Ie))ul=!1;else try{var e="__support__";br.j(e,"xyz"),br.A(e)!=='"xyz"'&&(ul=!1),br.L(e)}catch(t){ul=!1}return ul},F:function(e){Et.error("sessionStorage error: ",e)},A:function(e){try{return Ie==null?void 0:Ie.sessionStorage.getItem(e)}catch(t){br.F(t)}return null},D:function(e){try{return JSON.parse(br.A(e))||null}catch(t){}return null},j:function(e,t){try{Ie==null||Ie.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){br.F(n)}},L:function(e){try{Ie==null||Ie.sessionStorage.removeItem(e)}catch(t){br.F(t)}}};(function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"})(ba||(ba={}));class Vre{constructor(t){this._instance=t}get S(){return this._instance.config}get consent(){return this.N()?ba.DENIED:this.U}isOptedOut(){return this.consent===ba.DENIED||this.consent===ba.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.q.j(this.B,t?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.q.L(this.B,this.S.cross_subdomain_cookie)}get B(){var{token:t,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+t}get U(){var t=this.q.A(this.B);return t==="1"?ba.GRANTED:t==="0"?ba.DENIED:ba.PENDING}get q(){if(!this.H){var t=this.S.opt_out_capturing_persistence_type;this.H=t==="localStorage"?lr:Hs;var n=t==="localStorage"?Hs:lr;n.A(this.B)&&(this.H.A(this.B)||this.optInOut(n.A(this.B)==="1"),n.L(this.B,this.S.cross_subdomain_cookie))}return this.H}N(){return!!this.S.respect_dnt&&!!hO([Ii==null?void 0:Ii.doNotTrack,Ii==null?void 0:Ii.msDoNotTrack,zt.doNotTrack],t=>Yt([!0,1,"1","yes"],t))}}var Mp=Wr("[Dead Clicks]"),qre=()=>!0,Kre=e=>{var t,n=!((t=e.instance.persistence)==null||!t.get_property(gO)),r=e.instance.config.capture_dead_clicks;return Ds(r)?r:n};class NO{get lazyLoadedDeadClicksAutocapture(){return this.W}constructor(t,n,r){this.instance=t,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[gO]:t==null?void 0:t.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.G(()=>{this.J()})}G(t){var n,r;(n=zt.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&t(),(r=zt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",i=>{i?Mp.error("failed to load script",i):t()})}J(){var t;if(bt){if(!this.W&&(t=zt.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture){var n=zn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.W=zt.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.W.start(bt),Mp.info("starting...")}}else Mp.error("`document` not found. Cannot start.")}stop(){this.W&&(this.W.stop(),this.W=void 0,Mp.info("stopping..."))}}var yx=Wr("[ExceptionAutocapture]");class Gre{constructor(t){var n;this.V=()=>{var r;if(Ie&&this.isEnabled&&(r=zt.__PosthogExtensions__)!=null&&r.errorWrappingFunctions){var i=zt.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=zt.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,s=zt.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.K&&this.S.capture_unhandled_errors&&(this.K=i(this.captureException.bind(this))),!this.Y&&this.S.capture_unhandled_rejections&&(this.Y=o(this.captureException.bind(this))),!this.X&&this.S.capture_console_errors&&(this.X=s(this.captureException.bind(this)))}catch(a){yx.error("failed to start",a),this.Z()}}},this._instance=t,this.tt=!((n=this._instance.persistence)==null||!n.props[Qj]),this.S=this.it(),this.startIfEnabled()}it(){var t=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return zn(t)?n=yt({},n,t):(gt(t)?this.tt:t)&&(n=yt({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(yx.info("enabled"),this.G(this.V))}G(t){var n,r;(n=zt.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&t(),(r=zt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",i=>{if(i)return yx.error("failed to load script",i);t()})}Z(){var t,n,r;(t=this.K)==null||t.call(this),this.K=void 0,(n=this.Y)==null||n.call(this),this.Y=void 0,(r=this.X)==null||r.call(this),this.X=void 0}onRemoteConfig(t){var n=t.autocaptureExceptions;this.tt=!!n||!1,this.S=this.it(),this._instance.persistence&&this._instance.persistence.register({[Qj]:this.tt}),this.startIfEnabled()}captureException(t){var n=this._instance.requestRouter.endpointFor("ui");t.$exception_personURL=n+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id(),this._instance.exceptions.sendExceptionEvent(t)}}function RO(e){return!gt(Event)&&TO(e,Event)}function TO(e,t){try{return e instanceof t}catch(n){return!1}}function IO(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return TO(e,Error)}}function gg(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function vx(e){return gg(e,"DOMError")}var gA=/\(error: (.*)\)/,mA=50,zu="?";function xx(e,t,n,r){var i={platform:"web:javascript",filename:e,function:t==="<anonymous>"?zu:t,in_app:!0};return gt(n)||(i.lineno=n),gt(r)||(i.colno=r),i}var Yre=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Xre=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Jre=/\((\S*)(?::(\d+))(?::(\d+))\)/,Qre=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Zre=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,eie=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.sort((i,o)=>i[0]-o[0]).map(i=>i[1]);return function(i,o){o===void 0&&(o=0);for(var s=[],a=i.split("\n"),l=o;l<a.length;l++){var u=a[l];if(!(u.length>1024)){var d=gA.test(u)?u.replace(gA,"$1"):u;if(!d.match(/\S*Error: /)){for(var f of r){var h=f(d);if(h){s.push(h);break}}if(s.length>=mA)break}}}return function(p){if(!p.length)return[];var v=Array.from(p);return v.reverse(),v.slice(0,mA).map(y=>yt({},y,{filename:y.filename||tie(v).filename,function:y.function||zu}))}(s)}}([30,e=>{var t=Yre.exec(e);if(t){var[,n,r,i]=t;return xx(n,zu,+r,+i)}var o=Xre.exec(e);if(o){if(o[2]&&o[2].indexOf("eval")===0){var s=Jre.exec(o[2]);s&&(o[2]=s[1],o[3]=s[2],o[4]=s[3])}var[a,l]=vA(o[1]||zu,o[2]);return xx(l,a,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}}],[50,e=>{var t=Qre.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=Zre.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],i=t[1]||zu;return[i,r]=vA(i,r),xx(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]);function tie(e){return e[e.length-1]||{}}var Dp,yA,bx,vA=(e,t)=>{var n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:zu,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},nie=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function yS(e,t){t===void 0&&(t=0);var n=e.stacktrace||e.stack||"",r=function(s){return s&&rie.test(s.message)?1:0}(e);try{var i=eie,o=function(s,a){var l=function(u){var d=globalThis._posthogChunkIds;if(!d)return{};var f=Object.keys(d);return bx&&f.length===yA||(yA=f.length,bx=f.reduce((h,p)=>{Dp||(Dp={});var v=Dp[p];if(v)h[v[0]]=v[1];else for(var y=u(p),w=y.length-1;w>=0;w--){var x=y[w],b=x==null?void 0:x.filename,m=d[p];if(b&&m){h[b]=m,Dp[p]=[b,m];break}}return h},{})),bx}(a);return s.forEach(u=>{u.filename&&(u.chunk_id=l[u.filename])}),s}(i(n,r),i);return o.slice(0,o.length-t)}catch(s){}return[]}var rie=/Minified React error #\d+;/i;function iie(e,t){var n,r,i=yS(e),o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)!==null&&r!==void 0&&r;return{type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:e.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(e),stacktrace:{frames:i,type:"raw"},mechanism:{handled:o,synthetic:s}}}function PO(e,t){var n=iie(e,t);return e.cause&&IO(e.cause)&&e.cause!==e?[n,...PO(e.cause,{handled:t==null?void 0:t.handled,synthetic:t==null?void 0:t.synthetic})]:[n]}function wx(e,t){return{$exception_list:PO(e,t),$exception_level:"error"}}function _x(e,t){var n,r,i,o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,a={type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:(i=t==null?void 0:t.defaultExceptionType)!==null&&i!==void 0?i:"Error",value:e||(t==null?void 0:t.defaultExceptionMessage),mechanism:{handled:o,synthetic:s}};if(t!=null&&t.syntheticException){var l=yS(t.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function oie(e){return nr(e)&&!$w(e)&&pre.indexOf(e)>=0}function sie(e,t){var n,r,i=(n=t==null?void 0:t.handled)===null||n===void 0||n,o=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,s=t!=null&&t.overrideExceptionType?t.overrideExceptionType:RO(e)?e.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(d,f){f===void 0&&(f=40);var h=Object.keys(d);if(h.sort(),!h.length)return"[object has no keys]";for(var p=h.length;p>0;p--){var v=h.slice(0,p).join(", ");if(!(v.length>f))return p===h.length||v.length<=f?v:v.slice(0,f)+"..."}return""}(e),l={type:s,value:a,mechanism:{handled:i,synthetic:o}};if(t!=null&&t.syntheticException){var u=yS(t==null?void 0:t.syntheticException,1);u.length&&(l.stacktrace={frames:u,type:"raw"})}return{$exception_list:[l],$exception_level:oie(e.level)?e.level:"error"}}function aie(e,t){var{error:n,event:r}=e,i={$exception_list:[]},o=n||r;if(vx(o)||function(h){return gg(h,"DOMException")}(o)){var s=o;if(function(h){return"stack"in h}(o))i=wx(o,t);else{var a=s.name||(vx(s)?"DOMError":"DOMException"),l=s.message?a+": "+s.message:a;i=_x(l,yt({},t,{overrideExceptionType:vx(s)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in s&&(i.$exception_DOMException_code=""+s.code),i}if(function(h){return gg(h,"ErrorEvent")}(o)&&o.error)return wx(o.error,t);if(IO(o))return wx(o,t);if(function(h){return gg(h,"Object")}(o)||RO(o))return sie(o,t);if(gt(n)&&nr(r)){var u="Error",d=r,f=r.match(nie);return f&&(u=f[1],d=f[2]),_x(d,yt({},t,{overrideExceptionType:u,defaultExceptionMessage:d}))}return _x(o,t)}function xA(e,t,n){try{if(!(t in e))return()=>{};var r=e[t],i=n(r);return Qi(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,()=>{e[t]=r}}catch(o){return()=>{}}}class lie{constructor(t){var n;this._instance=t,this.et=(Ie==null||(n=Ie.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Et.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.rt&&this.rt(),this.rt=void 0,Et.info("History API monitoring stopped")}monitorHistoryChanges(){var t,n;if(Ie&&Ie.history){var r=this;(t=Ie.history.pushState)!=null&&t.__posthog_wrapped__||xA(Ie.history,"pushState",i=>function(o,s,a){i.call(this,o,s,a),r.st("pushState")}),(n=Ie.history.replaceState)!=null&&n.__posthog_wrapped__||xA(Ie.history,"replaceState",i=>function(o,s,a){i.call(this,o,s,a),r.st("replaceState")}),this.nt()}}st(t){try{var n,r=Ie==null||(n=Ie.location)==null?void 0:n.pathname;if(!r)return;r!==this.et&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:t}),this.et=r}catch(i){Et.error("Error capturing "+t+" pageview",i)}}nt(){if(!this.rt){var t=()=>{this.st("popstate")};Tn(Ie,"popstate",t),this.rt=()=>{Ie&&Ie.removeEventListener("popstate",t)}}}}function Pm(e){var t,n;return((t=JSON.stringify(e,(n=[],function(r,i){if(zn(i)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(i)?"[Circular]":(n.push(i),i)}return i})))==null?void 0:t.length)||0}function Yw(e,t){if(t===void 0&&(t=66060288e-1),e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[Yw({size:Pm(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),Yw({size:Pm(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap(o=>o)}return[e]}var js=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(js||{}),po=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(po||{}),Xw="[SessionRecording]",Jw="redacted",Lp={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},uie=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],cie=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],die=["/s/","/e/","/i/"];function bA(e,t,n,r){if(ln(e))return e;var i=(t==null?void 0:t["content-length"])||function(o){return new Blob([o]).size}(e);return nr(i)&&(i=parseInt(i)),i>n?Xw+" "+r+" body too large to record ("+i+" bytes)":e}function wA(e,t){if(ln(e))return e;var n=e;return Cc(n,!1)||(n=Xw+" "+t+" body "+Jw),mn(cie,r=>{var i,o;(i=n)!=null&&i.length&&((o=n)==null?void 0:o.indexOf(r))!==-1&&(n=Xw+" "+t+" body "+Jw+" as might contain: "+r)}),n}var fie=(e,t)=>{var n,r,i,o={payloadSizeLimitBytes:Lp.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Lp.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...Lp.payloadHostDenyList]},s=e.session_recording.recordHeaders!==!1&&t.recordHeaders,a=e.session_recording.recordBody!==!1&&t.recordBody,l=e.capture_performance!==!1&&t.recordPerformance,u=(n=o,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=bA(h.requestBody,h.requestHeaders,i,"Request")),h!=null&&h.responseBody&&(h.responseBody=bA(h.responseBody,h.responseHeaders,i,"Response")),h)),d=h=>{return u(((y,w)=>{var x,b=jc(y.name),m=w.indexOf("http")===0?(x=jc(w))==null?void 0:x.pathname:w;m==="/"&&(m="");var S=b==null?void 0:b.pathname.replace(m||"","");if(!(b&&S&&die.some(E=>S.indexOf(E)===0)))return y})((v=(p=h).requestHeaders,ln(v)||mn(Object.keys(v!=null?v:{}),y=>{uie.includes(y.toLowerCase())&&(v[y]=Jw)}),p),e.api_host));var p,v},f=Qi(e.session_recording.maskNetworkRequestFn);return f&&Qi(e.session_recording.maskCapturedNetworkRequestFn)&&Et.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(e.session_recording.maskCapturedNetworkRequestFn=h=>{var p=e.session_recording.maskNetworkRequestFn({url:h.name});return yt({},h,{name:p==null?void 0:p.url})}),o.maskRequestFn=Qi(e.session_recording.maskCapturedNetworkRequestFn)?h=>{var p,v=d(h);return v&&(p=e.session_recording.maskCapturedNetworkRequestFn==null?void 0:e.session_recording.maskCapturedNetworkRequestFn(v))!==null&&p!==void 0?p:void 0}:h=>function(p){if(!gt(p))return p.requestBody=wA(p.requestBody,"Request"),p.responseBody=wA(p.responseBody,"Response"),p}(d(h)),yt({},Lp,o,{recordHeaders:s,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function Xi(e,t,n,r,i){return t>n&&(Et.warn("min cannot be greater than max."),t=n),$r(e)?e>n?(r&&Et.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r&&Et.warn(r+" cannot be less than min: "+t+". Using min value instead."),t):e:(r&&Et.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),Xi(i||n,t,n,r))}class hie{constructor(t,n){var r,i;n===void 0&&(n={}),this.ot=100,this.lt=10,this.ut={},this.ht={},this.dt=()=>{Object.keys(this.ut).forEach(o=>{this.ut[o]=this.ut[o]+this.lt,this.ut[o]>=this.ot&&delete this.ut[o]})},this.vt=o=>{var s=this._rrweb.mirror.getNode(o);if((s==null?void 0:s.nodeName)!=="svg"&&s instanceof Element){var a=s.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[o,s]},this.ct=o=>{var s,a,l,u,d,f,h,p;return((s=(a=o.removes)==null?void 0:a.length)!==null&&s!==void 0?s:0)+((l=(u=o.attributes)==null?void 0:u.length)!==null&&l!==void 0?l:0)+((d=(f=o.texts)==null?void 0:f.length)!==null&&d!==void 0?d:0)+((h=(p=o.adds)==null?void 0:p.length)!==null&&h!==void 0?h:0)},this.throttleMutations=o=>{if(o.type!==3||o.data.source!==0)return o;var s=o.data,a=this.ct(s);s.attributes&&(s.attributes=s.attributes.filter(u=>{var d,f,h,[p,v]=this.vt(u.id);return this.ut[p]===0?!1:(this.ut[p]=(d=this.ut[p])!==null&&d!==void 0?d:this.ot,this.ut[p]=Math.max(this.ut[p]-1,0),this.ut[p]===0&&(this.ht[p]||(this.ht[p]=!0,(f=(h=this.ft).onBlockedNode)==null||f.call(h,p,v))),u)}));var l=this.ct(s);return l!==0||a===l?o:void 0},this._rrweb=t,this.ft=n,this.lt=Xi((r=this.ft.refillRate)!==null&&r!==void 0?r:this.lt,0,100,"mutation throttling refill rate"),this.ot=Xi((i=this.ft.bucketSize)!==null&&i!==void 0?i:this.ot,0,100,"mutation throttling bucket size"),setInterval(()=>{this.dt()},1e3)}}var Zi=Uint8Array,gi=Uint16Array,Ac=Uint32Array,vS=new Zi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xS=new Zi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_A=new Zi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),OO=function(e,t){for(var n=new gi(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Ac(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},$O=OO(vS,2),pie=$O[0],Qw=$O[1];pie[28]=258,Qw[258]=28;for(var SA=OO(xS,0)[1],MO=new gi(32768),En=0;En<32768;++En){var cl=(43690&En)>>>1|(21845&En)<<1;cl=(61680&(cl=(52428&cl)>>>2|(13107&cl)<<2))>>>4|(3855&cl)<<4,MO[En]=((65280&cl)>>>8|(255&cl)<<8)>>>1}var rf=function(e,t,n){for(var r=e.length,i=0,o=new gi(t);i<r;++i)++o[e[i]-1];var s,a=new gi(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;for(s=new gi(r),i=0;i<r;++i)s[i]=MO[a[e[i]-1]++]>>>15-e[i];return s},Gl=new Zi(288);for(En=0;En<144;++En)Gl[En]=8;for(En=144;En<256;++En)Gl[En]=9;for(En=256;En<280;++En)Gl[En]=7;for(En=280;En<288;++En)Gl[En]=8;var Om=new Zi(32);for(En=0;En<32;++En)Om[En]=5;var gie=rf(Gl,9),mie=rf(Om,5),DO=function(e){return(e/8>>0)+(7&e&&1)},LO=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof gi?gi:e instanceof Ac?Ac:Zi)(n-t);return r.set(e.subarray(t,n)),r},Ss=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},wd=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Sx=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new Zi(0),0];if(i==1){var s=new Zi(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(E,k){return E.f-k.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,d=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[u].f<n[f].f?u++:f++],l=n[u!=d&&n[u].f<n[f].f?u++:f++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};var h=o[0].s;for(r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var p=new gi(h+1),v=Zw(n[d-1],p,0);if(v>t){r=0;var y=0,w=v-t,x=1<<w;for(o.sort(function(E,k){return p[k.s]-p[E.s]||E.f-k.f});r<i;++r){var b=o[r].s;if(!(p[b]>t))break;y+=x-(1<<v-p[b]),p[b]=t}for(y>>>=w;y>0;){var m=o[r].s;p[m]<t?y-=1<<t-p[m]++-1:++r}for(;r>=0&&y;--r){var S=o[r].s;p[S]==t&&(--p[S],++y)}v=t}return[new Zi(p),v]},Zw=function(e,t,n){return e.s==-1?Math.max(Zw(e.l,t,n+1),Zw(e.r,t,n+1)):t[e.s]=n},EA=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new gi(++t),r=0,i=e[0],o=1,s=function(l){n[r++]=l},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},_d=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},e_=function(e,t,n){var r=n.length,i=DO(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},kA=function(e,t,n,r,i,o,s,a,l,u,d){Ss(t,d++,n),++i[256];for(var f=Sx(i,15),h=f[0],p=f[1],v=Sx(o,15),y=v[0],w=v[1],x=EA(h),b=x[0],m=x[1],S=EA(y),E=S[0],k=S[1],N=new gi(19),I=0;I<b.length;++I)N[31&b[I]]++;for(I=0;I<E.length;++I)N[31&E[I]]++;for(var z=Sx(N,7),O=z[0],M=z[1],K=19;K>4&&!O[_A[K-1]];--K);var D,L,q,G,te=u+5<<3,B=_d(i,Gl)+_d(o,Om)+s,H=_d(i,h)+_d(o,y)+s+14+3*K+_d(N,O)+(2*N[16]+3*N[17]+7*N[18]);if(te<=B&&te<=H)return e_(t,d,e.subarray(l,l+u));if(Ss(t,d,1+(H<B)),d+=2,H<B){D=rf(h,p),L=h,q=rf(y,w),G=y;var $=rf(O,M);for(Ss(t,d,m-257),Ss(t,d+5,k-1),Ss(t,d+10,K-4),d+=14,I=0;I<K;++I)Ss(t,d+3*I,O[_A[I]]);d+=3*K;for(var Y=[b,E],se=0;se<2;++se){var ue=Y[se];for(I=0;I<ue.length;++I){var Ce=31&ue[I];Ss(t,d,$[Ce]),d+=O[Ce],Ce>15&&(Ss(t,d,ue[I]>>>5&127),d+=ue[I]>>>12)}}}else D=gie,L=Gl,q=mie,G=Om;for(I=0;I<a;++I)if(r[I]>255){Ce=r[I]>>>18&31,wd(t,d,D[Ce+257]),d+=L[Ce+257],Ce>7&&(Ss(t,d,r[I]>>>23&31),d+=vS[Ce]);var Ne=31&r[I];wd(t,d,q[Ne]),d+=G[Ne],Ne>3&&(wd(t,d,r[I]>>>5&8191),d+=xS[Ne])}else wd(t,d,D[r[I]]),d+=L[r[I]];return wd(t,d,D[256]),d+L[256]},yie=new Ac([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vie=function(){for(var e=new Ac(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),xie=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=vie[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}},bie=function(e,t,n,r,i){return function(o,s,a,l,u,d){var f=o.length,h=new Zi(l+f+5*(1+Math.floor(f/7e3))+u),p=h.subarray(l,h.length-u),v=0;if(!s||f<8)for(var y=0;y<=f;y+=65535){var w=y+65535;w<f?v=e_(p,v,o.subarray(y,w)):(p[y]=d,v=e_(p,v,o.subarray(y,f)))}else{for(var x=yie[s-1],b=x>>>13,m=8191&x,S=(1<<a)-1,E=new gi(32768),k=new gi(S+1),N=Math.ceil(a/3),I=2*N,z=function(Ue){return(o[Ue]^o[Ue+1]<<N^o[Ue+2]<<I)&S},O=new Ac(25e3),M=new gi(288),K=new gi(32),D=0,L=0,q=(y=0,0),G=0,te=0;y<f;++y){var B=z(y),H=32767&y,$=k[B];if(E[H]=$,k[B]=H,G<=y){var Y=f-y;if((D>7e3||q>24576)&&Y>423){v=kA(o,p,0,O,M,K,L,q,te,y-te,v),q=D=L=0,te=y;for(var se=0;se<286;++se)M[se]=0;for(se=0;se<30;++se)K[se]=0}var ue=2,Ce=0,Ne=m,Te=H-$&32767;if(Y>2&&B==z(y-Te))for(var U=Math.min(b,Y)-1,ee=Math.min(32767,y),re=Math.min(258,Y);Te<=ee&&--Ne&&H!=$;){if(o[y+ue]==o[y+ue-Te]){for(var De=0;De<re&&o[y+De]==o[y+De-Te];++De);if(De>ue){if(ue=De,Ce=Te,De>U)break;var Ye=Math.min(Te,De-2),ze=0;for(se=0;se<Ye;++se){var ie=y-Te+se+32768&32767,fe=ie-E[ie]+32768&32767;fe>ze&&(ze=fe,$=ie)}}}Te+=(H=$)-($=E[H])+32768&32767}if(Ce){O[q++]=268435456|Qw[ue]<<18|SA[Ce];var Se=31&Qw[ue],We=31&SA[Ce];L+=vS[Se]+xS[We],++M[257+Se],++K[We],G=y+ue,++D}else O[q++]=o[y],++M[o[y]]}}v=kA(o,p,d,O,M,K,L,q,te,y-te,v)}return LO(h,0,l+DO(v)+u)}(e,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!0)},t_=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},wie=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&t_(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_ie=function(e){return 10+(e.filename&&e.filename.length+1||0)};function FO(e,t){t===void 0&&(t={});var n=xie(),r=e.length;n.p(e);var i=bie(e,t,_ie(t),8),o=i.length;return wie(i,t),t_(i,o-8,n.d()),t_(i,o-4,r),i}function BO(e,t){var n=e.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(e);for(var r=new Zi(e.length+(e.length>>>1)),i=0,o=function(u){r[i++]=u},s=0;s<n;++s){if(i+5>r.length){var a=new Zi(i+8+(n-s<<1));a.set(r),r=a}var l=e.charCodeAt(s);l<128||t?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return LO(r,0,i)}function Sie(e,t){return function(n){for(var r=0,i=0;i<n.length;i++)r=(r<<5)-r+n.charCodeAt(i),r|=0;return Math.abs(r)}(e)%100<Xi(100*t,0,100)}var Ga="disabled",bS="sampled",$m="active",Yl="buffering",wS="paused",_S="trigger",os=_S+"_activated",Fr=_S+"_pending",hs=_S+"_"+Ga;function CA(e,t){return t.some(n=>n.matching==="regex"&&new RegExp(n.url).test(e))}class zO{constructor(t){this.gt=t}triggerStatus(t){var n=this.gt.map(r=>r.triggerStatus(t));return n.includes(os)?os:n.includes(Fr)?Fr:hs}stop(){this.gt.forEach(t=>t.stop())}}class HO{constructor(t){this.gt=t}triggerStatus(t){var n=new Set;for(var r of this.gt)n.add(r.triggerStatus(t));switch(n.delete(hs),n.size){case 0:return hs;case 1:return Array.from(n)[0];default:return Fr}}stop(){this.gt.forEach(t=>t.stop())}}class Eie{triggerStatus(){return Fr}stop(){}}class kie{constructor(t){this._t=[],this.bt=[],this.urlBlocked=!1,this._instance=t}onRemoteConfig(t){var n,r;this._t=((n=t.sessionRecording)==null?void 0:n.urlTriggers)||[],this.bt=((r=t.sessionRecording)==null?void 0:r.urlBlocklist)||[]}wt(t){var n;return this._t.length===0?hs:((n=this._instance)==null?void 0:n.get_property(Lw))===t?os:Fr}triggerStatus(t){var n=this.wt(t),r=n===os?os:n===Fr?Fr:hs;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(t,n,r){if(Ie!==void 0&&Ie.location.href){var i=Ie.location.href,o=this.urlBlocked,s=CA(i,this.bt);o&&s||(s&&!o?t():!s&&o&&n(),CA(i,this._t)&&r("url"))}}stop(){}}class Cie{constructor(t){this.linkedFlag=null,this.linkedFlagSeen=!1,this.yt=()=>{},this._instance=t}triggerStatus(){var t=Fr;return ln(this.linkedFlag)&&(t=hs),this.linkedFlagSeen&&(t=os),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:t}),t}onRemoteConfig(t,n){var r;if(this.linkedFlag=((r=t.sessionRecording)==null?void 0:r.linkedFlag)||null,!ln(this.linkedFlag)&&!this.linkedFlagSeen){var i=nr(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,o=nr(this.linkedFlag)?null:this.linkedFlag.variant;this.yt=this._instance.onFeatureFlags((s,a)=>{var l=zn(a)&&i in a&&(o?a[i]===o:a[i]===!0);l&&n(i,o),this.linkedFlagSeen=l})}}stop(){this.yt()}}class jie{constructor(t){this.St=[],this._instance=t}onRemoteConfig(t){var n;this.St=((n=t.sessionRecording)==null?void 0:n.eventTriggers)||[]}$t(t){var n;return this.St.length===0?hs:((n=this._instance)==null?void 0:n.get_property(Fw))===t?os:Fr}triggerStatus(t){var n=this.$t(t),r=n===os?os:n===Fr?Fr:hs;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}}function Aie(e){return e.isRecordingEnabled?Yl:Ga}function Nie(e){if(!e.receivedDecide)return Yl;if(!e.isRecordingEnabled)return Ga;if(e.urlTriggerMatching.urlBlocked)return wS;var t=e.isSampled===!0,n=new zO([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?bS:n===os?$m:n===Fr?Yl:e.isSampled===!1?Ga:$m}function Rie(e){if(!e.receivedDecide)return Yl;if(!e.isRecordingEnabled)return Ga;if(e.urlTriggerMatching.urlBlocked)return wS;var t=new HO([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),n=t!==hs,r=Ds(e.isSampled);return n&&t===Fr?Yl:n&&t===hs||r&&!e.isSampled?Ga:e.isSampled===!0?bS:$m}var zd="[SessionRecording]",Ir=Wr(zd);function Fp(){var e,t;return zt==null||(e=zt.__PosthogExtensions__)==null||(t=e.rrweb)==null?void 0:t.record}var Tie=3e5,Iie=[po.MouseMove,po.MouseInteraction,po.Scroll,po.ViewportResize,po.Input,po.TouchMove,po.MediaInteraction,po.Drag],jA=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function dl(e){return function(t,n){for(var r="",i=0;i<t.length;){var o=t[i++];r+=String.fromCharCode(o)}return r}(FO(BO(JSON.stringify(e))))}function AA(e){return e.type===js.Custom&&e.data.tag==="sessionIdle"}class Pie{get sessionId(){return this.kt}get xt(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Et}get It(){if(!this._instance.sessionManager)throw new Error(zd+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Pt(){var t,n;return this.Rt.triggerStatus(this.sessionId)===Fr?6e4:(t=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&t!==void 0?t:Tie}get Tt(){var t=this._instance.get_property(Fd);return Ds(t)?t:null}get Mt(){var t,n,r=(t=this.M)==null?void 0:t.data[((n=this.M)==null?void 0:n.data.length)-1],{sessionStartTimestamp:i}=this.It.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-i:null}get Ct(){var t=!!this._instance.get_property(Dw),n=!this._instance.config.disable_session_recording;return Ie&&t&&n}get Ot(){var t=!!this._instance.get_property(tA),n=this._instance.config.enable_recording_console_log;return n!=null?n:t}get Ft(){var t,n,r,i,o,s,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(iA),u=(t=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&t!==void 0&&t,d=(r=(i=a==null?void 0:a.canvasFps)!==null&&i!==void 0?i:l==null?void 0:l.fps)!==null&&r!==void 0?r:4,f=(o=(s=a==null?void 0:a.canvasQuality)!==null&&s!==void 0?s:l==null?void 0:l.quality)!==null&&o!==void 0?o:.4;if(typeof f=="string"){var h=parseFloat(f);f=isNaN(h)?.4:h}return{enabled:u,fps:Xi(d,0,12,"canvas recording fps",4),quality:Xi(f,0,1,"canvas recording quality",.4)}}get At(){var t,n,r=this._instance.get_property(nA),i={recordHeaders:(t=this._instance.config.session_recording)==null?void 0:t.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},o=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),s=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=zn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Ds(a)?a:r!=null&&r.capturePerformance);return o||s||l?{recordHeaders:o,recordBody:s,recordPerformance:l}:void 0}get Dt(){var t,n,r,i,o,s,a=this._instance.get_property(rA),l={maskAllInputs:(t=this._instance.config.session_recording)==null?void 0:t.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},u=(i=l==null?void 0:l.maskAllInputs)!==null&&i!==void 0?i:a==null?void 0:a.maskAllInputs,d=(o=l==null?void 0:l.maskTextSelector)!==null&&o!==void 0?o:a==null?void 0:a.maskTextSelector,f=(s=l==null?void 0:l.blockSelector)!==null&&s!==void 0?s:a==null?void 0:a.blockSelector;return gt(u)&&gt(d)&&gt(f)?void 0:{maskAllInputs:u==null||u,maskTextSelector:d,blockSelector:f}}get jt(){var t=this._instance.get_property(oA);return $r(t)?t:null}get Lt(){var t=this._instance.get_property(sA);return $r(t)?t:null}get status(){return this.Nt?this.zt({receivedDecide:this.Nt,isRecordingEnabled:this.Ct,isSampled:this.Tt,urlTriggerMatching:this.Ut,eventTriggerMatching:this.qt,linkedFlagMatching:this.Bt,sessionId:this.sessionId}):Yl}constructor(t){if(this.zt=Aie,this.Nt=!1,this.Ht=[],this.Wt="unknown",this.Gt=Date.now(),this.Rt=new Eie,this.Jt=void 0,this.Vt=void 0,this.Kt=void 0,this.Yt=void 0,this.Xt=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.Qt=()=>{this.Zt()},this.ti=()=>{this.ii("browser offline",{})},this.ei=()=>{this.ii("browser online",{})},this.ri=()=>{if(bt!=null&&bt.visibilityState){var i="window "+bt.visibilityState;this.ii(i,{})}},this._instance=t,this.Et=!1,this.si="/s/",this.ni=void 0,this.Nt=!1,!this._instance.sessionManager)throw Ir.error("started without valid sessionManager"),new Error(zd+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(zd+" cannot be used with __preview_experimental_cookieless_mode.");this.Bt=new Cie(this._instance),this.Ut=new kie(this._instance),this.qt=new jie(this._instance);var{sessionId:n,windowId:r}=this.It.checkAndGetSessionAndWindowId();this.kt=n,this.oi=r,this.M=this.ai(),this.xt>=this.It.sessionTimeoutMs&&Ir.warn("session_idle_threshold_ms ("+this.xt+") is greater than the session timeout ("+this.It.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(t){this.Ct?(this.li(t),Tn(Ie,"beforeunload",this.Qt),Tn(Ie,"offline",this.ti),Tn(Ie,"online",this.ei),Tn(Ie,"visibilitychange",this.ri),this.ui(),this.hi(),ln(this.Jt)&&(this.Jt=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this.di(n==null?void 0:n.properties.$current_url):"";if(!r)return;this.ii("$pageview",{href:r})}}catch(i){Ir.error("Could not add $pageview to rrweb session",i)}})),this.Vt||(this.Vt=this.It.onSessionId((n,r,i)=>{var o,s,a,l;i&&(this.ii("$session_id_change",{sessionId:n,windowId:r,changeReason:i}),(o=this._instance)==null||(s=o.persistence)==null||s.unregister(Fw),(a=this._instance)==null||(l=a.persistence)==null||l.unregister(Lw))}))):this.stopRecording()}stopRecording(){var t,n,r,i;this.Et&&this.ni&&(this.ni(),this.ni=void 0,this.Et=!1,Ie==null||Ie.removeEventListener("beforeunload",this.Qt),Ie==null||Ie.removeEventListener("offline",this.ti),Ie==null||Ie.removeEventListener("online",this.ei),Ie==null||Ie.removeEventListener("visibilitychange",this.ri),this.ai(),clearInterval(this.vi),(t=this.Jt)==null||t.call(this),this.Jt=void 0,(n=this.Xt)==null||n.call(this),this.Xt=void 0,(r=this.Vt)==null||r.call(this),this.Vt=void 0,(i=this.Yt)==null||i.call(this),this.Yt=void 0,this.qt.stop(),this.Ut.stop(),this.Bt.stop(),Ir.info("stopped"))}ci(){var t;(t=this._instance.persistence)==null||t.unregister(Fd)}fi(t){var n,r=this.kt!==t,i=this.jt;if($r(i)){var o=this.Tt,s=r||!Ds(o),a=s?Sie(t,i):o;s&&(a?this.pi(bS):Ir.warn("Sample rate ("+i+") has determined that this sessionId ("+t+") will not be sent to the server."),this.ii("samplingDecisionMade",{sampleRate:i,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Fd]:a})}else this.ci()}onRemoteConfig(t){var n,r,i,o;this.ii("$remote_config_received",t),this.gi(t),(n=t.sessionRecording)!=null&&n.endpoint&&(this.si=(o=t.sessionRecording)==null?void 0:o.endpoint),this.ui(),((r=t.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.zt=Nie,this.Rt=new zO([this.qt,this.Ut])):(this.zt=Rie,this.Rt=new HO([this.qt,this.Ut])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(i=t.sessionRecording)==null?void 0:i.triggerMatchType}),this.Ut.onRemoteConfig(t),this.qt.onRemoteConfig(t),this.Bt.onRemoteConfig(t,(s,a)=>{this.pi("linked_flag_matched",{flag:s,variant:a})}),this.Nt=!0,this.startIfEnabledOrStop()}ui(){$r(this.jt)&&ln(this.Yt)&&(this.Yt=this.It.onSessionId(t=>{this.fi(t)}))}gi(t){if(this._instance.persistence){var n,r=this._instance.persistence,i=()=>{var o,s,a,l,u,d,f,h,p,v=(o=t.sessionRecording)==null?void 0:o.sampleRate,y=ln(v)?null:parseFloat(v);ln(y)&&this.ci();var w=(s=t.sessionRecording)==null?void 0:s.minimumDurationMilliseconds;r.register({[Dw]:!!t.sessionRecording,[tA]:(a=t.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[nA]:yt({capturePerformance:t.capturePerformance},(l=t.sessionRecording)==null?void 0:l.networkPayloadCapture),[rA]:(u=t.sessionRecording)==null?void 0:u.masking,[iA]:{enabled:(d=t.sessionRecording)==null?void 0:d.recordCanvas,fps:(f=t.sessionRecording)==null?void 0:f.canvasFps,quality:(h=t.sessionRecording)==null?void 0:h.canvasQuality},[oA]:y,[sA]:gt(w)?null:w,[aA]:(p=t.sessionRecording)==null?void 0:p.scriptConfig})};i(),(n=this.Kt)==null||n.call(this),this.Kt=this.It.onSessionId(i)}}log(t,n){var r;n===void 0&&(n="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(t)]}},timestamp:Date.now()})}li(t){if(!gt(Object.assign)&&!gt(Array.from)&&!(this.Et||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Et=!0,this.It.checkAndGetSessionAndWindowId(),Fp()?this.mi():(n=zt.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.bi,r=>{if(r)return Ir.error("could not load recorder",r);this.mi()}),Ir.info("starting"),this.status===$m&&this.pi(t||"recording_initialized")}}get bi(){var t,n,r;return((t=this._instance)==null||(n=t.persistence)==null||(r=n.get_property(aA))==null?void 0:r.script)||"recorder"}wi(t){var n;return t.type===3&&Iie.indexOf((n=t.data)==null?void 0:n.source)!==-1}yi(t){var n=this.wi(t);n||this.Wt||t.timestamp-this.Gt>this.xt&&(this.Wt=!0,clearInterval(this.vi),this.ii("sessionIdle",{eventTimestamp:t.timestamp,lastActivityTimestamp:this.Gt,threshold:this.xt,bufferLength:this.M.data.length,bufferSize:this.M.size}),this.Zt());var r=!1;if(n&&(this.Gt=t.timestamp,this.Wt)){var i=this.Wt==="unknown";this.Wt=!1,i||(this.ii("sessionNoLongerIdle",{reason:"user activity",type:t.type}),r=!0)}if(!this.Wt){var{windowId:o,sessionId:s}=this.It.checkAndGetSessionAndWindowId(!n,t.timestamp),a=this.kt!==s,l=this.oi!==o;this.oi=o,this.kt=s,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Si()}}$i(t){try{return t.rrwebMethod(),!0}catch(n){return this.Ht.length<10?this.Ht.push({enqueuedAt:t.enqueuedAt||Date.now(),attempt:t.attempt++,rrwebMethod:t.rrwebMethod}):Ir.warn("could not emit queued rrweb event.",n,t),!1}}ii(t,n){return this.$i(jA(()=>Fp().addCustomEvent(t,n)))}ki(){return this.$i(jA(()=>Fp().takeFullSnapshot()))}mi(){var t,n,r,i,o={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},s=this._instance.config.session_recording;for(var[a,l]of Object.entries(s||{}))a in o&&(a==="maskInputOptions"?o.maskInputOptions=yt({password:!0},l):o[a]=l);this.Ft&&this.Ft.enabled&&(o.recordCanvas=!0,o.sampling={canvas:this.Ft.fps},o.dataURLOptions={type:"image/webp",quality:this.Ft.quality}),this.Dt&&(o.maskAllInputs=(n=this.Dt.maskAllInputs)===null||n===void 0||n,o.maskTextSelector=(r=this.Dt.maskTextSelector)!==null&&r!==void 0?r:void 0,o.blockSelector=(i=this.Dt.blockSelector)!==null&&i!==void 0?i:void 0);var u=Fp();if(u){this.xi=(t=this.xi)!==null&&t!==void 0?t:new hie(u,{refillRate:this._instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this._instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(f,h)=>{var p="Too many mutations on node '"+f+"'. Rate limiting. This could be due to SVG animations or something similar";Ir.info(p,{node:h}),this.log(zd+" "+p,"warn")}});var d=this.Ei();this.ni=u(yt({emit:f=>{this.onRRwebEmit(f)},plugins:d},o)),this.Gt=Date.now(),this.Wt=Ds(this.Wt)?this.Wt:"unknown",this.ii("$session_options",{sessionRecordingOptions:o,activePlugins:d.map(f=>f==null?void 0:f.name)}),this.ii("$posthog_config",{config:this._instance.config})}else Ir.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Si(){if(this.vi&&clearInterval(this.vi),this.Wt!==!0){var t=this.Pt;t&&(this.vi=setInterval(()=>{this.ki()},t))}}Ei(){var t,n,r,i,o=[],s=(t=zt.__PosthogExtensions__)==null||(n=t.rrwebPlugins)==null?void 0:n.getRecordConsolePlugin;s&&this.Ot&&o.push(s());var a=(r=zt.__PosthogExtensions__)==null||(i=r.rrwebPlugins)==null?void 0:i.getRecordNetworkPlugin;return this.At&&Qi(a)&&(!Tre.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?o.push(a(fie(this._instance.config,this.At))):Ir.info("NetworkCapture not started because we are on localhost.")),o}onRRwebEmit(t){var n;if(this.Ii(),t&&zn(t)){if(t.type===js.Meta){var r=this.di(t.data.href);if(this.Pi=r,!r)return;t.data.href=r}else this.Ri();if(this.Ut.checkUrlTriggerConditions(()=>this.Ti(),()=>this.Mi(),h=>this.Ci(h)),!this.Ut.urlBlocked||(i=t).type===js.Custom&&i.data.tag==="recording paused"){var i;t.type===js.FullSnapshot&&this.Si(),t.type===js.FullSnapshot&&this.Nt&&this.Rt.triggerStatus(this.sessionId)===Fr&&this.ai();var o=this.xi?this.xi.throttleMutations(t):t;if(o){var s=function(h){var p=h;if(p&&zn(p)&&p.type===6&&zn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var v=[],y=0;y<p.data.payload.payload.length;y++)p.data.payload.payload[y]&&p.data.payload.payload[y].length>2e3?v.push(p.data.payload.payload[y].slice(0,2e3)+"...[truncated]"):v.push(p.data.payload.payload[y]);return p.data.payload.payload=v,h}return h}(o);if(this.yi(s),this.Wt!==!0||AA(s)){if(AA(s)){var a=s.data.payload;if(a){var l=a.lastActivityTimestamp,u=a.threshold;s.timestamp=l+u}}var d=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(h){if(Pm(h)<1024)return h;try{if(h.type===js.FullSnapshot)return yt({},h,{data:dl(h.data),cv:"2024-10"});if(h.type===js.IncrementalSnapshot&&h.data.source===po.Mutation)return yt({},h,{cv:"2024-10",data:yt({},h.data,{texts:dl(h.data.texts),attributes:dl(h.data.attributes),removes:dl(h.data.removes),adds:dl(h.data.adds)})});if(h.type===js.IncrementalSnapshot&&h.data.source===po.StyleSheetRule)return yt({},h,{cv:"2024-10",data:yt({},h.data,{adds:h.data.adds?dl(h.data.adds):void 0,removes:h.data.removes?dl(h.data.removes):void 0})})}catch(p){Ir.error("could not compress event - will use uncompressed event",p)}return h}(s):s,f={$snapshot_bytes:Pm(d),$snapshot_data:d,$session_id:this.kt,$window_id:this.oi};this.status!==Ga?this.Oi(f):this.ai()}}}}}Ri(){if(!this._instance.config.capture_pageview&&Ie){var t=this.di(Ie.location.href);this.Pi!==t&&(this.ii("$url_changed",{href:t}),this.Pi=t)}}Ii(){if(this.Ht.length){var t=[...this.Ht];this.Ht=[],t.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.$i(n)})}}di(t){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:t};return(r=i=n.maskNetworkRequestFn(i))==null?void 0:r.url}return t}ai(){return this.M={size:0,data:[],sessionId:this.kt,windowId:this.oi},this.M}Zt(){this.Fi&&(clearTimeout(this.Fi),this.Fi=void 0);var t=this.Lt,n=this.Mt,r=$r(n)&&n>=0,i=$r(t)&&r&&n<t;return this.status===Yl||this.status===wS||this.status===Ga||i?(this.Fi=setTimeout(()=>{this.Zt()},2e3),this.M):(this.M.data.length>0&&Yw(this.M).forEach(o=>{this.Ai({$snapshot_bytes:o.size,$snapshot_data:o.data,$session_id:o.sessionId,$window_id:o.windowId,$lib:"web",$lib_version:Ps.LIB_VERSION})}),this.ai())}Oi(t){var n,r=2+(((n=this.M)==null?void 0:n.data.length)||0);!this.Wt&&(this.M.size+t.$snapshot_bytes+r>943718.4||this.M.sessionId!==this.kt)&&(this.M=this.Zt()),this.M.size+=t.$snapshot_bytes,this.M.data.push(t.$snapshot_data),this.Fi||this.Wt||(this.Fi=setTimeout(()=>{this.Zt()},2e3))}Ai(t){this._instance.capture("$snapshot",t,{_url:this._instance.requestRouter.endpointFor("api",this.si),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}Ci(t){var n,r;this.Rt.triggerStatus(this.sessionId)===Fr&&((n=this._instance)==null||(r=n.persistence)==null||r.register({[t==="url"?Lw:Fw]:this.kt}),this.Zt(),this.pi(t+"_trigger_matched"))}Ti(){this.Ut.urlBlocked||(this.Ut.urlBlocked=!0,clearInterval(this.vi),Ir.info("recording paused due to URL blocker"),this.ii("recording paused",{reason:"url blocker"}))}Mi(){this.Ut.urlBlocked&&(this.Ut.urlBlocked=!1,this.ki(),this.Si(),this.ii("recording resumed",{reason:"left blocked url"}),Ir.info("recording resumed"))}hi(){this.qt.St.length!==0&&ln(this.Xt)&&(this.Xt=this._instance.on("eventCaptured",t=>{try{this.qt.St.includes(t.event)&&this.Ci("event")}catch(n){Ir.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Bt.linkedFlagSeen=!0,this.ki(),this.pi("linked_flag_overridden")}overrideSampling(){var t;(t=this._instance.persistence)==null||t.register({[Fd]:!0}),this.ki(),this.pi("sampling_overridden")}overrideTrigger(t){this.Ci(t)}pi(t,n){this._instance.register_for_session({$session_recording_start_reason:t}),Ir.info(t.replace("_"," "),n),Yt(["recording_initialized","session_id_changed"],t)||this.ii(t,n)}get sdkDebugProperties(){var{sessionStartTimestamp:t}=this.It.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.M.data.length,$sdk_debug_replay_internal_buffer_size:this.M.size,$sdk_debug_current_session_duration:this.Mt,$sdk_debug_session_start:t}}}var Ex=Wr("[SegmentIntegration]");function Oie(e,t){var n=e.config.segment;if(!n)return t();(function(r,i){var o=r.config.segment;if(!o)return i();var s=l=>{var u=()=>l.anonymousId()||Ca();r.config.get_device_id=u,l.id()&&(r.register({distinct_id:l.id(),$device_id:u()}),r.persistence.set_property(Cs,"identified")),i()},a=o.user();"then"in a&&Qi(a.then)?a.then(l=>s(l)):s(a)})(e,()=>{n.register((r=>{Promise&&Promise.resolve||Ex.warn("This browser does not have Promise support, and can not use the segment integration");var i=(o,s)=>{var a;if(!s)return o;o.event.userId||o.event.anonymousId===r.get_distinct_id()||(Ex.info("No userId set, resetting PostHog"),r.reset()),o.event.userId&&o.event.userId!==r.get_distinct_id()&&(Ex.info("UserId set, identifying with PostHog"),r.identify(o.event.userId));var l=r.Di(s,(a=o.event.properties)!==null&&a!==void 0?a:{},new Date);return o.event.properties=Object.assign({},l,o.event.properties),o};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:o=>i(o,o.event.event),page:o=>i(o,"$pageview"),identify:o=>i(o,"$identify"),screen:o=>i(o,"$screen")}})(e)).then(()=>{t()})})}var WO="posthog-js";function UO(e,t){var{organization:n,projectId:r,prefix:i,severityAllowList:o=["error"]}=t===void 0?{}:t;return s=>{var a,l,u,d,f;if(!(o==="*"||o.includes(s.level))||!e.__loaded)return s;s.tags||(s.tags={});var h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());s.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var p=((a=s.exception)==null?void 0:a.values)||[],v=p.map(w=>yt({},w,{stacktrace:w.stacktrace?yt({},w.stacktrace,{type:"raw",frames:(w.stacktrace.frames||[]).map(x=>yt({},x,{platform:"web:javascript"}))}):void 0})),y={$exception_message:((l=p[0])==null?void 0:l.value)||s.message,$exception_type:(u=p[0])==null?void 0:u.type,$exception_personURL:h,$exception_level:s.level,$exception_list:v,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((d=p[0])==null?void 0:d.value)||s.message,$sentry_exception_type:(f=p[0])==null?void 0:f.type,$sentry_tags:s.tags};return n&&r&&(y.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+s.event_id),e.exceptions.sendExceptionEvent(y),s}}class $ie{constructor(t,n,r,i,o){this.name=WO,this.setupOnce=function(s){s(UO(t,{organization:n,projectId:r,prefix:i,severityAllowList:o}))}}}var As,Mie=Ie!=null&&Ie.location?Tm(Ie.location.hash,"__posthog")||Tm(location.hash,"state"):null,NA="_postHogToolbarParams",RA=Wr("[Toolbar]");(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"})(As||(As={}));class Die{constructor(t){this.instance=t}ji(t){zt.ph_toolbar_state=t}Li(){var t;return(t=zt.ph_toolbar_state)!==null&&t!==void 0?t:As.UNINITIALIZED}maybeLoadToolbar(t,n,r){var i,o;if(t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!Ie||!bt)return!1;t=(i=t)!==null&&i!==void 0?i:Ie.location,r=(o=r)!==null&&o!==void 0?o:Ie.history;try{if(!n){try{Ie.localStorage.setItem("test","test"),Ie.localStorage.removeItem("test")}catch(u){return!1}n=Ie==null?void 0:Ie.localStorage}var s,a=Mie||Tm(t.hash,"__posthog")||Tm(t.hash,"state"),l=a?Xj(()=>JSON.parse(atob(decodeURIComponent(a))))||Xj(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((s=l).source="url",s&&Object.keys(s).length>0&&(l.desiredHash?t.hash=l.desiredHash:r?r.replaceState(r.state,"",t.pathname+t.search):t.hash="")):((s=JSON.parse(n.getItem(NA)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch(u){return!1}}Ni(t){var n=zt.ph_load_toolbar||zt.ph_load_editor;!ln(n)&&Qi(n)?n(t,this.instance):RA.warn("No toolbar load function found")}loadToolbar(t){var n=!(bt==null||!bt.getElementById(mO));if(!Ie||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=yt({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(Ie.localStorage.setItem(NA,JSON.stringify(yt({},i,{source:void 0}))),this.Li()===As.LOADED)this.Ni(i);else if(this.Li()===As.UNINITIALIZED){var o;this.ji(As.LOADING),(o=zt.__PosthogExtensions__)==null||o.loadExternalDependency==null||o.loadExternalDependency(this.instance,"toolbar",s=>{if(s)return RA.error("[Toolbar] Failed to load",s),void this.ji(As.UNINITIALIZED);this.ji(As.LOADED),this.Ni(i)}),Tn(Ie,"turbolinks:load",()=>{this.ji(As.UNINITIALIZED),this.loadToolbar(i)})}return!0}zi(t){return this.loadToolbar(t)}maybeLoadEditor(t,n,r){return t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(t,n,r)}}var Lie=Wr("[TracingHeaders]");class Fie{constructor(t){this.Ui=void 0,this.qi=void 0,this.V=()=>{var n,r,i,o;gt(this.Ui)&&((n=zt.__PosthogExtensions__)==null||(r=n.tracingHeadersPatchFns)==null||r._patchXHR(this._instance.sessionManager)),gt(this.qi)&&((i=zt.__PosthogExtensions__)==null||(o=i.tracingHeadersPatchFns)==null||o._patchFetch(this._instance.sessionManager))},this._instance=t}G(t){var n,r;(n=zt.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&t(),(r=zt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",i=>{if(i)return Lie.error("failed to load script",i);t()})}startIfEnabledOrStop(){var t,n;this._instance.config.__add_tracing_headers?this.G(this.V):((t=this.Ui)==null||t.call(this),(n=this.qi)==null||n.call(this),this.Ui=void 0,this.qi=void 0)}}var ga=Wr("[Web Vitals]"),TA=9e5;class Bie{constructor(t){var n;this.Bi=!1,this.i=!1,this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Hi=()=>{clearTimeout(this.Wi),this.M.metrics.length!==0&&(this._instance.capture("$web_vitals",this.M.metrics.reduce((r,i)=>yt({},r,{["$web_vitals_"+i.name+"_event"]:yt({},i),["$web_vitals_"+i.name+"_value"]:i.value}),{})),this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Gi=r=>{var i,o=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(gt(o))ga.error("Could not read session ID. Dropping metrics!");else{this.M=this.M||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var s=this.Ji();gt(s)||(ln(r==null?void 0:r.name)||ln(r==null?void 0:r.value)?ga.error("Invalid metric received",r):this.Vi&&r.value>=this.Vi?ga.error("Ignoring metric with value >= "+this.Vi,r):(this.M.url!==s&&(this.Hi(),this.Wi=setTimeout(this.Hi,this.flushToCaptureTimeoutMs)),gt(this.M.url)&&(this.M.url=s),this.M.firstMetricTimestamp=gt(this.M.firstMetricTimestamp)?Date.now():this.M.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.M.metrics.push(yt({},r,{$current_url:s,$session_id:o.sessionId,$window_id:o.windowId,timestamp:Date.now()})),this.M.metrics.length===this.allowedMetrics.length&&this.Hi()))}},this.V=()=>{var r,i,o,s,a=zt.__PosthogExtensions__;gt(a)||gt(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:o,onINP:s}=a.postHogWebVitalsCallbacks),r&&i&&o&&s?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Gi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Gi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&o(this.Gi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&s(this.Gi.bind(this)),this.i=!0):ga.error("web vitals callbacks not loaded - not starting")},this._instance=t,this.Bi=!((n=this._instance.persistence)==null||!n.props[Zj]),this.startIfEnabled()}get allowedMetrics(){var t,n,r=zn(this._instance.config.capture_performance)?(t=this._instance.config.capture_performance)==null?void 0:t.web_vitals_allowed_metrics:void 0;return gt(r)?((n=this._instance.persistence)==null?void 0:n.props[eA])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(zn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Vi(){var t=zn(this._instance.config.capture_performance)&&$r(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:TA;return 0<t&&t<=6e4?TA:t}get isEnabled(){var t=ui==null?void 0:ui.protocol;if(t!=="http:"&&t!=="https:")return ga.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=zn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Ds(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Ds(n)?n:this.Bi}startIfEnabled(){this.isEnabled&&!this.i&&(ga.info("enabled, starting..."),this.G(this.V))}onRemoteConfig(t){var n=zn(t.capturePerformance)&&!!t.capturePerformance.web_vitals,r=zn(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[Zj]:n}),this._instance.persistence.register({[eA]:r})),this.Bi=n,this.startIfEnabled()}G(t){var n,r;(n=zt.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&t(),(r=zt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",i=>{i?ga.error("failed to load script",i):t()})}Ji(){var t=Ie?Ie.location.href:void 0;return t||ga.error("Could not determine current URL"),t}}var zie=Wr("[Heatmaps]");function IA(e){return zn(e)&&"clientX"in e&&"clientY"in e&&$r(e.clientX)&&$r(e.clientY)}class Hie{constructor(t){var n;this.rageclicks=new jO,this.Bi=!1,this.i=!1,this.Ki=null,this.instance=t,this.Bi=!((n=this.instance.persistence)==null||!n.props[Mw])}get flushIntervalMilliseconds(){var t=5e3;return zn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return gt(this.instance.config.capture_heatmaps)?gt(this.instance.config.enable_heatmaps)?this.Bi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;zie.info("starting..."),this.Yi(),this.Ki=setInterval(this.Xi.bind(this),this.flushIntervalMilliseconds)}else{var t,n;clearInterval((t=this.Ki)!==null&&t!==void 0?t:void 0),(n=this.Qi)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(t){var n=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Mw]:n}),this.Bi=n,this.startIfEnabled()}getAndClearBuffer(){var t=this.M;return this.M=void 0,t}Zi(t){this.te(t.originalEvent,"deadclick")}Yi(){Ie&&bt&&(Tn(Ie,"beforeunload",this.Xi.bind(this)),Tn(bt,"click",t=>this.te(t||(Ie==null?void 0:Ie.event)),{capture:!0}),Tn(bt,"mousemove",t=>this.ie(t||(Ie==null?void 0:Ie.event)),{capture:!0}),this.Qi=new NO(this.instance,qre,this.Zi.bind(this)),this.Qi.startIfEnabled(),this.i=!0)}ee(t,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),o=this.instance.scrollManager.scrollElement(),s=function(a,l,u){for(var d=a;d&&av(d)&&!Da(d,"body");){if(d===u)return!1;if(Yt(l,Ie==null?void 0:Ie.getComputedStyle(d).position))return!0;d=wO(d)}return!1}(bO(t),["fixed","sticky"],o);return{x:t.clientX+(s?0:i),y:t.clientY+(s?0:r),target_fixed:s,type:n}}te(t,n){var r;if(n===void 0&&(n="click"),!uA(t.target)&&IA(t)){var i=this.ee(t,n);(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.re(yt({},i,{type:"rageclick"})),this.re(i)}}ie(t){!uA(t.target)&&IA(t)&&(clearTimeout(this.se),this.se=setTimeout(()=>{this.re(this.ee(t,"mousemove"))},500))}re(t){if(Ie){var n=Ie.location.href;this.M=this.M||{},this.M[n]||(this.M[n]=[]),this.M[n].push(t)}}Xi(){this.M&&!Fu(this.M)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class Wie{constructor(t){this._instance=t}doPageView(t,n){var r,i=this.ne(t,n);return this.oe={pathname:(r=Ie==null?void 0:Ie.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:t},this._instance.scrollManager.resetContext(),i}doPageLeave(t){var n;return this.ne(t,(n=this.oe)==null?void 0:n.pageViewId)}doEvent(){var t;return{$pageview_id:(t=this.oe)==null?void 0:t.pageViewId}}ne(t,n){var r=this.oe;if(!r)return{$pageview_id:n};var i={$pageview_id:n,$prev_pageview_id:r.pageViewId},o=this._instance.scrollManager.getContext();if(o&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:d,maxContentY:f}=o;if(!(gt(s)||gt(a)||gt(l)||gt(u)||gt(d)||gt(f))){s=Math.ceil(s),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),d=Math.ceil(d),f=Math.ceil(f);var h=s<=1?1:Xi(a/s,0,1),p=s<=1?1:Xi(l/s,0,1),v=u<=1?1:Xi(d/u,0,1),y=u<=1?1:Xi(f/u,0,1);i=Zn(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:d,$prev_pageview_last_content_percentage:v,$prev_pageview_max_content:f,$prev_pageview_max_content_percentage:y})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(t.getTime()-r.timestamp.getTime())/1e3),i}}class Uie{constructor(t){this._instance=t}sendExceptionEvent(t){this._instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var eo="Mobile",Mm="iOS",Zo="Android",oh="Tablet",VO=Zo+" "+oh,qO="iPad",KO="Apple",GO=KO+" Watch",sh="Safari",Nc="BlackBerry",YO="Samsung",XO=YO+"Browser",JO=YO+" Internet",Xl="Chrome",Vie=Xl+" OS",QO=Xl+" "+Mm,SS="Internet Explorer",ZO=SS+" "+eo,ES="Opera",qie=ES+" Mini",kS="Edge",e5="Microsoft "+kS,Qu="Firefox",t5=Qu+" "+Mm,ah="Nintendo",lh="PlayStation",Zu="Xbox",n5=Zo+" "+eo,r5=eo+" "+sh,Hd="Windows",n_=Hd+" Phone",PA="Nokia",r_="Ouya",i5="Generic",Kie=i5+" "+eo.toLowerCase(),o5=i5+" "+oh.toLowerCase(),i_="Konqueror",Yr="(\\d+(\\.\\d+)?)",kx=new RegExp("Version/"+Yr),Gie=new RegExp(Zu,"i"),Yie=new RegExp(lh+" \\w+","i"),Xie=new RegExp(ah+" \\w+","i"),CS=new RegExp(Nc+"|PlayBook|BB10","i"),Jie={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Qie=(e,t)=>t&&Yt(t,KO)||function(n){return Yt(n,sh)&&!Yt(n,Xl)&&!Yt(n,Zo)}(e),s5=function(e,t){return t=t||"",Yt(e," OPR/")&&Yt(e,"Mini")?qie:Yt(e," OPR/")?ES:CS.test(e)?Nc:Yt(e,"IE"+eo)||Yt(e,"WPDesktop")?ZO:Yt(e,XO)?JO:Yt(e,kS)||Yt(e,"Edg/")?e5:Yt(e,"FBIOS")?"Facebook "+eo:Yt(e,"UCWEB")||Yt(e,"UCBrowser")?"UC Browser":Yt(e,"CriOS")?QO:Yt(e,"CrMo")||Yt(e,Xl)?Xl:Yt(e,Zo)&&Yt(e,sh)?n5:Yt(e,"FxiOS")?t5:Yt(e.toLowerCase(),i_.toLowerCase())?i_:Qie(e,t)?Yt(e,eo)?r5:sh:Yt(e,Qu)?Qu:Yt(e,"MSIE")||Yt(e,"Trident/")?SS:Yt(e,"Gecko")?Qu:""},Zie={[ZO]:[new RegExp("rv:"+Yr)],[e5]:[new RegExp(kS+"?\\/"+Yr)],[Xl]:[new RegExp("("+Xl+"|CrMo)\\/"+Yr)],[QO]:[new RegExp("CriOS\\/"+Yr)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Yr)],[sh]:[kx],[r5]:[kx],[ES]:[new RegExp("(Opera|OPR)\\/"+Yr)],[Qu]:[new RegExp(Qu+"\\/"+Yr)],[t5]:[new RegExp("FxiOS\\/"+Yr)],[i_]:[new RegExp("Konqueror[:/]?"+Yr,"i")],[Nc]:[new RegExp(Nc+" "+Yr),kx],[n5]:[new RegExp("android\\s"+Yr,"i")],[JO]:[new RegExp(XO+"\\/"+Yr)],[SS]:[new RegExp("(rv:|MSIE )"+Yr)],Mozilla:[new RegExp("rv:"+Yr)]},eoe=function(e,t){var n=s5(e,t),r=Zie[n];if(gt(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=e.match(o);if(s)return parseFloat(s[s.length-2])}return null},OA=[[new RegExp(Zu+"; "+Zu+" (.*?)[);]","i"),e=>[Zu,e&&e[1]||""]],[new RegExp(ah,"i"),[ah,""]],[new RegExp(lh,"i"),[lh,""]],[CS,[Nc,""]],[new RegExp(Hd,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[n_,""];if(new RegExp(eo).test(t)&&!/IEMobile\b/.test(t))return[Hd+" "+eo,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=Jie[r]||"";return/arm/i.test(t)&&(i="RT"),[Hd,i]}return[Hd,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[Mm,t.join(".")]}return[Mm,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=gt(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+Zo+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Zo+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[Zo,t.join(".")]}return[Zo,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Vie,""]],[/Linux|debian/i,["Linux",""]]],$A=function(e){return Xie.test(e)?ah:Yie.test(e)?lh:Gie.test(e)?Zu:new RegExp(r_,"i").test(e)?r_:new RegExp("("+n_+"|WPDesktop)","i").test(e)?n_:/iPad/.test(e)?qO:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?GO:CS.test(e)?Nc:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(PA,"i").test(e)?PA:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(eo).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?Zo:VO:Zo:new RegExp("(pda|"+eo+")","i").test(e)?Kie:new RegExp(oh,"i").test(e)&&!new RegExp(oh+" pc","i").test(e)?o5:""},Bp="https?://(.*)",uv=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],toe=sv(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],uv),jS="<masked>";function a5(e,t,n){if(!bt)return{};var r=t?sv([],uv,n||[]):[];return l5(mS(bt.URL,r,jS),e)}function l5(e,t){var n=toe.concat(t||[]),r={};return mn(n,function(i){var o=Rm(e,i);r[i]=o||null}),r}function u5(e){var t=function(o){return o?o.search(Bp+"google.([^/?]*)")===0?"google":o.search(Bp+"bing.com")===0?"bing":o.search(Bp+"yahoo.com")===0?"yahoo":o.search(Bp+"duckduckgo.com")===0?"duckduckgo":null:null}(e),n=t!="yahoo"?"q":"p",r={};if(!tl(t)){r.$search_engine=t;var i=bt?Rm(bt.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function MA(){return navigator.language||navigator.userLanguage}function c5(){return(bt==null?void 0:bt.referrer)||"$direct"}function d5(e,t){var n=e?sv([],uv,t||[]):[],r=ui==null?void 0:ui.href.substring(0,1e3);return{r:c5().substring(0,1e3),u:r?mS(r,n,jS):void 0}}function f5(e){var t,{r:n,u:r}=e,i={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(t=jc(n))==null?void 0:t.host};if(r){i.$current_url=r;var o=jc(r);i.$host=o==null?void 0:o.host,i.$pathname=o==null?void 0:o.pathname;var s=l5(r);Zn(i,s)}if(n){var a=u5(n);Zn(i,a)}return i}function h5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}function noe(){try{return new Date().getTimezoneOffset()}catch(e){return}}function roe(e,t){if(!ai)return{};var n,r,i,o=e?sv([],uv,t||[]):[],[s,a]=function(l){for(var u=0;u<OA.length;u++){var[d,f]=OA[u],h=d.exec(l),p=h&&(Qi(f)?f(h,l):f);if(p)return p}return["",""]}(ai);return Zn(pS({$os:s,$os_version:a,$browser:s5(ai,navigator.vendor),$device:$A(ai),$device_type:(r=ai,i=$A(r),i===qO||i===VO||i==="Kobo"||i==="Kindle Fire"||i===o5?oh:i===ah||i===Zu||i===lh||i===r_?"Console":i===GO?"Wearable":i?eo:"Desktop"),$timezone:h5(),$timezone_offset:noe()}),{$current_url:mS(ui==null?void 0:ui.href,o,jS),$host:ui==null?void 0:ui.host,$pathname:ui==null?void 0:ui.pathname,$raw_user_agent:ai.length>1e3?ai.substring(0,997)+"...":ai,$browser_version:eoe(ai,navigator.vendor),$browser_language:MA(),$browser_language_prefix:(n=MA(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:Ie==null?void 0:Ie.screen.height,$screen_width:Ie==null?void 0:Ie.screen.width,$viewport_height:Ie==null?void 0:Ie.innerHeight,$viewport_width:Ie==null?void 0:Ie.innerWidth,$lib:"web",$lib_version:Ps.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var o_,Xo=Wr("[FeatureFlags]"),Cx="$active_feature_flags",xu="$override_feature_flags",DA="$feature_flag_payloads",Sd="$override_feature_flag_payloads",LA="$feature_flag_request_id",FA=e=>{var t={};for(var[n,r]of hg(e||{}))r&&(t[n]=r);return t},ioe=e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(n=>{var r;return[n,(r=t[n].variant)!==null&&r!==void 0?r:t[n].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(n=>t[n].enabled).filter(n=>{var r;return(r=t[n].metadata)==null?void 0:r.payload}).map(n=>{var r;return[n,(r=t[n].metadata)==null?void 0:r.payload]}))):Xo.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e};(function(e){e.FeatureFlags="feature_flags",e.Recordings="recordings"})(o_||(o_={}));class ooe{constructor(t){this.ae=!1,this.le=!1,this.ue=!1,this.he=!1,this.de=!1,this.ve=!1,this.ce=!1,this._instance=t,this.featureFlagEventHandlers=[]}decide(){if(this._instance.config.__preview_remote_config)this.ve=!0;else{var t=!this.fe&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.pe({disableFlags:t})}}get hasLoadedFlags(){return this.le}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this._instance.get_property(Bw),n=this._instance.get_property(xu),r=this._instance.get_property(Sd);if(!r&&!n)return t||{};var i=Zn({},t||{}),o=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var s of o){var a,l,u=i[s],d=n==null?void 0:n[s],f=gt(d)?(a=u==null?void 0:u.enabled)!==null&&a!==void 0&&a:!!d,h=gt(d)?u.variant:typeof d=="string"?d:void 0,p=r==null?void 0:r[s],v=yt({},u,{enabled:f,variant:f?h!=null?h:u==null?void 0:u.variant:void 0});f!==(u==null?void 0:u.enabled)&&(v.original_enabled=u==null?void 0:u.enabled),h!==(u==null?void 0:u.variant)&&(v.original_variant=u==null?void 0:u.variant),p&&(v.metadata=yt({},u==null?void 0:u.metadata,{payload:p,original_payload:u==null||(l=u.metadata)==null?void 0:l.payload})),i[s]=v}return this.ae||(Xo.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:r,finalDetails:i}),this.ae=!0),i}getFlagVariants(){var t=this._instance.get_property(Bu),n=this._instance.get_property(xu);if(!n)return t||{};for(var r=Zn({},t),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||(Xo.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:n,finalFlags:r}),this.ae=!0),r}getFlagPayloads(){var t=this._instance.get_property(DA),n=this._instance.get_property(Sd);if(!n)return t||{};for(var r=Zn({},t||{}),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||(Xo.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:n,finalPayloads:r}),this.ae=!0),r}reloadFeatureFlags(){this.he||this._instance.config.advanced_disable_feature_flags||this.fe||(this.fe=setTimeout(()=>{this.pe()},5))}ge(){clearTimeout(this.fe),this.fe=void 0}ensureFlagsLoaded(){this.le||this.ue||this.fe||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.he=t}pe(t){var n;if(this.ge(),!this._instance.config.advanced_disable_decide)if(this.ue)this.de=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:yt({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Bd)||{}),group_properties:this._instance.get_property(vl)};(t!=null&&t.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var i=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config;i&&(r.timezone=h5()),this.ue=!0,this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api",i?"/flags/?v=2":"/decide/?v=4"),data:r,compression:this._instance.config.disable_compression?void 0:bo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:o=>{var s,a,l,u=!0;o.statusCode===200&&(this.de||(this.$anon_distinct_id=void 0),u=!1),this.ue=!1,this.ve||(this.ve=!0,this._instance.me((l=o.json)!==null&&l!==void 0?l:{})),r.disable_flags&&!this.de||(this.ce=!u,o.json&&(s=o.json.quotaLimited)!=null&&s.includes(o_.FeatureFlags)?Xo.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(this.receivedFeatureFlags((a=o.json)!==null&&a!==void 0?a:{},u),this.de&&(this.de=!1,this.pe())))}})}}getFeatureFlag(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[t],i=""+r,o=this._instance.get_property(LA)||void 0,s=this._instance.get_property(jm)||{};if((n.send_event||!("send_event"in n))&&(!(t in s)||!s[t].includes(i))){var a,l,u,d,f,h,p,v,y,w,x;Bn(s[t])?s[t].push(i):s[t]=[i],(a=this._instance.persistence)==null||a.register({[jm]:s});var b=this.getFeatureFlagDetails(t),m={$feature_flag:t,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:o,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(u=l.featureFlags)==null?void 0:u[t])||null,$feature_flag_bootstrapped_payload:((d=this._instance.config.bootstrap)==null||(f=d.featureFlagPayloads)==null?void 0:f[t])||null,$used_bootstrap_value:!this.ce};gt(b==null||(h=b.metadata)==null?void 0:h.version)||(m.$feature_flag_version=b.metadata.version);var S,E=(p=b==null||(v=b.reason)==null?void 0:v.description)!==null&&p!==void 0?p:b==null||(y=b.reason)==null?void 0:y.code;E&&(m.$feature_flag_reason=E),b!=null&&(w=b.metadata)!=null&&w.id&&(m.$feature_flag_id=b.metadata.id),gt(b==null?void 0:b.original_variant)&&gt(b==null?void 0:b.original_enabled)||(m.$feature_flag_original_response=gt(b.original_variant)?b.original_enabled:b.original_variant),b!=null&&(x=b.metadata)!=null&&x.original_payload&&(m.$feature_flag_original_payload=b==null||(S=b.metadata)==null?void 0:S.original_payload),this._instance.capture("$feature_flag_called",m)}return r}Xo.warn('getFeatureFlag for key "'+t+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,n){var r=this._instance.config.token;this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api","/decide/?v=4"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:bo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var o,s=(o=i.json)==null?void 0:o.featureFlagPayloads;n((s==null?void 0:s[t])||void 0)}})}isFeatureEnabled(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(t,n);Xo.warn('isFeatureEnabled for key "'+t+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==t)}receivedFeatureFlags(t,n){if(this._instance.persistence){this.le=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),o=this.getFlagsWithDetails();(function(s,a,l,u,d){l===void 0&&(l={}),u===void 0&&(u={}),d===void 0&&(d={});var f=ioe(s),h=f.flags,p=f.featureFlags,v=f.featureFlagPayloads;if(p){var y=s.requestId;if(Bn(p)){Xo.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var w={};if(p)for(var x=0;x<p.length;x++)w[p[x]]=!0;a&&a.register({[Cx]:p,[Bu]:w})}else{var b=p,m=v,S=h;s.errorsWhileComputingFlags&&(b=yt({},l,b),m=yt({},u,m),S=yt({},d,S)),a&&a.register(yt({[Cx]:Object.keys(FA(b)),[Bu]:b||{},[DA]:m||{},[Bw]:S||{}},y?{[LA]:y}:{}))}}})(t,this._instance.persistence,r,i,o),this.be(n)}}override(t,n){n===void 0&&(n=!1),Xo.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:n})}overrideFeatureFlags(t){if(!this._instance.__loaded||!this._instance.persistence)return Xo.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(t===!1)return this._instance.persistence.unregister(xu),this._instance.persistence.unregister(Sd),void this.be();if(t&&typeof t=="object"&&("flags"in t||"payloads"in t)){var n,r=t;if(this.ae=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(xu);else if(r.flags)if(Bn(r.flags)){for(var i={},o=0;o<r.flags.length;o++)i[r.flags[o]]=!0;this._instance.persistence.register({[xu]:i})}else this._instance.persistence.register({[xu]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(Sd):r.payloads&&this._instance.persistence.register({[Sd]:r.payloads})),void this.be()}this.be()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.le){var{flags:n,flagVariants:r}=this.we();t(n,r)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,n){var r,i=(this._instance.get_property(pg)||[]).find(l=>l.flagKey===t),o={["$feature_enrollment/"+t]:n},s={$feature_flag:t,$feature_enrollment:n,$set:o};i&&(s.$early_access_feature_name=i.name),this._instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(o,!1);var a=yt({},this.getFlagVariants(),{[t]:n});(r=this._instance.persistence)==null||r.register({[Cx]:Object.keys(FA(a)),[Bu]:a}),this.be()}getEarlyAccessFeatures(t,n,r){n===void 0&&(n=!1);var i=this._instance.get_property(pg),o=r?"&"+r.map(s=>"stage="+s).join("&"):"";if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+o),method:"GET",callback:s=>{var a;if(s.json){var l=s.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[pg]:l}),t(l)}}})}we(){var t=this.getFlags(),n=this.getFlagVariants();return{flags:t.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,i)=>(r[i]=n[i],r),{})}}be(t){var{flags:n,flagVariants:r}=this.we();this.featureFlagEventHandlers.forEach(i=>i(n,r,{errorsLoading:t}))}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(Bd)||{};this._instance.register({[Bd]:yt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Bd)}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(vl)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=yt({},r[i],t[i]),delete t[i]}),this._instance.register({[vl]:yt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var n=this._instance.get_property(vl)||{};this._instance.register({[vl]:yt({},n,{[t]:{}})})}else this._instance.unregister(vl)}}var soe=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class jx{constructor(t){this.S=t,this.props={},this.ye=!1,this.Se=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(t),this.q=this.$e(t),this.load(),t.debug&&Et.info("Persistence loaded",t.persistence,yt({},this.props)),this.update_config(t,t),this.save()}$e(t){soe.indexOf(t.persistence.toLowerCase())===-1&&(Et.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var n=t.persistence.toLowerCase();return n==="localstorage"&&lr.O()?lr:n==="localstorage+cookie"&&Op.O()?Op:n==="sessionstorage"&&br.O()?br:n==="memory"?Ure:n==="cookie"?Hs:Op.O()?Op:Hs}properties(){var t={};return mn(this.props,function(n,r){if(r===Bu&&zn(n))for(var i=Object.keys(n),o=0;o<i.length;o++)t["$feature/"+i[o]]=n[i[o]];else a=r,l=!1,(tl(s=Sre)?l:Kj&&s.indexOf===Kj?s.indexOf(a)!=-1:(mn(s,function(u){if(l||(l=u===a))return km}),l))||(t[r]=n);var s,a,l}),t}load(){if(!this.ke){var t=this.q.D(this.Se);t&&(this.props=Zn({},t))}}save(){this.ke||this.q.j(this.Se,this.props,this.xe,this.Ee,this.Ie,this.S.debug)}remove(){this.q.L(this.Se,!1),this.q.L(this.Se,!0)}clear(){this.remove(),this.props={}}register_once(t,n,r){if(zn(t)){gt(n)&&(n="None"),this.xe=gt(r)?this.Pe:r;var i=!1;if(mn(t,(o,s)=>{this.props.hasOwnProperty(s)&&this.props[s]!==n||(this.props[s]=o,i=!0)}),i)return this.save(),!0}return!1}register(t,n){if(zn(t)){this.xe=gt(n)?this.Pe:n;var r=!1;if(mn(t,(i,o)=>{t.hasOwnProperty(o)&&this.props[o]!==i&&(this.props[o]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.ye){var t=a5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Fu(pS(t))||this.register(t),this.ye=!0}}update_search_keyword(){var t;this.register((t=bt==null?void 0:bt.referrer)?u5(t):{})}update_referrer_info(){var t;this.register_once({$referrer:c5(),$referring_domain:bt!=null&&bt.referrer&&((t=jc(bt.referrer))==null?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Uw]||this.props[Vw]||this.register_once({[qw]:d5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};mn([Vw,Uw],s=>{var a=this.props[s];a&&mn(a,function(l,u){t["$initial_"+Ow(u)]=l})});var n,r,i=this.props[qw];if(i){var o=(n=f5(i),r={},mn(n,function(s,a){r["$initial_"+Ow(a)]=s}),r);Zn(t,o)}return t}safe_merge(t){return mn(this.props,function(n,r){r in t||(t[r]=n)}),t}update_config(t,n){if(this.Pe=this.xe=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==n.persistence){var r=this.$e(t),i=this.props;this.clear(),this.q=r,this.props=i,this.save()}}set_disabled(t){this.ke=t,this.ke?this.remove():this.save()}set_cross_subdomain(t){t!==this.Ee&&(this.Ee=t,this.remove(),this.save())}set_secure(t){t!==this.Ie&&(this.Ie=t,this.remove(),this.save())}set_event_timer(t,n){var r=this.props[Ld]||{};r[t]=n,this.props[Ld]=r,this.save()}remove_event_timer(t){var n=(this.props[Ld]||{})[t];return gt(n)||(delete this.props[Ld][t],this.save()),n}get_property(t){return this.props[t]}set_property(t,n){this.props[t]=n,this.save()}}class p5{constructor(){this.Re={},this.Re={}}on(t,n){return this.Re[t]||(this.Re[t]=[]),this.Re[t].push(n),()=>{this.Re[t]=this.Re[t].filter(r=>r!==n)}}emit(t,n){for(var r of this.Re[t]||[])r(n);for(var i of this.Re["*"]||[])i(t,n)}}var Dm=function(e,t){if(!function(n){try{new RegExp(n)}catch(r){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(n){return!1}};class xl{constructor(t){this.Te=new p5,this.Me=(n,r)=>this.Ce(n,r)&&this.Oe(n,r)&&this.Fe(n,r),this.Ce=(n,r)=>r==null||!r.event||(n==null?void 0:n.event)===(r==null?void 0:r.event),this._instance=t,this.Ae=new Set,this.De=new Set}init(){var t;if(!gt((t=this._instance)==null?void 0:t.je)){var n;(n=this._instance)==null||n.je((r,i)=>{this.on(r,i)})}}register(t){var n,r;if(!gt((n=this._instance)==null?void 0:n.je)&&(t.forEach(s=>{var a,l;(a=this.De)==null||a.add(s),(l=s.steps)==null||l.forEach(u=>{var d;(d=this.Ae)==null||d.add((u==null?void 0:u.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var i,o=new Set;t.forEach(s=>{var a;(a=s.steps)==null||a.forEach(l=>{l!=null&&l.selector&&o.add(l==null?void 0:l.selector)})}),(i=this._instance)==null||i.autocapture.setElementSelectors(o)}}on(t,n){var r;n!=null&&t.length!=0&&(this.Ae.has(t)||this.Ae.has(n==null?void 0:n.event))&&this.De&&((r=this.De)==null?void 0:r.size)>0&&this.De.forEach(i=>{this.Le(n,i)&&this.Te.emit("actionCaptured",i.name)})}Ne(t){this.onAction("actionCaptured",n=>t(n))}Le(t,n){if((n==null?void 0:n.steps)==null)return!1;for(var r of n.steps)if(this.Me(t,r))return!0;return!1}onAction(t,n){return this.Te.on(t,n)}Oe(t,n){if(n!=null&&n.url){var r,i=t==null||(r=t.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!xl.ze(i,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static ze(t,n,r){switch(r){case"regex":return!!Ie&&Dm(t,n);case"exact":return n===t;case"contains":var i=xl.Ue(n).replace(/_/g,".").replace(/%/g,".*");return Dm(t,i);default:return!1}}static Ue(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Fe(t,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.qe(t).some(o=>!(n!=null&&n.href&&!xl.ze(o.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||o.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!xl.ze(o.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!xl.ze(o.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var r,i=t==null||(r=t.properties)==null?void 0:r.$element_selectors;if(!i||!i.includes(n==null?void 0:n.selector))return!1}return!0}qe(t){return(t==null?void 0:t.properties.$elements)==null?[]:t==null?void 0:t.properties.$elements}}var or=Wr("[Surveys]");class aoe{constructor(t){this._instance=t,this.Be=new Map,this.He=new Map}register(t){var n;gt((n=this._instance)==null?void 0:n.je)||(this.We(t),this.Ge(t))}Ge(t){var n=t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.actions)&&((o=r.conditions)==null||(s=o.actions)==null||(a=s.values)==null?void 0:a.length)>0});n.length!==0&&(this.Je==null&&(this.Je=new xl(this._instance),this.Je.init(),this.Je.Ne(r=>{this.onAction(r)})),n.forEach(r=>{var i,o,s,a,l,u,d,f,h,p;r.conditions&&(i=r.conditions)!=null&&i.actions&&(o=r.conditions)!=null&&(s=o.actions)!=null&&s.values&&((a=r.conditions)==null||(l=a.actions)==null||(u=l.values)==null?void 0:u.length)>0&&((d=this.Je)==null||d.register(r.conditions.actions.values),(f=r.conditions)==null||(h=f.actions)==null||(p=h.values)==null||p.forEach(v=>{if(v&&v.name){var y=this.He.get(v.name);y&&y.push(r.id),this.He.set(v.name,y||[r.id])}}))}))}We(t){var n;t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.events)&&((o=r.conditions)==null||(s=o.events)==null||(a=s.values)==null?void 0:a.length)>0}).length!==0&&((n=this._instance)==null||n.je((r,i)=>{this.onEvent(r,i)}),t.forEach(r=>{var i,o,s;(i=r.conditions)==null||(o=i.events)==null||(s=o.values)==null||s.forEach(a=>{if(a&&a.name){var l=this.Be.get(a.name);l&&l.push(r.id),this.Be.set(a.name,l||[r.id])}})}))}onEvent(t,n){var r,i,o=((r=this._instance)==null||(i=r.persistence)==null?void 0:i.props[Pp])||[];if(t==="survey shown"&&n&&o.length>0){var s;or.info("survey event matched, removing survey from activated surveys",{event:t,eventPayload:n,existingActivatedSurveys:o});var a=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(a){var l=o.indexOf(a);l>=0&&(o.splice(l,1),this.Ve(o))}}else this.Be.has(t)&&(or.info("survey event matched, updating activated surveys",{event:t,surveys:this.Be.get(t)}),this.Ve(o.concat(this.Be.get(t)||[])))}onAction(t){var n,r,i=((n=this._instance)==null||(r=n.persistence)==null?void 0:r.props[Pp])||[];this.He.has(t)&&this.Ve(i.concat(this.He.get(t)||[]))}Ve(t){var n,r;(n=this._instance)==null||(r=n.persistence)==null||r.register({[Pp]:[...new Set(t)]})}getSurveys(){var t,n,r=(t=this._instance)==null||(n=t.persistence)==null?void 0:n.props[Pp];return r||[]}getEventToSurveys(){return this.Be}Ke(){return this.Je}}class loe{constructor(t){this.Ye=null,this.Xe=!1,this.Qe=!1,this.Ze=[],this._instance=t,this._surveyEventReceiver=null}onRemoteConfig(t){var n=t.surveys;if(ln(n))return or.warn("Decide not loaded yet. Not loading surveys.");var r=Bn(n);this.tr=r?n.length>0:n,or.info("decide response received, hasSurveys: "+this.tr),this.tr&&this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith("seenSurvey_")||r!=null&&r.startsWith("inProgressSurvey_"))&&t.push(r)}t.forEach(i=>localStorage.removeItem(i))}loadIfEnabled(){if(!this.Ye)if(this.Qe)or.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)or.info("Disabled. Not loading surveys.");else if(this.tr){var t=zt==null?void 0:zt.__PosthogExtensions__;if(t){this.Qe=!0;try{var n=t.generateSurveys;if(n)return void this.ir(n);var r=t.loadExternalDependency;if(!r)return void this.er("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",i=>{i||!t.generateSurveys?this.er("Could not load surveys script",i):this.ir(t.generateSurveys)})}catch(i){throw this.er("Error initializing surveys",i),i}finally{this.Qe=!1}}else or.error("PostHog Extensions not found.")}else or.info("No surveys to load.")}ir(t){this.Ye=t(this._instance),this._surveyEventReceiver=new aoe(this._instance),or.info("Surveys loaded successfully"),this.rr({isLoaded:!0})}er(t,n){or.error(t,n),this.rr({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.Ze.push(t),this.Ye&&this.rr({isLoaded:!0}),()=>{this.Ze=this.Ze.filter(n=>n!==t)}}getSurveys(t,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return or.info("Disabled. Not loading surveys."),t([]);var r=this._instance.get_property(zw);if(r&&!n)return t(r,{isLoaded:!0});if(this.Xe)return t([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Xe=!0,this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var o;this.Xe=!1;var s=i.statusCode;if(s!==200||!i.json){var a="Surveys API could not be loaded, status: "+s;return or.error(a),t([],{isLoaded:!1,error:a})}var l,u=i.json.surveys||[],d=u.filter(f=>function(h){return!(!h.start_date||h.end_date)}(f)&&(function(h){var p,v,y;return!((p=h.conditions)==null||(v=p.events)==null||(y=v.values)==null||!y.length)}(f)||function(h){var p,v,y;return!((p=h.conditions)==null||(v=p.actions)==null||(y=v.values)==null||!y.length)}(f)));return d.length>0&&((l=this._surveyEventReceiver)==null||l.register(d)),(o=this._instance.persistence)==null||o.register({[zw]:u}),t(u,{isLoaded:!0})}})}catch(i){throw this.Xe=!1,i}}rr(t){for(var n of this.Ze)try{t.isLoaded?this.getSurveys(n):n([],t)}catch(r){or.error("Error in survey callback",r)}}getActiveMatchingSurveys(t,n){if(n===void 0&&(n=!1),!ln(this.Ye))return this.Ye.getActiveMatchingSurveys(t,n);or.warn("init was not called")}sr(t){var n=null;return this.getSurveys(r=>{var i;n=(i=r.find(o=>o.id===t))!==null&&i!==void 0?i:null}),n}nr(t){if(ln(this.Ye))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof t=="string"?this.sr(t):t;return n?this.Ye.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(ln(this.Ye))return or.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.nr(t);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(t,n){return ln(this.Ye)?(or.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(i=>{var o,s=(o=i.find(l=>l.id===t))!==null&&o!==void 0?o:null;if(s){var a=this.nr(s);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(t,n){if(ln(this.Ye))or.warn("init was not called");else{var r=this.sr(t),i=bt==null?void 0:bt.querySelector(n);r?i?this.Ye.renderSurvey(r,i):or.warn("Survey element not found"):or.warn("Survey not found")}}}var BA=Wr("[RateLimiter]");class uoe{constructor(t){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var o=i.text;if(o&&o.length)try{(JSON.parse(o).quota_limited||[]).forEach(s=>{BA.info((s||"events")+" is quota limited."),this.serverLimits[s]=new Date().getTime()+6e4})}catch(s){return void BA.warn('could not rate limit - continuing. Error: "'+(s==null?void 0:s.message)+'"',{text:o})}},this.instance=t,this.captureEventsPerSecond=((n=t.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=t.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var n,r,i;t===void 0&&(t=!1);var o=new Date().getTime(),s=(n=(r=this.instance.persistence)==null?void 0:r.get_property(Ww))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:o};s.tokens+=(o-s.last)/1e3*this.captureEventsPerSecond,s.last=o,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var a=s.tokens<1;return a||t||(s.tokens=Math.max(0,s.tokens-1)),!a||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(Ww,s),{isRateLimited:a,remainingTokens:s.tokens}}isServerRateLimited(t){var n=this.serverLimits[t||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var fl=Wr("[RemoteConfig]");class coe{constructor(t){this._instance=t}get remoteConfig(){var t,n;return(t=zt._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.config}ar(t){var n,r;(n=zt.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=zt.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>t(this.remoteConfig)):(fl.error("PostHog Extensions not found. Cannot load remote config."),t())}lr(t){this._instance._e({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{t(n.json)}})}load(){try{if(this.remoteConfig)return fl.info("Using preloaded remote config",this.remoteConfig),void this.me(this.remoteConfig);if(this._instance.config.advanced_disable_decide)return void fl.warn("Remote config is disabled. Falling back to local config.");this.ar(t=>{if(!t)return fl.info("No config found after loading remote JS config. Falling back to JSON."),void this.lr(n=>{this.me(n)});this.me(t)})}catch(t){fl.error("Error loading remote config",t)}}me(t){t?this._instance.config.__preview_remote_config?(this._instance.me(t),t.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):fl.info("__preview_remote_config is disabled. Logging config instead",t):fl.error("Failed to fetch remote config from PostHog.")}}var doe=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=e.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),tl(a)||(n>t&&(o+=e.substring(t,n)),o+=a,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o},foe=!!Pw||!!Iw,zA="text/plain",Lm=(e,t)=>{var[n,r]=e.split("?"),i=yt({},t);r==null||r.split("&").forEach(s=>{var[a]=s.split("=");delete i[a]});var o=Ire(i);return n+"?"+(o=o?(r?r+"&":"")+o:r)},Wd=(e,t)=>JSON.stringify(e,(n,r)=>typeof r=="bigint"?r.toString():r,t),Ax=e=>{var{data:t,compression:n}=e;if(t){if(n===bo.GZipJS){var r=FO(BO(Wd(t)),{mtime:0}),i=new Blob([r],{type:zA});return{contentType:zA,body:i,estimatedSize:i.size}}if(n===bo.Base64){var o=function(l){var u,d,f,h,p,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=0,w=0,x="",b=[];if(!l)return l;l=doe(l);do u=(p=l.charCodeAt(y++)<<16|l.charCodeAt(y++)<<8|l.charCodeAt(y++))>>18&63,d=p>>12&63,f=p>>6&63,h=63&p,b[w++]=v.charAt(u)+v.charAt(d)+v.charAt(f)+v.charAt(h);while(y<l.length);switch(x=b.join(""),l.length%3){case 1:x=x.slice(0,-2)+"==";break;case 2:x=x.slice(0,-1)+"="}return x}(Wd(t)),s=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Wd(l)))(o);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var a=Wd(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},of=[];Iw&&of.push({transport:"fetch",method:e=>{var t,n,{contentType:r,body:i,estimatedSize:o}=(t=Ax(e))!==null&&t!==void 0?t:{},s=new Headers;mn(e.headers,function(d,f){s.append(f,d)}),r&&s.append("Content-Type",r);var a=e.url,l=null;if(Gj){var u=new Gj;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),e.timeout)}}Iw(a,yt({method:(e==null?void 0:e.method)||"GET",headers:s,keepalive:e.method==="POST"&&(o||0)<52428.8,body:i,signal:(n=l)==null?void 0:n.signal},e.fetchOptions)).then(d=>d.text().then(f=>{var h={statusCode:d.status,text:f};if(d.status===200)try{h.json=JSON.parse(f)}catch(p){Et.error(p)}e.callback==null||e.callback(h)})).catch(d=>{Et.error(d),e.callback==null||e.callback({statusCode:0,text:d})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Pw&&of.push({transport:"XHR",method:e=>{var t,n=new Pw;n.open(e.method||"GET",e.url,!0);var{contentType:r,body:i}=(t=Ax(e))!==null&&t!==void 0?t:{};mn(e.headers,function(o,s){n.setRequestHeader(s,o)}),r&&n.setRequestHeader("Content-Type",r),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch(s){}e.callback==null||e.callback(o)}},n.send(i)}}),Ii!=null&&Ii.sendBeacon&&of.push({transport:"sendBeacon",method:e=>{var t=Lm(e.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=Ax(e))!==null&&n!==void 0?n:{},o=typeof i=="string"?new Blob([i],{type:r}):i;Ii.sendBeacon(t,o)}catch(s){}}});var s_=3e3;class hoe{constructor(t,n){this.ur=!0,this.hr=[],this.dr=Xi((n==null?void 0:n.flush_interval_ms)||s_,250,5e3,"flush interval",s_),this.vr=t}enqueue(t){this.hr.push(t),this.cr||this.pr()}unload(){this.gr();var t=this.hr.length>0?this._r():{},n=Object.values(t);[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.vr(yt({},r,{transport:"sendBeacon"}))})}enable(){this.ur=!1,this.pr()}pr(){var t=this;this.ur||(this.cr=setTimeout(()=>{if(this.gr(),this.hr.length>0){var n=this._r(),r=function(o){var s=n[o],a=new Date().getTime();s.data&&Bn(s.data)&&mn(s.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),t.vr(s)};for(var i in n)r(i)}},this.dr))}gr(){clearTimeout(this.cr),this.cr=void 0}_r(){var t={};return mn(this.hr,n=>{var r,i=n,o=(i?i.batchKey:null)||i.url;gt(t[o])&&(t[o]=yt({},i,{data:[]})),(r=t[o].data)==null||r.push(i.data)}),this.hr=[],t}}var poe=["retriesPerformedSoFar"];class goe{constructor(t){this.mr=!1,this.br=3e3,this.hr=[],this._instance=t,this.hr=[],this.wr=!0,!gt(Ie)&&"onLine"in Ie.navigator&&(this.wr=Ie.navigator.onLine,Tn(Ie,"online",()=>{this.wr=!0,this.Xi()}),Tn(Ie,"offline",()=>{this.wr=!1}))}get length(){return this.hr.length}retriableRequest(t){var{retriesPerformedSoFar:n}=t,r=fO(t,poe);$r(n)&&n>0&&(r.url=Lm(r.url,{retry_count:n})),this._instance._e(yt({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n!=null?n:0)<10?this.yr(yt({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(i)}}))}yr(t){var n=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=n+1;var r=function(s){var a=3e3*Math.pow(2,s),l=a/2,u=Math.min(18e5,a),d=(Math.random()-.5)*(u-l);return Math.ceil(u+d)}(n),i=Date.now()+r;this.hr.push({retryAt:i,requestOptions:t});var o="Enqueued failed request for retry in "+r;navigator.onLine||(o+=" (Browser is offline)"),Et.warn(o),this.mr||(this.mr=!0,this.Sr())}Sr(){this.$r&&clearTimeout(this.$r),this.$r=setTimeout(()=>{this.wr&&this.hr.length>0&&this.Xi(),this.Sr()},this.br)}Xi(){var t=Date.now(),n=[],r=this.hr.filter(o=>o.retryAt<t||(n.push(o),!1));if(this.hr=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:t}of(this.$r&&(clearTimeout(this.$r),this.$r=void 0),this.hr))try{this._instance._e(yt({},t,{transport:"sendBeacon"}))}catch(n){Et.error(n)}this.hr=[]}}class moe{constructor(t){this.kr=()=>{var n,r,i,o;this.Er||(this.Er={});var s=this.scrollElement(),a=this.scrollY(),l=s?Math.max(0,s.scrollHeight-s.clientHeight):0,u=a+((s==null?void 0:s.clientHeight)||0),d=(s==null?void 0:s.scrollHeight)||0;this.Er.lastScrollY=Math.ceil(a),this.Er.maxScrollY=Math.max(a,(n=this.Er.maxScrollY)!==null&&n!==void 0?n:0),this.Er.maxScrollHeight=Math.max(l,(r=this.Er.maxScrollHeight)!==null&&r!==void 0?r:0),this.Er.lastContentY=u,this.Er.maxContentY=Math.max(u,(i=this.Er.maxContentY)!==null&&i!==void 0?i:0),this.Er.maxContentHeight=Math.max(d,(o=this.Er.maxContentHeight)!==null&&o!==void 0?o:0)},this._instance=t}getContext(){return this.Er}resetContext(){var t=this.Er;return setTimeout(this.kr,0),t}startMeasuringScrollPosition(){Tn(Ie,"scroll",this.kr,{capture:!0}),Tn(Ie,"scrollend",this.kr,{capture:!0}),Tn(Ie,"resize",this.kr)}scrollElement(){if(!this._instance.config.scroll_root_selector)return Ie==null?void 0:Ie.document.documentElement;var t=Bn(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of t){var r=Ie==null?void 0:Ie.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return Ie&&(Ie.scrollY||Ie.pageYOffset||Ie.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return Ie&&(Ie.scrollX||Ie.pageXOffset||Ie.document.documentElement.scrollLeft)||0}}var yoe=e=>d5(e==null?void 0:e.config.mask_personal_data_properties,e==null?void 0:e.config.custom_personal_data_properties);class voe{constructor(t,n,r,i){this.Ir=o=>{var s=this.Pr();if(!s||s.sessionId!==o){var a={sessionId:o,props:this.Rr(this._instance)};this.Tr.register({[Hw]:a})}},this._instance=t,this.Mr=n,this.Tr=r,this.Rr=i||yoe,this.Mr.onSessionId(this.Ir)}Pr(){return this.Tr.props[Hw]}getSetOnceProps(){var t,n=(t=this.Pr())==null?void 0:t.props;return n?"r"in n?f5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var t={};return mn(pS(this.getSetOnceProps()),(n,r)=>{r==="$current_url"&&(r="url"),t["$session_entry_"+Ow(r)]=n}),t}}var HA=Wr("[SessionId]");class xoe{constructor(t,n,r){var i;if(this.Cr=[],!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=t.config,this.Tr=t.persistence,this.oi=void 0,this.kt=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Or=n||Ca,this.Fr=r||Ca;var o=this.S.persistence_name||this.S.token,s=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Xi(s,60,36e3,"session_idle_timeout_seconds",1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ar(),this.Dr="ph_"+o+"_window_id",this.jr="ph_"+o+"_primary_window_exists",this.Lr()){var a=br.D(this.Dr),l=br.D(this.jr);a&&!l?this.oi=a:br.L(this.Dr),br.j(this.jr,!0)}if((i=this.S.bootstrap)!=null&&i.sessionID)try{var u=(d=>{var f=d.replace(/-/g,"");if(f.length!==32)throw new Error("Not a valid UUID");if(f[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(f.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Nr(this.S.bootstrap.sessionID,new Date().getTime(),u)}catch(d){HA.error("Invalid sessionID in bootstrap",d)}this.zr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return gt(this.Cr)&&(this.Cr=[]),this.Cr.push(t),this.kt&&t(this.kt,this.oi),()=>{this.Cr=this.Cr.filter(n=>n!==t)}}Lr(){return this.S.persistence!=="memory"&&!this.Tr.ke&&br.O()}Ur(t){t!==this.oi&&(this.oi=t,this.Lr()&&br.j(this.Dr,t))}qr(){return this.oi?this.oi:this.Lr()?br.D(this.Dr):null}Nr(t,n,r){t===this.kt&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.kt=t,this.Tr.register({[Cm]:[n,t,r]}))}Br(){if(this.kt&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.kt,this._sessionStartTimestamp];var t=this.Tr.props[Cm];return Bn(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.Nr(null,null,null)}zr(){Tn(Ie,"beforeunload",()=>{this.Lr()&&br.L(this.jr)},{capture:!1})}checkAndGetSessionAndWindowId(t,n){if(t===void 0&&(t=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[i,o,s]=this.Br(),a=this.qr(),l=$r(s)&&s>0&&Math.abs(r-s)>864e5,u=!1,d=!o,f=!t&&Math.abs(r-i)>this.sessionTimeoutMs;d||f||l?(o=this.Or(),a=this.Fr(),HA.info("new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}}),s=r,u=!0):a||(a=this.Fr(),u=!0);var h=i===0||!t||l?r:i,p=s===0?new Date().getTime():s;return this.Ur(a),this.Nr(o,h,p),t||this.Ar(),u&&this.Cr.forEach(v=>v(o,a,u?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0)),{sessionId:o,windowId:a,sessionStartTimestamp:p,changeReason:u?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}Ar(){clearTimeout(this.Hr),this.Hr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var boe=["$set_once","$set"],ma=Wr("[SiteApps]");class woe{constructor(t){this._instance=t,this.Wr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Gr(t,n){if(n){var r=this.globalsForEvent(n);this.Wr.push(r),this.Wr.length>1e3&&(this.Wr=this.Wr.slice(10))}}get siteAppLoaders(){var t,n;return(t=zt._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.siteApps}init(){if(this.isEnabled){var t=this._instance.je(this.Gr.bind(this));this.Jr=()=>{t(),this.Wr=[],this.Jr=void 0}}}globalsForEvent(t){var n,r,i,o,s,a,l;if(!t)throw new Error("Event payload is required");var u={},d=this._instance.get_property("$groups")||[],f=this._instance.get_property("$stored_group_properties")||{};for(var[h,p]of Object.entries(f))u[h]={id:d[h],type:h,properties:p};var{$set_once:v,$set:y}=t;return{event:yt({},fO(t,boe),{properties:yt({},t.properties,y?{$set:yt({},(n=(r=t.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},y)}:{},v?{$set_once:yt({},(i=(o=t.properties)==null?void 0:o.$set_once)!==null&&i!==void 0?i:{},v)}:{}),elements_chain:(s=(a=t.properties)==null?void 0:a.$elements_chain)!==null&&s!==void 0?s:"",distinct_id:(l=t.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(t){var n=this.apps[t.id],r=()=>{var a;!n.errored&&this.Wr.length&&(ma.info("Processing "+this.Wr.length+" events for site app with id "+t.id),this.Wr.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.Jr)==null||a.call(this))},i=!1,o=a=>{n.errored=!a,n.loaded=!0,ma.info("Site app with id "+t.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:s}=t.init({posthog:this._instance,callback:a=>{o(a)}});s&&(n.processEvent=s),i=!0}catch(a){ma.error("Error while initializing PostHog app with config id "+t.id,a),o(!1)}if(i&&n.loaded)try{r()}catch(a){ma.error("Error while processing buffered events PostHog app with config id "+t.id,a),n.errored=!0}}Vr(){var t=this.siteAppLoaders||[];for(var n of t)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of t)this.setupSiteApp(r)}Kr(t){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(t);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(i){ma.error("Error while processing event "+t.event+" for site app "+r.id,i)}}}onRemoteConfig(t){var n,r,i,o=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.Vr(),void this._instance.on("eventCaptured",u=>this.Kr(u))):void ma.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Jr)==null||r.call(this),(i=t.siteApps)!=null&&i.length)if(this.isEnabled){var s=function(u,d){var f;zt["__$$ph_site_app_"+u]=o._instance,(f=zt.__PosthogExtensions__)==null||f.loadSiteApp==null||f.loadSiteApp(o._instance,d,h=>{if(h)return ma.error("Error while initializing PostHog app with config id "+u,h)})};for(var{id:a,url:l}of t.siteApps)s(a,l)}else ma.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var kl,_oe=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","bytespider"],WA=function(e,t){if(!e)return!1;var n=e.toLowerCase();return _oe.concat(t||[]).some(r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1})},g5=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&WA(n,t))return!0;try{var r=e==null?void 0:e.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>WA(i==null?void 0:i.brand,t)))return!0}catch(i){}return!!e.webdriver};function UA(e,t,n){return Wd({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}(function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"})(kl||(kl={}));var VA="i.posthog.com";class Soe{constructor(t){this.Yr={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}get uiHost(){var t,n=(t=this.instance.config.ui_host)==null?void 0:t.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+VA,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.Yr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=kl.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=kl.EU:this.Yr[this.apiHost]=kl.CUSTOM),this.Yr[this.apiHost]}endpointFor(t,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),t==="ui")return this.uiHost+n;if(this.region===kl.CUSTOM)return this.apiHost+n;var r=VA+n;switch(t){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var Eoe={icontains:(e,t)=>!!Ie&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!Ie&&t.href.toLowerCase().indexOf(e.toLowerCase())===-1,regex:(e,t)=>!!Ie&&Dm(t.href,e),not_regex:(e,t)=>!!Ie&&!Dm(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class Pr{constructor(t){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments(i=>{Pr.Xr("retrieved web experiments from the server"),n.Qr=new Map,i.forEach(o=>{if(o.feature_flag_key){var s;n.Qr&&(Pr.Xr("setting flag key ",o.feature_flag_key," to web experiment ",o),(s=n.Qr)==null||s.set(o.feature_flag_key,o));var a=n._instance.getFeatureFlag(o.feature_flag_key);nr(a)&&o.variants[a]&&n.Zr(o.name,a,o.variants[a].transforms)}else if(o.variants)for(var l in o.variants){var u=o.variants[l];Pr.ts(u)&&n.Zr(o.name,l,u.transforms)}})},r)},this._instance=t,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(t){if(this._is_bot())Pr.Xr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(ln(this.Qr))return this.Qr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();Pr.Xr("applying feature flags",t),t.forEach(n=>{var r;if(this.Qr&&(r=this.Qr)!=null&&r.has(n)){var i,o=this._instance.getFeatureFlag(n),s=(i=this.Qr)==null?void 0:i.get(n);o&&s!=null&&s.variants[o]&&this.Zr(s.name,o,s.variants[o].transforms)}})}}previewWebExperiment(){var t=Pr.getWindowLocation();if(t!=null&&t.search){var n=Rm(t==null?void 0:t.search,"__experiment_id"),r=Rm(t==null?void 0:t.search,"__experiment_variant");n&&r&&(Pr.Xr("previewing web experiments "+n+" && "+r),this.getWebExperiments(i=>{this.es(parseInt(n),r,i)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,n,r){if(this._instance.config.disable_web_experiments&&!r)return t([]);var i=this._instance.get_property("$web_experiments");if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:o=>{if(o.statusCode!==200||!o.json)return t([]);var s=o.json.experiments||[];return t(s)}})}es(t,n,r){var i=r.filter(o=>o.id===t);i&&i.length>0&&(Pr.Xr("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this.Zr(i[0].name,n,i[0].variants[n].transforms))}static ts(t){return!ln(t.conditions)&&Pr.rs(t)&&Pr.ss(t)}static rs(t){var n;if(ln(t.conditions)||ln((n=t.conditions)==null?void 0:n.url))return!0;var r,i,o,s=Pr.getWindowLocation();return!!s&&((r=t.conditions)==null||!r.url||Eoe[(i=(o=t.conditions)==null?void 0:o.urlMatchType)!==null&&i!==void 0?i:"icontains"](t.conditions.url,s))}static getWindowLocation(){return Ie==null?void 0:Ie.location}static ss(t){var n;if(ln(t.conditions)||ln((n=t.conditions)==null?void 0:n.utm))return!0;var r=a5();if(r.utm_source){var i,o,s,a,l,u,d,f,h,p,v,y,w,x,b,m,S=(i=t.conditions)==null||(o=i.utm)==null||!o.utm_campaign||((s=t.conditions)==null||(a=s.utm)==null?void 0:a.utm_campaign)==r.utm_campaign,E=(l=t.conditions)==null||(u=l.utm)==null||!u.utm_source||((d=t.conditions)==null||(f=d.utm)==null?void 0:f.utm_source)==r.utm_source,k=(h=t.conditions)==null||(p=h.utm)==null||!p.utm_medium||((v=t.conditions)==null||(y=v.utm)==null?void 0:y.utm_medium)==r.utm_medium,N=(w=t.conditions)==null||(x=w.utm)==null||!x.utm_term||((b=t.conditions)==null||(m=b.utm)==null?void 0:m.utm_term)==r.utm_term;return S&&k&&N&&E}return!1}static Xr(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Et.info("[WebExperiments] "+t,r)}Zr(t,n,r){this._is_bot()?Pr.Xr("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(i=>{if(i.selector){var o;Pr.Xr("applying transform of variant "+n+" for experiment "+t+" ",i);var s=(o=document)==null?void 0:o.querySelectorAll(i.selector);s==null||s.forEach(a=>{var l=a;i.html&&(l.innerHTML=i.html),i.css&&l.setAttribute("style",i.css)})}}):Pr.Xr("Control variants leave the page unmodified.")}_is_bot(){return Ii&&this._instance?g5(Ii,this._instance.config.custom_blocked_useragents):void 0}}var sf={},a_=()=>{},wu="posthog",m5=!foe&&(ai==null?void 0:ai.indexOf("MSIE"))===-1&&(ai==null?void 0:ai.indexOf("Mozilla"))===-1,qA=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:_re(bt==null?void 0:bt.location),persistence:"localStorage+cookie",persistence_name:"",loaded:a_,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:ui&&nr(ui==null?void 0:ui.search)&&ui.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(Ie==null||(e=Ie.location)==null?void 0:e.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var n="Bad HTTP status: "+t.statusCode+" "+t.text;Et.error(n)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:s_},_onCapture:a_}},KA=e=>{var t={};gt(e.process_person)||(t.person_profiles=e.process_person),gt(e.xhr_headers)||(t.request_headers=e.xhr_headers),gt(e.cookie_name)||(t.persistence_name=e.cookie_name),gt(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),gt(e.store_google)||(t.save_campaign_params=e.store_google),gt(e.verbose)||(t.debug=e.verbose);var n=Zn({},t,e);return Bn(e.property_blacklist)&&(gt(e.property_denylist)?n.property_denylist=e.property_blacklist:Bn(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:Et.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class koe{constructor(){this.__forceAllowLocalhost=!1}get ns(){return this.__forceAllowLocalhost}set ns(t){Et.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}class cv{get decideEndpointWasHit(){var t,n;return(t=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&t!==void 0&&t}constructor(){this.webPerformance=new koe,this.os=!1,this.version=Ps.LIB_VERSION,this.ls=new p5,this.config=qA(),this.SentryIntegration=$ie,this.sentryIntegration=t=>function(n,r){var i=UO(n,r);return{name:WO,processEvent:o=>i(o)}}(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.us=!1,this.hs=null,this.ds=null,this.vs=null,this.featureFlags=new ooe(this),this.toolbar=new Die(this),this.scrollManager=new moe(this),this.pageViewManager=new Wie(this),this.surveys=new loe(this),this.experiments=new Pr(this),this.exceptions=new Uie(this),this.rateLimiter=new uoe(this),this.requestRouter=new Soe(this),this.consent=new Vre(this),this.people={set:(t,n,r)=>{var i=nr(t)?{[t]:n}:t;this.setPersonProperties(i),r==null||r({})},set_once:(t,n,r)=>{var i=nr(t)?{[t]:n}:t;this.setPersonProperties(void 0,i),r==null||r({})}},this.on("eventCaptured",t=>Et.info('send "'+(t==null?void 0:t.event)+'"',t))}init(t,n,r){if(r&&r!==wu){var i,o=(i=sf[r])!==null&&i!==void 0?i:new cv;return o._init(t,n,r),sf[r]=o,sf[wu][r]=o,o}return this._init(t,n,r)}_init(t,n,r){var i,o;if(n===void 0&&(n={}),gt(t)||$w(t))return Et.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Et.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.cs=[],n.person_profiles&&(this.ds=n.person_profiles),this.set_config(Zn({},qA(),KA(n),{name:r,token:t})),this.config.on_xhr_error&&Et.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:bo.GZipJS,this.persistence=new jx(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new jx(yt({},this.config,{persistence:"sessionStorage"}));var s=yt({},this.persistence.props),a=yt({},this.sessionPersistence.props);if(this.fs=new hoe(x=>this.ps(x),this.config.request_queue_config),this.gs=new goe(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new xoe(this),this.sessionPropsManager=new voe(this,this.sessionManager,this.persistence)),new Fie(this).startIfEnabledOrStop(),this.siteApps=new woe(this),(i=this.siteApps)==null||i.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new Pie(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new Mre(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Hie(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new Bie(this),this.exceptionObserver=new Gre(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new NO(this,Kre),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new lie(this),this.historyAutocapture.startIfEnabled(),Ps.DEBUG=Ps.DEBUG||this.config.debug,Ps.DEBUG&&Et.info("Starting in debug mode",{this:this,config:n,thisC:yt({},this.config),p:s,s:a}),this._s(),((o=n.bootstrap)==null?void 0:o.distinctID)!==void 0){var l,u,d=this.config.get_device_id(Ca()),f=(l=n.bootstrap)!=null&&l.isIdentifiedID?d:n.bootstrap.distinctID;this.persistence.set_property(Cs,(u=n.bootstrap)!=null&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:f})}if(this.bs()){var h,p,v=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlags)||{}).filter(x=>{var b,m;return!((b=n.bootstrap)==null||(m=b.featureFlags)==null||!m[x])}).reduce((x,b)=>{var m,S;return x[b]=((m=n.bootstrap)==null||(S=m.featureFlags)==null?void 0:S[b])||!1,x},{}),y=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(x=>v[x]).reduce((x,b)=>{var m,S,E,k;return(m=n.bootstrap)!=null&&(S=m.featureFlagPayloads)!=null&&S[b]&&(x[b]=(E=n.bootstrap)==null||(k=E.featureFlagPayloads)==null?void 0:k[b]),x},{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:y})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:lA,$device_id:null},"");else if(!this.get_distinct_id()){var w=this.config.get_device_id(Ca());this.register_once({distinct_id:w,$device_id:w},""),this.persistence.set_property(Cs,"anonymous")}return Tn(Ie,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?Oie(this,()=>this.ws()):this.ws(),Qi(this.config._onCapture)&&this.config._onCapture!==a_&&(Et.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",x=>this.config._onCapture(x.event,x))),this}me(t){var n,r,i,o,s,a,l,u;if(!bt||!bt.body)return Et.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.me(t)},500);this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=Yt(t.supportedCompression,bo.GZipJS)?bo.GZipJS:Yt(t.supportedCompression,bo.Base64)?bo.Base64:void 0),(n=t.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.ds?this.ds:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(t),(i=this.sessionRecording)==null||i.onRemoteConfig(t),(o=this.autocapture)==null||o.onRemoteConfig(t),(s=this.heatmaps)==null||s.onRemoteConfig(t),this.surveys.onRemoteConfig(t),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(t),(l=this.exceptionObserver)==null||l.onRemoteConfig(t),(u=this.deadClicksAutocapture)==null||u.onRemoteConfig(t)}ws(){try{this.config.loaded(this)}catch(t){Et.critical("`loaded` function failed",t)}this.ys(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Ss()},1),new coe(this).load(),this.featureFlags.decide()}ys(){var t;this.has_opted_out_capturing()||this.config.request_batching&&((t=this.fs)==null||t.enable())}_dom_loaded(){this.has_opted_out_capturing()||Ma(this.__request_queue,t=>this.ps(t)),this.__request_queue=[],this.ys()}_handle_unload(){var t,n;this.config.request_batching?(this.$s()&&this.capture("$pageleave"),(t=this.fs)==null||t.unload(),(n=this.gs)==null||n.unload()):this.$s()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_e(t){this.__loaded&&(m5?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=Lm(t.url,{ip:this.config.ip?1:0}),t.headers=yt({},this.config.request_headers),t.compression=t.compression==="best-available"?this.compression:t.compression,t.fetchOptions=t.fetchOptions||this.config.fetch_options,(n=>{var r,i,o,s=yt({},n);s.timeout=s.timeout||6e4,s.url=Lm(s.url,{_:new Date().getTime().toString(),ver:Ps.LIB_VERSION,compression:s.compression});var a=(r=s.transport)!==null&&r!==void 0?r:"fetch",l=(i=(o=hO(of,u=>u.transport===a))==null?void 0:o.method)!==null&&i!==void 0?i:of[0].method;if(!l)throw new Error("No available transport method");l(s)})(yt({},t,{callback:n=>{var r,i;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,n)),t.callback==null||t.callback(n)}}))))}ps(t){this.gs?this.gs.retriableRequest(t):this._e(t)}_execute_array(t){var n,r=[],i=[],o=[];Ma(t,a=>{a&&(n=a[0],Bn(n)?o.push(a):Qi(a)?a.call(this):Bn(a)&&n==="alias"?r.push(a):Bn(a)&&n.indexOf("capture")!==-1&&Qi(this[n])?o.push(a):i.push(a))});var s=function(a,l){Ma(a,function(u){if(Bn(u[0])){var d=l;mn(u,function(f){d=d[f[0]].apply(d,f.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};s(r,this),s(i,this),s(o,this)}bs(){var t,n;return((t=this.config.bootstrap)==null?void 0:t.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.fs){if(!this.consent.isOptedOut())if(!gt(t)&&nr(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){n!=null&&n.$current_url&&!nr(n==null?void 0:n.$current_url)&&(Et.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,a=(r==null?void 0:r.timestamp)||s,l=Ca(),u={uuid:l,event:t,properties:this.Di(t,n||{},a,l)};o&&(u.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r!=null&&r.$set&&(u.$set=r==null?void 0:r.$set);var d=this.ks(r==null?void 0:r.$set_once);d&&(u.$set_once=d),(u=bre(u,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,gt(r==null?void 0:r.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=s);var f=yt({},u.properties.$set,u.$set);if(Fu(f)||this.setPersonPropertiesForFlags(f),!ln(this.config.before_send)){var h=this.xs(u);if(!h)return;u=h}this.ls.emit("eventCaptured",u);var p={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.ps(p):this.fs.enqueue(p),u}Et.critical("This capture call is ignored due to client rate limiting.")}}else Et.error("No event name provided to posthog.capture")}else Et.uninitializedWarning("posthog.capture")}je(t){return this.on("eventCaptured",n=>t(n.event,n))}Di(t,n,r,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=this.persistence.remove_event_timer(t),s=yt({},n);if(s.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(s.$cookieless_mode=!0),t==="$snapshot"){var a=yt({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=a.distinct_id,(!nr(s.distinct_id)&&!$r(s.distinct_id)||$w(s.distinct_id))&&Et.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var l,u=roe(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=d,s.$window_id=f}this.sessionPropsManager&&Zn(s,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&Zn(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=(h=this.gs)==null?void 0:h.length}catch(w){s.$sdk_debug_error_capturing_properties=String(w)}if(this.requestRouter.region===kl.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),l=t==="$pageview"?this.pageViewManager.doPageView(r,i):t==="$pageleave"?this.pageViewManager.doPageLeave(r):this.pageViewManager.doEvent(),s=Zn(s,l),t==="$pageview"&&bt&&(s.title=bt.title),!gt(o)){var p=r.getTime()-o;s.$duration=parseFloat((p/1e3).toFixed(3))}ai&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Zn({},u,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Bn(this.config.property_denylist)?mn(this.config.property_denylist,function(w){delete s[w]}):Et.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var v=this.config.sanitize_properties;v&&(Et.error("sanitize_properties is deprecated. Use before_send instead"),s=v(s,t));var y=this.Es();return s.$process_person_profile=y,y&&this.Is("_calculate_event_properties"),s}ks(t){var n;if(!this.persistence||!this.Es()||this.os)return t;var r=this.persistence.get_initial_props(),i=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),o=Zn({},r,i||{},t||{}),s=this.config.sanitize_properties;return s&&(Et.error("sanitize_properties is deprecated. Use before_send instead"),o=s(o,"$set_once")),this.os=!0,Fu(o)?void 0:o}register(t,n){var r;(r=this.persistence)==null||r.register(t,n)}register_once(t,n,r){var i;(i=this.persistence)==null||i.register_once(t,n,r)}register_for_session(t){var n;(n=this.sessionPersistence)==null||n.register(t)}unregister(t){var n;(n=this.persistence)==null||n.unregister(t)}unregister_for_session(t){var n;(n=this.sessionPersistence)==null||n.unregister(t)}Ps(t,n){this.register({[t]:n})}getFeatureFlag(t,n){return this.featureFlags.getFeatureFlag(t,n)}getFeatureFlagPayload(t){var n=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(n)}catch(r){return n}}isFeatureEnabled(t,n){return this.featureFlags.isFeatureEnabled(t,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(t,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,n)}getEarlyAccessFeatures(t,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(t,n,r)}on(t,n){return this.ls.on(t,n)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(t))!==null&&n!==void 0?n:()=>{}}getSurveys(t,n){n===void 0&&(n=!1),this.surveys.getSurveys(t,n)}getActiveMatchingSurveys(t,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(t,n)}renderSurvey(t,n){this.surveys.renderSurvey(t,n)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(t,n)}identify(t,n,r){if(!this.__loaded||!this.persistence)return Et.uninitializedWarning("posthog.identify");if($r(t)&&(t=t.toString(),Et.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t){if(["distinct_id","distinctid"].includes(t.toLowerCase()))Et.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(this.Is("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var o=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}t!==i&&t!==this.get_property(Dd)&&(this.unregister(Dd),this.register({distinct_id:t}));var s=(this.persistence.get_property(Cs)||"anonymous")==="anonymous";t!==i&&s?(this.persistence.set_property(Cs,"identified"),this.setPersonPropertiesForFlags(yt({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.vs=UA(t,n,r),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),t!==i&&(this.reloadFeatureFlags(),this.unregister(jm))}}else Et.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,n){if((t||n)&&this.Is("posthog.setPersonProperties")){var r=UA(this.get_distinct_id(),t,n);this.vs!==r?(this.setPersonPropertiesForFlags(yt({},n||{},t||{})),this.capture("$set",{$set:t||{},$set_once:n||{}}),this.vs=r):Et.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,n,r){if(t&&n){if(this.Is("posthog.group")){var i=this.getGroups();i[t]!==n&&this.resetGroupPropertiesForFlags(t),this.register({$groups:yt({},i,{[t]:n})}),r&&(this.capture("$groupidentify",{$group_type:t,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[t]:r})),i[t]===n||r||this.reloadFeatureFlags()}}else Et.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(t,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0),this.Is("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,n)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var n,r,i,o;if(Et.info("reset"),!this.__loaded)return Et.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),(i=this.persistence)==null||i.set_property(Cs,"anonymous"),(o=this.sessionManager)==null||o.resetSessionId(),this.vs=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:lA,$device_id:null},"");else{var a=this.config.get_device_id(Ca());this.register_once({distinct_id:a,$device_id:t?a:s},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,n;return(t=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(t!=null&&t.withTimestamp&&r){var o,s=(o=t.timestampLookBack)!==null&&o!==void 0?o:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-s,0)}return i}alias(t,n){return t===this.get_property(pO)?(Et.critical("Attempting to create alias for existing People user - aborting."),-2):this.Is("posthog.alias")?(gt(n)&&(n=this.get_distinct_id()),t!==n?(this.Ps(Dd,t),this.capture("$create_alias",{alias:t,distinct_id:n})):(Et.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var n,r,i,o,s=yt({},this.config);zn(t)&&(Zn(this.config,KA(t)),(n=this.persistence)==null||n.update_config(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new jx(yt({},this.config,{persistence:"sessionStorage"})),lr.O()&&lr.A("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Ps.DEBUG=!0,Et.info("set_config",JSON.stringify({config:t,oldConfig:s,newConfig:yt({},this.config)},null,2))),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._s())}startSessionRecording(t){var n=t===!0,r={sampling:n||!(t==null||!t.sampling),linked_flag:n||!(t==null||!t.linked_flag),url_trigger:n||!(t==null||!t.url_trigger),event_trigger:n||!(t==null||!t.event_trigger)};if(Object.values(r).some(Boolean)){var i,o,s,a,l;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((o=this.sessionRecording)==null||o.overrideSampling()),r.linked_flag&&((s=this.sessionRecording)==null||s.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!((t=this.sessionRecording)==null||!t.started)}captureException(t,n){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(yt({},aie((i=>i instanceof Error)(t)?{error:t,event:t.message}:{event:t},{syntheticException:r}),n))}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var n;return(n=this.persistence)==null?void 0:n.props[t]}getSessionProperty(t){var n;return(n=this.sessionPersistence)==null?void 0:n.props[t]}toString(){var t,n=(t=this.config.name)!==null&&t!==void 0?t:wu;return n!==wu&&(n=wu+"."+n),n}_isIdentified(){var t,n;return((t=this.persistence)==null?void 0:t.get_property(Cs))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(Cs))==="identified"}Es(){var t,n,r,i;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Fu(this.getGroups())&&((t=this.persistence)==null||(n=t.props)==null||!n[Dd])&&((r=this.persistence)==null||(i=r.props)==null||!i[Am]))}$s(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Es()||this.Is("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Is(t){return this.config.person_profiles==="never"?(Et.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Ps(Am,!0),!0)}_s(){var t,n,r,i,o=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||o&&!!s;((t=this.persistence)==null?void 0:t.ke)!==a&&((r=this.persistence)==null||r.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.ke)!==a&&((i=this.sessionPersistence)==null||i.set_disabled(a))}opt_in_capturing(t){var n;this.consent.optInOut(!0),this._s(),(gt(t==null?void 0:t.captureEventName)||t!=null&&t.captureEventName)&&this.capture((n=t==null?void 0:t.captureEventName)!==null&&n!==void 0?n:"$opt_in",t==null?void 0:t.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Ss()}opt_out_capturing(){this.consent.optInOut(!1),this._s()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return Ii?g5(Ii,this.config.custom_blocked_useragents):void 0}Ss(){bt&&(bt.visibilityState==="visible"?this.us||(this.us=!0,this.capture("$pageview",{title:bt.title},{send_instantly:!0}),this.hs&&(bt.removeEventListener("visibilitychange",this.hs),this.hs=null)):this.hs||(this.hs=this.Ss.bind(this),Tn(bt,"visibilitychange",this.hs)))}debug(t){t===!1?(Ie==null||Ie.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(Ie==null||Ie.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}xs(t){if(ln(this.config.before_send))return t;var n=Bn(this.config.before_send)?this.config.before_send:[this.config.before_send],r=t;for(var i of n){if(r=i(r),ln(r)){var o="Event '"+t.event+"' was rejected in beforeSend function";return yre(t.event)?Et.warn(o+". This can cause unexpected behavior."):Et.info(o),null}r.properties&&!Fu(r.properties)||Et.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var t;return(t=this.pageViewManager.oe)==null?void 0:t.pageViewId}captureTraceFeedback(t,n){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:n})}captureTraceMetric(t,n,r){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:n,$ai_metric_value:String(r)})}}(function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=xre(e.prototype[t[n]])})(cv,["identify"]);var GA,YA,XA,JA,QA,ZA;(function(e){e.Button="button",e.Tab="tab",e.Selector="selector"})(GA||(GA={})),function(e){e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}(YA||(YA={})),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(XA||(XA={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(JA||(JA={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(QA||(QA={})),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}(ZA||(ZA={}));var eN,_u=(eN=sf[wu]=new cv,function(){function e(){e.done||(e.done=!0,m5=!1,mn(sf,function(t){t._dom_loaded()}))}bt!=null&&bt.addEventListener?bt.readyState==="complete"?e():Tn(bt,"DOMContentLoaded",e,{capture:!1}):Ie&&Et.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),eN),AS=j.createContext({client:_u});function y5(e,t,n){if(n===void 0&&(n=new WeakMap),e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(n.has(e)&&n.get(e)===t)return!0;n.set(e,t);var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var o=0,s=r;o<s.length;o++){var a=s[o];if(!i.includes(a)||!y5(e[a],t[a],n))return!1}return!0}function Coe(e){var t=e.children,n=e.client,r=e.apiKey,i=e.options,o=j.useRef(null),s=j.useMemo(function(){return n?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),i&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),_u)},[n,r,JSON.stringify(i)]);return j.useEffect(function(){if(!n){var a=o.current;a?(r!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),i&&!y5(i,a.options)&&_u.set_config(i),o.current={apiKey:r,options:i!=null?i:{}}):(_u.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),_u.init(r,i),o.current={apiKey:r,options:i!=null?i:{}})}},[n,r,JSON.stringify(i)]),Tt.createElement(AS.Provider,{value:{client:s}},t)}var joe=function(){var e=j.useContext(AS).client;return e},l_=function(e,t){return l_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},l_(e,t)};function Aoe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Nx=function(e){return typeof e=="function"},Noe={componentStack:null,error:null},Roe={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(e){Aoe(t,e);function t(n){var r=e.call(this,n)||this;return r.state=Noe,r}return t.prototype.componentDidCatch=function(n,r){var i=r.componentStack,o=this.props.additionalProperties;this.setState({error:n,componentStack:i});var s;Nx(o)?s=o(n):typeof o=="object"&&(s=o);var a=this.context.client;a.captureException(n,s)},t.prototype.render=function(){var n=this.props,r=n.children,i=n.fallback,o=this.state;if(o.componentStack==null)return Nx(r)?r():r;var s=Nx(i)?Tt.createElement(i,{error:o.error,componentStack:o.componentStack}):i;return Tt.isValidElement(s)?s:(console.warn(Roe.INVALID_FALLBACK),Tt.createElement(Tt.Fragment,null))},t.contextType=AS,t})(Tt.Component);const Io=e=>e.slice(-10);function dv(){return typeof window<"u"}function Yc(e){return v5(e)?(e.nodeName||"").toLowerCase():"#document"}function $i(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ys(e){var t;return(t=(v5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function v5(e){return dv()?e instanceof Node||e instanceof $i(e).Node:!1}function Yn(e){return dv()?e instanceof Element||e instanceof $i(e).Element:!1}function _i(e){return dv()?e instanceof HTMLElement||e instanceof $i(e).HTMLElement:!1}function u_(e){return!dv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $i(e).ShadowRoot}function Ah(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=io(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Toe(e){return["table","td","th"].includes(Yc(e))}function fv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(n){return!1}})}function NS(e){const t=hv(),n=Yn(e)?io(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ioe(e){let t=Qs(e);for(;_i(t)&&!Ws(t);){if(NS(t))return t;if(fv(t))return null;t=Qs(t)}return null}function hv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ws(e){return["html","body","#document"].includes(Yc(e))}function io(e){return $i(e).getComputedStyle(e)}function pv(e){return Yn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qs(e){if(Yc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||u_(e)&&e.host||ys(e);return u_(t)?t.host:t}function x5(e){const t=Qs(e);return Ws(t)?e.ownerDocument?e.ownerDocument.body:e.body:_i(t)&&Ah(t)?t:x5(t)}function La(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=x5(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=$i(i);if(o){const a=c_(s);return t.concat(s,s.visualViewport||[],Ah(i)?i:[],a&&n?La(a):[])}return t.concat(i,La(i,[],n))}function c_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Rc=Math.min,Ci=Math.max,Fm=Math.round,zp=Math.floor,ss=e=>({x:e,y:e}),Poe={left:"right",right:"left",bottom:"top",top:"bottom"},Ooe={start:"end",end:"start"};function tN(e,t,n){return Ci(e,Rc(t,n))}function Nh(e,t){return typeof e=="function"?e(t):e}function Ya(e){return e.split("-")[0]}function Rh(e){return e.split("-")[1]}function b5(e){return e==="x"?"y":"x"}function w5(e){return e==="y"?"height":"width"}function Fa(e){return["top","bottom"].includes(Ya(e))?"y":"x"}function _5(e){return b5(Fa(e))}function $oe(e,t,n){n===void 0&&(n=!1);const r=Rh(e),i=_5(e),o=w5(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Bm(s)),[s,Bm(s)]}function Moe(e){const t=Bm(e);return[d_(e),t,d_(t)]}function d_(e){return e.replace(/start|end/g,t=>Ooe[t])}function Doe(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function Loe(e,t,n,r){const i=Rh(e);let o=Doe(Ya(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(d_)))),o}function Bm(e){return e.replace(/left|right|bottom|top/g,t=>Poe[t])}function Foe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Boe(e){return typeof e!="number"?Foe(e):{top:e,right:e,bottom:e,left:e}}function zm(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}const nN="data-floating-ui-focusable",zoe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function rN(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&u_(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Ed(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Rx(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Hoe(e){return e.matches("html,body")}function iN(e){return(e==null?void 0:e.ownerDocument)||document}function Woe(e){return _i(e)&&e.matches(zoe)}function Uoe(e){return e?e.hasAttribute(nN)?e:e.querySelector("["+nN+"]")||e:null}function Tx(e,t,n){n===void 0&&(n=!0);let r=e.filter(o=>{var s;return o.parentId===t&&((s=o.context)==null?void 0:s.open)}),i=r;for(;i.length;)i=n?e.filter(o=>{var s;return(s=i)==null?void 0:s.some(a=>{var l;return o.parentId===a.id&&((l=o.context)==null?void 0:l.open)})}):e,r=r.concat(i);return r}function Voe(e){return"nativeEvent"in e}function oN(e,t){return["mouse","pen"].includes(e)}var f_=typeof document<"u"?j.useLayoutEffect:j.useEffect;const qoe={...XN},Koe=qoe.useInsertionEffect,Goe=Koe||(e=>e());function Su(e){const t=j.useRef(()=>{});return Goe(()=>{t.current=e}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function sN(e,t,n){let{reference:r,floating:i}=e;const o=Fa(t),s=_5(t),a=w5(s),l=Ya(t),u=o==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Rh(t)){case"start":p[s]-=h*(n&&u?-1:1);break;case"end":p[s]+=h*(n&&u?-1:1);break}return p}const Yoe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=sN(u,r,l),h=r,p={},v=0;for(let y=0;y<a.length;y++){const{name:w,fn:x}=a[y],{x:b,y:m,data:S,reset:E}=await x({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:u,platform:s,elements:{reference:e,floating:t}});d=b!=null?b:d,f=m!=null?m:f,p={...p,[w]:{...p[w],...S}},E&&v<=50&&(v++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(u=E.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:d,y:f}=sN(u,h,l)),y=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:p}};async function RS(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Nh(t,e),v=Boe(p),w=a[h?f==="floating"?"reference":"floating":f],x=zm(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),b=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,m=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),S=await(o.isElement==null?void 0:o.isElement(m))?await(o.getScale==null?void 0:o.getScale(m))||{x:1,y:1}:{x:1,y:1},E=zm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:m,strategy:l}):b);return{top:(x.top-E.top+v.top)/S.y,bottom:(E.bottom-x.bottom+v.bottom)/S.y,left:(x.left-E.left+v.left)/S.x,right:(E.right-x.right+v.right)/S.x}}const Xoe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...w}=Nh(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=Ya(i),b=Fa(a),m=Ya(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=h||(m||!y?[Bm(a)]:Moe(a)),k=v!=="none";!h&&k&&E.push(...Loe(a,y,v,S));const N=[a,...E],I=await RS(t,w),z=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&z.push(I[x]),f){const q=$oe(i,s,S);z.push(I[q[0]],I[q[1]])}if(O=[...O,{placement:i,overflows:z}],!z.every(q=>q<=0)){var M,K;const q=(((M=o.flip)==null?void 0:M.index)||0)+1,G=N[q];if(G){var D;const B=f==="alignment"?b!==Fa(G):!1,H=((D=O[0])==null?void 0:D.overflows[0])>0;if(!B||H)return{data:{index:q,overflows:O},reset:{placement:G}}}let te=(K=O.filter(B=>B.overflows[0]<=0).sort((B,H)=>B.overflows[1]-H.overflows[1])[0])==null?void 0:K.placement;if(!te)switch(p){case"bestFit":{var L;const B=(L=O.filter(H=>{if(k){const $=Fa(H.placement);return $===b||$==="y"}return!0}).map(H=>[H.placement,H.overflows.filter($=>$>0).reduce(($,Y)=>$+Y,0)]).sort((H,$)=>H[1]-$[1])[0])==null?void 0:L[0];B&&(te=B);break}case"initialPlacement":te=a;break}if(i!==te)return{reset:{placement:te}}}return{}}}};async function Joe(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Ya(n),a=Rh(n),l=Fa(n)==="y",u=["left","top"].includes(s)?-1:1,d=o&&l?-1:1,f=Nh(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),l?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const Qoe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await Joe(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Zoe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:w=>{let{x,y:b}=w;return{x,y:b}}},...l}=Nh(e,t),u={x:n,y:r},d=await RS(t,l),f=Fa(Ya(i)),h=b5(f);let p=u[h],v=u[f];if(o){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=p+d[w],m=p-d[x];p=tN(b,p,m)}if(s){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=v+d[w],m=v-d[x];v=tN(b,v,m)}const y=a.fn({...t,[h]:p,[f]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:o,[f]:s}}}}}},ese=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...u}=Nh(e,t),d=await RS(t,u),f=Ya(i),h=Rh(i),p=Fa(i)==="y",{width:v,height:y}=o.floating;let w,x;f==="top"||f==="bottom"?(w=f,x=h===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,w=h==="end"?"top":"bottom");const b=y-d.top-d.bottom,m=v-d.left-d.right,S=Rc(y-d[w],b),E=Rc(v-d[x],m),k=!t.middlewareData.shift;let N=S,I=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=m),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=b),k&&!h){const O=Ci(d.left,0),M=Ci(d.right,0),K=Ci(d.top,0),D=Ci(d.bottom,0);p?I=v-2*(O!==0||M!==0?O+M:Ci(d.left,d.right)):N=y-2*(K!==0||D!==0?K+D:Ci(d.top,d.bottom))}await l({...t,availableWidth:I,availableHeight:N});const z=await s.getDimensions(a.floating);return v!==z.width||y!==z.height?{reset:{rects:!0}}:{}}}};function S5(e){const t=io(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=_i(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=Fm(n)!==o||Fm(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function TS(e){return Yn(e)?e:e.contextElement}function ec(e){const t=TS(e);if(!_i(t))return ss(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=S5(t);let s=(o?Fm(n.width):n.width)/r,a=(o?Fm(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const tse=ss(0);function E5(e){const t=$i(e);return!hv()||!t.visualViewport?tse:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nse(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$i(e)?!1:t}function Jl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=TS(e);let s=ss(1);t&&(r?Yn(r)&&(s=ec(r)):s=ec(e));const a=nse(o,n,r)?E5(o):ss(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(o){const h=$i(o),p=r&&Yn(r)?$i(r):r;let v=h,y=c_(v);for(;y&&r&&p!==v;){const w=ec(y),x=y.getBoundingClientRect(),b=io(y),m=x.left+(y.clientLeft+parseFloat(b.paddingLeft))*w.x,S=x.top+(y.clientTop+parseFloat(b.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,f*=w.y,l+=m,u+=S,v=$i(y),y=c_(v)}}return zm({width:d,height:f,x:l,y:u})}function IS(e,t){const n=pv(e).scrollLeft;return t?t.left+n:Jl(ys(e)).left+n}function k5(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:IS(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function rse(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=ys(r),a=t?fv(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=ss(1);const d=ss(0),f=_i(r);if((f||!f&&!o)&&((Yc(r)!=="body"||Ah(s))&&(l=pv(r)),_i(r))){const p=Jl(r);u=ec(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=s&&!f&&!o?k5(s,l,!0):ss(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-l.scrollTop*u.y+d.y+h.y}}function ise(e){return Array.from(e.getClientRects())}function ose(e){const t=ys(e),n=pv(e),r=e.ownerDocument.body,i=Ci(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Ci(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+IS(e);const a=-n.scrollTop;return io(r).direction==="rtl"&&(s+=Ci(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function sse(e,t){const n=$i(e),r=ys(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=hv();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function ase(e,t){const n=Jl(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=_i(e)?ec(e):ss(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function aN(e,t,n){let r;if(t==="viewport")r=sse(e,n);else if(t==="document")r=ose(ys(e));else if(Yn(t))r=ase(t,n);else{const i=E5(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return zm(r)}function C5(e,t){const n=Qs(e);return n===t||!Yn(n)||Ws(n)?!1:io(n).position==="fixed"||C5(n,t)}function lse(e,t){const n=t.get(e);if(n)return n;let r=La(e,[],!1).filter(a=>Yn(a)&&Yc(a)!=="body"),i=null;const o=io(e).position==="fixed";let s=o?Qs(e):e;for(;Yn(s)&&!Ws(s);){const a=io(s),l=NS(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ah(s)&&!l&&C5(e,s))?r=r.filter(d=>d!==s):i=a,s=Qs(s)}return t.set(e,r),r}function use(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?fv(t)?[]:lse(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,d)=>{const f=aN(t,d,i);return u.top=Ci(f.top,u.top),u.right=Rc(f.right,u.right),u.bottom=Rc(f.bottom,u.bottom),u.left=Ci(f.left,u.left),u},aN(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function cse(e){const{width:t,height:n}=S5(e);return{width:t,height:n}}function dse(e,t,n){const r=_i(t),i=ys(t),o=n==="fixed",s=Jl(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=ss(0);function u(){l.x=IS(i)}if(r||!r&&!o)if((Yc(t)!=="body"||Ah(i))&&(a=pv(t)),r){const p=Jl(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&u();o&&!r&&i&&u();const d=i&&!r&&!o?k5(i,a):ss(0),f=s.left+a.scrollLeft-l.x-d.x,h=s.top+a.scrollTop-l.y-d.y;return{x:f,y:h,width:s.width,height:s.height}}function Ix(e){return io(e).position==="static"}function lN(e,t){if(!_i(e)||io(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ys(e)===n&&(n=n.ownerDocument.body),n}function j5(e,t){const n=$i(e);if(fv(e))return n;if(!_i(e)){let i=Qs(e);for(;i&&!Ws(i);){if(Yn(i)&&!Ix(i))return i;i=Qs(i)}return n}let r=lN(e,t);for(;r&&Toe(r)&&Ix(r);)r=lN(r,t);return r&&Ws(r)&&Ix(r)&&!NS(r)?n:r||Ioe(e)||n}const fse=async function(e){const t=this.getOffsetParent||j5,n=this.getDimensions,r=await n(e.floating);return{reference:dse(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hse(e){return io(e).direction==="rtl"}const pse={convertOffsetParentRelativeRectToViewportRelativeRect:rse,getDocumentElement:ys,getClippingRect:use,getOffsetParent:j5,getElementRects:fse,getClientRects:ise,getDimensions:cse,getScale:ec,isElement:Yn,isRTL:hse};function A5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gse(e,t){let n=null,r;const i=ys(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(a||t(),!h||!p)return;const v=zp(f),y=zp(i.clientWidth-(d+h)),w=zp(i.clientHeight-(f+p)),x=zp(d),m={rootMargin:-v+"px "+-y+"px "+-w+"px "+-x+"px",threshold:Ci(0,Rc(1,l))||1};let S=!0;function E(k){const N=k[0].intersectionRatio;if(N!==l){if(!S)return s();N?s(!1,N):r=setTimeout(()=>{s(!1,1e-7)},1e3)}N===1&&!A5(u,e.getBoundingClientRect())&&s(),S=!1}try{n=new IntersectionObserver(E,{...m,root:i.ownerDocument})}catch(k){n=new IntersectionObserver(E,m)}n.observe(e)}return s(!0),o}function mse(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=TS(e),d=i||o?[...u?La(u):[],...La(t)]:[];d.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const f=u&&a?gse(u,n):null;let h=-1,p=null;s&&(p=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var m;(m=p)==null||m.observe(t)})),n()}),u&&!l&&p.observe(u),p.observe(t));let v,y=l?Jl(e):null;l&&w();function w(){const x=Jl(e);y&&!A5(y,x)&&n(),y=x,v=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(b=>{i&&b.removeEventListener("scroll",n),o&&b.removeEventListener("resize",n)}),f==null||f(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const yse=Qoe,vse=Zoe,xse=Xoe,bse=ese,wse=(e,t,n)=>{const r=new Map,i={platform:pse,...n},o={...i.platform,_c:r};return Yoe(e,t,{...i,platform:o})};var mg=typeof document<"u"?j.useLayoutEffect:j.useEffect;function Hm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Hm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Hm(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function N5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function uN(e,t){const n=N5(e);return Math.round(t*n)/n}function Px(e){const t=j.useRef(e);return mg(()=>{t.current=e}),t}function _se(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[d,f]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=j.useState(r);Hm(h,r)||p(r);const[v,y]=j.useState(null),[w,x]=j.useState(null),b=j.useCallback(B=>{B!==k.current&&(k.current=B,y(B))},[]),m=j.useCallback(B=>{B!==N.current&&(N.current=B,x(B))},[]),S=o||v,E=s||w,k=j.useRef(null),N=j.useRef(null),I=j.useRef(d),z=l!=null,O=Px(l),M=Px(i),K=Px(u),D=j.useCallback(()=>{if(!k.current||!N.current)return;const B={placement:t,strategy:n,middleware:h};M.current&&(B.platform=M.current),wse(k.current,N.current,B).then(H=>{const $={...H,isPositioned:K.current!==!1};L.current&&!Hm(I.current,$)&&(I.current=$,uy.flushSync(()=>{f($)}))})},[h,t,n,M,K]);mg(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[u]);const L=j.useRef(!1);mg(()=>(L.current=!0,()=>{L.current=!1}),[]),mg(()=>{if(S&&(k.current=S),E&&(N.current=E),S&&E){if(O.current)return O.current(S,E,D);D()}},[S,E,D,O,z]);const q=j.useMemo(()=>({reference:k,floating:N,setReference:b,setFloating:m}),[b,m]),G=j.useMemo(()=>({reference:S,floating:E}),[S,E]),te=j.useMemo(()=>{const B={position:n,left:0,top:0};if(!G.floating)return B;const H=uN(G.floating,d.x),$=uN(G.floating,d.y);return a?{...B,transform:"translate("+H+"px, "+$+"px)",...N5(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:$}},[n,a,G.floating,d.x,d.y]);return j.useMemo(()=>({...d,update:D,refs:q,elements:G,floatingStyles:te}),[d,D,q,G,te])}const PS=(e,t)=>({...yse(e),options:[e,t]}),OS=(e,t)=>({...vse(e),options:[e,t]}),$S=(e,t)=>({...xse(e),options:[e,t]}),Sse=(e,t)=>({...bse(e),options:[e,t]}),Ese="data-floating-ui-focusable",cN="active",dN="selected",kse={...XN};let fN=!1,Cse=0;const hN=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Cse++;function jse(){const[e,t]=j.useState(()=>fN?hN():void 0);return f_(()=>{e==null&&t(hN())},[]),j.useEffect(()=>{fN=!0},[]),e}const Ase=kse.useId,R5=Ase||jse;function Nse(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const Rse=j.createContext(null),Tse=j.createContext(null),T5=()=>{var e;return((e=j.useContext(Rse))==null?void 0:e.id)||null},I5=()=>j.useContext(Tse);function Ise(e){return"data-floating-ui-"+e}function pN(e){return _i(e.target)&&e.target.tagName==="BUTTON"}function Pse(e){return _i(e.target)&&e.target.tagName==="A"}function gN(e){return Woe(e)}function P5(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:a="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:d=!0,stickIfOpen:f=!0}=t,h=j.useRef(),p=j.useRef(!1),v=j.useMemo(()=>({onPointerDown(y){h.current=y.pointerType},onMouseDown(y){const w=h.current;y.button===0&&a!=="click"&&(oN(w)&&u||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="mousedown")?r(!1,y.nativeEvent,"click"):(y.preventDefault(),r(!0,y.nativeEvent,"click"))))},onClick(y){const w=h.current;if(a==="mousedown"&&h.current){h.current=void 0;return}oN(w)&&u||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="click")?r(!1,y.nativeEvent,"click"):r(!0,y.nativeEvent,"click"))},onKeyDown(y){h.current=void 0,!(y.defaultPrevented||!d||pN(y))&&(y.key===" "&&!gN(o)&&(y.preventDefault(),p.current=!0),!Pse(y)&&y.key==="Enter"&&r(!(n&&l),y.nativeEvent,"click"))},onKeyUp(y){y.defaultPrevented||!d||pN(y)||gN(o)||y.key===" "&&p.current&&(p.current=!1,r(!(n&&l),y.nativeEvent,"click"))}}),[i,o,a,u,d,r,n,f,l]);return j.useMemo(()=>s?{reference:v}:{},[s,v])}const Ose={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},$se={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},mN=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function O5(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:h=!1,bubbles:p,capture:v}=t,y=I5(),w=Su(typeof l=="function"?l:()=>!1),x=typeof l=="function"?w:l,b=j.useRef(!1),m=j.useRef(!1),{escapeKey:S,outsidePress:E}=mN(p),{escapeKey:k,outsidePress:N}=mN(v),I=j.useRef(!1),z=Su(q=>{var G;if(!n||!s||!a||q.key!=="Escape"||I.current)return;const te=(G=o.current.floatingContext)==null?void 0:G.nodeId,B=y?Tx(y.nodesRef.current,te):[];if(!S&&(q.stopPropagation(),B.length>0)){let H=!0;if(B.forEach($=>{var Y;if((Y=$.context)!=null&&Y.open&&!$.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}r(!1,Voe(q)?q.nativeEvent:q,"escape-key")}),O=Su(q=>{var G;const te=()=>{var B;z(q),(B=Ed(q))==null||B.removeEventListener("keydown",te)};(G=Ed(q))==null||G.addEventListener("keydown",te)}),M=Su(q=>{var G;const te=b.current;b.current=!1;const B=m.current;if(m.current=!1,u==="click"&&B||te||typeof x=="function"&&!x(q))return;const H=Ed(q),$="["+Ise("inert")+"]",Y=iN(i.floating).querySelectorAll($);let se=Yn(H)?H:null;for(;se&&!Ws(se);){const Te=Qs(se);if(Ws(Te)||!Yn(Te))break;se=Te}if(Y.length&&Yn(H)&&!Hoe(H)&&!rN(H,i.floating)&&Array.from(Y).every(Te=>!rN(se,Te)))return;if(_i(H)&&L){const Te=Ws(H),U=io(H),ee=/auto|scroll/,re=Te||ee.test(U.overflowX),De=Te||ee.test(U.overflowY),Ye=re&&H.clientWidth>0&&H.scrollWidth>H.clientWidth,ze=De&&H.clientHeight>0&&H.scrollHeight>H.clientHeight,ie=U.direction==="rtl",fe=ze&&(ie?q.offsetX<=H.offsetWidth-H.clientWidth:q.offsetX>H.clientWidth),Se=Ye&&q.offsetY>H.clientHeight;if(fe||Se)return}const ue=(G=o.current.floatingContext)==null?void 0:G.nodeId,Ce=y&&Tx(y.nodesRef.current,ue).some(Te=>{var U;return Rx(q,(U=Te.context)==null?void 0:U.elements.floating)});if(Rx(q,i.floating)||Rx(q,i.domReference)||Ce)return;const Ne=y?Tx(y.nodesRef.current,ue):[];if(Ne.length>0){let Te=!0;if(Ne.forEach(U=>{var ee;if((ee=U.context)!=null&&ee.open&&!U.context.dataRef.current.__outsidePressBubbles){Te=!1;return}}),!Te)return}r(!1,q,"outside-press")}),K=Su(q=>{var G;const te=()=>{var B;M(q),(B=Ed(q))==null||B.removeEventListener(u,te)};(G=Ed(q))==null||G.addEventListener(u,te)});j.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=S,o.current.__outsidePressBubbles=E;let q=-1;function G(Y){r(!1,Y,"ancestor-scroll")}function te(){window.clearTimeout(q),I.current=!0}function B(){q=window.setTimeout(()=>{I.current=!1},hv()?5:0)}const H=iN(i.floating);a&&(H.addEventListener("keydown",k?O:z,k),H.addEventListener("compositionstart",te),H.addEventListener("compositionend",B)),x&&H.addEventListener(u,N?K:M,N);let $=[];return h&&(Yn(i.domReference)&&($=La(i.domReference)),Yn(i.floating)&&($=$.concat(La(i.floating))),!Yn(i.reference)&&i.reference&&i.reference.contextElement&&($=$.concat(La(i.reference.contextElement)))),$=$.filter(Y=>{var se;return Y!==((se=H.defaultView)==null?void 0:se.visualViewport)}),$.forEach(Y=>{Y.addEventListener("scroll",G,{passive:!0})}),()=>{a&&(H.removeEventListener("keydown",k?O:z,k),H.removeEventListener("compositionstart",te),H.removeEventListener("compositionend",B)),x&&H.removeEventListener(u,N?K:M,N),$.forEach(Y=>{Y.removeEventListener("scroll",G)}),window.clearTimeout(q)}},[o,i,a,x,u,n,r,h,s,S,E,z,k,O,M,N,K]),j.useEffect(()=>{b.current=!1},[x,u]);const D=j.useMemo(()=>({onKeyDown:z,...d&&{[Ose[f]]:q=>{r(!1,q.nativeEvent,"reference-press")},...f!=="click"&&{onClick(q){r(!1,q.nativeEvent,"reference-press")}}}}),[z,r,d,f]),L=j.useMemo(()=>({onKeyDown:z,onMouseDown(){m.current=!0},onMouseUp(){m.current=!0},[$se[u]]:()=>{b.current=!0}}),[z,u]);return j.useMemo(()=>s?{reference:D,floating:L}:{},[s,D,L])}function Mse(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=R5(),o=j.useRef({}),[s]=j.useState(()=>Nse()),a=T5()!=null,[l,u]=j.useState(r.reference),d=Su((p,v,y)=>{o.current.openEvent=p?v:void 0,s.emit("openchange",{open:p,event:v,reason:y,nested:a}),n==null||n(p,v,y)}),f=j.useMemo(()=>({setPositionReference:u}),[]),h=j.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return j.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:h,events:s,floatingId:i,refs:f}),[t,d,h,s,i,f])}function MS(e){e===void 0&&(e={});const{nodeId:t}=e,n=Mse({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=j.useState(null),[a,l]=j.useState(null),d=(i==null?void 0:i.domReference)||o,f=j.useRef(null),h=I5();f_(()=>{d&&(f.current=d)},[d]);const p=_se({...e,elements:{...i,...a&&{reference:a}}}),v=j.useCallback(m=>{const S=Yn(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),getClientRects:()=>m.getClientRects(),contextElement:m}:m;l(S),p.refs.setReference(S)},[p.refs]),y=j.useCallback(m=>{(Yn(m)||m===null)&&(f.current=m,s(m)),(Yn(p.refs.reference.current)||p.refs.reference.current===null||m!==null&&!Yn(m))&&p.refs.setReference(m)},[p.refs]),w=j.useMemo(()=>({...p.refs,setReference:y,setPositionReference:v,domReference:f}),[p.refs,y,v]),x=j.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),b=j.useMemo(()=>({...p,...r,refs:w,elements:x,nodeId:t}),[p,w,x,t,r]);return f_(()=>{r.dataRef.current.floatingContext=b;const m=h==null?void 0:h.nodesRef.current.find(S=>S.id===t);m&&(m.context=b)}),j.useMemo(()=>({...p,context:b,refs:w,elements:x}),[p,w,x,b])}function Ox(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[cN]:s,[dN]:a,...l}=e;o=l}return{...n==="floating"&&{tabIndex:-1,[Ese]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[u,d]=l;if(!(i&&[cN,dN].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof d=="function"){var f;(f=r.get(u))==null||f.push(d),s[u]=function(){for(var h,p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return(h=r.get(u))==null?void 0:h.map(w=>w(...v)).find(w=>w!==void 0)}}}else s[u]=d}),s),{})}}function $5(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=j.useCallback(a=>Ox(a,e,"reference"),t),o=j.useCallback(a=>Ox(a,e,"floating"),n),s=j.useCallback(a=>Ox(a,e,"item"),r);return j.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const Dse=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function M5(e,t){var n,r;t===void 0&&(t={});const{open:i,elements:o,floatingId:s}=e,{enabled:a=!0,role:l="dialog"}=t,u=R5(),d=((n=o.domReference)==null?void 0:n.id)||u,f=j.useMemo(()=>{var b;return((b=Uoe(o.floating))==null?void 0:b.id)||s},[o.floating,s]),h=(r=Dse.get(l))!=null?r:l,v=T5()!=null,y=j.useMemo(()=>h==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:i?f:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":h==="alertdialog"?"dialog":h,"aria-controls":i?f:void 0,...h==="listbox"&&{role:"combobox"},...h==="menu"&&{id:d},...h==="menu"&&v&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[h,f,v,i,d,l]),w=j.useMemo(()=>{const b={id:f,...h&&{role:h}};return h==="tooltip"||l==="label"?b:{...b,...h==="menu"&&{"aria-labelledby":d}}},[h,f,d,l]),x=j.useCallback(b=>{let{active:m,selected:S}=b;const E={role:"option",...m&&{id:f+"-fui-option"}};switch(l){case"select":return{...E,"aria-selected":m&&S};case"combobox":return{...E,"aria-selected":S}}return{}},[f,l]);return j.useMemo(()=>a?{reference:y,floating:w,item:x}:{},[a,y,w,x])}const Lse=({options:e=[],value:t=[],onChange:n=()=>{},placeholder:r="Select options...",searchable:i=!0,maxHeight:o=200,className:s=""})=>{const[a,l]=j.useState(!1),[u,d]=j.useState(""),f=j.useRef(null),{refs:h,floatingStyles:p,context:v}=MS({open:a,onOpenChange:l,middleware:[PS(4),$S(),OS({padding:8}),Sse({apply({rects:S,elements:E}){Object.assign(E.floating.style,{width:"".concat(Math.max(S.reference.width,200),"px"),maxHeight:"".concat(o,"px")})}})],whileElementsMounted:mse}),y=e.filter(S=>S.label.toLowerCase().includes(u.toLowerCase())),w=S=>{const E=t.includes(S.value)?t.filter(k=>k!==S.value):[...t,S.value];n(E)},x=(S,E)=>{E.stopPropagation();const k=t.filter(N=>N!==S);n(k)},b=()=>e.filter(S=>t.includes(S.value)).map(S=>S.label);j.useEffect(()=>{a&&i&&f.current&&f.current.focus()},[a,i]),j.useEffect(()=>{const S=E=>{h.floating.current&&!h.floating.current.contains(E.target)&&h.domReference.current&&!h.domReference.current.contains(E.target)&&l(!1)};if(a)return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[a,h]);const m=b();return c.jsxs("div",{className:"relative ".concat(s),children:[c.jsx("div",{ref:h.setReference,onClick:()=>l(!a),className:"min-h-[40px] px-3 py-2 border border-fantasy-border rounded-md bg-fantasy-dark cursor-pointer hover:border-fantasy-border/40 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:m.length===0?c.jsx("span",{className:"text-fantasy-text-muted",children:r}):m.map((S,E)=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-fantasy-accent/40 text-fantasy-text rounded text-sm",children:[S,c.jsx("button",{onClick:k=>{const N=e.find(I=>I.label===S);N&&x(N.value,k)},className:"hover:bg-fantasy-accent-dark rounded-full p-0.5 transition-colors",children:c.jsx(E3,{size:12})})]},E))}),c.jsx(m1,{size:20,className:"text-fantasy-text-muted transition-transform ".concat(a?"rotate-180":"")})]})}),a&&c.jsxs("div",{ref:h.setFloating,style:p,className:"z-50 bg-fantasy-dark border border-fantasy-border rounded-md shadow-lg overflow-hidden",children:[i&&c.jsx("div",{className:"p-2 border-b border-fantasy-border",children:c.jsx("input",{ref:f,type:"text",value:u,onChange:S=>d(S.target.value),placeholder:"Search options...",className:"w-full px-2 py-1 border border-fantasy-border rounded text-sm focus:outline-none focus:ring-1 focus:ring-fantasy-accent"})}),c.jsx("div",{className:"overflow-y-auto",style:{maxHeight:o-(i?50:0)},children:y.length===0?c.jsx("div",{className:"px-3 py-2 text-fantasy-text-muted text-sm",children:u?"No options found":"No options available"}):y.map(S=>{const E=t.includes(S.value);return c.jsxs("div",{onClick:()=>w(S),className:"px-3 py-2 cursor-pointer hover:bg-fantasy-light flex items-center gap-2 ".concat(E?"bg-fantasy-glass":""),children:[c.jsx("div",{className:"w-4 h-4 border rounded flex items-center justify-center ".concat(E?"bg-fantasy-accent border-fantasy-border":"border-fantasy-border"),children:E&&c.jsx(WL,{size:12,className:"text-fantasy-text"})}),c.jsx("span",{className:"text-sm ".concat(E?"text-fantasy-accent-dark font-medium":"text-fantasy-text"),children:S.label})]},S.value)})})]})]})},Cl=async e=>{try{return await et.versions.get(e)}catch(t){console.log("Error getting subscription:",t);return}},Fse=async e=>{try{return await et.datapacks.get(e)}catch(t){console.log("Error getting datapack:",t)}},Bse=async e=>{try{return await et.systems.get(e)}catch(t){console.log("Error deleting system:",t)}},D5=async(e,t)=>{switch(e){case"system":return await Bse(t);case"datapack":return await Fse(t)}},gv=(e=[])=>{const t=oo(async()=>{const n=await et.subscriptions.toArray();if(!n)return[];const r=n.filter(s=>!s.deleted_at&&!e.includes(s.resource_type)).sort((s,a)=>new Date(s.subscribed_at)>new Date(a.subscribed_at)?-1:1),i={},o={};for(let s=0;s<r.length;s++){const a=r[s];if(o[a.resource_id])continue;if(!i[a.resource_id]){const d=await D5(a.resource_type,a.resource_id);if(!d){o[a.resource_id]=!0;continue}i[a.resource_id]={item_id:a.resource_id,item:d,type:a.resource_type,versions:[],subscriptions:[],hashes:{}}}const l=await Cl(a.version_id),u=await et.typeHashes.get(a.version_id);i[a.resource_id].subscriptions.push(a),l&&i[a.resource_id].versions.push(l),u&&(i[a.resource_id].hashes[a.version_id]=u.hashes)}return Object.values(i).map(s=>({...s,versions:s.versions.sort((a,l)=>{if(!a||!l)return 0;const u=new Date(a.created_at),d=new Date(l.created_at);return u>d?1:0})}))},[]);return{subscriptions:t,isLoading:t===void 0}};function zse({id:e}){var x,b;const{characters:t}=sO(),{subscriptions:n}=gv(["theme"]),r=j.useMemo(()=>(n||[]).filter(m=>m.type==="system"),[n]),i=joe(),[o,s]=j.useState(),[a,l]=j.useState(),[u,d]=j.useState([]),f=j.useMemo(()=>(n||[]).filter(m=>!(!(m.type==="datapack")||!o||!a)).map(m=>({label:m.item.name,value:m.versions.filter(S=>{if(!o||!a)return!1;const E=o.hashes[a.local_id],k=m.hashes[S.local_id];for(let N=0;N<k.length;N++){const I=k[N],z=E.find(O=>O.name===I.name);if(!z||I.hash!==z.hash)return!1}return!0})[0]})),[n,o]),[h,p]=j.useState(0),[v,y]=j.useState({local_id:"",user_id:"none",name:"",data:(x=a==null?void 0:a.data.defaultCharacterData)!=null?x:{},system:{local_id:"",version_id:""},datapacks:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()});j.useEffect(()=>{const m=r[0];if(!m||m.item_id===(o==null?void 0:o.item_id))return;s(m);let S=m.versions[0];!S||S.local_id===(a==null?void 0:a.local_id)||(l(S),y({...v,data:structuredClone(S.data.defaultCharacterData),system:{local_id:m.item_id,version_id:S.local_id},datapacks:[]}))},[r]);const w=j.useCallback(()=>Hn(e),[e]);return o?c.jsxs(Wn,{isOpen:!0,onClose:w,children:[c.jsx(Vn,{title:"Create Character",onClose:w}),c.jsx(Un,{children:h===0&&c.jsxs(c.Fragment,{children:[c.jsx(Vt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:v.name,onChange:m=>y({...v,name:m}),isValid:!t.find(m=>m.name===v.name),errorMessage:"Names must be unique"}),c.jsx(ct,{id:"character-system",label:"Tabletop System",value:o.item_id,onChange:m=>{const S=r.find(k=>k.item_id===m);if(!S)return;const E=S.versions[0];E&&(s(S),l(E),y({...v,data:structuredClone(E.data.defaultCharacterData),system:{local_id:S.item_id,version_id:E.local_id}}))},children:r.map(m=>c.jsx("option",{value:m.item_id,children:m.item.name},m.item_id))}),c.jsx(ct,{id:"character-system-version",label:"System Version",value:(b=a==null?void 0:a.local_id)!=null?b:"",onChange:m=>{const S=o.versions.find(E=>E.local_id===m);S&&(l(S),y({...v,data:structuredClone(S.data.defaultCharacterData),system:{local_id:o.item_id,version_id:S.local_id}}))},children:o.versions.map(m=>c.jsx("option",{value:m.local_id,children:Io(m.local_id)},m.local_id))}),c.jsx("p",{children:"Datapacks"}),c.jsx(Lse,{options:f,value:u,onChange:m=>d(m)})]})}),c.jsxs(Xn,{children:[c.jsx("nav",{className:"flex flex-grow mr-4","aria-label":"Breadcrumb",children:c.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse",children:[c.jsx("li",{className:"inline-flex items-center cursor-pointer",onClick:()=>p(0),children:c.jsxs("p",{className:"inline-flex items-center text-sm font-medium text-fantasy-text-muted hover:text-fantasy-text",children:[c.jsx("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})}),"Basics"]})}),a==null?void 0:a.data.creator.map((m,S)=>h<S+1?c.jsx(c.Fragment,{}):c.jsx("li",{className:"cursor-pointer",onClick:()=>p(S+1),children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"rtl:rotate-180 w-3 h-3 text-fantasy-text-muted mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})}),c.jsx("p",{className:"ms-1 text-sm font-medium text-fantasy-text-muted hover:bg-fantasy-text",children:m.name})]})},S))]})}),c.jsx(xt,{id:"create-character-button",color:"primary",disabled:v.name.length===0,onClick:async()=>{await lre(v.name,v.data,v.system,u.map(m=>({pack_id:m.reference_id,version_id:m.local_id}))),s(r[0]),w(),i.capture("character_created",{character_name:v.name})},children:"Create"})]})]}):c.jsxs(Wn,{isOpen:!0,onClose:w,children:[c.jsx(Vn,{title:"Error grabbing system",onClose:w}),c.jsx(Un,{children:c.jsx("h3",{children:"There was an error grabbing a default system, please subscribe to a system from the marketplace or import something!"})}),c.jsx(Xn,{children:c.jsx(xt,{color:"primary",onClick:w,children:"Close"})})]})}const uh=(e,t,n)=>{const r=new Blob([JSON.stringify({type:e,...t},null,2)],{type:"application/json"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download="".concat(n,".json"),o.click(),URL.revokeObjectURL(i),o.remove()};function Hse(){const e=oo(async()=>await et.systems.toArray(),[]);return{systems:e||[],isLoading:e===void 0}}function Wse(){const e=oo(async()=>(await et.versions.toArray()).filter(n=>{const r=n.deleted_at,i=n.local_id.split("|")[1]!==void 0;return!r&&!i}),[]);return{versions:e||[],isLoading:e===void 0}}const Use=e=>e>=200,Th=({label:e,options:t,containerClassName:n=""})=>{const[r,i]=j.useState(!1),{refs:o,floatingStyles:s,context:a}=MS({open:r,onOpenChange:i,middleware:[PS(4),$S(),OS()]}),l=P5(a),u=O5(a),d=M5(a,{role:"menu"}),{getReferenceProps:f,getFloatingProps:h}=$5([l,u,d]),p=v=>{v.onClick(),i(!1)};return c.jsxs("div",{className:"inline-flex relative",children:[c.jsx("button",{ref:o.setReference,...f(),className:"bg-white/10 text-fantasy-text border border-white/20 px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:bg-white/20 ".concat(n),children:e}),r&&c.jsx("div",{ref:o.setFloating,style:s,...h(),className:"absolute z-50 mt-1 flex flex-col w-48 rounded-lg shadow-lg bg-fantasy-medium border border-fantasy-border",children:t.map((v,y)=>c.jsx("div",{onClick:()=>p(v),className:"text-fantasy-text hover:bg-fantasy-dark rounded-lg px-4 py-2 text-sm font-medium cursor-pointer",children:v.label},y))})]})},L5=async e=>{Nk(e);const t=await An.post("/characters/change-synced",{characterIds:e});return Nk(e),t.data},Ql=({id:e,title:t,type:n,message:r,onConfirm:i})=>{const o=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:o,children:[c.jsx(Vn,{title:t,onClose:o}),c.jsx(Un,{className:"text-center",children:c.jsxs("div",{className:"p-4",children:[c.jsx("p",{className:"text-lg font-medium mb-2",children:r}),c.jsx("p",{className:"text-sm font-semibold text-red-500",children:"This action cannot be undone."})]})}),c.jsx(Xn,{children:c.jsx(xt,{color:n,onClick:()=>{i(),o()},children:"Confirm"})})]})},Vse=({id:e,label:t,onChange:n})=>{const[r,i]=j.useState(""),o=s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(a){const u=new FileReader;u.onload=d=>{var h;const f=(h=d.target)==null?void 0:h.result;i(a.name),n(f)},u.readAsText(a)}};return c.jsxs("div",{children:[c.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:"".concat(t," - ").concat(r!=null?r:"none")}),c.jsx("input",{type:"file",id:"file-upload",name:"file-name",onChange:o})]})},F5=({id:e,title:t,onSave:n})=>{const[r,i]=j.useState(""),o=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:o,children:[c.jsx(Vn,{title:t,onClose:o}),c.jsx(Un,{children:c.jsx(Vse,{id:"upload",label:"Upload file",onChange:i})}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:o,children:"Cancel"}),c.jsx(xt,{color:"primary",disabled:!1,onClick:()=>{n(r),o()},children:"Update"})]})]})};function qse({id:e,type:t,ImportModal:n,CreateModal:r}){const i=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:i,children:[c.jsx(Vn,{title:"Import Or Create?",onClose:i}),c.jsx(Un,{children:c.jsxs("p",{children:["Would you like to import or create a ",t,"?"]})}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"light",onClick:()=>{At("import-".concat(t),({id:o})=>c.jsx(n,{id:o})),i()},children:"Import"}),c.jsx(xt,{color:"light",onClick:()=>{At("create-".concat(t),({id:o})=>c.jsx(r,{id:o})),i()},children:"Create"})]})]})}const yN={synced:"bg-green-400 shadow-green-400/60",notsynced:"bg-red-400 shadow-red-400/60"},Kse=()=>{const{characters:e,isLoading:t}=sO();Hse(),Wse();const{isLoggedIn:n,user:r,synced_characters:i}=rr.useValue(),[o,s]=j.useState(!1),[a,l]=j.useState(!1),u=nu();if(t)return c.jsx(c.Fragment,{});const d=f=>{var v;const h=[{label:"export",onClick:()=>uh("character",f,"".concat(f.name,"-export"))},{label:"rename",onClick:()=>At("edit-string",({id:y})=>c.jsx(ds,{id:y,title:"Rename Character",data:f.name,onSave:w=>ure(f.local_id,w)}))},{label:"delete",onClick:()=>At("confirm",({id:y})=>c.jsx(Ql,{id:y,title:"Delete Character",type:"danger",message:"Are you sure you want to delete this character?",onConfirm:()=>dre(f.local_id)}))}];if(Use((v=r==null?void 0:r.role)!=null?v:0)||!n)return h;const p=i.includes(f.local_id);return h.unshift({label:p?"UnSync":"Sync",onClick:()=>{let y=[];i.includes(f.local_id)?y=i.filter(w=>w!==f.local_id):length<3&&(y=[...i,f.local_id]),L5(y)}}),h};return c.jsxs("div",{children:[c.jsx(cs,{title:"Your Adventuring Party",subtitle:"Manage your heroes and their epic journeys"}),c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"fantasy-add-gradient border-2 border-dashed border-fantasy-accent/30 rounded-2xl p-10 text-center cursor-pointer transition-all duration-300 min-h-[200px] flex flex-col justify-center items-center hover:border-fantasy-accent/60 hover:fantasy-add-gradient hover:-translate-y-1",onClick:()=>At("import-or-create",({id:f})=>c.jsx(qse,{id:f,type:"character",ImportModal:({id:h})=>c.jsx(F5,{id:h,title:"Import Character",onSave:async p=>{try{const v=JSON.parse(p);v&&await fre(v),cn("Unable to parse character.","error")}catch(v){cn("Error parsing / importing character.","error"),console.error(v)}}}),CreateModal:({id:h})=>c.jsx(zse,{id:h})})),children:[c.jsx("div",{className:"text-5xl text-fantasy-accent/60 mb-4",children:""}),c.jsx("div",{className:"text-fantasy-accent/80 text-base font-medium",children:"Create New Hero"})]}),e.length?e.map((f,h)=>c.jsxs("div",{style:{zIndex:"".concat(e.length-h)},className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[c.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 rounded-full shadow-lg ".concat(i.includes(f.local_id)?yN.synced:yN.notsynced)}),c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:f.name[0]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:f.name}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[c.jsx("span",{children:" Ranger"}),c.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:Io(f.system.local_id)})]})]})]}),c.jsxs("div",{className:"flex gap-4 my-4",children:[c.jsxs("div",{className:"text-center flex-1",children:[c.jsx("div",{className:"text-lg font-bold text-fantasy-accent",children:"12"}),c.jsx("div",{className:"text-[10px] text-white/60 uppercase tracking-wider",children:"Level"})]}),c.jsxs("div",{className:"text-center flex-1",children:[c.jsx("div",{className:"text-lg font-bold text-fantasy-accent",children:"347"}),c.jsx("div",{className:"text-[10px] text-white/60 uppercase tracking-wider",children:"XP"})]}),c.jsxs("div",{className:"text-center flex-1",children:[c.jsx("div",{className:"text-lg font-bold text-fantasy-accent",children:"5"}),c.jsx("div",{className:"text-[10px] text-white/60 uppercase tracking-wider",children:"Quests"})]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{className:"flex-1 fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>u(f.local_id),children:"Continue Adventure"}),c.jsx(Th,{label:"",options:d(f)})]})]},f.local_id)):c.jsx("h5",{children:"Doesn't look like you have any characters yet? Try creating one!"})]})})]})};function Gse(e){return oo(()=>et.characters.get(e||""),[e])}var Yse=Object.getOwnPropertyNames,Xse=Object.getOwnPropertySymbols,Jse=Object.prototype.hasOwnProperty;function vN(e,t){return function(r,i,o){return e(r,i,o)&&t(r,i,o)}}function Hp(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=e(n,r,i);return o.delete(n),o.delete(r),l}}function xN(e){return Yse(e).concat(Xse(e))}var Qse=Object.hasOwn||function(e,t){return Jse.call(e,t)};function lu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Zse="__v",eae="__o",tae="_owner",bN=Object.getOwnPropertyDescriptor,wN=Object.keys;function nae(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function rae(e,t){return lu(e.getTime(),t.getTime())}function iae(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function oae(e,t){return e===t}function _N(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.entries(),s,a,l=0;(s=o.next())&&!s.done;){for(var u=t.entries(),d=!1,f=0;(a=u.next())&&!a.done;){if(i[f]){f++;continue}var h=s.value,p=a.value;if(n.equals(h[0],p[0],l,f,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var sae=lu;function aae(e,t,n){var r=wN(e),i=r.length;if(wN(t).length!==i)return!1;for(;i-- >0;)if(!B5(e,t,n,r[i]))return!1;return!0}function kd(e,t,n){var r=xN(e),i=r.length;if(xN(t).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],!B5(e,t,n,o)||(s=bN(e,o),a=bN(t,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function lae(e,t){return lu(e.valueOf(),t.valueOf())}function uae(e,t){return e.source===t.source&&e.flags===t.flags}function SN(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.values(),s,a;(s=o.next())&&!s.done;){for(var l=t.values(),u=!1,d=0;(a=l.next())&&!a.done;){if(!i[d]&&n.equals(s.value,a.value,s.value,a.value,e,t,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function cae(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function dae(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function B5(e,t,n,r){return(r===tae||r===eae||r===Zse)&&(e.$$typeof||t.$$typeof)?!0:Qse(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var fae="[object Arguments]",hae="[object Boolean]",pae="[object Date]",gae="[object Error]",mae="[object Map]",yae="[object Number]",vae="[object Object]",xae="[object RegExp]",bae="[object Set]",wae="[object String]",_ae="[object URL]",Sae=Array.isArray,EN=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,kN=Object.assign,Eae=Object.prototype.toString.call.bind(Object.prototype.toString);function kae(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,o=e.areMapsEqual,s=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(v,y,w){if(v===y)return!0;if(v==null||y==null)return!1;var x=typeof v;if(x!==typeof y)return!1;if(x!=="object")return x==="number"?s(v,y,w):x==="function"?i(v,y,w):!1;var b=v.constructor;if(b!==y.constructor)return!1;if(b===Object)return a(v,y,w);if(Sae(v))return t(v,y,w);if(EN!=null&&EN(v))return f(v,y,w);if(b===Date)return n(v,y,w);if(b===RegExp)return u(v,y,w);if(b===Map)return o(v,y,w);if(b===Set)return d(v,y,w);var m=Eae(v);return m===pae?n(v,y,w):m===xae?u(v,y,w):m===mae?o(v,y,w):m===bae?d(v,y,w):m===vae?typeof v.then!="function"&&typeof y.then!="function"&&a(v,y,w):m===_ae?h(v,y,w):m===gae?r(v,y,w):m===fae?a(v,y,w):m===hae||m===yae||m===wae?l(v,y,w):!1}}function Cae(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?kd:nae,areDatesEqual:rae,areErrorsEqual:iae,areFunctionsEqual:oae,areMapsEqual:r?vN(_N,kd):_N,areNumbersEqual:sae,areObjectsEqual:r?kd:aae,arePrimitiveWrappersEqual:lae,areRegExpsEqual:uae,areSetsEqual:r?vN(SN,kd):SN,areTypedArraysEqual:r?kd:cae,areUrlsEqual:dae};if(n&&(i=kN({},i,n(i))),t){var o=Hp(i.areArraysEqual),s=Hp(i.areMapsEqual),a=Hp(i.areObjectsEqual),l=Hp(i.areSetsEqual);i=kN({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function jae(e){return function(t,n,r,i,o,s,a){return e(t,n,a)}}function Aae(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(l,u){var d=r(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return n(l,u,{cache:h,equals:i,meta:p,strict:o})};if(t)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,u){return n(l,u,s)}}var Wp=nl();nl({strict:!0});nl({circular:!0});nl({circular:!0,strict:!0});nl({createInternalComparator:function(){return lu}});nl({strict:!0,createInternalComparator:function(){return lu}});nl({circular:!0,createInternalComparator:function(){return lu}});nl({circular:!0,createInternalComparator:function(){return lu},strict:!0});function nl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,o=e.strict,s=o===void 0?!1:o,a=Cae(e),l=kae(a),u=r?r(l):jae(l);return Aae({circular:n,comparator:l,createState:i,equals:u,strict:s})}const Nae=({actions:e,system:t,character:n,updateState:r})=>c.jsx("aside",{className:"bg-fantasy-glass backdrop-blur-lg border-l border-fantasy-border shadow-2xl fixed top-0 right-0 z-40 w-64 h-screen transition-transform translate-x-full lg:-translate-x-0","aria-label":"Character Sidebar",children:c.jsxs("div",{className:"h-full flex flex-col px-3 py-4 overflow-y-auto",children:[c.jsx("div",{className:"py-4 mb-4 border-b border-neutral-200 dark:border-neutral-700",children:c.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"Quick Actions"})}),c.jsx("div",{className:"flex flex-col gap-2",children:e==null?void 0:e.map(i=>c.jsxs("div",{className:"fantasy-card-gradient border border-fantasy-border rounded px-4 py-2 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",onClick:()=>{const o=new jo(i.blueprint),s={name:"null page",blueprint:{nodes:[],edges:[]},lexical:"",state:[]};o.processBlueprint({},{system:t,character:n,page:s},r)},children:[c.jsx("p",{className:"text-neutral-100",children:i.name}),c.jsx("p",{className:"text-sm text-neutral-300",children:i.description})]},i.name))})]})}),Rae=()=>{const{id:e}=u1(),t=Gse(e),[n,r]=j.useState(null),i=j.useCallback(o=>{if(!t||!n)return;const s=o.system.pages.findIndex(a=>a.name===o.page.name);Wp(t,o.character)&&Wp(n,o.system)&&Wp(o.system.pages[s],o.page)||(cre(t.local_id,o.character.data),r({...o.system,pages:o.system.pages.map(a=>a.name===o.page.name?o.page:a)}))},[t,n]);return j.useEffect(()=>{(async()=>{if(!t)return;const s=await Cl(t.system.version_id);if(!s)return cn("Error grabbing system, version: ".concat(t.system.version_id),"error");if(Wp(n,s.data))return;let a=[];for(let u=0;u<t.datapacks.length;u++){const d=t.datapacks[u],f=await Cl(d.version_id);if(!f)return cn("Error grabbing datapack, version: ".concat(d.version_id),"error");a=[...a,...f.data.packData]}const l=s.data.data.map(u=>{const d=a.flat().filter(f=>f.name===u.name).flatMap(f=>f.data);return{...u,data:[...u.data,...d]}});r({...s.data,data:l})})()},[t]),t?n?c.jsxs("div",{className:"flex flex-col h-full w-full",children:[c.jsx("p",{id:"loading-text",className:"hidden",children:"loading..."}),c.jsx(cs,{title:t.name,subtitle:"Chaotic / Neutral",hasSidebar:!0}),c.jsxs("div",{className:"p-4 lg:mr-64 flex flex-col flex-grow overflow-hidden xl:grid grid-cols-2",children:[c.jsx("div",{className:"relative w-full h-full flex flex-col flex-grow overflow-hidden",children:c.jsx("div",{className:"overflow-y-scroll p-2 max-h-full",children:c.jsx(CN,{className:"first-tab-selector",system:n,character:t,updateState:i})})}),c.jsx("div",{className:"relative hidden flex-col xl:flex flex-grow overflow-hidden",children:c.jsx("div",{className:"overflow-y-scroll p-2 max-h-full",children:c.jsx(CN,{className:"second-tab-selector",system:n,character:t,updateState:i})})})]}),c.jsx(Nae,{actions:n.actions,system:n,character:t,updateState:i})]}):c.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading system data..."}):c.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading character data..."})},CN=({system:e,character:t,updateState:n,className:r})=>{const[i,o]=j.useState(e.pages[0].name);return c.jsxs(c.Fragment,{children:[c.jsx(ct,{className:r,id:"tab-selector",label:"",value:i,onChange:o,children:e.pages.map(s=>c.jsx("option",{value:s.name,children:s.name},s.name))}),e.pages.map(s=>c.jsx(Tae,{character:t,system:e,page:s,currentTab:i,updateState:n},s.name))]})};function Tae({page:e,character:t,system:n,currentTab:r,updateState:i}){const o=j.useMemo(()=>e.lexical?JSON.parse(ro.decompress(ro.decodeBase64(e.lexical))):{},[e.lexical]);return r!==e.name?c.jsx(c.Fragment,{}):c.jsx(iO,{data:o,state:{character:t,system:n,page:e},updateState:i})}const Ih=Ge.object({id:Ge.string({invalid_type_error:"id must be a string"}).optional(),local_id:Ge.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:Ge.string(),data:Ge.any(),reference_id:Ge.string({invalid_type_error:"reference_id must be a string"}),reference_type:Ge.enum(["system","datapack"]),version:Ge.string().optional(),created_at:Ge.string().datetime({offset:!0}),updated_at:Ge.string().datetime({offset:!0}),deleted_at:Ge.string().datetime({offset:!0}).nullable().optional()}),Iae=async(e,t=!1)=>{try{return t?await et.datapacks.delete(e):await et.datapacks.update(e,{updated_at:new Date().toISOString()})}catch(n){console.log("Error deleting datapack:",n)}},Pae=async e=>{try{let t=await dn();for(;!await Zr(t);)t=await dn();const{user:n}=rr.get(),r=n?n.id:"none",i={...e,local_id:t,user_id:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deleted_at:null},o=zy.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}return await et.systems.add(i),i}catch(t){console.log("Error creating system:",t)}},Oae=async(e,t=!1)=>{try{return t?await et.systems.delete(e):await et.systems.update(e,{updated_at:new Date().toISOString()})}catch(n){console.log("Error deleting system:",n)}},af=async(e,t,n=!1)=>{switch(e){case"system":return await Oae(t,n);case"datapack":return await Iae(t,n)}},uu=async(e,t)=>{try{return await et.typeHashes.put({local_id:e,hashes:t})}catch(n){console.log("Error creating system:",n)}},$ae=async(e,t)=>{try{let n=await dn();for(;!await Zr(n);)n=await dn();const{user:r}=rr.get(),i=r?r.id:"none",o={...e,local_id:n,user_id:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},s=zy.safeParse(o);if(!s.success){console.log("Invalid system data:",s.error.format());return}await et.systems.add(o);let a=await dn();for(;!await Zr(a);)a=await dn();const l={...t,local_id:a,reference_id:n,user_id:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},u=Ih.safeParse(l);if(!u.success){af("system",n,!0),console.log("Invalid Version data:",u.error.format());return}await et.versions.add(l),uu(l.local_id,l.data.types);let d=await dn();for(;!await Zr(d);)d=await dn();await et.subscriptions.add({local_id:d,user_id:i,resource_type:"system",resource_id:n,version_id:a,auto_update:!1,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null})}catch(n){console.log("Error importing system or version or creating subscription:",n)}},Mae=Ge.object({id:Ge.string({invalid_type_error:"id must be a string"}).optional(),local_id:Ge.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:Ge.string({invalid_type_error:"user_id must be a string"}),resource_type:Ge.enum(["system","theme","datapack"]),resource_id:Ge.string({invalid_type_error:"resource_id must be a string"}),version_id:Ge.string(),auto_update:Ge.boolean().optional().default(!0),version:Ge.string().optional(),subscribed_at:Ge.string().datetime({offset:!0}),updated_at:Ge.string().datetime({offset:!0}),deleted_at:Ge.string().datetime({offset:!0}).nullable().optional()}),DS=async(e,t,n,r)=>{try{const{user:i}=rr.get(),o=(i==null?void 0:i.id)||"none";let s=await dn();for(;!await Zr(s);)s=await dn();const a={local_id:s,user_id:o,resource_type:e,resource_id:t,version_id:n,auto_update:r,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},l=Mae.safeParse(a);if(!l.success){console.log("Invalid subscription data:",l.error.format());return}return await et.subscriptions.add(a),a}catch(i){console.log("Error creating subscription:",i)}},Dae=async(e,t,n)=>{try{let r=await dn();for(;!await Zr(r);)r=await dn();const{user:i}=rr.get(),o=(i==null?void 0:i.id)||"none",s={local_id:r,user_id:o,data:n,reference_id:t,reference_type:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},a=Ih.safeParse(s);if(!a.success){console.log("Invalid subscription data:",a.error.format());return}return await et.versions.add(s),s}catch(r){console.log("Error creating subscription:",r)}},Wm=async(e,t=!1)=>{try{return t?await et.versions.delete(e):await et.versions.delete(e)}catch(n){console.log("Error deleting version:",n)}},Lae=async e=>{try{let t=await dn();for(;!await Zr(t);)t=await dn();const{user:n}=rr.get(),r=n?n.id:"none",i={...e,local_id:t,user_id:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},o=w1.safeParse(i);if(!o.success){console.log("Invalid datapack data:",o.error.format());return}return await et.datapacks.add(i),i}catch(t){console.log("Error creating datapack:",t)}},Fae=async(e,t)=>{switch(e){case"system":return await Pae(t);case"datapack":return await Lae(t)}},z5=({label:e,options:t,onClick:n,containerClassName:r=""})=>{const[i,o]=j.useState(!1),{refs:s,floatingStyles:a,context:l}=MS({open:i,onOpenChange:o,middleware:[PS(4),$S(),OS()]}),u=P5(l),d=O5(l),f=M5(l,{role:"menu"}),{getReferenceProps:h,getFloatingProps:p}=$5([u,d,f]),v=()=>{n()},y=w=>{w.onClick(),o(!1)};return c.jsxs("div",{className:"inline-flex relative",children:[c.jsx("button",{onClick:v,className:"px-4 py-2 bg-white/10 text-fantasy-text border border-white/60 rounded-l-lg text-xs font-medium transition-all duration-300 hover:bg-white/20 ".concat(r),children:e}),c.jsx("button",{ref:s.setReference,...h(),className:"px-2 py-2 bg-white/10 text-fantasy-text rounded-r-lg border border-white/20 text-xs font-medium transition-all duration-300 hover:bg-white/20",children:c.jsx(m1,{size:16})}),i&&c.jsx("div",{ref:s.setFloating,style:a,...p(),className:"absolute z-50 mt-1 flex flex-col w-48 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:t.map((w,x)=>c.jsx("div",{onClick:()=>y(w),className:"bg-neutral-50 text-neutral-950 dark:bg-neutral-800 dark:text-neutral-50 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-lg px-4 py-2 text-sm font-medium cursor-pointer",children:w.label},x))})]})},jN=async e=>{try{return await et.subscriptions.update(e,{deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(t){console.log("Error deleting subscription:",t)}};var H5={exports:{}};const Bae={},zae=Object.freeze(Object.defineProperty({__proto__:null,default:Bae},Symbol.toStringTag,{value:"Module"})),AN=v$(zae);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",o=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";o?r=Ri:i&&(r=self);var s=!r.JS_SHA256_NO_COMMON_JS&&!0&&e.exports,a=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[-2147483648,8388608,32768,128],d=[24,16,8,0],f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=["hex","array","digest","arrayBuffer"],p=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"}),a&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(k){return typeof k=="object"&&k.buffer&&k.buffer.constructor===ArrayBuffer});var v=function(k,N){return function(I){return new m(N,!0).update(I)[k]()}},y=function(k){var N=v("hex",k);o&&(N=w(N,k)),N.create=function(){return new m(k)},N.update=function(O){return N.create().update(O)};for(var I=0;I<h.length;++I){var z=h[I];N[z]=v(z,k)}return N},w=function(k,N){var I=AN,z=AN.Buffer,O=N?"sha224":"sha256",M;z.from&&!r.JS_SHA256_NO_BUFFER_FROM?M=z.from:M=function(D){return new z(D)};var K=function(D){if(typeof D=="string")return I.createHash(O).update(D,"utf8").digest("hex");if(D==null)throw new Error(t);return D.constructor===ArrayBuffer&&(D=new Uint8Array(D)),Array.isArray(D)||ArrayBuffer.isView(D)||D.constructor===z?I.createHash(O).update(M(D)).digest("hex"):k(D)};return K},x=function(k,N){return function(I,z){return new S(I,N,!0).update(z)[k]()}},b=function(k){var N=x("hex",k);N.create=function(O){return new S(O,k)},N.update=function(O,M){return N.create(O).update(M)};for(var I=0;I<h.length;++I){var z=h[I];N[z]=x(z,k)}return N};function m(k,N){N?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=k}m.prototype.update=function(k){if(!this.finalized){var N,I=typeof k;if(I!=="string"){if(I==="object"){if(k===null)throw new Error(t);if(a&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!a||!ArrayBuffer.isView(k)))throw new Error(t)}else throw new Error(t);N=!0}for(var z,O=0,M,K=k.length,D=this.blocks;O<K;){if(this.hashed&&(this.hashed=!1,D[0]=this.block,this.block=D[16]=D[1]=D[2]=D[3]=D[4]=D[5]=D[6]=D[7]=D[8]=D[9]=D[10]=D[11]=D[12]=D[13]=D[14]=D[15]=0),N)for(M=this.start;O<K&&M<64;++O)D[M>>>2]|=k[O]<<d[M++&3];else for(M=this.start;O<K&&M<64;++O)z=k.charCodeAt(O),z<128?D[M>>>2]|=z<<d[M++&3]:z<2048?(D[M>>>2]|=(192|z>>>6)<<d[M++&3],D[M>>>2]|=(128|z&63)<<d[M++&3]):z<55296||z>=57344?(D[M>>>2]|=(224|z>>>12)<<d[M++&3],D[M>>>2]|=(128|z>>>6&63)<<d[M++&3],D[M>>>2]|=(128|z&63)<<d[M++&3]):(z=65536+((z&1023)<<10|k.charCodeAt(++O)&1023),D[M>>>2]|=(240|z>>>18)<<d[M++&3],D[M>>>2]|=(128|z>>>12&63)<<d[M++&3],D[M>>>2]|=(128|z>>>6&63)<<d[M++&3],D[M>>>2]|=(128|z&63)<<d[M++&3]);this.lastByteIndex=M,this.bytes+=M-this.start,M>=64?(this.block=D[16],this.start=M-64,this.hash(),this.hashed=!0):this.start=M}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},m.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var k=this.blocks,N=this.lastByteIndex;k[16]=this.block,k[N>>>2]|=u[N&3],this.block=k[16],N>=56&&(this.hashed||this.hash(),k[0]=this.block,k[16]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=0),k[14]=this.hBytes<<3|this.bytes>>>29,k[15]=this.bytes<<3,this.hash()}},m.prototype.hash=function(){var k=this.h0,N=this.h1,I=this.h2,z=this.h3,O=this.h4,M=this.h5,K=this.h6,D=this.h7,L=this.blocks,q,G,te,B,H,$,Y,se,ue,Ce,Ne;for(q=16;q<64;++q)H=L[q-15],G=(H>>>7|H<<25)^(H>>>18|H<<14)^H>>>3,H=L[q-2],te=(H>>>17|H<<15)^(H>>>19|H<<13)^H>>>10,L[q]=L[q-16]+G+L[q-7]+te<<0;for(Ne=N&I,q=0;q<64;q+=4)this.first?(this.is224?(se=300032,H=L[0]-1413257819,D=H-150054599<<0,z=H+24177077<<0):(se=704751109,H=L[0]-210244248,D=H-1521486534<<0,z=H+143694565<<0),this.first=!1):(G=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),te=(O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7),se=k&N,B=se^k&I^Ne,Y=O&M^~O&K,H=D+te+Y+f[q]+L[q],$=G+B,D=z+H<<0,z=H+$<<0),G=(z>>>2|z<<30)^(z>>>13|z<<19)^(z>>>22|z<<10),te=(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7),ue=z&k,B=ue^z&N^se,Y=D&O^~D&M,H=K+te+Y+f[q+1]+L[q+1],$=G+B,K=I+H<<0,I=H+$<<0,G=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),te=(K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7),Ce=I&z,B=Ce^I&k^ue,Y=K&D^~K&O,H=M+te+Y+f[q+2]+L[q+2],$=G+B,M=N+H<<0,N=H+$<<0,G=(N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10),te=(M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7),Ne=N&I,B=Ne^N&z^Ce,Y=M&K^~M&D,H=O+te+Y+f[q+3]+L[q+3],$=G+B,O=k+H<<0,k=H+$<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+k<<0,this.h1=this.h1+N<<0,this.h2=this.h2+I<<0,this.h3=this.h3+z<<0,this.h4=this.h4+O<<0,this.h5=this.h5+M<<0,this.h6=this.h6+K<<0,this.h7=this.h7+D<<0},m.prototype.hex=function(){this.finalize();var k=this.h0,N=this.h1,I=this.h2,z=this.h3,O=this.h4,M=this.h5,K=this.h6,D=this.h7,L=l[k>>>28&15]+l[k>>>24&15]+l[k>>>20&15]+l[k>>>16&15]+l[k>>>12&15]+l[k>>>8&15]+l[k>>>4&15]+l[k&15]+l[N>>>28&15]+l[N>>>24&15]+l[N>>>20&15]+l[N>>>16&15]+l[N>>>12&15]+l[N>>>8&15]+l[N>>>4&15]+l[N&15]+l[I>>>28&15]+l[I>>>24&15]+l[I>>>20&15]+l[I>>>16&15]+l[I>>>12&15]+l[I>>>8&15]+l[I>>>4&15]+l[I&15]+l[z>>>28&15]+l[z>>>24&15]+l[z>>>20&15]+l[z>>>16&15]+l[z>>>12&15]+l[z>>>8&15]+l[z>>>4&15]+l[z&15]+l[O>>>28&15]+l[O>>>24&15]+l[O>>>20&15]+l[O>>>16&15]+l[O>>>12&15]+l[O>>>8&15]+l[O>>>4&15]+l[O&15]+l[M>>>28&15]+l[M>>>24&15]+l[M>>>20&15]+l[M>>>16&15]+l[M>>>12&15]+l[M>>>8&15]+l[M>>>4&15]+l[M&15]+l[K>>>28&15]+l[K>>>24&15]+l[K>>>20&15]+l[K>>>16&15]+l[K>>>12&15]+l[K>>>8&15]+l[K>>>4&15]+l[K&15];return this.is224||(L+=l[D>>>28&15]+l[D>>>24&15]+l[D>>>20&15]+l[D>>>16&15]+l[D>>>12&15]+l[D>>>8&15]+l[D>>>4&15]+l[D&15]),L},m.prototype.toString=m.prototype.hex,m.prototype.digest=function(){this.finalize();var k=this.h0,N=this.h1,I=this.h2,z=this.h3,O=this.h4,M=this.h5,K=this.h6,D=this.h7,L=[k>>>24&255,k>>>16&255,k>>>8&255,k&255,N>>>24&255,N>>>16&255,N>>>8&255,N&255,I>>>24&255,I>>>16&255,I>>>8&255,I&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255,M>>>24&255,M>>>16&255,M>>>8&255,M&255,K>>>24&255,K>>>16&255,K>>>8&255,K&255];return this.is224||L.push(D>>>24&255,D>>>16&255,D>>>8&255,D&255),L},m.prototype.array=m.prototype.digest,m.prototype.arrayBuffer=function(){this.finalize();var k=new ArrayBuffer(this.is224?28:32),N=new DataView(k);return N.setUint32(0,this.h0),N.setUint32(4,this.h1),N.setUint32(8,this.h2),N.setUint32(12,this.h3),N.setUint32(16,this.h4),N.setUint32(20,this.h5),N.setUint32(24,this.h6),this.is224||N.setUint32(28,this.h7),k};function S(k,N,I){var z,O=typeof k;if(O==="string"){var M=[],K=k.length,D=0,L;for(z=0;z<K;++z)L=k.charCodeAt(z),L<128?M[D++]=L:L<2048?(M[D++]=192|L>>>6,M[D++]=128|L&63):L<55296||L>=57344?(M[D++]=224|L>>>12,M[D++]=128|L>>>6&63,M[D++]=128|L&63):(L=65536+((L&1023)<<10|k.charCodeAt(++z)&1023),M[D++]=240|L>>>18,M[D++]=128|L>>>12&63,M[D++]=128|L>>>6&63,M[D++]=128|L&63);k=M}else if(O==="object"){if(k===null)throw new Error(t);if(a&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!a||!ArrayBuffer.isView(k)))throw new Error(t)}else throw new Error(t);k.length>64&&(k=new m(N,!0).update(k).array());var q=[],G=[];for(z=0;z<64;++z){var te=k[z]||0;q[z]=92^te,G[z]=54^te}m.call(this,N,I),this.update(G),this.oKeyPad=q,this.inner=!0,this.sharedMemory=I}S.prototype=new m,S.prototype.finalize=function(){if(m.prototype.finalize.call(this),this.inner){this.inner=!1;var k=this.array();m.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(k),m.prototype.finalize.call(this)}};var E=y();E.sha256=E,E.sha224=y(!0),E.sha256.hmac=b(),E.sha224.hmac=b(!0),s?e.exports=E:(r.sha256=E.sha256,r.sha224=E.sha224)})()})(H5);var Hae=H5.exports;const Ph=e=>({name:e.name,hash:Hae.sha256(e.properties.sort((t,n)=>t.key.localeCompare(n.key)).map(t=>JSON.stringify(t)).join("/"))}),NN=async(e,t)=>{const n=await Fae(t.reference_type,e);if(!n)return cn("Error creating forked content, try again.","error");const r=await Dae(t.reference_type,n.local_id,t.data);if(!r)return af(t.reference_type,n.local_id,!0),cn("Error creating new version data for forked content, cleaning up...","error");if(!await uu(r.local_id,r.data.types.map(Ph)))return af(t.reference_type,n.local_id,!0),Wm(r.local_id,!0),cn("Error creating hashes for forked content, cleaning up...","error");if(!await DS(t.reference_type,n.local_id,r.local_id,!1))return af(t.reference_type,n.local_id,!0),Wm(r.local_id,!0),et.typeHashes.delete(r.local_id),cn("Error creating subscription for forked content, cleaning up...","error")},$x=({subs:e,itemData:t})=>{let n=nu();const{user:r}=rr.useValue(),[i,o]=j.useState(!1),s=r&&t.user_id&&r.id===t.user_id||!r&&t.user_id==="none",a="bg-[#065f46] text-[#10b981]";return c.jsxs("div",{className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-fantasy-accent-dark rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-xl font-bold text-fantasy-text",children:t.name[0]})}),c.jsx("div",{children:c.jsx("div",{className:"text-lg font-semibold text-fantasy-text",children:t.name})})]}),c.jsxs("div",{className:"bg-fantasy-dark border border-fantasy-medium text-fantasy-text rounded-md text-xs font-medium px-1 py-2",children:[e.length," versions"]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("span",{className:"text-sm text-fantasy-text-muted",children:["Latest: ",new Date(e[0].subscribed_at).toLocaleDateString()," - ",new Date(e[0].subscribed_at).toLocaleTimeString()]}),c.jsx("button",{className:"bg-none border-none text-fantasy-accent cursor-pointer text-xs p-0 underline ml-auto",onClick:()=>o(!i),children:"Show all versions"})]}),c.jsx("div",{className:"transition-all overflow-hidden ".concat(i?"max-h-60 overflow-y-auto border border-fantasy-border mt-2 rounded-md":"max-h-12"),children:e.map((l,u)=>c.jsxs("div",{className:"flex items-center justify-between p-2 transition-all border-b border-solid border-fantasy-medium ".concat(i?"p-3":"h-12"," ").concat(u>0?"":"bg-gradient-to-r from-green-900 to-transparent"),children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("div",{className:"text-sm text-neutral-200",children:Io(l.version_id)}),c.jsxs("div",{className:"text-xs text-neutral-400",children:[new Date(l.subscribed_at).toLocaleDateString()," - ",new Date(l.subscribed_at).toLocaleTimeString()]})]}),c.jsx("div",{className:"px-1 py-2 rounded text-xs font-medium ".concat(u>0?"":a," ").concat(i?"hidden":""),children:u>0?"Active":"Latest"}),c.jsx("div",{className:"".concat(i?"":"hidden"),children:c.jsx(Th,{label:"",options:[{label:s?"Edit":"Fork",onClick:async()=>{if(s)return n("/library/".concat(l.resource_type,"/").concat(l.version_id));const d=await Cl(l.version_id);return d?NN(t,d):cn("Error grabbing data to fork.","error")}},{label:"Export",onClick:async()=>{const d=await Cl(l.version_id);if(!d)return cn("Error grabbing version data to export.","error");uh(d.reference_type,{item:t,version:d},"".concat(t.name,"-").concat(d.local_id))}},{label:"Delete",onClick:()=>At("delete-subscription",({id:d})=>c.jsx(Ql,{id:d,title:"Delete Subscription",type:"danger",message:"Are you sure you want to delete this subscription?",onConfirm:()=>jN(l.local_id)}))}]})})]},u))})]}),c.jsx("div",{className:"flex transition-all ".concat(i?"h-0 w-0 overflow-hidden":""),children:c.jsx(z5,{label:s?"Edit":"Fork",onClick:async()=>{const l=await Cl(e[0].version_id);return l?s?n("/library/".concat(l.reference_type,"/").concat(l.local_id)):NN(t,l):cn("Error grabbing version info.","error")},options:[{label:"Export",onClick:async()=>{const l=await Cl(e[0].version_id);if(!l)return cn("Error grabbing version info.","error");uh(l.reference_type,{item:t,version:l},"".concat(t.name,"-").concat(l.local_id))}},{label:"Delete",onClick:()=>At("delete-subscription",({id:l})=>c.jsx(Ql,{id:l,title:"Delete Subscription",type:"danger",message:"Are you sure you want to delete this subscription?",onConfirm:()=>jN(e[0].local_id)}))}]})})]})},Wae=async(e,t,n)=>{try{let r=await dn();for(;!await Zr(r);)r=await dn();const{user:i}=rr.get(),o=i?i.id:"none",s={name:e,local_id:r,user_id:o,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},a=w1.safeParse(s);if(!a.success){console.log("Invalid pack data:",a.error.format());return}switch(t){case"system":await et.systems.add(s);break;case"datapack":await et.datapacks.add(s);break}let l=await dn();for(;!await Zr(l);)l=await dn();const u={data:n,local_id:l,reference_id:r,reference_type:t,user_id:o,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},d=Ih.safeParse(u);if(!d.success){console.log("Invalid Version data:",d.error.format());return}await et.versions.add(u);let f=await dn();for(;!await Zr(f);)f=await dn();const h={local_id:f,user_id:o,resource_type:t,resource_id:r,version_id:l,auto_update:!1,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null};return await et.subscriptions.add(h),h}catch(r){cn("Error creating subscription data. If this continues please post a issue in our discord.","error"),console.log("Error creating pack or version or creating subscription:",r)}},Uae=({id:e,onCreate:t})=>{const[n,r]=j.useState(""),[i,o]=j.useState("system"),{subscriptions:s}=gv(),[a,l]=j.useState(),[u,d]=j.useState();j.useEffect(()=>{const h=s==null?void 0:s.find(v=>v.type==="system");if(!h)return console.log("no system.");let p=h.versions[0];if(!p)return console.log("no version.");if(h.item_id===(a==null?void 0:a.item_id)&&p.local_id===(p==null?void 0:p.local_id))return console.log("same version and system");l(h),d(p)},[s]);const f=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:f,children:[c.jsx(Vn,{title:"Create Subscription",onClose:f}),c.jsxs(Un,{children:[c.jsx(Vt,{id:"name",label:"Name",placeholder:"baba yaga",value:n,onChange:r,isValid:!0,errorMessage:""}),c.jsxs(ct,{id:"susbcription-type",label:"Type",value:i,onChange:h=>{o(h)},children:[c.jsx("option",{value:"system",children:"System"}),c.jsx("option",{value:"datapack",children:"Data Pack"}),c.jsx("option",{value:"theme",disabled:!0,children:"Theme"})]}),i==="datapack"?c.jsxs(c.Fragment,{children:[c.jsx(ct,{id:"basedOff-system",label:"System",value:(a==null?void 0:a.item_id)||"",onChange:h=>{const p=s==null?void 0:s.find(y=>y.item_id===h&&y.type==="system");if(!p)return console.log("could not find matching system");l(p);const v=p.versions[0];v&&d(v)},children:s==null?void 0:s.filter(h=>h.type==="system").map(h=>c.jsx("option",{value:h.item_id,children:h.item.name},h.item_id))}),c.jsx(ct,{id:"basedOff-version",label:"Version",value:(u==null?void 0:u.local_id)||"",onChange:h=>{const p=a==null?void 0:a.versions.find(v=>v.local_id===h);if(!p)return console.log("could not find matching version");d(p)},children:a==null?void 0:a.versions.map(h=>c.jsx("option",{value:h.local_id,children:Io(h.local_id)},h.local_id))})]}):null]}),c.jsx(Xn,{children:c.jsx(xt,{color:"primary",onClick:async()=>{let h={},p=[];switch(i){case"system":h={creator:[],modals:[],pages:[],version:"",data:[],defaultCharacterData:{_type:{name:"CharacterData",properties:[]}},types:[],actions:[]};break;case"datapack":if(!u||!u.data)return console.log("no version data");h={types:u.data.types,packData:u.data.data.map(y=>{var w;return{...y,data:y.typeData.isArray?[]:pc(u.data.types,(w=u.data)==null?void 0:w.types.find(x=>x.name===y.typeData.type))}})},p=u.data.types.map(Ph);break}const v=await Wae(n,i,h);v&&["datapack","system"].includes(i)&&uu(v.version_id,p),t({name:n,type:i}),f()},children:"Update"})})]})},Vae=async(e,t)=>{try{let n=await dn();for(;!await Zr(n);)n=await dn();const{user:r}=rr.get(),i=r?r.id:"none",o={...e,local_id:n,user_id:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},s=w1.safeParse(o);if(!s.success){console.log("Invalid pack data:",s.error.format());return}await et.datapacks.add(o);let a=await dn();for(;!await Zr(a);)a=await dn();const l={...t,local_id:a,reference_id:n,user_id:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},u=Ih.safeParse(l);if(!u.success){af("datapack",n,!0),console.log("Invalid Version data:",u.error.format());return}await et.versions.add(l),uu(l.local_id,l.data.types);let d=await dn();for(;!await Zr(d);)d=await dn();await et.subscriptions.add({local_id:d,user_id:i,resource_type:"datapack",resource_id:n,version_id:a,auto_update:!1,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null})}catch(n){console.log("Error importing system or version or creating subscription:",n)}},qae=()=>{const{subscriptions:e}=gv(),[t,n]=j.useState(!1);return c.jsxs("div",{children:[c.jsx(cs,{title:"Your Collection",subtitle:"Manage your extra content"}),c.jsxs("div",{className:"px-4",children:[e?c.jsxs("h5",{className:"flex flex-col gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Systems"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter(r=>r.type==="system").map(r=>c.jsx($x,{itemData:r.item,subs:r.subscriptions},r.item_id))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Datapacks"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter(r=>r.type==="datapack").map(r=>c.jsx($x,{itemData:r.item,subs:r.subscriptions},r.item_id))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Themes"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter(r=>r.type==="theme").map(r=>c.jsx($x,{itemData:r.item,subs:r.subscriptions},r.item_id))})]})]}):c.jsx("h5",{className:"mb-4 text-xl",children:"Loading..."}),c.jsx(au,{isOpen:t,onClick:()=>n(!t),buttons:[{name:"Create",icon:"",onClick:()=>At("create-subscription",({id:r})=>c.jsx(Uae,{id:r,onCreate:()=>{}}))},{name:"Import",icon:"",onClick:()=>At("import-system",({id:r})=>c.jsx(F5,{id:r,title:"Import System",onSave:async i=>{try{const o=JSON.parse(i);switch(o.type){case"system":return await $ae(o.item,o.version);case"datapack":return await Vae(o.item,o.version)}}catch(o){console.error(o)}}}))}]})]})]})};function LS({id:e,types:t,onDelete:n,onSave:r,data:i}){const[o,s]=j.useState({name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"}),[a,l]=j.useState(t.find(f=>f.name===o.typeData.type)||null),u=(f,h,p)=>{s(pn(h,v=>(k1(v,f,p),v)))};j.useEffect(()=>{const f=i||{name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"};s(f),l(t.find(h=>h.name===f.typeData.type)||null)},[i,s,l]);const d=j.useCallback(()=>Hn(e),[e]);return i?c.jsxs(Wn,{isOpen:!0,onClose:d,children:[c.jsx(Vn,{title:"Edit ".concat(i.name),onClose:d}),c.jsxs(Un,{children:[c.jsx(Vt,{id:"data-name",label:"Name",isValid:!0,errorMessage:"",value:o.name,onChange:f=>s({...o,name:f})}),c.jsxs(ct,{id:"data-type",label:"Type",value:(a==null?void 0:a.name)||"",onChange:f=>{const h=t.find(p=>p.name===f)||null;l(h),s({...o,data:o.typeData.isArray?[]:pc(t,h||f),typeData:{...o.typeData,type:f}})},children:[c.jsx("option",{value:"string",children:"string"}),c.jsx("option",{value:"number",children:"number"}),c.jsx("option",{value:"boolean",children:"boolean"}),c.jsx("option",{value:"enum",children:"enum"}),t.map(f=>c.jsx("option",{value:f.name,children:f.name},f.name))]}),a&&c.jsx("div",{children:c.jsx(tr,{id:"is-array",label:"Is Array?",checked:o.typeData.isArray,onChange:f=>{s(f?{...o,data:[],typeData:{...o.typeData,isArray:f}}:{...o,data:pc(t,o.typeData.type),typeData:{...o.typeData,isArray:f}})}})}),c.jsx("div",{className:"h-2"}),a&&o.typeData.isArray?c.jsx(Kae,{types:t,type:a,title:"data",data:o.data,onAdd:f=>{u("data",o,[...o.data,f])},onChange:(f,h)=>u(f,o,h),onDelete:f=>u("data",o,o.data.filter(h=>h.name!==f))}):W5(a||{name:o.typeData.type,properties:[]},o.data||o,o,o.typeData,"value",u)]}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:()=>{n&&n(),d()},children:n?"Delete":"Close"}),c.jsx(xt,{color:"primary",onClick:()=>{r(o),d()},children:"Update"})]})]}):c.jsx(c.Fragment,{})}function W5(e,t,n,r,i,o){var s;switch(e.name){case"string":return r.useTextArea?c.jsx(A1,{id:i,label:i,value:t,onChange:a=>o("data",n,a)}):c.jsx(Vt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,a)});case"number":return c.jsx(Vt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,+a)});case"boolean":return c.jsx(tr,{id:i,label:i,checked:t,onChange:a=>o("data",n,a)});case"enum":return c.jsx(ct,{id:i,label:i,value:t,onChange:a=>o("data",n,a),children:(s=r.options)==null?void 0:s.map(a=>c.jsx("option",{value:a,children:a},a))});case"blueprint":return c.jsx("div",{children:"TODO"});default:return c.jsx("div",{children:e.properties.map(a=>W5({name:a.typeData.type,properties:[]},t[a.key]||"",n,a.typeData,a.key,(l,u,d)=>{o("data/".concat(a.key),u,d)}))},i)}}function Kae({types:e,title:t,data:n,type:r,onAdd:i,onChange:o,onDelete:s}){return c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("p",{children:t}),c.jsx("p",{onClick:()=>i(pc(e,r)),children:"Add"})]}),c.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),c.jsx("div",{className:"flex flex-col gap-1 mt-3",children:n.map(a=>c.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>At("edit-object",({id:l})=>c.jsx(V1,{id:l,title:"Edit Data",types:e,onDelete:()=>s(a.name),onSave:u=>o("".concat(t,"/").concat(a.name),u),data:a})),children:c.jsx("p",{children:a.name})},a.name))})]})}const FS=async(e,t)=>pn(e,n=>{const r=t==="character"?n.pages:t==="builder"?n.creator:n.modals;if(r.findIndex(s=>s.name==="New Page")!==-1)return;let o={name:"New Page",blueprint:{nodes:dr(),edges:[]},lexical:"",state:[]};r.push(o)}),BS=async(e,t,n,r,i)=>pn(e,o=>{const s=t==="character"?o.pages:t==="builder"?o.creator:o.modals,a=s.findIndex(u=>u.name===n);if(a===-1||s[a].state.find(u=>u.name===r))return;let l={name:r,type:i,value:void 0};s[a].state.push(l)}),Gae=async e=>pn(e,t=>{t.data.findIndex(r=>r.name==="New Data")===-1&&t.data.push({name:"New Data",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1},data:"lorem ipsum"})}),Yae=async(e,t)=>pn(e,n=>{n.types.findIndex(i=>i.name===t)===-1&&n.types.push({name:t,properties:[{key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}}]})}),Xae=async(e,t,n)=>pn(e,r=>{const i=r.types.findIndex(s=>s.name===t);i===-1||r.types[i].properties.findIndex(s=>s.key===n.key)!==-1||r.types[i].properties.push(n)}),zS=(e,t,n)=>pn(e,r=>{const i=t==="character"?r.pages:t==="builder"?r.creator:r.modals,o=i.findIndex(s=>s.name===n);o!==-1&&i.slice(o,1)}),Jae=async(e,t)=>pn(e,n=>{const r=n.data.findIndex(i=>i.name===t);r!==-1&&n.data.splice(r,1)}),Qae=async(e,t)=>pn(e,n=>{const r=n.types.findIndex(i=>i.name===t);r!==-1&&n.types.splice(r,1)}),RN=async(e,t,n)=>pn(e,r=>{for(let i=0;i<r.types.length;i++){const o=r.types[i];if(o.name!==t)continue;const s=o.properties.findIndex(a=>a.key===n);if(s===-1)return;o.properties.splice(s,1)}}),HS=async(e,t,n,r)=>pn(e,i=>{const s=(t==="character"?i.pages:t==="builder"?i.creator:i.modals).find(a=>a.name===n);s&&(s.name=r)}),TN=async(e,t,n)=>pn(e,r=>{const i=r.types.findIndex(o=>o.name===t);i!==-1&&(r.types[i].name=n)}),Mx=async(e,t)=>pn(e,n=>{n.defaultCharacterData=t}),WS=async(e,t,n,r)=>pn(e,i=>{const o=t==="character"?i.pages:t==="builder"?i.creator:i.modals,s=o.findIndex(a=>a.name===n);s!==-1&&(o[s].blueprint=r)}),US=async(e,t,n,r,i)=>pn(e,o=>{const s=t==="character"?o.pages:t==="builder"?o.creator:o.modals;for(let a=0;a<s.length;a++){const l=s[a];if(l.name!==n)continue;const u=l.state.findIndex(d=>d.name===r);if(u===-1)return;r!==i.name?(l.state.splice(u,1),l.state.push(i)):l.state[u]=i}}),Zae=async(e,t)=>{if(t==="{}")return;const n=ro.encodeBase64(ro.compress(t)),r=sn.get(),i=await et.versions.get(e);if(i)return pn(i.data,o=>{const s=r.tab==="editor"?o.pages:r.tab==="creator"?o.creator:o.modals,a=r.tab==="editor"?r.characterPage:r.tab==="creator"?r.creatorPage:r.modalsPage,l=s.findIndex(u=>u.name===a);l!==-1&&(s[l].lexical=n)})},ele=async(e,t,n)=>pn(e,r=>{const i=r.data.findIndex(o=>o.name===t);i!==-1&&(t!==n.name?(r.data.splice(i,1),r.data.push(n)):r.data[i]=n)}),IN=async(e,t,n,r)=>pn(e,i=>{for(let o=0;o<i.types.length;o++){const s=i.types[o];if(s.name!==t)continue;const a=s.properties.findIndex(l=>l.key===n);if(a===-1)return;n!==r.key?(s.properties.splice(a,1),s.properties.push(r)):s.properties[a]=r}});async function Ht(e,t){if(!await et.versions.get(e)){console.warn("No doc found for ID:",e);return}const r=await t;if(!r){console.warn("No data returned from mutaiton");return}try{return await et.versions.update(e,{data:r})}catch(i){console.log("Error updating version resource:",i)}}const tle=({editsId:e,versionedResource:t})=>c.jsx(c.Fragment,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[c.jsx("div",{className:"fantasy-add-gradient border-2 border-dashed border-fantasy-accent/30 rounded-2xl p-6 text-center cursor-pointer transition-all duration-300 flex flex-col justify-center items-center hover:border-fantasy-accent/60 hover:fantasy-add-gradient hover:-translate-y-1",onClick:()=>{const n={...t.data.defaultCharacterData,newKey:"new value",_type:{name:t.data.defaultCharacterData._type.name||"",properties:[{key:"newKey",typeData:{type:"string",useTextarea:!1,isArray:!1}},...t.data.defaultCharacterData._type.properties||[]]}};Ht(e,Mx(t.data,n))},children:c.jsx("div",{className:"text-fantasy-accent/80 text-base font-medium",children:"Create New Property"})}),t.data.defaultCharacterData._type.properties.map(n=>{const r=n.key,i=t.data.defaultCharacterData[r],o=n.typeData;let s=i._type?void 0:o.type;return c.jsx("div",{className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",onClick:()=>At("edit-character-schema",({id:a})=>{const l={name:r,typeData:o,data:i};return c.jsx(LS,{id:a,types:t.data.types,onDelete:()=>{const u=pn(t.data.defaultCharacterData,d=>{delete d[l.name||""],d._type.properties=d._type.properties.filter(f=>f.key!==(l==null?void 0:l.name))});Ht(e,Mx(t.data,u))},onSave:u=>{const d=u.name,f=u.typeData,h=u.data,p=pn(t.data.defaultCharacterData,v=>{delete v[(l==null?void 0:l.name)||""],v[d]=h;for(let y=0;y<v._type.properties.length;y++){const w=v._type.properties[y];w.key===(l==null?void 0:l.name)&&(w.key=d,w.typeData=f)}});Ht(e,Mx(t.data,p))},data:l})}),children:c.jsxs("p",{children:[r," - ",s," ",o.isArray?"(Array)":""]})},r)})]})}),nle=({editsId:e,versionedResource:t})=>{const[n,r]=j.useState(null);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex flex-col gap-1",children:t.data.data.map(i=>c.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>At("edit-system-data",({id:o})=>c.jsx(LS,{id:o,types:t.data.types,onDelete:()=>Ht(e,Jae(t.data,n.name)),onSave:s=>Ht(e,ele(t.data,n.name,s)),data:n})),children:c.jsxs("p",{children:[i.name," - ",i.typeData.type," ",i.typeData.isArray?"(Array)":""]})},i.name))}),c.jsx(au,{onClick:()=>Ht(e,Gae(t.data))})]})};function rle({id:e,data:t,onSave:n,onDelete:r}){var u;const i=sn.useValue(),o=Mn(i.versionId),[s,a]=j.useState({name:"New Param",type:"string",isArray:!1});j.useEffect(()=>{t&&a(t)},[t]);const l=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:l,children:[c.jsx(Vn,{title:"Edit Blueprint Param",onClose:l}),c.jsxs(Un,{children:[c.jsx(Vt,{id:"name",label:"Name",placeholder:"baba yaga",value:s.name,onChange:d=>a({...s,name:d}),isValid:!0,errorMessage:""}),c.jsxs(ct,{id:"type",label:"Type",value:s.type,onChange:d=>a({...s,type:d}),children:[c.jsx("option",{value:"none",children:"none"}),c.jsx("option",{value:"string",children:"string"}),c.jsx("option",{value:"number",children:"number"}),c.jsx("option",{value:"boolean",children:"boolean"}),c.jsx("option",{value:"enum",children:"enum"}),c.jsx("option",{value:"blueprint",children:"blueprint"}),(u=o==null?void 0:o.data)==null?void 0:u.types.map(d=>c.jsx("option",{value:d.name,children:d.name},d.name))]}),c.jsx(tr,{id:"is-array",label:"Is Array?",checked:s.isArray,onChange:d=>a({...s,isArray:d})})]}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:()=>{r(),l()},children:"Delete"}),c.jsx(xt,{color:"primary",onClick:()=>{if(!t)return l();n(s),l()},children:"Update"})]})]})}const PN=({id:e,data:t,onSave:n,onDelete:r})=>{var h,p,v;const[i,o]=j.useState(""),[s,a]=j.useState({type:"",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}),l=sn.useValue(),u=Mn(l.versionId),d=j.useMemo(()=>u==null?void 0:u.data.types.find(y=>y.name===(t==null?void 0:t.typeName)),[t,u]);j.useEffect(()=>{t&&(o(t.key),a({useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[],...t.typeData}))},[t]);const f=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:f,children:[c.jsx(Vn,{title:"Edit Type Property",onClose:f}),c.jsxs(Un,{children:[c.jsx(Vt,{id:"key",label:"key",placeholder:"baba yaga",value:i,onChange:o,isValid:!0,errorMessage:""}),c.jsxs(ct,{id:"type",label:"Type",value:s.type,onChange:y=>a({...s,type:y}),children:[c.jsx("option",{value:"string",children:"string"}),c.jsx("option",{value:"number",children:"number"}),c.jsx("option",{value:"boolean",children:"boolean"}),c.jsx("option",{value:"enum",children:"enum"}),c.jsx("option",{value:"blueprint",children:"blueprint"}),u==null?void 0:u.data.types.map(y=>c.jsx("option",{value:y.name,children:y.name},y.name))]}),c.jsx(tr,{id:"is-array",label:"Is Array?",checked:s.isArray,onChange:y=>a({...s,isArray:y})}),s.type==="string"&&!s.isArray&&c.jsx(tr,{id:"use-textarea",label:"Use Textarea?",checked:s.useTextArea,onChange:y=>a({...s,useTextArea:y})}),s.type==="enum"&&c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("p",{children:"Options"}),c.jsx("div",{onClick:()=>{var w;((w=s.options)==null?void 0:w.findIndex(x=>x==="New Option"))===-1&&a({...s,options:[...s.options||[],"New Option"]})},children:c.jsx("p",{children:"Add"})})]}),c.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),c.jsx("div",{children:(h=s.options)==null?void 0:h.map(y=>c.jsx("div",{onClick:()=>At("edit-string",({id:w})=>c.jsx(ds,{id:w,data:y,title:"Edit Property Name",onSave:x=>{let b=[...s.options||[]];const m=b.findIndex(S=>S===y);m!==-1&&(b[m]=x,a({...s,options:b}))}})),children:c.jsx("p",{children:y})},y))})]}),s.type==="blueprint"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsxs(ct,{id:"output-type",label:"Output Type",value:s.outputType||"none",onChange:y=>a({...s,outputType:y}),children:[c.jsx("option",{value:"none",children:"none"}),c.jsx("option",{value:"string",children:"string"}),c.jsx("option",{value:"number",children:"number"}),c.jsx("option",{value:"boolean",children:"boolean"}),c.jsx("option",{value:"enum",children:"enum"}),c.jsx("option",{value:"blueprint",children:"blueprint"}),(p=u==null?void 0:u.data)==null?void 0:p.types.map(y=>c.jsx("option",{value:y.name,children:y.name},y.name))]}),c.jsx(tr,{id:"is-output-an-array",label:"Is Array?",checked:s.isOutputAnArray,onChange:y=>a({...s,isOutputAnArray:y})})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("p",{children:"Inputs"}),c.jsx("div",{onClick:()=>{var w;((w=s.inputs)==null?void 0:w.findIndex(x=>x.name==="New Input"))===-1&&a({...s,inputs:[...s.inputs||[],{name:"New Input",type:"string",isArray:!1}]})},children:c.jsx("p",{children:"Add"})})]}),c.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),c.jsx("div",{children:(v=s.inputs)==null?void 0:v.map(y=>c.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>At("edit-blueprint-param",({id:w})=>c.jsx(rle,{id:w,data:y,onSave:x=>{let b=[...s.inputs||[]];const m=b.findIndex(S=>S.name===y.name);m!==-1&&(b[m]=x,a({...s,inputs:b}))},onDelete:()=>{var b;const x=(b=s.inputs)==null?void 0:b.filter(m=>m.name!==y.name);a({...s,inputs:x})}})),children:c.jsxs("p",{children:[y.name," - ",y.type,y.isArray?"(Array)":""]})},y.name))})]})]}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:()=>{r(),f()},disabled:(d==null?void 0:d.properties.length)===1,children:"Delete"}),c.jsx(xt,{color:"primary",onClick:()=>{if(!i||!s)return f();n({key:i,typeData:s}),f()},children:"Update"})]})]})},Oh=({children:e})=>c.jsx("div",{children:e}),Mr=({children:e,id:t,title:n,isOpen:r,toggleState:i})=>c.jsxs("div",{className:"bg-fantasy-glass",children:[c.jsx("h2",{children:c.jsxs("button",{type:"button",onClick:()=>i(!r),className:"flex items-center justify-between w-full p-5 font-medium rtl:text-right border border-fantasy-border hover:bg-fantasy-dark gap-3 ".concat(r?"bg-fantasy-dark text-fantasy-text":"text-fantasy-text-muted"),children:[c.jsx("span",{children:n}),c.jsx("svg",{"data-accordion-icon":!0,className:"".concat(r?"":"rotate-180"," w-3 h-3 shrink-0"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),c.jsx("div",{className:"".concat(r?"flex":"hidden"," w-full"),children:c.jsx("div",{className:"p-5 w-full border border-t-0 border-fantasy-border",children:e})})]}),ile=({editsId:e,versionedResource:t})=>{const[n,r]=j.useState(-1);return c.jsxs(c.Fragment,{children:[c.jsx(Oh,{children:t.data.types.map((i,o)=>c.jsxs(Mr,{id:i.name,title:i.name,isOpen:n===o,toggleState:s=>r(s?o:-1),children:[c.jsxs("div",{children:[c.jsx(xt,{color:"light",onClick:()=>At("edit-string",({id:s})=>c.jsx(ds,{id:s,data:i.name,onSave:a=>Ht(e,TN(t.data,i.name,a))})),children:"Edit Name"}),c.jsx(xt,{color:"light",onClick:async()=>{let s={key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}};await Ht(e,Xae(t.data,i.name,s)),At("edit-type",({id:a})=>c.jsx(PN,{id:a,data:{...s,typeName:i.name},onSave:l=>Ht(e,IN(t.data,i.name,s.key,l)),onDelete:()=>Ht(e,RN(t.data,i.name,s.key))}))},children:"Add Property"}),c.jsx(xt,{color:"danger",onClick:()=>Ht(e,Qae(t.data,i.name)),children:"Delete Type"})]}),c.jsx("div",{className:"flex flex-col gap-1 mt-3",children:i.properties.map(s=>{var a;return c.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>At("edit-type",({id:l})=>c.jsx(PN,{id:l,data:{...s,typeName:i.name},onSave:u=>Ht(e,IN(t.data,i.name,s.key,u)),onDelete:()=>Ht(e,RN(t.data,i.name,s.key))})),children:c.jsxs("p",{children:[s.key," - ",s.typeData.type," ",s.typeData.isArray?"(Array)":""," ",(a=s.typeData.options)==null?void 0:a.join(",")]})},s.key)})})]},i.name))}),c.jsx(au,{onClick:async()=>{await Ht(e,Yae(t.data,"New Type")),At("edit-string",({id:i})=>c.jsx(ds,{id:i,data:"New Type",onSave:o=>Ht(e,TN(t.data,"New Type",o))}))}})]})};function mv(e){const{query:t}=To();return U5(t,e)}function U5(e,t){const n=e.node(t).get();if(!n.data.parent)return[];const r=e.node(n.data.parent).get();return[...r.data.props.local||[],...U5(e,r.id)]}function ole(){const{id:e,actions:{setProp:t},showPlaceholder:n,isVisible:r,dynamicVisibility:i,visibilityBlueprint:o,isList:s,dataName:a,blueprint:l,isInteractive:u,onPress:d,display:f,position:h,top:p,right:v,bottom:y,left:w,flexDirection:x,alignItems:b,justifyContent:m,gap:S,rows:E,columns:k,marginTop:N,marginRight:I,marginBottom:z,marginLeft:O,paddingTop:M,paddingRight:K,paddingBottom:D,paddingLeft:L,height:q,width:G,maxHeight:te,maxWidth:B,minHeight:H,minWidth:$,background:Y,border:se,hover:ue}=oi(U=>({showPlaceholder:U.data.props.showPlaceholder,isVisible:U.data.props.isVisible,dynamicVisibility:U.data.props.dynamicVisibility,visibilityBlueprint:U.data.props.visibilityBlueprint,isList:U.data.props.isList,dataName:U.data.props.dataName,blueprint:U.data.props.blueprint,isInteractive:U.data.props.isInteractive,onPress:U.data.props.onPress,display:U.data.props.display,position:U.data.props.position,top:U.data.props.top,right:U.data.props.right,bottom:U.data.props.bottom,left:U.data.props.left,flexDirection:U.data.props.flexDirection,alignItems:U.data.props.alignItems,justifyContent:U.data.props.justifyContent,gap:U.data.props.gap,rows:U.data.props.rows,columns:U.data.props.columns,marginTop:U.data.props.marginTop,marginRight:U.data.props.marginRight,marginBottom:U.data.props.marginBottom,marginLeft:U.data.props.marginLeft,paddingTop:U.data.props.paddingTop,paddingRight:U.data.props.paddingRight,paddingBottom:U.data.props.paddingBottom,paddingLeft:U.data.props.paddingLeft,height:U.data.props.height,width:U.data.props.width,maxHeight:U.data.props.maxHeight,maxWidth:U.data.props.maxWidth,minHeight:U.data.props.minHeight,minWidth:U.data.props.minWidth,background:U.data.props.background,border:U.data.props.border,hover:U.data.props.hover})),[Ce,Ne]=j.useState(-1),Te=mv(e);return j.useEffect(()=>{t(U=>(U.blueprint={edges:U.blueprint.edges,nodes:_o(U.blueprint.nodes,Te)},U.visibilityBlueprint={edges:U.visibilityBlueprint.edges,nodes:_o(U.visibilityBlueprint.nodes,Te)},U.onPress={edges:U.onPress.edges,nodes:_o(U.onPress.nodes,Te)},U))},[Te]),c.jsxs(Oh,{children:[c.jsx(tr,{id:"show-placeholder",label:"Visible?",checked:n,onChange:U=>t(ee=>ee.showPlaceholder=U)}),c.jsxs(Mr,{id:"visibility",title:"Visibility",isOpen:Ce===0,toggleState:U=>Ne(U?0:-1),children:[c.jsx(tr,{id:"dynamic-visiblity",label:"Dynamic Visibility?",checked:i,onChange:U=>t(ee=>ee.dynamicVisibility=U)}),i?c.jsx("p",{onClick:()=>At("blueprint",({id:U})=>c.jsx(ei,{id:U,data:o,onSave:ee=>t(re=>re.visibilityBlueprint=ee)})),children:"Visibility Blueprint"}):c.jsx(tr,{id:"is-visible",label:"Visible?",checked:r,onChange:U=>t(ee=>ee.isVisible=U)})]}),c.jsxs(Mr,{id:"list",title:"List",isOpen:Ce===1,toggleState:U=>Ne(U?1:-1),children:[c.jsx(tr,{id:"is-list",label:"Is Dynamic List",checked:s,onChange:U=>{t(ee=>(ee.isList=U,ee.local=U?[{name:a,type:pm(l),isArray:!1}]:[],ee))}}),c.jsx(Vt,{id:"variable-name",label:"Variable Name",isValid:!0,errorMessage:"",value:a,onChange:U=>{t(ee=>{ee.dataName=U;const re=ee.local.findIndex(De=>De.name===a);if(re!==-1)return ee.local[re].name=U,ee})}}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:U})=>c.jsx(ei,{id:U,data:l,onSave:ee=>{t(re=>{re.blueprint=ee;const De=re.local.findIndex(Ye=>Ye.name===a);if(De!==-1)return re.local[De].type=pm(ee),re})}})),children:"List Data Blueprint"})]}),c.jsxs(Mr,{id:"input",title:"Input",isOpen:Ce===2,toggleState:U=>Ne(U?2:-1),children:[c.jsx(tr,{id:"is-interactive",label:"Is Interactive?",checked:u,onChange:U=>t(ee=>ee.isInteractive=U)}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:U})=>c.jsx(ei,{id:U,data:d,onSave:ee=>{t(re=>re.onPress=ee)}})),children:"On Press Blueprint"})]}),c.jsxs(Mr,{id:"layout",title:"Layout",isOpen:Ce===3,toggleState:U=>Ne(U?3:-1),children:[c.jsxs(ct,{id:"display",label:"Display",value:f,onChange:U=>t(ee=>ee.display=U),children:[c.jsx("option",{value:"block",children:"Block"}),c.jsx("option",{value:"flex",children:"Flex"}),c.jsx("option",{value:"grid",children:"Grid"})]}),c.jsxs(ct,{id:"position",label:"Position",value:h,onChange:U=>t(ee=>ee.position=U),children:[c.jsx("option",{value:"static",children:"Static"}),c.jsx("option",{value:"relative",children:"Relative"}),c.jsx("option",{value:"absolute",children:"Absolute"}),c.jsx("option",{value:"fixed",children:"Fixed"}),c.jsx("option",{value:"sticky",children:"Sticky"})]}),h!=="static"?c.jsxs(c.Fragment,{children:[c.jsx(Vt,{id:"top",label:"Top",isValid:!0,errorMessage:"",value:p,onChange:U=>t(ee=>ee.top=U)}),c.jsx(Vt,{id:"right",label:"Right",isValid:!0,errorMessage:"",value:v,onChange:U=>t(ee=>ee.right=U)}),c.jsx(Vt,{id:"bottom",label:"Bottom",isValid:!0,errorMessage:"",value:y,onChange:U=>t(ee=>ee.bottom=U)}),c.jsx(Vt,{id:"left",label:"Left",isValid:!0,errorMessage:"",value:w,onChange:U=>t(ee=>ee.left=U)})]}):null,f==="grid"?c.jsxs(c.Fragment,{children:[c.jsx(Vt,{id:"columns",label:"Columns",isValid:!0,errorMessage:"",value:k,onChange:U=>t(ee=>ee.columns=U)}),c.jsx(Vt,{id:"rows",label:"Rows",isValid:!0,errorMessage:"",value:E,onChange:U=>t(ee=>ee.rows=U)})]}):null,["flex","grid"].includes(f)?c.jsxs(c.Fragment,{children:[c.jsxs(ct,{id:"flex-direction",label:"Flex Direction",value:x,onChange:U=>t(ee=>ee.flexDirection=U),children:[c.jsx("option",{value:"row",children:"Row"}),c.jsx("option",{value:"column",children:"Column"}),c.jsx("option",{value:"row-reverse",children:"Reverse Row"}),c.jsx("option",{value:"column-reverse",children:"Reverse Column"})]}),c.jsxs(ct,{id:"align-items",label:"Align Items",value:b,onChange:U=>t(ee=>ee.alignItems=U),children:[c.jsx("option",{value:"initial",children:"Initial"}),c.jsx("option",{value:"inherit",children:"Inherit"}),c.jsx("option",{value:"normal",children:"Normal"}),c.jsx("option",{value:"stretch",children:"Stretch"}),c.jsx("option",{value:"center",children:"Center"}),c.jsx("option",{value:"flex-start",children:"Flex-Start"}),c.jsx("option",{value:"flex-end",children:"Flex-End"}),c.jsx("option",{value:"start",children:"Start"}),c.jsx("option",{value:"end",children:"End"}),c.jsx("option",{value:"baseline",children:"Baseline"})]}),c.jsxs(ct,{id:"justify-content",label:"Justify Content",value:m,onChange:U=>t(ee=>ee.justifyContent=U),children:[c.jsx("option",{value:"initial",children:"Initial"}),c.jsx("option",{value:"inherit",children:"Inherit"}),c.jsx("option",{value:"stretch",children:"Stretch"}),c.jsx("option",{value:"center",children:"Center"}),c.jsx("option",{value:"flex-start",children:"Flex-Start"}),c.jsx("option",{value:"flex-end",children:"Flex-End"}),c.jsx("option",{value:"space-between",children:"Space-Between"}),c.jsx("option",{value:"space-around",children:"Space-Around"}),c.jsx("option",{value:"space-evenly",children:"Space-Evenly"})]}),c.jsx(ct,{id:"container-gap",label:"Gap",value:S,onChange:U=>t(ee=>ee.gap=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))})]}):null]}),c.jsxs(Mr,{id:"spacing",title:"Spacing",isOpen:Ce===4,toggleState:U=>Ne(U?4:-1),children:[c.jsx(ct,{id:"margin-top",label:"Margin Top",value:N,onChange:U=>t(ee=>ee.marginTop=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"margin-right",label:"Margin Right",value:I,onChange:U=>t(ee=>ee.marginRight=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"margin-bottom",label:"Margin Bottom",value:z,onChange:U=>t(ee=>ee.marginBottom=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"margin-left",label:"Margin Left",value:O,onChange:U=>t(ee=>ee.marginTop=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"padding-top",label:"Padding Top",value:M,onChange:U=>t(ee=>ee.paddingTop=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"padding-right",label:"Padding Right",value:K,onChange:U=>t(ee=>ee.paddingRight=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"padding-bottom",label:"Padding Bottom",value:D,onChange:U=>t(ee=>ee.paddingBottom=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"padding-left",label:"Padding Left",value:L,onChange:U=>t(ee=>ee.paddingLeft=U),children:Object.keys(Ve.spacing).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"width",label:"Width",value:G,onChange:U=>t(ee=>ee.width=U),children:Object.keys(Ve.size).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"height",label:"Height",value:q,onChange:U=>t(ee=>ee.height=U),children:Object.keys(Ve.size).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"max-width",label:"Max Width",value:B,onChange:U=>t(ee=>ee.maxWidth=U),children:Object.keys(Ve.size).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"max-height",label:"Max Height",value:te,onChange:U=>t(ee=>ee.maxHeight=U),children:Object.keys(Ve.size).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"min-width",label:"Min Width",value:$,onChange:U=>t(ee=>ee.minWidth=U),children:Object.keys(Ve.size).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"min-height",label:"Min Height",value:H,onChange:U=>t(ee=>ee.minHeight=U),children:Object.keys(Ve.size).map(U=>c.jsx("option",{value:U,children:U},U))})]}),c.jsxs(Mr,{id:"styling",title:"Styling",isOpen:Ce===5,toggleState:U=>Ne(U?5:-1),children:[c.jsx(ct,{id:"container-background",label:"Background",value:Y,onChange:U=>t(ee=>ee.background=U),children:Object.keys(Ai).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"container-border",label:"Border",value:se,onChange:U=>t(ee=>ee.border=U),children:Object.keys(Ai).map(U=>c.jsx("option",{value:U,children:U},U))}),c.jsx(ct,{id:"container-hover",label:"Hover",value:ue,onChange:U=>t(ee=>ee.hover=U),children:Object.keys(Ai).map(U=>c.jsx("option",{value:U,children:U},U))})]})]})}function Zs(e){const{connectors:{connect:t,drag:n}}=oi(),r=j.useMemo(()=>{var s;return Ai[e.background]?(s=Ai[e.background])==null?void 0:s.background:""},[e.background]),i=j.useMemo(()=>{var s;return Ai[e.border]?(s=Ai[e.border])==null?void 0:s.border:""},[e.border]),o=j.useMemo(()=>{var s;return e.isInteractive?(s=Ai[e.hover])==null?void 0:s.hover:""},[e.isInteractive]);return c.jsx("div",{ref:s=>t(n(s)),style:{display:e.display,position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ve.spacing[e.gap],marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft],height:Ve.size[e.height],width:Ve.size[e.width],maxHeight:Ve.size[e.maxHeight],maxWidth:Ve.size[e.maxWidth],minHeight:Ve.size[e.minHeight],minWidth:Ve.size[e.minWidth]},className:"".concat(r," ").concat(i," ").concat(o),children:e.children?e.children:e.showPlaceholder?c.jsx("div",{children:"Add An Item!"}):null})}const sle={defaultProps:{showPlaceholder:!0,dynamicVisibility:!1,visibilityBlueprint:{nodes:dr([],{name:"isVisible",type:"boolean",isArray:!1}),edges:[]},isVisible:!0,isList:!1,dataName:"listItem",blueprint:{nodes:dr([],{name:"listItem",type:"any",isArray:!0}),edges:[]},local:[],isInteractive:!1,onPress:{nodes:dr([]),edges:[]},display:"flex",position:"static",top:"0px",right:"0px",bottom:"0px",left:"0px",flexDirection:"column",alignItems:"normal",justifyContent:"initial",gap:"0",rows:0,columns:0,marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"4",paddingRight:"4",paddingBottom:"4",paddingLeft:"4",height:"auto",width:"auto",maxHeight:"none",maxWidth:"none",minHeight:"none",minWidth:"none",background:"no style",border:"no style",hover:"no style"},rules:{canMoveIn:(e,t,n)=>t.data.props.isList?t.data.nodes.length===0:!0},related:{settings:ole}};Zs.craft=sle;function ale(){const{id:e,actions:{setProp:t},useBlueprintValue:n,blueprint:r,text:i,color:o,fontSize:s,fontWeight:a,textAlign:l,textDecoration:u,textTransform:d,marginTop:f,marginRight:h,marginBottom:p,marginLeft:v,paddingTop:y,paddingRight:w,paddingBottom:x,paddingLeft:b}=oi(k=>({useBlueprintValue:k.data.props.useBlueprintValue||!1,blueprint:k.data.props.blueprint,text:k.data.props.text||"",color:k.data.props.color,fontFamily:k.data.props.fontFamily,fontSize:k.data.props.fontSize,fontWeight:k.data.props.fontWeight,fontStyle:k.data.props.fontStyle,letterSpacing:k.data.props.letterSpacing,lineHeight:k.data.props.lineHeight,textAlign:k.data.props.textAlign||"left",textDecoration:k.data.props.textDecoration||"none",textTransform:k.data.props.textTransform||"none",marginTop:k.data.props.marginTop||"0px",marginRight:k.data.props.marginRight||"0px",marginBottom:k.data.props.marginBottom||"0px",marginLeft:k.data.props.marginLeft||"0px",paddingTop:k.data.props.paddingTop||"0px",paddingRight:k.data.props.paddingRight||"0px",paddingBottom:k.data.props.paddingBottom||"0px",paddingLeft:k.data.props.paddingLeft||"0px"})),[m,S]=j.useState(-1),E=mv(e);return j.useEffect(()=>{t(k=>(k.blueprint={edges:k.blueprint.edges,nodes:_o(k.blueprint.nodes,E)},k))},[]),c.jsxs(Oh,{children:[c.jsxs(Mr,{id:"content",title:"Content",isOpen:m===0,toggleState:k=>S(k?0:-1),children:[c.jsx(tr,{id:"use-blueprint-value",label:"Use Blueprint Value?",checked:n,onChange:k=>t(N=>N.useBlueprintValue=k)}),n?c.jsx(xt,{color:"primary",onClick:()=>At("blueprint",({id:k})=>c.jsx(ei,{id:k,data:r,onSave:N=>{t(I=>I.blueprint=N)}})),children:"Edit Blueprint Value"}):c.jsx(Vt,{id:"text",label:"Text",placeholder:"lorem ipsum",value:i,onChange:k=>t(N=>N.text=k),isValid:!0,errorMessage:""})]}),c.jsxs(Mr,{id:"content-styling",title:"Content Styling",isOpen:m===1,toggleState:k=>S(k?1:-1),children:[c.jsx(ct,{id:"color",label:"Color",value:o,onChange:k=>t(N=>N.color=k),children:Object.keys(Ni.colors).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"font-size",label:"Font Size",value:s,onChange:k=>t(N=>N.fontSize=k),children:Object.keys(Ni.sizes).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"font-weight",label:"Font Weight",value:a,onChange:k=>t(N=>N.fontWeight=k),children:Object.keys(Ni.weight).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsxs(ct,{id:"text-align",label:"Text Align",value:l,onChange:k=>t(N=>N.textAlign=k),children:[c.jsx("option",{value:"left",children:"Left"}),c.jsx("option",{value:"center",children:"Center"}),c.jsx("option",{value:"right",children:"Right"})]}),c.jsxs(ct,{id:"text-decoration",label:"Text Decoration",value:u,onChange:k=>t(N=>N.textDecoration=k),children:[c.jsx("option",{value:"none",children:"None"}),c.jsx("option",{value:"underline",children:"Underline"}),c.jsx("option",{value:"line-through",children:"Line-Through"})]}),c.jsxs(ct,{id:"text-transform",label:"Text Transform",value:d,onChange:k=>t(N=>N.textTransform=k),children:[c.jsx("option",{value:"none",children:"None"}),c.jsx("option",{value:"uppercase",children:"Uppercase"}),c.jsx("option",{value:"lowercase",children:"Lowercase"})]})]}),c.jsxs(Mr,{id:"spacing",title:"Spacing",isOpen:m===2,toggleState:k=>S(k?2:-1),children:[c.jsx(ct,{id:"margin-top",label:"Margin Top",value:f,onChange:k=>t(N=>N.marginTop=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"margin-right",label:"Margin Right",value:h,onChange:k=>t(N=>N.marginRight=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"margin-bottom",label:"Margin Bottom",value:p,onChange:k=>t(N=>N.marginBottom=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"margin-left",label:"Margin Left",value:v,onChange:k=>t(N=>N.marginTop=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"padding-top",label:"Padding Top",value:y,onChange:k=>t(N=>N.paddingTop=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"padding-right",label:"Padding Right",value:w,onChange:k=>t(N=>N.paddingRight=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"padding-bottom",label:"Padding Bottom",value:x,onChange:k=>t(N=>N.paddingBottom=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))}),c.jsx(ct,{id:"padding-left",label:"Padding Left",value:b,onChange:k=>t(N=>N.paddingLeft=k),children:Object.keys(Ve.spacing).map(k=>c.jsx("option",{value:k,children:k},k))})]})]})}function ea(e){const{connectors:{connect:t,drag:n}}=oi(),r=j.useMemo(()=>{var o;return Ni.colors[e.color]?(o=Ni.colors[e.color])==null?void 0:o.text:""},[e.color]),i=j.useMemo(()=>Ni.weight[e.fontWeight]?Ni.weight[e.fontWeight]:"",[e.fontWeight]);return c.jsx("p",{ref:o=>t(n(o)),style:{textAlign:e.textAlign,...Ni.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:e.text})}const lle={defaultProps:{useBlueprintValue:!1,blueprint:{nodes:dr([],{name:"output",type:"string",isArray:!1}),edges:[]},text:"hello world",color:"base",fontSize:"base",textAlign:"left",textDecoration:"none",textTransform:"none",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"0",paddingRight:"0",paddingBottom:"0",paddingLeft:"0"},rules:{},related:{settings:ale}};ea.craft=lle;const ule="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",cle=({versionedResource:e})=>{const t=sn.useValue(),{actions:n}=To();return j.useEffect(()=>{var i;let r=(i=e.data.pages.find(o=>o.name===t.characterPage))==null?void 0:i.lexical;r||(r=ule),n.deserialize(ro.decompress(ro.decodeBase64(r)))},[t.characterPage]),c.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:c.jsx(fS,{children:c.jsx(sa,{is:Zs,canvas:!0,children:c.jsx(ea,{text:"Testing the world"})})})})},dle=({})=>c.jsx(c.Fragment,{children:c.jsx("p",{children:"TODO"})});function VS({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const o=sn.useValue(),s=Mn(o.versionId),[a,l]=j.useState(""),[u,d]=j.useState(""),[f,h]=j.useState(!1);return j.useEffect(()=>{e&&(l(e.name),d(e.type.type),h(e.type.isArray||!1))},[e]),s?c.jsxs(Wn,{isOpen:t,onClose:n,children:[c.jsx(Vn,{title:"Add Page State",onClose:n}),c.jsxs(Un,{children:[c.jsx(Vt,{id:"var-name",label:"Variable Name",value:a,onChange:l,isValid:!0,errorMessage:""}),c.jsxs(ct,{id:"var-type",label:"Type",value:u,onChange:d,children:[c.jsx("option",{value:"string",children:"string"}),c.jsx("option",{value:"number",children:"number"}),c.jsx("option",{value:"boolean",children:"boolean"}),c.jsx("option",{value:"enum",children:"enum"}),s.data.types.map(p=>c.jsx("option",{value:p.name,children:p.name},p.name))]}),c.jsx(tr,{id:"is-array",label:"Is Array?",checked:f,onChange:h})]}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),c.jsx(xt,{color:"primary",onClick:()=>{if(!a||!u||!e)return n();r({name:a,type:{type:u,isArray:f,useTextArea:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}}),n()},children:"Confirm"})]})]}):c.jsx(c.Fragment,{})}const qS=()=>{const{nodes:e,actions:t,isActive:n}=To(f=>({nodes:f.nodes,isActive:f.events.selected})),[r,i]=Tt.useState({}),[o,s]=Tt.useState(""),{connectors:{select:a}}=To(),l=f=>{i(h=>({...h,[f]:!h[f]}))},u=f=>{var w;const h=e[f];if(!h)return null;const p=r[f],v=h.data.nodes&&h.data.nodes.length>0,y=n.has(f);return c.jsxs("div",{className:"select-none",children:[c.jsxs("div",{ref:x=>a(x,f),className:"\n            flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors duration-200 hover:bg-secondary/80\n            ".concat(y?"bg-blue-500/20 text-blue-700 dark:text-blue-300":"","\n            ").concat(o===f&&!y?"bg-secondary/50":"","\n          "),onMouseEnter:()=>s(f),onMouseLeave:()=>s(""),children:[v?c.jsx("button",{onClick:x=>{x.stopPropagation(),l(f)},className:"w-4 h-4 flex items-center justify-center hover:bg-secondary/80 rounded",children:p?c.jsx(m1,{className:"w-4 h-4"}):c.jsx(UL,{className:"w-4 h-4"})}):c.jsx("div",{className:"w-4"}),c.jsx("button",{onClick:x=>{x.stopPropagation(),t.setHidden(f,!h.data.hidden)},className:"text-foreground/80 hover:text-foreground",children:h.data.hidden?c.jsx(VL,{className:"w-4 h-4"}):c.jsx(qL,{className:"w-4 h-4"})}),c.jsx("span",{className:"text-sm font-medium",children:((w=h.data.custom)==null?void 0:w.displayName)||h.data.displayName||h.data.name})]}),v&&p&&c.jsx("div",{className:"ml-1.5 border-l border-border/50 pl-2 mt-1",children:h.data.nodes.map(x=>u(x))})]},f)},d=Object.keys(e).filter(f=>!e[f].data.parent);return c.jsxs("div",{className:"p-4 space-y-2",children:[c.jsxs("div",{className:"text-sm font-medium flex items-center gap-2 px-2",children:[c.jsx(KL,{className:"w-4 h-4"}),"Layers"]}),c.jsx("div",{className:"space-y-1",children:d.map(f=>u(f))})]})};function fle(){const e=sn.useValue(),t=Mn(e.versionId),n=j.useMemo(()=>t==null?void 0:t.data.pages.find(d=>d.name===e.characterPage),[t,e.characterPage]),[r,i]=j.useState("components"),[o,s]=j.useState(null),{connectors:a}=To(),{selected:l,actions:u}=To((d,f)=>{const[h]=d.events.selected;let p;return h&&(p={id:h,name:d.nodes[h].data.name,settings:d.nodes[h].related&&d.nodes[h].related.settings,isDeletable:f.node(h).isDeletable()}),{selected:p}});return t?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx(ct,{id:"page",label:"Page",value:e.characterPage,onChange:uC,children:t.data.pages.map(d=>c.jsx("option",{value:d.name,children:d.name},d.name))}),c.jsxs("button",{type:"button",onClick:()=>Ht(e.versionId,FS(t.data,"character")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[c.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),c.jsxs(ct,{id:"designer-tab",label:"",value:r,onChange:i,children:[c.jsx("option",{value:"components",children:"Components"}),c.jsx("option",{value:"details",children:"Details"}),c.jsx("option",{value:"state",children:"Page Info"})]}),c.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{className:"",children:"Components"}),c.jsxs("div",{className:"flex flex-col my-4",children:[c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>a.create(d,c.jsx(sa,{is:Zs,canvas:!0})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>a.create(d,c.jsx(ea,{text:"Hi World"})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),c.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>a.create(d,c.jsx(Ec,{placeholder:"Search...",blueprint:{nodes:dr([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>a.create(d,c.jsx(Sc,{})),children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>a.create(d,c.jsx(kc,{isList:!1,buttons:[],blueprint:{nodes:dr(),edges:[]}})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&l?c.jsxs(c.Fragment,{children:[l.settings&&Tt.createElement(l.settings),l.isDeletable?c.jsx(xt,{className:"mt-4",color:"danger",onClick:()=>{u.delete(l.id)},children:"Delete"}):null]}):r==="state"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[c.jsx(xt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{Ht(t.local_id,zS(t.data,"character",e.characterPage))},children:"Delete"}),c.jsx(xt,{color:"primary",onClick:()=>At("rename-modal",({id:d})=>c.jsx(ds,{id:d,title:"Rename Page",data:e.characterPage,onSave:async f=>{await Ht(e.versionId,HS(t.data,"character",e.characterPage,f)),uC(f)}})),children:"Rename"})]}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:d})=>c.jsx(ei,{id:d,data:n.blueprint,onSave:f=>Ht(t.local_id,WS(t.data,"character",e.characterPage,f))})),children:"Edit Page Blueprint"}),c.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[c.jsx("div",{style:{display:"flex",alignItems:"center"},children:c.jsx("h5",{children:"Page State"})}),c.jsxs("button",{onClick:()=>Ht(t.local_id,BS(t.data,"character",e.characterPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],outputType:"string",isOutputAnArray:!1,inputs:[]})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[c.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),c.jsx(Bc,{}),c.jsx("div",{children:n==null?void 0:n.state.map(d=>c.jsx("div",{onClick:()=>s(d),children:c.jsxs("p",{children:[d.name," | ",d.type.type,d.type.isArray?"(Array)":""]})},d.name))}),c.jsx(VS,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:d=>Ht(t.local_id,US(t.data,"character",e.characterPage,o.name,{...d,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?c.jsx(qS,{}):null]}):c.jsx(c.Fragment,{})}function hle(){const{id:e,actions:{setProp:t},label:n,dynamicOptions:r,optionsBlueprint:i,onChange:o,marginTop:s,marginRight:a,marginBottom:l,marginLeft:u,width:d,maxWidth:f,minWidth:h}=oi(w=>({label:w.data.props.label,dynamicOptions:w.data.props.dynamicOptions,optionsBlueprint:w.data.props.optionsBlueprint,options:w.data.props.options,onChange:w.data.props.onChange,marginTop:w.data.props.marginTop,marginRight:w.data.props.marginRight,marginBottom:w.data.props.marginBottom,marginLeft:w.data.props.marginLeft,width:w.data.props.width,maxWidth:w.data.props.maxWidth,minWidth:w.data.props.minWidth})),[p,v]=j.useState(-1),y=mv(e);return j.useEffect(()=>{t(w=>(w.optionsBlueprint={edges:w.optionsBlueprint.edges,nodes:_o(w.optionsBlueprint.nodes,y)},w.onChange={edges:w.onChange.edges,nodes:_o(w.onChange.nodes,y)},w))},[y]),c.jsxs(Oh,{children:[c.jsx(Mr,{id:"label",title:"Label",isOpen:p===0,toggleState:w=>v(w?0:-1),children:c.jsx(Vt,{id:"label",label:"Update Label",value:n,onChange:w=>t(x=>x.label=w),isValid:!0,errorMessage:""})}),c.jsxs(Mr,{id:"options",title:"Options",isOpen:p===1,toggleState:w=>v(w?1:-1),children:[c.jsx(tr,{id:"dynamic-options",label:"Dynamic Options?",checked:r,onChange:w=>t(x=>x.dynamicOptions=w)}),r?c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:w})=>c.jsx(ei,{id:w,data:i,onSave:x=>{t(b=>(b.optionsBlueprint=x,b.onChange={edges:b.onChange.edges,nodes:_o(b.onChange.nodes,[...y,{name:"selectedValue",type:pm(x),isArray:!1}])},b))}})),children:"Options Blueprint"}):c.jsx("p",{children:"TODO: handle options."}),c.jsx("div",{className:"h-2"}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:w})=>c.jsx(ei,{id:w,data:o,onSave:x=>{t(b=>b.onChange=x)}})),children:"onChange Blueprint"})]}),c.jsxs(Mr,{id:"spacing",title:"Spacing",isOpen:p===2,toggleState:w=>v(w?2:-1),children:[c.jsx(ct,{id:"margin-top",label:"Margin Top",value:s,onChange:w=>t(x=>x.marginTop=w),children:Object.keys(Ve.spacing).map(w=>c.jsx("option",{value:w,children:w},w))}),c.jsx(ct,{id:"margin-right",label:"Margin Right",value:a,onChange:w=>t(x=>x.marginRight=w),children:Object.keys(Ve.spacing).map(w=>c.jsx("option",{value:w,children:w},w))}),c.jsx(ct,{id:"margin-bottom",label:"Margin Bottom",value:l,onChange:w=>t(x=>x.marginBottom=w),children:Object.keys(Ve.spacing).map(w=>c.jsx("option",{value:w,children:w},w))}),c.jsx(ct,{id:"margin-left",label:"Margin Left",value:u,onChange:w=>t(x=>x.marginTop=w),children:Object.keys(Ve.spacing).map(w=>c.jsx("option",{value:w,children:w},w))}),c.jsx(ct,{id:"width",label:"Width",value:d,onChange:w=>t(x=>x.width=w),children:Object.keys(Ve.size).map(w=>c.jsx("option",{value:w,children:w},w))}),c.jsx(ct,{id:"max-width",label:"Max Width",value:f,onChange:w=>t(x=>x.maxWidth=w),children:Object.keys(Ve.size).map(w=>c.jsx("option",{value:w,children:w},w))}),c.jsx(ct,{id:"min-width",label:"Min Width",value:h,onChange:w=>t(x=>x.minWidth=w),children:Object.keys(Ve.size).map(w=>c.jsx("option",{value:w,children:w},w))})]})]})}function Um(e){var i;const{connectors:{connect:t,drag:n}}=oi(),r=j.useMemo(()=>[],[]);return c.jsx(ct,{ref:o=>t(n(o)),style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,value:(i=r[0])==null?void 0:i.name,onChange:()=>{},children:r.map(o=>c.jsx("option",{children:o.name},o.name))})}const ple={defaultProps:{label:"Select",dynamicOptions:!1,optionsBlueprint:{nodes:dr([],{name:"options",type:"any",isArray:!0}),edges:[]},options:[],onChange:{nodes:dr([{name:"selectedValue",type:"object",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:hle}};Um.craft=ple;function gle(){const{id:e,actions:{setProp:t},label:n,type:r,minNumber:i,maxNumber:o,getValue:s,onChange:a,marginTop:l,marginRight:u,marginBottom:d,marginLeft:f,width:h,maxWidth:p,minWidth:v}=oi(b=>({label:b.data.props.label,type:b.data.props.type,minNumber:b.data.props.minNumber,maxNumber:b.data.props.maxNumber,getValue:b.data.props.getValue,onChange:b.data.props.onChange,marginTop:b.data.props.marginTop,marginRight:b.data.props.marginRight,marginBottom:b.data.props.marginBottom,marginLeft:b.data.props.marginLeft,width:b.data.props.width,maxWidth:b.data.props.maxWidth,minWidth:b.data.props.minWidth})),[y,w]=j.useState(-1),x=mv(e);return j.useEffect(()=>{t(b=>{b.getValue={edges:b.getValue.edges,nodes:_o(b.getValue.nodes,x,{name:"value",type:r==="text"?"string":"number",isArray:!1})},b.onChange={edges:b.onChange.edges,nodes:_o(b.onChange.nodes,[...x,{name:"field value",type:r==="text"?"string":"number",isArray:!1}])}})},[x]),c.jsxs(Oh,{children:[c.jsx(Mr,{id:"label",title:"Label",isOpen:y===0,toggleState:b=>w(b?0:-1),children:c.jsx(Vt,{id:"label",label:"Update Label",value:n,onChange:b=>t(m=>m.label=b),isValid:!0,errorMessage:""})}),c.jsxs(Mr,{id:"data",title:"Data",isOpen:y===1,toggleState:b=>w(b?1:-1),children:[c.jsx(ct,{id:"input-type",label:"Type",value:r,onChange:b=>{t(m=>(m.type=b,m.getValue.nodes=_o(m.getValue.nodes,x,{name:"value",type:b==="text"?"string":"number",isArray:!1}),m.onChange.nodes=_o(m.onChange.nodes,[...x,{name:"field value",type:b==="text"?"string":"number",isArray:!1}]),m))},children:["text","number"].map(b=>c.jsx("option",{value:b,children:b},b))}),r==="number"&&c.jsxs(c.Fragment,{children:[c.jsx(Vt,{id:"min-number",label:"Min Number",type:"number",value:i,onChange:b=>t(m=>m.minNumber=b),isValid:!0,errorMessage:""}),c.jsx(Vt,{id:"max-number",label:"Max Number",type:"number",value:o,onChange:b=>t(m=>m.maxNumber=b),isValid:!0,errorMessage:""})]}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:b})=>c.jsx(ei,{id:b,data:s,onSave:m=>{t(S=>S.getValue=m)}})),children:"Get Value Blueprint"}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:b})=>c.jsx(ei,{id:b,data:a,onSave:m=>{t(S=>S.onChange=m)}})),children:"onChange Blueprint"})]}),c.jsxs(Mr,{id:"spacing",title:"Spacing",isOpen:y===2,toggleState:b=>w(b?2:-1),children:[c.jsx(ct,{id:"margin-top",label:"Margin Top",value:l,onChange:b=>t(m=>m.marginTop=b),children:Object.keys(Ve.spacing).map(b=>c.jsx("option",{value:b,children:b},b))}),c.jsx(ct,{id:"margin-right",label:"Margin Right",value:u,onChange:b=>t(m=>m.marginRight=b),children:Object.keys(Ve.spacing).map(b=>c.jsx("option",{value:b,children:b},b))}),c.jsx(ct,{id:"margin-bottom",label:"Margin Bottom",value:d,onChange:b=>t(m=>m.marginBottom=b),children:Object.keys(Ve.spacing).map(b=>c.jsx("option",{value:b,children:b},b))}),c.jsx(ct,{id:"margin-left",label:"Margin Left",value:f,onChange:b=>t(m=>m.marginTop=b),children:Object.keys(Ve.spacing).map(b=>c.jsx("option",{value:b,children:b},b))}),c.jsx(ct,{id:"width",label:"Width",value:h,onChange:b=>t(m=>m.width=b),children:Object.keys(Ve.size).map(b=>c.jsx("option",{value:b,children:b},b))}),c.jsx(ct,{id:"max-width",label:"Max Width",value:p,onChange:b=>t(m=>m.maxWidth=b),children:Object.keys(Ve.size).map(b=>c.jsx("option",{value:b,children:b},b))}),c.jsx(ct,{id:"min-width",label:"Min Width",value:v,onChange:b=>t(m=>m.minWidth=b),children:Object.keys(Ve.size).map(b=>c.jsx("option",{value:b,children:b},b))})]})]})}function Vm(e){const{connectors:{connect:t,drag:n}}=oi();return c.jsx(Vt,{ref:r=>t(n(r)),style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,isValid:!0,errorMessage:"",id:e.label,label:e.label,value:"",onChange:()=>{}})}const mle={defaultProps:{label:"Select",type:"text",minNumber:0,maxNumber:100,getValue:{nodes:dr([],{name:"value",type:"string",isArray:!1}),edges:[]},onChange:{nodes:dr([{name:"field value",type:"string",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:gle}};Vm.craft=mle;const yle=()=>{const e=sn.useValue(),t=Mn(e.versionId),n=j.useMemo(()=>t==null?void 0:t.data.creator.find(h=>h.name===e.creatorPage),[t,e.creatorPage]),[r,i]=j.useState("components"),[o,s]=j.useState(null),[a,l]=j.useState(null),{connectors:u}=To(),{selected:d,actions:f}=To((h,p)=>{const[v]=h.events.selected;let y;return v&&(y={id:v,name:h.nodes[v].data.name,settings:h.nodes[v].related&&h.nodes[v].related.settings,isDeletable:p.node(v).isDeletable()}),{selected:y}});return t?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx(ct,{id:"page",label:"Page",value:e.creatorPage,onChange:lC,children:t.data.creator.map(h=>c.jsx("option",{value:h.name,children:h.name},h.name))}),c.jsxs("button",{type:"button",onClick:()=>Ht(t.local_id,FS(t.data,"builder")),className:"ml-2 text-fantasy-accent border border-fantasy-accent hover:bg-fantasy-accent hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[c.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),c.jsxs(ct,{id:"designer-tab",label:"",value:r,onChange:i,children:[c.jsx("option",{value:"components",children:"Components"}),c.jsx("option",{value:"details",children:"Details"}),c.jsx("option",{value:"state",children:"Page Info"})]}),c.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{className:"",children:"Components"}),c.jsxs("div",{className:"flex flex-col my-4",children:[c.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,c.jsx(sa,{is:Zs,canvas:!0})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,c.jsx(ea,{text:"Hi World"})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),c.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,c.jsx(Ec,{placeholder:"Search...",blueprint:{nodes:dr([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,c.jsx(Um,{})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Select"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,c.jsx(Vm,{})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text Input"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,c.jsx(Sc,{})),children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,c.jsx(kc,{isList:!1,buttons:[],blueprint:{nodes:dr(),edges:[]}})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&d?c.jsxs(c.Fragment,{children:[d.settings&&Tt.createElement(d.settings),d.isDeletable?c.jsx(xt,{className:"mt-4",color:"danger",onClick:()=>{f.delete(d.id)},children:"Delete"}):null]}):r==="state"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[c.jsx(xt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{Ht(t.local_id,zS(t.data,"builder",e.creatorPage))},children:"Delete"}),c.jsx(xt,{color:"light",onClick:()=>At("rename-page",({id:h})=>c.jsx(ds,{id:h,title:"Rename Page",data:e.characterPage,onSave:async p=>{await Ht(e.versionId,HS(t.data,"character",e.characterPage,p)),lC(p)}})),children:"Rename"})]}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:h})=>c.jsx(ei,{id:h,data:n.blueprint,onSave:p=>Ht(t.local_id,WS(t.data,"builder",e.creatorPage,p))})),children:"Edit Page Blueprint"}),c.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[c.jsx("div",{style:{display:"flex",alignItems:"center"},children:c.jsx("h5",{children:"Page State"})}),c.jsxs("button",{onClick:()=>Ht(t.local_id,BS(t.data,"builder",e.creatorPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],inputs:[],outputType:"none",isOutputAnArray:!1})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[c.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),c.jsx(Bc,{}),c.jsx("div",{className:"pt-2 flex flex-col gap-y-2",children:n==null?void 0:n.state.map(h=>c.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>s(h),children:c.jsxs("p",{children:[h.name," | ",h.type.type,h.type.isArray?"(Array)":""]})},h.name))}),c.jsx(VS,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:h=>Ht(t.local_id,US(t.data,"builder",e.creatorPage,o.name,{...h,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?c.jsx(qS,{}):null]}):c.jsx(c.Fragment,{})};function vle({versionEdits:e}){const t=sn.useValue(),n=j.useMemo(()=>e==null?void 0:e.data.modals.find(d=>d.name===t.modalsPage),[e,t.modalsPage]),[r,i]=j.useState("components"),[o,s]=j.useState(null),{selected:a,actions:l,connectors:u}=To((d,f)=>{const[h]=d.events.selected;let p;return h&&(p={id:h,name:d.nodes[h].data.name,settings:d.nodes[h].related&&d.nodes[h].related.settings,isDeletable:f.node(h).isDeletable()}),{selected:p}});return e?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx(ct,{id:"page",label:"Page",value:t.modalsPage,onChange:cC,children:e.data.modals.map(d=>c.jsx("option",{value:d.name,children:d.name},d.name))}),c.jsxs("button",{type:"button",onClick:()=>Ht(t.versionId,FS(e.data,"modal")),className:"ml-2 text-fantasy-accent border border-fantasy-border hover:bg-fantasy-accent-dark focus:ring-4 focus:outline-none focus:ring-fantasy-accent font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2",children:[c.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),c.jsxs(ct,{id:"designer-tab",label:"",value:r,onChange:i,children:[c.jsx("option",{value:"components",children:"Components"}),c.jsx("option",{value:"details",children:"Details"}),c.jsx("option",{value:"state",children:"Page Info"})]}),c.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{className:"",children:"Components"}),c.jsxs("div",{className:"flex flex-col my-4",children:[c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>u.create(d,c.jsx(sa,{is:Zs,canvas:!0})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>u.create(d,c.jsx(ea,{text:"Hi World"})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),c.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>u.create(d,c.jsx(Ec,{placeholder:"Search...",blueprint:{nodes:dr([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>u.create(d,c.jsx(Sc,{})),children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),c.jsxs("div",{className:"flex items-center p-4 border",ref:d=>u.create(d,c.jsx(kc,{isList:!1,buttons:[],blueprint:{nodes:dr(),edges:[]}})),children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[c.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),c.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),c.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&a?c.jsxs(c.Fragment,{children:[a.settings&&Tt.createElement(a.settings),a.isDeletable?c.jsx(xt,{className:"mt-4",color:"danger",onClick:()=>{l.delete(a.id)},children:"Delete"}):null]}):r==="state"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[c.jsx(xt,{color:"danger",disabled:e.data.pages.length<=1,onClick:()=>{Ht(t.versionId,zS(e.data,"modal",t.modalsPage))},children:"Delete"}),c.jsx(xt,{color:"primary",onClick:()=>At("rename-modal",({id:d})=>c.jsx(ds,{id:d,title:"Rename Page",data:t.modalsPage,onSave:async f=>{await Ht(t.versionId,HS(e.data,"modal",t.modalsPage,f)),cC(f)}})),children:"Rename"})]}),c.jsx(xt,{color:"light",onClick:()=>At("blueprint",({id:d})=>c.jsx(ei,{id:d,data:n.blueprint,onSave:f=>Ht(e.local_id,WS(e.data,"modal",t.modalsPage,f))})),children:"Edit Page Blueprint"}),c.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[c.jsx("div",{style:{display:"flex",alignItems:"center"},children:c.jsx("h5",{children:"Page State"})}),c.jsxs("button",{onClick:()=>Ht(e.local_id,BS(e.data,"modal",t.modalsPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],outputType:"string",isOutputAnArray:!1,inputs:[]})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[c.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:c.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),c.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),c.jsx(Bc,{}),c.jsx("div",{children:n==null?void 0:n.state.map(d=>c.jsx("div",{onClick:()=>s(d),children:c.jsxs("p",{children:[d.name," | ",d.type.type,d.type.isArray?"(Array)":""]})},d.name))}),c.jsx(VS,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:d=>Ht(e.local_id,US(e.data,"modal",t.modalsPage,o.name,{...d,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?c.jsx(qS,{}):null]}):c.jsx("p",{children:"loading..."})}function xle(){const e=sn.useValue(),t=Mn(e.versionId);return t?c.jsx("aside",{className:"bg-fantasy-glass backdrop-blur-lg border-l border-fantasy-border shadow-2xl fixed top-0 right-0 z-40 w-64 h-screen transition-transform translate-x-full lg:-translate-x-0","aria-label":"Editor Sidebar",children:c.jsxs("div",{className:"h-full flex flex-col px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-neutral-950",children:[c.jsx("div",{className:"py-4 mb-4 border-b border-neutral-200 dark:border-neutral-700",children:c.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"Details"})}),e.tab==="character"?c.jsx("p",{children:"Default Character data, used for types in GetCharacterData nodes and such."}):e.tab==="data"?c.jsx("p",{children:"Custom data for the system (Items, classes, etc.)"}):e.tab==="types"?c.jsx("p",{children:"The data types for everything in this system."}):e.tab==="editor"?c.jsx(fle,{}):e.tab==="creator"?c.jsx(yle,{}):e.tab==="modals"?c.jsx(vle,{versionEdits:t}):e.tab==="actions"&&c.jsx("p",{children:"Quick actions such as long rest, reset spell slots, ect."})]})}):c.jsx(c.Fragment,{})}const ble="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",wle=({versionedResource:e})=>{const t=sn.useValue(),{actions:n}=To();return j.useEffect(()=>{var i;let r=(i=e.data.creator.find(o=>o.name===t.creatorPage))==null?void 0:i.lexical;r||(r=ble),n.deserialize(ro.decompress(ro.decodeBase64(r)))},[t.creatorPage]),c.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:c.jsx(fS,{children:c.jsx(sa,{is:Zs,canvas:!0,children:c.jsx(ea,{text:"Testing the world"})})})})};function _le(e){return oo(()=>et.systems.get(e||""),[e])}function V5(e){const t=oo(()=>et.versions.get(e||""),[e]);if(t)return{...t,data:t==null?void 0:t.data}}const Sle="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",Ele=({versionedResource:e})=>{const t=sn.useValue(),{actions:n}=To();return j.useEffect(()=>{var o;const r=e.data.modals.find(s=>s.name===t.modalsPage);if(!r){console.warn("Modal page not found:",t.modalsPage);return}let i=(o=r.lexical)!=null?o:Sle;n.deserialize(ro.decompress(ro.decodeBase64(i)))},[t.modalsPage]),c.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:c.jsx(fS,{children:c.jsx(sa,{is:Zs,canvas:!0,children:c.jsx(ea,{text:"Testing the world"})})})})},kle=async(e,t)=>pn(e,n=>{n.actions||(n.actions=[]),!n.actions.find(r=>r.name===t)&&n.actions.push({name:t,description:"A new action!",blueprint:{nodes:dr(),edges:[]}})}),Cle=async(e,t)=>pn(e,n=>{n.actions||(n.actions=[]);const r=n.actions.findIndex(i=>i.name===t);r!==-1&&n.actions.splice(r,1)}),jle=async(e,t,n)=>pn(e,r=>{r.actions||(r.actions=[]);const i=r.actions.findIndex(o=>o.name===t);i!==-1&&(r.actions[i].blueprint=n)}),Ale=async(e,t,n)=>pn(e,r=>{r.actions||(r.actions=[]);const i=r.actions.findIndex(o=>o.name===t);i!==-1&&(r.actions[i].description=n)}),Nle=async(e,t,n)=>pn(e,r=>{r.actions||(r.actions=[]);const i=r.actions.findIndex(o=>o.name===t);i!==-1&&(r.actions[i].name=n)}),Rle=({editsId:e,versionedResource:t})=>{var n;return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex flex-col gap-2",children:(n=t.data.actions)==null?void 0:n.map((r,i)=>c.jsxs("div",{className:"flex bg-neutral-700 rounded border border-neutral-600 p-3",children:[c.jsxs("div",{className:"flex flex-col flex-grow gap-1",children:[c.jsx("p",{children:r.name}),c.jsx("p",{children:r.description})]}),c.jsx(z5,{label:"Edit",onClick:()=>At("blueprint",({id:o})=>c.jsx(ei,{id:o,data:r.blueprint,onSave:s=>Ht(e,jle(t.data,r.name,s))})),options:[{label:"Rename",onClick:()=>At("edit-string",({id:o})=>c.jsx(ds,{id:o,title:"Edit Action Name",data:r.name,onSave:s=>Ht(e,Nle(t.data,r.name,s))}))},{label:"Change Description",onClick:()=>At("edit-string",({id:o})=>c.jsx(ds,{id:o,title:"Edit Action Description",data:r.description,onSave:s=>Ht(e,Ale(t.data,r.name,s))}))},{label:"delete",onClick:()=>At("confirm",({id:o})=>c.jsx(Ql,{id:o,title:"Delete Action",type:"danger",message:"Are you sure you want to delete this action?",onConfirm:()=>Ht(e,Cle(t.data,r.name))}))}]})]},i))}),c.jsx(au,{onClick:async()=>{await Ht(e,kle(t.data,"New Action"))}})]})},q5=({id:e,original:t,edits:n,edits_id:r})=>{const i=j.useCallback(()=>Hn(e),[e]);let o=nu();return c.jsxs(Wn,{isOpen:!0,onClose:i,children:[c.jsx(Vn,{title:"Save New Version",onClose:i}),c.jsxs(Un,{children:[c.jsx("p",{children:'All of your changes are saved to a hidden "edits" copy of this version as you make them. This only saves your changes to a new public copy so that characters can use them.'}),c.jsx("p",{children:"Are you sure you'd like to save your changes to a new version."})]}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"light",onClick:i,children:"Close"}),c.jsx(xt,{color:"primary",onClick:async()=>{const s=await dw(n);if(!s)return cn("Error creating new version from edits","error");if(!await DS(s.reference_type,s.reference_id,s.local_id,!1))return Wm(s.local_id,!0),cn("Error creating subscription to new version, cleaning up...","error");t?await dw(t,r,!0):cn("Error finding original??? Please open a ticket for this :).","error"),cn("Success Creating "),o("/library"),i()},children:"Confirm"})]})]})},Tle=()=>{const{id:e}=u1();nu();const t=j.useMemo(()=>e?"".concat(e,"|edits"):void 0,[e]),n=V5(e),r=Mn(t),i=_le(r==null?void 0:r.reference_id),o=sn.useValue();j.useEffect(()=>{if(!t||t===o.versionId)return;const l=(r==null?void 0:r.data.pages[0].name)||"",u=(r==null?void 0:r.data.creator[0].name)||"",d=(r==null?void 0:r.data.modals[0].name)||"";sn.set(f=>({...f,versionId:t,characterPage:l,creatorPage:u,modalsPage:d}))},[t,o,r]),j.useEffect(()=>{var d,f,h;let l=!1,u={characterPage:o.characterPage,creatorPage:o.creatorPage,modalsPage:o.modalsPage};r!=null&&r.data.pages.find(p=>p.name===o.characterPage)||(u.characterPage=((d=r==null?void 0:r.data.pages[0])==null?void 0:d.name)||"",l=!0),r!=null&&r.data.creator.find(p=>p.name===o.creatorPage)||(u.creatorPage=((f=r==null?void 0:r.data.creator[0])==null?void 0:f.name)||"",l=!0),r!=null&&r.data.modals.find(p=>p.name===o.modalsPage)||(u.modalsPage=((h=r==null?void 0:r.data.modals[0])==null?void 0:h.name)||"",l=!0),l&&sn.set(p=>({...p,...u}))},[o,r]);const s=j.useMemo(()=>({Container:Zs,Text:ea,Select:Um,TextInput:Vm,FAB:kc,Searchbar:Ec,DesignerDivider:Sc}),[Zs,ea,Um,Vm,kc,Ec,Sc]),a=l=>{r&&Ht(r.local_id,Zae(r.local_id,l.serialize()))};return t?n?r?i?c.jsx(Jne,{resolver:s,onNodesChange:a,children:c.jsxs("div",{className:"flex flex-col h-full overflow-y-scroll",children:[c.jsx(cs,{title:i.name,subtitle:"Version: ".concat(Io(n.local_id)),options:[{onClick:()=>At("save-new-version",({id:l})=>c.jsx(q5,{id:l,original:n,edits:r,edits_id:t})),Content:()=>c.jsx("p",{children:"Save Version"})}],hasSidebar:!0}),c.jsxs("div",{className:"p-4 sm:mr-64 relative flex flex-col flex-grow",children:[c.jsxs(ct,{id:"tab-selector",label:"",value:o.tab,onChange:gK,children:[c.jsx("option",{value:"character",children:"Character Schema"}),c.jsx("option",{value:"data",children:"System Data"}),c.jsx("option",{value:"types",children:"Data Types"}),c.jsx("option",{value:"functions",children:"Blueprints"}),c.jsx("option",{value:"editor",children:"Editor UI"}),c.jsx("option",{value:"creator",children:"Builder UI"}),c.jsx("option",{value:"modals",children:"Modals"}),c.jsx("option",{value:"actions",children:"Character Actions"})]}),o.tab==="character"?c.jsx(tle,{editsId:t,versionedResource:r}):o.tab==="data"?c.jsx(nle,{editsId:t,versionedResource:r}):o.tab==="types"?c.jsx(ile,{editsId:t,versionedResource:r}):o.tab==="functions"?c.jsx(dle,{versionedResource:r}):o.tab==="editor"?c.jsx(cle,{versionedResource:r}):o.tab==="creator"?c.jsx(wle,{versionedResource:r}):o.tab==="modals"?c.jsx(Ele,{versionedResource:r}):o.tab==="actions"&&c.jsx(Rle,{editsId:t,versionedResource:r})]}),c.jsx(xle,{})]})}):c.jsx(c.Fragment,{children:"Loading System..."}):c.jsx(c.Fragment,{children:"Loading Edits..."}):c.jsx(c.Fragment,{children:"Loading Original..."}):c.jsx(c.Fragment,{children:"id not defined..."})},K5=ra([{name:"BardsBallad",light:{background:"#121217",brand:{50:"#fcf9f0",100:"#f9f2db",200:"#f2e1b6",300:"#eacc87",400:"#e3b667",500:"#d99736",600:"#cb802b",700:"#a86426",800:"#875025",900:"#6d4221",950:"#3b210f"},neutral:{50:"#f8f9fb",100:"#f0f1f5",200:"#d9dbe3",300:"#babdcf",400:"#9499b3",500:"#6e7499",600:"#575e7f",700:"#464d66",800:"#393d50",900:"#2e3240",950:"#191c27"},orange:{50:"#fff7eb",100:"#ffe9c6",200:"#ffcd87",300:"#ffac4a",400:"#ff8a16",500:"#e67300",600:"#c35e00",700:"#9e4c00",800:"#7a3b00",900:"#5e2f00",950:"#351a00"},red:{50:"#fff5f5",100:"#ffe5e5",200:"#ffbdbd",300:"#ff8f8f",400:"#ff5c5c",500:"#ff3030",600:"#e52626",700:"#b31f1f",800:"#8c1919",900:"#6a1414",950:"#410d0d"},blue:{50:"#f3faff",100:"#e2f3ff",200:"#bce1ff",300:"#82cbff",400:"#41b2ff",500:"#1f93e6",600:"#166eb3",700:"#125892",800:"#0f4776",900:"#0d3a5e",950:"#07233b"},green:{50:"#f3fcf5",100:"#e4f8e8",200:"#c3edcb",300:"#92d8a4",400:"#57be75",500:"#35a257",600:"#298548",700:"#236e3b",800:"#1c552f",900:"#164429",950:"#0b2617"}}},{name:"ValentinesDay",light:{background:"#442835",brand:{50:"#fff7f9",100:"#ffeef2",200:"#fed7e2",300:"#fbb6ce",400:"#f687b3",500:"#ed64a6",600:"#d53f8c",700:"#b83280",800:"#97266d",900:"#702459",950:"#521640"},neutral:{50:"#fdf7f9",100:"#faf0f3",200:"#f4d9e1",300:"#e8b8ca",400:"#d68aa8",500:"#b76d89",600:"#91536b",700:"#734256",800:"#5b3544",900:"#442835",950:"#2b1821"},orange:{50:"#fff8f1",100:"#ffe8d8",200:"#ffd0ae",300:"#ffaf7e",400:"#ff8552",500:"#f75e28",600:"#d9471a",700:"#b43716",800:"#8c2c13",900:"#6c2311",950:"#3e1409"},red:{50:"#fff5f5",100:"#ffe3e3",200:"#ffbaba",300:"#ff8989",400:"#ff5c5c",500:"#fc2626",600:"#d21f1f",700:"#aa1919",800:"#851515",900:"#661010",950:"#400909"},blue:{50:"#f5f8ff",100:"#ebf2ff",200:"#cbdcff",300:"#a2bfff",400:"#799fff",500:"#567dff",600:"#455fd4",700:"#394aa9",800:"#303b85",900:"#262e66",950:"#171a40"},green:{50:"#f5fdf7",100:"#e7f8eb",200:"#c6edcf",300:"#95dca7",400:"#5fc67d",500:"#3ca75e",600:"#2e8749",700:"#266e3d",800:"#205530",900:"#1a4226",950:"#0d2615"}}}]),Ile=()=>{let e=document.createElement("script");e.id="eruda-script",e.src="https://cdn.jsdelivr.net/npm/eruda",document.body.append(e),e.onload=()=>{eruda.init()}},Ple=()=>{const e=document.getElementById("eruda-script");e&&(eruda.destroy(),e.remove())},$h=ra({theme:"BardsBallad",scheme:"dark",isErudaActive:!1},{onSet:(e,t)=>{_3.set("settings",e),t.isErudaActive&&!e.isErudaActive?Ple():!t.isErudaActive&&e.isErudaActive&&Ile(),(e.theme!==t.theme||e.scheme!==t.scheme)&&G5()}}),Ole=async()=>{const e=await _3.get("settings");e&&$h.set(e)};Ole();const $le=e=>{$h.set(t=>({...t,isErudaActive:e}))},Mle=e=>{$h.set(t=>({...t,theme:e}))},G5=()=>{const e=K5.get(),t=$h.get(),n=e.find(r=>r.name===t.theme);if(n){document.documentElement.style.setProperty("--background",n.light.background);for(let r in n.light.brand)document.documentElement.style.setProperty("--brand-".concat(r),n.light.brand[r]);for(let r in n.light.neutral)document.documentElement.style.setProperty("--neutral-".concat(r),n.light.neutral[r]);for(let r in n.light.orange)document.documentElement.style.setProperty("--orange-".concat(r),n.light.orange[r]);for(let r in n.light.red)document.documentElement.style.setProperty("--red-".concat(r),n.light.red[r]);for(let r in n.light.blue)document.documentElement.style.setProperty("--blue-".concat(r),n.light.blue[r]);for(let r in n.light.green)document.documentElement.style.setProperty("--green-".concat(r),n.light.green[r])}},ci={FREE:1,PREMIUM:4,AMBASSADOR:8,DEVELOPER:16,ADMINISTRATOR:32};function di(e,t){return(e&t)===t}function ON(e){if(di(e,ci.FREE))return"Free";if(di(e,ci.PREMIUM))return"Premium";if(di(e,ci.AMBASSADOR))return"Ambassador";if(di(e,ci.DEVELOPER))return"Developer";if(di(e,ci.ADMINISTRATOR))return"Admin"}const Dle=()=>c.jsx("p",{children:"No tab found for this id."}),Lle=({tabs:e,props:t})=>{var i;const[n,r]=j.useState(e[0].id);return c.jsxs("div",{className:"w-full mt-5",children:[c.jsx("div",{className:"flex space-x-2 border-b border-neutral-700",children:e.map(o=>c.jsx("button",{onClick:()=>{r(o.id)},className:"py-2 px-4 text-sm font-medium transition-colors border-fantasy-accent ".concat(n===o.id?"border-b-2 text-fantasy-accent":"text-fantasy-text-muted hover:text-fantasy-accent"),children:o.label},o.id))}),c.jsx("div",{className:"p-4",children:((i=e.find(o=>o.id===n))==null?void 0:i.Content(t))||c.jsx(Dle,{})})]})},Fle=async()=>await An.get("/stripe/create-checkout-session").then(e=>e.data),Ble=async()=>await An.get("/stripe/create-portal-session").then(e=>e.data),zle=async()=>{Lr.clear(),hn.clear(),rr.set({isLoggedIn:!1,user:null,synced_characters:[]}),await Promise.all(et.tables.map(e=>e.clear()))},Hle=async()=>{hn.clear(),await Promise.all(et.tables.map(e=>e.clear()))},Wle=async()=>{const t=(await An.get("/discord/getLoginLink")).data;if(!t)return cn("No url in login link response?","error");window.open(t,"_self")},Ule=[{id:"profile",label:"Profile",Content:({isLoggedIn:e,user:t})=>c.jsx("div",{className:"max-w-5xl mx-auto",children:e&&t?c.jsxs("div",{className:"my-2 flex flex-col gap-4 lg:grid lg:grid-cols-2 rtl:space-x-reverse flex-wrap",children:[c.jsx("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-neutral-500 border",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:t.username[0]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:t.username}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[c.jsx("span",{children:t.email}),c.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:ON(t.role)})]})]})]})}),c.jsxs("div",{className:"flex flex-col w-full bg-fantasy-dark p-4 rounded-lg border-fantasy-border border",children:[c.jsx("p",{className:"text-lg",children:"Subscription"}),c.jsxs("p",{className:"mb-4",children:["Current Tier: ",ON(t.role)]}),c.jsx(xt,{color:"primary",onClick:async()=>{let n="";const r=di(t.role,ci.PREMIUM),i=di(t.role,ci.FREE)||di(t.role,ci.PREMIUM);if(i&&!r){const{url:o}=await Fle();n=o}else if(i&&r){const{url:o}=await Ble();n=o}window.open(n,"_self")},children:di(t.role,ci.FREE)?"Subscribe":di(t.role,ci.PREMIUM)?"Manage Subscription":"Thank you for everything!"})]}),!t.discord_id&&c.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-indigo-500 border",children:[c.jsx("p",{className:"text-lg",children:"Discord Integration"}),c.jsx("p",{className:"mb-4",children:"Link your Discord account to access additional features"}),c.jsx(xt,{color:"primary",onClick:Wle,children:"Connect Discord Account"})]}),c.jsxs("div",{className:"flex flex-col w-full bg-neutral-800 p-4 rounded-lg border-red-500 border",children:[c.jsx("p",{className:"text-lg",children:"Danger Zone"}),c.jsx("p",{className:"mb-4 text-red-500",children:"All local data is cleared (unsynced data will be lost)"}),c.jsx(xt,{color:"danger",onClick:()=>At("confirm",({id:n})=>c.jsx(Ql,{id:n,title:"Logout",type:"danger",message:"All local data is cleared (unsynced data will be lost)",onConfirm:zle})),children:"Logout"})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[c.jsx("p",{className:"text-lg",children:"You are not logged in"}),c.jsx("p",{className:"mb-4",children:"Login to access your profile"}),c.jsx(xt,{color:"light",onClick:()=>At("auth",({id:n})=>c.jsx(dI,{id:n})),children:"Login / Register"})]})})},{id:"general",label:"General",Content:({settings:e,themes:t})=>c.jsx(ct,{id:"theme",label:"Theme",value:e.theme,onChange:Mle,children:t.map(n=>c.jsx("option",{value:n.name,children:n.name}))})},{id:"developer",label:"Developer",Content:({settings:e})=>c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"my-2",children:[c.jsx("a",{className:"underline",href:"https://eruda.liriliri.io/",target:"_blank",children:"Eruda"})," allows access to the development console on mobile."]}),c.jsx(tr,{id:"use-eruda",label:"Load Eruda",checked:e.isErudaActive,onChange:$le}),c.jsx("p",{className:"my-2",children:"Clear Local Storage"}),c.jsx(xt,{color:"danger",onClick:Hle,children:"Clear Local Storage"})]})}],Vle=()=>{const e=K5.useValue(),t=$h.useValue(),{isLoggedIn:n,user:r}=rr.useValue();return c.jsxs("div",{children:[c.jsx(cs,{title:"Settings"}),c.jsx(Lle,{tabs:Ule,props:{themes:e,settings:t,isLoggedIn:n,user:r}})]})},qle=async()=>{const e=await An.get("/stripe/sync-stripe-data"),{newAccessToken:t}=e.data;t&&py(t)},Kle=()=>{const e=nu(),t=()=>{e("/settings")};return j.useEffect(()=>{qle()},[]),c.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[c.jsx("h1",{children:"Subscription Successful!"}),c.jsx("p",{children:"Thank you for subscribing to Bard's Ballad. Your subscription was processed successfully."}),c.jsx("p",{children:"We hope you enjoy all the premium features and content!"}),c.jsx("button",{onClick:t,style:{marginTop:"1rem",padding:"0.5rem 1rem",fontSize:"1rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Back to Settings"})]})},KS=ra({isOnline:navigator.onLine}),yv=e=>KS.set(t=>({...t,isOnline:e})),Gle=j.createContext({}),Yle=()=>j.useContext(Gle),Xle=async()=>{try{return(await An.get("/marketplace")).data}catch(e){return[]}},Jle=async e=>{try{return(await An.get("/marketplace/".concat(e,"/versions"))).data}catch(t){return[]}},Qle=async e=>{try{return(await An.get("/marketplace/subscribe/".concat(e))).data}catch(t){return null}},Zle=async e=>{try{if(await et.systems.get(e.local_id))return null;const t=zy.safeParse(e);return t.success?(await et.systems.add(e),e):(console.log("Invalid system data:",t.error.format()),null)}catch(t){return console.log("Error saving system:",t),null}},eue=async e=>{try{if(await et.versions.get(e.local_id))return null;const t=Ih.safeParse(e);return t.success?(await et.versions.add(e),e):(console.log("Invalid version data:",t.error.format()),null)}catch(t){return console.log("Error saving version:",t),null}},tue=({id:e,data:t,title:n="Item Name"})=>{const[r,i]=j.useState([]),[o,s]=j.useState(!0),[a,l]=j.useState(r[0]),[u,d]=j.useState(!1);j.useEffect(()=>{(async()=>{if(!t)return i([]);const p=await Jle(t.resource_id);i(p),l(p[0])})()},[]);const f=j.useCallback(()=>Hn(e),[e]);return t?c.jsxs(Wn,{isOpen:!0,onClose:f,children:[c.jsx(Vn,{title:"Install System",onClose:f}),c.jsxs(Un,{children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h4",{className:"text-fantasy-accent font-medium text-2xl",children:t.name}),c.jsx("p",{className:"text-sm text-fantasy-text-muted mt-1",children:"Compatible with 0.0.1"})]}),c.jsxs("div",{className:"p-6 text-center fantasy-card-gradient text-fantasy-text border border-white/10 rounded-lg transition-all duration-300 hover:bg-white/20",children:[c.jsx("p",{children:t.description}),c.jsxs("div",{className:"flex flex-wrap gap-3 justify-center mt-2",children:[c.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Advanced Character Sheets"}),c.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Automated Dice Rolling"}),c.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Spell Compendium"}),c.jsx("span",{className:"bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:" Combat Tracker"})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg",children:"Supported Datapacks"}),c.jsx("div",{className:"flex gap-6 overflow-x-auto py-4",children:[1,2,3,4,5,6,7,8,9,10].map(()=>c.jsx("div",{className:"fantasy-card-gradient border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-fantasy-border rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-xl font-bold text-fantasy-text",children:"T"})}),c.jsx("div",{className:"w-32",children:c.jsx("div",{className:"text-lg font-semibold text-fantasy-text",children:"Test Pack"})})]})})}))})]}),c.jsx("div",{className:"flex items-center justify-center w-full",children:c.jsx("div",{className:"flex flex-row justify-center gap-2",children:r.length?c.jsxs(c.Fragment,{children:[c.jsx(tr,{id:"auto-update",label:"Auto Update",checked:o,onChange:s}),c.jsx(Th,{label:Io(a.item_id),options:r.map(h=>({label:Io(h.item_id),onClick:()=>l(h)}))})]}):c.jsx("p",{children:"loading versions..."})})})]}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"light",onClick:f,children:"Cancel"}),c.jsx(xt,{color:"primary",onClick:async()=>{try{d(!0);const{baseData:h,versionData:p}=await Qle(a.item_id);if(!h||!p)return cn("Failed to fetch item data.","error");const v=await Zle(h);if(!v)return cn("Failed to create system.","error");const y=await eue(p);if(!y)return cn("Failed to create version.","error");if(!await uu(y.local_id,y.data.types.map(Ph)))return cn("Error creating hashes for forked content, cleaning up...","error");if(!await DS("system",v.local_id,y.local_id,!1))return cn("Failed to create subscription.","error");cn("Subscription created!","success")}catch(h){console.error("Error creating subscription: ".concat(h)),cn("Error creating subscription","error")}d(!1)},children:"Install"})]})]}):null},nue=({onAccept:e})=>c.jsxs(Wn,{isOpen:!0,children:[c.jsx(Vn,{title:"Disclaimer"}),c.jsxs(Un,{children:[c.jsx("p",{children:"BardsBallad is a system-agnostic character manager that supports a wide variety of user-created and open-license game systems"}),c.jsx("br",{}),c.jsx("p",{children:"Some content may be based on systems originally published under the ORC License, Creative Commons (CC-BY 4.0), or other open licenses. All such content is provided either by BardsBallad or individual users in compliance with their respective licenses."}),c.jsx("br",{}),c.jsx("p",{children:"BardsBallad is not affiliated with or endorsed by Paizo Inc., Wizards of the Coast, or any other publishers. Names like Pathfinder, Starfinder, or Dungeons & Dragons are trademarks of their respective owners and are only used to indicate compatibility where appropriate."}),c.jsx("br",{}),c.jsx("p",{children:"Users are solely responsible for the legality of content they upload or share. Please do not upload copyrighted material or publisher-owned setting content (such as Golarion or the Forgotten Realms) unless you have the appropriate rights."})]}),c.jsx(Xn,{children:c.jsx(xt,{color:"primary",onClick:e,children:"I Understand"})})]}),rue=async e=>{try{return(await An.get("/marketplace/".concat(e))).data}catch(t){return null}},iue=async e=>{try{const t=await An.post("/marketplace",e);return t.status===200?{}:{error:t.data}}catch(t){return{error:"Error occured during publish"}}},oue=async(e,t)=>{try{const n=await An.post("/marketplace/".concat(e,"/versions"),t);return n.status===200?{}:{error:n.data}}catch(n){return{error:"Error occured during publishing new version"}}},sue=({id:e})=>{const{subscriptions:t,isLoading:n}=gv(),[r,i]=j.useState("system"),[o,s]=j.useState(t==null?void 0:t.find(m=>m.type==="system")),[a,l]=j.useState(o==null?void 0:o.versions[0]),[u,d]=j.useState(""),[f,h]=j.useState(!0),[p,v]=j.useState(!0),[{isPublishing:y,error:w},x]=j.useState({isPublishing:!1,error:""});j.useEffect(()=>{if(!t)return;const m=t==null?void 0:t.find(S=>S.type===r);s(m),l(m==null?void 0:m.versions[0])},[t,r]),j.useEffect(()=>{(async()=>{if(!o)return;if(!await rue(o==null?void 0:o.item_id))return v(!0);v(!1)})()},[o]);const b=j.useCallback(()=>Hn(e),[e]);return c.jsxs(Wn,{isOpen:!0,onClose:b,children:[c.jsx(Vn,{title:p?"Publish new Item":"Publish new version",onClose:b}),c.jsx(Un,{children:n||!t||!o||!a?c.jsx("p",{children:"Loading..."}):y||w?c.jsx("div",{children:y?c.jsx("p",{children:"Publishing..."}):c.jsx("p",{children:w})}):c.jsxs(c.Fragment,{children:[c.jsxs(ct,{id:"type-to-publish",label:"Item Type",value:r,onChange:i,children:[c.jsx("option",{value:"system",children:"System"}),c.jsx("option",{value:"datapack",children:"Datapack"})]}),c.jsx(ct,{id:"item-to-publish",label:"System",value:o==null?void 0:o.item_id,onChange:m=>s(t.find(S=>S.item_id===m)),children:t.filter(m=>m.type===r).map(m=>c.jsx("option",{value:m.item_id,children:m.item.name},m.item_id))}),c.jsx(A1,{id:"description",label:p?"Description":"Changelog",value:u,onChange:d}),p&&c.jsx(tr,{id:"is-public",label:"Is public?",checked:f,onChange:h}),c.jsx(ct,{id:"version-to-publish",label:"Version",value:a==null?void 0:a.local_id,onChange:m=>l(o.versions.find(S=>S.local_id===m)),children:o.versions.map(m=>c.jsx("option",{value:m.local_id,children:Io(m.local_id)},m.local_id))})]})}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"light",onClick:b,children:"Close"}),c.jsx(xt,{color:"primary",disabled:!o||!a,onClick:async()=>{x({isPublishing:!0,error:""});let m="";switch(p){case!0:const{error:S}=await iue({item:o.item,version:a,description:u,resource_type:r,is_public:f});S&&(m=S);break;case!1:const{error:E}=await oue(o.item_id,{item_id:o.item_id,version:a,changelog:u});E&&(m=E);break}m&&x({isPublishing:!1,error:m}),b()},children:"Publish"})]})]})},Dx=({item:e})=>{const{addToast:t}=Yle();return c.jsx("div",{className:"fantasy-card-gradient border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",onClick:()=>At("view marketplace item",({id:n})=>c.jsx(tue,{id:n,title:e.name,data:e})),children:c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-fantasy-border rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-xl font-bold text-white",children:e.name[0]})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:e.name}),c.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[e.creator_username," | Version ",Io(e.version)]})]})]})},e.name)},aue=()=>{const[e,t]=j.useState([]),{isLoggedIn:n}=rr.useValue(),{isOnline:r}=KS.useValue();return j.useEffect(()=>{if(!r)return t([]);(async()=>{const o=await Xle();t(o)})()},[r]),j.useEffect(()=>{(async()=>{await Zd.get("seen-marketplace-disclaimer")||At("marketplace-disclaimer",({id:s})=>c.jsx(nue,{onAccept:()=>{Hn(s),Zd.set("seen-marketplace-disclaimer",!0)}}))})()},[]),r?c.jsxs("div",{children:[c.jsx(cs,{title:"Marketplace",subtitle:"Discover amazing systems, themes, and content created by the community"}),c.jsxs("div",{className:"px-4 pb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-semibold mt-4",children:"Browse Categories"}),c.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:[" Game Systems (40)"," Datapacks (100+)"," Themes (32)"].map(i=>c.jsx("span",{className:"cursor-pointer bg-gradient-to-br from-fantasy-accent/20 to-fantasy-accent-dark/10 border border-fantasy-accent/30 rounded-xl px-4 py-2 text-sm leading-relaxed",children:i},i))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-semibold mt-4 mb-2",children:"Featured Systems"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter(i=>i.resource_type==="system").map((i,o)=>c.jsx(Dx,{item:i},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-semibold mt-4",children:"Featured Datapacks"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter(i=>i.resource_type==="datapack").map((i,o)=>c.jsx(Dx,{item:i},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-3xl font-semibold mt-4",children:"Featured Themes"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.filter(i=>i.resource_type==="datapack").map((i,o)=>c.jsx(Dx,{item:i},o))})]})]}),n&&c.jsx(au,{onClick:()=>At("publish-item",({id:i})=>c.jsx(sue,{id:i}))})]}):c.jsxs("div",{className:"h-full",children:[c.jsx(cs,{title:"Marketplace"}),c.jsx("div",{className:"flex justify-center items-center p-4",children:c.jsx("h2",{className:"text-3xl",children:"Marketplace is not available while you're offline!"})})]})};function lue(e){return oo(()=>et.datapacks.get(e||""),[e])}const uue=()=>{const{id:e}=u1(),t=j.useMemo(()=>e?"".concat(e,"|edits"):void 0,[e]),n=V5(e),r=Mn(t),i=lue(r==null?void 0:r.reference_id);return t?n?r?i?c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsx(cs,{title:i.name,options:[{onClick:()=>At("save-new-version",({id:o})=>c.jsx(q5,{id:o,original:n,edits:r,edits_id:t})),Content:()=>c.jsx("p",{className:"block cursor-pointer py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 md:dark:text-blue-500",children:"Save Version"})}]}),c.jsx("div",{className:"p-4 relative flex flex-col flex-grow",children:c.jsx("div",{className:"flex flex-col gap-1",children:r.data.packData.map(o=>c.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>At("edit-pack-data",({id:s})=>c.jsx(LS,{id:s,types:r.data.types,onSave:a=>Ht(t,pn(r.data,l=>{const u=l.packData.findIndex(d=>d.name===o.name);u!==-1&&(o.name!==a.name?(l.packData.splice(u,1),l.packData.push(a)):l.packData[u]=a)})),data:o})),children:c.jsxs("p",{children:[o.name," - ",o.typeData.type," ",o.typeData.isArray?"(Array)":""]})},o.name))})})]}):c.jsx(c.Fragment,{children:"Loading System..."}):c.jsx(c.Fragment,{children:"Loading Edits..."}):c.jsx(c.Fragment,{children:"Loading Original"}):c.jsx(c.Fragment,{children:"id not defined..."})},qm=(e,t=7)=>{const n=new Date;return n.setDate(n.getDate()-t),new Date(e)<n};function cue(){const e=oo(()=>et.subscriptions.toArray(),[]);return{subscriptions:(e==null?void 0:e.filter(n=>n.deleted_at&&!qm(n.deleted_at,10)))||[],isLoading:e===void 0}}const due=e=>{for(let t in e)return!1;return!0};function fue(){const e=oo(async()=>{const n=(await et.characters.toArray()).filter(r=>r.deleted_at&&!due(r.data)&&!qm(r.deleted_at,10));return n.sort((r,i)=>{if(!r||!i)return 0;const o=new Date(r.deleted_at),s=new Date(i.deleted_at);return o>s?-1:1}),n},[]);return{characters:e||[],isLoading:e===void 0}}const Y5=async e=>{try{let t=await hn.get("updated_characters")||[];return t.includes(e)||await hn.set("updated_characters",[...t,e]),await et.characters.update(e,{data:{},updated_at:new Date().toISOString()})}catch(t){console.log("Error clearing character:",t)}},hue=async e=>{try{let t=await hn.get("updated_characters")||[];return t.includes(e)||await hn.set("updated_characters",[...t,e]),await et.characters.update(e,{deleted_at:void 0,updated_at:new Date().toISOString()})}catch(t){console.log("Error reviving character:",t)}},pue=async e=>{try{const t=new Date;return t.setDate(t.getDate()-11),await et.subscriptions.update(e,{deleted_at:t.toISOString(),updated_at:new Date().toISOString()})}catch(t){console.log("Error clearing subscription:",t)}},gue=async e=>{try{return await et.subscriptions.update(e,{deleted_at:void 0,updated_at:new Date().toISOString()})}catch(t){console.log("Error reviving subscription:",t)}},mue=({sub:e})=>{const t=oo(()=>D5(e.resource_type,e.resource_id),[e]);return t?c.jsxs("div",{className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:t.name[0]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:t.name}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[c.jsxs("span",{children:[" ",e.resource_type]}),c.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:Io(e.version_id)})]})]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsxs("button",{className:"flex-1 fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>gue(e.local_id),children:["Revive ",e.resource_type]}),c.jsx(Th,{label:"",options:[{label:"export",onClick:()=>uh(e.resource_type,t,"".concat(t.name,"-export"))},{label:"force delete",onClick:()=>At("confirm",({id:n})=>c.jsx(Ql,{id:n,title:"Force Delete ".concat(e.resource_type),type:"danger",message:"Are you sure you want to force delete this ".concat(e.resource_type,"?"),onConfirm:()=>pue(e.local_id)}))}]})]})]},e.local_id):c.jsx("p",{children:"loading"})},yue=()=>{const{subscriptions:e,isLoading:t}=cue(),{characters:n,isLoading:r}=fue();return c.jsxs("div",{children:[c.jsx(cs,{title:"The Catacombs",subtitle:"Items permanently removed after 7 days"}),c.jsxs("div",{className:"px-4 pb-4",children:[c.jsx("div",{className:"mb-5",children:c.jsx(hS,{placeholder:"Search Catacombs...",onSearch:()=>{},filters:[{title:"systems",property:"type",value:"system"},{title:"datapacks",property:"type",value:"datapack"},{title:"themes",property:"type",value:"theme"}]})}),t||r?c.jsx("h5",{className:"mb-4 text-xl",children:"Loading..."}):c.jsx("h5",{className:"flex flex-col gap-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[n.map((i,o)=>c.jsxs("div",{style:{zIndex:"".concat(n.length-o)},className:"fantasy-card-gradient card-top-border border border-fantasy-border rounded-2xl p-6 cursor-pointer transition-all duration-500 backdrop-blur-lg shadow-2xl hover:-translate-y-2 hover:shadow-fantasy-accent/20 hover:shadow-xl hover:border-fantasy-accent/40 relative",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-12 h-12 fantasy-accent-gradient rounded-xl flex items-center justify-center text-xl font-bold text-fantasy-dark mr-4 shadow-lg shadow-fantasy-accent/30",children:i.name[0]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-fantasy-text mb-1",children:i.name}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-fantasy-accent/70",children:[c.jsx("span",{children:" Ranger"}),c.jsx("span",{className:"bg-fantasy-accent/20 px-1.5 py-0.5 rounded text-[10px]",children:Io(i.system.local_id)})]})]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{className:"flex-1 fantasy-accent-gradient text-fantasy-dark px-4 py-2 rounded-lg text-xs font-medium transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-fantasy-accent/40",onClick:()=>hue(i.local_id),children:"Revive Adventurer"}),c.jsx(Th,{label:"",options:[{label:"export",onClick:()=>uh("character",i,"".concat(i.name,"-export"))},{label:"force delete",onClick:()=>At("confirm",({id:s})=>c.jsx(Ql,{id:s,title:"Force Delete Character",type:"danger",message:"Are you sure you want to force delete this character?",onConfirm:()=>Y5(i.local_id)}))}]})]})]},i.local_id)),e.map(i=>c.jsx(mue,{sub:i}))]})})]})]})},GS=async()=>{try{return(await An.get("/ping")).status===200}catch(e){return!1}},vue=async e=>await An.post("/systems/push",e).then(t=>t.data),xue=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await An.get("/systems/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},$N="system-checkpoint",bue=async()=>{const e=await hn.get($N),{checkpoint:t,documents:n}=await xue(e,20);return await hn.set($N,t),n},wue=async()=>{const e=await et.systems.toArray(),t=await et.characters.toArray(),n=Mc(await Lr.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await hn.get("synced_characters")||[],i=di(n.role,ci.PREMIUM),o=e.filter(s=>{if(!(s.user_id===n.id))return!1;const u=t.find(f=>f.system.local_id===s.local_id&&r.includes(f.local_id))!==void 0,d=!s.id&&i;return u||d});return await vue(o)},_ue=e=>et.systems.bulkPut(e),Sue=()=>et.systems.toArray(),Eue=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await An.get("/versions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},kue=async e=>await An.post("/versions/push",e).then(t=>t.data),MN="version-checkpoint",Cue=async()=>{const e=await hn.get(MN),{checkpoint:t,documents:n}=await Eue(e,20);return await hn.set(MN,t),n},jue=async()=>{const e=await et.versions.toArray(),t=await et.characters.toArray(),n=Mc(await Lr.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await hn.get("synced_characters")||[],i=di(n.role,ci.PREMIUM),o=e.filter(s=>{if(!(s.user_id===n.id))return!1;const u=t.find(f=>f.system.version_id===s.local_id&&r.includes(f.local_id))!==void 0,d=!s.id&&i;return u||d});return await kue(o)},Aue=e=>et.versions.bulkPut(e),Nue=()=>et.versions.toArray(),Rue=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await An.get("/characters/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},Tue=async e=>await An.post("/characters/push",e).then(t=>t.data),DN="character-checkpoint",Iue=async()=>{const e=await hn.get(DN),{checkpoint:t,documents:n}=await Rue(e,20);return await hn.set(DN,t),n},Pue=async()=>{const e=await et.characters.toArray(),t=Mc(await Lr.get("token"));if(!t)return{conflicts:[],metadata:[]};const n=di(t.role,ci.PREMIUM),r=await hn.get("updated_characters")||[],i=await hn.get("synced_characters")||[],o=e.filter(s=>{const a=i.includes(s.local_id),l=r.includes(s.local_id);return n&&l?!0:a&&l});return await Tue(o)},Oue=e=>et.characters.bulkPut(e),$ue=()=>et.characters.toArray(),Mue=async e=>await An.post("/subscriptions/push",e).then(t=>t.data),Due=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await An.get("/subscriptions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},LN="subscription-checkpoint",Lue=async()=>{const e=await hn.get(LN),{checkpoint:t,documents:n}=await Due(e,20);return await hn.set(LN,t),n},Fue=async()=>{const e=await et.subscriptions.toArray(),t=await et.characters.toArray(),n=Mc(await Lr.get("token"));if(!n)return{conflicts:[],metadata:[]};const r=await hn.get("synced_characters")||[],i=di(n.role,ci.PREMIUM),o=e.filter(s=>{if(!(s.user_id===n.id))return!1;const u=t.find(f=>{const h=f.system.version_id===s.version_id&&f.system.local_id===s.resource_id,p=r.includes(f.local_id);return h&&p})!==void 0,d=!s.id&&i;return u||d});return await Mue(o)},Bue=e=>et.subscriptions.bulkPut(e),zue=()=>et.subscriptions.toArray(),Hue=({id:e,data:t,onSave:n})=>{const[r,i]=j.useState(0),[o,s]=j.useState(t[0]),[a,l]=j.useState([]),u=j.useCallback(()=>Hn(e),[e]),d=(f,h)=>{const p=[...a,{...f,version:h.version,updated_at:new Date().toISOString()}];l(p);const v=r+1;v>=t.length?(n(p),u()):(i(v),s(t[v]))};return c.jsxs(Wn,{isOpen:!0,children:[c.jsx(Vn,{title:"Conflicts for Local:".concat(o.local.name," / Remote:").concat(o.remote.name)}),c.jsx(Un,{className:"text-center",children:c.jsxs("div",{className:"p-4",children:[c.jsx("p",{className:"text-lg font-medium mb-2",children:"Local"}),c.jsxs("p",{children:["Version: ",o.local.version]}),c.jsxs("p",{children:["Updated: ",new Date(o.local.updated_at).toString()]}),c.jsx("p",{className:"text-lg font-medium mb-2",children:"Remote"}),c.jsxs("p",{children:["Version: ",o.remote.version]}),c.jsxs("p",{children:["Updated: ",new Date(o.remote.updated_at).toString()]})]})}),c.jsxs(Xn,{children:[c.jsx(xt,{color:"light",onClick:()=>d(o.local,o.remote),children:"Keep Local"}),c.jsx(xt,{color:"primary",onClick:()=>d(o.remote,o.remote),children:"Keep Remote"})]})]})},Wue=10,FN=[{name:"Subscriptions",get:zue,bulkPut:Bue,pull:Lue,push:Fue},{name:"Systems",get:Sue,bulkPut:_ue,pull:bue,push:wue},{name:"Versions",get:Nue,bulkPut:Aue,pull:Cue,push:jue},{name:"Characters",get:$ue,bulkPut:Oue,pull:Iue,push:Pue}];GS().then(e=>{yv(e)});async function X5(e){return e.length===0?[]:new Promise(t=>{At("handle-conflicts",({id:n})=>Tt.createElement(Hue,{id:n,data:e,onSave:t}))})}async function Uue(e,t,n){let r=!0;for(;r;){const i=await t();i.length<Wue&&(r=!1);const o=i.flatMap(l=>{const u=n.find(v=>v.local_id===l.local_id);if(!u)return[];const d=new Date(u.updated_at).getTime(),f=new Date(l.updated_at).getTime(),h=u.version!==l.version,p=d>=f;return h&&p?{local:u,remote:l}:[]}),s=await X5(o),a=i.map(l=>s.find(u=>u.local_id===l.local_id)||l);await e(a)}}async function Vue(e,t,n){let r=!0;for(;r;){const{conflicts:i,metadata:o}=await t(),s=o.map(u=>({...n.find(f=>f.local_id===u.local_id),...u}));if(await e(s),i.length===0){r=!1;return}const a=i.flatMap(u=>{const d=n.find(f=>f.local_id===u.local_id);return d?{local:d,remote:u}:[]}),l=await X5(a);await e(l)}}const J5=async()=>{const{isOnline:e}=KS.get(),{isLoggedIn:t}=rr.get();if(!e||!t)return;const n=await hn.get("synced_characters")||[];await L5(n);for(let i=0;i<FN.length;i++){const o=FN[i];await Uue(o.bulkPut,o.pull,await o.get()),await Vue(o.bulkPut,o.push,await o.get())}(await et.versions.toArray()).forEach(i=>{uu(i.local_id,i.data.types.map(Ph))})};window.addEventListener("online",async()=>{console.log("online");const e=await GS();yv(e),e||console.log("not connected"),J5()});window.addEventListener("offline",()=>{console.log("offline"),yv(!1)});const que=30*1e3,Kue=()=>{const e=j.useRef(null),t=j.useRef(!1),n=j.useCallback(async()=>{if(!t.current){t.current=!0;try{const r=await GS(),{isLoggedIn:i}=rr.get();yv(r),r&&i&&await J5()}catch(r){console.error("Error in sync",r)}finally{t.current=!1,e.current=setTimeout(n,que)}}},[]);j.useEffect(()=>(n(),()=>{t.current=!1,e.current&&(clearTimeout(e.current),e.current=null)}),[n])};G5();window.generateHashes=async()=>{(await et.versions.toArray()).forEach(t=>{uu(t.local_id,t.data.types.map(Ph))})};const Gue=()=>(Kue(),j.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh","".concat(t,"px"))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),j.useEffect(()=>{function e(){const n=document.createElement("div");n.className="particle",n.style.left=Math.random()*100+"%",n.style.animationDelay=Math.random()*8+"s",n.style.animationDuration=Math.random()*6+4+"s",document.getElementById("particleContainer").appendChild(n),setTimeout(()=>{n.remove()},18200)}const t=setInterval(e,2e3);for(let n=0;n<5;n++)setTimeout(e,n*400);return()=>clearInterval(t)},[]),j.useEffect(()=>{async function e(){const[n,r]=await Promise.all([et.characters.toArray(),et.subscriptions.toArray()]);n.forEach(i=>{const o=i.deleted_at,s=!i.data;!o||s||!qm(o,7)||Y5(i.local_id)}),r.forEach(i=>{const o=i.deleted_at;!o||!qm(o,7)||Wm(i.version_id)})}const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),c.jsx(mL,{children:c.jsx(q6,{children:c.jsxs(si,{path:"/",element:c.jsx(u7,{}),children:[c.jsx(si,{index:!0,element:c.jsx(h7,{})}),c.jsxs(si,{path:"characters",children:[c.jsx(si,{index:!0,element:c.jsx(Kse,{})}),c.jsx(si,{path:":id",element:c.jsx(Rae,{})})]}),c.jsx(si,{path:"marketplace",element:c.jsx(aue,{})}),c.jsxs(si,{path:"library",children:[c.jsx(si,{index:!0,element:c.jsx(qae,{})}),c.jsx(si,{path:"system/:id",element:c.jsx(Tle,{})}),c.jsx(si,{path:"datapack/:id",element:c.jsx(uue,{})})]}),c.jsx(si,{path:"garbage",element:c.jsx(yue,{})}),c.jsx(si,{path:"settings",element:c.jsx(Vle,{})}),c.jsx(si,{path:"subscription-confirmation",element:c.jsx(Kle,{})})]})})})),Yue={api_host:void 0},Xue=document.getElementById("root"),Jue=e3(Xue);Jue.render(c.jsx(Tt.StrictMode,{children:c.jsx(Coe,{apiKey:"",options:Yue,children:c.jsx(Gue,{})})}));export{C3 as W,Zue as __vite_legacy_guard};
