var G5=Object.defineProperty;var Y5=(e,t,n)=>t in e?G5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Io=(e,t,n)=>Y5(e,typeof t!="symbol"?t+"":t,n);function Coe(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Os(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lj={exports:{}},im={},Bj={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf=Symbol.for("react.element"),X5=Symbol.for("react.portal"),J5=Symbol.for("react.fragment"),Q5=Symbol.for("react.strict_mode"),Z5=Symbol.for("react.profiler"),eP=Symbol.for("react.provider"),tP=Symbol.for("react.context"),nP=Symbol.for("react.forward_ref"),rP=Symbol.for("react.suspense"),iP=Symbol.for("react.memo"),oP=Symbol.for("react.lazy"),L1=Symbol.iterator;function sP(e){return e===null||typeof e!="object"?null:(e=L1&&e[L1]||e["@@iterator"],typeof e=="function"?e:null)}var Fj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zj=Object.assign,Hj={};function Qu(e,t,n){this.props=e,this.context=t,this.refs=Hj,this.updater=n||Fj}Qu.prototype.isReactComponent={};Qu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uj(){}Uj.prototype=Qu.prototype;function o_(e,t,n){this.props=e,this.context=t,this.refs=Hj,this.updater=n||Fj}var s_=o_.prototype=new Uj;s_.constructor=o_;zj(s_,Qu.prototype);s_.isPureReactComponent=!0;var B1=Array.isArray,Wj=Object.prototype.hasOwnProperty,a_={current:null},Vj={key:!0,ref:!0,__self:!0,__source:!0};function qj(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Wj.call(t,r)&&!Vj.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Rf,type:e,key:o,ref:s,props:i,_owner:a_.current}}function aP(e,t){return{$$typeof:Rf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rf}function lP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var F1=/\/+/g;function Wy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lP(""+e.key):t.toString(36)}function ap(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Rf:case X5:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Wy(s,0):r,B1(i)?(n="",e!=null&&(n=e.replace(F1,"$&/")+"/"),ap(i,t,n,"",function(u){return u})):i!=null&&(l_(i)&&(i=aP(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(F1,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",B1(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+Wy(o,a);s+=ap(o,t,n,l,i)}else if(l=sP(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+Wy(o,a++),s+=ap(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function ph(e,t,n){if(e==null)return e;var r=[],i=0;return ap(e,r,"","",function(o){return t.call(n,o,i++)}),r}function uP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Jr={current:null},lp={transition:null},cP={ReactCurrentDispatcher:Jr,ReactCurrentBatchConfig:lp,ReactCurrentOwner:a_};function Kj(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:ph,forEach:function(e,t,n){ph(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ph(e,function(){t++}),t},toArray:function(e){return ph(e,function(t){return t})||[]},only:function(e){if(!l_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Gt.Component=Qu;Gt.Fragment=J5;Gt.Profiler=Z5;Gt.PureComponent=o_;Gt.StrictMode=Q5;Gt.Suspense=rP;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cP;Gt.act=Kj;Gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zj({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=a_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Wj.call(t,l)&&!Vj.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Rf,type:e.type,key:i,ref:o,props:r,_owner:s}};Gt.createContext=function(e){return e={$$typeof:tP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eP,_context:e},e.Consumer=e};Gt.createElement=qj;Gt.createFactory=function(e){var t=qj.bind(null,e);return t.type=e,t};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(e){return{$$typeof:nP,render:e}};Gt.isValidElement=l_;Gt.lazy=function(e){return{$$typeof:oP,_payload:{_status:-1,_result:e},_init:uP}};Gt.memo=function(e,t){return{$$typeof:iP,type:e,compare:t===void 0?null:t}};Gt.startTransition=function(e){var t=lp.transition;lp.transition={};try{e()}finally{lp.transition=t}};Gt.unstable_act=Kj;Gt.useCallback=function(e,t){return Jr.current.useCallback(e,t)};Gt.useContext=function(e){return Jr.current.useContext(e)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(e){return Jr.current.useDeferredValue(e)};Gt.useEffect=function(e,t){return Jr.current.useEffect(e,t)};Gt.useId=function(){return Jr.current.useId()};Gt.useImperativeHandle=function(e,t,n){return Jr.current.useImperativeHandle(e,t,n)};Gt.useInsertionEffect=function(e,t){return Jr.current.useInsertionEffect(e,t)};Gt.useLayoutEffect=function(e,t){return Jr.current.useLayoutEffect(e,t)};Gt.useMemo=function(e,t){return Jr.current.useMemo(e,t)};Gt.useReducer=function(e,t,n){return Jr.current.useReducer(e,t,n)};Gt.useRef=function(e){return Jr.current.useRef(e)};Gt.useState=function(e){return Jr.current.useState(e)};Gt.useSyncExternalStore=function(e,t,n){return Jr.current.useSyncExternalStore(e,t,n)};Gt.useTransition=function(){return Jr.current.useTransition()};Gt.version="18.3.1";Bj.exports=Gt;var R=Bj.exports;const It=Os(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dP=R,fP=Symbol.for("react.element"),hP=Symbol.for("react.fragment"),pP=Object.prototype.hasOwnProperty,gP=dP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mP={key:!0,ref:!0,__self:!0,__source:!0};function Gj(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)pP.call(t,r)&&!mP.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:fP,type:e,key:o,ref:s,props:i,_owner:gP.current}}im.Fragment=hP;im.jsx=Gj;im.jsxs=Gj;Lj.exports=im;var d=Lj.exports,Yj={exports:{}},Ri={},Xj={exports:{}},Jj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var $=z.length;z.push(V);e:for(;0<$;){var X=$-1>>>1,ue=z[X];if(0<i(ue,V))z[X]=V,z[$]=ue,$=X;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],$=z.pop();if($!==V){z[0]=$;e:for(var X=0,ue=z.length,ce=ue>>>1;X<ce;){var Ce=2*(X+1)-1,Pe=z[Ce],Me=Ce+1,B=z[Me];if(0>i(Pe,$))Me<ue&&0>i(B,Pe)?(z[X]=B,z[Me]=$,X=Me):(z[X]=Pe,z[Ce]=$,X=Ce);else if(Me<ue&&0>i(B,$))z[X]=B,z[Me]=$,X=Me;else break e}}return V}function i(z,V){var $=z.sortIndex-V.sortIndex;return $!==0?$:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,h=3,p=!1,b=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=z)r(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(u)}}function S(z){if(y=!1,w(z),!b)if(n(l)!==null)b=!0,Z(k);else{var V=n(u);V!==null&&oe(S,V.startTime-z)}}function k(z,V){b=!1,y&&(y=!1,m(P),P=-1),p=!0;var $=h;try{for(w(V),f=n(l);f!==null&&(!(f.expirationTime>V)||z&&!H());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var ue=X(f.expirationTime<=V);V=e.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(l)&&r(l),w(V)}else r(l);f=n(l)}if(f!==null)var ce=!0;else{var Ce=n(u);Ce!==null&&oe(S,Ce.startTime-V),ce=!1}return ce}finally{f=null,h=$,p=!1}}var A=!1,T=null,P=-1,Y=5,D=-1;function H(){return!(e.unstable_now()-D<Y)}function Q(){if(T!==null){var z=e.unstable_now();D=z;var V=!0;try{V=T(!0,z)}finally{V?U():(A=!1,T=null)}}else A=!1}var U;if(typeof v=="function")U=function(){v(Q)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,te=L.port2;L.port1.onmessage=Q,U=function(){te.postMessage(null)}}else U=function(){_(Q,0)};function Z(z){T=z,A||(A=!0,U())}function oe(z,V){P=_(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,Z(k))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var $=h;h=V;try{return z()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=h;h=z;try{return V()}finally{h=$}},e.unstable_scheduleCallback=function(z,V,$){var X=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?X+$:X):$=X,z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=$+ue,z={id:c++,callback:V,priorityLevel:z,startTime:$,expirationTime:ue,sortIndex:-1},$>X?(z.sortIndex=$,t(u,z),n(l)===null&&z===n(u)&&(y?(m(P),P=-1):y=!0,oe(S,$-X))):(z.sortIndex=ue,t(l,z),b||p||(b=!0,Z(k))),z},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(z){var V=h;return function(){var $=h;h=V;try{return z.apply(this,arguments)}finally{h=$}}}})(Jj);Xj.exports=Jj;var yP=Xj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vP=R,ki=yP;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qj=new Set,Ed={};function Il(e,t){ju(e,t),ju(e+"Capture",t)}function ju(e,t){for(Ed[e]=t,e=0;e<t.length;e++)Qj.add(t[e])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$v=Object.prototype.hasOwnProperty,wP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z1={},H1={};function bP(e){return $v.call(H1,e)?!0:$v.call(z1,e)?!1:wP.test(e)?H1[e]=!0:(z1[e]=!0,!1)}function _P(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xP(e,t,n,r){if(t===null||typeof t>"u"||_P(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qr(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vr[e]=new Qr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vr[t]=new Qr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vr[e]=new Qr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vr[e]=new Qr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vr[e]=new Qr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vr[e]=new Qr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vr[e]=new Qr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vr[e]=new Qr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vr[e]=new Qr(e,5,!1,e.toLowerCase(),null,!1,!1)});var u_=/[\-:]([a-z])/g;function c_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(u_,c_);vr[t]=new Qr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(u_,c_);vr[t]=new Qr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(u_,c_);vr[t]=new Qr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vr[e]=new Qr(e,1,!1,e.toLowerCase(),null,!1,!1)});vr.xlinkHref=new Qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vr[e]=new Qr(e,1,!1,e.toLowerCase(),null,!0,!0)});function d_(e,t,n,r){var i=vr.hasOwnProperty(t)?vr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xP(t,n,i,r)&&(n=null),r||i===null?bP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $s=vP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gh=Symbol.for("react.element"),Jl=Symbol.for("react.portal"),Ql=Symbol.for("react.fragment"),f_=Symbol.for("react.strict_mode"),Mv=Symbol.for("react.profiler"),Zj=Symbol.for("react.provider"),eA=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),Dv=Symbol.for("react.suspense"),Lv=Symbol.for("react.suspense_list"),p_=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),tA=Symbol.for("react.offscreen"),U1=Symbol.iterator;function kc(e){return e===null||typeof e!="object"?null:(e=U1&&e[U1]||e["@@iterator"],typeof e=="function"?e:null)}var Tn=Object.assign,Vy;function Vc(e){if(Vy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vy=t&&t[1]||""}return"\n"+Vy+e}var qy=!1;function Ky(e,t){if(!e||qy)return"";qy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{qy=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vc(e):""}function SP(e){switch(e.tag){case 5:return Vc(e.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 2:case 15:return e=Ky(e.type,!1),e;case 11:return e=Ky(e.type.render,!1),e;case 1:return e=Ky(e.type,!0),e;default:return""}}function Bv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ql:return"Fragment";case Jl:return"Portal";case Mv:return"Profiler";case f_:return"StrictMode";case Dv:return"Suspense";case Lv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case eA:return(e.displayName||"Context")+".Consumer";case Zj:return(e._context.displayName||"Context")+".Provider";case h_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case p_:return t=e.displayName||null,t!==null?t:Bv(e.type)||"Memo";case Ys:t=e._payload,e=e._init;try{return Bv(e(t))}catch(n){}}return null}function EP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bv(t);case 8:return t===f_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ya(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kP(e){var t=nA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mh(e){e._valueTracker||(e._valueTracker=kP(e))}function rA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nA(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Pp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Fv(e,t){var n=t.checked;return Tn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function W1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ya(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iA(e,t){t=t.checked,t!=null&&d_(e,"checked",t,!1)}function zv(e,t){iA(e,t);var n=ya(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hv(e,t.type,ya(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function V1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hv(e,t,n){(t!=="number"||Pp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var qc=Array.isArray;function gu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ya(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Uv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Tn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function q1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(qc(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ya(n)}}function oA(e,t){var n=ya(t.value),r=ya(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function K1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yh,aA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yh=yh||document.createElement("div"),yh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function kd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ud={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CP=["Webkit","ms","Moz","O"];Object.keys(ud).forEach(function(e){CP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ud[t]=ud[e]})});function lA(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ud.hasOwnProperty(e)&&ud[e]?(""+t).trim():t+"px"}function uA(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lA(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var jP=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vv(e,t){if(t){if(jP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function qv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kv=null;function g_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gv=null,mu=null,yu=null;function G1(e){if(e=Pf(e)){if(typeof Gv!="function")throw Error(et(280));var t=e.stateNode;t&&(t=um(t),Gv(e.stateNode,e.type,t))}}function cA(e){mu?yu?yu.push(e):yu=[e]:mu=e}function dA(){if(mu){var e=mu,t=yu;if(yu=mu=null,G1(e),t)for(e=0;e<t.length;e++)G1(t[e])}}function fA(e,t){return e(t)}function hA(){}var Gy=!1;function pA(e,t,n){if(Gy)return e(t,n);Gy=!0;try{return fA(e,t,n)}finally{Gy=!1,(mu!==null||yu!==null)&&(hA(),dA())}}function Cd(e,t){var n=e.stateNode;if(n===null)return null;var r=um(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var Yv=!1;if(ks)try{var Cc={};Object.defineProperty(Cc,"passive",{get:function(){Yv=!0}}),window.addEventListener("test",Cc,Cc),window.removeEventListener("test",Cc,Cc)}catch(e){Yv=!1}function AP(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var cd=!1,Op=null,$p=!1,Xv=null,NP={onError:function(e){cd=!0,Op=e}};function RP(e,t,n,r,i,o,s,a,l){cd=!1,Op=null,AP.apply(NP,arguments)}function TP(e,t,n,r,i,o,s,a,l){if(RP.apply(this,arguments),cd){if(cd){var u=Op;cd=!1,Op=null}else throw Error(et(198));$p||($p=!0,Xv=u)}}function Pl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function gA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Y1(e){if(Pl(e)!==e)throw Error(et(188))}function IP(e){var t=e.alternate;if(!t){if(t=Pl(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Y1(i),e;if(o===r)return Y1(i),t;o=o.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function mA(e){return e=IP(e),e!==null?yA(e):null}function yA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yA(e);if(t!==null)return t;e=e.sibling}return null}var vA=ki.unstable_scheduleCallback,X1=ki.unstable_cancelCallback,PP=ki.unstable_shouldYield,OP=ki.unstable_requestPaint,zn=ki.unstable_now,$P=ki.unstable_getCurrentPriorityLevel,m_=ki.unstable_ImmediatePriority,wA=ki.unstable_UserBlockingPriority,Mp=ki.unstable_NormalPriority,MP=ki.unstable_LowPriority,bA=ki.unstable_IdlePriority,om=null,Bo=null;function DP(e){if(Bo&&typeof Bo.onCommitFiberRoot=="function")try{Bo.onCommitFiberRoot(om,e,void 0,(e.current.flags&128)===128)}catch(t){}}var fo=Math.clz32?Math.clz32:FP,LP=Math.log,BP=Math.LN2;function FP(e){return e>>>=0,e===0?32:31-(LP(e)/BP|0)|0}var vh=64,wh=4194304;function Kc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dp(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Kc(a):(o&=s,o!==0&&(r=Kc(o)))}else s=n&~i,s!==0?r=Kc(s):o!==0&&(r=Kc(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-fo(t),i=1<<n,r|=e[n],t&=~i;return r}function zP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-fo(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=zP(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Jv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _A(){var e=vh;return vh<<=1,!(vh&4194240)&&(vh=64),e}function Yy(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fo(t),e[t]=n}function UP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-fo(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function y_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fo(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var an=0;function xA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var SA,v_,EA,kA,CA,Qv=!1,bh=[],oa=null,sa=null,aa=null,jd=new Map,Ad=new Map,Zs=[],WP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J1(e,t){switch(e){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":jd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ad.delete(t.pointerId)}}function jc(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Pf(t),t!==null&&v_(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function VP(e,t,n,r,i){switch(t){case"focusin":return oa=jc(oa,e,t,n,r,i),!0;case"dragenter":return sa=jc(sa,e,t,n,r,i),!0;case"mouseover":return aa=jc(aa,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return jd.set(o,jc(jd.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ad.set(o,jc(Ad.get(o)||null,e,t,n,r,i)),!0}return!1}function jA(e){var t=el(e.target);if(t!==null){var n=Pl(t);if(n!==null){if(t=n.tag,t===13){if(t=gA(n),t!==null){e.blockedOn=t,CA(e.priority,function(){EA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function up(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Kv=r,n.target.dispatchEvent(r),Kv=null}else return t=Pf(n),t!==null&&v_(t),e.blockedOn=n,!1;t.shift()}return!0}function Q1(e,t,n){up(e)&&n.delete(t)}function qP(){Qv=!1,oa!==null&&up(oa)&&(oa=null),sa!==null&&up(sa)&&(sa=null),aa!==null&&up(aa)&&(aa=null),jd.forEach(Q1),Ad.forEach(Q1)}function Ac(e,t){e.blockedOn===t&&(e.blockedOn=null,Qv||(Qv=!0,ki.unstable_scheduleCallback(ki.unstable_NormalPriority,qP)))}function Nd(e){function t(i){return Ac(i,e)}if(0<bh.length){Ac(bh[0],e);for(var n=1;n<bh.length;n++){var r=bh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(oa!==null&&Ac(oa,e),sa!==null&&Ac(sa,e),aa!==null&&Ac(aa,e),jd.forEach(t),Ad.forEach(t),n=0;n<Zs.length;n++)r=Zs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zs.length&&(n=Zs[0],n.blockedOn===null);)jA(n),n.blockedOn===null&&Zs.shift()}var vu=$s.ReactCurrentBatchConfig,Lp=!0;function KP(e,t,n,r){var i=an,o=vu.transition;vu.transition=null;try{an=1,w_(e,t,n,r)}finally{an=i,vu.transition=o}}function GP(e,t,n,r){var i=an,o=vu.transition;vu.transition=null;try{an=4,w_(e,t,n,r)}finally{an=i,vu.transition=o}}function w_(e,t,n,r){if(Lp){var i=Zv(e,t,n,r);if(i===null)o0(e,t,r,Bp,n),J1(e,r);else if(VP(i,e,t,n,r))r.stopPropagation();else if(J1(e,r),t&4&&-1<WP.indexOf(e)){for(;i!==null;){var o=Pf(i);if(o!==null&&SA(o),o=Zv(e,t,n,r),o===null&&o0(e,t,r,Bp,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else o0(e,t,r,null,n)}}var Bp=null;function Zv(e,t,n,r){if(Bp=null,e=g_(r),e=el(e),e!==null)if(t=Pl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=gA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bp=e,null}function AA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($P()){case m_:return 1;case wA:return 4;case Mp:case MP:return 16;case bA:return 536870912;default:return 16}default:return 16}}var na=null,b_=null,cp=null;function NA(){if(cp)return cp;var e,t=b_,n=t.length,r,i="value"in na?na.value:na.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return cp=i.slice(e,1<r?1-r:void 0)}function dp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _h(){return!0}function Z1(){return!1}function Ti(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_h:Z1,this.isPropagationStopped=Z1,this}return Tn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_h)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_h)},persist:function(){},isPersistent:_h}),t}var Zu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},__=Ti(Zu),If=Tn({},Zu,{view:0,detail:0}),YP=Ti(If),Xy,Jy,Nc,sm=Tn({},If,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nc&&(Nc&&e.type==="mousemove"?(Xy=e.screenX-Nc.screenX,Jy=e.screenY-Nc.screenY):Jy=Xy=0,Nc=e),Xy)},movementY:function(e){return"movementY"in e?e.movementY:Jy}}),eS=Ti(sm),XP=Tn({},sm,{dataTransfer:0}),JP=Ti(XP),QP=Tn({},If,{relatedTarget:0}),Qy=Ti(QP),ZP=Tn({},Zu,{animationName:0,elapsedTime:0,pseudoElement:0}),eO=Ti(ZP),tO=Tn({},Zu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nO=Ti(tO),rO=Tn({},Zu,{data:0}),tS=Ti(rO),iO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sO[e])?!!t[e]:!1}function x_(){return aO}var lO=Tn({},If,{key:function(e){if(e.key){var t=iO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x_,charCode:function(e){return e.type==="keypress"?dp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uO=Ti(lO),cO=Tn({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nS=Ti(cO),dO=Tn({},If,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x_}),fO=Ti(dO),hO=Tn({},Zu,{propertyName:0,elapsedTime:0,pseudoElement:0}),pO=Ti(hO),gO=Tn({},sm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mO=Ti(gO),yO=[9,13,27,32],S_=ks&&"CompositionEvent"in window,dd=null;ks&&"documentMode"in document&&(dd=document.documentMode);var vO=ks&&"TextEvent"in window&&!dd,RA=ks&&(!S_||dd&&8<dd&&11>=dd),rS=" ",iS=!1;function TA(e,t){switch(e){case"keyup":return yO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zl=!1;function wO(e,t){switch(e){case"compositionend":return IA(t);case"keypress":return t.which!==32?null:(iS=!0,rS);case"textInput":return e=t.data,e===rS&&iS?null:e;default:return null}}function bO(e,t){if(Zl)return e==="compositionend"||!S_&&TA(e,t)?(e=NA(),cp=b_=na=null,Zl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return RA&&t.locale!=="ko"?null:t.data;default:return null}}var _O={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_O[e.type]:t==="textarea"}function PA(e,t,n,r){cA(r),t=Fp(t,"onChange"),0<t.length&&(n=new __("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fd=null,Rd=null;function xO(e){WA(e,0)}function am(e){var t=nu(e);if(rA(t))return e}function SO(e,t){if(e==="change")return t}var OA=!1;if(ks){var Zy;if(ks){var e0="oninput"in document;if(!e0){var sS=document.createElement("div");sS.setAttribute("oninput","return;"),e0=typeof sS.oninput=="function"}Zy=e0}else Zy=!1;OA=Zy&&(!document.documentMode||9<document.documentMode)}function aS(){fd&&(fd.detachEvent("onpropertychange",$A),Rd=fd=null)}function $A(e){if(e.propertyName==="value"&&am(Rd)){var t=[];PA(t,Rd,e,g_(e)),pA(xO,t)}}function EO(e,t,n){e==="focusin"?(aS(),fd=t,Rd=n,fd.attachEvent("onpropertychange",$A)):e==="focusout"&&aS()}function kO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return am(Rd)}function CO(e,t){if(e==="click")return am(t)}function jO(e,t){if(e==="input"||e==="change")return am(t)}function AO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var go=typeof Object.is=="function"?Object.is:AO;function Td(e,t){if(go(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$v.call(t,i)||!go(e[i],t[i]))return!1}return!0}function lS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uS(e,t){var n=lS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lS(n)}}function MA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DA(){for(var e=window,t=Pp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=Pp(e.document)}return t}function E_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function NO(e){var t=DA(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&MA(n.ownerDocument.documentElement,n)){if(r!==null&&E_(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=uS(n,o);var s=uS(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RO=ks&&"documentMode"in document&&11>=document.documentMode,eu=null,ew=null,hd=null,tw=!1;function cS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tw||eu==null||eu!==Pp(r)||(r=eu,"selectionStart"in r&&E_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hd&&Td(hd,r)||(hd=r,r=Fp(ew,"onSelect"),0<r.length&&(t=new __("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=eu)))}function xh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tu={animationend:xh("Animation","AnimationEnd"),animationiteration:xh("Animation","AnimationIteration"),animationstart:xh("Animation","AnimationStart"),transitionend:xh("Transition","TransitionEnd")},t0={},LA={};ks&&(LA=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function lm(e){if(t0[e])return t0[e];if(!tu[e])return e;var t=tu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in LA)return t0[e]=t[n];return e}var BA=lm("animationend"),FA=lm("animationiteration"),zA=lm("animationstart"),HA=lm("transitionend"),UA=new Map,dS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Aa(e,t){UA.set(e,t),Il(t,[e])}for(var n0=0;n0<dS.length;n0++){var r0=dS[n0],TO=r0.toLowerCase(),IO=r0[0].toUpperCase()+r0.slice(1);Aa(TO,"on"+IO)}Aa(BA,"onAnimationEnd");Aa(FA,"onAnimationIteration");Aa(zA,"onAnimationStart");Aa("dblclick","onDoubleClick");Aa("focusin","onFocus");Aa("focusout","onBlur");Aa(HA,"onTransitionEnd");ju("onMouseEnter",["mouseout","mouseover"]);ju("onMouseLeave",["mouseout","mouseover"]);ju("onPointerEnter",["pointerout","pointerover"]);ju("onPointerLeave",["pointerout","pointerover"]);Il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Il("onBeforeInput",["compositionend","keypress","textInput","paste"]);Il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gc));function fS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,TP(r,t,void 0,e),e.currentTarget=null}function WA(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;fS(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;fS(i,a,u),o=l}}}if($p)throw e=Xv,$p=!1,Xv=null,e}function yn(e,t){var n=t[sw];n===void 0&&(n=t[sw]=new Set);var r=e+"__bubble";n.has(r)||(VA(t,e,2,!1),n.add(r))}function i0(e,t,n){var r=0;t&&(r|=4),VA(n,e,r,t)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function Id(e){if(!e[Sh]){e[Sh]=!0,Qj.forEach(function(n){n!=="selectionchange"&&(PO.has(n)||i0(n,!1,e),i0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sh]||(t[Sh]=!0,i0("selectionchange",!1,t))}}function VA(e,t,n,r){switch(AA(t)){case 1:var i=KP;break;case 4:i=GP;break;default:i=w_}n=i.bind(null,t,n,e),i=void 0,!Yv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function o0(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=el(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}pA(function(){var u=o,c=g_(n),f=[];e:{var h=UA.get(e);if(h!==void 0){var p=__,b=e;switch(e){case"keypress":if(dp(n)===0)break e;case"keydown":case"keyup":p=uO;break;case"focusin":b="focus",p=Qy;break;case"focusout":b="blur",p=Qy;break;case"beforeblur":case"afterblur":p=Qy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=eS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=JP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fO;break;case BA:case FA:case zA:p=eO;break;case HA:p=pO;break;case"scroll":p=YP;break;case"wheel":p=mO;break;case"copy":case"cut":case"paste":p=nO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=nS}var y=(t&4)!==0,_=!y&&e==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var v=u,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,m!==null&&(S=Cd(v,m),S!=null&&y.push(Pd(v,S,w)))),_)break;v=v.return}0<y.length&&(h=new p(h,b,null,n,c),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Kv&&(b=n.relatedTarget||n.fromElement)&&(el(b)||b[Cs]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?el(b):null,b!==null&&(_=Pl(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(y=eS,S="onMouseLeave",m="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=nS,S="onPointerLeave",m="onPointerEnter",v="pointer"),_=p==null?h:nu(p),w=b==null?h:nu(b),h=new y(S,v+"leave",p,n,c),h.target=_,h.relatedTarget=w,S=null,el(c)===u&&(y=new y(m,v+"enter",b,n,c),y.target=w,y.relatedTarget=_,S=y),_=S,p&&b)t:{for(y=p,m=b,v=0,w=y;w;w=Wl(w))v++;for(w=0,S=m;S;S=Wl(S))w++;for(;0<v-w;)y=Wl(y),v--;for(;0<w-v;)m=Wl(m),w--;for(;v--;){if(y===m||m!==null&&y===m.alternate)break t;y=Wl(y),m=Wl(m)}y=null}else y=null;p!==null&&hS(f,h,p,y,!1),b!==null&&_!==null&&hS(f,_,b,y,!0)}}e:{if(h=u?nu(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=SO;else if(oS(h))if(OA)k=jO;else{k=kO;var A=EO}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=CO);if(k&&(k=k(e,u))){PA(f,k,n,c);break e}A&&A(e,h,u),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Hv(h,"number",h.value)}switch(A=u?nu(u):window,e){case"focusin":(oS(A)||A.contentEditable==="true")&&(eu=A,ew=u,hd=null);break;case"focusout":hd=ew=eu=null;break;case"mousedown":tw=!0;break;case"contextmenu":case"mouseup":case"dragend":tw=!1,cS(f,n,c);break;case"selectionchange":if(RO)break;case"keydown":case"keyup":cS(f,n,c)}var T;if(S_)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Zl?TA(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(RA&&n.locale!=="ko"&&(Zl||P!=="onCompositionStart"?P==="onCompositionEnd"&&Zl&&(T=NA()):(na=c,b_="value"in na?na.value:na.textContent,Zl=!0)),A=Fp(u,P),0<A.length&&(P=new tS(P,e,null,n,c),f.push({event:P,listeners:A}),T?P.data=T:(T=IA(n),T!==null&&(P.data=T)))),(T=vO?wO(e,n):bO(e,n))&&(u=Fp(u,"onBeforeInput"),0<u.length&&(c=new tS("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=T))}WA(f,t)})}function Pd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fp(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Cd(e,n),o!=null&&r.unshift(Pd(e,o,i)),o=Cd(e,t),o!=null&&r.push(Pd(e,o,i))),e=e.return}return r}function Wl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hS(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Cd(n,o),l!=null&&s.unshift(Pd(n,l,a))):i||(l=Cd(n,o),l!=null&&s.push(Pd(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var OO=/\r\n?/g,$O=/\u0000|\uFFFD/g;function pS(e){return(typeof e=="string"?e:""+e).replace(OO,"\n").replace($O,"")}function Eh(e,t,n){if(t=pS(t),pS(e)!==t&&n)throw Error(et(425))}function zp(){}var nw=null,rw=null;function iw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ow=typeof setTimeout=="function"?setTimeout:void 0,MO=typeof clearTimeout=="function"?clearTimeout:void 0,gS=typeof Promise=="function"?Promise:void 0,DO=typeof queueMicrotask=="function"?queueMicrotask:typeof gS<"u"?function(e){return gS.resolve(null).then(e).catch(LO)}:ow;function LO(e){setTimeout(function(){throw e})}function s0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Nd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nd(t)}function la(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ec=Math.random().toString(36).slice(2),Do="__reactFiber$"+ec,Od="__reactProps$"+ec,Cs="__reactContainer$"+ec,sw="__reactEvents$"+ec,BO="__reactListeners$"+ec,FO="__reactHandles$"+ec;function el(e){var t=e[Do];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cs]||n[Do]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mS(e);e!==null;){if(n=e[Do])return n;e=mS(e)}return t}e=n,n=e.parentNode}return null}function Pf(e){return e=e[Do]||e[Cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function um(e){return e[Od]||null}var aw=[],ru=-1;function Na(e){return{current:e}}function _n(e){0>ru||(e.current=aw[ru],aw[ru]=null,ru--)}function gn(e,t){ru++,aw[ru]=e.current,e.current=t}var va={},Dr=Na(va),li=Na(!1),fl=va;function Au(e,t){var n=e.type.contextTypes;if(!n)return va;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ui(e){return e=e.childContextTypes,e!=null}function Hp(){_n(li),_n(Dr)}function yS(e,t,n){if(Dr.current!==va)throw Error(et(168));gn(Dr,t),gn(li,n)}function qA(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,EP(e)||"Unknown",i));return Tn({},n,r)}function Up(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||va,fl=Dr.current,gn(Dr,e),gn(li,li.current),!0}function vS(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=qA(e,t,fl),r.__reactInternalMemoizedMergedChildContext=e,_n(li),_n(Dr),gn(Dr,e)):_n(li),gn(li,n)}var ds=null,cm=!1,a0=!1;function KA(e){ds===null?ds=[e]:ds.push(e)}function zO(e){cm=!0,KA(e)}function Ra(){if(!a0&&ds!==null){a0=!0;var e=0,t=an;try{var n=ds;for(an=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ds=null,cm=!1}catch(i){throw ds!==null&&(ds=ds.slice(e+1)),vA(m_,Ra),i}finally{an=t,a0=!1}}return null}var iu=[],ou=0,Wp=null,Vp=0,Mi=[],Di=0,hl=null,ms=1,ys="";function Ka(e,t){iu[ou++]=Vp,iu[ou++]=Wp,Wp=e,Vp=t}function GA(e,t,n){Mi[Di++]=ms,Mi[Di++]=ys,Mi[Di++]=hl,hl=e;var r=ms;e=ys;var i=32-fo(r)-1;r&=~(1<<i),n+=1;var o=32-fo(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ms=1<<32-fo(t)+i|n<<i|r,ys=o+e}else ms=1<<o|n<<i|r,ys=e}function k_(e){e.return!==null&&(Ka(e,1),GA(e,1,0))}function C_(e){for(;e===Wp;)Wp=iu[--ou],iu[ou]=null,Vp=iu[--ou],iu[ou]=null;for(;e===hl;)hl=Mi[--Di],Mi[Di]=null,ys=Mi[--Di],Mi[Di]=null,ms=Mi[--Di],Mi[Di]=null}var Si=null,_i=null,Sn=!1,io=null;function YA(e,t){var n=Fi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Si=e,_i=la(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Si=e,_i=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hl!==null?{id:ms,overflow:ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Fi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Si=e,_i=null,!0):!1;default:return!1}}function lw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function uw(e){if(Sn){var t=_i;if(t){var n=t;if(!wS(e,t)){if(lw(e))throw Error(et(418));t=la(n.nextSibling);var r=Si;t&&wS(e,t)?YA(r,n):(e.flags=e.flags&-4097|2,Sn=!1,Si=e)}}else{if(lw(e))throw Error(et(418));e.flags=e.flags&-4097|2,Sn=!1,Si=e}}}function bS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Si=e}function kh(e){if(e!==Si)return!1;if(!Sn)return bS(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!iw(e.type,e.memoizedProps)),t&&(t=_i)){if(lw(e))throw XA(),Error(et(418));for(;t;)YA(e,t),t=la(t.nextSibling)}if(bS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_i=la(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_i=null}}else _i=Si?la(e.stateNode.nextSibling):null;return!0}function XA(){for(var e=_i;e;)e=la(e.nextSibling)}function Nu(){_i=Si=null,Sn=!1}function j_(e){io===null?io=[e]:io.push(e)}var HO=$s.ReactCurrentBatchConfig;function Rc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function Ch(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _S(e){var t=e._init;return t(e._payload)}function JA(e){function t(m,v){if(e){var w=m.deletions;w===null?(m.deletions=[v],m.flags|=16):w.push(v)}}function n(m,v){if(!e)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=fa(m,v),m.index=0,m.sibling=null,m}function o(m,v,w){return m.index=w,e?(w=m.alternate,w!==null?(w=w.index,w<v?(m.flags|=2,v):w):(m.flags|=2,v)):(m.flags|=1048576,v)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,v,w,S){return v===null||v.tag!==6?(v=p0(w,m.mode,S),v.return=m,v):(v=i(v,w),v.return=m,v)}function l(m,v,w,S){var k=w.type;return k===Ql?c(m,v,w.props.children,S,w.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ys&&_S(k)===v.type)?(S=i(v,w.props),S.ref=Rc(m,v,w),S.return=m,S):(S=vp(w.type,w.key,w.props,null,m.mode,S),S.ref=Rc(m,v,w),S.return=m,S)}function u(m,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=g0(w,m.mode,S),v.return=m,v):(v=i(v,w.children||[]),v.return=m,v)}function c(m,v,w,S,k){return v===null||v.tag!==7?(v=al(w,m.mode,S,k),v.return=m,v):(v=i(v,w),v.return=m,v)}function f(m,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=p0(""+v,m.mode,w),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gh:return w=vp(v.type,v.key,v.props,null,m.mode,w),w.ref=Rc(m,null,v),w.return=m,w;case Jl:return v=g0(v,m.mode,w),v.return=m,v;case Ys:var S=v._init;return f(m,S(v._payload),w)}if(qc(v)||kc(v))return v=al(v,m.mode,w,null),v.return=m,v;Ch(m,v)}return null}function h(m,v,w,S){var k=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(m,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gh:return w.key===k?l(m,v,w,S):null;case Jl:return w.key===k?u(m,v,w,S):null;case Ys:return k=w._init,h(m,v,k(w._payload),S)}if(qc(w)||kc(w))return k!==null?null:c(m,v,w,S,null);Ch(m,w)}return null}function p(m,v,w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(w)||null,a(v,m,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gh:return m=m.get(S.key===null?w:S.key)||null,l(v,m,S,k);case Jl:return m=m.get(S.key===null?w:S.key)||null,u(v,m,S,k);case Ys:var A=S._init;return p(m,v,w,A(S._payload),k)}if(qc(S)||kc(S))return m=m.get(w)||null,c(v,m,S,k,null);Ch(v,S)}return null}function b(m,v,w,S){for(var k=null,A=null,T=v,P=v=0,Y=null;T!==null&&P<w.length;P++){T.index>P?(Y=T,T=null):Y=T.sibling;var D=h(m,T,w[P],S);if(D===null){T===null&&(T=Y);break}e&&T&&D.alternate===null&&t(m,T),v=o(D,v,P),A===null?k=D:A.sibling=D,A=D,T=Y}if(P===w.length)return n(m,T),Sn&&Ka(m,P),k;if(T===null){for(;P<w.length;P++)T=f(m,w[P],S),T!==null&&(v=o(T,v,P),A===null?k=T:A.sibling=T,A=T);return Sn&&Ka(m,P),k}for(T=r(m,T);P<w.length;P++)Y=p(T,m,P,w[P],S),Y!==null&&(e&&Y.alternate!==null&&T.delete(Y.key===null?P:Y.key),v=o(Y,v,P),A===null?k=Y:A.sibling=Y,A=Y);return e&&T.forEach(function(H){return t(m,H)}),Sn&&Ka(m,P),k}function y(m,v,w,S){var k=kc(w);if(typeof k!="function")throw Error(et(150));if(w=k.call(w),w==null)throw Error(et(151));for(var A=k=null,T=v,P=v=0,Y=null,D=w.next();T!==null&&!D.done;P++,D=w.next()){T.index>P?(Y=T,T=null):Y=T.sibling;var H=h(m,T,D.value,S);if(H===null){T===null&&(T=Y);break}e&&T&&H.alternate===null&&t(m,T),v=o(H,v,P),A===null?k=H:A.sibling=H,A=H,T=Y}if(D.done)return n(m,T),Sn&&Ka(m,P),k;if(T===null){for(;!D.done;P++,D=w.next())D=f(m,D.value,S),D!==null&&(v=o(D,v,P),A===null?k=D:A.sibling=D,A=D);return Sn&&Ka(m,P),k}for(T=r(m,T);!D.done;P++,D=w.next())D=p(T,m,P,D.value,S),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?P:D.key),v=o(D,v,P),A===null?k=D:A.sibling=D,A=D);return e&&T.forEach(function(Q){return t(m,Q)}),Sn&&Ka(m,P),k}function _(m,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Ql&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case gh:e:{for(var k=w.key,A=v;A!==null;){if(A.key===k){if(k=w.type,k===Ql){if(A.tag===7){n(m,A.sibling),v=i(A,w.props.children),v.return=m,m=v;break e}}else if(A.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ys&&_S(k)===A.type){n(m,A.sibling),v=i(A,w.props),v.ref=Rc(m,A,w),v.return=m,m=v;break e}n(m,A);break}else t(m,A);A=A.sibling}w.type===Ql?(v=al(w.props.children,m.mode,S,w.key),v.return=m,m=v):(S=vp(w.type,w.key,w.props,null,m.mode,S),S.ref=Rc(m,v,w),S.return=m,m=S)}return s(m);case Jl:e:{for(A=w.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(m,v.sibling),v=i(v,w.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else t(m,v);v=v.sibling}v=g0(w,m.mode,S),v.return=m,m=v}return s(m);case Ys:return A=w._init,_(m,v,A(w._payload),S)}if(qc(w))return b(m,v,w,S);if(kc(w))return y(m,v,w,S);Ch(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,w),v.return=m,m=v):(n(m,v),v=p0(w,m.mode,S),v.return=m,m=v),s(m)):n(m,v)}return _}var Ru=JA(!0),QA=JA(!1),qp=Na(null),Kp=null,su=null,A_=null;function N_(){A_=su=Kp=null}function R_(e){var t=qp.current;_n(qp),e._currentValue=t}function cw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wu(e,t){Kp=e,A_=su=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ii=!0),e.firstContext=null)}function qi(e){var t=e._currentValue;if(A_!==e)if(e={context:e,memoizedValue:t,next:null},su===null){if(Kp===null)throw Error(et(308));su=e,Kp.dependencies={lanes:0,firstContext:e}}else su=su.next=e;return t}var tl=null;function T_(e){tl===null?tl=[e]:tl.push(e)}function ZA(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,T_(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xs=!1;function I_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ua(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,nn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return i=r.interleaved,i===null?(t.next=t,T_(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function fp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,y_(e,n)}}function xS(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gp(e,t,n,r){var i=e.updateQueue;Xs=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=e,y=a;switch(h=t,p=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){f=b.call(p,f,h);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,h=typeof b=="function"?b.call(p,f,h):b,h==null)break e;f=Tn({},f,h);break e;case 2:Xs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);gl|=s,e.lanes=s,e.memoizedState=f}}function SS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var Of={},Fo=Na(Of),$d=Na(Of),Md=Na(Of);function nl(e){if(e===Of)throw Error(et(174));return e}function P_(e,t){switch(gn(Md,t),gn($d,e),gn(Fo,Of),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wv(t,e)}_n(Fo),gn(Fo,t)}function Tu(){_n(Fo),_n($d),_n(Md)}function t3(e){nl(Md.current);var t=nl(Fo.current),n=Wv(t,e.type);t!==n&&(gn($d,e),gn(Fo,n))}function O_(e){$d.current===e&&(_n(Fo),_n($d))}var Cn=Na(0);function Yp(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var l0=[];function $_(){for(var e=0;e<l0.length;e++)l0[e]._workInProgressVersionPrimary=null;l0.length=0}var hp=$s.ReactCurrentDispatcher,u0=$s.ReactCurrentBatchConfig,pl=0,An=null,Qn=null,or=null,Xp=!1,pd=!1,Dd=0,UO=0;function Cr(){throw Error(et(321))}function M_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!go(e[n],t[n]))return!1;return!0}function D_(e,t,n,r,i,o){if(pl=o,An=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hp.current=e===null||e.memoizedState===null?KO:GO,e=n(r,i),pd){o=0;do{if(pd=!1,Dd=0,25<=o)throw Error(et(301));o+=1,or=Qn=null,t.updateQueue=null,hp.current=YO,e=n(r,i)}while(pd)}if(hp.current=Jp,t=Qn!==null&&Qn.next!==null,pl=0,or=Qn=An=null,Xp=!1,t)throw Error(et(300));return e}function L_(){var e=Dd!==0;return Dd=0,e}function Mo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?An.memoizedState=or=e:or=or.next=e,or}function Ki(){if(Qn===null){var e=An.alternate;e=e!==null?e.memoizedState:null}else e=Qn.next;var t=or===null?An.memoizedState:or.next;if(t!==null)or=t,Qn=e;else{if(e===null)throw Error(et(310));Qn=e,e={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},or===null?An.memoizedState=or=e:or=or.next=e}return or}function Ld(e,t){return typeof t=="function"?t(e):t}function c0(e){var t=Ki(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=Qn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((pl&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,An.lanes|=c,gl|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,go(r,t.memoizedState)||(ii=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,An.lanes|=o,gl|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function d0(e){var t=Ki(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);go(o,t.memoizedState)||(ii=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function n3(){}function r3(e,t){var n=An,r=Ki(),i=t(),o=!go(r.memoizedState,i);if(o&&(r.memoizedState=i,ii=!0),r=r.queue,B_(s3.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||or!==null&&or.memoizedState.tag&1){if(n.flags|=2048,Bd(9,o3.bind(null,n,r,i,t),void 0,null),sr===null)throw Error(et(349));pl&30||i3(n,t,i)}return i}function i3(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=An.updateQueue,t===null?(t={lastEffect:null,stores:null},An.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function o3(e,t,n,r){t.value=n,t.getSnapshot=r,a3(t)&&l3(e)}function s3(e,t,n){return n(function(){a3(t)&&l3(e)})}function a3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!go(e,n)}catch(r){return!0}}function l3(e){var t=js(e,1);t!==null&&ho(t,e,1,-1)}function ES(e){var t=Mo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:e},t.queue=e,e=e.dispatch=qO.bind(null,An,e),[t.memoizedState,e]}function Bd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=An.updateQueue,t===null?(t={lastEffect:null,stores:null},An.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function u3(){return Ki().memoizedState}function pp(e,t,n,r){var i=Mo();An.flags|=e,i.memoizedState=Bd(1|t,n,void 0,r===void 0?null:r)}function dm(e,t,n,r){var i=Ki();r=r===void 0?null:r;var o=void 0;if(Qn!==null){var s=Qn.memoizedState;if(o=s.destroy,r!==null&&M_(r,s.deps)){i.memoizedState=Bd(t,n,o,r);return}}An.flags|=e,i.memoizedState=Bd(1|t,n,o,r)}function kS(e,t){return pp(8390656,8,e,t)}function B_(e,t){return dm(2048,8,e,t)}function c3(e,t){return dm(4,2,e,t)}function d3(e,t){return dm(4,4,e,t)}function f3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function h3(e,t,n){return n=n!=null?n.concat([e]):null,dm(4,4,f3.bind(null,t,e),n)}function F_(){}function p3(e,t){var n=Ki();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&M_(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function g3(e,t){var n=Ki();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&M_(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function m3(e,t,n){return pl&21?(go(n,t)||(n=_A(),An.lanes|=n,gl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ii=!0),e.memoizedState=n)}function WO(e,t){var n=an;an=n!==0&&4>n?n:4,e(!0);var r=u0.transition;u0.transition={};try{e(!1),t()}finally{an=n,u0.transition=r}}function y3(){return Ki().memoizedState}function VO(e,t,n){var r=da(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},v3(e))w3(t,n);else if(n=ZA(e,t,n,r),n!==null){var i=Yr();ho(n,e,r,i),b3(n,t,r)}}function qO(e,t,n){var r=da(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(v3(e))w3(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,go(a,s)){var l=t.interleaved;l===null?(i.next=i,T_(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch(u){}finally{}n=ZA(e,t,i,r),n!==null&&(i=Yr(),ho(n,e,r,i),b3(n,t,r))}}function v3(e){var t=e.alternate;return e===An||t!==null&&t===An}function w3(e,t){pd=Xp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function b3(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,y_(e,n)}}var Jp={readContext:qi,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},KO={readContext:qi,useCallback:function(e,t){return Mo().memoizedState=[e,t===void 0?null:t],e},useContext:qi,useEffect:kS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,pp(4194308,4,f3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pp(4194308,4,e,t)},useInsertionEffect:function(e,t){return pp(4,2,e,t)},useMemo:function(e,t){var n=Mo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=VO.bind(null,An,e),[r.memoizedState,e]},useRef:function(e){var t=Mo();return e={current:e},t.memoizedState=e},useState:ES,useDebugValue:F_,useDeferredValue:function(e){return Mo().memoizedState=e},useTransition:function(){var e=ES(!1),t=e[0];return e=WO.bind(null,e[1]),Mo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=An,i=Mo();if(Sn){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),sr===null)throw Error(et(349));pl&30||i3(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,kS(s3.bind(null,r,o,e),[e]),r.flags|=2048,Bd(9,o3.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Mo(),t=sr.identifierPrefix;if(Sn){var n=ys,r=ms;n=(r&~(1<<32-fo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Dd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UO++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},GO={readContext:qi,useCallback:p3,useContext:qi,useEffect:B_,useImperativeHandle:h3,useInsertionEffect:c3,useLayoutEffect:d3,useMemo:g3,useReducer:c0,useRef:u3,useState:function(){return c0(Ld)},useDebugValue:F_,useDeferredValue:function(e){var t=Ki();return m3(t,Qn.memoizedState,e)},useTransition:function(){var e=c0(Ld)[0],t=Ki().memoizedState;return[e,t]},useMutableSource:n3,useSyncExternalStore:r3,useId:y3,unstable_isNewReconciler:!1},YO={readContext:qi,useCallback:p3,useContext:qi,useEffect:B_,useImperativeHandle:h3,useInsertionEffect:c3,useLayoutEffect:d3,useMemo:g3,useReducer:d0,useRef:u3,useState:function(){return d0(Ld)},useDebugValue:F_,useDeferredValue:function(e){var t=Ki();return Qn===null?t.memoizedState=e:m3(t,Qn.memoizedState,e)},useTransition:function(){var e=d0(Ld)[0],t=Ki().memoizedState;return[e,t]},useMutableSource:n3,useSyncExternalStore:r3,useId:y3,unstable_isNewReconciler:!1};function eo(e,t){if(e&&e.defaultProps){t=Tn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function dw(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Tn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fm={isMounted:function(e){return(e=e._reactInternals)?Pl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yr(),i=da(e),o=bs(r,i);o.payload=t,n!=null&&(o.callback=n),t=ua(e,o,i),t!==null&&(ho(t,e,i,r),fp(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yr(),i=da(e),o=bs(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ua(e,o,i),t!==null&&(ho(t,e,i,r),fp(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yr(),r=da(e),i=bs(n,r);i.tag=2,t!=null&&(i.callback=t),t=ua(e,i,r),t!==null&&(ho(t,e,r,n),fp(t,e,r))}};function CS(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Td(n,r)||!Td(i,o):!0}function _3(e,t,n){var r=!1,i=va,o=t.contextType;return typeof o=="object"&&o!==null?o=qi(o):(i=ui(t)?fl:Dr.current,r=t.contextTypes,o=(r=r!=null)?Au(e,i):va),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fm,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function jS(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fm.enqueueReplaceState(t,t.state,null)}function fw(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},I_(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=qi(o):(o=ui(t)?fl:Dr.current,i.context=Au(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(dw(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&fm.enqueueReplaceState(i,i.state,null),Gp(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Iu(e,t){try{var n="",r=t;do n+=SP(r),r=r.return;while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function f0(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function hw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var XO=typeof WeakMap=="function"?WeakMap:Map;function x3(e,t,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zp||(Zp=!0,Sw=r),hw(e,t)},n}function S3(e,t,n){n=bs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hw(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){hw(e,t),typeof r!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function AS(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new XO;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=c$.bind(null,e,t,n),t.then(e,e))}function NS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function RS(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bs(-1,1),t.tag=2,ua(n,t,1))),n.lanes|=1),e)}var JO=$s.ReactCurrentOwner,ii=!1;function Kr(e,t,n,r){t.child=e===null?QA(t,null,n,r):Ru(t,e.child,n,r)}function TS(e,t,n,r,i){n=n.render;var o=t.ref;return wu(t,i),r=D_(e,t,n,r,o,i),n=L_(),e!==null&&!ii?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,As(e,t,i)):(Sn&&n&&k_(t),t.flags|=1,Kr(e,t,r,i),t.child)}function IS(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!G_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,E3(e,t,o,r,i)):(e=vp(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Td,n(s,r)&&e.ref===t.ref)return As(e,t,i)}return t.flags|=1,e=fa(o,r),e.ref=t.ref,e.return=t,t.child=e}function E3(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Td(o,r)&&e.ref===t.ref)if(ii=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(ii=!0);else return t.lanes=e.lanes,As(e,t,i)}return pw(e,t,n,r,i)}function k3(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},gn(lu,yi),yi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,gn(lu,yi),yi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,gn(lu,yi),yi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,gn(lu,yi),yi|=r;return Kr(e,t,i,n),t.child}function C3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pw(e,t,n,r,i){var o=ui(n)?fl:Dr.current;return o=Au(t,o),wu(t,i),n=D_(e,t,n,r,o,i),r=L_(),e!==null&&!ii?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,As(e,t,i)):(Sn&&r&&k_(t),t.flags|=1,Kr(e,t,n,i),t.child)}function PS(e,t,n,r,i){if(ui(n)){var o=!0;Up(t)}else o=!1;if(wu(t,i),t.stateNode===null)gp(e,t),_3(t,n,r),fw(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=qi(u):(u=ui(n)?fl:Dr.current,u=Au(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&jS(t,s,r,u),Xs=!1;var h=t.memoizedState;s.state=h,Gp(t,r,s,i),l=t.memoizedState,a!==r||h!==l||li.current||Xs?(typeof c=="function"&&(dw(t,n,c,r),l=t.memoizedState),(a=Xs||CS(t,n,a,r,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,e3(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:eo(t.type,a),s.props=u,f=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=qi(l):(l=ui(n)?fl:Dr.current,l=Au(t,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==l)&&jS(t,s,r,l),Xs=!1,h=t.memoizedState,s.state=h,Gp(t,r,s,i);var b=t.memoizedState;a!==f||h!==b||li.current||Xs?(typeof p=="function"&&(dw(t,n,p,r),b=t.memoizedState),(u=Xs||CS(t,n,u,r,h,b,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),s.props=r,s.state=b,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return gw(e,t,n,r,o,i)}function gw(e,t,n,r,i,o){C3(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&vS(t,n,!1),As(e,t,o);r=t.stateNode,JO.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Ru(t,e.child,null,o),t.child=Ru(t,null,a,o)):Kr(e,t,a,o),t.memoizedState=r.state,i&&vS(t,n,!0),t.child}function j3(e){var t=e.stateNode;t.pendingContext?yS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yS(e,t.context,!1),P_(e,t.containerInfo)}function OS(e,t,n,r,i){return Nu(),j_(i),t.flags|=256,Kr(e,t,n,r),t.child}var mw={dehydrated:null,treeContext:null,retryLane:0};function yw(e){return{baseLanes:e,cachePool:null,transitions:null}}function A3(e,t,n){var r=t.pendingProps,i=Cn.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),gn(Cn,i&1),e===null)return uw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=gm(s,r,0,null),e=al(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=yw(n),t.memoizedState=mw,e):z_(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QO(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=fa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=fa(a,o):(o=al(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?yw(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=mw,r}return o=e.child,e=o.sibling,r=fa(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function z_(e,t){return t=gm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jh(e,t,n,r){return r!==null&&j_(r),Ru(t,e.child,null,n),e=z_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function QO(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=f0(Error(et(422))),jh(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=gm({mode:"visible",children:r.children},i,0,null),o=al(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ru(t,e.child,null,s),t.child.memoizedState=yw(s),t.memoizedState=mw,o);if(!(t.mode&1))return jh(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(et(419)),r=f0(o,r,void 0),jh(e,t,s,r)}if(a=(s&e.childLanes)!==0,ii||a){if(r=sr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,js(e,i),ho(r,e,i,-1))}return K_(),r=f0(Error(et(421))),jh(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=d$.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,_i=la(i.nextSibling),Si=t,Sn=!0,io=null,e!==null&&(Mi[Di++]=ms,Mi[Di++]=ys,Mi[Di++]=hl,ms=e.id,ys=e.overflow,hl=t),t=z_(t,r.children),t.flags|=4096,t)}function $S(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cw(e.return,t,n)}function h0(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function N3(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Kr(e,t,r.children,n),r=Cn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$S(e,n,t);else if(e.tag===19)$S(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(gn(Cn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Yp(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),h0(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Yp(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}h0(t,!0,n,null,o);break;case"together":h0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function As(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=fa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ZO(e,t,n){switch(t.tag){case 3:j3(t),Nu();break;case 5:t3(t);break;case 1:ui(t.type)&&Up(t);break;case 4:P_(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;gn(qp,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(gn(Cn,Cn.current&1),t.flags|=128,null):n&t.child.childLanes?A3(e,t,n):(gn(Cn,Cn.current&1),e=As(e,t,n),e!==null?e.sibling:null);gn(Cn,Cn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return N3(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gn(Cn,Cn.current),r)break;return null;case 22:case 23:return t.lanes=0,k3(e,t,n)}return As(e,t,n)}var R3,vw,T3,I3;R3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vw=function(){};T3=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,nl(Fo.current);var o=null;switch(n){case"input":i=Fv(e,i),r=Fv(e,r),o=[];break;case"select":i=Tn({},i,{value:void 0}),r=Tn({},r,{value:void 0}),o=[];break;case"textarea":i=Uv(e,i),r=Uv(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zp)}Vv(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ed.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ed.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&yn("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};I3=function(e,t,n,r){n!==r&&(t.flags|=4)};function Tc(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function e$(e,t,n){var r=t.pendingProps;switch(C_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(t),null;case 1:return ui(t.type)&&Hp(),jr(t),null;case 3:return r=t.stateNode,Tu(),_n(li),_n(Dr),$_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(kh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,io!==null&&(Cw(io),io=null))),vw(e,t),jr(t),null;case 5:O_(t);var i=nl(Md.current);if(n=t.type,e!==null&&t.stateNode!=null)T3(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return jr(t),null}if(e=nl(Fo.current),kh(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Do]=t,r[Od]=o,e=(t.mode&1)!==0,n){case"dialog":yn("cancel",r),yn("close",r);break;case"iframe":case"object":case"embed":yn("load",r);break;case"video":case"audio":for(i=0;i<Gc.length;i++)yn(Gc[i],r);break;case"source":yn("error",r);break;case"img":case"image":case"link":yn("error",r),yn("load",r);break;case"details":yn("toggle",r);break;case"input":W1(r,o),yn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},yn("invalid",r);break;case"textarea":q1(r,o),yn("invalid",r)}Vv(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Eh(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Eh(r.textContent,a,e),i=["children",""+a]):Ed.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&yn("scroll",r)}switch(n){case"input":mh(r),V1(r,o,!0);break;case"textarea":mh(r),K1(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=zp)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sA(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Do]=t,e[Od]=r,R3(e,t,!1,!1),t.stateNode=e;e:{switch(s=qv(n,r),n){case"dialog":yn("cancel",e),yn("close",e),i=r;break;case"iframe":case"object":case"embed":yn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Gc.length;i++)yn(Gc[i],e);i=r;break;case"source":yn("error",e),i=r;break;case"img":case"image":case"link":yn("error",e),yn("load",e),i=r;break;case"details":yn("toggle",e),i=r;break;case"input":W1(e,r),i=Fv(e,r),yn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Tn({},r,{value:void 0}),yn("invalid",e);break;case"textarea":q1(e,r),i=Uv(e,r),yn("invalid",e);break;default:i=r}Vv(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?uA(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aA(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&kd(e,l):typeof l=="number"&&kd(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ed.hasOwnProperty(o)?l!=null&&o==="onScroll"&&yn("scroll",e):l!=null&&d_(e,o,l,s))}switch(n){case"input":mh(e),V1(e,r,!1);break;case"textarea":mh(e),K1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ya(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?gu(e,!!r.multiple,o,!1):r.defaultValue!=null&&gu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=zp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jr(t),null;case 6:if(e&&t.stateNode!=null)I3(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=nl(Md.current),nl(Fo.current),kh(t)){if(r=t.stateNode,n=t.memoizedProps,r[Do]=t,(o=r.nodeValue!==n)&&(e=Si,e!==null))switch(e.tag){case 3:Eh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Eh(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Do]=t,t.stateNode=r}return jr(t),null;case 13:if(_n(Cn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&_i!==null&&t.mode&1&&!(t.flags&128))XA(),Nu(),t.flags|=98560,o=!1;else if(o=kh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(et(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(et(317));o[Do]=t}else Nu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jr(t),o=!1}else io!==null&&(Cw(io),io=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Cn.current&1?er===0&&(er=3):K_())),t.updateQueue!==null&&(t.flags|=4),jr(t),null);case 4:return Tu(),vw(e,t),e===null&&Id(t.stateNode.containerInfo),jr(t),null;case 10:return R_(t.type._context),jr(t),null;case 17:return ui(t.type)&&Hp(),jr(t),null;case 19:if(_n(Cn),o=t.memoizedState,o===null)return jr(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Tc(o,!1);else{if(er!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Yp(e),s!==null){for(t.flags|=128,Tc(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return gn(Cn,Cn.current&1|2),t.child}e=e.sibling}o.tail!==null&&zn()>Pu&&(t.flags|=128,r=!0,Tc(o,!1),t.lanes=4194304)}else{if(!r)if(e=Yp(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Sn)return jr(t),null}else 2*zn()-o.renderingStartTime>Pu&&n!==1073741824&&(t.flags|=128,r=!0,Tc(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=zn(),t.sibling=null,n=Cn.current,gn(Cn,r?n&1|2:n&1),t):(jr(t),null);case 22:case 23:return q_(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yi&1073741824&&(jr(t),t.subtreeFlags&6&&(t.flags|=8192)):jr(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function t$(e,t){switch(C_(t),t.tag){case 1:return ui(t.type)&&Hp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tu(),_n(li),_n(Dr),$_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return O_(t),null;case 13:if(_n(Cn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));Nu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _n(Cn),null;case 4:return Tu(),null;case 10:return R_(t.type._context),null;case 22:case 23:return q_(),null;case 24:return null;default:return null}}var Ah=!1,Rr=!1,n$=typeof WeakSet=="function"?WeakSet:Set,bt=null;function au(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$n(e,t,r)}else n.current=null}function ww(e,t,n){try{n()}catch(r){$n(e,t,r)}}var MS=!1;function r$(e,t){if(nw=Lp,e=DA(),E_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===i&&(a=s),h===o&&++c===r&&(l=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rw={focusedElem:e,selectionRange:n},Lp=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){t=bt;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,_=b.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:eo(t.type,y),_);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(S){$n(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}return b=MS,MS=!1,b}function gd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&ww(t,n,o)}i=i.next}while(i!==r)}}function hm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function P3(e){var t=e.alternate;t!==null&&(e.alternate=null,P3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Do],delete t[Od],delete t[sw],delete t[BO],delete t[FO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function O3(e){return e.tag===5||e.tag===3||e.tag===4}function DS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||O3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _w(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zp));else if(r!==4&&(e=e.child,e!==null))for(_w(e,t,n),e=e.sibling;e!==null;)_w(e,t,n),e=e.sibling}function xw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xw(e,t,n),e=e.sibling;e!==null;)xw(e,t,n),e=e.sibling}var hr=null,no=!1;function Ws(e,t,n){for(n=n.child;n!==null;)$3(e,t,n),n=n.sibling}function $3(e,t,n){if(Bo&&typeof Bo.onCommitFiberUnmount=="function")try{Bo.onCommitFiberUnmount(om,n)}catch(a){}switch(n.tag){case 5:Rr||au(n,t);case 6:var r=hr,i=no;hr=null,Ws(e,t,n),hr=r,no=i,hr!==null&&(no?(e=hr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):hr.removeChild(n.stateNode));break;case 18:hr!==null&&(no?(e=hr,n=n.stateNode,e.nodeType===8?s0(e.parentNode,n):e.nodeType===1&&s0(e,n),Nd(e)):s0(hr,n.stateNode));break;case 4:r=hr,i=no,hr=n.stateNode.containerInfo,no=!0,Ws(e,t,n),hr=r,no=i;break;case 0:case 11:case 14:case 15:if(!Rr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&ww(n,t,s),i=i.next}while(i!==r)}Ws(e,t,n);break;case 1:if(!Rr&&(au(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$n(n,t,a)}Ws(e,t,n);break;case 21:Ws(e,t,n);break;case 22:n.mode&1?(Rr=(r=Rr)||n.memoizedState!==null,Ws(e,t,n),Rr=r):Ws(e,t,n);break;default:Ws(e,t,n)}}function LS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new n$),t.forEach(function(r){var i=f$.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:hr=a.stateNode,no=!1;break e;case 3:hr=a.stateNode.containerInfo,no=!0;break e;case 4:hr=a.stateNode.containerInfo,no=!0;break e}a=a.return}if(hr===null)throw Error(et(160));$3(o,s,i),hr=null,no=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){$n(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M3(t,e),t=t.sibling}function M3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zi(t,e),Po(e),r&4){try{gd(3,e,e.return),hm(3,e)}catch(y){$n(e,e.return,y)}try{gd(5,e,e.return)}catch(y){$n(e,e.return,y)}}break;case 1:Zi(t,e),Po(e),r&512&&n!==null&&au(n,n.return);break;case 5:if(Zi(t,e),Po(e),r&512&&n!==null&&au(n,n.return),e.flags&32){var i=e.stateNode;try{kd(i,"")}catch(y){$n(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&iA(i,o),qv(a,s);var u=qv(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?uA(i,f):c==="dangerouslySetInnerHTML"?aA(i,f):c==="children"?kd(i,f):d_(i,c,f,u)}switch(a){case"input":zv(i,o);break;case"textarea":oA(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?gu(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?gu(i,!!o.multiple,o.defaultValue,!0):gu(i,!!o.multiple,o.multiple?[]:"",!1))}i[Od]=o}catch(y){$n(e,e.return,y)}}break;case 6:if(Zi(t,e),Po(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){$n(e,e.return,y)}}break;case 3:if(Zi(t,e),Po(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nd(t.containerInfo)}catch(y){$n(e,e.return,y)}break;case 4:Zi(t,e),Po(e);break;case 13:Zi(t,e),Po(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(W_=zn())),r&4&&LS(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Rr=(u=Rr)||c,Zi(t,e),Rr=u):Zi(t,e),Po(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(bt=e,c=e.child;c!==null;){for(f=bt=c;bt!==null;){switch(h=bt,p=h.child,h.tag){case 0:case 11:case 14:case 15:gd(4,h,h.return);break;case 1:au(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){$n(r,n,y)}}break;case 5:au(h,h.return);break;case 22:if(h.memoizedState!==null){FS(f);continue}}p!==null?(p.return=h,bt=p):FS(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lA("display",s))}catch(y){$n(e,e.return,y)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){$n(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zi(t,e),Po(e),r&4&&LS(e);break;case 21:break;default:Zi(t,e),Po(e)}}function Po(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(O3(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kd(i,""),r.flags&=-33);var o=DS(e);xw(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=DS(e);_w(e,a,s);break;default:throw Error(et(161))}}catch(l){$n(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function i$(e,t,n){bt=e,D3(e)}function D3(e,t,n){for(var r=(e.mode&1)!==0;bt!==null;){var i=bt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ah;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rr;a=Ah;var u=Rr;if(Ah=s,(Rr=l)&&!u)for(bt=i;bt!==null;)s=bt,l=s.child,s.tag===22&&s.memoizedState!==null?zS(i):l!==null?(l.return=s,bt=l):zS(i);for(;o!==null;)bt=o,D3(o),o=o.sibling;bt=i,Ah=a,Rr=u}BS(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,bt=o):BS(e)}}function BS(e){for(;bt!==null;){var t=bt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Rr||hm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Rr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:eo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&SS(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}SS(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Nd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}Rr||t.flags&512&&bw(t)}catch(h){$n(t,t.return,h)}}if(t===e){bt=null;break}if(n=t.sibling,n!==null){n.return=t.return,bt=n;break}bt=t.return}}function FS(e){for(;bt!==null;){var t=bt;if(t===e){bt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,bt=n;break}bt=t.return}}function zS(e){for(;bt!==null;){var t=bt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hm(4,t)}catch(l){$n(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){$n(t,i,l)}}var o=t.return;try{bw(t)}catch(l){$n(t,o,l)}break;case 5:var s=t.return;try{bw(t)}catch(l){$n(t,s,l)}}}catch(l){$n(t,t.return,l)}if(t===e){bt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,bt=a;break}bt=t.return}}var o$=Math.ceil,Qp=$s.ReactCurrentDispatcher,H_=$s.ReactCurrentOwner,Hi=$s.ReactCurrentBatchConfig,nn=0,sr=null,qn=null,mr=0,yi=0,lu=Na(0),er=0,Fd=null,gl=0,pm=0,U_=0,md=null,ni=null,W_=0,Pu=1/0,as=null,Zp=!1,Sw=null,ca=null,Nh=!1,ra=null,eg=0,yd=0,Ew=null,mp=-1,yp=0;function Yr(){return nn&6?zn():mp!==-1?mp:mp=zn()}function da(e){return e.mode&1?nn&2&&mr!==0?mr&-mr:HO.transition!==null?(yp===0&&(yp=_A()),yp):(e=an,e!==0||(e=window.event,e=e===void 0?16:AA(e.type)),e):1}function ho(e,t,n,r){if(50<yd)throw yd=0,Ew=null,Error(et(185));Tf(e,n,r),(!(nn&2)||e!==sr)&&(e===sr&&(!(nn&2)&&(pm|=n),er===4&&ea(e,mr)),ci(e,r),n===1&&nn===0&&!(t.mode&1)&&(Pu=zn()+500,cm&&Ra()))}function ci(e,t){var n=e.callbackNode;HP(e,t);var r=Dp(e,e===sr?mr:0);if(r===0)n!==null&&X1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&X1(n),t===1)e.tag===0?zO(HS.bind(null,e)):KA(HS.bind(null,e)),DO(function(){!(nn&6)&&Ra()}),n=null;else{switch(xA(r)){case 1:n=m_;break;case 4:n=wA;break;case 16:n=Mp;break;case 536870912:n=bA;break;default:n=Mp}n=V3(n,L3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function L3(e,t){if(mp=-1,yp=0,nn&6)throw Error(et(327));var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=Dp(e,e===sr?mr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tg(e,r);else{t=r;var i=nn;nn|=2;var o=F3();(sr!==e||mr!==t)&&(as=null,Pu=zn()+500,sl(e,t));do try{l$();break}catch(a){B3(e,a)}while(!0);N_(),Qp.current=o,nn=i,qn!==null?t=0:(sr=null,mr=0,t=er)}if(t!==0){if(t===2&&(i=Jv(e),i!==0&&(r=i,t=kw(e,i))),t===1)throw n=Fd,sl(e,0),ea(e,r),ci(e,zn()),n;if(t===6)ea(e,r);else{if(i=e.current.alternate,!(r&30)&&!s$(i)&&(t=tg(e,r),t===2&&(o=Jv(e),o!==0&&(r=o,t=kw(e,o))),t===1))throw n=Fd,sl(e,0),ea(e,r),ci(e,zn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:Ga(e,ni,as);break;case 3:if(ea(e,r),(r&130023424)===r&&(t=W_+500-zn(),10<t)){if(Dp(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Yr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ow(Ga.bind(null,e,ni,as),t);break}Ga(e,ni,as);break;case 4:if(ea(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-fo(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o$(r/1960))-r,10<r){e.timeoutHandle=ow(Ga.bind(null,e,ni,as),r);break}Ga(e,ni,as);break;case 5:Ga(e,ni,as);break;default:throw Error(et(329))}}}return ci(e,zn()),e.callbackNode===n?L3.bind(null,e):null}function kw(e,t){var n=md;return e.current.memoizedState.isDehydrated&&(sl(e,t).flags|=256),e=tg(e,t),e!==2&&(t=ni,ni=n,t!==null&&Cw(t)),e}function Cw(e){ni===null?ni=e:ni.push.apply(ni,e)}function s$(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!go(o(),i))return!1}catch(s){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ea(e,t){for(t&=~U_,t&=~pm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-fo(t),r=1<<n;e[n]=-1,t&=~r}}function HS(e){if(nn&6)throw Error(et(327));bu();var t=Dp(e,0);if(!(t&1))return ci(e,zn()),null;var n=tg(e,t);if(e.tag!==0&&n===2){var r=Jv(e);r!==0&&(t=r,n=kw(e,r))}if(n===1)throw n=Fd,sl(e,0),ea(e,t),ci(e,zn()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ga(e,ni,as),ci(e,zn()),null}function V_(e,t){var n=nn;nn|=1;try{return e(t)}finally{nn=n,nn===0&&(Pu=zn()+500,cm&&Ra())}}function ml(e){ra!==null&&ra.tag===0&&!(nn&6)&&bu();var t=nn;nn|=1;var n=Hi.transition,r=an;try{if(Hi.transition=null,an=1,e)return e()}finally{an=r,Hi.transition=n,nn=t,!(nn&6)&&Ra()}}function q_(){yi=lu.current,_n(lu)}function sl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,MO(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(C_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hp();break;case 3:Tu(),_n(li),_n(Dr),$_();break;case 5:O_(r);break;case 4:Tu();break;case 13:_n(Cn);break;case 19:_n(Cn);break;case 10:R_(r.type._context);break;case 22:case 23:q_()}n=n.return}if(sr=e,qn=e=fa(e.current,null),mr=yi=t,er=0,Fd=null,U_=pm=gl=0,ni=md=null,tl!==null){for(t=0;t<tl.length;t++)if(n=tl[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}tl=null}return e}function B3(e,t){do{var n=qn;try{if(N_(),hp.current=Jp,Xp){for(var r=An.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xp=!1}if(pl=0,or=Qn=An=null,pd=!1,Dd=0,H_.current=null,n===null||n.return===null){er=1,Fd=t,qn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=mr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=NS(s);if(p!==null){p.flags&=-257,RS(p,s,a,o,t),p.mode&1&&AS(o,u,t),t=p,l=u;var b=t.updateQueue;if(b===null){var y=new Set;y.add(l),t.updateQueue=y}else b.add(l);break e}else{if(!(t&1)){AS(o,u,t),K_();break e}l=Error(et(426))}}else if(Sn&&a.mode&1){var _=NS(s);if(_!==null){!(_.flags&65536)&&(_.flags|=256),RS(_,s,a,o,t),j_(Iu(l,a));break e}}o=l=Iu(l,a),er!==4&&(er=2),md===null?md=[o]:md.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=x3(o,l,t);xS(o,m);break e;case 1:a=l;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ca===null||!ca.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=S3(o,a,t);xS(o,S);break e}}o=o.return}while(o!==null)}H3(n)}catch(k){t=k,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function F3(){var e=Qp.current;return Qp.current=Jp,e===null?Jp:e}function K_(){(er===0||er===3||er===2)&&(er=4),sr===null||!(gl&268435455)&&!(pm&268435455)||ea(sr,mr)}function tg(e,t){var n=nn;nn|=2;var r=F3();(sr!==e||mr!==t)&&(as=null,sl(e,t));do try{a$();break}catch(i){B3(e,i)}while(!0);if(N_(),nn=n,Qp.current=r,qn!==null)throw Error(et(261));return sr=null,mr=0,er}function a$(){for(;qn!==null;)z3(qn)}function l$(){for(;qn!==null&&!PP();)z3(qn)}function z3(e){var t=W3(e.alternate,e,yi);e.memoizedProps=e.pendingProps,t===null?H3(e):qn=t,H_.current=null}function H3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=t$(n,t),n!==null){n.flags&=32767,qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{er=6,qn=null;return}}else if(n=e$(n,t,yi),n!==null){qn=n;return}if(t=t.sibling,t!==null){qn=t;return}qn=t=e}while(t!==null);er===0&&(er=5)}function Ga(e,t,n){var r=an,i=Hi.transition;try{Hi.transition=null,an=1,u$(e,t,n,r)}finally{Hi.transition=i,an=r}return null}function u$(e,t,n,r){do bu();while(ra!==null);if(nn&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(UP(e,o),e===sr&&(qn=sr=null,mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nh||(Nh=!0,V3(Mp,function(){return bu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Hi.transition,Hi.transition=null;var s=an;an=1;var a=nn;nn|=4,H_.current=null,r$(e,n),M3(n,e),NO(rw),Lp=!!nw,rw=nw=null,e.current=n,i$(n),OP(),nn=a,an=s,Hi.transition=o}else e.current=n;if(Nh&&(Nh=!1,ra=e,eg=i),o=e.pendingLanes,o===0&&(ca=null),DP(n.stateNode),ci(e,zn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zp)throw Zp=!1,e=Sw,Sw=null,e;return eg&1&&e.tag!==0&&bu(),o=e.pendingLanes,o&1?e===Ew?yd++:(yd=0,Ew=e):yd=0,Ra(),null}function bu(){if(ra!==null){var e=xA(eg),t=Hi.transition,n=an;try{if(Hi.transition=null,an=16>e?16:e,ra===null)var r=!1;else{if(e=ra,ra=null,eg=0,nn&6)throw Error(et(331));var i=nn;for(nn|=4,bt=e.current;bt!==null;){var o=bt,s=o.child;if(bt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(bt=u;bt!==null;){var c=bt;switch(c.tag){case 0:case 11:case 15:gd(8,c,o)}var f=c.child;if(f!==null)f.return=c,bt=f;else for(;bt!==null;){c=bt;var h=c.sibling,p=c.return;if(P3(c),c===u){bt=null;break}if(h!==null){h.return=p,bt=h;break}bt=p}}}var b=o.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}bt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,bt=s;else e:for(;bt!==null;){if(o=bt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gd(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,bt=m;break e}bt=o.return}}var v=e.current;for(bt=v;bt!==null;){s=bt;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,bt=w;else e:for(s=v;bt!==null;){if(a=bt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hm(9,a)}}catch(k){$n(a,a.return,k)}if(a===s){bt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,bt=S;break e}bt=a.return}}if(nn=i,Ra(),Bo&&typeof Bo.onPostCommitFiberRoot=="function")try{Bo.onPostCommitFiberRoot(om,e)}catch(k){}r=!0}return r}finally{an=n,Hi.transition=t}}return!1}function US(e,t,n){t=Iu(n,t),t=x3(e,t,1),e=ua(e,t,1),t=Yr(),e!==null&&(Tf(e,1,t),ci(e,t))}function $n(e,t,n){if(e.tag===3)US(e,e,n);else for(;t!==null;){if(t.tag===3){US(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ca===null||!ca.has(r))){e=Iu(n,e),e=S3(t,e,1),t=ua(t,e,1),e=Yr(),t!==null&&(Tf(t,1,e),ci(t,e));break}}t=t.return}}function c$(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Yr(),e.pingedLanes|=e.suspendedLanes&n,sr===e&&(mr&n)===n&&(er===4||er===3&&(mr&130023424)===mr&&500>zn()-W_?sl(e,0):U_|=n),ci(e,t)}function U3(e,t){t===0&&(e.mode&1?(t=wh,wh<<=1,!(wh&130023424)&&(wh=4194304)):t=1);var n=Yr();e=js(e,t),e!==null&&(Tf(e,t,n),ci(e,n))}function d$(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),U3(e,n)}function f$(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),U3(e,n)}var W3;W3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||li.current)ii=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ii=!1,ZO(e,t,n);ii=!!(e.flags&131072)}else ii=!1,Sn&&t.flags&1048576&&GA(t,Vp,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;gp(e,t),e=t.pendingProps;var i=Au(t,Dr.current);wu(t,n),i=D_(null,t,r,e,i,n);var o=L_();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ui(r)?(o=!0,Up(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,I_(t),i.updater=fm,t.stateNode=i,i._reactInternals=t,fw(t,r,e,n),t=gw(null,t,r,!0,o,n)):(t.tag=0,Sn&&o&&k_(t),Kr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(gp(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=p$(r),e=eo(r,e),i){case 0:t=pw(null,t,r,e,n);break e;case 1:t=PS(null,t,r,e,n);break e;case 11:t=TS(null,t,r,e,n);break e;case 14:t=IS(null,t,r,eo(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),pw(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),PS(e,t,r,i,n);case 3:e:{if(j3(t),e===null)throw Error(et(387));r=t.pendingProps,o=t.memoizedState,i=o.element,e3(e,t),Gp(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Iu(Error(et(423)),t),t=OS(e,t,r,n,i);break e}else if(r!==i){i=Iu(Error(et(424)),t),t=OS(e,t,r,n,i);break e}else for(_i=la(t.stateNode.containerInfo.firstChild),Si=t,Sn=!0,io=null,n=QA(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nu(),r===i){t=As(e,t,n);break e}Kr(e,t,r,n)}t=t.child}return t;case 5:return t3(t),e===null&&uw(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,iw(r,i)?s=null:o!==null&&iw(r,o)&&(t.flags|=32),C3(e,t),Kr(e,t,s,n),t.child;case 6:return e===null&&uw(t),null;case 13:return A3(e,t,n);case 4:return P_(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ru(t,null,r,n):Kr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),TS(e,t,r,i,n);case 7:return Kr(e,t,t.pendingProps,n),t.child;case 8:return Kr(e,t,t.pendingProps.children,n),t.child;case 12:return Kr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,gn(qp,r._currentValue),r._currentValue=s,o!==null)if(go(o.value,s)){if(o.children===i.children&&!li.current){t=As(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=bs(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),cw(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(et(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),cw(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Kr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,wu(t,n),i=qi(i),r=r(i),t.flags|=1,Kr(e,t,r,n),t.child;case 14:return r=t.type,i=eo(r,t.pendingProps),i=eo(r.type,i),IS(e,t,r,i,n);case 15:return E3(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),gp(e,t),t.tag=1,ui(r)?(e=!0,Up(t)):e=!1,wu(t,n),_3(t,r,i),fw(t,r,i,n),gw(null,t,r,!0,e,n);case 19:return N3(e,t,n);case 22:return k3(e,t,n)}throw Error(et(156,t.tag))};function V3(e,t){return vA(e,t)}function h$(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(e,t,n,r){return new h$(e,t,n,r)}function G_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p$(e){if(typeof e=="function")return G_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===h_)return 11;if(e===p_)return 14}return 2}function fa(e,t){var n=e.alternate;return n===null?(n=Fi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vp(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")G_(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ql:return al(n.children,i,o,t);case f_:s=8,i|=8;break;case Mv:return e=Fi(12,n,t,i|2),e.elementType=Mv,e.lanes=o,e;case Dv:return e=Fi(13,n,t,i),e.elementType=Dv,e.lanes=o,e;case Lv:return e=Fi(19,n,t,i),e.elementType=Lv,e.lanes=o,e;case tA:return gm(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zj:s=10;break e;case eA:s=9;break e;case h_:s=11;break e;case p_:s=14;break e;case Ys:s=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Fi(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function al(e,t,n,r){return e=Fi(7,e,r,t),e.lanes=n,e}function gm(e,t,n,r){return e=Fi(22,e,r,t),e.elementType=tA,e.lanes=n,e.stateNode={isHidden:!1},e}function p0(e,t,n){return e=Fi(6,e,null,t),e.lanes=n,e}function g0(e,t,n){return t=Fi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function g$(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yy(0),this.expirationTimes=Yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Y_(e,t,n,r,i,o,s,a,l){return e=new g$(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Fi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I_(o),e}function m$(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function q3(e){if(!e)return va;e=e._reactInternals;e:{if(Pl(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ui(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(ui(n))return qA(e,n,t)}return t}function K3(e,t,n,r,i,o,s,a,l){return e=Y_(n,r,!0,e,i,o,s,a,l),e.context=q3(null),n=e.current,r=Yr(),i=da(n),o=bs(r,i),o.callback=t!=null?t:null,ua(n,o,i),e.current.lanes=i,Tf(e,i,r),ci(e,r),e}function mm(e,t,n,r){var i=t.current,o=Yr(),s=da(i);return n=q3(n),t.context===null?t.context=n:t.pendingContext=n,t=bs(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ua(i,t,s),e!==null&&(ho(e,i,s,o),fp(e,i,s)),s}function ng(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function WS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function X_(e,t){WS(e,t),(e=e.alternate)&&WS(e,t)}function y$(){return null}var G3=typeof reportError=="function"?reportError:function(e){console.error(e)};function J_(e){this._internalRoot=e}ym.prototype.render=J_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));mm(e,t,null,null)};ym.prototype.unmount=J_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ml(function(){mm(null,e,null,null)}),t[Cs]=null}};function ym(e){this._internalRoot=e}ym.prototype.unstable_scheduleHydration=function(e){if(e){var t=kA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zs.length&&t!==0&&t<Zs[n].priority;n++);Zs.splice(n,0,e),n===0&&jA(e)}};function Q_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function VS(){}function v$(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=ng(s);o.call(u)}}var s=K3(t,r,e,0,null,!1,!1,"",VS);return e._reactRootContainer=s,e[Cs]=s.current,Id(e.nodeType===8?e.parentNode:e),ml(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ng(l);a.call(u)}}var l=Y_(e,0,!1,null,null,!1,!1,"",VS);return e._reactRootContainer=l,e[Cs]=l.current,Id(e.nodeType===8?e.parentNode:e),ml(function(){mm(t,l,n,r)}),l}function wm(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=ng(s);a.call(l)}}mm(t,s,e,i)}else s=v$(n,t,e,i,r);return ng(s)}SA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Kc(t.pendingLanes);n!==0&&(y_(t,n|1),ci(t,zn()),!(nn&6)&&(Pu=zn()+500,Ra()))}break;case 13:ml(function(){var r=js(e,1);if(r!==null){var i=Yr();ho(r,e,1,i)}}),X_(e,1)}};v_=function(e){if(e.tag===13){var t=js(e,134217728);if(t!==null){var n=Yr();ho(t,e,134217728,n)}X_(e,134217728)}};EA=function(e){if(e.tag===13){var t=da(e),n=js(e,t);if(n!==null){var r=Yr();ho(n,e,t,r)}X_(e,t)}};kA=function(){return an};CA=function(e,t){var n=an;try{return an=e,t()}finally{an=n}};Gv=function(e,t,n){switch(t){case"input":if(zv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=um(r);if(!i)throw Error(et(90));rA(r),zv(r,i)}}}break;case"textarea":oA(e,n);break;case"select":t=n.value,t!=null&&gu(e,!!n.multiple,t,!1)}};fA=V_;hA=ml;var w$={usingClientEntryPoint:!1,Events:[Pf,nu,um,cA,dA,V_]},Ic={findFiberByHostInstance:el,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b$={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$s.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mA(e),e===null?null:e.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||y$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{om=Rh.inject(b$),Bo=Rh}catch(e){}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w$;Ri.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q_(t))throw Error(et(200));return m$(e,t,null,n)};Ri.createRoot=function(e,t){if(!Q_(e))throw Error(et(299));var n=!1,r="",i=G3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Y_(e,1,!1,null,null,n,!1,r,i),e[Cs]=t.current,Id(e.nodeType===8?e.parentNode:e),new J_(t)};Ri.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=mA(t),e=e===null?null:e.stateNode,e};Ri.flushSync=function(e){return ml(e)};Ri.hydrate=function(e,t,n){if(!vm(t))throw Error(et(200));return wm(null,e,t,!0,n)};Ri.hydrateRoot=function(e,t,n){if(!Q_(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=G3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=K3(t,null,e,1,n!=null?n:null,i,!1,o,s),e[Cs]=t.current,Id(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ym(t)};Ri.render=function(e,t,n){if(!vm(t))throw Error(et(200));return wm(null,e,t,!1,n)};Ri.unmountComponentAtNode=function(e){if(!vm(e))throw Error(et(40));return e._reactRootContainer?(ml(function(){wm(null,null,e,!1,function(){e._reactRootContainer=null,e[Cs]=null})}),!0):!1};Ri.unstable_batchedUpdates=V_;Ri.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vm(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return wm(e,t,n,!1,r)};Ri.version="18.3.1-next-f1338f8080-20240426";function Y3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y3)}catch(e){console.error(e)}}Y3(),Yj.exports=Ri;var X3=Yj.exports;const _$=Os(X3);var J3,qS=X3;J3=qS.createRoot,qS.hydrateRoot;var Z_={};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.parse=A$;Z_.serialize=N$;const x$=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,S$=/^[\u0021-\u003A\u003C-\u007E]*$/,E$=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,k$=/^[\u0020-\u003A\u003D-\u007E]*$/,C$=Object.prototype.toString,j$=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function A$(e,t){const n=new j$,r=e.length;if(r<2)return n;const i=(t==null?void 0:t.decode)||R$;let o=0;do{const s=e.indexOf("=",o);if(s===-1)break;const a=e.indexOf(";",o),l=a===-1?r:a;if(s>l){o=e.lastIndexOf(";",s-1)+1;continue}const u=KS(e,o,s),c=GS(e,s,u),f=e.slice(u,c);if(n[f]===void 0){let h=KS(e,s+1,l),p=GS(e,l,h);const b=i(e.slice(h,p));n[f]=b}o=l+1}while(o<r);return n}function KS(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function GS(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function N$(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!x$.test(e))throw new TypeError("argument name is invalid: ".concat(e));const i=r(t);if(!S$.test(i))throw new TypeError("argument val is invalid: ".concat(t));let o=e+"="+i;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError("option maxAge is invalid: ".concat(n.maxAge));o+="; Max-Age="+n.maxAge}if(n.domain){if(!E$.test(n.domain))throw new TypeError("option domain is invalid: ".concat(n.domain));o+="; Domain="+n.domain}if(n.path){if(!k$.test(n.path))throw new TypeError("option path is invalid: ".concat(n.path));o+="; Path="+n.path}if(n.expires){if(!T$(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError("option expires is invalid: ".concat(n.expires));o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid: ".concat(n.priority))}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid: ".concat(n.sameSite))}return o}function R$(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch(t){return e}}function T$(e){return C$.call(e)==="[object Date]"}var YS="popstate";function I$(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return jw("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:zd(i)}return O$(t,n,null,e)}function Nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function P$(){return Math.random().toString(36).substring(2,10)}function XS(e,t){return{usr:e.state,key:e.key,idx:t}}function jw(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?tc(t):t,state:n,key:t&&t.key||r||P$()}}function zd({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function tc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function O$(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=c();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function c(){return(s.state||{idx:null}).idx}function f(){a="POP";let _=c(),m=_==null?null:_-u;u=_,l&&l({action:a,location:y.location,delta:m})}function h(_,m){a="PUSH";let v=jw(y.location,_,m);u=c()+1;let w=XS(v,u),S=y.createHref(v);try{s.pushState(w,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(S)}o&&l&&l({action:a,location:y.location,delta:1})}function p(_,m){a="REPLACE";let v=jw(y.location,_,m);u=c();let w=XS(v,u),S=y.createHref(v);s.replaceState(w,"",S),o&&l&&l({action:a,location:y.location,delta:0})}function b(_){return $$(_)}let y={get action(){return a},get location(){return e(i,s)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(YS,f),l=_,()=>{i.removeEventListener(YS,f),l=null}},createHref(_){return t(i,_)},createURL:b,encodeLocation(_){let m=b(_);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:p,go(_){return s.go(_)}};return y}function $$(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:zd(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Q3(e,t,n="/"){return M$(e,t,n,!1)}function M$(e,t,n,r){let i=typeof t=="string"?tc(t):t,o=Ns(i.pathname||"/",n);if(o==null)return null;let s=Z3(e);D$(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=G$(o);a=q$(s[l],u,r)}return a}function Z3(e,t=[],n=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Nn(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length));let u=_s([r,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(Nn(o.index!==!0,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(u,'".')),Z3(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:W$(u,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of eN(o.path))i(o,s,l)}),t}function eN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=eN(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function D$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:V$(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var L$=/^:[\w-]+$/,B$=3,F$=2,z$=1,H$=10,U$=-2,JS=e=>e==="*";function W$(e,t){let n=e.split("/"),r=n.length;return n.some(JS)&&(r+=U$),t&&(r+=F$),n.filter(i=>!JS(i)).reduce((i,o)=>i+(L$.test(o)?B$:o===""?z$:H$),r)}function V$(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function q$(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",f=rg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=rg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:_s([o,f.pathname]),pathnameBase:Q$(_s([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=_s([o,f.pathnameBase]))}return s}function rg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=K$(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},h)=>{if(c==="*"){let b=a[h]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function K$(e,t=!1,n=!0){qo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function G$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qo(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function Ns(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Y$(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?tc(e):e;return{pathname:n?n.startsWith("/")?n:X$(n,t):t,search:Z$(r),hash:eM(i)}}function X$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function m0(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function J$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tN(e){let t=J$(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function nN(e,t,n,r=!1){let i;typeof e=="string"?i=tc(e):(i={...e},Nn(!i.pathname||!i.pathname.includes("?"),m0("?","pathname","search",i)),Nn(!i.pathname||!i.pathname.includes("#"),m0("#","pathname","hash",i)),Nn(!i.search||!i.search.includes("#"),m0("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=t.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=Y$(i,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var _s=e=>e.join("/").replace(/\/\/+/g,"/"),Q$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Z$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var rN=["POST","PUT","PATCH","DELETE"];new Set(rN);var nM=["GET",...rN];new Set(nM);var nc=R.createContext(null);nc.displayName="DataRouter";var bm=R.createContext(null);bm.displayName="DataRouterState";var iN=R.createContext({isTransitioning:!1});iN.displayName="ViewTransition";var rM=R.createContext(new Map);rM.displayName="Fetchers";var iM=R.createContext(null);iM.displayName="Await";var Jo=R.createContext(null);Jo.displayName="Navigation";var $f=R.createContext(null);$f.displayName="Location";var vo=R.createContext({outlet:null,matches:[],isDataRoute:!1});vo.displayName="Route";var ex=R.createContext(null);ex.displayName="RouteError";function oM(e,{relative:t}={}){Nn(Mf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Jo),{hash:i,pathname:o,search:s}=Df(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:_s([n,o])),r.createHref({pathname:a,search:s,hash:i})}function Mf(){return R.useContext($f)!=null}function Ol(){return Nn(Mf(),"useLocation() may be used only in the context of a <Router> component."),R.useContext($f).location}var oN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sN(e){R.useContext(Jo).static||R.useLayoutEffect(e)}function _m(){let{isDataRoute:e}=R.useContext(vo);return e?bM():sM()}function sM(){Nn(Mf(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(nc),{basename:t,navigator:n}=R.useContext(Jo),{matches:r}=R.useContext(vo),{pathname:i}=Ol(),o=JSON.stringify(tN(r)),s=R.useRef(!1);return sN(()=>{s.current=!0}),R.useCallback((l,u={})=>{if(qo(s.current,oN),!s.current)return;if(typeof l=="number"){n.go(l);return}let c=nN(l,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:_s([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,o,i,e])}var aM=R.createContext(null);function lM(e){let t=R.useContext(vo).outlet;return t&&R.createElement(aM.Provider,{value:e},t)}function aN(){let{matches:e}=R.useContext(vo),t=e[e.length-1];return t?t.params:{}}function Df(e,{relative:t}={}){let{matches:n}=R.useContext(vo),{pathname:r}=Ol(),i=JSON.stringify(tN(n));return R.useMemo(()=>nN(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function uM(e,t){return lN(e,t)}function lN(e,t,n,r){var v;Nn(Mf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=R.useContext(Jo),{matches:s}=R.useContext(vo),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",f=a&&a.route;{let w=f&&f.path||"";uN(u,!f||w.endsWith("*")||w.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(w,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(w,'"> to <Route path="').concat(w==="/"?"*":"".concat(w,"/*"),'">.'))}let h=Ol(),p;if(t){let w=typeof t=="string"?tc(t):t;Nn(c==="/"||((v=w.pathname)==null?void 0:v.startsWith(c)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(c,'" but pathname "').concat(w.pathname,'" was given in the `location` prop.')),p=w}else p=h;let b=p.pathname||"/",y=b;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=!o&&n&&n.matches&&n.matches.length>0?n.matches:Q3(e,{pathname:y});qo(f||_!=null,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),qo(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let m=pM(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:_s([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:_s([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&m?R.createElement($f.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},m):m}function cM(){let e=wM(),t=tM(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:i},n):null,s)}var dM=R.createElement(cM,null),fM=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(vo.Provider,{value:this.props.routeContext},R.createElement(ex.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hM({routeContext:e,match:t,children:n}){let r=R.useContext(nc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(vo.Provider,{value:e},n)}function pM(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Nn(l>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:f}=n,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let f,h=!1,p=null,b=null;n&&(f=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||dM,s&&(a<0&&c===0?(uN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,b=null):a===c&&(h=!0,b=u.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,c+1)),_=()=>{let m;return f?m=p:h?m=b:u.route.Component?m=R.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=l,R.createElement(hM,{match:u,routeContext:{outlet:l,matches:y,isDataRoute:n!=null},children:m})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?R.createElement(fM,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}function tx(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function gM(e){let t=R.useContext(nc);return Nn(t,tx(e)),t}function mM(e){let t=R.useContext(bm);return Nn(t,tx(e)),t}function yM(e){let t=R.useContext(vo);return Nn(t,tx(e)),t}function nx(e){let t=yM(e),n=t.matches[t.matches.length-1];return Nn(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function vM(){return nx("useRouteId")}function wM(){var r;let e=R.useContext(ex),t=mM("useRouteError"),n=nx("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function bM(){let{router:e}=gM("useNavigate"),t=nx("useNavigate"),n=R.useRef(!1);return sN(()=>{n.current=!0}),R.useCallback(async(i,o={})=>{qo(n.current,oN),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var QS={};function uN(e,t,n){!t&&!QS[e]&&(QS[e]=!0,qo(!1,n))}R.memo(_M);function _M({routes:e,future:t,state:n}){return lN(e,void 0,n,t)}function xM(e){return lM(e.context)}function $i(e){Nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SM({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){Nn(!Mf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=R.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=tc(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:h="default"}=n,p=R.useMemo(()=>{let b=Ns(l,s);return b==null?null:{location:{pathname:b,search:u,hash:c,state:f,key:h},navigationType:r}},[s,l,u,c,f,h,r]);return qo(p!=null,'<Router basename="'.concat(s,'"> is not able to match the URL "').concat(l).concat(u).concat(c,"\" because it does not start with the basename, so the <Router> won't render anything.")),p==null?null:R.createElement(Jo.Provider,{value:a},R.createElement($f.Provider,{children:t,value:p}))}function EM({children:e,location:t}){return uM(Aw(e),t)}function Aw(e,t=[]){let n=[];return R.Children.forEach(e,(r,i)=>{if(!R.isValidElement(r))return;let o=[...t,i];if(r.type===R.Fragment){n.push.apply(n,Aw(r.props.children,o));return}Nn(r.type===$i,"[".concat(typeof r.type=="string"?r.type:r.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),Nn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Aw(r.props.children,o)),n.push(s)}),n}var wp="get",bp="application/x-www-form-urlencoded";function xm(e){return e!=null&&typeof e.tagName=="string"}function kM(e){return xm(e)&&e.tagName.toLowerCase()==="button"}function CM(e){return xm(e)&&e.tagName.toLowerCase()==="form"}function jM(e){return xm(e)&&e.tagName.toLowerCase()==="input"}function AM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function NM(e,t){return e.button===0&&(!t||t==="_self")&&!AM(e)}var Th=null;function RM(){if(Th===null)try{new FormData(document.createElement("form"),0),Th=!1}catch(e){Th=!0}return Th}var TM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function y0(e){return e!=null&&!TM.has(e)?(qo(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(bp,'"')),null):e}function IM(e,t){let n,r,i,o,s;if(CM(e)){let a=e.getAttribute("action");r=a?Ns(a,t):null,n=e.getAttribute("method")||wp,i=y0(e.getAttribute("enctype"))||bp,o=new FormData(e)}else if(kM(e)||jM(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ns(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||wp,i=y0(e.getAttribute("formenctype"))||y0(a.getAttribute("enctype"))||bp,o=new FormData(a,e),!RM()){let{name:u,type:c,value:f}=e;if(c==="image"){let h=u?"".concat(u,"."):"";o.append("".concat(h,"x"),"0"),o.append("".concat(h,"y"),"0")}else u&&o.append(u,f)}}else{if(xm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wp,r=null,i=bp,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function rx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function PM(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OM(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $M(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await PM(o,n);return s.links?s.links():[]}return[]}));return BM(r.flat(1).filter(OM).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ZS(e,t,n,r,i,o){let s=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function MM(e,t,{includeHydrateFallback:n}={}){return DM(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function DM(e){return[...new Set(e)]}function LM(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function BM(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(LM(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var FM=new Set([100,101,204,205]);function zM(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Ns(n.pathname,t)==="/"?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}function cN(){let e=R.useContext(nc);return rx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function HM(){let e=R.useContext(bm);return rx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ix=R.createContext(void 0);ix.displayName="FrameworkContext";function dN(){let e=R.useContext(ix);return rx(e,"You must render this element inside a <HydratedRouter> element"),e}function UM(e,t){let n=R.useContext(ix),[r,i]=R.useState(!1),[o,s]=R.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,h=R.useRef(null);R.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let y=m=>{m.forEach(v=>{s(v.isIntersecting)})},_=new IntersectionObserver(y,{threshold:.5});return h.current&&_.observe(h.current),()=>{_.disconnect()}}},[e]),R.useEffect(()=>{if(r){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[r]);let p=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,h,{}]:[o,h,{onFocus:Pc(a,p),onBlur:Pc(l,b),onMouseEnter:Pc(u,p),onMouseLeave:Pc(c,b),onTouchStart:Pc(f,p)}]:[!1,h,{}]}function Pc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function WM({page:e,...t}){let{router:n}=cN(),r=R.useMemo(()=>Q3(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?R.createElement(qM,{page:e,matches:r,...t}):null}function VM(e){let{manifest:t,routeModules:n}=dN(),[r,i]=R.useState([]);return R.useEffect(()=>{let o=!1;return $M(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function qM({page:e,matches:t,...n}){let r=Ol(),{manifest:i,routeModules:o}=dN(),{basename:s}=cN(),{loaderData:a,matches:l}=HM(),u=R.useMemo(()=>ZS(e,t,l,i,r,"data"),[e,t,l,i,r]),c=R.useMemo(()=>ZS(e,t,l,i,r,"assets"),[e,t,l,i,r]),f=R.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let b=new Set,y=!1;if(t.forEach(m=>{var w;let v=i.routes[m.route.id];!v||!v.hasLoader||(!u.some(S=>S.route.id===m.route.id)&&m.route.id in a&&((w=o[m.route.id])!=null&&w.shouldRevalidate)||v.hasClientLoader?y=!0:b.add(m.route.id))}),b.size===0)return[];let _=zM(e,s);return y&&b.size>0&&_.searchParams.set("_routes",t.filter(m=>b.has(m.route.id)).map(m=>m.route.id).join(",")),[_.pathname+_.search]},[s,a,r,i,u,t,e,o]),h=R.useMemo(()=>MM(c,i),[c,i]),p=VM(c);return R.createElement(R.Fragment,null,f.map(b=>R.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),h.map(b=>R.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),p.map(({key:b,link:y})=>R.createElement("link",{key:b,...y})))}function KM(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var fN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fN&&(window.__reactRouterVersion="7.6.0")}catch(e){}function GM({basename:e,children:t,window:n}){let r=R.useRef();r.current==null&&(r.current=I$({window:n,v5Compat:!0}));let i=r.current,[o,s]=R.useState({action:i.action,location:i.location}),a=R.useCallback(l=>{R.startTransition(()=>s(l))},[s]);return R.useLayoutEffect(()=>i.listen(a),[i,a]),R.createElement(SM,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var hN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pN=R.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...h},p){let{basename:b}=R.useContext(Jo),y=typeof u=="string"&&hN.test(u),_,m=!1;if(typeof u=="string"&&y&&(_=u,fN))try{let Y=new URL(window.location.href),D=u.startsWith("//")?new URL(Y.protocol+u):new URL(u),H=Ns(D.pathname,b);D.origin===Y.origin&&H!=null?u=H+D.search+D.hash:m=!0}catch(Y){qo(!1,'<Link to="'.concat(u,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let v=oM(u,{relative:i}),[w,S,k]=UM(r,h),A=JM(u,{replace:s,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:f});function T(Y){t&&t(Y),Y.defaultPrevented||A(Y)}let P=R.createElement("a",{...h,...k,href:_||v,onClick:m||o?t:T,ref:KM(p,S),target:l,"data-discover":!y&&n==="render"?"true":void 0});return w&&!y?R.createElement(R.Fragment,null,P,R.createElement(WM,{page:v})):P});pN.displayName="Link";var ig=R.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},c){let f=Df(s,{relative:u.relative}),h=Ol(),p=R.useContext(bm),{navigator:b,basename:y}=R.useContext(Jo),_=p!=null&&nD(f)&&a===!0,m=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,v=h.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(v=v.toLowerCase(),w=w?w.toLowerCase():null,m=m.toLowerCase()),w&&y&&(w=Ns(w,y)||w);const S=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let k=v===m||!i&&v.startsWith(m)&&v.charAt(S)==="/",A=w!=null&&(w===m||!i&&w.startsWith(m)&&w.charAt(m.length)==="/"),T={isActive:k,isPending:A,isTransitioning:_},P=k?t:void 0,Y;typeof r=="function"?Y=r(T):Y=[r,k?"active":null,A?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(T):o;return R.createElement(pN,{...u,"aria-current":P,className:Y,ref:c,style:D,to:s,viewTransition:a},typeof l=="function"?l(T):l)});ig.displayName="NavLink";var YM=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=wp,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...h},p)=>{let b=eD(),y=tD(a,{relative:u}),_=s.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&hN.test(a),v=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let S=w.nativeEvent.submitter,k=(S==null?void 0:S.getAttribute("formmethod"))||s;b(S||w.currentTarget,{fetcherKey:t,method:k,navigate:n,replace:i,state:o,relative:u,preventScrollReset:c,viewTransition:f})};return R.createElement("form",{ref:p,method:_,action:y,onSubmit:r?l:v,...h,"data-discover":!m&&e==="render"?"true":void 0})});YM.displayName="Form";function XM(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function gN(e){let t=R.useContext(nc);return Nn(t,XM(e)),t}function JM(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=_m(),l=Ol(),u=Df(e,{relative:o});return R.useCallback(c=>{if(NM(c,t)){c.preventDefault();let f=n!==void 0?n:zd(l)===zd(u);a(e,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,n,r,t,e,i,o,s])}var QM=0,ZM=()=>"__".concat(String(++QM),"__");function eD(){let{router:e}=gN("useSubmit"),{basename:t}=R.useContext(Jo),n=vM();return R.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=IM(r,t);if(i.navigate===!1){let c=i.fetcherKey||ZM();await e.fetch(c,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function tD(e,{relative:t}={}){let{basename:n}=R.useContext(Jo),r=R.useContext(vo);Nn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Df(e||".",{relative:t})},s=Ol();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();o.search=c?"?".concat(c):""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:_s([n,o.pathname])),zd(o)}function nD(e,t={}){let n=R.useContext(iN);Nn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gN("useViewTransitionState"),i=Df(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Ns(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Ns(n.nextLocation.pathname,r)||n.nextLocation.pathname;return rg(i.pathname,s)!=null||rg(i.pathname,o)!=null}[...FM];var ox={};Object.defineProperty(ox,"__esModule",{value:!0});var Ta=ox.newRidgeState=void 0;const og=R,mN=typeof window<"u"||typeof document<"u"?og.useLayoutEffect:og.useEffect,yN=(e,t)=>e===t,eE={};function rD(e,t=yN){const n=(0,og.useRef)(eE);let r=n.current;return mN(()=>{n.current=r}),(n.current===eE||!t(e,n.current))&&(r=e),r}function iD(e,t){let n=[],r=e;function i(u,c){const f=r;r=u instanceof Function?u(r):u,setTimeout(()=>{var h;n.forEach(p=>p(r,f)),c==null||c(r,f),(h=t==null?void 0:t.onSet)===null||h===void 0||h.call(t,r,f)})}function o(u){return n.push(u),()=>{n=n.filter(c=>c!==u)}}function s(u){mN(()=>o(u),[u])}function a(){const[u,c]=(0,og.useState)(r);return s(c),[u,i]}function l(u,c=yN){const[f]=a();return rD(u(f),c)}return{use:a,useSelector:l,useValue:()=>a()[0],get:()=>r,set:i,reset:()=>i(e),subscribe:o}}Ta=ox.newRidgeState=iD;let oD=0;const sx=Ta([]);function mn(e){sx.set(t=>[...t,{id:oD++,modal:e}])}function mi(e){sx.set(t=>t.filter(n=>n.id!==e))}function Yn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Yn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var sD={value:()=>{}};function Sm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _p(n)}function _p(e){this._=e}function aD(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_p.prototype=Sm.prototype={constructor:_p,on:function(e,t){var n=this._,r=aD(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=lD(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=tE(n[i],e.name,t);else if(t==null)for(i in n)n[i]=tE(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _p(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function lD(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function tE(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=sD,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Nw="http://www.w3.org/1999/xhtml";const nE={svg:"http://www.w3.org/2000/svg",xhtml:Nw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Em(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),nE.hasOwnProperty(t)?{space:nE[t],local:e}:e}function uD(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Nw&&t.documentElement.namespaceURI===Nw?t.createElement(e):t.createElementNS(n,e)}}function cD(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vN(e){var t=Em(e);return(t.local?cD:uD)(t)}function dD(){}function ax(e){return e==null?dD:function(){return this.querySelector(e)}}function fD(e){typeof e!="function"&&(e=ax(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Ci(r,this._parents)}function hD(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function pD(){return[]}function wN(e){return e==null?pD:function(){return this.querySelectorAll(e)}}function gD(e){return function(){return hD(e.apply(this,arguments))}}function mD(e){typeof e=="function"?e=gD(e):e=wN(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new Ci(r,i)}function bN(e){return function(){return this.matches(e)}}function _N(e){return function(t){return t.matches(e)}}var yD=Array.prototype.find;function vD(e){return function(){return yD.call(this.children,e)}}function wD(){return this.firstElementChild}function bD(e){return this.select(e==null?wD:vD(typeof e=="function"?e:_N(e)))}var _D=Array.prototype.filter;function xD(){return Array.from(this.children)}function SD(e){return function(){return _D.call(this.children,e)}}function ED(e){return this.selectAll(e==null?xD:SD(typeof e=="function"?e:_N(e)))}function kD(e){typeof e!="function"&&(e=bN(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Ci(r,this._parents)}function xN(e){return new Array(e.length)}function CD(){return new Ci(this._enter||this._groups.map(xN),this._parents)}function sg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sg.prototype={constructor:sg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jD(e){return function(){return e}}function AD(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new sg(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function ND(e,t,n,r,i,o,s){var a,l,u=new Map,c=t.length,f=o.length,h=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(h[a]=p=s.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<f;++a)p=s.call(e,o[a],a,o)+"",(l=u.get(p))?(r[a]=l,l.__data__=o[a],u.delete(p)):n[a]=new sg(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(i[a]=l)}function RD(e){return e.__data__}function TD(e,t){if(!arguments.length)return Array.from(this,RD);var n=t?ND:AD,r=this._parents,i=this._groups;typeof e!="function"&&(e=jD(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],h=f.length,p=ID(e.call(c,c&&c.__data__,u,r)),b=p.length,y=a[u]=new Array(b),_=s[u]=new Array(b),m=l[u]=new Array(h);n(c,f,y,_,m,p,t);for(var v=0,w=0,S,k;v<b;++v)if(S=y[v]){for(v>=w&&(w=v+1);!(k=_[w])&&++w<b;);S._next=k||null}}return s=new Ci(s,r),s._enter=a,s._exit=l,s}function ID(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function PD(){return new Ci(this._exit||this._groups.map(xN),this._parents)}function OD(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function $D(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],f=u.length,h=a[l]=new Array(f),p,b=0;b<f;++b)(p=u[b]||c[b])&&(h[b]=p);for(;l<i;++l)a[l]=n[l];return new Ci(a,this._parents)}function MD(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function DD(e){e||(e=LD);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Ci(i,this._parents).order()}function LD(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function BD(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function FD(){return Array.from(this)}function zD(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function HD(){let e=0;for(const t of this)++e;return e}function UD(){return!this.node()}function WD(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function VD(e){return function(){this.removeAttribute(e)}}function qD(e){return function(){this.removeAttributeNS(e.space,e.local)}}function KD(e,t){return function(){this.setAttribute(e,t)}}function GD(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function YD(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function XD(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function JD(e,t){var n=Em(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?qD:VD:typeof t=="function"?n.local?XD:YD:n.local?GD:KD)(n,t))}function SN(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function QD(e){return function(){this.style.removeProperty(e)}}function ZD(e,t,n){return function(){this.style.setProperty(e,t,n)}}function e6(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function t6(e,t,n){return arguments.length>1?this.each((t==null?QD:typeof t=="function"?e6:ZD)(e,t,n==null?"":n)):Ou(this.node(),e)}function Ou(e,t){return e.style.getPropertyValue(t)||SN(e).getComputedStyle(e,null).getPropertyValue(t)}function n6(e){return function(){delete this[e]}}function r6(e,t){return function(){this[e]=t}}function i6(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function o6(e,t){return arguments.length>1?this.each((t==null?n6:typeof t=="function"?i6:r6)(e,t)):this.node()[e]}function EN(e){return e.trim().split(/^|\s+/)}function lx(e){return e.classList||new kN(e)}function kN(e){this._node=e,this._names=EN(e.getAttribute("class")||"")}kN.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function CN(e,t){for(var n=lx(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function jN(e,t){for(var n=lx(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function s6(e){return function(){CN(this,e)}}function a6(e){return function(){jN(this,e)}}function l6(e,t){return function(){(t.apply(this,arguments)?CN:jN)(this,e)}}function u6(e,t){var n=EN(e+"");if(arguments.length<2){for(var r=lx(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?l6:t?s6:a6)(n,t))}function c6(){this.textContent=""}function d6(e){return function(){this.textContent=e}}function f6(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function h6(e){return arguments.length?this.each(e==null?c6:(typeof e=="function"?f6:d6)(e)):this.node().textContent}function p6(){this.innerHTML=""}function g6(e){return function(){this.innerHTML=e}}function m6(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function y6(e){return arguments.length?this.each(e==null?p6:(typeof e=="function"?m6:g6)(e)):this.node().innerHTML}function v6(){this.nextSibling&&this.parentNode.appendChild(this)}function w6(){return this.each(v6)}function b6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _6(){return this.each(b6)}function x6(e){var t=typeof e=="function"?e:vN(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function S6(){return null}function E6(e,t){var n=typeof e=="function"?e:vN(e),r=t==null?S6:typeof t=="function"?t:ax(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function k6(){var e=this.parentNode;e&&e.removeChild(this)}function C6(){return this.each(k6)}function j6(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function A6(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function N6(e){return this.select(e?A6:j6)}function R6(e){return arguments.length?this.property("__data__",e):this.node().__data__}function T6(e){return function(t){e.call(this,t,this.__data__)}}function I6(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function P6(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function O6(e,t,n){return function(){var r=this.__on,i,o=T6(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function $6(e,t,n){var r=I6(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?O6:P6,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function AN(e,t,n){var r=SN(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function M6(e,t){return function(){return AN(this,e,t)}}function D6(e,t){return function(){return AN(this,e,t.apply(this,arguments))}}function L6(e,t){return this.each((typeof t=="function"?D6:M6)(e,t))}function*B6(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var NN=[null];function Ci(e,t){this._groups=e,this._parents=t}function Lf(){return new Ci([[document.documentElement]],NN)}function F6(){return this}Ci.prototype=Lf.prototype={constructor:Ci,select:fD,selectAll:mD,selectChild:bD,selectChildren:ED,filter:kD,data:TD,enter:CD,exit:PD,join:OD,merge:$D,selection:F6,order:MD,sort:DD,call:BD,nodes:FD,node:zD,size:HD,empty:UD,each:WD,attr:JD,style:t6,property:o6,classed:u6,text:h6,html:y6,raise:w6,lower:_6,append:x6,insert:E6,remove:C6,clone:N6,datum:R6,on:$6,dispatch:L6,[Symbol.iterator]:B6};function vi(e){return typeof e=="string"?new Ci([[document.querySelector(e)]],[document.documentElement]):new Ci([[e]],NN)}function z6(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ro(e,t){if(e=z6(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const H6={passive:!1},Hd={capture:!0,passive:!1};function v0(e){e.stopImmediatePropagation()}function _u(e){e.preventDefault(),e.stopImmediatePropagation()}function RN(e){var t=e.document.documentElement,n=vi(e).on("dragstart.drag",_u,Hd);"onselectstart"in t?n.on("selectstart.drag",_u,Hd):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function TN(e,t){var n=e.document.documentElement,r=vi(e).on("dragstart.drag",null);t&&(r.on("click.drag",_u,Hd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ih=e=>()=>e;function Rw(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Rw.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function U6(e){return!e.ctrlKey&&!e.button}function W6(){return this.parentNode}function V6(e,t){return t==null?{x:e.x,y:e.y}:t}function q6(){return navigator.maxTouchPoints||"ontouchstart"in this}function IN(){var e=U6,t=W6,n=V6,r=q6,i={},o=Sm("start","drag","end"),s=0,a,l,u,c,f=0;function h(S){S.on("mousedown.drag",p).filter(r).on("touchstart.drag",_).on("touchmove.drag",m,H6).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,k){if(!(c||!e.call(this,S,k))){var A=w(this,t.call(this,S,k),S,k,"mouse");A&&(vi(S.view).on("mousemove.drag",b,Hd).on("mouseup.drag",y,Hd),RN(S.view),v0(S),u=!1,a=S.clientX,l=S.clientY,A("start",S))}}function b(S){if(_u(S),!u){var k=S.clientX-a,A=S.clientY-l;u=k*k+A*A>f}i.mouse("drag",S)}function y(S){vi(S.view).on("mousemove.drag mouseup.drag",null),TN(S.view,u),_u(S),i.mouse("end",S)}function _(S,k){if(e.call(this,S,k)){var A=S.changedTouches,T=t.call(this,S,k),P=A.length,Y,D;for(Y=0;Y<P;++Y)(D=w(this,T,S,k,A[Y].identifier,A[Y]))&&(v0(S),D("start",S,A[Y]))}}function m(S){var k=S.changedTouches,A=k.length,T,P;for(T=0;T<A;++T)(P=i[k[T].identifier])&&(_u(S),P("drag",S,k[T]))}function v(S){var k=S.changedTouches,A=k.length,T,P;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),T=0;T<A;++T)(P=i[k[T].identifier])&&(v0(S),P("end",S,k[T]))}function w(S,k,A,T,P,Y){var D=o.copy(),H=ro(Y||A,k),Q,U,L;if((L=n.call(S,new Rw("beforestart",{sourceEvent:A,target:h,identifier:P,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:D}),T))!=null)return Q=L.x-H[0]||0,U=L.y-H[1]||0,function te(Z,oe,z){var V=H,$;switch(Z){case"start":i[P]=te,$=s++;break;case"end":delete i[P],--s;case"drag":H=ro(z||oe,k),$=s;break}D.call(Z,S,new Rw(Z,{sourceEvent:oe,subject:L,target:h,identifier:P,active:$,x:H[0]+Q,y:H[1]+U,dx:H[0]-V[0],dy:H[1]-V[1],dispatch:D}),T)}}return h.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Ih(!!S),h):e},h.container=function(S){return arguments.length?(t=typeof S=="function"?S:Ih(S),h):t},h.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Ih(S),h):n},h.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:Ih(!!S),h):r},h.on=function(){var S=o.on.apply(o,arguments);return S===o?h:S},h.clickDistance=function(S){return arguments.length?(f=(S=+S)*S,h):Math.sqrt(f)},h}function ux(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function PN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Bf(){}var Ud=.7,ag=1/Ud,xu="\\s*([+-]?\\d+)\\s*",Wd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K6=/^#([0-9a-f]{3,8})$/,G6=new RegExp("^rgb\\(".concat(xu,",").concat(xu,",").concat(xu,"\\)$")),Y6=new RegExp("^rgb\\(".concat(zo,",").concat(zo,",").concat(zo,"\\)$")),X6=new RegExp("^rgba\\(".concat(xu,",").concat(xu,",").concat(xu,",").concat(Wd,"\\)$")),J6=new RegExp("^rgba\\(".concat(zo,",").concat(zo,",").concat(zo,",").concat(Wd,"\\)$")),Q6=new RegExp("^hsl\\(".concat(Wd,",").concat(zo,",").concat(zo,"\\)$")),Z6=new RegExp("^hsla\\(".concat(Wd,",").concat(zo,",").concat(zo,",").concat(Wd,"\\)$")),rE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ux(Bf,Vd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iE,formatHex:iE,formatHex8:eL,formatHsl:tL,formatRgb:oE,toString:oE});function iE(){return this.rgb().formatHex()}function eL(){return this.rgb().formatHex8()}function tL(){return ON(this).formatHsl()}function oE(){return this.rgb().formatRgb()}function Vd(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=K6.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sE(t):n===3?new oi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ph(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ph(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=G6.exec(e))?new oi(t[1],t[2],t[3],1):(t=Y6.exec(e))?new oi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=X6.exec(e))?Ph(t[1],t[2],t[3],t[4]):(t=J6.exec(e))?Ph(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Q6.exec(e))?uE(t[1],t[2]/100,t[3]/100,1):(t=Z6.exec(e))?uE(t[1],t[2]/100,t[3]/100,t[4]):rE.hasOwnProperty(e)?sE(rE[e]):e==="transparent"?new oi(NaN,NaN,NaN,0):null}function sE(e){return new oi(e>>16&255,e>>8&255,e&255,1)}function Ph(e,t,n,r){return r<=0&&(e=t=n=NaN),new oi(e,t,n,r)}function nL(e){return e instanceof Bf||(e=Vd(e)),e?(e=e.rgb(),new oi(e.r,e.g,e.b,e.opacity)):new oi}function Tw(e,t,n,r){return arguments.length===1?nL(e):new oi(e,t,n,r==null?1:r)}function oi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ux(oi,Tw,PN(Bf,{brighter(e){return e=e==null?ag:Math.pow(ag,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ud:Math.pow(Ud,e),new oi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oi(ll(this.r),ll(this.g),ll(this.b),lg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aE,formatHex:aE,formatHex8:rL,formatRgb:lE,toString:lE}));function aE(){return"#".concat(rl(this.r)).concat(rl(this.g)).concat(rl(this.b))}function rL(){return"#".concat(rl(this.r)).concat(rl(this.g)).concat(rl(this.b)).concat(rl((isNaN(this.opacity)?1:this.opacity)*255))}function lE(){const e=lg(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(ll(this.r),", ").concat(ll(this.g),", ").concat(ll(this.b)).concat(e===1?")":", ".concat(e,")"))}function lg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ll(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rl(e){return e=ll(e),(e<16?"0":"")+e.toString(16)}function uE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new oo(e,t,n,r)}function ON(e){if(e instanceof oo)return new oo(e.h,e.s,e.l,e.opacity);if(e instanceof Bf||(e=Vd(e)),!e)return new oo;if(e instanceof oo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new oo(s,a,l,e.opacity)}function iL(e,t,n,r){return arguments.length===1?ON(e):new oo(e,t,n,r==null?1:r)}function oo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ux(oo,iL,PN(Bf,{brighter(e){return e=e==null?ag:Math.pow(ag,e),new oo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ud:Math.pow(Ud,e),new oo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new oi(w0(e>=240?e-240:e+120,i,r),w0(e,i,r),w0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new oo(cE(this.h),Oh(this.s),Oh(this.l),lg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lg(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(cE(this.h),", ").concat(Oh(this.s)*100,"%, ").concat(Oh(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function cE(e){return e=(e||0)%360,e<0?e+360:e}function Oh(e){return Math.max(0,Math.min(1,e||0))}function w0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $N=e=>()=>e;function oL(e,t){return function(n){return e+n*t}}function sL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function aL(e){return(e=+e)==1?MN:function(t,n){return n-t?sL(t,n,e):$N(isNaN(t)?n:t)}}function MN(e,t){var n=t-e;return n?oL(e,n):$N(isNaN(e)?t:e)}const dE=function e(t){var n=aL(t);function r(i,o){var s=n((i=Tw(i)).r,(o=Tw(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=MN(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function Js(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Iw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b0=new RegExp(Iw.source,"g");function lL(e){return function(){return e}}function uL(e){return function(t){return e(t)+""}}function cL(e,t){var n=Iw.lastIndex=b0.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Iw.exec(e))&&(i=b0.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Js(r,i)})),n=b0.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?uL(l[0].x):lL(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}var fE=180/Math.PI,Pw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function DN(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*fE,skewX:Math.atan(l)*fE,scaleX:s,scaleY:a}}var $h;function dL(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pw:DN(t.a,t.b,t.c,t.d,t.e,t.f)}function fL(e){return e==null||($h||($h=document.createElementNS("http://www.w3.org/2000/svg","g")),$h.setAttribute("transform",e),!(e=$h.transform.baseVal.consolidate()))?Pw:(e=e.matrix,DN(e.a,e.b,e.c,e.d,e.e,e.f))}function LN(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,h,p,b){if(u!==f||c!==h){var y=p.push("translate(",null,t,null,n);b.push({i:y-4,x:Js(u,f)},{i:y-2,x:Js(c,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function s(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Js(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Js(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,p,b){if(u!==f||c!==h){var y=p.push(i(p)+"scale(",null,",",null,")");b.push({i:y-4,x:Js(u,f)},{i:y-2,x:Js(c,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,h),s(u.rotate,c.rotate,f,h),a(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(p){for(var b=-1,y=h.length,_;++b<y;)f[(_=h[b]).i]=_.x(p);return f.join("")}}}var hL=LN(dL,"px, ","px)","deg)"),pL=LN(fL,", ",")",")"),gL=1e-12;function hE(e){return((e=Math.exp(e))+1/e)/2}function mL(e){return((e=Math.exp(e))-1/e)/2}function yL(e){return((e=Math.exp(2*e))-1)/(e+1)}const vL=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],h=s[2],p=c-a,b=f-l,y=p*p+b*b,_,m;if(y<gL)m=Math.log(h/u)/t,_=function(T){return[a+T*p,l+T*b,u*Math.exp(t*T*m)]};else{var v=Math.sqrt(y),w=(h*h-u*u+r*y)/(2*u*n*v),S=(h*h-u*u-r*y)/(2*h*n*v),k=Math.log(Math.sqrt(w*w+1)-w),A=Math.log(Math.sqrt(S*S+1)-S);m=(A-k)/t,_=function(T){var P=T*m,Y=hE(k),D=u/(n*v)*(Y*yL(t*P+k)-mL(k));return[a+D*p,l+D*b,u*Y/hE(t*P+k)]}}return _.duration=m*1e3*t/Math.SQRT2,_}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var $u=0,Yc=0,Oc=0,BN=1e3,ug,Xc,cg=0,yl=0,km=0,qd=typeof performance=="object"&&performance.now?performance:Date,FN=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cx(){return yl||(FN(wL),yl=qd.now()+km)}function wL(){yl=0}function dg(){this._call=this._time=this._next=null}dg.prototype=zN.prototype={constructor:dg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?cx():+n)+(t==null?0:+t),!this._next&&Xc!==this&&(Xc?Xc._next=this:ug=this,Xc=this),this._call=e,this._time=n,Ow()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ow())}};function zN(e,t,n){var r=new dg;return r.restart(e,t,n),r}function bL(){cx(),++$u;for(var e=ug,t;e;)(t=yl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$u}function pE(){yl=(cg=qd.now())+km,$u=Yc=0;try{bL()}finally{$u=0,xL(),yl=0}}function _L(){var e=qd.now(),t=e-cg;t>BN&&(km-=t,cg=e)}function xL(){for(var e,t=ug,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ug=n);Xc=e,Ow(r)}function Ow(e){if(!$u){Yc&&(Yc=clearTimeout(Yc));var t=e-yl;t>24?(e<1/0&&(Yc=setTimeout(pE,e-qd.now()-km)),Oc&&(Oc=clearInterval(Oc))):(Oc||(cg=qd.now(),Oc=setInterval(_L,BN)),$u=1,FN(pE))}}function gE(e,t,n){var r=new dg;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var SL=Sm("start","end","cancel","interrupt"),EL=[],HN=0,mE=1,$w=2,xp=3,yE=4,Mw=5,Sp=6;function Cm(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;kL(e,n,{name:t,index:r,group:i,on:SL,tween:EL,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:HN})}function dx(e,t){var n=wo(e,t);if(n.state>HN)throw new Error("too late; already scheduled");return n}function Qo(e,t){var n=wo(e,t);if(n.state>xp)throw new Error("too late; already running");return n}function wo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kL(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=zN(o,0,n.time);function o(u){n.state=mE,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,f,h,p;if(n.state!==mE)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===xp)return gE(s);p.state===yE?(p.state=Sp,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Sp,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(gE(function(){n.state===xp&&(n.state=yE,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=$w,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$w){for(n.state=xp,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Mw,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Mw&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Sp,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ep(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>$w&&r.state<Mw,r.state=Sp,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function CL(e){return this.each(function(){Ep(this,e)})}function jL(e,t){var n,r;return function(){var i=Qo(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function AL(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Qo(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function NL(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=wo(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?jL:AL)(n,e,t))}function fx(e,t,n){var r=e._id;return e.each(function(){var i=Qo(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return wo(i,r).value[t]}}function UN(e,t){var n;return(typeof t=="number"?Js:t instanceof Vd?dE:(n=Vd(t))?(t=n,dE):cL)(e,t)}function RL(e){return function(){this.removeAttribute(e)}}function TL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function IL(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function PL(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function OL(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function $L(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function ML(e,t){var n=Em(e),r=n==="transform"?pL:UN;return this.attrTween(e,typeof t=="function"?(n.local?$L:OL)(n,r,fx(this,"attr."+e,t)):t==null?(n.local?TL:RL)(n):(n.local?PL:IL)(n,r,t))}function DL(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function LL(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function BL(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&LL(e,o)),n}return i._value=t,i}function FL(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&DL(e,o)),n}return i._value=t,i}function zL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Em(e);return this.tween(n,(r.local?BL:FL)(r,t))}function HL(e,t){return function(){dx(this,e).delay=+t.apply(this,arguments)}}function UL(e,t){return t=+t,function(){dx(this,e).delay=t}}function WL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?HL:UL)(t,e)):wo(this.node(),t).delay}function VL(e,t){return function(){Qo(this,e).duration=+t.apply(this,arguments)}}function qL(e,t){return t=+t,function(){Qo(this,e).duration=t}}function KL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?VL:qL)(t,e)):wo(this.node(),t).duration}function GL(e,t){if(typeof t!="function")throw new Error;return function(){Qo(this,e).ease=t}}function YL(e){var t=this._id;return arguments.length?this.each(GL(t,e)):wo(this.node(),t).ease}function XL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qo(this,e).ease=n}}function JL(e){if(typeof e!="function")throw new Error;return this.each(XL(this._id,e))}function QL(e){typeof e!="function"&&(e=bN(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Rs(r,this._parents,this._name,this._id)}function ZL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,f=s[a]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;a<r;++a)s[a]=t[a];return new Rs(s,this._parents,this._name,this._id)}function e8(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function t8(e,t,n){var r,i,o=e8(t)?dx:Qo;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function n8(e,t){var n=this._id;return arguments.length<2?wo(this.node(),n).on.on(e):this.each(t8(n,e,t))}function r8(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function i8(){return this.on("end.remove",r8(this._id))}function o8(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ax(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,f,h=0;h<l;++h)(c=a[h])&&(f=e.call(c,c.__data__,h,a))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,Cm(u[h],t,n,h,u,wo(c,n)));return new Rs(o,this._parents,t,n)}function s8(e){var t=this._name,n=this._id;typeof e!="function"&&(e=wN(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=e.call(c,c.__data__,f,l),p,b=wo(c,n),y=0,_=h.length;y<_;++y)(p=h[y])&&Cm(p,t,n,y,h,b);o.push(h),s.push(c)}return new Rs(o,s,t,n)}var a8=Lf.prototype.constructor;function l8(){return new a8(this._groups,this._parents)}function u8(e,t){var n,r,i;return function(){var o=Ou(this,e),s=(this.style.removeProperty(e),Ou(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function WN(e){return function(){this.style.removeProperty(e)}}function c8(e,t,n){var r,i=n+"",o;return function(){var s=Ou(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function d8(e,t,n){var r,i,o;return function(){var s=Ou(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ou(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function f8(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Qo(this,e),u=l.on,c=l.value[o]==null?a||(a=WN(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function h8(e,t,n){var r=(e+="")=="transform"?hL:UN;return t==null?this.styleTween(e,u8(e,r)).on("end.style."+e,WN(e)):typeof t=="function"?this.styleTween(e,d8(e,r,fx(this,"style."+e,t))).each(f8(this._id,e)):this.styleTween(e,c8(e,r,t),n).on("end.style."+e,null)}function p8(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function g8(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&p8(e,s,n)),r}return o._value=t,o}function m8(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,g8(e,t,n==null?"":n))}function y8(e){return function(){this.textContent=e}}function v8(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function w8(e){return this.tween("text",typeof e=="function"?v8(fx(this,"text",e)):y8(e==null?"":e+""))}function b8(e){return function(t){this.textContent=e.call(this,t)}}function _8(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&b8(i)),t}return r._value=e,r}function x8(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_8(e))}function S8(){for(var e=this._name,t=this._id,n=VN(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=wo(l,t);Cm(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rs(r,this._parents,e,n)}function E8(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=Qo(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var k8=0;function Rs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function VN(){return++k8}var is=Lf.prototype;Rs.prototype={constructor:Rs,select:o8,selectAll:s8,selectChild:is.selectChild,selectChildren:is.selectChildren,filter:QL,merge:ZL,selection:l8,transition:S8,call:is.call,nodes:is.nodes,node:is.node,size:is.size,empty:is.empty,each:is.each,on:n8,attr:ML,attrTween:zL,style:h8,styleTween:m8,text:w8,textTween:x8,remove:i8,tween:NL,delay:WL,duration:KL,ease:YL,easeVarying:JL,end:E8,[Symbol.iterator]:is[Symbol.iterator]};function C8(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var j8={time:null,delay:0,duration:250,ease:C8};function A8(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}function N8(e){var t,n;e instanceof Rs?(t=e._id,e=e._name):(t=VN(),(n=j8).time=cx(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Cm(l,e,t,u,s,n||A8(l,t));return new Rs(r,this._parents,e,t)}Lf.prototype.interrupt=CL;Lf.prototype.transition=N8;const Mh=e=>()=>e;function R8(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function vs(e,t,n){this.k=e,this.x=t,this.y=n}vs.prototype={constructor:vs,scale:function(e){return e===1?this:new vs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new vs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jm=new vs(1,0,0);qN.prototype=vs.prototype;function qN(e){for(;!e.__zoom;)if(!(e=e.parentNode))return jm;return e.__zoom}function _0(e){e.stopImmediatePropagation()}function $c(e){e.preventDefault(),e.stopImmediatePropagation()}function T8(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function I8(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function vE(){return this.__zoom||jm}function P8(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function O8(){return navigator.maxTouchPoints||"ontouchstart"in this}function $8(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function KN(){var e=T8,t=I8,n=$8,r=P8,i=O8,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=vL,u=Sm("start","zoom","end"),c,f,h,p=500,b=150,y=0,_=10;function m(L){L.property("__zoom",vE).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(L,te,Z,oe){var z=L.selection?L.selection():L;z.property("__zoom",vE),L!==z?k(L,te,Z,oe):z.interrupt().each(function(){A(this,arguments).event(oe).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},m.scaleBy=function(L,te,Z,oe){m.scaleTo(L,function(){var z=this.__zoom.k,V=typeof te=="function"?te.apply(this,arguments):te;return z*V},Z,oe)},m.scaleTo=function(L,te,Z,oe){m.transform(L,function(){var z=t.apply(this,arguments),V=this.__zoom,$=Z==null?S(z):typeof Z=="function"?Z.apply(this,arguments):Z,X=V.invert($),ue=typeof te=="function"?te.apply(this,arguments):te;return n(w(v(V,ue),$,X),z,s)},Z,oe)},m.translateBy=function(L,te,Z,oe){m.transform(L,function(){return n(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof Z=="function"?Z.apply(this,arguments):Z),t.apply(this,arguments),s)},null,oe)},m.translateTo=function(L,te,Z,oe,z){m.transform(L,function(){var V=t.apply(this,arguments),$=this.__zoom,X=oe==null?S(V):typeof oe=="function"?oe.apply(this,arguments):oe;return n(jm.translate(X[0],X[1]).scale($.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof Z=="function"?-Z.apply(this,arguments):-Z),V,s)},oe,z)};function v(L,te){return te=Math.max(o[0],Math.min(o[1],te)),te===L.k?L:new vs(te,L.x,L.y)}function w(L,te,Z){var oe=te[0]-Z[0]*L.k,z=te[1]-Z[1]*L.k;return oe===L.x&&z===L.y?L:new vs(L.k,oe,z)}function S(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function k(L,te,Z,oe){L.on("start.zoom",function(){A(this,arguments).event(oe).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(oe).end()}).tween("zoom",function(){var z=this,V=arguments,$=A(z,V).event(oe),X=t.apply(z,V),ue=Z==null?S(X):typeof Z=="function"?Z.apply(z,V):Z,ce=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),Ce=z.__zoom,Pe=typeof te=="function"?te.apply(z,V):te,Me=l(Ce.invert(ue).concat(ce/Ce.k),Pe.invert(ue).concat(ce/Pe.k));return function(B){if(B===1)B=Pe;else{var J=Me(B),re=ce/J[2];B=new vs(re,ue[0]-J[0]*re,ue[1]-J[1]*re)}$.zoom(null,B)}})}function A(L,te,Z){return!Z&&L.__zooming||new T(L,te)}function T(L,te){this.that=L,this.args=te,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,te),this.taps=0}T.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,te){return this.mouse&&L!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var te=vi(this.that).datum();u.call(L,this.that,new R8(L,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),te)}};function P(L,...te){if(!e.apply(this,arguments))return;var Z=A(this,te).event(L),oe=this.__zoom,z=Math.max(o[0],Math.min(o[1],oe.k*Math.pow(2,r.apply(this,arguments)))),V=ro(L);if(Z.wheel)(Z.mouse[0][0]!==V[0]||Z.mouse[0][1]!==V[1])&&(Z.mouse[1]=oe.invert(Z.mouse[0]=V)),clearTimeout(Z.wheel);else{if(oe.k===z)return;Z.mouse=[V,oe.invert(V)],Ep(this),Z.start()}$c(L),Z.wheel=setTimeout($,b),Z.zoom("mouse",n(w(v(oe,z),Z.mouse[0],Z.mouse[1]),Z.extent,s));function $(){Z.wheel=null,Z.end()}}function Y(L,...te){if(h||!e.apply(this,arguments))return;var Z=L.currentTarget,oe=A(this,te,!0).event(L),z=vi(L.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",ce,!0),V=ro(L,Z),$=L.clientX,X=L.clientY;RN(L.view),_0(L),oe.mouse=[V,this.__zoom.invert(V)],Ep(this),oe.start();function ue(Ce){if($c(Ce),!oe.moved){var Pe=Ce.clientX-$,Me=Ce.clientY-X;oe.moved=Pe*Pe+Me*Me>y}oe.event(Ce).zoom("mouse",n(w(oe.that.__zoom,oe.mouse[0]=ro(Ce,Z),oe.mouse[1]),oe.extent,s))}function ce(Ce){z.on("mousemove.zoom mouseup.zoom",null),TN(Ce.view,oe.moved),$c(Ce),oe.event(Ce).end()}}function D(L,...te){if(e.apply(this,arguments)){var Z=this.__zoom,oe=ro(L.changedTouches?L.changedTouches[0]:L,this),z=Z.invert(oe),V=Z.k*(L.shiftKey?.5:2),$=n(w(v(Z,V),oe,z),t.apply(this,te),s);$c(L),a>0?vi(this).transition().duration(a).call(k,$,oe,L):vi(this).call(m.transform,$,oe,L)}}function H(L,...te){if(e.apply(this,arguments)){var Z=L.touches,oe=Z.length,z=A(this,te,L.changedTouches.length===oe).event(L),V,$,X,ue;for(_0(L),$=0;$<oe;++$)X=Z[$],ue=ro(X,this),ue=[ue,this.__zoom.invert(ue),X.identifier],z.touch0?!z.touch1&&z.touch0[2]!==ue[2]&&(z.touch1=ue,z.taps=0):(z.touch0=ue,V=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),V&&(z.taps<2&&(f=ue[0],c=setTimeout(function(){c=null},p)),Ep(this),z.start())}}function Q(L,...te){if(this.__zooming){var Z=A(this,te).event(L),oe=L.changedTouches,z=oe.length,V,$,X,ue;for($c(L),V=0;V<z;++V)$=oe[V],X=ro($,this),Z.touch0&&Z.touch0[2]===$.identifier?Z.touch0[0]=X:Z.touch1&&Z.touch1[2]===$.identifier&&(Z.touch1[0]=X);if($=Z.that.__zoom,Z.touch1){var ce=Z.touch0[0],Ce=Z.touch0[1],Pe=Z.touch1[0],Me=Z.touch1[1],B=(B=Pe[0]-ce[0])*B+(B=Pe[1]-ce[1])*B,J=(J=Me[0]-Ce[0])*J+(J=Me[1]-Ce[1])*J;$=v($,Math.sqrt(B/J)),X=[(ce[0]+Pe[0])/2,(ce[1]+Pe[1])/2],ue=[(Ce[0]+Me[0])/2,(Ce[1]+Me[1])/2]}else if(Z.touch0)X=Z.touch0[0],ue=Z.touch0[1];else return;Z.zoom("touch",n(w($,X,ue),Z.extent,s))}}function U(L,...te){if(this.__zooming){var Z=A(this,te).event(L),oe=L.changedTouches,z=oe.length,V,$;for(_0(L),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),V=0;V<z;++V)$=oe[V],Z.touch0&&Z.touch0[2]===$.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===$.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&($=ro($,this),Math.hypot(f[0]-$[0],f[1]-$[1])<_)){var X=vi(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return m.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:Mh(+L),m):r},m.filter=function(L){return arguments.length?(e=typeof L=="function"?L:Mh(!!L),m):e},m.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:Mh(!!L),m):i},m.extent=function(L){return arguments.length?(t=typeof L=="function"?L:Mh([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),m):t},m.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],m):[o[0],o[1]]},m.translateExtent=function(L){return arguments.length?(s[0][0]=+L[0][0],s[1][0]=+L[1][0],s[0][1]=+L[0][1],s[1][1]=+L[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(L){return arguments.length?(n=L,m):n},m.duration=function(L){return arguments.length?(a=+L,m):a},m.interpolate=function(L){return arguments.length?(l=L,m):l},m.on=function(){var L=u.on.apply(u,arguments);return L===u?m:L},m.clickDistance=function(L){return arguments.length?(y=(L=+L)*L,m):Math.sqrt(y)},m.tapDistance=function(L){return arguments.length?(_=+L,m):_},m}const mo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>"The old edge with id=".concat(e," does not exist."),error009:e=>'Marker type "'.concat(e,"\" doesn't exist."),error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>"Couldn't create edge for ".concat(e,' handle id: "').concat(e==="source"?n:r,'", edge id: ').concat(t,"."),error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),error012:e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),error013:(e="react")=>"It seems that you haven't loaded the styles. Please import '@xyflow/".concat(e,"/dist/style.css' or base.css to make sure everything is working properly."),error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Kd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],GN=["Enter"," ","Escape"];var Mu;(function(e){e.Strict="strict",e.Loose="loose"})(Mu||(Mu={}));var ul;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ul||(ul={}));var Gd;(function(e){e.Partial="partial",e.Full="full"})(Gd||(Gd={}));const YN={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ta;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ta||(ta={}));var fg;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(fg||(fg={}));var ye;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ye||(ye={}));const wE={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function M8(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function bE(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function XN(e){return e===null?null:e?"valid":"invalid"}const JN=e=>"id"in e&&"source"in e&&"target"in e,D8=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),hx=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ff=(e,t=[0,0])=>{var a;const{width:n,height:r}=Ms(e),i=(a=e.origin)!=null?a:t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},L8=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):hx(i)?i:t.nodeLookup.get(i.id));const a=s?hg(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Am(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Nm(n)},zf=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=hg(r);n=Am(n,i)}}),Nm(n)},QN=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{var u,c,f,h,p,b;const a={...Hf(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const y of e.values()){const{measured:_,selectable:m=!0,hidden:v=!1}=y;if(s&&!m||v)continue;const w=(f=(c=(u=_.width)!=null?u:y.width)!=null?c:y.initialWidth)!=null?f:null,S=(b=(p=(h=_.height)!=null?h:y.height)!=null?p:y.initialHeight)!=null?b:null,k=Yd(a,Lu(y)),A=(w!=null?w:0)*(S!=null?S:0),T=o&&k>0;(!y.internals.handleBounds||T||k>=A||y.dragging)&&l.push(y)}return l},B8=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function F8(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function z8({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){var c,f,h;if(e.size===0)return Promise.resolve(!0);const a=F8(e,s),l=zf(a),u=px(l,t,n,(c=s==null?void 0:s.minZoom)!=null?c:i,(f=s==null?void 0:s.maxZoom)!=null?f:o,(h=s==null?void 0:s.padding)!=null?h:.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function ZN({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){var p,b,y;const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},c=(p=s.origin)!=null?p:r;let f=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",mo.error005());else{const _=a.measured.width,m=a.measured.height;_&&m&&(f=[[l,u],[l+_,u+m]])}else a&&Bu(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const h=Bu(f)?vl(t,f,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",mo.error015())),{position:{x:h.x-l+((b=s.measured.width)!=null?b:0)*c[0],y:h.y-u+((y=s.measured.height)!=null?y:0)*c[1]},positionAbsolute:h}}async function H8({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(h=>h.id)),s=[];for(const h of n){if(h.deletable===!1)continue;const p=o.has(h.id),b=!p&&h.parentId&&s.find(y=>y.id===h.parentId);(p||b)&&s.push(h)}const a=new Set(t.map(h=>h.id)),l=r.filter(h=>h.deletable!==!1),c=B8(s,l);for(const h of l)a.has(h.id)&&!c.find(b=>b.id===h.id)&&c.push(h);if(!i)return{edges:c,nodes:s};const f=await i({nodes:s,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:s}:{edges:[],nodes:[]}:f}const Du=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),vl=(e={x:0,y:0},t,n)=>{var r,i;return{x:Du(e.x,t[0][0],t[1][0]-((r=n==null?void 0:n.width)!=null?r:0)),y:Du(e.y,t[0][1],t[1][1]-((i=n==null?void 0:n.height)!=null?i:0))}};function eR(e,t,n){const{width:r,height:i}=Ms(n),{x:o,y:s}=n.internals.positionAbsolute;return vl(e,[[o,s],[o+r,s+i]],t)}const _E=(e,t,n)=>e<t?Du(Math.abs(e-t),1,t)/t:e>n?-Du(Math.abs(e-n),1,t)/t:0,tR=(e,t,n=15,r=40)=>{const i=_E(e.x,r,t.width-r)*n,o=_E(e.y,r,t.height-r)*n;return[i,o]},Am=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Dw=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Nm=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Lu=(e,t=[0,0])=>{var i,o,s,a,l,u,c,f;const{x:n,y:r}=hx(e)?e.internals.positionAbsolute:Ff(e,t);return{x:n,y:r,width:(a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0,height:(f=(c=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?c:e.initialHeight)!=null?f:0}},hg=(e,t=[0,0])=>{var i,o,s,a,l,u,c,f;const{x:n,y:r}=hx(e)?e.internals.positionAbsolute:Ff(e,t);return{x:n,y:r,x2:n+((a=(s=(o=(i=e.measured)==null?void 0:i.width)!=null?o:e.width)!=null?s:e.initialWidth)!=null?a:0),y2:r+((f=(c=(u=(l=e.measured)==null?void 0:l.height)!=null?u:e.height)!=null?c:e.initialHeight)!=null?f:0)}},nR=(e,t)=>Nm(Am(Dw(e),Dw(t))),Yd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},xE=e=>lo(e.width)&&lo(e.height)&&lo(e.x)&&lo(e.y),lo=e=>!isNaN(e)&&isFinite(e),U8=(e,t)=>{},Rm=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Hf=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?Rm(a,s):a},pg=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Vl(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}function W8(e,t,n){var r,i,o,s,a,l,u,c;if(typeof e=="string"||typeof e=="number"){const f=Vl(e,n),h=Vl(e,t);return{top:f,right:h,bottom:f,left:h,x:h*2,y:f*2}}if(typeof e=="object"){const f=Vl((i=(r=e.top)!=null?r:e.y)!=null?i:0,n),h=Vl((s=(o=e.bottom)!=null?o:e.y)!=null?s:0,n),p=Vl((l=(a=e.left)!=null?a:e.x)!=null?l:0,t),b=Vl((c=(u=e.right)!=null?u:e.x)!=null?c:0,t);return{top:f,right:b,bottom:h,left:p,x:p+b,y:f+h}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function V8(e,t,n,r,i,o){const{x:s,y:a}=pg(e,[t,n,r]),{x:l,y:u}=pg({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,f=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(f)}}const px=(e,t,n,r,i,o)=>{const s=W8(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=Du(u,r,i),f=e.x+e.width/2,h=e.y+e.height/2,p=t/2-f*c,b=n/2-h*c,y=V8(e,p,b,c,t,n),_={left:Math.min(y.left-s.left,0),top:Math.min(y.top-s.top,0),right:Math.min(y.right-s.right,0),bottom:Math.min(y.bottom-s.bottom,0)};return{x:p-_.left+_.right,y:b-_.top+_.bottom,zoom:c}},gg=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Bu(e){return e!==void 0&&e!=="parent"}function Ms(e){var t,n,r,i,o,s,a,l;return{width:(i=(r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!=null?i:0,height:(l=(a=(s=(o=e.measured)==null?void 0:o.height)!=null?s:e.height)!=null?a:e.initialHeight)!=null?l:0}}function rR(e){var t,n,r,i,o,s;return((r=(n=(t=e.measured)==null?void 0:t.width)!=null?n:e.width)!=null?r:e.initialWidth)!==void 0&&((s=(o=(i=e.measured)==null?void 0:i.height)!=null?o:e.height)!=null?s:e.initialHeight)!==void 0}function iR(e,t={width:0,height:0},n,r,i){var a,l;const o={...e},s=r.get(n);if(s){const u=s.origin||i;o.x+=s.internals.positionAbsolute.x-((a=t.width)!=null?a:0)*u[0],o.y+=s.internals.positionAbsolute.y-((l=t.height)!=null?l:0)*u[1]}return o}function SE(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function q8(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function vd(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){var c,f;const{x:o,y:s}=xs(e),a=Hf({x:o-((c=i==null?void 0:i.left)!=null?c:0),y:s-((f=i==null?void 0:i.top)!=null?f:0)},r),{x:l,y:u}=n?Rm(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const gx=e=>({width:e.offsetWidth,height:e.offsetHeight}),oR=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},K8=["INPUT","SELECT","TEXTAREA"];function sR(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:K8.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const aR=e=>"clientX"in e,xs=(e,t)=>{var o,s,a,l;const n=aR(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((a=t==null?void 0:t.left)!=null?a:0),y:i-((l=t==null?void 0:t.top)!=null?l:0)}},EE=(e,t,n,r,i)=>{const o=t.querySelectorAll(".".concat(e));return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...gx(s)}})};function lR({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,c=Math.abs(l-e),f=Math.abs(u-t);return[l,u,c,f]}function Dh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function kE({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case ye.Left:return[t-Dh(t-r,o),n];case ye.Right:return[t+Dh(r-t,o),n];case ye.Top:return[t,n-Dh(n-i,o)];case ye.Bottom:return[t,n+Dh(i-n,o)]}}function uR({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top,curvature:s=.25}){const[a,l]=kE({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,c]=kE({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[f,h,p,b]=lR({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return["M".concat(e,",").concat(t," C").concat(a,",").concat(l," ").concat(u,",").concat(c," ").concat(r,",").concat(i),f,h,p,b]}function cR({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function G8({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function Y8({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=Am(hg(e),hg(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Yd(s,Nm(o))>0}const X8=({source:e,sourceHandle:t,target:n,targetHandle:r})=>"xy-edge__".concat(e).concat(t||"","-").concat(n).concat(r||""),J8=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),dR=(e,t)=>{if(!e.source||!e.target)return t;let n;return JN(e)?n={...e}:n={...e,id:X8(e)},J8(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function fR({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=cR({sourceX:e,sourceY:t,targetX:n,targetY:r});return["M ".concat(e,",").concat(t,"L ").concat(n,",").concat(r),i,o,s,a]}const CE={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},Q8=({source:e,sourcePosition:t=ye.Bottom,target:n})=>t===ye.Left||t===ye.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},jE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Z8({source:e,sourcePosition:t=ye.Bottom,target:n,targetPosition:r=ye.Top,center:i,offset:o}){var T,P;const s=CE[t],a=CE[r],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=Q8({source:l,sourcePosition:t,target:u}),f=c.x!==0?"x":"y",h=c[f];let p=[],b,y;const _={x:0,y:0},m={x:0,y:0},[v,w,S,k]=cR({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){b=(T=i.x)!=null?T:v,y=(P=i.y)!=null?P:w;const Y=[{x:b,y:l.y},{x:b,y:u.y}],D=[{x:l.x,y},{x:u.x,y}];s[f]===h?p=f==="x"?Y:D:p=f==="x"?D:Y}else{const Y=[{x:l.x,y:u.y}],D=[{x:u.x,y:l.y}];if(f==="x"?p=s.x===h?D:Y:p=s.y===h?Y:D,t===r){const te=Math.abs(e[f]-n[f]);if(te<=o){const Z=Math.min(o-1,o-te);s[f]===h?_[f]=(l[f]>e[f]?-1:1)*Z:m[f]=(u[f]>n[f]?-1:1)*Z}}if(t!==r){const te=f==="x"?"y":"x",Z=s[f]===a[te],oe=l[te]>u[te],z=l[te]<u[te];(s[f]===1&&(!Z&&oe||Z&&z)||s[f]!==1&&(!Z&&z||Z&&oe))&&(p=f==="x"?Y:D)}const H={x:l.x+_.x,y:l.y+_.y},Q={x:u.x+m.x,y:u.y+m.y},U=Math.max(Math.abs(H.x-p[0].x),Math.abs(Q.x-p[0].x)),L=Math.max(Math.abs(H.y-p[0].y),Math.abs(Q.y-p[0].y));U>=L?(b=(H.x+Q.x)/2,y=p[0].y):(b=p[0].x,y=(H.y+Q.y)/2)}return[[e,{x:l.x+_.x,y:l.y+_.y},...p,{x:u.x+m.x,y:u.y+m.y},n],b,y,S,k]}function eB(e,t,n,r){const i=Math.min(jE(e,t)/2,jE(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return"L".concat(o," ").concat(s);if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return"L ".concat(o+i*u,",").concat(s,"Q ").concat(o,",").concat(s," ").concat(o,",").concat(s+i*c)}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(o,",").concat(s+i*l,"Q ").concat(o,",").concat(s," ").concat(o+i*a,",").concat(s)}function Lw({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20}){const[c,f,h,p,b]=Z8({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u});return[c.reduce((_,m,v)=>{let w="";return v>0&&v<c.length-1?w=eB(c[v-1],m,c[v+1],s):w="".concat(v===0?"M":"L").concat(m.x," ").concat(m.y),_+=w,_},""),f,h,p,b]}function AE(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function tB(e){var f,h,p,b,y;const{sourceNode:t,targetNode:n}=e;if(!AE(t)||!AE(n))return null;const r=t.internals.handleBounds||NE(t.handles),i=n.internals.handleBounds||NE(n.handles),o=RE((f=r==null?void 0:r.source)!=null?f:[],e.sourceHandle),s=RE(e.connectionMode===Mu.Strict?(h=i==null?void 0:i.target)!=null?h:[]:((p=i==null?void 0:i.target)!=null?p:[]).concat((b=i==null?void 0:i.source)!=null?b:[]),e.targetHandle);if(!o||!s)return(y=e.onError)==null||y.call(e,"008",mo.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||ye.Bottom,l=(s==null?void 0:s.position)||ye.Top,u=Xd(t,o,a),c=Xd(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function NE(e){var r,i;if(!e)return null;const t=[],n=[];for(const o of e)o.width=(r=o.width)!=null?r:1,o.height=(i=o.height)!=null?i:1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Xd(e,t,n=ye.Left,r=!1){var u,c,f;const i=((u=t==null?void 0:t.x)!=null?u:0)+e.internals.positionAbsolute.x,o=((c=t==null?void 0:t.y)!=null?c:0)+e.internals.positionAbsolute.y,{width:s,height:a}=t!=null?t:Ms(e);if(r)return{x:i+s/2,y:o+a/2};switch((f=t==null?void 0:t.position)!=null?f:n){case ye.Top:return{x:i+s/2,y:o};case ye.Right:return{x:i+s,y:o+a/2};case ye.Bottom:return{x:i+s/2,y:o+a};case ye.Left:return{x:i,y:o+a/2}}}function RE(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Bw(e,t){if(!e)return"";if(typeof e=="string")return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map(r=>"".concat(r,"=").concat(e[r])).join("&"))}function nB(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=Bw(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const mx={nodeOrigin:[0,0],nodeExtent:Kd,elevateNodesOnSelect:!0,defaults:{}},rB={...mx,checkEquality:!0};function yx(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function iB(e,t,n){const r=yx(mx,n);for(const i of e.values())if(i.parentId)vx(i,e,t,r);else{const o=Ff(i,r.nodeOrigin),s=Bu(i.extent)?i.extent:r.nodeExtent,a=vl(o,s,Ms(i));i.internals.positionAbsolute=a}}function Fw(e,t,n,r){var l,u;const i=yx(rB,r);let o=e.length>0;const s=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let f=s.get(c.id);if(i.checkEquality&&c===(f==null?void 0:f.internals.userNode))t.set(c.id,f);else{const h=Ff(c,i.nodeOrigin),p=Bu(c.extent)?c.extent:i.nodeExtent,b=vl(h,p,Ms(c));f={...i.defaults,...c,measured:{width:(l=c.measured)==null?void 0:l.width,height:(u=c.measured)==null?void 0:u.height},internals:{positionAbsolute:b,handleBounds:c.measured?f==null?void 0:f.internals.handleBounds:void 0,z:hR(c,a),userNode:c}},t.set(c.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(o=!1),c.parentId&&vx(f,t,n,r)}return o}function oB(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function vx(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=yx(mx,r),a=e.parentId,l=t.get(a);if(!l){console.warn("Parent node ".concat(a," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));return}oB(e,n);const u=i?1e3:0,{x:c,y:f,z:h}=sB(e,l,o,s,u),{positionAbsolute:p}=e.internals,b=c!==p.x||f!==p.y;(b||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:b?{x:c,y:f}:p,z:h}})}function hR(e,t){return(lo(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function sB(e,t,n,r,i){var p;const{x:o,y:s}=t.internals.positionAbsolute,a=Ms(e),l=Ff(e,n),u=Bu(e.extent)?vl(l,e.extent,a):l;let c=vl({x:o+u.x,y:s+u.y},r,a);e.extent==="parent"&&(c=eR(c,a,t));const f=hR(e,i),h=(p=t.internals.z)!=null?p:0;return{x:c.x,y:c.y,z:h>f?h:f}}function wx(e,t,n,r=[0,0]){var s,a;const i=[],o=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const c=(a=(s=o.get(l.parentId))==null?void 0:s.expandedRect)!=null?a:Lu(u),f=nR(c,l.rect);o.set(l.parentId,{expandedRect:f,parent:u})}return o.size>0&&o.forEach(({expandedRect:l,parent:u},c)=>{var S,k;const f=u.internals.positionAbsolute,h=Ms(u),p=(S=u.origin)!=null?S:r,b=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,y=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0,_=Math.max(h.width,Math.round(l.width)),m=Math.max(h.height,Math.round(l.height)),v=(_-h.width)*p[0],w=(m-h.height)*p[1];(b>0||y>0||v||w)&&(i.push({id:c,type:"position",position:{x:u.position.x-b+v,y:u.position.y-y+w}}),(k=n.get(c))==null||k.forEach(A=>{e.some(T=>T.id===A.id)||i.push({id:A.id,type:"position",position:{x:A.position.x+b,y:A.position.y+y}})})),(h.width<l.width||h.height<l.height||b||y)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?p[0]*b-v:0),height:m+(y?p[1]*y-w:0)}})}),i}function aB(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const h of e.values()){const p=t.get(h.id);if(!p)continue;if(p.hidden){t.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),a=!0;continue}const b=gx(h.nodeElement),y=p.measured.width!==b.width||p.measured.height!==b.height;if(!!(b.width&&b.height&&(y||!p.internals.handleBounds||h.force))){const m=h.nodeElement.getBoundingClientRect(),v=Bu(p.extent)?p.extent:o;let{positionAbsolute:w}=p.internals;p.parentId&&p.extent==="parent"?w=eR(w,b,t.get(p.parentId)):v&&(w=vl(w,v,b));const S={...p,measured:b,internals:{...p.internals,positionAbsolute:w,handleBounds:{source:EE("source",h.nodeElement,m,c,p.id),target:EE("target",h.nodeElement,m,c,p.id)}}};t.set(p.id,S),p.parentId&&vx(S,t,n,{nodeOrigin:i}),a=!0,y&&(l.push({id:p.id,type:"dimensions",dimensions:b}),p.expandParent&&p.parentId&&f.push({id:p.id,parentId:p.parentId,rect:Lu(S,i)}))}}if(f.length>0){const h=wx(f,t,n,i);l.push(...h)}return{changes:l,updatedInternals:a}}async function lB({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function TE(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s="".concat(i,"-").concat(e);const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s="".concat(i,"-").concat(e,"-").concat(o);const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function pR(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},u="".concat(i,"-").concat(s,"--").concat(o,"-").concat(a),c="".concat(o,"-").concat(a,"--").concat(i,"-").concat(s);TE("source",l,c,e,i,s),TE("target",l,u,e,o,a),t.set(r.id,r)}}function uB(e,t){if(e===null||t===null)return!1;const n=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].id!==r[i].id||n[i].type!==r[i].type||!Object.is(n[i].data,r[i].data))return!1;return!0}function gR(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:gR(n,t):!1}function IE(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function cB(e,t,n,r){var o,s;const i=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!gR(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(a);u&&i.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:(o=u.measured.width)!=null?o:0,height:(s=u.measured.height)!=null?s:0}})}return i}function x0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[u,c]of t){const f=(s=n.get(u))==null?void 0:s.internals.userNode;f&&i.push({...f,position:c.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function dB({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},c=null,f=!1,h=null,p=!1;function b({noDragClassName:_,handleSelector:m,domNode:v,isSelectable:w,nodeId:S,nodeClickDistance:k=0}){h=vi(v);function A({x:D,y:H},Q){const{nodeLookup:U,nodeExtent:L,snapGrid:te,snapToGrid:Z,nodeOrigin:oe,onNodeDrag:z,onSelectionDrag:V,onError:$,updateNodePositions:X}=t();o={x:D,y:H};let ue=!1,ce={x:0,y:0,x2:0,y2:0};if(a.size>1&&L){const Ce=zf(a);ce=Dw(Ce)}for(const[Ce,Pe]of a){if(!U.has(Ce))continue;let Me={x:D-Pe.distance.x,y:H-Pe.distance.y};Z&&(Me=Rm(Me,te));let B=[[L[0][0],L[0][1]],[L[1][0],L[1][1]]];if(a.size>1&&L&&!Pe.extent){const{positionAbsolute:De}=Pe.internals,Ye=De.x-ce.x+L[0][0],He=De.x+Pe.measured.width-ce.x2+L[1][0],ne=De.y-ce.y+L[0][1],he=De.y+Pe.measured.height-ce.y2+L[1][1];B=[[Ye,ne],[He,he]]}const{position:J,positionAbsolute:re}=ZN({nodeId:Ce,nextPosition:Me,nodeLookup:U,nodeExtent:B,nodeOrigin:oe,onError:$});ue=ue||Pe.position.x!==J.x||Pe.position.y!==J.y,Pe.position=J,Pe.internals.positionAbsolute=re}if(ue&&(X(a,!0),Q&&(r||z||!S&&V))){const[Ce,Pe]=x0({nodeId:S,dragItems:a,nodeLookup:U});r==null||r(Q,a,Ce,Pe),z==null||z(Q,Ce,Pe),S||V==null||V(Q,Pe)}}async function T(){var Z,oe;if(!c)return;const{transform:D,panBy:H,autoPanSpeed:Q,autoPanOnNodeDrag:U}=t();if(!U){l=!1,cancelAnimationFrame(s);return}const[L,te]=tR(u,c,Q);(L!==0||te!==0)&&(o.x=((Z=o.x)!=null?Z:0)-L/D[2],o.y=((oe=o.y)!=null?oe:0)-te/D[2],await H({x:L,y:te})&&A(o,null)),s=requestAnimationFrame(T)}function P(D){var ue;const{nodeLookup:H,multiSelectionActive:Q,nodesDraggable:U,transform:L,snapGrid:te,snapToGrid:Z,selectNodesOnDrag:oe,onNodeDragStart:z,onSelectionDragStart:V,unselectNodesAndEdges:$}=t();f=!0,(!oe||!w)&&!Q&&S&&((ue=H.get(S))!=null&&ue.selected||$()),w&&oe&&S&&(e==null||e(S));const X=vd(D.sourceEvent,{transform:L,snapGrid:te,snapToGrid:Z,containerBounds:c});if(o=X,a=cB(H,U,X,S),a.size>0&&(n||z||!S&&V)){const[ce,Ce]=x0({nodeId:S,dragItems:a,nodeLookup:H});n==null||n(D.sourceEvent,a,ce,Ce),z==null||z(D.sourceEvent,ce,Ce),S||V==null||V(D.sourceEvent,Ce)}}const Y=IN().clickDistance(k).on("start",D=>{const{domNode:H,nodeDragThreshold:Q,transform:U,snapGrid:L,snapToGrid:te}=t();c=(H==null?void 0:H.getBoundingClientRect())||null,p=!1,Q===0&&P(D),o=vd(D.sourceEvent,{transform:U,snapGrid:L,snapToGrid:te,containerBounds:c}),u=xs(D.sourceEvent,c)}).on("drag",D=>{var z,V;const{autoPanOnNodeDrag:H,transform:Q,snapGrid:U,snapToGrid:L,nodeDragThreshold:te,nodeLookup:Z}=t(),oe=vd(D.sourceEvent,{transform:Q,snapGrid:U,snapToGrid:L,containerBounds:c});if((D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||S&&!Z.has(S))&&(p=!0),!p){if(!l&&H&&f&&(l=!0,T()),!f){const $=oe.xSnapped-((z=o.x)!=null?z:0),X=oe.ySnapped-((V=o.y)!=null?V:0);Math.sqrt($*$+X*X)>te&&P(D)}(o.x!==oe.xSnapped||o.y!==oe.ySnapped)&&a&&f&&(u=xs(D.sourceEvent,c),A(oe,D.sourceEvent))}}).on("end",D=>{if(!(!f||p)&&(l=!1,f=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:H,updateNodePositions:Q,onNodeDragStop:U,onSelectionDragStop:L}=t();if(Q(a,!1),i||U||!S&&L){const[te,Z]=x0({nodeId:S,dragItems:a,nodeLookup:H,dragging:!1});i==null||i(D.sourceEvent,a,te,Z),U==null||U(D.sourceEvent,te,Z),S||L==null||L(D.sourceEvent,Z)}}}).filter(D=>{const H=D.target;return!D.button&&(!_||!IE(H,".".concat(_),v))&&(!m||IE(H,m,v))});h.call(Y)}function y(){h==null||h.on(".drag",null)}return{update:b,destroy:y}}function fB(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Yd(i,Lu(o))>0&&r.push(o);return r}const hB=250;function pB(e,t,n,r){var a,l,u,c,f;let i=[],o=1/0;const s=fB(e,n,t+hB);for(const h of s){const p=[...(l=(a=h.internals.handleBounds)==null?void 0:a.source)!=null?l:[],...(c=(u=h.internals.handleBounds)==null?void 0:u.target)!=null?c:[]];for(const b of p){if(r.nodeId===b.nodeId&&r.type===b.type&&r.id===b.id)continue;const{x:y,y:_}=Xd(h,b,b.position,!0),m=Math.sqrt(Math.pow(y-e.x,2)+Math.pow(_-e.y,2));m>t||(m<o?(i=[{...b,x:y,y:_}],o=m):m===o&&i.push({...b,x:y,y:_}))}}if(!i.length)return null;if(i.length>1){const h=r.type==="source"?"target":"source";return(f=i.find(p=>p.type===h))!=null?f:i[0]}return i[0]}function mR(e,t,n,r,i,o=!1){var u,c,f,h,p,b;const s=r.get(e);if(!s)return null;const a=i==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...(f=(c=s.internals.handleBounds)==null?void 0:c.source)!=null?f:[],...(p=(h=s.internals.handleBounds)==null?void 0:h.target)!=null?p:[]],l=(b=n?a==null?void 0:a.find(y=>y.id===n):a==null?void 0:a[0])!=null?b:null;return l&&o?{...l,...Xd(s,l,l.position,!0)}:l}function yR(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function gB(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const vR=()=>!0;function mB(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:f,panBy:h,cancelConnection:p,onConnectStart:b,onConnect:y,onConnectEnd:_,isValidConnection:m=vR,onReconnectEnd:v,updateConnection:w,getTransform:S,getFromHandle:k,autoPanSpeed:A}){const T=oR(e.target);let P=0,Y;const{x:D,y:H}=xs(e),Q=T==null?void 0:T.elementFromPoint(D,H),U=yR(o,Q),L=a==null?void 0:a.getBoundingClientRect();if(!L||!U)return;const te=mR(i,U,r,l,t);if(!te)return;let Z=xs(e,L),oe=!1,z=null,V=!1,$=null;function X(){if(!c||!L)return;const[re,De]=tR(Z,L,A);h({x:re,y:De}),P=requestAnimationFrame(X)}const ue={...te,nodeId:i,type:U,position:te.position},ce=l.get(i),Pe={inProgress:!0,isValid:null,from:Xd(ce,ue,ye.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:ce,to:Z,toHandle:null,toPosition:wE[ue.position],toNode:null};w(Pe);let Me=Pe;b==null||b(e,{nodeId:i,handleId:r,handleType:U});function B(re){if(!k()||!ue){J(re);return}const De=S();Z=xs(re,L),Y=pB(Hf(Z,De,!1,[1,1]),n,l,ue),oe||(X(),oe=!0);const Ye=wR(re,{handle:Y,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:m,doc:T,lib:u,flowId:f,nodeLookup:l});$=Ye.handleDomNode,z=Ye.connection,V=gB(!!Y,Ye.isValid);const He={...Me,isValid:V,to:Y&&V?pg({x:Y.x,y:Y.y},De):Z,toHandle:Ye.toHandle,toPosition:V&&Ye.toHandle?Ye.toHandle.position:wE[ue.position],toNode:Ye.toHandle?l.get(Ye.toHandle.nodeId):null};V&&Y&&Me.toHandle&&He.toHandle&&Me.toHandle.type===He.toHandle.type&&Me.toHandle.nodeId===He.toHandle.nodeId&&Me.toHandle.id===He.toHandle.id&&Me.to.x===He.to.x&&Me.to.y===He.to.y||(w(He),Me=He)}function J(re){(Y||$)&&z&&V&&(y==null||y(z));const{inProgress:De,...Ye}=Me,He={...Ye,toPosition:Me.toHandle?Me.toPosition:null};_==null||_(re,He),o&&(v==null||v(re,He)),p(),cancelAnimationFrame(P),oe=!1,V=!1,z=null,$=null,T.removeEventListener("mousemove",B),T.removeEventListener("mouseup",J),T.removeEventListener("touchmove",B),T.removeEventListener("touchend",J)}T.addEventListener("mousemove",B),T.addEventListener("mouseup",J),T.addEventListener("touchmove",B),T.addEventListener("touchend",J)}function wR(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=vR,nodeLookup:c}){const f=o==="target",h=t?s.querySelector(".".concat(a,'-flow__handle[data-id="').concat(l,"-").concat(t==null?void 0:t.nodeId,"-").concat(t==null?void 0:t.id,"-").concat(t==null?void 0:t.type,'"]')):null,{x:p,y:b}=xs(e),y=s.elementFromPoint(p,b),_=y!=null&&y.classList.contains("".concat(a,"-flow__handle"))?y:h,m={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const v=yR(void 0,_),w=_.getAttribute("data-nodeid"),S=_.getAttribute("data-handleid"),k=_.classList.contains("connectable"),A=_.classList.contains("connectableend");if(!w||!v)return m;const T={source:f?w:r,sourceHandle:f?S:i,target:f?r:w,targetHandle:f?i:S};m.connection=T;const Y=k&&A&&(n===Mu.Strict?f&&v==="source"||!f&&v==="target":w!==r||S!==i);m.isValid=Y&&u(T),m.toHandle=mR(w,v,S,c,n,!1)}return m}const zw={onPointerDown:mB,isValid:wR};function yB({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=vi(e);function o({translateExtent:a,width:l,height:u,zoomStep:c=10,pannable:f=!0,zoomable:h=!0,inversePan:p=!1}){const b=w=>{const S=n();if(w.sourceEvent.type!=="wheel"||!t)return;const k=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*c,A=S[2]*Math.pow(2,k);t.scaleTo(A)};let y=[0,0];const _=w=>{var S,k;(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(y=[(S=w.sourceEvent.clientX)!=null?S:w.sourceEvent.touches[0].clientX,(k=w.sourceEvent.clientY)!=null?k:w.sourceEvent.touches[0].clientY])},m=w=>{var D,H;const S=n();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!t)return;const k=[(D=w.sourceEvent.clientX)!=null?D:w.sourceEvent.touches[0].clientX,(H=w.sourceEvent.clientY)!=null?H:w.sourceEvent.touches[0].clientY],A=[k[0]-y[0],k[1]-y[1]];y=k;const T=r()*Math.max(S[2],Math.log(S[2]))*(p?-1:1),P={x:S[0]-A[0]*T,y:S[1]-A[1]*T},Y=[[0,0],[l,u]];t.setViewportConstrained({x:P.x,y:P.y,zoom:S[2]},Y,a)},v=KN().on("start",_).on("zoom",f?m:null).on("zoom.wheel",h?b:null);i.call(v,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:ro}}const vB=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Tm=e=>({x:e.x,y:e.y,zoom:e.k}),S0=({x:e,y:t,zoom:n})=>jm.translate(e,t).scale(n),uu=(e,t)=>e.target.closest(".".concat(t)),bR=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),E0=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},_R=e=>{const t=e.ctrlKey&&gg()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function wB({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(uu(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(c.ctrlKey&&s){const _=ro(c),m=_R(c),v=f*Math.pow(2,m);r.scaleTo(n,v,_,c);return}const h=c.deltaMode===1?20:1;let p=i===ul.Vertical?0:c.deltaX*h,b=i===ul.Horizontal?0:c.deltaY*h;!gg()&&c.shiftKey&&i!==ul.Vertical&&(p=c.deltaY*h,b=0),r.translateBy(n,-(p/f)*o,-(b/f)*o,{internal:!0});const y=Tm(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(c,y)),e.isPanScrolling&&(l==null||l(c,y),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,y),e.isPanScrolling=!1},150))}}function bB({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=uu(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function _B({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=Tm(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function xB({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a,l;e.usedRightMouseButton=!!(n&&bR(t,(s=e.mouseButton)!=null?s:0)),(a=o.sourceEvent)!=null&&a.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((l=o.sourceEvent)!=null&&l.internal)&&(i==null||i(o.sourceEvent,Tm(o.transform)))}}function SB({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a,l;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&bR(t,(l=e.mouseButton)!=null?l:0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&vB(e.prevViewport,s.transform))){const u=Tm(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function EB({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u}){return c=>{var b;const f=e||t,h=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(uu(c,"".concat(u,"-flow__node"))||uu(c,"".concat(u,"-flow__edge"))))return!0;if(!r&&!f&&!i&&!o&&!n||s||uu(c,a)&&c.type==="wheel"||uu(c,l)&&(c.type!=="wheel"||i&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((b=c.touches)==null?void 0:b.length)>1)return c.preventDefault(),!1;if(!f&&!i&&!h&&c.type==="wheel"||!r&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(r)&&!r.includes(c.button)&&c.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&p}}function kB({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=KN().clickDistance(!lo(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),p=vi(e).call(h);w({x:o.x,y:o.y,zoom:Du(o.zoom,t,n)},[[0,0],[f.width,f.height]],i);const b=p.on("wheel.zoom"),y=p.on("dblclick.zoom");h.wheelDelta(_R);function _(Q,U){return p?new Promise(L=>{h==null||h.transform(E0(p,U==null?void 0:U.duration,()=>L(!0)),Q)}):Promise.resolve(!1)}function m({noWheelClassName:Q,noPanClassName:U,onPaneContextMenu:L,userSelectionActive:te,panOnScroll:Z,panOnDrag:oe,panOnScrollMode:z,panOnScrollSpeed:V,preventScrolling:$,zoomOnPinch:X,zoomOnScroll:ue,zoomOnDoubleClick:ce,zoomActivationKeyPressed:Ce,lib:Pe,onTransformChange:Me}){te&&!c.isZoomingOrPanning&&v();const J=Z&&!Ce&&!te?wB({zoomPanValues:c,noWheelClassName:Q,d3Selection:p,d3Zoom:h,panOnScrollMode:z,panOnScrollSpeed:V,zoomOnPinch:X,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):bB({noWheelClassName:Q,preventScrolling:$,d3ZoomHandler:b});if(p.on("wheel.zoom",J,{passive:!1}),!te){const De=_B({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:a});h.on("start",De);const Ye=xB({zoomPanValues:c,panOnDrag:oe,onPaneContextMenu:!!L,onPanZoom:s,onTransformChange:Me});h.on("zoom",Ye);const He=SB({zoomPanValues:c,panOnDrag:oe,panOnScroll:Z,onPaneContextMenu:L,onPanZoomEnd:l,onDraggingChange:u});h.on("end",He)}const re=EB({zoomActivationKeyPressed:Ce,panOnDrag:oe,zoomOnScroll:ue,panOnScroll:Z,zoomOnDoubleClick:ce,zoomOnPinch:X,userSelectionActive:te,noPanClassName:U,noWheelClassName:Q,lib:Pe});h.filter(re),ce?p.on("dblclick.zoom",y):p.on("dblclick.zoom",null)}function v(){h.on("zoom",null)}async function w(Q,U,L){const te=S0(Q),Z=h==null?void 0:h.constrain()(te,U,L);return Z&&await _(Z),new Promise(oe=>oe(Z))}async function S(Q,U){const L=S0(Q);return await _(L,U),new Promise(te=>te(L))}function k(Q){if(p){const U=S0(Q),L=p.property("__zoom");(L.k!==Q.zoom||L.x!==Q.x||L.y!==Q.y)&&(h==null||h.transform(p,U,null,{sync:!0}))}}function A(){const Q=p?qN(p.node()):{x:0,y:0,k:1};return{x:Q.x,y:Q.y,zoom:Q.k}}function T(Q,U){return p?new Promise(L=>{h==null||h.scaleTo(E0(p,U==null?void 0:U.duration,()=>L(!0)),Q)}):Promise.resolve(!1)}function P(Q,U){return p?new Promise(L=>{h==null||h.scaleBy(E0(p,U==null?void 0:U.duration,()=>L(!0)),Q)}):Promise.resolve(!1)}function Y(Q){h==null||h.scaleExtent(Q)}function D(Q){h==null||h.translateExtent(Q)}function H(Q){const U=!lo(Q)||Q<0?0:Q;h==null||h.clickDistance(U)}return{update:m,destroy:v,setViewport:S,setViewportConstrained:w,getViewport:A,scaleTo:T,scaleBy:P,setScaleExtent:Y,setTranslateExtent:D,syncViewport:k,setClickDistance:H}}var wd;(function(e){e.Line="line",e.Handle="handle"})(wd||(wd={}));function CB({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function jB(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Vs(e,t){return Math.max(0,t-e)}function qs(e,t){return Math.max(0,e-t)}function Lh(e,t,n){return Math.max(0,t-e,e-n)}function PE(e,t){return e?!t:t}function AB(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:u}=t;const{isHorizontal:c,isVertical:f}=t,h=c&&f,{xSnapped:p,ySnapped:b}=n,{minWidth:y,maxWidth:_,minHeight:m,maxHeight:v}=r,{x:w,y:S,width:k,height:A,aspectRatio:T}=e;let P=Math.floor(c?p-e.pointerX:0),Y=Math.floor(f?b-e.pointerY:0);const D=k+(l?-P:P),H=A+(u?-Y:Y),Q=-o[0]*k,U=-o[1]*A;let L=Lh(D,y,_),te=Lh(H,m,v);if(s){let z=0,V=0;l&&P<0?z=Vs(w+P+Q,s[0][0]):!l&&P>0&&(z=qs(w+D+Q,s[1][0])),u&&Y<0?V=Vs(S+Y+U,s[0][1]):!u&&Y>0&&(V=qs(S+H+U,s[1][1])),L=Math.max(L,z),te=Math.max(te,V)}if(a){let z=0,V=0;l&&P>0?z=qs(w+P,a[0][0]):!l&&P<0&&(z=Vs(w+D,a[1][0])),u&&Y>0?V=qs(S+Y,a[0][1]):!u&&Y<0&&(V=Vs(S+H,a[1][1])),L=Math.max(L,z),te=Math.max(te,V)}if(i){if(c){const z=Lh(D/T,m,v)*T;if(L=Math.max(L,z),s){let V=0;!l&&!u||l&&!u&&h?V=qs(S+U+D/T,s[1][1])*T:V=Vs(S+U+(l?P:-P)/T,s[0][1])*T,L=Math.max(L,V)}if(a){let V=0;!l&&!u||l&&!u&&h?V=Vs(S+D/T,a[1][1])*T:V=qs(S+(l?P:-P)/T,a[0][1])*T,L=Math.max(L,V)}}if(f){const z=Lh(H*T,y,_)/T;if(te=Math.max(te,z),s){let V=0;!l&&!u||u&&!l&&h?V=qs(w+H*T+Q,s[1][0])/T:V=Vs(w+(u?Y:-Y)*T+Q,s[0][0])/T,te=Math.max(te,V)}if(a){let V=0;!l&&!u||u&&!l&&h?V=Vs(w+H*T,a[1][0])/T:V=qs(w+(u?Y:-Y)*T,a[0][0])/T,te=Math.max(te,V)}}}Y=Y+(Y<0?te:-te),P=P+(P<0?L:-L),i&&(h?D>H*T?Y=(PE(l,u)?-P:P)/T:P=(PE(l,u)?-Y:Y)*T:c?(Y=P/T,u=l):(P=Y*T,l=u));const Z=l?w+P:w,oe=u?S+Y:S;return{width:k+(l?-P:P),height:A+(u?-Y:Y),x:o[0]*P*(l?-1:1)+Z,y:o[1]*Y*(u?-1:1)+oe}}const xR={width:0,height:0,x:0,y:0},NB={...xR,pointerX:0,pointerY:0,aspectRatio:1};function RB(e){return[[0,0],[e.measured.width,e.measured.height]]}function TB(e,t,n){var u,c;const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=(u=e.measured.width)!=null?u:0,s=(c=e.measured.height)!=null?c:0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function IB({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=vi(e);function s({controlPosition:l,boundaries:u,keepAspectRatio:c,resizeDirection:f,onResizeStart:h,onResize:p,onResizeEnd:b,shouldResize:y}){let _={...xR},m={...NB};const v=jB(l);let w,S=null,k=[],A,T,P;const Y=IN().on("start",D=>{var V,$,X,ue,ce,Ce;const{nodeLookup:H,transform:Q,snapGrid:U,snapToGrid:L,nodeOrigin:te,paneDomNode:Z}=n();if(w=H.get(t),!w)return;S=(V=Z==null?void 0:Z.getBoundingClientRect())!=null?V:null;const{xSnapped:oe,ySnapped:z}=vd(D.sourceEvent,{transform:Q,snapGrid:U,snapToGrid:L,containerBounds:S});_={width:($=w.measured.width)!=null?$:0,height:(X=w.measured.height)!=null?X:0,x:(ue=w.position.x)!=null?ue:0,y:(ce=w.position.y)!=null?ce:0},m={..._,pointerX:oe,pointerY:z,aspectRatio:_.width/_.height},A=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(A=H.get(w.parentId),T=A&&w.extent==="parent"?RB(A):void 0),k=[],P=void 0;for(const[Pe,Me]of H)if(Me.parentId===t&&(k.push({id:Pe,position:{...Me.position},extent:Me.extent}),Me.extent==="parent"||Me.expandParent)){const B=TB(Me,w,(Ce=Me.origin)!=null?Ce:te);P?P=[[Math.min(B[0][0],P[0][0]),Math.min(B[0][1],P[0][1])],[Math.max(B[1][0],P[1][0]),Math.max(B[1][1],P[1][1])]]:P=B}h==null||h(D,{..._})}).on("drag",D=>{var he,Se,Ue;const{transform:H,snapGrid:Q,snapToGrid:U,nodeOrigin:L}=n(),te=vd(D.sourceEvent,{transform:H,snapGrid:Q,snapToGrid:U,containerBounds:S}),Z=[];if(!w)return;const{x:oe,y:z,width:V,height:$}=_,X={},ue=(he=w.origin)!=null?he:L,{width:ce,height:Ce,x:Pe,y:Me}=AB(m,v,te,u,c,ue,T,P),B=ce!==V,J=Ce!==$,re=Pe!==oe&&B,De=Me!==z&&J;if(!re&&!De&&!B&&!J)return;if((re||De||ue[0]===1||ue[1]===1)&&(X.x=re?Pe:_.x,X.y=De?Me:_.y,_.x=X.x,_.y=X.y,k.length>0)){const We=Pe-oe,Ke=Me-z;for(const fe of k)fe.position={x:fe.position.x-We+ue[0]*(ce-V),y:fe.position.y-Ke+ue[1]*(Ce-$)},Z.push(fe)}if((B||J)&&(X.width=B&&(!f||f==="horizontal")?ce:_.width,X.height=J&&(!f||f==="vertical")?Ce:_.height,_.width=X.width,_.height=X.height),A&&w.expandParent){const We=ue[0]*((Se=X.width)!=null?Se:0);X.x&&X.x<We&&(_.x=We,m.x=m.x-(X.x-We));const Ke=ue[1]*((Ue=X.height)!=null?Ue:0);X.y&&X.y<Ke&&(_.y=Ke,m.y=m.y-(X.y-Ke))}const Ye=CB({width:_.width,prevWidth:V,height:_.height,prevHeight:$,affectsX:v.affectsX,affectsY:v.affectsY}),He={..._,direction:Ye};(y==null?void 0:y(D,He))!==!1&&(p==null||p(D,He),r(X,Z))}).on("end",D=>{b==null||b(D,{..._}),i==null||i({..._})});o.call(Y)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var SR={exports:{}},ER={},kR={exports:{}},CR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fu=R;function PB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OB=typeof Object.is=="function"?Object.is:PB,$B=Fu.useState,MB=Fu.useEffect,DB=Fu.useLayoutEffect,LB=Fu.useDebugValue;function BB(e,t){var n=t(),r=$B({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return DB(function(){i.value=n,i.getSnapshot=t,k0(i)&&o({inst:i})},[e,n,t]),MB(function(){return k0(i)&&o({inst:i}),e(function(){k0(i)&&o({inst:i})})},[e]),LB(n),n}function k0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!OB(e,n)}catch(r){return!0}}function FB(e,t){return t()}var zB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FB:BB;CR.useSyncExternalStore=Fu.useSyncExternalStore!==void 0?Fu.useSyncExternalStore:zB;kR.exports=CR;var HB=kR.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im=R,UB=HB;function WB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var VB=typeof Object.is=="function"?Object.is:WB,qB=UB.useSyncExternalStore,KB=Im.useRef,GB=Im.useEffect,YB=Im.useMemo,XB=Im.useDebugValue;ER.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=KB(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=YB(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),i!==void 0&&s.hasValue){var b=s.value;if(i(b,p))return f=b}return f=p}if(b=f,VB(c,p))return b;var y=r(p);return i!==void 0&&i(b,y)?(c=p,b):(c=p,f=y)}var u=!1,c,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var a=qB(e,o[0],o[1]);return GB(function(){s.hasValue=!0,s.value=a},[a]),XB(a),a};SR.exports=ER;var JB=SR.exports;const QB=Os(JB),ZB={LEGACY:!1},OE=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=(f!=null?f:typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(b=>b(t,p))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(ZB?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},eF=e=>e?OE(e):OE,{useDebugValue:tF}=It,{useSyncExternalStoreWithSelector:nF}=QB,rF=e=>e;function jR(e,t=rF,n){const r=nF(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return tF(r),r}const $E=(e,t)=>{const n=eF(e),r=(i,o=t)=>jR(n,i,o);return Object.assign(r,n),r},iF=(e,t)=>e?$E(e,t):$E;function Ln(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Pm=R.createContext(null),oF=Pm.Provider,AR=mo.error001();function Qt(e,t){const n=R.useContext(Pm);if(n===null)throw new Error(AR);return jR(n,e,t)}function xn(){const e=R.useContext(Pm);if(e===null)throw new Error(AR);return R.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ME={display:"none"},sF={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},NR="react-flow__node-desc",RR="react-flow__edge-desc",aF="react-flow__aria-live",lF=e=>e.ariaLiveMessage;function uF({rfId:e}){const t=Qt(lF);return d.jsx("div",{id:"".concat(aF,"-").concat(e),"aria-live":"assertive","aria-atomic":"true",style:sF,children:t})}function cF({rfId:e,disableKeyboardA11y:t}){return d.jsxs(d.Fragment,{children:[d.jsxs("div",{id:"".concat(NR,"-").concat(e),style:ME,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),d.jsx("div",{id:"".concat(RR,"-").concat(e),style:ME,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&d.jsx(uF,{rfId:e})]})}const dF=e=>e.userSelectionActive?"none":"all",Uf=R.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},o)=>{const s=Qt(dF),a="".concat(e).split("-");return d.jsx("div",{className:Yn(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:o,...i,children:t})});Uf.displayName="Panel";function fF({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:d.jsx(Uf,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const hF=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Bh=e=>e.id;function pF(e,t){return Ln(e.selectedNodes.map(Bh),t.selectedNodes.map(Bh))&&Ln(e.selectedEdges.map(Bh),t.selectedEdges.map(Bh))}function gF({onSelectionChange:e}){const t=xn(),{selectedNodes:n,selectedEdges:r}=Qt(hF,pF);return R.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(o=>o(i))},[n,r,e]),null}const mF=e=>!!e.onSelectionChangeHandlers;function yF({onSelectionChange:e}){const t=Qt(mF);return e||t?d.jsx(gF,{onSelectionChange:e}):null}const TR=[0,0],vF={x:0,y:0,zoom:1},wF=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],DE=[...wF,"rfId"],bF=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),LE={translateExtent:Kd,nodeOrigin:TR,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function _F(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:o,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:u}=Qt(bF,Ln),c=xn();R.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{f.current=LE,a()}),[]);const f=R.useRef(LE);return R.useEffect(()=>{for(const h of DE){const p=e[h],b=f.current[h];p!==b&&(typeof e[h]>"u"||(h==="nodes"?t(p):h==="edges"?n(p):h==="minZoom"?r(p):h==="maxZoom"?i(p):h==="translateExtent"?o(p):h==="nodeExtent"?s(p):h==="paneClickDistance"?u(p):h==="fitView"?c.setState({fitViewQueued:p}):h==="fitViewOptions"?c.setState({fitViewOptions:p}):c.setState({[h]:p})))}f.current=e},DE.map(h=>e[h])),null}function BE(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function xF(e){var r;const[t,n]=R.useState(e==="system"?null:e);return R.useEffect(()=>{if(e!=="system"){n(e);return}const i=BE(),o=()=>n(i!=null&&i.matches?"dark":"light");return o(),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}},[e]),t!==null?t:(r=BE())!=null&&r.matches?"dark":"light"}const FE=typeof document<"u"?document:null;function Jd(e=null,t={target:FE,actInsideInputWithModifier:!0}){const[n,r]=R.useState(!1),i=R.useRef(!1),o=R.useRef(new Set([])),[s,a]=R.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+","\n").replace("\n\n","\n+").split("\n")),c=u.reduce((f,h)=>f.concat(...h),[]);return[u,c]}return[[],[]]},[e]);return R.useEffect(()=>{const l=(t==null?void 0:t.target)||FE;if(e!==null){const u=h=>{var y,_;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&sR(h))return!1;const b=HE(h.code,a);if(o.current.add(h[b]),zE(s,o.current,!1)){const m=((_=(y=h.composedPath)==null?void 0:y.call(h))==null?void 0:_[0])||h.target,v=(m==null?void 0:m.nodeName)==="BUTTON"||(m==null?void 0:m.nodeName)==="A";t.preventDefault!==!1&&(i.current||!v)&&h.preventDefault(),r(!0)}},c=h=>{const p=HE(h.code,a);zE(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[p]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",c),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",c),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,r]),n}function zE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function HE(e,t){return t.includes(e)?"code":"key"}const SF=()=>{const e=xn();return R.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var a,l,u;const{transform:[r,i,o],panZoom:s}=e.getState();return s?(await s.setViewport({x:(a=t.x)!=null?a:r,y:(l=t.y)!=null?l:i,zoom:(u=t.zoom)!=null?u:o},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:i,height:o,maxZoom:s,panZoom:a}=e.getState(),l=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=i/2-t*l,c=o/2-n*l;return a?(await a.setViewport({x:u,y:c,zoom:l},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var u;const{width:r,height:i,minZoom:o,maxZoom:s,panZoom:a}=e.getState(),l=px(t,r,i,o,s,(u=n==null?void 0:n.padding)!=null?u:.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{var h,p;const{transform:r,snapGrid:i,snapToGrid:o,domNode:s}=e.getState();if(!s)return t;const{x:a,y:l}=s.getBoundingClientRect(),u={x:t.x-a,y:t.y-l},c=(h=n.snapGrid)!=null?h:i,f=(p=n.snapToGrid)!=null?p:o;return Hf(u,r,f,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),s=pg(t,n);return{x:s.x+i,y:s.y+o}}}),[])};function IR(e,t){const n=[],r=new Map,i=[];for(const o of e)if(o.type==="add"){i.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const s=r.get(o.id);s?s.push(o):r.set(o.id,[o])}for(const o of t){const s=r.get(o.id);if(!s){n.push(o);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...o};for(const l of s)EF(l,a);n.push(a)}return i.length&&i.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function EF(e,t){var n;switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&((n=t.measured)!=null||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function PR(e,t){return IR(e,t)}function OR(e,t){return IR(e,t)}function Ya(e,t){return{id:e,type:"select",selected:t}}function cu(e,t=new Set,n=!1){const r=[];for(const[i,o]of e){const s=t.has(i);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),r.push(Ya(o.id,s)))}return r}function UE({items:e=[],lookup:t}){var i,o;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,a]of e.entries()){const l=t.get(a.id),u=(o=(i=l==null?void 0:l.internals)==null?void 0:i.userNode)!=null?o:l;u!==void 0&&u!==a&&n.push({id:a.id,item:a,type:"replace"}),u===void 0&&n.push({item:a,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function WE(e){return{id:e.id,type:"remove"}}const VE=e=>D8(e),kF=e=>JN(e);function $R(e){return R.forwardRef(e)}const CF=typeof window<"u"?R.useLayoutEffect:R.useEffect;function qE(e){const[t,n]=R.useState(BigInt(0)),[r]=R.useState(()=>jF(()=>n(i=>i+BigInt(1))));return CF(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function jF(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const MR=R.createContext(null);function AF({children:e}){const t=xn(),n=R.useCallback(a=>{const{nodes:l=[],setNodes:u,hasDefaultNodes:c,onNodesChange:f,nodeLookup:h,fitViewQueued:p}=t.getState();let b=l;for(const y of a)b=typeof y=="function"?y(b):y;if(c)u(b);else{const y=UE({items:b,lookup:h});y.length>0?f==null||f(y):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:_,nodes:m,setNodes:v}=t.getState();_&&v(m)})}},[]),r=qE(n),i=R.useCallback(a=>{const{edges:l=[],setEdges:u,hasDefaultEdges:c,onEdgesChange:f,edgeLookup:h}=t.getState();let p=l;for(const b of a)p=typeof b=="function"?b(p):b;c?u(p):f&&f(UE({items:p,lookup:h}))},[]),o=qE(i),s=R.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return d.jsx(MR.Provider,{value:s,children:e})}function NF(){const e=R.useContext(MR);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const RF=e=>!!e.panZoom;function un(){const e=SF(),t=xn(),n=NF(),r=Qt(RF),i=R.useMemo(()=>{const o=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},l=f=>{var m,v,w,S;const{nodeLookup:h,nodeOrigin:p}=t.getState(),b=VE(f)?f:h.get(f.id),y=b.parentId?iR(b.position,b.measured,b.parentId,h,p):b.position,_={...b,position:y,width:(v=(m=b.measured)==null?void 0:m.width)!=null?v:b.width,height:(S=(w=b.measured)==null?void 0:w.height)!=null?S:b.height};return Lu(_)},u=(f,h,p={replace:!1})=>{s(b=>b.map(y=>{if(y.id===f){const _=typeof h=="function"?h(y):h;return p.replace&&VE(_)?_:{...y,..._}}return y}))},c=(f,h,p={replace:!1})=>{a(b=>b.map(y=>{if(y.id===f){const _=typeof h=="function"?h(y):h;return p.replace&&kF(_)?_:{...y,..._}}return y}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var h;return(h=o(f))==null?void 0:h.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(h=>({...h}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:a,addNodes:f=>{const h=Array.isArray(f)?f:[f];n.nodeQueue.push(p=>[...p,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];n.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:p}=t.getState(),[b,y,_]=p;return{nodes:f.map(m=>({...m})),edges:h.map(m=>({...m})),viewport:{x:b,y,zoom:_}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:p,edges:b,onNodesDelete:y,onEdgesDelete:_,triggerNodeChanges:m,triggerEdgeChanges:v,onDelete:w,onBeforeDelete:S}=t.getState(),{nodes:k,edges:A}=await H8({nodesToRemove:f,edgesToRemove:h,nodes:p,edges:b,onBeforeDelete:S}),T=A.length>0,P=k.length>0;if(T){const Y=A.map(WE);_==null||_(A),v(Y)}if(P){const Y=k.map(WE);y==null||y(k),m(Y)}return(P||T)&&(w==null||w({nodes:k,edges:A})),{deletedNodes:k,deletedEdges:A}},getIntersectingNodes:(f,h=!0,p)=>{const b=xE(f),y=b?f:l(f),_=p!==void 0;return y?(p||t.getState().nodes).filter(m=>{const v=t.getState().nodeLookup.get(m.id);if(v&&!b&&(m.id===f.id||!v.internals.positionAbsolute))return!1;const w=Lu(_?m:v),S=Yd(w,y);return h&&S>0||S>=y.width*y.height}):[]},isNodeIntersecting:(f,h,p=!0)=>{const y=xE(f)?f:l(f);if(!y)return!1;const _=Yd(y,h);return p&&_>0||_>=y.width*y.height},updateNode:u,updateNodeData:(f,h,p={replace:!1})=>{u(f,b=>{const y=typeof h=="function"?h(b):h;return p.replace?{...b,data:y}:{...b,data:{...b.data,...y}}},p)},updateEdge:c,updateEdgeData:(f,h,p={replace:!1})=>{c(f,b=>{const y=typeof h=="function"?h(b):h;return p.replace?{...b,data:y}:{...b,data:{...b.data,...y}}},p)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:p}=t.getState();return L8(f,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:f,id:h,nodeId:p})=>{var b,y;return Array.from((y=(b=t.getState().connectionLookup.get("".concat(p,"-").concat(f).concat(h?"-".concat(h):"")))==null?void 0:b.values())!=null?y:[])},getNodeConnections:({type:f,handleId:h,nodeId:p})=>{var b,y;return Array.from((y=(b=t.getState().connectionLookup.get("".concat(p).concat(f?h?"-".concat(f,"-").concat(h):"-".concat(f):"")))==null?void 0:b.values())!=null?y:[])},fitView:async f=>{var p;const h=(p=t.getState().fitViewResolver)!=null?p:q8();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),n.nodeQueue.push(b=>[...b]),h.promise}}},[]);return R.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const KE=e=>e.selected,TF={actInsideInputWithModifier:!1},IF=typeof window<"u"?window:void 0;function PF({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=xn(),{deleteElements:r}=un(),i=Jd(e,TF),o=Jd(t,{target:IF});R.useEffect(()=>{if(i){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(KE),edges:s.filter(KE)}),n.setState({nodesSelectionActive:!1})}},[i]),R.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function OF(e){const t=xn();R.useEffect(()=>{const n=()=>{var i,o;if(!e.current)return!1;const r=gx(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",mo.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Om={position:"absolute",width:"100%",height:"100%",top:0,left:0},$F=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function MF({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:o=ul.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:p=!0,children:b,noWheelClassName:y,noPanClassName:_,onViewportChange:m,isControlledViewport:v,paneClickDistance:w}){const S=xn(),k=R.useRef(null),{userSelectionActive:A,lib:T}=Qt($F,Ln),P=Jd(h),Y=R.useRef();OF(k);const D=R.useCallback(H=>{m==null||m({x:H[0],y:H[1],zoom:H[2]}),v||S.setState({transform:H})},[m,v]);return R.useEffect(()=>{if(k.current){Y.current=kB({domNode:k.current,minZoom:c,maxZoom:f,translateExtent:u,viewport:l,paneClickDistance:w,onDraggingChange:L=>S.setState({paneDragging:L}),onPanZoomStart:(L,te)=>{const{onViewportChangeStart:Z,onMoveStart:oe}=S.getState();oe==null||oe(L,te),Z==null||Z(te)},onPanZoom:(L,te)=>{const{onViewportChange:Z,onMove:oe}=S.getState();oe==null||oe(L,te),Z==null||Z(te)},onPanZoomEnd:(L,te)=>{const{onViewportChangeEnd:Z,onMoveEnd:oe}=S.getState();oe==null||oe(L,te),Z==null||Z(te)}});const{x:H,y:Q,zoom:U}=Y.current.getViewport();return S.setState({panZoom:Y.current,transform:[H,Q,U],domNode:k.current.closest(".react-flow")}),()=>{var L;(L=Y.current)==null||L.destroy()}}},[]),R.useEffect(()=>{var H;(H=Y.current)==null||H.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:o,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:P,preventScrolling:p,noPanClassName:_,userSelectionActive:A,noWheelClassName:y,lib:T,onTransformChange:D})},[e,t,n,r,i,o,s,a,P,p,_,A,y,T,D]),d.jsx("div",{className:"react-flow__renderer",ref:k,style:Om,children:b})}const DF=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function LF(){const{userSelectionActive:e,userSelectionRect:t}=Qt(DF,Ln);return e&&t?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const C0=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},BF=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function FF({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Gd.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:o,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:f,onPaneMouseLeave:h,children:p}){const b=xn(),{userSelectionActive:y,elementsSelectable:_,dragging:m,connectionInProgress:v}=Qt(BF,Ln),w=_&&(e||y),S=R.useRef(null),k=R.useRef(),A=R.useRef(new Set),T=R.useRef(new Set),P=R.useRef(!1),Y=R.useRef(!1),D=oe=>{if(P.current||v){P.current=!1;return}a==null||a(oe),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},H=oe=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){oe.preventDefault();return}l==null||l(oe)},Q=u?oe=>u(oe):void 0,U=oe=>{var ue,ce;const{resetSelectedElements:z,domNode:V}=b.getState();if(k.current=V==null?void 0:V.getBoundingClientRect(),!_||!e||oe.button!==0||oe.target!==S.current||!k.current)return;(ce=(ue=oe.target)==null?void 0:ue.setPointerCapture)==null||ce.call(ue,oe.pointerId),Y.current=!0,P.current=!1;const{x:$,y:X}=xs(oe.nativeEvent,k.current);z(),b.setState({userSelectionRect:{width:0,height:0,startX:$,startY:X,x:$,y:X}}),o==null||o(oe)},L=oe=>{var he,Se;const{userSelectionRect:z,transform:V,nodeLookup:$,edgeLookup:X,connectionLookup:ue,triggerNodeChanges:ce,triggerEdgeChanges:Ce,defaultEdgeOptions:Pe}=b.getState();if(!k.current||!z)return;P.current=!0;const{x:Me,y:B}=xs(oe.nativeEvent,k.current),{startX:J,startY:re}=z,De={startX:J,startY:re,x:Me<J?Me:J,y:B<re?B:re,width:Math.abs(Me-J),height:Math.abs(B-re)},Ye=A.current,He=T.current;A.current=new Set(QN($,De,V,n===Gd.Partial,!0).map(Ue=>Ue.id)),T.current=new Set;const ne=(he=Pe==null?void 0:Pe.selectable)!=null?he:!0;for(const Ue of A.current){const We=ue.get(Ue);if(We)for(const{edgeId:Ke}of We.values()){const fe=X.get(Ke);fe&&((Se=fe.selectable)!=null?Se:ne)&&T.current.add(Ke)}}if(!SE(Ye,A.current)){const Ue=cu($,A.current,!0);ce(Ue)}if(!SE(He,T.current)){const Ue=cu(X,T.current);Ce(Ue)}b.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},te=oe=>{var V,$;if(oe.button!==0||!Y.current)return;($=(V=oe.target)==null?void 0:V.releasePointerCapture)==null||$.call(V,oe.pointerId);const{userSelectionRect:z}=b.getState();!y&&z&&oe.target===S.current&&(D==null||D(oe)),b.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),s==null||s(oe),(t||i)&&(P.current=!1),Y.current=!1},Z=r===!0||Array.isArray(r)&&r.includes(0);return d.jsxs("div",{className:Yn(["react-flow__pane",{draggable:Z,dragging:m,selection:e}]),onClick:w?void 0:C0(D,S),onContextMenu:C0(H,S),onWheel:C0(Q,S),onPointerEnter:w?void 0:c,onPointerDown:w?U:f,onPointerMove:w?L:f,onPointerUp:w?te:void 0,onPointerLeave:h,ref:S,style:Om,children:[p,d.jsx(LF,{})]})}function Hw({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",mo.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function DR({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,nodeClickDistance:s}){const a=xn(),[l,u]=R.useState(!1),c=R.useRef();return R.useEffect(()=>{c.current=dB({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{Hw({id:f,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),R.useEffect(()=>{var f,h;if(t)(f=c.current)==null||f.destroy();else if(e.current)return(h=c.current)==null||h.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:i,nodeClickDistance:s}),()=>{var p;(p=c.current)==null||p.destroy()}},[n,r,t,o,e,i]),l}const zF=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function LR(){const e=xn();return R.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:o,nodesDraggable:s,onError:a,updateNodePositions:l,nodeLookup:u,nodeOrigin:c}=e.getState(),f=new Map,h=zF(s),p=i?o[0]:5,b=i?o[1]:5,y=n.direction.x*p*n.factor,_=n.direction.y*b*n.factor;for(const[,m]of u){if(!h(m))continue;let v={x:m.internals.positionAbsolute.x+y,y:m.internals.positionAbsolute.y+_};i&&(v=Rm(v,o));const{position:w,positionAbsolute:S}=ZN({nodeId:m.id,nextPosition:v,nodeLookup:u,nodeExtent:r,nodeOrigin:c,onError:a});m.position=w,m.internals.positionAbsolute=S,f.set(m.id,m)}l(f)},[])}const bx=R.createContext(null),HF=bx.Provider;bx.Consumer;const _x=()=>R.useContext(bx),UF=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),WF=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:o,connection:s}=r,{fromHandle:a,toHandle:l,isValid:u}=s,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:o===Mu.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&u}};function VF({type:e="source",position:t=ye.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:f,...h},p){var te,Z;const b=s||null,y=e==="target",_=xn(),m=_x(),{connectOnClick:v,noPanClassName:w,rfId:S}=Qt(UF,Ln),{connectingFrom:k,connectingTo:A,clickConnecting:T,isPossibleEndHandle:P,connectionInProcess:Y,clickConnectionInProcess:D,valid:H}=Qt(WF(m,b,e),Ln);m||(Z=(te=_.getState()).onError)==null||Z.call(te,"010",mo.error010());const Q=oe=>{const{defaultEdgeOptions:z,onConnect:V,hasDefaultEdges:$}=_.getState(),X={...z,...oe};if($){const{edges:ue,setEdges:ce}=_.getState();ce(dR(X,ue))}V==null||V(X),a==null||a(X)},U=oe=>{if(!m)return;const z=aR(oe.nativeEvent);if(i&&(z&&oe.button===0||!z)){const V=_.getState();zw.onPointerDown(oe.nativeEvent,{autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:y,handleId:b,nodeId:m,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:Q,isValidConnection:n||V.isValidConnection,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed})}z?c==null||c(oe):f==null||f(oe)},L=oe=>{const{onClickConnectStart:z,onClickConnectEnd:V,connectionClickStartHandle:$,connectionMode:X,isValidConnection:ue,lib:ce,rfId:Ce,nodeLookup:Pe,connection:Me}=_.getState();if(!m||!$&&!i)return;if(!$){z==null||z(oe.nativeEvent,{nodeId:m,handleId:b,handleType:e}),_.setState({connectionClickStartHandle:{nodeId:m,type:e,id:b}});return}const B=oR(oe.target),J=n||ue,{connection:re,isValid:De}=zw.isValid(oe.nativeEvent,{handle:{nodeId:m,id:b,type:e},connectionMode:X,fromNodeId:$.nodeId,fromHandleId:$.id||null,fromType:$.type,isValidConnection:J,flowId:Ce,doc:B,lib:ce,nodeLookup:Pe});De&&re&&Q(re);const Ye=structuredClone(Me);delete Ye.inProgress,Ye.toPosition=Ye.toHandle?Ye.toHandle.position:null,V==null||V(oe,Ye),_.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":b,"data-nodeid":m,"data-handlepos":t,"data-id":"".concat(S,"-").concat(m,"-").concat(b,"-").concat(e),className:Yn(["react-flow__handle","react-flow__handle-".concat(t),"nodrag",w,u,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:o,clickconnecting:T,connectingfrom:k,connectingto:A,valid:H,connectionindicator:r&&(!Y||P)&&(Y||D?o:i)}]),onMouseDown:U,onTouchStart:U,onClick:v?L:void 0,ref:p,...h,children:l})}const Ne=R.memo($R(VF));function qF({data:e,isConnectable:t,sourcePosition:n=ye.Bottom}){return d.jsxs(d.Fragment,{children:[e==null?void 0:e.label,d.jsx(Ne,{type:"source",position:n,isConnectable:t})]})}function KF({data:e,isConnectable:t,targetPosition:n=ye.Top,sourcePosition:r=ye.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,d.jsx(Ne,{type:"source",position:r,isConnectable:t})]})}function GF(){return null}function YF({data:e,isConnectable:t,targetPosition:n=ye.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const mg={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},GE={input:qF,default:KF,output:YF,group:GF};function XF(e){var t,n,r,i,o,s,a,l,u,c;return e.internals.handleBounds===void 0?{width:(r=(t=e.width)!=null?t:e.initialWidth)!=null?r:(n=e.style)==null?void 0:n.width,height:(s=(i=e.height)!=null?i:e.initialHeight)!=null?s:(o=e.style)==null?void 0:o.height}:{width:(l=e.width)!=null?l:(a=e.style)==null?void 0:a.width,height:(c=e.height)!=null?c:(u=e.style)==null?void 0:u.height}}const JF=e=>{const{width:t,height:n,x:r,y:i}=zf(e.nodeLookup,{filter:o=>!!o.selected});return{width:lo(t)?t:null,height:lo(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(i,"px)")}};function QF({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=xn(),{width:i,height:o,transformString:s,userSelectionActive:a}=Qt(JF,Ln),l=LR(),u=R.useRef(null);if(R.useEffect(()=>{var h;n||(h=u.current)==null||h.focus({preventScroll:!0})},[n]),DR({nodeRef:u}),a||!i||!o)return null;const c=e?h=>{const p=r.getState().nodes.filter(b=>b.selected);e(h,p)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(mg,h.key)&&(h.preventDefault(),l({direction:mg[h.key],factor:h.shiftKey?4:1}))};return d.jsx("div",{className:Yn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:d.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:o}})})}const YE=typeof window<"u"?window:void 0,ZF=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function BR({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:f,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:_,elementsSelectable:m,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:P,defaultViewport:Y,translateExtent:D,minZoom:H,maxZoom:Q,preventScrolling:U,onSelectionContextMenu:L,noWheelClassName:te,noPanClassName:Z,disableKeyboardA11y:oe,onViewportChange:z,isControlledViewport:V}){const{nodesSelectionActive:$,userSelectionActive:X}=Qt(ZF),ue=Jd(u,{target:YE}),ce=Jd(y,{target:YE}),Ce=ce||P,Pe=ce||S,Me=c&&Ce!==!0,B=ue||X||Me;return PF({deleteKeyCode:l,multiSelectionKeyCode:b}),d.jsx(MF,{onPaneContextMenu:o,elementsSelectable:m,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:Pe,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:T,panOnDrag:!ue&&Ce,defaultViewport:Y,translateExtent:D,minZoom:H,maxZoom:Q,zoomActivationKeyCode:_,preventScrolling:U,noWheelClassName:te,noPanClassName:Z,onViewportChange:z,isControlledViewport:V,paneClickDistance:a,children:d.jsxs(FF,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:Ce,isSelecting:!!B,selectionMode:f,selectionKeyPressed:ue,selectionOnDrag:Me,children:[e,$&&d.jsx(QF,{onSelectionContextMenu:L,noPanClassName:Z,disableKeyboardA11y:oe})]})})}BR.displayName="FlowRenderer";const e7=R.memo(BR),t7=e=>t=>e?QN(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function n7(e){return Qt(R.useCallback(t7(e),[e]),Ln)}const r7=e=>e.updateNodeInternals;function i7(){const e=Qt(r7),[t]=R.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const o=i.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:i.target,force:!0})}),e(r)}));return R.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function o7({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=xn(),o=R.useRef(null),s=R.useRef(null),a=R.useRef(e.sourcePosition),l=R.useRef(e.targetPosition),u=R.useRef(t),c=n&&!!e.internals.handleBounds;return R.useEffect(()=>{o.current&&!e.hidden&&(!c||s.current!==o.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(o.current),s.current=o.current)},[c,e.hidden]),R.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),R.useEffect(()=>{if(o.current){const f=u.current!==t,h=a.current!==e.sourcePosition,p=l.current!==e.targetPosition;(f||h||p)&&(u.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function s7({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:o,onDoubleClick:s,nodesDraggable:a,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:f,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:b,rfId:y,nodeTypes:_,nodeClickDistance:m,onError:v}){var B,J;const{node:w,internals:S,isParent:k}=Qt(re=>{const De=re.nodeLookup.get(e),Ye=re.parentLookup.has(e);return{node:De,internals:De.internals,isParent:Ye}},Ln);let A=w.type||"default",T=(_==null?void 0:_[A])||GE[A];T===void 0&&(v==null||v("003",mo.error003(A)),A="default",T=GE.default);const P=!!(w.draggable||a&&typeof w.draggable>"u"),Y=!!(w.selectable||l&&typeof w.selectable>"u"),D=!!(w.connectable||u&&typeof w.connectable>"u"),H=!!(w.focusable||c&&typeof w.focusable>"u"),Q=xn(),U=rR(w),L=o7({node:w,nodeType:A,hasDimensions:U,resizeObserver:f}),te=DR({nodeRef:L,disabled:w.hidden||!P,noDragClassName:h,handleSelector:w.dragHandle,nodeId:e,isSelectable:Y,nodeClickDistance:m}),Z=LR();if(w.hidden)return null;const oe=Ms(w),z=XF(w),V=Y||P||t||n||r||i,$=n?re=>n(re,{...S.userNode}):void 0,X=r?re=>r(re,{...S.userNode}):void 0,ue=i?re=>i(re,{...S.userNode}):void 0,ce=o?re=>o(re,{...S.userNode}):void 0,Ce=s?re=>s(re,{...S.userNode}):void 0,Pe=re=>{const{selectNodesOnDrag:De,nodeDragThreshold:Ye}=Q.getState();Y&&(!De||!P||Ye>0)&&Hw({id:e,store:Q,nodeRef:L}),t&&t(re,{...S.userNode})},Me=re=>{if(!(sR(re.nativeEvent)||b))if(GN.includes(re.key)&&Y){const De=re.key==="Escape";Hw({id:e,store:Q,unselect:De,nodeRef:L})}else P&&w.selected&&Object.prototype.hasOwnProperty.call(mg,re.key)&&(re.preventDefault(),Q.setState({ariaLiveMessage:"Moved selected node ".concat(re.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~S.positionAbsolute.x,", y: ").concat(~~S.positionAbsolute.y)}),Z({direction:mg[re.key],factor:re.shiftKey?4:1}))};return d.jsx("div",{className:Yn(["react-flow__node","react-flow__node-".concat(A),{[p]:P},w.className,{selected:w.selected,selectable:Y,parent:k,draggable:P,dragging:te}]),ref:L,style:{zIndex:S.z,transform:"translate(".concat(S.positionAbsolute.x,"px,").concat(S.positionAbsolute.y,"px)"),pointerEvents:V?"all":"none",visibility:U?"visible":"hidden",...w.style,...z},"data-id":e,"data-testid":"rf__node-".concat(e),onMouseEnter:$,onMouseMove:X,onMouseLeave:ue,onContextMenu:ce,onClick:Pe,onDoubleClick:Ce,onKeyDown:H?Me:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"aria-describedby":b?void 0:"".concat(NR,"-").concat(y),"aria-label":w.ariaLabel,children:d.jsx(HF,{value:e,children:d.jsx(T,{id:e,data:w.data,type:A,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:(B=w.selected)!=null?B:!1,selectable:Y,draggable:P,deletable:(J=w.deletable)!=null?J:!0,isConnectable:D,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:te,dragHandle:w.dragHandle,zIndex:S.z,parentId:w.parentId,...oe})})})}const a7=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function FR(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:o}=Qt(a7,Ln),s=n7(e.onlyRenderVisibleElements),a=i7();return d.jsx("div",{className:"react-flow__nodes",style:Om,children:s.map(l=>d.jsx(s7,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:o},l))})}FR.displayName="NodeRenderer";const l7=R.memo(FR);function u7(e){return Qt(R.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const o=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);o&&s&&Y8({sourceNode:o,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Ln)}const c7=({color:e="none",strokeWidth:t=1})=>d.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),d7=({color:e="none",strokeWidth:t=1})=>d.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),XE={[fg.Arrow]:c7,[fg.ArrowClosed]:d7};function f7(e){const t=xn();return R.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(XE,e)?XE[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",mo.error009(e)),null)},[e])}const h7=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const l=f7(t);return l?d.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:"".concat(r),markerHeight:"".concat(i),viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:d.jsx(l,{color:n,strokeWidth:s})}):null},zR=({defaultColor:e,rfId:t})=>{const n=Qt(o=>o.edges),r=Qt(o=>o.defaultEdgeOptions),i=R.useMemo(()=>nB(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:i.map(o=>d.jsx(h7,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};zR.displayName="MarkerDefinitions";var p7=R.memo(zR);function HR({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:o,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c}){const[f,h]=R.useState({x:1,y:0,width:0,height:0}),p=Yn(["react-flow__edge-textwrapper",u]),b=R.useRef(null);return R.useEffect(()=>{if(b.current){const y=b.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),n?d.jsxs("g",{transform:"translate(".concat(e-f.width/2," ").concat(t-f.height/2,")"),className:p,visibility:f.width?"visible":"hidden",...c,children:[i&&d.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),d.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:b,style:r,children:n}),l]}):null}HR.displayName="EdgeText";const g7=R.memo(HR);function $m({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...c,d:e,fill:"none",className:Yn(["react-flow__edge-path",c.className])}),u&&d.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&lo(t)&&lo(n)?d.jsx(g7,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function JE({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===ye.Left||e===ye.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function UR({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:r,targetY:i,targetPosition:o=ye.Top}){const[s,a]=JE({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=JE({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,f,h,p]=lR({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:u});return["M".concat(e,",").concat(t," C").concat(s,",").concat(a," ").concat(l,",").concat(u," ").concat(r,",").concat(i),c,f,h,p]}function WR(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s,targetPosition:a,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:y,markerStart:_,interactionWidth:m})=>{const[v,w,S]=UR({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a}),k=e.isInternal?void 0:t;return d.jsx($m,{id:k,path:v,labelX:w,labelY:S,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:y,markerStart:_,interactionWidth:m})})}const m7=WR({isInternal:!1}),VR=WR({isInternal:!0});m7.displayName="SimpleBezierEdge";VR.displayName="SimpleBezierEdgeInternal";function qR(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,sourcePosition:p=ye.Bottom,targetPosition:b=ye.Top,markerEnd:y,markerStart:_,pathOptions:m,interactionWidth:v})=>{const[w,S,k]=Lw({sourceX:n,sourceY:r,sourcePosition:p,targetX:i,targetY:o,targetPosition:b,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset}),A=e.isInternal?void 0:t;return d.jsx($m,{id:A,path:w,labelX:S,labelY:k,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,markerEnd:y,markerStart:_,interactionWidth:v})})}const KR=qR({isInternal:!1}),GR=qR({isInternal:!0});KR.displayName="SmoothStepEdge";GR.displayName="SmoothStepEdgeInternal";function YR(e){return R.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return d.jsx(KR,{...n,id:r,pathOptions:R.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const y7=YR({isInternal:!1}),XR=YR({isInternal:!0});y7.displayName="StepEdge";XR.displayName="StepEdgeInternal";function JR(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:b,interactionWidth:y})=>{const[_,m,v]=fR({sourceX:n,sourceY:r,targetX:i,targetY:o}),w=e.isInternal?void 0:t;return d.jsx($m,{id:w,path:_,labelX:m,labelY:v,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:b,interactionWidth:y})})}const v7=JR({isInternal:!1}),QR=JR({isInternal:!0});v7.displayName="StraightEdge";QR.displayName="StraightEdgeInternal";function ZR(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s=ye.Bottom,targetPosition:a=ye.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:y,markerStart:_,pathOptions:m,interactionWidth:v})=>{const[w,S,k]=uR({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a,curvature:m==null?void 0:m.curvature}),A=e.isInternal?void 0:t;return d.jsx($m,{id:A,path:w,labelX:S,labelY:k,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:b,markerEnd:y,markerStart:_,interactionWidth:v})})}const w7=ZR({isInternal:!1}),eT=ZR({isInternal:!0});w7.displayName="BezierEdge";eT.displayName="BezierEdgeInternal";const QE={default:eT,straight:QR,step:XR,smoothstep:GR,simplebezier:VR},ZE={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},b7=(e,t,n)=>n===ye.Left?e-t:n===ye.Right?e+t:e,_7=(e,t,n)=>n===ye.Top?e-t:n===ye.Bottom?e+t:e,e2="react-flow__edgeupdater";function t2({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a}){return d.jsx("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:Yn([e2,"".concat(e2,"-").concat(a)]),cx:b7(t,r,e),cy:_7(n,r,e),r,stroke:"transparent",fill:"transparent"})}function x7({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:f,setReconnecting:h,setUpdateHover:p}){const b=xn(),y=(S,k)=>{if(S.button!==0)return;const{autoPanOnConnect:A,domNode:T,isValidConnection:P,connectionMode:Y,connectionRadius:D,lib:H,onConnectStart:Q,onConnectEnd:U,cancelConnection:L,nodeLookup:te,rfId:Z,panBy:oe,updateConnection:z}=b.getState(),V=k.type==="target";h(!0),c==null||c(S,n,k.type);const $=(ue,ce)=>{h(!1),f==null||f(ue,n,k.type,ce)},X=ue=>u==null?void 0:u(n,ue);zw.onPointerDown(S.nativeEvent,{autoPanOnConnect:A,connectionMode:Y,connectionRadius:D,domNode:T,handleId:k.id,nodeId:k.nodeId,nodeLookup:te,isTarget:V,edgeUpdaterType:k.type,lib:H,flowId:Z,cancelConnection:L,panBy:oe,isValidConnection:P,onConnect:X,onConnectStart:Q,onConnectEnd:U,onReconnectEnd:$,updateConnection:z,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle})},_=S=>{var k;return y(S,{nodeId:n.target,id:(k=n.targetHandle)!=null?k:null,type:"target"})},m=S=>{var k;return y(S,{nodeId:n.source,id:(k=n.sourceHandle)!=null?k:null,type:"source"})},v=()=>p(!0),w=()=>p(!1);return d.jsxs(d.Fragment,{children:[(e===!0||e==="source")&&d.jsx(t2,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:_,onMouseEnter:v,onMouseOut:w,type:"source"}),(e===!0||e==="target")&&d.jsx(t2,{position:l,centerX:o,centerY:s,radius:t,onMouseDown:m,onMouseEnter:v,onMouseOut:w,type:"target"})]})}function S7({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,reconnectRadius:c,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:b,edgeTypes:y,noPanClassName:_,onError:m,disableKeyboardA11y:v}){var He;let w=Qt(ne=>ne.edgeLookup.get(e));const S=Qt(ne=>ne.defaultEdgeOptions);w=S?{...S,...w}:w;let k=w.type||"default",A=(y==null?void 0:y[k])||QE[k];A===void 0&&(m==null||m("011",mo.error011(k)),k="default",A=QE.default);const T=!!(w.focusable||t&&typeof w.focusable>"u"),P=typeof f<"u"&&(w.reconnectable||n&&typeof w.reconnectable>"u"),Y=!!(w.selectable||r&&typeof w.selectable>"u"),D=R.useRef(null),[H,Q]=R.useState(!1),[U,L]=R.useState(!1),te=xn(),{zIndex:Z,sourceX:oe,sourceY:z,targetX:V,targetY:$,sourcePosition:X,targetPosition:ue}=Qt(R.useCallback(ne=>{const he=ne.nodeLookup.get(w.source),Se=ne.nodeLookup.get(w.target);if(!he||!Se)return{zIndex:w.zIndex,...ZE};const Ue=tB({id:e,sourceNode:he,targetNode:Se,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:ne.connectionMode,onError:m});return{zIndex:G8({selected:w.selected,zIndex:w.zIndex,sourceNode:he,targetNode:Se,elevateOnSelect:ne.elevateEdgesOnSelect}),...Ue||ZE}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),Ln),ce=R.useMemo(()=>w.markerStart?"url('#".concat(Bw(w.markerStart,b),"')"):void 0,[w.markerStart,b]),Ce=R.useMemo(()=>w.markerEnd?"url('#".concat(Bw(w.markerEnd,b),"')"):void 0,[w.markerEnd,b]);if(w.hidden||oe===null||z===null||V===null||$===null)return null;const Pe=ne=>{var We;const{addSelectedEdges:he,unselectNodesAndEdges:Se,multiSelectionActive:Ue}=te.getState();Y&&(te.setState({nodesSelectionActive:!1}),w.selected&&Ue?(Se({nodes:[],edges:[w]}),(We=D.current)==null||We.blur()):he([e])),i&&i(ne,w)},Me=o?ne=>{o(ne,{...w})}:void 0,B=s?ne=>{s(ne,{...w})}:void 0,J=a?ne=>{a(ne,{...w})}:void 0,re=l?ne=>{l(ne,{...w})}:void 0,De=u?ne=>{u(ne,{...w})}:void 0,Ye=ne=>{var he;if(!v&&GN.includes(ne.key)&&Y){const{unselectNodesAndEdges:Se,addSelectedEdges:Ue}=te.getState();ne.key==="Escape"?((he=D.current)==null||he.blur(),Se({edges:[w]})):Ue([e])}};return d.jsx("svg",{style:{zIndex:Z},children:d.jsxs("g",{className:Yn(["react-flow__edge","react-flow__edge-".concat(k),w.className,_,{selected:w.selected,animated:w.animated,inactive:!Y&&!i,updating:H,selectable:Y}]),onClick:Pe,onDoubleClick:Me,onContextMenu:B,onMouseEnter:J,onMouseMove:re,onMouseLeave:De,onKeyDown:T?Ye:void 0,tabIndex:T?0:void 0,role:T?"button":"img","data-id":e,"data-testid":"rf__edge-".concat(e),"aria-label":w.ariaLabel===null?void 0:w.ariaLabel||"Edge from ".concat(w.source," to ").concat(w.target),"aria-describedby":T?"".concat(RR,"-").concat(b):void 0,ref:D,children:[!U&&d.jsx(A,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:Y,deletable:(He=w.deletable)!=null?He:!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:oe,sourceY:z,targetX:V,targetY:$,sourcePosition:X,targetPosition:ue,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:ce,markerEnd:Ce,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),P&&d.jsx(x7,{edge:w,isReconnectable:P,reconnectRadius:c,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:oe,sourceY:z,targetX:V,targetY:$,sourcePosition:X,targetPosition:ue,setUpdateHover:Q,setReconnecting:L})]})})}const E7=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function tT({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:b,disableKeyboardA11y:y}){const{edgesFocusable:_,edgesReconnectable:m,elementsSelectable:v,onError:w}=Qt(E7,Ln),S=u7(t);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(p7,{defaultColor:e,rfId:n}),S.map(k=>d.jsx(S7,{id:k,edgesFocusable:_,edgesReconnectable:m,elementsSelectable:v,noPanClassName:i,onReconnect:o,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:f,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:b,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:y},k))]})}tT.displayName="EdgeRenderer";const k7=R.memo(tT),C7=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function j7({children:e}){const t=Qt(C7);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function A7(e){const t=un(),n=R.useRef(!1);R.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const N7=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function R7(e){const t=Qt(N7),n=xn();return R.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function T7(e){return e.connection.inProgress?{...e.connection,to:Hf(e.connection.to,e.transform)}:{...e.connection}}function I7(e){return T7}function P7(e){const t=I7();return Qt(t,Ln)}const O7=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function $7({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:o,height:s,isValid:a,inProgress:l}=Qt(O7,Ln);return!(o&&i&&l)?null:d.jsx("svg",{style:e,width:o,height:s,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Yn(["react-flow__connection",XN(a)]),children:d.jsx(nT,{style:t,type:n,CustomComponent:r,isValid:a})})})}const nT=({style:e,type:t=ta.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:o,fromNode:s,fromHandle:a,fromPosition:l,to:u,toNode:c,toHandle:f,toPosition:h}=P7();if(!i)return;if(n)return d.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:h,connectionStatus:XN(r),toNode:c,toHandle:f});let p="";const b={sourceX:o.x,sourceY:o.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:h};switch(t){case ta.Bezier:[p]=uR(b);break;case ta.SimpleBezier:[p]=UR(b);break;case ta.Step:[p]=Lw({...b,borderRadius:0});break;case ta.SmoothStep:[p]=Lw(b);break;default:[p]=fR(b)}return d.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};nT.displayName="ConnectionLine";const M7={};function n2(e=M7){R.useRef(e),xn(),R.useEffect(()=>{},[e])}function D7(){xn(),R.useRef(!1),R.useEffect(()=>{},[])}function rT({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:o,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:p,connectionLineType:b,connectionLineStyle:y,connectionLineComponent:_,connectionLineContainerStyle:m,selectionKeyCode:v,selectionOnDrag:w,selectionMode:S,multiSelectionKeyCode:k,panActivationKeyCode:A,zoomActivationKeyCode:T,deleteKeyCode:P,onlyRenderVisibleElements:Y,elementsSelectable:D,defaultViewport:H,translateExtent:Q,minZoom:U,maxZoom:L,preventScrolling:te,defaultMarkerColor:Z,zoomOnScroll:oe,zoomOnPinch:z,panOnScroll:V,panOnScrollSpeed:$,panOnScrollMode:X,zoomOnDoubleClick:ue,panOnDrag:ce,onPaneClick:Ce,onPaneMouseEnter:Pe,onPaneMouseMove:Me,onPaneMouseLeave:B,onPaneScroll:J,onPaneContextMenu:re,paneClickDistance:De,nodeClickDistance:Ye,onEdgeContextMenu:He,onEdgeMouseEnter:ne,onEdgeMouseMove:he,onEdgeMouseLeave:Se,reconnectRadius:Ue,onReconnect:We,onReconnectStart:Ke,onReconnectEnd:fe,noDragClassName:Fe,noWheelClassName:qe,noPanClassName:Oe,disableKeyboardA11y:At,nodeExtent:dn,rfId:Ct,viewport:tn,onViewportChange:O}){return n2(e),n2(t),D7(),A7(n),R7(tn),d.jsx(e7,{onPaneClick:Ce,onPaneMouseEnter:Pe,onPaneMouseMove:Me,onPaneMouseLeave:B,onPaneContextMenu:re,onPaneScroll:J,paneClickDistance:De,deleteKeyCode:P,selectionKeyCode:v,selectionOnDrag:w,selectionMode:S,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:k,panActivationKeyCode:A,zoomActivationKeyCode:T,elementsSelectable:D,zoomOnScroll:oe,zoomOnPinch:z,zoomOnDoubleClick:ue,panOnScroll:V,panOnScrollSpeed:$,panOnScrollMode:X,panOnDrag:ce,defaultViewport:H,translateExtent:Q,minZoom:U,maxZoom:L,onSelectionContextMenu:f,preventScrolling:te,noDragClassName:Fe,noWheelClassName:qe,noPanClassName:Oe,disableKeyboardA11y:At,onViewportChange:O,isControlledViewport:!!tn,children:d.jsxs(j7,{children:[d.jsx(k7,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:We,onReconnectStart:Ke,onReconnectEnd:fe,onlyRenderVisibleElements:Y,onEdgeContextMenu:He,onEdgeMouseEnter:ne,onEdgeMouseMove:he,onEdgeMouseLeave:Se,reconnectRadius:Ue,defaultMarkerColor:Z,noPanClassName:Oe,disableKeyboardA11y:At,rfId:Ct}),d.jsx($7,{style:y,type:b,component:_,containerStyle:m}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(l7,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:Ye,onlyRenderVisibleElements:Y,noPanClassName:Oe,noDragClassName:Fe,disableKeyboardA11y:At,nodeExtent:dn,rfId:Ct}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}rT.displayName="GraphView";const L7=R.memo(rT),r2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l=.5,maxZoom:u=2,nodeOrigin:c,nodeExtent:f}={})=>{var A,T,P;const h=new Map,p=new Map,b=new Map,y=new Map,_=(A=r!=null?r:t)!=null?A:[],m=(T=n!=null?n:e)!=null?T:[],v=c!=null?c:[0,0],w=f!=null?f:Kd;pR(b,y,_);const S=Fw(m,h,p,{nodeOrigin:v,nodeExtent:w,elevateNodesOnSelect:!1});let k=[0,0,1];if(s&&i&&o){const Y=zf(h,{filter:U=>!!((U.width||U.initialWidth)&&(U.height||U.initialHeight))}),{x:D,y:H,zoom:Q}=px(Y,i,o,l,u,(P=a==null?void 0:a.padding)!=null?P:.1);k=[D,H,Q]}return{rfId:"1",width:0,height:0,transform:k,nodes:m,nodesInitialized:S,nodeLookup:h,parentLookup:p,edges:_,edgeLookup:y,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:u,translateExtent:Kd,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Mu.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s!=null?s:!1,fitViewOptions:a,fitViewResolver:null,connection:{...YN},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:U8,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},B7=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:f})=>iF((h,p)=>{async function b(){const{nodeLookup:y,panZoom:_,fitViewOptions:m,fitViewResolver:v,width:w,height:S,minZoom:k,maxZoom:A}=p();_&&(await z8({nodes:y,width:w,height:S,panZoom:_,minZoom:k,maxZoom:A},m),v==null||v.resolve(!0),h({fitViewResolver:null}))}return{...r2({nodes:e,edges:t,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:f,defaultNodes:n,defaultEdges:r}),setNodes:y=>{const{nodeLookup:_,parentLookup:m,nodeOrigin:v,elevateNodesOnSelect:w,fitViewQueued:S}=p(),k=Fw(y,_,m,{nodeOrigin:v,nodeExtent:f,elevateNodesOnSelect:w,checkEquality:!0});S&&k?(b(),h({nodes:y,nodesInitialized:k,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:y,nodesInitialized:k})},setEdges:y=>{const{connectionLookup:_,edgeLookup:m}=p();pR(_,m,y),h({edges:y})},setDefaultNodesAndEdges:(y,_)=>{if(y){const{setNodes:m}=p();m(y),h({hasDefaultNodes:!0})}if(_){const{setEdges:m}=p();m(_),h({hasDefaultEdges:!0})}},updateNodeInternals:y=>{const{triggerNodeChanges:_,nodeLookup:m,parentLookup:v,domNode:w,nodeOrigin:S,nodeExtent:k,debug:A,fitViewQueued:T}=p(),{changes:P,updatedInternals:Y}=aB(y,m,v,w,S,k);Y&&(iB(m,v,{nodeOrigin:S,nodeExtent:k}),T?(b(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(P==null?void 0:P.length)>0&&(A&&console.log("React Flow: trigger node changes",P),_==null||_(P)))},updateNodePositions:(y,_=!1)=>{var k,A;const m=[],v=[],{nodeLookup:w,triggerNodeChanges:S}=p();for(const[T,P]of y){const Y=w.get(T),D=!!(Y!=null&&Y.expandParent&&(Y!=null&&Y.parentId)&&(P!=null&&P.position)),H={id:T,type:"position",position:D?{x:Math.max(0,P.position.x),y:Math.max(0,P.position.y)}:P.position,dragging:_};D&&Y.parentId&&m.push({id:T,parentId:Y.parentId,rect:{...P.internals.positionAbsolute,width:(k=P.measured.width)!=null?k:0,height:(A=P.measured.height)!=null?A:0}}),v.push(H)}if(m.length>0){const{parentLookup:T,nodeOrigin:P}=p(),Y=wx(m,w,T,P);v.push(...Y)}S(v)},triggerNodeChanges:y=>{const{onNodesChange:_,setNodes:m,nodes:v,hasDefaultNodes:w,debug:S}=p();if(y!=null&&y.length){if(w){const k=PR(y,v);m(k)}S&&console.log("React Flow: trigger node changes",y),_==null||_(y)}},triggerEdgeChanges:y=>{const{onEdgesChange:_,setEdges:m,edges:v,hasDefaultEdges:w,debug:S}=p();if(y!=null&&y.length){if(w){const k=OR(y,v);m(k)}S&&console.log("React Flow: trigger edge changes",y),_==null||_(y)}},addSelectedNodes:y=>{const{multiSelectionActive:_,edgeLookup:m,nodeLookup:v,triggerNodeChanges:w,triggerEdgeChanges:S}=p();if(_){const k=y.map(A=>Ya(A,!0));w(k);return}w(cu(v,new Set([...y]),!0)),S(cu(m))},addSelectedEdges:y=>{const{multiSelectionActive:_,edgeLookup:m,nodeLookup:v,triggerNodeChanges:w,triggerEdgeChanges:S}=p();if(_){const k=y.map(A=>Ya(A,!0));S(k);return}S(cu(m,new Set([...y]))),w(cu(v,new Set,!0))},unselectNodesAndEdges:({nodes:y,edges:_}={})=>{const{edges:m,nodes:v,nodeLookup:w,triggerNodeChanges:S,triggerEdgeChanges:k}=p(),A=y||v,T=_||m,P=A.map(D=>{const H=w.get(D.id);return H&&(H.selected=!1),Ya(D.id,!1)}),Y=T.map(D=>Ya(D.id,!1));S(P),k(Y)},setMinZoom:y=>{const{panZoom:_,maxZoom:m}=p();_==null||_.setScaleExtent([y,m]),h({minZoom:y})},setMaxZoom:y=>{const{panZoom:_,minZoom:m}=p();_==null||_.setScaleExtent([m,y]),h({maxZoom:y})},setTranslateExtent:y=>{var _;(_=p().panZoom)==null||_.setTranslateExtent(y),h({translateExtent:y})},setPaneClickDistance:y=>{var _;(_=p().panZoom)==null||_.setClickDistance(y)},resetSelectedElements:()=>{const{edges:y,nodes:_,triggerNodeChanges:m,triggerEdgeChanges:v,elementsSelectable:w}=p();if(!w)return;const S=_.reduce((A,T)=>T.selected?[...A,Ya(T.id,!1)]:A,[]),k=y.reduce((A,T)=>T.selected?[...A,Ya(T.id,!1)]:A,[]);m(S),v(k)},setNodeExtent:y=>{const{nodes:_,nodeLookup:m,parentLookup:v,nodeOrigin:w,elevateNodesOnSelect:S,nodeExtent:k}=p();y[0][0]===k[0][0]&&y[0][1]===k[0][1]&&y[1][0]===k[1][0]&&y[1][1]===k[1][1]||(Fw(_,m,v,{nodeOrigin:w,nodeExtent:y,elevateNodesOnSelect:S,checkEquality:!1}),h({nodeExtent:y}))},panBy:y=>{const{transform:_,width:m,height:v,panZoom:w,translateExtent:S}=p();return lB({delta:y,panZoom:w,transform:_,translateExtent:S,width:m,height:v})},cancelConnection:()=>{h({connection:{...YN}})},updateConnection:y=>{h({connection:y})},reset:()=>h({...r2()})}},Object.is);function F7({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:o,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:l,fitView:u,nodeOrigin:c,nodeExtent:f,children:h}){const[p]=R.useState(()=>B7({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:u,minZoom:s,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:f}));return d.jsx(oF,{value:p,children:d.jsx(AF,{children:h})})}function z7({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:s,fitView:a,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:f,nodeExtent:h}){return R.useContext(Pm)?d.jsx(d.Fragment,{children:e}):d.jsx(F7,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:s,fitView:a,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:c,nodeOrigin:f,nodeExtent:h,children:e})}const H7={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function U7({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o,edgeTypes:s,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:b,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:m,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:k,onNodeDoubleClick:A,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:Y,onNodesDelete:D,onEdgesDelete:H,onDelete:Q,onSelectionChange:U,onSelectionDragStart:L,onSelectionDrag:te,onSelectionDragStop:Z,onSelectionContextMenu:oe,onSelectionStart:z,onSelectionEnd:V,onBeforeDelete:$,connectionMode:X,connectionLineType:ue=ta.Bezier,connectionLineStyle:ce,connectionLineComponent:Ce,connectionLineContainerStyle:Pe,deleteKeyCode:Me="Backspace",selectionKeyCode:B="Shift",selectionOnDrag:J=!1,selectionMode:re=Gd.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Ye=gg()?"Meta":"Control",zoomActivationKeyCode:He=gg()?"Meta":"Control",snapToGrid:ne,snapGrid:he,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:Ue,nodesDraggable:We,nodesConnectable:Ke,nodesFocusable:fe,nodeOrigin:Fe=TR,edgesFocusable:qe,edgesReconnectable:Oe,elementsSelectable:At=!0,defaultViewport:dn=vF,minZoom:Ct=.5,maxZoom:tn=2,translateExtent:O=Kd,preventScrolling:C=!0,nodeExtent:j,defaultMarkerColor:q="#b1b1b7",zoomOnScroll:de=!0,zoomOnPinch:je=!0,panOnScroll:Be=!1,panOnScrollSpeed:Nt=.5,panOnScrollMode:Vt=ul.Free,zoomOnDoubleClick:it=!0,panOnDrag:Yt=!0,onPaneClick:Ot,onPaneMouseEnter:Gi,onPaneMouseMove:ot,onPaneMouseLeave:xo,onPaneScroll:So,onPaneContextMenu:Eo,paneClickDistance:es=0,nodeClickDistance:Yi=0,children:Bs,onReconnect:W,onReconnectStart:ee,onReconnectEnd:Ze,onEdgeContextMenu:rt,onEdgeDoubleClick:gt,onEdgeMouseEnter:Pt,onEdgeMouseMove:Jt,onEdgeMouseLeave:ts,reconnectRadius:br=10,onNodesChange:Xi,onEdgesChange:ko,noDragClassName:Fs="nodrag",noWheelClassName:zr="nowheel",noPanClassName:Hr="nopan",fitView:cr,fitViewOptions:pi,connectOnClick:Ji,attributionPosition:Wn,proOptions:_r,defaultEdgeOptions:Qi,elevateNodesOnSelect:Fl,elevateEdgesOnSelect:Da,disableKeyboardA11y:fn=!1,autoPanOnConnect:Ii,autoPanOnNodeDrag:dr,autoPanSpeed:La,connectionRadius:Ur,isValidConnection:zs,onError:Co,style:ns,id:Pi,nodeDragThreshold:zl,viewport:jo,onViewportChange:Hl,width:Ht,height:F,colorMode:ae="light",debug:K,onScroll:le,..._e},pe){const Le=Pi||"1",Ge=xF(ae),Je=R.useCallback(Xe=>{Xe.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),le==null||le(Xe)},[le]);return d.jsx("div",{"data-testid":"rf__wrapper",..._e,onScroll:Je,style:{...ns,...H7},ref:pe,className:Yn(["react-flow",i,Ge]),id:Pi,children:d.jsxs(z7,{nodes:e,edges:t,width:Ht,height:F,fitView:cr,fitViewOptions:pi,minZoom:Ct,maxZoom:tn,nodeOrigin:Fe,nodeExtent:j,children:[d.jsx(L7,{onInit:u,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:k,onNodeDoubleClick:A,nodeTypes:o,edgeTypes:s,connectionLineType:ue,connectionLineStyle:ce,connectionLineComponent:Ce,connectionLineContainerStyle:Pe,selectionKeyCode:B,selectionOnDrag:J,selectionMode:re,deleteKeyCode:Me,multiSelectionKeyCode:Ye,panActivationKeyCode:De,zoomActivationKeyCode:He,onlyRenderVisibleElements:Se,defaultViewport:dn,translateExtent:O,minZoom:Ct,maxZoom:tn,preventScrolling:C,zoomOnScroll:de,zoomOnPinch:je,zoomOnDoubleClick:it,panOnScroll:Be,panOnScrollSpeed:Nt,panOnScrollMode:Vt,panOnDrag:Yt,onPaneClick:Ot,onPaneMouseEnter:Gi,onPaneMouseMove:ot,onPaneMouseLeave:xo,onPaneScroll:So,onPaneContextMenu:Eo,paneClickDistance:es,nodeClickDistance:Yi,onSelectionContextMenu:oe,onSelectionStart:z,onSelectionEnd:V,onReconnect:W,onReconnectStart:ee,onReconnectEnd:Ze,onEdgeContextMenu:rt,onEdgeDoubleClick:gt,onEdgeMouseEnter:Pt,onEdgeMouseMove:Jt,onEdgeMouseLeave:ts,reconnectRadius:br,defaultMarkerColor:q,noDragClassName:Fs,noWheelClassName:zr,noPanClassName:Hr,rfId:Le,disableKeyboardA11y:fn,nodeExtent:j,viewport:jo,onViewportChange:Hl}),d.jsx(_F,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:b,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:m,nodesDraggable:We,nodesConnectable:Ke,nodesFocusable:fe,edgesFocusable:qe,edgesReconnectable:Oe,elementsSelectable:At,elevateNodesOnSelect:Fl,elevateEdgesOnSelect:Da,minZoom:Ct,maxZoom:tn,nodeExtent:j,onNodesChange:Xi,onEdgesChange:ko,snapToGrid:ne,snapGrid:he,connectionMode:X,translateExtent:O,connectOnClick:Ji,defaultEdgeOptions:Qi,fitView:cr,fitViewOptions:pi,onNodesDelete:D,onEdgesDelete:H,onDelete:Q,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:Y,onSelectionDrag:te,onSelectionDragStart:L,onSelectionDragStop:Z,onMove:c,onMoveStart:f,onMoveEnd:h,noPanClassName:Hr,nodeOrigin:Fe,rfId:Le,autoPanOnConnect:Ii,autoPanOnNodeDrag:dr,autoPanSpeed:La,onError:Co,connectionRadius:Ur,isValidConnection:zs,selectNodesOnDrag:Ue,nodeDragThreshold:zl,onBeforeDelete:$,paneClickDistance:es,debug:K}),d.jsx(yF,{onSelectionChange:U}),Bs,d.jsx(fF,{proOptions:_r,position:Wn}),d.jsx(cF,{rfId:Le,disableKeyboardA11y:fn})]})})}var W7=$R(U7);function Br(){const e=xn();return R.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),i=Array.isArray(t)?t:[t],o=new Map;i.forEach(s=>{const a=n==null?void 0:n.querySelector('.react-flow__node[data-id="'.concat(s,'"]'));a&&o.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(o,{triggerFitView:!1}))},[])}const V7=mo.error014();function bo({id:e,handleType:t,handleId:n,onConnect:r,onDisconnect:i}={}){const o=_x(),s=e!=null?e:o;if(!s)throw new Error(V7);const a=R.useRef(null),l=Qt(u=>u.connectionLookup.get("".concat(s).concat(t?n?"-".concat(t,"-").concat(n):"-".concat(t):"")),M8);return R.useEffect(()=>{if(a.current&&a.current!==l){const u=l!=null?l:new Map;bE(a.current,u,i),bE(u,a.current,r)}a.current=l!=null?l:new Map},[l,r,i]),R.useMemo(()=>{var u;return Array.from((u=l==null?void 0:l.values())!=null?u:[])},[l])}function Mm(e){return Qt(R.useCallback(n=>{var s;const r=[],i=Array.isArray(e),o=i?e:[e];for(const a of o){const l=n.nodeLookup.get(a);l&&r.push({id:l.id,type:l.type,data:l.data})}return i?r:(s=r[0])!=null?s:null},[e]),uB)}function q7({dimensions:e,lineWidth:t,variant:n,className:r}){return d.jsx("path",{strokeWidth:t,d:"M".concat(e[0]/2," 0 V").concat(e[1]," M0 ").concat(e[1]/2," H").concat(e[0]),className:Yn(["react-flow__background-pattern",n,r])})}function K7({radius:e,className:t}){return d.jsx("circle",{cx:e,cy:e,r:e,className:Yn(["react-flow__background-pattern","dots",t])})}var ha;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ha||(ha={}));const G7={[ha.Dots]:1,[ha.Lines]:1,[ha.Cross]:6},Y7=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function iT({id:e,variant:t=ha.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=0,color:s,bgColor:a,style:l,className:u,patternClassName:c}){const f=R.useRef(null),{transform:h,patternId:p}=Qt(Y7,Ln),b=r||G7[t],y=t===ha.Dots,_=t===ha.Cross,m=Array.isArray(n)?n:[n,n],v=[m[0]*h[2]||1,m[1]*h[2]||1],w=b*h[2],S=Array.isArray(o)?o:[o,o],k=_?[w,w]:v,A=[S[0]*h[2]||1+k[0]/2,S[1]*h[2]||1+k[1]/2],T="".concat(p).concat(e||"");return d.jsxs("svg",{className:Yn(["react-flow__background",u]),style:{...l,...Om,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[d.jsx("pattern",{id:T,x:h[0]%v[0],y:h[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(A[0],",-").concat(A[1],")"),children:y?d.jsx(K7,{radius:w/2,className:c}):d.jsx(q7,{dimensions:k,lineWidth:i,variant:t,className:c})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(T,")")})]})}iT.displayName="Background";const X7=R.memo(iT);function J7(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Q7(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Z7(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function e9(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function t9(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Fh({children:e,className:t,...n}){return d.jsx("button",{type:"button",className:Yn(["react-flow__controls-button",t]),...n,children:e})}const n9=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function oT({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:u,children:c,position:f="bottom-left",orientation:h="vertical","aria-label":p="React Flow controls"}){const b=xn(),{isInteractive:y,minZoomReached:_,maxZoomReached:m}=Qt(n9,Ln),{zoomIn:v,zoomOut:w,fitView:S}=un(),k=()=>{v(),o==null||o()},A=()=>{w(),s==null||s()},T=()=>{S(i),a==null||a()},P=()=>{b.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)},Y=h==="horizontal"?"horizontal":"vertical";return d.jsxs(Uf,{className:Yn(["react-flow__controls",Y,u]),position:f,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&d.jsxs(d.Fragment,{children:[d.jsx(Fh,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m,children:d.jsx(J7,{})}),d.jsx(Fh,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_,children:d.jsx(Q7,{})})]}),n&&d.jsx(Fh,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view",children:d.jsx(Z7,{})}),r&&d.jsx(Fh,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?d.jsx(t9,{}):d.jsx(e9,{})}),c]})}oT.displayName="Controls";const r9=R.memo(oT);function i9({id:e,x:t,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:f,selected:h,onClick:p}){const{background:b,backgroundColor:y}=o||{},_=s||b||y;return d.jsx("rect",{className:Yn(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:_,stroke:a,strokeWidth:l},shapeRendering:f,onClick:p?m=>p(m,e):void 0})}const o9=R.memo(i9),s9=e=>e.nodes.map(t=>t.id),j0=e=>e instanceof Function?e:()=>e;function a9({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:o=o9,onClick:s}){const a=Qt(s9,Ln),l=j0(t),u=j0(e),c=j0(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:a.map(h=>d.jsx(u9,{id:h,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:o,onClick:s,shapeRendering:f},h))})}function l9({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:s,NodeComponent:a,onClick:l}){const{node:u,x:c,y:f,width:h,height:p}=Qt(b=>{const{internals:y}=b.nodeLookup.get(e),_=y.userNode,{x:m,y:v}=y.positionAbsolute,{width:w,height:S}=Ms(_);return{node:_,x:m,y:v,width:w,height:S}},Ln);return!u||u.hidden||!rR(u)?null:d.jsx(a,{x:c,y:f,width:h,height:p,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:o,shapeRendering:s,onClick:l,id:u.id})}const u9=R.memo(l9);var c9=R.memo(a9);const d9=200,f9=150,h9=e=>!e.hidden,p9=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nR(zf(e.nodeLookup,{filter:h9}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},g9="react-flow__minimap-desc";function sT({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:f,position:h="bottom-right",onClick:p,onNodeClick:b,pannable:y=!1,zoomable:_=!1,ariaLabel:m="React Flow mini map",inversePan:v,zoomStep:w=10,offsetScale:S=5}){var Ye,He;const k=xn(),A=R.useRef(null),{boundingRect:T,viewBB:P,rfId:Y,panZoom:D,translateExtent:H,flowWidth:Q,flowHeight:U}=Qt(p9,Ln),L=(Ye=e==null?void 0:e.width)!=null?Ye:d9,te=(He=e==null?void 0:e.height)!=null?He:f9,Z=T.width/L,oe=T.height/te,z=Math.max(Z,oe),V=z*L,$=z*te,X=S*z,ue=T.x-(V-T.width)/2-X,ce=T.y-($-T.height)/2-X,Ce=V+X*2,Pe=$+X*2,Me="".concat(g9,"-").concat(Y),B=R.useRef(0),J=R.useRef();B.current=z,R.useEffect(()=>{if(A.current&&D)return J.current=yB({domNode:A.current,panZoom:D,getTransform:()=>k.getState().transform,getViewScale:()=>B.current}),()=>{var ne;(ne=J.current)==null||ne.destroy()}},[D]),R.useEffect(()=>{var ne;(ne=J.current)==null||ne.update({translateExtent:H,width:Q,height:U,inversePan:v,pannable:y,zoomStep:w,zoomable:_})},[y,_,v,w,H,Q,U]);const re=p?ne=>{var Ue;const[he,Se]=((Ue=J.current)==null?void 0:Ue.pointer(ne))||[0,0];p(ne,{x:he,y:Se})}:void 0,De=b?R.useCallback((ne,he)=>{const Se=k.getState().nodeLookup.get(he).internals.userNode;b(ne,Se)},[]):void 0;return d.jsx(Uf,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*z:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:Yn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:L,height:te,viewBox:"".concat(ue," ").concat(ce," ").concat(Ce," ").concat(Pe),className:"react-flow__minimap-svg",role:"img","aria-labelledby":Me,ref:A,onClick:re,children:[m&&d.jsx("title",{id:Me,children:m}),d.jsx(c9,{onClick:De,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),d.jsx("path",{className:"react-flow__minimap-mask",d:"M".concat(ue-X,",").concat(ce-X,"h").concat(Ce+X*2,"v").concat(Pe+X*2,"h").concat(-Ce-X*2,"z\n        M").concat(P.x,",").concat(P.y,"h").concat(P.width,"v").concat(P.height,"h").concat(-P.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}sT.displayName="MiniMap";const m9=R.memo(sT);function y9({nodeId:e,position:t,variant:n=wd.Handle,className:r,style:i={},children:o,color:s,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,shouldResize:p,onResizeStart:b,onResize:y,onResizeEnd:_}){const m=_x(),v=typeof e=="string"?e:m,w=xn(),S=R.useRef(null),k=n===wd.Line?"right":"bottom-right",A=t!=null?t:k,T=R.useRef(null);R.useEffect(()=>{if(!(!S.current||!v))return T.current||(T.current=IB({domNode:S.current,nodeId:v,getStoreItems:()=>{const{nodeLookup:H,transform:Q,snapGrid:U,snapToGrid:L,nodeOrigin:te,domNode:Z}=w.getState();return{nodeLookup:H,transform:Q,snapGrid:U,snapToGrid:L,nodeOrigin:te,paneDomNode:Z}},onChange:(H,Q)=>{var $,X,ue,ce,Ce,Pe,Me;const{triggerNodeChanges:U,nodeLookup:L,parentLookup:te,nodeOrigin:Z}=w.getState(),oe=[],z={x:H.x,y:H.y},V=L.get(v);if(V&&V.expandParent&&V.parentId){const B=($=V.origin)!=null?$:Z,J=(ue=(X=H.width)!=null?X:V.measured.width)!=null?ue:0,re=(Ce=(ce=H.height)!=null?ce:V.measured.height)!=null?Ce:0,De={id:V.id,parentId:V.parentId,rect:{width:J,height:re,...iR({x:(Pe=H.x)!=null?Pe:V.position.x,y:(Me=H.y)!=null?Me:V.position.y},{width:J,height:re},V.parentId,L,B)}},Ye=wx([De],L,te,Z);oe.push(...Ye),z.x=H.x?Math.max(B[0]*J,H.x):void 0,z.y=H.y?Math.max(B[1]*re,H.y):void 0}if(z.x!==void 0&&z.y!==void 0){const B={id:v,type:"position",position:{...z}};oe.push(B)}if(H.width!==void 0&&H.height!==void 0){const J={id:v,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:H.width,height:H.height}};oe.push(J)}for(const B of Q){const J={...B,type:"position"};oe.push(J)}U(oe)},onEnd:({width:H,height:Q})=>{const U={id:v,type:"dimensions",resizing:!1,dimensions:{width:H,height:Q}};w.getState().triggerNodeChanges([U])}})),T.current.update({controlPosition:A,boundaries:{minWidth:a,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:f,resizeDirection:h,onResizeStart:b,onResize:y,onResizeEnd:_,shouldResize:p}),()=>{var H;(H=T.current)==null||H.destroy()}},[A,a,l,u,c,f,b,y,_,p]);const P=A.split("-"),Y=n===wd.Line?"borderColor":"backgroundColor",D=s?{...i,[Y]:s}:i;return d.jsx("div",{className:Yn(["react-flow__resize-control","nodrag",...P,n,r]),ref:S,style:D,children:o})}R.memo(y9);function v9({id:e,top:t,left:n,right:r,bottom:i,...o}){const{getNode:s,setNodes:a,addNodes:l,setEdges:u}=un(),c=R.useCallback(()=>{const p=s(e);if(!p)return;const b={x:p.position.x+50,y:p.position.y+50};l({...p,selected:!1,dragging:!1,id:"".concat(p.id,"-copy"),position:b})},[e,s,l]),f=R.useMemo(()=>{var p;return((p=s(e))==null?void 0:p.type)||""},[e,s]),h=R.useCallback(()=>{a(p=>p.filter(b=>b.id!==e)),u(p=>p.filter(b=>b.source!==e))},[e,a,u]);return d.jsx("div",{style:{position:"absolute",top:t,left:n,right:r,bottom:i,zIndex:9999},className:"context-menu",...o,children:d.jsxs("div",{children:[d.jsxs("p",{children:["node: ",e]}),["entry","output"].includes(f)?d.jsx(d.Fragment,{}):d.jsxs(d.Fragment,{children:[d.jsx("p",{color:"medium",onClick:c,children:"duplicate"}),d.jsx("p",{color:"danger",onClick:h,children:"delete"})]})]})})}function $r(e=[],t){const n=[];return n.push({id:"1",type:"entry",data:{params:e},position:{x:100,y:100}}),t&&n.push({id:"2",type:"output",data:{param:t},position:{x:250,y:100}}),n}function uo(e=[],t=[],n){const r=e.findIndex(o=>o.type==="entry");if(r===-1||(e[r].data.params=t,!n))return e;const i=e.findIndex(o=>o.type==="output");return i===-1||(e[i].data.param=n),e}function w9(e){switch(e){case"get_system_data":return{path:"",type:"unknown"};case"get_page_data":return{path:"",type:"unknown"};case"get_character_data":return{path:"",type:"unknown"};case"set_system_data":return{path:"",type:"unknown"};case"set_page_data":return{path:"",type:"unknown"};case"set_character_data":return{path:"",type:"unknown"};case"open_modal":return{type:"edit_object",title:"edit object",inputType:""};case"create_data_from_type":return{spreadType:{name:"",properties:[]}};case"spread_object":return{inputType:"unknown"};case"add_to_array":return{inputType:"unknown"};case"array_remove":return{inputType:"unknown"};case"array_update":return{inputType:"unknown"};case"array_get":return{inputType:"unknown"};case"filter":return{inputType:"unknown"};case"map":return{inputType:"unknown"};case"string_new":return{value:""};case"string_includes":return{string1:"",string2:""};case"string_compare":return{string1:"",string2:""};case"string_concat":return{string1:"",string2:""};case"number_to_string":return{number:0};case"new_number":return{value:0};case"add":return{number1:0,number2:0};case"subtract":return{number1:0,number2:0};case"divide":return{number1:0,number2:0};case"multiply":return{number1:0,number2:0};case"floor":return{number:0};case"new_enum":return{value:""};case"enum_compare":return{input:""};case"boolean_new":return{value:!1};case"boolean_branch":return{boolean:!1};case"boolean_inverse":return{};case"blueprint_run":return{params:[],returnType:"none",inputs:{},outputs:{}};default:return null}}function i2(e,t){return Math.floor(Math.random()*(t-e+1))+e}function b9({top:e,left:t,right:n,bottom:r,rawX:i,rawY:o,...s}){const{addNodes:a,getNodes:l,screenToFlowPosition:u}=un(),c=R.useCallback(p=>{const b=l(),{x:y,y:_}=u({x:i,y:o});let m=""+i2(1,2e3);for(;b.find(w=>w.id===m);)m=""+i2(1,2e3);const v=w9(p);v&&a({id:m,type:p,data:v,position:{x:y,y:_},selected:!1,dragging:!1})},[a,l,u]),[f,h]=R.useState(-1);return d.jsx("div",{className:"absolute bg-black shadow-lg rounded-md p-2 text-sm context-menu",style:{top:e-50,left:t,right:n,bottom:r,zIndex:9999},...s,children:d.jsxs("ul",{children:[d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(1),onMouseLeave:()=>h(-1),children:["Character",f===1&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_character_data"),children:"Get Character Data"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_character_data"),children:"Set Character Data"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(2),onMouseLeave:()=>h(-1),children:["Page",f===2&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_page_data"),children:"Get Page Data"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_page_data"),children:"Set Page Data"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(3),onMouseLeave:()=>h(-1),children:["System",f===3&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("get_system_data"),children:"Get System Data"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("set_system_data"),children:"Set System Data"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(4),onMouseLeave:()=>h(-1),children:["Array",f===4&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_get"),children:"Get Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("add_to_array"),children:"Add Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_remove"),children:"Remove Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("array_update"),children:"Update Item"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("filter"),children:"Filter"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("map"),children:"Map"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(5),onMouseLeave:()=>h(-1),children:["Object",f===5&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("spread_object"),children:"Spread Object"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("create_data_from_type"),children:"Create Object From Type"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(6),onMouseLeave:()=>h(-1),children:["String",f===6&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_new"),children:"New String"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_includes"),children:"Includes"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_compare"),children:"Compare"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("string_concat"),children:"Concat"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(7),onMouseLeave:()=>h(-1),children:["Numbers",f===7&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("new_number"),children:"New Number"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("divide"),children:"Divide"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("add"),children:"Add"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("subtract"),children:"Subtract"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("multiply"),children:"Multiply"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("floor"),children:"Floor"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("number_to_string"),children:"Number To String"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(8),onMouseLeave:()=>h(-1),children:["Enums",f===8&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("new_enum"),children:"New Enum"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("enum_compare"),children:"Compare Enum"})]})]}),d.jsxs("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onMouseEnter:()=>h(9),onMouseLeave:()=>h(-1),children:["Booleans",f===9&&d.jsxs("ul",{className:"absolute left-full top-0 bg-black shadow-lg rounded-md p-2",children:[d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_new"),children:"New Boolean"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_branch"),children:"Branch"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer",onClick:()=>c("boolean_inverse"),children:"Inverse"})]})]}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>c("open_modal"),children:"Open Modal"}),d.jsx("li",{className:"hover:bg-gray-700 p-2 cursor-pointer relative",onClick:()=>c("blueprint_run"),children:"Run Blueprint"})]})})}const _9={characterPage:"Info",modalsPage:"Start",creatorPage:"Start",tab:"character",versionId:""},ln=Ta(_9);function o2(e){ln.set(t=>({...t,creatorPage:e}))}function s2(e){ln.set(t=>({...t,characterPage:e}))}function x9(e){ln.set(t=>({...t,tab:e}))}const en=({children:e,title:t})=>d.jsxs("a",{className:"block max-w-sm p-6 bg-white border border-neutral-200 rounded-lg shadow hover:bg-neutral-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700",children:[d.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-neutral-900 dark:text-white",children:t}),d.jsx("div",{className:"font-normal text-neutral-700 dark:text-neutral-400",children:e})]}),dt=R.forwardRef(({id:e,label:t,value:n,onChange:r,children:i,style:o,containerClassName:s,labelClassName:a,className:l},u)=>d.jsxs("div",{className:s||"mb-6",style:o,ref:u,children:[d.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white ".concat(a),children:t}),d.jsx("select",{id:e,className:"".concat(l," bg-neutral-50 border border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-brand-500 dark:focus:border-brand-500"),value:n,onChange:c=>r(c.target.value),children:i})]}));var aT={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Bi,function(){var n=function(g,x){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,N){E.__proto__=N}||function(E,N){for(var I in N)Object.prototype.hasOwnProperty.call(N,I)&&(E[I]=N[I])})(g,x)},r=function(){return(r=Object.assign||function(g){for(var x,E=1,N=arguments.length;E<N;E++)for(var I in x=arguments[E])Object.prototype.hasOwnProperty.call(x,I)&&(g[I]=x[I]);return g}).apply(this,arguments)};function i(g,x,E){for(var N,I=0,M=x.length;I<M;I++)!N&&I in x||((N=N||Array.prototype.slice.call(x,0,I))[I]=x[I]);return g.concat(N||Array.prototype.slice.call(x))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Bi,s=Object.keys,a=Array.isArray;function l(g,x){return typeof x!="object"||s(x).forEach(function(E){g[E]=x[E]}),g}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(g,x){return c.call(g,x)}function h(g,x){typeof x=="function"&&(x=x(u(g))),(typeof Reflect>"u"?s:Reflect.ownKeys)(x).forEach(function(E){b(g,E,x[E])})}var p=Object.defineProperty;function b(g,x,E,N){p(g,x,l(E&&f(E,"get")&&typeof E.get=="function"?{get:E.get,set:E.set,configurable:!0}:{value:E,configurable:!0,writable:!0},N))}function y(g){return{from:function(x){return g.prototype=Object.create(x.prototype),b(g.prototype,"constructor",g),{extend:h.bind(null,g.prototype)}}}}var _=Object.getOwnPropertyDescriptor,m=[].slice;function v(g,x,E){return m.call(g,x,E)}function w(g,x){return x(g)}function S(g){if(!g)throw new Error("Assertion Failed")}function k(g){o.setImmediate?setImmediate(g):setTimeout(g,0)}function A(g,x){if(typeof x=="string"&&f(g,x))return g[x];if(!x)return g;if(typeof x!="string"){for(var E=[],N=0,I=x.length;N<I;++N){var M=A(g,x[N]);E.push(M)}return E}var G=x.indexOf(".");if(G!==-1){var ie=g[x.substr(0,G)];return ie==null?void 0:A(ie,x.substr(G+1))}}function T(g,x,E){if(g&&x!==void 0&&!("isFrozen"in Object&&Object.isFrozen(g)))if(typeof x!="string"&&"length"in x){S(typeof E!="string"&&"length"in E);for(var N=0,I=x.length;N<I;++N)T(g,x[N],E[N])}else{var M,G,ie=x.indexOf(".");ie!==-1?(M=x.substr(0,ie),(G=x.substr(ie+1))===""?E===void 0?a(g)&&!isNaN(parseInt(M))?g.splice(M,1):delete g[M]:g[M]=E:T(ie=!(ie=g[M])||!f(g,M)?g[M]={}:ie,G,E)):E===void 0?a(g)&&!isNaN(parseInt(x))?g.splice(x,1):delete g[x]:g[x]=E}}function P(g){var x,E={};for(x in g)f(g,x)&&(E[x]=g[x]);return E}var Y=[].concat;function D(g){return Y.apply([],g)}var tn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(g){return["Int","Uint","Float"].map(function(x){return x+g+"Array"})}))).filter(function(g){return o[g]}),H=new Set(tn.map(function(g){return o[g]})),Q=null;function U(g){return Q=new WeakMap,g=function x(E){if(!E||typeof E!="object")return E;var N=Q.get(E);if(N)return N;if(a(E)){N=[],Q.set(E,N);for(var I=0,M=E.length;I<M;++I)N.push(x(E[I]))}else if(H.has(E.constructor))N=E;else{var G,ie=u(E);for(G in N=ie===Object.prototype?{}:Object.create(ie),Q.set(E,N),E)f(E,G)&&(N[G]=x(E[G]))}return N}(g),Q=null,g}var L={}.toString;function te(g){return L.call(g).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",oe=typeof Z=="symbol"?function(g){var x;return g!=null&&(x=g[Z])&&x.apply(g)}:function(){return null};function z(g,x){return x=g.indexOf(x),0<=x&&g.splice(x,1),0<=x}var V={};function $(g){var x,E,N,I;if(arguments.length===1){if(a(g))return g.slice();if(this===V&&typeof g=="string")return[g];if(I=oe(g)){for(E=[];!(N=I.next()).done;)E.push(N.value);return E}if(g==null)return[g];if(typeof(x=g.length)!="number")return[g];for(E=new Array(x);x--;)E[x]=g[x];return E}for(x=arguments.length,E=new Array(x);x--;)E[x]=arguments[x];return E}var X=typeof Symbol<"u"?function(g){return g[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Oi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ct),ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ce(g,x){this.name=g,this.message=x}function Ce(g,x){return g+". Errors: "+Object.keys(x).map(function(E){return x[E].toString()}).filter(function(E,N,I){return I.indexOf(E)===N}).join("\n")}function Pe(g,x,E,N){this.failures=x,this.failedKeys=N,this.successCount=E,this.message=Ce(g,x)}function Me(g,x){this.name="BulkError",this.failures=Object.keys(x).map(function(E){return x[E]}),this.failuresByPos=x,this.message=Ce(g,this.failures)}y(ce).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(Pe).from(ce),y(Me).from(ce);var B=Oi.reduce(function(g,x){return g[x]=x+"Error",g},{}),J=ce,re=Oi.reduce(function(g,x){var E=x+"Error";function N(I,M){this.name=E,I?typeof I=="string"?(this.message="".concat(I).concat(M?"\n "+M:""),this.inner=M||null):typeof I=="object"&&(this.message="".concat(I.name," ").concat(I.message),this.inner=I):(this.message=ue[x]||E,this.inner=null)}return y(N).from(J),g[x]=N,g},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var De=Ct.reduce(function(g,x){return g[x+"Error"]=re[x],g},{}),Ye=Oi.reduce(function(g,x){return["Syntax","Type","Range"].indexOf(x)===-1&&(g[x+"Error"]=re[x]),g},{});function He(){}function ne(g){return g}function he(g,x){return g==null||g===ne?x:function(E){return x(g(E))}}function Se(g,x){return function(){g.apply(this,arguments),x.apply(this,arguments)}}function Ue(g,x){return g===He?x:function(){var E=g.apply(this,arguments);E!==void 0&&(arguments[0]=E);var N=this.onsuccess,I=this.onerror;this.onsuccess=null,this.onerror=null;var M=x.apply(this,arguments);return N&&(this.onsuccess=this.onsuccess?Se(N,this.onsuccess):N),I&&(this.onerror=this.onerror?Se(I,this.onerror):I),M!==void 0?M:E}}function We(g,x){return g===He?x:function(){g.apply(this,arguments);var E=this.onsuccess,N=this.onerror;this.onsuccess=this.onerror=null,x.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?Se(E,this.onsuccess):E),N&&(this.onerror=this.onerror?Se(N,this.onerror):N)}}function Ke(g,x){return g===He?x:function(E){var N=g.apply(this,arguments);l(E,N);var I=this.onsuccess,M=this.onerror;return this.onsuccess=null,this.onerror=null,E=x.apply(this,arguments),I&&(this.onsuccess=this.onsuccess?Se(I,this.onsuccess):I),M&&(this.onerror=this.onerror?Se(M,this.onerror):M),N===void 0?E===void 0?void 0:E:l(N,E)}}function fe(g,x){return g===He?x:function(){return x.apply(this,arguments)!==!1&&g.apply(this,arguments)}}function Fe(g,x){return g===He?x:function(){var E=g.apply(this,arguments);if(E&&typeof E.then=="function"){for(var N=this,I=arguments.length,M=new Array(I);I--;)M[I]=arguments[I];return E.then(function(){return x.apply(N,M)})}return x.apply(this,arguments)}}Ye.ModifyError=Pe,Ye.DexieError=ce,Ye.BulkError=Me;var qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Oe(g){qe=g}var At={},dn=100,tn=typeof Promise>"u"?[]:function(){var g=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[g,u(g),g];var x=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[x,u(x),g]}(),Ct=tn[0],Oi=tn[1],tn=tn[2],Oi=Oi&&Oi.then,O=Ct&&Ct.constructor,C=!!tn,j=function(g,x){Yt.push([g,x]),de&&(queueMicrotask(W),de=!1)},q=!0,de=!0,je=[],Be=[],Nt=ne,Vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},it=Vt,Yt=[],Ot=0,Gi=[];function ot(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var x=this._PSD=it;if(typeof g!="function"){if(g!==At)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Eo(this,this._value))}this._state=null,this._value=null,++x.ref,function E(N,I){try{I(function(M){if(N._state===null){if(M===N)throw new TypeError("A promise cannot be resolved with itself.");var G=N._lib&&ee();M&&typeof M.then=="function"?E(N,function(ie,ge){M instanceof ot?M._then(ie,ge):M.then(ie,ge)}):(N._state=!0,N._value=M,es(N)),G&&Ze()}},Eo.bind(null,N))}catch(M){Eo(N,M)}}(this,g)}var xo={get:function(){var g=it,x=ko;function E(N,I){var M=this,G=!g.global&&(g!==it||x!==ko),ie=G&&!cr(),ge=new ot(function(ve,xe){Yi(M,new So(Fl(N,g,G,ie),Fl(I,g,G,ie),ve,xe,g))});return this._consoleTask&&(ge._consoleTask=this._consoleTask),ge}return E.prototype=At,E},set:function(g){b(this,"then",g&&g.prototype===At?xo:{get:function(){return g},set:xo.set})}};function So(g,x,E,N,I){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof x=="function"?x:null,this.resolve=E,this.reject=N,this.psd=I}function Eo(g,x){var E,N;Be.push(x),g._state===null&&(E=g._lib&&ee(),x=Nt(x),g._state=!1,g._value=x,N=g,je.some(function(I){return I._value===N._value})||je.push(N),es(g),E&&Ze())}function es(g){var x=g._listeners;g._listeners=[];for(var E=0,N=x.length;E<N;++E)Yi(g,x[E]);var I=g._PSD;--I.ref||I.finalize(),Ot===0&&(++Ot,j(function(){--Ot==0&&rt()},[]))}function Yi(g,x){if(g._state!==null){var E=g._state?x.onFulfilled:x.onRejected;if(E===null)return(g._state?x.resolve:x.reject)(g._value);++x.psd.ref,++Ot,j(Bs,[E,g,x])}else g._listeners.push(x)}function Bs(g,x,E){try{var N,I=x._value;!x._state&&Be.length&&(Be=[]),N=qe&&x._consoleTask?x._consoleTask.run(function(){return g(I)}):g(I),x._state||Be.indexOf(I)!==-1||function(M){for(var G=je.length;G;)if(je[--G]._value===M._value)return je.splice(G,1)}(x),E.resolve(N)}catch(M){E.reject(M)}finally{--Ot==0&&rt(),--E.psd.ref||E.psd.finalize()}}function W(){Qi(Vt,function(){ee()&&Ze()})}function ee(){var g=q;return de=q=!1,g}function Ze(){var g,x,E;do for(;0<Yt.length;)for(g=Yt,Yt=[],E=g.length,x=0;x<E;++x){var N=g[x];N[0].apply(null,N[1])}while(0<Yt.length);de=q=!0}function rt(){var g=je;je=[],g.forEach(function(N){N._PSD.onunhandled.call(null,N._value,N)});for(var x=Gi.slice(0),E=x.length;E;)x[--E]()}function gt(g){return new ot(At,!1,g)}function Pt(g,x){var E=it;return function(){var N=ee(),I=it;try{return Wn(E,!0),g.apply(this,arguments)}catch(M){x&&x(M)}finally{Wn(I,!1),N&&Ze()}}}h(ot.prototype,{then:xo,_then:function(g,x){Yi(this,new So(null,null,g,x,it))},catch:function(g){if(arguments.length===1)return this.then(null,g);var x=g,E=arguments[1];return typeof x=="function"?this.then(null,function(N){return(N instanceof x?E:gt)(N)}):this.then(null,function(N){return(N&&N.name===x?E:gt)(N)})},finally:function(g){return this.then(function(x){return ot.resolve(g()).then(function(){return x})},function(x){return ot.resolve(g()).then(function(){return gt(x)})})},timeout:function(g,x){var E=this;return g<1/0?new ot(function(N,I){var M=setTimeout(function(){return I(new re.Timeout(x))},g);E.then(N,I).finally(clearTimeout.bind(null,M))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(ot.prototype,Symbol.toStringTag,"Dexie.Promise"),Vt.env=_r(),h(ot,{all:function(){var g=$.apply(null,arguments).map(pi);return new ot(function(x,E){g.length===0&&x([]);var N=g.length;g.forEach(function(I,M){return ot.resolve(I).then(function(G){g[M]=G,--N||x(g)},E)})})},resolve:function(g){return g instanceof ot?g:g&&typeof g.then=="function"?new ot(function(x,E){g.then(x,E)}):new ot(At,!0,g)},reject:gt,race:function(){var g=$.apply(null,arguments).map(pi);return new ot(function(x,E){g.map(function(N){return ot.resolve(N).then(x,E)})})},PSD:{get:function(){return it},set:function(g){return it=g}},totalEchoes:{get:function(){return ko}},newPSD:zr,usePSD:Qi,scheduler:{get:function(){return j},set:function(g){j=g}},rejectionMapper:{get:function(){return Nt},set:function(g){Nt=g}},follow:function(g,x){return new ot(function(E,N){return zr(function(I,M){var G=it;G.unhandleds=[],G.onunhandled=M,G.finalize=Se(function(){var ie,ge=this;ie=function(){ge.unhandleds.length===0?I():M(ge.unhandleds[0])},Gi.push(function ve(){ie(),Gi.splice(Gi.indexOf(ve),1)}),++Ot,j(function(){--Ot==0&&rt()},[])},G.finalize),g()},x,E,N)})}}),O&&(O.allSettled&&b(ot,"allSettled",function(){var g=$.apply(null,arguments).map(pi);return new ot(function(x){g.length===0&&x([]);var E=g.length,N=new Array(E);g.forEach(function(I,M){return ot.resolve(I).then(function(G){return N[M]={status:"fulfilled",value:G}},function(G){return N[M]={status:"rejected",reason:G}}).then(function(){return--E||x(N)})})})}),O.any&&typeof AggregateError<"u"&&b(ot,"any",function(){var g=$.apply(null,arguments).map(pi);return new ot(function(x,E){g.length===0&&E(new AggregateError([]));var N=g.length,I=new Array(N);g.forEach(function(M,G){return ot.resolve(M).then(function(ie){return x(ie)},function(ie){I[G]=ie,--N||E(new AggregateError(I))})})})}),O.withResolvers&&(ot.withResolvers=O.withResolvers));var Jt={awaits:0,echoes:0,id:0},ts=0,br=[],Xi=0,ko=0,Fs=0;function zr(g,x,E,N){var I=it,M=Object.create(I);return M.parent=I,M.ref=0,M.global=!1,M.id=++Fs,Vt.env,M.env=C?{Promise:ot,PromiseProp:{value:ot,configurable:!0,writable:!0},all:ot.all,race:ot.race,allSettled:ot.allSettled,any:ot.any,resolve:ot.resolve,reject:ot.reject}:{},x&&l(M,x),++I.ref,M.finalize=function(){--this.parent.ref||this.parent.finalize()},N=Qi(M,g,E,N),M.ref===0&&M.finalize(),N}function Hr(){return Jt.id||(Jt.id=++ts),++Jt.awaits,Jt.echoes+=dn,Jt.id}function cr(){return!!Jt.awaits&&(--Jt.awaits==0&&(Jt.id=0),Jt.echoes=Jt.awaits*dn,!0)}function pi(g){return Jt.echoes&&g&&g.constructor===O?(Hr(),g.then(function(x){return cr(),x},function(x){return cr(),fn(x)})):g}function Ji(){var g=br[br.length-1];br.pop(),Wn(g,!1)}function Wn(g,x){var E,N=it;(x?!Jt.echoes||Xi++&&g===it:!Xi||--Xi&&g===it)||queueMicrotask(x?(function(I){++ko,Jt.echoes&&--Jt.echoes!=0||(Jt.echoes=Jt.awaits=Jt.id=0),br.push(it),Wn(I,!0)}).bind(null,g):Ji),g!==it&&(it=g,N===Vt&&(Vt.env=_r()),C&&(E=Vt.env.Promise,x=g.env,(N.global||g.global)&&(Object.defineProperty(o,"Promise",x.PromiseProp),E.all=x.all,E.race=x.race,E.resolve=x.resolve,E.reject=x.reject,x.allSettled&&(E.allSettled=x.allSettled),x.any&&(E.any=x.any))))}function _r(){var g=o.Promise;return C?{Promise:g,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:g.all,race:g.race,allSettled:g.allSettled,any:g.any,resolve:g.resolve,reject:g.reject}:{}}function Qi(g,x,E,N,I){var M=it;try{return Wn(g,!0),x(E,N,I)}finally{Wn(M,!1)}}function Fl(g,x,E,N){return typeof g!="function"?g:function(){var I=it;E&&Hr(),Wn(x,!0);try{return g.apply(this,arguments)}finally{Wn(I,!1),N&&queueMicrotask(cr)}}}function Da(g){Promise===O&&Jt.echoes===0?Xi===0?g():enqueueNativeMicroTask(g):setTimeout(g,0)}(""+Oi).indexOf("[native code]")===-1&&(Hr=cr=He);var fn=ot.reject,Ii="",dr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",La="String expected.",Ur=[],zs="__dbnames",Co="readonly",ns="readwrite";function Pi(g,x){return g?x?function(){return g.apply(this,arguments)&&x.apply(this,arguments)}:g:x}var zl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function jo(g){return typeof g!="string"||/\./.test(g)?function(x){return x}:function(x){return x[g]===void 0&&g in x&&delete(x=U(x))[g],x}}function Hl(){throw re.Type()}function Ht(g,x){try{var E=F(g),N=F(x);if(E!==N)return E==="Array"?1:N==="Array"?-1:E==="binary"?1:N==="binary"?-1:E==="string"?1:N==="string"?-1:E==="Date"?1:N!=="Date"?NaN:-1;switch(E){case"number":case"Date":case"string":return x<g?1:g<x?-1:0;case"binary":return function(I,M){for(var G=I.length,ie=M.length,ge=G<ie?G:ie,ve=0;ve<ge;++ve)if(I[ve]!==M[ve])return I[ve]<M[ve]?-1:1;return G===ie?0:G<ie?-1:1}(ae(g),ae(x));case"Array":return function(I,M){for(var G=I.length,ie=M.length,ge=G<ie?G:ie,ve=0;ve<ge;++ve){var xe=Ht(I[ve],M[ve]);if(xe!==0)return xe}return G===ie?0:G<ie?-1:1}(g,x)}}catch(I){}return NaN}function F(g){var x=typeof g;return x!="object"?x:ArrayBuffer.isView(g)?"binary":(g=te(g),g==="ArrayBuffer"?"binary":g)}function ae(g){return g instanceof Uint8Array?g:ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g)}var K=(le.prototype._trans=function(g,x,E){var N=this._tx||it.trans,I=this.name,M=qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function G(ve,xe,se){if(!se.schema[I])throw new re.NotFound("Table "+I+" not part of transaction");return x(se.idbtrans,se)}var ie=ee();try{var ge=N&&N.db._novip===this.db._novip?N===it.trans?N._promise(g,G,E):zr(function(){return N._promise(g,G,E)},{trans:N,transless:it.transless||it}):function ve(xe,se,ke,me){if(xe.idbdb&&(xe._state.openComplete||it.letThrough||xe._vip)){var be=xe._createTransaction(se,ke,xe._dbSchema);try{be.create(),xe._state.PR1398_maxLoop=3}catch(Ee){return Ee.name===B.InvalidState&&xe.isOpen()&&0<--xe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),xe.close({disableAutoOpen:!1}),xe.open().then(function(){return ve(xe,se,ke,me)})):fn(Ee)}return be._promise(se,function(Ee,we){return zr(function(){return it.trans=be,me(Ee,we,be)})}).then(function(Ee){if(se==="readwrite")try{be.idbtrans.commit()}catch(we){}return se==="readonly"?Ee:be._completion.then(function(){return Ee})})}if(xe._state.openComplete)return fn(new re.DatabaseClosed(xe._state.dbOpenError));if(!xe._state.isBeingOpened){if(!xe._state.autoOpen)return fn(new re.DatabaseClosed);xe.open().catch(He)}return xe._state.dbReadyPromise.then(function(){return ve(xe,se,ke,me)})}(this.db,g,[this.name],G);return M&&(ge._consoleTask=M,ge=ge.catch(function(ve){return console.trace(ve),fn(ve)})),ge}finally{ie&&Ze()}},le.prototype.get=function(g,x){var E=this;return g&&g.constructor===Object?this.where(g).first(x):g==null?fn(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(N){return E.core.get({trans:N,key:g}).then(function(I){return E.hook.reading.fire(I)})}).then(x)},le.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(a(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var x=s(g);if(x.length===1)return this.where(x[0]).equals(g[x[0]]);var E=this.schema.indexes.concat(this.schema.primKey).filter(function(ie){if(ie.compound&&x.every(function(ve){return 0<=ie.keyPath.indexOf(ve)})){for(var ge=0;ge<x.length;++ge)if(x.indexOf(ie.keyPath[ge])===-1)return!1;return!0}return!1}).sort(function(ie,ge){return ie.keyPath.length-ge.keyPath.length})[0];if(E&&this.db._maxKey!==Ii){var M=E.keyPath.slice(0,x.length);return this.where(M).equals(M.map(function(ge){return g[ge]}))}!E&&qe&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(x.join("+"),"]"));var N=this.schema.idxByName;function I(ie,ge){return Ht(ie,ge)===0}var G=x.reduce(function(se,ge){var ve=se[0],xe=se[1],se=N[ge],ke=g[ge];return[ve||se,ve||!se?Pi(xe,se&&se.multi?function(me){return me=A(me,ge),a(me)&&me.some(function(be){return I(ke,be)})}:function(me){return I(ke,A(me,ge))}):xe]},[null,null]),M=G[0],G=G[1];return M?this.where(M.name).equals(g[M.keyPath]).filter(G):E?this.filter(G):this.where(x).equals("")},le.prototype.filter=function(g){return this.toCollection().and(g)},le.prototype.count=function(g){return this.toCollection().count(g)},le.prototype.offset=function(g){return this.toCollection().offset(g)},le.prototype.limit=function(g){return this.toCollection().limit(g)},le.prototype.each=function(g){return this.toCollection().each(g)},le.prototype.toArray=function(g){return this.toCollection().toArray(g)},le.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},le.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,a(g)?"[".concat(g.join("+"),"]"):g))},le.prototype.reverse=function(){return this.toCollection().reverse()},le.prototype.mapToClass=function(g){var x,E=this.db,N=this.name;function I(){return x!==null&&x.apply(this,arguments)||this}(this.schema.mappedClass=g).prototype instanceof Hl&&(function(ge,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");function xe(){this.constructor=ge}n(ge,ve),ge.prototype=ve===null?Object.create(ve):(xe.prototype=ve.prototype,new xe)}(I,x=g),Object.defineProperty(I.prototype,"db",{get:function(){return E},enumerable:!1,configurable:!0}),I.prototype.table=function(){return N},g=I);for(var M=new Set,G=g.prototype;G;G=u(G))Object.getOwnPropertyNames(G).forEach(function(ge){return M.add(ge)});function ie(ge){if(!ge)return ge;var ve,xe=Object.create(g.prototype);for(ve in ge)if(!M.has(ve))try{xe[ve]=ge[ve]}catch(se){}return xe}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ie,this.hook("reading",ie),g},le.prototype.defineClass=function(){return this.mapToClass(function(g){l(this,g)})},le.prototype.add=function(g,x){var E=this,N=this.schema.primKey,I=N.auto,M=N.keyPath,G=g;return M&&I&&(G=jo(M)(g)),this._trans("readwrite",function(ie){return E.core.mutate({trans:ie,type:"add",keys:x!=null?[x]:null,values:[G]})}).then(function(ie){return ie.numFailures?ot.reject(ie.failures[0]):ie.lastResult}).then(function(ie){if(M)try{T(g,M,ie)}catch(ge){}return ie})},le.prototype.update=function(g,x){return typeof g!="object"||a(g)?this.where(":id").equals(g).modify(x):(g=A(g,this.schema.primKey.keyPath),g===void 0?fn(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(g).modify(x))},le.prototype.put=function(g,x){var E=this,N=this.schema.primKey,I=N.auto,M=N.keyPath,G=g;return M&&I&&(G=jo(M)(g)),this._trans("readwrite",function(ie){return E.core.mutate({trans:ie,type:"put",values:[G],keys:x!=null?[x]:null})}).then(function(ie){return ie.numFailures?ot.reject(ie.failures[0]):ie.lastResult}).then(function(ie){if(M)try{T(g,M,ie)}catch(ge){}return ie})},le.prototype.delete=function(g){var x=this;return this._trans("readwrite",function(E){return x.core.mutate({trans:E,type:"delete",keys:[g]})}).then(function(E){return E.numFailures?ot.reject(E.failures[0]):void 0})},le.prototype.clear=function(){var g=this;return this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"deleteRange",range:zl})}).then(function(x){return x.numFailures?ot.reject(x.failures[0]):void 0})},le.prototype.bulkGet=function(g){var x=this;return this._trans("readonly",function(E){return x.core.getMany({keys:g,trans:E}).then(function(N){return N.map(function(I){return x.hook.reading.fire(I)})})})},le.prototype.bulkAdd=function(g,x,E){var N=this,I=Array.isArray(x)?x:void 0,M=(E=E||(I?void 0:x))?E.allKeys:void 0;return this._trans("readwrite",function(G){var ve=N.schema.primKey,ie=ve.auto,ve=ve.keyPath;if(ve&&I)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(I&&I.length!==g.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var ge=g.length,ve=ve&&ie?g.map(jo(ve)):g;return N.core.mutate({trans:G,type:"add",keys:I,values:ve,wantResults:M}).then(function(be){var se=be.numFailures,ke=be.results,me=be.lastResult,be=be.failures;if(se===0)return M?ke:me;throw new Me("".concat(N.name,".bulkAdd(): ").concat(se," of ").concat(ge," operations failed"),be)})})},le.prototype.bulkPut=function(g,x,E){var N=this,I=Array.isArray(x)?x:void 0,M=(E=E||(I?void 0:x))?E.allKeys:void 0;return this._trans("readwrite",function(G){var ve=N.schema.primKey,ie=ve.auto,ve=ve.keyPath;if(ve&&I)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(I&&I.length!==g.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var ge=g.length,ve=ve&&ie?g.map(jo(ve)):g;return N.core.mutate({trans:G,type:"put",keys:I,values:ve,wantResults:M}).then(function(be){var se=be.numFailures,ke=be.results,me=be.lastResult,be=be.failures;if(se===0)return M?ke:me;throw new Me("".concat(N.name,".bulkPut(): ").concat(se," of ").concat(ge," operations failed"),be)})})},le.prototype.bulkUpdate=function(g){var x=this,E=this.core,N=g.map(function(G){return G.key}),I=g.map(function(G){return G.changes}),M=[];return this._trans("readwrite",function(G){return E.getMany({trans:G,keys:N,cache:"clone"}).then(function(ie){var ge=[],ve=[];g.forEach(function(se,ke){var me=se.key,be=se.changes,Ee=ie[ke];if(Ee){for(var we=0,Ae=Object.keys(be);we<Ae.length;we++){var Te=Ae[we],Ie=be[Te];if(Te===x.schema.primKey.keyPath){if(Ht(Ie,me)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else T(Ee,Te,Ie)}M.push(ke),ge.push(me),ve.push(Ee)}});var xe=ge.length;return E.mutate({trans:G,type:"put",keys:ge,values:ve,updates:{keys:N,changeSpecs:I}}).then(function(se){var ke=se.numFailures,me=se.failures;if(ke===0)return xe;for(var be=0,Ee=Object.keys(me);be<Ee.length;be++){var we,Ae=Ee[be],Te=M[Number(Ae)];Te!=null&&(we=me[Ae],delete me[Ae],me[Te]=we)}throw new Me("".concat(x.name,".bulkUpdate(): ").concat(ke," of ").concat(xe," operations failed"),me)})})})},le.prototype.bulkDelete=function(g){var x=this,E=g.length;return this._trans("readwrite",function(N){return x.core.mutate({trans:N,type:"delete",keys:g})}).then(function(G){var I=G.numFailures,M=G.lastResult,G=G.failures;if(I===0)return M;throw new Me("".concat(x.name,".bulkDelete(): ").concat(I," of ").concat(E," operations failed"),G)})},le);function le(){}function _e(g){function x(G,ie){if(ie){for(var ge=arguments.length,ve=new Array(ge-1);--ge;)ve[ge-1]=arguments[ge];return E[G].subscribe.apply(null,ve),g}if(typeof G=="string")return E[G]}var E={};x.addEventType=M;for(var N=1,I=arguments.length;N<I;++N)M(arguments[N]);return x;function M(G,ie,ge){if(typeof G!="object"){var ve;ie=ie||fe;var xe={subscribers:[],fire:ge=ge||He,subscribe:function(se){xe.subscribers.indexOf(se)===-1&&(xe.subscribers.push(se),xe.fire=ie(xe.fire,se))},unsubscribe:function(se){xe.subscribers=xe.subscribers.filter(function(ke){return ke!==se}),xe.fire=xe.subscribers.reduce(ie,ge)}};return E[G]=x[G]=xe}s(ve=G).forEach(function(se){var ke=ve[se];if(a(ke))M(se,ve[se][0],ve[se][1]);else{if(ke!=="asap")throw new re.InvalidArgument("Invalid event config");var me=M(se,ne,function(){for(var be=arguments.length,Ee=new Array(be);be--;)Ee[be]=arguments[be];me.subscribers.forEach(function(we){k(function(){we.apply(null,Ee)})})})}})}}function pe(g,x){return y(x).from({prototype:g}),x}function Le(g,x){return!(g.filter||g.algorithm||g.or)&&(x?g.justLimit:!g.replayFilter)}function Ge(g,x){g.filter=Pi(g.filter,x)}function Je(g,x,E){var N=g.replayFilter;g.replayFilter=N?function(){return Pi(N(),x())}:x,g.justLimit=E&&!N}function Xe(g,x){if(g.isPrimKey)return x.primaryKey;var E=x.getIndexByKeyPath(g.index);if(!E)throw new re.Schema("KeyPath "+g.index+" on object store "+x.name+" is not indexed");return E}function st(g,x,E){var N=Xe(g,x.schema);return x.openCursor({trans:E,values:!g.keysOnly,reverse:g.dir==="prev",unique:!!g.unique,query:{index:N,range:g.range}})}function _t(g,x,E,N){var I=g.replayFilter?Pi(g.filter,g.replayFilter()):g.filter;if(g.or){var M={},G=function(ie,ge,ve){var xe,se;I&&!I(ge,ve,function(ke){return ge.stop(ke)},function(ke){return ge.fail(ke)})||((se=""+(xe=ge.primaryKey))=="[object ArrayBuffer]"&&(se=""+new Uint8Array(xe)),f(M,se)||(M[se]=!0,x(ie,ge,ve)))};return Promise.all([g.or._iterate(G,E),Bt(st(g,N,E),g.algorithm,G,!g.keysOnly&&g.valueMapper)])}return Bt(st(g,N,E),Pi(g.algorithm,I),x,!g.keysOnly&&g.valueMapper)}function Bt(g,x,E,N){var I=Pt(N?function(M,G,ie){return E(N(M),G,ie)}:E);return g.then(function(M){if(M)return M.start(function(){var G=function(){return M.continue()};x&&!x(M,function(ie){return G=ie},function(ie){M.stop(ie),G=He},function(ie){M.fail(ie),G=He})||I(M.value,M,function(ie){return G=ie}),G()})})}var Xt=(rn.prototype.execute=function(g){var x=this["@@propmod"];if(x.add!==void 0){var E=x.add;if(a(E))return i(i([],a(g)?g:[],!0),E).sort();if(typeof E=="number")return(Number(g)||0)+E;if(typeof E=="bigint")try{return BigInt(g)+E}catch(I){return BigInt(0)+E}throw new TypeError("Invalid term ".concat(E))}if(x.remove!==void 0){var N=x.remove;if(a(N))return a(g)?g.filter(function(I){return!N.includes(I)}).sort():[];if(typeof N=="number")return Number(g)-N;if(typeof N=="bigint")try{return BigInt(g)-N}catch(I){return BigInt(0)-N}throw new TypeError("Invalid subtrahend ".concat(N))}return E=(E=x.replacePrefix)===null||E===void 0?void 0:E[0],E&&typeof g=="string"&&g.startsWith(E)?x.replacePrefix[1]+g.substring(E.length):g},rn);function rn(g){this["@@propmod"]=g}var Pn=(jt.prototype._read=function(g,x){var E=this._ctx;return E.error?E.table._trans(null,fn.bind(null,E.error)):E.table._trans("readonly",g).then(x)},jt.prototype._write=function(g){var x=this._ctx;return x.error?x.table._trans(null,fn.bind(null,x.error)):x.table._trans("readwrite",g,"locked")},jt.prototype._addAlgorithm=function(g){var x=this._ctx;x.algorithm=Pi(x.algorithm,g)},jt.prototype._iterate=function(g,x){return _t(this._ctx,g,x,this._ctx.table.core)},jt.prototype.clone=function(g){var x=Object.create(this.constructor.prototype),E=Object.create(this._ctx);return g&&l(E,g),x._ctx=E,x},jt.prototype.raw=function(){return this._ctx.valueMapper=null,this},jt.prototype.each=function(g){var x=this._ctx;return this._read(function(E){return _t(x,g,E,x.table.core)})},jt.prototype.count=function(g){var x=this;return this._read(function(E){var N=x._ctx,I=N.table.core;if(Le(N,!0))return I.count({trans:E,query:{index:Xe(N,I.schema),range:N.range}}).then(function(G){return Math.min(G,N.limit)});var M=0;return _t(N,function(){return++M,!1},E,I).then(function(){return M})}).then(g)},jt.prototype.sortBy=function(g,x){var E=g.split(".").reverse(),N=E[0],I=E.length-1;function M(ge,ve){return ve?M(ge[E[ve]],ve-1):ge[N]}var G=this._ctx.dir==="next"?1:-1;function ie(ge,ve){return Ht(M(ge,I),M(ve,I))*G}return this.toArray(function(ge){return ge.sort(ie)}).then(x)},jt.prototype.toArray=function(g){var x=this;return this._read(function(E){var N=x._ctx;if(N.dir==="next"&&Le(N,!0)&&0<N.limit){var I=N.valueMapper,M=Xe(N,N.table.core.schema);return N.table.core.query({trans:E,limit:N.limit,values:!0,query:{index:M,range:N.range}}).then(function(ie){return ie=ie.result,I?ie.map(I):ie})}var G=[];return _t(N,function(ie){return G.push(ie)},E,N.table.core).then(function(){return G})},g)},jt.prototype.offset=function(g){var x=this._ctx;return g<=0||(x.offset+=g,Le(x)?Je(x,function(){var E=g;return function(N,I){return E===0||(E===1?--E:I(function(){N.advance(E),E=0}),!1)}}):Je(x,function(){var E=g;return function(){return--E<0}})),this},jt.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),Je(this._ctx,function(){var x=g;return function(E,N,I){return--x<=0&&N(I),0<=x}},!0),this},jt.prototype.until=function(g,x){return Ge(this._ctx,function(E,N,I){return!g(E.value)||(N(I),x)}),this},jt.prototype.first=function(g){return this.limit(1).toArray(function(x){return x[0]}).then(g)},jt.prototype.last=function(g){return this.reverse().first(g)},jt.prototype.filter=function(g){var x;return Ge(this._ctx,function(E){return g(E.value)}),(x=this._ctx).isMatch=Pi(x.isMatch,g),this},jt.prototype.and=function(g){return this.filter(g)},jt.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},jt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},jt.prototype.desc=function(){return this.reverse()},jt.prototype.eachKey=function(g){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(E,N){g(N.key,N)})},jt.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},jt.prototype.eachPrimaryKey=function(g){var x=this._ctx;return x.keysOnly=!x.isMatch,this.each(function(E,N){g(N.primaryKey,N)})},jt.prototype.keys=function(g){var x=this._ctx;x.keysOnly=!x.isMatch;var E=[];return this.each(function(N,I){E.push(I.key)}).then(function(){return E}).then(g)},jt.prototype.primaryKeys=function(g){var x=this._ctx;if(x.dir==="next"&&Le(x,!0)&&0<x.limit)return this._read(function(N){var I=Xe(x,x.table.core.schema);return x.table.core.query({trans:N,values:!1,limit:x.limit,query:{index:I,range:x.range}})}).then(function(N){return N.result}).then(g);x.keysOnly=!x.isMatch;var E=[];return this.each(function(N,I){E.push(I.primaryKey)}).then(function(){return E}).then(g)},jt.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},jt.prototype.firstKey=function(g){return this.limit(1).keys(function(x){return x[0]}).then(g)},jt.prototype.lastKey=function(g){return this.reverse().firstKey(g)},jt.prototype.distinct=function(){var g=this._ctx,g=g.index&&g.table.schema.idxByName[g.index];if(!g||!g.multi)return this;var x={};return Ge(this._ctx,function(I){var N=I.primaryKey.toString(),I=f(x,N);return x[N]=!0,!I}),this},jt.prototype.modify=function(g){var x=this,E=this._ctx;return this._write(function(N){var I,M,G;G=typeof g=="function"?g:(I=s(g),M=I.length,function(we){for(var Ae=!1,Te=0;Te<M;++Te){var Ie=I[Te],ze=g[Ie],tt=A(we,Ie);ze instanceof Xt?(T(we,Ie,ze.execute(tt)),Ae=!0):tt!==ze&&(T(we,Ie,ze),Ae=!0)}return Ae});var ie=E.table.core,se=ie.schema.primaryKey,ge=se.outbound,ve=se.extractKey,xe=200,se=x.db._options.modifyChunkSize;se&&(xe=typeof se=="object"?se[ie.name]||se["*"]||200:se);function ke(we,Ie){var Te=Ie.failures,Ie=Ie.numFailures;be+=we-Ie;for(var ze=0,tt=s(Te);ze<tt.length;ze++){var ut=tt[ze];me.push(Te[ut])}}var me=[],be=0,Ee=[];return x.clone().primaryKeys().then(function(we){function Ae(Ie){var ze=Math.min(xe,we.length-Ie);return ie.getMany({trans:N,keys:we.slice(Ie,Ie+ze),cache:"immutable"}).then(function(tt){for(var ut=[],nt=[],at=ge?[]:null,ft=[],lt=0;lt<ze;++lt){var wt=tt[lt],Mt={value:U(wt),primKey:we[Ie+lt]};G.call(Mt,Mt.value,Mt)!==!1&&(Mt.value==null?ft.push(we[Ie+lt]):ge||Ht(ve(wt),ve(Mt.value))===0?(nt.push(Mt.value),ge&&at.push(we[Ie+lt])):(ft.push(we[Ie+lt]),ut.push(Mt.value)))}return Promise.resolve(0<ut.length&&ie.mutate({trans:N,type:"add",values:ut}).then(function(Ut){for(var Wt in Ut.failures)ft.splice(parseInt(Wt),1);ke(ut.length,Ut)})).then(function(){return(0<nt.length||Te&&typeof g=="object")&&ie.mutate({trans:N,type:"put",keys:at,values:nt,criteria:Te,changeSpec:typeof g!="function"&&g,isAdditionalChunk:0<Ie}).then(function(Ut){return ke(nt.length,Ut)})}).then(function(){return(0<ft.length||Te&&g===xr)&&ie.mutate({trans:N,type:"delete",keys:ft,criteria:Te,isAdditionalChunk:0<Ie}).then(function(Ut){return ke(ft.length,Ut)})}).then(function(){return we.length>Ie+ze&&Ae(Ie+xe)})})}var Te=Le(E)&&E.limit===1/0&&(typeof g!="function"||g===xr)&&{index:E.index,range:E.range};return Ae(0).then(function(){if(0<me.length)throw new Pe("Error modifying one or more objects",me,be,Ee);return we.length})})})},jt.prototype.delete=function(){var g=this._ctx,x=g.range;return Le(g)&&(g.isPrimKey||x.type===3)?this._write(function(E){var N=g.table.core.schema.primaryKey,I=x;return g.table.core.count({trans:E,query:{index:N,range:I}}).then(function(M){return g.table.core.mutate({trans:E,type:"deleteRange",range:I}).then(function(G){var ie=G.failures;if(G.lastResult,G.results,G=G.numFailures,G)throw new Pe("Could not delete some values",Object.keys(ie).map(function(ge){return ie[ge]}),M-G);return M-G})})}):this.modify(xr)},jt);function jt(){}var xr=function(g,x){return x.value=null};function Ba(g,x){return g<x?-1:g===x?0:1}function mc(g,x){return x<g?-1:g===x?0:1}function Wr(g,x,E){return g=g instanceof vc?new g.Collection(g):g,g._ctx.error=new(E||TypeError)(x),g}function Ao(g){return new g.Collection(g,function(){return eh("")}).limit(0)}function yc(g,x,E,N){var I,M,G,ie,ge,ve,xe,se=E.length;if(!E.every(function(be){return typeof be=="string"}))return Wr(g,La);function ke(be){I=be==="next"?function(we){return we.toUpperCase()}:function(we){return we.toLowerCase()},M=be==="next"?function(we){return we.toLowerCase()}:function(we){return we.toUpperCase()},G=be==="next"?Ba:mc;var Ee=E.map(function(we){return{lower:M(we),upper:I(we)}}).sort(function(we,Ae){return G(we.lower,Ae.lower)});ie=Ee.map(function(we){return we.upper}),ge=Ee.map(function(we){return we.lower}),xe=(ve=be)==="next"?"":N}ke("next"),g=new g.Collection(g,function(){return No(ie[0],ge[se-1]+N)}),g._ondirectionchange=function(be){ke(be)};var me=0;return g._addAlgorithm(function(be,Ee,we){var Ae=be.key;if(typeof Ae!="string")return!1;var Te=M(Ae);if(x(Te,ge,me))return!0;for(var Ie=null,ze=me;ze<se;++ze){var tt=function(ut,nt,at,ft,lt,wt){for(var Mt=Math.min(ut.length,ft.length),Ut=-1,Wt=0;Wt<Mt;++Wt){var gi=nt[Wt];if(gi!==ft[Wt])return lt(ut[Wt],at[Wt])<0?ut.substr(0,Wt)+at[Wt]+at.substr(Wt+1):lt(ut[Wt],ft[Wt])<0?ut.substr(0,Wt)+ft[Wt]+at.substr(Wt+1):0<=Ut?ut.substr(0,Ut)+nt[Ut]+at.substr(Ut+1):null;lt(ut[Wt],gi)<0&&(Ut=Wt)}return Mt<ft.length&&wt==="next"?ut+at.substr(ut.length):Mt<ut.length&&wt==="prev"?ut.substr(0,at.length):Ut<0?null:ut.substr(0,Ut)+ft[Ut]+at.substr(Ut+1)}(Ae,Te,ie[ze],ge[ze],G,ve);tt===null&&Ie===null?me=ze+1:(Ie===null||0<G(Ie,tt))&&(Ie=tt)}return Ee(Ie!==null?function(){be.continue(Ie+xe)}:we),!1}),g}function No(g,x,E,N){return{type:2,lower:g,upper:x,lowerOpen:E,upperOpen:N}}function eh(g){return{type:1,lower:g,upper:g}}var vc=(Object.defineProperty(rr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),rr.prototype.between=function(g,x,E,N){E=E!==!1,N=N===!0;try{return 0<this._cmp(g,x)||this._cmp(g,x)===0&&(E||N)&&(!E||!N)?Ao(this):new this.Collection(this,function(){return No(g,x,!E,!N)})}catch(I){return Wr(this,dr)}},rr.prototype.equals=function(g){return g==null?Wr(this,dr):new this.Collection(this,function(){return eh(g)})},rr.prototype.above=function(g){return g==null?Wr(this,dr):new this.Collection(this,function(){return No(g,void 0,!0)})},rr.prototype.aboveOrEqual=function(g){return g==null?Wr(this,dr):new this.Collection(this,function(){return No(g,void 0,!1)})},rr.prototype.below=function(g){return g==null?Wr(this,dr):new this.Collection(this,function(){return No(void 0,g,!1,!0)})},rr.prototype.belowOrEqual=function(g){return g==null?Wr(this,dr):new this.Collection(this,function(){return No(void 0,g)})},rr.prototype.startsWith=function(g){return typeof g!="string"?Wr(this,La):this.between(g,g+Ii,!0,!0)},rr.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):yc(this,function(x,E){return x.indexOf(E[0])===0},[g],Ii)},rr.prototype.equalsIgnoreCase=function(g){return yc(this,function(x,E){return x===E[0]},[g],"")},rr.prototype.anyOfIgnoreCase=function(){var g=$.apply(V,arguments);return g.length===0?Ao(this):yc(this,function(x,E){return E.indexOf(x)!==-1},g,"")},rr.prototype.startsWithAnyOfIgnoreCase=function(){var g=$.apply(V,arguments);return g.length===0?Ao(this):yc(this,function(x,E){return E.some(function(N){return x.indexOf(N)===0})},g,Ii)},rr.prototype.anyOf=function(){var g=this,x=$.apply(V,arguments),E=this._cmp;try{x.sort(E)}catch(M){return Wr(this,dr)}if(x.length===0)return Ao(this);var N=new this.Collection(this,function(){return No(x[0],x[x.length-1])});N._ondirectionchange=function(M){E=M==="next"?g._ascending:g._descending,x.sort(E)};var I=0;return N._addAlgorithm(function(M,G,ie){for(var ge=M.key;0<E(ge,x[I]);)if(++I===x.length)return G(ie),!1;return E(ge,x[I])===0||(G(function(){M.continue(x[I])}),!1)}),N},rr.prototype.notEqual=function(g){return this.inAnyRange([[-1/0,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},rr.prototype.noneOf=function(){var g=$.apply(V,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch(E){return Wr(this,dr)}var x=g.reduce(function(E,N){return E?E.concat([[E[E.length-1][1],N]]):[[-1/0,N]]},null);return x.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(x,{includeLowers:!1,includeUppers:!1})},rr.prototype.inAnyRange=function(Ae,x){var E=this,N=this._cmp,I=this._ascending,M=this._descending,G=this._min,ie=this._max;if(Ae.length===0)return Ao(this);if(!Ae.every(function(Te){return Te[0]!==void 0&&Te[1]!==void 0&&I(Te[0],Te[1])<=0}))return Wr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var ge=!x||x.includeLowers!==!1,ve=x&&x.includeUppers===!0,xe,se=I;function ke(Te,Ie){return se(Te[0],Ie[0])}try{(xe=Ae.reduce(function(Te,Ie){for(var ze=0,tt=Te.length;ze<tt;++ze){var ut=Te[ze];if(N(Ie[0],ut[1])<0&&0<N(Ie[1],ut[0])){ut[0]=G(ut[0],Ie[0]),ut[1]=ie(ut[1],Ie[1]);break}}return ze===tt&&Te.push(Ie),Te},[])).sort(ke)}catch(Te){return Wr(this,dr)}var me=0,be=ve?function(Te){return 0<I(Te,xe[me][1])}:function(Te){return 0<=I(Te,xe[me][1])},Ee=ge?function(Te){return 0<M(Te,xe[me][0])}:function(Te){return 0<=M(Te,xe[me][0])},we=be,Ae=new this.Collection(this,function(){return No(xe[0][0],xe[xe.length-1][1],!ge,!ve)});return Ae._ondirectionchange=function(Te){se=Te==="next"?(we=be,I):(we=Ee,M),xe.sort(ke)},Ae._addAlgorithm(function(Te,Ie,ze){for(var tt,ut=Te.key;we(ut);)if(++me===xe.length)return Ie(ze),!1;return!be(tt=ut)&&!Ee(tt)||(E._cmp(ut,xe[me][1])===0||E._cmp(ut,xe[me][0])===0||Ie(function(){se===I?Te.continue(xe[me][0]):Te.continue(xe[me][1])}),!1)}),Ae},rr.prototype.startsWithAnyOf=function(){var g=$.apply(V,arguments);return g.every(function(x){return typeof x=="string"})?g.length===0?Ao(this):this.inAnyRange(g.map(function(x){return[x,x+Ii]})):Wr(this,"startsWithAnyOf() only works with strings")},rr);function rr(){}function Ro(g){return Pt(function(x){return wc(x),g(x.target.error),!1})}function wc(g){g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()}var bc="storagemutated",xy="x-storagemutated-1",Hs=_e(null,bc),T5=(To.prototype._lock=function(){return S(!it.global),++this._reculock,this._reculock!==1||it.global||(it.lockOwnerFor=this),this},To.prototype._unlock=function(){if(S(!it.global),--this._reculock==0)for(it.global||(it.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var g=this._blockedFuncs.shift();try{Qi(g[1],g[0])}catch(x){}}return this},To.prototype._locked=function(){return this._reculock&&it.lockOwnerFor!==this},To.prototype.create=function(g){var x=this;if(!this.mode)return this;var E=this.db.idbdb,N=this.db._state.dbOpenError;if(S(!this.idbtrans),!g&&!E)switch(N&&N.name){case"DatabaseClosedError":throw new re.DatabaseClosed(N);case"MissingAPIError":throw new re.MissingAPI(N.message,N);default:throw new re.OpenFailed(N)}if(!this.active)throw new re.TransactionInactive;return S(this._completion._state===null),(g=this.idbtrans=g||(this.db.core||E).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(I){wc(I),x._reject(g.error)}),g.onabort=Pt(function(I){wc(I),x.active&&x._reject(new re.Abort(g.error)),x.active=!1,x.on("abort").fire(I)}),g.oncomplete=Pt(function(){x.active=!1,x._resolve(),"mutatedParts"in g&&Hs.storagemutated.fire(g.mutatedParts)}),this},To.prototype._promise=function(g,x,E){var N=this;if(g==="readwrite"&&this.mode!=="readwrite")return fn(new re.ReadOnly("Transaction is readonly"));if(!this.active)return fn(new re.TransactionInactive);if(this._locked())return new ot(function(M,G){N._blockedFuncs.push([function(){N._promise(g,x,E).then(M,G)},it])});if(E)return zr(function(){var M=new ot(function(G,ie){N._lock();var ge=x(G,ie,N);ge&&ge.then&&ge.then(G,ie)});return M.finally(function(){return N._unlock()}),M._lib=!0,M});var I=new ot(function(M,G){var ie=x(M,G,N);ie&&ie.then&&ie.then(M,G)});return I._lib=!0,I},To.prototype._root=function(){return this.parent?this.parent._root():this},To.prototype.waitFor=function(g){var x,E=this._root(),N=ot.resolve(g);E._waitingFor?E._waitingFor=E._waitingFor.then(function(){return N}):(E._waitingFor=N,E._waitingQueue=[],x=E.idbtrans.objectStore(E.storeNames[0]),function M(){for(++E._spinCount;E._waitingQueue.length;)E._waitingQueue.shift()();E._waitingFor&&(x.get(-1/0).onsuccess=M)}());var I=E._waitingFor;return new ot(function(M,G){N.then(function(ie){return E._waitingQueue.push(Pt(M.bind(null,ie)))},function(ie){return E._waitingQueue.push(Pt(G.bind(null,ie)))}).finally(function(){E._waitingFor===I&&(E._waitingFor=null)})})},To.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},To.prototype.table=function(g){var x=this._memoizedTables||(this._memoizedTables={});if(f(x,g))return x[g];var E=this.schema[g];if(!E)throw new re.NotFound("Table "+g+" not part of transaction");return E=new this.db.Table(g,E,this),E.core=this.db.core.table(g),x[g]=E},To);function To(){}function Sy(g,x,E,N,I,M,G){return{name:g,keyPath:x,unique:E,multi:N,auto:I,compound:M,src:(E&&!G?"&":"")+(N?"*":"")+(I?"++":"")+x1(x)}}function x1(g){return typeof g=="string"?g:g?"["+[].join.call(g,"+")+"]":""}function Ey(g,x,E){return{name:g,primKey:x,indexes:E,mappedClass:null,idxByName:(N=function(I){return[I.name,I]},E.reduce(function(I,M,G){return G=N(M,G),G&&(I[G[0]]=G[1]),I},{}))};var N}var _c=function(g){try{return g.only([[]]),_c=function(){return[[]]},[[]]}catch(x){return _c=function(){return Ii},Ii}};function ky(g){return g==null?function(){}:typeof g=="string"?(x=g).split(".").length===1?function(E){return E[x]}:function(E){return A(E,x)}:function(E){return A(E,g)};var x}function S1(g){return[].slice.call(g)}var I5=0;function xc(g){return g==null?":id":typeof g=="string"?g:"[".concat(g.join("+"),"]")}function P5(g,x,ge){function N(we){if(we.type===3)return null;if(we.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var me=we.lower,be=we.upper,Ee=we.lowerOpen,we=we.upperOpen;return me===void 0?be===void 0?null:x.upperBound(be,!!we):be===void 0?x.lowerBound(me,!!Ee):x.bound(me,be,!!Ee,!!we)}function I(ke){var me,be=ke.name;return{name:be,schema:ke,mutate:function(Ee){var we=Ee.trans,Ae=Ee.type,Te=Ee.keys,Ie=Ee.values,ze=Ee.range;return new Promise(function(tt,ut){tt=Pt(tt);var nt=we.objectStore(be),at=nt.keyPath==null,ft=Ae==="put"||Ae==="add";if(!ft&&Ae!=="delete"&&Ae!=="deleteRange")throw new Error("Invalid operation type: "+Ae);var lt,wt=(Te||Ie||{length:1}).length;if(Te&&Ie&&Te.length!==Ie.length)throw new Error("Given keys array must have same length as given values array.");if(wt===0)return tt({numFailures:0,failures:{},results:[],lastResult:void 0});function Mt(Vr){++gi,wc(Vr)}var Ut=[],Wt=[],gi=0;if(Ae==="deleteRange"){if(ze.type===4)return tt({numFailures:gi,failures:Wt,results:[],lastResult:void 0});ze.type===3?Ut.push(lt=nt.clear()):Ut.push(lt=nt.delete(N(ze)))}else{var at=ft?at?[Ie,Te]:[Ie,null]:[Te,null],$t=at[0],Er=at[1];if(ft)for(var kr=0;kr<wt;++kr)Ut.push(lt=Er&&Er[kr]!==void 0?nt[Ae]($t[kr],Er[kr]):nt[Ae]($t[kr])),lt.onerror=Mt;else for(kr=0;kr<wt;++kr)Ut.push(lt=nt[Ae]($t[kr])),lt.onerror=Mt}function hh(Vr){Vr=Vr.target.result,Ut.forEach(function(Ha,Uy){return Ha.error!=null&&(Wt[Uy]=Ha.error)}),tt({numFailures:gi,failures:Wt,results:Ae==="delete"?Te:Ut.map(function(Ha){return Ha.result}),lastResult:Vr})}lt.onerror=function(Vr){Mt(Vr),hh(Vr)},lt.onsuccess=hh})},getMany:function(Ee){var we=Ee.trans,Ae=Ee.keys;return new Promise(function(Te,Ie){Te=Pt(Te);for(var ze,tt=we.objectStore(be),ut=Ae.length,nt=new Array(ut),at=0,ft=0,lt=function(Ut){Ut=Ut.target,nt[Ut._pos]=Ut.result,++ft===at&&Te(nt)},wt=Ro(Ie),Mt=0;Mt<ut;++Mt)Ae[Mt]!=null&&((ze=tt.get(Ae[Mt]))._pos=Mt,ze.onsuccess=lt,ze.onerror=wt,++at);at===0&&Te(nt)})},get:function(Ee){var we=Ee.trans,Ae=Ee.key;return new Promise(function(Te,Ie){Te=Pt(Te);var ze=we.objectStore(be).get(Ae);ze.onsuccess=function(tt){return Te(tt.target.result)},ze.onerror=Ro(Ie)})},query:(me=ve,function(Ee){return new Promise(function(we,Ae){we=Pt(we);var Te,Ie,ze,at=Ee.trans,tt=Ee.values,ut=Ee.limit,lt=Ee.query,nt=ut===1/0?void 0:ut,ft=lt.index,lt=lt.range,at=at.objectStore(be),ft=ft.isPrimaryKey?at:at.index(ft.name),lt=N(lt);if(ut===0)return we({result:[]});me?((nt=tt?ft.getAll(lt,nt):ft.getAllKeys(lt,nt)).onsuccess=function(wt){return we({result:wt.target.result})},nt.onerror=Ro(Ae)):(Te=0,Ie=!tt&&"openKeyCursor"in ft?ft.openKeyCursor(lt):ft.openCursor(lt),ze=[],Ie.onsuccess=function(wt){var Mt=Ie.result;return Mt?(ze.push(tt?Mt.value:Mt.primaryKey),++Te===ut?we({result:ze}):void Mt.continue()):we({result:ze})},Ie.onerror=Ro(Ae))})}),openCursor:function(Ee){var we=Ee.trans,Ae=Ee.values,Te=Ee.query,Ie=Ee.reverse,ze=Ee.unique;return new Promise(function(tt,ut){tt=Pt(tt);var ft=Te.index,nt=Te.range,at=we.objectStore(be),at=ft.isPrimaryKey?at:at.index(ft.name),ft=Ie?ze?"prevunique":"prev":ze?"nextunique":"next",lt=!Ae&&"openKeyCursor"in at?at.openKeyCursor(N(nt),ft):at.openCursor(N(nt),ft);lt.onerror=Ro(ut),lt.onsuccess=Pt(function(wt){var Mt,Ut,Wt,gi,$t=lt.result;$t?($t.___id=++I5,$t.done=!1,Mt=$t.continue.bind($t),Ut=(Ut=$t.continuePrimaryKey)&&Ut.bind($t),Wt=$t.advance.bind($t),gi=function(){throw new Error("Cursor not stopped")},$t.trans=we,$t.stop=$t.continue=$t.continuePrimaryKey=$t.advance=function(){throw new Error("Cursor not started")},$t.fail=Pt(ut),$t.next=function(){var Er=this,kr=1;return this.start(function(){return kr--?Er.continue():Er.stop()}).then(function(){return Er})},$t.start=function(Er){function kr(){if(lt.result)try{Er()}catch(Vr){$t.fail(Vr)}else $t.done=!0,$t.start=function(){throw new Error("Cursor behind last entry")},$t.stop()}var hh=new Promise(function(Vr,Ha){Vr=Pt(Vr),lt.onerror=Ro(Ha),$t.fail=Ha,$t.stop=function(Uy){$t.stop=$t.continue=$t.continuePrimaryKey=$t.advance=gi,Vr(Uy)}});return lt.onsuccess=Pt(function(Vr){lt.onsuccess=kr,kr()}),$t.continue=Mt,$t.continuePrimaryKey=Ut,$t.advance=Wt,kr(),hh},tt($t)):tt(null)},ut)})},count:function(Ee){var we=Ee.query,Ae=Ee.trans,Te=we.index,Ie=we.range;return new Promise(function(ze,tt){var ut=Ae.objectStore(be),nt=Te.isPrimaryKey?ut:ut.index(Te.name),ut=N(Ie),nt=ut?nt.count(ut):nt.count();nt.onsuccess=Pt(function(at){return ze(at.target.result)}),nt.onerror=Ro(tt)})}}}var M,G,ie,xe=(G=ge,ie=S1((M=g).objectStoreNames),{schema:{name:M.name,tables:ie.map(function(ke){return G.objectStore(ke)}).map(function(ke){var me=ke.keyPath,we=ke.autoIncrement,be=a(me),Ee={},we={name:ke.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:me==null,compound:be,keyPath:me,autoIncrement:we,unique:!0,extractKey:ky(me)},indexes:S1(ke.indexNames).map(function(Ae){return ke.index(Ae)}).map(function(ze){var Te=ze.name,Ie=ze.unique,tt=ze.multiEntry,ze=ze.keyPath,tt={name:Te,compound:a(ze),keyPath:ze,unique:Ie,multiEntry:tt,extractKey:ky(ze)};return Ee[xc(ze)]=tt}),getIndexByKeyPath:function(Ae){return Ee[xc(Ae)]}};return Ee[":id"]=we.primaryKey,me!=null&&(Ee[xc(me)]=we.primaryKey),we})},hasGetAll:0<ie.length&&"getAll"in G.objectStore(ie[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ge=xe.schema,ve=xe.hasGetAll,xe=ge.tables.map(I),se={};return xe.forEach(function(ke){return se[ke.name]=ke}),{stack:"dbcore",transaction:g.transaction.bind(g),table:function(ke){if(!se[ke])throw new Error("Table '".concat(ke,"' not found"));return se[ke]},MIN_KEY:-1/0,MAX_KEY:_c(x),schema:ge}}function O5(g,x,E,N){var I=E.IDBKeyRange;return E.indexedDB,{dbcore:(N=P5(x,I,N),g.dbcore.reduce(function(M,G){return G=G.create,r(r({},M),G(M))},N))}}function th(g,N){var E=N.db,N=O5(g._middlewares,E,g._deps,N);g.core=N.dbcore,g.tables.forEach(function(I){var M=I.name;g.core.schema.tables.some(function(G){return G.name===M})&&(I.core=g.core.table(M),g[M]instanceof g.Table&&(g[M].core=I.core))})}function nh(g,x,E,N){E.forEach(function(I){var M=N[I];x.forEach(function(G){var ie=function ge(ve,xe){return _(ve,xe)||(ve=u(ve))&&ge(ve,xe)}(G,I);(!ie||"value"in ie&&ie.value===void 0)&&(G===g.Transaction.prototype||G instanceof g.Transaction?b(G,I,{get:function(){return this.table(I)},set:function(ge){p(this,I,{value:ge,writable:!0,configurable:!0,enumerable:!0})}}):G[I]=new g.Table(I,M))})})}function Cy(g,x){x.forEach(function(E){for(var N in E)E[N]instanceof g.Table&&delete E[N]})}function $5(g,x){return g._cfg.version-x._cfg.version}function M5(g,x,E,N){var I=g._dbSchema;E.objectStoreNames.contains("$meta")&&!I.$meta&&(I.$meta=Ey("$meta",k1("")[0],[]),g._storeNames.push("$meta"));var M=g._createTransaction("readwrite",g._storeNames,I);M.create(E),M._completion.catch(N);var G=M._reject.bind(M),ie=it.transless||it;zr(function(){return it.trans=M,it.transless=ie,x!==0?(th(g,E),ve=x,((ge=M).storeNames.includes("$meta")?ge.table("$meta").get("version").then(function(xe){return xe!=null?xe:ve}):ot.resolve(ve)).then(function(xe){return ke=xe,me=M,be=E,Ee=[],xe=(se=g)._versions,we=se._dbSchema=ih(0,se.idbdb,be),(xe=xe.filter(function(Ae){return Ae._cfg.version>=ke})).length!==0?(xe.forEach(function(Ae){Ee.push(function(){var Te=we,Ie=Ae._cfg.dbschema;oh(se,Te,be),oh(se,Ie,be),we=se._dbSchema=Ie;var ze=jy(Te,Ie);ze.add.forEach(function(ft){Ay(be,ft[0],ft[1].primKey,ft[1].indexes)}),ze.change.forEach(function(ft){if(ft.recreate)throw new re.Upgrade("Not yet support for changing primary key");var lt=be.objectStore(ft.name);ft.add.forEach(function(wt){return rh(lt,wt)}),ft.change.forEach(function(wt){lt.deleteIndex(wt.name),rh(lt,wt)}),ft.del.forEach(function(wt){return lt.deleteIndex(wt)})});var tt=Ae._cfg.contentUpgrade;if(tt&&Ae._cfg.version>ke){th(se,be),me._memoizedTables={};var ut=P(Ie);ze.del.forEach(function(ft){ut[ft]=Te[ft]}),Cy(se,[se.Transaction.prototype]),nh(se,[se.Transaction.prototype],s(ut),ut),me.schema=ut;var nt,at=X(tt);return at&&Hr(),ze=ot.follow(function(){var ft;(nt=tt(me))&&at&&(ft=cr.bind(null,null),nt.then(ft,ft))}),nt&&typeof nt.then=="function"?ot.resolve(nt):ze.then(function(){return nt})}}),Ee.push(function(Te){var Ie,ze,tt=Ae._cfg.dbschema;Ie=tt,ze=Te,[].slice.call(ze.db.objectStoreNames).forEach(function(ut){return Ie[ut]==null&&ze.db.deleteObjectStore(ut)}),Cy(se,[se.Transaction.prototype]),nh(se,[se.Transaction.prototype],se._storeNames,se._dbSchema),me.schema=se._dbSchema}),Ee.push(function(Te){se.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(se.idbdb.version/10)===Ae._cfg.version?(se.idbdb.deleteObjectStore("$meta"),delete se._dbSchema.$meta,se._storeNames=se._storeNames.filter(function(Ie){return Ie!=="$meta"})):Te.objectStore("$meta").put(Ae._cfg.version,"version"))})}),function Ae(){return Ee.length?ot.resolve(Ee.shift()(me.idbtrans)).then(Ae):ot.resolve()}().then(function(){E1(we,be)})):ot.resolve();var se,ke,me,be,Ee,we}).catch(G)):(s(I).forEach(function(xe){Ay(E,xe,I[xe].primKey,I[xe].indexes)}),th(g,E),void ot.follow(function(){return g.on.populate.fire(M)}).catch(G));var ge,ve})}function D5(g,x){E1(g._dbSchema,x),x.db.version%10!=0||x.objectStoreNames.contains("$meta")||x.db.createObjectStore("$meta").add(Math.ceil(x.db.version/10-1),"version");var E=ih(0,g.idbdb,x);oh(g,g._dbSchema,x);for(var N=0,I=jy(E,g._dbSchema).change;N<I.length;N++){var M=function(G){if(G.change.length||G.recreate)return console.warn("Unable to patch indexes of table ".concat(G.name," because it has changes on the type of index or primary key.")),{value:void 0};var ie=x.objectStore(G.name);G.add.forEach(function(ge){qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(G.name,".").concat(ge.src)),rh(ie,ge)})}(I[N]);if(typeof M=="object")return M.value}}function jy(g,x){var E,N={del:[],add:[],change:[]};for(E in g)x[E]||N.del.push(E);for(E in x){var I=g[E],M=x[E];if(I){var G={name:E,def:M,recreate:!1,del:[],add:[],change:[]};if(""+(I.primKey.keyPath||"")!=""+(M.primKey.keyPath||"")||I.primKey.auto!==M.primKey.auto)G.recreate=!0,N.change.push(G);else{var ie=I.idxByName,ge=M.idxByName,ve=void 0;for(ve in ie)ge[ve]||G.del.push(ve);for(ve in ge){var xe=ie[ve],se=ge[ve];xe?xe.src!==se.src&&G.change.push(se):G.add.push(se)}(0<G.del.length||0<G.add.length||0<G.change.length)&&N.change.push(G)}}else N.add.push([E,M])}return N}function Ay(g,x,E,N){var I=g.db.createObjectStore(x,E.keyPath?{keyPath:E.keyPath,autoIncrement:E.auto}:{autoIncrement:E.auto});return N.forEach(function(M){return rh(I,M)}),I}function E1(g,x){s(g).forEach(function(E){x.db.objectStoreNames.contains(E)||(qe&&console.debug("Dexie: Creating missing table",E),Ay(x,E,g[E].primKey,g[E].indexes))})}function rh(g,x){g.createIndex(x.name,x.keyPath,{unique:x.unique,multiEntry:x.multi})}function ih(g,x,E){var N={};return v(x.objectStoreNames,0).forEach(function(I){for(var M=E.objectStore(I),G=Sy(x1(ve=M.keyPath),ve||"",!0,!1,!!M.autoIncrement,ve&&typeof ve!="string",!0),ie=[],ge=0;ge<M.indexNames.length;++ge){var xe=M.index(M.indexNames[ge]),ve=xe.keyPath,xe=Sy(xe.name,ve,!!xe.unique,!!xe.multiEntry,!1,ve&&typeof ve!="string",!1);ie.push(xe)}N[I]=Ey(I,G,ie)}),N}function oh(g,x,E){for(var N=E.db.objectStoreNames,I=0;I<N.length;++I){var M=N[I],G=E.objectStore(M);g._hasGetAll="getAll"in G;for(var ie=0;ie<G.indexNames.length;++ie){var ge=G.indexNames[ie],ve=G.index(ge).keyPath,xe=typeof ve=="string"?ve:"["+v(ve).join("+")+"]";!x[M]||(ve=x[M].idxByName[xe])&&(ve.name=ge,delete x[M].idxByName[xe],x[M].idxByName[ge]=ve)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(g._hasGetAll=!1)}function k1(g){return g.split(",").map(function(x,E){var N=(x=x.trim()).replace(/([&*]|\+\+)/g,""),I=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return Sy(N,I||null,/\&/.test(x),/\*/.test(x),/\+\+/.test(x),a(I),E===0)})}var L5=(sh.prototype._parseStoresSpec=function(g,x){s(g).forEach(function(E){if(g[E]!==null){var N=k1(g[E]),I=N.shift();if(I.unique=!0,I.multi)throw new re.Schema("Primary key cannot be multi-valued");N.forEach(function(M){if(M.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!M.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),x[E]=Ey(E,I,N)}})},sh.prototype.stores=function(E){var x=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,E):E;var E=x._versions,N={},I={};return E.forEach(function(M){l(N,M._cfg.storesSource),I=M._cfg.dbschema={},M._parseStoresSpec(N,I)}),x._dbSchema=I,Cy(x,[x._allTables,x,x.Transaction.prototype]),nh(x,[x._allTables,x,x.Transaction.prototype,this._cfg.tables],s(I),I),x._storeNames=s(I),this},sh.prototype.upgrade=function(g){return this._cfg.contentUpgrade=Fe(this._cfg.contentUpgrade||He,g),this},sh);function sh(){}function Ny(g,x){var E=g._dbNamesDB;return E||(E=g._dbNamesDB=new rs(zs,{addons:[],indexedDB:g,IDBKeyRange:x})).version(1).stores({dbnames:"name"}),E.table("dbnames")}function Ry(g){return g&&typeof g.databases=="function"}function Ty(g){return zr(function(){return it.letThrough=!0,g()})}function Iy(g){return!("from"in g)}var Sr=function(g,x){if(!this){var E=new Sr;return g&&"d"in g&&l(E,g),E}l(this,arguments.length?{d:1,from:g,to:1<arguments.length?x:g}:{d:0})};function Sc(g,x,E){var N=Ht(x,E);if(!isNaN(N)){if(0<N)throw RangeError();if(Iy(g))return l(g,{from:x,to:E,d:1});var I=g.l,N=g.r;if(Ht(E,g.from)<0)return I?Sc(I,x,E):g.l={from:x,to:E,d:1,l:null,r:null},j1(g);if(0<Ht(x,g.to))return N?Sc(N,x,E):g.r={from:x,to:E,d:1,l:null,r:null},j1(g);Ht(x,g.from)<0&&(g.from=x,g.l=null,g.d=N?N.d+1:1),0<Ht(E,g.to)&&(g.to=E,g.r=null,g.d=g.l?g.l.d+1:1),E=!g.r,I&&!g.l&&Ec(g,I),N&&E&&Ec(g,N)}}function Ec(g,x){Iy(x)||function E(N,ge){var M=ge.from,G=ge.to,ie=ge.l,ge=ge.r;Sc(N,M,G),ie&&E(N,ie),ge&&E(N,ge)}(g,x)}function C1(g,x){var E=ah(x),N=E.next();if(N.done)return!1;for(var I=N.value,M=ah(g),G=M.next(I.from),ie=G.value;!N.done&&!G.done;){if(Ht(ie.from,I.to)<=0&&0<=Ht(ie.to,I.from))return!0;Ht(I.from,ie.from)<0?I=(N=E.next(ie.from)).value:ie=(G=M.next(I.from)).value}return!1}function ah(g){var x=Iy(g)?null:{s:0,n:g};return{next:function(E){for(var N=0<arguments.length;x;)switch(x.s){case 0:if(x.s=1,N)for(;x.n.l&&Ht(E,x.n.from)<0;)x={up:x,n:x.n.l,s:1};else for(;x.n.l;)x={up:x,n:x.n.l,s:1};case 1:if(x.s=2,!N||Ht(E,x.n.to)<=0)return{value:x.n,done:!1};case 2:if(x.n.r){x.s=3,x={up:x,n:x.n.r,s:0};continue}case 3:x=x.up}return{done:!0}}}}function j1(g){var x,E,N=(((x=g.r)===null||x===void 0?void 0:x.d)||0)-(((E=g.l)===null||E===void 0?void 0:E.d)||0),I=1<N?"r":N<-1?"l":"";I&&(x=I=="r"?"l":"r",E=r({},g),N=g[I],g.from=N.from,g.to=N.to,g[I]=N[I],E[I]=N[x],(g[x]=E).d=A1(E)),g.d=A1(g)}function A1(E){var x=E.r,E=E.l;return(x?E?Math.max(x.d,E.d):x.d:E?E.d:0)+1}function lh(g,x){return s(x).forEach(function(E){g[E]?Ec(g[E],x[E]):g[E]=function N(I){var M,G,ie={};for(M in I)f(I,M)&&(G=I[M],ie[M]=!G||typeof G!="object"||H.has(G.constructor)?G:N(G));return ie}(x[E])}),g}function Py(g,x){return g.all||x.all||Object.keys(g).some(function(E){return x[E]&&C1(x[E],g[E])})}h(Sr.prototype,((Oi={add:function(g){return Ec(this,g),this},addKey:function(g){return Sc(this,g,g),this},addKeys:function(g){var x=this;return g.forEach(function(E){return Sc(x,E,E)}),this},hasKey:function(g){var x=ah(this).next(g).value;return x&&Ht(x.from,g)<=0&&0<=Ht(x.to,g)}})[Z]=function(){return ah(this)},Oi));var Fa={},Oy={},$y=!1;function uh(g){lh(Oy,g),$y||($y=!0,setTimeout(function(){$y=!1,My(Oy,!(Oy={}))},0))}function My(g,x){x===void 0&&(x=!1);var E=new Set;if(g.all)for(var N=0,I=Object.values(Fa);N<I.length;N++)N1(G=I[N],g,E,x);else for(var M in g){var G,ie=/^idb\:\/\/(.*)\/(.*)\//.exec(M);ie&&(M=ie[1],ie=ie[2],(G=Fa["idb://".concat(M,"/").concat(ie)])&&N1(G,g,E,x))}E.forEach(function(ge){return ge()})}function N1(g,x,E,N){for(var I=[],M=0,G=Object.entries(g.queries.query);M<G.length;M++){for(var ie=G[M],ge=ie[0],ve=[],xe=0,se=ie[1];xe<se.length;xe++){var ke=se[xe];Py(x,ke.obsSet)?ke.subscribers.forEach(function(we){return E.add(we)}):N&&ve.push(ke)}N&&I.push([ge,ve])}if(N)for(var me=0,be=I;me<be.length;me++){var Ee=be[me],ge=Ee[0],ve=Ee[1];g.queries.query[ge]=ve}}function B5(g){var x=g._state,E=g._deps.indexedDB;if(x.isBeingOpened||g.idbdb)return x.dbReadyPromise.then(function(){return x.dbOpenError?fn(x.dbOpenError):g});x.isBeingOpened=!0,x.dbOpenError=null,x.openComplete=!1;var N=x.openCanceller,I=Math.round(10*g.verno),M=!1;function G(){if(x.openCanceller!==N)throw new re.DatabaseClosed("db.open() was cancelled")}function ie(){return new ot(function(ke,me){if(G(),!E)throw new re.MissingAPI;var be=g.name,Ee=x.autoSchema||!I?E.open(be):E.open(be,I);if(!Ee)throw new re.MissingAPI;Ee.onerror=Ro(me),Ee.onblocked=Pt(g._fireOnBlocked),Ee.onupgradeneeded=Pt(function(we){var Ae;xe=Ee.transaction,x.autoSchema&&!g._options.allowEmptyDB?(Ee.onerror=wc,xe.abort(),Ee.result.close(),(Ae=E.deleteDatabase(be)).onsuccess=Ae.onerror=Pt(function(){me(new re.NoSuchDatabase("Database ".concat(be," doesnt exist")))})):(xe.onerror=Ro(me),we=we.oldVersion>Math.pow(2,62)?0:we.oldVersion,se=we<1,g.idbdb=Ee.result,M&&D5(g,xe),M5(g,we/10,xe,me))},me),Ee.onsuccess=Pt(function(){xe=null;var we,Ae,Te,Ie,ze,tt=g.idbdb=Ee.result,ut=v(tt.objectStoreNames);if(0<ut.length)try{var nt=tt.transaction((Ie=ut).length===1?Ie[0]:Ie,"readonly");if(x.autoSchema)Ae=tt,Te=nt,(we=g).verno=Ae.version/10,Te=we._dbSchema=ih(0,Ae,Te),we._storeNames=v(Ae.objectStoreNames,0),nh(we,[we._allTables],s(Te),Te);else if(oh(g,g._dbSchema,nt),((ze=jy(ih(0,(ze=g).idbdb,nt),ze._dbSchema)).add.length||ze.change.some(function(at){return at.add.length||at.change.length}))&&!M)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),tt.close(),I=tt.version+1,M=!0,ke(ie());th(g,nt)}catch(at){}Ur.push(g),tt.onversionchange=Pt(function(at){x.vcFired=!0,g.on("versionchange").fire(at)}),tt.onclose=Pt(function(at){g.on("close").fire(at)}),se&&(ze=g._deps,nt=be,tt=ze.indexedDB,ze=ze.IDBKeyRange,Ry(tt)||nt===zs||Ny(tt,ze).put({name:nt}).catch(He)),ke()},me)}).catch(function(ke){switch(ke==null?void 0:ke.name){case"UnknownError":if(0<x.PR1398_maxLoop)return x.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ie();break;case"VersionError":if(0<I)return I=0,ie()}return ot.reject(ke)})}var ge,ve=x.dbReadyResolve,xe=null,se=!1;return ot.race([N,(typeof navigator>"u"?ot.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function me(){return indexedDB.databases().finally(ke)}ge=setInterval(me,100),me()}).finally(function(){return clearInterval(ge)}):Promise.resolve()).then(ie)]).then(function(){return G(),x.onReadyBeingFired=[],ot.resolve(Ty(function(){return g.on.ready.fire(g.vip)})).then(function ke(){if(0<x.onReadyBeingFired.length){var me=x.onReadyBeingFired.reduce(Fe,He);return x.onReadyBeingFired=[],ot.resolve(Ty(function(){return me(g.vip)})).then(ke)}})}).finally(function(){x.openCanceller===N&&(x.onReadyBeingFired=null,x.isBeingOpened=!1)}).catch(function(ke){x.dbOpenError=ke;try{xe&&xe.abort()}catch(me){}return N===x.openCanceller&&g._close(),fn(ke)}).finally(function(){x.openComplete=!0,ve()}).then(function(){var ke;return se&&(ke={},g.tables.forEach(function(me){me.schema.indexes.forEach(function(be){be.name&&(ke["idb://".concat(g.name,"/").concat(me.name,"/").concat(be.name)]=new Sr(-1/0,[[[]]]))}),ke["idb://".concat(g.name,"/").concat(me.name,"/")]=ke["idb://".concat(g.name,"/").concat(me.name,"/:dels")]=new Sr(-1/0,[[[]]])}),Hs(bc).fire(ke),My(ke,!0)),g})}function Dy(g){function x(M){return g.next(M)}var E=I(x),N=I(function(M){return g.throw(M)});function I(M){return function(ge){var ie=M(ge),ge=ie.value;return ie.done?ge:ge&&typeof ge.then=="function"?ge.then(E,N):a(ge)?Promise.all(ge).then(E,N):E(ge)}}return I(x)()}function ch(g,x,E){for(var N=a(g)?g.slice():[g],I=0;I<E;++I)N.push(x);return N}var F5={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(g){return r(r({},g),{table:function(x){var E=g.table(x),N=E.schema,I={},M=[];function G(se,ke,me){var be=xc(se),Ee=I[be]=I[be]||[],we=se==null?0:typeof se=="string"?1:se.length,Ae=0<ke,Ae=r(r({},me),{name:Ae?"".concat(be,"(virtual-from:").concat(me.name,")"):me.name,lowLevelIndex:me,isVirtual:Ae,keyTail:ke,keyLength:we,extractKey:ky(se),unique:!Ae&&me.unique});return Ee.push(Ae),Ae.isPrimaryKey||M.push(Ae),1<we&&G(we===2?se[0]:se.slice(0,we-1),ke+1,me),Ee.sort(function(Te,Ie){return Te.keyTail-Ie.keyTail}),Ae}x=G(N.primaryKey.keyPath,0,N.primaryKey),I[":id"]=[x];for(var ie=0,ge=N.indexes;ie<ge.length;ie++){var ve=ge[ie];G(ve.keyPath,0,ve)}function xe(se){var ke,me=se.query.index;return me.isVirtual?r(r({},se),{query:{index:me.lowLevelIndex,range:(ke=se.query.range,me=me.keyTail,{type:ke.type===1?2:ke.type,lower:ch(ke.lower,ke.lowerOpen?g.MAX_KEY:g.MIN_KEY,me),lowerOpen:!0,upper:ch(ke.upper,ke.upperOpen?g.MIN_KEY:g.MAX_KEY,me),upperOpen:!0})}}):se}return r(r({},E),{schema:r(r({},N),{primaryKey:x,indexes:M,getIndexByKeyPath:function(se){return(se=I[xc(se)])&&se[0]}}),count:function(se){return E.count(xe(se))},query:function(se){return E.query(xe(se))},openCursor:function(se){var ke=se.query.index,me=ke.keyTail,be=ke.isVirtual,Ee=ke.keyLength;return be?E.openCursor(xe(se)).then(function(Ae){return Ae&&we(Ae)}):E.openCursor(se);function we(Ae){return Object.create(Ae,{continue:{value:function(Te){Te!=null?Ae.continue(ch(Te,se.reverse?g.MAX_KEY:g.MIN_KEY,me)):se.unique?Ae.continue(Ae.key.slice(0,Ee).concat(se.reverse?g.MIN_KEY:g.MAX_KEY,me)):Ae.continue()}},continuePrimaryKey:{value:function(Te,Ie){Ae.continuePrimaryKey(ch(Te,g.MAX_KEY,me),Ie)}},primaryKey:{get:function(){return Ae.primaryKey}},key:{get:function(){var Te=Ae.key;return Ee===1?Te[0]:Te.slice(0,Ee)}},value:{get:function(){return Ae.value}}})}}})}})}};function Ly(g,x,E,N){return E=E||{},N=N||"",s(g).forEach(function(I){var M,G,ie;f(x,I)?(M=g[I],G=x[I],typeof M=="object"&&typeof G=="object"&&M&&G?(ie=te(M))!==te(G)?E[N+I]=x[I]:ie==="Object"?Ly(M,G,E,N+I+"."):M!==G&&(E[N+I]=x[I]):M!==G&&(E[N+I]=x[I])):E[N+I]=void 0}),s(x).forEach(function(I){f(g,I)||(E[N+I]=x[I])}),E}function By(g,x){return x.type==="delete"?x.keys:x.keys||x.values.map(g.extractKey)}var z5={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(g){return r(r({},g),{table:function(x){var E=g.table(x),N=E.schema.primaryKey;return r(r({},E),{mutate:function(I){var M=it.trans,G=M.table(x).hook,ie=G.deleting,ge=G.creating,ve=G.updating;switch(I.type){case"add":if(ge.fire===He)break;return M._promise("readwrite",function(){return xe(I)},!0);case"put":if(ge.fire===He&&ve.fire===He)break;return M._promise("readwrite",function(){return xe(I)},!0);case"delete":if(ie.fire===He)break;return M._promise("readwrite",function(){return xe(I)},!0);case"deleteRange":if(ie.fire===He)break;return M._promise("readwrite",function(){return function se(ke,me,be){return E.query({trans:ke,values:!1,query:{index:N,range:me},limit:be}).then(function(Ee){var we=Ee.result;return xe({type:"delete",keys:we,trans:ke}).then(function(Ae){return 0<Ae.numFailures?Promise.reject(Ae.failures[0]):we.length<be?{failures:[],numFailures:0,lastResult:void 0}:se(ke,r(r({},me),{lower:we[we.length-1],lowerOpen:!0}),be)})})}(I.trans,I.range,1e4)},!0)}return E.mutate(I);function xe(se){var ke,me,be,Ee=it.trans,we=se.keys||By(N,se);if(!we)throw new Error("Keys missing");return(se=se.type==="add"||se.type==="put"?r(r({},se),{keys:we}):r({},se)).type!=="delete"&&(se.values=i([],se.values)),se.keys&&(se.keys=i([],se.keys)),ke=E,be=we,((me=se).type==="add"?Promise.resolve([]):ke.getMany({trans:me.trans,keys:be,cache:"immutable"})).then(function(Ae){var Te=we.map(function(Ie,ze){var tt,ut,nt,at=Ae[ze],ft={onerror:null,onsuccess:null};return se.type==="delete"?ie.fire.call(ft,Ie,at,Ee):se.type==="add"||at===void 0?(tt=ge.fire.call(ft,Ie,se.values[ze],Ee),Ie==null&&tt!=null&&(se.keys[ze]=Ie=tt,N.outbound||T(se.values[ze],N.keyPath,Ie))):(tt=Ly(at,se.values[ze]),(ut=ve.fire.call(ft,tt,Ie,at,Ee))&&(nt=se.values[ze],Object.keys(ut).forEach(function(lt){f(nt,lt)?nt[lt]=ut[lt]:T(nt,lt,ut[lt])}))),ft});return E.mutate(se).then(function(Ie){for(var ze=Ie.failures,tt=Ie.results,ut=Ie.numFailures,Ie=Ie.lastResult,nt=0;nt<we.length;++nt){var at=(tt||we)[nt],ft=Te[nt];at==null?ft.onerror&&ft.onerror(ze[nt]):ft.onsuccess&&ft.onsuccess(se.type==="put"&&Ae[nt]?se.values[nt]:at)}return{failures:ze,results:tt,numFailures:ut,lastResult:Ie}}).catch(function(Ie){return Te.forEach(function(ze){return ze.onerror&&ze.onerror(Ie)}),Promise.reject(Ie)})})}}})}})}};function R1(g,x,E){try{if(!x||x.keys.length<g.length)return null;for(var N=[],I=0,M=0;I<x.keys.length&&M<g.length;++I)Ht(x.keys[I],g[M])===0&&(N.push(E?U(x.values[I]):x.values[I]),++M);return N.length===g.length?N:null}catch(G){return null}}var H5={stack:"dbcore",level:-1,create:function(g){return{table:function(x){var E=g.table(x);return r(r({},E),{getMany:function(N){if(!N.cache)return E.getMany(N);var I=R1(N.keys,N.trans._cache,N.cache==="clone");return I?ot.resolve(I):E.getMany(N).then(function(M){return N.trans._cache={keys:N.keys,values:N.cache==="clone"?U(M):M},M})},mutate:function(N){return N.type!=="add"&&(N.trans._cache=null),E.mutate(N)}})}}}};function T1(g,x){return g.trans.mode==="readonly"&&!!g.subscr&&!g.trans.explicit&&g.trans.db._options.cache!=="disabled"&&!x.schema.primaryKey.outbound}function I1(g,x){switch(g){case"query":return x.values&&!x.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var U5={stack:"dbcore",level:0,name:"Observability",create:function(g){var x=g.schema.name,E=new Sr(g.MIN_KEY,g.MAX_KEY);return r(r({},g),{transaction:function(N,I,M){if(it.subscr&&I!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(it.querier));return g.transaction(N,I,M)},table:function(N){var I=g.table(N),M=I.schema,G=M.primaryKey,se=M.indexes,ie=G.extractKey,ge=G.outbound,ve=G.autoIncrement&&se.filter(function(me){return me.compound&&me.keyPath.includes(G.keyPath)}),xe=r(r({},I),{mutate:function(me){function be(lt){return lt="idb://".concat(x,"/").concat(N,"/").concat(lt),Ie[lt]||(Ie[lt]=new Sr)}var Ee,we,Ae,Te=me.trans,Ie=me.mutatedParts||(me.mutatedParts={}),ze=be(""),tt=be(":dels"),ut=me.type,ft=me.type==="deleteRange"?[me.range]:me.type==="delete"?[me.keys]:me.values.length<50?[By(G,me).filter(function(lt){return lt}),me.values]:[],nt=ft[0],at=ft[1],ft=me.trans._cache;return a(nt)?(ze.addKeys(nt),(ft=ut==="delete"||nt.length===at.length?R1(nt,ft):null)||tt.addKeys(nt),(ft||at)&&(Ee=be,we=ft,Ae=at,M.indexes.forEach(function(lt){var wt=Ee(lt.name||"");function Mt(Wt){return Wt!=null?lt.extractKey(Wt):null}function Ut(Wt){return lt.multiEntry&&a(Wt)?Wt.forEach(function(gi){return wt.addKey(gi)}):wt.addKey(Wt)}(we||Ae).forEach(function(Wt,Er){var $t=we&&Mt(we[Er]),Er=Ae&&Mt(Ae[Er]);Ht($t,Er)!==0&&($t!=null&&Ut($t),Er!=null&&Ut(Er))})}))):nt?(at={from:(at=nt.lower)!==null&&at!==void 0?at:g.MIN_KEY,to:(at=nt.upper)!==null&&at!==void 0?at:g.MAX_KEY},tt.add(at),ze.add(at)):(ze.add(E),tt.add(E),M.indexes.forEach(function(lt){return be(lt.name).add(E)})),I.mutate(me).then(function(lt){return!nt||me.type!=="add"&&me.type!=="put"||(ze.addKeys(lt.results),ve&&ve.forEach(function(wt){for(var Mt=me.values.map(function($t){return wt.extractKey($t)}),Ut=wt.keyPath.findIndex(function($t){return $t===G.keyPath}),Wt=0,gi=lt.results.length;Wt<gi;++Wt)Mt[Wt][Ut]=lt.results[Wt];be(wt.name).addKeys(Mt)})),Te.mutatedParts=lh(Te.mutatedParts||{},Ie),lt})}}),se=function(be){var Ee=be.query,be=Ee.index,Ee=Ee.range;return[be,new Sr((be=Ee.lower)!==null&&be!==void 0?be:g.MIN_KEY,(Ee=Ee.upper)!==null&&Ee!==void 0?Ee:g.MAX_KEY)]},ke={get:function(me){return[G,new Sr(me.key)]},getMany:function(me){return[G,new Sr().addKeys(me.keys)]},count:se,query:se,openCursor:se};return s(ke).forEach(function(me){xe[me]=function(be){var Ee=it.subscr,we=!!Ee,Ae=T1(it,I)&&I1(me,be)?be.obsSet={}:Ee;if(we){var Te=function(at){return at="idb://".concat(x,"/").concat(N,"/").concat(at),Ae[at]||(Ae[at]=new Sr)},Ie=Te(""),ze=Te(":dels"),Ee=ke[me](be),we=Ee[0],Ee=Ee[1];if((me==="query"&&we.isPrimaryKey&&!be.values?ze:Te(we.name||"")).add(Ee),!we.isPrimaryKey){if(me!=="count"){var tt=me==="query"&&ge&&be.values&&I.query(r(r({},be),{values:!1}));return I[me].apply(this,arguments).then(function(at){if(me==="query"){if(ge&&be.values)return tt.then(function(Mt){return Mt=Mt.result,Ie.addKeys(Mt),at});var ft=be.values?at.result.map(ie):at.result;(be.values?Ie:ze).addKeys(ft)}else if(me==="openCursor"){var lt=at,wt=be.values;return lt&&Object.create(lt,{key:{get:function(){return ze.addKey(lt.primaryKey),lt.key}},primaryKey:{get:function(){var Mt=lt.primaryKey;return ze.addKey(Mt),Mt}},value:{get:function(){return wt&&Ie.addKey(lt.primaryKey),lt.value}}})}return at})}ze.add(E)}}return I[me].apply(this,arguments)}}),xe}})}};function P1(g,x,E){if(E.numFailures===0)return x;if(x.type==="deleteRange")return null;var N=x.keys?x.keys.length:"values"in x&&x.values?x.values.length:1;return E.numFailures===N?null:(x=r({},x),a(x.keys)&&(x.keys=x.keys.filter(function(I,M){return!(M in E.failures)})),"values"in x&&a(x.values)&&(x.values=x.values.filter(function(I,M){return!(M in E.failures)})),x)}function Fy(g,x){return E=g,((N=x).lower===void 0||(N.lowerOpen?0<Ht(E,N.lower):0<=Ht(E,N.lower)))&&(g=g,(x=x).upper===void 0||(x.upperOpen?Ht(g,x.upper)<0:Ht(g,x.upper)<=0));var E,N}function O1(g,x,ke,N,I,M){if(!ke||ke.length===0)return g;var G=x.query.index,ie=G.multiEntry,ge=x.query.range,ve=N.schema.primaryKey.extractKey,xe=G.extractKey,se=(G.lowLevelIndex||G).extractKey,ke=ke.reduce(function(me,be){var Ee=me,we=[];if(be.type==="add"||be.type==="put")for(var Ae=new Sr,Te=be.values.length-1;0<=Te;--Te){var Ie,ze=be.values[Te],tt=ve(ze);Ae.hasKey(tt)||(Ie=xe(ze),(ie&&a(Ie)?Ie.some(function(lt){return Fy(lt,ge)}):Fy(Ie,ge))&&(Ae.addKey(tt),we.push(ze)))}switch(be.type){case"add":var ut=new Sr().addKeys(x.values?me.map(function(wt){return ve(wt)}):me),Ee=me.concat(x.values?we.filter(function(wt){return wt=ve(wt),!ut.hasKey(wt)&&(ut.addKey(wt),!0)}):we.map(function(wt){return ve(wt)}).filter(function(wt){return!ut.hasKey(wt)&&(ut.addKey(wt),!0)}));break;case"put":var nt=new Sr().addKeys(be.values.map(function(wt){return ve(wt)}));Ee=me.filter(function(wt){return!nt.hasKey(x.values?ve(wt):wt)}).concat(x.values?we:we.map(function(wt){return ve(wt)}));break;case"delete":var at=new Sr().addKeys(be.keys);Ee=me.filter(function(wt){return!at.hasKey(x.values?ve(wt):wt)});break;case"deleteRange":var ft=be.range;Ee=me.filter(function(wt){return!Fy(ve(wt),ft)})}return Ee},g);return ke===g?g:(ke.sort(function(me,be){return Ht(se(me),se(be))||Ht(ve(me),ve(be))}),x.limit&&x.limit<1/0&&(ke.length>x.limit?ke.length=x.limit:g.length===x.limit&&ke.length<x.limit&&(I.dirty=!0)),M?Object.freeze(ke):ke)}function $1(g,x){return Ht(g.lower,x.lower)===0&&Ht(g.upper,x.upper)===0&&!!g.lowerOpen==!!x.lowerOpen&&!!g.upperOpen==!!x.upperOpen}function W5(g,x){return function(E,N,I,M){if(E===void 0)return N!==void 0?-1:0;if(N===void 0)return 1;if((N=Ht(E,N))===0){if(I&&M)return 0;if(I)return 1;if(M)return-1}return N}(g.lower,x.lower,g.lowerOpen,x.lowerOpen)<=0&&0<=function(E,N,I,M){if(E===void 0)return N!==void 0?1:0;if(N===void 0)return-1;if((N=Ht(E,N))===0){if(I&&M)return 0;if(I)return-1;if(M)return 1}return N}(g.upper,x.upper,g.upperOpen,x.upperOpen)}function V5(g,x,E,N){g.subscribers.add(E),N.addEventListener("abort",function(){var I,M;g.subscribers.delete(E),g.subscribers.size===0&&(I=g,M=x,setTimeout(function(){I.subscribers.size===0&&z(M,I)},3e3))})}var q5={stack:"dbcore",level:0,name:"Cache",create:function(g){var x=g.schema.name;return r(r({},g),{transaction:function(E,N,I){var M,G,ie=g.transaction(E,N,I);return N==="readwrite"&&(G=(M=new AbortController).signal,I=function(ge){return function(){if(M.abort(),N==="readwrite"){for(var ve=new Set,xe=0,se=E;xe<se.length;xe++){var ke=se[xe],me=Fa["idb://".concat(x,"/").concat(ke)];if(me){var be=g.table(ke),Ee=me.optimisticOps.filter(function(wt){return wt.trans===ie});if(ie._explicit&&ge&&ie.mutatedParts)for(var we=0,Ae=Object.values(me.queries.query);we<Ae.length;we++)for(var Te=0,Ie=(ut=Ae[we]).slice();Te<Ie.length;Te++)Py((nt=Ie[Te]).obsSet,ie.mutatedParts)&&(z(ut,nt),nt.subscribers.forEach(function(wt){return ve.add(wt)}));else if(0<Ee.length){me.optimisticOps=me.optimisticOps.filter(function(wt){return wt.trans!==ie});for(var ze=0,tt=Object.values(me.queries.query);ze<tt.length;ze++)for(var ut,nt,at,ft=0,lt=(ut=tt[ze]).slice();ft<lt.length;ft++)(nt=lt[ft]).res!=null&&ie.mutatedParts&&(ge&&!nt.dirty?(at=Object.isFrozen(nt.res),at=O1(nt.res,nt.req,Ee,be,nt,at),nt.dirty?(z(ut,nt),nt.subscribers.forEach(function(wt){return ve.add(wt)})):at!==nt.res&&(nt.res=at,nt.promise=ot.resolve({result:at}))):(nt.dirty&&z(ut,nt),nt.subscribers.forEach(function(wt){return ve.add(wt)})))}}}ve.forEach(function(wt){return wt()})}}},ie.addEventListener("abort",I(!1),{signal:G}),ie.addEventListener("error",I(!1),{signal:G}),ie.addEventListener("complete",I(!0),{signal:G})),ie},table:function(E){var N=g.table(E),I=N.schema.primaryKey;return r(r({},N),{mutate:function(M){var G=it.trans;if(I.outbound||G.db._options.cache==="disabled"||G.explicit||G.idbtrans.mode!=="readwrite")return N.mutate(M);var ie=Fa["idb://".concat(x,"/").concat(E)];return ie?(G=N.mutate(M),M.type!=="add"&&M.type!=="put"||!(50<=M.values.length||By(I,M).some(function(ge){return ge==null}))?(ie.optimisticOps.push(M),M.mutatedParts&&uh(M.mutatedParts),G.then(function(ge){0<ge.numFailures&&(z(ie.optimisticOps,M),(ge=P1(0,M,ge))&&ie.optimisticOps.push(ge),M.mutatedParts&&uh(M.mutatedParts))}),G.catch(function(){z(ie.optimisticOps,M),M.mutatedParts&&uh(M.mutatedParts)})):G.then(function(ge){var ve=P1(0,r(r({},M),{values:M.values.map(function(xe,se){var ke;return ge.failures[se]?xe:(xe=(ke=I.keyPath)!==null&&ke!==void 0&&ke.includes(".")?U(xe):r({},xe),T(xe,I.keyPath,ge.results[se]),xe)})}),ge);ie.optimisticOps.push(ve),queueMicrotask(function(){return M.mutatedParts&&uh(M.mutatedParts)})}),G):N.mutate(M)},query:function(M){if(!T1(it,N)||!I1("query",M))return N.query(M);var G=((ve=it.trans)===null||ve===void 0?void 0:ve.db._options.cache)==="immutable",se=it,ie=se.requery,ge=se.signal,ve=function(be,Ee,we,Ae){var Te=Fa["idb://".concat(be,"/").concat(Ee)];if(!Te)return[];if(!(Ee=Te.queries[we]))return[null,!1,Te,null];var Ie=Ee[(Ae.query?Ae.query.index.name:null)||""];if(!Ie)return[null,!1,Te,null];switch(we){case"query":var ze=Ie.find(function(tt){return tt.req.limit===Ae.limit&&tt.req.values===Ae.values&&$1(tt.req.query.range,Ae.query.range)});return ze?[ze,!0,Te,Ie]:[Ie.find(function(tt){return("limit"in tt.req?tt.req.limit:1/0)>=Ae.limit&&(!Ae.values||tt.req.values)&&W5(tt.req.query.range,Ae.query.range)}),!1,Te,Ie];case"count":return ze=Ie.find(function(tt){return $1(tt.req.query.range,Ae.query.range)}),[ze,!!ze,Te,Ie]}}(x,E,"query",M),xe=ve[0],se=ve[1],ke=ve[2],me=ve[3];return xe&&se?xe.obsSet=M.obsSet:(se=N.query(M).then(function(be){var Ee=be.result;if(xe&&(xe.res=Ee),G){for(var we=0,Ae=Ee.length;we<Ae;++we)Object.freeze(Ee[we]);Object.freeze(Ee)}else be.result=U(Ee);return be}).catch(function(be){return me&&xe&&z(me,xe),Promise.reject(be)}),xe={obsSet:M.obsSet,promise:se,subscribers:new Set,type:"query",req:M,dirty:!1},me?me.push(xe):(me=[xe],(ke=ke||(Fa["idb://".concat(x,"/").concat(E)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[M.query.index.name||""]=me)),V5(xe,me,ie,ge),xe.promise.then(function(be){return{result:O1(be.result,M,ke==null?void 0:ke.optimisticOps,N,xe,G)}})}})}})}};function dh(g,x){return new Proxy(g,{get:function(E,N,I){return N==="db"?x:Reflect.get(E,N,I)}})}var rs=(Fn.prototype.version=function(g){if(isNaN(g)||g<.1)throw new re.Type("Given version is not a positive number");if(g=Math.round(10*g)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var x=this._versions,E=x.filter(function(N){return N._cfg.version===g})[0];return E||(E=new this.Version(g),x.push(E),x.sort($5),E.stores({}),this._state.autoSchema=!1,E)},Fn.prototype._whenReady=function(g){var x=this;return this.idbdb&&(this._state.openComplete||it.letThrough||this._vip)?g():new ot(function(E,N){if(x._state.openComplete)return N(new re.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return void N(new re.DatabaseClosed);x.open().catch(He)}x._state.dbReadyPromise.then(E,N)}).then(g)},Fn.prototype.use=function(g){var x=g.stack,E=g.create,N=g.level,I=g.name;return I&&this.unuse({stack:x,name:I}),g=this._middlewares[x]||(this._middlewares[x]=[]),g.push({stack:x,create:E,level:N==null?10:N,name:I}),g.sort(function(M,G){return M.level-G.level}),this},Fn.prototype.unuse=function(g){var x=g.stack,E=g.name,N=g.create;return x&&this._middlewares[x]&&(this._middlewares[x]=this._middlewares[x].filter(function(I){return N?I.create!==N:!!E&&I.name!==E})),this},Fn.prototype.open=function(){var g=this;return Qi(Vt,function(){return B5(g)})},Fn.prototype._close=function(){var g=this._state,x=Ur.indexOf(this);if(0<=x&&Ur.splice(x,1),this.idbdb){try{this.idbdb.close()}catch(E){}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new ot(function(E){g.dbReadyResolve=E}),g.openCanceller=new ot(function(E,N){g.cancelOpen=N}))},Fn.prototype.close=function(E){var x=(E===void 0?{disableAutoOpen:!0}:E).disableAutoOpen,E=this._state;x?(E.isBeingOpened&&E.cancelOpen(new re.DatabaseClosed),this._close(),E.autoOpen=!1,E.dbOpenError=new re.DatabaseClosed):(this._close(),E.autoOpen=this._options.autoOpen||E.isBeingOpened,E.openComplete=!1,E.dbOpenError=null)},Fn.prototype.delete=function(g){var x=this;g===void 0&&(g={disableAutoOpen:!0});var E=0<arguments.length&&typeof arguments[0]!="object",N=this._state;return new ot(function(I,M){function G(){x.close(g);var ie=x._deps.indexedDB.deleteDatabase(x.name);ie.onsuccess=Pt(function(){var ge,ve,xe;ge=x._deps,ve=x.name,xe=ge.indexedDB,ge=ge.IDBKeyRange,Ry(xe)||ve===zs||Ny(xe,ge).delete(ve).catch(He),I()}),ie.onerror=Ro(M),ie.onblocked=x._fireOnBlocked}if(E)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");N.isBeingOpened?N.dbReadyPromise.then(G):G()})},Fn.prototype.backendDB=function(){return this.idbdb},Fn.prototype.isOpen=function(){return this.idbdb!==null},Fn.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},Fn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Fn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Fn.prototype,"tables",{get:function(){var g=this;return s(this._allTables).map(function(x){return g._allTables[x]})},enumerable:!1,configurable:!0}),Fn.prototype.transaction=function(){var g=(function(x,E,N){var I=arguments.length;if(I<2)throw new re.InvalidArgument("Too few arguments");for(var M=new Array(I-1);--I;)M[I-1]=arguments[I];return N=M.pop(),[x,D(M),N]}).apply(this,arguments);return this._transaction.apply(this,g)},Fn.prototype._transaction=function(g,x,E){var N=this,I=it.trans;I&&I.db===this&&g.indexOf("!")===-1||(I=null);var M,G,ie=g.indexOf("?")!==-1;g=g.replace("!","").replace("?","");try{if(G=x.map(function(ve){if(ve=ve instanceof N.Table?ve.name:ve,typeof ve!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ve}),g=="r"||g===Co)M=Co;else{if(g!="rw"&&g!=ns)throw new re.InvalidArgument("Invalid transaction mode: "+g);M=ns}if(I){if(I.mode===Co&&M===ns){if(!ie)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");I=null}I&&G.forEach(function(ve){if(I&&I.storeNames.indexOf(ve)===-1){if(!ie)throw new re.SubTransaction("Table "+ve+" not included in parent transaction.");I=null}}),ie&&I&&!I.active&&(I=null)}}catch(ve){return I?I._promise(null,function(xe,se){se(ve)}):fn(ve)}var ge=(function ve(xe,se,ke,me,be){return ot.resolve().then(function(){var Ee=it.transless||it,we=xe._createTransaction(se,ke,xe._dbSchema,me);if(we.explicit=!0,Ee={trans:we,transless:Ee},me)we.idbtrans=me.idbtrans;else try{we.create(),we.idbtrans._explicit=!0,xe._state.PR1398_maxLoop=3}catch(Ie){return Ie.name===B.InvalidState&&xe.isOpen()&&0<--xe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),xe.close({disableAutoOpen:!1}),xe.open().then(function(){return ve(xe,se,ke,null,be)})):fn(Ie)}var Ae,Te=X(be);return Te&&Hr(),Ee=ot.follow(function(){var Ie;(Ae=be.call(we,we))&&(Te?(Ie=cr.bind(null,null),Ae.then(Ie,Ie)):typeof Ae.next=="function"&&typeof Ae.throw=="function"&&(Ae=Dy(Ae)))},Ee),(Ae&&typeof Ae.then=="function"?ot.resolve(Ae).then(function(Ie){return we.active?Ie:fn(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ee.then(function(){return Ae})).then(function(Ie){return me&&we._resolve(),we._completion.then(function(){return Ie})}).catch(function(Ie){return we._reject(Ie),fn(Ie)})})}).bind(null,this,M,G,I,E);return I?I._promise(M,ge,"lock"):it.trans?Qi(it.transless,function(){return N._whenReady(ge)}):this._whenReady(ge)},Fn.prototype.table=function(g){if(!f(this._allTables,g))throw new re.InvalidTable("Table ".concat(g," does not exist"));return this._allTables[g]},Fn);function Fn(g,x){var E=this;this._middlewares={},this.verno=0;var N=Fn.dependencies;this._options=x=r({addons:Fn.addons,autoOpen:!0,indexedDB:N.indexedDB,IDBKeyRange:N.IDBKeyRange,cache:"cloned"},x),this._deps={indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange},N=x.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var I,M,G,ie,ge,ve={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:x.autoOpen};ve.dbReadyPromise=new ot(function(se){ve.dbReadyResolve=se}),ve.openCanceller=new ot(function(se,ke){ve.cancelOpen=ke}),this._state=ve,this.name=g,this.on=_e(this,"populate","blocked","versionchange","close",{ready:[Fe,He]}),this.on.ready.subscribe=w(this.on.ready.subscribe,function(se){return function(ke,me){Fn.vip(function(){var be,Ee=E._state;Ee.openComplete?(Ee.dbOpenError||ot.resolve().then(ke),me&&se(ke)):Ee.onReadyBeingFired?(Ee.onReadyBeingFired.push(ke),me&&se(ke)):(se(ke),be=E,me||se(function we(){be.on.ready.unsubscribe(ke),be.on.ready.unsubscribe(we)}))})}}),this.Collection=(I=this,pe(Pn.prototype,function(Ae,we){this.db=I;var me=zl,be=null;if(we)try{me=we()}catch(Te){be=Te}var Ee=Ae._ctx,we=Ee.table,Ae=we.hook.reading.fire;this._ctx={table:we,index:Ee.index,isPrimKey:!Ee.index||we.schema.primKey.keyPath&&Ee.index===we.schema.primKey.name,range:me,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:be,or:Ee.or,valueMapper:Ae!==ne?Ae:null}})),this.Table=(M=this,pe(K.prototype,function(se,ke,me){this.db=M,this._tx=me,this.name=se,this.schema=ke,this.hook=M._allTables[se]?M._allTables[se].hook:_e(null,{creating:[Ue,He],reading:[he,ne],updating:[Ke,He],deleting:[We,He]})})),this.Transaction=(G=this,pe(T5.prototype,function(se,ke,me,be,Ee){var we=this;this.db=G,this.mode=se,this.storeNames=ke,this.schema=me,this.chromeTransactionDurability=be,this.idbtrans=null,this.on=_e(this,"complete","error","abort"),this.parent=Ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ot(function(Ae,Te){we._resolve=Ae,we._reject=Te}),this._completion.then(function(){we.active=!1,we.on.complete.fire()},function(Ae){var Te=we.active;return we.active=!1,we.on.error.fire(Ae),we.parent?we.parent._reject(Ae):Te&&we.idbtrans&&we.idbtrans.abort(),fn(Ae)})})),this.Version=(ie=this,pe(L5.prototype,function(se){this.db=ie,this._cfg={version:se,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ge=this,pe(vc.prototype,function(se,ke,me){if(this.db=ge,this._ctx={table:se,index:ke===":id"?null:ke,or:me},this._cmp=this._ascending=Ht,this._descending=function(be,Ee){return Ht(Ee,be)},this._max=function(be,Ee){return 0<Ht(be,Ee)?be:Ee},this._min=function(be,Ee){return Ht(be,Ee)<0?be:Ee},this._IDBKeyRange=ge._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(se){0<se.newVersion?console.warn("Another connection wants to upgrade database '".concat(E.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(E.name,"'. Closing db now to resume the delete request.")),E.close({disableAutoOpen:!1})}),this.on("blocked",function(se){!se.newVersion||se.newVersion<se.oldVersion?console.warn("Dexie.delete('".concat(E.name,"') was blocked")):console.warn("Upgrade '".concat(E.name,"' blocked by other connection holding version ").concat(se.oldVersion/10))}),this._maxKey=_c(x.IDBKeyRange),this._createTransaction=function(se,ke,me,be){return new E.Transaction(se,ke,me,E._options.chromeTransactionDurability,be)},this._fireOnBlocked=function(se){E.on("blocked").fire(se),Ur.filter(function(ke){return ke.name===E.name&&ke!==E&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(se)})},this.use(H5),this.use(q5),this.use(U5),this.use(F5),this.use(z5);var xe=new Proxy(this,{get:function(se,ke,me){if(ke==="_vip")return!0;if(ke==="table")return function(Ee){return dh(E.table(Ee),xe)};var be=Reflect.get(se,ke,me);return be instanceof K?dh(be,xe):ke==="tables"?be.map(function(Ee){return dh(Ee,xe)}):ke==="_createTransaction"?function(){return dh(be.apply(this,arguments),xe)}:be}});this.vip=xe,N.forEach(function(se){return se(E)})}var fh,Oi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",K5=(zy.prototype.subscribe=function(g,x,E){return this._subscribe(g&&typeof g!="function"?g:{next:g,error:x,complete:E})},zy.prototype[Oi]=function(){return this},zy);function zy(g){this._subscribe=g}try{fh={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(g){fh={indexedDB:null,IDBKeyRange:null}}function M1(g){var x,E=!1,N=new K5(function(I){var M=X(g),G,ie=!1,ge={},ve={},xe={get closed(){return ie},unsubscribe:function(){ie||(ie=!0,G&&G.abort(),se&&Hs.storagemutated.unsubscribe(me))}};I.start&&I.start(xe);var se=!1,ke=function(){return Da(be)},me=function(Ee){lh(ge,Ee),Py(ve,ge)&&ke()},be=function(){var Ee,we,Ae;!ie&&fh.indexedDB&&(ge={},Ee={},G&&G.abort(),G=new AbortController,Ae=function(Te){var Ie=ee();try{M&&Hr();var ze=zr(g,Te);return ze=M?ze.finally(cr):ze}finally{Ie&&Ze()}}(we={subscr:Ee,signal:G.signal,requery:ke,querier:g,trans:null}),Promise.resolve(Ae).then(function(Te){E=!0,x=Te,ie||we.signal.aborted||(ge={},function(Ie){for(var ze in Ie)if(f(Ie,ze))return;return 1}(ve=Ee)||se||(Hs(bc,me),se=!0),Da(function(){return!ie&&I.next&&I.next(Te)}))},function(Te){E=!1,["DatabaseClosedError","AbortError"].includes(Te==null?void 0:Te.name)||ie||Da(function(){ie||I.error&&I.error(Te)})}))};return setTimeout(ke,0),xe});return N.hasValue=function(){return E},N.getValue=function(){return x},N}var za=rs;function Hy(g){var x=Us;try{Us=!0,Hs.storagemutated.fire(g),My(g,!0)}finally{Us=x}}h(za,r(r({},Ye),{delete:function(g){return new za(g,{addons:[]}).delete()},exists:function(g){return new za(g,{addons:[]}).open().then(function(x){return x.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(g){try{return x=za.dependencies,E=x.indexedDB,x=x.IDBKeyRange,(Ry(E)?Promise.resolve(E.databases()).then(function(N){return N.map(function(I){return I.name}).filter(function(I){return I!==zs})}):Ny(E,x).toCollection().primaryKeys()).then(g)}catch(N){return fn(new re.MissingAPI)}var x,E},defineClass:function(){return function(g){l(this,g)}},ignoreTransaction:function(g){return it.trans?Qi(it.transless,g):g()},vip:Ty,async:function(g){return function(){try{var x=Dy(g.apply(this,arguments));return x&&typeof x.then=="function"?x:ot.resolve(x)}catch(E){return fn(E)}}},spawn:function(g,x,E){try{var N=Dy(g.apply(E,x||[]));return N&&typeof N.then=="function"?N:ot.resolve(N)}catch(I){return fn(I)}},currentTransaction:{get:function(){return it.trans||null}},waitFor:function(g,x){return x=ot.resolve(typeof g=="function"?za.ignoreTransaction(g):g).timeout(x||6e4),it.trans?it.trans.waitFor(x):x},Promise:ot,debug:{get:function(){return qe},set:function(g){Oe(g)}},derive:y,extend:l,props:h,override:w,Events:_e,on:Hs,liveQuery:M1,extendObservabilitySet:lh,getByKeyPath:A,setByKeyPath:T,delByKeyPath:function(g,x){typeof x=="string"?T(g,x,void 0):"length"in x&&[].map.call(x,function(E){T(g,E,void 0)})},shallowClone:P,deepClone:U,getObjectDiff:Ly,cmp:Ht,asap:k,minKey:-1/0,addons:[],connections:Ur,errnames:B,dependencies:fh,cache:Fa,semVer:"4.0.11",version:"4.0.11".split(".").map(function(g){return parseInt(g)}).reduce(function(g,x,E){return g+x/Math.pow(10,2*E)})})),za.maxKey=_c(za.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Hs(bc,function(g){Us||(g=new CustomEvent(xy,{detail:g}),Us=!0,dispatchEvent(g),Us=!1)}),addEventListener(xy,function(g){g=g.detail,Us||Hy(g)}));var Ul,Us=!1,D1=function(){};return typeof BroadcastChannel<"u"&&((D1=function(){(Ul=new BroadcastChannel(xy)).onmessage=function(g){return g.data&&Hy(g.data)}})(),typeof Ul.unref=="function"&&Ul.unref(),Hs(bc,function(g){Us||Ul.postMessage(g)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(g){if(!rs.disableBfCache&&g.persisted){qe&&console.debug("Dexie: handling persisted pagehide"),Ul!=null&&Ul.close();for(var x=0,E=Ur;x<E.length;x++)E[x].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(g){!rs.disableBfCache&&g.persisted&&(qe&&console.debug("Dexie: handling persisted pageshow"),D1(),Hy({all:new Sr(-1/0,[[]])}))})),ot.rejectionMapper=function(g,x){return!g||g instanceof ce||g instanceof TypeError||g instanceof SyntaxError||!g.name||!De[g.name]?g:(x=new De[g.name](x||g.message,g),"stack"in g&&b(x,"stack",{get:function(){return this.inner.stack}}),x)},Oe(qe),r(rs,Object.freeze({__proto__:null,Dexie:rs,liveQuery:M1,Entity:Hl,cmp:Ht,PropModification:Xt,replacePrefix:function(g,x){return new Xt({replacePrefix:[g,x]})},add:function(g){return new Xt({add:g})},remove:function(g){return new Xt({remove:g})},default:rs,RangeSet:Sr,mergeRanges:Ec,rangesOverlap:C1}),{default:rs}),rs})})(aT);var S9=aT.exports;const Uw=Os(S9),a2=Symbol.for("Dexie"),yg=globalThis[a2]||(globalThis[a2]=Uw);if(Uw.semVer!==yg.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(Uw.semVer," and ").concat(yg.semVer));const{liveQuery:E9,mergeRanges:joe,rangesOverlap:Aoe,RangeSet:Noe,cmp:Roe,Entity:Toe,PropModification:Ioe,replacePrefix:Poe,add:Ooe,remove:$oe}=yg,xt=new yg("bardsballad");xt.version(1).stores({characters:"&local_id, updatedAt, id",systems:"&local_id, id",subscriptions:"&local_id, user_id, resource_id, version_id",versions:"&local_id, reference_id, id"});const fr=[];for(let e=0;e<256;++e)fr.push((e+256).toString(16).slice(1));function k9(e,t=0){return(fr[e[t+0]]+fr[e[t+1]]+fr[e[t+2]]+fr[e[t+3]]+"-"+fr[e[t+4]]+fr[e[t+5]]+"-"+fr[e[t+6]]+fr[e[t+7]]+"-"+fr[e[t+8]]+fr[e[t+9]]+"-"+fr[e[t+10]]+fr[e[t+11]]+fr[e[t+12]]+fr[e[t+13]]+fr[e[t+14]]+fr[e[t+15]]).toLowerCase()}let A0;const C9=new Uint8Array(16);function j9(){if(!A0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");A0=crypto.getRandomValues.bind(crypto)}return A0(C9)}const A9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),l2={randomUUID:A9};function lT(e,t,n){var i,o,s;if(l2.randomUUID&&!e)return l2.randomUUID();e=e||{};const r=(s=(o=e.random)!=null?o:(i=e.rng)==null?void 0:i.call(e))!=null?s:j9();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,k9(r)}function zh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uT={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(u,c){if(!i[u]){if(!r[u]){var f=typeof zh=="function"&&zh;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[u]={exports:{}};r[u][0].call(p.exports,function(b){var y=r[u][1][b];return s(y||b)},p,p.exports,n,r,i,o)}return i[u].exports}for(var a=typeof zh=="function"&&zh,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var l=0,u=new s(b),c=o.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=b,a=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var _=o.document.createElement("script");_.onreadystatechange=function(){b(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},o.document.documentElement.appendChild(_)}:a=function(){setTimeout(b,0)};var h,p=[];function b(){h=!0;for(var _,m,v=p.length;v;){for(m=p,p=[],_=-1;++_<v;)m[_]();v=p.length}h=!1}r.exports=y;function y(_){p.push(_)===1&&!h&&a()}}).call(this,typeof Bi<"u"?Bi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=f;function f(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,k!==s&&y(this,k)}f.prototype.catch=function(k){return this.then(null,k)},f.prototype.then=function(k,A){if(typeof k!="function"&&this.state===u||typeof A!="function"&&this.state===l)return this;var T=new this.constructor(s);if(this.state!==c){var P=this.state===u?k:A;p(T,P,this.outcome)}else this.queue.push(new h(T,k,A));return T};function h(k,A,T){this.promise=k,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(k){a.resolve(this.promise,k)},h.prototype.otherCallFulfilled=function(k){p(this.promise,this.onFulfilled,k)},h.prototype.callRejected=function(k){a.reject(this.promise,k)},h.prototype.otherCallRejected=function(k){p(this.promise,this.onRejected,k)};function p(k,A,T){o(function(){var P;try{P=A(T)}catch(Y){return a.reject(k,Y)}P===k?a.reject(k,new TypeError("Cannot resolve promise with itself")):a.resolve(k,P)})}a.resolve=function(k,A){var T=_(b,A);if(T.status==="error")return a.reject(k,T.value);var P=T.value;if(P)y(k,P);else{k.state=u,k.outcome=A;for(var Y=-1,D=k.queue.length;++Y<D;)k.queue[Y].callFulfilled(A)}return k},a.reject=function(k,A){k.state=l,k.outcome=A;for(var T=-1,P=k.queue.length;++T<P;)k.queue[T].callRejected(A);return k};function b(k){var A=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof A=="function")return function(){A.apply(k,arguments)}}function y(k,A){var T=!1;function P(Q){T||(T=!0,a.reject(k,Q))}function Y(Q){T||(T=!0,a.resolve(k,Q))}function D(){A(Y,P)}var H=_(D);H.status==="error"&&P(H.value)}function _(k,A){var T={};try{T.value=k(A),T.status="success"}catch(P){T.status="error",T.value=P}return T}f.resolve=m;function m(k){return k instanceof this?k:a.resolve(new this(s),k)}f.reject=v;function v(k){var A=new this(s);return a.reject(A,k)}f.all=w;function w(k){var A=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=k.length,P=!1;if(!T)return this.resolve([]);for(var Y=new Array(T),D=0,H=-1,Q=new this(s);++H<T;)U(k[H],H);return Q;function U(L,te){A.resolve(L).then(Z,function(oe){P||(P=!0,a.reject(Q,oe))});function Z(oe){Y[te]=oe,++D===T&&!P&&(P=!0,a.resolve(Q,Y))}}}f.race=S;function S(k){var A=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=k.length,P=!1;if(!T)return this.resolve([]);for(var Y=-1,D=new this(s);++Y<T;)H(k[Y]);return D;function H(Q){A.resolve(Q).then(function(U){P||(P=!0,a.resolve(D,U))},function(U){P||(P=!0,a.reject(D,U))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof Bi<"u"?Bi:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F};function s(F,ae){if(!(F instanceof ae))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(F){return}}var l=a();function u(){try{if(!l||!l.open)return!1;var F=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ae=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!F||ae)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(K){return!1}}function c(F,ae){F=F||[],ae=ae||{};try{return new Blob(F,ae)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var K=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,le=new K,_e=0;_e<F.length;_e+=1)le.append(F[_e]);return le.getBlob(ae.type)}}typeof Promise>"u"&&n(3);var f=Promise;function h(F,ae){ae&&F.then(function(K){ae(null,K)},function(K){ae(K)})}function p(F,ae,K){typeof ae=="function"&&F.then(ae),typeof K=="function"&&F.catch(K)}function b(F){return typeof F!="string"&&(console.warn(F+" used as a key, but it is not a string."),F=String(F)),F}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var _="local-forage-detect-blob-support",m=void 0,v={},w=Object.prototype.toString,S="readonly",k="readwrite";function A(F){for(var ae=F.length,K=new ArrayBuffer(ae),le=new Uint8Array(K),_e=0;_e<ae;_e++)le[_e]=F.charCodeAt(_e);return K}function T(F){return new f(function(ae){var K=F.transaction(_,k),le=c([""]);K.objectStore(_).put(le,"key"),K.onabort=function(_e){_e.preventDefault(),_e.stopPropagation(),ae(!1)},K.oncomplete=function(){var _e=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);ae(pe||!_e||parseInt(_e[1],10)>=43)}}).catch(function(){return!1})}function P(F){return typeof m=="boolean"?f.resolve(m):T(F).then(function(ae){return m=ae,m})}function Y(F){var ae=v[F.name],K={};K.promise=new f(function(le,_e){K.resolve=le,K.reject=_e}),ae.deferredOperations.push(K),ae.dbReady?ae.dbReady=ae.dbReady.then(function(){return K.promise}):ae.dbReady=K.promise}function D(F){var ae=v[F.name],K=ae.deferredOperations.pop();if(K)return K.resolve(),K.promise}function H(F,ae){var K=v[F.name],le=K.deferredOperations.pop();if(le)return le.reject(ae),le.promise}function Q(F,ae){return new f(function(K,le){if(v[F.name]=v[F.name]||ue(),F.db)if(ae)Y(F),F.db.close();else return K(F.db);var _e=[F.name];ae&&_e.push(F.version);var pe=l.open.apply(l,_e);ae&&(pe.onupgradeneeded=function(Le){var Ge=pe.result;try{Ge.createObjectStore(F.storeName),Le.oldVersion<=1&&Ge.createObjectStore(_)}catch(Je){if(Je.name==="ConstraintError")console.warn('The database "'+F.name+'" has been upgraded from version '+Le.oldVersion+" to version "+Le.newVersion+', but the storage "'+F.storeName+'" already exists.');else throw Je}}),pe.onerror=function(Le){Le.preventDefault(),le(pe.error)},pe.onsuccess=function(){var Le=pe.result;Le.onversionchange=function(Ge){Ge.target.close()},K(Le),D(F)}})}function U(F){return Q(F,!1)}function L(F){return Q(F,!0)}function te(F,ae){if(!F.db)return!0;var K=!F.db.objectStoreNames.contains(F.storeName),le=F.version<F.db.version,_e=F.version>F.db.version;if(le&&(F.version!==ae&&console.warn('The database "'+F.name+"\" can't be downgraded from version "+F.db.version+" to version "+F.version+"."),F.version=F.db.version),_e||K){if(K){var pe=F.db.version+1;pe>F.version&&(F.version=pe)}return!0}return!1}function Z(F){return new f(function(ae,K){var le=new FileReader;le.onerror=K,le.onloadend=function(_e){var pe=btoa(_e.target.result||"");ae({__local_forage_encoded_blob:!0,data:pe,type:F.type})},le.readAsBinaryString(F)})}function oe(F){var ae=A(atob(F.data));return c([ae],{type:F.type})}function z(F){return F&&F.__local_forage_encoded_blob}function V(F){var ae=this,K=ae._initReady().then(function(){var le=v[ae._dbInfo.name];if(le&&le.dbReady)return le.dbReady});return p(K,F,F),K}function $(F){Y(F);for(var ae=v[F.name],K=ae.forages,le=0;le<K.length;le++){var _e=K[le];_e._dbInfo.db&&(_e._dbInfo.db.close(),_e._dbInfo.db=null)}return F.db=null,U(F).then(function(pe){return F.db=pe,te(F)?L(F):pe}).then(function(pe){F.db=ae.db=pe;for(var Le=0;Le<K.length;Le++)K[Le]._dbInfo.db=pe}).catch(function(pe){throw H(F,pe),pe})}function X(F,ae,K,le){le===void 0&&(le=1);try{var _e=F.db.transaction(F.storeName,ae);K(null,_e)}catch(pe){if(le>0&&(!F.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return f.resolve().then(function(){if(!F.db||pe.name==="NotFoundError"&&!F.db.objectStoreNames.contains(F.storeName)&&F.version<=F.db.version)return F.db&&(F.version=F.db.version+1),L(F)}).then(function(){return $(F).then(function(){X(F,ae,K,le-1)})}).catch(K);K(pe)}}function ue(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ce(F){var ae=this,K={db:null};if(F)for(var le in F)K[le]=F[le];var _e=v[K.name];_e||(_e=ue(),v[K.name]=_e),_e.forages.push(ae),ae._initReady||(ae._initReady=ae.ready,ae.ready=V);var pe=[];function Le(){return f.resolve()}for(var Ge=0;Ge<_e.forages.length;Ge++){var Je=_e.forages[Ge];Je!==ae&&pe.push(Je._initReady().catch(Le))}var Xe=_e.forages.slice(0);return f.all(pe).then(function(){return K.db=_e.db,U(K)}).then(function(st){return K.db=st,te(K,ae._defaultConfig.version)?L(K):st}).then(function(st){K.db=_e.db=st,ae._dbInfo=K;for(var _t=0;_t<Xe.length;_t++){var Bt=Xe[_t];Bt!==ae&&(Bt._dbInfo.db=K.db,Bt._dbInfo.version=K.version)}})}function Ce(F,ae){var K=this;F=b(F);var le=new f(function(_e,pe){K.ready().then(function(){X(K._dbInfo,S,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(K._dbInfo.storeName),Xe=Je.get(F);Xe.onsuccess=function(){var st=Xe.result;st===void 0&&(st=null),z(st)&&(st=oe(st)),_e(st)},Xe.onerror=function(){pe(Xe.error)}}catch(st){pe(st)}})}).catch(pe)});return h(le,ae),le}function Pe(F,ae){var K=this,le=new f(function(_e,pe){K.ready().then(function(){X(K._dbInfo,S,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(K._dbInfo.storeName),Xe=Je.openCursor(),st=1;Xe.onsuccess=function(){var _t=Xe.result;if(_t){var Bt=_t.value;z(Bt)&&(Bt=oe(Bt));var Xt=F(Bt,_t.key,st++);Xt!==void 0?_e(Xt):_t.continue()}else _e()},Xe.onerror=function(){pe(Xe.error)}}catch(_t){pe(_t)}})}).catch(pe)});return h(le,ae),le}function Me(F,ae,K){var le=this;F=b(F);var _e=new f(function(pe,Le){var Ge;le.ready().then(function(){return Ge=le._dbInfo,w.call(ae)==="[object Blob]"?P(Ge.db).then(function(Je){return Je?ae:Z(ae)}):ae}).then(function(Je){X(le._dbInfo,k,function(Xe,st){if(Xe)return Le(Xe);try{var _t=st.objectStore(le._dbInfo.storeName);Je===null&&(Je=void 0);var Bt=_t.put(Je,F);st.oncomplete=function(){Je===void 0&&(Je=null),pe(Je)},st.onabort=st.onerror=function(){var Xt=Bt.error?Bt.error:Bt.transaction.error;Le(Xt)}}catch(Xt){Le(Xt)}})}).catch(Le)});return h(_e,K),_e}function B(F,ae){var K=this;F=b(F);var le=new f(function(_e,pe){K.ready().then(function(){X(K._dbInfo,k,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(K._dbInfo.storeName),Xe=Je.delete(F);Ge.oncomplete=function(){_e()},Ge.onerror=function(){pe(Xe.error)},Ge.onabort=function(){var st=Xe.error?Xe.error:Xe.transaction.error;pe(st)}}catch(st){pe(st)}})}).catch(pe)});return h(le,ae),le}function J(F){var ae=this,K=new f(function(le,_e){ae.ready().then(function(){X(ae._dbInfo,k,function(pe,Le){if(pe)return _e(pe);try{var Ge=Le.objectStore(ae._dbInfo.storeName),Je=Ge.clear();Le.oncomplete=function(){le()},Le.onabort=Le.onerror=function(){var Xe=Je.error?Je.error:Je.transaction.error;_e(Xe)}}catch(Xe){_e(Xe)}})}).catch(_e)});return h(K,F),K}function re(F){var ae=this,K=new f(function(le,_e){ae.ready().then(function(){X(ae._dbInfo,S,function(pe,Le){if(pe)return _e(pe);try{var Ge=Le.objectStore(ae._dbInfo.storeName),Je=Ge.count();Je.onsuccess=function(){le(Je.result)},Je.onerror=function(){_e(Je.error)}}catch(Xe){_e(Xe)}})}).catch(_e)});return h(K,F),K}function De(F,ae){var K=this,le=new f(function(_e,pe){if(F<0){_e(null);return}K.ready().then(function(){X(K._dbInfo,S,function(Le,Ge){if(Le)return pe(Le);try{var Je=Ge.objectStore(K._dbInfo.storeName),Xe=!1,st=Je.openKeyCursor();st.onsuccess=function(){var _t=st.result;if(!_t){_e(null);return}F===0||Xe?_e(_t.key):(Xe=!0,_t.advance(F))},st.onerror=function(){pe(st.error)}}catch(_t){pe(_t)}})}).catch(pe)});return h(le,ae),le}function Ye(F){var ae=this,K=new f(function(le,_e){ae.ready().then(function(){X(ae._dbInfo,S,function(pe,Le){if(pe)return _e(pe);try{var Ge=Le.objectStore(ae._dbInfo.storeName),Je=Ge.openKeyCursor(),Xe=[];Je.onsuccess=function(){var st=Je.result;if(!st){le(Xe);return}Xe.push(st.key),st.continue()},Je.onerror=function(){_e(Je.error)}}catch(st){_e(st)}})}).catch(_e)});return h(K,F),K}function He(F,ae){ae=y.apply(this,arguments);var K=this.config();F=typeof F!="function"&&F||{},F.name||(F.name=F.name||K.name,F.storeName=F.storeName||K.storeName);var le=this,_e;if(!F.name)_e=f.reject("Invalid arguments");else{var pe=F.name===K.name&&le._dbInfo.db,Le=pe?f.resolve(le._dbInfo.db):U(F).then(function(Ge){var Je=v[F.name],Xe=Je.forages;Je.db=Ge;for(var st=0;st<Xe.length;st++)Xe[st]._dbInfo.db=Ge;return Ge});F.storeName?_e=Le.then(function(Ge){if(Ge.objectStoreNames.contains(F.storeName)){var Je=Ge.version+1;Y(F);var Xe=v[F.name],st=Xe.forages;Ge.close();for(var _t=0;_t<st.length;_t++){var Bt=st[_t];Bt._dbInfo.db=null,Bt._dbInfo.version=Je}var Xt=new f(function(rn,Pn){var jt=l.open(F.name,Je);jt.onerror=function(xr){var Ba=jt.result;Ba.close(),Pn(xr)},jt.onupgradeneeded=function(){var xr=jt.result;xr.deleteObjectStore(F.storeName)},jt.onsuccess=function(){var xr=jt.result;xr.close(),rn(xr)}});return Xt.then(function(rn){Xe.db=rn;for(var Pn=0;Pn<st.length;Pn++){var jt=st[Pn];jt._dbInfo.db=rn,D(jt._dbInfo)}}).catch(function(rn){throw(H(F,rn)||f.resolve()).catch(function(){}),rn})}}):_e=Le.then(function(Ge){Y(F);var Je=v[F.name],Xe=Je.forages;Ge.close();for(var st=0;st<Xe.length;st++){var _t=Xe[st];_t._dbInfo.db=null}var Bt=new f(function(Xt,rn){var Pn=l.deleteDatabase(F.name);Pn.onerror=function(){var jt=Pn.result;jt&&jt.close(),rn(Pn.error)},Pn.onblocked=function(){console.warn('dropInstance blocked for database "'+F.name+'" until all open connections are closed')},Pn.onsuccess=function(){var jt=Pn.result;jt&&jt.close(),Xt(jt)}});return Bt.then(function(Xt){Je.db=Xt;for(var rn=0;rn<Xe.length;rn++){var Pn=Xe[rn];D(Pn._dbInfo)}}).catch(function(Xt){throw(H(F,Xt)||f.resolve()).catch(function(){}),Xt})})}return h(_e,ae),_e}var ne={_driver:"asyncStorage",_initStorage:ce,_support:u(),iterate:Pe,getItem:Ce,setItem:Me,removeItem:B,clear:J,length:re,key:De,keys:Ye,dropInstance:He};function he(){return typeof openDatabase=="function"}var Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue="~~local_forage_type~",We=/^~~local_forage_type~([^~]+)~/,Ke="__lfsc__:",fe=Ke.length,Fe="arbf",qe="blob",Oe="si08",At="ui08",dn="uic8",Ct="si16",tn="si32",O="ur16",C="ui32",j="fl32",q="fl64",de=fe+Fe.length,je=Object.prototype.toString;function Be(F){var ae=F.length*.75,K=F.length,le,_e=0,pe,Le,Ge,Je;F[F.length-1]==="="&&(ae--,F[F.length-2]==="="&&ae--);var Xe=new ArrayBuffer(ae),st=new Uint8Array(Xe);for(le=0;le<K;le+=4)pe=Se.indexOf(F[le]),Le=Se.indexOf(F[le+1]),Ge=Se.indexOf(F[le+2]),Je=Se.indexOf(F[le+3]),st[_e++]=pe<<2|Le>>4,st[_e++]=(Le&15)<<4|Ge>>2,st[_e++]=(Ge&3)<<6|Je&63;return Xe}function Nt(F){var ae=new Uint8Array(F),K="",le;for(le=0;le<ae.length;le+=3)K+=Se[ae[le]>>2],K+=Se[(ae[le]&3)<<4|ae[le+1]>>4],K+=Se[(ae[le+1]&15)<<2|ae[le+2]>>6],K+=Se[ae[le+2]&63];return ae.length%3===2?K=K.substring(0,K.length-1)+"=":ae.length%3===1&&(K=K.substring(0,K.length-2)+"=="),K}function Vt(F,ae){var K="";if(F&&(K=je.call(F)),F&&(K==="[object ArrayBuffer]"||F.buffer&&je.call(F.buffer)==="[object ArrayBuffer]")){var le,_e=Ke;F instanceof ArrayBuffer?(le=F,_e+=Fe):(le=F.buffer,K==="[object Int8Array]"?_e+=Oe:K==="[object Uint8Array]"?_e+=At:K==="[object Uint8ClampedArray]"?_e+=dn:K==="[object Int16Array]"?_e+=Ct:K==="[object Uint16Array]"?_e+=O:K==="[object Int32Array]"?_e+=tn:K==="[object Uint32Array]"?_e+=C:K==="[object Float32Array]"?_e+=j:K==="[object Float64Array]"?_e+=q:ae(new Error("Failed to get type for BinaryArray"))),ae(_e+Nt(le))}else if(K==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Le=Ue+F.type+"~"+Nt(this.result);ae(Ke+qe+Le)},pe.readAsArrayBuffer(F)}else try{ae(JSON.stringify(F))}catch(Le){console.error("Couldn't convert value into a JSON string: ",F),ae(null,Le)}}function it(F){if(F.substring(0,fe)!==Ke)return JSON.parse(F);var ae=F.substring(de),K=F.substring(fe,de),le;if(K===qe&&We.test(ae)){var _e=ae.match(We);le=_e[1],ae=ae.substring(_e[0].length)}var pe=Be(ae);switch(K){case Fe:return pe;case qe:return c([pe],{type:le});case Oe:return new Int8Array(pe);case At:return new Uint8Array(pe);case dn:return new Uint8ClampedArray(pe);case Ct:return new Int16Array(pe);case O:return new Uint16Array(pe);case tn:return new Int32Array(pe);case C:return new Uint32Array(pe);case j:return new Float32Array(pe);case q:return new Float64Array(pe);default:throw new Error("Unkown type: "+K)}}var Yt={serialize:Vt,deserialize:it,stringToBuffer:Be,bufferToString:Nt};function Ot(F,ae,K,le){F.executeSql("CREATE TABLE IF NOT EXISTS "+ae.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],K,le)}function Gi(F){var ae=this,K={db:null};if(F)for(var le in F)K[le]=typeof F[le]!="string"?F[le].toString():F[le];var _e=new f(function(pe,Le){try{K.db=openDatabase(K.name,String(K.version),K.description,K.size)}catch(Ge){return Le(Ge)}K.db.transaction(function(Ge){Ot(Ge,K,function(){ae._dbInfo=K,pe()},function(Je,Xe){Le(Xe)})},Le)});return K.serializer=Yt,_e}function ot(F,ae,K,le,_e,pe){F.executeSql(K,le,_e,function(Le,Ge){Ge.code===Ge.SYNTAX_ERR?Le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ae.storeName],function(Je,Xe){Xe.rows.length?pe(Je,Ge):Ot(Je,ae,function(){Je.executeSql(K,le,_e,pe)},pe)},pe):pe(Le,Ge)},pe)}function xo(F,ae){var K=this;F=b(F);var le=new f(function(_e,pe){K.ready().then(function(){var Le=K._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"SELECT * FROM "+Le.storeName+" WHERE key = ? LIMIT 1",[F],function(Je,Xe){var st=Xe.rows.length?Xe.rows.item(0).value:null;st&&(st=Le.serializer.deserialize(st)),_e(st)},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(le,ae),le}function So(F,ae){var K=this,le=new f(function(_e,pe){K.ready().then(function(){var Le=K._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"SELECT * FROM "+Le.storeName,[],function(Je,Xe){for(var st=Xe.rows,_t=st.length,Bt=0;Bt<_t;Bt++){var Xt=st.item(Bt),rn=Xt.value;if(rn&&(rn=Le.serializer.deserialize(rn)),rn=F(rn,Xt.key,Bt+1),rn!==void 0){_e(rn);return}}_e()},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(le,ae),le}function Eo(F,ae,K,le){var _e=this;F=b(F);var pe=new f(function(Le,Ge){_e.ready().then(function(){ae===void 0&&(ae=null);var Je=ae,Xe=_e._dbInfo;Xe.serializer.serialize(ae,function(st,_t){_t?Ge(_t):Xe.db.transaction(function(Bt){ot(Bt,Xe,"INSERT OR REPLACE INTO "+Xe.storeName+" (key, value) VALUES (?, ?)",[F,st],function(){Le(Je)},function(Xt,rn){Ge(rn)})},function(Bt){if(Bt.code===Bt.QUOTA_ERR){if(le>0){Le(Eo.apply(_e,[F,Je,K,le-1]));return}Ge(Bt)}})})}).catch(Ge)});return h(pe,K),pe}function es(F,ae,K){return Eo.apply(this,[F,ae,K,1])}function Yi(F,ae){var K=this;F=b(F);var le=new f(function(_e,pe){K.ready().then(function(){var Le=K._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"DELETE FROM "+Le.storeName+" WHERE key = ?",[F],function(){_e()},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(le,ae),le}function Bs(F){var ae=this,K=new f(function(le,_e){ae.ready().then(function(){var pe=ae._dbInfo;pe.db.transaction(function(Le){ot(Le,pe,"DELETE FROM "+pe.storeName,[],function(){le()},function(Ge,Je){_e(Je)})})}).catch(_e)});return h(K,F),K}function W(F){var ae=this,K=new f(function(le,_e){ae.ready().then(function(){var pe=ae._dbInfo;pe.db.transaction(function(Le){ot(Le,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(Ge,Je){var Xe=Je.rows.item(0).c;le(Xe)},function(Ge,Je){_e(Je)})})}).catch(_e)});return h(K,F),K}function ee(F,ae){var K=this,le=new f(function(_e,pe){K.ready().then(function(){var Le=K._dbInfo;Le.db.transaction(function(Ge){ot(Ge,Le,"SELECT key FROM "+Le.storeName+" WHERE id = ? LIMIT 1",[F+1],function(Je,Xe){var st=Xe.rows.length?Xe.rows.item(0).key:null;_e(st)},function(Je,Xe){pe(Xe)})})}).catch(pe)});return h(le,ae),le}function Ze(F){var ae=this,K=new f(function(le,_e){ae.ready().then(function(){var pe=ae._dbInfo;pe.db.transaction(function(Le){ot(Le,pe,"SELECT key FROM "+pe.storeName,[],function(Ge,Je){for(var Xe=[],st=0;st<Je.rows.length;st++)Xe.push(Je.rows.item(st).key);le(Xe)},function(Ge,Je){_e(Je)})})}).catch(_e)});return h(K,F),K}function rt(F){return new f(function(ae,K){F.transaction(function(le){le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(_e,pe){for(var Le=[],Ge=0;Ge<pe.rows.length;Ge++)Le.push(pe.rows.item(Ge).name);ae({db:F,storeNames:Le})},function(_e,pe){K(pe)})},function(le){K(le)})})}function gt(F,ae){ae=y.apply(this,arguments);var K=this.config();F=typeof F!="function"&&F||{},F.name||(F.name=F.name||K.name,F.storeName=F.storeName||K.storeName);var le=this,_e;return F.name?_e=new f(function(pe){var Le;F.name===K.name?Le=le._dbInfo.db:Le=openDatabase(F.name,"","",0),F.storeName?pe({db:Le,storeNames:[F.storeName]}):pe(rt(Le))}).then(function(pe){return new f(function(Le,Ge){pe.db.transaction(function(Je){function Xe(Xt){return new f(function(rn,Pn){Je.executeSql("DROP TABLE IF EXISTS "+Xt,[],function(){rn()},function(jt,xr){Pn(xr)})})}for(var st=[],_t=0,Bt=pe.storeNames.length;_t<Bt;_t++)st.push(Xe(pe.storeNames[_t]));f.all(st).then(function(){Le()}).catch(function(Xt){Ge(Xt)})},function(Je){Ge(Je)})})}):_e=f.reject("Invalid arguments"),h(_e,ae),_e}var Pt={_driver:"webSQLStorage",_initStorage:Gi,_support:he(),iterate:So,getItem:xo,setItem:es,removeItem:Yi,clear:Bs,length:W,key:ee,keys:Ze,dropInstance:gt};function Jt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(F){return!1}}function ts(F,ae){var K=F.name+"/";return F.storeName!==ae.storeName&&(K+=F.storeName+"/"),K}function br(){var F="_localforage_support_test";try{return localStorage.setItem(F,!0),localStorage.removeItem(F),!1}catch(ae){return!0}}function Xi(){return!br()||localStorage.length>0}function ko(F){var ae=this,K={};if(F)for(var le in F)K[le]=F[le];return K.keyPrefix=ts(F,ae._defaultConfig),Xi()?(ae._dbInfo=K,K.serializer=Yt,f.resolve()):f.reject()}function Fs(F){var ae=this,K=ae.ready().then(function(){for(var le=ae._dbInfo.keyPrefix,_e=localStorage.length-1;_e>=0;_e--){var pe=localStorage.key(_e);pe.indexOf(le)===0&&localStorage.removeItem(pe)}});return h(K,F),K}function zr(F,ae){var K=this;F=b(F);var le=K.ready().then(function(){var _e=K._dbInfo,pe=localStorage.getItem(_e.keyPrefix+F);return pe&&(pe=_e.serializer.deserialize(pe)),pe});return h(le,ae),le}function Hr(F,ae){var K=this,le=K.ready().then(function(){for(var _e=K._dbInfo,pe=_e.keyPrefix,Le=pe.length,Ge=localStorage.length,Je=1,Xe=0;Xe<Ge;Xe++){var st=localStorage.key(Xe);if(st.indexOf(pe)===0){var _t=localStorage.getItem(st);if(_t&&(_t=_e.serializer.deserialize(_t)),_t=F(_t,st.substring(Le),Je++),_t!==void 0)return _t}}});return h(le,ae),le}function cr(F,ae){var K=this,le=K.ready().then(function(){var _e=K._dbInfo,pe;try{pe=localStorage.key(F)}catch(Le){pe=null}return pe&&(pe=pe.substring(_e.keyPrefix.length)),pe});return h(le,ae),le}function pi(F){var ae=this,K=ae.ready().then(function(){for(var le=ae._dbInfo,_e=localStorage.length,pe=[],Le=0;Le<_e;Le++){var Ge=localStorage.key(Le);Ge.indexOf(le.keyPrefix)===0&&pe.push(Ge.substring(le.keyPrefix.length))}return pe});return h(K,F),K}function Ji(F){var ae=this,K=ae.keys().then(function(le){return le.length});return h(K,F),K}function Wn(F,ae){var K=this;F=b(F);var le=K.ready().then(function(){var _e=K._dbInfo;localStorage.removeItem(_e.keyPrefix+F)});return h(le,ae),le}function _r(F,ae,K){var le=this;F=b(F);var _e=le.ready().then(function(){ae===void 0&&(ae=null);var pe=ae;return new f(function(Le,Ge){var Je=le._dbInfo;Je.serializer.serialize(ae,function(Xe,st){if(st)Ge(st);else try{localStorage.setItem(Je.keyPrefix+F,Xe),Le(pe)}catch(_t){(_t.name==="QuotaExceededError"||_t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ge(_t),Ge(_t)}})})});return h(_e,K),_e}function Qi(F,ae){if(ae=y.apply(this,arguments),F=typeof F!="function"&&F||{},!F.name){var K=this.config();F.name=F.name||K.name,F.storeName=F.storeName||K.storeName}var le=this,_e;return F.name?_e=new f(function(pe){F.storeName?pe(ts(F,le._defaultConfig)):pe(F.name+"/")}).then(function(pe){for(var Le=localStorage.length-1;Le>=0;Le--){var Ge=localStorage.key(Le);Ge.indexOf(pe)===0&&localStorage.removeItem(Ge)}}):_e=f.reject("Invalid arguments"),h(_e,ae),_e}var Fl={_driver:"localStorageWrapper",_initStorage:ko,_support:Jt(),iterate:Hr,getItem:zr,setItem:_r,removeItem:Wn,clear:Fs,length:Ji,key:cr,keys:pi,dropInstance:Qi},Da=function(ae,K){return ae===K||typeof ae=="number"&&typeof K=="number"&&isNaN(ae)&&isNaN(K)},fn=function(ae,K){for(var le=ae.length,_e=0;_e<le;){if(Da(ae[_e],K))return!0;_e++}return!1},Ii=Array.isArray||function(F){return Object.prototype.toString.call(F)==="[object Array]"},dr={},La={},Ur={INDEXEDDB:ne,WEBSQL:Pt,LOCALSTORAGE:Fl},zs=[Ur.INDEXEDDB._driver,Ur.WEBSQL._driver,Ur.LOCALSTORAGE._driver],Co=["dropInstance"],ns=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Co),Pi={description:"",driver:zs.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function zl(F,ae){F[ae]=function(){var K=arguments;return F.ready().then(function(){return F[ae].apply(F,K)})}}function jo(){for(var F=1;F<arguments.length;F++){var ae=arguments[F];if(ae)for(var K in ae)ae.hasOwnProperty(K)&&(Ii(ae[K])?arguments[0][K]=ae[K].slice():arguments[0][K]=ae[K])}return arguments[0]}var Hl=function(){function F(ae){s(this,F);for(var K in Ur)if(Ur.hasOwnProperty(K)){var le=Ur[K],_e=le._driver;this[K]=_e,dr[_e]||this.defineDriver(le)}this._defaultConfig=jo({},Pi),this._config=jo({},this._defaultConfig,ae),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return F.prototype.config=function(K){if((typeof K>"u"?"undefined":o(K))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var le in K){if(le==="storeName"&&(K[le]=K[le].replace(/\W/g,"_")),le==="version"&&typeof K[le]!="number")return new Error("Database version must be a number.");this._config[le]=K[le]}return"driver"in K&&K.driver?this.setDriver(this._config.driver):!0}else return typeof K=="string"?this._config[K]:this._config},F.prototype.defineDriver=function(K,le,_e){var pe=new f(function(Le,Ge){try{var Je=K._driver,Xe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!K._driver){Ge(Xe);return}for(var st=ns.concat("_initStorage"),_t=0,Bt=st.length;_t<Bt;_t++){var Xt=st[_t],rn=!fn(Co,Xt);if((rn||K[Xt])&&typeof K[Xt]!="function"){Ge(Xe);return}}var Pn=function(){for(var Ba=function(No){return function(){var eh=new Error("Method "+No+" is not implemented by the current driver"),vc=f.reject(eh);return h(vc,arguments[arguments.length-1]),vc}},mc=0,Wr=Co.length;mc<Wr;mc++){var Ao=Co[mc];K[Ao]||(K[Ao]=Ba(Ao))}};Pn();var jt=function(Ba){dr[Je]&&console.info("Redefining LocalForage driver: "+Je),dr[Je]=K,La[Je]=Ba,Le()};"_support"in K?K._support&&typeof K._support=="function"?K._support().then(jt,Ge):jt(!!K._support):jt(!0)}catch(xr){Ge(xr)}});return p(pe,le,_e),pe},F.prototype.driver=function(){return this._driver||null},F.prototype.getDriver=function(K,le,_e){var pe=dr[K]?f.resolve(dr[K]):f.reject(new Error("Driver not found."));return p(pe,le,_e),pe},F.prototype.getSerializer=function(K){var le=f.resolve(Yt);return p(le,K),le},F.prototype.ready=function(K){var le=this,_e=le._driverSet.then(function(){return le._ready===null&&(le._ready=le._initDriver()),le._ready});return p(_e,K,K),_e},F.prototype.setDriver=function(K,le,_e){var pe=this;Ii(K)||(K=[K]);var Le=this._getSupportedDrivers(K);function Ge(){pe._config.driver=pe.driver()}function Je(_t){return pe._extend(_t),Ge(),pe._ready=pe._initStorage(pe._config),pe._ready}function Xe(_t){return function(){var Bt=0;function Xt(){for(;Bt<_t.length;){var rn=_t[Bt];return Bt++,pe._dbInfo=null,pe._ready=null,pe.getDriver(rn).then(Je).catch(Xt)}Ge();var Pn=new Error("No available storage method found.");return pe._driverSet=f.reject(Pn),pe._driverSet}return Xt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var _t=Le[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(_t).then(function(Bt){pe._driver=Bt._driver,Ge(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=Xe(Le)})}).catch(function(){Ge();var _t=new Error("No available storage method found.");return pe._driverSet=f.reject(_t),pe._driverSet}),p(this._driverSet,le,_e),this._driverSet},F.prototype.supports=function(K){return!!La[K]},F.prototype._extend=function(K){jo(this,K)},F.prototype._getSupportedDrivers=function(K){for(var le=[],_e=0,pe=K.length;_e<pe;_e++){var Le=K[_e];this.supports(Le)&&le.push(Le)}return le},F.prototype._wrapLibraryMethodsWithReady=function(){for(var K=0,le=ns.length;K<le;K++)zl(this,ns[K])},F.prototype.createInstance=function(K){return new F(K)},F}(),Ht=new Hl;r.exports=Ht},{3:3}]},{},[4])(4)})})(uT);var N9=uT.exports;const vg=Os(N9),kp={SecureStorage:"ionicSecureStorage",IndexedDB:vg.INDEXEDDB,LocalStorage:vg.LOCALSTORAGE},u2={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[kp.SecureStorage,kp.IndexedDB,kp.LocalStorage]};let R9=class{constructor(t=u2){this._db=null,this._secureStorageDriver=null;const n=Object.assign({},u2,t||{});this._config=n}async create(){const t=vg.createInstance(this._config);return this._db=t,await t.setDriver(this._config.driverOrder||[]),this}async defineDriver(t){return t._driver===kp.SecureStorage&&(this._secureStorageDriver=t),vg.defineDriver(t)}get driver(){var t;return((t=this._db)===null||t===void 0?void 0:t.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(t){return this.assertDb().getItem(t)}set(t,n){return this.assertDb().setItem(t,n)}remove(t){return this.assertDb().removeItem(t)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(t){return this.assertDb().iterate(t)}setEncryptionKey(t){var n;if(this._secureStorageDriver)(n=this._secureStorageDriver)===null||n===void 0||n.setEncryptionKey(t);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}};class Dm{constructor(t){Io(this,"store");Io(this,"isCreated",!1);this.store=new R9({name:t}),this.createStorage()}async createStorage(){await this.store.create(),this.isCreated=!0}get(t){return this.store.get(t)}set(t,n){return this.store.set(t,n)}remove(t){return this.store.remove(t)}clear(){return this.store.clear()}keys(){return this.store.keys()}length(){return this.store.length()}forEach(t){return this.store.forEach(t)}}const cT=new Dm("settings"),yr=new Dm("auth"),En=new Dm("sync"),c2=new Dm("misc"),Tr=async()=>{const e=await yr.get("deviceId")||"none";return"".concat(e,"-").concat(lT())};class Jc extends Error{}Jc.prototype.name="InvalidTokenError";function T9(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function I9(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return T9(t)}catch(n){return atob(t)}}function rc(e,t){if(typeof e!="string")throw new Jc("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Jc("Invalid token specified: missing part #".concat(n+1));let i;try{i=I9(r)}catch(o){throw new Jc("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(o.message,")"))}try{return JSON.parse(i)}catch(o){throw new Jc("Invalid token specified: invalid json for part #".concat(n+1," (").concat(o.message,")"))}}const P9={isLoggedIn:!1,user:null,synced_characters:[]},nr=Ta(P9),O9=async()=>{const e=await yr.get("token");if(e){const t=rc(e);nr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characers||[]})}},Lm=async e=>{await yr.set("token",e);const t=rc(e);return console.log("decoded",t),nr.set({isLoggedIn:!0,user:t,synced_characters:t.synced_characers||[]}),t},d2=e=>{nr.set(t=>({...t,synced_characters:e})),En.set("synced_characters",e)};O9();const pa=async e=>{const t=await Promise.all(xt.tables.map(n=>n.get(e)));for(let n=0;n<t.length;n++)if(t[n])return!1;return!0},Ww=async(e,t)=>{try{const{user:n}=nr.get(),r=n?n.id:"none";let i=t!=null?t:await Tr();for(;!await pa(i);)i=await Tr();const o={...e,user_id:r,local_id:i,id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return await xt.versions.put(o),o}catch(n){console.log("Error creating versioned resource:",n)}};function Un(e){const[t]=R.useMemo(()=>(e==null?void 0:e.split("|"))||[""],[e]),[n,r]=R.useState(void 0);if(R.useEffect(()=>{(async()=>{let o=await xt.versions.get(e!=null?e:"");if(o)return r(o);const s=await xt.versions.get(t);if(!s)return r(void 0);r(await Ww(s,e!=null?e:""))})()},[e,t,r]),!!n)return{...n,data:n==null?void 0:n.data}}function $9({id:e,data:{spreadType:t}}){const{updateNodeData:n}=un(),r=ln.useValue(),i=Un(r.versionId);return d.jsxs(en,{title:"Create Object From Type",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(dt,{id:"type-".concat(e),label:"Type",value:t.name,onChange:o=>n(e,{spreadType:i==null?void 0:i.data.types.find(s=>s.name===o)}),children:i==null?void 0:i.data.types.map(o=>d.jsx("option",{value:o.name,children:o.name},o.name))}),t.properties.map(o=>d.jsxs("p",{style:{marginTop:5},children:["(",o.typeData.type,o.typeData.isArray?"[]":"",") ",o.key]},o.key)),d.jsxs("p",{style:{textAlign:"right"},children:["(",t.name,") output"]}),t.properties.map((o,s)=>d.jsx(Ne,{type:"target",id:"".concat(o.key,"-").concat(o.typeData.type).concat(o.typeData.isArray?"(Array)":""),position:ye.Left,style:{top:129+26*s,bottom:"auto"}},o.key)),d.jsx(Ne,{type:"source",id:"output-".concat(t.name),position:ye.Right,style:{top:129+24*t.properties.length,bottom:"auto"}})]})}const M9=R.memo($9),D9=({id:e,data:{params:t}})=>{const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId);return R.useEffect(()=>{let s={};for(let a=0;a<t.length;a++){const l=t[a];s["".concat(l.name,"-").concat(l.type)]=o==null?void 0:o.data.types.find(u=>u.name===l.type)}n(e,{outputs:s}),r(e)},[t,o]),d.jsxs(en,{title:"Entry",children:[d.jsx(Ne,{type:"source",id:"start-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t.map(s=>d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",s.type,s.isArray?"[]":"",") ",s.name]},s.name)),t.map((s,a)=>d.jsx(Ne,{type:"source",id:"".concat(s.name,"-").concat(s.type),position:ye.Right,style:{top:85+25*a,bottom:"auto"}},s.name))]})},L9=R.memo(D9);function dT(e,t){var s;if(!e||!t)return"unknown";const n=t.split("/"),r=n.pop();if(!r)return"unknown";const i=n.reduce((a,l)=>{if(a)return Array.isArray(a)?(a=a.find(u=>u.name===l),a||void 0):a[l]},e);if(!i)return;const o=(s=i._type)==null?void 0:s.properties.find(a=>a.key===r);return i._type&&o&&o.typeData.type?o.typeData.isArray?"".concat(o.typeData.type,"(Array)"):o.typeData.type:"unknown"}const Kt=R.forwardRef(({id:e,label:t,placeholder:n,value:r,onChange:i,isValid:o,errorMessage:s,style:a,minNumber:l,maxNumber:u,type:c="text"},f)=>{const h=o?"":"text-red-700 dark:text-red-500",p=o?"border border-neutral-600":"bg-red-50 border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500",b=o?"":"text-red-600 dark:text-red-500";return d.jsxs("div",{className:"mb-6",style:a,ref:f,children:[d.jsx("label",{htmlFor:e,className:"".concat(h," block mb-2 text-sm font-medium"),children:t}),d.jsx("input",{id:e,type:c,value:r,min:l,max:u,onChange:y=>i(y.target.value),placeholder:n,className:"".concat(p," text-sm rounded-lg block w-full p-2.5 dark:bg-neutral-700 dark:placeholder:text-neutral-300")}),d.jsx("p",{className:"".concat(b," mt-2 text-sm"),children:o?"":s})]})});function B9({id:e,data:{path:t,type:n,outputs:r}}){const{updateNodeData:i}=un(),o=Br(),s=ln.useValue(),a=Un(s.versionId),l=R.useCallback(u=>{const c=dT((a==null?void 0:a.data.defaultCharacterData)||{},u),f=c.split("(")[0];i(e,{path:u,type:c,outputs:{["output-".concat(c)]:a==null?void 0:a.data.types.find(h=>h.name===f)}}),o(e)},[e,i,o,a]);return d.jsxs(en,{title:"Get Character Data",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"get-character-".concat(e),label:"Path",value:t,onChange:l,isValid:!0,errorMessage:""}),d.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?d.jsx(Ne,{type:"source",id:"output-".concat(n),position:ye.Right,style:{bottom:20,top:"auto"}}):null]})}const F9=R.memo(B9);function z9({id:e,data:{chosenState:t}}){const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId),s=bo(),a=R.useMemo(()=>s.filter(c=>c.source!==e).map(c=>c.source),[s]),l=Mm(a),u=R.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(c=>c.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(c=>c.name===i.creatorPage)},[o,i]);return R.useEffect(()=>{let c={};t||(t=(u==null?void 0:u.state[0])||null),t&&(c["".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":"")]=(o==null?void 0:o.data.types.find(f=>f.name===t.type.type))||null),n(e,{chosenState:t,outputs:c}),r(e)},[s,l,o,u]),d.jsxs(en,{title:"Get Page State",children:[d.jsx(dt,{id:"set-state-".concat(e),label:"State to grab",value:(t==null?void 0:t.name)||"",onChange:c=>{const f=u==null?void 0:u.state.find(h=>h.name===c);n(e,{chosenState:f,outputs:{["".concat(f.name,"-").concat(f.type.type).concat(f.type.isArray?"(Array)":"")]:o==null?void 0:o.data.types.find(h=>h.name===f.type.type)}}),r(e)},children:u==null?void 0:u.state.map(c=>d.jsx("option",{value:c.name,children:c.name},c.name))}),t?d.jsxs("p",{className:"text-right",children:[t.type.type,t.type.isArray?"[]":""]}):d.jsx("p",{className:"text-right",children:"select a page state to get."}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t&&d.jsx(Ne,{type:"source",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ye.Right,style:{top:122,bottom:"auto"}})]})}const H9=R.memo(z9);function U9({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=un(),i=Br(),o=ln.useValue(),s=Un(o.versionId),a=R.useCallback(l=>{var f;const u=(f=s==null?void 0:s.data.data.find(h=>h.name===l))==null?void 0:f.typeData,c=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:c}),i(e)},[e,r,i]);return R.useEffect(()=>{var f,h;if(t)return;const l=(f=s==null?void 0:s.data.data[0])==null?void 0:f.name,u=(h=s==null?void 0:s.data.data[0])==null?void 0:h.typeData,c=u?"".concat(u.type).concat(u.isArray?"(Array)":""):"unknown";r(e,{path:l,type:c}),i(e)},[]),d.jsxs(en,{title:"Get System Data",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(dt,{id:"get-system-".concat(e),label:"Data",value:t,onChange:a,children:s==null?void 0:s.data.data.map(l=>d.jsx("option",{value:l.name,children:l.name}))}),d.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?d.jsx(Ne,{type:"source",id:"output-".concat(n),position:ye.Right,style:{bottom:20,top:"auto"}}):null]})}const W9=R.memo(U9),V9=({id:e,data:{type:t,title:n,inputType:r}})=>{const{updateNodeData:i}=un(),o=Br();return bo({handleType:"target",handleId:"data-any",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];l&&(i(e,{inputType:l}),o(e))},onDisconnect:()=>{i(e,{inputType:"unknown"}),o(e)}}),d.jsxs(en,{title:"Open Modal",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsxs(dt,{id:"modal-type",label:"Modal Type",value:t,onChange:s=>i(e,{type:s}),children:[d.jsx("option",{value:"edit_object",children:"Edit Object"}),d.jsx("option",{value:"edit_number",children:"Edit Number"}),d.jsx("option",{value:"edit_string",children:"Edit String"})]}),d.jsx(Kt,{id:"modal-title",label:"Modal Title",value:n,onChange:s=>i(e,{title:s}),isValid:!0,errorMessage:""}),d.jsxs("p",{style:{marginTop:10},children:["input data (",r,")"]}),d.jsx(Ne,{type:"target",id:"data-any",position:ye.Left,style:{top:145,bottom:"auto"}}),d.jsx("p",{style:{textAlign:"right"},children:"on save"}),d.jsx(Ne,{type:"source",id:"save-node",position:ye.Right,style:{top:168,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"right"},children:["data (",r,")"]}),d.jsx(Ne,{type:"source",id:"newdata-".concat(r),position:ye.Right,style:{top:192,bottom:"auto"}}),d.jsx("p",{style:{marginTop:10,textAlign:"right"},children:"on delete"}),d.jsx(Ne,{type:"source",id:"delete-node",position:ye.Right,style:{top:222,bottom:"auto"}})]})},q9=R.memo(V9);function K9({id:e,data:{param:t,inputType:n}}){const{updateNodeData:r}=un(),i=Br(),o="".concat(t.name,"-").concat(t.isArray?"array":t.type);return bo({handleType:"target",handleId:o,onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(r(e,{inputType:u}),i(e))},onDisconnect:()=>{r(e,{inputType:"any"}),i(e)}}),d.jsxs(en,{title:"Output",children:[d.jsx(Ne,{type:"target",id:"end-node",position:ye.Left,style:{top:28,bottom:"auto"}}),d.jsx("p",{style:{textAlign:"left",marginTop:5},children:t.isArray?"".concat(n).concat(t.isArray?"(Array)":""):t.type}),d.jsx(Ne,{type:"target",id:o,position:ye.Left,style:{top:85,bottom:"auto"}})]})}const G9=R.memo(K9);var Zt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),s={};for(const a of o)s[a]=i[a];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},e.find=(i,o)=>{for(const s of i)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?"'".concat(s,"'"):s).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Zt||(Zt={}));var Vw;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Vw||(Vw={}));const yt=Zt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fs=e=>{switch(typeof e){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(e)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(e)?yt.array:e===null?yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yt.promise:typeof Map<"u"&&e instanceof Map?yt.map:typeof Set<"u"&&e instanceof Set?yt.set:typeof Date<"u"&&e instanceof Date?yt.date:yt.object;default:return yt.unknown}},Qe=Zt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Y9=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ei extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let a=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(s))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}static assert(t){if(!(t instanceof Ei))throw new Error("Not a ZodError: ".concat(t))}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ei.create=e=>new Ei(e);const zu=(e,t)=>{let n;switch(e.code){case Qe.invalid_type:e.received===yt.undefined?n="Required":n="Expected ".concat(e.expected,", received ").concat(e.received);break;case Qe.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,Zt.jsonStringifyReplacer));break;case Qe.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(Zt.joinValues(e.keys,", "));break;case Qe.invalid_union:n="Invalid input";break;case Qe.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(Zt.joinValues(e.options));break;case Qe.invalid_enum_value:n="Invalid enum value. Expected ".concat(Zt.joinValues(e.options),", received '").concat(e.received,"'");break;case Qe.invalid_arguments:n="Invalid function arguments";break;case Qe.invalid_return_type:n="Invalid function return type";break;case Qe.invalid_date:n="Invalid date";break;case Qe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),typeof e.validation.position=="number"&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):Zt.assertNever(e.validation):e.validation!=="regex"?n="Invalid ".concat(e.validation):n="Invalid";break;case Qe.too_small:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):n="Invalid input";break;case Qe.too_big:e.type==="array"?n="Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):e.type==="string"?n="String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):e.type==="number"?n="Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="bigint"?n="BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):e.type==="date"?n="Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):n="Invalid input";break;case Qe.custom:n="Invalid input";break;case Qe.invalid_intersection_types:n="Intersection results could not be merged";break;case Qe.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case Qe.not_finite:n="Number must be finite";break;default:n=t.defaultError,Zt.assertNever(e)}return{message:n}};let fT=zu;function X9(e){fT=e}function wg(){return fT}const bg=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}},J9=[];function ht(e,t){const n=wg(),r=bg({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zu?void 0:zu].filter(i=>!!i)});e.common.issues.push(r)}class Lr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return Tt;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const o=await i.key,s=await i.value;r.push({key:o,value:s})}return Lr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Tt;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:t.value,value:r}}}const Tt=Object.freeze({status:"aborted"}),du=e=>({status:"dirty",value:e}),Xr=e=>({status:"valid",value:e}),qw=e=>e.status==="aborted",Kw=e=>e.status==="dirty",wl=e=>e.status==="valid",Qd=e=>typeof Promise<"u"&&e instanceof Promise;function _g(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function hT(e,t,n,r,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var Et;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Et||(Et={}));var Qc,Zc;class Ko{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const f2=(e,t)=>{if(wl(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ei(e.common.issues);return this._error=n,this._error}}};function Lt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(s,a)=>{var l,u;const{message:c}=e;return s.code==="invalid_enum_value"?{message:c!=null?c:a.defaultError}:typeof a.data>"u"?{message:(l=c!=null?c:r)!==null&&l!==void 0?l:a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c!=null?c:n)!==null&&u!==void 0?u:a.defaultError}},description:i}}class zt{get description(){return this._def.description}_getType(t){return fs(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:fs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lr,ctx:{common:t.parent.common,data:t.data,parsedType:fs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Qd(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:fs(t)},o=this._parseSync({data:t,path:i.path,parent:i});return f2(i,o)}"~validate"(t){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:fs(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:i});return wl(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(o=>wl(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:fs(t)},i=this._parse({data:t,path:r.path,parent:r}),o=await(Qd(i)?i:Promise.resolve(i));return f2(r,o)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const s=t(i),a=()=>o.addIssue({code:Qe.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new yo({schema:this,typeName:Rt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ho.create(this,this._def)}nullable(){return xa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return po.create(this)}promise(){return Uu.create(this,this._def)}or(t){return nf.create([this,t],this._def)}and(t){return rf.create(this,t,this._def)}transform(t){return new yo({...Lt(this._def),schema:this,typeName:Rt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new uf({...Lt(this._def),innerType:this,defaultValue:n,typeName:Rt.ZodDefault})}brand(){return new xx({typeName:Rt.ZodBranded,type:this,...Lt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new cf({...Lt(this._def),innerType:this,catchValue:n,typeName:Rt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Wf.create(this,t)}readonly(){return df.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Q9=/^c[^\s-]{8,}$/i,Z9=/^[0-9a-z]+$/,ez=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nz=/^[a-z0-9_-]{21}$/i,rz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,iz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,oz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let N0;const az=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fz=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pT="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hz=new RegExp("^".concat(pT,"$"));function gT(e){let t="[0-5]\\d";e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):e.precision==null&&(t="".concat(t,"(\\.\\d+)?"));const n=e.precision?"+":"?";return"([01]\\d|2[0-3]):[0-5]\\d(:".concat(t,")").concat(n)}function pz(e){return new RegExp("^".concat(gT(e),"$"))}function mT(e){let t="".concat(pT,"T").concat(gT(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}function gz(e,t){return!!((t==="v4"||!t)&&az.test(e)||(t==="v6"||!t)&&uz.test(e))}function mz(e,t){if(!rz.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch(n){return!1}}function yz(e,t){return!!((t==="v4"||!t)&&lz.test(e)||(t==="v6"||!t)&&cz.test(e))}class co extends zt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yt.string){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_type,expected:yt.string,received:o.parsedType}),Tt}const r=new Lr;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,a=t.data.length<o.value;(s||a)&&(i=this._getOrReturnCtx(t,i),s?ht(i,{code:Qe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&ht(i,{code:Qe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")oz.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"email",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")N0||(N0=new RegExp(sz,"u")),N0.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"emoji",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")tz.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"uuid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")nz.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"nanoid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Q9.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"cuid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Z9.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"cuid2",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")ez.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"ulid",code:Qe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch(s){i=this._getOrReturnCtx(t,i),ht(i,{validation:"url",code:Qe.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"regex",code:Qe.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?mT(o).test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?hz.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?pz(o).test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?iz.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"duration",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?gz(t.data,o.version)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"ip",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?mz(t.data,o.alg)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"jwt",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?yz(t.data,o.version)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"cidr",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?dz.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"base64",code:Qe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?fz.test(t.data)||(i=this._getOrReturnCtx(t,i),ht(i,{validation:"base64url",code:Qe.invalid_string,message:o.message}),r.dirty()):Zt.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Qe.invalid_string,...Et.errToObj(r)})}_addCheck(t){return new co({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Et.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Et.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Et.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Et.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Et.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Et.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Et.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Et.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Et.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Et.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Et.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Et.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Et.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...Et.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Et.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Et.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Et.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Et.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Et.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Et.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Et.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Et.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Et.errToObj(n)})}nonempty(t){return this.min(1,Et.errToObj(t))}trim(){return new co({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new co({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new co({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}co.create=e=>{var t;return new co({checks:[],typeName:Rt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Lt(e)})};function vz(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(e.toFixed(i).replace(".","")),s=parseInt(t.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}class wa extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yt.number){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_type,expected:yt.number,received:o.parsedType}),Tt}let r;const i=new Lr;for(const o of this._def.checks)o.kind==="int"?Zt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?vz(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.not_finite,message:o.message}),i.dirty()):Zt.assertNever(o);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Et.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Et.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Et.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Et.toString(n))}setLimit(t,n,r,i){return new wa({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Et.toString(i)}]})}_addCheck(t){return new wa({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Et.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Et.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Et.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Et.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Et.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Et.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Et.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Et.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Et.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Zt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}wa.create=e=>new wa({checks:[],typeName:Rt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Lt(e)});class ba extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(o){return this._getInvalidInput(t)}if(this._getType(t)!==yt.bigint)return this._getInvalidInput(t);let r;const i=new Lr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),ht(r,{code:Qe.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Zt.assertNever(o);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return ht(n,{code:Qe.invalid_type,expected:yt.bigint,received:n.parsedType}),Tt}gte(t,n){return this.setLimit("min",t,!0,Et.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Et.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Et.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Et.toString(n))}setLimit(t,n,r,i){return new ba({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Et.toString(i)}]})}_addCheck(t){return new ba({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Et.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Et.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Et.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Et.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Et.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ba.create=e=>{var t;return new ba({checks:[],typeName:Rt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Lt(e)})};class Zd extends zt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yt.boolean){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.boolean,received:r.parsedType}),Tt}return Xr(t.data)}}Zd.create=e=>new Zd({typeName:Rt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Lt(e)});class bl extends zt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yt.date){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_type,expected:yt.date,received:o.parsedType}),Tt}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return ht(o,{code:Qe.invalid_date}),Tt}const r=new Lr;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),ht(i,{code:Qe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Zt.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new bl({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Et.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Et.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}bl.create=e=>new bl({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Rt.ZodDate,...Lt(e)});class xg extends zt{_parse(t){if(this._getType(t)!==yt.symbol){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.symbol,received:r.parsedType}),Tt}return Xr(t.data)}}xg.create=e=>new xg({typeName:Rt.ZodSymbol,...Lt(e)});class ef extends zt{_parse(t){if(this._getType(t)!==yt.undefined){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.undefined,received:r.parsedType}),Tt}return Xr(t.data)}}ef.create=e=>new ef({typeName:Rt.ZodUndefined,...Lt(e)});class tf extends zt{_parse(t){if(this._getType(t)!==yt.null){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.null,received:r.parsedType}),Tt}return Xr(t.data)}}tf.create=e=>new tf({typeName:Rt.ZodNull,...Lt(e)});class Hu extends zt{constructor(){super(...arguments),this._any=!0}_parse(t){return Xr(t.data)}}Hu.create=e=>new Hu({typeName:Rt.ZodAny,...Lt(e)});class cl extends zt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Xr(t.data)}}cl.create=e=>new cl({typeName:Rt.ZodUnknown,...Lt(e)});class Ts extends zt{_parse(t){const n=this._getOrReturnCtx(t);return ht(n,{code:Qe.invalid_type,expected:yt.never,received:n.parsedType}),Tt}}Ts.create=e=>new Ts({typeName:Rt.ZodNever,...Lt(e)});class Sg extends zt{_parse(t){if(this._getType(t)!==yt.undefined){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.void,received:r.parsedType}),Tt}return Xr(t.data)}}Sg.create=e=>new Sg({typeName:Rt.ZodVoid,...Lt(e)});class po extends zt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==yt.array)return ht(n,{code:Qe.invalid_type,expected:yt.array,received:n.parsedType}),Tt;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(s||a)&&(ht(n,{code:s?Qe.too_big:Qe.too_small,minimum:a?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ht(n,{code:Qe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ht(n,{code:Qe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,a)=>i.type._parseAsync(new Ko(n,s,n.path,a)))).then(s=>Lr.mergeArray(r,s));const o=[...n.data].map((s,a)=>i.type._parseSync(new Ko(n,s,n.path,a)));return Lr.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new po({...this._def,minLength:{value:t,message:Et.toString(n)}})}max(t,n){return new po({...this._def,maxLength:{value:t,message:Et.toString(n)}})}length(t,n){return new po({...this._def,exactLength:{value:t,message:Et.toString(n)}})}nonempty(t){return this.min(1,t)}}po.create=(e,t)=>new po({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Rt.ZodArray,...Lt(t)});function Gl(e){if(e instanceof kn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ho.create(Gl(r))}return new kn({...e._def,shape:()=>t})}else return e instanceof po?new po({...e._def,type:Gl(e.element)}):e instanceof Ho?Ho.create(Gl(e.unwrap())):e instanceof xa?xa.create(Gl(e.unwrap())):e instanceof Go?Go.create(e.items.map(t=>Gl(t))):e}class kn extends zt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Zt.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==yt.object){const u=this._getOrReturnCtx(t);return ht(u,{code:Qe.invalid_type,expected:yt.object,received:u.parsedType}),Tt}const{status:r,ctx:i}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ts&&this._def.unknownKeys==="strip"))for(const u in i.data)s.includes(u)||a.push(u);const l=[];for(const u of s){const c=o[u],f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ko(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ts){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(ht(i,{code:Qe.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ko(i,f,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const f=await c.key,h=await c.value;u.push({key:f,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>Lr.mergeObjectSync(r,u)):Lr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return Et.errToObj,new kn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o,s,a;const l=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Et.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new kn({...this._def,unknownKeys:"strip"})}passthrough(){return new kn({...this._def,unknownKeys:"passthrough"})}extend(t){return new kn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new kn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Rt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new kn({...this._def,catchall:t})}pick(t){const n={};return Zt.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new kn({...this._def,shape:()=>n})}omit(t){const n={};return Zt.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new kn({...this._def,shape:()=>n})}deepPartial(){return Gl(this)}partial(t){const n={};return Zt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new kn({...this._def,shape:()=>n})}required(t){const n={};return Zt.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Ho;)o=o._def.innerType;n[r]=o}}),new kn({...this._def,shape:()=>n})}keyof(){return yT(Zt.objectKeys(this.shape))}}kn.create=(e,t)=>new kn({shape:()=>e,unknownKeys:"strip",catchall:Ts.create(),typeName:Rt.ZodObject,...Lt(t)});kn.strictCreate=(e,t)=>new kn({shape:()=>e,unknownKeys:"strict",catchall:Ts.create(),typeName:Rt.ZodObject,...Lt(t)});kn.lazycreate=(e,t)=>new kn({shape:e,unknownKeys:"strip",catchall:Ts.create(),typeName:Rt.ZodObject,...Lt(t)});class nf extends zt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(a=>new Ei(a.ctx.common.issues));return ht(n,{code:Qe.invalid_union,unionErrors:s}),Tt}if(n.common.async)return Promise.all(r.map(async o=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!o&&(o={result:c,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(l=>new Ei(l));return ht(n,{code:Qe.invalid_union,unionErrors:a}),Tt}}get options(){return this._def.options}}nf.create=(e,t)=>new nf({options:e,typeName:Rt.ZodUnion,...Lt(t)});const ss=e=>e instanceof sf?ss(e.schema):e instanceof yo?ss(e.innerType()):e instanceof af?[e.value]:e instanceof _a?e.options:e instanceof lf?Zt.objectValues(e.enum):e instanceof uf?ss(e._def.innerType):e instanceof ef?[void 0]:e instanceof tf?[null]:e instanceof Ho?[void 0,...ss(e.unwrap())]:e instanceof xa?[null,...ss(e.unwrap())]:e instanceof xx||e instanceof df?ss(e.unwrap()):e instanceof cf?ss(e._def.innerType):[];class Bm extends zt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.object)return ht(n,{code:Qe.invalid_type,expected:yt.object,received:n.parsedType}),Tt;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(ht(n,{code:Qe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Tt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const o of n){const s=ss(o.shape[t]);if(!s.length)throw new Error("A discriminator value for key `".concat(t,"` could not be extracted from all schema options"));for(const a of s){if(i.has(a))throw new Error("Discriminator property ".concat(String(t)," has duplicate value ").concat(String(a)));i.set(a,o)}}return new Bm({typeName:Rt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Lt(r)})}}function Gw(e,t){const n=fs(e),r=fs(t);if(e===t)return{valid:!0,data:e};if(n===yt.object&&r===yt.object){const i=Zt.objectKeys(t),o=Zt.objectKeys(e).filter(a=>i.indexOf(a)!==-1),s={...e,...t};for(const a of o){const l=Gw(e[a],t[a]);if(!l.valid)return{valid:!1};s[a]=l.data}return{valid:!0,data:s}}else if(n===yt.array&&r===yt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const s=e[o],a=t[o],l=Gw(s,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===yt.date&&r===yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class rf extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(o,s)=>{if(qw(o)||qw(s))return Tt;const a=Gw(o.value,s.value);return a.valid?((Kw(o)||Kw(s))&&n.dirty(),{status:n.value,value:a.data}):(ht(r,{code:Qe.invalid_intersection_types}),Tt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rf.create=(e,t,n)=>new rf({left:e,right:t,typeName:Rt.ZodIntersection,...Lt(n)});class Go extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.array)return ht(r,{code:Qe.invalid_type,expected:yt.array,received:r.parsedType}),Tt;if(r.data.length<this._def.items.length)return ht(r,{code:Qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Tt;!this._def.rest&&r.data.length>this._def.items.length&&(ht(r,{code:Qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((s,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ko(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>Lr.mergeArray(n,s)):Lr.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new Go({...this._def,rest:t})}}Go.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Go({items:e,typeName:Rt.ZodTuple,rest:null,...Lt(t)})};class of extends zt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.object)return ht(r,{code:Qe.invalid_type,expected:yt.object,received:r.parsedType}),Tt;const i=[],o=this._def.keyType,s=this._def.valueType;for(const a in r.data)i.push({key:o._parse(new Ko(r,a,r.path,a)),value:s._parse(new Ko(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Lr.mergeObjectAsync(n,i):Lr.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof zt?new of({keyType:t,valueType:n,typeName:Rt.ZodRecord,...Lt(r)}):new of({keyType:co.create(),valueType:t,typeName:Rt.ZodRecord,...Lt(n)})}}class Eg extends zt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.map)return ht(r,{code:Qe.invalid_type,expected:yt.map,received:r.parsedType}),Tt;const i=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new Ko(r,a,r.path,[u,"key"])),value:o._parse(new Ko(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Tt;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of s){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Tt;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Eg.create=(e,t,n)=>new Eg({valueType:t,keyType:e,typeName:Rt.ZodMap,...Lt(n)});class _l extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yt.set)return ht(r,{code:Qe.invalid_type,expected:yt.set,received:r.parsedType}),Tt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ht(r,{code:Qe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ht(r,{code:Qe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function s(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Tt;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>o._parse(new Ko(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>s(l)):s(a)}min(t,n){return new _l({...this._def,minSize:{value:t,message:Et.toString(n)}})}max(t,n){return new _l({...this._def,maxSize:{value:t,message:Et.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}_l.create=(e,t)=>new _l({valueType:e,minSize:null,maxSize:null,typeName:Rt.ZodSet,...Lt(t)});class Su extends zt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.function)return ht(n,{code:Qe.invalid_type,expected:yt.function,received:n.parsedType}),Tt;function r(a,l){return bg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wg(),zu].filter(u=>!!u),issueData:{code:Qe.invalid_arguments,argumentsError:l}})}function i(a,l){return bg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wg(),zu].filter(u=>!!u),issueData:{code:Qe.invalid_return_type,returnTypeError:l}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Uu){const a=this;return Xr(async function(...l){const u=new Ei([]),c=await a._def.args.parseAsync(l,o).catch(p=>{throw u.addIssue(r(l,p)),u}),f=await Reflect.apply(s,this,c);return await a._def.returns._def.type.parseAsync(f,o).catch(p=>{throw u.addIssue(i(f,p)),u})})}else{const a=this;return Xr(function(...l){const u=a._def.args.safeParse(l,o);if(!u.success)throw new Ei([r(l,u.error)]);const c=Reflect.apply(s,this,u.data),f=a._def.returns.safeParse(c,o);if(!f.success)throw new Ei([i(c,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Su({...this._def,args:Go.create(t).rest(cl.create())})}returns(t){return new Su({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Su({args:t||Go.create([]).rest(cl.create()),returns:n||cl.create(),typeName:Rt.ZodFunction,...Lt(r)})}}class sf extends zt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}sf.create=(e,t)=>new sf({getter:e,typeName:Rt.ZodLazy,...Lt(t)});class af extends zt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return ht(n,{received:n.data,code:Qe.invalid_literal,expected:this._def.value}),Tt}return{status:"valid",value:t.data}}get value(){return this._def.value}}af.create=(e,t)=>new af({value:e,typeName:Rt.ZodLiteral,...Lt(t)});function yT(e,t){return new _a({values:e,typeName:Rt.ZodEnum,...Lt(t)})}class _a extends zt{constructor(){super(...arguments),Qc.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return ht(n,{expected:Zt.joinValues(r),received:n.parsedType,code:Qe.invalid_type}),Tt}if(_g(this,Qc)||hT(this,Qc,new Set(this._def.values)),!_g(this,Qc).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return ht(n,{received:n.data,code:Qe.invalid_enum_value,options:r}),Tt}return Xr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return _a.create(t,{...this._def,...n})}exclude(t,n=this._def){return _a.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Qc=new WeakMap;_a.create=yT;class lf extends zt{constructor(){super(...arguments),Zc.set(this,void 0)}_parse(t){const n=Zt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==yt.string&&r.parsedType!==yt.number){const i=Zt.objectValues(n);return ht(r,{expected:Zt.joinValues(i),received:r.parsedType,code:Qe.invalid_type}),Tt}if(_g(this,Zc)||hT(this,Zc,new Set(Zt.getValidEnumValues(this._def.values))),!_g(this,Zc).has(t.data)){const i=Zt.objectValues(n);return ht(r,{received:r.data,code:Qe.invalid_enum_value,options:i}),Tt}return Xr(t.data)}get enum(){return this._def.values}}Zc=new WeakMap;lf.create=(e,t)=>new lf({values:e,typeName:Rt.ZodNativeEnum,...Lt(t)});class Uu extends zt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==yt.promise&&n.common.async===!1)return ht(n,{code:Qe.invalid_type,expected:yt.promise,received:n.parsedType}),Tt;const r=n.parsedType===yt.promise?n.data:Promise.resolve(n.data);return Xr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Uu.create=(e,t)=>new Uu({type:e,typeName:Rt.ZodPromise,...Lt(t)});class yo extends zt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:s=>{ht(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(r.data,o);if(r.common.async)return Promise.resolve(s).then(async a=>{if(n.value==="aborted")return Tt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Tt:l.status==="dirty"||n.value==="dirty"?du(l.value):l});{if(n.value==="aborted")return Tt;const a=this._def.schema._parseSync({data:s,path:r.path,parent:r});return a.status==="aborted"?Tt:a.status==="dirty"||n.value==="dirty"?du(a.value):a}}if(i.type==="refinement"){const s=a=>{const l=i.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Tt:(a.status==="dirty"&&n.dirty(),s(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Tt:(a.status==="dirty"&&n.dirty(),s(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!wl(s))return s;const a=i.transform(s.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>wl(s)?Promise.resolve(i.transform(s.value,o)).then(a=>({status:n.value,value:a})):s);Zt.assertNever(i)}}yo.create=(e,t,n)=>new yo({schema:e,typeName:Rt.ZodEffects,effect:t,...Lt(n)});yo.createWithPreprocess=(e,t,n)=>new yo({schema:t,effect:{type:"preprocess",transform:e},typeName:Rt.ZodEffects,...Lt(n)});class Ho extends zt{_parse(t){return this._getType(t)===yt.undefined?Xr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ho.create=(e,t)=>new Ho({innerType:e,typeName:Rt.ZodOptional,...Lt(t)});class xa extends zt{_parse(t){return this._getType(t)===yt.null?Xr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}xa.create=(e,t)=>new xa({innerType:e,typeName:Rt.ZodNullable,...Lt(t)});class uf extends zt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}uf.create=(e,t)=>new uf({innerType:e,typeName:Rt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Lt(t)});class cf extends zt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Qd(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ei(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ei(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}cf.create=(e,t)=>new cf({innerType:e,typeName:Rt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Lt(t)});class kg extends zt{_parse(t){if(this._getType(t)!==yt.nan){const r=this._getOrReturnCtx(t);return ht(r,{code:Qe.invalid_type,expected:yt.nan,received:r.parsedType}),Tt}return{status:"valid",value:t.data}}}kg.create=e=>new kg({typeName:Rt.ZodNaN,...Lt(e)});const wz=Symbol("zod_brand");class xx extends zt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Wf extends zt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Tt:o.status==="dirty"?(n.dirty(),du(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Tt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new Wf({in:t,out:n,typeName:Rt.ZodPipeline})}}class df extends zt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(wl(i)&&(i.value=Object.freeze(i.value)),i);return Qd(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}df.create=(e,t)=>new df({innerType:e,typeName:Rt.ZodReadonly,...Lt(t)});function h2(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function vT(e,t={},n){return e?Hu.create().superRefine((r,i)=>{var o,s;const a=e(r);if(a instanceof Promise)return a.then(l=>{var u,c;if(!l){const f=h2(t,r),h=(c=(u=f.fatal)!==null&&u!==void 0?u:n)!==null&&c!==void 0?c:!0;i.addIssue({code:"custom",...f,fatal:h})}});if(!a){const l=h2(t,r),u=(s=(o=l.fatal)!==null&&o!==void 0?o:n)!==null&&s!==void 0?s:!0;i.addIssue({code:"custom",...l,fatal:u})}}):Hu.create()}const bz={object:kn.lazycreate};var Rt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Rt||(Rt={}));const _z=(e,t={message:"Input not instance of ".concat(e.name)})=>vT(n=>n instanceof e,t),wT=co.create,bT=wa.create,xz=kg.create,Sz=ba.create,_T=Zd.create,Ez=bl.create,kz=xg.create,Cz=ef.create,jz=tf.create,Az=Hu.create,Nz=cl.create,Rz=Ts.create,Tz=Sg.create,Iz=po.create,Pz=kn.create,Oz=kn.strictCreate,$z=nf.create,Mz=Bm.create,Dz=rf.create,Lz=Go.create,Bz=of.create,Fz=Eg.create,zz=_l.create,Hz=Su.create,Uz=sf.create,Wz=af.create,Vz=_a.create,qz=lf.create,Kz=Uu.create,p2=yo.create,Gz=Ho.create,Yz=xa.create,Xz=yo.createWithPreprocess,Jz=Wf.create,Qz=()=>wT().optional(),Zz=()=>bT().optional(),eH=()=>_T().optional(),tH={string:e=>co.create({...e,coerce:!0}),number:e=>wa.create({...e,coerce:!0}),boolean:e=>Zd.create({...e,coerce:!0}),bigint:e=>ba.create({...e,coerce:!0}),date:e=>bl.create({...e,coerce:!0})},nH=Tt;var ct=Object.freeze({__proto__:null,defaultErrorMap:zu,setErrorMap:X9,getErrorMap:wg,makeIssue:bg,EMPTY_PATH:J9,addIssueToContext:ht,ParseStatus:Lr,INVALID:Tt,DIRTY:du,OK:Xr,isAborted:qw,isDirty:Kw,isValid:wl,isAsync:Qd,get util(){return Zt},get objectUtil(){return Vw},ZodParsedType:yt,getParsedType:fs,ZodType:zt,datetimeRegex:mT,ZodString:co,ZodNumber:wa,ZodBigInt:ba,ZodBoolean:Zd,ZodDate:bl,ZodSymbol:xg,ZodUndefined:ef,ZodNull:tf,ZodAny:Hu,ZodUnknown:cl,ZodNever:Ts,ZodVoid:Sg,ZodArray:po,ZodObject:kn,ZodUnion:nf,ZodDiscriminatedUnion:Bm,ZodIntersection:rf,ZodTuple:Go,ZodRecord:of,ZodMap:Eg,ZodSet:_l,ZodFunction:Su,ZodLazy:sf,ZodLiteral:af,ZodEnum:_a,ZodNativeEnum:lf,ZodPromise:Uu,ZodEffects:yo,ZodTransformer:yo,ZodOptional:Ho,ZodNullable:xa,ZodDefault:uf,ZodCatch:cf,ZodNaN:kg,BRAND:wz,ZodBranded:xx,ZodPipeline:Wf,ZodReadonly:df,custom:vT,Schema:zt,ZodSchema:zt,late:bz,get ZodFirstPartyTypeKind(){return Rt},coerce:tH,any:Az,array:Iz,bigint:Sz,boolean:_T,date:Ez,discriminatedUnion:Mz,effect:p2,enum:Vz,function:Hz,instanceof:_z,intersection:Dz,lazy:Uz,literal:Wz,map:Fz,nan:xz,nativeEnum:qz,never:Rz,null:jz,nullable:Yz,number:bT,object:Pz,oboolean:eH,onumber:Zz,optional:Gz,ostring:Qz,pipeline:Jz,preprocess:Xz,promise:Kz,record:Bz,set:zz,strictObject:Oz,string:wT,symbol:kz,transformer:p2,tuple:Lz,undefined:Cz,union:$z,unknown:Nz,void:Tz,NEVER:nH,ZodIssueCode:Qe,quotelessJson:Y9,ZodError:Ei});const Sx=ct.object({type:ct.string(),gen:ct.any().optional(),useTextArea:ct.boolean().optional(),isArray:ct.boolean().optional(),options:ct.array(ct.string()).optional(),outputType:ct.string().optional(),isOutputAnArray:ct.boolean().optional(),inputs:ct.array(ct.any()).optional()}),rH=ct.object({name:ct.string(),typeData:Sx,data:ct.any()}),R0=ct.object({name:ct.string(),blueprint:ct.object({nodes:ct.array(ct.any()),edges:ct.array(ct.any())}),lexical:ct.string(),state:ct.array(ct.object({name:ct.string(),type:Sx,value:ct.any()}))}),iH=ct.object({name:ct.string(),properties:ct.array(ct.object({key:ct.string(),typeData:Sx}))});ct.object({creator:ct.array(R0),modals:ct.array(R0),pages:ct.array(R0),version:ct.string(),data:ct.array(rH),defaultCharacterData:ct.any(),types:ct.array(iH)});const Vf=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).max(100,"id cannot be longer than 100 characters").optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string(),name:ct.string(),forked_from:ct.string().nullable().optional(),created_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).nullable().optional()});function oH({id:e,data:{path:t,type:n}}){const{updateNodeData:r}=un(),i=Br(),o=ln.useValue(),s=Un(o.versionId),a=R.useCallback(l=>{const u=dT((s==null?void 0:s.data.defaultCharacterData)||{},l);r(e,{path:l,type:u}),i(e)},[e,r,i,Vf]);return d.jsxs(en,{title:"Set Character Data",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"set-character-".concat(e),label:"Path",value:t,onChange:a,isValid:!0,errorMessage:""}),d.jsxs("p",{children:["Calculated type ",n]}),n!=="unknown"?d.jsx(Ne,{type:"target",id:"input-".concat(n),position:ye.Left,style:{bottom:20,top:"auto"}}):null]})}const sH=R.memo(oH);function aH({id:e,data:{chosenState:t}}){const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId),s=R.useMemo(()=>{if(i.tab==="editor")return o==null?void 0:o.data.pages.find(a=>a.name===i.characterPage);if(i.tab==="creator")return o==null?void 0:o.data.creator.find(a=>a.name===i.creatorPage)},[o,i]);return R.useEffect(()=>{t||(t=(s==null?void 0:s.state[0])||null),n(e,{chosenState:t})},[s,t]),d.jsxs(en,{title:"Set Page State",children:[d.jsx(dt,{id:"set-state-".concat(e),label:"State to change",value:(t==null?void 0:t.name)||"",onChange:a=>{n(e,{chosenState:s==null?void 0:s.state.find(l=>l.name===a)}),r(e)},children:s==null?void 0:s.state.map(a=>d.jsx("option",{value:a.name,children:a.name},a.name))}),t?d.jsxs("p",{children:[t.type.type,t.type.isArray?"[]":""]}):d.jsx("p",{children:"select a page state to set."}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),t&&d.jsx(Ne,{type:"target",id:"".concat(t.name,"-").concat(t.type.type).concat(t.type.isArray?"(Array)":""),position:ye.Left,style:{top:122,bottom:"auto"}})]})}const lH=R.memo(aH);function uH({id:e,data:t}){const{updateNodeData:n}=un();return d.jsxs(en,{title:"Set System Data",children:[d.jsx(Kt,{id:"path",label:"Path",placeholder:"path/to/data",value:t.path,onChange:i=>n(e,{path:i}),isValid:!0,errorMessage:""}),d.jsxs("p",{children:["Calculated type ","unknown"]}),d.jsx(Ne,{type:"target",position:ye.Left}),d.jsx(Ne,{type:"source",position:ye.Right})]})}const cH=R.memo(uH);function dH({id:e,data:{inputType:t}}){var u,c;const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId),s=bo(),a=R.useMemo(()=>s.filter(f=>f.source!==e).map(f=>f.source),[s]),l=Mm(a);return R.useEffect(()=>{var b,y,_,m,v;let f={};for(let w=0;w<s.length;w++){const S=s[w];if((S.source===e?"output":"input")==="output")continue;const A=l.find(P=>P.id===S.source);if(!(A!=null&&A.data)||!(A!=null&&A.data.outputs))continue;const T=((b=A==null?void 0:A.data)==null?void 0:b.outputs)[(y=S.sourceHandle)!=null?y:""];f[(_=S.targetHandle)!=null?_:""]=T}const h=(m=f["input-object"])!=null?m:{name:"unknown",properties:[]};let p={};for(let w=0;w<((v=t==null?void 0:t.properties)==null?void 0:v.length);w++){const S=t.properties[w];p["".concat(S.key,"-").concat(S.typeData.type).concat(S.typeData.isArray?"(Array)":"")]={name:S.typeData.type}}n(e,{inputs:f,inputType:h,outputs:p}),r(e)},[s,l,o]),d.jsxs(en,{title:"Spread Object",children:[d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t==null?void 0:t.name]}),d.jsx("p",{style:{textAlign:"right"},children:"Spread"}),(u=t==null?void 0:t.properties)==null?void 0:u.map(f=>d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:["(",f.typeData.type,f.typeData.isArray?"[]":"",") ",f.key]},f.key)),d.jsx(Ne,{type:"target",id:"input-object",position:ye.Left,style:{top:80,bottom:"auto"}}),(c=t==null?void 0:t.properties)==null?void 0:c.map((f,h)=>d.jsx(Ne,{type:"source",id:"".concat(f.key,"-").concat(f.typeData.type).concat(f.typeData.isArray?"(Array)":""),position:ye.Right,style:{top:130+26*h,bottom:"auto"}},f.key))]})}const fH=R.memo(dH);function hH({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=un();return d.jsxs(en,{title:"String Includes",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"String 1"}),d.jsx("p",{style:{marginTop:5},children:"String 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) Included?"}),d.jsx(Ne,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const pH=R.memo(hH);function gH(e){return d.jsxs(en,{title:"String Compare",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"String 1"}),d.jsx("p",{style:{marginTop:5},children:"String 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),d.jsx(Ne,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const mH=R.memo(gH);function yH({id:e,data:{string1:t,string2:n}}){const{updateNodeData:r}=un();return d.jsxs(en,{title:"Concat String",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"String 1"}),d.jsx("p",{style:{marginTop:5},children:"String 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(string) concated string"}),d.jsx(Ne,{type:"target",id:"string1-string",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"string2-string",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-string",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const vH=R.memo(yH);function wH({id:e,data:{inputType:t}}){const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId);return bo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),R.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Remove Item In Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{marginTop:5},children:"name (string)"}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const bH=R.memo(wH);function _H({id:e,data:{inputType:t}}){const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId);return bo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),R.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Add Item To Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{style:{marginTop:5},children:["new Item (",t,")"]}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"newItem-".concat(t),position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const xH=R.memo(_H);function SH({id:e,data:{inputType:t}}){const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId);return bo({handleType:"target",handleId:"input-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),R.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Filter Array",children:[d.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),d.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),d.jsx("p",{style:{textAlign:"left",marginTop:5},children:"Filtered? (boolean)"}),d.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"Filtered Array"})]}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"input-array",position:ye.Left,style:{top:65,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"loop-node",position:ye.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"loopcompleted-node",position:ye.Left,style:{top:125,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"filtered?-boolean",position:ye.Left,style:{top:150,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:188,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"completed-node",position:ye.Right,style:{top:228,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"filterd-".concat(t,"(Array)"),position:ye.Right,style:{top:255,bottom:"auto"}})]})]})}const EH=R.memo(SH);function kH({id:e,data:{inputType:t,mapType:n}}){const{updateNodeData:r}=un(),i=Br(),o=ln.useValue(),s=Un(o.versionId);return bo({handleType:"target",handleId:"input-array",onConnect:a=>{const l=a[0];if(!l||!l.sourceHandle)return;const u=l.sourceHandle.split("-")[1];if(!u)return;const c=u.split("(")[0];c&&(r(e,{inputType:c}),i(e))},onDisconnect:()=>{r(e,{inputType:"unknown"}),i(e)}}),d.jsxs(en,{title:"Map Array",children:[d.jsxs("p",{style:{textAlign:"left"},children:["Input Type ",t]}),d.jsx("p",{style:{textAlign:"right"},children:"Loop Body"}),d.jsx(dt,{id:"map-type-".concat(e),label:"Input Type",value:n,onChange:a=>{r(e,{mapType:a}),i(e)},children:s==null?void 0:s.data.types.map(a=>d.jsx("option",{value:a.name,children:a.name},a.name))}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"left",marginTop:15},children:"Loop Completed"}),d.jsxs("p",{style:{textAlign:"left",marginTop:5},children:["item (",n,")"]}),d.jsxs("p",{style:{textAlign:"right",marginTop:15},children:["(",t,") item"]})]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{textAlign:"right",marginTop:20},children:"Completed"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"New Array"})]}),d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"input-array",position:ye.Left,style:{top:65,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"loop-node",position:ye.Right,style:{top:90,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"loopcompleted-node",position:ye.Left,style:{top:125,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"newitem-".concat(t),position:ye.Left,style:{top:150,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:188,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"completed-node",position:ye.Right,style:{top:228,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"filterd-".concat(n,"(Array)"),position:ye.Right,style:{top:255,bottom:"auto"}})]})]})}const CH=R.memo(kH);function jH({id:e,data:{inputType:t}}){const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId);return bo({handleType:"target",handleId:"base-array",onConnect:s=>{const a=s[0];if(!a||!a.sourceHandle)return;const l=a.sourceHandle.split("-")[1];if(!l)return;const u=l.split("(")[0];u&&(n(e,{inputType:u}),r(e))},onDisconnect:()=>{n(e,{inputType:"unknown"}),r(e)}}),R.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Update Item In Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{marginTop:5},children:"name (string)"}),d.jsxs("p",{style:{marginTop:10},children:["new Item (",t,")"]}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t,"(Array) New Array"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"newItem-".concat(t),position:ye.Left,style:{top:138,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t,"(Array)"),position:ye.Right,style:{top:162,bottom:"auto"}})]})]})}const AH=R.memo(jH);function NH({id:e,data:{inputType:t}}){const{updateNodeData:n}=un(),r=Br(),i=ln.useValue(),o=Un(i.versionId),s=bo(),a=R.useMemo(()=>s.filter(u=>u.source!==e).map(u=>u.source),[s]),l=Mm(a);return R.useEffect(()=>{var f,h,p,b;let u={};for(let y=0;y<s.length;y++){const _=s[y];if((_.source===e?"output":"input")==="output")continue;const v=l.find(S=>S.id===_.source);if(!(v!=null&&v.data)||!(v!=null&&v.data.outputs))continue;console.log(_.sourceHandle);const w=((f=v==null?void 0:v.data)==null?void 0:f.outputs)[(h=_.sourceHandle)!=null?h:""];console.log(w),u[(p=_.targetHandle)!=null?p:""]=w}console.log(u);const c=((b=u["base-array"])!=null?b:{name:"unknown"}).name;n(e,{inputs:u,inputType:c,outputs:{["output-".concat(c)]:o==null?void 0:o.data.types.find(y=>y.name===c)}}),r(e)},[s,l,Vf]),R.useEffect(()=>{o&&r(e)},[o,t]),d.jsxs(en,{title:"Get Item In Array",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsxs("p",{style:{textAlign:"left"},children:["Type ",t,"(Array)"]}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx("p",{style:{marginTop:5},children:"name (string)"}),d.jsxs("p",{style:{textAlign:"right",marginTop:5},children:[t," Item"]})]}),d.jsx(Ne,{type:"target",id:"base-array",position:ye.Left,style:{top:80,bottom:"auto"}}),t!=="unknown"&&d.jsxs(d.Fragment,{children:[d.jsx(Ne,{type:"target",id:"name-string",position:ye.Left,style:{top:106,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-".concat(t),position:ye.Right,style:{top:130,bottom:"auto"}})]})]})}const RH=R.memo(NH);function TH({id:e,data:{value:t}}){const{updateNodeData:n}=un();return d.jsxs(en,{title:"Number",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"number-".concat(e),label:"String Value",value:t.toString(),onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const IH=R.memo(TH);function PH(e){return d.jsxs(en,{title:"Subtract",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const OH=R.memo(PH);function $H(e){return d.jsxs(en,{title:"Divide",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const MH=R.memo($H);function DH(e){return d.jsxs(en,{title:"Floor",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"input-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:110,bottom:"auto"}})]})}const LH=R.memo(DH);function BH(e){return d.jsxs(en,{title:"Add",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const FH=R.memo(BH);function zH(e){return d.jsxs(en,{title:"Multiply",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number 1"}),d.jsx("p",{style:{marginTop:5},children:"number 2"}),d.jsx("p",{style:{marginTop:5},children:"output"}),d.jsx(Ne,{type:"target",id:"number1-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"number2-number",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-number",position:ye.Right,style:{top:135,bottom:"auto"}})]})}const HH=R.memo(zH);function UH(e){return d.jsxs(en,{title:"Number To String",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"number"}),d.jsx("p",{style:{marginTop:5,textAlign:"right"},children:"string"}),d.jsx(Ne,{type:"target",id:"input-number",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-string",position:ye.Right,style:{top:110,bottom:"auto"}})]})}const WH=R.memo(UH);function VH(e){return d.jsxs(en,{title:"Enum Compare",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"Enum 1"}),d.jsx("p",{style:{marginTop:5},children:"Enum 2"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) is the same?"}),d.jsx(Ne,{type:"target",id:"enum1-enum",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"target",id:"enum2-enum",position:ye.Left,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const qH=R.memo(VH);function KH({id:e,data:{value:t}}){const{updateNodeData:n}=un();return d.jsxs(en,{title:"Enum",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"enum-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),d.jsx(Ne,{type:"source",id:"output-enum",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const GH=R.memo(KH);function YH(e){return d.jsxs(en,{title:"Branch",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"true"}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"false"}),d.jsx(Ne,{type:"target",id:"input-boolean",position:ye.Left,style:{top:85,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"true-node",position:ye.Right,style:{top:110,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"false-node",position:ye.Right,style:{top:136,bottom:"auto"}})]})}const XH=R.memo(YH);function JH(e){return d.jsxs(en,{title:"Inverse Boolean",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:5},children:"input (boolean)"}),d.jsx(Ne,{type:"target",id:"input-boolean",position:ye.Left,style:{top:80,bottom:"auto"}}),d.jsx("p",{style:{textAlign:"right",marginTop:5},children:"(boolean) output"}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:55,bottom:"auto"}})]})}const QH=R.memo(JH);function ZH({id:e,data:{value:t}}){const{updateNodeData:n}=un();return d.jsxs(en,{title:"String",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kt,{id:"string-".concat(e),label:"String Value",value:t,onChange:r=>n(e,{value:r}),isValid:!0,errorMessage:""}),d.jsx(Ne,{type:"source",id:"output-string",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const eU=R.memo(ZH),Kn=({id:e,label:t,checked:n,onChange:r})=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:e,type:"checkbox",checked:n,onChange:()=>r(!n),className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-brand-500 dark:focus:ring-brand-600 dark:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600"}),d.jsx("label",{htmlFor:e,className:"ms-2 text-sm font-medium text-neutral-900 dark:text-neutral-300",children:t})]});function tU({id:e,data:{value:t}}){const{updateNodeData:n}=un();return d.jsxs(en,{title:"Boolean",children:[d.jsx(Ne,{type:"target",id:"prev-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx(Kn,{id:"boolean-".concat(e),label:"Value",checked:t,onChange:r=>n(e,{value:r})}),d.jsx(Ne,{type:"source",id:"output-boolean",position:ye.Right,style:{top:100,bottom:"auto"}})]})}const nU=R.memo(tU);function Cg(e){return e.nodes.find(n=>n.type==="output").data.inputType}function xT(e){return e.nodes.find(t=>t.type==="entry")}function rU(e){return xT(e).data.params}const iU=({id:e,data:{params:t,returnType:n,inputs:r,outputs:i}})=>{const{updateNodeData:o}=un(),s=Br(),a=bo(),l=R.useMemo(()=>a.filter(c=>c.source!==e).map(c=>c.source),[a]),u=Mm(l);return R.useEffect(()=>{var b,y;let c={};for(let _=0;_<a.length;_++){const m=a[_];if((m.source===e?"output":"input")==="output")continue;const w=u.find(k=>k.id===m.source);if(w!=null&&w.data||w!=null&&w.data.outputs)continue;const S=((b=w==null?void 0:w.data)==null?void 0:b.outputs)[m.sourceHandle||""];c[m.targetHandle||""]=S}const f=(y=c["data-blueprint"])==null?void 0:y.data;let h=[],p="none";f&&(h=rU(f),p=Cg(f)),o(e,{inputs:c,params:h,returnType:p}),s(e)},[a,u]),d.jsxs(en,{title:"Run Blueprint",children:[d.jsx(Ne,{type:"target",id:"from-node",position:ye.Left,style:{top:30,bottom:"auto"}}),d.jsx(Ne,{type:"source",id:"next-node",position:ye.Right,style:{top:30,bottom:"auto"}}),d.jsx("p",{style:{marginTop:10},children:"blueprint"}),d.jsx(Ne,{type:"target",id:"data-blueprint",position:ye.Left,style:{top:60,bottom:"auto"}}),t.map((c,f)=>{const h="".concat(c.type).concat(c.isArray?"(Array)":"");return d.jsxs("div",{children:[d.jsxs("p",{children:[c.name," ",h]}),d.jsx(Ne,{type:"target",id:"".concat(c.name,"-").concat(h),position:ye.Left,style:{top:70+10*f,bottom:"auto"}})]},c.name)}),n!=="none"&&d.jsxs("div",{children:[d.jsxs("p",{children:["output ",n]}),d.jsx(Ne,{type:"source",id:"output-".concat(n),position:ye.Right,style:{top:80+10*t.length,bottom:"auto"}})]})]})},oU=R.memo(iU),sU={entry:L9,output:G9,get_character_data:F9,set_character_data:sH,get_page_data:H9,set_page_data:lH,get_system_data:W9,set_system_data:cH,add_to_array:xH,array_remove:bH,array_update:AH,array_get:RH,filter:EH,map:CH,spread_object:fH,create_data_from_type:M9,string_new:eU,string_includes:pH,string_compare:mH,string_concat:vH,new_number:IH,number_to_string:WH,divide:MH,add:FH,subtract:OH,multiply:HH,floor:LH,new_enum:GH,enum_compare:qH,boolean_new:nU,boolean_branch:XH,boolean_inverse:QH,open_modal:q9,blueprint_run:oU},g2={primary:"text-white bg-brand-700 hover:bg-brand-800 focus:ring-brand-300 dark:bg-brand-600 dark:hover:bg-brand-700 dark:focus:ring-brand-800 border-brand-700",light:"text-neutral-900 bg-white border-neutral-300 hover:bg-neutral-100 focus:ring-neutral-100 dark:bg-neutral-800 dark:text-white dark:border-neutral-600 dark:hover:bg-neutral-700 dark:hover:border-neutral-600 dark:focus:ring-neutral-700",danger:"border-red-600 text-red-600 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-red-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition",disabled:"border-neutral-600 bg-neutral-400 text-neutral-700 cursor-not-allowed opacity-50"},kt=({children:e,className:t="",color:n,disabled:r=!1,onClick:i,id:o})=>d.jsx("button",{id:o,type:"button",className:"".concat(r?g2.disabled:g2[n]," me-2.5 focus:ring-4 border focus:outline-none font-medium rounded-lg transition text-sm px-5 py-2.5 text-center ").concat(t),onClick:r?void 0:i,children:e});function aU(e){const[t,n]=R.useState(e.nodes),[r,i]=R.useState(e.edges);function o(l){n(PR(l,t))}function s(l){i(OR(l,r))}function a(l){i(dR(l,r))}return{nodes:t,edges:r,onNodesChange:o,onEdgesChange:s,onConnect:a}}const lU=e=>{if(!e.sourceHandle||!e.targetHandle)return!1;const t=e.sourceHandle.split("-")[1],n=e.targetHandle.split("-")[1];return!t||!n?!1:n==="object"&&!["string","number","boolean","enum","blueprint"].includes(t)||n==="array"&&t.endsWith("(Array)")||n==="any"||t==="any"?!0:t===n},uU=({title:e,isVisible:t,requestClose:n,data:r,onSave:i})=>{const[o,s]=R.useState(null),[a,l]=R.useState(null),u=R.useRef(null),{nodes:c,edges:f,onNodesChange:h,onEdgesChange:p,onConnect:b}=aU(r),y=R.useCallback((w,S)=>{if(w.preventDefault(),!u||!u.current)return;const k=u.current.getBoundingClientRect();s({id:S.id,top:w.clientY<k.height-200&&w.clientY,left:w.clientX<k.width-200&&w.clientX,right:w.clientX>=k.width-200&&k.width-w.clientX,bottom:w.clientY>=k.height-200&&k.height-w.clientY}),l(null)},[s]),_=R.useCallback(async({nodes:w,edges:S})=>!w.find(k=>["entry","output"].includes(k.type)),[]),m=R.useCallback(w=>{if(w.preventDefault(),!u||!u.current)return;const S=u.current.getBoundingClientRect();l({top:w.clientY<S.height-200&&w.clientY,left:w.clientX<S.width-200&&w.clientX,right:w.clientX>=S.width-200&&S.width-w.clientX,bottom:w.clientY>=S.height-200&&S.height-w.clientY,rawX:w.clientX,rawY:w.clientY}),s(null)},[l]),v=R.useCallback(()=>{s(null),l(null)},[s,l]);return d.jsx("div",{className:"".concat(t?"flex":"hidden"," z-50 absolute top-0 left-0 w-screen h-screen"),children:d.jsxs(W7,{ref:u,nodes:c,edges:f,onNodesChange:h,onEdgesChange:p,onConnect:b,onBeforeDelete:_,isValidConnection:lU,onPaneClick:v,onNodeContextMenu:y,onPaneContextMenu:m,nodeTypes:sU,colorMode:"system",children:[d.jsx(m9,{}),d.jsx(X7,{}),d.jsx(r9,{}),o&&d.jsx(v9,{onClick:v,...o}),a&&d.jsx(b9,{onClick:v,...a}),d.jsxs(Uf,{position:"top-right",children:[d.jsx(kt,{color:"danger",onClick:n,children:"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{i({nodes:c,edges:f}),console.log({nodes:c,edges:f}),n()},children:"Confirm"})]})]})})};var ST=Symbol.for("immer-nothing"),m2=Symbol.for("immer-draftable"),ji=Symbol.for("immer-state");function so(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Wu=Object.getPrototypeOf;function Vu(e){return!!e&&!!e[ji]}function xl(e){var t;return e?ET(e)||Array.isArray(e)||!!e[m2]||!!((t=e.constructor)!=null&&t[m2])||zm(e)||Hm(e):!1}var cU=Object.prototype.constructor.toString();function ET(e){if(!e||typeof e!="object")return!1;const t=Wu(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===cU}function jg(e,t){Fm(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Fm(e){const t=e[ji];return t?t.type_:Array.isArray(e)?1:zm(e)?2:Hm(e)?3:0}function Yw(e,t){return Fm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kT(e,t,n){const r=Fm(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function dU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function zm(e){return e instanceof Map}function Hm(e){return e instanceof Set}function Xa(e){return e.copy_||e.base_}function Xw(e,t){if(zm(e))return new Map(e);if(Hm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ET(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ji];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Wu(e),r)}else{const r=Wu(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Ex(e,t=!1){return Um(e)||Vu(e)||!xl(e)||(Fm(e)>1&&(e.set=e.add=e.clear=e.delete=fU),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Ex(r,!0))),e}function fU(){so(2)}function Um(e){return Object.isFrozen(e)}var hU={};function Sl(e){const t=hU[e];return t||so(0,e),t}var ff;function CT(){return ff}function pU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function y2(e,t){t&&(Sl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jw(e){Qw(e),e.drafts_.forEach(gU),e.drafts_=null}function Qw(e){e===ff&&(ff=e.parent_)}function v2(e){return ff=pU(ff,e)}function gU(e){const t=e[ji];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function w2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ji].modified_&&(Jw(t),so(4)),xl(e)&&(e=Ag(t,e),t.parent_||Ng(t,e)),t.patches_&&Sl("Patches").generateReplacementPatches_(n[ji].base_,e,t.patches_,t.inversePatches_)):e=Ag(t,n,[]),Jw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ST?e:void 0}function Ag(e,t,n){if(Um(t))return t;const r=t[ji];if(!r)return jg(t,(i,o)=>b2(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Ng(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),jg(o,(a,l)=>b2(e,r,i,a,l,n,s)),Ng(e,i,!1),n&&e.patches_&&Sl("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function b2(e,t,n,r,i,o,s){if(Vu(i)){const a=o&&t&&t.type_!==3&&!Yw(t.assigned_,r)?o.concat(r):void 0,l=Ag(e,i,a);if(kT(n,r,l),Vu(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(xl(i)&&!Um(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ag(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Ng(e,i)}}function Ng(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ex(t,n)}function mU(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:CT(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=kx;n&&(i=[r],o=hf);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var kx={get(e,t){if(t===ji)return e;const n=Xa(e);if(!Yw(n,t))return yU(e,n,t);const r=n[t];return e.finalized_||!xl(r)?r:r===T0(e.base_,t)?(I0(e),e.copy_[t]=eb(r,e)):r},has(e,t){return t in Xa(e)},ownKeys(e){return Reflect.ownKeys(Xa(e))},set(e,t,n){const r=jT(Xa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=T0(Xa(e),t),o=i==null?void 0:i[ji];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(dU(n,i)&&(n!==void 0||Yw(e.base_,t)))return!0;I0(e),Zw(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return T0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,I0(e),Zw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Xa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){so(11)},getPrototypeOf(e){return Wu(e.base_)},setPrototypeOf(){so(12)}},hf={};jg(kx,(e,t)=>{hf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});hf.deleteProperty=function(e,t){return hf.set.call(this,e,t,void 0)};hf.set=function(e,t,n){return kx.set.call(this,e[0],t,n,e[0])};function T0(e,t){const n=e[ji];return(n?Xa(n):e)[t]}function yU(e,t,n){var i;const r=jT(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function jT(e,t){if(!(t in e))return;let n=Wu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Wu(n)}}function Zw(e){e.modified_||(e.modified_=!0,e.parent_&&Zw(e.parent_))}function I0(e){e.copy_||(e.copy_=Xw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&so(6),r!==void 0&&typeof r!="function"&&so(7);let i;if(xl(t)){const o=v2(this),s=eb(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?Jw(o):Qw(o)}return y2(o,r),w2(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===ST&&(i=void 0),this.autoFreeze_&&Ex(i,!0),r){const o=[],s=[];Sl("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else so(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xl(e)||so(8),Vu(e)&&(e=wU(e));const t=v2(this),n=eb(e,void 0);return n[ji].isManual_=!0,Qw(t),n}finishDraft(e,t){const n=e&&e[ji];(!n||!n.isManual_)&&so(9);const{scope_:r}=n;return y2(r,t),w2(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Sl("Patches").applyPatches_;return Vu(e)?r(e,t):this.produce(e,i=>r(i,t))}};function eb(e,t){const n=zm(e)?Sl("MapSet").proxyMap_(e,t):Hm(e)?Sl("MapSet").proxySet_(e,t):mU(e,t);return(t?t.scope_:CT()).drafts_.push(n),n}function wU(e){return Vu(e)||so(10,e),AT(e)}function AT(e){if(!xl(e)||Um(e))return e;const t=e[ji];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Xw(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Xw(e,!0);return jg(n,(r,i)=>{kT(n,r,AT(i))}),t&&(t.finalized_=!1),n}var Ai=new vU,In=Ai.produce;Ai.produceWithPatches.bind(Ai);Ai.setAutoFreeze.bind(Ai);Ai.setUseStrictShallowCopy.bind(Ai);Ai.applyPatches.bind(Ai);Ai.createDraft.bind(Ai);Ai.finishDraft.bind(Ai);function Cx(e,t,n){const r=t.split("/");if(!r.length)return e;const i=r.pop(),o=r.reduce((s,a)=>{if(s)return Array.isArray(s)?(s=s.find(l=>l.name===a),s||void 0):s[a]},e);if(!o)return e;if(Array.isArray(o)){const s=o.findIndex(a=>a.name===i);if(s===-1)return e;o[s]=n}else o[i]=n;return e}function pf(e,t){if(t.isArray)return[];switch(t.type){case"string":return"Lorem Ipsum";case"number":return 1;case"boolean":return!1;case"enum":return t.options?[t.options[0]]:["undefined options"];case"blueprint":return{nodes:$r(t.inputs,t.outputType!=="none"?{name:"output",type:t.outputType||"none",isArray:t.isOutputAnArray||!1}:void 0),edges:[]};default:const n=e.find(r=>r.name===t.type);return n?gf(e,n):"Type ".concat(t.type," not found.")}}function gf(e,t){if(typeof t=="string")return pf(e,{type:t,isArray:!1,options:[],isOutputAnArray:!1,inputs:[],outputType:"none"});let n={_type:{...t}};for(let r=0;r<t.properties.length;r++){const i=t.properties[r];let o=i.typeData;n[i.key]=pf(e,o)}return n}const qf=()=>d.jsx("div",{className:"h-px w-full bg-neutral-200 dark:bg-neutral-700"}),ar=({children:e,isOpen:t,onClose:n})=>d.jsx("div",{tabIndex:-1,"aria-hidden":"true",className:"".concat(t?"flex":"hidden"," bg-black/70 overflow-y-auto overflow-x-hidden absolute top-0 right-0 left-0 bottom-0 z-50 justify-center items-center w-full md:inset-0 h-screen max-h-full"),children:d.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",onClick:r=>r.stopPropagation(),children:d.jsx("div",{className:"relative bg-white rounded-lg shadow dark:bg-neutral-800",children:e})})}),lr=({title:e,onClose:t})=>d.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-neutral-700",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e}),t&&d.jsxs("button",{type:"button",onClick:t,className:"text-neutral-400 bg-transparent hover:bg-neutral-200 hover:text-neutral-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-neutral-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[d.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),d.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),ur=({children:e,className:t=""})=>d.jsx("div",{className:t||"p-4 md:p-5 space-y-4",children:e}),wr=({children:e})=>d.jsx("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-neutral-700",children:e}),jx=({id:e,label:t,value:n,onChange:r})=>d.jsxs("div",{children:[d.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:t}),d.jsx("textarea",{id:e,rows:4,value:n,onChange:i=>r(i.target.value),className:"block p-2.5 w-full text-sm text-neutral-900 bg-neutral-50 rounded-lg border border-neutral-300 focus:ring-brand-500 focus:border-brand-500 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-brand-500 dark:focus:border-brand-500"})]});function Ax({title:e,onDelete:t,onSave:n,isVisible:r,requestClose:i,data:o,types:s,type:a,typeData:l}){const[u,c]=R.useState(null),f=(h,p,b)=>{c(In(p,y=>(h?Cx(y,h,b):y=b,y)))};return R.useEffect(()=>{c(o||null)},[o,c]),u?d.jsxs(ar,{isOpen:r,onClose:i,children:[d.jsx(lr,{title:e,onClose:i}),d.jsx(ur,{children:a&&l?Nx(s,a,u,u,l,"",f):bU(u,s,f)}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{t&&t(),i()},children:t?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{n(u),i()},children:"Update"})]})]}):d.jsx(d.Fragment,{})}function bU(e,t,n){return d.jsx("div",{children:e._type.properties.map(r=>{const i=r.key,o=e[i];let a=r.typeData.type;return d.jsx("div",{children:Nx(t,a,o,e,r.typeData,i,n)},i)})})}function Nx(e,t,n,r,i,o,s){var l;const a=e.find(u=>u.name===t);if(t&&i.isArray)return d.jsx(_U,{types:e,type:a,title:o,data:n,onAdd:u=>s(o,r,[...n,u]),onChange:(u,c)=>s(u,r,c),onDelete:u=>s(o,r,n.filter(c=>c.name!==u))});switch(t){case"string":return i.useTextArea?d.jsx(jx,{id:o,label:o,value:n,onChange:u=>s(o,r,u)}):d.jsx(Kt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,u)});case"number":return d.jsx(Kt,{id:o,label:o,isValid:!0,errorMessage:"",value:n,onChange:u=>s(o,r,+u)});case"boolean":return d.jsx(Kn,{id:o,label:o,checked:n,onChange:u=>s(o,r,u)});case"enum":return d.jsx(dt,{id:o,label:o,value:n,onChange:u=>s(o,r,u),children:(l=i.options)==null?void 0:l.map(u=>d.jsx("option",{value:u,children:u},u))});case"blueprint":return d.jsxs(kt,{color:"light",onClick:()=>mn({title:"Edit Blueprint",type:"blueprint",data:n,onSave:u=>s(o,r,u)}),children:["Edit ",o]},o);default:return d.jsxs("div",{className:"mb-2",children:[d.jsx("p",{className:"my-2",children:o}),d.jsx(qf,{}),d.jsx("div",{className:"h-2"}),a.properties.map(u=>{var c;return Nx(e,u.typeData.type,(c=n[u.key])!=null?c:"",r,u.typeData,u.key,(f,h,p)=>{console.log("".concat(o,"/").concat(f)),console.table(h),s("".concat(o,"/").concat(f),h,p)})})]},o)}}function _U({title:e,data:t,type:n,types:r,onAdd:i,onChange:o,onDelete:s}){const[a,l]=R.useState(null);return d.jsxs("div",{className:"mt-3",children:[d.jsx(Ax,{types:r,title:"Edit ".concat(a==null?void 0:a.name),onDelete:()=>s(a==null?void 0:a.name),onSave:u=>{const c=[...t],f=c.findIndex(h=>h.name===(a==null?void 0:a.name));c[f]=u,o("".concat(e),c)},isVisible:a!==null,requestClose:()=>l(null),data:a}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:e}),d.jsx("p",{onClick:()=>i(gf(r,n)),children:"Add"})]}),d.jsx(qf,{}),d.jsx("div",{className:"flex flex-col gap-1 mt-3",children:t.map(u=>d.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>l(u),children:d.jsx("p",{children:u.name})},u.name))})]},a==null?void 0:a.name)}function xU({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){var u;const o=ln.useValue(),s=Un(o.versionId),[a,l]=R.useState({name:"New Param",type:"string",isArray:!1});return R.useEffect(()=>{e&&l(e)},[e]),d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:"Edit Type Property",onClose:n}),d.jsxs(ur,{children:[d.jsx(Kt,{id:"name",label:"Name",placeholder:"baba yaga",value:a.name,onChange:c=>l({...a,name:c}),isValid:!0,errorMessage:""}),d.jsxs(dt,{id:"type",label:"Type",value:a.type,onChange:c=>l({...a,type:c}),children:[d.jsx("option",{value:"none",children:"none"}),d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),d.jsx("option",{value:"blueprint",children:"blueprint"}),(u=s==null?void 0:s.data)==null?void 0:u.types.map(c=>d.jsx("option",{value:c.name,children:c.name},c.name))]}),d.jsx(Kn,{id:"is-array",label:"Is Array?",checked:a.isArray,onChange:c=>l({...a,isArray:c})})]}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i&&i(),n()},children:i?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!e)return n();r(a),n()},children:"Update"})]})]})}function Kf({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o}){const[s,a]=R.useState("");return R.useEffect(()=>{e&&a(e)},[e]),d.jsxs(ar,{isOpen:n,onClose:r,children:[d.jsx(lr,{title:t,onClose:r}),d.jsx(ur,{children:d.jsx(Kt,{id:"name",label:"Name",placeholder:"baba yaga",value:s,onChange:a,isValid:!0,errorMessage:""})}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{o&&o(),r()},children:o?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!s)return r();i(s),r()},children:"Update"})]})]})}function SU({data:e,title:t="Edit Number",isOpen:n,requestClose:r,onSave:i,onDelete:o}){const[s,a]=R.useState("");return R.useEffect(()=>{e&&a(e)},[e]),d.jsxs(ar,{isOpen:n,onClose:r,children:[d.jsx(lr,{title:t,onClose:r}),d.jsx(ur,{children:d.jsx(Kt,{type:"number",id:"name",label:"Name",placeholder:"baba yaga",value:s,onChange:a,isValid:!0,errorMessage:""})}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{o&&o(),r()},children:o?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!s)return r();i(s),r()},children:"Update"})]})]})}const EU=({isOpen:e,title:t,data:n,requestClose:r,onConfirm:i})=>e?d.jsxs(ar,{isOpen:e,onClose:r,children:[d.jsx(lr,{title:t,onClose:r}),d.jsx(ur,{className:"text-center",children:d.jsxs("div",{className:"p-4",children:[d.jsx("p",{className:"text-lg font-medium mb-2",children:n.message}),d.jsx("p",{className:"text-sm font-semibold text-red-500",children:"This action cannot be undone."})]})}),d.jsx(wr,{children:d.jsx(kt,{color:n.type,onClick:()=>{i(void 0),r()},children:"Confirm"})})]}):null,kU=({data:e,isOpen:t,requestClose:n,onSave:r})=>{if(!t||!e||e.length===0)return null;const[i,o]=R.useState(0),[s,a]=R.useState(e[0]),[l,u]=R.useState([]),c=f=>{u([...l,f]);const h=i+1;o(h),a(e[h]),h>=e.length&&(r(l),n())};return d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:"Conflicts for Local:".concat(s.local.name," / Remote:").concat(s.remote.name),onClose:n}),d.jsx(ur,{className:"text-center",children:d.jsxs("div",{className:"p-4",children:[d.jsxs("p",{className:"text-lg font-medium mb-2",children:["Local last updated ",s.local.updated_at]}),d.jsxs("p",{className:"text-lg font-medium mb-2",children:["Remote last updated ",s.remote.updated_at]})]})}),d.jsxs(wr,{children:[d.jsx(kt,{color:"light",onClick:()=>c(s.local),children:"Keep Local"}),d.jsx(kt,{color:"primary",onClick:()=>c(s.remote),children:"Keep Remote"})]})]})};function NT(e,t){return function(){return e.apply(t,arguments)}}const{toString:CU}=Object.prototype,{getPrototypeOf:Rx}=Object,{iterator:Wm,toStringTag:RT}=Symbol,Vm=(e=>t=>{const n=CU.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_o=e=>(e=e.toLowerCase(),t=>Vm(t)===e),qm=e=>t=>typeof t===e,{isArray:ic}=Array,mf=qm("undefined");function jU(e){return e!==null&&!mf(e)&&e.constructor!==null&&!mf(e.constructor)&&di(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const TT=_o("ArrayBuffer");function AU(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&TT(e.buffer),t}const NU=qm("string"),di=qm("function"),IT=qm("number"),Km=e=>e!==null&&typeof e=="object",RU=e=>e===!0||e===!1,Cp=e=>{if(Vm(e)!=="object")return!1;const t=Rx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(RT in e)&&!(Wm in e)},TU=_o("Date"),IU=_o("File"),PU=_o("Blob"),OU=_o("FileList"),$U=e=>Km(e)&&di(e.pipe),MU=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||di(e.append)&&((t=Vm(e))==="formdata"||t==="object"&&di(e.toString)&&e.toString()==="[object FormData]"))},DU=_o("URLSearchParams"),[LU,BU,FU,zU]=["ReadableStream","Request","Response","Headers"].map(_o),HU=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gf(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),ic(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let a;for(r=0;r<s;r++)a=o[r],t.call(null,e[a],a,e)}}function PT(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const il=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,OT=e=>!mf(e)&&e!==il;function tb(){const{caseless:e}=OT(this)&&this||{},t={},n=(r,i)=>{const o=e&&PT(t,i)||i;Cp(t[o])&&Cp(r)?t[o]=tb(t[o],r):Cp(r)?t[o]=tb({},r):ic(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Gf(arguments[r],n);return t}const UU=(e,t,n,{allOwnKeys:r}={})=>(Gf(t,(i,o)=>{n&&di(i)?e[o]=NT(i,n):e[o]=i},{allOwnKeys:r}),e),WU=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),VU=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},qU=(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=n!==!1&&Rx(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},KU=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},GU=e=>{if(!e)return null;if(ic(e))return e;let t=e.length;if(!IT(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},YU=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Rx(Uint8Array)),XU=(e,t)=>{const r=(e&&e[Wm]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},JU=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},QU=_o("HTMLFormElement"),ZU=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),_2=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),eW=_o("RegExp"),$T=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Gf(n,(i,o)=>{let s;(s=t(i,o,e))!==!1&&(r[o]=s||i)}),Object.defineProperties(e,r)},tW=e=>{$T(e,(t,n)=>{if(di(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(di(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},nW=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return ic(e)?r(e):r(String(e).split(t)),n},rW=()=>{},iW=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function oW(e){return!!(e&&di(e.append)&&e[RT]==="FormData"&&e[Wm])}const sW=e=>{const t=new Array(10),n=(r,i)=>{if(Km(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=ic(r)?[]:{};return Gf(r,(s,a)=>{const l=n(s,i+1);!mf(l)&&(o[a]=l)}),t[i]=void 0,o}}return r};return n(e,0)},aW=_o("AsyncFunction"),lW=e=>e&&(Km(e)||di(e))&&di(e.then)&&di(e.catch),MT=((e,t)=>e?setImmediate:t?((n,r)=>(il.addEventListener("message",({source:i,data:o})=>{i===il&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),il.postMessage(n,"*")}))("axios@".concat(Math.random()),[]):n=>setTimeout(n))(typeof setImmediate=="function",di(il.postMessage)),uW=typeof queueMicrotask<"u"?queueMicrotask.bind(il):typeof process<"u"&&process.nextTick||MT,cW=e=>e!=null&&di(e[Wm]),$e={isArray:ic,isArrayBuffer:TT,isBuffer:jU,isFormData:MU,isArrayBufferView:AU,isString:NU,isNumber:IT,isBoolean:RU,isObject:Km,isPlainObject:Cp,isReadableStream:LU,isRequest:BU,isResponse:FU,isHeaders:zU,isUndefined:mf,isDate:TU,isFile:IU,isBlob:PU,isRegExp:eW,isFunction:di,isStream:$U,isURLSearchParams:DU,isTypedArray:YU,isFileList:OU,forEach:Gf,merge:tb,extend:UU,trim:HU,stripBOM:WU,inherits:VU,toFlatObject:qU,kindOf:Vm,kindOfTest:_o,endsWith:KU,toArray:GU,forEachEntry:XU,matchAll:JU,isHTMLForm:QU,hasOwnProperty:_2,hasOwnProp:_2,reduceDescriptors:$T,freezeMethods:tW,toObjectSet:nW,toCamelCase:ZU,noop:rW,toFiniteNumber:iW,findKey:PT,global:il,isContextDefined:OT,isSpecCompliantForm:oW,toJSONObject:sW,isAsyncFn:aW,isThenable:lW,setImmediate:MT,asap:uW,isIterable:cW};function Dt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}$e.inherits(Dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}});const DT=Dt.prototype,LT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{LT[e]={value:e}});Object.defineProperties(Dt,LT);Object.defineProperty(DT,"isAxiosError",{value:!0});Dt.from=(e,t,n,r,i,o)=>{const s=Object.create(DT);return $e.toFlatObject(e,s,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Dt.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const dW=null;function nb(e){return $e.isPlainObject(e)||$e.isArray(e)}function BT(e){return $e.endsWith(e,"[]")?e.slice(0,-2):e}function x2(e,t,n){return e?e.concat(t).map(function(i,o){return i=BT(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function fW(e){return $e.isArray(e)&&!e.some(nb)}const hW=$e.toFlatObject($e,{},null,function(t){return/^is[A-Z]/.test(t)});function Gm(e,t,n){if(!$e.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=$e.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!$e.isUndefined(_[y])});const r=n.metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&$e.isSpecCompliantForm(t);if(!$e.isFunction(i))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if($e.isDate(b))return b.toISOString();if(!l&&$e.isBlob(b))throw new Dt("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(b)||$e.isTypedArray(b)?l&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function c(b,y,_){let m=b;if(b&&!_&&typeof b=="object"){if($e.endsWith(y,"{}"))y=r?y:y.slice(0,-2),b=JSON.stringify(b);else if($e.isArray(b)&&fW(b)||($e.isFileList(b)||$e.endsWith(y,"[]"))&&(m=$e.toArray(b)))return y=BT(y),m.forEach(function(w,S){!($e.isUndefined(w)||w===null)&&t.append(s===!0?x2([y],S,o):s===null?y:y+"[]",u(w))}),!1}return nb(b)?!0:(t.append(x2(_,y,o),u(b)),!1)}const f=[],h=Object.assign(hW,{defaultVisitor:c,convertValue:u,isVisitable:nb});function p(b,y){if(!$e.isUndefined(b)){if(f.indexOf(b)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(b),$e.forEach(b,function(m,v){(!($e.isUndefined(m)||m===null)&&i.call(t,m,$e.isString(v)?v.trim():v,y,h))===!0&&p(m,y?y.concat(v):[v])}),f.pop()}}if(!$e.isObject(e))throw new TypeError("data must be an object");return p(e),t}function S2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Tx(e,t){this._pairs=[],e&&Gm(e,this,t)}const FT=Tx.prototype;FT.append=function(t,n){this._pairs.push([t,n])};FT.toString=function(t){const n=t?function(r){return t.call(this,r,S2)}:S2;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function pW(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zT(e,t,n){if(!t)return e;const r=n&&n.encode||pW;$e.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=$e.isURLSearchParams(t)?t.toString():new Tx(t,n).toString(r),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class E2{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$e.forEach(this.handlers,function(r){r!==null&&t(r)})}}const HT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gW=typeof URLSearchParams<"u"?URLSearchParams:Tx,mW=typeof FormData<"u"?FormData:null,yW=typeof Blob<"u"?Blob:null,vW={isBrowser:!0,classes:{URLSearchParams:gW,FormData:mW,Blob:yW},protocols:["http","https","file","blob","url","data"]},Ix=typeof window<"u"&&typeof document<"u",rb=typeof navigator=="object"&&navigator||void 0,wW=Ix&&(!rb||["ReactNative","NativeScript","NS"].indexOf(rb.product)<0),bW=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_W=Ix&&window.location.href||"http://localhost",xW=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ix,hasStandardBrowserEnv:wW,hasStandardBrowserWebWorkerEnv:bW,navigator:rb,origin:_W},Symbol.toStringTag,{value:"Module"})),Or={...xW,...vW};function SW(e,t){return Gm(e,new Or.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return Or.isNode&&$e.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function EW(e){return $e.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function kW(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function UT(e){function t(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),l=o>=n.length;return s=!s&&$e.isArray(i)?i.length:s,l?($e.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!a):((!i[s]||!$e.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],o)&&$e.isArray(i[s])&&(i[s]=kW(i[s])),!a)}if($e.isFormData(e)&&$e.isFunction(e.entries)){const n={};return $e.forEachEntry(e,(r,i)=>{t(EW(r),i,n,0)}),n}return null}function CW(e,t,n){if($e.isString(e))try{return(t||JSON.parse)(e),$e.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Yf={transitional:HT,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=$e.isObject(t);if(o&&$e.isHTMLForm(t)&&(t=new FormData(t)),$e.isFormData(t))return i?JSON.stringify(UT(t)):t;if($e.isArrayBuffer(t)||$e.isBuffer(t)||$e.isStream(t)||$e.isFile(t)||$e.isBlob(t)||$e.isReadableStream(t))return t;if($e.isArrayBufferView(t))return t.buffer;if($e.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return SW(t,this.formSerializer).toString();if((a=$e.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Gm(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),CW(t)):t}],transformResponse:[function(t){const n=this.transitional||Yf.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if($e.isResponse(t)||$e.isReadableStream(t))return t;if(t&&$e.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?Dt.from(a,Dt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Or.classes.FormData,Blob:Or.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],e=>{Yf.headers[e]={}});const jW=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AW=e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&jW[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},k2=Symbol("internals");function Mc(e){return e&&String(e).trim().toLowerCase()}function jp(e){return e===!1||e==null?e:$e.isArray(e)?e.map(jp):String(e)}function NW(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const RW=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function P0(e,t,n,r,i){if($e.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!$e.isString(t)){if($e.isString(r))return t.indexOf(r)!==-1;if($e.isRegExp(r))return r.test(t)}}function TW(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function IW(e,t){const n=$e.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,s){return this[r].call(this,t,i,o,s)},configurable:!0})})}let fi=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(a,l,u){const c=Mc(l);if(!c)throw new Error("header name must be a non-empty string");const f=$e.findKey(i,c);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||l]=jp(a))}const s=(a,l)=>$e.forEach(a,(u,c)=>o(u,c,l));if($e.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if($e.isString(t)&&(t=t.trim())&&!RW(t))s(AW(t),n);else if($e.isObject(t)&&$e.isIterable(t)){let a={},l,u;for(const c of t){if(!$e.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[u=c[0]]=(l=a[u])?$e.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}s(a,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Mc(t),t){const r=$e.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return NW(i);if($e.isFunction(n))return n.call(this,i,r);if($e.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Mc(t),t){const r=$e.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||P0(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(s){if(s=Mc(s),s){const a=$e.findKey(r,s);a&&(!n||P0(r,r[a],a,n))&&(delete r[a],i=!0)}}return $e.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||P0(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return $e.forEach(this,(i,o)=>{const s=$e.findKey(r,o);if(s){n[s]=jp(i),delete n[o];return}const a=t?TW(o):String(o).trim();a!==o&&delete n[o],n[a]=jp(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return $e.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&$e.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[k2]=this[k2]={accessors:{}}).accessors,i=this.prototype;function o(s){const a=Mc(s);r[a]||(IW(i,s),r[a]=!0)}return $e.isArray(t)?t.forEach(o):o(t),this}};fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$e.reduceDescriptors(fi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});$e.freezeMethods(fi);function O0(e,t){const n=this||Yf,r=t||n,i=fi.from(r.headers);let o=r.data;return $e.forEach(e,function(a){o=a.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function WT(e){return!!(e&&e.__CANCEL__)}function oc(e,t,n){Dt.call(this,e==null?"canceled":e,Dt.ERR_CANCELED,t,n),this.name="CanceledError"}$e.inherits(oc,Dt,{__CANCEL__:!0});function VT(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Dt("Request failed with status code "+n.status,[Dt.ERR_BAD_REQUEST,Dt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function PW(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function OW(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,s;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=r[o];s||(s=u),n[i]=l,r[i]=u;let f=o,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-s<t)return;const p=c&&u-c;return p?Math.round(h*1e3/p):void 0}}function $W(e,t){let n=0,r=1e3/t,i,o;const s=(u,c=Date.now())=>{n=c,i=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const c=Date.now(),f=c-n;f>=r?s(u,c):(i=u,o||(o=setTimeout(()=>{o=null,s(i)},r-f)))},()=>i&&s(i)]}const Rg=(e,t,n=3)=>{let r=0;const i=OW(50,250);return $W(o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,l=s-r,u=i(l),c=s<=a;r=s;const f={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-s)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},C2=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},j2=e=>(...t)=>$e.asap(()=>e(...t)),MW=Or.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Or.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Or.origin),Or.navigator&&/(msie|trident)/i.test(Or.navigator.userAgent)):()=>!0,DW=Or.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];$e.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),$e.isString(r)&&s.push("path="+r),$e.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function LW(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function BW(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function qT(e,t,n){let r=!LW(t);return e&&(r||n==!1)?BW(e,t):t}const A2=e=>e instanceof fi?{...e}:e;function El(e,t){t=t||{};const n={};function r(u,c,f,h){return $e.isPlainObject(u)&&$e.isPlainObject(c)?$e.merge.call({caseless:h},u,c):$e.isPlainObject(c)?$e.merge({},c):$e.isArray(c)?c.slice():c}function i(u,c,f,h){if($e.isUndefined(c)){if(!$e.isUndefined(u))return r(void 0,u,f,h)}else return r(u,c,f,h)}function o(u,c){if(!$e.isUndefined(c))return r(void 0,c)}function s(u,c){if($e.isUndefined(c)){if(!$e.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,f){if(f in t)return r(u,c);if(f in e)return r(void 0,u)}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(u,c,f)=>i(A2(u),A2(c),f,!0)};return $e.forEach(Object.keys(Object.assign({},e,t)),function(c){const f=l[c]||i,h=f(e[c],t[c],c);$e.isUndefined(h)&&f!==a||(n[c]=h)}),n}const KT=e=>{const t=El({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:a}=t;t.headers=s=fi.from(s),t.url=zT(qT(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if($e.isFormData(n)){if(Or.hasStandardBrowserEnv||Or.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[u,...c]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Or.hasStandardBrowserEnv&&(r&&$e.isFunction(r)&&(r=r(t)),r||r!==!1&&MW(t.url))){const u=i&&o&&DW.read(o);u&&s.set(i,u)}return t},FW=typeof XMLHttpRequest<"u",zW=FW&&function(e){return new Promise(function(n,r){const i=KT(e);let o=i.data;const s=fi.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,c,f,h,p,b;function y(){p&&p(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function m(){if(!_)return;const w=fi.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:w,config:e,request:_};VT(function(T){n(T),y()},function(T){r(T),y()},k),_=null}"onloadend"in _?_.onloadend=m:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(m)},_.onabort=function(){_&&(r(new Dt("Request aborted",Dt.ECONNABORTED,e,_)),_=null)},_.onerror=function(){r(new Dt("Network Error",Dt.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||HT;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new Dt(S,k.clarifyTimeoutError?Dt.ETIMEDOUT:Dt.ECONNABORTED,e,_)),_=null},o===void 0&&s.setContentType(null),"setRequestHeader"in _&&$e.forEach(s.toJSON(),function(S,k){_.setRequestHeader(k,S)}),$e.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),a&&a!=="json"&&(_.responseType=i.responseType),u&&([h,b]=Rg(u,!0),_.addEventListener("progress",h)),l&&_.upload&&([f,p]=Rg(l),_.upload.addEventListener("progress",f),_.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(c=w=>{_&&(r(!w||w.type?new oc(null,e,_):w),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const v=PW(i.url);if(v&&Or.protocols.indexOf(v)===-1){r(new Dt("Unsupported protocol "+v+":",Dt.ERR_BAD_REQUEST,e));return}_.send(o||null)})},HW=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(u){if(!i){i=!0,a();const c=u instanceof Error?u:this.reason;r.abort(c instanceof Dt?c:new oc(c instanceof Error?c.message:c))}};let s=t&&setTimeout(()=>{s=null,o(new Dt("timeout ".concat(t," of ms exceeded"),Dt.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>$e.asap(a),l}},UW=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},WW=async function*(e,t){for await(const n of VW(e))yield*UW(n,t)},VW=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},N2=(e,t,n,r)=>{const i=WW(e,t);let o=0,s,a=l=>{s||(s=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await i.next();if(u){a(),l.close();return}let f=c.byteLength;if(n){let h=o+=f;n(h)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Ym=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",GT=Ym&&typeof ReadableStream=="function",qW=Ym&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),YT=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},KW=GT&&YT(()=>{let e=!1;const t=new Request(Or.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),R2=64*1024,ib=GT&&YT(()=>$e.isReadableStream(new Response("").body)),Tg={stream:ib&&(e=>e.body)};Ym&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Tg[t]&&(Tg[t]=$e.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Dt("Response type '".concat(t,"' is not supported"),Dt.ERR_NOT_SUPPORT,r)})})})(new Response);const GW=async e=>{if(e==null)return 0;if($e.isBlob(e))return e.size;if($e.isSpecCompliantForm(e))return(await new Request(Or.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($e.isArrayBufferView(e)||$e.isArrayBuffer(e))return e.byteLength;if($e.isURLSearchParams(e)&&(e=e+""),$e.isString(e))return(await qW(e)).byteLength},YW=async(e,t)=>{const n=$e.toFiniteNumber(e.getContentLength());return n==null?GW(t):n},XW=Ym&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:f="same-origin",fetchOptions:h}=KT(e);u=u?(u+"").toLowerCase():"text";let p=HW([i,o&&o.toAbortSignal()],s),b;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let _;try{if(l&&KW&&n!=="get"&&n!=="head"&&(_=await YW(c,r))!==0){let k=new Request(t,{method:"POST",body:r,duplex:"half"}),A;if($e.isFormData(r)&&(A=k.headers.get("content-type"))&&c.setContentType(A),k.body){const[T,P]=C2(_,Rg(j2(l)));r=N2(k.body,R2,T,P)}}$e.isString(f)||(f=f?"include":"omit");const m="credentials"in Request.prototype;b=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:m?f:void 0});let v=await fetch(b);const w=ib&&(u==="stream"||u==="response");if(ib&&(a||w&&y)){const k={};["status","statusText","headers"].forEach(Y=>{k[Y]=v[Y]});const A=$e.toFiniteNumber(v.headers.get("content-length")),[T,P]=a&&C2(A,Rg(j2(a),!0))||[];v=new Response(N2(v.body,R2,T,()=>{P&&P(),y&&y()}),k)}u=u||"text";let S=await Tg[$e.findKey(Tg,u)||"text"](v,e);return!w&&y&&y(),await new Promise((k,A)=>{VT(k,A,{data:S,headers:fi.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:b})})}catch(m){throw y&&y(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new Dt("Network Error",Dt.ERR_NETWORK,e,b),{cause:m.cause||m}):Dt.from(m,m&&m.code,e,b)}}),ob={http:dW,xhr:zW,fetch:XW};$e.forEach(ob,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const T2=e=>"- ".concat(e),JW=e=>$e.isFunction(e)||e===null||e===!1,XT={getAdapter:e=>{e=$e.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let s;if(r=n,!JW(n)&&(r=ob[(s=String(n)).toLowerCase()],r===void 0))throw new Dt("Unknown adapter '".concat(s,"'"));if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([a,l])=>"adapter ".concat(a," ")+(l===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?"since :\n"+o.map(T2).join("\n"):" "+T2(o[0]):"as no adapter specified";throw new Dt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:ob};function $0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new oc(null,e)}function I2(e){return $0(e),e.headers=fi.from(e.headers),e.data=O0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),XT.getAdapter(e.adapter||Yf.adapter)(e).then(function(r){return $0(e),r.data=O0.call(e,e.transformResponse,r),r.headers=fi.from(r.headers),r},function(r){return WT(r)||($0(e),r&&r.response&&(r.response.data=O0.call(e,e.transformResponse,r.response),r.response.headers=fi.from(r.response.headers))),Promise.reject(r)})}const JT="1.9.0",Xm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Xm[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const P2={};Xm.transitional=function(t,n,r){function i(o,s){return"[Axios v"+JT+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,a)=>{if(t===!1)throw new Dt(i(s," has been removed"+(n?" in "+n:"")),Dt.ERR_DEPRECATED);return n&&!P2[s]&&(P2[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,a):!0}};Xm.spelling=function(t){return(n,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(t)),!0)};function QW(e,t,n){if(typeof e!="object")throw new Dt("options must be an object",Dt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const a=e[o],l=a===void 0||s(a,o,e);if(l!==!0)throw new Dt("option "+o+" must be "+l,Dt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Dt("Unknown option "+o,Dt.ERR_BAD_OPTION)}}const Ap={assertOptions:QW,validators:Xm},Oo=Ap.validators;let dl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new E2,response:new E2}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+o):r.stack=o}catch(s){}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=El(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Ap.assertOptions(r,{silentJSONParsing:Oo.transitional(Oo.boolean),forcedJSONParsing:Oo.transitional(Oo.boolean),clarifyTimeoutError:Oo.transitional(Oo.boolean)},!1),i!=null&&($e.isFunction(i)?n.paramsSerializer={serialize:i}:Ap.assertOptions(i,{encode:Oo.function,serialize:Oo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ap.assertOptions(n,{baseUrl:Oo.spelling("baseURL"),withXsrfToken:Oo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&$e.merge(o.common,o[n.method]);o&&$e.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),n.headers=fi.concat(s,o);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,f=0,h;if(!l){const b=[I2.bind(this),void 0];for(b.unshift.apply(b,a),b.push.apply(b,u),h=b.length,c=Promise.resolve(n);f<h;)c=c.then(b[f++],b[f++]);return c}h=a.length;let p=n;for(f=0;f<h;){const b=a[f++],y=a[f++];try{p=b(p)}catch(_){y.call(this,_);break}}try{c=I2.call(this,p)}catch(b){return Promise.reject(b)}for(f=0,h=u.length;f<h;)c=c.then(u[f++],u[f++]);return c}getUri(t){t=El(this.defaults,t);const n=qT(t.baseURL,t.url,t.allowAbsoluteUrls);return zT(n,t.params,t.paramsSerializer)}};$e.forEach(["delete","get","head","options"],function(t){dl.prototype[t]=function(n,r){return this.request(El(r||{},{method:t,url:n,data:(r||{}).data}))}});$e.forEach(["post","put","patch"],function(t){function n(r){return function(o,s,a){return this.request(El(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}dl.prototype[t]=n(),dl.prototype[t+"Form"]=n(!0)});let ZW=class QT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(a=>{r.subscribe(a),o=a}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},t(function(o,s,a){r.reason||(r.reason=new oc(o,s,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new QT(function(i){t=i}),cancel:t}}};function eV(e){return function(n){return e.apply(null,n)}}function tV(e){return $e.isObject(e)&&e.isAxiosError===!0}const sb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sb).forEach(([e,t])=>{sb[t]=e});function ZT(e){const t=new dl(e),n=NT(dl.prototype.request,t);return $e.extend(n,dl.prototype,t,{allOwnKeys:!0}),$e.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return ZT(El(e,i))},n}const Hn=ZT(Yf);Hn.Axios=dl;Hn.CanceledError=oc;Hn.CancelToken=ZW;Hn.isCancel=WT;Hn.VERSION=JT;Hn.toFormData=Gm;Hn.AxiosError=Dt;Hn.Cancel=Hn.CanceledError;Hn.all=function(t){return Promise.all(t)};Hn.spread=eV;Hn.isAxiosError=tV;Hn.mergeConfig=El;Hn.AxiosHeaders=fi;Hn.formToJSON=e=>UT($e.isHTMLForm(e)?new FormData(e):e);Hn.getAdapter=XT.getAdapter;Hn.HttpStatusCode=sb;Hn.default=Hn;const{Axios:Boe,AxiosError:Foe,CanceledError:zoe,isCancel:Hoe,CancelToken:Uoe,VERSION:Woe,all:Voe,Cancel:qoe,isAxiosError:Koe,spread:Goe,toFormData:Yoe,AxiosHeaders:Xoe,HttpStatusCode:Joe,formToJSON:Qoe,getAdapter:Zoe,mergeConfig:ese}=Hn,nV="modulepreload",rV=function(e){return"/"+e},O2={},iV=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=rV(l),l in O2)return;O2[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(l,'"]').concat(c)))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":nV,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(l))))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var qu;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(qu||(qu={}));class M0 extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const oV=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},sV=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>t!==null?t.name:oV(e),o=()=>i()!=="web",s=f=>{const h=u.get(f);return!!(h!=null&&h.platforms.has(i())||a(f))},a=f=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(p=>p.name===f)},l=f=>e.console.error(f),u=new Map,c=(f,h={})=>{const p=u.get(f);if(p)return console.warn('Capacitor plugin "'.concat(f,'" already registered. Cannot register plugins twice.')),p.proxy;const b=i(),y=a(f);let _;const m=async()=>(!_&&b in h?_=typeof h[b]=="function"?_=await h[b]():_=h[b]:t!==null&&!_&&"web"in h&&(_=typeof h.web=="function"?_=await h.web():_=h.web),_),v=(P,Y)=>{var D,H;if(y){const Q=y==null?void 0:y.methods.find(U=>Y===U.name);if(Q)return Q.rtype==="promise"?U=>n.nativePromise(f,Y.toString(),U):(U,L)=>n.nativeCallback(f,Y.toString(),U,L);if(P)return(D=P[Y])===null||D===void 0?void 0:D.bind(P)}else{if(P)return(H=P[Y])===null||H===void 0?void 0:H.bind(P);throw new M0('"'.concat(f,'" plugin is not implemented on ').concat(b),qu.Unimplemented)}},w=P=>{let Y;const D=(...H)=>{const Q=m().then(U=>{const L=v(U,P);if(L){const te=L(...H);return Y=te==null?void 0:te.remove,te}else throw new M0('"'.concat(f,".").concat(P,'()" is not implemented on ').concat(b),qu.Unimplemented)});return P==="addListener"&&(Q.remove=async()=>Y()),Q};return D.toString=()=>"".concat(P.toString(),"() { [capacitor code] }"),Object.defineProperty(D,"name",{value:P,writable:!1,configurable:!1}),D},S=w("addListener"),k=w("removeListener"),A=(P,Y)=>{const D=S({eventName:P},Y),H=async()=>{const U=await D;k({eventName:P,callbackId:U},Y)},Q=new Promise(U=>D.then(()=>U({remove:H})));return Q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await H()},Q},T=new Proxy({},{get(P,Y){switch(Y){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?A:S;case"removeListener":return k;default:return w(Y)}}});return r[f]=T,u.set(f,{name:f,proxy:T,platforms:new Set([...Object.keys(h),...y?[b]:[]])}),T};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=i,n.handleError=l,n.isNativePlatform=o,n.isPluginAvailable=s,n.registerPlugin=c,n.Exception=M0,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},aV=e=>e.Capacitor=sV(e),ab=aV(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Px=ab.registerPlugin;class e4{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,n);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const i=this.listeners[t];if(!i){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}i.forEach(o=>o(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new ab.Exception(t,qu.Unimplemented)}unavailable(t="not available"){return new ab.Exception(t,qu.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const i=r.indexOf(n);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const $2=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),M2=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lV extends e4{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=M2(i).trim(),o=M2(o).trim(),n[i]=o}),n}async setCookie(t){try{const n=$2(t.key),r=$2(t.value),i="; expires=".concat((t.expires||"").replace("expires=","")),o=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?"domain=".concat(t.url):"";document.cookie="".concat(n,"=").concat(r||"").concat(i,"; path=").concat(o,"; ").concat(s,";")}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie="".concat(t.key,"=; Max-Age=0")}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Px("CapacitorCookies",{web:()=>new lV});const uV=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),cV=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,o,s)=>(i[o]=e[t[s]],i),{})},dV=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[o,s]=i;let a,l;return Array.isArray(s)?(l="",s.forEach(u=>{a=t?encodeURIComponent(u):u,l+="".concat(o,"=").concat(a,"&")}),l.slice(0,-1)):(a=t?encodeURIComponent(s):s,l="".concat(o,"=").concat(a)),"".concat(r,"&").concat(l)},"").substr(1):null,fV=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=cV(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))o.set(s,a);n.body=o.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((a,l)=>{o.append(l,a)});else for(const a of Object.keys(e.data))o.append(a,e.data[a]);n.body=o;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(i.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class hV extends e4{async request(t){const n=fV(t,t.webFetchExtra),r=dV(t.params,t.shouldEncodeUrlParams),i=r?"".concat(t.url,"?").concat(r):t.url,o=await fetch(i,n),s=o.headers.get("content-type")||"";let{responseType:a="text"}=o.ok?t:{};s.includes("application/json")&&(a="json");let l,u;switch(a){case"arraybuffer":case"blob":u=await o.blob(),l=await uV(u);break;case"json":l=await o.json();break;case"document":case"text":default:l=await o.text()}const c={};return o.headers.forEach((f,h)=>{c[h]=f}),{data:l,headers:c,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Px("CapacitorHttp",{web:()=>new hV});const pV=Px("Device",{web:()=>iV(()=>import("./web-C-gL3Lli.js"),[]).then(e=>new e.DeviceWeb)});function gV(){const e=navigator.userAgent,t=navigator.platform,n=navigator.language;return"Web-".concat(t,"-").concat(n,"-").concat(e.slice(0,15))}async function mV(){const e=await pV.getInfo();return"".concat(e.manufacturer||"Unknown"," ").concat(e.model||"Device")}async function t4(){return window.Capacitor&&window.Capacitor.isNativePlatform?await mV():gV()}async function Ox(e,t){const[n,r,i,o]=await Promise.all([xt.characters.toArray(),xt.systems.toArray(),xt.subscriptions.toArray(),xt.versions.toArray()]),s=new Map;let a=[];n.forEach(f=>{const[h,...p]=f.local_id.split("-");if(f.user_id!=="none"||h!=="none")return;const b="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,b),a.push({...f,user_id:e,local_id:b})});let l=[];r.forEach(f=>{const[h,...p]=f.local_id.split("-"),b=f.user_id==="none",y=i.find(m=>m.resource_id===f.local_id);if(!b&&!y)return;const _="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,_),l.push({...f,user_id:e,local_id:_})});let u=[];o.forEach(f=>{const[h,...p]=f.local_id.split("-"),b=f.user_id==="none",y=i.find(m=>m.version_id===f.local_id);if(!b&&!y)return;const _="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,_),u.push({...f,user_id:e,local_id:_})});let c=[];i.forEach(f=>{const[h,...p]=f.local_id.split("-");if(!(f.user_id==="none"))return;const y="".concat(t,"-").concat(p.join("-"));s.set(f.local_id,y),c.push({...f,user_id:e,local_id:y})}),a=a.map(f=>({...f,system:{local_id:s.get(f.system.local_id),version_id:s.get(f.system.version_id)}})),c=c.map(f=>({...f,resource_id:s.get(f.resource_id),version_id:s.get(f.version_id)})),u=u.map(f=>({...f,reference_id:s.get(f.reference_id)})),await Promise.all([xt.subscriptions.clear(),xt.versions.clear(),xt.systems.clear(),xt.characters.clear()]),xt.characters.bulkPut(a),xt.systems.bulkPut(l),xt.versions.bulkPut(u),xt.subscriptions.bulkPut(c)}const yV=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Bn=Hn.create({baseURL:yV?"http://localhost:3000/v1":"https://api.bardsballad.com/v1"});Bn.interceptors.request.use(async e=>{const t=await yr.get("token"),n=await yr.get("apiKey");return t&&(e.headers.Authorization="Bearer ".concat(t),e.headers["x-api-key"]=n||""),e});Bn.interceptors.response.use(async e=>{const t=e.headers.authorization,n=e.headers["x-api-key"];if(t){const r=t.replace("Bearer ","");Lm(r)}return n&&await yr.set("apiKey",n),e},e=>Promise.reject(e));const $x=async()=>{try{return(await Bn.get("/ping")).status===200}catch(e){return!1}},vV=async e=>{try{return(await Bn.get("/marketplace/".concat(e))).data}catch(t){return null}},wV=async e=>{try{return(await Bn.post("/marketplace",e)).status===200}catch(t){return!1}},bV=async()=>{try{return(await Bn.get("/marketplace")).data}catch(e){return[]}},_V=async e=>{try{return(await Bn.get("/marketplace/".concat(e,"/versions"))).data}catch(t){return[]}},xV=async e=>{try{return(await Bn.get("/marketplace/subscribe/".concat(e))).data}catch(t){return null}},SV=async(e,t,n)=>{const r=await Bn.post("/auth/register",{username:e,email:t,password:n,deviceName:await t4()}),{accessToken:i,apiKey:o,deviceId:s}=r.data;if(!(i|o|s))return;const a=await Lm(i);yr.set("apiKey",o),yr.set("deviceId",s),Ox(a.id,s)},EV=async(e,t)=>{const n=await Bn.post("/auth/login",{username:e,password:t,deviceName:await t4(),deviceId:await yr.get("deviceId")}),{accessToken:r,apiKey:i,deviceId:o}=n.data;if(!(r|i|o))return;const s=await Lm(r);yr.set("apiKey",i),yr.set("deviceId",o),Ox(s.id,o)},kV=async()=>{yr.clear(),En.clear(),nr.set({isLoggedIn:!1,user:null,synced_characters:[]}),await Promise.all(xt.tables.map(e=>e.clear()))},n4=async e=>{d2(e);const t=await Bn.post("/characters/change-synced",{characterIds:e});return d2(e),t.data},CV=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/versions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},jV=async e=>await Bn.post("/versions/push",e).then(t=>t.data),AV=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/subscriptions/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},NV=async e=>await Bn.post("/subscriptions/push",e).then(t=>t.data),RV=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/systems/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},TV=async e=>await Bn.post("/systems/push",e).then(t=>t.data),IV=async(e,t)=>{const n=(e==null?void 0:e.updated_at)||0,r=(e==null?void 0:e.id)||"";return await Bn.get("/characters/pull",{params:{updated_at:n,id:r,batchSize:t}}).then(i=>i.data)},PV=async e=>await Bn.post("/characters/push",e).then(t=>t.data),OV=async()=>await Bn.get("/stripe/create-checkout-session").then(e=>e.data),$V=async()=>await Bn.get("/stripe/create-portal-session").then(e=>e.data),MV=async()=>{const e=await Bn.get("/stripe/sync-stripe-data"),{newAccessToken:t}=e.data;t&&Lm(t)},DV=e=>{const{isOpen:t,requestClose:n}=e,[r,i]=R.useState(!0),[o,s]=R.useState(""),[a,l]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),p=R.useMemo(()=>r?"Sign Up":"Login",[r]);nr.useValue();const b=async()=>{await SV(o,a,u)},y=async()=>{await EV(o,u)};return d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:p,onClose:n}),d.jsxs(ur,{children:[d.jsx(Kt,{id:"username",label:r?"Username":"Username or Email",placeholder:"Username",value:o,onChange:s,isValid:!0,errorMessage:""}),r&&d.jsx(Kt,{id:"email",label:"Email",placeholder:"support@bardsballad.com",value:a,onChange:l,isValid:!0,errorMessage:""}),d.jsx(Kt,{id:"password",label:"Password",type:"password",placeholder:"OogaBooga1234",value:u,onChange:c,isValid:!0,errorMessage:""}),r&&d.jsx(Kt,{id:"confirm-password",label:"Confirm Password",type:"password",placeholder:"OogaBooga1234",value:f,onChange:h,isValid:f.length===0||f===u,errorMessage:"Passwords don't match"}),d.jsx(kt,{id:"signup",color:"primary",onClick:async()=>{await(r?b:y)(),n()},children:p}),d.jsx("div",{className:"flex flex-col mt-4 items-center justify-center text-sm",children:d.jsxs("h3",{children:[d.jsx("span",{className:"cursor-default dark:text-neutral-300",children:r?"Already have an account?":"Don't have an account?"}),d.jsx("span",{className:"group text-brand-400 transition-all duration-100 ease-in-out cursor-pointer",onClick:()=>i(!r),children:d.jsx("span",{className:"bg-left-bottom ml-1 bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:r?"Login":"Sign Up"})})]})}),d.jsx("div",{className:"text-neutral-500 flex text-center flex-col mt-4 items-center text-sm",children:d.jsxs("p",{className:"cursor-default",children:["By ",r?"signing up":"logging in",", you agree to our"," ",d.jsx("a",{className:"group text-brand-400 transition-all duration-100 ease-in-out",href:"https://bardsballad.com/terms-of-service",target:"_blank",rel:"noopener noreferrer",children:d.jsxs("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:["Terms of Service"," "]})}),"and"," ",d.jsx("a",{className:"group text-brand-400 transition-all duration-100 ease-in-out",href:"https://bardsballad.com/privacy-policy",target:"_blank",rel:"noopener noreferrer",children:d.jsx("span",{className:"cursor-pointer bg-left-bottom bg-gradient-to-r from-brand-400 to-brand-700 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out",children:"Privacy Policy"})})]})})]})]})},LV=({id:e,label:t,onChange:n})=>{const[r,i]=R.useState(""),o=s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(a){const u=new FileReader;u.onload=c=>{var h;const f=(h=c.target)==null?void 0:h.result;i(a.name),n(f)},u.readAsText(a)}};return d.jsxs("div",{children:[d.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-neutral-900 dark:text-white",children:"".concat(t," - ").concat(r!=null?r:"none")}),d.jsx("input",{type:"file",id:"file-upload",name:"file-name",onChange:o})]})},BV=({isOpen:e,title:t,requestClose:n,onSave:r})=>{const[i,o]=R.useState("");return d.jsxs(ar,{isOpen:e,onClose:n,children:[d.jsx(lr,{title:t,onClose:n}),d.jsx(ur,{children:d.jsx(LV,{id:"upload",label:"Upload file",onChange:o})}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:n,children:"Cancel"}),d.jsx(kt,{color:"primary",disabled:!1,onClick:()=>{r(i),n()},children:"Update"})]})]})},sc=e=>e.slice(-10),FV=({data:e,title:t="Edit string",isOpen:n,requestClose:r,onSave:i,onDelete:o})=>{const[s,a]=R.useState([]),[l,u]=R.useState(!0),[c,f]=R.useState(s[0]);return R.useEffect(()=>{(async()=>{if(!e)return a([]);const p=await _V(e.resource_id);a(p),f(p[0])})()},[]),e?d.jsxs(ar,{isOpen:n,onClose:r,children:[d.jsx(lr,{title:t,onClose:r}),d.jsx(ur,{children:d.jsx("h4",{children:e.description})}),d.jsx(wr,{children:d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsx(kt,{color:"light",onClick:r,children:"Exit"}),d.jsx("div",{className:"flex flex-row justify-center gap-2",children:s.length?d.jsxs(d.Fragment,{children:[d.jsx(Kn,{id:"auto-update",label:"Auto Update",checked:l,onChange:u}),d.jsx(dt,{id:"version",containerClassName:"flex flex-row items-center gap-2",labelClassName:"mb-0",label:"Version",value:c.item_id,onChange:h=>f(s.find(p=>p.item_id===h)),children:s.map(h=>d.jsx("option",{value:h.item_id,children:sc(h.item_id)}))}),d.jsx(kt,{color:"primary",onClick:()=>i(c.item_id),children:"Subscribe"})]}):d.jsx("p",{children:"loading versions..."})})]})})]}):null},zV=({isOpen:e,requestClose:t,onAccept:n})=>d.jsxs(ar,{isOpen:e,children:[d.jsx(lr,{title:"Disclaimer"}),d.jsxs(ur,{children:[d.jsx("p",{children:"BardsBallad is a system-agnostic character manager that supports a wide variety of user-created and open-license game systems"}),d.jsx("br",{}),d.jsx("p",{children:"Some content may be based on systems originally published under the ORC License, Creative Commons (CC-BY 4.0), or other open licenses. All such content is provided either by BardsBallad or individual users in compliance with their respective licenses."}),d.jsx("br",{}),d.jsx("p",{children:"BardsBallad is not affiliated with or endorsed by Paizo Inc., Wizards of the Coast, or any other publishers. Names like Pathfinder, Starfinder, or Dungeons & Dragons are trademarks of their respective owners and are only used to indicate compatibility where appropriate."}),d.jsx("br",{}),d.jsx("p",{children:"Users are solely responsible for the legality of content they upload or share. Please do not upload copyrighted material or publisher-owned setting content (such as Golarion or the Forgotten Realms) unless you have the appropriate rights."})]}),d.jsx(wr,{children:d.jsx(kt,{color:"primary",onClick:()=>{n(!0),t()},children:"I Understand"})})]}),HV=({data:e,isOpen:t,requestClose:n,onSave:r})=>d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:"Save New Version",onClose:n}),d.jsxs(ur,{children:[d.jsx("p",{children:'All of your changes are saved to a hidden "edits" copy of this version as you make them. This only saves your changes to a new public copy so that characters can use them.'}),d.jsx("p",{children:"Are you sure you'd like to save your changes to a new version."})]}),d.jsxs(wr,{children:[d.jsx(kt,{color:"light",onClick:n,children:"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{r(!0),n()},children:"Confirm"})]})]});function UV(e,t,n){var r,i;typeof e=="function"?(r=t||[],i=n):(r=[],i=t);var o=It.useRef({hasResult:!1,result:i,error:null}),s=It.useReducer(function(u){return u+1},0);s[0];var a=s[1],l=It.useMemo(function(){var u=typeof e=="function"?e():e;if(!u||typeof u.subscribe!="function")throw e===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")o.current.result=u.getValue(),o.current.hasResult=!0;else{var c=u.subscribe(function(f){o.current.result=f,o.current.hasResult=!0});typeof c=="function"?c():c.unsubscribe()}return u},r);if(It.useDebugValue(o.current.result),It.useEffect(function(){var u=l.subscribe(function(c){var f=o.current;(f.error!==null||f.result!==c)&&(f.error=null,f.result=c,f.hasResult=!0,a())},function(c){var f=o.current;f.error!==c&&(f.error=c,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),o.current.error)throw o.current.error;return o.current.result}function Ds(e,t,n){return UV(function(){return E9(e)},t||[],n)}function WV(){const e=Ds(()=>xt.systems.toArray(),[]),{user:t}=nr.useValue(),n=t?t.id:"none";return{systems:(e==null?void 0:e.filter(i=>{const o=i.deleted_at,s=i.user_id===n;return!o&&s}))||[],isLoading:e===void 0}}function Mx(){const e=Ds(async()=>(await xt.versions.toArray()).filter(n=>{const r=n.deleted_at,i=n.local_id.split("|")[1]!==void 0;return!r&&!i}),[]);return{versions:e||[],isLoading:e===void 0}}const VV=({data:e,isOpen:t,requestClose:n,onSave:r})=>{const{systems:i}=WV(),{versions:o}=Mx(),[s,a]=R.useState(i[0]),[l,u]=R.useState(o[0]),[c,f]=R.useState(""),[h,p]=R.useState(""),[b,y]=R.useState(!0),[_,m]=R.useState(!1);return R.useEffect(()=>{if(!i)return;const v=i[0];a(v),u(o.find(w=>w.reference_id===v.local_id))},[i]),R.useEffect(()=>{const v=async()=>{if(!await vV(s.local_id))return m(!0);m(!1)};s&&v()},[s]),d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:"Publish New System",onClose:n}),d.jsxs(ur,{children:[d.jsx(dt,{id:"type-to-publish",label:"Item Type",value:"system",onChange:v=>{},children:d.jsx("option",{value:"system",children:"System"})}),d.jsx(dt,{id:"item-to-publish",label:"System",value:s==null?void 0:s.local_id,onChange:v=>a(i.find(w=>w.local_id===v)),children:i.map(v=>d.jsx("option",{value:v.local_id,children:v.name}))}),d.jsx(jx,{id:"description",label:"Description",value:c,onChange:f}),d.jsx(Kn,{id:"is-public",label:"Is public?",checked:b,onChange:y}),d.jsx(dt,{id:"version-to-publish",label:"Version",value:l==null?void 0:l.local_id,onChange:v=>u(o.find(w=>w.local_id===v)),children:o==null?void 0:o.filter(v=>v.reference_id===s.local_id).map(v=>d.jsx("option",{value:v.local_id,children:sc(v.local_id)},v.local_id))})]}),d.jsxs(wr,{children:[d.jsx(kt,{color:"light",onClick:n,children:"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{r({item:s,version:l,changelog:h,description:c,resource_type:"system",is_public:b}),n()},children:"Publish"})]})]})},qV=()=>{const e=sx.useValue();return d.jsx(d.Fragment,{children:e.map(({id:t,modal:n})=>n.type==="blueprint"?d.jsx(uU,{title:n.title,data:n.data,isVisible:!0,requestClose:()=>mi(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="PublishItem"?d.jsx(VV,{data:n.data,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave},t):n.type==="SaveNewVersion"?d.jsx(HV,{data:n.data,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave},t):n.type==="HandleConflicts"?d.jsx(kU,{data:n.data,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave},t):n.type==="marketplace_view"?d.jsx(FV,{data:n.data,title:n.title,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave},t):n.type==="authentication"?d.jsx(DV,{isOpen:!0,requestClose:()=>mi(t)},t):n.type==="import_file"?d.jsx(BV,{title:n.title,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave},t):n.type==="edit_object"?d.jsx(Ax,{title:n.title,data:n.data,isVisible:!0,requestClose:()=>mi(t),onSave:n.onSave,onDelete:n.onDelete,types:n.types},t):n.type==="edit_blueprint_param"?d.jsx(xU,{data:n.data,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="edit_string"?d.jsx(Kf,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="edit_number"?d.jsx(SU,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>mi(t),onSave:n.onSave,onDelete:n.onDelete},t):n.type==="confirm"?d.jsx(EU,{title:n.title,data:n.data,isOpen:!0,requestClose:()=>mi(t),onConfirm:n.onSave},t):n.type==="marketplace_disclaimer"?d.jsx(zV,{isOpen:!0,requestClose:()=>mi(t),onAccept:n.onSave},t):d.jsxs("h1",{children:[n.type," is un supported."]}))})},Dx=Ta(!1),KV=()=>Dx.set(!0),Hh=()=>Dx.set(!1),GV=[{name:"Home",path:""},{name:"Marketplace",path:"marketplace"},{name:"Characters",path:"characters"},{name:"Library",path:"library"}],YV=[{icon:()=>d.jsx("svg",{className:"flex-shrink-0 w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 21",children:d.jsx("path",{d:"m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"})}),name:"Settings",path:"settings"}],XV=()=>{const e=Dx.useValue(),t=nr.useValue();return d.jsxs("div",{className:"w-screen h-screen-dynamic bg-neutral-50 dark:bg-neutral-900 text-primary transition-colors overflow-x-hidden",children:[d.jsx("div",{onClick:Hh,className:"".concat(e?"":"-translate-x-full"," bg-neutral-950 opacity-65 fixed top-0 left-0 z-40 w-screen sm:w-64 h-screen-dynamic sm:translate-x-0")}),d.jsx("aside",{onClick:Hh,className:"".concat(e?"":"-translate-x-full"," border-r border-neutral-500 dark:border-neutral-700 bg-neutral-950 fixed top-0 left-0 z-40 w-64 h-screen-dynamic transition-transform sm:translate-x-0"),"aria-label":"Sidebar",children:d.jsxs("div",{className:"h-full flex flex-col justify-between px-3 py-4 overflow-y-auto bg-neutral-50 dark:bg-neutral-950",onClick:n=>n.stopPropagation(),children:[d.jsxs("div",{children:[d.jsxs("a",{className:"flex items-center ps-2.5 mb-5",children:[d.jsx("svg",{className:"h-11 me-3 sm:h-12",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 442 442",children:d.jsx("g",{children:d.jsxs("g",{children:[d.jsx("path",{className:"fill-brand-500",d:"M221,442c-59.03,0-114.53-22.99-156.27-64.73S0,280.03,0,221,22.99,106.47,64.73,64.73C106.47,22.99,161.97,0,221,0s114.53,22.99,156.27,64.73c41.74,41.74,64.73,97.24,64.73,156.27s-22.99,114.53-64.73,156.27-97.24,64.73-156.27,64.73ZM221,12C105.76,12,12,105.76,12,221s93.76,209,209,209,209-93.76,209-209S336.24,12,221,12Z"}),d.jsx("path",{className:"fill-brand-500",d:"M343,318c-10.28-3.95-23-4-30,1-8.96,6.4-14,18-27.89,17-13.33-.96-18.11-10-18.11-10,0,0,13-1,21-8,6.58-5.76,12-12,11-24-.91-10.96-8.94-16-18-16-14,0-22,11-22,11,0,0-3-11,10-30,14.43-21.09,37.58-34.03,45-50,13-28,8.03-51,8.03-51l5.18-5.04.76.92s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-3.19-3.94,7.19-6.99,2.42,2.93s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-4.83-5.96,7.26-7.07,3.43,4.15s-1.41,4-.41,7,4.86,2.66,7,2c2.91-.89,4-4,4-6s-3-5-3-5l-5.83-7.19.83-.81s3.33,2.68,6-1c2.93-4.04-2-7-2-7l-13-15s-1-4-5-3c-4.95,1.24-4,5-4,5l-.34.22-6.66-8.22s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l4.32,5.24-8.36,5.3-5.4-6.66s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l3.05,3.69-8.25,5.23-4.8-5.92s-2-2-5-2-6,2-7,5,0,6,3,6,5-2,5-2l2.44,2.96-91.7,58.17s-7.97,4.6-15.3,9c-5,3-9-4-9-4l-3-2-2.44,2s4.89,6.76,4.44,9c-1,5-5,1-5,1l-6-7-4-3-2,3,7.43,9s2.62,3,.57,5-6-3-6-3l-9.95-12-4.05-2-2,2,11,14s4,5,1,7-7-4-7-4l-14-18-5-2-1,3,14.89,23s4.11,4,.11,7c-3.39,2.55-6.85-1.6-6.85-1.6l-21.54-28-5.61-2.4-1,3,20,28s6.35,6.71,1,9c-7,3-11.75-4-11.75-4l-24.25-30-4-2-1,3,23.1,33s5.13,7,2.05,10c-3.08,3-8.92-2.5-8.92-2.5l-29.23-37.5-4-2-1,3,32.9,47s4.1,5,2.1,7c-3.23,3.23-6-1-6-1l-38-51-6-1-3,4s65.82,92,73,99,9.9,1,14,3,5.41,7.59,1,12c-6,6-11-1-11-1,0,0-68.15-92-78.4-106-10.26-14-15.22-27.04-16.6-38-2-16,2.57-39,20-43s33.07.64,42,13c13,18,18.46,26.33,29,34,11,8,33.57,10.15,49-4,12-11,9.91-29,9.91-29,0,0,20.47-10.15,26.09-27,7-21-8.5-37.38-3-59,3.12-12.27,14-22,28-22,18.03,0,23.78,11,23.78,11,0,0-5.65,0-10.78,5s-5.64,11.45-2,16c4,5,13,5,19,0,6.61-5.51,5.06-14,5.06-14,0,0,5.94-4,11.94,4,4.38,5.84,4.04,14.63,15,16,8,1,16-8,14-16-1.21-4.85-5.49-7.87-10-4-7,6,3.08,13.26-3,15-7,2-9-11-16-17-5.93-5.08-11-6-11-6,0,0-1-19-19-22-17.31-2.88-30.74,2.36-41,14-10.26,11.64-12.05,26-10,37s10.13,29,5,42-23.11,20-23.11,20c0,0-.89-11-5.89-17-6.46-7.75-13-13-27-12-10.02.72-23.05,11-21,25s17,15,17,15c0,0-9.27,9.07-27,4-14-4-14.89-13.18-30-22-20.23-11.82-37-6-42-3-4.62,2.77-18.99,11.98-19,40,0,24,13,40,13,40l-23,12s-6,2-8,7c-1.53,3.83,2,8,2,8l95,122s6.82,11,14,11c6,0,13-6,13-6,0,0,24.27-16,50.94-57s22.56-77.58,22.56-77.58l74.5-51.42s8-5,6-8c-1.76-2.64-9,3-9,3,0,0-116.44,74.29-119,76-3,2-4-2-4-2,0,0-2-6-6-10-2.7-2.7-6.08-3.16-7-5-1-2,1-4,3-5l108.67-73s8.99-8,25.33-5c8.31,1.53,15,8,15,8,0,0,7.97,8,9,18s-1.13,20-5.23,30-8.2,15-18.46,23c-10.26,8-25.2,13.19-37.31,20-16,9-22.84,24.61-27,35-2,5-4.18,20,3,31s24,15,24,15c0,0,3.85,5,10,9s14.02,5.61,22,5c13-1,16.25-8.83,24-14,6-4,16.18-4,24.38,1,8.2,5,15.62,16.58,15.62,28,0,12-1.8,19-10,27s-15.54,11-34,11-29-1-38-7c-11.91-7.94-12.92-15.81-24-28-10-11-21.69-15-34-15-8,0-15.49,1.49-24,10-7,7-7,18-7,18,0,0-4,2-10,9-5.14,5.99-10,13-17,14-10.58,1.51-17.59-2-17.59-2,0,0,1.62-3,.59-5s-3.9-3-8-3-6.74,4.26-2,9c3,3,6.52,5.77,17,7,17,2,22.94-7.94,28-13,7-7,11-8,11-8,0,0,2,5,7,8,3.15,1.89,10,3,15,1,5.95-2.38,7-10,4-15-2.78-4.63-12-5-12-5,0,0,3-8,16-6,8.95,1.38,13.96,5.04,28,18,13,12,30.32,14.88,50,16,35,2,47.44,0,59.74-10,12.31-10,15.54-33.28,13.26-44s-10.59-20-21-24ZM274,66c-7,4-12-2-11-7,.78-3.92,4-7,12-8,0,0,5.14,11.49-1,15ZM147,132c-1.05-6.32,3-16,13-17s12,6,12,12c0,10.44-7,16-7,16-9,0-17-5-18-11ZM164,252c0,10.49-8.51,19-19,19s-19-8.51-19-19,8.51-19,19-19,19,8.51,19,19ZM347,107s7.18,5.73,8,9c.49,1.94.03,3.42-.57,4.43l-12.11-14.93c3.12-.83,4.68,1.5,4.68,1.5ZM335.77,109.21l13.37,16.2-7.54,6.66-14.23-17.55c3.21-2.03,6.11-3.86,8.41-5.3ZM321.04,118.52l15.13,18.33-7.46,6.58-15.94-19.66c2.74-1.74,5.54-3.52,8.27-5.25ZM310,142c-8.3-6.64-18-5-18-5,0,0,6.33-4.04,14.44-9.21l16.85,20.42-4.29,3.79s-4-6-9-10ZM261,299s2-7,9-12,15-5,19-2c5.06,3.79,5.41,11.18,3,16-2,4-9.11,10.32-17,9-12-2-14-11-14-11ZM198,374c4.47,0,7,4,6,7-1.14,3.42-7,3-10,1-2.35-1.57-4-6-4-6,0,0,3-2,8-2Z"})]})})}),d.jsxs("div",{children:[d.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"BardsBallad"}),d.jsx("p",{className:"text-neutral-500",children:"v0.1.0"})]})]}),d.jsx("ul",{className:"pt-4 mt-4 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:GV.map(n=>d.jsx("li",{children:d.jsx(ig,{to:n.path,onClick:Hh,children:d.jsxs("div",{className:"flex items-center p-2 text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-100 dark:hover:bg-neutral-700 group",children:[d.jsxs("svg",{className:"w-5 h-5 text-neutral-500 transition duration-75 dark:text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 21",children:[d.jsx("path",{d:"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"}),d.jsx("path",{d:"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"})]}),d.jsx("span",{className:"ms-3",children:n.name})]})})},n.name))})]}),d.jsxs("div",{children:[d.jsxs("div",{id:"dropdown-cta",className:"p-4 mt-6 rounded-lg bg-brand-50 bg-gradient-to-r dark:from-brand-500 dark:to-brand-700",role:"alert",children:[d.jsx("div",{className:"flex items-center mb-3",children:d.jsx("span",{className:"bg-brand-100 text-brand-800 text-sm font-semibold me-2 px-2.5 py-0.5 rounded dark:bg-brand-200 dark:text-brand-900",children:"Beta"})}),d.jsx("p",{className:"mb-3 text-sm text-brand-800 dark:text-brand-100",children:"We're happy you're using the BardsBallad Beta! If you run into any problems please reach out to us through one of the platforms below!"})]}),d.jsxs("div",{className:"flex mt-3 gap-2 px-2",children:[d.jsx("a",{href:"https://discord.gg/a5qSfxv",target:"_blank",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 fill-neutral-300 hover:fill-brand-400 transition-colors",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M464 66.52A50 50 0 00414.12 17L97.64 16A49.65 49.65 0 0048 65.52V392c0 27.3 22.28 48 49.64 48H368l-13-44 109 100zM324.65 329.81s-8.72-10.39-16-19.32C340.39 301.55 352.5 282 352.5 282a139 139 0 01-27.85 14.25 173.31 173.31 0 01-35.11 10.39 170.05 170.05 0 01-62.72-.24 184.45 184.45 0 01-35.59-10.4 141.46 141.46 0 01-17.68-8.21c-.73-.48-1.45-.72-2.18-1.21-.49-.24-.73-.48-1-.48-4.36-2.42-6.78-4.11-6.78-4.11s11.62 19.09 42.38 28.26c-7.27 9.18-16.23 19.81-16.23 19.81-53.51-1.69-73.85-36.47-73.85-36.47 0-77.06 34.87-139.62 34.87-139.62 34.87-25.85 67.8-25.12 67.8-25.12l2.42 2.9c-43.59 12.32-63.44 31.4-63.44 31.4s5.32-2.9 14.28-6.77c25.91-11.35 46.5-14.25 55-15.21a24 24 0 014.12-.49 205.62 205.62 0 0148.91-.48 201.62 201.62 0 0172.89 22.95s-19.13-18.15-60.3-30.45l3.39-3.86s33.17-.73 67.81 25.16c0 0 34.87 62.56 34.87 139.62 0-.28-20.35 34.5-73.86 36.19z"}),d.jsx("path",{d:"M212.05 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.8 0 24.7-11.83 24.7-26.57.25-14.76-10.9-26.57-24.7-26.57zM300.43 218c-13.8 0-24.7 11.84-24.7 26.57s11.14 26.57 24.7 26.57c13.81 0 24.7-11.83 24.7-26.57S314 218 300.43 218z"})]})}),d.jsx("a",{href:"https://github.com/KingCosmic/BardsBallad",target:"_blank",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 fill-neutral-300 hover:fill-brand-400 transition-colors",viewBox:"0 0 512 512",children:d.jsx("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"})})})]}),d.jsx("a",{href:"mailto:support@bardsballad.com",className:"text-neutral-300 px-2 mt-1 hover:text-brand-400 transition-colors",children:"support@bardsballad.com"}),d.jsxs("ul",{className:"pt-4 mt-4 space-y-2 font-medium border-t border-neutral-200 dark:border-neutral-700",children:[!t.isLoggedIn&&d.jsx("li",{children:d.jsx(kt,{className:"w-full",color:"primary",onClick:()=>{mn({type:"authentication",title:"",data:null,onSave:()=>{}})},children:"Login / Register"})}),YV.map(n=>d.jsx("li",{children:d.jsx(ig,{to:n.path,onClick:Hh,children:d.jsxs("div",{className:"flex items-center p-2 text-neutral-900 rounded-lg dark:text-white hover:bg-neutral-100 dark:hover:bg-neutral-700 group",children:[n.icon(),d.jsx("span",{className:"ms-3",children:n.name})]})})},n.name))]})]})]})}),d.jsx("div",{className:"sm:ml-64 h-screen",children:d.jsx(xM,{})}),d.jsx(qV,{})]})},JV=()=>d.jsxs("button",{onClick:KV,type:"button",className:"inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600",children:[d.jsx("span",{className:"sr-only",children:"Open sidebar"}),d.jsx("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})})]}),Sa=({title:e,options:t,hasSidebar:n=!1})=>d.jsx("nav",{className:(n?"md:w-[calc(100vw-32rem)]":"")+" bg-blue-50 dark:bg-neutral-950 sticky z-20 top-0 start-0 border-b border-neutral-200 dark:border-neutral-700",children:d.jsxs("div",{className:"flex flex-wrap items-center justify-between mx-auto sm:mx-0 p-4",children:[d.jsxs("div",{className:"flex",children:[d.jsx(JV,{}),d.jsx("a",{className:"flex items-center space-x-3 rtl:space-x-reverse ml-4",children:d.jsx("span",{className:"text-2xl font-semibold whitespace-nowrap dark:text-white",children:e})})]}),d.jsx("div",{className:"items-center justify-between flex md:w-auto md:order-1",children:d.jsx("ul",{className:"flex flex-col p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700",children:t==null?void 0:t.map(({Content:r,onClick:i})=>d.jsx("li",{onClick:i,children:d.jsx(r,{})}))})})]})}),QV=[{title:"Added Eruda debugging support, and started work on theme system.",date:"Released on January 21st, 2025",description:"Check your settings for themes and to enable Eruda!"},{title:"Editor Released!",date:"Released on January 16th, 2025",description:"We've released the Editor portion of BarsBallad, this will allow you to make your own systems! It includes visual drag and drop creation of character of tabs, and a custom visual code editor."},{title:"Beta Release",date:"Released on August 14th, 2024",description:"We're releasing BardsBallad into open beta! Please share all feedback through discord and github and share us with your friends!"}],ZV=({title:e,isLatest:t,date:n,description:r})=>d.jsxs("li",{className:"mb-10 ms-6",children:[d.jsx("span",{className:"absolute flex items-center justify-center w-6 h-6 bg-brand-100 rounded-full -start-3 ring-8 ring-white dark:ring-neutral-900 dark:bg-brand-900",children:d.jsx("svg",{className:"w-2.5 h-2.5 text-brand-800 dark:text-brand-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})})}),d.jsxs("h3",{className:"flex items-center mb-1 text-lg font-semibold text-neutral-900 dark:text-white",children:[e,t?d.jsxs(d.Fragment,{children:[" ",d.jsx("span",{className:"bg-brand-100 text-brand-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-brand-900 dark:text-brand-300 ms-3",children:"Latest"})]}):null]}),d.jsx("time",{className:"block mb-2 text-sm font-normal leading-none text-neutral-400 dark:text-neutral-500",children:n}),d.jsx("p",{className:"mb-4 text-base font-normal text-neutral-500 dark:text-neutral-400",children:r})]}),eq=()=>d.jsxs("div",{children:[d.jsx(Sa,{title:"Home"}),d.jsx("ol",{className:"relative m-10 border-s border-neutral-200 dark:border-neutral-700",children:QV.map((e,t)=>d.jsx(ZV,{title:e.title,isLatest:t===0,date:e.date,description:e.description},e.title))})]}),r4=R.createContext({});function ac(){return R.useContext(r4)}const i4=({localData:e,children:t})=>{const n=ac();return d.jsx(r4.Provider,{value:{...n,...e},children:t})};function D2(e,t){return e.nodes.find(n=>n.id===t)}const tq={process:(e,t)=>{const n=e.input;for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"start","output")}},nq={process:(e,t)=>{const{name:n}=t.data.param,r=e.getParam(t.id,n);e.setOutput(r)}};function rq(e,t){return t?t.split("/").reduce((r,i)=>{if(r)return Array.isArray(r)?(r=r.find(o=>o.name===i),r||void 0):r[i]},e):void 0}const iq={process:(e,t)=>{const n=e.getCharacter(),r=rq(n,"data/".concat(t.data.path));return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},oq={process:(e,t)=>{const n=e.getCharacter(),r=e.getParam(t.id,"input"),i=In(n,o=>Cx(o,"data/".concat(t.data.path),r));return e.setCharacter(i),e.getConnectingNodeForHandle(t,"next","output")}},sq={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),o=n.findIndex(s=>s.name===r.name)===-1?n.concat([r]):n.concat([]);return e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},aq={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"name"),i=n.findIndex(s=>s.name===r);let o=n.concat();return i!==-1&&o.splice(i,1),e.setParam(t.id,"output",o),e.getConnectingNodeForHandle(t,"next","output")}},lq={process:(e,t)=>{const n=e.getParam(t.id,"base"),r=e.getParam(t.id,"newItem"),i=e.getParam(t.id,"name"),o=n.findIndex(a=>a.name===i);let s=n.concat();return o!==-1&&(s[o]=r),e.setParam(t.id,"output",s),e.getConnectingNodeForHandle(t,"next","output")}},uq={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0&&e.getParam(t.id,"filtered?")){const s=[...n.get("newArray"),i[r-1]];n.set("newArray",s),e.setParam(t.id,"filterd",s)}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},cq={init:(e,t)=>{const n=e.nodeState.get(t.id);n.set("currentIndex",0),n.set("maxIndex",e.getParam(t.id,"input").length-1),n.set("newArray",[]),e.setParam(t.id,"filterd",[])},process:(e,t)=>{const n=e.nodeState.get(t.id),r=n.get("currentIndex"),i=e.getParam(t.id,"input");if(r!==0){const o=e.getParam(t.id,"newitem");if(o){const s=[...n.get("newArray"),o];n.set("newArray",s),e.setParam(t.id,"filterd",s)}}return r>n.get("maxIndex")?e.getConnectingNodeForHandle(t,"completed","output"):(e.setParam(t.id,"output",i[r]),n.set("currentIndex",r+1),e.getConnectingNodeForHandle(t,"loop","output"))}},dq={process:(e,t)=>{const n=e.getParam(t.id,"base")||[],r=e.getParam(t.id,"name")||"",i=n.findIndex(o=>o.name===r);return e.setParam(t.id,"output",n[i]),e.getConnectingNodeForHandle(t,"next","output")}},fq={process:(e,t)=>{const n=e.getParam(t.id,"input");for(let r in n){const i=n[r];e.setParam(t.id,r,i)}return e.getConnectingNodeForHandle(t,"next","output")}},hq={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},pq={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n.includes(r)),e.getConnectingNodeForHandle(t,"next","output")}},gq={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},mq={process:(e,t)=>{const n=e.getParam(t.id,"string1"),r=e.getParam(t.id,"string2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},yq={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",n.toString()),e.getConnectingNodeForHandle(t,"next","output")}},vq={process:(e,t)=>{const n=t.data.spreadType;let r={_type:n};for(let i=0;i<n.properties.length;i++){const o=n.properties[i];let s=e.getParam(t.id,o.key);s===void 0&&(s=pf(e.getSystem().types,o.typeData)),r[o.key]=s}return e.setParam(t.id,"output",r),e.getConnectingNodeForHandle(t,"next","output")}},wq={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},bq={process:(e,t)=>{const n=e.getParam(t.id,"enum1"),r=e.getParam(t.id,"enum2");return e.setParam(t.id,"output",n===r),e.getConnectingNodeForHandle(t,"next","output")}},_q={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},xq={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n/r),e.getConnectingNodeForHandle(t,"next","output")}},Sq={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n-r),e.getConnectingNodeForHandle(t,"next","output")}},Eq={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",Math.floor(n)),e.getConnectingNodeForHandle(t,"next","output")}},kq={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n+r),e.getConnectingNodeForHandle(t,"next","output")}},Cq={process:(e,t)=>{const n=e.getParam(t.id,"number1"),r=e.getParam(t.id,"number2");return e.setParam(t.id,"output",n*r),e.getConnectingNodeForHandle(t,"next","output")}},jq={process:(e,t)=>{const{value:n}=t.data;return e.setParam(t.id,"output",n),e.getConnectingNodeForHandle(t,"next","output")}},Aq={process:(e,t)=>e.getParam(t.id,"input")?e.getConnectingNodeForHandle(t,"true","output"):e.getConnectingNodeForHandle(t,"false","output")},Nq={process:(e,t)=>{const n=e.getParam(t.id,"input");return e.setParam(t.id,"output",!n),e.getConnectingNodeForHandle(t,"next","output")}},Rq={process:(e,t)=>{const n=e.getParam(t.id,"data"),r=e.getSystem();mn({title:t.data.title,type:t.data.type,types:(r==null?void 0:r.types)||[],data:n,onSave:i=>{e.setParam(t.id,"newdata",i),e.processNodes(e.getConnectingNodeForHandle(t,"save","output"))},onDelete:()=>{e.processNodes(e.getConnectingNodeForHandle(t,"delete","output"))}})}},Tq={process:(e,t)=>{const r=e.getSystem().data.find(i=>i.name===t.data.path);return e.setParam(t.id,"output",r==null?void 0:r.data),e.getConnectingNodeForHandle(t,"next","output")}},Iq={process:(e,t)=>{const n=e.getPage(),r=t.data.chosenState;if(!r)return;const i=n.state.findIndex(a=>a.name===r.name);if(i===-1)return;const o=e.getParam(t.id,r.name),s=In(n,a=>(a.state[i]={...a.state[i],value:o},a));return e.setPage(s),e.getConnectingNodeForHandle(t,"next","output")}};function Pq(e,t){if(["string","number"].includes(t.type))return pf(e.types,t);if(t.isArray)return[];const r=e.types.find(o=>o.name===t.type);if(!r)return;let i={_type:{...r}};for(let o=0;o<r.properties.length;o++){const s=r.properties[o];let a=s.typeData;i[s.key]=pf(e.types,a)}return i}const Oq={process:(e,t)=>{var o;const r=e.getPage().state.find(s=>s.name===t.data.chosenState.name);if(!r)return;const i=(o=r.value)!=null?o:Pq(e.getSystem(),r.type);return e.setParam(t.id,t.data.chosenState.name,i),e.getConnectingNodeForHandle(t,"next","output")}},$q={entry:tq,output:nq,get_character_data:iq,set_character_data:oq,get_system_data:Tq,get_page_data:Oq,set_page_data:Iq,number_to_string:yq,add_to_array:sq,array_get:dq,array_remove:aq,array_update:lq,filter:uq,map:cq,string_new:hq,string_includes:pq,string_compare:gq,string_concat:mq,spread_object:fq,create_data_from_type:vq,new_number:_q,divide:xq,add:kq,subtract:Sq,floor:Eq,multiply:Cq,new_enum:wq,enum_compare:bq,boolean_new:jq,boolean_branch:Aq,boolean_inverse:Nq,open_modal:Rq};function Mq(e){return $q[e]||{process:()=>{}}}class Uo{constructor(t){Io(this,"blueprint");Io(this,"state");Io(this,"input",{});Io(this,"nodeState",new Map);Io(this,"params",new Map);Io(this,"output",null);Io(this,"callback",()=>{});this.blueprint=t}processBlueprint(t,n,r){const i=xT(this.blueprint);return this.state=n,this.input=t,this.callback=r,this.processNodes(i)}processNodes(t){const n=this.processNode(t);return n?this.processNodes(n):(this.callback(this.state),this.getOutput())}processNode(t){if(!t)return;const n=Mq(t.type||"");return!this.nodeState.get(t.id)&&n.init&&(this.nodeState.set(t.id,new Map),n.init(this,t)),n.process(this,t)}getConnectingNodeForHandle(t,n,r){const i=this.blueprint.edges.find(o=>{var s,a;return(r==="input"?o.target===t.id:o.source===t.id)&&(((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n&&r==="output"||((a=o.sourceHandle)==null?void 0:a.split("-")[0])===n&&r==="input")});if(i){if(r==="output")return D2(this.blueprint,i.target);if(r==="input")return D2(this.blueprint,i.source)}}getPossibleParamsForNode(t,n){return this.blueprint.edges.filter(r=>n==="input"?r.target===t:r.source===t).map(r=>{var i,o;return n==="input"?(i=r.targetHandle)==null?void 0:i.split("-")[0]:(o=r.sourceHandle)==null?void 0:o.split("-")[0]})}getParamType(t,n){var o;const i=this.blueprint.edges.filter(s=>{var a;return s.target===t&&((a=s.targetHandle)==null?void 0:a.split("-")[0])===n}).find(s=>this.params.get(s.id)!==void 0);return(o=i==null?void 0:i.targetHandle)==null?void 0:o.split("-")[1]}getParam(t,n){const i=this.blueprint.edges.filter(o=>{var s;return o.target===t&&((s=o.targetHandle)==null?void 0:s.split("-")[0])===n}).find(o=>this.params.get(o.id)!==void 0);return this.params.get((i==null?void 0:i.id)||"")}setParam(t,n,r){const i=this.blueprint.edges.filter(o=>{var s;return o.source===t&&((s=o.sourceHandle)==null?void 0:s.split("-")[0])===n});for(let o=0;o<i.length;o++)this.params.set(i[o].id,r);return this.params}getCharacter(){return this.state.character}setCharacter(t){this.state.character=t}getSystem(){return this.state.system}setSystem(t){this.state.system=t}getPage(){return this.state.page}setPage(t){this.state.page=t}getOutput(){return this.output}setOutput(t){this.output=t}}const wi={"no style":{background:"",border:"",hover:""},light:{background:"bg-white dark:bg-neutral-800",border:"border border-neutral-200 dark:border-neutral-600",hover:"cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700"},primary:{background:"bg-white dark:bg-brand-800",border:"border border-brand-200 dark:border-brand-600",hover:"cursor-pointer hover:bg-brand-100 dark:hover:bg-brand-700"},accent:{background:"bg-white dark:bg-accent-800",border:"border border-accent-200 dark:border-accent-600",hover:"cursor-pointer hover:bg-accent-100 dark:hover:bg-accent-700"},confirmation:{background:"bg-white dark:bg-green-800",border:"border border-green-200 dark:border-green-600",hover:"cursor-pointer hover:bg-green-100 dark:hover:bg-green-700"},warning:{background:"bg-white dark:bg-orange-800",border:"border border-orange-200 dark:border-orange-600",hover:"cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-700"}},L2={0:"0px",px:"1px","0.5":"0.125rem",1:"0.25rem","1.5":"0.375rem",2:"0.5rem","2.5":"0.625rem",3:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Ve={spacing:{...L2},size:{auto:"auto",full:"100%",half:"50%",third:"33%",...L2}},Dq=e=>{const t=ac(),n=R.useMemo(()=>{var c;return(c=new Uo(e.blueprint).processBlueprint(t,e.state,()=>{}))!=null?c:[]},[t,e.state]),r=R.useMemo(()=>e.dynamicVisibility?new Uo(e.visibilityBlueprint).processBlueprint(t,e.state,()=>{})||!1:e.isVisible,[t,e.state]),i=R.useCallback(()=>{if(!e.isInteractive)return;new Uo(e.onPress).processBlueprint(t,e.state,e.updateState)},[e.onPress,t,e.state,e.updateState]),o=R.useMemo(()=>{var l;return wi[e.background]?(l=wi[e.background])==null?void 0:l.background:""},[e.background]),s=R.useMemo(()=>{var l;return wi[e.border]?(l=wi[e.border])==null?void 0:l.border:""},[e.border]),a=R.useMemo(()=>{var l;return e.isInteractive?(l=wi[e.hover])==null?void 0:l.hover:""},[e.isInteractive]);return d.jsx("div",{style:{display:r?e.display:"none",position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ve.spacing[e.gap],marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft],height:Ve.size[e.height],width:Ve.size[e.width],maxHeight:Ve.size[e.maxHeight],maxWidth:Ve.size[e.maxWidth],minHeight:Ve.size[e.minHeight],minWidth:Ve.size[e.minWidth]},className:"".concat(o," ").concat(s," ").concat(a),onClick:i,children:e.isList?n.map(l=>d.jsx(i4,{localData:{[e.dataName]:l},children:e.children},l.name)):e.children})},bi={colors:{base:{text:"text-neutral-800 dark:text-neutral-200",hover:"group-hover:text-neutral-700 dark:group-hover:text-neutral-300"},light:{text:"text-neutral-500 dark:text-neutral-400",hover:"group-hover:text-neutral-400 dark:group-hover:text-neutral-500"},primary:{text:"text-brand-600 dark:text-brand-400",hover:"group-hover:text-brand-700 dark:group-hover:text-brand-300"},accent:{text:"text-accent-600 dark:text-accent-400 hover:text-accent-700 dark:hover:text-accent-300",hover:"group-hover:text-accent-700 dark:group-hover:text-accent-300"},confirmation:{text:"text-green-600 dark:text-green-400",hover:"group-hover:text-green-700 dark:group-hover:text-green-300"},warning:{text:"text-orange-600 dark:text-orange-400",hover:"group-hover:text-orange-700 dark:group-hover:text-orange-300"},danger:{text:"text-red-600 dark:text-red-400",hover:"group-hover:text-red-700 dark:group-hover:text-red-300"}},weight:{thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},sizes:{xs:{fontSize:"0.75rem",lineHeight:"1rem"},sm:{fontSize:"0.875rem",lineHeight:"1.25rem"},base:{fontSize:"1rem",lineHeight:"1.5rem"},lg:{fontSize:"1.125rem",lineHeight:"1.75rem"},xl:{fontSize:"1.25rem",lineHeight:"1.75rem"},"2xl":{fontSize:"1.5rem",lineHeight:"2rem"},"3xl":{fontSize:"1.875rem",lineHeight:"2.25rem"},"4xl":{fontSize:"2.25rem",lineHeight:"2.5rem"},"5xl":{fontSize:"3rem",lineHeight:"1"},"6xl":{fontSize:"3.75rem",lineHeight:"1"},"7xl":{fontSize:"4.5rem",lineHeight:"1"},"8xl":{fontSize:"6rem",lineHeight:"1"},"9xl":{fontSize:"8rem",lineHeight:"1"}}},Lq=e=>{const t=ac(),n=R.useMemo(()=>e.useBlueprintValue?new Uo(e.blueprint).processBlueprint(t,e.state,()=>{})||"":e.text,[e.blueprint,t,e.useBlueprintValue,e.text]),r=R.useMemo(()=>{var o;return bi.colors[e.color]?(o=bi.colors[e.color])==null?void 0:o.text:""},[e.color]),i=R.useMemo(()=>bi.weight[e.fontWeight]?bi.weight[e.fontWeight]:"",[e.fontWeight]);return d.jsx("p",{style:{textAlign:e.textAlign,...bi.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:n})};function gr(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function kl(e){return!!e&&!!e[sn]}function Yo(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Kq}(e)||Array.isArray(e)||!!e[bd]||!!(!((t=e.constructor)===null||t===void 0)&&t[bd])||Jm(e)||Qm(e))}function Cl(e,t,n){n===void 0&&(n=!1),Ea(e)===0?(n?Object.keys:Ux)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ea(e){var t=e[sn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Jm(e)?2:Qm(e)?3:0}function yf(e,t){return Ea(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Np(e,t){return Ea(e)===2?e.get(t):e[t]}function o4(e,t,n){var r=Ea(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Bq(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Jm(e){return Vq&&e instanceof Map}function Qm(e){return qq&&e instanceof Set}function ir(e){return e.o||e.t}function Lx(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Gq(e);delete t[sn];for(var n=Ux(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Bx(e,t){return t===void 0&&(t=!1),Fx(e)||kl(e)||!Yo(e)||(Ea(e)>1&&(e.set=e.add=e.clear=e.delete=Fq),Object.freeze(e),t&&Cl(e,function(n,r){return Bx(r,!0)},!0)),e}function Fq(){gr(2)}function Fx(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Wo(e){var t=ub[e];return t||gr(18,e),t}function s4(e,t){ub[e]||(ub[e]=t)}function Ig(){return wf}function D0(e,t){t&&(Wo("Patches"),e.u=[],e.s=[],e.v=t)}function Pg(e){lb(e),e.p.forEach(zq),e.p=null}function lb(e){e===wf&&(wf=e.l)}function B2(e){return wf={p:[],l:wf,h:e,m:!0,_:0}}function zq(e){var t=e[sn];t.i===0||t.i===1?t.j():t.g=!0}function L0(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Wo("ES5").S(t,e,r),r?(n[sn].P&&(Pg(t),gr(4)),Yo(e)&&(e=Og(t,e),t.l||$g(t,e)),t.u&&Wo("Patches").M(n[sn].t,e,t.u,t.s)):e=Og(t,n,[]),Pg(t),t.u&&t.v(t.u,t.s),e!==Hx?e:void 0}function Og(e,t,n){if(Fx(t))return t;var r=t[sn];if(!r)return Cl(t,function(a,l){return F2(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return $g(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Lx(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),Cl(o,function(a,l){return F2(e,r,i,a,l,n,s)}),$g(e,i,!1),n&&e.u&&Wo("Patches").N(r,n,e.u,e.s)}return r.o}function F2(e,t,n,r,i,o,s){if(kl(i)){var a=Og(e,i,o&&t&&t.i!==3&&!yf(t.R,r)?o.concat(r):void 0);if(o4(n,r,a),!kl(a))return;e.m=!1}else s&&n.add(i);if(Yo(i)&&!Fx(i)){if(!e.h.D&&e._<1)return;Og(e,i),t&&t.A.l||$g(e,i)}}function $g(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Bx(t,n)}function B0(e,t){var n=e[sn];return(n?ir(n):e)[t]}function z2(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function hs(e){e.P||(e.P=!0,e.l&&hs(e.l))}function F0(e){e.o||(e.o=Lx(e.t))}function vf(e,t,n){var r=Jm(t)?Wo("MapSet").F(t,n):Qm(t)?Wo("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:Ig(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=a,u=cb;s&&(l=[a],u=ed);var c=Proxy.revocable(l,u),f=c.revoke,h=c.proxy;return a.k=h,a.j=f,h}(t,n):Wo("ES5").J(t,n);return(n?n.A:Ig()).p.push(r),r}function Hq(e){return kl(e)||gr(22,e),function t(n){if(!Yo(n))return n;var r,i=n[sn],o=Ea(n);if(i){if(!i.P&&(i.i<4||!Wo("ES5").K(i)))return i.t;i.I=!0,r=H2(n,o),i.I=!1}else r=H2(n,o);return Cl(r,function(s,a){i&&Np(i.t,s)===a||o4(r,s,t(a))}),o===3?new Set(r):r}(e)}function H2(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Lx(e)}function Uq(){function e(r){if(!Yo(r))return r;if(Array.isArray(r))return r.map(e);if(Jm(r))return new Map(Array.from(r.entries()).map(function(s){return[s[0],e(s[1])]}));if(Qm(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var o in r)i[o]=e(r[o]);return yf(r,bd)&&(i[bd]=r[bd]),i}function t(r){return kl(r)?e(r):r}var n="add";s4("Patches",{$:function(r,i){return i.forEach(function(o){for(var s=o.path,a=o.op,l=r,u=0;u<s.length-1;u++){var c=Ea(l),f=s[u];typeof f!="string"&&typeof f!="number"&&(f=""+f),c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||gr(24),typeof l=="function"&&f==="prototype"&&gr(24),typeof(l=Np(l,f))!="object"&&gr(15,s.join("/"))}var h=Ea(l),p=e(o.value),b=s[s.length-1];switch(a){case"replace":switch(h){case 2:return l.set(b,p);case 3:gr(16);default:return l[b]=p}case n:switch(h){case 1:return b==="-"?l.push(p):l.splice(b,0,p);case 2:return l.set(b,p);case 3:return l.add(p);default:return l[b]=p}case"remove":switch(h){case 1:return l.splice(b,1);case 2:return l.delete(b);case 3:return l.delete(o.value);default:return delete l[b]}default:gr(17,a)}}),r},N:function(r,i,o,s){switch(r.i){case 0:case 4:case 2:return function(a,l,u,c){var f=a.t,h=a.o;Cl(a.R,function(p,b){var y=Np(f,p),_=Np(h,p),m=b?yf(f,p)?"replace":n:"remove";if(y!==_||m!=="replace"){var v=l.concat(p);u.push(m==="remove"?{op:m,path:v}:{op:m,path:v,value:_}),c.push(m===n?{op:"remove",path:v}:m==="remove"?{op:n,path:v,value:t(y)}:{op:"replace",path:v,value:t(y)})}})}(r,i,o,s);case 5:case 1:return function(a,l,u,c){var f=a.t,h=a.R,p=a.o;if(p.length<f.length){var b=[p,f];f=b[0],p=b[1];var y=[c,u];u=y[0],c=y[1]}for(var _=0;_<f.length;_++)if(h[_]&&p[_]!==f[_]){var m=l.concat([_]);u.push({op:"replace",path:m,value:t(p[_])}),c.push({op:"replace",path:m,value:t(f[_])})}for(var v=f.length;v<p.length;v++){var w=l.concat([v]);u.push({op:n,path:w,value:t(p[v])})}f.length<p.length&&c.push({op:"replace",path:l.concat(["length"]),value:f.length})}(r,i,o,s);case 3:return function(a,l,u,c){var f=a.t,h=a.o,p=0;f.forEach(function(b){if(!h.has(b)){var y=l.concat([p]);u.push({op:"remove",path:y,value:b}),c.unshift({op:n,path:y,value:b})}p++}),p=0,h.forEach(function(b){if(!f.has(b)){var y=l.concat([p]);u.push({op:n,path:y,value:b}),c.unshift({op:"remove",path:y,value:b})}p++})}(r,i,o,s)}},M:function(r,i,o,s){o.push({op:"replace",path:[],value:i===Hx?void 0:i}),s.push({op:"replace",path:[],value:r})}})}function Wq(){function e(a,l){function u(){this.constructor=a}i(a,l),a.prototype=(u.prototype=l.prototype,new u)}function t(a){a.o||(a.R=new Map,a.o=new Map(a.t))}function n(a){a.o||(a.o=new Set,a.t.forEach(function(l){if(Yo(l)){var u=vf(a.A.h,l,a);a.p.set(l,u),a.o.add(u)}else a.o.add(l)}))}function r(a){a.g&&gr(3,JSON.stringify(ir(a)))}var i=function(a,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)c.hasOwnProperty(f)&&(u[f]=c[f])})(a,l)},o=function(){function a(u,c){return this[sn]={i:2,l:c,A:c?c.A:Ig(),P:!1,I:!1,o:void 0,R:void 0,t:u,k:this,C:!1,g:!1},this}e(a,Map);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return ir(this[sn]).size}}),l.has=function(u){return ir(this[sn]).has(u)},l.set=function(u,c){var f=this[sn];return r(f),ir(f).has(u)&&ir(f).get(u)===c||(t(f),hs(f),f.R.set(u,!0),f.o.set(u,c),f.R.set(u,!0)),this},l.delete=function(u){if(!this.has(u))return!1;var c=this[sn];return r(c),t(c),hs(c),c.t.has(u)?c.R.set(u,!1):c.R.delete(u),c.o.delete(u),!0},l.clear=function(){var u=this[sn];r(u),ir(u).size&&(t(u),hs(u),u.R=new Map,Cl(u.t,function(c){u.R.set(c,!1)}),u.o.clear())},l.forEach=function(u,c){var f=this;ir(this[sn]).forEach(function(h,p){u.call(c,f.get(p),p,f)})},l.get=function(u){var c=this[sn];r(c);var f=ir(c).get(u);if(c.I||!Yo(f)||f!==c.t.get(u))return f;var h=vf(c.A.h,f,c);return t(c),c.o.set(u,h),h},l.keys=function(){return ir(this[sn]).keys()},l.values=function(){var u,c=this,f=this.keys();return(u={})[Uh]=function(){return c.values()},u.next=function(){var h=f.next();return h.done?h:{done:!1,value:c.get(h.value)}},u},l.entries=function(){var u,c=this,f=this.keys();return(u={})[Uh]=function(){return c.entries()},u.next=function(){var h=f.next();if(h.done)return h;var p=c.get(h.value);return{done:!1,value:[h.value,p]}},u},l[Uh]=function(){return this.entries()},a}(),s=function(){function a(u,c){return this[sn]={i:3,l:c,A:c?c.A:Ig(),P:!1,I:!1,o:void 0,t:u,k:this,p:new Map,g:!1,C:!1},this}e(a,Set);var l=a.prototype;return Object.defineProperty(l,"size",{get:function(){return ir(this[sn]).size}}),l.has=function(u){var c=this[sn];return r(c),c.o?!!c.o.has(u)||!(!c.p.has(u)||!c.o.has(c.p.get(u))):c.t.has(u)},l.add=function(u){var c=this[sn];return r(c),this.has(u)||(n(c),hs(c),c.o.add(u)),this},l.delete=function(u){if(!this.has(u))return!1;var c=this[sn];return r(c),n(c),hs(c),c.o.delete(u)||!!c.p.has(u)&&c.o.delete(c.p.get(u))},l.clear=function(){var u=this[sn];r(u),ir(u).size&&(n(u),hs(u),u.o.clear())},l.values=function(){var u=this[sn];return r(u),n(u),u.o.values()},l.entries=function(){var u=this[sn];return r(u),n(u),u.o.entries()},l.keys=function(){return this.values()},l[Uh]=function(){return this.values()},l.forEach=function(u,c){for(var f=this.values(),h=f.next();!h.done;)u.call(c,h.value,h.value,this),h=f.next()},a}();s4("MapSet",{F:function(a,l){return new o(a,l)},T:function(a,l){return new s(a,l)}})}var U2,wf,zx=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Vq=typeof Map<"u",qq=typeof Set<"u",W2=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Hx=zx?Symbol.for("immer-nothing"):((U2={})["immer-nothing"]=!0,U2),bd=zx?Symbol.for("immer-draftable"):"__$immer_draftable",sn=zx?Symbol.for("immer-state"):"__$immer_state",Uh=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",Kq=""+Object.prototype.constructor,Ux=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Gq=Object.getOwnPropertyDescriptors||function(e){var t={};return Ux(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},ub={},cb={get:function(e,t){if(t===sn)return e;var n=ir(e);if(!yf(n,t))return function(i,o,s){var a,l=z2(o,s);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Yo(r)?r:r===B0(e.t,t)?(F0(e),e.o[t]=vf(e.A.h,r,e)):r},has:function(e,t){return t in ir(e)},ownKeys:function(e){return Reflect.ownKeys(ir(e))},set:function(e,t,n){var r=z2(ir(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=B0(ir(e),t),o=i==null?void 0:i[sn];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Bq(n,i)&&(n!==void 0||yf(e.t,t)))return!0;F0(e),hs(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return B0(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,F0(e),hs(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ir(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){gr(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){gr(12)}},ed={};Cl(cb,function(e,t){ed[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ed.deleteProperty=function(e,t){return ed.set.call(this,e,t,void 0)},ed.set=function(e,t,n){return cb.set.call(this,e[0],t,n,e[0])};var Yq=function(){function e(n){var r=this;this.O=W2,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var l=r;return function(y){var _=this;y===void 0&&(y=a);for(var m=arguments.length,v=Array(m>1?m-1:0),w=1;w<m;w++)v[w-1]=arguments[w];return l.produce(y,function(S){var k;return(k=o).call.apply(k,[_,S].concat(v))})}}var u;if(typeof o!="function"&&gr(6),s!==void 0&&typeof s!="function"&&gr(7),Yo(i)){var c=B2(r),f=vf(r,i,void 0),h=!0;try{u=o(f),h=!1}finally{h?Pg(c):lb(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(y){return D0(c,s),L0(y,c)},function(y){throw Pg(c),y}):(D0(c,s),L0(u,c))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===Hx&&(u=void 0),r.D&&Bx(u,!0),s){var p=[],b=[];Wo("Patches").M(i,u,p,b),s(p,b)}return u}gr(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(p){return i.apply(void 0,[p].concat(f))})};var s,a,l=r.produce(i,o,function(u,c){s=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,s,a]}):[l,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Yo(n)||gr(8),kl(n)&&(n=Hq(n));var r=B2(this),i=vf(this,n,void 0);return i[sn].C=!0,lb(r),i},t.finishDraft=function(n,r){var i=n&&n[sn],o=i.A;return D0(o,r),L0(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!W2&&gr(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=Wo("Patches").$;return kl(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Ni=new Yq,Xq=Ni.produce,V2=Ni.produceWithPatches.bind(Ni);Ni.setAutoFreeze.bind(Ni);Ni.setUseProxies.bind(Ni);var q2=Ni.applyPatches.bind(Ni);Ni.createDraft.bind(Ni);Ni.finishDraft.bind(Ni);function Jq(){this.__data__=[],this.size=0}var Qq=Jq;function Zq(e,t){return e===t||e!==e&&t!==t}var a4=Zq,eK=a4;function tK(e,t){for(var n=e.length;n--;)if(eK(e[n][0],t))return n;return-1}var Zm=tK,nK=Zm,rK=Array.prototype,iK=rK.splice;function oK(e){var t=this.__data__,n=nK(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():iK.call(t,n,1),--this.size,!0}var sK=oK,aK=Zm;function lK(e){var t=this.__data__,n=aK(t,e);return n<0?void 0:t[n][1]}var uK=lK,cK=Zm;function dK(e){return cK(this.__data__,e)>-1}var fK=dK,hK=Zm;function pK(e,t){var n=this.__data__,r=hK(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var gK=pK,mK=Qq,yK=sK,vK=uK,wK=fK,bK=gK;function lc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lc.prototype.clear=mK;lc.prototype.delete=yK;lc.prototype.get=vK;lc.prototype.has=wK;lc.prototype.set=bK;var ey=lc,_K=ey;function xK(){this.__data__=new _K,this.size=0}var SK=xK;function EK(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var kK=EK;function CK(e){return this.__data__.get(e)}var jK=CK;function AK(e){return this.__data__.has(e)}var NK=AK,RK=typeof Bi=="object"&&Bi&&Bi.Object===Object&&Bi,l4=RK,TK=l4,IK=typeof self=="object"&&self&&self.Object===Object&&self,PK=TK||IK||Function("return this")(),Zo=PK,OK=Zo,$K=OK.Symbol,ty=$K,K2=ty,u4=Object.prototype,MK=u4.hasOwnProperty,DK=u4.toString,Dc=K2?K2.toStringTag:void 0;function LK(e){var t=MK.call(e,Dc),n=e[Dc];try{e[Dc]=void 0;var r=!0}catch(o){}var i=DK.call(e);return r&&(t?e[Dc]=n:delete e[Dc]),i}var BK=LK,FK=Object.prototype,zK=FK.toString;function HK(e){return zK.call(e)}var UK=HK,G2=ty,WK=BK,VK=UK,qK="[object Null]",KK="[object Undefined]",Y2=G2?G2.toStringTag:void 0;function GK(e){return e==null?e===void 0?KK:qK:Y2&&Y2 in Object(e)?WK(e):VK(e)}var ny=GK;function YK(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var c4=YK,XK=ny,JK=c4,QK="[object AsyncFunction]",ZK="[object Function]",eG="[object GeneratorFunction]",tG="[object Proxy]";function nG(e){if(!JK(e))return!1;var t=XK(e);return t==ZK||t==eG||t==QK||t==tG}var Wx=nG;const rG=Os(Wx);var iG=Zo,oG=iG["__core-js_shared__"],sG=oG,z0=sG,X2=function(){var e=/[^.]+$/.exec(z0&&z0.keys&&z0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function aG(e){return!!X2&&X2 in e}var lG=aG,uG=Function.prototype,cG=uG.toString;function dG(e){if(e!=null){try{return cG.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var d4=dG,fG=Wx,hG=lG,pG=c4,gG=d4,mG=/[\\^$.*+?()[\]{}|]/g,yG=/^\[object .+?Constructor\]$/,vG=Function.prototype,wG=Object.prototype,bG=vG.toString,_G=wG.hasOwnProperty,xG=RegExp("^"+bG.call(_G).replace(mG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SG(e){if(!pG(e)||hG(e))return!1;var t=fG(e)?xG:yG;return t.test(gG(e))}var EG=SG;function kG(e,t){return e==null?void 0:e[t]}var CG=kG,jG=EG,AG=CG;function NG(e,t){var n=AG(e,t);return jG(n)?n:void 0}var $l=NG,RG=$l,TG=Zo,IG=RG(TG,"Map"),Vx=IG,PG=$l,OG=PG(Object,"create"),ry=OG,J2=ry;function $G(){this.__data__=J2?J2(null):{},this.size=0}var MG=$G;function DG(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var LG=DG,BG=ry,FG="__lodash_hash_undefined__",zG=Object.prototype,HG=zG.hasOwnProperty;function UG(e){var t=this.__data__;if(BG){var n=t[e];return n===FG?void 0:n}return HG.call(t,e)?t[e]:void 0}var WG=UG,VG=ry,qG=Object.prototype,KG=qG.hasOwnProperty;function GG(e){var t=this.__data__;return VG?t[e]!==void 0:KG.call(t,e)}var YG=GG,XG=ry,JG="__lodash_hash_undefined__";function QG(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=XG&&t===void 0?JG:t,this}var ZG=QG,eY=MG,tY=LG,nY=WG,rY=YG,iY=ZG;function uc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}uc.prototype.clear=eY;uc.prototype.delete=tY;uc.prototype.get=nY;uc.prototype.has=rY;uc.prototype.set=iY;var oY=uc,Q2=oY,sY=ey,aY=Vx;function lY(){this.size=0,this.__data__={hash:new Q2,map:new(aY||sY),string:new Q2}}var uY=lY;function cY(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var dY=cY,fY=dY;function hY(e,t){var n=e.__data__;return fY(t)?n[typeof t=="string"?"string":"hash"]:n.map}var iy=hY,pY=iy;function gY(e){var t=pY(this,e).delete(e);return this.size-=t?1:0,t}var mY=gY,yY=iy;function vY(e){return yY(this,e).get(e)}var wY=vY,bY=iy;function _Y(e){return bY(this,e).has(e)}var xY=_Y,SY=iy;function EY(e,t){var n=SY(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var kY=EY,CY=uY,jY=mY,AY=wY,NY=xY,RY=kY;function cc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cc.prototype.clear=CY;cc.prototype.delete=jY;cc.prototype.get=AY;cc.prototype.has=NY;cc.prototype.set=RY;var f4=cc,TY=ey,IY=Vx,PY=f4,OY=200;function $Y(e,t){var n=this.__data__;if(n instanceof TY){var r=n.__data__;if(!IY||r.length<OY-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new PY(r)}return n.set(e,t),this.size=n.size,this}var MY=$Y,DY=ey,LY=SK,BY=kK,FY=jK,zY=NK,HY=MY;function dc(e){var t=this.__data__=new DY(e);this.size=t.size}dc.prototype.clear=LY;dc.prototype.delete=BY;dc.prototype.get=FY;dc.prototype.has=zY;dc.prototype.set=HY;var UY=dc,WY="__lodash_hash_undefined__";function VY(e){return this.__data__.set(e,WY),this}var qY=VY;function KY(e){return this.__data__.has(e)}var GY=KY,YY=f4,XY=qY,JY=GY;function Mg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new YY;++t<n;)this.add(e[t])}Mg.prototype.add=Mg.prototype.push=XY;Mg.prototype.has=JY;var QY=Mg;function ZY(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var eX=ZY;function tX(e,t){return e.has(t)}var nX=tX,rX=QY,iX=eX,oX=nX,sX=1,aX=2;function lX(e,t,n,r,i,o){var s=n&sX,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var f=-1,h=!0,p=n&aX?new rX:void 0;for(o.set(e,t),o.set(t,e);++f<a;){var b=e[f],y=t[f];if(r)var _=s?r(y,b,f,t,e,o):r(b,y,f,e,t,o);if(_!==void 0){if(_)continue;h=!1;break}if(p){if(!iX(t,function(m,v){if(!oX(p,v)&&(b===m||i(b,m,n,r,o)))return p.push(v)})){h=!1;break}}else if(!(b===y||i(b,y,n,r,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var h4=lX,uX=Zo,cX=uX.Uint8Array,dX=cX;function fX(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var hX=fX;function pX(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var gX=pX,Z2=ty,ek=dX,mX=a4,yX=h4,vX=hX,wX=gX,bX=1,_X=2,xX="[object Boolean]",SX="[object Date]",EX="[object Error]",kX="[object Map]",CX="[object Number]",jX="[object RegExp]",AX="[object Set]",NX="[object String]",RX="[object Symbol]",TX="[object ArrayBuffer]",IX="[object DataView]",tk=Z2?Z2.prototype:void 0,H0=tk?tk.valueOf:void 0;function PX(e,t,n,r,i,o,s){switch(n){case IX:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case TX:return!(e.byteLength!=t.byteLength||!o(new ek(e),new ek(t)));case xX:case SX:case CX:return mX(+e,+t);case EX:return e.name==t.name&&e.message==t.message;case jX:case NX:return e==t+"";case kX:var a=vX;case AX:var l=r&bX;if(a||(a=wX),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=_X,s.set(e,t);var c=yX(a(e),a(t),r,i,o,s);return s.delete(e),c;case RX:if(H0)return H0.call(e)==H0.call(t)}return!1}var OX=PX;function $X(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var MX=$X,DX=Array.isArray,qx=DX,LX=MX,BX=qx;function FX(e,t,n){var r=t(e);return BX(e)?r:LX(r,n(e))}var zX=FX;function HX(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}var UX=HX;function WX(){return[]}var VX=WX,qX=UX,KX=VX,GX=Object.prototype,YX=GX.propertyIsEnumerable,nk=Object.getOwnPropertySymbols,XX=nk?function(e){return e==null?[]:(e=Object(e),qX(nk(e),function(t){return YX.call(e,t)}))}:KX,JX=XX;function QX(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ZX=QX;function eJ(e){return e!=null&&typeof e=="object"}var oy=eJ,tJ=ny,nJ=oy,rJ="[object Arguments]";function iJ(e){return nJ(e)&&tJ(e)==rJ}var oJ=iJ,rk=oJ,sJ=oy,p4=Object.prototype,aJ=p4.hasOwnProperty,lJ=p4.propertyIsEnumerable,uJ=rk(function(){return arguments}())?rk:function(e){return sJ(e)&&aJ.call(e,"callee")&&!lJ.call(e,"callee")},cJ=uJ,Dg={exports:{}};function dJ(){return!1}var fJ=dJ;Dg.exports;(function(e,t){var n=Zo,r=fJ,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;e.exports=u})(Dg,Dg.exports);var g4=Dg.exports,hJ=9007199254740991,pJ=/^(?:0|[1-9]\d*)$/;function gJ(e,t){var n=typeof e;return t=t==null?hJ:t,!!t&&(n=="number"||n!="symbol"&&pJ.test(e))&&e>-1&&e%1==0&&e<t}var mJ=gJ,yJ=9007199254740991;function vJ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yJ}var m4=vJ,wJ=ny,bJ=m4,_J=oy,xJ="[object Arguments]",SJ="[object Array]",EJ="[object Boolean]",kJ="[object Date]",CJ="[object Error]",jJ="[object Function]",AJ="[object Map]",NJ="[object Number]",RJ="[object Object]",TJ="[object RegExp]",IJ="[object Set]",PJ="[object String]",OJ="[object WeakMap]",$J="[object ArrayBuffer]",MJ="[object DataView]",DJ="[object Float32Array]",LJ="[object Float64Array]",BJ="[object Int8Array]",FJ="[object Int16Array]",zJ="[object Int32Array]",HJ="[object Uint8Array]",UJ="[object Uint8ClampedArray]",WJ="[object Uint16Array]",VJ="[object Uint32Array]",vn={};vn[DJ]=vn[LJ]=vn[BJ]=vn[FJ]=vn[zJ]=vn[HJ]=vn[UJ]=vn[WJ]=vn[VJ]=!0;vn[xJ]=vn[SJ]=vn[$J]=vn[EJ]=vn[MJ]=vn[kJ]=vn[CJ]=vn[jJ]=vn[AJ]=vn[NJ]=vn[RJ]=vn[TJ]=vn[IJ]=vn[PJ]=vn[OJ]=!1;function qJ(e){return _J(e)&&bJ(e.length)&&!!vn[wJ(e)]}var KJ=qJ;function GJ(e){return function(t){return e(t)}}var YJ=GJ,Lg={exports:{}};Lg.exports;(function(e,t){var n=l4,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch(u){}}();e.exports=a})(Lg,Lg.exports);var Kx=Lg.exports,XJ=KJ,JJ=YJ,ik=Kx,ok=ik&&ik.isTypedArray,QJ=ok?JJ(ok):XJ,y4=QJ,ZJ=ZX,eQ=cJ,tQ=qx,nQ=g4,rQ=mJ,iQ=y4,oQ=Object.prototype,sQ=oQ.hasOwnProperty;function aQ(e,t){var n=tQ(e),r=!n&&eQ(e),i=!n&&!r&&nQ(e),o=!n&&!r&&!i&&iQ(e),s=n||r||i||o,a=s?ZJ(e.length,String):[],l=a.length;for(var u in e)(t||sQ.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||rQ(u,l)))&&a.push(u);return a}var lQ=aQ,uQ=Object.prototype;function cQ(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||uQ;return e===n}var dQ=cQ;function fQ(e,t){return function(n){return e(t(n))}}var hQ=fQ,pQ=hQ,gQ=pQ(Object.keys,Object),mQ=gQ,yQ=dQ,vQ=mQ,wQ=Object.prototype,bQ=wQ.hasOwnProperty;function _Q(e){if(!yQ(e))return vQ(e);var t=[];for(var n in Object(e))bQ.call(e,n)&&n!="constructor"&&t.push(n);return t}var xQ=_Q,SQ=Wx,EQ=m4;function kQ(e){return e!=null&&EQ(e.length)&&!SQ(e)}var CQ=kQ,jQ=lQ,AQ=xQ,NQ=CQ;function RQ(e){return NQ(e)?jQ(e):AQ(e)}var TQ=RQ,IQ=zX,PQ=JX,OQ=TQ;function $Q(e){return IQ(e,OQ,PQ)}var MQ=$Q,sk=MQ,DQ=1,LQ=Object.prototype,BQ=LQ.hasOwnProperty;function FQ(e,t,n,r,i,o){var s=n&DQ,a=sk(e),l=a.length,u=sk(t),c=u.length;if(l!=c&&!s)return!1;for(var f=l;f--;){var h=a[f];if(!(s?h in t:BQ.call(t,h)))return!1}var p=o.get(e),b=o.get(t);if(p&&b)return p==t&&b==e;var y=!0;o.set(e,t),o.set(t,e);for(var _=s;++f<l;){h=a[f];var m=e[h],v=t[h];if(r)var w=s?r(v,m,h,t,e,o):r(m,v,h,e,t,o);if(!(w===void 0?m===v||i(m,v,n,r,o):w)){y=!1;break}_||(_=h=="constructor")}if(y&&!_){var S=e.constructor,k=t.constructor;S!=k&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(y=!1)}return o.delete(e),o.delete(t),y}var zQ=FQ,HQ=$l,UQ=Zo,WQ=HQ(UQ,"DataView"),VQ=WQ,qQ=$l,KQ=Zo,GQ=qQ(KQ,"Promise"),YQ=GQ,XQ=$l,JQ=Zo,QQ=XQ(JQ,"Set"),ZQ=QQ,eZ=$l,tZ=Zo,nZ=eZ(tZ,"WeakMap"),rZ=nZ,db=VQ,fb=Vx,hb=YQ,pb=ZQ,gb=rZ,v4=ny,fc=d4,ak="[object Map]",iZ="[object Object]",lk="[object Promise]",uk="[object Set]",ck="[object WeakMap]",dk="[object DataView]",oZ=fc(db),sZ=fc(fb),aZ=fc(hb),lZ=fc(pb),uZ=fc(gb),Ja=v4;(db&&Ja(new db(new ArrayBuffer(1)))!=dk||fb&&Ja(new fb)!=ak||hb&&Ja(hb.resolve())!=lk||pb&&Ja(new pb)!=uk||gb&&Ja(new gb)!=ck)&&(Ja=function(e){var t=v4(e),n=t==iZ?e.constructor:void 0,r=n?fc(n):"";if(r)switch(r){case oZ:return dk;case sZ:return ak;case aZ:return lk;case lZ:return uk;case uZ:return ck}return t});var cZ=Ja,U0=UY,dZ=h4,fZ=OX,hZ=zQ,fk=cZ,hk=qx,pk=g4,pZ=y4,gZ=1,gk="[object Arguments]",mk="[object Array]",Wh="[object Object]",mZ=Object.prototype,yk=mZ.hasOwnProperty;function yZ(e,t,n,r,i,o){var s=hk(e),a=hk(t),l=s?mk:fk(e),u=a?mk:fk(t);l=l==gk?Wh:l,u=u==gk?Wh:u;var c=l==Wh,f=u==Wh,h=l==u;if(h&&pk(e)){if(!pk(t))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new U0),s||pZ(e)?dZ(e,t,n,r,i,o):fZ(e,t,l,n,r,i,o);if(!(n&gZ)){var p=c&&yk.call(e,"__wrapped__"),b=f&&yk.call(t,"__wrapped__");if(p||b){var y=p?e.value():e,_=b?t.value():t;return o||(o=new U0),i(y,_,n,r,o)}}return h?(o||(o=new U0),hZ(e,t,n,r,i,o)):!1}var vZ=yZ,wZ=vZ,vk=oy;function w4(e,t,n,r,i){return e===t?!0:e==null||t==null||!vk(e)&&!vk(t)?e!==e&&t!==t:wZ(e,t,n,r,w4,i)}var bZ=w4,_Z=bZ;function xZ(e,t,n){n=typeof n=="function"?n:void 0;var r=n?n(e,t):void 0;return r===void 0?_Z(e,t,void 0,n):!!r}var SZ=xZ;const EZ=Os(SZ);var kZ=function(t,n,r,i){var o=r?r.call(i,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<s.length;u++){var c=s[u];if(!l(c))return!1;var f=t[c],h=n[c];if(o=r?r.call(i,f,h,c):void 0,o===!1||o===void 0&&f!==h)return!1}return!0};const CZ=Os(kZ);let jZ=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var AZ="Invariant failed";function hn(e,t){if(!e)throw new Error(AZ)}typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/utils"]="0.2.5");var Ss="ROOT",b4="canvas-ROOT",NZ="Attempting to add a node with duplicated id",RZ="Node cannot be dropped into target parent",TZ="Target parent rejects incoming node",IZ="Current parent rejects outgoing node",wk="Cannot move node that is not a direct child of a Canvas node",PZ="Cannot move node into a non-Canvas parent",bk="A top-level Node cannot be moved",OZ="Cannot move node into a descendant",_4="The component type specified for this node (%node_type%) does not exist in the resolver",$Z="The node has specified a canDrag() rule that prevents it from being dragged",MZ="An Error occurred while deserializing components: Cannot find component <%displayName% /> in resolver map. Please check your resolver in <Editor />\n\nAvailable components in resolver: %availableComponents%\n\nMore info: https://craft.js.org/r/docs/api/editor#props";function _k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C4(r.key),r)}}function pc(e,t,n){return t&&DZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tr(e,t,n){return(t=C4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eu(e){return Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eu(e)}function mb(e,t){return mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},mb(e,t)}function W0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yb(){return yb=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(o,s){for(;!Object.prototype.hasOwnProperty.call(o,s)&&(o=Eu(o))!==null;);return o}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},yb.apply(this,arguments)}function x4(e,t){return S4(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],c=!0,f=!1;try{if(a=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;c=!1}else for(;!(c=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);c=!0);}catch(h){f=!0,s=h}finally{try{if(!c&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}(e,t)||Gx(e,t)||k4()}function Gr(e){return function(t){if(Array.isArray(t))return vb(t)}(e)||E4(e)||Gx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S4(e){if(Array.isArray(e))return e}function E4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gx(e,t){if(e){if(typeof e=="string")return vb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vb(e,t):void 0}}function vb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k4(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C4(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}var On={UNDO:"HISTORY_UNDO",REDO:"HISTORY_REDO",THROTTLE:"HISTORY_THROTTLE",IGNORE:"HISTORY_IGNORE",MERGE:"HISTORY_MERGE",CLEAR:"HISTORY_CLEAR"},LZ=function(){function e(){hc(this,e),tr(this,"timeline",[]),tr(this,"pointer",-1)}return pc(e,[{key:"add",value:function(t,n){t.length===0&&n.length===0||(this.pointer=this.pointer+1,this.timeline.length=this.pointer,this.timeline[this.pointer]={patches:t,inversePatches:n,timestamp:Date.now()})}},{key:"throttleAdd",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:500;if(t.length!==0||n.length!==0){if(this.timeline.length&&this.pointer>=0){var i=this.timeline[this.pointer],o=i.patches,s=i.inversePatches,a=i.timestamp;if(new Date().getTime()-a<r)return void(this.timeline[this.pointer]={timestamp:a,patches:[].concat(Gr(o),Gr(t)),inversePatches:[].concat(Gr(n),Gr(s))})}this.add(t,n)}}},{key:"merge",value:function(t,n){if(t.length!==0||n.length!==0)if(this.timeline.length&&this.pointer>=0){var r=this.timeline[this.pointer],i=r.inversePatches;this.timeline[this.pointer]={timestamp:r.timestamp,patches:[].concat(Gr(r.patches),Gr(t)),inversePatches:[].concat(Gr(n),Gr(i))}}else this.add(t,n)}},{key:"clear",value:function(){this.timeline=[],this.pointer=-1}},{key:"canUndo",value:function(){return this.pointer>=0}},{key:"canRedo",value:function(){return this.pointer<this.timeline.length-1}},{key:"undo",value:function(t){if(this.canUndo()){var n=this.timeline[this.pointer].inversePatches;return this.pointer=this.pointer-1,q2(t,n)}}},{key:"redo",value:function(t){if(this.canRedo())return this.pointer=this.pointer+1,q2(t,this.timeline[this.pointer].patches)}}]),e}();function BZ(e,t,n,r){var i,o=R.useMemo(function(){return new LZ},[]),s=R.useRef([]),a=R.useRef(function(){});typeof e=="function"?i=e:(i=e.methods,s.current=e.ignoreHistoryForActions,a.current=e.normalizeHistory);var l=R.useRef(r);l.current=r;var u=R.useRef(t),c=R.useMemo(function(){var _=a.current,m=s.current,v=l.current;return function(w,S){var k,A=n&&xk(n,function(){return w},o),T=x4(V2(w,function(H){var Q,U;switch(S.type){case On.UNDO:return o.undo(H);case On.REDO:return o.redo(H);case On.CLEAR:return o.clear(),Li({},H);case On.IGNORE:case On.MERGE:case On.THROTTLE:var L,te=S4(U=S.payload)||E4(U)||Gx(U)||k4(),Z=te[0],oe=te.slice(1);(L=i(H,A))[Z].apply(L,Gr(oe));break;default:(Q=i(H,A))[S.type].apply(Q,Gr(S.payload))}}),3),P=T[0],Y=T[1],D=T[2];return k=P,v&&v(P,w,{type:S.type,params:S.payload,patches:Y},A,function(H){var Q=V2(P,H);k=Q[0],Y=[].concat(Gr(Y),Gr(Q[1])),D=[].concat(Gr(Q[2]),Gr(D))}),[On.UNDO,On.REDO].includes(S.type)&&_&&(k=Xq(k,_)),[].concat(Gr(m),[On.UNDO,On.REDO,On.IGNORE,On.CLEAR]).includes(S.type)||(S.type===On.THROTTLE?o.throttleAdd(Y,D,S.config&&S.config.rate):S.type===On.MERGE?o.merge(Y,D):o.add(Y,D)),k}},[o,i,n]),f=R.useCallback(function(){return u.current},[]),h=R.useMemo(function(){return new FZ(f)},[f]),p=R.useCallback(function(_){var m=c(u.current,_);u.current=m,h.notify()},[c,h]);R.useEffect(function(){h.notify()},[h]);var b=R.useMemo(function(){return n?xk(n,function(){return u.current},o):[]},[o,n]),y=R.useMemo(function(){var _=Object.keys(i(null,null)),m=s.current;return Li(Li({},_.reduce(function(v,w){return v[w]=function(){for(var S=arguments.length,k=new Array(S),A=0;A<S;A++)k[A]=arguments[A];return p({type:w,payload:k})},v},{})),{},{history:{undo:function(){return p({type:On.UNDO})},redo:function(){return p({type:On.REDO})},clear:function(){return p({type:On.CLEAR})},throttle:function(v){return Li({},_.filter(function(w){return!m.includes(w)}).reduce(function(w,S){return w[S]=function(){for(var k=arguments.length,A=new Array(k),T=0;T<k;T++)A[T]=arguments[T];return p({type:On.THROTTLE,payload:[S].concat(A),config:{rate:v}})},w},{}))},ignore:function(){return Li({},_.filter(function(v){return!m.includes(v)}).reduce(function(v,w){return v[w]=function(){for(var S=arguments.length,k=new Array(S),A=0;A<S;A++)k[A]=arguments[A];return p({type:On.IGNORE,payload:[w].concat(k)})},v},{}))},merge:function(){return Li({},_.filter(function(v){return!m.includes(v)}).reduce(function(v,w){return v[w]=function(){for(var S=arguments.length,k=new Array(S),A=0;A<S;A++)k[A]=arguments[A];return p({type:On.MERGE,payload:[w].concat(k)})},v},{}))}}})},[p,i]);return R.useMemo(function(){return{getState:f,subscribe:function(_,m,v){return h.subscribe(_,m,v)},actions:y,query:b,history:o}},[y,b,h,f,o])}function xk(e,t,n){var r=Object.keys(e()).reduce(function(i,o){return Li(Li({},i),{},tr({},o,function(){var s;return(s=e(t()))[o].apply(s,arguments)}))},{});return Li(Li({},r),{},{history:{canUndo:function(){return n.canUndo()},canRedo:function(){return n.canRedo()}}})}Wq(),Uq();var FZ=function(){function e(t){hc(this,e),tr(this,"getState",void 0),tr(this,"subscribers",[]),this.getState=t}return pc(e,[{key:"subscribe",value:function(t,n,r){var i=this,o=new zZ(function(){return t(i.getState())},n,r);return this.subscribers.push(o),this.unsubscribe.bind(this,o)}},{key:"unsubscribe",value:function(t){if(this.subscribers.length){var n=this.subscribers.indexOf(t);if(n>-1)return this.subscribers.splice(n,1)}}},{key:"notify",value:function(){this.subscribers.forEach(function(t){return t.collect()})}}]),e}(),zZ=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];hc(this,e),tr(this,"collected",void 0),tr(this,"collector",void 0),tr(this,"onChange",void 0),tr(this,"id",void 0),this.collector=t,this.onChange=n,r&&this.collect()}return pc(e,[{key:"collect",value:function(){try{var t=this.collector();EZ(t,this.collected)||(this.collected=t,this.onChange&&this.onChange(this.collected))}catch(n){console.warn(n)}}}]),e}(),bf=function(e){var t=e.getBoundingClientRect(),n=t.x,r=t.y,i=t.top,o=t.left,s=t.bottom,a=t.right,l=t.width,u=t.height,c=window.getComputedStyle(e),f={left:parseInt(c.marginLeft),right:parseInt(c.marginRight),bottom:parseInt(c.marginBottom),top:parseInt(c.marginTop)},h={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight),bottom:parseInt(c.paddingBottom),top:parseInt(c.paddingTop)};return{x:n,y:r,top:i,left:o,bottom:s,right:a,width:l,height:u,outerWidth:Math.round(l+f.left+f.right),outerHeight:Math.round(u+f.top+f.bottom),margin:f,padding:h,inFlow:e.parentElement&&!!function(p){var b=getComputedStyle(p);if(!(c.overflow&&c.overflow!=="visible"||b.float!=="none"||b.display==="grid"||b.display==="flex"&&b["flex-direction"]!=="column")){switch(c.position){case"static":case"relative":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(c.display){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}(e.parentElement)}};function HZ(e,t){const{subscribe:n,getState:r,actions:i,query:o}=e,s=R.useRef(!0),a=R.useRef(null),l=R.useRef(t);l.current=t;const u=R.useCallback(h=>({...h,actions:i,query:o}),[i,o]);s.current&&t&&(a.current=t(r(),o),s.current=!1);const[c,f]=R.useState(u(a.current));return R.useEffect(()=>{let h;return l.current&&(h=n(p=>l.current(p,o),p=>{f(u(p))})),()=>{h&&h()}},[u,o,n]),c}var Ku,j4=function(){return jZ(arguments.length>0&&arguments[0]!==void 0?arguments[0]:10)},UZ=function(){function e(){hc(this,e),tr(this,"isEnabled",!0),tr(this,"elementIdMap",new WeakMap),tr(this,"registry",new Map)}return pc(e,[{key:"getElementId",value:function(t){var n=this.elementIdMap.get(t);if(n)return n;var r=j4();return this.elementIdMap.set(t,r),r}},{key:"getConnectorId",value:function(t,n){var r=this.getElementId(t);return"".concat(n,"--").concat(r)}},{key:"register",value:function(t,n){var r=this,i=this.getByElement(t,n.name);if(i){if(CZ(n.required,i.required))return i;this.getByElement(t,n.name).disable()}var o=null,s=this.getConnectorId(t,n.name);return this.registry.set(s,{id:s,required:n.required,enable:function(){o&&o(),o=n.connector(t,n.required,n.options)},disable:function(){o&&o()},remove:function(){return r.remove(s)}}),this.isEnabled&&this.registry.get(s).enable(),this.registry.get(s)}},{key:"get",value:function(t){return this.registry.get(t)}},{key:"remove",value:function(t){var n=this.get(t);n&&(n.disable(),this.registry.delete(n.id))}},{key:"enable",value:function(){this.isEnabled=!0,this.registry.forEach(function(t){t.enable()})}},{key:"disable",value:function(){this.isEnabled=!1,this.registry.forEach(function(t){t.disable()})}},{key:"getByElement",value:function(t,n){return this.get(this.getConnectorId(t,n))}},{key:"removeByElement",value:function(t,n){return this.remove(this.getConnectorId(t,n))}},{key:"clear",value:function(){this.disable(),this.elementIdMap=new WeakMap,this.registry=new Map}}]),e}();(function(e){e[e.HandlerDisabled=0]="HandlerDisabled",e[e.HandlerEnabled=1]="HandlerEnabled"})(Ku||(Ku={}));var A4=function(){function e(t){hc(this,e),tr(this,"options",void 0),tr(this,"registry",new UZ),tr(this,"subscribers",new Set),this.options=t}return pc(e,[{key:"listen",value:function(t){var n=this;return this.subscribers.add(t),function(){return n.subscribers.delete(t)}}},{key:"disable",value:function(){this.onDisable&&this.onDisable(),this.registry.disable(),this.subscribers.forEach(function(t){t(Ku.HandlerDisabled)})}},{key:"enable",value:function(){this.onEnable&&this.onEnable(),this.registry.enable(),this.subscribers.forEach(function(t){t(Ku.HandlerEnabled)})}},{key:"cleanup",value:function(){this.disable(),this.subscribers.clear(),this.registry.clear()}},{key:"addCraftEventListener",value:function(t,n,r,i){var o=function(s){(function(a,l,u){a.craft||(a.craft={stopPropagation:function(){},blockedEvents:{}});for(var c=a.craft&&a.craft.blockedEvents[l]||[],f=0;f<c.length;f++){var h=c[f];if(u!==h&&u.contains(h))return!0}return!1})(s,n,t)||(s.craft.stopPropagation=function(){s.craft.blockedEvents[n]||(s.craft.blockedEvents[n]=[]),s.craft.blockedEvents[n].push(t)},r(s))};return t.addEventListener(n,o,i),function(){return t.removeEventListener(n,o,i)}}},{key:"createConnectorsUsage",value:function(){var t=this,n=this.handlers(),r=new Set,i=!1,o=new Map;return{connectors:Object.entries(n).reduce(function(s,a){var l=x4(a,2),u=l[0],c=l[1];return Li(Li({},s),{},tr({},u,function(f,h,p){var b=function(){var y=t.registry.register(f,{required:h,name:u,options:p,connector:c});return r.add(y.id),y};return o.set(t.registry.getConnectorId(f,u),b),i&&b(),f}))},{}),register:function(){i=!0,o.forEach(function(s){s()})},cleanup:function(){i=!1,r.forEach(function(s){return t.registry.remove(s)})}}}},{key:"derive",value:function(t,n){return new t(this,n)}},{key:"createProxyHandlers",value:function(t,n){var r=[],i=t.handlers(),o=new Proxy(i,{get:function(s,a,l){return a in i==0?Reflect.get(s,a,l):function(u){for(var c=arguments.length,f=new Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];var p=i[a].apply(i,[u].concat(f));p&&r.push(p)}}});return n(o),function(){r.forEach(function(s){s()})}}},{key:"reflect",value:function(t){return this.createProxyHandlers(this,t)}}]),e}(),WZ=function(e){(function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&mb(o,s)})(i,A4);var t,n,r=(t=i,n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}(),function(){var o,s=Eu(t);if(n){var a=Eu(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return function(l,u){if(u&&(typeof u=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W0(l)}(this,o)});function i(o,s){var a;return hc(this,i),tr(W0(a=r.call(this,s)),"derived",void 0),tr(W0(a),"unsubscribeParentHandlerListener",void 0),a.derived=o,a.options=s,a.unsubscribeParentHandlerListener=a.derived.listen(function(l){switch(l){case Ku.HandlerEnabled:return a.enable();case Ku.HandlerDisabled:return a.disable();default:return}}),a}return pc(i,[{key:"inherit",value:function(o){return this.createProxyHandlers(this.derived,o)}},{key:"cleanup",value:function(){yb(Eu(i.prototype),"cleanup",this).call(this),this.unsubscribeParentHandlerListener()}}]),i}();function Sk(e,t){t&&(typeof e=="function"?e(t):e.current=t)}function VZ(e,t){const n=e.ref;return hn(typeof n!="string"),R.cloneElement(e,n?{ref:r=>{Sk(n,r),Sk(t,r)}}:{ref:t})}function qZ(e){return(t=null,...n)=>{if(!R.isValidElement(t)){if(!t)return;const i=t;return i&&e(i,...n),i}const r=t;return function(i){if(typeof i.type!="string")throw new Error}(r),VZ(r,e)}}function N4(e){return Object.keys(e).reduce((t,n)=>(t[n]=qZ((...r)=>e[n](...r)),t),{})}const KZ=({style:e,className:t,parentDom:n})=>{const r=It.createElement("div",{className:t,style:{position:"fixed",display:"block",opacity:1,borderStyle:"solid",borderWidth:"1px",borderColor:"transparent",zIndex:99999,...e}});return n&&n.ownerDocument!==document?_$.createPortal(r,n.ownerDocument.body):r};var ka=function(e,t){var n="Deprecation warning: ".concat(e," will be deprecated in future relases."),r=t.suggest,i=t.doc;r&&(n+=" Please use ".concat(r," instead.")),i&&(n+="(".concat(i,")")),console.warn(n)},R4=function(){return typeof window<"u"},GZ=function(){return R4()&&/Linux/i.test(window.navigator.userAgent)},YZ=function(){return R4()&&/Chrome/i.test(window.navigator.userAgent)},XZ=$l;(function(){try{var e=XZ(Object,"defineProperty");return e({},"",{}),e}catch(t){}})();var Bg={exports:{}};Bg.exports;(function(e,t){var n=Zo,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,h=a?a(f):new u.constructor(f);return u.copy(h),h}e.exports=l})(Bg,Bg.exports);Bg.exports;var Ek=ty,kk=Ek?Ek.prototype:void 0;kk&&kk.valueOf;var Ck=Kx;Ck&&Ck.isMap;var jk=Kx;jk&&jk.isSet;typeof window<"u"&&(window.__CRAFTJS__||(window.__CRAFTJS__={}),window.__CRAFTJS__["@craftjs/core"]="0.2.12");const T4=It.createContext(null),I4=({id:e,related:t=!1,children:n})=>It.createElement(T4.Provider,{value:{id:e,related:t}},n);function Ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(n),!0).forEach(function(r){Jn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wb(e){return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(e)}function sy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$4(r.key),r)}}function ay(e,t,n){return t&&JZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jn(e,t,n){return(t=$4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yx(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bb(e,t)}function Fg(e){return Fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fg(e)}function bb(e,t){return bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bb(e,t)}function Xx(e,t){if(e==null)return{};var n,r,i=function(s,a){if(s==null)return{};var l,u,c={},f=Object.keys(s);for(u=0;u<f.length;u++)a.indexOf(l=f[u])>=0||(c[l]=s[l]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function td(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jx(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var n,r=Fg(e);if(t){var i=Fg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(o,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return td(o)}(this,n)}}function P4(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,u=[],c=!0,f=!1;try{if(a=(i=i.call(n)).next,r!==0)for(;!(c=(o=a.call(i)).done)&&(u.push(o.value),u.length!==r);c=!0);}catch(h){f=!0,s=h}finally{try{if(!c&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}(e,t)||O4(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _f(e){return function(t){if(Array.isArray(t))return _b(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||O4(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O4(e,t){if(e){if(typeof e=="string")return _b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_b(e,t):void 0}}function _b(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $4(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,"string");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(e);return typeof t=="symbol"?t:String(t)}const Qx=R.createContext(null);var M4=R.createContext(null),D4=function(){return R.useContext(M4)};function Ml(e){var t=D4(),n=R.useContext(Qx);hn(n);var r=HZ(n,e),i=R.useMemo(function(){return t&&t.createConnectorsUsage()},[t]);R.useEffect(function(){return i.register(),function(){i.cleanup()}},[i]);var o=R.useMemo(function(){return i&&N4(i.connectors)},[i]);return wn(wn({},r),{},{connectors:o,inContext:!!n,store:n})}var QZ=["actions","query","connectors"];function ly(e){var t=R.useContext(T4);hn(t);var n=t.id,r=t.related,i=Ml(function(c){return n&&c.nodes[n]&&e&&e(c.nodes[n])}),o=i.actions,s=i.connectors,a=Xx(i,QZ),l=R.useMemo(function(){return N4({connect:function(c){return s.connect(c,n)},drag:function(c){return s.drag(c,n)}})},[s,n]),u=R.useMemo(function(){return{setProp:function(c,f){f?o.history.throttle(f).setProp(n,c):o.setProp(n,c)},setCustom:function(c,f){f?o.history.throttle(f).setCustom(n,c):o.setCustom(n,c)},setHidden:function(c){return o.setHidden(n,c)}}},[o,n]);return wn(wn({},a),{},{id:n,related:r,inNodeContext:!!t,actions:u,connectors:l})}var ZZ=["id","related","actions","inNodeContext","connectors"];function Zr(e){var t=ly(e),n=t.id,r=t.related,i=t.actions,o=t.inNodeContext,s=t.connectors;return wn(wn({},Xx(t,ZZ)),{},{actions:i,id:n,related:r,setProp:function(a,l){return ka("useNode().setProp()",{suggest:"useNode().actions.setProp()"}),i.setProp(a,l)},inNodeContext:o,connectors:s})}const eee=({render:e})=>{const{connectors:{connect:t,drag:n}}=Zr();return typeof e.type=="string"?t(n(It.cloneElement(e))):e},tee=()=>{const{type:e,props:t,nodes:n,hydrationTimestamp:r}=ly(i=>({type:i.data.type,props:i.data.props,nodes:i.data.nodes,hydrationTimestamp:i._hydrationTimestamp}));return R.useMemo(()=>{let i=t.children;n&&n.length>0&&(i=It.createElement(It.Fragment,null,n.map(s=>It.createElement(Zx,{id:s,key:s}))));const o=It.createElement(e,t,i);return typeof e=="string"?It.createElement(eee,{render:o}):o},[e,t,r,n])},nee=({render:e})=>{const{hidden:t}=ly(r=>({hidden:r.data.hidden})),{onRender:n}=Ml(r=>({onRender:r.options.onRender}));return t?null:It.createElement(n,{render:e||It.createElement(tee,null)})},Zx=({id:e,render:t})=>It.createElement(I4,{id:e},It.createElement(nee,{render:t})),xb={is:"div",canvas:!1,custom:{},hidden:!1},ree={is:"type",canvas:"isCanvas"};function Dl({id:e,children:t,...n}){const{is:r}={...xb,...n},{query:i,actions:o}=Ml(),{id:s,inNodeContext:a}=ly(),[l]=R.useState(()=>{hn(!!e);const u=i.node(s).get();if(a){const c=u.data.linkedNodes[e]?i.node(u.data.linkedNodes[e]).get():null;if(c&&c.data.type===r)return c.id;const f=It.createElement(Dl,n,t),h=i.parseReactElement(f).toNodeTree();return o.history.ignore().addLinkedNodeFromTree(h,s,e),h.rootNodeId}return null});return l?It.createElement(Zx,{id:l}):null}const L4=()=>ka("<Canvas />",{suggest:"<Element canvas={true} />"});function Sb({...e}){return R.useEffect(()=>L4(),[]),It.createElement(Dl,{...e,canvas:!0})}const iee=()=>{const{timestamp:e}=Ml(t=>({timestamp:t.nodes[Ss]&&t.nodes[Ss]._hydrationTimestamp}));return e?It.createElement(Zx,{id:Ss,key:e}):null},B4=({children:e,json:t,data:n})=>{const{actions:r,query:i}=Ml();t&&ka("<Frame json={...} />",{suggest:"<Frame data={...} />"});const o=R.useRef(!1);if(!o.current){const s=n||t;if(s)r.history.ignore().deserialize(s);else if(e){const a=It.Children.only(e),l=i.parseReactElement(a).toNodeTree((u,c)=>(c===a&&(u.id=Ss),u));r.history.ignore().addNodeTree(l)}o.current=!0}return It.createElement(iee,null)};var Nk;(function(e){e[e.Any=0]="Any",e[e.Id=1]="Id",e[e.Obj=2]="Obj"})(Nk||(Nk={}));const V0=e=>{const{addLinkedNodeFromTree:t,setDOM:n,setNodeEvent:r,replaceNodes:i,reset:o,...s}=e;return s};function Is(e){const{connectors:t,actions:n,query:r,store:i,...o}=Ml(e),s=V0(n);return{connectors:t,actions:R.useMemo(()=>({...s,history:{...s.history,ignore:(...a)=>V0(s.history.ignore(...a)),throttle:(...a)=>V0(s.history.throttle(...a))}}),[s]),query:r,store:i,...o}}var F4=function(e){return Object.fromEntries?Object.fromEntries(e):e.reduce(function(t,n){var r=P4(n,2),i=r[0],o=r[1];return wn(wn({},t),{},Jn({},i,o))},{})},ps=function(e,t,n){var r=Array.isArray(t)?t:[t],i=wn({existOnly:!1,idOnly:!1},n||{}),o=r.filter(function(s){return!!s}).map(function(s){return typeof s=="string"?{node:e[s],exists:!!e[s]}:wb(s)!=="object"||i.idOnly?{node:null,exists:!1}:{node:s,exists:!!e[s.id]}});return i.existOnly&&hn(o.filter(function(s){return!s.exists}).length===0),o},oee=["history"],ql=null,zg=function(e,t){if(typeof t=="string")return t;var n,r=function(i,o){var s=function(a){if(ql&&ql.resolver===a)return ql.reversed;ql={resolver:a,reversed:new Map};for(var l=0,u=Object.entries(a);l<u.length;l++){var c=P4(u[l],2);ql.reversed.set(c[1],c[0])}return ql.reversed}(i).get(o);return s!==void 0?s:null}(e,t);return hn(r,_4.replace("%node_type%",(n=t).name||n.displayName)),r};const see=(e,t)=>typeof e=="string"?e:{resolvedName:zg(t,e)},Eb=(e,t)=>{let{type:n,isCanvas:r,props:i}=e;return i=Object.keys(i).reduce((o,s)=>{const a=i[s];return a==null||typeof a=="function"||(o[s]=s==="children"&&typeof a!="string"?R.Children.map(a,l=>typeof l=="string"?l:Eb(l,t)):typeof a.type=="function"?Eb(a,t):a),o},{}),{type:see(n,t),isCanvas:!!r,props:i}},aee=(e,t)=>{const{type:n,props:r,isCanvas:i,name:o,...s}=e;return{...Eb({type:n,isCanvas:i,props:r},t),...s}};function kb(e,t){hn(typeof t=="string");var n=e.nodes[t],r=function(i){return kb(e,i)};return{isCanvas:function(){return!!n.data.isCanvas},isRoot:function(){return n.id===Ss},isLinkedNode:function(){return n.data.parent&&r(n.data.parent).linkedNodes().includes(n.id)},isTopLevelNode:function(){return this.isRoot()||this.isLinkedNode()},isDeletable:function(){return!this.isTopLevelNode()},isParentOfTopLevelNodes:function(){return n.data.linkedNodes&&Object.keys(n.data.linkedNodes).length>0},isParentOfTopLevelCanvas:function(){return ka("query.node(id).isParentOfTopLevelCanvas",{suggest:"query.node(id).isParentOfTopLevelNodes"}),this.isParentOfTopLevelNodes()},isSelected:function(){return e.events.selected.has(t)},isHovered:function(){return e.events.hovered.has(t)},isDragged:function(){return e.events.dragged.has(t)},get:function(){return n},ancestors:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return function o(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=e.nodes[s];return u?(a.push(s),u.data.parent&&(i||!i&&l===0)&&(a=o(u.data.parent,a,l+1)),a):a}(n.data.parent)},descendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return function s(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(i||!i&&u===0)&&e.nodes[a]&&(o!=="childNodes"&&r(a).linkedNodes().forEach(function(c){l.push(c),l=s(c,l,u+1)}),o!=="linkedNodes"&&r(a).childNodes().forEach(function(c){l.push(c),l=s(c,l,u+1)})),l}(t)},linkedNodes:function(){return Object.values(n.data.linkedNodes||{})},childNodes:function(){return n.data.nodes||[]},isDraggable:function(i){try{var o=n;return hn(!this.isTopLevelNode(),bk),hn(kb(e,o.data.parent).isCanvas(),wk),hn(o.rules.canDrag(o,r),$Z),!0}catch(s){return i&&i(s),!1}},isDroppable:function(i,o){var s=ps(e.nodes,i),a=n;try{hn(this.isCanvas(),PZ),hn(a.rules.canMoveIn(s.map(function(u){return u.node}),a,r),TZ);var l={};return s.forEach(function(u){var c=u.node,f=u.exists;if(hn(c.rules.canDrop(a,c,r),RZ),f){hn(!r(c.id).isTopLevelNode(),bk);var h=r(c.id).descendants(!0);hn(!h.includes(a.id)&&a.id!==c.id,OZ);var p=c.data.parent&&e.nodes[c.data.parent];hn(p.data.isCanvas,wk),hn(p||!p&&!e.nodes[c.id],NZ),p.id!==a.id&&(l[p.id]||(l[p.id]=[]),l[p.id].push(c))}}),Object.keys(l).forEach(function(u){var c=e.nodes[u];hn(c.rules.canMoveOut(l[u],c,r),IZ)}),!0}catch(u){return o&&o(u),!1}},toSerializedNode:function(){return aee(n.data,e.options.resolver)},toNodeTree:function(i){var o=[t].concat(_f(this.descendants(!0,i))).reduce(function(s,a){return s[a]=r(a).get(),s},{});return{rootNodeId:t,nodes:o}},decendants:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return ka("query.node(id).decendants",{suggest:"query.node(id).descendants"}),this.descendants(i)},isTopLevelCanvas:function(){return!this.isRoot()&&!n.data.parent}}}function z4(e,t,n,r){for(var i={parent:e,index:0,where:"before"},o=0,s=0,a=0,l=0,u=0,c=0,f=0,h=t.length;f<h;f++){var p=t[f];if(c=p.top+p.outerHeight,l=p.left+p.outerWidth/2,u=p.top+p.outerHeight/2,!(s&&p.left>s||a&&u>=a||o&&p.left+p.outerWidth<o))if(i.index=f,p.inFlow){if(r<u){i.where="before";break}i.where="after"}else r<c&&(a=c),n<l?(s=l,i.where="before"):(o=l,i.where="after")}return i}var Vh=function(e){return typeof e=="string"?e:e.name};function Rk(e,t){var n=e.data.type,r={id:e.id||j4(),_hydrationTimestamp:Date.now(),data:wn({type:n,name:Vh(n),displayName:Vh(n),props:{},custom:{},parent:null,isCanvas:!1,hidden:!1,nodes:[],linkedNodes:{}},e.data),info:{},related:{},events:{selected:!1,dragged:!1,hovered:!1},rules:{canDrag:function(){return!0},canDrop:function(){return!0},canMoveIn:function(){return!0},canMoveOut:function(){return!0}},dom:null};if(r.data.type===Dl||r.data.type===Sb){var i=wn(wn({},xb),r.data.props);r.data.props=Object.keys(r.data.props).reduce(function(a,l){return Object.keys(xb).includes(l)?r.data[ree[l]||l]=i[l]:a[l]=r.data.props[l],a},{}),r.data.name=Vh(n=r.data.type),r.data.displayName=Vh(n),r.data.type===Sb&&(r.data.isCanvas=!0,L4())}t&&t(r);var o=n.craft;if(o){if(r.data.displayName=o.displayName||o.name||r.data.displayName,r.data.props=wn(wn({},o.props||o.defaultProps||{}),r.data.props),r.data.custom=wn(wn({},o.custom||{}),r.data.custom),o.isCanvas!=null&&(r.data.isCanvas=o.isCanvas),o.rules&&Object.keys(o.rules).forEach(function(a){["canDrag","canDrop","canMoveIn","canMoveOut"].includes(a)&&(r.rules[a]=o.rules[a])}),o.related){var s={id:r.id,related:!0};Object.keys(o.related).forEach(function(a){r.related[a]=function(l){return It.createElement(I4,s,It.createElement(o.related[a],l))}})}o.info&&(r.info=o.info)}return r}const Cb=(e,t,n)=>{let{type:r,props:i}=e;const o=((a,l)=>typeof a=="object"&&a.resolvedName?a.resolvedName==="Canvas"?Sb:l[a.resolvedName]:typeof a=="string"?a:null)(r,t);if(!o)return;i=Object.keys(i).reduce((a,l)=>{const u=i[l];return a[l]=u==null?null:typeof u=="object"&&u.resolvedName?Cb(u,t):l==="children"&&Array.isArray(u)?u.map(c=>typeof c=="string"?c:Cb(c,t)):u,a},{});const s={...It.createElement(o,{...i})};return{...s,name:zg(t,s.type)}},lee=(e,t)=>{const{type:n,props:r,...i}=e;hn(n!==void 0&&typeof n=="string"||n!==void 0&&n.resolvedName!==void 0,MZ.replace("%displayName%",e.displayName).replace("%availableComponents%",Object.keys(t).join(", ")));const{type:o,name:s,props:a}=Cb(e,t),{parent:l,custom:u,displayName:c,isCanvas:f,nodes:h,hidden:p}=i;return{type:o,name:s,displayName:c||s,props:a,custom:u||{},isCanvas:!!f,hidden:!!p,parent:l,linkedNodes:i.linkedNodes||i._childCanvas||{},nodes:h||[]}},uee=(e,t)=>{if(t.length<1)return{[e.id]:e};const n=t.map(({rootNodeId:i})=>i),r={...e,data:{...e.data,nodes:n}};return t.reduce((i,o)=>{const s=o.nodes[o.rootNodeId];return{...i,...o.nodes,[s.id]:{...s,data:{...s.data,parent:e.id}}}},{[e.id]:r})},cee=(e,t)=>({rootNodeId:e.id,nodes:uee(e,t)});function H4(e){const t=e&&e.options,n=()=>H4(e);return{getDropPlaceholder:(r,i,o,s=a=>e.nodes[a.id].dom)=>{const a=e.nodes[i],l=n().node(a.id).isCanvas()?a:e.nodes[a.data.parent];if(!l)return;const u=l.data.nodes||[],c=z4(l,u?u.reduce((p,b)=>{const y=s(e.nodes[b]);if(y){const _={id:b,...bf(y)};p.push(_)}return p},[]):[],o.x,o.y),f=u.length&&e.nodes[u[c.index]],h={placement:{...c,currentNode:f},error:null};return ps(e.nodes,r).forEach(({node:p,exists:b})=>{b&&n().node(p.id).isDraggable(y=>h.error=y)}),n().node(l.id).isDroppable(r,p=>h.error=p),h},getOptions:()=>t,getNodes:()=>e.nodes,node:r=>kb(e,r),getSerializedNodes(){const r=Object.keys(e.nodes).map(i=>[i,this.node(i).toSerializedNode()]);return F4(r)},getEvent:r=>function(i,o){var s=i.events[o];return{contains:function(a){return s.has(a)},isEmpty:function(){return this.all().length===0},first:function(){return this.all()[0]},last:function(){var a=this.all();return a[a.length-1]},all:function(){return Array.from(s)},size:function(){return this.all().length},at:function(a){return this.all()[a]},raw:function(){return s}}}(e,r),serialize(){return JSON.stringify(this.getSerializedNodes())},parseReactElement:r=>({toNodeTree(i){let o=function(a,l){let u=a;return typeof u=="string"&&(u=It.createElement(R.Fragment,{},u)),Rk({data:{type:u.type,props:{...u.props}}},c=>{l&&l(c,u)})}(r,(a,l)=>{const u=zg(e.options.resolver,a.data.type);a.data.displayName=a.data.displayName||u,a.data.name=u,i&&i(a,l)}),s=[];return r.props&&r.props.children&&(s=It.Children.toArray(r.props.children).reduce((a,l)=>(It.isValidElement(l)&&a.push(n().parseReactElement(l).toNodeTree(i)),a),[])),cee(o,s)}}),parseSerializedNode:r=>({toNode(i){const o=lee(r,e.options.resolver);hn(o.type);const s=typeof i=="string"&&i;return s&&ka("query.parseSerializedNode(...).toNode(id)",{suggest:"query.parseSerializedNode(...).toNode(node => node.id = id)"}),n().parseFreshNode({...s?{id:s}:{},data:o}).toNode(!s&&i)}}),parseFreshNode:r=>({toNode:i=>Rk(r,o=>{o.data.parent===b4&&(o.data.parent=Ss);const s=zg(e.options.resolver,o.data.type);hn(s!==null),o.data.displayName=o.data.displayName||s,o.data.name=s,i&&i(o)})}),createNode(r,i){ka("query.createNode(".concat(r,")"),{suggest:"query.parseReactElement(".concat(r,").toNodeTree()")});const o=this.parseReactElement(r).toNodeTree(),s=o.nodes[o.rootNodeId];return i&&(i.id&&(s.id=i.id),i.data&&(s.data={...s.data,...i.data})),s},getState:()=>e}}var dee=function(e){Yx(n,A4);var t=Jx(n);function n(){return sy(this,n),t.apply(this,arguments)}return ay(n,[{key:"handlers",value:function(){return{connect:function(r,i){},select:function(r,i){},hover:function(r,i){},drag:function(r,i){},drop:function(r,i){},create:function(r,i,o){}}}}]),n}();(function(e){Yx(n,WZ);var t=Jx(n);function n(){return sy(this,n),t.apply(this,arguments)}return ay(n)})();var Tk=function(e){e.preventDefault()},jb=function(){function e(t,n){sy(this,e),Jn(this,"store",void 0),Jn(this,"dragTarget",void 0),Jn(this,"currentDropTargetId",void 0),Jn(this,"currentDropTargetCanvasAncestorId",void 0),Jn(this,"currentIndicator",null),Jn(this,"currentTargetId",void 0),Jn(this,"currentTargetChildDimensions",void 0),Jn(this,"dragError",void 0),Jn(this,"draggedNodes",void 0),Jn(this,"onScrollListener",void 0),this.store=t,this.dragTarget=n,this.currentDropTargetId=null,this.currentDropTargetCanvasAncestorId=null,this.currentTargetId=null,this.currentTargetChildDimensions=null,this.currentIndicator=null,this.dragError=null,this.draggedNodes=this.getDraggedNodes(),this.validateDraggedNodes(),this.onScrollListener=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollListener,!0),window.addEventListener("dragover",Tk,!1)}return ay(e,[{key:"cleanup",value:function(){window.removeEventListener("scroll",this.onScrollListener,!0),window.removeEventListener("dragover",Tk,!1)}},{key:"onScroll",value:function(t){var n=t.target,r=this.store.query.node(Ss).get();n instanceof Element&&r&&r.dom&&n.contains(r.dom)&&(this.currentTargetChildDimensions=null)}},{key:"getDraggedNodes",value:function(){return ps(this.store.query.getNodes(),this.dragTarget.type==="new"?this.dragTarget.tree.nodes[this.dragTarget.tree.rootNodeId]:this.dragTarget.nodes)}},{key:"validateDraggedNodes",value:function(){var t=this;this.dragTarget.type!=="new"&&this.draggedNodes.forEach(function(n){n.exists&&t.store.query.node(n.node.id).isDraggable(function(r){t.dragError=r})})}},{key:"isNearBorders",value:function(t,n,r){return t.top+e.BORDER_OFFSET>r||t.bottom-e.BORDER_OFFSET<r||t.left+e.BORDER_OFFSET>n||t.right-e.BORDER_OFFSET<n}},{key:"isDiff",value:function(t){return!this.currentIndicator||this.currentIndicator.placement.parent.id!==t.parent.id||this.currentIndicator.placement.index!==t.index||this.currentIndicator.placement.where!==t.where}},{key:"getChildDimensions",value:function(t){var n=this,r=this.currentTargetChildDimensions;return this.currentTargetId===t.id&&r?r:t.data.nodes.reduce(function(i,o){var s=n.store.query.node(o).get().dom;return s&&i.push(wn({id:o},bf(s))),i},[])}},{key:"getCanvasAncestor",value:function(t){var n=this;if(t===this.currentDropTargetId&&this.currentDropTargetCanvasAncestorId){var r=this.store.query.node(this.currentDropTargetCanvasAncestorId).get();if(r)return r}return function i(o){var s=n.store.query.node(o).get();return s&&s.data.isCanvas?s:s.data.parent?i(s.data.parent):null}(t)}},{key:"computeIndicator",value:function(t,n,r){var i=this.getCanvasAncestor(t);if(i&&(this.currentDropTargetId=t,this.currentDropTargetCanvasAncestorId=i.id,i.data.parent&&this.isNearBorders(bf(i.dom),n,r)&&!this.store.query.node(i.id).isLinkedNode()&&(i=this.store.query.node(i.data.parent).get()),i)){this.currentTargetChildDimensions=this.getChildDimensions(i),this.currentTargetId=i.id;var o=z4(i,this.currentTargetChildDimensions,n,r);if(this.isDiff(o)){var s=this.dragError;s||this.store.query.node(i.id).isDroppable(this.draggedNodes.map(function(u){return u.node}),function(u){s=u});var a=i.data.nodes[o.index],l=a&&this.store.query.node(a).get();return this.currentIndicator={placement:wn(wn({},o),{},{currentNode:l}),error:s},this.currentIndicator}}}},{key:"getIndicator",value:function(){return this.currentIndicator}}]),e}();Jn(jb,"BORDER_OFFSET",10);var Ik=function(e,t){if(t.length===1||arguments.length>2&&arguments[2]!==void 0&&arguments[2]){var n=t[0].getBoundingClientRect(),r=n.width,i=n.height,o=t[0].cloneNode(!0);return o.style.position="absolute",o.style.left="-100%",o.style.top="-100%",o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.pointerEvents="none",o.classList.add("drag-shadow"),document.body.appendChild(o),e.dataTransfer.setDragImage(o,0,0),o}var s=document.createElement("div");return s.style.position="absolute",s.style.left="-100%",s.style.top="-100%",s.style.width="100%",s.style.height="100%",s.style.pointerEvents="none",s.classList.add("drag-shadow-container"),t.forEach(function(a){var l=a.getBoundingClientRect(),u=l.width,c=l.height,f=l.top,h=l.left,p=a.cloneNode(!0);p.style.position="absolute",p.style.left="".concat(h,"px"),p.style.top="".concat(f,"px"),p.style.width="".concat(u,"px"),p.style.height="".concat(c,"px"),p.classList.add("drag-shadow"),s.appendChild(p)}),document.body.appendChild(s),e.dataTransfer.setDragImage(s,e.clientX,e.clientY),s},U4=function(e){Yx(n,dee);var t=Jx(n);function n(){var r;sy(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Jn(td(r=t.call.apply(t,[this].concat(o))),"draggedElementShadow",void 0),Jn(td(r),"dragTarget",void 0),Jn(td(r),"positioner",null),Jn(td(r),"currentSelectedElementIds",[]),r}return ay(n,[{key:"onDisable",value:function(){this.options.store.actions.clearEvents()}},{key:"handlers",value:function(){var r=this,i=this.options.store;return{connect:function(o,s){return i.actions.setDOM(s,o),r.reflect(function(a){a.select(o,s),a.hover(o,s),a.drop(o,s)})},select:function(o,s){var a=r.addCraftEventListener(o,"mousedown",function(u){u.craft.stopPropagation();var c=[];if(s){var f=i.query,h=f.getEvent("selected").all();(r.options.isMultiSelectEnabled(u)||h.includes(s))&&(c=h.filter(function(p){var b=f.node(p).descendants(!0),y=f.node(p).ancestors(!0);return!b.includes(s)&&!y.includes(s)})),c.includes(s)||c.push(s)}i.actions.setNodeEvent("selected",c)}),l=r.addCraftEventListener(o,"click",function(u){u.craft.stopPropagation();var c=i.query.getEvent("selected").all(),f=r.options.isMultiSelectEnabled(u),h=r.currentSelectedElementIds.includes(s),p=_f(c);f&&h?(p.splice(p.indexOf(s),1),i.actions.setNodeEvent("selected",p)):!f&&c.length>1&&i.actions.setNodeEvent("selected",p=[s]),r.currentSelectedElementIds=p});return function(){a(),l()}},hover:function(o,s){var a=r.addCraftEventListener(o,"mouseover",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",s)}),l=null;return r.options.removeHoverOnMouseleave&&(l=r.addCraftEventListener(o,"mouseleave",function(u){u.craft.stopPropagation(),i.actions.setNodeEvent("hovered",null)})),function(){a(),l&&l()}},drop:function(o,s){var a=r.addCraftEventListener(o,"dragover",function(u){if(u.craft.stopPropagation(),u.preventDefault(),r.positioner){var c=r.positioner.computeIndicator(s,u.clientX,u.clientY);c&&i.actions.setIndicator(c)}}),l=r.addCraftEventListener(o,"dragenter",function(u){u.craft.stopPropagation(),u.preventDefault()});return function(){l(),a()}},drag:function(o,s){if(!i.query.node(s).isDraggable())return function(){};o.setAttribute("draggable","true");var a=r.addCraftEventListener(o,"dragstart",function(u){u.craft.stopPropagation();var c=i.query,f=i.actions,h=c.getEvent("selected").all(),p=r.options.isMultiSelectEnabled(u);r.currentSelectedElementIds.includes(s)||(h=p?[].concat(_f(h),[s]):[s],i.actions.setNodeEvent("selected",h)),f.setNodeEvent("dragged",h);var b=h.map(function(y){return c.node(y).get().dom});r.draggedElementShadow=Ik(u,b,n.forceSingleDragShadow),r.dragTarget={type:"existing",nodes:h},r.positioner=new jb(r.options.store,r.dragTarget)}),l=r.addCraftEventListener(o,"dragend",function(u){u.craft.stopPropagation(),r.dropElement(function(c,f){c.type!=="new"&&i.actions.move(c.nodes,f.placement.parent.id,f.placement.index+(f.placement.where==="after"?1:0))})});return function(){o.setAttribute("draggable","false"),a(),l()}},create:function(o,s,a){o.setAttribute("draggable","true");var l=r.addCraftEventListener(o,"dragstart",function(c){var f;if(c.craft.stopPropagation(),typeof s=="function"){var h=s();f=It.isValidElement(h)?i.query.parseReactElement(h).toNodeTree():h}else f=i.query.parseReactElement(s).toNodeTree();r.draggedElementShadow=Ik(c,[c.currentTarget],n.forceSingleDragShadow),r.dragTarget={type:"new",tree:f},r.positioner=new jb(r.options.store,r.dragTarget)}),u=r.addCraftEventListener(o,"dragend",function(c){c.craft.stopPropagation(),r.dropElement(function(f,h){f.type!=="existing"&&(i.actions.addNodeTree(f.tree,h.placement.parent.id,h.placement.index+(h.placement.where==="after"?1:0)),a&&rG(a.onCreate)&&a.onCreate(f.tree))})});return function(){o.removeAttribute("draggable"),l(),u()}}}}},{key:"dropElement",value:function(r){var i=this.options.store;if(this.positioner){var o=this.draggedElementShadow,s=this.positioner.getIndicator();this.dragTarget&&s&&!s.error&&r(this.dragTarget,s),o&&(o.parentNode.removeChild(o),this.draggedElementShadow=null),this.dragTarget=null,i.actions.setIndicator(null),i.actions.setNodeEvent("dragged",null),this.positioner.cleanup(),this.positioner=null}}}]),n}();function fee(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,i=0,o=0,s=0,a=0,l=e.where;return n?n.inFlow?(s=n.outerWidth,a=r,i=l==="before"?n.top:n.bottom,o=n.left):(s=r,a=n.outerHeight,i=n.top,o=l==="before"?n.left:n.left+n.outerWidth):t&&(i=t.top+t.padding.top,o=t.left+t.padding.left,s=t.outerWidth-t.padding.right-t.padding.left-t.margin.left-t.margin.right,a=r),{top:"".concat(i,"px"),left:"".concat(o,"px"),width:"".concat(s,"px"),height:"".concat(a,"px")}}Jn(U4,"forceSingleDragShadow",YZ()&&GZ());const hee=()=>{var i;const{indicator:e,indicatorOptions:t,enabled:n}=Ml(o=>({indicator:o.indicator,indicatorOptions:o.options.indicator,enabled:o.options.enabled})),r=D4();return R.useEffect(()=>{r&&(n?r.enable():r.disable())},[n,r]),e?It.createElement(KZ,{className:t.className,style:{...fee(e.placement,bf(e.placement.parent.dom),e.placement.currentNode&&bf(e.placement.currentNode.dom),t.thickness),backgroundColor:e.error?t.error:t.success,transition:t.transition||"0.2s ease-in",...(i=t.style)!=null?i:{}},parentDom:e.placement.parent.dom}):null},pee=({children:e})=>{const t=R.useContext(Qx),n=R.useMemo(()=>t.query.getOptions().handlers(t),[t]);return n?It.createElement(M4.Provider,{value:n},It.createElement(hee,null),e):null},Pk={nodes:{},events:{dragged:new Set,selected:new Set,hovered:new Set},indicator:null,options:{onNodesChange:()=>null,onRender:({render:e})=>e,onBeforeMoveEnd:()=>null,resolver:{},enabled:!0,indicator:{error:"red",success:"rgb(98, 196, 98)"},handlers:e=>new U4({store:e,removeHoverOnMouseleave:!1,isMultiSelectEnabled:t=>!!t.metaKey}),normalizeNodes:()=>{}}},gee={methods:function(e,t){return wn(wn({},function(n,r){var i=function(a,l,u){if(function h(p,b){var y=a.nodes[p];typeof y.data.type!="string"&&hn(n.options.resolver[y.data.name],_4.replace("%node_type%","".concat(y.data.type.name))),n.nodes[p]=wn(wn({},y),{},{data:wn(wn({},y.data),{},{parent:b})}),y.data.nodes.length>0&&(delete n.nodes[p].data.props.children,y.data.nodes.forEach(function(_){return h(_,y.id)})),Object.values(y.data.linkedNodes).forEach(function(_){return h(_,y.id)})}(a.rootNodeId,l),l||a.rootNodeId!==Ss){var c=o(l);if(u.type!=="child")c.data.linkedNodes[u.id]=a.rootNodeId;else{var f=u.index;f!=null?c.data.nodes.splice(f,0,a.rootNodeId):c.data.nodes.push(a.rootNodeId)}}},o=function(a){hn(a);var l=n.nodes[a];return hn(l),l},s=function a(l){var u=n.nodes[l],c=n.nodes[u.data.parent];if(u.data.nodes&&_f(u.data.nodes).forEach(function(p){return a(p)}),u.data.linkedNodes&&Object.values(u.data.linkedNodes).map(function(p){return a(p)}),c.data.nodes.includes(l)){var f=c.data.nodes;f.splice(f.indexOf(l),1)}else{var h=Object.keys(c.data.linkedNodes).find(function(p){return c.data.linkedNodes[p]===p});h&&delete c.data.linkedNodes[h]}(function(p,b){Object.keys(p.events).forEach(function(y){var _=p.events[y];_&&_.has&&_.has(b)&&(p.events[y]=new Set(Array.from(_).filter(function(m){return b!==m})))})})(n,l),delete n.nodes[l]};return{addLinkedNodeFromTree:function(a,l,u){var c=o(l).data.linkedNodes[u];c&&s(c),i(a,l,{type:"linked",id:u})},add:function(a,l,u){var c=[a];Array.isArray(a)&&(ka("actions.add(node: Node[])",{suggest:"actions.add(node: Node)"}),c=a),c.forEach(function(f){i({nodes:Jn({},f.id,f),rootNodeId:f.id},l,{type:"child",index:u})})},addNodeTree:function(a,l,u){i(a,l,{type:"child",index:u})},delete:function(a){ps(n.nodes,a,{existOnly:!0,idOnly:!0}).forEach(function(l){var u=l.node;hn(!r.node(u.id).isTopLevelNode()),s(u.id)})},deserialize:function(a){var l=typeof a=="string"?JSON.parse(a):a,u=Object.keys(l).map(function(c){var f=c;return c===b4&&(f=Ss),[f,r.parseSerializedNode(l[c]).toNode(function(h){return h.id=f})]});this.replaceNodes(F4(u))},move:function(a,l,u){var c=ps(n.nodes,a,{existOnly:!0}),f=n.nodes[l],h=new Set;c.forEach(function(p,b){var y=p.node,_=y.id,m=y.data.parent;r.node(l).isDroppable([_],function(S){throw new Error(S)}),n.options.onBeforeMoveEnd(y,f,n.nodes[m]);var v=n.nodes[m].data.nodes;h.add(v);var w=v.indexOf(_);v[w]="$$",f.data.nodes.splice(u+b,0,_),n.nodes[_].data.parent=l}),h.forEach(function(p){var b=p.length;_f(p).reverse().forEach(function(y,_){y==="$$"&&p.splice(b-1-_,1)})})},replaceNodes:function(a){this.clearEvents(),n.nodes=a},clearEvents:function(){this.setNodeEvent("selected",null),this.setNodeEvent("hovered",null),this.setNodeEvent("dragged",null),this.setIndicator(null)},reset:function(){this.clearEvents(),this.replaceNodes({})},setOptions:function(a){a(n.options)},setNodeEvent:function(a,l){if(n.events[a].forEach(function(f){n.nodes[f]&&(n.nodes[f].events[a]=!1)}),n.events[a]=new Set,l){var u=ps(n.nodes,l,{idOnly:!0,existOnly:!0}),c=new Set(u.map(function(f){return f.node.id}));c.forEach(function(f){n.nodes[f].events[a]=!0}),n.events[a]=c}},setCustom:function(a,l){ps(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.custom)})},setDOM:function(a,l){n.nodes[a]&&(n.nodes[a].dom=l)},setIndicator:function(a){a&&(!a.placement.parent.dom||a.placement.currentNode&&!a.placement.currentNode.dom)||(n.indicator=a)},setHidden:function(a,l){n.nodes[a].data.hidden=l},setProp:function(a,l){ps(n.nodes,a,{idOnly:!0,existOnly:!0}).forEach(function(u){return l(n.nodes[u.node.id].data.props)})},selectNode:function(a){if(a){var l=ps(n.nodes,a,{idOnly:!0,existOnly:!0});this.setNodeEvent("selected",l.map(function(u){return u.node.id}))}else this.setNodeEvent("selected",null);this.setNodeEvent("hovered",null)}}}(e,t)),{},{setState:function(n){var r=Xx(this,oee);n(e,r)}})},ignoreHistoryForActions:["setDOM","setNodeEvent","selectNode","clearEvents","setOptions","setIndicator"],normalizeHistory:e=>{Object.keys(e.events).forEach(t=>{Array.from(e.events[t]||[]).forEach(n=>{e.nodes[n]||e.events[t].delete(n)})}),Object.keys(e.nodes).forEach(t=>{const n=e.nodes[t];Object.keys(n.events).forEach(r=>{n.events[r]&&e.events[r]&&!e.events[r].has(n.id)&&(n.events[r]=!1)})})}},mee=(e,t)=>BZ(gee,{...Pk,options:{...Pk.options,...e}},H4,t),yee=({children:e,...t})=>{t.resolver!==void 0&&hn(typeof t.resolver=="object"&&!Array.isArray(t.resolver)&&t.resolver!==null);const n=R.useRef(t),r=mee(n.current,(i,o,s,a,l)=>{if(!s)return;const{patches:u,...c}=s;for(let f=0;f<u.length;f++){const{path:h}=u[f],p=h.length>2&&h[0]==="nodes"&&h[2]==="data";if([On.IGNORE,On.THROTTLE].includes(c.type)&&c.params&&(c.type=c.params[0]),["setState","deserialize"].includes(c.type)||p){l(b=>{i.options.normalizeNodes&&i.options.normalizeNodes(b,o,c,a)});break}}});return R.useEffect(()=>{r&&t.enabled!==void 0&&r.query.getOptions().enabled!==t.enabled&&r.actions.setOptions(i=>{i.enabled=t.enabled})},[r,t.enabled]),R.useEffect(()=>{r.subscribe(i=>({json:r.query.serialize()}),()=>{r.query.getOptions().onNodesChange(r.query)})},[r]),r?R.createElement(Qx.Provider,{value:r},R.createElement(pee,null,e)):null};function xf(){const{connectors:{connect:e,drag:t}}=Zr();return d.jsx("div",{ref:n=>e(t(n)),style:{height:1,width:"100%",backgroundColor:"white"}})}function vee(e){return d.jsx("div",{style:{height:1,width:"100%",backgroundColor:"white"}})}function wee(){const{actions:{setProp:e}}=Zr(t=>({}));return d.jsx("div",{})}xf.craft={rules:{canDrag:e=>e.data.props.text!=="Drag"},related:{settings:wee}};function bee({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const[o,s]=R.useState(""),[a,l]=R.useState(""),[u,c]=R.useState({nodes:[],edges:[]});return R.useEffect(()=>{e&&(s(e.name),l(e.icon),c(e.blueprint))},[e]),d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:"Edit Button State",onClose:n}),d.jsxs(ur,{children:[d.jsx(Kt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:o,onChange:f=>s(f),isValid:!0,errorMessage:"Names must be unique"}),d.jsx("p",{onClick:()=>mn({type:"blueprint",title:"",data:u,onSave:f=>c(f)}),children:"On Click Action"})]}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>{r({name:o,icon:a,blueprint:u}),n()},children:"Update"})]})]})}const Ia=R.forwardRef(({buttons:e,onClick:t,isOpen:n=!1},r)=>d.jsxs("div",{className:"absolute right-6 bottom-6 group",ref:r,children:[d.jsx("div",{className:"".concat(n?"flex":"hidden"," flex-col items-center mb-4 space-y-2"),children:e==null?void 0:e.map(i=>d.jsxs("button",{onClick:i.onClick,type:"button",className:"relative w-[52px] h-[52px] text-neutral-500 bg-white rounded-lg border border-neutral-200 hover:text-neutral-900 dark:border-neutral-600 shadow-sm dark:hover:text-white dark:text-neutral-400 hover:bg-neutral-50 dark:bg-neutral-700 dark:hover:bg-neutral-600 focus:ring-4 focus:ring-neutral-300 focus:outline-none dark:focus:ring-neutral-400",children:[d.jsx("svg",{className:"w-5 h-5 mx-auto","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{d:"M14.419 10.581a3.564 3.564 0 0 0-2.574 1.1l-4.756-2.49a3.54 3.54 0 0 0 .072-.71 3.55 3.55 0 0 0-.043-.428L11.67 6.1a3.56 3.56 0 1 0-.831-2.265c.006.143.02.286.043.428L6.33 6.218a3.573 3.573 0 1 0-.175 4.743l4.756 2.491a3.58 3.58 0 1 0 3.508-2.871Z"})}),d.jsx("span",{className:"absolute block mb-px text-sm font-medium -translate-x-[100%] -translate-y-1/2 -start-3 top-1/2 shadow-black",children:i.name})]},i.name))}),d.jsxs("button",{id:"floating-action-button",onClick:()=>t?t():null,type:"button",className:"flex items-center justify-center text-white bg-brand-700 rounded-lg w-14 h-14 hover:bg-brand-800 dark:bg-brand-600 dark:hover:bg-brand-700",children:[d.jsx("svg",{className:"".concat(!t&&"group-hover:rotate-45 transition-transform"," w-5 h-5"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Open actions menu"})]})]}));function Sf({buttons:e}){const{connectors:{connect:t,drag:n}}=Zr();return d.jsx(Ia,{ref:r=>t(n(r)),buttons:e==null?void 0:e.map(r=>({name:r.name,icon:r.icon,onClick:()=>{}})),isOpen:!0})}function _ee({blueprint:e,isList:t,buttons:n,state:r,updateState:i}){const o=ac(),[s,a]=R.useState(!1),l=R.useCallback(()=>{if(t)return a(!s);new Uo(e).processBlueprint(o,r,i)},[e,o,r,i,s,t]);return d.jsx(Ia,{isOpen:s,onClick:l,buttons:n==null?void 0:n.map(u=>({name:u.name,icon:u.icon,onClick:()=>new Uo(u.blueprint).processBlueprint(o,r,i)}))})}function xee(){const{actions:{setProp:e},isList:t,buttons:n,blueprint:r}=Zr(s=>({isList:s.data.props.isList,buttons:s.data.props.buttons,blueprint:s.data.props.blueprint})),[i,o]=R.useState(null);return d.jsxs("div",{children:[d.jsx(Kn,{id:"isList",label:"is List?",checked:t,onChange:s=>e(a=>a.isList=s)}),t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsx("h5",{style:{marginLeft:10},children:"Buttons"}),d.jsx("div",{children:d.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:()=>e(s=>(s.buttons.find(a=>a.name==="new button")||s.buttons.push({name:"new button",icon:"",blueprint:{nodes:$r(),edges:[]}}),s)),children:[d.jsx("svg",{className:"group-hover:rotate-45 transition-transform w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Icon description"})]})})]}),d.jsx(qf,{}),n.map(s=>d.jsx("p",{onClick:()=>o(s),children:s.name},s.name)),d.jsx(bee,{data:i,isOpen:i!==null,requestClose:()=>o(null),onSave:s=>e(a=>{for(let l=0;l<a.buttons.length;l++)a.buttons[l].name===i.name&&(a.buttons[l]=s);return a}),onDelete:()=>e(s=>s.buttons=s.buttons.filter(a=>a.name!==i.name))})]}):d.jsx("p",{onClick:()=>mn({type:"blueprint",title:"",data:r,onSave:s=>e(a=>a.blueprint=s)}),children:"On Click"})]})}const See={defaultProps:{isList:!1,buttons:[],blueprint:{nodes:$r(),edges:[]}},related:{settings:xee}};Sf.craft=See;const Eee=e=>{const t=ac(),[n,r]=R.useState("default"),i=R.useMemo(()=>{var l;return e.dynamicOptions?(l=new Uo(e.optionsBlueprint).processBlueprint(t,e.state,e.updateState))!=null?l:[]:e.options},[t,e.state,e.updateState]),o=R.useCallback(s=>{new Uo(e.onChange).processBlueprint({...t,selectedValue:s},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return d.jsxs(dt,{style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,value:n,onChange:s=>{r(s),o(i.find(a=>a.name===s))},children:[d.jsx("option",{disabled:!0,value:"default",children:"Select an option..."}),i.map(s=>d.jsx("option",{value:s.name,children:s.name},s.name))]})},kee=e=>{const t=ac(),n=R.useMemo(()=>new Uo(e.getValue).processBlueprint(t,e.state,e.updateState),[e.getValue,t,e.state,e.updateState]),r=R.useCallback(i=>{new Uo(e.onChange).processBlueprint({...t,"field value":i},e.state,e.updateState)},[e.onChange,t,e.state,e.updateState]);return d.jsx(Kt,{style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,value:n,onChange:i=>r(i),isValid:!0,errorMessage:""})},Cee=({data:e,style:t,state:n,updateState:r})=>d.jsx("div",{style:t,children:d.jsx(i4,{localData:[],children:d.jsx(W4,{node:e.ROOT,data:e,state:n,updateState:r})})}),W4=({node:e,data:t,state:n,updateState:r})=>{const i=typeof e.type=="object"?e.type.resolvedName:e.type,o=e.nodes.map(s=>d.jsx(W4,{node:t[s],data:t,state:n,updateState:r},s));switch(i){case"Container":return d.jsx(Dq,{...e.props,state:n,updateState:r,children:o});case"Text":return d.jsx(Lq,{...e.props,state:n,updateState:r});case"DesignerDivider":return d.jsx(vee,{...e.props,state:n,updateState:r});case"FAB":return d.jsx(_ee,{...e.props,state:n,updateState:r});case"Select":return d.jsx(Eee,{...e.props,state:n,updateState:r});case"TextInput":return d.jsx(kee,{...e.props,state:n,updateState:r});default:return d.jsxs("h1",{children:["No component for type ",i]})}};var V4={exports:{}},q0={exports:{}},K0={exports:{}},G0={},Lc={},Ok;function jee(){if(Ok)return Lc;Ok=1,Lc.byteLength=a,Lc.toByteArray=u,Lc.fromByteArray=h;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(p){var b=p.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=p.indexOf("=");y===-1&&(y=b);var _=y===b?0:4-y%4;return[y,_]}function a(p){var b=s(p),y=b[0],_=b[1];return(y+_)*3/4-_}function l(p,b,y){return(b+y)*3/4-y}function u(p){var b,y=s(p),_=y[0],m=y[1],v=new n(l(p,_,m)),w=0,S=m>0?_-4:_,k;for(k=0;k<S;k+=4)b=t[p.charCodeAt(k)]<<18|t[p.charCodeAt(k+1)]<<12|t[p.charCodeAt(k+2)]<<6|t[p.charCodeAt(k+3)],v[w++]=b>>16&255,v[w++]=b>>8&255,v[w++]=b&255;return m===2&&(b=t[p.charCodeAt(k)]<<2|t[p.charCodeAt(k+1)]>>4,v[w++]=b&255),m===1&&(b=t[p.charCodeAt(k)]<<10|t[p.charCodeAt(k+1)]<<4|t[p.charCodeAt(k+2)]>>2,v[w++]=b>>8&255,v[w++]=b&255),v}function c(p){return e[p>>18&63]+e[p>>12&63]+e[p>>6&63]+e[p&63]}function f(p,b,y){for(var _,m=[],v=b;v<y;v+=3)_=(p[v]<<16&16711680)+(p[v+1]<<8&65280)+(p[v+2]&255),m.push(c(_));return m.join("")}function h(p){for(var b,y=p.length,_=y%3,m=[],v=16383,w=0,S=y-_;w<S;w+=v)m.push(f(p,w,w+v>S?S:w+v));return _===1?(b=p[y-1],m.push(e[b>>2]+e[b<<4&63]+"==")):_===2&&(b=(p[y-2]<<8)+p[y-1],m.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),m.join("")}return Lc}var qh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var $k;function Aee(){return $k||($k=1,qh.read=function(e,t,n,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=o*256+e[t+f],f+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=s*256+e[t+f],f+=h,c-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(p?-1:1)*s*Math.pow(2,o-r)},qh.write=function(e,t,n,r,i,o){var s,a,l,u=o*8-i-1,c=(1<<u)-1,f=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,b=r?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?t+=h/l:t+=h*Math.pow(2,1-f),t*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*l-1)*Math.pow(2,i),s=s+f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=a&255,p+=b,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=s&255,p+=b,s/=256,u-=8);e[n+p-b]|=y*128}),qh}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Mk;function Pa(){return Mk||(Mk=1,function(e){const t=jee(),n=Aee(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const O=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(O,C),O.foo()===42}catch(O){return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(O){if(O>i)throw new RangeError('The value "'+O+'" is invalid for option "size"');const C=new Uint8Array(O);return Object.setPrototypeOf(C,a.prototype),C}function a(O,C,j){if(typeof O=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(O)}return l(O,C,j)}a.poolSize=8192;function l(O,C,j){if(typeof O=="string")return h(O,C);if(ArrayBuffer.isView(O))return b(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Oe(O,ArrayBuffer)||O&&Oe(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Oe(O,SharedArrayBuffer)||O&&Oe(O.buffer,SharedArrayBuffer)))return y(O,C,j);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=O.valueOf&&O.valueOf();if(q!=null&&q!==O)return a.from(q,C,j);const de=_(O);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return a.from(O[Symbol.toPrimitive]("string"),C,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}a.from=function(O,C,j){return l(O,C,j)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function c(O,C,j){return u(O),O<=0?s(O):C!==void 0?typeof j=="string"?s(O).fill(C,j):s(O).fill(C):s(O)}a.alloc=function(O,C,j){return c(O,C,j)};function f(O){return u(O),s(O<0?0:m(O)|0)}a.allocUnsafe=function(O){return f(O)},a.allocUnsafeSlow=function(O){return f(O)};function h(O,C){if((typeof C!="string"||C==="")&&(C="utf8"),!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const j=w(O,C)|0;let q=s(j);const de=q.write(O,C);return de!==j&&(q=q.slice(0,de)),q}function p(O){const C=O.length<0?0:m(O.length)|0,j=s(C);for(let q=0;q<C;q+=1)j[q]=O[q]&255;return j}function b(O){if(Oe(O,Uint8Array)){const C=new Uint8Array(O);return y(C.buffer,C.byteOffset,C.byteLength)}return p(O)}function y(O,C,j){if(C<0||O.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<C+(j||0))throw new RangeError('"length" is outside of buffer bounds');let q;return C===void 0&&j===void 0?q=new Uint8Array(O):j===void 0?q=new Uint8Array(O,C):q=new Uint8Array(O,C,j),Object.setPrototypeOf(q,a.prototype),q}function _(O){if(a.isBuffer(O)){const C=m(O.length)|0,j=s(C);return j.length===0||O.copy(j,0,0,C),j}if(O.length!==void 0)return typeof O.length!="number"||At(O.length)?s(0):p(O);if(O.type==="Buffer"&&Array.isArray(O.data))return p(O.data)}function m(O){if(O>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return O|0}function v(O){return+O!=O&&(O=0),a.alloc(+O)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,j){if(Oe(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),Oe(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(C)||!a.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===j)return 0;let q=C.length,de=j.length;for(let je=0,Be=Math.min(q,de);je<Be;++je)if(C[je]!==j[je]){q=C[je],de=j[je];break}return q<de?-1:de<q?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,j){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let q;if(j===void 0)for(j=0,q=0;q<C.length;++q)j+=C[q].length;const de=a.allocUnsafe(j);let je=0;for(q=0;q<C.length;++q){let Be=C[q];if(Oe(Be,Uint8Array))je+Be.length>de.length?(a.isBuffer(Be)||(Be=a.from(Be)),Be.copy(de,je)):Uint8Array.prototype.set.call(de,Be,je);else if(a.isBuffer(Be))Be.copy(de,je);else throw new TypeError('"list" argument must be an Array of Buffers');je+=Be.length}return de};function w(O,C){if(a.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Oe(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const j=O.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&j===0)return 0;let de=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return We(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return Fe(O).length;default:if(de)return q?-1:We(O).length;C=(""+C).toLowerCase(),de=!0}}a.byteLength=w;function S(O,C,j){let q=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,C>>>=0,j<=C))return"";for(O||(O="utf8");;)switch(O){case"hex":return V(this,C,j);case"utf8":case"utf-8":return L(this,C,j);case"ascii":return oe(this,C,j);case"latin1":case"binary":return z(this,C,j);case"base64":return U(this,C,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,C,j);default:if(q)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),q=!0}}a.prototype._isBuffer=!0;function k(O,C,j){const q=O[C];O[C]=O[j],O[j]=q}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let j=0;j<C;j+=2)k(this,j,j+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let j=0;j<C;j+=4)k(this,j,j+3),k(this,j+1,j+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let j=0;j<C;j+=8)k(this,j,j+7),k(this,j+1,j+6),k(this,j+2,j+5),k(this,j+3,j+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?L(this,0,C):S.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const j=e.INSPECT_MAX_BYTES;return C=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(C+=" ... "),"<Buffer "+C+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(C,j,q,de,je){if(Oe(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(j===void 0&&(j=0),q===void 0&&(q=C?C.length:0),de===void 0&&(de=0),je===void 0&&(je=this.length),j<0||q>C.length||de<0||je>this.length)throw new RangeError("out of range index");if(de>=je&&j>=q)return 0;if(de>=je)return-1;if(j>=q)return 1;if(j>>>=0,q>>>=0,de>>>=0,je>>>=0,this===C)return 0;let Be=je-de,Nt=q-j;const Vt=Math.min(Be,Nt),it=this.slice(de,je),Yt=C.slice(j,q);for(let Ot=0;Ot<Vt;++Ot)if(it[Ot]!==Yt[Ot]){Be=it[Ot],Nt=Yt[Ot];break}return Be<Nt?-1:Nt<Be?1:0};function A(O,C,j,q,de){if(O.length===0)return-1;if(typeof j=="string"?(q=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,At(j)&&(j=de?0:O.length-1),j<0&&(j=O.length+j),j>=O.length){if(de)return-1;j=O.length-1}else if(j<0)if(de)j=0;else return-1;if(typeof C=="string"&&(C=a.from(C,q)),a.isBuffer(C))return C.length===0?-1:T(O,C,j,q,de);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(O,C,j):Uint8Array.prototype.lastIndexOf.call(O,C,j):T(O,[C],j,q,de);throw new TypeError("val must be string, number or Buffer")}function T(O,C,j,q,de){let je=1,Be=O.length,Nt=C.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(O.length<2||C.length<2)return-1;je=2,Be/=2,Nt/=2,j/=2}function Vt(Yt,Ot){return je===1?Yt[Ot]:Yt.readUInt16BE(Ot*je)}let it;if(de){let Yt=-1;for(it=j;it<Be;it++)if(Vt(O,it)===Vt(C,Yt===-1?0:it-Yt)){if(Yt===-1&&(Yt=it),it-Yt+1===Nt)return Yt*je}else Yt!==-1&&(it-=it-Yt),Yt=-1}else for(j+Nt>Be&&(j=Be-Nt),it=j;it>=0;it--){let Yt=!0;for(let Ot=0;Ot<Nt;Ot++)if(Vt(O,it+Ot)!==Vt(C,Ot)){Yt=!1;break}if(Yt)return it}return-1}a.prototype.includes=function(C,j,q){return this.indexOf(C,j,q)!==-1},a.prototype.indexOf=function(C,j,q){return A(this,C,j,q,!0)},a.prototype.lastIndexOf=function(C,j,q){return A(this,C,j,q,!1)};function P(O,C,j,q){j=Number(j)||0;const de=O.length-j;q?(q=Number(q),q>de&&(q=de)):q=de;const je=C.length;q>je/2&&(q=je/2);let Be;for(Be=0;Be<q;++Be){const Nt=parseInt(C.substr(Be*2,2),16);if(At(Nt))return Be;O[j+Be]=Nt}return Be}function Y(O,C,j,q){return qe(We(C,O.length-j),O,j,q)}function D(O,C,j,q){return qe(Ke(C),O,j,q)}function H(O,C,j,q){return qe(Fe(C),O,j,q)}function Q(O,C,j,q){return qe(fe(C,O.length-j),O,j,q)}a.prototype.write=function(C,j,q,de){if(j===void 0)de="utf8",q=this.length,j=0;else if(q===void 0&&typeof j=="string")de=j,q=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite(q)?(q=q>>>0,de===void 0&&(de="utf8")):(de=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const je=this.length-j;if((q===void 0||q>je)&&(q=je),C.length>0&&(q<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let Be=!1;for(;;)switch(de){case"hex":return P(this,C,j,q);case"utf8":case"utf-8":return Y(this,C,j,q);case"ascii":case"latin1":case"binary":return D(this,C,j,q);case"base64":return H(this,C,j,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,C,j,q);default:if(Be)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(O,C,j){return C===0&&j===O.length?t.fromByteArray(O):t.fromByteArray(O.slice(C,j))}function L(O,C,j){j=Math.min(O.length,j);const q=[];let de=C;for(;de<j;){const je=O[de];let Be=null,Nt=je>239?4:je>223?3:je>191?2:1;if(de+Nt<=j){let Vt,it,Yt,Ot;switch(Nt){case 1:je<128&&(Be=je);break;case 2:Vt=O[de+1],(Vt&192)===128&&(Ot=(je&31)<<6|Vt&63,Ot>127&&(Be=Ot));break;case 3:Vt=O[de+1],it=O[de+2],(Vt&192)===128&&(it&192)===128&&(Ot=(je&15)<<12|(Vt&63)<<6|it&63,Ot>2047&&(Ot<55296||Ot>57343)&&(Be=Ot));break;case 4:Vt=O[de+1],it=O[de+2],Yt=O[de+3],(Vt&192)===128&&(it&192)===128&&(Yt&192)===128&&(Ot=(je&15)<<18|(Vt&63)<<12|(it&63)<<6|Yt&63,Ot>65535&&Ot<1114112&&(Be=Ot))}}Be===null?(Be=65533,Nt=1):Be>65535&&(Be-=65536,q.push(Be>>>10&1023|55296),Be=56320|Be&1023),q.push(Be),de+=Nt}return Z(q)}const te=4096;function Z(O){const C=O.length;if(C<=te)return String.fromCharCode.apply(String,O);let j="",q=0;for(;q<C;)j+=String.fromCharCode.apply(String,O.slice(q,q+=te));return j}function oe(O,C,j){let q="";j=Math.min(O.length,j);for(let de=C;de<j;++de)q+=String.fromCharCode(O[de]&127);return q}function z(O,C,j){let q="";j=Math.min(O.length,j);for(let de=C;de<j;++de)q+=String.fromCharCode(O[de]);return q}function V(O,C,j){const q=O.length;(!C||C<0)&&(C=0),(!j||j<0||j>q)&&(j=q);let de="";for(let je=C;je<j;++je)de+=dn[O[je]];return de}function $(O,C,j){const q=O.slice(C,j);let de="";for(let je=0;je<q.length-1;je+=2)de+=String.fromCharCode(q[je]+q[je+1]*256);return de}a.prototype.slice=function(C,j){const q=this.length;C=~~C,j=j===void 0?q:~~j,C<0?(C+=q,C<0&&(C=0)):C>q&&(C=q),j<0?(j+=q,j<0&&(j=0)):j>q&&(j=q),j<C&&(j=C);const de=this.subarray(C,j);return Object.setPrototypeOf(de,a.prototype),de};function X(O,C,j){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+C>j)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,j,q){C=C>>>0,j=j>>>0,q||X(C,j,this.length);let de=this[C],je=1,Be=0;for(;++Be<j&&(je*=256);)de+=this[C+Be]*je;return de},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,j,q){C=C>>>0,j=j>>>0,q||X(C,j,this.length);let de=this[C+--j],je=1;for(;j>0&&(je*=256);)de+=this[C+--j]*je;return de},a.prototype.readUint8=a.prototype.readUInt8=function(C,j){return C=C>>>0,j||X(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,j){return C=C>>>0,j||X(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,j){return C=C>>>0,j||X(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,j){return C=C>>>0,j||X(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,j){return C=C>>>0,j||X(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=Ct(function(C){C=C>>>0,ne(C,"offset");const j=this[C],q=this[C+7];(j===void 0||q===void 0)&&he(C,this.length-8);const de=j+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,je=this[++C]+this[++C]*2**8+this[++C]*2**16+q*2**24;return BigInt(de)+(BigInt(je)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ct(function(C){C=C>>>0,ne(C,"offset");const j=this[C],q=this[C+7];(j===void 0||q===void 0)&&he(C,this.length-8);const de=j*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],je=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+q;return(BigInt(de)<<BigInt(32))+BigInt(je)}),a.prototype.readIntLE=function(C,j,q){C=C>>>0,j=j>>>0,q||X(C,j,this.length);let de=this[C],je=1,Be=0;for(;++Be<j&&(je*=256);)de+=this[C+Be]*je;return je*=128,de>=je&&(de-=Math.pow(2,8*j)),de},a.prototype.readIntBE=function(C,j,q){C=C>>>0,j=j>>>0,q||X(C,j,this.length);let de=j,je=1,Be=this[C+--de];for(;de>0&&(je*=256);)Be+=this[C+--de]*je;return je*=128,Be>=je&&(Be-=Math.pow(2,8*j)),Be},a.prototype.readInt8=function(C,j){return C=C>>>0,j||X(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,j){C=C>>>0,j||X(C,2,this.length);const q=this[C]|this[C+1]<<8;return q&32768?q|4294901760:q},a.prototype.readInt16BE=function(C,j){C=C>>>0,j||X(C,2,this.length);const q=this[C+1]|this[C]<<8;return q&32768?q|4294901760:q},a.prototype.readInt32LE=function(C,j){return C=C>>>0,j||X(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,j){return C=C>>>0,j||X(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=Ct(function(C){C=C>>>0,ne(C,"offset");const j=this[C],q=this[C+7];(j===void 0||q===void 0)&&he(C,this.length-8);const de=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(q<<24);return(BigInt(de)<<BigInt(32))+BigInt(j+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=Ct(function(C){C=C>>>0,ne(C,"offset");const j=this[C],q=this[C+7];(j===void 0||q===void 0)&&he(C,this.length-8);const de=(j<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(de)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+q)}),a.prototype.readFloatLE=function(C,j){return C=C>>>0,j||X(C,4,this.length),n.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,j){return C=C>>>0,j||X(C,4,this.length),n.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,j){return C=C>>>0,j||X(C,8,this.length),n.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,j){return C=C>>>0,j||X(C,8,this.length),n.read(this,C,!1,52,8)};function ue(O,C,j,q,de,je){if(!a.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>de||C<je)throw new RangeError('"value" argument is out of bounds');if(j+q>O.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,j,q,de){if(C=+C,j=j>>>0,q=q>>>0,!de){const Nt=Math.pow(2,8*q)-1;ue(this,C,j,q,Nt,0)}let je=1,Be=0;for(this[j]=C&255;++Be<q&&(je*=256);)this[j+Be]=C/je&255;return j+q},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,j,q,de){if(C=+C,j=j>>>0,q=q>>>0,!de){const Nt=Math.pow(2,8*q)-1;ue(this,C,j,q,Nt,0)}let je=q-1,Be=1;for(this[j+je]=C&255;--je>=0&&(Be*=256);)this[j+je]=C/Be&255;return j+q},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,1,255,0),this[j]=C&255,j+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,2,65535,0),this[j]=C&255,this[j+1]=C>>>8,j+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,2,65535,0),this[j]=C>>>8,this[j+1]=C&255,j+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,4,4294967295,0),this[j+3]=C>>>24,this[j+2]=C>>>16,this[j+1]=C>>>8,this[j]=C&255,j+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,4,4294967295,0),this[j]=C>>>24,this[j+1]=C>>>16,this[j+2]=C>>>8,this[j+3]=C&255,j+4};function ce(O,C,j,q,de){He(C,q,de,O,j,7);let je=Number(C&BigInt(4294967295));O[j++]=je,je=je>>8,O[j++]=je,je=je>>8,O[j++]=je,je=je>>8,O[j++]=je;let Be=Number(C>>BigInt(32)&BigInt(4294967295));return O[j++]=Be,Be=Be>>8,O[j++]=Be,Be=Be>>8,O[j++]=Be,Be=Be>>8,O[j++]=Be,j}function Ce(O,C,j,q,de){He(C,q,de,O,j,7);let je=Number(C&BigInt(4294967295));O[j+7]=je,je=je>>8,O[j+6]=je,je=je>>8,O[j+5]=je,je=je>>8,O[j+4]=je;let Be=Number(C>>BigInt(32)&BigInt(4294967295));return O[j+3]=Be,Be=Be>>8,O[j+2]=Be,Be=Be>>8,O[j+1]=Be,Be=Be>>8,O[j]=Be,j+8}a.prototype.writeBigUInt64LE=Ct(function(C,j=0){return ce(this,C,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ct(function(C,j=0){return Ce(this,C,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,j,q,de){if(C=+C,j=j>>>0,!de){const Vt=Math.pow(2,8*q-1);ue(this,C,j,q,Vt-1,-Vt)}let je=0,Be=1,Nt=0;for(this[j]=C&255;++je<q&&(Be*=256);)C<0&&Nt===0&&this[j+je-1]!==0&&(Nt=1),this[j+je]=(C/Be>>0)-Nt&255;return j+q},a.prototype.writeIntBE=function(C,j,q,de){if(C=+C,j=j>>>0,!de){const Vt=Math.pow(2,8*q-1);ue(this,C,j,q,Vt-1,-Vt)}let je=q-1,Be=1,Nt=0;for(this[j+je]=C&255;--je>=0&&(Be*=256);)C<0&&Nt===0&&this[j+je+1]!==0&&(Nt=1),this[j+je]=(C/Be>>0)-Nt&255;return j+q},a.prototype.writeInt8=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,1,127,-128),C<0&&(C=255+C+1),this[j]=C&255,j+1},a.prototype.writeInt16LE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,2,32767,-32768),this[j]=C&255,this[j+1]=C>>>8,j+2},a.prototype.writeInt16BE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,2,32767,-32768),this[j]=C>>>8,this[j+1]=C&255,j+2},a.prototype.writeInt32LE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,4,2147483647,-2147483648),this[j]=C&255,this[j+1]=C>>>8,this[j+2]=C>>>16,this[j+3]=C>>>24,j+4},a.prototype.writeInt32BE=function(C,j,q){return C=+C,j=j>>>0,q||ue(this,C,j,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[j]=C>>>24,this[j+1]=C>>>16,this[j+2]=C>>>8,this[j+3]=C&255,j+4},a.prototype.writeBigInt64LE=Ct(function(C,j=0){return ce(this,C,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ct(function(C,j=0){return Ce(this,C,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(O,C,j,q,de,je){if(j+q>O.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function Me(O,C,j,q,de){return C=+C,j=j>>>0,de||Pe(O,C,j,4),n.write(O,C,j,q,23,4),j+4}a.prototype.writeFloatLE=function(C,j,q){return Me(this,C,j,!0,q)},a.prototype.writeFloatBE=function(C,j,q){return Me(this,C,j,!1,q)};function B(O,C,j,q,de){return C=+C,j=j>>>0,de||Pe(O,C,j,8),n.write(O,C,j,q,52,8),j+8}a.prototype.writeDoubleLE=function(C,j,q){return B(this,C,j,!0,q)},a.prototype.writeDoubleBE=function(C,j,q){return B(this,C,j,!1,q)},a.prototype.copy=function(C,j,q,de){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(q||(q=0),!de&&de!==0&&(de=this.length),j>=C.length&&(j=C.length),j||(j=0),de>0&&de<q&&(de=q),de===q||C.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),C.length-j<de-q&&(de=C.length-j+q);const je=de-q;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,q,de):Uint8Array.prototype.set.call(C,this.subarray(q,de),j),je},a.prototype.fill=function(C,j,q,de){if(typeof C=="string"){if(typeof j=="string"?(de=j,j=0,q=this.length):typeof q=="string"&&(de=q,q=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!a.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(C.length===1){const Be=C.charCodeAt(0);(de==="utf8"&&Be<128||de==="latin1")&&(C=Be)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(j<0||this.length<j||this.length<q)throw new RangeError("Out of range index");if(q<=j)return this;j=j>>>0,q=q===void 0?this.length:q>>>0,C||(C=0);let je;if(typeof C=="number")for(je=j;je<q;++je)this[je]=C;else{const Be=a.isBuffer(C)?C:a.from(C,de),Nt=Be.length;if(Nt===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(je=0;je<q-j;++je)this[je+j]=Be[je%Nt]}return this};const J={};function re(O,C,j){J[O]=class extends j{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(O,"]"),this.stack,delete this.name}get code(){return O}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return"".concat(this.name," [").concat(O,"]: ").concat(this.message)}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?"".concat(O," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(O,C){return'The "'.concat(O,'" argument must be of type number. Received type ').concat(typeof C)},TypeError),re("ERR_OUT_OF_RANGE",function(O,C,j){let q='The value of "'.concat(O,'" is out of range.'),de=j;return Number.isInteger(j)&&Math.abs(j)>2**32?de=De(String(j)):typeof j=="bigint"&&(de=String(j),(j>BigInt(2)**BigInt(32)||j<-(BigInt(2)**BigInt(32)))&&(de=De(de)),de+="n"),q+=" It must be ".concat(C,". Received ").concat(de),q},RangeError);function De(O){let C="",j=O.length;const q=O[0]==="-"?1:0;for(;j>=q+4;j-=3)C="_".concat(O.slice(j-3,j)).concat(C);return"".concat(O.slice(0,j)).concat(C)}function Ye(O,C,j){ne(C,"offset"),(O[C]===void 0||O[C+j]===void 0)&&he(C,O.length-(j+1))}function He(O,C,j,q,de,je){if(O>j||O<C){const Be=typeof C=="bigint"?"n":"";let Nt;throw C===0||C===BigInt(0)?Nt=">= 0".concat(Be," and < 2").concat(Be," ** ").concat((je+1)*8).concat(Be):Nt=">= -(2".concat(Be," ** ").concat((je+1)*8-1).concat(Be,") and < 2 ** ")+"".concat((je+1)*8-1).concat(Be),new J.ERR_OUT_OF_RANGE("value",Nt,O)}Ye(q,de,je)}function ne(O,C){if(typeof O!="number")throw new J.ERR_INVALID_ARG_TYPE(C,"number",O)}function he(O,C,j){throw Math.floor(O)!==O?(ne(O,j),new J.ERR_OUT_OF_RANGE("offset","an integer",O)):C<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(C),O)}const Se=/[^+/0-9A-Za-z-_]/g;function Ue(O){if(O=O.split("=")[0],O=O.trim().replace(Se,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function We(O,C){C=C||1/0;let j;const q=O.length;let de=null;const je=[];for(let Be=0;Be<q;++Be){if(j=O.charCodeAt(Be),j>55295&&j<57344){if(!de){if(j>56319){(C-=3)>-1&&je.push(239,191,189);continue}else if(Be+1===q){(C-=3)>-1&&je.push(239,191,189);continue}de=j;continue}if(j<56320){(C-=3)>-1&&je.push(239,191,189),de=j;continue}j=(de-55296<<10|j-56320)+65536}else de&&(C-=3)>-1&&je.push(239,191,189);if(de=null,j<128){if((C-=1)<0)break;je.push(j)}else if(j<2048){if((C-=2)<0)break;je.push(j>>6|192,j&63|128)}else if(j<65536){if((C-=3)<0)break;je.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((C-=4)<0)break;je.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return je}function Ke(O){const C=[];for(let j=0;j<O.length;++j)C.push(O.charCodeAt(j)&255);return C}function fe(O,C){let j,q,de;const je=[];for(let Be=0;Be<O.length&&!((C-=2)<0);++Be)j=O.charCodeAt(Be),q=j>>8,de=j%256,je.push(de),je.push(q);return je}function Fe(O){return t.toByteArray(Ue(O))}function qe(O,C,j,q){let de;for(de=0;de<q&&!(de+j>=C.length||de>=O.length);++de)C[de+j]=O[de];return de}function Oe(O,C){return O instanceof C||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===C.name}function At(O){return O!==O}const dn=function(){const O="0123456789abcdef",C=new Array(256);for(let j=0;j<16;++j){const q=j*16;for(let de=0;de<16;++de)C[q+de]=O[j]+O[de]}return C}();function Ct(O){return typeof BigInt>"u"?tn:O}function tn(){throw new Error("BigInt not supported")}}(G0)),G0}var Y0,Dk;function Rn(){if(Dk)return Y0;Dk=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError("Expected input to be an Array, got ".concat(typeof n));let r="";for(let i=0;i<n.length;i++)r+="    ".concat(n[i].stack,"\n");super(r),this.name="AggregateError",this.errors=n}}return Y0={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},Y0}var X0={exports:{}},J0,Lk;function q4(){return Lk||(Lk=1,J0={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();if(r==="f")return i.toFixed(6);if(r==="j")return JSON.stringify(i);if(r==="s"&&typeof i=="object"){const o=i.constructor!==Object?i.constructor.name:"";return"".concat(o," {}").trim()}else return i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return"`".concat(e,"`")}else return'"'.concat(e,'"');return"'".concat(e,"'");case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return"".concat(String(e),"n");case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),J0}var Q0,Bk;function ei(){if(Bk)return Q0;Bk=1;const{format:e,inspect:t}=q4(),{AggregateError:n}=Rn(),r=globalThis.AggregateError||n,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",l={};function u(_,m){if(!_)throw new l.ERR_INTERNAL_ASSERTION(m)}function c(_){let m="",v=_.length;const w=_[0]==="-"?1:0;for(;v>=w+4;v-=3)m="_".concat(_.slice(v-3,v)).concat(m);return"".concat(_.slice(0,v)).concat(m)}function f(_,m,v){if(typeof m=="function")return u(m.length<=v.length,"Code: ".concat(_,"; The provided arguments length (").concat(v.length,") does not match the required ones (").concat(m.length,").")),m(...v);const w=(m.match(/%[dfijoOs]/g)||[]).length;return u(w===v.length,"Code: ".concat(_,"; The provided arguments length (").concat(v.length,") does not match the required ones (").concat(w,").")),v.length===0?m:e(m,...v)}function h(_,m,v){v||(v=Error);class w extends v{constructor(...k){super(f(_,m,k))}toString(){return"".concat(this.name," [").concat(_,"]: ").concat(this.message)}}Object.defineProperties(w.prototype,{name:{value:v.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return"".concat(this.name," [").concat(_,"]: ").concat(this.message)},writable:!0,enumerable:!1,configurable:!0}}),w.prototype.code=_,w.prototype[i]=!0,l[_]=w}function p(_){const m=a+_.name;return Object.defineProperty(_,"name",{value:m}),_}function b(_,m){if(_&&m&&_!==m){if(Array.isArray(m.errors))return m.errors.push(_),m;const v=new r([m,_],m.message);return v.code=m.code,v}return _||m}class y extends Error{constructor(m="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",v);super(m,v),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(_,m,v)=>{u(typeof _=="string","'name' must be a string"),Array.isArray(m)||(m=[m]);let w="The ";_.endsWith(" argument")?w+="".concat(_," "):w+='"'.concat(_,'" ').concat(_.includes(".")?"property":"argument"," "),w+="must be ";const S=[],k=[],A=[];for(const P of m)u(typeof P=="string","All expected entries have to be of type string"),o.includes(P)?S.push(P.toLowerCase()):s.test(P)?k.push(P):(u(P!=="object",'The value "object" should be written as "Object"'),A.push(P));if(k.length>0){const P=S.indexOf("object");P!==-1&&(S.splice(S,P,1),k.push("Object"))}if(S.length>0){switch(S.length){case 1:w+="of type ".concat(S[0]);break;case 2:w+="one of type ".concat(S[0]," or ").concat(S[1]);break;default:{const P=S.pop();w+="one of type ".concat(S.join(", "),", or ").concat(P)}}(k.length>0||A.length>0)&&(w+=" or ")}if(k.length>0){switch(k.length){case 1:w+="an instance of ".concat(k[0]);break;case 2:w+="an instance of ".concat(k[0]," or ").concat(k[1]);break;default:{const P=k.pop();w+="an instance of ".concat(k.join(", "),", or ").concat(P)}}A.length>0&&(w+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(w+="an "),w+="".concat(A[0]);break;case 2:w+="one of ".concat(A[0]," or ").concat(A[1]);break;default:{const P=A.pop();w+="one of ".concat(A.join(", "),", or ").concat(P)}}if(v==null)w+=". Received ".concat(v);else if(typeof v=="function"&&v.name)w+=". Received function ".concat(v.name);else if(typeof v=="object"){var T;if((T=v.constructor)!==null&&T!==void 0&&T.name)w+=". Received an instance of ".concat(v.constructor.name);else{const P=t(v,{depth:-1});w+=". Received ".concat(P)}}else{let P=t(v,{colors:!1});P.length>25&&(P="".concat(P.slice(0,25),"...")),w+=". Received type ".concat(typeof v," (").concat(P,")")}return w},TypeError),h("ERR_INVALID_ARG_VALUE",(_,m,v="is invalid")=>{let w=t(m);w.length>128&&(w=w.slice(0,128)+"...");const S=_.includes(".")?"property":"argument";return"The ".concat(S," '").concat(_,"' ").concat(v,". Received ").concat(w)},TypeError),h("ERR_INVALID_RETURN_VALUE",(_,m,v)=>{var w;const S=v!=null&&(w=v.constructor)!==null&&w!==void 0&&w.name?"instance of ".concat(v.constructor.name):"type ".concat(typeof v);return"Expected ".concat(_,' to be returned from the "').concat(m,'"')+" function but got ".concat(S,".")},TypeError),h("ERR_MISSING_ARGS",(..._)=>{u(_.length>0,"At least one arg needs to be specified");let m;const v=_.length;switch(_=(Array.isArray(_)?_:[_]).map(w=>'"'.concat(w,'"')).join(" or "),v){case 1:m+="The ".concat(_[0]," argument");break;case 2:m+="The ".concat(_[0]," and ").concat(_[1]," arguments");break;default:{const w=_.pop();m+="The ".concat(_.join(", "),", and ").concat(w," arguments")}break}return"".concat(m," must be specified")},TypeError),h("ERR_OUT_OF_RANGE",(_,m,v)=>{u(m,'Missing "range" argument');let w;if(Number.isInteger(v)&&Math.abs(v)>2**32)w=c(String(v));else if(typeof v=="bigint"){w=String(v);const S=BigInt(2)**BigInt(32);(v>S||v<-S)&&(w=c(w)),w+="n"}else w=t(v);return'The value of "'.concat(_,'" is out of range. It must be ').concat(m,". Received ").concat(w)},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Q0={AbortError:y,aggregateTwoErrors:p(b),hideStackFrames:p,codes:l},Q0}var Bc={exports:{}},Fk;function Ef(){if(Fk)return Bc.exports;Fk=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Bc.exports=e,Bc.exports.AbortSignal=t,Bc.exports.default=e,Bc.exports}var Kh={exports:{}},zk;function uy(){if(zk)return Kh.exports;zk=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,A,T){return Function.prototype.apply.call(k,A,T)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(k){return k!==k};function o(){o.init.call(this)}Kh.exports=o,Kh.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");s=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(k){for(var A=[],T=1;T<arguments.length;T++)A.push(arguments[T]);var P=k==="error",Y=this._events;if(Y!==void 0)P=P&&Y.error===void 0;else if(!P)return!1;if(P){var D;if(A.length>0&&(D=A[0]),D instanceof Error)throw D;var H=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw H.context=D,H}var Q=Y[k];if(Q===void 0)return!1;if(typeof Q=="function")t(Q,this,A);else for(var U=Q.length,L=b(Q,U),T=0;T<U;++T)t(L[T],this,A);return!0};function u(S,k,A,T){var P,Y,D;if(a(A),Y=S._events,Y===void 0?(Y=S._events=Object.create(null),S._eventsCount=0):(Y.newListener!==void 0&&(S.emit("newListener",k,A.listener?A.listener:A),Y=S._events),D=Y[k]),D===void 0)D=Y[k]=A,++S._eventsCount;else if(typeof D=="function"?D=Y[k]=T?[A,D]:[D,A]:T?D.unshift(A):D.push(A),P=l(S),P>0&&D.length>P&&!D.warned){D.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=S,H.type=k,H.count=D.length,r(H)}return S}o.prototype.addListener=function(k,A){return u(this,k,A,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(k,A){return u(this,k,A,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(S,k,A){var T={fired:!1,wrapFn:void 0,target:S,type:k,listener:A},P=c.bind(T);return P.listener=A,T.wrapFn=P,P}o.prototype.once=function(k,A){return a(A),this.on(k,f(this,k,A)),this},o.prototype.prependOnceListener=function(k,A){return a(A),this.prependListener(k,f(this,k,A)),this},o.prototype.removeListener=function(k,A){var T,P,Y,D,H;if(a(A),P=this._events,P===void 0)return this;if(T=P[k],T===void 0)return this;if(T===A||T.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete P[k],P.removeListener&&this.emit("removeListener",k,T.listener||A));else if(typeof T!="function"){for(Y=-1,D=T.length-1;D>=0;D--)if(T[D]===A||T[D].listener===A){H=T[D].listener,Y=D;break}if(Y<0)return this;Y===0?T.shift():y(T,Y),T.length===1&&(P[k]=T[0]),P.removeListener!==void 0&&this.emit("removeListener",k,H||A)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(k){var A,T,P;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[k]),this;if(arguments.length===0){var Y=Object.keys(T),D;for(P=0;P<Y.length;++P)D=Y[P],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=T[k],typeof A=="function")this.removeListener(k,A);else if(A!==void 0)for(P=A.length-1;P>=0;P--)this.removeListener(k,A[P]);return this};function h(S,k,A){var T=S._events;if(T===void 0)return[];var P=T[k];return P===void 0?[]:typeof P=="function"?A?[P.listener||P]:[P]:A?_(P):b(P,P.length)}o.prototype.listeners=function(k){return h(this,k,!0)},o.prototype.rawListeners=function(k){return h(this,k,!1)},o.listenerCount=function(S,k){return typeof S.listenerCount=="function"?S.listenerCount(k):p.call(S,k)},o.prototype.listenerCount=p;function p(S){var k=this._events;if(k!==void 0){var A=k[S];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function b(S,k){for(var A=new Array(k),T=0;T<k;++T)A[T]=S[T];return A}function y(S,k){for(;k+1<S.length;k++)S[k]=S[k+1];S.pop()}function _(S){for(var k=new Array(S.length),A=0;A<k.length;++A)k[A]=S[A].listener||S[A];return k}function m(S,k){return new Promise(function(A,T){function P(D){S.removeListener(k,Y),T(D)}function Y(){typeof S.removeListener=="function"&&S.removeListener("error",P),A([].slice.call(arguments))}w(S,k,Y,{once:!0}),k!=="error"&&v(S,P,{once:!0})})}function v(S,k,A){typeof S.on=="function"&&w(S,"error",k,A)}function w(S,k,A,T){if(typeof S.on=="function")T.once?S.once(k,A):S.on(k,A);else if(typeof S.addEventListener=="function")S.addEventListener(k,function P(Y){T.once&&S.removeEventListener(k,P),A(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Kh.exports}var Hk;function hi(){return Hk||(Hk=1,function(e){const t=Pa(),{format:n,inspect:r}=q4(),{codes:{ERR_INVALID_ARG_TYPE:i}}=ei(),{kResistStopPropagation:o,AggregateError:s,SymbolDispose:a}=Rn(),l=globalThis.AbortSignal||Ef().AbortSignal,u=globalThis.AbortController||Ef().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||t.Blob,h=typeof f<"u"?function(_){return _ instanceof f}:function(_){return!1},p=(y,_)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new i(_,"AbortSignal",y)},b=(y,_)=>{if(typeof y!="function")throw new i(_,"Function",y)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(y){let _=!1;return function(...m){_||(_=!0,y.apply(this,m))}},createDeferredPromise:function(){let y,_;return{promise:new Promise((v,w)=>{y=v,_=w}),resolve:y,reject:_}},promisify(y){return new Promise((_,m)=>{y((v,...w)=>v?m(v):_(...w))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(y){return y instanceof c},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:h,deprecate(y,_){return y},addAbortListener:uy().addAbortListener||function(_,m){if(_===void 0)throw new i("signal","AbortSignal",_);p(_,"signal"),b(m,"listener");let v;return _.aborted?queueMicrotask(()=>m()):(_.addEventListener("abort",m,{__proto__:null,once:!0,[o]:!0}),v=()=>{_.removeEventListener("abort",m)}),{__proto__:null,[a](){var w;(w=v)===null||w===void 0||w()}}},AbortSignalAny:l.any||function(_){if(_.length===1)return _[0];const m=new u,v=()=>m.abort();return _.forEach(w=>{p(w,"signals"),w.addEventListener("abort",v,{once:!0})}),m.signal.addEventListener("abort",()=>{_.forEach(w=>w.removeEventListener("abort",v))},{once:!0}),m.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(X0)),X0.exports}var Gh={},Z0,Uk;function Xf(){if(Uk)return Z0;Uk=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:a,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:c,String:f,StringPrototypeToUpperCase:h,StringPrototypeTrim:p}=Rn(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:m,ERR_OUT_OF_RANGE:v,ERR_UNKNOWN_SIGNAL:w}}=ei(),{normalizeEncoding:S}=hi(),{isAsyncFunction:k,isArrayBufferView:A}=hi().types,T={};function P(fe){return fe===(fe|0)}function Y(fe){return fe===fe>>>0}const D=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function Q(fe,Fe,qe){if(typeof fe>"u"&&(fe=qe),typeof fe=="string"){if(c(D,fe)===null)throw new m(Fe,fe,H);fe=l(fe,8)}return te(fe,Fe),fe}const U=b((fe,Fe,qe=a,Oe=s)=>{if(typeof fe!="number")throw new _(Fe,"number",fe);if(!i(fe))throw new v(Fe,"an integer",fe);if(fe<qe||fe>Oe)throw new v(Fe,">= ".concat(qe," && <= ").concat(Oe),fe)}),L=b((fe,Fe,qe=-2147483648,Oe=2147483647)=>{if(typeof fe!="number")throw new _(Fe,"number",fe);if(!i(fe))throw new v(Fe,"an integer",fe);if(fe<qe||fe>Oe)throw new v(Fe,">= ".concat(qe," && <= ").concat(Oe),fe)}),te=b((fe,Fe,qe=!1)=>{if(typeof fe!="number")throw new _(Fe,"number",fe);if(!i(fe))throw new v(Fe,"an integer",fe);const Oe=qe?1:0,At=4294967295;if(fe<Oe||fe>At)throw new v(Fe,">= ".concat(Oe," && <= ").concat(At),fe)});function Z(fe,Fe){if(typeof fe!="string")throw new _(Fe,"string",fe)}function oe(fe,Fe,qe=void 0,Oe){if(typeof fe!="number")throw new _(Fe,"number",fe);if(qe!=null&&fe<qe||Oe!=null&&fe>Oe||(qe!=null||Oe!=null)&&o(fe))throw new v(Fe,"".concat(qe!=null?">= ".concat(qe):"").concat(qe!=null&&Oe!=null?" && ":"").concat(Oe!=null?"<= ".concat(Oe):""),fe)}const z=b((fe,Fe,qe)=>{if(!t(qe,fe)){const At="must be one of: "+n(r(qe,dn=>typeof dn=="string"?"'".concat(dn,"'"):f(dn)),", ");throw new m(Fe,fe,At)}});function V(fe,Fe){if(typeof fe!="boolean")throw new _(Fe,"boolean",fe)}function $(fe,Fe,qe){return fe==null||!u(fe,Fe)?qe:fe[Fe]}const X=b((fe,Fe,qe=null)=>{const Oe=$(qe,"allowArray",!1),At=$(qe,"allowFunction",!1);if(!$(qe,"nullable",!1)&&fe===null||!Oe&&e(fe)||typeof fe!="object"&&(!At||typeof fe!="function"))throw new _(Fe,"Object",fe)}),ue=b((fe,Fe)=>{if(fe!=null&&typeof fe!="object"&&typeof fe!="function")throw new _(Fe,"a dictionary",fe)}),ce=b((fe,Fe,qe=0)=>{if(!e(fe))throw new _(Fe,"Array",fe);if(fe.length<qe){const Oe="must be longer than ".concat(qe);throw new m(Fe,fe,Oe)}});function Ce(fe,Fe){ce(fe,Fe);for(let qe=0;qe<fe.length;qe++)Z(fe[qe],"".concat(Fe,"[").concat(qe,"]"))}function Pe(fe,Fe){ce(fe,Fe);for(let qe=0;qe<fe.length;qe++)V(fe[qe],"".concat(Fe,"[").concat(qe,"]"))}function Me(fe,Fe){ce(fe,Fe);for(let qe=0;qe<fe.length;qe++){const Oe=fe[qe],At="".concat(Fe,"[").concat(qe,"]");if(Oe==null)throw new _(At,"AbortSignal",Oe);Ye(Oe,At)}}function B(fe,Fe="signal"){if(Z(fe,Fe),T[fe]===void 0)throw T[h(fe)]!==void 0?new w(fe+" (signals must use all capital letters)"):new w(fe)}const J=b((fe,Fe="buffer")=>{if(!A(fe))throw new _(Fe,["Buffer","TypedArray","DataView"],fe)});function re(fe,Fe){const qe=S(Fe),Oe=fe.length;if(qe==="hex"&&Oe%2!==0)throw new m("encoding",Fe,"is invalid for data of length ".concat(Oe))}function De(fe,Fe="Port",qe=!0){if(typeof fe!="number"&&typeof fe!="string"||typeof fe=="string"&&p(fe).length===0||+fe!==+fe>>>0||fe>65535||fe===0&&!qe)throw new y(Fe,fe,qe);return fe|0}const Ye=b((fe,Fe)=>{if(fe!==void 0&&(fe===null||typeof fe!="object"||!("aborted"in fe)))throw new _(Fe,"AbortSignal",fe)}),He=b((fe,Fe)=>{if(typeof fe!="function")throw new _(Fe,"Function",fe)}),ne=b((fe,Fe)=>{if(typeof fe!="function"||k(fe))throw new _(Fe,"Function",fe)}),he=b((fe,Fe)=>{if(fe!==void 0)throw new _(Fe,"undefined",fe)});function Se(fe,Fe,qe){if(!t(qe,fe))throw new _(Fe,"('".concat(n(qe,"|"),"')"),fe)}const Ue=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function We(fe,Fe){if(typeof fe>"u"||!c(Ue,fe))throw new m(Fe,fe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ke(fe){if(typeof fe=="string")return We(fe,"hints"),fe;if(e(fe)){const Fe=fe.length;let qe="";if(Fe===0)return qe;for(let Oe=0;Oe<Fe;Oe++){const At=fe[Oe];We(At,"hints"),qe+=At,Oe!==Fe-1&&(qe+=", ")}return qe}throw new m("hints",fe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Z0={isInt32:P,isUint32:Y,parseFileMode:Q,validateArray:ce,validateStringArray:Ce,validateBooleanArray:Pe,validateAbortSignalArray:Me,validateBoolean:V,validateBuffer:J,validateDictionary:ue,validateEncoding:re,validateFunction:He,validateInt32:L,validateInteger:U,validateNumber:oe,validateObject:X,validateOneOf:z,validatePlainFunction:ne,validatePort:De,validateSignalName:B,validateString:Z,validateUint32:te,validateUndefined:he,validateUnion:Se,validateAbortSignal:Ye,validateLinkHeaderValue:Ke},Z0}var Yh={exports:{}},ev={exports:{}},Wk;function Ll(){if(Wk)return ev.exports;Wk=1;var e=ev.exports={},t,n;function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch(y){t=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=i}catch(y){n=i}})();function o(y){if(t===setTimeout)return setTimeout(y,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch(_){try{return t.call(null,y,0)}catch(m){return t.call(this,y,0)}}}function s(y){if(n===clearTimeout)return clearTimeout(y);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(y);try{return n(y)}catch(_){try{return n.call(null,y)}catch(m){return n.call(this,y)}}}var a=[],l=!1,u,c=-1;function f(){!l||!u||(l=!1,u.length?a=u.concat(a):c=-1,a.length&&h())}function h(){if(!l){var y=o(f);l=!0;for(var _=a.length;_;){for(u=a,a=[];++c<_;)u&&u[c].run();c=-1,_=a.length}u=null,l=!1,s(y)}}e.nextTick=function(y){var _=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)_[m-1]=arguments[m];a.push(new p(y,_)),a.length===1&&!l&&o(h)};function p(y,_){this.fun=y,this.array=_}p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},ev.exports}var tv,Vk;function Ls(){if(Vk)return tv;Vk=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Rn(),r=n("nodejs.stream.destroyed"),i=n("nodejs.stream.errored"),o=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),a=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function c($,X=!1){var ue;return!!($&&typeof $.pipe=="function"&&typeof $.on=="function"&&(!X||typeof $.pause=="function"&&typeof $.resume=="function")&&(!$._writableState||((ue=$._readableState)===null||ue===void 0?void 0:ue.readable)!==!1)&&(!$._writableState||$._readableState))}function f($){var X;return!!($&&typeof $.write=="function"&&typeof $.on=="function"&&(!$._readableState||((X=$._writableState)===null||X===void 0?void 0:X.writable)!==!1))}function h($){return!!($&&typeof $.pipe=="function"&&$._readableState&&typeof $.on=="function"&&typeof $.write=="function")}function p($){return $&&($._readableState||$._writableState||typeof $.write=="function"&&typeof $.on=="function"||typeof $.pipe=="function"&&typeof $.on=="function")}function b($){return!!($&&!p($)&&typeof $.pipeThrough=="function"&&typeof $.getReader=="function"&&typeof $.cancel=="function")}function y($){return!!($&&!p($)&&typeof $.getWriter=="function"&&typeof $.abort=="function")}function _($){return!!($&&!p($)&&typeof $.readable=="object"&&typeof $.writable=="object")}function m($){return b($)||y($)||_($)}function v($,X){return $==null?!1:X===!0?typeof $[e]=="function":X===!1?typeof $[t]=="function":typeof $[e]=="function"||typeof $[t]=="function"}function w($){if(!p($))return null;const X=$._writableState,ue=$._readableState,ce=X||ue;return!!($.destroyed||$[r]||ce!=null&&ce.destroyed)}function S($){if(!f($))return null;if($.writableEnded===!0)return!0;const X=$._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function k($,X){if(!f($))return null;if($.writableFinished===!0)return!0;const ue=$._writableState;return ue!=null&&ue.errored?!1:typeof(ue==null?void 0:ue.finished)!="boolean"?null:!!(ue.finished||X===!1&&ue.ended===!0&&ue.length===0)}function A($){if(!c($))return null;if($.readableEnded===!0)return!0;const X=$._readableState;return!X||X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function T($,X){if(!c($))return null;const ue=$._readableState;return ue!=null&&ue.errored?!1:typeof(ue==null?void 0:ue.endEmitted)!="boolean"?null:!!(ue.endEmitted||X===!1&&ue.ended===!0&&ue.length===0)}function P($){return $&&$[o]!=null?$[o]:typeof($==null?void 0:$.readable)!="boolean"?null:w($)?!1:c($)&&$.readable&&!T($)}function Y($){return $&&$[s]!=null?$[s]:typeof($==null?void 0:$.writable)!="boolean"?null:w($)?!1:f($)&&$.writable&&!S($)}function D($,X){return p($)?w($)?!0:!((X==null?void 0:X.readable)!==!1&&P($)||(X==null?void 0:X.writable)!==!1&&Y($)):null}function H($){var X,ue;return p($)?$.writableErrored?$.writableErrored:(X=(ue=$._writableState)===null||ue===void 0?void 0:ue.errored)!==null&&X!==void 0?X:null:null}function Q($){var X,ue;return p($)?$.readableErrored?$.readableErrored:(X=(ue=$._readableState)===null||ue===void 0?void 0:ue.errored)!==null&&X!==void 0?X:null:null}function U($){if(!p($))return null;if(typeof $.closed=="boolean")return $.closed;const X=$._writableState,ue=$._readableState;return typeof(X==null?void 0:X.closed)=="boolean"||typeof(ue==null?void 0:ue.closed)=="boolean"?(X==null?void 0:X.closed)||(ue==null?void 0:ue.closed):typeof $._closed=="boolean"&&L($)?$._closed:null}function L($){return typeof $._closed=="boolean"&&typeof $._defaultKeepAlive=="boolean"&&typeof $._removedConnection=="boolean"&&typeof $._removedContLen=="boolean"}function te($){return typeof $._sent100=="boolean"&&L($)}function Z($){var X;return typeof $._consuming=="boolean"&&typeof $._dumped=="boolean"&&((X=$.req)===null||X===void 0?void 0:X.upgradeOrConnect)===void 0}function oe($){if(!p($))return null;const X=$._writableState,ue=$._readableState,ce=X||ue;return!ce&&te($)||!!(ce&&ce.autoDestroy&&ce.emitClose&&ce.closed===!1)}function z($){var X;return!!($&&((X=$[a])!==null&&X!==void 0?X:$.readableDidRead||$.readableAborted))}function V($){var X,ue,ce,Ce,Pe,Me,B,J,re,De;return!!($&&((X=(ue=(ce=(Ce=(Pe=(Me=$[i])!==null&&Me!==void 0?Me:$.readableErrored)!==null&&Pe!==void 0?Pe:$.writableErrored)!==null&&Ce!==void 0?Ce:(B=$._readableState)===null||B===void 0?void 0:B.errorEmitted)!==null&&ce!==void 0?ce:(J=$._writableState)===null||J===void 0?void 0:J.errorEmitted)!==null&&ue!==void 0?ue:(re=$._readableState)===null||re===void 0?void 0:re.errored)!==null&&X!==void 0?X:!((De=$._writableState)===null||De===void 0)&&De.errored))}return tv={isDestroyed:w,kIsDestroyed:r,isDisturbed:z,kIsDisturbed:a,isErrored:V,kIsErrored:i,isReadable:P,kIsReadable:o,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:U,isDuplexNodeStream:h,isFinished:D,isIterable:v,isReadableNodeStream:c,isReadableStream:b,isReadableEnded:A,isReadableFinished:T,isReadableErrored:Q,isNodeStream:p,isWebStream:m,isWritable:Y,isWritableNodeStream:f,isWritableStream:y,isWritableEnded:S,isWritableFinished:k,isWritableErrored:H,isServerRequest:Z,isServerResponse:te,willEmitClose:oe,isTransformStream:_},tv}var qk;function Oa(){if(qk)return Yh.exports;qk=1;const e=Ll(),{AbortError:t,codes:n}=ei(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:i}=n,{kEmptyObject:o,once:s}=hi(),{validateAbortSignal:a,validateFunction:l,validateObject:u,validateBoolean:c}=Xf(),{Promise:f,PromisePrototypeThen:h,SymbolDispose:p}=Rn(),{isClosed:b,isReadable:y,isReadableNodeStream:_,isReadableStream:m,isReadableFinished:v,isReadableErrored:w,isWritable:S,isWritableNodeStream:k,isWritableStream:A,isWritableFinished:T,isWritableErrored:P,isNodeStream:Y,willEmitClose:D,kIsClosedPromise:H}=Ls();let Q;function U(z){return z.setHeader&&typeof z.abort=="function"}const L=()=>{};function te(z,V,$){var X,ue;if(arguments.length===2?($=V,V=o):V==null?V=o:u(V,"options"),l($,"callback"),a(V.signal,"options.signal"),$=s($),m(z)||A(z))return Z(z,V,$);if(!Y(z))throw new r("stream",["ReadableStream","WritableStream","Stream"],z);const ce=(X=V.readable)!==null&&X!==void 0?X:_(z),Ce=(ue=V.writable)!==null&&ue!==void 0?ue:k(z),Pe=z._writableState,Me=z._readableState,B=()=>{z.writable||De()};let J=D(z)&&_(z)===ce&&k(z)===Ce,re=T(z,!1);const De=()=>{re=!0,z.destroyed&&(J=!1),!(J&&(!z.readable||ce))&&(!ce||Ye)&&$.call(z)};let Ye=v(z,!1);const He=()=>{Ye=!0,z.destroyed&&(J=!1),!(J&&(!z.writable||Ce))&&(!Ce||re)&&$.call(z)},ne=fe=>{$.call(z,fe)};let he=b(z);const Se=()=>{he=!0;const fe=P(z)||w(z);if(fe&&typeof fe!="boolean")return $.call(z,fe);if(ce&&!Ye&&_(z,!0)&&!v(z,!1))return $.call(z,new i);if(Ce&&!re&&!T(z,!1))return $.call(z,new i);$.call(z)},Ue=()=>{he=!0;const fe=P(z)||w(z);if(fe&&typeof fe!="boolean")return $.call(z,fe);$.call(z)},We=()=>{z.req.on("finish",De)};U(z)?(z.on("complete",De),J||z.on("abort",Se),z.req?We():z.on("request",We)):Ce&&!Pe&&(z.on("end",B),z.on("close",B)),!J&&typeof z.aborted=="boolean"&&z.on("aborted",Se),z.on("end",He),z.on("finish",De),V.error!==!1&&z.on("error",ne),z.on("close",Se),he?e.nextTick(Se):Pe!=null&&Pe.errorEmitted||Me!=null&&Me.errorEmitted?J||e.nextTick(Ue):(!ce&&(!J||y(z))&&(re||S(z)===!1)||!Ce&&(!J||S(z))&&(Ye||y(z)===!1)||Me&&z.req&&z.aborted)&&e.nextTick(Ue);const Ke=()=>{$=L,z.removeListener("aborted",Se),z.removeListener("complete",De),z.removeListener("abort",Se),z.removeListener("request",We),z.req&&z.req.removeListener("finish",De),z.removeListener("end",B),z.removeListener("close",B),z.removeListener("finish",De),z.removeListener("end",He),z.removeListener("error",ne),z.removeListener("close",Se)};if(V.signal&&!he){const fe=()=>{const Fe=$;Ke(),Fe.call(z,new t(void 0,{cause:V.signal.reason}))};if(V.signal.aborted)e.nextTick(fe);else{Q=Q||hi().addAbortListener;const Fe=Q(V.signal,fe),qe=$;$=s((...Oe)=>{Fe[p](),qe.apply(z,Oe)})}}return Ke}function Z(z,V,$){let X=!1,ue=L;if(V.signal)if(ue=()=>{X=!0,$.call(z,new t(void 0,{cause:V.signal.reason}))},V.signal.aborted)e.nextTick(ue);else{Q=Q||hi().addAbortListener;const Ce=Q(V.signal,ue),Pe=$;$=s((...Me)=>{Ce[p](),Pe.apply(z,Me)})}const ce=(...Ce)=>{X||e.nextTick(()=>$.apply(z,Ce))};return h(z[H].promise,ce,ce),L}function oe(z,V){var $;let X=!1;return V===null&&(V=o),($=V)!==null&&$!==void 0&&$.cleanup&&(c(V.cleanup,"cleanup"),X=V.cleanup),new f((ue,ce)=>{const Ce=te(z,V,Pe=>{X&&Ce(),Pe?ce(Pe):ue()})})}return Yh.exports=te,Yh.exports.finished=oe,Yh.exports}var nv,Kk;function gc(){if(Kk)return nv;Kk=1;const e=Ll(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=ei(),{Symbol:i}=Rn(),{kIsDestroyed:o,isDestroyed:s,isFinished:a,isServerRequest:l}=Ls(),u=i("kDestroy"),c=i("kConstruct");function f(D,H,Q){D&&(D.stack,H&&!H.errored&&(H.errored=D),Q&&!Q.errored&&(Q.errored=D))}function h(D,H){const Q=this._readableState,U=this._writableState,L=U||Q;return U!=null&&U.destroyed||Q!=null&&Q.destroyed?(typeof H=="function"&&H(),this):(f(D,U,Q),U&&(U.destroyed=!0),Q&&(Q.destroyed=!0),L.constructed?p(this,D,H):this.once(u,function(te){p(this,t(te,D),H)}),this)}function p(D,H,Q){let U=!1;function L(te){if(U)return;U=!0;const Z=D._readableState,oe=D._writableState;f(te,oe,Z),oe&&(oe.closed=!0),Z&&(Z.closed=!0),typeof Q=="function"&&Q(te),te?e.nextTick(b,D,te):e.nextTick(y,D)}try{D._destroy(H||null,L)}catch(te){L(te)}}function b(D,H){_(D,H),y(D)}function y(D){const H=D._readableState,Q=D._writableState;Q&&(Q.closeEmitted=!0),H&&(H.closeEmitted=!0),(Q!=null&&Q.emitClose||H!=null&&H.emitClose)&&D.emit("close")}function _(D,H){const Q=D._readableState,U=D._writableState;U!=null&&U.errorEmitted||Q!=null&&Q.errorEmitted||(U&&(U.errorEmitted=!0),Q&&(Q.errorEmitted=!0),D.emit("error",H))}function m(){const D=this._readableState,H=this._writableState;D&&(D.constructed=!0,D.closed=!1,D.closeEmitted=!1,D.destroyed=!1,D.errored=null,D.errorEmitted=!1,D.reading=!1,D.ended=D.readable===!1,D.endEmitted=D.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function v(D,H,Q){const U=D._readableState,L=D._writableState;if(L!=null&&L.destroyed||U!=null&&U.destroyed)return this;U!=null&&U.autoDestroy||L!=null&&L.autoDestroy?D.destroy(H):H&&(H.stack,L&&!L.errored&&(L.errored=H),U&&!U.errored&&(U.errored=H),Q?e.nextTick(_,D,H):_(D,H))}function w(D,H){if(typeof D._construct!="function")return;const Q=D._readableState,U=D._writableState;Q&&(Q.constructed=!1),U&&(U.constructed=!1),D.once(c,H),!(D.listenerCount(c)>1)&&e.nextTick(S,D)}function S(D){let H=!1;function Q(U){if(H){v(D,U!=null?U:new n);return}H=!0;const L=D._readableState,te=D._writableState,Z=te||L;L&&(L.constructed=!0),te&&(te.constructed=!0),Z.destroyed?D.emit(u,U):U?v(D,U,!0):e.nextTick(k,D)}try{D._construct(U=>{e.nextTick(Q,U)})}catch(U){e.nextTick(Q,U)}}function k(D){D.emit(c)}function A(D){return(D==null?void 0:D.setHeader)&&typeof D.abort=="function"}function T(D){D.emit("close")}function P(D,H){D.emit("error",H),e.nextTick(T,D)}function Y(D,H){!D||s(D)||(!H&&!a(D)&&(H=new r),l(D)?(D.socket=null,D.destroy(H)):A(D)?D.abort():A(D.req)?D.req.abort():typeof D.destroy=="function"?D.destroy(H):typeof D.close=="function"?D.close():H?e.nextTick(P,D,H):e.nextTick(T,D),D.destroyed||(D[o]=!0))}return nv={construct:w,destroyer:Y,destroy:h,undestroy:m,errorOrDestroy:v},nv}var rv,Gk;function e1(){if(Gk)return rv;Gk=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Rn(),{EventEmitter:n}=uy();function r(o){n.call(this,o)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(o,s){const a=this;function l(y){o.writable&&o.write(y)===!1&&a.pause&&a.pause()}a.on("data",l);function u(){a.readable&&a.resume&&a.resume()}o.on("drain",u),!o._isStdio&&(!s||s.end!==!1)&&(a.on("end",f),a.on("close",h));let c=!1;function f(){c||(c=!0,o.end())}function h(){c||(c=!0,typeof o.destroy=="function"&&o.destroy())}function p(y){b(),n.listenerCount(this,"error")===0&&this.emit("error",y)}i(a,"error",p),i(o,"error",p);function b(){a.removeListener("data",l),o.removeListener("drain",u),a.removeListener("end",f),a.removeListener("close",h),a.removeListener("error",p),o.removeListener("error",p),a.removeListener("end",b),a.removeListener("close",b),o.removeListener("close",b)}return a.on("end",b),a.on("close",b),o.on("close",b),o.emit("pipe",a),o};function i(o,s,a){if(typeof o.prependListener=="function")return o.prependListener(s,a);!o._events||!o._events[s]?o.on(s,a):e(o._events[s])?o._events[s].unshift(a):o._events[s]=[a,o._events[s]]}return rv={Stream:r,prependListener:i},rv}var iv={exports:{}},Yk;function cy(){return Yk||(Yk=1,function(e){const{SymbolDispose:t}=Rn(),{AbortError:n,codes:r}=ei(),{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=Ls(),a=Oa(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const c=(f,h)=>{if(typeof f!="object"||!("aborted"in f))throw new l(h,"AbortSignal",f)};e.exports.addAbortSignal=function(h,p){if(c(h,"signal"),!i(p)&&!o(p))throw new l("stream",["ReadableStream","WritableStream","Stream"],p);return e.exports.addAbortSignalNoValidate(h,p)},e.exports.addAbortSignalNoValidate=function(f,h){if(typeof f!="object"||!("aborted"in f))return h;const p=i(h)?()=>{h.destroy(new n(void 0,{cause:f.reason}))}:()=>{h[s](new n(void 0,{cause:f.reason}))};if(f.aborted)p();else{u=u||hi().addAbortListener;const b=u(f,p);a(h,b[t])}return h}}(iv)),iv.exports}var ov,Xk;function Nee(){if(Xk)return ov;Xk=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Rn(),{Buffer:i}=Pa(),{inspect:o}=hi();return ov=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const l={data:a,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(a){const l={data:a,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=a+l.data;return u}concat(a){if(this.length===0)return i.alloc(0);const l=i.allocUnsafe(a>>>0);let u=this.head,c=0;for(;u;)n(l,u.data,c),c+=u.data.length,u=u.next;return l}consume(a,l){const u=this.head.data;if(a<u.length){const c=u.slice(0,a);return this.head.data=u.slice(a),c}return a===u.length?this.shift():l?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[t](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let l="",u=this.head,c=0;do{const f=u.data;if(a>f.length)l+=f,a-=f.length;else{a===f.length?(l+=f,++c,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(f,0,a),this.head=u,u.data=e(f,a));break}++c}while((u=u.next)!==null);return this.length-=c,l}_getBuffer(a){const l=i.allocUnsafe(a),u=a;let c=this.head,f=0;do{const h=c.data;if(a>h.length)n(l,h,u-a),a-=h.length;else{a===h.length?(n(l,h,u-a),++f,c.next?this.head=c.next:this.head=this.tail=null):(n(l,new r(h.buffer,h.byteOffset,a),u-a),this.head=c,c.data=h.slice(a));break}++f}while((c=c.next)!==null);return this.length-=f,l}[Symbol.for("nodejs.util.inspect.custom")](a,l){return o(this,{...l,depth:0,customInspect:!1})}},ov}var sv,Jk;function dy(){if(Jk)return sv;Jk=1;const{MathFloor:e,NumberIsInteger:t}=Rn(),{validateInteger:n}=Xf(),{ERR_INVALID_ARG_VALUE:r}=ei().codes;let i=16*1024,o=16;function s(c,f,h){return c.highWaterMark!=null?c.highWaterMark:f?c[h]:null}function a(c){return c?o:i}function l(c,f){n(f,"value",0),c?o=f:i=f}function u(c,f,h,p){const b=s(f,p,h);if(b!=null){if(!t(b)||b<0){const y=p?"options.".concat(h):"options.highWaterMark";throw new r(y,b)}return e(b)}return a(c.objectMode)}return sv={getHighWaterMark:u,getDefaultHighWaterMark:a,setDefaultHighWaterMark:l},sv}var av={},Xh={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Qk;function Ree(){return Qk||(Qk=1,function(e,t){var n=Pa(),r=n.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=o);function o(s,a,l){return r(s,a,l)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(Xh,Xh.exports)),Xh.exports}var Zk;function Tee(){if(Zk)return av;Zk=1;var e=Ree().Buffer,t=e.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(m){if(!m)return"utf8";for(var v;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(v)return;m=(""+m).toLowerCase(),v=!0}}function r(m){var v=n(m);if(typeof v!="string"&&(e.isEncoding===t||!t(m)))throw new Error("Unknown encoding: "+m);return v||m}av.StringDecoder=i;function i(m){this.encoding=r(m);var v;switch(this.encoding){case"utf16le":this.text=f,this.end=h,v=4;break;case"utf8":this.fillLast=l,v=4;break;case"base64":this.text=p,this.end=b,v=3;break;default:this.write=y,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}i.prototype.write=function(m){if(m.length===0)return"";var v,w;if(this.lastNeed){if(v=this.fillLast(m),v===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<m.length?v?v+this.text(m,w):this.text(m,w):v||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function o(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function s(m,v,w){var S=v.length-1;if(S<w)return 0;var k=o(v[S]);return k>=0?(k>0&&(m.lastNeed=k-1),k):--S<w||k===-2?0:(k=o(v[S]),k>=0?(k>0&&(m.lastNeed=k-2),k):--S<w||k===-2?0:(k=o(v[S]),k>=0?(k>0&&(k===2?k=0:m.lastNeed=k-3),k):0))}function a(m,v,w){if((v[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return m.lastNeed=2,""}}function l(m){var v=this.lastTotal-this.lastNeed,w=a(this,m);if(w!==void 0)return w;if(this.lastNeed<=m.length)return m.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,v,0,m.length),this.lastNeed-=m.length}function u(m,v){var w=s(this,m,v);if(!this.lastNeed)return m.toString("utf8",v);this.lastTotal=w;var S=m.length-(w-this.lastNeed);return m.copy(this.lastChar,0,S),m.toString("utf8",v,S)}function c(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+"":v}function f(m,v){if((m.length-v)%2===0){var w=m.toString("utf16le",v);if(w){var S=w.charCodeAt(w.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",v,m.length-1)}function h(m){var v=m&&m.length?this.write(m):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,w)}return v}function p(m,v){var w=(m.length-v)%3;return w===0?m.toString("base64",v):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",v,m.length-w))}function b(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function y(m){return m.toString(this.encoding)}function _(m){return m&&m.length?this.write(m):""}return av}var lv,eC;function K4(){if(eC)return lv;eC=1;const e=Ll(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Rn(),{Buffer:i}=Pa(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:s}=ei().codes;function a(l,u,c){let f;if(typeof u=="string"||u instanceof i)return new l({objectMode:!0,...c,read(){this.push(u),this.push(null)}});let h;if(u&&u[n])h=!0,f=u[n]();else if(u&&u[r])h=!1,f=u[r]();else throw new o("iterable",["Iterable"],u);const p=new l({objectMode:!0,highWaterMark:1,...c});let b=!1;p._read=function(){b||(b=!0,_())},p._destroy=function(m,v){t(y(m),()=>e.nextTick(v,m),w=>e.nextTick(v,w||m))};async function y(m){const v=m!=null,w=typeof f.throw=="function";if(v&&w){const{value:S,done:k}=await f.throw(m);if(await S,k)return}if(typeof f.return=="function"){const{value:S}=await f.return();await S}}async function _(){for(;;){try{const{value:m,done:v}=h?await f.next():f.next();if(v)p.push(null);else{const w=m&&typeof m.then=="function"?await m:m;if(w===null)throw b=!1,new s;if(p.push(w))continue;b=!1}}catch(m){p.destroy(m)}break}}return p}return lv=a,lv}var uv,tC;function fy(){if(tC)return uv;tC=1;const e=Ll(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:l,SafeSet:u,SymbolAsyncDispose:c,SymbolAsyncIterator:f,Symbol:h}=Rn();uv=Oe,Oe.ReadableState=qe;const{EventEmitter:p}=uy(),{Stream:b,prependListener:y}=e1(),{Buffer:_}=Pa(),{addAbortSignal:m}=cy(),v=Oa();let w=hi().debuglog("stream",W=>{w=W});const S=Nee(),k=gc(),{getHighWaterMark:A,getDefaultHighWaterMark:T}=dy(),{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:Y,ERR_METHOD_NOT_IMPLEMENTED:D,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:Q,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:U},AbortError:L}=ei(),{validateObject:te}=Xf(),Z=h("kPaused"),{StringDecoder:oe}=Tee(),z=K4();a(Oe.prototype,b.prototype),a(Oe,b);const V=()=>{},{errorOrDestroy:$}=k,X=1,ue=2,ce=4,Ce=8,Pe=16,Me=32,B=64,J=128,re=256,De=512,Ye=1024,He=2048,ne=4096,he=8192,Se=16384,Ue=32768,We=65536,Ke=1<<17,fe=1<<18;function Fe(W){return{enumerable:!1,get(){return(this.state&W)!==0},set(ee){ee?this.state|=W:this.state&=~W}}}o(qe.prototype,{objectMode:Fe(X),ended:Fe(ue),endEmitted:Fe(ce),reading:Fe(Ce),constructed:Fe(Pe),sync:Fe(Me),needReadable:Fe(B),emittedReadable:Fe(J),readableListening:Fe(re),resumeScheduled:Fe(De),errorEmitted:Fe(Ye),emitClose:Fe(He),autoDestroy:Fe(ne),destroyed:Fe(he),closed:Fe(Se),closeEmitted:Fe(Ue),multiAwaitDrain:Fe(We),readingMore:Fe(Ke),dataEmitted:Fe(fe)});function qe(W,ee,Ze){typeof Ze!="boolean"&&(Ze=ee instanceof Ps()),this.state=He|ne|Pe|Me,W&&W.objectMode&&(this.state|=X),Ze&&W&&W.readableObjectMode&&(this.state|=X),this.highWaterMark=W?A(this,W,"readableHighWaterMark",Ze):T(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[Z]=null,W&&W.emitClose===!1&&(this.state&=-2049),W&&W.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=W&&W.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,W&&W.encoding&&(this.decoder=new oe(W.encoding),this.encoding=W.encoding)}function Oe(W){if(!(this instanceof Oe))return new Oe(W);const ee=this instanceof Ps();this._readableState=new qe(W,this,ee),W&&(typeof W.read=="function"&&(this._read=W.read),typeof W.destroy=="function"&&(this._destroy=W.destroy),typeof W.construct=="function"&&(this._construct=W.construct),W.signal&&!ee&&m(W.signal,this)),b.call(this,W),k.construct(this,()=>{this._readableState.needReadable&&de(this,this._readableState)})}Oe.prototype.destroy=k.destroy,Oe.prototype._undestroy=k.undestroy,Oe.prototype._destroy=function(W,ee){ee(W)},Oe.prototype[p.captureRejectionSymbol]=function(W){this.destroy(W)},Oe.prototype[c]=function(){let W;return this.destroyed||(W=this.readableEnded?null:new L,this.destroy(W)),new l((ee,Ze)=>v(this,rt=>rt&&rt!==W?Ze(rt):ee(null)))},Oe.prototype.push=function(W,ee){return At(this,W,ee,!1)},Oe.prototype.unshift=function(W,ee){return At(this,W,ee,!0)};function At(W,ee,Ze,rt){w("readableAddChunk",ee);const gt=W._readableState;let Pt;if(gt.state&X||(typeof ee=="string"?(Ze=Ze||gt.defaultEncoding,gt.encoding!==Ze&&(rt&&gt.encoding?ee=_.from(ee,Ze).toString(gt.encoding):(ee=_.from(ee,Ze),Ze=""))):ee instanceof _?Ze="":b._isUint8Array(ee)?(ee=b._uint8ArrayToBuffer(ee),Ze=""):ee!=null&&(Pt=new Y("chunk",["string","Buffer","Uint8Array"],ee))),Pt)$(W,Pt);else if(ee===null)gt.state&=-9,C(W,gt);else if(gt.state&X||ee&&ee.length>0)if(rt)if(gt.state&ce)$(W,new U);else{if(gt.destroyed||gt.errored)return!1;dn(W,gt,ee,!0)}else if(gt.ended)$(W,new Q);else{if(gt.destroyed||gt.errored)return!1;gt.state&=-9,gt.decoder&&!Ze?(ee=gt.decoder.write(ee),gt.objectMode||ee.length!==0?dn(W,gt,ee,!1):de(W,gt)):dn(W,gt,ee,!1)}else rt||(gt.state&=-9,de(W,gt));return!gt.ended&&(gt.length<gt.highWaterMark||gt.length===0)}function dn(W,ee,Ze,rt){ee.flowing&&ee.length===0&&!ee.sync&&W.listenerCount("data")>0?(ee.state&We?ee.awaitDrainWriters.clear():ee.awaitDrainWriters=null,ee.dataEmitted=!0,W.emit("data",Ze)):(ee.length+=ee.objectMode?1:Ze.length,rt?ee.buffer.unshift(Ze):ee.buffer.push(Ze),ee.state&B&&j(W)),de(W,ee)}Oe.prototype.isPaused=function(){const W=this._readableState;return W[Z]===!0||W.flowing===!1},Oe.prototype.setEncoding=function(W){const ee=new oe(W);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;const Ze=this._readableState.buffer;let rt="";for(const gt of Ze)rt+=ee.write(gt);return Ze.clear(),rt!==""&&Ze.push(rt),this._readableState.length=rt.length,this};const Ct=1073741824;function tn(W){if(W>Ct)throw new H("size","<= 1GiB",W);return W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++,W}function O(W,ee){return W<=0||ee.length===0&&ee.ended?0:ee.state&X?1:r(W)?ee.flowing&&ee.length?ee.buffer.first().length:ee.length:W<=ee.length?W:ee.ended?ee.length:0}Oe.prototype.read=function(W){w("read",W),W===void 0?W=NaN:n(W)||(W=i(W,10));const ee=this._readableState,Ze=W;if(W>ee.highWaterMark&&(ee.highWaterMark=tn(W)),W!==0&&(ee.state&=-129),W===0&&ee.needReadable&&((ee.highWaterMark!==0?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return w("read: emitReadable",ee.length,ee.ended),ee.length===0&&ee.ended?So(this):j(this),null;if(W=O(W,ee),W===0&&ee.ended)return ee.length===0&&So(this),null;let rt=(ee.state&B)!==0;if(w("need readable",rt),(ee.length===0||ee.length-W<ee.highWaterMark)&&(rt=!0,w("length less than watermark",rt)),ee.ended||ee.reading||ee.destroyed||ee.errored||!ee.constructed)rt=!1,w("reading, ended or constructing",rt);else if(rt){w("do read"),ee.state|=Ce|Me,ee.length===0&&(ee.state|=B);try{this._read(ee.highWaterMark)}catch(Pt){$(this,Pt)}ee.state&=-33,ee.reading||(W=O(Ze,ee))}let gt;return W>0?gt=xo(W,ee):gt=null,gt===null?(ee.needReadable=ee.length<=ee.highWaterMark,W=0):(ee.length-=W,ee.multiAwaitDrain?ee.awaitDrainWriters.clear():ee.awaitDrainWriters=null),ee.length===0&&(ee.ended||(ee.needReadable=!0),Ze!==W&&ee.ended&&So(this)),gt!==null&&!ee.errorEmitted&&!ee.closeEmitted&&(ee.dataEmitted=!0,this.emit("data",gt)),gt};function C(W,ee){if(w("onEofChunk"),!ee.ended){if(ee.decoder){const Ze=ee.decoder.end();Ze&&Ze.length&&(ee.buffer.push(Ze),ee.length+=ee.objectMode?1:Ze.length)}ee.ended=!0,ee.sync?j(W):(ee.needReadable=!1,ee.emittedReadable=!0,q(W))}}function j(W){const ee=W._readableState;w("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(w("emitReadable",ee.flowing),ee.emittedReadable=!0,e.nextTick(q,W))}function q(W){const ee=W._readableState;w("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&!ee.errored&&(ee.length||ee.ended)&&(W.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,Ot(W)}function de(W,ee){!ee.readingMore&&ee.constructed&&(ee.readingMore=!0,e.nextTick(je,W,ee))}function je(W,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&ee.length===0);){const Ze=ee.length;if(w("maybeReadMore read 0"),W.read(0),Ze===ee.length)break}ee.readingMore=!1}Oe.prototype._read=function(W){throw new D("_read()")},Oe.prototype.pipe=function(W,ee){const Ze=this,rt=this._readableState;rt.pipes.length===1&&(rt.multiAwaitDrain||(rt.multiAwaitDrain=!0,rt.awaitDrainWriters=new u(rt.awaitDrainWriters?[rt.awaitDrainWriters]:[]))),rt.pipes.push(W),w("pipe count=%d opts=%j",rt.pipes.length,ee);const Pt=(!ee||ee.end!==!1)&&W!==e.stdout&&W!==e.stderr?ts:Ji;rt.endEmitted?e.nextTick(Pt):Ze.once("end",Pt),W.on("unpipe",Jt);function Jt(Wn,_r){w("onunpipe"),Wn===Ze&&_r&&_r.hasUnpiped===!1&&(_r.hasUnpiped=!0,ko())}function ts(){w("onend"),W.end()}let br,Xi=!1;function ko(){w("cleanup"),W.removeListener("close",cr),W.removeListener("finish",pi),br&&W.removeListener("drain",br),W.removeListener("error",Hr),W.removeListener("unpipe",Jt),Ze.removeListener("end",ts),Ze.removeListener("end",Ji),Ze.removeListener("data",zr),Xi=!0,br&&rt.awaitDrainWriters&&(!W._writableState||W._writableState.needDrain)&&br()}function Fs(){Xi||(rt.pipes.length===1&&rt.pipes[0]===W?(w("false write response, pause",0),rt.awaitDrainWriters=W,rt.multiAwaitDrain=!1):rt.pipes.length>1&&rt.pipes.includes(W)&&(w("false write response, pause",rt.awaitDrainWriters.size),rt.awaitDrainWriters.add(W)),Ze.pause()),br||(br=Be(Ze,W),W.on("drain",br))}Ze.on("data",zr);function zr(Wn){w("ondata");const _r=W.write(Wn);w("dest.write",_r),_r===!1&&Fs()}function Hr(Wn){if(w("onerror",Wn),Ji(),W.removeListener("error",Hr),W.listenerCount("error")===0){const _r=W._writableState||W._readableState;_r&&!_r.errorEmitted?$(W,Wn):W.emit("error",Wn)}}y(W,"error",Hr);function cr(){W.removeListener("finish",pi),Ji()}W.once("close",cr);function pi(){w("onfinish"),W.removeListener("close",cr),Ji()}W.once("finish",pi);function Ji(){w("unpipe"),Ze.unpipe(W)}return W.emit("pipe",Ze),W.writableNeedDrain===!0?Fs():rt.flowing||(w("pipe resume"),Ze.resume()),W};function Be(W,ee){return function(){const rt=W._readableState;rt.awaitDrainWriters===ee?(w("pipeOnDrain",1),rt.awaitDrainWriters=null):rt.multiAwaitDrain&&(w("pipeOnDrain",rt.awaitDrainWriters.size),rt.awaitDrainWriters.delete(ee)),(!rt.awaitDrainWriters||rt.awaitDrainWriters.size===0)&&W.listenerCount("data")&&W.resume()}}Oe.prototype.unpipe=function(W){const ee=this._readableState,Ze={hasUnpiped:!1};if(ee.pipes.length===0)return this;if(!W){const gt=ee.pipes;ee.pipes=[],this.pause();for(let Pt=0;Pt<gt.length;Pt++)gt[Pt].emit("unpipe",this,{hasUnpiped:!1});return this}const rt=t(ee.pipes,W);return rt===-1?this:(ee.pipes.splice(rt,1),ee.pipes.length===0&&this.pause(),W.emit("unpipe",this,Ze),this)},Oe.prototype.on=function(W,ee){const Ze=b.prototype.on.call(this,W,ee),rt=this._readableState;return W==="data"?(rt.readableListening=this.listenerCount("readable")>0,rt.flowing!==!1&&this.resume()):W==="readable"&&!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.flowing=!1,rt.emittedReadable=!1,w("on readable",rt.length,rt.reading),rt.length?j(this):rt.reading||e.nextTick(Vt,this)),Ze},Oe.prototype.addListener=Oe.prototype.on,Oe.prototype.removeListener=function(W,ee){const Ze=b.prototype.removeListener.call(this,W,ee);return W==="readable"&&e.nextTick(Nt,this),Ze},Oe.prototype.off=Oe.prototype.removeListener,Oe.prototype.removeAllListeners=function(W){const ee=b.prototype.removeAllListeners.apply(this,arguments);return(W==="readable"||W===void 0)&&e.nextTick(Nt,this),ee};function Nt(W){const ee=W._readableState;ee.readableListening=W.listenerCount("readable")>0,ee.resumeScheduled&&ee[Z]===!1?ee.flowing=!0:W.listenerCount("data")>0?W.resume():ee.readableListening||(ee.flowing=null)}function Vt(W){w("readable nexttick read 0"),W.read(0)}Oe.prototype.resume=function(){const W=this._readableState;return W.flowing||(w("resume"),W.flowing=!W.readableListening,it(this,W)),W[Z]=!1,this};function it(W,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,e.nextTick(Yt,W,ee))}function Yt(W,ee){w("resume",ee.reading),ee.reading||W.read(0),ee.resumeScheduled=!1,W.emit("resume"),Ot(W),ee.flowing&&!ee.reading&&W.read(0)}Oe.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function Ot(W){const ee=W._readableState;for(w("flow",ee.flowing);ee.flowing&&W.read()!==null;);}Oe.prototype.wrap=function(W){let ee=!1;W.on("data",rt=>{!this.push(rt)&&W.pause&&(ee=!0,W.pause())}),W.on("end",()=>{this.push(null)}),W.on("error",rt=>{$(this,rt)}),W.on("close",()=>{this.destroy()}),W.on("destroy",()=>{this.destroy()}),this._read=()=>{ee&&W.resume&&(ee=!1,W.resume())};const Ze=s(W);for(let rt=1;rt<Ze.length;rt++){const gt=Ze[rt];this[gt]===void 0&&typeof W[gt]=="function"&&(this[gt]=W[gt].bind(W))}return this},Oe.prototype[f]=function(){return Gi(this)},Oe.prototype.iterator=function(W){return W!==void 0&&te(W,"options"),Gi(this,W)};function Gi(W,ee){typeof W.read!="function"&&(W=Oe.wrap(W,{objectMode:!0}));const Ze=ot(W,ee);return Ze.stream=W,Ze}async function*ot(W,ee){let Ze=V;function rt(Jt){this===W?(Ze(),Ze=V):Ze=Jt}W.on("readable",rt);let gt;const Pt=v(W,{writable:!1},Jt=>{gt=Jt?P(gt,Jt):null,Ze(),Ze=V});try{for(;;){const Jt=W.destroyed?null:W.read();if(Jt!==null)yield Jt;else{if(gt)throw gt;if(gt===null)return;await new l(rt)}}}catch(Jt){throw gt=P(gt,Jt),gt}finally{(gt||(ee==null?void 0:ee.destroyOnReturn)!==!1)&&(gt===void 0||W._readableState.autoDestroy)?k.destroyer(W,null):(W.off("readable",rt),Pt())}}o(Oe.prototype,{readable:{__proto__:null,get(){const W=this._readableState;return!!W&&W.readable!==!1&&!W.destroyed&&!W.errorEmitted&&!W.endEmitted},set(W){this._readableState&&(this._readableState.readable=!!W)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(W){this._readableState&&(this._readableState.destroyed=W)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(qe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(W){this[Z]=!!W}}}),Oe._fromList=xo;function xo(W,ee){if(ee.length===0)return null;let Ze;return ee.objectMode?Ze=ee.buffer.shift():!W||W>=ee.length?(ee.decoder?Ze=ee.buffer.join(""):ee.buffer.length===1?Ze=ee.buffer.first():Ze=ee.buffer.concat(ee.length),ee.buffer.clear()):Ze=ee.buffer.consume(W,ee.decoder),Ze}function So(W){const ee=W._readableState;w("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,e.nextTick(Eo,ee,W))}function Eo(W,ee){if(w("endReadableNT",W.endEmitted,W.length),!W.errored&&!W.closeEmitted&&!W.endEmitted&&W.length===0){if(W.endEmitted=!0,ee.emit("end"),ee.writable&&ee.allowHalfOpen===!1)e.nextTick(es,ee);else if(W.autoDestroy){const Ze=ee._writableState;(!Ze||Ze.autoDestroy&&(Ze.finished||Ze.writable===!1))&&ee.destroy()}}}function es(W){W.writable&&!W.writableEnded&&!W.destroyed&&W.end()}Oe.from=function(W,ee){return z(Oe,W,ee)};let Yi;function Bs(){return Yi===void 0&&(Yi={}),Yi}return Oe.fromWeb=function(W,ee){return Bs().newStreamReadableFromReadableStream(W,ee)},Oe.toWeb=function(W,ee){return Bs().newReadableStreamFromStreamReadable(W,ee)},Oe.wrap=function(W,ee){var Ze,rt;return new Oe({objectMode:(Ze=(rt=W.readableObjectMode)!==null&&rt!==void 0?rt:W.objectMode)!==null&&Ze!==void 0?Ze:!0,...ee,destroy(gt,Pt){k.destroyer(W,gt),Pt(gt)}}).wrap(W)},uv}var cv,nC;function t1(){if(nC)return cv;nC=1;const e=Ll(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:l,SymbolHasInstance:u}=Rn();cv=te,te.WritableState=U;const{EventEmitter:c}=uy(),f=e1().Stream,{Buffer:h}=Pa(),p=gc(),{addAbortSignal:b}=cy(),{getHighWaterMark:y,getDefaultHighWaterMark:_}=dy(),{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:P,ERR_UNKNOWN_ENCODING:Y}=ei().codes,{errorOrDestroy:D}=p;s(te.prototype,f.prototype),s(te,f);function H(){}const Q=l("kOnFinished");function U(ne,he,Se){typeof Se!="boolean"&&(Se=he instanceof Ps()),this.objectMode=!!(ne&&ne.objectMode),Se&&(this.objectMode=this.objectMode||!!(ne&&ne.writableObjectMode)),this.highWaterMark=ne?y(this,ne,"writableHighWaterMark",Se):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ue=!!(ne&&ne.decodeStrings===!1);this.decodeStrings=!Ue,this.defaultEncoding=ne&&ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=$.bind(void 0,he),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ne||ne.emitClose!==!1,this.autoDestroy=!ne||ne.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Q]=[]}function L(ne){ne.buffered=[],ne.bufferedIndex=0,ne.allBuffers=!0,ne.allNoop=!0}U.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(U.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function te(ne){const he=this instanceof Ps();if(!he&&!r(te,this))return new te(ne);this._writableState=new U(ne,this,he),ne&&(typeof ne.write=="function"&&(this._write=ne.write),typeof ne.writev=="function"&&(this._writev=ne.writev),typeof ne.destroy=="function"&&(this._destroy=ne.destroy),typeof ne.final=="function"&&(this._final=ne.final),typeof ne.construct=="function"&&(this._construct=ne.construct),ne.signal&&b(ne.signal,this)),f.call(this,ne),p.construct(this,()=>{const Se=this._writableState;Se.writing||Ce(this,Se),J(this,Se)})}i(te,u,{__proto__:null,value:function(ne){return r(this,ne)?!0:this!==te?!1:ne&&ne._writableState instanceof U}}),te.prototype.pipe=function(){D(this,new S)};function Z(ne,he,Se,Ue){const We=ne._writableState;if(typeof Se=="function")Ue=Se,Se=We.defaultEncoding;else{if(!Se)Se=We.defaultEncoding;else if(Se!=="buffer"&&!h.isEncoding(Se))throw new Y(Se);typeof Ue!="function"&&(Ue=H)}if(he===null)throw new T;if(!We.objectMode)if(typeof he=="string")We.decodeStrings!==!1&&(he=h.from(he,Se),Se="buffer");else if(he instanceof h)Se="buffer";else if(f._isUint8Array(he))he=f._uint8ArrayToBuffer(he),Se="buffer";else throw new m("chunk",["string","Buffer","Uint8Array"],he);let Ke;return We.ending?Ke=new P:We.destroyed&&(Ke=new k("write")),Ke?(e.nextTick(Ue,Ke),D(ne,Ke,!0),Ke):(We.pendingcb++,oe(ne,We,he,Se,Ue))}te.prototype.write=function(ne,he,Se){return Z(this,ne,he,Se)===!0},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){const ne=this._writableState;ne.corked&&(ne.corked--,ne.writing||Ce(this,ne))},te.prototype.setDefaultEncoding=function(he){if(typeof he=="string"&&(he=a(he)),!h.isEncoding(he))throw new Y(he);return this._writableState.defaultEncoding=he,this};function oe(ne,he,Se,Ue,We){const Ke=he.objectMode?1:Se.length;he.length+=Ke;const fe=he.length<he.highWaterMark;return fe||(he.needDrain=!0),he.writing||he.corked||he.errored||!he.constructed?(he.buffered.push({chunk:Se,encoding:Ue,callback:We}),he.allBuffers&&Ue!=="buffer"&&(he.allBuffers=!1),he.allNoop&&We!==H&&(he.allNoop=!1)):(he.writelen=Ke,he.writecb=We,he.writing=!0,he.sync=!0,ne._write(Se,Ue,he.onwrite),he.sync=!1),fe&&!he.errored&&!he.destroyed}function z(ne,he,Se,Ue,We,Ke,fe){he.writelen=Ue,he.writecb=fe,he.writing=!0,he.sync=!0,he.destroyed?he.onwrite(new k("write")):Se?ne._writev(We,he.onwrite):ne._write(We,Ke,he.onwrite),he.sync=!1}function V(ne,he,Se,Ue){--he.pendingcb,Ue(Se),ce(he),D(ne,Se)}function $(ne,he){const Se=ne._writableState,Ue=Se.sync,We=Se.writecb;if(typeof We!="function"){D(ne,new w);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,he?(he.stack,Se.errored||(Se.errored=he),ne._readableState&&!ne._readableState.errored&&(ne._readableState.errored=he),Ue?e.nextTick(V,ne,Se,he,We):V(ne,Se,he,We)):(Se.buffered.length>Se.bufferedIndex&&Ce(ne,Se),Ue?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===We?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:We,stream:ne,state:Se},e.nextTick(X,Se.afterWriteTickInfo)):ue(ne,Se,1,We))}function X({stream:ne,state:he,count:Se,cb:Ue}){return he.afterWriteTickInfo=null,ue(ne,he,Se,Ue)}function ue(ne,he,Se,Ue){for(!he.ending&&!ne.destroyed&&he.length===0&&he.needDrain&&(he.needDrain=!1,ne.emit("drain"));Se-- >0;)he.pendingcb--,Ue();he.destroyed&&ce(he),J(ne,he)}function ce(ne){if(ne.writing)return;for(let We=ne.bufferedIndex;We<ne.buffered.length;++We){var he;const{chunk:Ke,callback:fe}=ne.buffered[We],Fe=ne.objectMode?1:Ke.length;ne.length-=Fe,fe((he=ne.errored)!==null&&he!==void 0?he:new k("write"))}const Se=ne[Q].splice(0);for(let We=0;We<Se.length;We++){var Ue;Se[We]((Ue=ne.errored)!==null&&Ue!==void 0?Ue:new k("end"))}L(ne)}function Ce(ne,he){if(he.corked||he.bufferProcessing||he.destroyed||!he.constructed)return;const{buffered:Se,bufferedIndex:Ue,objectMode:We}=he,Ke=Se.length-Ue;if(!Ke)return;let fe=Ue;if(he.bufferProcessing=!0,Ke>1&&ne._writev){he.pendingcb-=Ke-1;const Fe=he.allNoop?H:Oe=>{for(let At=fe;At<Se.length;++At)Se[At].callback(Oe)},qe=he.allNoop&&fe===0?Se:t(Se,fe);qe.allBuffers=he.allBuffers,z(ne,he,!0,he.length,qe,"",Fe),L(he)}else{do{const{chunk:Fe,encoding:qe,callback:Oe}=Se[fe];Se[fe++]=null;const At=We?1:Fe.length;z(ne,he,!1,At,Fe,qe,Oe)}while(fe<Se.length&&!he.writing);fe===Se.length?L(he):fe>256?(Se.splice(0,fe),he.bufferedIndex=0):he.bufferedIndex=fe}he.bufferProcessing=!1}te.prototype._write=function(ne,he,Se){if(this._writev)this._writev([{chunk:ne,encoding:he}],Se);else throw new v("_write()")},te.prototype._writev=null,te.prototype.end=function(ne,he,Se){const Ue=this._writableState;typeof ne=="function"?(Se=ne,ne=null,he=null):typeof he=="function"&&(Se=he,he=null);let We;if(ne!=null){const Ke=Z(this,ne,he);Ke instanceof n&&(We=Ke)}return Ue.corked&&(Ue.corked=1,this.uncork()),We||(!Ue.errored&&!Ue.ending?(Ue.ending=!0,J(this,Ue,!0),Ue.ended=!0):Ue.finished?We=new A("end"):Ue.destroyed&&(We=new k("end"))),typeof Se=="function"&&(We||Ue.finished?e.nextTick(Se,We):Ue[Q].push(Se)),this};function Pe(ne){return ne.ending&&!ne.destroyed&&ne.constructed&&ne.length===0&&!ne.errored&&ne.buffered.length===0&&!ne.finished&&!ne.writing&&!ne.errorEmitted&&!ne.closeEmitted}function Me(ne,he){let Se=!1;function Ue(We){if(Se){D(ne,We!=null?We:w());return}if(Se=!0,he.pendingcb--,We){const Ke=he[Q].splice(0);for(let fe=0;fe<Ke.length;fe++)Ke[fe](We);D(ne,We,he.sync)}else Pe(he)&&(he.prefinished=!0,ne.emit("prefinish"),he.pendingcb++,e.nextTick(re,ne,he))}he.sync=!0,he.pendingcb++;try{ne._final(Ue)}catch(We){Ue(We)}he.sync=!1}function B(ne,he){!he.prefinished&&!he.finalCalled&&(typeof ne._final=="function"&&!he.destroyed?(he.finalCalled=!0,Me(ne,he)):(he.prefinished=!0,ne.emit("prefinish")))}function J(ne,he,Se){Pe(he)&&(B(ne,he),he.pendingcb===0&&(Se?(he.pendingcb++,e.nextTick((Ue,We)=>{Pe(We)?re(Ue,We):We.pendingcb--},ne,he)):Pe(he)&&(he.pendingcb++,re(ne,he))))}function re(ne,he){he.pendingcb--,he.finished=!0;const Se=he[Q].splice(0);for(let Ue=0;Ue<Se.length;Ue++)Se[Ue]();if(ne.emit("finish"),he.autoDestroy){const Ue=ne._readableState;(!Ue||Ue.autoDestroy&&(Ue.endEmitted||Ue.readable===!1))&&ne.destroy()}}o(te.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(ne){this._writableState&&(this._writableState.destroyed=ne)}},writable:{__proto__:null,get(){const ne=this._writableState;return!!ne&&ne.writable!==!1&&!ne.destroyed&&!ne.errored&&!ne.ending&&!ne.ended},set(ne){this._writableState&&(this._writableState.writable=!!ne)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const ne=this._writableState;return ne?!ne.destroyed&&!ne.ending&&ne.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const De=p.destroy;te.prototype.destroy=function(ne,he){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[Q].length)&&e.nextTick(ce,Se),De.call(this,ne,he),this},te.prototype._undestroy=p.undestroy,te.prototype._destroy=function(ne,he){he(ne)},te.prototype[c.captureRejectionSymbol]=function(ne){this.destroy(ne)};let Ye;function He(){return Ye===void 0&&(Ye={}),Ye}return te.fromWeb=function(ne,he){return He().newStreamWritableFromWritableStream(ne,he)},te.toWeb=function(ne){return He().newWritableStreamFromStreamWritable(ne)},cv}var dv,rC;function Iee(){if(rC)return dv;rC=1;const e=Ll(),t=Pa(),{isReadable:n,isWritable:r,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:c}=Ls(),f=Oa(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:b}}=ei(),{destroyer:y}=gc(),_=Ps(),m=fy(),v=t1(),{createDeferredPromise:w}=hi(),S=K4(),k=globalThis.Blob||t.Blob,A=typeof k<"u"?function(U){return U instanceof k}:function(U){return!1},T=globalThis.AbortController||Ef().AbortController,{FunctionPrototypeCall:P}=Rn();class Y extends _{constructor(U){super(U),(U==null?void 0:U.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(U==null?void 0:U.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}dv=function Q(U,L){if(l(U))return U;if(s(U))return H({readable:U});if(a(U))return H({writable:U});if(o(U))return H({writable:!1,readable:!1});if(u(U))return H({readable:m.fromWeb(U)});if(c(U))return H({writable:v.fromWeb(U)});if(typeof U=="function"){const{value:Z,write:oe,final:z,destroy:V}=D(U);if(i(Z))return S(Y,Z,{objectMode:!0,write:oe,final:z,destroy:V});const $=Z==null?void 0:Z.then;if(typeof $=="function"){let X;const ue=P($,Z,ce=>{if(ce!=null)throw new b("nully","body",ce)},ce=>{y(X,ce)});return X=new Y({objectMode:!0,readable:!1,write:oe,final(ce){z(async()=>{try{await ue,e.nextTick(ce,null)}catch(Ce){e.nextTick(ce,Ce)}})},destroy:V})}throw new b("Iterable, AsyncIterable or AsyncFunction",L,Z)}if(A(U))return Q(U.arrayBuffer());if(i(U))return S(Y,U,{objectMode:!0,writable:!1});if(u(U==null?void 0:U.readable)&&c(U==null?void 0:U.writable))return Y.fromWeb(U);if(typeof(U==null?void 0:U.writable)=="object"||typeof(U==null?void 0:U.readable)=="object"){const Z=U!=null&&U.readable?s(U==null?void 0:U.readable)?U==null?void 0:U.readable:Q(U.readable):void 0,oe=U!=null&&U.writable?a(U==null?void 0:U.writable)?U==null?void 0:U.writable:Q(U.writable):void 0;return H({readable:Z,writable:oe})}const te=U==null?void 0:U.then;if(typeof te=="function"){let Z;return P(te,U,oe=>{oe!=null&&Z.push(oe),Z.push(null)},oe=>{y(Z,oe)}),Z=new Y({objectMode:!0,writable:!1,read(){}})}throw new p(L,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],U)};function D(Q){let{promise:U,resolve:L}=w();const te=new T,Z=te.signal;return{value:Q(async function*(){for(;;){const z=U;U=null;const{chunk:V,done:$,cb:X}=await z;if(e.nextTick(X),$)return;if(Z.aborted)throw new h(void 0,{cause:Z.reason});({promise:U,resolve:L}=w()),yield V}}(),{signal:Z}),write(z,V,$){const X=L;L=null,X({chunk:z,done:!1,cb:$})},final(z){const V=L;L=null,V({done:!0,cb:z})},destroy(z,V){te.abort(),V(z)}}}function H(Q){const U=Q.readable&&typeof Q.readable.read!="function"?m.wrap(Q.readable):Q.readable,L=Q.writable;let te=!!n(U),Z=!!r(L),oe,z,V,$,X;function ue(ce){const Ce=$;$=null,Ce?Ce(ce):ce&&X.destroy(ce)}return X=new Y({readableObjectMode:!!(U!=null&&U.readableObjectMode),writableObjectMode:!!(L!=null&&L.writableObjectMode),readable:te,writable:Z}),Z&&(f(L,ce=>{Z=!1,ce&&y(U,ce),ue(ce)}),X._write=function(ce,Ce,Pe){L.write(ce,Ce)?Pe():oe=Pe},X._final=function(ce){L.end(),z=ce},L.on("drain",function(){if(oe){const ce=oe;oe=null,ce()}}),L.on("finish",function(){if(z){const ce=z;z=null,ce()}})),te&&(f(U,ce=>{te=!1,ce&&y(U,ce),ue(ce)}),U.on("readable",function(){if(V){const ce=V;V=null,ce()}}),U.on("end",function(){X.push(null)}),X._read=function(){for(;;){const ce=U.read();if(ce===null){V=X._read;return}if(!X.push(ce))return}}),X._destroy=function(ce,Ce){!ce&&$!==null&&(ce=new h),V=null,oe=null,z=null,$===null?Ce(ce):($=Ce,y(L,ce),y(U,ce))},X}return dv}var fv,iC;function Ps(){if(iC)return fv;iC=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Rn();fv=s;const i=fy(),o=t1();r(s.prototype,i.prototype),r(s,i);{const c=n(o.prototype);for(let f=0;f<c.length;f++){const h=c[f];s.prototype[h]||(s.prototype[h]=o.prototype[h])}}function s(c){if(!(this instanceof s))return new s(c);i.call(this,c),o.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let a;function l(){return a===void 0&&(a={}),a}s.fromWeb=function(c,f){return l().newStreamDuplexFromReadableWritablePair(c,f)},s.toWeb=function(c){return l().newReadableWritablePairFromDuplex(c)};let u;return s.from=function(c){return u||(u=Iee()),u(c,"body")},fv}var hv,oC;function G4(){if(oC)return hv;oC=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Rn();hv=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=ei().codes,r=Ps(),{getHighWaterMark:i}=dy();e(s.prototype,r.prototype),e(s,r);const o=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const c=u?i(this,u,"readableHighWaterMark",!0):null;c===0&&(u={...u,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[o]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function a(u){typeof this._flush=="function"&&!this.destroyed?this._flush((c,f)=>{if(c){u?u(c):this.destroy(c);return}f!=null&&this.push(f),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==a&&a.call(this)}return s.prototype._final=a,s.prototype._transform=function(u,c,f){throw new n("_transform()")},s.prototype._write=function(u,c,f){const h=this._readableState,p=this._writableState,b=h.length;this._transform(u,c,(y,_)=>{if(y){f(y);return}_!=null&&this.push(_),p.ended||b===h.length||h.length<h.highWaterMark?f():this[o]=f})},s.prototype._read=function(){if(this[o]){const u=this[o];this[o]=null,u()}},hv}var pv,sC;function Y4(){if(sC)return pv;sC=1;const{ObjectSetPrototypeOf:e}=Rn();pv=n;const t=G4();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,i,o){o(null,r)},pv}var gv,aC;function n1(){if(aC)return gv;aC=1;const e=Ll(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:i}=Rn(),o=Oa(),{once:s}=hi(),a=gc(),l=Ps(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:y}=ei(),{validateFunction:_,validateAbortSignal:m}=Xf(),{isIterable:v,isReadable:w,isReadableNodeStream:S,isNodeStream:k,isTransformStream:A,isWebStream:T,isReadableStream:P,isReadableFinished:Y}=Ls(),D=globalThis.AbortController||Ef().AbortController;let H,Q,U;function L(ce,Ce,Pe){let Me=!1;ce.on("close",()=>{Me=!0});const B=o(ce,{readable:Ce,writable:Pe},J=>{Me=!J});return{destroy:J=>{Me||(Me=!0,a.destroyer(ce,J||new p("pipe")))},cleanup:B}}function te(ce){return _(ce[ce.length-1],"streams[stream.length - 1]"),ce.pop()}function Z(ce){if(v(ce))return ce;if(S(ce))return oe(ce);throw new c("val",["Readable","Iterable","AsyncIterable"],ce)}async function*oe(ce){Q||(Q=fy()),yield*Q.prototype[r].call(ce)}async function z(ce,Ce,Pe,{end:Me}){let B,J=null;const re=He=>{if(He&&(B=He),J){const ne=J;J=null,ne()}},De=()=>new n((He,ne)=>{B?ne(B):J=()=>{B?ne(B):He()}});Ce.on("drain",re);const Ye=o(Ce,{readable:!1},re);try{Ce.writableNeedDrain&&await De();for await(const He of ce)Ce.write(He)||await De();Me&&(Ce.end(),await De()),Pe()}catch(He){Pe(B!==He?u(B,He):He)}finally{Ye(),Ce.off("drain",re)}}async function V(ce,Ce,Pe,{end:Me}){A(Ce)&&(Ce=Ce.writable);const B=Ce.getWriter();try{for await(const J of ce)await B.ready,B.write(J).catch(()=>{});await B.ready,Me&&await B.close(),Pe()}catch(J){try{await B.abort(J),Pe(J)}catch(re){Pe(re)}}}function $(...ce){return X(ce,s(te(ce)))}function X(ce,Ce,Pe){if(ce.length===1&&t(ce[0])&&(ce=ce[0]),ce.length<2)throw new h("streams");const Me=new D,B=Me.signal,J=Pe==null?void 0:Pe.signal,re=[];m(J,"options.signal");function De(){We(new y)}U=U||hi().addAbortListener;let Ye;J&&(Ye=U(J,De));let He,ne;const he=[];let Se=0;function Ue(qe){We(qe,--Se===0)}function We(qe,Oe){var At;if(qe&&(!He||He.code==="ERR_STREAM_PREMATURE_CLOSE")&&(He=qe),!(!He&&!Oe)){for(;he.length;)he.shift()(He);(At=Ye)===null||At===void 0||At[i](),Me.abort(),Oe&&(He||re.forEach(dn=>dn()),e.nextTick(Ce,He,ne))}}let Ke;for(let qe=0;qe<ce.length;qe++){const Oe=ce[qe],At=qe<ce.length-1,dn=qe>0,Ct=At||(Pe==null?void 0:Pe.end)!==!1,tn=qe===ce.length-1;if(k(Oe)){let O=function(C){C&&C.name!=="AbortError"&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ue(C)};if(Ct){const{destroy:C,cleanup:j}=L(Oe,At,dn);he.push(C),w(Oe)&&tn&&re.push(j)}Oe.on("error",O),w(Oe)&&tn&&re.push(()=>{Oe.removeListener("error",O)})}if(qe===0)if(typeof Oe=="function"){if(Ke=Oe({signal:B}),!v(Ke))throw new f("Iterable, AsyncIterable or Stream","source",Ke)}else v(Oe)||S(Oe)||A(Oe)?Ke=Oe:Ke=l.from(Oe);else if(typeof Oe=="function"){if(A(Ke)){var fe;Ke=Z((fe=Ke)===null||fe===void 0?void 0:fe.readable)}else Ke=Z(Ke);if(Ke=Oe(Ke,{signal:B}),At){if(!v(Ke,!0))throw new f("AsyncIterable","transform[".concat(qe-1,"]"),Ke)}else{var Fe;H||(H=Y4());const O=new H({objectMode:!0}),C=(Fe=Ke)===null||Fe===void 0?void 0:Fe.then;if(typeof C=="function")Se++,C.call(Ke,de=>{ne=de,de!=null&&O.write(de),Ct&&O.end(),e.nextTick(Ue)},de=>{O.destroy(de),e.nextTick(Ue,de)});else if(v(Ke,!0))Se++,z(Ke,O,Ue,{end:Ct});else if(P(Ke)||A(Ke)){const de=Ke.readable||Ke;Se++,z(de,O,Ue,{end:Ct})}else throw new f("AsyncIterable or Promise","destination",Ke);Ke=O;const{destroy:j,cleanup:q}=L(Ke,!1,!0);he.push(j),tn&&re.push(q)}}else if(k(Oe)){if(S(Ke)){Se+=2;const O=ue(Ke,Oe,Ue,{end:Ct});w(Oe)&&tn&&re.push(O)}else if(A(Ke)||P(Ke)){const O=Ke.readable||Ke;Se++,z(O,Oe,Ue,{end:Ct})}else if(v(Ke))Se++,z(Ke,Oe,Ue,{end:Ct});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Ke=Oe}else if(T(Oe)){if(S(Ke))Se++,V(Z(Ke),Oe,Ue,{end:Ct});else if(P(Ke)||v(Ke))Se++,V(Ke,Oe,Ue,{end:Ct});else if(A(Ke))Se++,V(Ke.readable,Oe,Ue,{end:Ct});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Ke=Oe}else Ke=l.from(Oe)}return(B!=null&&B.aborted||J!=null&&J.aborted)&&e.nextTick(De),Ke}function ue(ce,Ce,Pe,{end:Me}){let B=!1;if(Ce.on("close",()=>{B||Pe(new b)}),ce.pipe(Ce,{end:!1}),Me){let J=function(){B=!0,Ce.end()};Y(ce)?e.nextTick(J):ce.once("end",J)}else Pe();return o(ce,{readable:!0,writable:!1},J=>{const re=ce._readableState;J&&J.code==="ERR_STREAM_PREMATURE_CLOSE"&&re&&re.ended&&!re.errored&&!re.errorEmitted?ce.once("end",Pe).once("error",Pe):Pe(J)}),o(Ce,{readable:!1,writable:!0},Pe)}return gv={pipelineImpl:X,pipeline:$},gv}var mv,lC;function X4(){if(lC)return mv;lC=1;const{pipeline:e}=n1(),t=Ps(),{destroyer:n}=gc(),{isNodeStream:r,isReadable:i,isWritable:o,isWebStream:s,isTransformStream:a,isWritableStream:l,isReadableStream:u}=Ls(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:h}}=ei(),p=Oa();return mv=function(...y){if(y.length===0)throw new h("streams");if(y.length===1)return t.from(y[0]);const _=[...y];if(typeof y[0]=="function"&&(y[0]=t.from(y[0])),typeof y[y.length-1]=="function"){const H=y.length-1;y[H]=t.from(y[H])}for(let H=0;H<y.length;++H)if(!(!r(y[H])&&!s(y[H]))){if(H<y.length-1&&!(i(y[H])||u(y[H])||a(y[H])))throw new f("streams[".concat(H,"]"),_[H],"must be readable");if(H>0&&!(o(y[H])||l(y[H])||a(y[H])))throw new f("streams[".concat(H,"]"),_[H],"must be writable")}let m,v,w,S,k;function A(H){const Q=S;S=null,Q?Q(H):H?k.destroy(H):!D&&!Y&&k.destroy()}const T=y[0],P=e(y,A),Y=!!(o(T)||l(T)||a(T)),D=!!(i(P)||u(P)||a(P));if(k=new t({writableObjectMode:!!(T!=null&&T.writableObjectMode),readableObjectMode:!!(P!=null&&P.readableObjectMode),writable:Y,readable:D}),Y){if(r(T))k._write=function(Q,U,L){T.write(Q,U)?L():m=L},k._final=function(Q){T.end(),v=Q},T.on("drain",function(){if(m){const Q=m;m=null,Q()}});else if(s(T)){const U=(a(T)?T.writable:T).getWriter();k._write=async function(L,te,Z){try{await U.ready,U.write(L).catch(()=>{}),Z()}catch(oe){Z(oe)}},k._final=async function(L){try{await U.ready,U.close().catch(()=>{}),v=L}catch(te){L(te)}}}const H=a(P)?P.readable:P;p(H,()=>{if(v){const Q=v;v=null,Q()}})}if(D){if(r(P))P.on("readable",function(){if(w){const H=w;w=null,H()}}),P.on("end",function(){k.push(null)}),k._read=function(){for(;;){const H=P.read();if(H===null){w=k._read;return}if(!k.push(H))return}};else if(s(P)){const Q=(a(P)?P.readable:P).getReader();k._read=async function(){for(;;)try{const{value:U,done:L}=await Q.read();if(!k.push(U))return;if(L){k.push(null);return}}catch(U){return}}}}return k._destroy=function(H,Q){!H&&S!==null&&(H=new c),w=null,m=null,v=null,S===null?Q(H):(S=Q,r(P)&&n(P,H))},k},mv}var uC;function Pee(){if(uC)return Gh;uC=1;const e=globalThis.AbortController||Ef().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:i},AbortError:o}=ei(),{validateAbortSignal:s,validateInteger:a,validateObject:l}=Xf(),u=Rn().Symbol("kWeak"),c=Rn().Symbol("kResistStopPropagation"),{finished:f}=Oa(),h=X4(),{addAbortSignalNoValidate:p}=cy(),{isWritable:b,isNodeStream:y}=Ls(),{deprecate:_}=hi(),{ArrayPrototypePush:m,Boolean:v,MathFloor:w,Number:S,NumberIsNaN:k,Promise:A,PromiseReject:T,PromiseResolve:P,PromisePrototypeThen:Y,Symbol:D}=Rn(),H=D("kEmpty"),Q=D("kEof");function U(J,re){if(re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal"),y(J)&&!b(J))throw new t("stream",J,"must be writable");const De=h(this,J);return re!=null&&re.signal&&p(re.signal,De),De}function L(J,re){if(typeof J!="function")throw new n("fn",["Function","AsyncFunction"],J);re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal");let De=1;(re==null?void 0:re.concurrency)!=null&&(De=w(re.concurrency));let Ye=De-1;return(re==null?void 0:re.highWaterMark)!=null&&(Ye=w(re.highWaterMark)),a(De,"options.concurrency",1),a(Ye,"options.highWaterMark",0),Ye+=De,(async function*(){const ne=hi().AbortSignalAny([re==null?void 0:re.signal].filter(v)),he=this,Se=[],Ue={signal:ne};let We,Ke,fe=!1,Fe=0;function qe(){fe=!0,Oe()}function Oe(){Fe-=1,At()}function At(){Ke&&!fe&&Fe<De&&Se.length<Ye&&(Ke(),Ke=null)}async function dn(){try{for await(let Ct of he){if(fe)return;if(ne.aborted)throw new o;try{if(Ct=J(Ct,Ue),Ct===H)continue;Ct=P(Ct)}catch(tn){Ct=T(tn)}Fe+=1,Y(Ct,Oe,qe),Se.push(Ct),We&&(We(),We=null),!fe&&(Se.length>=Ye||Fe>=De)&&await new A(tn=>{Ke=tn})}Se.push(Q)}catch(Ct){const tn=T(Ct);Y(tn,Oe,qe),Se.push(tn)}finally{fe=!0,We&&(We(),We=null)}}dn();try{for(;;){for(;Se.length>0;){const Ct=await Se[0];if(Ct===Q)return;if(ne.aborted)throw new o;Ct!==H&&(yield Ct),Se.shift(),At()}await new A(Ct=>{We=Ct})}}finally{fe=!0,Ke&&(Ke(),Ke=null)}}).call(this)}function te(J=void 0){return J!=null&&l(J,"options"),(J==null?void 0:J.signal)!=null&&s(J.signal,"options.signal"),(async function*(){let De=0;for await(const He of this){var Ye;if(J!=null&&(Ye=J.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o({cause:J.signal.reason});yield[De++,He]}}).call(this)}async function Z(J,re=void 0){for await(const De of $.call(this,J,re))return!0;return!1}async function oe(J,re=void 0){if(typeof J!="function")throw new n("fn",["Function","AsyncFunction"],J);return!await Z.call(this,async(...De)=>!await J(...De),re)}async function z(J,re){for await(const De of $.call(this,J,re))return De}async function V(J,re){if(typeof J!="function")throw new n("fn",["Function","AsyncFunction"],J);async function De(Ye,He){return await J(Ye,He),H}for await(const Ye of L.call(this,De,re));}function $(J,re){if(typeof J!="function")throw new n("fn",["Function","AsyncFunction"],J);async function De(Ye,He){return await J(Ye,He)?Ye:H}return L.call(this,De,re)}class X extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ue(J,re,De){var Ye;if(typeof J!="function")throw new n("reducer",["Function","AsyncFunction"],J);De!=null&&l(De,"options"),(De==null?void 0:De.signal)!=null&&s(De.signal,"options.signal");let He=arguments.length>1;if(De!=null&&(Ye=De.signal)!==null&&Ye!==void 0&&Ye.aborted){const We=new o(void 0,{cause:De.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(We)),We}const ne=new e,he=ne.signal;if(De!=null&&De.signal){const We={once:!0,[u]:this,[c]:!0};De.signal.addEventListener("abort",()=>ne.abort(),We)}let Se=!1;try{for await(const We of this){var Ue;if(Se=!0,De!=null&&(Ue=De.signal)!==null&&Ue!==void 0&&Ue.aborted)throw new o;He?re=await J(re,We,{signal:he}):(re=We,He=!0)}if(!Se&&!He)throw new X}finally{ne.abort()}return re}async function ce(J){J!=null&&l(J,"options"),(J==null?void 0:J.signal)!=null&&s(J.signal,"options.signal");const re=[];for await(const Ye of this){var De;if(J!=null&&(De=J.signal)!==null&&De!==void 0&&De.aborted)throw new o(void 0,{cause:J.signal.reason});m(re,Ye)}return re}function Ce(J,re){const De=L.call(this,J,re);return(async function*(){for await(const He of De)yield*He}).call(this)}function Pe(J){if(J=S(J),k(J))return 0;if(J<0)throw new i("number",">= 0",J);return J}function Me(J,re=void 0){return re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal"),J=Pe(J),(async function*(){var Ye;if(re!=null&&(Ye=re.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o;for await(const ne of this){var He;if(re!=null&&(He=re.signal)!==null&&He!==void 0&&He.aborted)throw new o;J--<=0&&(yield ne)}}).call(this)}function B(J,re=void 0){return re!=null&&l(re,"options"),(re==null?void 0:re.signal)!=null&&s(re.signal,"options.signal"),J=Pe(J),(async function*(){var Ye;if(re!=null&&(Ye=re.signal)!==null&&Ye!==void 0&&Ye.aborted)throw new o;for await(const ne of this){var He;if(re!=null&&(He=re.signal)!==null&&He!==void 0&&He.aborted)throw new o;if(J-- >0&&(yield ne),J<=0)return}}).call(this)}return Gh.streamReturningOperators={asIndexedPairs:_(te,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:$,flatMap:Ce,map:L,take:B,compose:U},Gh.promiseReturningOperators={every:oe,forEach:V,reduce:ue,toArray:ce,some:Z,find:z},Gh}var yv,cC;function J4(){if(cC)return yv;cC=1;const{ArrayPrototypePop:e,Promise:t}=Rn(),{isIterable:n,isNodeStream:r,isWebStream:i}=Ls(),{pipelineImpl:o}=n1(),{finished:s}=Oa();Q4();function a(...l){return new t((u,c)=>{let f,h;const p=l[l.length-1];if(p&&typeof p=="object"&&!r(p)&&!n(p)&&!i(p)){const b=e(l);f=b.signal,h=b.end}o(l,(b,y)=>{b?c(b):u(y)},{signal:f,end:h})})}return yv={finished:s,pipeline:a},yv}var dC;function Q4(){if(dC)return K0.exports;dC=1;const{Buffer:e}=Pa(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Rn(),{promisify:{custom:i}}=hi(),{streamReturningOperators:o,promiseReturningOperators:s}=Pee(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=ei(),l=X4(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:c}=dy(),{pipeline:f}=n1(),{destroyer:h}=gc(),p=Oa(),b=J4(),y=Ls(),_=K0.exports=e1().Stream;_.isDestroyed=y.isDestroyed,_.isDisturbed=y.isDisturbed,_.isErrored=y.isErrored,_.isReadable=y.isReadable,_.isWritable=y.isWritable,_.Readable=fy();for(const v of n(o)){let S=function(...k){if(new.target)throw a();return _.Readable.from(r(w,this,k))};const w=o[v];t(S,"name",{__proto__:null,value:w.name}),t(S,"length",{__proto__:null,value:w.length}),t(_.Readable.prototype,v,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const v of n(s)){let S=function(...k){if(new.target)throw a();return r(w,this,k)};const w=s[v];t(S,"name",{__proto__:null,value:w.name}),t(S,"length",{__proto__:null,value:w.length}),t(_.Readable.prototype,v,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}_.Writable=t1(),_.Duplex=Ps(),_.Transform=G4(),_.PassThrough=Y4(),_.pipeline=f;const{addAbortSignal:m}=cy();return _.addAbortSignal=m,_.finished=p,_.destroy=h,_.compose=l,_.setDefaultHighWaterMark=u,_.getDefaultHighWaterMark=c,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),t(f,i,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),t(p,i,{__proto__:null,enumerable:!0,get(){return b.finished}}),_.Stream=_,_._isUint8Array=function(w){return w instanceof Uint8Array},_._uint8ArrayToBuffer=function(w){return e.from(w.buffer,w.byteOffset,w.byteLength)},K0.exports}var fC;function hC(){return fC||(fC=1,function(e){const t=Q4(),n=J4(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(q0)),q0.exports}/*!
 LZ-UTF8 v0.6.3

 Copyright (c) 2021, Rotem Dan
 Released under the MIT license.

 Build date: 2022-07-06 

 Please report any issue at https://github.com/rotemdan/lzutf8.js/issues
*/(function(e){var t;(function(n){n.runningInNodeJS=function(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"},n.runningInMainNodeJSModule=function(){return n.runningInNodeJS()&&require.main===e},n.commonJSAvailable=function(){return!0},n.runningInWebWorker=function(){return typeof window>"u"&&typeof self=="object"&&typeof self.addEventListener=="function"&&typeof self.close=="function"},n.runningInNodeChildProcess=function(){return n.runningInNodeJS()&&typeof process.send=="function"},n.runningInNullOrigin=function(){return typeof window!="object"||typeof window.location!="object"||typeof document!="object"?!1:document.location.protocol!=="http:"&&document.location.protocol!=="https:"},n.webWorkersAvailable=function(){return!(typeof Worker!="function"||n.runningInNullOrigin()||n.runningInNodeJS()||navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},n.log=function(r,i){i===void 0&&(i=!1),typeof console=="object"&&(console.log(r),i&&typeof document=="object"&&(document.body.innerHTML+=r+"<br/>"))},n.createErrorMessage=function(r,i){if(i===void 0&&(i="Unhandled exception"),r==null)return i;if(i+=": ",typeof r.content=="object"){if(n.runningInNodeJS())return i+r.content.stack;var o=JSON.stringify(r.content);return o!=="{}"?i+o:i+r.content}else return typeof r.content=="string"?i+r.content:i+r},n.printExceptionAndStackTraceToConsole=function(r,i){i===void 0&&(i="Unhandled exception"),n.log(n.createErrorMessage(r,i))},n.getGlobalObject=function(){return typeof Bi=="object"?Bi:typeof window=="object"?window:typeof self=="object"?self:{}},n.toString=Object.prototype.toString,n.commonJSAvailable()&&(e.exports=n)})(t||(t={})),function(n){if(typeof Uint8Array=="function"&&new Uint8Array(1).subarray(1).byteLength!==0){var r=function(a,l){var u=function(f,h,p){return f<h?h:f>p?p:f};a=a|0,l=l|0,arguments.length<1&&(a=0),arguments.length<2&&(l=this.length),a<0&&(a=this.length+a),l<0&&(l=this.length+l),a=u(a,0,this.length),l=u(l,0,this.length);var c=l-a;return c<0&&(c=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,c)},i=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],o=void 0;if(typeof window=="object"?o=window:typeof self=="object"&&(o=self),o!==void 0)for(var s=0;s<i.length;s++)o[i[s]]&&(o[i[s]].prototype.subarray=r)}}();var t;(function(n){var r=function(){function i(){}return i.compressAsync=function(o,s,a){var l=new n.Timer,u=new n.Compressor;if(!a)throw new TypeError("compressAsync: No callback argument given");if(typeof o=="string")o=n.encodeUTF8(o);else if(o==null||!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));return}var c=n.ArrayTools.splitByteArray(o,s.blockSize),f=[],h=function(p){if(p<c.length){var b=void 0;try{b=u.compressBlock(c[p])}catch(_){a(void 0,_);return}f.push(b),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var y=n.ArrayTools.concatUint8Arrays(f);n.enqueueImmediate(function(){var _;try{_=n.CompressionCommon.encodeCompressedBytes(y,s.outputEncoding)}catch(m){a(void 0,m);return}n.enqueueImmediate(function(){return a(_)})})}};n.enqueueImmediate(function(){return h(0)})},i.createCompressionStream=function(){var o=new n.Compressor,s=hC(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,c){var f;try{f=n.BufferTools.uint8ArrayToBuffer(o.compressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(f),c()},a},i}();n.AsyncCompressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(){}return i.decompressAsync=function(o,s,a){if(!a)throw new TypeError("decompressAsync: No callback argument given");var l=new n.Timer;try{o=n.CompressionCommon.decodeCompressedBytes(o,s.inputEncoding)}catch(p){a(void 0,p);return}var u=new n.Decompressor,c=n.ArrayTools.splitByteArray(o,s.blockSize),f=[],h=function(p){if(p<c.length){var b=void 0;try{b=u.decompressBlock(c[p])}catch(_){a(void 0,_);return}f.push(b),l.getElapsedTime()<=20?h(p+1):(n.enqueueImmediate(function(){return h(p+1)}),l.restart())}else{var y=n.ArrayTools.concatUint8Arrays(f);n.enqueueImmediate(function(){var _;try{_=n.CompressionCommon.encodeDecompressedBytes(y,s.outputEncoding)}catch(m){a(void 0,m);return}n.enqueueImmediate(function(){return a(_)})})}};n.enqueueImmediate(function(){return h(0)})},i.createDecompressionStream=function(){var o=new n.Decompressor,s=hC(),a=new s.Transform({decodeStrings:!0,highWaterMark:65536});return a._transform=function(l,u,c){var f;try{f=n.BufferTools.uint8ArrayToBuffer(o.decompressBlock(n.BufferTools.bufferToUint8Array(l)))}catch(h){a.emit("error",h);return}a.push(f),c()},a},i}();n.AsyncDecompressor=r})(t||(t={}));var t;(function(n){var r;(function(i){i.compressAsync=function(o,s,a){if(s.inputEncoding=="ByteArray"&&!(o instanceof Uint8Array)){a(void 0,new TypeError("compressAsync: input is not a Uint8Array"));return}var l={token:Math.random().toString(),type:"compress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(c){var f=c.data;!f||f.token!=l.token||(i.globalWorker.removeEventListener("message",u),f.type=="error"?a(void 0,new Error(f.error)):a(f.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.decompressAsync=function(o,s,a){var l={token:Math.random().toString(),type:"decompress",data:o,inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding},u=function(c){var f=c.data;!f||f.token!=l.token||(i.globalWorker.removeEventListener("message",u),f.type=="error"?a(void 0,new Error(f.error)):a(f.data))};i.globalWorker.addEventListener("message",u),i.globalWorker.postMessage(l,[])},i.installWebWorkerIfNeeded=function(){typeof self=="object"&&self.document===void 0&&self.addEventListener!=null&&(self.addEventListener("message",function(o){var s=o.data;if(s.type=="compress"){var a=void 0;try{a=n.compress(s.data,{outputEncoding:s.outputEncoding})}catch(c){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(c)},[]);return}var l={token:s.token,type:"compressionResult",data:a,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}else if(s.type=="decompress"){var u=void 0;try{u=n.decompress(s.data,{inputEncoding:s.inputEncoding,outputEncoding:s.outputEncoding})}catch(f){self.postMessage({token:s.token,type:"error",error:n.createErrorMessage(f)},[]);return}var l={token:s.token,type:"decompressionResult",data:u,encoding:s.outputEncoding};l.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(l,[l.data.buffer]):self.postMessage(l,[])}}),self.addEventListener("error",function(o){n.log(n.createErrorMessage(o.error,"Unexpected LZUTF8 WebWorker exception"))}))},i.createGlobalWorkerIfNeeded=function(){if(i.globalWorker)return!0;if(!n.webWorkersAvailable())return!1;if(!i.scriptURI&&typeof document=="object"){var o=document.getElementById("lzutf8");o!=null&&(i.scriptURI=o.getAttribute("src")||void 0)}return i.scriptURI?(i.globalWorker=new Worker(i.scriptURI),!0):!1},i.terminate=function(){i.globalWorker&&(i.globalWorker.terminate(),i.globalWorker=void 0)}})(r=n.WebWorker||(n.WebWorker={})),r.installWebWorkerIfNeeded()})(t||(t={}));var t;(function(n){var r=function(){function i(o,s,a){this.container=o,this.startPosition=s,this.length=a}return i.prototype.get=function(o){return this.container[this.startPosition+o]},i.prototype.getInReversedOrder=function(o){return this.container[this.startPosition+this.length-1-o]},i.prototype.set=function(o,s){this.container[this.startPosition+o]=s},i}();n.ArraySegment=r})(t||(t={}));var t;(function(n){(function(r){r.copyElements=function(i,o,s,a,l){for(;l--;)s[a++]=i[o++]},r.zeroElements=function(i,o,s){for(;s--;)i[o++]=0},r.countNonzeroValuesInArray=function(i){for(var o=0,s=0;s<i.length;s++)i[s]&&o++;return o},r.truncateStartingElements=function(i,o){if(i.length<=o)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var s=i.length-o,a=0;a<o;a++)i[a]=i[s+a];i.length=o},r.doubleByteArrayCapacity=function(i){var o=new Uint8Array(i.length*2);return o.set(i),o},r.concatUint8Arrays=function(i){for(var o=0,s=0,a=i;s<a.length;s++){var l=a[s];o+=l.length}for(var u=new Uint8Array(o),c=0,f=0,h=i;f<h.length;f++){var l=h[f];u.set(l,c),c+=l.length}return u},r.splitByteArray=function(i,o){for(var s=[],a=0;a<i.length;){var l=Math.min(o,i.length-a);s.push(i.subarray(a,a+l)),a+=l}return s}})(n.ArrayTools||(n.ArrayTools={}))})(t||(t={}));var t;(function(n){(function(r){r.convertToUint8ArrayIfNeeded=function(i){return typeof Buffer=="function"&&Buffer.isBuffer(i)?r.bufferToUint8Array(i):i},r.uint8ArrayToBuffer=function(i){if(Buffer.prototype instanceof Uint8Array){var o=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return Object.setPrototypeOf(o,Buffer.prototype),o}else{for(var s=i.length,a=new Buffer(s),l=0;l<s;l++)a[l]=i[l];return a}},r.bufferToUint8Array=function(i){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);for(var o=i.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=i[a];return s}})(n.BufferTools||(n.BufferTools={}))})(t||(t={}));var t;(function(n){(function(r){r.getCroppedBuffer=function(i,o,s,a){a===void 0&&(a=0);var l=new Uint8Array(s+a);return l.set(i.subarray(o,o+s)),l},r.getCroppedAndAppendedByteArray=function(i,o,s,a){return n.ArrayTools.concatUint8Arrays([i.subarray(o,o+s),a])},r.detectCompressionSourceEncoding=function(i){if(i==null)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if(typeof i=="string")return"String";if(i instanceof Uint8Array||typeof Buffer=="function"&&Buffer.isBuffer(i))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},r.encodeCompressedBytes=function(i,o){switch(o){case"ByteArray":return i;case"Buffer":return n.BufferTools.uint8ArrayToBuffer(i);case"Base64":return n.encodeBase64(i);case"BinaryString":return n.encodeBinaryString(i);case"StorageBinaryString":return n.encodeStorageBinaryString(i);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},r.decodeCompressedBytes=function(i,o){if(o==null)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(o){case"ByteArray":case"Buffer":var s=n.BufferTools.convertToUint8ArrayIfNeeded(i);if(!(s instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return s;case"Base64":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return n.decodeBase64(i);case"BinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return n.decodeBinaryString(i);case"StorageBinaryString":if(typeof i!="string")throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return n.decodeStorageBinaryString(i);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '".concat(o,"'"))}},r.encodeDecompressedBytes=function(i,o){switch(o){case"String":return n.decodeUTF8(i);case"ByteArray":return i;case"Buffer":if(typeof Buffer!="function")throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return n.BufferTools.uint8ArrayToBuffer(i);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}})(n.CompressionCommon||(n.CompressionCommon={}))})(t||(t={}));var t;(function(n){var r;(function(i){var o=[],s;i.enqueueImmediate=function(a){o.push(a),o.length===1&&s()},i.initializeScheduler=function(){var a=function(){for(var f=0,h=o;f<h.length;f++){var p=h[f];try{p.call(void 0)}catch(b){n.printExceptionAndStackTraceToConsole(b,"enqueueImmediate exception")}}o.length=0};if(n.runningInNodeJS())s=function(){return setImmediate(function(){return a()})};else if(typeof window=="object"&&typeof window.addEventListener=="function"&&typeof window.postMessage=="function"){var l="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(f){f.data===l&&a()});var u;n.runningInNullOrigin()?u="*":u=window.location.href,s=function(){return window.postMessage(l,u)}}else if(typeof MessageChannel=="function"&&typeof MessagePort=="function"){var c=new MessageChannel;c.port1.onmessage=function(){return a()},s=function(){return c.port2.postMessage(0)}}else s=function(){return setTimeout(function(){return a()},0)}},i.initializeScheduler()})(r=n.EventLoop||(n.EventLoop={})),n.enqueueImmediate=function(i){return r.enqueueImmediate(i)}})(t||(t={}));var t;(function(n){(function(r){r.override=function(i,o){return r.extend(i,o)},r.extend=function(i,o){if(i==null)throw new TypeError("obj is null or undefined");if(typeof i!="object")throw new TypeError("obj is not an object");if(o==null&&(o={}),typeof o!="object")throw new TypeError("newProperties is not an object");if(o!=null)for(var s in o)i[s]=o[s];return i}})(n.ObjectTools||(n.ObjectTools={}))})(t||(t={}));var t;(function(n){n.getRandomIntegerInRange=function(r,i){return r+Math.floor(Math.random()*(i-r))},n.getRandomUTF16StringOfLength=function(r){for(var i="",o=0;o<r;o++){var s=void 0;do s=n.getRandomIntegerInRange(0,1114112);while(s>=55296&&s<=57343);i+=n.Encoding.CodePoint.decodeToString(s)}return i}})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=1024),this.outputBufferCapacity=o,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return i.prototype.appendCharCode=function(o){this.outputBuffer[this.outputPosition++]=o,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},i.prototype.appendCharCodes=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o[s])},i.prototype.appendString=function(o){for(var s=0,a=o.length;s<a;s++)this.appendCharCode(o.charCodeAt(s))},i.prototype.appendCodePoint=function(o){if(o<=65535)this.appendCharCode(o);else if(o<=1114111)this.appendCharCode(55296+(o-65536>>>10)),this.appendCharCode(56320+(o-65536&1023));else throw new Error("appendCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))},i.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},i.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},i}();n.StringBuilder=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.restart()}return i.prototype.restart=function(){this.startTime=i.getTimestamp()},i.prototype.getElapsedTime=function(){return i.getTimestamp()-this.startTime},i.prototype.getElapsedTimeAndRestart=function(){var o=this.getElapsedTime();return this.restart(),o},i.prototype.logAndRestart=function(o,s){s===void 0&&(s=!0);var a=this.getElapsedTime(),l="".concat(o,": ").concat(a.toFixed(3),"ms");return n.log(l,s),this.restart(),a},i.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},i.getMicrosecondTimestamp=function(){return Math.floor(i.getTimestamp()*1e3)},i.createGlobalTimestampFunction=function(){if(typeof process=="object"&&typeof process.hrtime=="function"){var o=0;this.timestampFunc=function(){var u=process.hrtime(),c=u[0]*1e3+u[1]/1e6;return o+c},o=Date.now()-this.timestampFunc()}else if(typeof chrome=="object"&&chrome.Interval){var s=Date.now(),a=new chrome.Interval;a.start(),this.timestampFunc=function(){return s+a.microseconds()/1e3}}else if(typeof performance=="object"&&performance.now){var l=Date.now()-performance.now();this.timestampFunc=function(){return l+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return new Date().getTime()}},i}();n.Timer=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){o===void 0&&(o=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,o&&typeof Uint32Array=="function"?this.prefixHashTable=new n.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new n.CompressorSimpleHashTable(this.PrefixHashTableSize)}return i.prototype.compressBlock=function(o){if(o==null)throw new TypeError("compressBlock: undefined or null input received");return typeof o=="string"&&(o=n.encodeUTF8(o)),o=n.BufferTools.convertToUint8ArrayIfNeeded(o),this.compressUtf8Block(o)},i.prototype.compressUtf8Block=function(o){if(!o||o.length==0)return new Uint8Array(0);var s=this.cropAndAddNewBytesToInputBuffer(o),a=this.inputBuffer,l=this.inputBuffer.length;this.outputBuffer=new Uint8Array(o.length),this.outputBufferPosition=0;for(var u=0,c=s;c<l;c++){var f=a[c],h=c<u;if(c>l-this.MinimumSequenceLength){h||this.outputRawByte(f);continue}var p=this.getBucketIndexForPrefix(c);if(!h){var b=this.findLongestMatch(c,p);b!=null&&(this.outputPointerBytes(b.length,b.distance),u=c+b.length,h=!0)}h||this.outputRawByte(f);var y=this.inputBufferStreamOffset+c;this.prefixHashTable.addValueToBucket(p,y)}return this.outputBuffer.subarray(0,this.outputBufferPosition)},i.prototype.findLongestMatch=function(o,s){var a=this.prefixHashTable.getArraySegmentForBucketIndex(s,this.reusableArraySegmentObject);if(a==null)return null;for(var l=this.inputBuffer,u,c=0,f=0;f<a.length;f++){var h=a.getInReversedOrder(f)-this.inputBufferStreamOffset,p=o-h,b=void 0;if(u===void 0?b=this.MinimumSequenceLength-1:u<128&&p>=128?b=c+(c>>>1):b=c,p>this.MaximumMatchDistance||b>=this.MaximumSequenceLength||o+b>=l.length)break;if(l[h+b]===l[o+b]){for(var y=0;;y++)if(o+y===l.length||l[h+y]!==l[o+y]){y>b&&(u=p,c=y);break}else if(y===this.MaximumSequenceLength)return{distance:p,length:this.MaximumSequenceLength}}}return u!==void 0?{distance:u,length:c}:null},i.prototype.getBucketIndexForPrefix=function(o){return(this.inputBuffer[o]*7880599+this.inputBuffer[o+1]*39601+this.inputBuffer[o+2]*199+this.inputBuffer[o+3])%this.PrefixHashTableSize},i.prototype.outputPointerBytes=function(o,s){s<128?(this.outputRawByte(192|o),this.outputRawByte(s)):(this.outputRawByte(224|o),this.outputRawByte(s>>>8),this.outputRawByte(s&255))},i.prototype.outputRawByte=function(o){this.outputBuffer[this.outputBufferPosition++]=o},i.prototype.cropAndAddNewBytesToInputBuffer=function(o){if(this.inputBuffer===void 0)return this.inputBuffer=o,0;var s=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),a=this.inputBuffer.length-s;return this.inputBuffer=n.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,a,s,o),this.inputBufferStreamOffset+=a,s},i}();n.Compressor=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(o*2),this.storage=new Uint32Array(o*2),this.storageIndex=1}return i.prototype.addValueToBucket=function(o,s){o<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var a=this.bucketLocators[o],l;if(a===0)a=this.storageIndex,l=1,this.storage[this.storageIndex]=s,this.storageIndex+=this.minimumBucketCapacity;else{l=this.bucketLocators[o+1],l===this.maximumBucketCapacity-1&&(l=this.truncateBucketToNewerElements(a,l,this.maximumBucketCapacity/2));var u=a+l;this.storage[u]===0?(this.storage[u]=s,u===this.storageIndex&&(this.storageIndex+=l)):(n.ArrayTools.copyElements(this.storage,a,this.storage,this.storageIndex,l),a=this.storageIndex,this.storageIndex+=l,this.storage[this.storageIndex++]=s,this.storageIndex+=l),l++}this.bucketLocators[o]=a,this.bucketLocators[o+1]=l},i.prototype.truncateBucketToNewerElements=function(o,s,a){var l=o+s-a;return n.ArrayTools.copyElements(this.storage,l,this.storage,o,a),n.ArrayTools.zeroElements(this.storage,o+a,s-a),a},i.prototype.compact=function(){var o=this.bucketLocators,s=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var a=0;a<o.length;a+=2){var l=o[a+1];l!==0&&(this.bucketLocators[a]=this.storageIndex,this.bucketLocators[a+1]=l,this.storageIndex+=Math.max(Math.min(l*2,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(this.storageIndex*8);for(var a=0;a<o.length;a+=2){var u=o[a];if(u!==0){var c=this.bucketLocators[a],f=this.bucketLocators[a+1];n.ArrayTools.copyElements(s,u,this.storage,c,f)}}},i.prototype.getArraySegmentForBucketIndex=function(o,s){o<<=1;var a=this.bucketLocators[o];return a===0?null:(s===void 0&&(s=new n.ArraySegment(this.storage,a,this.bucketLocators[o+1])),s)},i.prototype.getUsedBucketCount=function(){return Math.floor(n.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.bucketLocators.length;s+=2)o+=this.bucketLocators[s+1];return o},i}();n.CompressorCustomHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(o){this.maximumBucketCapacity=64,this.buckets=new Array(o)}return i.prototype.addValueToBucket=function(o,s){var a=this.buckets[o];a===void 0?this.buckets[o]=[s]:(a.length===this.maximumBucketCapacity-1&&n.ArrayTools.truncateStartingElements(a,this.maximumBucketCapacity/2),a.push(s))},i.prototype.getArraySegmentForBucketIndex=function(o,s){var a=this.buckets[o];return a===void 0?null:(s===void 0&&(s=new n.ArraySegment(a,0,a.length)),s)},i.prototype.getUsedBucketCount=function(){return n.ArrayTools.countNonzeroValuesInArray(this.buckets)},i.prototype.getTotalElementCount=function(){for(var o=0,s=0;s<this.buckets.length;s++)this.buckets[s]!==void 0&&(o+=this.buckets[s].length);return o},i}();n.CompressorSimpleHashTable=r})(t||(t={}));var t;(function(n){var r=function(){function i(){this.MaximumMatchDistance=32767,this.outputPosition=0}return i.prototype.decompressBlockToString=function(o){return o=n.BufferTools.convertToUint8ArrayIfNeeded(o),n.decodeUTF8(this.decompressBlock(o))},i.prototype.decompressBlock=function(o){this.inputBufferRemainder&&(o=n.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,o]),this.inputBufferRemainder=void 0);for(var s=this.cropOutputBufferToWindowAndInitialize(Math.max(o.length*4,1024)),a=0,l=o.length;a<l;a++){var u=o[a];if(u>>>6!=3){this.outputByte(u);continue}var c=u>>>5;if(a==l-1||a==l-2&&c==7){this.inputBufferRemainder=o.subarray(a);break}if(o[a+1]>>>7===1)this.outputByte(u);else{var f=u&31,h=void 0;c==6?(h=o[a+1],a+=1):(h=o[a+1]<<8|o[a+2],a+=2);for(var p=this.outputPosition-h,b=0;b<f;b++)this.outputByte(this.outputBuffer[p+b])}}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),n.CompressionCommon.getCroppedBuffer(this.outputBuffer,s,this.outputPosition-s)},i.prototype.outputByte=function(o){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=n.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=o},i.prototype.cropOutputBufferToWindowAndInitialize=function(o){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(o),0;var s=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=n.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-s,s,o),this.outputPosition=s,this.outputBufferRemainder){for(var a=0;a<this.outputBufferRemainder.length;a++)this.outputByte(this.outputBufferRemainder[a]);this.outputBufferRemainder=void 0}return s},i.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var o=1;o<=4&&this.outputPosition-o>=0;o++){var s=this.outputBuffer[this.outputPosition-o];if(o<4&&s>>>3===30||o<3&&s>>>4===14||o<2&&s>>>5===6){this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-o,this.outputPosition),this.outputPosition-=o;return}}},i}();n.Decompressor=r})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),s=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),a="=",l=61;i.encode=function(u){return!u||u.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(u).toString("base64"):i.encodeWithJS(u)},i.decode=function(u){return u?n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(u,"base64")):i.decodeWithJS(u):new Uint8Array(0)},i.encodeWithJS=function(u,c){if(c===void 0&&(c=!0),!u||u.length==0)return"";for(var f=o,h=new n.StringBuilder,p,b=0,y=u.length;b<y;b+=3)b<=y-3?(p=u[b]<<16|u[b+1]<<8|u[b+2],h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),h.appendCharCode(f[p>>>6&63]),h.appendCharCode(f[p&63]),p=0):b===y-2?(p=u[b]<<16|u[b+1]<<8,h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),h.appendCharCode(f[p>>>6&63]),c&&h.appendCharCode(l)):b===y-1&&(p=u[b]<<16,h.appendCharCode(f[p>>>18&63]),h.appendCharCode(f[p>>>12&63]),c&&(h.appendCharCode(l),h.appendCharCode(l)));return h.getOutputString()},i.decodeWithJS=function(u,c){if(!u||u.length==0)return new Uint8Array(0);var f=u.length%4;if(f===1)throw new Error("Invalid Base64 string: length % 4 == 1");f===2?u+=a+a:f===3&&(u+=a),c||(c=new Uint8Array(u.length));for(var h=0,p=u.length,b=0;b<p;b+=4){var y=s[u.charCodeAt(b)]<<18|s[u.charCodeAt(b+1)]<<12|s[u.charCodeAt(b+2)]<<6|s[u.charCodeAt(b+3)];c[h++]=y>>>16&255,c[h++]=y>>>8&255,c[h++]=y&255}return u.charCodeAt(p-1)==l&&h--,u.charCodeAt(p-2)==l&&h--,c.subarray(0,h)}})(r.Base64||(r.Base64={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){if(o==null)throw new TypeError("BinaryString.encode: undefined or null input received");if(o.length===0)return"";for(var s=o.length,a=new n.StringBuilder,l=0,u=1,c=0;c<s;c+=2){var f=void 0;c==s-1?f=o[c]<<8:f=o[c]<<8|o[c+1],a.appendCharCode(l<<16-u|f>>>u),l=f&(1<<u)-1,u===15?(a.appendCharCode(l),l=0,u=1):u+=1,c>=s-2&&a.appendCharCode(l<<16-u)}return a.appendCharCode(32768|s%2),a.getOutputString()},i.decode=function(o){if(typeof o!="string")throw new TypeError("BinaryString.decode: invalid input type");if(o=="")return new Uint8Array(0);for(var s=new Uint8Array(o.length*3),a=0,l=function(p){s[a++]=p>>>8,s[a++]=p&255},u=0,c=0,f=0;f<o.length;f++){var h=o.charCodeAt(f);if(h>=32768){h==32769&&a--,c=0;continue}c==0?u=h:(l(u<<c|h>>>15-c),u=h&(1<<15-c)-1),c==15?c=0:c+=1}return s.subarray(0,a)}})(r.BinaryString||(r.BinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encodeFromString=function(o,s){var a=o.charCodeAt(s);if(a<55296||a>56319)return a;var l=o.charCodeAt(s+1);if(l>=56320&&l<=57343)return 65536+((a-55296<<10)+(l-56320));throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code ".concat(a,", followed by ").concat(l,", which is not a trailing surrogate character code."))},i.decodeToString=function(o){if(o<=65535)return String.fromCharCode(o);if(o<=1114111)return String.fromCharCode(55296+(o-65536>>>10),56320+(o-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of ".concat(o," cannot be encoded in UTF-16"))}})(r.CodePoint||(r.CodePoint={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];i.encode=function(s){for(var a=[],l=0;l<s.length;l++)a.push(o[s[l]]);return a.join(" ")}})(r.DecimalString||(r.DecimalString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){i.encode=function(o){return r.BinaryString.encode(o).replace(/\0/g,"")},i.decode=function(o){return r.BinaryString.decode(o.replace(/\u8002/g,"\0"))}})(r.StorageBinaryString||(r.StorageBinaryString={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){(function(r){(function(i){var o,s;i.encode=function(a){return!a||a.length==0?new Uint8Array(0):n.runningInNodeJS()?n.BufferTools.bufferToUint8Array(Buffer.from(a,"utf8")):i.createNativeTextEncoderAndDecoderIfAvailable()?o.encode(a):i.encodeWithJS(a)},i.decode=function(a){return!a||a.length==0?"":n.runningInNodeJS()?n.BufferTools.uint8ArrayToBuffer(a).toString("utf8"):i.createNativeTextEncoderAndDecoderIfAvailable()?s.decode(a):i.decodeWithJS(a)},i.encodeWithJS=function(a,l){if(!a||a.length==0)return new Uint8Array(0);l||(l=new Uint8Array(a.length*4));for(var u=0,c=0;c<a.length;c++){var f=r.CodePoint.encodeFromString(a,c);if(f<=127)l[u++]=f;else if(f<=2047)l[u++]=192|f>>>6,l[u++]=128|f&63;else if(f<=65535)l[u++]=224|f>>>12,l[u++]=128|f>>>6&63,l[u++]=128|f&63;else if(f<=1114111)l[u++]=240|f>>>18,l[u++]=128|f>>>12&63,l[u++]=128|f>>>6&63,l[u++]=128|f&63,c++;else throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)")}return l.subarray(0,u)},i.decodeWithJS=function(a,l,u){if(l===void 0&&(l=0),!a||a.length==0)return"";u===void 0&&(u=a.length);for(var c=new n.StringBuilder,f,h,p=l,b=u;p<b;){if(h=a[p],!(h>>>7))f=h,p+=1;else if(h>>>5===6){if(p+1>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&31)<<6|a[p+1]&63,p+=2}else if(h>>>4===14){if(p+2>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&15)<<12|(a[p+1]&63)<<6|a[p+2]&63,p+=3}else if(h>>>3===30){if(p+3>=u)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+p);f=(h&7)<<18|(a[p+1]&63)<<12|(a[p+2]&63)<<6|a[p+3]&63,p+=4}else throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+p);c.appendCodePoint(f)}return c.getOutputString()},i.createNativeTextEncoderAndDecoderIfAvailable=function(){return o?!0:typeof TextEncoder=="function"?(o=new TextEncoder("utf-8"),s=new TextDecoder("utf-8"),!0):!1}})(r.UTF8||(r.UTF8={}))})(n.Encoding||(n.Encoding={}))})(t||(t={}));var t;(function(n){function r(m,v){if(v===void 0&&(v={}),m==null)throw new TypeError("compress: undefined or null input received");var w=n.CompressionCommon.detectCompressionSourceEncoding(m);v=n.ObjectTools.override({inputEncoding:w,outputEncoding:"ByteArray"},v);var S=new n.Compressor,k=S.compressBlock(m);return n.CompressionCommon.encodeCompressedBytes(k,v.outputEncoding)}n.compress=r;function i(m,v){if(v===void 0&&(v={}),m==null)throw new TypeError("decompress: undefined or null input received");v=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},v);var w=n.CompressionCommon.decodeCompressedBytes(m,v.inputEncoding),S=new n.Decompressor,k=S.decompressBlock(w);return n.CompressionCommon.encodeDecompressedBytes(k,v.outputEncoding)}n.decompress=i;function o(m,v,w){w==null&&(w=function(){});var S;try{S=n.CompressionCommon.detectCompressionSourceEncoding(m)}catch(k){w(void 0,k);return}v=n.ObjectTools.override({inputEncoding:S,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},v),n.enqueueImmediate(function(){v.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.compressAsync(m,v,w):n.AsyncCompressor.compressAsync(m,v,w)})}n.compressAsync=o;function s(m,v,w){if(w==null&&(w=function(){}),m==null){w(void 0,new TypeError("decompressAsync: undefined or null input received"));return}v=n.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},v);var S=n.BufferTools.convertToUint8ArrayIfNeeded(m);n.EventLoop.enqueueImmediate(function(){v.useWebWorker&&n.WebWorker.createGlobalWorkerIfNeeded()?n.WebWorker.decompressAsync(S,v,w):n.AsyncDecompressor.decompressAsync(m,v,w)})}n.decompressAsync=s;function a(){return n.AsyncCompressor.createCompressionStream()}n.createCompressionStream=a;function l(){return n.AsyncDecompressor.createDecompressionStream()}n.createDecompressionStream=l;function u(m){return n.Encoding.UTF8.encode(m)}n.encodeUTF8=u;function c(m){return n.Encoding.UTF8.decode(m)}n.decodeUTF8=c;function f(m){return n.Encoding.Base64.encode(m)}n.encodeBase64=f;function h(m){return n.Encoding.Base64.decode(m)}n.decodeBase64=h;function p(m){return n.Encoding.BinaryString.encode(m)}n.encodeBinaryString=p;function b(m){return n.Encoding.BinaryString.decode(m)}n.decodeBinaryString=b;function y(m){return n.Encoding.StorageBinaryString.encode(m)}n.encodeStorageBinaryString=y;function _(m){return n.Encoding.StorageBinaryString.decode(m)}n.decodeStorageBinaryString=_})(t||(t={}))})(V4);var Oee=V4.exports;const Ca=Os(Oee);function Z4(){const e=Ds(async()=>(await xt.systems.toArray()).filter(n=>!n.deleted_at),[]);return{systems:e||[],isLoading:e===void 0}}function eI(){const e=Ds(async()=>(await xt.characters.toArray()).filter(n=>!n.deleted_at),[]);return{characters:e||[],isLoading:e===void 0}}const tI=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string({invalid_type_error:"user_id must be a string"}),name:ct.string(),data:ct.object({}),system:ct.object({local_id:ct.string(),version_id:ct.string()}),created_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).optional()}),$ee=async(e,t,n)=>{try{const{user:r}=nr.get(),i=(r==null?void 0:r.id)||"none";let o=await Tr();for(;!await pa(o);)o=await Tr();const s={local_id:o,user_id:i,name:e,data:t,system:n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},a=tI.safeParse(s);if(!a.success){console.log("Invalid character data:",a.error.format());return}let l=await En.get("updated_characters")||[];return l.includes(s.local_id)||await En.set("updated_characters",[...l,s.local_id]),await xt.characters.add(s)}catch(r){console.log("Error creating character:",r)}},Mee=async(e,t)=>{try{let n=await En.get("updated_characters")||[];return n.includes(e)||await En.set("updated_characters",[...n,e]),await xt.characters.update(e,{name:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error renaming character:",n)}},Dee=async(e,t)=>{try{let n=await En.get("updated_characters")||[];return n.includes(e)||await En.set("updated_characters",[...n,e]),await xt.characters.update(e,{data:t,updated_at:new Date().toISOString()})}catch(n){console.log("Error updating character data:",n)}},Lee=async e=>{try{let t=await En.get("updated_characters")||[];return t.includes(e)||await En.set("updated_characters",[...t,e]),await xt.characters.update(e,{deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch(t){console.log("Error deleting character:",t)}},Bee=async e=>{try{let t=e.local_id||"deviceId-".concat(lT());if(await xt.characters.get({id:e.id||""})!==void 0){console.log("Character already exists in the database");return}if(await xt.characters.get({local_id:t})!==void 0){console.log("Character already exists in the database");return}if(!await xt.systems.get({local_id:e.system.local_id})){console.log("System not found in the database");return}const i={...e,updated_at:new Date().toISOString()};{const o=tI.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}}return await xt.characters.add(i)}catch(t){console.log("Error creating system:",t)}};var ao,Re=typeof window<"u"?window:void 0,si=typeof globalThis<"u"?globalThis:Re,nI=Array.prototype,pC=nI.forEach,gC=nI.indexOf,xi=si==null?void 0:si.navigator,vt=si==null?void 0:si.document,ri=si==null?void 0:si.location,Ab=si==null?void 0:si.fetch,Nb=si!=null&&si.XMLHttpRequest&&"withCredentials"in new si.XMLHttpRequest?si.XMLHttpRequest:void 0,mC=si==null?void 0:si.AbortController,ti=xi==null?void 0:xi.userAgent,Ft=Re!=null?Re:{},gs={DEBUG:!1,LIB_VERSION:"1.240.5"},vv="$copy_autocapture",Fee=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(e){e.GZipJS="gzip-js",e.Base64="base64"})(ao||(ao={}));var zee=["fatal","error","warning","log","info","debug"];function qt(e,t){return e.indexOf(t)!==-1}var hy=function(e){return e.trim()},Rb=function(e){return e.replace(/^\$/,"")},Hee=Array.isArray,rI=Object.prototype,iI=rI.hasOwnProperty,py=rI.toString,Mn=Hee||function(e){return py.call(e)==="[object Array]"},Ui=e=>typeof e=="function",Dn=e=>e===Object(e)&&!Mn(e),fu=e=>{if(Dn(e)){for(var t in e)if(iI.call(e,t))return!1;return!0}return!1},pt=e=>e===void 0,Gn=e=>py.call(e)=="[object String]",Tb=e=>Gn(e)&&e.trim().length===0,$a=e=>e===null,on=e=>pt(e)||$a(e),Ir=e=>py.call(e)=="[object Number]",ws=e=>py.call(e)==="[object Boolean]",Uee=e=>e instanceof FormData,Wee=e=>qt(Fee,e),oI=e=>{var t={t:function(n){if(Re&&(gs.DEBUG||Ft.POSTHOG_DEBUG)&&!pt(Re.console)&&Re.console){for(var r=("__rrweb_original__"in Re.console[n])?Re.console[n].__rrweb_original__:Re.console[n],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];r(e,...o)}},info:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.t("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];console.error(e,...r)},uninitializedWarning:n=>{t.error("You must initialize PostHog before calling "+n)},createLogger:n=>oI(e+" "+n)};return t},St=oI("[PostHog.js]"),Fr=St.createLogger,Vee=Fr("[ExternalScriptsLoader]"),yC=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return Vee.warn(t+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=vt==null?void 0:vt.querySelectorAll("script");if(r){for(var i=0;i<r.length;i++)if(r[i].src===t)return n()}var o=()=>{if(!vt)return n("document not found");var s=vt.createElement("script");if(s.type="text/javascript",s.crossOrigin="anonymous",s.src=t,s.onload=u=>n(void 0,u),s.onerror=u=>n(u),e.config.prepare_external_dependency_script&&(s=e.config.prepare_external_dependency_script(s)),!s)return n("prepare_external_dependency_script returned null");var a,l=vt.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(s,l[0]):vt.body.appendChild(s)};vt!=null&&vt.body?o():vt==null||vt.addEventListener("DOMContentLoaded",o)};function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}function sI(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Ft.__PosthogExtensions__=Ft.__PosthogExtensions__||{},Ft.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{var r="/static/"+t+".js?v="+e.version;if(t==="remote-config"&&(r="/array/"+e.config.token+"/config.js"),t==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var o=e.requestRouter.endpointFor("assets",r);yC(e,o,n)},Ft.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{var r=e.requestRouter.endpointFor("api",t);yC(e,r,n)};var Hg={};function ga(e,t,n){if(Mn(e)){if(pC&&e.forEach===pC)e.forEach(t,n);else if("length"in e&&e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===Hg)return}}}function cn(e,t,n){if(!on(e)){if(Mn(e))return ga(e,t,n);if(Uee(e)){for(var r of e.entries())if(t.call(n,r[1],r[0])===Hg)return}else for(var i in e)if(iI.call(e,i)&&t.call(n,e[i],i)===Hg)return}}var Vn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ga(n,function(i){for(var o in i)i[o]!==void 0&&(e[o]=i[o])}),e},gy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ga(n,function(i){ga(i,function(o){e.push(o)})}),e};function Rp(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var vC=function(e){try{return e()}catch(t){return}},qee=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(i){St.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),St.critical(i)}}},r1=function(e){var t={};return cn(e,function(n,r){(Gn(n)&&n.length>0||Ir(n))&&(t[r]=n)}),t};function Kee(e,t){return n=e,r=o=>Gn(o)&&!$a(t)?o.slice(0,t):o,i=new Set,function o(s,a){return s!==Object(s)?r?r(s,a):s:i.has(s)?void 0:(i.add(s),Mn(s)?(l=[],ga(s,u=>{l.push(o(u))})):(l={},cn(s,(u,c)=>{i.has(u)||(l[c]=o(u,c))})),l);var l}(n);var n,r,i}var Gee=["herokuapp.com","vercel.app","netlify.app"];function Yee(e){var t=e==null?void 0:e.hostname;if(!Gn(t))return!1;var n=t.split(".").slice(-2).join(".");for(var r of Gee)if(n===r)return!1;return!0}function aI(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function jn(e,t,n,r){var{capture:i=!1,passive:o=!0}=r!=null?r:{};e==null||e.addEventListener(t,n,{capture:i,passive:o})}var lI="$people_distinct_id",nd="__alias",rd="__timers",wC="$autocapture_disabled_server_side",Ib="$heatmaps_enabled_server_side",bC="$exception_capture_enabled_server_side",_C="$web_vitals_enabled_server_side",uI="$dead_clicks_enabled_server_side",xC="$web_vitals_allowed_metrics",Pb="$session_recording_enabled_server_side",SC="$console_log_recording_enabled_server_side",EC="$session_recording_network_payload_capture",kC="$session_recording_masking",CC="$session_recording_canvas_recording",jC="$replay_sample_rate",AC="$replay_minimum_duration",NC="$replay_script_config",Ug="$sesid",id="$session_is_sampled",Ob="$session_recording_url_trigger_activated_session",$b="$session_recording_event_trigger_activated_session",hu="$enabled_feature_flags",Tp="$early_access_features",Mb="$feature_flag_details",od="$stored_person_properties",Qa="$stored_group_properties",Db="$surveys",Jh="$surveys_activated",Wg="$flag_call_reported",ls="$user_state",Lb="$client_session_props",Bb="$capture_rate_limit",Fb="$initial_campaign_params",zb="$initial_referrer_info",Hb="$initial_person_info",Vg="$epp",cI="__POSTHOG_TOOLBAR__",RC="$posthog_cookieless",Xee=[lI,nd,"__cmpns",rd,Pb,Ib,Ug,hu,ls,Tp,Mb,Qa,od,Db,Wg,Lb,Bb,Fb,zb,Vg];function TC(e){return e instanceof Element&&(e.id===cI||!(e.closest==null||!e.closest(".toolbar-global-fade-container")))}function my(e){return!!e&&e.nodeType===1}function ma(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function dI(e){return!!e&&e.nodeType===3}function fI(e){return!!e&&e.nodeType===11}function i1(e){return e?hy(e).split(/\s+/):[]}function IC(e){var t=Re==null?void 0:Re.location.href;return!!(t&&e&&e.some(n=>t.match(n)))}function qg(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return i1(t)}function hI(e){return on(e)?null:hy(e).split(/(\s+)/).filter(t=>Gu(t)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function yy(e){var t="";return Wb(e)&&!mI(e)&&e.childNodes&&e.childNodes.length&&cn(e.childNodes,function(n){var r;dI(n)&&n.textContent&&(t+=(r=hI(n.textContent))!==null&&r!==void 0?r:"")}),hy(t)}function pI(e){return pt(e.target)?e.srcElement||null:(t=e.target)!=null&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var Ub=["a","button","form","input","select","textarea","label"];function gI(e){var t=e.parentNode;return!(!t||!my(t))&&t}function Jee(e,t,n,r,i){var o,s,a;if(n===void 0&&(n=void 0),!Re||!e||ma(e,"html")||!my(e)||(o=n)!=null&&o.url_allowlist&&!IC(n.url_allowlist)||(s=n)!=null&&s.url_ignorelist&&IC(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(_=>t.type===_))return!1}for(var u=!1,c=[e],f=!0,h=e;h.parentNode&&!ma(h,"body");)if(fI(h.parentNode))c.push(h.parentNode.host),h=h.parentNode.host;else{if(!(f=gI(h)))break;if(r||Ub.indexOf(f.tagName.toLowerCase())>-1)u=!0;else{var p=Re.getComputedStyle(f);p&&p.getPropertyValue("cursor")==="pointer"&&(u=!0)}c.push(f),h=f}if(!function(_,m){var v=m==null?void 0:m.element_allowlist;if(pt(v))return!0;var w=function(A){if(v.some(T=>A.tagName.toLowerCase()===T))return{v:!0}};for(var S of _){var k=w(S);if(typeof k=="object")return k.v}return!1}(c,n)||!function(_,m){var v=m==null?void 0:m.css_selector_allowlist;if(pt(v))return!0;var w=function(A){if(v.some(T=>A.matches(T)))return{v:!0}};for(var S of _){var k=w(S);if(typeof k=="object")return k.v}return!1}(c,n))return!1;var b=Re.getComputedStyle(e);if(b&&b.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var y=e.tagName.toLowerCase();switch(y){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Ub.indexOf(y)>-1||e.getAttribute("contenteditable")==="true")}}function Wb(e){for(var t=e;t.parentNode&&!ma(t,"body");t=t.parentNode){var n=qg(t);if(qt(n,"ph-sensitive")||qt(n,"ph-no-capture"))return!1}if(qt(qg(e),"ph-include"))return!0;var r=e.type||"";if(Gn(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!(Gn(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function mI(e){return!!(ma(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||ma(e,"select")||ma(e,"textarea")||e.getAttribute("contenteditable")==="true")}var yI="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Qee=new RegExp("^(?:"+yI+")$"),Zee=new RegExp(yI),vI="\\d{3}-?\\d{2}-?\\d{4}",ete=new RegExp("^("+vI+")$"),tte=new RegExp("("+vI+")");function Gu(e,t){return t===void 0&&(t=!0),!(on(e)||Gn(e)&&(e=hy(e),(t?Qee:Zee).test((e||"").replace(/[- ]/g,""))||(t?ete:tte).test(e)))}function wI(e){var t=yy(e);return Gu(t=(t+" "+bI(e)).trim())?t:""}function bI(e){var t="";return e&&e.childNodes&&e.childNodes.length&&cn(e.childNodes,function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=yy(n);t=(t+" "+i).trim(),n.childNodes&&n.childNodes.length&&(t=(t+" "+bI(n)).trim())}catch(o){St.error("[AutoCapture]",o)}}),t}function nte(e){return function(t){var n=t.map(r=>{var i,o,s="";if(r.tag_name&&(s+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))s+="."+a.replace(/"/g,"");var l=mt({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(o=r.nth_of_type)!==null&&o!==void 0?o:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return Rp(l).sort((c,f)=>{var[h]=c,[p]=f;return h.localeCompare(p)}).forEach(c=>{var[f,h]=c;return u[PC(f.toString())]=PC(h.toString())}),s+=":",s+=Rp(l).map(c=>{var[f,h]=c;return f+'="'+h+'"'}).join("")});return n.join(";")}(function(t){return t.map(n=>{var r,i,o={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)==null?void 0:i.slice(0,2048),attr_class:rte(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Rp(n).filter(s=>{var[a]=s;return a.indexOf("attr__")===0}).forEach(s=>{var[a,l]=s;return o.attributes[a]=l}),o})}(e))}function PC(e){return e.replace(/"|\\"/g,'\\"')}function rte(e){var t=e.attr__class;return t?Mn(t)?t:i1(t):void 0}class _I{constructor(){this.clicks=[]}isRageClick(t,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(t-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:t,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:t,y:n,timestamp:r}];return!1}}var ite=["localhost","127.0.0.1"],Yu=e=>{var t=vt==null?void 0:vt.createElement("a");return pt(t)?null:(t.href=e,t)},ote=function(e,t){var n,r;t===void 0&&(t="&");var i=[];return cn(e,function(o,s){pt(o)||pt(s)||s==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(o)?o.name:o.toString()),r=encodeURIComponent(s),i[i.length]=r+"="+n)}),i.join(t)},Kg=function(e,t){for(var n,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t){n=o;break}}if(!Mn(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch(a){St.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},o1=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),i=r[0]||"",o=r[1],s=i.split("?"),a=s[1],l=s[0],u=(a||"").split("&"),c=[],f=0;f<u.length;f++){var h=u[f].split("=");Mn(h)&&(t.includes(h[0])?c.push(h[0]+"="+n):c.push(u[f]))}var p=l;return a!=null&&(p+="?"+c.join("&")),o!=null&&(p+="#"+o),p},Gg=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},OC=Fr("[AutoCapture]");function wv(e,t){return t.length>e?t.slice(0,e)+"...":t}function ste(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!my(t));return t}function ate(e,t,n,r){var i=e.tagName.toLowerCase(),o={tag_name:i};Ub.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?o.$el_text=wv(1024,wI(e)):o.$el_text=wv(1024,yy(e)));var s=qg(e);s.length>0&&(o.classes=s.filter(function(c){return c!==""})),cn(e.attributes,function(c){var f;if((!mI(e)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(r==null||!r.includes(c.name))&&!t&&Gu(c.value)&&(f=c.name,!Gn(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var h=c.value;c.name==="class"&&(h=i1(h).join(" ")),o["attr__"+c.name]=wv(1024,h)}});for(var a=1,l=1,u=e;u=ste(u);)a++,u.tagName===e.tagName&&l++;return o.nth_child=a,o.nth_of_type=l,o}function lte(e,t){for(var n,r,{e:i,maskAllElementAttributes:o,maskAllText:s,elementAttributeIgnoreList:a,elementsChainAsString:l}=t,u=[e],c=e;c.parentNode&&!ma(c,"body");)fI(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var f,h=[],p={},b=!1,y=!1;if(cn(u,S=>{var k=Wb(S);S.tagName.toLowerCase()==="a"&&(b=S.getAttribute("href"),b=k&&b&&Gu(b)&&b),qt(qg(S),"ph-no-capture")&&(y=!0),h.push(ate(S,o,s,a));var A=function(T){if(!Wb(T))return{};var P={};return cn(T.attributes,function(Y){if(Y.name&&Y.name.indexOf("data-ph-capture-attribute")===0){var D=Y.name.replace("data-ph-capture-attribute-",""),H=Y.value;D&&H&&Gu(H)&&(P[D]=H)}}),P}(S);Vn(p,A)}),y)return{props:{},explicitNoCapture:y};if(s||(e.tagName.toLowerCase()==="a"||e.tagName.toLowerCase()==="button"?h[0].$el_text=wI(e):h[0].$el_text=yy(e)),b){var _,m;h[0].attr__href=b;var v=(_=Yu(b))==null?void 0:_.host,w=Re==null||(m=Re.location)==null?void 0:m.host;v&&w&&v!==w&&(f=b)}return{props:Vn({$event_type:i.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:nte(h)},(n=h[0])!=null&&n.$el_text?{$el_text:(r=h[0])==null?void 0:r.$el_text}:{},f&&i.type==="click"?{$external_click_url:f}:{},p)}}class ute{constructor(t){this.i=!1,this.o=null,this.rageclicks=new _I,this.h=!1,this.instance=t,this.m=null}get S(){var t,n,r=Dn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(t=r.url_allowlist)==null?void 0:t.map(i=>new RegExp(i)),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map(i=>new RegExp(i)),r}$(){if(this.isBrowserSupported()){if(Re&&vt){var t=r=>{r=r||(Re==null?void 0:Re.event);try{this.k(r)}catch(i){OC.error("Failed to capture event",i)}};if(jn(vt,"submit",t,{capture:!0}),jn(vt,"change",t,{capture:!0}),jn(vt,"click",t,{capture:!0}),this.S.capture_copied_text){var n=r=>{r=r||(Re==null?void 0:Re.event),this.k(r,vv)};jn(vt,"copy",n,{capture:!0}),jn(vt,"cut",n,{capture:!0})}}}else OC.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.h=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[wC]:!!t.autocapture_opt_out}),this.o=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.m=t}getElementSelectors(t){var n,r=[];return(n=this.m)==null||n.forEach(i=>{var o=vt==null?void 0:vt.querySelectorAll(i);o==null||o.forEach(s=>{t===s&&r.push(i)})}),r}get isEnabled(){var t,n,r=(t=this.instance.persistence)==null?void 0:t.props[wC],i=this.o;if($a(i)&&!ws(r)&&!this.instance.config.advanced_disable_decide)return!1;var o=(n=this.o)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!o}k(t,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,i=pI(t);dI(i)&&(i=i.parentNode||null),n==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.k(t,"$rageclick");var o=n===vv;if(i&&Jee(i,t,this.S,o,o?["copy","cut"]:void 0)){var{props:s,explicitNoCapture:a}=lte(i,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(s.$element_selectors=l),n===vv){var u,c=hI(Re==null||(u=Re.getSelection())==null?void 0:u.toString()),f=t.type||"clipboard";if(!c)return!1;s.$selected_content=c,s.$copy_type=f}return this.instance.capture(n,s),!0}}}isBrowserSupported(){return Ui(vt==null?void 0:vt.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Ir(e)&&isFinite(e)&&Math.floor(e)===e});var $C="0123456789abcdef";class Yg{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=t/Math.pow(2,40),o[1]=t/Math.pow(2,32),o[2]=t/Math.pow(2,24),o[3]=t/Math.pow(2,16),o[4]=t/Math.pow(2,8),o[5]=t,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new Yg(o)}toString(){for(var t="",n=0;n<this.bytes.length;n++)t=t+$C.charAt(this.bytes[n]>>>4)+$C.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new Yg(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(var n=0;n<16;n++){var r=this.bytes[n]-t.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class cte{constructor(){this.I=0,this.P=0,this.R=new dte}generate(){var t=this.generateOrAbort();if(pt(t)){this.I=0;var n=this.generateOrAbort();if(pt(n))throw new Error("Could not generate UUID after timestamp reset");return n}return t}generateOrAbort(){var t=Date.now();if(t>this.I)this.I=t,this.T();else{if(!(t+1e4>this.I))return;this.P++,this.P>4398046511103&&(this.I++,this.T())}return Yg.fromFieldsV7(this.I,Math.trunc(this.P/Math.pow(2,30)),this.P&Math.pow(2,30)-1,this.R.nextUint32())}T(){this.P=1024*this.R.nextUint32()+(1023&this.R.nextUint32())}}var MC,xI=e=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};Re&&!pt(Re.crypto)&&crypto.getRandomValues&&(xI=e=>crypto.getRandomValues(e));class dte{constructor(){this.M=new Uint32Array(8),this.C=1/0}nextUint32(){return this.C>=this.M.length&&(xI(this.M),this.C=0),this.M[this.C++]}}var ia=()=>fte().toString(),fte=()=>(MC||(MC=new cte)).generate(),hte="Thu, 01 Jan 1970 00:00:00 GMT",Fc="",pte=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function gte(e,t){if(t){var n=function(i,o){if(o===void 0&&(o=vt),Fc)return Fc;if(!o||["localhost","127.0.0.1"].includes(i))return"";for(var s=i.split("."),a=Math.min(s.length,8),l="dmn_chk_"+ia(),u=new RegExp("(^|;)\\s*"+l+"=1");!Fc&&a--;){var c=s.slice(a).join("."),f=l+"=1;domain=."+c;o.cookie=f,u.test(o.cookie)&&(o.cookie=f+";expires="+hte,Fc=c)}return Fc}(e);if(!n){var r=(i=>{var o=i.match(pte);return o?o[0]:""})(e);r!==n&&St.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var Qs,Es={O:()=>!!vt,F:function(e){St.error("cookieStore error: "+e)},A:function(e){if(vt){try{for(var t=e+"=",n=vt.cookie.split(";").filter(o=>o.length),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return decodeURIComponent(i.substring(t.length,i.length))}}catch(o){}return null}},D:function(e){var t;try{t=JSON.parse(Es.A(e))||{}}catch(n){}return t},j:function(e,t,n,r,i){if(vt)try{var o="",s="",a=gte(vt.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),o="; expires="+l.toUTCString()}i&&(s="; secure");var u=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return u.length>3686.4&&St.warn("cookieStore warning: large cookie, len="+u.length),vt.cookie=u,u}catch(c){return}},L:function(e,t){try{Es.j(e,"",-1,t)}catch(n){return}}},bv=null,Zn={O:function(){if(!$a(bv))return bv;var e=!0;if(pt(Re))e=!1;else try{var t="__mplssupport__";Zn.j(t,"xyz"),Zn.A(t)!=='"xyz"'&&(e=!1),Zn.L(t)}catch(n){e=!1}return e||St.error("localStorage unsupported; falling back to cookie store"),bv=e,e},F:function(e){St.error("localStorage error: "+e)},A:function(e){try{return Re==null?void 0:Re.localStorage.getItem(e)}catch(t){Zn.F(t)}return null},D:function(e){try{return JSON.parse(Zn.A(e))||{}}catch(t){}return null},j:function(e,t){try{Re==null||Re.localStorage.setItem(e,JSON.stringify(t))}catch(n){Zn.F(n)}},L:function(e){try{Re==null||Re.localStorage.removeItem(e)}catch(t){Zn.F(t)}}},mte=["distinct_id",Ug,id,Vg,Hb],Qh=mt({},Zn,{D:function(e){try{var t={};try{t=Es.D(e)||{}}catch(r){}var n=Vn(t,JSON.parse(Zn.A(e)||"{}"));return Zn.j(e,n),n}catch(r){}return null},j:function(e,t,n,r,i,o){try{Zn.j(e,t,void 0,void 0,o);var s={};mte.forEach(a=>{t[a]&&(s[a]=t[a])}),Object.keys(s).length&&Es.j(e,s,n,r,i,o)}catch(a){Zn.F(a)}},L:function(e,t){try{Re==null||Re.localStorage.removeItem(e),Es.L(e,t)}catch(n){Zn.F(n)}}}),Zh={},yte={O:function(){return!0},F:function(e){St.error("memoryStorage error: "+e)},A:function(e){return Zh[e]||null},D:function(e){return Zh[e]||null},j:function(e,t){Zh[e]=t},L:function(e){delete Zh[e]}},Ua=null,pr={O:function(){if(!$a(Ua))return Ua;if(Ua=!0,pt(Re))Ua=!1;else try{var e="__support__";pr.j(e,"xyz"),pr.A(e)!=='"xyz"'&&(Ua=!1),pr.L(e)}catch(t){Ua=!1}return Ua},F:function(e){St.error("sessionStorage error: ",e)},A:function(e){try{return Re==null?void 0:Re.sessionStorage.getItem(e)}catch(t){pr.F(t)}return null},D:function(e){try{return JSON.parse(pr.A(e))||null}catch(t){}return null},j:function(e,t){try{Re==null||Re.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){pr.F(n)}},L:function(e){try{Re==null||Re.sessionStorage.removeItem(e)}catch(t){pr.F(t)}}};(function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"})(Qs||(Qs={}));class vte{constructor(t){this._instance=t}get S(){return this._instance.config}get consent(){return this.N()?Qs.DENIED:this.U}isOptedOut(){return this.consent===Qs.DENIED||this.consent===Qs.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.q.j(this.B,t?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.q.L(this.B,this.S.cross_subdomain_cookie)}get B(){var{token:t,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+t}get U(){var t=this.q.A(this.B);return t==="1"?Qs.GRANTED:t==="0"?Qs.DENIED:Qs.PENDING}get q(){if(!this.H){var t=this.S.opt_out_capturing_persistence_type;this.H=t==="localStorage"?Zn:Es;var n=t==="localStorage"?Es:Zn;n.A(this.B)&&(this.H.A(this.B)||this.optInOut(n.A(this.B)==="1"),n.L(this.B,this.S.cross_subdomain_cookie))}return this.H}N(){return!!this.S.respect_dnt&&!!aI([xi==null?void 0:xi.doNotTrack,xi==null?void 0:xi.msDoNotTrack,Ft.doNotTrack],t=>qt([!0,1,"1","yes"],t))}}var ep=Fr("[Dead Clicks]"),wte=()=>!0,bte=e=>{var t,n=!((t=e.instance.persistence)==null||!t.get_property(uI)),r=e.instance.config.capture_dead_clicks;return ws(r)?r:n};class SI{get lazyLoadedDeadClicksAutocapture(){return this.W}constructor(t,n,r){this.instance=t,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[uI]:t==null?void 0:t.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.G(()=>{this.J()})}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",i=>{i?ep.error("failed to load script",i):t()})}J(){var t;if(vt){if(!this.W&&(t=Ft.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture){var n=Dn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.W=Ft.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.W.start(vt),ep.info("starting...")}}else ep.error("`document` not found. Cannot start.")}stop(){this.W&&(this.W.stop(),this.W=void 0,ep.info("stopping..."))}}var _v=Fr("[ExceptionAutocapture]");class _te{constructor(t){var n;this.V=()=>{var r;if(Re&&this.isEnabled&&(r=Ft.__PosthogExtensions__)!=null&&r.errorWrappingFunctions){var i=Ft.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=Ft.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,s=Ft.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.K&&this.S.capture_unhandled_errors&&(this.K=i(this.captureException.bind(this))),!this.Y&&this.S.capture_unhandled_rejections&&(this.Y=o(this.captureException.bind(this))),!this.X&&this.S.capture_console_errors&&(this.X=s(this.captureException.bind(this)))}catch(a){_v.error("failed to start",a),this.Z()}}},this._instance=t,this.tt=!((n=this._instance.persistence)==null||!n.props[bC]),this.S=this.it(),this.startIfEnabled()}it(){var t=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Dn(t)?n=mt({},n,t):(pt(t)?this.tt:t)&&(n=mt({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(_v.info("enabled"),this.G(this.V))}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",i=>{if(i)return _v.error("failed to load script",i);t()})}Z(){var t,n,r;(t=this.K)==null||t.call(this),this.K=void 0,(n=this.Y)==null||n.call(this),this.Y=void 0,(r=this.X)==null||r.call(this),this.X=void 0}onRemoteConfig(t){var n=t.autocaptureExceptions;this.tt=!!n||!1,this.S=this.it(),this._instance.persistence&&this._instance.persistence.register({[bC]:this.tt}),this.startIfEnabled()}captureException(t){var n=this._instance.requestRouter.endpointFor("ui");t.$exception_personURL=n+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id(),this._instance.exceptions.sendExceptionEvent(t)}}function EI(e){return!pt(Event)&&kI(e,Event)}function kI(e,t){try{return e instanceof t}catch(n){return!1}}function CI(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return kI(e,Error)}}function Ip(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function xv(e){return Ip(e,"DOMError")}var DC=/\(error: (.*)\)/,LC=50,pu="?";function Sv(e,t,n,r){var i={platform:"web:javascript",filename:e,function:t==="<anonymous>"?pu:t,in_app:!0};return pt(n)||(i.lineno=n),pt(r)||(i.colno=r),i}var xte=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ste=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ete=/\((\S*)(?::(\d+))(?::(\d+))\)/,kte=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Cte=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,jte=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.sort((i,o)=>i[0]-o[0]).map(i=>i[1]);return function(i,o){o===void 0&&(o=0);for(var s=[],a=i.split("\n"),l=o;l<a.length;l++){var u=a[l];if(!(u.length>1024)){var c=DC.test(u)?u.replace(DC,"$1"):u;if(!c.match(/\S*Error: /)){for(var f of r){var h=f(c);if(h){s.push(h);break}}if(s.length>=LC)break}}}return function(p){if(!p.length)return[];var b=Array.from(p);return b.reverse(),b.slice(0,LC).map(y=>mt({},y,{filename:y.filename||Ate(b).filename,function:y.function||pu}))}(s)}}([30,e=>{var t=xte.exec(e);if(t){var[,n,r,i]=t;return Sv(n,pu,+r,+i)}var o=Ste.exec(e);if(o){if(o[2]&&o[2].indexOf("eval")===0){var s=Ete.exec(o[2]);s&&(o[2]=s[1],o[3]=s[2],o[4]=s[3])}var[a,l]=FC(o[1]||pu,o[2]);return Sv(l,a,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}}],[50,e=>{var t=kte.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=Cte.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],i=t[1]||pu;return[i,r]=FC(i,r),Sv(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]);function Ate(e){return e[e.length-1]||{}}var tp,BC,Ev,FC=(e,t)=>{var n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:pu,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},Nte=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function s1(e,t){t===void 0&&(t=0);var n=e.stacktrace||e.stack||"",r=function(s){return s&&Rte.test(s.message)?1:0}(e);try{var i=jte,o=function(s,a){var l=function(u){var c=globalThis._posthogChunkIds;if(!c)return{};var f=Object.keys(c);return Ev&&f.length===BC||(BC=f.length,Ev=f.reduce((h,p)=>{tp||(tp={});var b=tp[p];if(b)h[b[0]]=b[1];else for(var y=u(p),_=y.length-1;_>=0;_--){var m=y[_],v=m==null?void 0:m.filename,w=c[p];if(v&&w){h[v]=w,tp[p]=[v,w];break}}return h},{})),Ev}(a);return s.forEach(u=>{u.filename&&(u.chunk_id=l[u.filename])}),s}(i(n,r),i);return o.slice(0,o.length-t)}catch(s){}return[]}var Rte=/Minified React error #\d+;/i;function Tte(e,t){var n,r,i=s1(e),o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)!==null&&r!==void 0&&r;return{type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:e.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(e),stacktrace:{frames:i,type:"raw"},mechanism:{handled:o,synthetic:s}}}function jI(e,t){var n=Tte(e,t);return e.cause&&CI(e.cause)&&e.cause!==e?[n,...jI(e.cause,{handled:t==null?void 0:t.handled,synthetic:t==null?void 0:t.synthetic})]:[n]}function kv(e,t){return{$exception_list:jI(e,t),$exception_level:"error"}}function Cv(e,t){var n,r,i,o=(n=t==null?void 0:t.handled)===null||n===void 0||n,s=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,a={type:t!=null&&t.overrideExceptionType?t.overrideExceptionType:(i=t==null?void 0:t.defaultExceptionType)!==null&&i!==void 0?i:"Error",value:e||(t==null?void 0:t.defaultExceptionMessage),mechanism:{handled:o,synthetic:s}};if(t!=null&&t.syntheticException){var l=s1(t.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function Ite(e){return Gn(e)&&!Tb(e)&&zee.indexOf(e)>=0}function Pte(e,t){var n,r,i=(n=t==null?void 0:t.handled)===null||n===void 0||n,o=(r=t==null?void 0:t.synthetic)===null||r===void 0||r,s=t!=null&&t.overrideExceptionType?t.overrideExceptionType:EI(e)?e.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(c,f){f===void 0&&(f=40);var h=Object.keys(c);if(h.sort(),!h.length)return"[object has no keys]";for(var p=h.length;p>0;p--){var b=h.slice(0,p).join(", ");if(!(b.length>f))return p===h.length||b.length<=f?b:b.slice(0,f)+"..."}return""}(e),l={type:s,value:a,mechanism:{handled:i,synthetic:o}};if(t!=null&&t.syntheticException){var u=s1(t==null?void 0:t.syntheticException,1);u.length&&(l.stacktrace={frames:u,type:"raw"})}return{$exception_list:[l],$exception_level:Ite(e.level)?e.level:"error"}}function Ote(e,t){var{error:n,event:r}=e,i={$exception_list:[]},o=n||r;if(xv(o)||function(h){return Ip(h,"DOMException")}(o)){var s=o;if(function(h){return"stack"in h}(o))i=kv(o,t);else{var a=s.name||(xv(s)?"DOMError":"DOMException"),l=s.message?a+": "+s.message:a;i=Cv(l,mt({},t,{overrideExceptionType:xv(s)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in s&&(i.$exception_DOMException_code=""+s.code),i}if(function(h){return Ip(h,"ErrorEvent")}(o)&&o.error)return kv(o.error,t);if(CI(o))return kv(o,t);if(function(h){return Ip(h,"Object")}(o)||EI(o))return Pte(o,t);if(pt(n)&&Gn(r)){var u="Error",c=r,f=r.match(Nte);return f&&(u=f[1],c=f[2]),Cv(c,mt({},t,{overrideExceptionType:u,defaultExceptionMessage:c}))}return Cv(o,t)}function zC(e,t,n){try{if(!(t in e))return()=>{};var r=e[t],i=n(r);return Ui(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,()=>{e[t]=r}}catch(o){return()=>{}}}class $te{constructor(t){var n;this._instance=t,this.et=(Re==null||(n=Re.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(St.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.rt&&this.rt(),this.rt=void 0,St.info("History API monitoring stopped")}monitorHistoryChanges(){var t,n;if(Re&&Re.history){var r=this;(t=Re.history.pushState)!=null&&t.__posthog_wrapped__||zC(Re.history,"pushState",i=>function(o,s,a){i.call(this,o,s,a),r.st("pushState")}),(n=Re.history.replaceState)!=null&&n.__posthog_wrapped__||zC(Re.history,"replaceState",i=>function(o,s,a){i.call(this,o,s,a),r.st("replaceState")}),this.nt()}}st(t){try{var n,r=Re==null||(n=Re.location)==null?void 0:n.pathname;if(!r)return;r!==this.et&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:t}),this.et=r}catch(i){St.error("Error capturing "+t+" pageview",i)}}nt(){if(!this.rt){var t=()=>{this.st("popstate")};jn(Re,"popstate",t),this.rt=()=>{Re&&Re.removeEventListener("popstate",t)}}}}function Xg(e){var t,n;return((t=JSON.stringify(e,(n=[],function(r,i){if(Dn(i)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(i)?"[Circular]":(n.push(i),i)}return i})))==null?void 0:t.length)||0}function Vb(e,t){if(t===void 0&&(t=66060288e-1),e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[Vb({size:Xg(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),Vb({size:Xg(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap(o=>o)}return[e]}var us=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(us||{}),to=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(to||{}),qb="[SessionRecording]",Kb="redacted",np={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},Mte=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Dte=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Lte=["/s/","/e/","/i/"];function HC(e,t,n,r){if(on(e))return e;var i=(t==null?void 0:t["content-length"])||function(o){return new Blob([o]).size}(e);return Gn(i)&&(i=parseInt(i)),i>n?qb+" "+r+" body too large to record ("+i+" bytes)":e}function UC(e,t){if(on(e))return e;var n=e;return Gu(n,!1)||(n=qb+" "+t+" body "+Kb),cn(Dte,r=>{var i,o;(i=n)!=null&&i.length&&((o=n)==null?void 0:o.indexOf(r))!==-1&&(n=qb+" "+t+" body "+Kb+" as might contain: "+r)}),n}var Bte=(e,t)=>{var n,r,i,o={payloadSizeLimitBytes:np.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...np.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...np.payloadHostDenyList]},s=e.session_recording.recordHeaders!==!1&&t.recordHeaders,a=e.session_recording.recordBody!==!1&&t.recordBody,l=e.capture_performance!==!1&&t.recordPerformance,u=(n=o,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=HC(h.requestBody,h.requestHeaders,i,"Request")),h!=null&&h.responseBody&&(h.responseBody=HC(h.responseBody,h.responseHeaders,i,"Response")),h)),c=h=>{return u(((y,_)=>{var m,v=Yu(y.name),w=_.indexOf("http")===0?(m=Yu(_))==null?void 0:m.pathname:_;w==="/"&&(w="");var S=v==null?void 0:v.pathname.replace(w||"","");if(!(v&&S&&Lte.some(k=>S.indexOf(k)===0)))return y})((b=(p=h).requestHeaders,on(b)||cn(Object.keys(b!=null?b:{}),y=>{Mte.includes(y.toLowerCase())&&(b[y]=Kb)}),p),e.api_host));var p,b},f=Ui(e.session_recording.maskNetworkRequestFn);return f&&Ui(e.session_recording.maskCapturedNetworkRequestFn)&&St.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(e.session_recording.maskCapturedNetworkRequestFn=h=>{var p=e.session_recording.maskNetworkRequestFn({url:h.name});return mt({},h,{name:p==null?void 0:p.url})}),o.maskRequestFn=Ui(e.session_recording.maskCapturedNetworkRequestFn)?h=>{var p,b=c(h);return b&&(p=e.session_recording.maskCapturedNetworkRequestFn==null?void 0:e.session_recording.maskCapturedNetworkRequestFn(b))!==null&&p!==void 0?p:void 0}:h=>function(p){if(!pt(p))return p.requestBody=UC(p.requestBody,"Request"),p.responseBody=UC(p.responseBody,"Response"),p}(c(h)),mt({},np,o,{recordHeaders:s,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function zi(e,t,n,r,i){return t>n&&(St.warn("min cannot be greater than max."),t=n),Ir(e)?e>n?(r&&St.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r&&St.warn(r+" cannot be less than min: "+t+". Using min value instead."),t):e:(r&&St.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),zi(i||n,t,n,r))}class Fte{constructor(t,n){var r,i;n===void 0&&(n={}),this.ot=100,this.lt=10,this.ut={},this.ht={},this.dt=()=>{Object.keys(this.ut).forEach(o=>{this.ut[o]=this.ut[o]+this.lt,this.ut[o]>=this.ot&&delete this.ut[o]})},this.vt=o=>{var s=this._rrweb.mirror.getNode(o);if((s==null?void 0:s.nodeName)!=="svg"&&s instanceof Element){var a=s.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[o,s]},this.ct=o=>{var s,a,l,u,c,f,h,p;return((s=(a=o.removes)==null?void 0:a.length)!==null&&s!==void 0?s:0)+((l=(u=o.attributes)==null?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(f=o.texts)==null?void 0:f.length)!==null&&c!==void 0?c:0)+((h=(p=o.adds)==null?void 0:p.length)!==null&&h!==void 0?h:0)},this.throttleMutations=o=>{if(o.type!==3||o.data.source!==0)return o;var s=o.data,a=this.ct(s);s.attributes&&(s.attributes=s.attributes.filter(u=>{var c,f,h,[p,b]=this.vt(u.id);return this.ut[p]===0?!1:(this.ut[p]=(c=this.ut[p])!==null&&c!==void 0?c:this.ot,this.ut[p]=Math.max(this.ut[p]-1,0),this.ut[p]===0&&(this.ht[p]||(this.ht[p]=!0,(f=(h=this.ft).onBlockedNode)==null||f.call(h,p,b))),u)}));var l=this.ct(s);return l!==0||a===l?o:void 0},this._rrweb=t,this.ft=n,this.lt=zi((r=this.ft.refillRate)!==null&&r!==void 0?r:this.lt,0,100,"mutation throttling refill rate"),this.ot=zi((i=this.ft.bucketSize)!==null&&i!==void 0?i:this.ot,0,100,"mutation throttling bucket size"),setInterval(()=>{this.dt()},1e3)}}var Wi=Uint8Array,ai=Uint16Array,Xu=Uint32Array,a1=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l1=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),WC=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),AI=function(e,t){for(var n=new ai(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Xu(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},NI=AI(a1,2),zte=NI[0],Gb=NI[1];zte[28]=258,Gb[258]=28;for(var VC=AI(l1,0)[1],RI=new ai(32768),bn=0;bn<32768;++bn){var Wa=(43690&bn)>>>1|(21845&bn)<<1;Wa=(61680&(Wa=(52428&Wa)>>>2|(13107&Wa)<<2))>>>4|(3855&Wa)<<4,RI[bn]=((65280&Wa)>>>8|(255&Wa)<<8)>>>1}var _d=function(e,t,n){for(var r=e.length,i=0,o=new ai(t);i<r;++i)++o[e[i]-1];var s,a=new ai(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;for(s=new ai(r),i=0;i<r;++i)s[i]=RI[a[e[i]-1]++]>>>15-e[i];return s},jl=new Wi(288);for(bn=0;bn<144;++bn)jl[bn]=8;for(bn=144;bn<256;++bn)jl[bn]=9;for(bn=256;bn<280;++bn)jl[bn]=7;for(bn=280;bn<288;++bn)jl[bn]=8;var Jg=new Wi(32);for(bn=0;bn<32;++bn)Jg[bn]=5;var Hte=_d(jl,9),Ute=_d(Jg,5),TI=function(e){return(e/8>>0)+(7&e&&1)},II=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof ai?ai:e instanceof Xu?Xu:Wi)(n-t);return r.set(e.subarray(t,n)),r},os=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},zc=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},jv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new Wi(0),0];if(i==1){var s=new Wi(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(k,A){return k.f-A.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[f].f?u++:f++],l=n[u!=c&&n[u].f<n[f].f?u++:f++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=o[0].s;for(r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var p=new ai(h+1),b=Yb(n[c-1],p,0);if(b>t){r=0;var y=0,_=b-t,m=1<<_;for(o.sort(function(k,A){return p[A.s]-p[k.s]||k.f-A.f});r<i;++r){var v=o[r].s;if(!(p[v]>t))break;y+=m-(1<<b-p[v]),p[v]=t}for(y>>>=_;y>0;){var w=o[r].s;p[w]<t?y-=1<<t-p[w]++-1:++r}for(;r>=0&&y;--r){var S=o[r].s;p[S]==t&&(--p[S],++y)}b=t}return[new Wi(p),b]},Yb=function(e,t,n){return e.s==-1?Math.max(Yb(e.l,t,n+1),Yb(e.r,t,n+1)):t[e.s]=n},qC=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ai(++t),r=0,i=e[0],o=1,s=function(l){n[r++]=l},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},Hc=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Xb=function(e,t,n){var r=n.length,i=TI(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},KC=function(e,t,n,r,i,o,s,a,l,u,c){os(t,c++,n),++i[256];for(var f=jv(i,15),h=f[0],p=f[1],b=jv(o,15),y=b[0],_=b[1],m=qC(h),v=m[0],w=m[1],S=qC(y),k=S[0],A=S[1],T=new ai(19),P=0;P<v.length;++P)T[31&v[P]]++;for(P=0;P<k.length;++P)T[31&k[P]]++;for(var Y=jv(T,7),D=Y[0],H=Y[1],Q=19;Q>4&&!D[WC[Q-1]];--Q);var U,L,te,Z,oe=u+5<<3,z=Hc(i,jl)+Hc(o,Jg)+s,V=Hc(i,h)+Hc(o,y)+s+14+3*Q+Hc(T,D)+(2*T[16]+3*T[17]+7*T[18]);if(oe<=z&&oe<=V)return Xb(t,c,e.subarray(l,l+u));if(os(t,c,1+(V<z)),c+=2,V<z){U=_d(h,p),L=h,te=_d(y,_),Z=y;var $=_d(D,H);for(os(t,c,w-257),os(t,c+5,A-1),os(t,c+10,Q-4),c+=14,P=0;P<Q;++P)os(t,c+3*P,D[WC[P]]);c+=3*Q;for(var X=[v,k],ue=0;ue<2;++ue){var ce=X[ue];for(P=0;P<ce.length;++P){var Ce=31&ce[P];os(t,c,$[Ce]),c+=D[Ce],Ce>15&&(os(t,c,ce[P]>>>5&127),c+=ce[P]>>>12)}}}else U=Hte,L=jl,te=Ute,Z=Jg;for(P=0;P<a;++P)if(r[P]>255){Ce=r[P]>>>18&31,zc(t,c,U[Ce+257]),c+=L[Ce+257],Ce>7&&(os(t,c,r[P]>>>23&31),c+=a1[Ce]);var Pe=31&r[P];zc(t,c,te[Pe]),c+=Z[Pe],Pe>3&&(zc(t,c,r[P]>>>5&8191),c+=l1[Pe])}else zc(t,c,U[r[P]]),c+=L[r[P]];return zc(t,c,U[256]),c+L[256]},Wte=new Xu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Vte=function(){for(var e=new Xu(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),qte=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Vte[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}},Kte=function(e,t,n,r,i){return function(o,s,a,l,u,c){var f=o.length,h=new Wi(l+f+5*(1+Math.floor(f/7e3))+u),p=h.subarray(l,h.length-u),b=0;if(!s||f<8)for(var y=0;y<=f;y+=65535){var _=y+65535;_<f?b=Xb(p,b,o.subarray(y,_)):(p[y]=c,b=Xb(p,b,o.subarray(y,f)))}else{for(var m=Wte[s-1],v=m>>>13,w=8191&m,S=(1<<a)-1,k=new ai(32768),A=new ai(S+1),T=Math.ceil(a/3),P=2*T,Y=function(We){return(o[We]^o[We+1]<<T^o[We+2]<<P)&S},D=new Xu(25e3),H=new ai(288),Q=new ai(32),U=0,L=0,te=(y=0,0),Z=0,oe=0;y<f;++y){var z=Y(y),V=32767&y,$=A[z];if(k[V]=$,A[z]=V,Z<=y){var X=f-y;if((U>7e3||te>24576)&&X>423){b=KC(o,p,0,D,H,Q,L,te,oe,y-oe,b),te=U=L=0,oe=y;for(var ue=0;ue<286;++ue)H[ue]=0;for(ue=0;ue<30;++ue)Q[ue]=0}var ce=2,Ce=0,Pe=w,Me=V-$&32767;if(X>2&&z==Y(y-Me))for(var B=Math.min(v,X)-1,J=Math.min(32767,y),re=Math.min(258,X);Me<=J&&--Pe&&V!=$;){if(o[y+ce]==o[y+ce-Me]){for(var De=0;De<re&&o[y+De]==o[y+De-Me];++De);if(De>ce){if(ce=De,Ce=Me,De>B)break;var Ye=Math.min(Me,De-2),He=0;for(ue=0;ue<Ye;++ue){var ne=y-Me+ue+32768&32767,he=ne-k[ne]+32768&32767;he>He&&(He=he,$=ne)}}}Me+=(V=$)-($=k[V])+32768&32767}if(Ce){D[te++]=268435456|Gb[ce]<<18|VC[Ce];var Se=31&Gb[ce],Ue=31&VC[Ce];L+=a1[Se]+l1[Ue],++H[257+Se],++Q[Ue],Z=y+ce,++U}else D[te++]=o[y],++H[o[y]]}}b=KC(o,p,c,D,H,Q,L,te,oe,y-oe,b)}return II(h,0,l+TI(b)+u)}(e,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!0)},Jb=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Gte=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&Jb(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},Yte=function(e){return 10+(e.filename&&e.filename.length+1||0)};function PI(e,t){t===void 0&&(t={});var n=qte(),r=e.length;n.p(e);var i=Kte(e,t,Yte(t),8),o=i.length;return Gte(i,t),Jb(i,o-8,n.d()),Jb(i,o-4,r),i}function OI(e,t){var n=e.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(e);for(var r=new Wi(e.length+(e.length>>>1)),i=0,o=function(u){r[i++]=u},s=0;s<n;++s){if(i+5>r.length){var a=new Wi(i+8+(n-s<<1));a.set(r),r=a}var l=e.charCodeAt(s);l<128||t?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return II(r,0,i)}function Xte(e,t){return function(n){for(var r=0,i=0;i<n.length;i++)r=(r<<5)-r+n.charCodeAt(i),r|=0;return Math.abs(r)}(e)%100<zi(100*t,0,100)}var ja="disabled",u1="sampled",Qg="active",Al="buffering",c1="paused",d1="trigger",Vo=d1+"_activated",Mr=d1+"_pending",Xo=d1+"_"+ja;function GC(e,t){return t.some(n=>n.matching==="regex"&&new RegExp(n.url).test(e))}class $I{constructor(t){this.gt=t}triggerStatus(t){var n=this.gt.map(r=>r.triggerStatus(t));return n.includes(Vo)?Vo:n.includes(Mr)?Mr:Xo}stop(){this.gt.forEach(t=>t.stop())}}class MI{constructor(t){this.gt=t}triggerStatus(t){var n=new Set;for(var r of this.gt)n.add(r.triggerStatus(t));switch(n.delete(Xo),n.size){case 0:return Xo;case 1:return Array.from(n)[0];default:return Mr}}stop(){this.gt.forEach(t=>t.stop())}}class Jte{triggerStatus(){return Mr}stop(){}}class Qte{constructor(t){this._t=[],this.bt=[],this.urlBlocked=!1,this._instance=t}onRemoteConfig(t){var n,r;this._t=((n=t.sessionRecording)==null?void 0:n.urlTriggers)||[],this.bt=((r=t.sessionRecording)==null?void 0:r.urlBlocklist)||[]}wt(t){var n;return this._t.length===0?Xo:((n=this._instance)==null?void 0:n.get_property(Ob))===t?Vo:Mr}triggerStatus(t){var n=this.wt(t),r=n===Vo?Vo:n===Mr?Mr:Xo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(t,n,r){if(Re!==void 0&&Re.location.href){var i=Re.location.href,o=this.urlBlocked,s=GC(i,this.bt);o&&s||(s&&!o?t():!s&&o&&n(),GC(i,this._t)&&r("url"))}}stop(){}}class Zte{constructor(t){this.linkedFlag=null,this.linkedFlagSeen=!1,this.yt=()=>{},this._instance=t}triggerStatus(){var t=Mr;return on(this.linkedFlag)&&(t=Xo),this.linkedFlagSeen&&(t=Vo),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:t}),t}onRemoteConfig(t,n){var r;if(this.linkedFlag=((r=t.sessionRecording)==null?void 0:r.linkedFlag)||null,!on(this.linkedFlag)&&!this.linkedFlagSeen){var i=Gn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,o=Gn(this.linkedFlag)?null:this.linkedFlag.variant;this.yt=this._instance.onFeatureFlags((s,a)=>{var l=Dn(a)&&i in a&&(o?a[i]===o:a[i]===!0);l&&n(i,o),this.linkedFlagSeen=l})}}stop(){this.yt()}}class ene{constructor(t){this.St=[],this._instance=t}onRemoteConfig(t){var n;this.St=((n=t.sessionRecording)==null?void 0:n.eventTriggers)||[]}$t(t){var n;return this.St.length===0?Xo:((n=this._instance)==null?void 0:n.get_property($b))===t?Vo:Mr}triggerStatus(t){var n=this.$t(t),r=n===Vo?Vo:n===Mr?Mr:Xo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}}function tne(e){return e.isRecordingEnabled?Al:ja}function nne(e){if(!e.receivedDecide)return Al;if(!e.isRecordingEnabled)return ja;if(e.urlTriggerMatching.urlBlocked)return c1;var t=e.isSampled===!0,n=new $I([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?u1:n===Vo?Qg:n===Mr?Al:e.isSampled===!1?ja:Qg}function rne(e){if(!e.receivedDecide)return Al;if(!e.isRecordingEnabled)return ja;if(e.urlTriggerMatching.urlBlocked)return c1;var t=new MI([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),n=t!==Xo,r=ws(e.isSampled);return n&&t===Mr?Al:n&&t===Xo||r&&!e.isSampled?ja:e.isSampled===!0?u1:Qg}var sd="[SessionRecording]",Ar=Fr(sd);function rp(){var e,t;return Ft==null||(e=Ft.__PosthogExtensions__)==null||(t=e.rrweb)==null?void 0:t.record}var ine=3e5,one=[to.MouseMove,to.MouseInteraction,to.Scroll,to.ViewportResize,to.Input,to.TouchMove,to.MediaInteraction,to.Drag],YC=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function Va(e){return function(t,n){for(var r="",i=0;i<t.length;){var o=t[i++];r+=String.fromCharCode(o)}return r}(PI(OI(JSON.stringify(e))))}function XC(e){return e.type===us.Custom&&e.data.tag==="sessionIdle"}class sne{get sessionId(){return this.kt}get xt(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Et}get It(){if(!this._instance.sessionManager)throw new Error(sd+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Pt(){var t,n;return this.Rt.triggerStatus(this.sessionId)===Mr?6e4:(t=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&t!==void 0?t:ine}get Tt(){var t=this._instance.get_property(id);return ws(t)?t:null}get Mt(){var t,n,r=(t=this.M)==null?void 0:t.data[((n=this.M)==null?void 0:n.data.length)-1],{sessionStartTimestamp:i}=this.It.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-i:null}get Ct(){var t=!!this._instance.get_property(Pb),n=!this._instance.config.disable_session_recording;return Re&&t&&n}get Ot(){var t=!!this._instance.get_property(SC),n=this._instance.config.enable_recording_console_log;return n!=null?n:t}get Ft(){var t,n,r,i,o,s,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(CC),u=(t=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&t!==void 0&&t,c=(r=(i=a==null?void 0:a.canvasFps)!==null&&i!==void 0?i:l==null?void 0:l.fps)!==null&&r!==void 0?r:4,f=(o=(s=a==null?void 0:a.canvasQuality)!==null&&s!==void 0?s:l==null?void 0:l.quality)!==null&&o!==void 0?o:.4;if(typeof f=="string"){var h=parseFloat(f);f=isNaN(h)?.4:h}return{enabled:u,fps:zi(c,0,12,"canvas recording fps",4),quality:zi(f,0,1,"canvas recording quality",.4)}}get At(){var t,n,r=this._instance.get_property(EC),i={recordHeaders:(t=this._instance.config.session_recording)==null?void 0:t.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},o=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),s=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=Dn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(ws(a)?a:r!=null&&r.capturePerformance);return o||s||l?{recordHeaders:o,recordBody:s,recordPerformance:l}:void 0}get Dt(){var t,n,r,i,o,s,a=this._instance.get_property(kC),l={maskAllInputs:(t=this._instance.config.session_recording)==null?void 0:t.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},u=(i=l==null?void 0:l.maskAllInputs)!==null&&i!==void 0?i:a==null?void 0:a.maskAllInputs,c=(o=l==null?void 0:l.maskTextSelector)!==null&&o!==void 0?o:a==null?void 0:a.maskTextSelector,f=(s=l==null?void 0:l.blockSelector)!==null&&s!==void 0?s:a==null?void 0:a.blockSelector;return pt(u)&&pt(c)&&pt(f)?void 0:{maskAllInputs:u==null||u,maskTextSelector:c,blockSelector:f}}get jt(){var t=this._instance.get_property(jC);return Ir(t)?t:null}get Lt(){var t=this._instance.get_property(AC);return Ir(t)?t:null}get status(){return this.Nt?this.zt({receivedDecide:this.Nt,isRecordingEnabled:this.Ct,isSampled:this.Tt,urlTriggerMatching:this.Ut,eventTriggerMatching:this.qt,linkedFlagMatching:this.Bt,sessionId:this.sessionId}):Al}constructor(t){if(this.zt=tne,this.Nt=!1,this.Ht=[],this.Wt="unknown",this.Gt=Date.now(),this.Rt=new Jte,this.Jt=void 0,this.Vt=void 0,this.Kt=void 0,this.Yt=void 0,this.Xt=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.Qt=()=>{this.Zt()},this.ti=()=>{this.ii("browser offline",{})},this.ei=()=>{this.ii("browser online",{})},this.ri=()=>{if(vt!=null&&vt.visibilityState){var i="window "+vt.visibilityState;this.ii(i,{})}},this._instance=t,this.Et=!1,this.si="/s/",this.ni=void 0,this.Nt=!1,!this._instance.sessionManager)throw Ar.error("started without valid sessionManager"),new Error(sd+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(sd+" cannot be used with __preview_experimental_cookieless_mode.");this.Bt=new Zte(this._instance),this.Ut=new Qte(this._instance),this.qt=new ene(this._instance);var{sessionId:n,windowId:r}=this.It.checkAndGetSessionAndWindowId();this.kt=n,this.oi=r,this.M=this.ai(),this.xt>=this.It.sessionTimeoutMs&&Ar.warn("session_idle_threshold_ms ("+this.xt+") is greater than the session timeout ("+this.It.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(t){this.Ct?(this.li(t),jn(Re,"beforeunload",this.Qt),jn(Re,"offline",this.ti),jn(Re,"online",this.ei),jn(Re,"visibilitychange",this.ri),this.ui(),this.hi(),on(this.Jt)&&(this.Jt=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this.di(n==null?void 0:n.properties.$current_url):"";if(!r)return;this.ii("$pageview",{href:r})}}catch(i){Ar.error("Could not add $pageview to rrweb session",i)}})),this.Vt||(this.Vt=this.It.onSessionId((n,r,i)=>{var o,s,a,l;i&&(this.ii("$session_id_change",{sessionId:n,windowId:r,changeReason:i}),(o=this._instance)==null||(s=o.persistence)==null||s.unregister($b),(a=this._instance)==null||(l=a.persistence)==null||l.unregister(Ob))}))):this.stopRecording()}stopRecording(){var t,n,r,i;this.Et&&this.ni&&(this.ni(),this.ni=void 0,this.Et=!1,Re==null||Re.removeEventListener("beforeunload",this.Qt),Re==null||Re.removeEventListener("offline",this.ti),Re==null||Re.removeEventListener("online",this.ei),Re==null||Re.removeEventListener("visibilitychange",this.ri),this.ai(),clearInterval(this.vi),(t=this.Jt)==null||t.call(this),this.Jt=void 0,(n=this.Xt)==null||n.call(this),this.Xt=void 0,(r=this.Vt)==null||r.call(this),this.Vt=void 0,(i=this.Yt)==null||i.call(this),this.Yt=void 0,this.qt.stop(),this.Ut.stop(),this.Bt.stop(),Ar.info("stopped"))}ci(){var t;(t=this._instance.persistence)==null||t.unregister(id)}fi(t){var n,r=this.kt!==t,i=this.jt;if(Ir(i)){var o=this.Tt,s=r||!ws(o),a=s?Xte(t,i):o;s&&(a?this.pi(u1):Ar.warn("Sample rate ("+i+") has determined that this sessionId ("+t+") will not be sent to the server."),this.ii("samplingDecisionMade",{sampleRate:i,isSampled:a})),(n=this._instance.persistence)==null||n.register({[id]:a})}else this.ci()}onRemoteConfig(t){var n,r,i,o;this.ii("$remote_config_received",t),this.gi(t),(n=t.sessionRecording)!=null&&n.endpoint&&(this.si=(o=t.sessionRecording)==null?void 0:o.endpoint),this.ui(),((r=t.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.zt=nne,this.Rt=new $I([this.qt,this.Ut])):(this.zt=rne,this.Rt=new MI([this.qt,this.Ut])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(i=t.sessionRecording)==null?void 0:i.triggerMatchType}),this.Ut.onRemoteConfig(t),this.qt.onRemoteConfig(t),this.Bt.onRemoteConfig(t,(s,a)=>{this.pi("linked_flag_matched",{flag:s,variant:a})}),this.Nt=!0,this.startIfEnabledOrStop()}ui(){Ir(this.jt)&&on(this.Yt)&&(this.Yt=this.It.onSessionId(t=>{this.fi(t)}))}gi(t){if(this._instance.persistence){var n,r=this._instance.persistence,i=()=>{var o,s,a,l,u,c,f,h,p,b=(o=t.sessionRecording)==null?void 0:o.sampleRate,y=on(b)?null:parseFloat(b);on(y)&&this.ci();var _=(s=t.sessionRecording)==null?void 0:s.minimumDurationMilliseconds;r.register({[Pb]:!!t.sessionRecording,[SC]:(a=t.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[EC]:mt({capturePerformance:t.capturePerformance},(l=t.sessionRecording)==null?void 0:l.networkPayloadCapture),[kC]:(u=t.sessionRecording)==null?void 0:u.masking,[CC]:{enabled:(c=t.sessionRecording)==null?void 0:c.recordCanvas,fps:(f=t.sessionRecording)==null?void 0:f.canvasFps,quality:(h=t.sessionRecording)==null?void 0:h.canvasQuality},[jC]:y,[AC]:pt(_)?null:_,[NC]:(p=t.sessionRecording)==null?void 0:p.scriptConfig})};i(),(n=this.Kt)==null||n.call(this),this.Kt=this.It.onSessionId(i)}}log(t,n){var r;n===void 0&&(n="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(t)]}},timestamp:Date.now()})}li(t){if(!pt(Object.assign)&&!pt(Array.from)&&!(this.Et||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Et=!0,this.It.checkAndGetSessionAndWindowId(),rp()?this.mi():(n=Ft.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.bi,r=>{if(r)return Ar.error("could not load recorder",r);this.mi()}),Ar.info("starting"),this.status===Qg&&this.pi(t||"recording_initialized")}}get bi(){var t,n,r;return((t=this._instance)==null||(n=t.persistence)==null||(r=n.get_property(NC))==null?void 0:r.script)||"recorder"}wi(t){var n;return t.type===3&&one.indexOf((n=t.data)==null?void 0:n.source)!==-1}yi(t){var n=this.wi(t);n||this.Wt||t.timestamp-this.Gt>this.xt&&(this.Wt=!0,clearInterval(this.vi),this.ii("sessionIdle",{eventTimestamp:t.timestamp,lastActivityTimestamp:this.Gt,threshold:this.xt,bufferLength:this.M.data.length,bufferSize:this.M.size}),this.Zt());var r=!1;if(n&&(this.Gt=t.timestamp,this.Wt)){var i=this.Wt==="unknown";this.Wt=!1,i||(this.ii("sessionNoLongerIdle",{reason:"user activity",type:t.type}),r=!0)}if(!this.Wt){var{windowId:o,sessionId:s}=this.It.checkAndGetSessionAndWindowId(!n,t.timestamp),a=this.kt!==s,l=this.oi!==o;this.oi=o,this.kt=s,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Si()}}$i(t){try{return t.rrwebMethod(),!0}catch(n){return this.Ht.length<10?this.Ht.push({enqueuedAt:t.enqueuedAt||Date.now(),attempt:t.attempt++,rrwebMethod:t.rrwebMethod}):Ar.warn("could not emit queued rrweb event.",n,t),!1}}ii(t,n){return this.$i(YC(()=>rp().addCustomEvent(t,n)))}ki(){return this.$i(YC(()=>rp().takeFullSnapshot()))}mi(){var t,n,r,i,o={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},s=this._instance.config.session_recording;for(var[a,l]of Object.entries(s||{}))a in o&&(a==="maskInputOptions"?o.maskInputOptions=mt({password:!0},l):o[a]=l);this.Ft&&this.Ft.enabled&&(o.recordCanvas=!0,o.sampling={canvas:this.Ft.fps},o.dataURLOptions={type:"image/webp",quality:this.Ft.quality}),this.Dt&&(o.maskAllInputs=(n=this.Dt.maskAllInputs)===null||n===void 0||n,o.maskTextSelector=(r=this.Dt.maskTextSelector)!==null&&r!==void 0?r:void 0,o.blockSelector=(i=this.Dt.blockSelector)!==null&&i!==void 0?i:void 0);var u=rp();if(u){this.xi=(t=this.xi)!==null&&t!==void 0?t:new Fte(u,{refillRate:this._instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this._instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(f,h)=>{var p="Too many mutations on node '"+f+"'. Rate limiting. This could be due to SVG animations or something similar";Ar.info(p,{node:h}),this.log(sd+" "+p,"warn")}});var c=this.Ei();this.ni=u(mt({emit:f=>{this.onRRwebEmit(f)},plugins:c},o)),this.Gt=Date.now(),this.Wt=ws(this.Wt)?this.Wt:"unknown",this.ii("$session_options",{sessionRecordingOptions:o,activePlugins:c.map(f=>f==null?void 0:f.name)}),this.ii("$posthog_config",{config:this._instance.config})}else Ar.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Si(){if(this.vi&&clearInterval(this.vi),this.Wt!==!0){var t=this.Pt;t&&(this.vi=setInterval(()=>{this.ki()},t))}}Ei(){var t,n,r,i,o=[],s=(t=Ft.__PosthogExtensions__)==null||(n=t.rrwebPlugins)==null?void 0:n.getRecordConsolePlugin;s&&this.Ot&&o.push(s());var a=(r=Ft.__PosthogExtensions__)==null||(i=r.rrwebPlugins)==null?void 0:i.getRecordNetworkPlugin;return this.At&&Ui(a)&&(!ite.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?o.push(a(Bte(this._instance.config,this.At))):Ar.info("NetworkCapture not started because we are on localhost.")),o}onRRwebEmit(t){var n;if(this.Ii(),t&&Dn(t)){if(t.type===us.Meta){var r=this.di(t.data.href);if(this.Pi=r,!r)return;t.data.href=r}else this.Ri();if(this.Ut.checkUrlTriggerConditions(()=>this.Ti(),()=>this.Mi(),h=>this.Ci(h)),!this.Ut.urlBlocked||(i=t).type===us.Custom&&i.data.tag==="recording paused"){var i;t.type===us.FullSnapshot&&this.Si(),t.type===us.FullSnapshot&&this.Nt&&this.Rt.triggerStatus(this.sessionId)===Mr&&this.ai();var o=this.xi?this.xi.throttleMutations(t):t;if(o){var s=function(h){var p=h;if(p&&Dn(p)&&p.type===6&&Dn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var b=[],y=0;y<p.data.payload.payload.length;y++)p.data.payload.payload[y]&&p.data.payload.payload[y].length>2e3?b.push(p.data.payload.payload[y].slice(0,2e3)+"...[truncated]"):b.push(p.data.payload.payload[y]);return p.data.payload.payload=b,h}return h}(o);if(this.yi(s),this.Wt!==!0||XC(s)){if(XC(s)){var a=s.data.payload;if(a){var l=a.lastActivityTimestamp,u=a.threshold;s.timestamp=l+u}}var c=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(h){if(Xg(h)<1024)return h;try{if(h.type===us.FullSnapshot)return mt({},h,{data:Va(h.data),cv:"2024-10"});if(h.type===us.IncrementalSnapshot&&h.data.source===to.Mutation)return mt({},h,{cv:"2024-10",data:mt({},h.data,{texts:Va(h.data.texts),attributes:Va(h.data.attributes),removes:Va(h.data.removes),adds:Va(h.data.adds)})});if(h.type===us.IncrementalSnapshot&&h.data.source===to.StyleSheetRule)return mt({},h,{cv:"2024-10",data:mt({},h.data,{adds:h.data.adds?Va(h.data.adds):void 0,removes:h.data.removes?Va(h.data.removes):void 0})})}catch(p){Ar.error("could not compress event - will use uncompressed event",p)}return h}(s):s,f={$snapshot_bytes:Xg(c),$snapshot_data:c,$session_id:this.kt,$window_id:this.oi};this.status!==ja?this.Oi(f):this.ai()}}}}}Ri(){if(!this._instance.config.capture_pageview&&Re){var t=this.di(Re.location.href);this.Pi!==t&&(this.ii("$url_changed",{href:t}),this.Pi=t)}}Ii(){if(this.Ht.length){var t=[...this.Ht];this.Ht=[],t.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.$i(n)})}}di(t){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:t};return(r=i=n.maskNetworkRequestFn(i))==null?void 0:r.url}return t}ai(){return this.M={size:0,data:[],sessionId:this.kt,windowId:this.oi},this.M}Zt(){this.Fi&&(clearTimeout(this.Fi),this.Fi=void 0);var t=this.Lt,n=this.Mt,r=Ir(n)&&n>=0,i=Ir(t)&&r&&n<t;return this.status===Al||this.status===c1||this.status===ja||i?(this.Fi=setTimeout(()=>{this.Zt()},2e3),this.M):(this.M.data.length>0&&Vb(this.M).forEach(o=>{this.Ai({$snapshot_bytes:o.size,$snapshot_data:o.data,$session_id:o.sessionId,$window_id:o.windowId,$lib:"web",$lib_version:gs.LIB_VERSION})}),this.ai())}Oi(t){var n,r=2+(((n=this.M)==null?void 0:n.data.length)||0);!this.Wt&&(this.M.size+t.$snapshot_bytes+r>943718.4||this.M.sessionId!==this.kt)&&(this.M=this.Zt()),this.M.size+=t.$snapshot_bytes,this.M.data.push(t.$snapshot_data),this.Fi||this.Wt||(this.Fi=setTimeout(()=>{this.Zt()},2e3))}Ai(t){this._instance.capture("$snapshot",t,{_url:this._instance.requestRouter.endpointFor("api",this.si),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}Ci(t){var n,r;this.Rt.triggerStatus(this.sessionId)===Mr&&((n=this._instance)==null||(r=n.persistence)==null||r.register({[t==="url"?Ob:$b]:this.kt}),this.Zt(),this.pi(t+"_trigger_matched"))}Ti(){this.Ut.urlBlocked||(this.Ut.urlBlocked=!0,clearInterval(this.vi),Ar.info("recording paused due to URL blocker"),this.ii("recording paused",{reason:"url blocker"}))}Mi(){this.Ut.urlBlocked&&(this.Ut.urlBlocked=!1,this.ki(),this.Si(),this.ii("recording resumed",{reason:"left blocked url"}),Ar.info("recording resumed"))}hi(){this.qt.St.length!==0&&on(this.Xt)&&(this.Xt=this._instance.on("eventCaptured",t=>{try{this.qt.St.includes(t.event)&&this.Ci("event")}catch(n){Ar.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Bt.linkedFlagSeen=!0,this.ki(),this.pi("linked_flag_overridden")}overrideSampling(){var t;(t=this._instance.persistence)==null||t.register({[id]:!0}),this.ki(),this.pi("sampling_overridden")}overrideTrigger(t){this.Ci(t)}pi(t,n){this._instance.register_for_session({$session_recording_start_reason:t}),Ar.info(t.replace("_"," "),n),qt(["recording_initialized","session_id_changed"],t)||this.ii(t,n)}get sdkDebugProperties(){var{sessionStartTimestamp:t}=this.It.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.M.data.length,$sdk_debug_replay_internal_buffer_size:this.M.size,$sdk_debug_current_session_duration:this.Mt,$sdk_debug_session_start:t}}}var Av=Fr("[SegmentIntegration]");function ane(e,t){var n=e.config.segment;if(!n)return t();(function(r,i){var o=r.config.segment;if(!o)return i();var s=l=>{var u=()=>l.anonymousId()||ia();r.config.get_device_id=u,l.id()&&(r.register({distinct_id:l.id(),$device_id:u()}),r.persistence.set_property(ls,"identified")),i()},a=o.user();"then"in a&&Ui(a.then)?a.then(l=>s(l)):s(a)})(e,()=>{n.register((r=>{Promise&&Promise.resolve||Av.warn("This browser does not have Promise support, and can not use the segment integration");var i=(o,s)=>{var a;if(!s)return o;o.event.userId||o.event.anonymousId===r.get_distinct_id()||(Av.info("No userId set, resetting PostHog"),r.reset()),o.event.userId&&o.event.userId!==r.get_distinct_id()&&(Av.info("UserId set, identifying with PostHog"),r.identify(o.event.userId));var l=r.Di(s,(a=o.event.properties)!==null&&a!==void 0?a:{},new Date);return o.event.properties=Object.assign({},l,o.event.properties),o};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:o=>i(o,o.event.event),page:o=>i(o,"$pageview"),identify:o=>i(o,"$identify"),screen:o=>i(o,"$screen")}})(e)).then(()=>{t()})})}var DI="posthog-js";function LI(e,t){var{organization:n,projectId:r,prefix:i,severityAllowList:o=["error"]}=t===void 0?{}:t;return s=>{var a,l,u,c,f;if(!(o==="*"||o.includes(s.level))||!e.__loaded)return s;s.tags||(s.tags={});var h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());s.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var p=((a=s.exception)==null?void 0:a.values)||[],b=p.map(_=>mt({},_,{stacktrace:_.stacktrace?mt({},_.stacktrace,{type:"raw",frames:(_.stacktrace.frames||[]).map(m=>mt({},m,{platform:"web:javascript"}))}):void 0})),y={$exception_message:((l=p[0])==null?void 0:l.value)||s.message,$exception_type:(u=p[0])==null?void 0:u.type,$exception_personURL:h,$exception_level:s.level,$exception_list:b,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((c=p[0])==null?void 0:c.value)||s.message,$sentry_exception_type:(f=p[0])==null?void 0:f.type,$sentry_tags:s.tags};return n&&r&&(y.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+s.event_id),e.exceptions.sendExceptionEvent(y),s}}class lne{constructor(t,n,r,i,o){this.name=DI,this.setupOnce=function(s){s(LI(t,{organization:n,projectId:r,prefix:i,severityAllowList:o}))}}}var cs,une=Re!=null&&Re.location?Gg(Re.location.hash,"__posthog")||Gg(location.hash,"state"):null,JC="_postHogToolbarParams",QC=Fr("[Toolbar]");(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"})(cs||(cs={}));class cne{constructor(t){this.instance=t}ji(t){Ft.ph_toolbar_state=t}Li(){var t;return(t=Ft.ph_toolbar_state)!==null&&t!==void 0?t:cs.UNINITIALIZED}maybeLoadToolbar(t,n,r){var i,o;if(t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!Re||!vt)return!1;t=(i=t)!==null&&i!==void 0?i:Re.location,r=(o=r)!==null&&o!==void 0?o:Re.history;try{if(!n){try{Re.localStorage.setItem("test","test"),Re.localStorage.removeItem("test")}catch(u){return!1}n=Re==null?void 0:Re.localStorage}var s,a=une||Gg(t.hash,"__posthog")||Gg(t.hash,"state"),l=a?vC(()=>JSON.parse(atob(decodeURIComponent(a))))||vC(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((s=l).source="url",s&&Object.keys(s).length>0&&(l.desiredHash?t.hash=l.desiredHash:r?r.replaceState(r.state,"",t.pathname+t.search):t.hash="")):((s=JSON.parse(n.getItem(JC)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch(u){return!1}}Ni(t){var n=Ft.ph_load_toolbar||Ft.ph_load_editor;!on(n)&&Ui(n)?n(t,this.instance):QC.warn("No toolbar load function found")}loadToolbar(t){var n=!(vt==null||!vt.getElementById(cI));if(!Re||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=mt({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(Re.localStorage.setItem(JC,JSON.stringify(mt({},i,{source:void 0}))),this.Li()===cs.LOADED)this.Ni(i);else if(this.Li()===cs.UNINITIALIZED){var o;this.ji(cs.LOADING),(o=Ft.__PosthogExtensions__)==null||o.loadExternalDependency==null||o.loadExternalDependency(this.instance,"toolbar",s=>{if(s)return QC.error("[Toolbar] Failed to load",s),void this.ji(cs.UNINITIALIZED);this.ji(cs.LOADED),this.Ni(i)}),jn(Re,"turbolinks:load",()=>{this.ji(cs.UNINITIALIZED),this.loadToolbar(i)})}return!0}zi(t){return this.loadToolbar(t)}maybeLoadEditor(t,n,r){return t===void 0&&(t=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(t,n,r)}}var dne=Fr("[TracingHeaders]");class fne{constructor(t){this.Ui=void 0,this.qi=void 0,this.V=()=>{var n,r,i,o;pt(this.Ui)&&((n=Ft.__PosthogExtensions__)==null||(r=n.tracingHeadersPatchFns)==null||r._patchXHR(this._instance.sessionManager)),pt(this.qi)&&((i=Ft.__PosthogExtensions__)==null||(o=i.tracingHeadersPatchFns)==null||o._patchFetch(this._instance.sessionManager))},this._instance=t}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",i=>{if(i)return dne.error("failed to load script",i);t()})}startIfEnabledOrStop(){var t,n;this._instance.config.__add_tracing_headers?this.G(this.V):((t=this.Ui)==null||t.call(this),(n=this.qi)==null||n.call(this),this.Ui=void 0,this.qi=void 0)}}var Ks=Fr("[Web Vitals]"),ZC=9e5;class hne{constructor(t){var n;this.Bi=!1,this.i=!1,this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Hi=()=>{clearTimeout(this.Wi),this.M.metrics.length!==0&&(this._instance.capture("$web_vitals",this.M.metrics.reduce((r,i)=>mt({},r,{["$web_vitals_"+i.name+"_event"]:mt({},i),["$web_vitals_"+i.name+"_value"]:i.value}),{})),this.M={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Gi=r=>{var i,o=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(pt(o))Ks.error("Could not read session ID. Dropping metrics!");else{this.M=this.M||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var s=this.Ji();pt(s)||(on(r==null?void 0:r.name)||on(r==null?void 0:r.value)?Ks.error("Invalid metric received",r):this.Vi&&r.value>=this.Vi?Ks.error("Ignoring metric with value >= "+this.Vi,r):(this.M.url!==s&&(this.Hi(),this.Wi=setTimeout(this.Hi,this.flushToCaptureTimeoutMs)),pt(this.M.url)&&(this.M.url=s),this.M.firstMetricTimestamp=pt(this.M.firstMetricTimestamp)?Date.now():this.M.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.M.metrics.push(mt({},r,{$current_url:s,$session_id:o.sessionId,$window_id:o.windowId,timestamp:Date.now()})),this.M.metrics.length===this.allowedMetrics.length&&this.Hi()))}},this.V=()=>{var r,i,o,s,a=Ft.__PosthogExtensions__;pt(a)||pt(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:o,onINP:s}=a.postHogWebVitalsCallbacks),r&&i&&o&&s?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Gi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Gi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&o(this.Gi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&s(this.Gi.bind(this)),this.i=!0):Ks.error("web vitals callbacks not loaded - not starting")},this._instance=t,this.Bi=!((n=this._instance.persistence)==null||!n.props[_C]),this.startIfEnabled()}get allowedMetrics(){var t,n,r=Dn(this._instance.config.capture_performance)?(t=this._instance.config.capture_performance)==null?void 0:t.web_vitals_allowed_metrics:void 0;return pt(r)?((n=this._instance.persistence)==null?void 0:n.props[xC])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Dn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Vi(){var t=Dn(this._instance.config.capture_performance)&&Ir(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:ZC;return 0<t&&t<=6e4?ZC:t}get isEnabled(){var t=ri==null?void 0:ri.protocol;if(t!=="http:"&&t!=="https:")return Ks.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=Dn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:ws(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return ws(n)?n:this.Bi}startIfEnabled(){this.isEnabled&&!this.i&&(Ks.info("enabled, starting..."),this.G(this.V))}onRemoteConfig(t){var n=Dn(t.capturePerformance)&&!!t.capturePerformance.web_vitals,r=Dn(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[_C]:n}),this._instance.persistence.register({[xC]:r})),this.Bi=n,this.startIfEnabled()}G(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&t(),(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",i=>{i?Ks.error("failed to load script",i):t()})}Ji(){var t=Re?Re.location.href:void 0;return t||Ks.error("Could not determine current URL"),t}}var pne=Fr("[Heatmaps]");function ej(e){return Dn(e)&&"clientX"in e&&"clientY"in e&&Ir(e.clientX)&&Ir(e.clientY)}class gne{constructor(t){var n;this.rageclicks=new _I,this.Bi=!1,this.i=!1,this.Ki=null,this.instance=t,this.Bi=!((n=this.instance.persistence)==null||!n.props[Ib])}get flushIntervalMilliseconds(){var t=5e3;return Dn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return pt(this.instance.config.capture_heatmaps)?pt(this.instance.config.enable_heatmaps)?this.Bi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;pne.info("starting..."),this.Yi(),this.Ki=setInterval(this.Xi.bind(this),this.flushIntervalMilliseconds)}else{var t,n;clearInterval((t=this.Ki)!==null&&t!==void 0?t:void 0),(n=this.Qi)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(t){var n=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Ib]:n}),this.Bi=n,this.startIfEnabled()}getAndClearBuffer(){var t=this.M;return this.M=void 0,t}Zi(t){this.te(t.originalEvent,"deadclick")}Yi(){Re&&vt&&(jn(Re,"beforeunload",this.Xi.bind(this)),jn(vt,"click",t=>this.te(t||(Re==null?void 0:Re.event)),{capture:!0}),jn(vt,"mousemove",t=>this.ie(t||(Re==null?void 0:Re.event)),{capture:!0}),this.Qi=new SI(this.instance,wte,this.Zi.bind(this)),this.Qi.startIfEnabled(),this.i=!0)}ee(t,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),o=this.instance.scrollManager.scrollElement(),s=function(a,l,u){for(var c=a;c&&my(c)&&!ma(c,"body");){if(c===u)return!1;if(qt(l,Re==null?void 0:Re.getComputedStyle(c).position))return!0;c=gI(c)}return!1}(pI(t),["fixed","sticky"],o);return{x:t.clientX+(s?0:i),y:t.clientY+(s?0:r),target_fixed:s,type:n}}te(t,n){var r;if(n===void 0&&(n="click"),!TC(t.target)&&ej(t)){var i=this.ee(t,n);(r=this.rageclicks)!=null&&r.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.re(mt({},i,{type:"rageclick"})),this.re(i)}}ie(t){!TC(t.target)&&ej(t)&&(clearTimeout(this.se),this.se=setTimeout(()=>{this.re(this.ee(t,"mousemove"))},500))}re(t){if(Re){var n=Re.location.href;this.M=this.M||{},this.M[n]||(this.M[n]=[]),this.M[n].push(t)}}Xi(){this.M&&!fu(this.M)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class mne{constructor(t){this._instance=t}doPageView(t,n){var r,i=this.ne(t,n);return this.oe={pathname:(r=Re==null?void 0:Re.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:t},this._instance.scrollManager.resetContext(),i}doPageLeave(t){var n;return this.ne(t,(n=this.oe)==null?void 0:n.pageViewId)}doEvent(){var t;return{$pageview_id:(t=this.oe)==null?void 0:t.pageViewId}}ne(t,n){var r=this.oe;if(!r)return{$pageview_id:n};var i={$pageview_id:n,$prev_pageview_id:r.pageViewId},o=this._instance.scrollManager.getContext();if(o&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:f}=o;if(!(pt(s)||pt(a)||pt(l)||pt(u)||pt(c)||pt(f))){s=Math.ceil(s),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),f=Math.ceil(f);var h=s<=1?1:zi(a/s,0,1),p=s<=1?1:zi(l/s,0,1),b=u<=1?1:zi(c/u,0,1),y=u<=1?1:zi(f/u,0,1);i=Vn(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:b,$prev_pageview_max_content:f,$prev_pageview_max_content_percentage:y})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(t.getTime()-r.timestamp.getTime())/1e3),i}}class yne{constructor(t){this._instance=t}sendExceptionEvent(t){this._instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var Vi="Mobile",Zg="iOS",Lo="Android",kf="Tablet",BI=Lo+" "+kf,FI="iPad",zI="Apple",HI=zI+" Watch",Cf="Safari",Ju="BlackBerry",UI="Samsung",WI=UI+"Browser",VI=UI+" Internet",Nl="Chrome",vne=Nl+" OS",qI=Nl+" "+Zg,f1="Internet Explorer",KI=f1+" "+Vi,h1="Opera",wne=h1+" Mini",p1="Edge",GI="Microsoft "+p1,ku="Firefox",YI=ku+" "+Zg,jf="Nintendo",Af="PlayStation",Cu="Xbox",XI=Lo+" "+Vi,JI=Vi+" "+Cf,ad="Windows",Qb=ad+" Phone",tj="Nokia",Zb="Ouya",QI="Generic",bne=QI+" "+Vi.toLowerCase(),ZI=QI+" "+kf.toLowerCase(),e_="Konqueror",qr="(\\d+(\\.\\d+)?)",Nv=new RegExp("Version/"+qr),_ne=new RegExp(Cu,"i"),xne=new RegExp(Af+" \\w+","i"),Sne=new RegExp(jf+" \\w+","i"),g1=new RegExp(Ju+"|PlayBook|BB10","i"),Ene={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},kne=(e,t)=>t&&qt(t,zI)||function(n){return qt(n,Cf)&&!qt(n,Nl)&&!qt(n,Lo)}(e),e5=function(e,t){return t=t||"",qt(e," OPR/")&&qt(e,"Mini")?wne:qt(e," OPR/")?h1:g1.test(e)?Ju:qt(e,"IE"+Vi)||qt(e,"WPDesktop")?KI:qt(e,WI)?VI:qt(e,p1)||qt(e,"Edg/")?GI:qt(e,"FBIOS")?"Facebook "+Vi:qt(e,"UCWEB")||qt(e,"UCBrowser")?"UC Browser":qt(e,"CriOS")?qI:qt(e,"CrMo")||qt(e,Nl)?Nl:qt(e,Lo)&&qt(e,Cf)?XI:qt(e,"FxiOS")?YI:qt(e.toLowerCase(),e_.toLowerCase())?e_:kne(e,t)?qt(e,Vi)?JI:Cf:qt(e,ku)?ku:qt(e,"MSIE")||qt(e,"Trident/")?f1:qt(e,"Gecko")?ku:""},Cne={[KI]:[new RegExp("rv:"+qr)],[GI]:[new RegExp(p1+"?\\/"+qr)],[Nl]:[new RegExp("("+Nl+"|CrMo)\\/"+qr)],[qI]:[new RegExp("CriOS\\/"+qr)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+qr)],[Cf]:[Nv],[JI]:[Nv],[h1]:[new RegExp("(Opera|OPR)\\/"+qr)],[ku]:[new RegExp(ku+"\\/"+qr)],[YI]:[new RegExp("FxiOS\\/"+qr)],[e_]:[new RegExp("Konqueror[:/]?"+qr,"i")],[Ju]:[new RegExp(Ju+" "+qr),Nv],[XI]:[new RegExp("android\\s"+qr,"i")],[VI]:[new RegExp(WI+"\\/"+qr)],[f1]:[new RegExp("(rv:|MSIE )"+qr)],Mozilla:[new RegExp("rv:"+qr)]},jne=function(e,t){var n=e5(e,t),r=Cne[n];if(pt(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=e.match(o);if(s)return parseFloat(s[s.length-2])}return null},nj=[[new RegExp(Cu+"; "+Cu+" (.*?)[);]","i"),e=>[Cu,e&&e[1]||""]],[new RegExp(jf,"i"),[jf,""]],[new RegExp(Af,"i"),[Af,""]],[g1,[Ju,""]],[new RegExp(ad,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Qb,""];if(new RegExp(Vi).test(t)&&!/IEMobile\b/.test(t))return[ad+" "+Vi,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=Ene[r]||"";return/arm/i.test(t)&&(i="RT"),[ad,i]}return[ad,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[Zg,t.join(".")]}return[Zg,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=pt(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+Lo+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Lo+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[Lo,t.join(".")]}return[Lo,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[vne,""]],[/Linux|debian/i,["Linux",""]]],rj=function(e){return Sne.test(e)?jf:xne.test(e)?Af:_ne.test(e)?Cu:new RegExp(Zb,"i").test(e)?Zb:new RegExp("("+Qb+"|WPDesktop)","i").test(e)?Qb:/iPad/.test(e)?FI:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?HI:g1.test(e)?Ju:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(tj,"i").test(e)?tj:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(Vi).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?Lo:BI:Lo:new RegExp("(pda|"+Vi+")","i").test(e)?bne:new RegExp(kf,"i").test(e)&&!new RegExp(kf+" pc","i").test(e)?ZI:""},ip="https?://(.*)",vy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Ane=gy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],vy),m1="<masked>";function t5(e,t,n){if(!vt)return{};var r=t?gy([],vy,n||[]):[];return n5(o1(vt.URL,r,m1),e)}function n5(e,t){var n=Ane.concat(t||[]),r={};return cn(n,function(i){var o=Kg(e,i);r[i]=o||null}),r}function r5(e){var t=function(o){return o?o.search(ip+"google.([^/?]*)")===0?"google":o.search(ip+"bing.com")===0?"bing":o.search(ip+"yahoo.com")===0?"yahoo":o.search(ip+"duckduckgo.com")===0?"duckduckgo":null:null}(e),n=t!="yahoo"?"q":"p",r={};if(!$a(t)){r.$search_engine=t;var i=vt?Kg(vt.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function ij(){return navigator.language||navigator.userLanguage}function i5(){return(vt==null?void 0:vt.referrer)||"$direct"}function o5(e,t){var n=e?gy([],vy,t||[]):[],r=ri==null?void 0:ri.href.substring(0,1e3);return{r:i5().substring(0,1e3),u:r?o1(r,n,m1):void 0}}function s5(e){var t,{r:n,u:r}=e,i={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(t=Yu(n))==null?void 0:t.host};if(r){i.$current_url=r;var o=Yu(r);i.$host=o==null?void 0:o.host,i.$pathname=o==null?void 0:o.pathname;var s=n5(r);Vn(i,s)}if(n){var a=r5(n);Vn(i,a)}return i}function a5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}function Nne(){try{return new Date().getTimezoneOffset()}catch(e){return}}function Rne(e,t){if(!ti)return{};var n,r,i,o=e?gy([],vy,t||[]):[],[s,a]=function(l){for(var u=0;u<nj.length;u++){var[c,f]=nj[u],h=c.exec(l),p=h&&(Ui(f)?f(h,l):f);if(p)return p}return["",""]}(ti);return Vn(r1({$os:s,$os_version:a,$browser:e5(ti,navigator.vendor),$device:rj(ti),$device_type:(r=ti,i=rj(r),i===FI||i===BI||i==="Kobo"||i==="Kindle Fire"||i===ZI?kf:i===jf||i===Cu||i===Af||i===Zb?"Console":i===HI?"Wearable":i?Vi:"Desktop"),$timezone:a5(),$timezone_offset:Nne()}),{$current_url:o1(ri==null?void 0:ri.href,o,m1),$host:ri==null?void 0:ri.host,$pathname:ri==null?void 0:ri.pathname,$raw_user_agent:ti.length>1e3?ti.substring(0,997)+"...":ti,$browser_version:jne(ti,navigator.vendor),$browser_language:ij(),$browser_language_prefix:(n=ij(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:Re==null?void 0:Re.screen.height,$screen_width:Re==null?void 0:Re.screen.width,$viewport_height:Re==null?void 0:Re.innerHeight,$viewport_width:Re==null?void 0:Re.innerWidth,$lib:"web",$lib_version:gs.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var t_,$o=Fr("[FeatureFlags]"),Rv="$active_feature_flags",Kl="$override_feature_flags",oj="$feature_flag_payloads",Uc="$override_feature_flag_payloads",sj="$feature_flag_request_id",aj=e=>{var t={};for(var[n,r]of Rp(e||{}))r&&(t[n]=r);return t},Tne=e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(n=>{var r;return[n,(r=t[n].variant)!==null&&r!==void 0?r:t[n].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(n=>t[n].enabled).filter(n=>{var r;return(r=t[n].metadata)==null?void 0:r.payload}).map(n=>{var r;return[n,(r=t[n].metadata)==null?void 0:r.payload]}))):$o.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e};(function(e){e.FeatureFlags="feature_flags",e.Recordings="recordings"})(t_||(t_={}));class Ine{constructor(t){this.ae=!1,this.le=!1,this.ue=!1,this.he=!1,this.de=!1,this.ve=!1,this.ce=!1,this._instance=t,this.featureFlagEventHandlers=[]}decide(){if(this._instance.config.__preview_remote_config)this.ve=!0;else{var t=!this.fe&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.pe({disableFlags:t})}}get hasLoadedFlags(){return this.le}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this._instance.get_property(Mb),n=this._instance.get_property(Kl),r=this._instance.get_property(Uc);if(!r&&!n)return t||{};var i=Vn({},t||{}),o=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var s of o){var a,l,u=i[s],c=n==null?void 0:n[s],f=pt(c)?(a=u==null?void 0:u.enabled)!==null&&a!==void 0&&a:!!c,h=pt(c)?u.variant:typeof c=="string"?c:void 0,p=r==null?void 0:r[s],b=mt({},u,{enabled:f,variant:f?h!=null?h:u==null?void 0:u.variant:void 0});f!==(u==null?void 0:u.enabled)&&(b.original_enabled=u==null?void 0:u.enabled),h!==(u==null?void 0:u.variant)&&(b.original_variant=u==null?void 0:u.variant),p&&(b.metadata=mt({},u==null?void 0:u.metadata,{payload:p,original_payload:u==null||(l=u.metadata)==null?void 0:l.payload})),i[s]=b}return this.ae||($o.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:r,finalDetails:i}),this.ae=!0),i}getFlagVariants(){var t=this._instance.get_property(hu),n=this._instance.get_property(Kl);if(!n)return t||{};for(var r=Vn({},t),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||($o.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:n,finalFlags:r}),this.ae=!0),r}getFlagPayloads(){var t=this._instance.get_property(oj),n=this._instance.get_property(Uc);if(!n)return t||{};for(var r=Vn({},t||{}),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this.ae||($o.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:n,finalPayloads:r}),this.ae=!0),r}reloadFeatureFlags(){this.he||this._instance.config.advanced_disable_feature_flags||this.fe||(this.fe=setTimeout(()=>{this.pe()},5))}ge(){clearTimeout(this.fe),this.fe=void 0}ensureFlagsLoaded(){this.le||this.ue||this.fe||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.he=t}pe(t){var n;if(this.ge(),!this._instance.config.advanced_disable_decide)if(this.ue)this.de=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:mt({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(od)||{}),group_properties:this._instance.get_property(Qa)};(t!=null&&t.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var i=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config;i&&(r.timezone=a5()),this.ue=!0,this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api",i?"/flags/?v=2":"/decide/?v=4"),data:r,compression:this._instance.config.disable_compression?void 0:ao.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:o=>{var s,a,l,u=!0;o.statusCode===200&&(this.de||(this.$anon_distinct_id=void 0),u=!1),this.ue=!1,this.ve||(this.ve=!0,this._instance.me((l=o.json)!==null&&l!==void 0?l:{})),r.disable_flags&&!this.de||(this.ce=!u,o.json&&(s=o.json.quotaLimited)!=null&&s.includes(t_.FeatureFlags)?$o.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(this.receivedFeatureFlags((a=o.json)!==null&&a!==void 0?a:{},u),this.de&&(this.de=!1,this.pe())))}})}}getFeatureFlag(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[t],i=""+r,o=this._instance.get_property(sj)||void 0,s=this._instance.get_property(Wg)||{};if((n.send_event||!("send_event"in n))&&(!(t in s)||!s[t].includes(i))){var a,l,u,c,f,h,p,b,y,_,m;Mn(s[t])?s[t].push(i):s[t]=[i],(a=this._instance.persistence)==null||a.register({[Wg]:s});var v=this.getFeatureFlagDetails(t),w={$feature_flag:t,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:o,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(u=l.featureFlags)==null?void 0:u[t])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(f=c.featureFlagPayloads)==null?void 0:f[t])||null,$used_bootstrap_value:!this.ce};pt(v==null||(h=v.metadata)==null?void 0:h.version)||(w.$feature_flag_version=v.metadata.version);var S,k=(p=v==null||(b=v.reason)==null?void 0:b.description)!==null&&p!==void 0?p:v==null||(y=v.reason)==null?void 0:y.code;k&&(w.$feature_flag_reason=k),v!=null&&(_=v.metadata)!=null&&_.id&&(w.$feature_flag_id=v.metadata.id),pt(v==null?void 0:v.original_variant)&&pt(v==null?void 0:v.original_enabled)||(w.$feature_flag_original_response=pt(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(w.$feature_flag_original_payload=v==null||(S=v.metadata)==null?void 0:S.original_payload),this._instance.capture("$feature_flag_called",w)}return r}$o.warn('getFeatureFlag for key "'+t+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,n){var r=this._instance.config.token;this._instance._e({method:"POST",url:this._instance.requestRouter.endpointFor("api","/decide/?v=4"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:ao.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var o,s=(o=i.json)==null?void 0:o.featureFlagPayloads;n((s==null?void 0:s[t])||void 0)}})}isFeatureEnabled(t,n){if(n===void 0&&(n={}),this.le||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(t,n);$o.warn('isFeatureEnabled for key "'+t+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==t)}receivedFeatureFlags(t,n){if(this._instance.persistence){this.le=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),o=this.getFlagsWithDetails();(function(s,a,l,u,c){l===void 0&&(l={}),u===void 0&&(u={}),c===void 0&&(c={});var f=Tne(s),h=f.flags,p=f.featureFlags,b=f.featureFlagPayloads;if(p){var y=s.requestId;if(Mn(p)){$o.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var _={};if(p)for(var m=0;m<p.length;m++)_[p[m]]=!0;a&&a.register({[Rv]:p,[hu]:_})}else{var v=p,w=b,S=h;s.errorsWhileComputingFlags&&(v=mt({},l,v),w=mt({},u,w),S=mt({},c,S)),a&&a.register(mt({[Rv]:Object.keys(aj(v)),[hu]:v||{},[oj]:w||{},[Mb]:S||{}},y?{[sj]:y}:{}))}}})(t,this._instance.persistence,r,i,o),this.be(n)}}override(t,n){n===void 0&&(n=!1),$o.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:n})}overrideFeatureFlags(t){if(!this._instance.__loaded||!this._instance.persistence)return $o.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(t===!1)return this._instance.persistence.unregister(Kl),this._instance.persistence.unregister(Uc),void this.be();if(t&&typeof t=="object"&&("flags"in t||"payloads"in t)){var n,r=t;if(this.ae=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(Kl);else if(r.flags)if(Mn(r.flags)){for(var i={},o=0;o<r.flags.length;o++)i[r.flags[o]]=!0;this._instance.persistence.register({[Kl]:i})}else this._instance.persistence.register({[Kl]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(Uc):r.payloads&&this._instance.persistence.register({[Uc]:r.payloads})),void this.be()}this.be()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.le){var{flags:n,flagVariants:r}=this.we();t(n,r)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,n){var r,i=(this._instance.get_property(Tp)||[]).find(l=>l.flagKey===t),o={["$feature_enrollment/"+t]:n},s={$feature_flag:t,$feature_enrollment:n,$set:o};i&&(s.$early_access_feature_name=i.name),this._instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(o,!1);var a=mt({},this.getFlagVariants(),{[t]:n});(r=this._instance.persistence)==null||r.register({[Rv]:Object.keys(aj(a)),[hu]:a}),this.be()}getEarlyAccessFeatures(t,n,r){n===void 0&&(n=!1);var i=this._instance.get_property(Tp),o=r?"&"+r.map(s=>"stage="+s).join("&"):"";if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+o),method:"GET",callback:s=>{var a;if(s.json){var l=s.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[Tp]:l}),t(l)}}})}we(){var t=this.getFlags(),n=this.getFlagVariants();return{flags:t.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,i)=>(r[i]=n[i],r),{})}}be(t){var{flags:n,flagVariants:r}=this.we();this.featureFlagEventHandlers.forEach(i=>i(n,r,{errorsLoading:t}))}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(od)||{};this._instance.register({[od]:mt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(od)}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0);var r=this._instance.get_property(Qa)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=mt({},r[i],t[i]),delete t[i]}),this._instance.register({[Qa]:mt({},r,t)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var n=this._instance.get_property(Qa)||{};this._instance.register({[Qa]:mt({},n,{[t]:{}})})}else this._instance.unregister(Qa)}}var Pne=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Tv{constructor(t){this.S=t,this.props={},this.ye=!1,this.Se=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(t),this.q=this.$e(t),this.load(),t.debug&&St.info("Persistence loaded",t.persistence,mt({},this.props)),this.update_config(t,t),this.save()}$e(t){Pne.indexOf(t.persistence.toLowerCase())===-1&&(St.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var n=t.persistence.toLowerCase();return n==="localstorage"&&Zn.O()?Zn:n==="localstorage+cookie"&&Qh.O()?Qh:n==="sessionstorage"&&pr.O()?pr:n==="memory"?yte:n==="cookie"?Es:Qh.O()?Qh:Es}properties(){var t={};return cn(this.props,function(n,r){if(r===hu&&Dn(n))for(var i=Object.keys(n),o=0;o<i.length;o++)t["$feature/"+i[o]]=n[i[o]];else a=r,l=!1,($a(s=Xee)?l:gC&&s.indexOf===gC?s.indexOf(a)!=-1:(cn(s,function(u){if(l||(l=u===a))return Hg}),l))||(t[r]=n);var s,a,l}),t}load(){if(!this.ke){var t=this.q.D(this.Se);t&&(this.props=Vn({},t))}}save(){this.ke||this.q.j(this.Se,this.props,this.xe,this.Ee,this.Ie,this.S.debug)}remove(){this.q.L(this.Se,!1),this.q.L(this.Se,!0)}clear(){this.remove(),this.props={}}register_once(t,n,r){if(Dn(t)){pt(n)&&(n="None"),this.xe=pt(r)?this.Pe:r;var i=!1;if(cn(t,(o,s)=>{this.props.hasOwnProperty(s)&&this.props[s]!==n||(this.props[s]=o,i=!0)}),i)return this.save(),!0}return!1}register(t,n){if(Dn(t)){this.xe=pt(n)?this.Pe:n;var r=!1;if(cn(t,(i,o)=>{t.hasOwnProperty(o)&&this.props[o]!==i&&(this.props[o]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.ye){var t=t5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);fu(r1(t))||this.register(t),this.ye=!0}}update_search_keyword(){var t;this.register((t=vt==null?void 0:vt.referrer)?r5(t):{})}update_referrer_info(){var t;this.register_once({$referrer:i5(),$referring_domain:vt!=null&&vt.referrer&&((t=Yu(vt.referrer))==null?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Fb]||this.props[zb]||this.register_once({[Hb]:o5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};cn([zb,Fb],s=>{var a=this.props[s];a&&cn(a,function(l,u){t["$initial_"+Rb(u)]=l})});var n,r,i=this.props[Hb];if(i){var o=(n=s5(i),r={},cn(n,function(s,a){r["$initial_"+Rb(a)]=s}),r);Vn(t,o)}return t}safe_merge(t){return cn(this.props,function(n,r){r in t||(t[r]=n)}),t}update_config(t,n){if(this.Pe=this.xe=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==n.persistence){var r=this.$e(t),i=this.props;this.clear(),this.q=r,this.props=i,this.save()}}set_disabled(t){this.ke=t,this.ke?this.remove():this.save()}set_cross_subdomain(t){t!==this.Ee&&(this.Ee=t,this.remove(),this.save())}set_secure(t){t!==this.Ie&&(this.Ie=t,this.remove(),this.save())}set_event_timer(t,n){var r=this.props[rd]||{};r[t]=n,this.props[rd]=r,this.save()}remove_event_timer(t){var n=(this.props[rd]||{})[t];return pt(n)||(delete this.props[rd][t],this.save()),n}get_property(t){return this.props[t]}set_property(t,n){this.props[t]=n,this.save()}}class l5{constructor(){this.Re={},this.Re={}}on(t,n){return this.Re[t]||(this.Re[t]=[]),this.Re[t].push(n),()=>{this.Re[t]=this.Re[t].filter(r=>r!==n)}}emit(t,n){for(var r of this.Re[t]||[])r(n);for(var i of this.Re["*"]||[])i(t,n)}}var em=function(e,t){if(!function(n){try{new RegExp(n)}catch(r){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(n){return!1}};class Za{constructor(t){this.Te=new l5,this.Me=(n,r)=>this.Ce(n,r)&&this.Oe(n,r)&&this.Fe(n,r),this.Ce=(n,r)=>r==null||!r.event||(n==null?void 0:n.event)===(r==null?void 0:r.event),this._instance=t,this.Ae=new Set,this.De=new Set}init(){var t;if(!pt((t=this._instance)==null?void 0:t.je)){var n;(n=this._instance)==null||n.je((r,i)=>{this.on(r,i)})}}register(t){var n,r;if(!pt((n=this._instance)==null?void 0:n.je)&&(t.forEach(s=>{var a,l;(a=this.De)==null||a.add(s),(l=s.steps)==null||l.forEach(u=>{var c;(c=this.Ae)==null||c.add((u==null?void 0:u.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var i,o=new Set;t.forEach(s=>{var a;(a=s.steps)==null||a.forEach(l=>{l!=null&&l.selector&&o.add(l==null?void 0:l.selector)})}),(i=this._instance)==null||i.autocapture.setElementSelectors(o)}}on(t,n){var r;n!=null&&t.length!=0&&(this.Ae.has(t)||this.Ae.has(n==null?void 0:n.event))&&this.De&&((r=this.De)==null?void 0:r.size)>0&&this.De.forEach(i=>{this.Le(n,i)&&this.Te.emit("actionCaptured",i.name)})}Ne(t){this.onAction("actionCaptured",n=>t(n))}Le(t,n){if((n==null?void 0:n.steps)==null)return!1;for(var r of n.steps)if(this.Me(t,r))return!0;return!1}onAction(t,n){return this.Te.on(t,n)}Oe(t,n){if(n!=null&&n.url){var r,i=t==null||(r=t.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!Za.ze(i,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static ze(t,n,r){switch(r){case"regex":return!!Re&&em(t,n);case"exact":return n===t;case"contains":var i=Za.Ue(n).replace(/_/g,".").replace(/%/g,".*");return em(t,i);default:return!1}}static Ue(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Fe(t,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.qe(t).some(o=>!(n!=null&&n.href&&!Za.ze(o.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||o.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Za.ze(o.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Za.ze(o.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var r,i=t==null||(r=t.properties)==null?void 0:r.$element_selectors;if(!i||!i.includes(n==null?void 0:n.selector))return!1}return!0}qe(t){return(t==null?void 0:t.properties.$elements)==null?[]:t==null?void 0:t.properties.$elements}}var Xn=Fr("[Surveys]");class One{constructor(t){this._instance=t,this.Be=new Map,this.He=new Map}register(t){var n;pt((n=this._instance)==null?void 0:n.je)||(this.We(t),this.Ge(t))}Ge(t){var n=t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.actions)&&((o=r.conditions)==null||(s=o.actions)==null||(a=s.values)==null?void 0:a.length)>0});n.length!==0&&(this.Je==null&&(this.Je=new Za(this._instance),this.Je.init(),this.Je.Ne(r=>{this.onAction(r)})),n.forEach(r=>{var i,o,s,a,l,u,c,f,h,p;r.conditions&&(i=r.conditions)!=null&&i.actions&&(o=r.conditions)!=null&&(s=o.actions)!=null&&s.values&&((a=r.conditions)==null||(l=a.actions)==null||(u=l.values)==null?void 0:u.length)>0&&((c=this.Je)==null||c.register(r.conditions.actions.values),(f=r.conditions)==null||(h=f.actions)==null||(p=h.values)==null||p.forEach(b=>{if(b&&b.name){var y=this.He.get(b.name);y&&y.push(r.id),this.He.set(b.name,y||[r.id])}}))}))}We(t){var n;t.filter(r=>{var i,o,s,a;return((i=r.conditions)==null?void 0:i.events)&&((o=r.conditions)==null||(s=o.events)==null||(a=s.values)==null?void 0:a.length)>0}).length!==0&&((n=this._instance)==null||n.je((r,i)=>{this.onEvent(r,i)}),t.forEach(r=>{var i,o,s;(i=r.conditions)==null||(o=i.events)==null||(s=o.values)==null||s.forEach(a=>{if(a&&a.name){var l=this.Be.get(a.name);l&&l.push(r.id),this.Be.set(a.name,l||[r.id])}})}))}onEvent(t,n){var r,i,o=((r=this._instance)==null||(i=r.persistence)==null?void 0:i.props[Jh])||[];if(t==="survey shown"&&n&&o.length>0){var s;Xn.info("survey event matched, removing survey from activated surveys",{event:t,eventPayload:n,existingActivatedSurveys:o});var a=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(a){var l=o.indexOf(a);l>=0&&(o.splice(l,1),this.Ve(o))}}else this.Be.has(t)&&(Xn.info("survey event matched, updating activated surveys",{event:t,surveys:this.Be.get(t)}),this.Ve(o.concat(this.Be.get(t)||[])))}onAction(t){var n,r,i=((n=this._instance)==null||(r=n.persistence)==null?void 0:r.props[Jh])||[];this.He.has(t)&&this.Ve(i.concat(this.He.get(t)||[]))}Ve(t){var n,r;(n=this._instance)==null||(r=n.persistence)==null||r.register({[Jh]:[...new Set(t)]})}getSurveys(){var t,n,r=(t=this._instance)==null||(n=t.persistence)==null?void 0:n.props[Jh];return r||[]}getEventToSurveys(){return this.Be}Ke(){return this.Je}}class $ne{constructor(t){this.Ye=null,this.Xe=!1,this.Qe=!1,this.Ze=[],this._instance=t,this._surveyEventReceiver=null}onRemoteConfig(t){var n=t.surveys;if(on(n))return Xn.warn("Decide not loaded yet. Not loading surveys.");var r=Mn(n);this.tr=r?n.length>0:n,Xn.info("decide response received, hasSurveys: "+this.tr),this.tr&&this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith("seenSurvey_")||r!=null&&r.startsWith("inProgressSurvey_"))&&t.push(r)}t.forEach(i=>localStorage.removeItem(i))}loadIfEnabled(){if(!this.Ye)if(this.Qe)Xn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Xn.info("Disabled. Not loading surveys.");else if(this.tr){var t=Ft==null?void 0:Ft.__PosthogExtensions__;if(t){this.Qe=!0;try{var n=t.generateSurveys;if(n)return void this.ir(n);var r=t.loadExternalDependency;if(!r)return void this.er("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",i=>{i||!t.generateSurveys?this.er("Could not load surveys script",i):this.ir(t.generateSurveys)})}catch(i){throw this.er("Error initializing surveys",i),i}finally{this.Qe=!1}}else Xn.error("PostHog Extensions not found.")}else Xn.info("No surveys to load.")}ir(t){this.Ye=t(this._instance),this._surveyEventReceiver=new One(this._instance),Xn.info("Surveys loaded successfully"),this.rr({isLoaded:!0})}er(t,n){Xn.error(t,n),this.rr({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.Ze.push(t),this.Ye&&this.rr({isLoaded:!0}),()=>{this.Ze=this.Ze.filter(n=>n!==t)}}getSurveys(t,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Xn.info("Disabled. Not loading surveys."),t([]);var r=this._instance.get_property(Db);if(r&&!n)return t(r,{isLoaded:!0});if(this.Xe)return t([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Xe=!0,this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var o;this.Xe=!1;var s=i.statusCode;if(s!==200||!i.json){var a="Surveys API could not be loaded, status: "+s;return Xn.error(a),t([],{isLoaded:!1,error:a})}var l,u=i.json.surveys||[],c=u.filter(f=>function(h){return!(!h.start_date||h.end_date)}(f)&&(function(h){var p,b,y;return!((p=h.conditions)==null||(b=p.events)==null||(y=b.values)==null||!y.length)}(f)||function(h){var p,b,y;return!((p=h.conditions)==null||(b=p.actions)==null||(y=b.values)==null||!y.length)}(f)));return c.length>0&&((l=this._surveyEventReceiver)==null||l.register(c)),(o=this._instance.persistence)==null||o.register({[Db]:u}),t(u,{isLoaded:!0})}})}catch(i){throw this.Xe=!1,i}}rr(t){for(var n of this.Ze)try{t.isLoaded?this.getSurveys(n):n([],t)}catch(r){Xn.error("Error in survey callback",r)}}getActiveMatchingSurveys(t,n){if(n===void 0&&(n=!1),!on(this.Ye))return this.Ye.getActiveMatchingSurveys(t,n);Xn.warn("init was not called")}sr(t){var n=null;return this.getSurveys(r=>{var i;n=(i=r.find(o=>o.id===t))!==null&&i!==void 0?i:null}),n}nr(t){if(on(this.Ye))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof t=="string"?this.sr(t):t;return n?this.Ye.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(on(this.Ye))return Xn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.nr(t);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(t,n){return on(this.Ye)?(Xn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(i=>{var o,s=(o=i.find(l=>l.id===t))!==null&&o!==void 0?o:null;if(s){var a=this.nr(s);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(t,n){if(on(this.Ye))Xn.warn("init was not called");else{var r=this.sr(t),i=vt==null?void 0:vt.querySelector(n);r?i?this.Ye.renderSurvey(r,i):Xn.warn("Survey element not found"):Xn.warn("Survey not found")}}}var lj=Fr("[RateLimiter]");class Mne{constructor(t){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var o=i.text;if(o&&o.length)try{(JSON.parse(o).quota_limited||[]).forEach(s=>{lj.info((s||"events")+" is quota limited."),this.serverLimits[s]=new Date().getTime()+6e4})}catch(s){return void lj.warn('could not rate limit - continuing. Error: "'+(s==null?void 0:s.message)+'"',{text:o})}},this.instance=t,this.captureEventsPerSecond=((n=t.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=t.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var n,r,i;t===void 0&&(t=!1);var o=new Date().getTime(),s=(n=(r=this.instance.persistence)==null?void 0:r.get_property(Bb))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:o};s.tokens+=(o-s.last)/1e3*this.captureEventsPerSecond,s.last=o,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var a=s.tokens<1;return a||t||(s.tokens=Math.max(0,s.tokens-1)),!a||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(Bb,s),{isRateLimited:a,remainingTokens:s.tokens}}isServerRateLimited(t){var n=this.serverLimits[t||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var qa=Fr("[RemoteConfig]");class Dne{constructor(t){this._instance=t}get remoteConfig(){var t,n;return(t=Ft._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.config}ar(t){var n,r;(n=Ft.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=Ft.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>t(this.remoteConfig)):(qa.error("PostHog Extensions not found. Cannot load remote config."),t())}lr(t){this._instance._e({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{t(n.json)}})}load(){try{if(this.remoteConfig)return qa.info("Using preloaded remote config",this.remoteConfig),void this.me(this.remoteConfig);if(this._instance.config.advanced_disable_decide)return void qa.warn("Remote config is disabled. Falling back to local config.");this.ar(t=>{if(!t)return qa.info("No config found after loading remote JS config. Falling back to JSON."),void this.lr(n=>{this.me(n)});this.me(t)})}catch(t){qa.error("Error loading remote config",t)}}me(t){t?this._instance.config.__preview_remote_config?(this._instance.me(t),t.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):qa.info("__preview_remote_config is disabled. Logging config instead",t):qa.error("Failed to fetch remote config from PostHog.")}}var Lne=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=e.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),$a(a)||(n>t&&(o+=e.substring(t,n)),o+=a,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o},Bne=!!Nb||!!Ab,uj="text/plain",tm=(e,t)=>{var[n,r]=e.split("?"),i=mt({},t);r==null||r.split("&").forEach(s=>{var[a]=s.split("=");delete i[a]});var o=ote(i);return n+"?"+(o=o?(r?r+"&":"")+o:r)},ld=(e,t)=>JSON.stringify(e,(n,r)=>typeof r=="bigint"?r.toString():r,t),Iv=e=>{var{data:t,compression:n}=e;if(t){if(n===ao.GZipJS){var r=PI(OI(ld(t)),{mtime:0}),i=new Blob([r],{type:uj});return{contentType:uj,body:i,estimatedSize:i.size}}if(n===ao.Base64){var o=function(l){var u,c,f,h,p,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=0,_=0,m="",v=[];if(!l)return l;l=Lne(l);do u=(p=l.charCodeAt(y++)<<16|l.charCodeAt(y++)<<8|l.charCodeAt(y++))>>18&63,c=p>>12&63,f=p>>6&63,h=63&p,v[_++]=b.charAt(u)+b.charAt(c)+b.charAt(f)+b.charAt(h);while(y<l.length);switch(m=v.join(""),l.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}(ld(t)),s=(l=>"data="+encodeURIComponent(typeof l=="string"?l:ld(l)))(o);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var a=ld(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},xd=[];Ab&&xd.push({transport:"fetch",method:e=>{var t,n,{contentType:r,body:i,estimatedSize:o}=(t=Iv(e))!==null&&t!==void 0?t:{},s=new Headers;cn(e.headers,function(c,f){s.append(f,c)}),r&&s.append("Content-Type",r);var a=e.url,l=null;if(mC){var u=new mC;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),e.timeout)}}Ab(a,mt({method:(e==null?void 0:e.method)||"GET",headers:s,keepalive:e.method==="POST"&&(o||0)<52428.8,body:i,signal:(n=l)==null?void 0:n.signal},e.fetchOptions)).then(c=>c.text().then(f=>{var h={statusCode:c.status,text:f};if(c.status===200)try{h.json=JSON.parse(f)}catch(p){St.error(p)}e.callback==null||e.callback(h)})).catch(c=>{St.error(c),e.callback==null||e.callback({statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Nb&&xd.push({transport:"XHR",method:e=>{var t,n=new Nb;n.open(e.method||"GET",e.url,!0);var{contentType:r,body:i}=(t=Iv(e))!==null&&t!==void 0?t:{};cn(e.headers,function(o,s){n.setRequestHeader(s,o)}),r&&n.setRequestHeader("Content-Type",r),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch(s){}e.callback==null||e.callback(o)}},n.send(i)}}),xi!=null&&xi.sendBeacon&&xd.push({transport:"sendBeacon",method:e=>{var t=tm(e.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=Iv(e))!==null&&n!==void 0?n:{},o=typeof i=="string"?new Blob([i],{type:r}):i;xi.sendBeacon(t,o)}catch(s){}}});var n_=3e3;class Fne{constructor(t,n){this.ur=!0,this.hr=[],this.dr=zi((n==null?void 0:n.flush_interval_ms)||n_,250,5e3,"flush interval",n_),this.vr=t}enqueue(t){this.hr.push(t),this.cr||this.pr()}unload(){this.gr();var t=this.hr.length>0?this._r():{},n=Object.values(t);[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.vr(mt({},r,{transport:"sendBeacon"}))})}enable(){this.ur=!1,this.pr()}pr(){var t=this;this.ur||(this.cr=setTimeout(()=>{if(this.gr(),this.hr.length>0){var n=this._r(),r=function(o){var s=n[o],a=new Date().getTime();s.data&&Mn(s.data)&&cn(s.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),t.vr(s)};for(var i in n)r(i)}},this.dr))}gr(){clearTimeout(this.cr),this.cr=void 0}_r(){var t={};return cn(this.hr,n=>{var r,i=n,o=(i?i.batchKey:null)||i.url;pt(t[o])&&(t[o]=mt({},i,{data:[]})),(r=t[o].data)==null||r.push(i.data)}),this.hr=[],t}}var zne=["retriesPerformedSoFar"];class Hne{constructor(t){this.mr=!1,this.br=3e3,this.hr=[],this._instance=t,this.hr=[],this.wr=!0,!pt(Re)&&"onLine"in Re.navigator&&(this.wr=Re.navigator.onLine,jn(Re,"online",()=>{this.wr=!0,this.Xi()}),jn(Re,"offline",()=>{this.wr=!1}))}get length(){return this.hr.length}retriableRequest(t){var{retriesPerformedSoFar:n}=t,r=sI(t,zne);Ir(n)&&n>0&&(r.url=tm(r.url,{retry_count:n})),this._instance._e(mt({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n!=null?n:0)<10?this.yr(mt({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(i)}}))}yr(t){var n=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=n+1;var r=function(s){var a=3e3*Math.pow(2,s),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),i=Date.now()+r;this.hr.push({retryAt:i,requestOptions:t});var o="Enqueued failed request for retry in "+r;navigator.onLine||(o+=" (Browser is offline)"),St.warn(o),this.mr||(this.mr=!0,this.Sr())}Sr(){this.$r&&clearTimeout(this.$r),this.$r=setTimeout(()=>{this.wr&&this.hr.length>0&&this.Xi(),this.Sr()},this.br)}Xi(){var t=Date.now(),n=[],r=this.hr.filter(o=>o.retryAt<t||(n.push(o),!1));if(this.hr=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:t}of(this.$r&&(clearTimeout(this.$r),this.$r=void 0),this.hr))try{this._instance._e(mt({},t,{transport:"sendBeacon"}))}catch(n){St.error(n)}this.hr=[]}}class Une{constructor(t){this.kr=()=>{var n,r,i,o;this.Er||(this.Er={});var s=this.scrollElement(),a=this.scrollY(),l=s?Math.max(0,s.scrollHeight-s.clientHeight):0,u=a+((s==null?void 0:s.clientHeight)||0),c=(s==null?void 0:s.scrollHeight)||0;this.Er.lastScrollY=Math.ceil(a),this.Er.maxScrollY=Math.max(a,(n=this.Er.maxScrollY)!==null&&n!==void 0?n:0),this.Er.maxScrollHeight=Math.max(l,(r=this.Er.maxScrollHeight)!==null&&r!==void 0?r:0),this.Er.lastContentY=u,this.Er.maxContentY=Math.max(u,(i=this.Er.maxContentY)!==null&&i!==void 0?i:0),this.Er.maxContentHeight=Math.max(c,(o=this.Er.maxContentHeight)!==null&&o!==void 0?o:0)},this._instance=t}getContext(){return this.Er}resetContext(){var t=this.Er;return setTimeout(this.kr,0),t}startMeasuringScrollPosition(){jn(Re,"scroll",this.kr,{capture:!0}),jn(Re,"scrollend",this.kr,{capture:!0}),jn(Re,"resize",this.kr)}scrollElement(){if(!this._instance.config.scroll_root_selector)return Re==null?void 0:Re.document.documentElement;var t=Mn(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of t){var r=Re==null?void 0:Re.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return Re&&(Re.scrollY||Re.pageYOffset||Re.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return Re&&(Re.scrollX||Re.pageXOffset||Re.document.documentElement.scrollLeft)||0}}var Wne=e=>o5(e==null?void 0:e.config.mask_personal_data_properties,e==null?void 0:e.config.custom_personal_data_properties);class Vne{constructor(t,n,r,i){this.Ir=o=>{var s=this.Pr();if(!s||s.sessionId!==o){var a={sessionId:o,props:this.Rr(this._instance)};this.Tr.register({[Lb]:a})}},this._instance=t,this.Mr=n,this.Tr=r,this.Rr=i||Wne,this.Mr.onSessionId(this.Ir)}Pr(){return this.Tr.props[Lb]}getSetOnceProps(){var t,n=(t=this.Pr())==null?void 0:t.props;return n?"r"in n?s5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var t={};return cn(r1(this.getSetOnceProps()),(n,r)=>{r==="$current_url"&&(r="url"),t["$session_entry_"+Rb(r)]=n}),t}}var cj=Fr("[SessionId]");class qne{constructor(t,n,r){var i;if(this.Cr=[],!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=t.config,this.Tr=t.persistence,this.oi=void 0,this.kt=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Or=n||ia,this.Fr=r||ia;var o=this.S.persistence_name||this.S.token,s=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*zi(s,60,36e3,"session_idle_timeout_seconds",1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ar(),this.Dr="ph_"+o+"_window_id",this.jr="ph_"+o+"_primary_window_exists",this.Lr()){var a=pr.D(this.Dr),l=pr.D(this.jr);a&&!l?this.oi=a:pr.L(this.Dr),pr.j(this.jr,!0)}if((i=this.S.bootstrap)!=null&&i.sessionID)try{var u=(c=>{var f=c.replace(/-/g,"");if(f.length!==32)throw new Error("Not a valid UUID");if(f[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(f.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Nr(this.S.bootstrap.sessionID,new Date().getTime(),u)}catch(c){cj.error("Invalid sessionID in bootstrap",c)}this.zr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return pt(this.Cr)&&(this.Cr=[]),this.Cr.push(t),this.kt&&t(this.kt,this.oi),()=>{this.Cr=this.Cr.filter(n=>n!==t)}}Lr(){return this.S.persistence!=="memory"&&!this.Tr.ke&&pr.O()}Ur(t){t!==this.oi&&(this.oi=t,this.Lr()&&pr.j(this.Dr,t))}qr(){return this.oi?this.oi:this.Lr()?pr.D(this.Dr):null}Nr(t,n,r){t===this.kt&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.kt=t,this.Tr.register({[Ug]:[n,t,r]}))}Br(){if(this.kt&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.kt,this._sessionStartTimestamp];var t=this.Tr.props[Ug];return Mn(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.Nr(null,null,null)}zr(){jn(Re,"beforeunload",()=>{this.Lr()&&pr.L(this.jr)},{capture:!1})}checkAndGetSessionAndWindowId(t,n){if(t===void 0&&(t=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[i,o,s]=this.Br(),a=this.qr(),l=Ir(s)&&s>0&&Math.abs(r-s)>864e5,u=!1,c=!o,f=!t&&Math.abs(r-i)>this.sessionTimeoutMs;c||f||l?(o=this.Or(),a=this.Fr(),cj.info("new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:c,activityTimeout:f,sessionPastMaximumLength:l}}),s=r,u=!0):a||(a=this.Fr(),u=!0);var h=i===0||!t||l?r:i,p=s===0?new Date().getTime():s;return this.Ur(a),this.Nr(o,h,p),t||this.Ar(),u&&this.Cr.forEach(b=>b(o,a,u?{noSessionId:c,activityTimeout:f,sessionPastMaximumLength:l}:void 0)),{sessionId:o,windowId:a,sessionStartTimestamp:p,changeReason:u?{noSessionId:c,activityTimeout:f,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}Ar(){clearTimeout(this.Hr),this.Hr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var Kne=["$set_once","$set"],Gs=Fr("[SiteApps]");class Gne{constructor(t){this._instance=t,this.Wr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Gr(t,n){if(n){var r=this.globalsForEvent(n);this.Wr.push(r),this.Wr.length>1e3&&(this.Wr=this.Wr.slice(10))}}get siteAppLoaders(){var t,n;return(t=Ft._POSTHOG_REMOTE_CONFIG)==null||(n=t[this._instance.config.token])==null?void 0:n.siteApps}init(){if(this.isEnabled){var t=this._instance.je(this.Gr.bind(this));this.Jr=()=>{t(),this.Wr=[],this.Jr=void 0}}}globalsForEvent(t){var n,r,i,o,s,a,l;if(!t)throw new Error("Event payload is required");var u={},c=this._instance.get_property("$groups")||[],f=this._instance.get_property("$stored_group_properties")||{};for(var[h,p]of Object.entries(f))u[h]={id:c[h],type:h,properties:p};var{$set_once:b,$set:y}=t;return{event:mt({},sI(t,Kne),{properties:mt({},t.properties,y?{$set:mt({},(n=(r=t.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},y)}:{},b?{$set_once:mt({},(i=(o=t.properties)==null?void 0:o.$set_once)!==null&&i!==void 0?i:{},b)}:{}),elements_chain:(s=(a=t.properties)==null?void 0:a.$elements_chain)!==null&&s!==void 0?s:"",distinct_id:(l=t.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(t){var n=this.apps[t.id],r=()=>{var a;!n.errored&&this.Wr.length&&(Gs.info("Processing "+this.Wr.length+" events for site app with id "+t.id),this.Wr.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.Jr)==null||a.call(this))},i=!1,o=a=>{n.errored=!a,n.loaded=!0,Gs.info("Site app with id "+t.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:s}=t.init({posthog:this._instance,callback:a=>{o(a)}});s&&(n.processEvent=s),i=!0}catch(a){Gs.error("Error while initializing PostHog app with config id "+t.id,a),o(!1)}if(i&&n.loaded)try{r()}catch(a){Gs.error("Error while processing buffered events PostHog app with config id "+t.id,a),n.errored=!0}}Vr(){var t=this.siteAppLoaders||[];for(var n of t)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of t)this.setupSiteApp(r)}Kr(t){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(t);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(i){Gs.error("Error while processing event "+t.event+" for site app "+r.id,i)}}}onRemoteConfig(t){var n,r,i,o=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.Vr(),void this._instance.on("eventCaptured",u=>this.Kr(u))):void Gs.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Jr)==null||r.call(this),(i=t.siteApps)!=null&&i.length)if(this.isEnabled){var s=function(u,c){var f;Ft["__$$ph_site_app_"+u]=o._instance,(f=Ft.__PosthogExtensions__)==null||f.loadSiteApp==null||f.loadSiteApp(o._instance,c,h=>{if(h)return Gs.error("Error while initializing PostHog app with config id "+u,h)})};for(var{id:a,url:l}of t.siteApps)s(a,l)}else Gs.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var ol,Yne=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","bytespider"],dj=function(e,t){if(!e)return!1;var n=e.toLowerCase();return Yne.concat(t||[]).some(r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1})},u5=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&dj(n,t))return!0;try{var r=e==null?void 0:e.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>dj(i==null?void 0:i.brand,t)))return!0}catch(i){}return!!e.webdriver};function fj(e,t,n){return ld({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}(function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"})(ol||(ol={}));var hj="i.posthog.com";class Xne{constructor(t){this.Yr={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}get uiHost(){var t,n=(t=this.instance.config.ui_host)==null?void 0:t.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+hj,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.Yr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=ol.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Yr[this.apiHost]=ol.EU:this.Yr[this.apiHost]=ol.CUSTOM),this.Yr[this.apiHost]}endpointFor(t,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),t==="ui")return this.uiHost+n;if(this.region===ol.CUSTOM)return this.apiHost+n;var r=hj+n;switch(t){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var Jne={icontains:(e,t)=>!!Re&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!Re&&t.href.toLowerCase().indexOf(e.toLowerCase())===-1,regex:(e,t)=>!!Re&&em(t.href,e),not_regex:(e,t)=>!!Re&&!em(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class Nr{constructor(t){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments(i=>{Nr.Xr("retrieved web experiments from the server"),n.Qr=new Map,i.forEach(o=>{if(o.feature_flag_key){var s;n.Qr&&(Nr.Xr("setting flag key ",o.feature_flag_key," to web experiment ",o),(s=n.Qr)==null||s.set(o.feature_flag_key,o));var a=n._instance.getFeatureFlag(o.feature_flag_key);Gn(a)&&o.variants[a]&&n.Zr(o.name,a,o.variants[a].transforms)}else if(o.variants)for(var l in o.variants){var u=o.variants[l];Nr.ts(u)&&n.Zr(o.name,l,u.transforms)}})},r)},this._instance=t,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(t){if(this._is_bot())Nr.Xr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(on(this.Qr))return this.Qr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();Nr.Xr("applying feature flags",t),t.forEach(n=>{var r;if(this.Qr&&(r=this.Qr)!=null&&r.has(n)){var i,o=this._instance.getFeatureFlag(n),s=(i=this.Qr)==null?void 0:i.get(n);o&&s!=null&&s.variants[o]&&this.Zr(s.name,o,s.variants[o].transforms)}})}}previewWebExperiment(){var t=Nr.getWindowLocation();if(t!=null&&t.search){var n=Kg(t==null?void 0:t.search,"__experiment_id"),r=Kg(t==null?void 0:t.search,"__experiment_variant");n&&r&&(Nr.Xr("previewing web experiments "+n+" && "+r),this.getWebExperiments(i=>{this.es(parseInt(n),r,i)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,n,r){if(this._instance.config.disable_web_experiments&&!r)return t([]);var i=this._instance.get_property("$web_experiments");if(i&&!n)return t(i);this._instance._e({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:o=>{if(o.statusCode!==200||!o.json)return t([]);var s=o.json.experiments||[];return t(s)}})}es(t,n,r){var i=r.filter(o=>o.id===t);i&&i.length>0&&(Nr.Xr("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this.Zr(i[0].name,n,i[0].variants[n].transforms))}static ts(t){return!on(t.conditions)&&Nr.rs(t)&&Nr.ss(t)}static rs(t){var n;if(on(t.conditions)||on((n=t.conditions)==null?void 0:n.url))return!0;var r,i,o,s=Nr.getWindowLocation();return!!s&&((r=t.conditions)==null||!r.url||Jne[(i=(o=t.conditions)==null?void 0:o.urlMatchType)!==null&&i!==void 0?i:"icontains"](t.conditions.url,s))}static getWindowLocation(){return Re==null?void 0:Re.location}static ss(t){var n;if(on(t.conditions)||on((n=t.conditions)==null?void 0:n.utm))return!0;var r=t5();if(r.utm_source){var i,o,s,a,l,u,c,f,h,p,b,y,_,m,v,w,S=(i=t.conditions)==null||(o=i.utm)==null||!o.utm_campaign||((s=t.conditions)==null||(a=s.utm)==null?void 0:a.utm_campaign)==r.utm_campaign,k=(l=t.conditions)==null||(u=l.utm)==null||!u.utm_source||((c=t.conditions)==null||(f=c.utm)==null?void 0:f.utm_source)==r.utm_source,A=(h=t.conditions)==null||(p=h.utm)==null||!p.utm_medium||((b=t.conditions)==null||(y=b.utm)==null?void 0:y.utm_medium)==r.utm_medium,T=(_=t.conditions)==null||(m=_.utm)==null||!m.utm_term||((v=t.conditions)==null||(w=v.utm)==null?void 0:w.utm_term)==r.utm_term;return S&&A&&T&&k}return!1}static Xr(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];St.info("[WebExperiments] "+t,r)}Zr(t,n,r){this._is_bot()?Nr.Xr("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(i=>{if(i.selector){var o;Nr.Xr("applying transform of variant "+n+" for experiment "+t+" ",i);var s=(o=document)==null?void 0:o.querySelectorAll(i.selector);s==null||s.forEach(a=>{var l=a;i.html&&(l.innerHTML=i.html),i.css&&l.setAttribute("style",i.css)})}}):Nr.Xr("Control variants leave the page unmodified.")}_is_bot(){return xi&&this._instance?u5(xi,this._instance.config.custom_blocked_useragents):void 0}}var Sd={},r_=()=>{},Yl="posthog",c5=!Bne&&(ti==null?void 0:ti.indexOf("MSIE"))===-1&&(ti==null?void 0:ti.indexOf("Mozilla"))===-1,pj=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:Yee(vt==null?void 0:vt.location),persistence:"localStorage+cookie",persistence_name:"",loaded:r_,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:ri&&Gn(ri==null?void 0:ri.search)&&ri.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(Re==null||(e=Re.location)==null?void 0:e.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var n="Bad HTTP status: "+t.statusCode+" "+t.text;St.error(n)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:n_},_onCapture:r_}},gj=e=>{var t={};pt(e.process_person)||(t.person_profiles=e.process_person),pt(e.xhr_headers)||(t.request_headers=e.xhr_headers),pt(e.cookie_name)||(t.persistence_name=e.cookie_name),pt(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),pt(e.store_google)||(t.save_campaign_params=e.store_google),pt(e.verbose)||(t.debug=e.verbose);var n=Vn({},t,e);return Mn(e.property_blacklist)&&(pt(e.property_denylist)?n.property_denylist=e.property_blacklist:Mn(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:St.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class Qne{constructor(){this.__forceAllowLocalhost=!1}get ns(){return this.__forceAllowLocalhost}set ns(t){St.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}class wy{get decideEndpointWasHit(){var t,n;return(t=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&t!==void 0&&t}constructor(){this.webPerformance=new Qne,this.os=!1,this.version=gs.LIB_VERSION,this.ls=new l5,this.config=pj(),this.SentryIntegration=lne,this.sentryIntegration=t=>function(n,r){var i=LI(n,r);return{name:DI,processEvent:o=>i(o)}}(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.us=!1,this.hs=null,this.ds=null,this.vs=null,this.featureFlags=new Ine(this),this.toolbar=new cne(this),this.scrollManager=new Une(this),this.pageViewManager=new mne(this),this.surveys=new $ne(this),this.experiments=new Nr(this),this.exceptions=new yne(this),this.rateLimiter=new Mne(this),this.requestRouter=new Xne(this),this.consent=new vte(this),this.people={set:(t,n,r)=>{var i=Gn(t)?{[t]:n}:t;this.setPersonProperties(i),r==null||r({})},set_once:(t,n,r)=>{var i=Gn(t)?{[t]:n}:t;this.setPersonProperties(void 0,i),r==null||r({})}},this.on("eventCaptured",t=>St.info('send "'+(t==null?void 0:t.event)+'"',t))}init(t,n,r){if(r&&r!==Yl){var i,o=(i=Sd[r])!==null&&i!==void 0?i:new wy;return o._init(t,n,r),Sd[r]=o,Sd[Yl][r]=o,o}return this._init(t,n,r)}_init(t,n,r){var i,o;if(n===void 0&&(n={}),pt(t)||Tb(t))return St.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return St.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.cs=[],n.person_profiles&&(this.ds=n.person_profiles),this.set_config(Vn({},pj(),gj(n),{name:r,token:t})),this.config.on_xhr_error&&St.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:ao.GZipJS,this.persistence=new Tv(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Tv(mt({},this.config,{persistence:"sessionStorage"}));var s=mt({},this.persistence.props),a=mt({},this.sessionPersistence.props);if(this.fs=new Fne(m=>this.ps(m),this.config.request_queue_config),this.gs=new Hne(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new qne(this),this.sessionPropsManager=new Vne(this,this.sessionManager,this.persistence)),new fne(this).startIfEnabledOrStop(),this.siteApps=new Gne(this),(i=this.siteApps)==null||i.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new sne(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new ute(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new gne(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new hne(this),this.exceptionObserver=new _te(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new SI(this,bte),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new $te(this),this.historyAutocapture.startIfEnabled(),gs.DEBUG=gs.DEBUG||this.config.debug,gs.DEBUG&&St.info("Starting in debug mode",{this:this,config:n,thisC:mt({},this.config),p:s,s:a}),this._s(),((o=n.bootstrap)==null?void 0:o.distinctID)!==void 0){var l,u,c=this.config.get_device_id(ia()),f=(l=n.bootstrap)!=null&&l.isIdentifiedID?c:n.bootstrap.distinctID;this.persistence.set_property(ls,(u=n.bootstrap)!=null&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:f})}if(this.bs()){var h,p,b=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlags)||{}).filter(m=>{var v,w;return!((v=n.bootstrap)==null||(w=v.featureFlags)==null||!w[m])}).reduce((m,v)=>{var w,S;return m[v]=((w=n.bootstrap)==null||(S=w.featureFlags)==null?void 0:S[v])||!1,m},{}),y=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(m=>b[m]).reduce((m,v)=>{var w,S,k,A;return(w=n.bootstrap)!=null&&(S=w.featureFlagPayloads)!=null&&S[v]&&(m[v]=(k=n.bootstrap)==null||(A=k.featureFlagPayloads)==null?void 0:A[v]),m},{});this.featureFlags.receivedFeatureFlags({featureFlags:b,featureFlagPayloads:y})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:RC,$device_id:null},"");else if(!this.get_distinct_id()){var _=this.config.get_device_id(ia());this.register_once({distinct_id:_,$device_id:_},""),this.persistence.set_property(ls,"anonymous")}return jn(Re,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?ane(this,()=>this.ws()):this.ws(),Ui(this.config._onCapture)&&this.config._onCapture!==r_&&(St.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",m=>this.config._onCapture(m.event,m))),this}me(t){var n,r,i,o,s,a,l,u;if(!vt||!vt.body)return St.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.me(t)},500);this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=qt(t.supportedCompression,ao.GZipJS)?ao.GZipJS:qt(t.supportedCompression,ao.Base64)?ao.Base64:void 0),(n=t.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.ds?this.ds:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(t),(i=this.sessionRecording)==null||i.onRemoteConfig(t),(o=this.autocapture)==null||o.onRemoteConfig(t),(s=this.heatmaps)==null||s.onRemoteConfig(t),this.surveys.onRemoteConfig(t),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(t),(l=this.exceptionObserver)==null||l.onRemoteConfig(t),(u=this.deadClicksAutocapture)==null||u.onRemoteConfig(t)}ws(){try{this.config.loaded(this)}catch(t){St.critical("`loaded` function failed",t)}this.ys(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Ss()},1),new Dne(this).load(),this.featureFlags.decide()}ys(){var t;this.has_opted_out_capturing()||this.config.request_batching&&((t=this.fs)==null||t.enable())}_dom_loaded(){this.has_opted_out_capturing()||ga(this.__request_queue,t=>this.ps(t)),this.__request_queue=[],this.ys()}_handle_unload(){var t,n;this.config.request_batching?(this.$s()&&this.capture("$pageleave"),(t=this.fs)==null||t.unload(),(n=this.gs)==null||n.unload()):this.$s()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_e(t){this.__loaded&&(c5?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=tm(t.url,{ip:this.config.ip?1:0}),t.headers=mt({},this.config.request_headers),t.compression=t.compression==="best-available"?this.compression:t.compression,t.fetchOptions=t.fetchOptions||this.config.fetch_options,(n=>{var r,i,o,s=mt({},n);s.timeout=s.timeout||6e4,s.url=tm(s.url,{_:new Date().getTime().toString(),ver:gs.LIB_VERSION,compression:s.compression});var a=(r=s.transport)!==null&&r!==void 0?r:"fetch",l=(i=(o=aI(xd,u=>u.transport===a))==null?void 0:o.method)!==null&&i!==void 0?i:xd[0].method;if(!l)throw new Error("No available transport method");l(s)})(mt({},t,{callback:n=>{var r,i;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,n)),t.callback==null||t.callback(n)}}))))}ps(t){this.gs?this.gs.retriableRequest(t):this._e(t)}_execute_array(t){var n,r=[],i=[],o=[];ga(t,a=>{a&&(n=a[0],Mn(n)?o.push(a):Ui(a)?a.call(this):Mn(a)&&n==="alias"?r.push(a):Mn(a)&&n.indexOf("capture")!==-1&&Ui(this[n])?o.push(a):i.push(a))});var s=function(a,l){ga(a,function(u){if(Mn(u[0])){var c=l;cn(u,function(f){c=c[f[0]].apply(c,f.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};s(r,this),s(i,this),s(o,this)}bs(){var t,n;return((t=this.config.bootstrap)==null?void 0:t.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.fs){if(!this.consent.isOptedOut())if(!pt(t)&&Gn(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){n!=null&&n.$current_url&&!Gn(n==null?void 0:n.$current_url)&&(St.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,a=(r==null?void 0:r.timestamp)||s,l=ia(),u={uuid:l,event:t,properties:this.Di(t,n||{},a,l)};o&&(u.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r!=null&&r.$set&&(u.$set=r==null?void 0:r.$set);var c=this.ks(r==null?void 0:r.$set_once);c&&(u.$set_once=c),(u=Kee(u,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,pt(r==null?void 0:r.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=s);var f=mt({},u.properties.$set,u.$set);if(fu(f)||this.setPersonPropertiesForFlags(f),!on(this.config.before_send)){var h=this.xs(u);if(!h)return;u=h}this.ls.emit("eventCaptured",u);var p={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.ps(p):this.fs.enqueue(p),u}St.critical("This capture call is ignored due to client rate limiting.")}}else St.error("No event name provided to posthog.capture")}else St.uninitializedWarning("posthog.capture")}je(t){return this.on("eventCaptured",n=>t(n.event,n))}Di(t,n,r,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=this.persistence.remove_event_timer(t),s=mt({},n);if(s.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(s.$cookieless_mode=!0),t==="$snapshot"){var a=mt({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=a.distinct_id,(!Gn(s.distinct_id)&&!Ir(s.distinct_id)||Tb(s.distinct_id))&&St.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var l,u=Rne(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:c,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=c,s.$window_id=f}this.sessionPropsManager&&Vn(s,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&Vn(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=(h=this.gs)==null?void 0:h.length}catch(_){s.$sdk_debug_error_capturing_properties=String(_)}if(this.requestRouter.region===ol.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),l=t==="$pageview"?this.pageViewManager.doPageView(r,i):t==="$pageleave"?this.pageViewManager.doPageLeave(r):this.pageViewManager.doEvent(),s=Vn(s,l),t==="$pageview"&&vt&&(s.title=vt.title),!pt(o)){var p=r.getTime()-o;s.$duration=parseFloat((p/1e3).toFixed(3))}ti&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Vn({},u,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Mn(this.config.property_denylist)?cn(this.config.property_denylist,function(_){delete s[_]}):St.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var b=this.config.sanitize_properties;b&&(St.error("sanitize_properties is deprecated. Use before_send instead"),s=b(s,t));var y=this.Es();return s.$process_person_profile=y,y&&this.Is("_calculate_event_properties"),s}ks(t){var n;if(!this.persistence||!this.Es()||this.os)return t;var r=this.persistence.get_initial_props(),i=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),o=Vn({},r,i||{},t||{}),s=this.config.sanitize_properties;return s&&(St.error("sanitize_properties is deprecated. Use before_send instead"),o=s(o,"$set_once")),this.os=!0,fu(o)?void 0:o}register(t,n){var r;(r=this.persistence)==null||r.register(t,n)}register_once(t,n,r){var i;(i=this.persistence)==null||i.register_once(t,n,r)}register_for_session(t){var n;(n=this.sessionPersistence)==null||n.register(t)}unregister(t){var n;(n=this.persistence)==null||n.unregister(t)}unregister_for_session(t){var n;(n=this.sessionPersistence)==null||n.unregister(t)}Ps(t,n){this.register({[t]:n})}getFeatureFlag(t,n){return this.featureFlags.getFeatureFlag(t,n)}getFeatureFlagPayload(t){var n=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(n)}catch(r){return n}}isFeatureEnabled(t,n){return this.featureFlags.isFeatureEnabled(t,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(t,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,n)}getEarlyAccessFeatures(t,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(t,n,r)}on(t,n){return this.ls.on(t,n)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(t))!==null&&n!==void 0?n:()=>{}}getSurveys(t,n){n===void 0&&(n=!1),this.surveys.getSurveys(t,n)}getActiveMatchingSurveys(t,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(t,n)}renderSurvey(t,n){this.surveys.renderSurvey(t,n)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(t,n)}identify(t,n,r){if(!this.__loaded||!this.persistence)return St.uninitializedWarning("posthog.identify");if(Ir(t)&&(t=t.toString(),St.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t){if(["distinct_id","distinctid"].includes(t.toLowerCase()))St.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(this.Is("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var o=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}t!==i&&t!==this.get_property(nd)&&(this.unregister(nd),this.register({distinct_id:t}));var s=(this.persistence.get_property(ls)||"anonymous")==="anonymous";t!==i&&s?(this.persistence.set_property(ls,"identified"),this.setPersonPropertiesForFlags(mt({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.vs=fj(t,n,r),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),t!==i&&(this.reloadFeatureFlags(),this.unregister(Wg))}}else St.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,n){if((t||n)&&this.Is("posthog.setPersonProperties")){var r=fj(this.get_distinct_id(),t,n);this.vs!==r?(this.setPersonPropertiesForFlags(mt({},n||{},t||{})),this.capture("$set",{$set:t||{},$set_once:n||{}}),this.vs=r):St.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,n,r){if(t&&n){if(this.Is("posthog.group")){var i=this.getGroups();i[t]!==n&&this.resetGroupPropertiesForFlags(t),this.register({$groups:mt({},i,{[t]:n})}),r&&(this.capture("$groupidentify",{$group_type:t,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[t]:r})),i[t]===n||r||this.reloadFeatureFlags()}}else St.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(t,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,n){n===void 0&&(n=!0),this.Is("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,n)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var n,r,i,o;if(St.info("reset"),!this.__loaded)return St.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),(i=this.persistence)==null||i.set_property(ls,"anonymous"),(o=this.sessionManager)==null||o.resetSessionId(),this.vs=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:RC,$device_id:null},"");else{var a=this.config.get_device_id(ia());this.register_once({distinct_id:a,$device_id:t?a:s},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,n;return(t=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(t!=null&&t.withTimestamp&&r){var o,s=(o=t.timestampLookBack)!==null&&o!==void 0?o:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-s,0)}return i}alias(t,n){return t===this.get_property(lI)?(St.critical("Attempting to create alias for existing People user - aborting."),-2):this.Is("posthog.alias")?(pt(n)&&(n=this.get_distinct_id()),t!==n?(this.Ps(nd,t),this.capture("$create_alias",{alias:t,distinct_id:n})):(St.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var n,r,i,o,s=mt({},this.config);Dn(t)&&(Vn(this.config,gj(t)),(n=this.persistence)==null||n.update_config(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Tv(mt({},this.config,{persistence:"sessionStorage"})),Zn.O()&&Zn.A("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(gs.DEBUG=!0,St.info("set_config",JSON.stringify({config:t,oldConfig:s,newConfig:mt({},this.config)},null,2))),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._s())}startSessionRecording(t){var n=t===!0,r={sampling:n||!(t==null||!t.sampling),linked_flag:n||!(t==null||!t.linked_flag),url_trigger:n||!(t==null||!t.url_trigger),event_trigger:n||!(t==null||!t.event_trigger)};if(Object.values(r).some(Boolean)){var i,o,s,a,l;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((o=this.sessionRecording)==null||o.overrideSampling()),r.linked_flag&&((s=this.sessionRecording)==null||s.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!((t=this.sessionRecording)==null||!t.started)}captureException(t,n){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(mt({},Ote((i=>i instanceof Error)(t)?{error:t,event:t.message}:{event:t},{syntheticException:r}),n))}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var n;return(n=this.persistence)==null?void 0:n.props[t]}getSessionProperty(t){var n;return(n=this.sessionPersistence)==null?void 0:n.props[t]}toString(){var t,n=(t=this.config.name)!==null&&t!==void 0?t:Yl;return n!==Yl&&(n=Yl+"."+n),n}_isIdentified(){var t,n;return((t=this.persistence)==null?void 0:t.get_property(ls))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(ls))==="identified"}Es(){var t,n,r,i;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&fu(this.getGroups())&&((t=this.persistence)==null||(n=t.props)==null||!n[nd])&&((r=this.persistence)==null||(i=r.props)==null||!i[Vg]))}$s(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Es()||this.Is("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Is(t){return this.config.person_profiles==="never"?(St.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Ps(Vg,!0),!0)}_s(){var t,n,r,i,o=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||o&&!!s;((t=this.persistence)==null?void 0:t.ke)!==a&&((r=this.persistence)==null||r.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.ke)!==a&&((i=this.sessionPersistence)==null||i.set_disabled(a))}opt_in_capturing(t){var n;this.consent.optInOut(!0),this._s(),(pt(t==null?void 0:t.captureEventName)||t!=null&&t.captureEventName)&&this.capture((n=t==null?void 0:t.captureEventName)!==null&&n!==void 0?n:"$opt_in",t==null?void 0:t.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Ss()}opt_out_capturing(){this.consent.optInOut(!1),this._s()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return xi?u5(xi,this.config.custom_blocked_useragents):void 0}Ss(){vt&&(vt.visibilityState==="visible"?this.us||(this.us=!0,this.capture("$pageview",{title:vt.title},{send_instantly:!0}),this.hs&&(vt.removeEventListener("visibilitychange",this.hs),this.hs=null)):this.hs||(this.hs=this.Ss.bind(this),jn(vt,"visibilitychange",this.hs)))}debug(t){t===!1?(Re==null||Re.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(Re==null||Re.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}xs(t){if(on(this.config.before_send))return t;var n=Mn(this.config.before_send)?this.config.before_send:[this.config.before_send],r=t;for(var i of n){if(r=i(r),on(r)){var o="Event '"+t.event+"' was rejected in beforeSend function";return Wee(t.event)?St.warn(o+". This can cause unexpected behavior."):St.info(o),null}r.properties&&!fu(r.properties)||St.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var t;return(t=this.pageViewManager.oe)==null?void 0:t.pageViewId}captureTraceFeedback(t,n){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:n})}captureTraceMetric(t,n,r){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:n,$ai_metric_value:String(r)})}}(function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=qee(e.prototype[t[n]])})(wy,["identify"]);var mj,yj,vj,wj,bj,_j;(function(e){e.Button="button",e.Tab="tab",e.Selector="selector"})(mj||(mj={})),function(e){e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}(yj||(yj={})),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(vj||(vj={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(wj||(wj={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(bj||(bj={})),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}(_j||(_j={}));var xj,Xl=(xj=Sd[Yl]=new wy,function(){function e(){e.done||(e.done=!0,c5=!1,cn(Sd,function(t){t._dom_loaded()}))}vt!=null&&vt.addEventListener?vt.readyState==="complete"?e():jn(vt,"DOMContentLoaded",e,{capture:!1}):Re&&St.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),xj),y1=R.createContext({client:Xl});function d5(e,t,n){if(n===void 0&&(n=new WeakMap),e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(n.has(e)&&n.get(e)===t)return!0;n.set(e,t);var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var o=0,s=r;o<s.length;o++){var a=s[o];if(!i.includes(a)||!d5(e[a],t[a],n))return!1}return!0}function Zne(e){var t=e.children,n=e.client,r=e.apiKey,i=e.options,o=R.useRef(null),s=R.useMemo(function(){return n?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),i&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Xl)},[n,r,JSON.stringify(i)]);return R.useEffect(function(){if(!n){var a=o.current;a?(r!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),i&&!d5(i,a.options)&&Xl.set_config(i),o.current={apiKey:r,options:i!=null?i:{}}):(Xl.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Xl.init(r,i),o.current={apiKey:r,options:i!=null?i:{}})}},[n,r,JSON.stringify(i)]),It.createElement(y1.Provider,{value:{client:s}},t)}var ere=function(){var e=R.useContext(y1).client;return e},i_=function(e,t){return i_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},i_(e,t)};function tre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Pv=function(e){return typeof e=="function"},nre={componentStack:null,error:null},rre={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(e){tre(t,e);function t(n){var r=e.call(this,n)||this;return r.state=nre,r}return t.prototype.componentDidCatch=function(n,r){var i=r.componentStack,o=this.props.additionalProperties;this.setState({error:n,componentStack:i});var s;Pv(o)?s=o(n):typeof o=="object"&&(s=o);var a=this.context.client;a.captureException(n,s)},t.prototype.render=function(){var n=this.props,r=n.children,i=n.fallback,o=this.state;if(o.componentStack==null)return Pv(r)?r():r;var s=Pv(i)?It.createElement(i,{error:o.error,componentStack:o.componentStack}):i;return It.isValidElement(s)?s:(console.warn(rre.INVALID_FALLBACK),It.createElement(It.Fragment,null))},t.contextType=y1,t})(It.Component);function ire(e){var p,b;const{systems:t}=Z4(),{versions:n}=Mx(),{characters:r}=eI(),i=ere(),[o,s]=R.useState(t[0]),[a,l]=R.useState(n[0]),[u,c]=R.useState(0),[f,h]=R.useState({local_id:"",user_id:"none",name:"Aliza Cartwight",data:(p=a==null?void 0:a.data.defaultCharacterData)!=null?p:{},system:{local_id:"",version_id:""},created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return R.useEffect(()=>{const y=t[0];if(!y)return;s(y);let _;_=n.filter(v=>v.reference_id===y.local_id).sort((v,w)=>{if(!v||!w)return 0;const S=new Date(v.created_at),k=new Date(w.created_at);return S>k?1:0})[0],_&&(l(_),h({...f,data:structuredClone(_.data.defaultCharacterData),system:{local_id:y.local_id,version_id:_.local_id}}))},[t,n]),e.isOpen?o?d.jsxs(ar,{isOpen:e.isOpen,onClose:()=>e.setIsOpen(!1),children:[d.jsx(lr,{title:"Create Character",onClose:()=>e.setIsOpen(!1)}),d.jsx(ur,{children:u===0&&d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"character-name",label:"Character Name",placeholder:"Aliza Cartwight",value:f.name,onChange:y=>h({...f,name:y}),isValid:!r.find(y=>y.name===f.name)&&f.name.length>0,errorMessage:"Names must be unique and not empty."}),d.jsx(dt,{id:"character-system",label:"Tabletop System",value:o.local_id,onChange:y=>{const _=t.find(v=>v.local_id===y);if(!_)return;const m=n.filter(v=>v.reference_id===_.local_id).sort((v,w)=>{const S=new Date(v.created_at),k=new Date(w.created_at);return S>k?1:0})[0];m&&(s(_),l(m),h({...f,data:structuredClone(m.data.defaultCharacterData),system:{local_id:_.local_id,version_id:m.local_id}}))},children:t.map(y=>d.jsx("option",{value:y.local_id,children:y.name},y.local_id))}),d.jsx(dt,{id:"character-system-version",label:"System Version",value:(b=a==null?void 0:a.local_id)!=null?b:"",onChange:y=>{const _=n.find(m=>m.local_id===y);_&&(l(_),h({...f,data:structuredClone(_.data.defaultCharacterData),system:{local_id:o.local_id,version_id:_.local_id}}))},children:n.map(y=>d.jsx("option",{value:y.local_id,children:sc(y.local_id)},y.local_id))})]})}),d.jsxs(wr,{children:[d.jsx("nav",{className:"flex flex-grow mr-4","aria-label":"Breadcrumb",children:d.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse",children:[d.jsx("li",{className:"inline-flex items-center cursor-pointer",onClick:()=>c(0),children:d.jsxs("p",{className:"inline-flex items-center text-sm font-medium text-neutral-700 hover:text-brand-600 dark:text-neutral-400 dark:hover:text-white",children:[d.jsx("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})}),"Basics"]})}),a==null?void 0:a.data.creator.map((y,_)=>u<_+1?d.jsx(d.Fragment,{}):d.jsx("li",{className:"cursor-pointer",onClick:()=>c(_+1),children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("svg",{className:"rtl:rotate-180 w-3 h-3 text-neutral-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 9 4-4-4-4"})}),d.jsx("p",{className:"ms-1 text-sm font-medium text-neutral-700 hover:text-brand-600 md:ms-2 dark:text-neutral-400 dark:hover:text-white",children:y.name})]})}))]})}),d.jsx(kt,{id:"create-character-button",color:"primary",onClick:async()=>{await $ee(f.name,f.data,f.system),s(t[0]),e.setIsOpen(!1),i.capture("character_created",{character_name:f.name})},children:"Create"})]})]}):d.jsxs(ar,{isOpen:e.isOpen,onClose:()=>e.setIsOpen(!1),children:[d.jsx(lr,{title:"Error grabbing system",onClose:()=>e.setIsOpen(!1)}),d.jsx(ur,{children:d.jsx("h3",{children:"There was an error grabbing a default system, please refresh to load base data or make / import something!"})}),d.jsx(wr,{children:d.jsx(kt,{color:"primary",onClick:()=>e.setIsOpen(!1),children:"Close"})})]}):d.jsx(d.Fragment,{})}const f5=(e,t)=>{const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="".concat(t,".json"),i.click(),URL.revokeObjectURL(r),i.remove()},ore=()=>{const{characters:e,isLoading:t}=eI(),{systems:n}=Z4(),{versions:r}=Mx(),{isLoggedIn:i,user:o,synced_characters:s}=nr.useValue(),[a,l]=R.useState(!1),[u,c]=R.useState(!1);return t?d.jsx(d.Fragment,{}):d.jsxs("div",{children:[d.jsx(Sa,{title:"Characters"}),d.jsx(ire,{isOpen:u,setIsOpen:c}),d.jsxs("div",{className:"p-4",children:[e.length?e.map(f=>{var h,p,b;return d.jsxs("div",{className:"relative flex flex-col max-w-96 p-4 transition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",children:[d.jsxs(ig,{to:f.local_id,className:"flex items-start space-x-4",children:[d.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-xl font-bold text-white",children:f.name[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:f.name}),d.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[(h=n.find(y=>y.local_id===f.system.local_id))==null?void 0:h.name,"  Version ",sc((b=(p=r.find(y=>y.local_id===f.system.version_id))==null?void 0:p.local_id)!=null?b:"")]})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-4 border-t pt-3 dark:border-neutral-700",children:[i&&(o==null?void 0:o.role)===0&&d.jsxs("button",{onClick:()=>{let y=[];s.includes(f.local_id)?y=s.filter(_=>_!==f.local_id):length<3&&(y=[...s,f.local_id]),n4(y)},className:"mr-auto inline-flex items-center px-3 py-1.5 text-sm font-medium text-brand-600 hover:bg-brand-50 rounded-md dark:text-brand-400 dark:hover:bg-brand-700",children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),s.includes(f.local_id)?"UnSync":"Sync"]}),d.jsxs("button",{onClick:()=>f5(f,"".concat(f.name,"-export")),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md dark:text-blue-400 dark:hover:bg-blue-900/30",children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Export"]}),d.jsxs("button",{onClick:()=>mn({type:"edit_string",title:"Rename Character",data:f.name,onSave:y=>{Mee(f.local_id,y)}}),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md dark:text-blue-400 dark:hover:bg-blue-900/30",children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Rename"]}),d.jsxs("button",{onClick:()=>mn({type:"confirm",title:"Delete Character",data:{type:"danger",message:"Are you sure you want to delete this character?"},onSave:()=>Lee(f.local_id)}),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-red-600 hover:bg-red-50 rounded-md dark:text-red-400 dark:hover:bg-red-900/30",children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},f.local_id)}):d.jsx("h5",{children:"Doesn't look like you have any characters yet? Try creating one!"}),d.jsx(Ia,{isOpen:a,onClick:()=>l(!a),buttons:[{name:"Create Character",icon:"",onClick:()=>c(!0)},{name:"Import Character",icon:"",onClick:()=>mn({type:"import_file",title:"Import Character",data:void 0,onSave:async f=>{try{const h=JSON.parse(f);h&&Bee(h)}catch(h){console.error(h)}}})}]})]})]})};function sre(e){return Ds(()=>xt.characters.get(e||""),[e])}var are=Object.getOwnPropertyNames,lre=Object.getOwnPropertySymbols,ure=Object.prototype.hasOwnProperty;function Sj(e,t){return function(r,i,o){return e(r,i,o)&&t(r,i,o)}}function op(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=e(n,r,i);return o.delete(n),o.delete(r),l}}function Ej(e){return are(e).concat(lre(e))}var cre=Object.hasOwn||function(e,t){return ure.call(e,t)};function Bl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var dre="__v",fre="__o",hre="_owner",kj=Object.getOwnPropertyDescriptor,Cj=Object.keys;function pre(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function gre(e,t){return Bl(e.getTime(),t.getTime())}function mre(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function yre(e,t){return e===t}function jj(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.entries(),s,a,l=0;(s=o.next())&&!s.done;){for(var u=t.entries(),c=!1,f=0;(a=u.next())&&!a.done;){if(i[f]){f++;continue}var h=s.value,p=a.value;if(n.equals(h[0],p[0],l,f,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){c=i[f]=!0;break}f++}if(!c)return!1;l++}return!0}var vre=Bl;function wre(e,t,n){var r=Cj(e),i=r.length;if(Cj(t).length!==i)return!1;for(;i-- >0;)if(!h5(e,t,n,r[i]))return!1;return!0}function Wc(e,t,n){var r=Ej(e),i=r.length;if(Ej(t).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],!h5(e,t,n,o)||(s=kj(e,o),a=kj(t,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function bre(e,t){return Bl(e.valueOf(),t.valueOf())}function _re(e,t){return e.source===t.source&&e.flags===t.flags}function Aj(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.values(),s,a;(s=o.next())&&!s.done;){for(var l=t.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(s.value,a.value,s.value,a.value,e,t,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function xre(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Sre(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function h5(e,t,n,r){return(r===hre||r===fre||r===dre)&&(e.$$typeof||t.$$typeof)?!0:cre(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Ere="[object Arguments]",kre="[object Boolean]",Cre="[object Date]",jre="[object Error]",Are="[object Map]",Nre="[object Number]",Rre="[object Object]",Tre="[object RegExp]",Ire="[object Set]",Pre="[object String]",Ore="[object URL]",$re=Array.isArray,Nj=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Rj=Object.assign,Mre=Object.prototype.toString.call.bind(Object.prototype.toString);function Dre(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,o=e.areMapsEqual,s=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,c=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(b,y,_){if(b===y)return!0;if(b==null||y==null)return!1;var m=typeof b;if(m!==typeof y)return!1;if(m!=="object")return m==="number"?s(b,y,_):m==="function"?i(b,y,_):!1;var v=b.constructor;if(v!==y.constructor)return!1;if(v===Object)return a(b,y,_);if($re(b))return t(b,y,_);if(Nj!=null&&Nj(b))return f(b,y,_);if(v===Date)return n(b,y,_);if(v===RegExp)return u(b,y,_);if(v===Map)return o(b,y,_);if(v===Set)return c(b,y,_);var w=Mre(b);return w===Cre?n(b,y,_):w===Tre?u(b,y,_):w===Are?o(b,y,_):w===Ire?c(b,y,_):w===Rre?typeof b.then!="function"&&typeof y.then!="function"&&a(b,y,_):w===Ore?h(b,y,_):w===jre?r(b,y,_):w===Ere?a(b,y,_):w===kre||w===Nre||w===Pre?l(b,y,_):!1}}function Lre(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?Wc:pre,areDatesEqual:gre,areErrorsEqual:mre,areFunctionsEqual:yre,areMapsEqual:r?Sj(jj,Wc):jj,areNumbersEqual:vre,areObjectsEqual:r?Wc:wre,arePrimitiveWrappersEqual:bre,areRegExpsEqual:_re,areSetsEqual:r?Sj(Aj,Wc):Aj,areTypedArraysEqual:r?Wc:xre,areUrlsEqual:Sre};if(n&&(i=Rj({},i,n(i))),t){var o=op(i.areArraysEqual),s=op(i.areMapsEqual),a=op(i.areObjectsEqual),l=op(i.areSetsEqual);i=Rj({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function Bre(e){return function(t,n,r,i,o,s,a){return e(t,n,a)}}function Fre(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(l,u){var c=r(),f=c.cache,h=f===void 0?t?new WeakMap:void 0:f,p=c.meta;return n(l,u,{cache:h,equals:i,meta:p,strict:o})};if(t)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,u){return n(l,u,s)}}var sp=Ma();Ma({strict:!0});Ma({circular:!0});Ma({circular:!0,strict:!0});Ma({createInternalComparator:function(){return Bl}});Ma({strict:!0,createInternalComparator:function(){return Bl}});Ma({circular:!0,createInternalComparator:function(){return Bl}});Ma({circular:!0,createInternalComparator:function(){return Bl},strict:!0});function Ma(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,o=e.strict,s=o===void 0?!1:o,a=Lre(e),l=Dre(a),u=r?r(l):Bre(l);return Fre({circular:n,comparator:l,createState:i,equals:u,strict:s})}const zre=async e=>{try{return await xt.versions.get(e)}catch(t){console.log("Error getting subscription:",t);return}},Hre=()=>{const{id:e}=aN(),t=sre(e),[n,r]=R.useState(null),i=R.useCallback(o=>{if(!t||!n)return;const s=o.system.pages.findIndex(a=>a.name===o.page.name);sp(t,o.character)&&sp(n,o.system)&&sp(o.system.pages[s],o.page)||(Dee(t.local_id,o.character.data),r({...o.system,pages:o.system.pages.map(a=>a.name===o.page.name?o.page:a)}))},[t,n]);return R.useEffect(()=>{(async()=>{if(!t)return;const s=await zre(t.system.version_id);s&&(sp(n,s.data)||r(s.data))})()},[t]),t?n?d.jsxs("div",{className:"flex flex-col h-full w-full",children:[d.jsx("p",{id:"loading-text",className:"hidden",children:"loading..."}),d.jsx(Sa,{title:t.name}),d.jsxs("div",{className:"flex flex-row flex-grow overflow-hidden",children:[d.jsx("div",{className:"relative w-full lg:w-1/2 max-h-full flex flex-col",children:d.jsx("div",{className:"overflow-y-scroll p-4",children:d.jsx(Tj,{className:"first-tab-selector",system:n,character:t,updateState:i})})}),d.jsx("div",{className:"relative w-1/2 hidden flex-col lg:flex max-h-full",children:d.jsx("div",{className:"overflow-y-scroll p-4",children:d.jsx(Tj,{className:"second-tab-selector",system:n,character:t,updateState:i})})})]})]}):d.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading system data..."}):d.jsx("p",{id:"loading-text",className:"text-center text-2xl",children:"loading character data..."})},Tj=({system:e,character:t,updateState:n,className:r})=>{const[i,o]=R.useState(e.pages[0].name);return d.jsxs(d.Fragment,{children:[d.jsx(dt,{className:r,id:"tab-selector",label:"",value:i,onChange:o,children:e.pages.map(s=>d.jsx("option",{value:s.name,children:s.name},s.name))}),e.pages.map(s=>d.jsx(Ure,{character:t,system:e,page:s,currentTab:i,updateState:n},s.name))]})};function Ure({page:e,character:t,system:n,currentTab:r,updateState:i}){const o=R.useMemo(()=>e.lexical?JSON.parse(Ca.decompress(Ca.decodeBase64(e.lexical))):{},[e.lexical]);return r!==e.name?d.jsx(d.Fragment,{}):d.jsx(Cee,{data:o,state:{character:t,system:n,page:e},updateState:i})}const v1=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string(),data:ct.any(),reference_id:ct.string({invalid_type_error:"reference_id must be a string"}),reference_type:ct.enum(["system","character"]),created_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).nullable().optional()}),Wre=async(e,t)=>{try{let n=await Tr();for(;!await pa(n);)n=await Tr();const{user:r}=nr.get(),i=r?r.id:"none",o={...e,local_id:n,user_id:i},s=Vf.safeParse(o);if(!s.success){console.log("Invalid system data:",s.error.format());return}await xt.systems.add(o);let a=await Tr();for(;!await pa(a);)a=await Tr();const l={...t,local_id:a,reference_id:n,user_id:i},u=v1.safeParse(l);if(!u.success){console.log("Invalid Version data:",u.error.format());return}await xt.versions.add(l);let c=await Tr();for(;!await pa(c);)c=await Tr();await xt.subscriptions.add({local_id:c,user_id:i,resource_type:"system",resource_id:n,version_id:a,auto_update:!1,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null})}catch(n){console.log("Error importing system or version or creating subscription:",n)}};function Vre(){const e=Ds(async()=>(await xt.subscriptions.toArray()).filter(n=>!n.deleted_at),[]);return{subscriptions:e||[],isLoading:e===void 0}}function qre(e){const t=Ds(async()=>{let n;switch(e.resource_type){case"system":n=await xt.systems.where("local_id").equals(e.resource_id).toArray();break}if(!n||n.length===0)return;const r=await xt.versions.where("local_id").equals(e.version_id).toArray();if(!(!r||r.length===0))return{baseData:n[0],versionData:r[0]}},[]);return{query:t,isLoading:t===void 0}}const Kre=ct.object({id:ct.string({invalid_type_error:"id must be a string"}).optional(),local_id:ct.string({invalid_type_error:"local_id must be a string"}).max(73,"local_id must be 73 characters or less"),user_id:ct.string({invalid_type_error:"user_id must be a string"}),resource_type:ct.enum(["system","character","module","plugin"]),resource_id:ct.string({invalid_type_error:"resource_id must be a string"}),version_id:ct.string(),auto_update:ct.boolean().optional().default(!0),subscribed_at:ct.string().datetime({offset:!0}),updated_at:ct.string().datetime({offset:!0}),deleted_at:ct.string().datetime({offset:!0}).nullable().optional()}),w1=async(e,t,n,r)=>{try{const{user:i}=nr.get(),o=(i==null?void 0:i.id)||"none";let s=await Tr();for(;!await pa(s);)s=await Tr();const a={local_id:s,user_id:o,resource_type:e,resource_id:t,version_id:n,auto_update:r,subscribed_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},l=Kre.safeParse(a);if(!l.success){console.log("Invalid subscription data:",l.error.format());return}return await xt.subscriptions.add(a),a}catch(i){console.log("Error creating subscription:",i)}},Gre=async e=>{try{let t=await Tr();for(;!await pa(t);)t=await Tr();const{user:n}=nr.get(),r=n?n.id:"none",i={...e,local_id:t,user_id:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deleted_at:null},o=Vf.safeParse(i);if(!o.success){console.log("Invalid character data:",o.error.format());return}return await xt.systems.add(i),i}catch(t){console.log("Error creating system:",t)}},Yre=async(e,t,n)=>{try{let r=await Tr();for(;!await pa(r);)r=await Tr();const{user:i}=nr.get(),o=(i==null?void 0:i.id)||"none",s={local_id:r,user_id:o,data:n,reference_id:t,reference_type:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),deleted_at:null},a=v1.safeParse(s);if(!a.success){console.log("Invalid subscription data:",a.error.format());return}return await xt.versions.add(s),s}catch(r){console.log("Error creating subscription:",r)}},Xre=async(e,t)=>{const n=await Gre(e);if(!n)return;const r=await Yre("system",n.local_id,t.data);!r||await w1("system",n.local_id,r.local_id,!1)},Jre=({subscription:e})=>{const{query:t,isLoading:n}=qre(e);let r=_m();const{user:i}=nr.useValue();if(n||!t)return d.jsx(d.Fragment,{});const{baseData:o,versionData:s}=t,a=i&&o.user_id&&i.id===o.user_id||!o.user_id&&!o.id;return d.jsxs("div",{className:"relative flex flex-col max-w-96 p-4 transition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",children:[d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-xl font-bold text-white",children:o.name[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:o.name}),d.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["Version ",sc(s.local_id)]})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 mt-4 border-t pt-3 dark:border-neutral-700",children:[d.jsxs("button",{onClick:()=>a?r("/library/".concat(e.resource_type,"/").concat(s.local_id)):Xre(o,s),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md dark:text-blue-400 dark:hover:bg-blue-900/30",children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),a?"Edit":"Fork"]}),d.jsxs("button",{className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-neutral-600 hover:bg-neutral-50 rounded-md dark:text-neutral-400 dark:hover:bg-neutral-900/30",onClick:()=>{f5({system:t.baseData,version:t.versionData},"".concat(t.baseData.name,"-").concat(t.versionData.local_id))},children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 21",children:d.jsx("path",{d:"m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"})}),"Export"]}),d.jsxs("button",{className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-neutral-600 hover:bg-neutral-50 rounded-md dark:text-neutral-400 dark:hover:bg-neutral-900/30",children:[d.jsx("svg",{className:"w-4 h-4 mr-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 21",children:d.jsx("path",{d:"m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"})}),"Options"]})]})]},e.local_id)},Qre=()=>{const{subscriptions:e,isLoading:t}=Vre(),[n,r]=R.useState(!1);return d.jsxs("div",{children:[d.jsx(Sa,{title:"Library"}),d.jsxs("div",{className:"p-4",children:[t?d.jsx("h5",{className:"mb-4 text-xl",children:"Loading..."}):d.jsx("h5",{className:"flex flex-col gap-4",children:d.jsxs("div",{children:[d.jsx("h4",{className:"mb-2 text-xl",children:"Subscribed Systems"}),d.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.filter(i=>i.resource_type==="system").map(i=>d.jsx(Jre,{subscription:i},i.local_id))})]})}),d.jsx(Ia,{isOpen:n,onClick:()=>r(!n),buttons:[{name:"Create System",icon:"",onClick:()=>{}},{name:"Import System",icon:"",onClick:()=>mn({type:"import_file",title:"Import System",data:void 0,onSave:async i=>{try{const o=JSON.parse(i);o&&o.system&&o.version&&await Wre(o.system,o.version)}catch(o){console.error(o)}}})}]})]})]})};function p5({types:e,onDelete:t,onSave:n,isVisible:r,requestClose:i,data:o}){var p,b;const s=ln.useValue(),a=Un(s.versionId),[l,u]=R.useState({name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"}),[c,f]=R.useState(((p=a==null?void 0:a.data)==null?void 0:p.types.find(y=>y.name===l.typeData.type))||null),h=(y,_,m)=>{u(In(_,v=>(Cx(v,y,m),v)))};return R.useEffect(()=>{var _;const y=o||{name:"",typeData:{type:"string",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]},data:"test"};u(y),f(((_=a==null?void 0:a.data)==null?void 0:_.types.find(m=>m.name===y.typeData.type))||null)},[o,u,f]),o?d.jsxs(ar,{isOpen:r,onClose:i,children:[d.jsx(lr,{title:"Edit ".concat(o.name),onClose:i}),d.jsxs(ur,{children:[d.jsx(Kt,{id:"data-name",label:"Name",isValid:!0,errorMessage:"",value:l.name,onChange:y=>u({...l,name:y})}),d.jsxs(dt,{id:"data-type",label:"Type",value:(c==null?void 0:c.name)||"",onChange:y=>{var m;const _=((m=a==null?void 0:a.data)==null?void 0:m.types.find(v=>v.name===y))||null;f(_),u({...l,data:l.typeData.isArray?[]:gf(e,_||y),typeData:{...l.typeData,type:y}})},children:[d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),(b=a==null?void 0:a.data)==null?void 0:b.types.map(y=>d.jsx("option",{value:y.name,children:y.name},y.name))]}),c&&d.jsx("div",{children:d.jsx(Kn,{id:"is-array",label:"Is Array?",checked:l.typeData.isArray,onChange:y=>{u(y?{...l,data:[],typeData:{...l.typeData,isArray:y}}:{...l,data:gf(e,l.typeData.type),typeData:{...l.typeData,isArray:y}})}})}),d.jsx("div",{className:"h-2"}),c&&l.typeData.isArray?d.jsx(Zre,{types:e,type:c,title:"data",data:l.data,onAdd:y=>{console.log("adding item"),h("data",l,[...l.data,y])},onChange:(y,_)=>h(y,l,_),onDelete:y=>h("data",l,l.data.filter(_=>_.name!==y))}):g5(c||{name:l.typeData.type,properties:[]},l.data||l,l,l.typeData,"value",h)]}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{t&&t(),i()},children:t?"Delete":"Close"}),d.jsx(kt,{color:"primary",onClick:()=>{n(l),i()},children:"Update"})]})]}):d.jsx(d.Fragment,{})}function g5(e,t,n,r,i,o){var s;switch(e.name){case"string":return r.useTextArea?d.jsx(jx,{id:i,label:i,value:t,onChange:a=>o("data",n,a)}):d.jsx(Kt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,a)});case"number":return d.jsx(Kt,{id:i,label:i,isValid:!0,errorMessage:"",value:t,onChange:a=>o("data",n,+a)});case"boolean":return d.jsx(Kn,{id:i,label:i,checked:t,onChange:a=>o("data",n,a)});case"enum":return d.jsx(dt,{id:i,label:i,value:t,onChange:a=>o("data",n,a),children:(s=r.options)==null?void 0:s.map(a=>d.jsx("option",{value:a,children:a},a))});case"blueprint":return d.jsx("div",{children:"TODO"});default:return d.jsx("div",{children:e.properties.map(a=>g5({name:a.typeData.type,properties:[]},t[a.key]||"",n,a.typeData,a.key,(l,u,c)=>{o("data/".concat(a.key),u,c)}))},i)}}function Zre({types:e,title:t,data:n,type:r,onAdd:i,onChange:o,onDelete:s}){const[a,l]=R.useState(null);return d.jsxs("div",{children:[d.jsx(Ax,{title:"Edit Data",types:e,onDelete:()=>s(a.name),onSave:u=>o("".concat(t,"/").concat(a.name),u),isVisible:a!==null,requestClose:()=>l(null),data:a}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:t}),d.jsx("p",{onClick:()=>i(gf(e,r)),children:"Add"})]}),d.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),d.jsx("div",{className:"flex flex-col gap-1 mt-3",children:n.map(u=>d.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>l(u),children:d.jsx("p",{children:u.name})},u.name))})]})}const m5=async(e,t)=>In(e,n=>{let r=[];if(t==="builder"?r=n.creator:t==="character"&&(r=n.pages),r.findIndex(s=>s.name==="New Page")!==-1)return;let o={name:"New Page",blueprint:{nodes:$r(),edges:[]},lexical:"",state:[]};t==="builder"?n.creator.push(o):t==="character"&&n.pages.push(o)}),y5=async(e,t,n,r,i)=>In(e,o=>{let s=[];t==="builder"?s=o.creator:t==="character"&&(s=o.pages);const a=s.findIndex(u=>u.name===n);if(a===-1||s[a].state.find(u=>u.name===r))return;let l={name:r,type:i,value:void 0};t==="builder"?o.creator[a].state.push(l):t==="character"&&o.pages[a].state.push(l)}),eie=async e=>In(e,t=>{t.data.findIndex(r=>r.name==="New Data")===-1&&t.data.push({name:"New Data",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1},data:"lorem ipsum"})}),tie=async(e,t)=>In(e,n=>{n.types.push({name:t,properties:[{key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}}]})}),nie=async(e,t,n)=>In(e,r=>{const i=r.types.findIndex(o=>o.name===t);i!==-1&&r.types[i].properties.push(n)}),v5=(e,t,n)=>In(e,r=>{const o=(t==="character"?r.pages:r.creator).findIndex(s=>s.name===n);o===-1&&(t==="character"?r.pages.splice(o,1):t==="builder"&&r.creator.splice(o,1))}),rie=async(e,t)=>In(e,n=>{const r=n.data.findIndex(i=>i.name===t);r!==-1&&n.data.splice(r,1)}),iie=async(e,t)=>In(e,n=>{const r=n.types.findIndex(i=>i.name===t);r!==-1&&n.types.splice(r,1)}),oie=async(e,t,n)=>In(e,r=>{for(let i=0;i<r.types.length;i++){const o=r.types[i];if(o.name!==t)continue;const s=o.properties.findIndex(a=>a.key===n);if(s===-1)return;o.properties.splice(s,1)}}),w5=async(e,t,n,r)=>In(e,i=>{const s=(t==="character"?i.pages:i.creator).findIndex(a=>a.name===n);s===-1&&(t==="character"?i.pages[s].name=r:t==="builder"&&(i.creator[s].name=r))}),sie=async(e,t,n)=>In(e,r=>{const i=r.types.findIndex(o=>o.name===t);i!==-1&&(r.types[i].name=n)}),Ov=async(e,t)=>In(e,n=>{n.defaultCharacterData=t}),b5=async(e,t,n,r)=>In(e,i=>{const s=(t==="character"?i.pages:i.creator).findIndex(a=>a.name===n);s!==-1&&(t==="character"?i.pages[s].blueprint=r:t==="builder"&&(i.creator[s].blueprint=r))}),_5=async(e,t,n,r,i)=>In(e,o=>{const s=t==="character"?o.pages:o.creator;for(let a=0;a<s.length;a++){const l=s[a];if(l.name!==n)continue;const u=l.state.findIndex(c=>c.name===r);if(u===-1)return;r!==i.name?(l.state.splice(u,1),l.state.push(i)):l.state[u]=i}}),Ij=async(e,t)=>{if(t==="{}")return;const n=Ca.encodeBase64(Ca.compress(t)),r=ln.get();return In(e,i=>{if(r.tab==="editor"){const o=i.pages.findIndex(s=>s.name===r.characterPage);if(o===-1)return;i.pages[o].lexical=n}else if(r.tab==="creator"){const o=i.creator.findIndex(s=>s.name===r.creatorPage);if(o===-1)return;i.creator[o].lexical=n}})},aie=async(e,t,n)=>In(e,r=>{const i=r.data.findIndex(o=>o.name===t);i!==-1&&(t!==n.name?(r.data.splice(i,1),r.data.push(n)):r.data[i]=n)}),lie=async(e,t,n,r)=>In(e,i=>{for(let o=0;o<i.types.length;o++){const s=i.types[o];if(s.name!==t)continue;const a=s.properties.findIndex(l=>l.key===n);if(a===-1)return;n!==r.key?(s.properties.splice(a,1),s.properties.push(r)):s.properties[a]=r}});async function pn(e,t){if(!await xt.versions.get(e))return;const r=await t;if(r)try{return await xt.versions.update(e,{data:r})}catch(i){console.log("Error updating version resource:",i)}}const uie=({editsId:e,versionedResource:t})=>{const[n,r]=R.useState(null);return console.log(t),d.jsxs(d.Fragment,{children:[d.jsx(p5,{types:t.data.types,onDelete:()=>{const i=In(t.data.defaultCharacterData,o=>{delete o[(n==null?void 0:n.name)||""],o._type.properties=o._type.properties.filter(s=>s.key!==(n==null?void 0:n.name))});pn(e,Ov(t.data,i))},onSave:i=>{const o=i.name,s=i.typeData,a=i.data,l=In(t.data.defaultCharacterData,u=>{delete u[(n==null?void 0:n.name)||""],u[o]=a;for(let c=0;c<u._type.properties.length;c++){const f=u._type.properties[c];f.key===(n==null?void 0:n.name)&&(f.key=o,f.typeData=s)}});pn(e,Ov(t.data,l))},isVisible:n!==null,requestClose:()=>r(null),data:n}),d.jsx("div",{className:"flex flex-col gap-1",children:t.data.defaultCharacterData._type.properties.map(i=>{const o=i.key,s=t.data.defaultCharacterData[o],a=i.typeData;let l=s._type?void 0:a.type;return d.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>r({name:o,typeData:a,data:s}),children:d.jsxs("p",{children:[o," - ",l," ",a.isArray?"(Array)":""]})},o)})}),d.jsx(Ia,{onClick:()=>{const i={...t.data.defaultCharacterData,newKey:"new value",_type:{name:t.data.defaultCharacterData._type.name||"",properties:[...t.data.defaultCharacterData._type.properties||[],{key:"newKey",typeData:{type:"string",useTextarea:!1,isArray:!1}}]}};pn(e,Ov(t.data,i))}})]})},cie=({editsId:e,versionedResource:t})=>{const[n,r]=R.useState(null);return d.jsxs(d.Fragment,{children:[d.jsx(p5,{types:t.data.types,onDelete:()=>pn(e,rie(t.data,n.name)),onSave:i=>pn(e,aie(t.data,n.name,i)),isVisible:n!==null,requestClose:()=>r(null),data:n}),d.jsx("div",{className:"flex flex-col gap-1",children:t.data.data.map(i=>d.jsx("div",{className:"mb-4 block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:()=>r(i),children:d.jsxs("p",{children:[i.name," - ",i.typeData.type," ",i.typeData.isArray?"(Array)":""]})},i.name))}),d.jsx(Ia,{onClick:()=>pn(e,eie(t.data))})]})},die=({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i})=>{var b,y,_;const[o,s]=R.useState(""),[a,l]=R.useState({type:"",useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}),[u,c]=R.useState(null),f=ln.useValue(),h=Un(f.versionId),p=R.useMemo(()=>h==null?void 0:h.data.types.find(m=>m.name===(e==null?void 0:e.typeName)),[e,h]);return R.useEffect(()=>{e&&(s(e.key),l({useTextArea:!1,isArray:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[],...e.typeData}))},[e]),d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:"Edit Type Property",onClose:n}),d.jsxs(ur,{children:[d.jsx(Kt,{id:"key",label:"key",placeholder:"baba yaga",value:o,onChange:s,isValid:!0,errorMessage:""}),d.jsxs(dt,{id:"type",label:"Type",value:a.type,onChange:m=>l({...a,type:m}),children:[d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),d.jsx("option",{value:"blueprint",children:"blueprint"}),h==null?void 0:h.data.types.map(m=>d.jsx("option",{value:m.name,children:m.name},m.name))]}),d.jsx(Kn,{id:"is-array",label:"Is Array?",checked:a.isArray,onChange:m=>l({...a,isArray:m})}),a.type==="string"&&!a.isArray&&d.jsx(Kn,{id:"use-textarea",label:"Use Textarea?",checked:a.useTextArea,onChange:m=>l({...a,useTextArea:m})}),a.type==="enum"&&d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:"Options"}),d.jsx("div",{onClick:()=>{var v;((v=a.options)==null?void 0:v.findIndex(w=>w==="New Option"))===-1&&l({...a,options:[...a.options||[],"New Option"]})},children:d.jsx("p",{children:"Add"})})]}),d.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),d.jsx("div",{children:(b=a.options)==null?void 0:b.map(m=>d.jsx("div",{onClick:()=>c(m),children:d.jsx("p",{children:m})},m))})]}),a.type==="blueprint"&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsxs(dt,{id:"output-type",label:"Output Type",value:a.outputType||"none",onChange:m=>l({...a,outputType:m}),children:[d.jsx("option",{value:"none",children:"none"}),d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),d.jsx("option",{value:"blueprint",children:"blueprint"}),(y=h==null?void 0:h.data)==null?void 0:y.types.map(m=>d.jsx("option",{value:m.name,children:m.name},m.name))]}),d.jsx(Kn,{id:"is-output-an-array",label:"Is Array?",checked:a.isOutputAnArray,onChange:m=>l({...a,isOutputAnArray:m})})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("p",{children:"Inputs"}),d.jsx("div",{onClick:()=>{var v;((v=a.inputs)==null?void 0:v.findIndex(w=>w.name==="New Input"))===-1&&l({...a,inputs:[...a.inputs||[],{name:"New Input",type:"string",isArray:!1}]})},children:d.jsx("p",{children:"Add"})})]}),d.jsx("p",{style:{height:1,width:"100%",backgroundColor:"white",marginTop:4,marginBottom:4}}),d.jsx("div",{children:(_=a.inputs)==null?void 0:_.map(m=>d.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>mn({type:"edit_blueprint_param",title:"Edit Blueprint Param",data:m,onSave:v=>{let w=[...a.inputs||[]];const S=w.findIndex(k=>k.name===m.name);S!==-1&&(w[S]=v,l({...a,inputs:w}))},onDelete:()=>{var w;const v=(w=a.inputs)==null?void 0:w.filter(S=>S.name!==m.name);l({...a,inputs:v})}}),children:d.jsxs("p",{children:[m.name," - ",m.type,m.isArray?"(Array)":""]})},m.name))})]}),d.jsx(Kf,{data:u,isOpen:u!==null,requestClose:()=>c(null),onSave:m=>{let v=[...a.options||[]];const w=v.findIndex(S=>S===u);w!==-1&&(v[w]=m,l({...a,options:v}))}})]}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i(),n()},disabled:(p==null?void 0:p.properties.length)===1,children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!o||!a)return n();r({key:o,typeData:a}),n()},children:"Update"})]})]})},Jf=({children:e})=>d.jsx("div",{children:e}),Pr=({children:e,id:t,title:n,isOpen:r,toggleState:i})=>d.jsxs(d.Fragment,{children:[d.jsx("h2",{children:d.jsxs("button",{type:"button",onClick:()=>i(!r),className:"".concat(r&&"bg-brand-100 dark:bg-neutral-800 text-brand-600 dark:text-white"," flex items-center justify-between w-full p-5 font-medium rtl:text-right text-neutral-500 border border-neutral-200 dark:border-neutral-700 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 gap-3"),children:[d.jsx("span",{children:n}),d.jsx("svg",{"data-accordion-icon":!0,className:"".concat(r?"":"rotate-180"," w-3 h-3 shrink-0"),"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),d.jsx("div",{className:"".concat(r?"flex":"hidden"," w-full"),children:d.jsx("div",{className:"p-5 w-full border border-t-0 border-neutral-200 dark:border-neutral-700",children:e})})]}),fie=({editsId:e,versionedResource:t})=>{const[n,r]=R.useState(null),[i,o]=R.useState(null),[s,a]=R.useState(-1);return d.jsxs(d.Fragment,{children:[d.jsx(die,{data:n,isOpen:n!==null,requestClose:()=>r(null),onSave:l=>pn(e,lie(t.data,(n==null?void 0:n.typeName)||"",(n==null?void 0:n.key)||"",l)),onDelete:()=>pn(e,oie(t.data,(n==null?void 0:n.typeName)||"",(n==null?void 0:n.key)||""))}),d.jsx(Kf,{data:i,isOpen:i!==null,requestClose:()=>o(null),onSave:l=>pn(e,sie(t.data,i||"",l))}),d.jsx(Jf,{children:t.data.types.map((l,u)=>d.jsxs(Pr,{id:l.name,title:l.name,isOpen:s===u,toggleState:c=>a(c?u:-1),children:[d.jsxs("div",{children:[d.jsx(kt,{color:"light",onClick:()=>o(l.name),children:"Edit Name"}),d.jsx(kt,{color:"light",onClick:async()=>{let c={key:"newProperty",typeData:{type:"string",options:[],isArray:!1,useTextArea:!1,inputs:[],outputType:"none",isOutputAnArray:!1}};await pn(e,nie(t.data,l.name,c)),r({...c,typeName:l.name})},children:"Add Property"}),d.jsx(kt,{color:"danger",onClick:()=>pn(e,iie(t.data,l.name)),children:"Delete Type"})]}),d.jsx("div",{className:"flex flex-col gap-1 mt-3",children:l.properties.map(c=>{var f;return d.jsx("div",{className:"p-3 border border-neutral-600 dark:bg-neutral-800 hover:bg-neutral-700 cursor-pointer",onClick:()=>r({...c,typeName:l.name}),children:d.jsxs("p",{children:[c.key," - ",c.typeData.type," ",c.typeData.isArray?"(Array)":""," ",(f=c.typeData.options)==null?void 0:f.join(",")]})},c.key)})})]},l.name))}),d.jsx(Ia,{onClick:async()=>{await pn(e,tie(t.data,"New Type")),o("New Type")}})]})};function by(e){const{query:t}=Is();return x5(t,e)}function x5(e,t){const n=e.node(t).get();if(!n.data.parent)return[];const r=e.node(n.data.parent).get();return[...r.data.props.local||[],...x5(e,r.id)]}function hie(){const{id:e,actions:{setProp:t},showPlaceholder:n,isVisible:r,dynamicVisibility:i,visibilityBlueprint:o,isList:s,dataName:a,blueprint:l,isInteractive:u,onPress:c,display:f,position:h,top:p,right:b,bottom:y,left:_,flexDirection:m,alignItems:v,justifyContent:w,gap:S,rows:k,columns:A,marginTop:T,marginRight:P,marginBottom:Y,marginLeft:D,paddingTop:H,paddingRight:Q,paddingBottom:U,paddingLeft:L,height:te,width:Z,maxHeight:oe,maxWidth:z,minHeight:V,minWidth:$,background:X,border:ue,hover:ce}=Zr(B=>({showPlaceholder:B.data.props.showPlaceholder,isVisible:B.data.props.isVisible,dynamicVisibility:B.data.props.dynamicVisibility,visibilityBlueprint:B.data.props.visibilityBlueprint,isList:B.data.props.isList,dataName:B.data.props.dataName,blueprint:B.data.props.blueprint,isInteractive:B.data.props.isInteractive,onPress:B.data.props.onPress,display:B.data.props.display,position:B.data.props.position,top:B.data.props.top,right:B.data.props.right,bottom:B.data.props.bottom,left:B.data.props.left,flexDirection:B.data.props.flexDirection,alignItems:B.data.props.alignItems,justifyContent:B.data.props.justifyContent,gap:B.data.props.gap,rows:B.data.props.rows,columns:B.data.props.columns,marginTop:B.data.props.marginTop,marginRight:B.data.props.marginRight,marginBottom:B.data.props.marginBottom,marginLeft:B.data.props.marginLeft,paddingTop:B.data.props.paddingTop,paddingRight:B.data.props.paddingRight,paddingBottom:B.data.props.paddingBottom,paddingLeft:B.data.props.paddingLeft,height:B.data.props.height,width:B.data.props.width,maxHeight:B.data.props.maxHeight,maxWidth:B.data.props.maxWidth,minHeight:B.data.props.minHeight,minWidth:B.data.props.minWidth,background:B.data.props.background,border:B.data.props.border,hover:B.data.props.hover})),[Ce,Pe]=R.useState(-1),Me=by(e);return R.useEffect(()=>{t(B=>(B.blueprint={edges:B.blueprint.edges,nodes:uo(B.blueprint.nodes,Me)},B.visibilityBlueprint={edges:B.visibilityBlueprint.edges,nodes:uo(B.visibilityBlueprint.nodes,Me)},B.onPress={edges:B.onPress.edges,nodes:uo(B.onPress.nodes,Me)},B))},[Me]),d.jsxs(Jf,{children:[d.jsx(Kn,{id:"show-placeholder",label:"Visible?",checked:n,onChange:B=>t(J=>J.showPlaceholder=B)}),d.jsxs(Pr,{id:"visibility",title:"Visibility",isOpen:Ce===0,toggleState:B=>Pe(B?0:-1),children:[d.jsx(Kn,{id:"dynamic-visiblity",label:"Dynamic Visibility?",checked:i,onChange:B=>t(J=>J.dynamicVisibility=B)}),i?d.jsx("p",{onClick:()=>mn({type:"blueprint",title:"",data:o,onSave:B=>{t(J=>J.visibilityBlueprint=B)}}),children:"Visibility Blueprint"}):d.jsx(Kn,{id:"is-visible",label:"Visible?",checked:r,onChange:B=>t(J=>J.isVisible=B)})]}),d.jsxs(Pr,{id:"list",title:"List",isOpen:Ce===1,toggleState:B=>Pe(B?1:-1),children:[d.jsx(Kn,{id:"is-list",label:"Is Dynamic List",checked:s,onChange:B=>{t(J=>(J.isList=B,J.local=B?[{name:a,type:Cg(l),isArray:!1}]:[],J))}}),d.jsx(Kt,{id:"variable-name",label:"Variable Name",isValid:!0,errorMessage:"",value:a,onChange:B=>{t(J=>{J.dataName=B;const re=J.local.findIndex(De=>De.name===a);if(re!==-1)return J.local[re].name=B,J})}}),d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"",data:l,onSave:B=>{t(J=>{J.blueprint=B;const re=J.local.findIndex(De=>De.name===a);if(re!==-1)return J.local[re].type=Cg(B),J})}}),children:"List Data Blueprint"})]}),d.jsxs(Pr,{id:"input",title:"Input",isOpen:Ce===2,toggleState:B=>Pe(B?2:-1),children:[d.jsx(Kn,{id:"is-interactive",label:"Is Interactive?",checked:u,onChange:B=>t(J=>J.isInteractive=B)}),d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"",data:c,onSave:B=>{t(J=>J.onPress=B)}}),children:"On Press Blueprint"})]}),d.jsxs(Pr,{id:"layout",title:"Layout",isOpen:Ce===3,toggleState:B=>Pe(B?3:-1),children:[d.jsxs(dt,{id:"display",label:"Display",value:f,onChange:B=>t(J=>J.display=B),children:[d.jsx("option",{value:"block",children:"Block"}),d.jsx("option",{value:"flex",children:"Flex"}),d.jsx("option",{value:"grid",children:"Grid"})]}),d.jsxs(dt,{id:"position",label:"Position",value:h,onChange:B=>t(J=>J.position=B),children:[d.jsx("option",{value:"static",children:"Static"}),d.jsx("option",{value:"relative",children:"Relative"}),d.jsx("option",{value:"absolute",children:"Absolute"}),d.jsx("option",{value:"fixed",children:"Fixed"}),d.jsx("option",{value:"sticky",children:"Sticky"})]}),h!=="static"?d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"top",label:"Top",isValid:!0,errorMessage:"",value:p,onChange:B=>t(J=>J.top=B)}),d.jsx(Kt,{id:"right",label:"Right",isValid:!0,errorMessage:"",value:b,onChange:B=>t(J=>J.right=B)}),d.jsx(Kt,{id:"bottom",label:"Bottom",isValid:!0,errorMessage:"",value:y,onChange:B=>t(J=>J.bottom=B)}),d.jsx(Kt,{id:"left",label:"Left",isValid:!0,errorMessage:"",value:_,onChange:B=>t(J=>J.left=B)})]}):null,f==="grid"?d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"columns",label:"Columns",isValid:!0,errorMessage:"",value:A,onChange:B=>t(J=>J.columns=B)}),d.jsx(Kt,{id:"rows",label:"Rows",isValid:!0,errorMessage:"",value:k,onChange:B=>t(J=>J.rows=B)})]}):null,["flex","grid"].includes(f)?d.jsxs(d.Fragment,{children:[d.jsxs(dt,{id:"flex-direction",label:"Flex Direction",value:m,onChange:B=>t(J=>J.flexDirection=B),children:[d.jsx("option",{value:"row",children:"Row"}),d.jsx("option",{value:"column",children:"Column"}),d.jsx("option",{value:"row-reverse",children:"Reverse Row"}),d.jsx("option",{value:"column-reverse",children:"Reverse Column"})]}),d.jsxs(dt,{id:"align-items",label:"Align Items",value:v,onChange:B=>t(J=>J.alignItems=B),children:[d.jsx("option",{value:"initial",children:"Initial"}),d.jsx("option",{value:"inherit",children:"Inherit"}),d.jsx("option",{value:"normal",children:"Normal"}),d.jsx("option",{value:"stretch",children:"Stretch"}),d.jsx("option",{value:"center",children:"Center"}),d.jsx("option",{value:"flex-start",children:"Flex-Start"}),d.jsx("option",{value:"flex-end",children:"Flex-End"}),d.jsx("option",{value:"start",children:"Start"}),d.jsx("option",{value:"end",children:"End"}),d.jsx("option",{value:"baseline",children:"Baseline"})]}),d.jsxs(dt,{id:"justify-content",label:"Justify Content",value:w,onChange:B=>t(J=>J.justifyContent=B),children:[d.jsx("option",{value:"initial",children:"Initial"}),d.jsx("option",{value:"inherit",children:"Inherit"}),d.jsx("option",{value:"stretch",children:"Stretch"}),d.jsx("option",{value:"center",children:"Center"}),d.jsx("option",{value:"flex-start",children:"Flex-Start"}),d.jsx("option",{value:"flex-end",children:"Flex-End"}),d.jsx("option",{value:"space-between",children:"Space-Between"}),d.jsx("option",{value:"space-around",children:"Space-Around"}),d.jsx("option",{value:"space-evenly",children:"Space-Evenly"})]}),d.jsx(dt,{id:"container-gap",label:"Gap",value:S,onChange:B=>t(J=>J.gap=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))})]}):null]}),d.jsxs(Pr,{id:"spacing",title:"Spacing",isOpen:Ce===4,toggleState:B=>Pe(B?4:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:T,onChange:B=>t(J=>J.marginTop=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:P,onChange:B=>t(J=>J.marginRight=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:Y,onChange:B=>t(J=>J.marginBottom=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:D,onChange:B=>t(J=>J.marginTop=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"padding-top",label:"Padding Top",value:H,onChange:B=>t(J=>J.paddingTop=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"padding-right",label:"Padding Right",value:Q,onChange:B=>t(J=>J.paddingRight=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"padding-bottom",label:"Padding Bottom",value:U,onChange:B=>t(J=>J.paddingBottom=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"padding-left",label:"Padding Left",value:L,onChange:B=>t(J=>J.paddingLeft=B),children:Object.keys(Ve.spacing).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"width",label:"Width",value:Z,onChange:B=>t(J=>J.width=B),children:Object.keys(Ve.size).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"height",label:"Height",value:te,onChange:B=>t(J=>J.height=B),children:Object.keys(Ve.size).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"max-width",label:"Max Width",value:z,onChange:B=>t(J=>J.maxWidth=B),children:Object.keys(Ve.size).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"max-height",label:"Max Height",value:oe,onChange:B=>t(J=>J.maxHeight=B),children:Object.keys(Ve.size).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"min-width",label:"Min Width",value:$,onChange:B=>t(J=>J.minWidth=B),children:Object.keys(Ve.size).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"min-height",label:"Min Height",value:V,onChange:B=>t(J=>J.minHeight=B),children:Object.keys(Ve.size).map(B=>d.jsx("option",{value:B,children:B},B))})]}),d.jsxs(Pr,{id:"styling",title:"Styling",isOpen:Ce===5,toggleState:B=>Pe(B?5:-1),children:[d.jsx(dt,{id:"container-background",label:"Background",value:X,onChange:B=>t(J=>J.background=B),children:Object.keys(wi).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"container-border",label:"Border",value:ue,onChange:B=>t(J=>J.border=B),children:Object.keys(wi).map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsx(dt,{id:"container-hover",label:"Hover",value:ce,onChange:B=>t(J=>J.hover=B),children:Object.keys(wi).map(B=>d.jsx("option",{value:B,children:B},B))})]})]})}function Rl(e){const{connectors:{connect:t,drag:n}}=Zr(),r=R.useMemo(()=>{var s;return wi[e.background]?(s=wi[e.background])==null?void 0:s.background:""},[e.background]),i=R.useMemo(()=>{var s;return wi[e.border]?(s=wi[e.border])==null?void 0:s.border:""},[e.border]),o=R.useMemo(()=>{var s;return e.isInteractive?(s=wi[e.hover])==null?void 0:s.hover:""},[e.isInteractive]);return d.jsx("div",{ref:s=>t(n(s)),style:{display:e.display,position:e.position,top:e.top,right:e.right,bottom:e.bottom,left:e.left,flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,rows:e.rows,columns:e.columns,gap:Ve.spacing[e.gap],marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft],height:Ve.size[e.height],width:Ve.size[e.width],maxHeight:Ve.size[e.maxHeight],maxWidth:Ve.size[e.maxWidth],minHeight:Ve.size[e.minHeight],minWidth:Ve.size[e.minWidth]},className:"".concat(r," ").concat(i," ").concat(o),children:e.children?e.children:e.showPlaceholder?d.jsx("div",{children:"Add An Item!"}):null})}const pie={defaultProps:{showPlaceholder:!0,dynamicVisibility:!1,visibilityBlueprint:{nodes:$r([],{name:"isVisible",type:"boolean",isArray:!1}),edges:[]},isVisible:!0,isList:!1,dataName:"listItem",blueprint:{nodes:$r([],{name:"listItem",type:"any",isArray:!0}),edges:[]},local:[],isInteractive:!1,onPress:{nodes:$r([]),edges:[]},display:"flex",position:"static",top:"0px",right:"0px",bottom:"0px",left:"0px",flexDirection:"column",alignItems:"normal",justifyContent:"initial",gap:"0",rows:0,columns:0,marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"4",paddingRight:"4",paddingBottom:"4",paddingLeft:"4",height:"auto",width:"auto",maxHeight:"none",maxWidth:"none",minHeight:"none",minWidth:"none",background:"no style",border:"no style",hover:"no style"},rules:{canMoveIn:(e,t,n)=>t.data.props.isList?t.data.nodes.length===0:!0},related:{settings:hie}};Rl.craft=pie;function gie(){const{id:e,actions:{setProp:t},useBlueprintValue:n,blueprint:r,text:i,color:o,fontSize:s,fontWeight:a,textAlign:l,textDecoration:u,textTransform:c,marginTop:f,marginRight:h,marginBottom:p,marginLeft:b,paddingTop:y,paddingRight:_,paddingBottom:m,paddingLeft:v}=Zr(A=>({useBlueprintValue:A.data.props.useBlueprintValue||!1,blueprint:A.data.props.blueprint,text:A.data.props.text||"",color:A.data.props.color,fontFamily:A.data.props.fontFamily,fontSize:A.data.props.fontSize,fontWeight:A.data.props.fontWeight,fontStyle:A.data.props.fontStyle,letterSpacing:A.data.props.letterSpacing,lineHeight:A.data.props.lineHeight,textAlign:A.data.props.textAlign||"left",textDecoration:A.data.props.textDecoration||"none",textTransform:A.data.props.textTransform||"none",marginTop:A.data.props.marginTop||"0px",marginRight:A.data.props.marginRight||"0px",marginBottom:A.data.props.marginBottom||"0px",marginLeft:A.data.props.marginLeft||"0px",paddingTop:A.data.props.paddingTop||"0px",paddingRight:A.data.props.paddingRight||"0px",paddingBottom:A.data.props.paddingBottom||"0px",paddingLeft:A.data.props.paddingLeft||"0px"})),[w,S]=R.useState(-1),k=by(e);return R.useEffect(()=>{t(A=>(A.blueprint={edges:A.blueprint.edges,nodes:uo(A.blueprint.nodes,k)},A))},[]),d.jsxs(Jf,{children:[d.jsxs(Pr,{id:"content",title:"Content",isOpen:w===0,toggleState:A=>S(A?0:-1),children:[d.jsx(Kn,{id:"use-blueprint-value",label:"Use Blueprint Value?",checked:n,onChange:A=>t(T=>T.useBlueprintValue=A)}),n?d.jsx(kt,{color:"primary",onClick:()=>mn({type:"blueprint",title:"Text Value",data:r,onSave:A=>t(T=>{T.blueprint=A})}),children:"Edit Blueprint Value"}):d.jsx(Kt,{id:"text",label:"Text",placeholder:"lorem ipsum",value:i,onChange:A=>t(T=>T.text=A),isValid:!0,errorMessage:""})]}),d.jsxs(Pr,{id:"content-styling",title:"Content Styling",isOpen:w===1,toggleState:A=>S(A?1:-1),children:[d.jsx(dt,{id:"color",label:"Color",value:o,onChange:A=>t(T=>T.color=A),children:Object.keys(bi.colors).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"font-size",label:"Font Size",value:s,onChange:A=>t(T=>T.fontSize=A),children:Object.keys(bi.sizes).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"font-weight",label:"Font Weight",value:a,onChange:A=>t(T=>T.fontWeight=A),children:Object.keys(bi.weight).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsxs(dt,{id:"text-align",label:"Text Align",value:l,onChange:A=>t(T=>T.textAlign=A),children:[d.jsx("option",{value:"left",children:"Left"}),d.jsx("option",{value:"center",children:"Center"}),d.jsx("option",{value:"right",children:"Right"})]}),d.jsxs(dt,{id:"text-decoration",label:"Text Decoration",value:u,onChange:A=>t(T=>T.textDecoration=A),children:[d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"underline",children:"Underline"}),d.jsx("option",{value:"line-through",children:"Line-Through"})]}),d.jsxs(dt,{id:"text-transform",label:"Text Transform",value:c,onChange:A=>t(T=>T.textTransform=A),children:[d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"uppercase",children:"Uppercase"}),d.jsx("option",{value:"lowercase",children:"Lowercase"})]})]}),d.jsxs(Pr,{id:"spacing",title:"Spacing",isOpen:w===2,toggleState:A=>S(A?2:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:f,onChange:A=>t(T=>T.marginTop=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:h,onChange:A=>t(T=>T.marginRight=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:p,onChange:A=>t(T=>T.marginBottom=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:b,onChange:A=>t(T=>T.marginTop=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-top",label:"Padding Top",value:y,onChange:A=>t(T=>T.paddingTop=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-right",label:"Padding Right",value:_,onChange:A=>t(T=>T.paddingRight=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-bottom",label:"Padding Bottom",value:m,onChange:A=>t(T=>T.paddingBottom=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))}),d.jsx(dt,{id:"padding-left",label:"Padding Left",value:v,onChange:A=>t(T=>T.paddingLeft=A),children:Object.keys(Ve.spacing).map(A=>d.jsx("option",{value:A,children:A},A))})]})]})}function Tl(e){const{connectors:{connect:t,drag:n}}=Zr(),r=R.useMemo(()=>{var o;return bi.colors[e.color]?(o=bi.colors[e.color])==null?void 0:o.text:""},[e.color]),i=R.useMemo(()=>bi.weight[e.fontWeight]?bi.weight[e.fontWeight]:"",[e.fontWeight]);return d.jsx("p",{ref:o=>t(n(o)),style:{textAlign:e.textAlign,...bi.sizes[e.fontSize]||{},textDecoration:e.textDecoration,textTransform:e.textTransform,marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],paddingTop:Ve.spacing[e.paddingTop],paddingRight:Ve.spacing[e.paddingRight],paddingBottom:Ve.spacing[e.paddingBottom],paddingLeft:Ve.spacing[e.paddingLeft]},className:"".concat(r," ").concat(i),children:e.text})}const mie={defaultProps:{useBlueprintValue:!1,blueprint:{nodes:$r([],{name:"output",type:"string",isArray:!1}),edges:[]},text:"hello world",color:"base",fontSize:"base",textAlign:"left",textDecoration:"none",textTransform:"none",marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",paddingTop:"0",paddingRight:"0",paddingBottom:"0",paddingLeft:"0"},rules:{},related:{settings:gie}};Tl.craft=mie;const yie="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",vie=({versionedResource:e})=>{const t=ln.useValue(),{actions:n}=Is();return R.useEffect(()=>{var i;let r=(i=e.data.pages.find(o=>o.name===t.characterPage))==null?void 0:i.lexical;r||(r=yie),n.deserialize(Ca.decompress(Ca.decodeBase64(r)))},[t.characterPage]),d.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:d.jsx(B4,{children:d.jsx(Dl,{is:Rl,canvas:!0,children:d.jsx(Tl,{text:"Testing the world"})})})})},wie=({})=>d.jsx(d.Fragment,{children:d.jsx("p",{children:"TODO"})});function Nf({placeholder:e}){const{connectors:{connect:t,drag:n}}=Zr();return d.jsx("div",{ref:r=>t(n(r))})}function bie(){const{actions:{setProp:e},placeholder:t,blueprint:n}=Zr(r=>({placeholder:r.data.props.placeholder,blueprint:r.data.props.blueprint}));return d.jsx(d.Fragment,{})}Nf.craft={rules:{},related:{settings:bie}};function S5({data:e,isOpen:t,requestClose:n,onSave:r,onDelete:i}){const o=ln.useValue(),s=Un(o.versionId),[a,l]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(!1);return R.useEffect(()=>{e&&(l(e.name),c(e.type.type),h(e.type.isArray||!1))},[e]),s?d.jsxs(ar,{isOpen:t,onClose:n,children:[d.jsx(lr,{title:"Add Page State",onClose:n}),d.jsxs(ur,{children:[d.jsx(Kt,{id:"var-name",label:"Variable Name",value:a,onChange:l,isValid:!0,errorMessage:""}),d.jsxs(dt,{id:"var-type",label:"Type",value:u,onChange:c,children:[d.jsx("option",{value:"string",children:"string"}),d.jsx("option",{value:"number",children:"number"}),d.jsx("option",{value:"boolean",children:"boolean"}),d.jsx("option",{value:"enum",children:"enum"}),s.data.types.map(p=>d.jsx("option",{value:p.name,children:p.name},p.name))]}),d.jsx(Kn,{id:"is-array",label:"Is Array?",checked:f,onChange:h})]}),d.jsxs(wr,{children:[d.jsx(kt,{color:"danger",onClick:()=>{i(),n()},children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>{if(!a||!u||!e)return n();r({name:a,type:{type:u,isArray:f,useTextArea:!1,options:[],outputType:"none",isOutputAnArray:!1,inputs:[]}}),n()},children:"Confirm"})]})]}):d.jsx(d.Fragment,{})}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ie=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E5=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sie=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>R.createElement("svg",{ref:l,...xie,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:E5("lucide",i),...a},[...s.map(([u,c])=>R.createElement(u,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=(e,t)=>{const n=R.forwardRef(({className:r,...i},o)=>R.createElement(Sie,{ref:o,iconNode:t,className:E5("lucide-".concat(_ie(e)),r),...i}));return n.displayName="".concat(e),n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eie=Qf("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=Qf("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cie=Qf("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jie=Qf("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aie=Qf("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),k5=()=>{const{nodes:e,actions:t,isActive:n}=Is(f=>({nodes:f.nodes,isActive:f.events.selected})),[r,i]=It.useState({}),[o,s]=It.useState(""),{connectors:{select:a}}=Is(),l=f=>{i(h=>({...h,[f]:!h[f]}))},u=f=>{var _;const h=e[f];if(!h)return null;const p=r[f],b=h.data.nodes&&h.data.nodes.length>0,y=n.has(f);return d.jsxs("div",{className:"select-none",children:[d.jsxs("div",{ref:m=>a(m,f),className:"\n            flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors duration-200 hover:bg-secondary/80\n            ".concat(y?"bg-blue-500/20 text-blue-700 dark:text-blue-300":"","\n            ").concat(o===f&&!y?"bg-secondary/50":"","\n          "),onMouseEnter:()=>s(f),onMouseLeave:()=>s(""),children:[b?d.jsx("button",{onClick:m=>{m.stopPropagation(),l(f)},className:"w-4 h-4 flex items-center justify-center hover:bg-secondary/80 rounded",children:p?d.jsx(Eie,{className:"w-4 h-4"}):d.jsx(kie,{className:"w-4 h-4"})}):d.jsx("div",{className:"w-4"}),d.jsx("button",{onClick:m=>{m.stopPropagation(),t.setHidden(f,!h.data.hidden)},className:"text-foreground/80 hover:text-foreground",children:h.data.hidden?d.jsx(Cie,{className:"w-4 h-4"}):d.jsx(jie,{className:"w-4 h-4"})}),d.jsx("span",{className:"text-sm font-medium",children:((_=h.data.custom)==null?void 0:_.displayName)||h.data.displayName||h.data.name})]}),b&&p&&d.jsx("div",{className:"ml-1.5 border-l border-border/50 pl-2 mt-1",children:h.data.nodes.map(m=>u(m))})]},f)},c=Object.keys(e).filter(f=>!e[f].data.parent);return d.jsxs("div",{className:"p-4 space-y-2",children:[d.jsxs("div",{className:"text-sm font-medium flex items-center gap-2 px-2",children:[d.jsx(Aie,{className:"w-4 h-4"}),"Layers"]}),d.jsx("div",{className:"space-y-1",children:c.map(f=>u(f))})]})};function Nie(){const e=ln.useValue(),t=Un(e.versionId),n=R.useMemo(()=>t==null?void 0:t.data.pages.find(h=>h.name===e.characterPage),[t,e.characterPage]),[r,i]=R.useState("components"),[o,s]=R.useState(null),[a,l]=R.useState(null),{connectors:u}=Is(),{selected:c,actions:f}=Is((h,p)=>{const[b]=h.events.selected;let y;return b&&(y={id:b,name:h.nodes[b].data.name,settings:h.nodes[b].related&&h.nodes[b].related.settings,isDeletable:p.node(b).isDeletable()}),{selected:y}});return t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.jsx(dt,{id:"page",label:"Page",value:e.characterPage,onChange:s2,children:t.data.pages.map(h=>d.jsx("option",{value:h.name,children:h.name},h.name))}),d.jsxs("button",{type:"button",onClick:()=>pn(e.versionId,m5(t.data,"character")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),d.jsxs(dt,{id:"designer-tab",label:"",value:r,onChange:i,children:[d.jsx("option",{value:"components",children:"Components"}),d.jsx("option",{value:"details",children:"Details"}),d.jsx("option",{value:"state",children:"Page Info"})]}),d.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?d.jsxs(d.Fragment,{children:[d.jsx("h4",{className:"",children:"Components"}),d.jsxs("div",{className:"flex flex-col my-4",children:[d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Dl,{is:Rl,canvas:!0})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Tl,{text:"Hi World"})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),d.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Nf,{placeholder:"Search...",blueprint:{nodes:$r([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(xf,{})),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Sf,{isList:!1,buttons:[],blueprint:{nodes:$r(),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&c?d.jsxs(d.Fragment,{children:[c.settings&&It.createElement(c.settings),c.isDeletable?d.jsx(kt,{className:"mt-4",color:"danger",onClick:()=>{f.delete(c.id)},children:"Delete"}):null]}):r==="state"?d.jsxs(d.Fragment,{children:[d.jsx(Kf,{data:a,isOpen:a!==null,requestClose:()=>l(null),onSave:h=>{pn(t.local_id,w5(t.data,"character",a,h)),s2(h)}}),d.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[d.jsx(kt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{pn(t.local_id,v5(t.data,"character",e.characterPage))},children:"Delete"}),d.jsx(kt,{color:"primary",onClick:()=>l(e.characterPage),children:"Rename"})]}),d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"Page Blueprint",data:n==null?void 0:n.blueprint,onSave:h=>pn(t.local_id,b5(t.data,"character",e.characterPage,h))}),children:"Edit Page Blueprint"}),d.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[d.jsx("div",{style:{display:"flex",alignItems:"center"},children:d.jsx("h5",{children:"Page State"})}),d.jsxs("button",{onClick:()=>pn(t.local_id,y5(t.data,"character",e.characterPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],outputType:"string",isOutputAnArray:!1,inputs:[]})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),d.jsx(qf,{}),d.jsx("div",{children:n==null?void 0:n.state.map(h=>d.jsx("div",{onClick:()=>s(h),children:d.jsxs("p",{children:[h.name," | ",h.type.type,h.type.isArray?"(Array)":""]})},h.name))}),d.jsx(S5,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:h=>pn(t.local_id,_5(t.data,"character",e.characterPage,o.name,{...h,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?d.jsx(k5,{}):null]}):d.jsx(d.Fragment,{})}function Rie(){const{id:e,actions:{setProp:t},label:n,dynamicOptions:r,optionsBlueprint:i,onChange:o,marginTop:s,marginRight:a,marginBottom:l,marginLeft:u,width:c,maxWidth:f,minWidth:h}=Zr(_=>({label:_.data.props.label,dynamicOptions:_.data.props.dynamicOptions,optionsBlueprint:_.data.props.optionsBlueprint,options:_.data.props.options,onChange:_.data.props.onChange,marginTop:_.data.props.marginTop,marginRight:_.data.props.marginRight,marginBottom:_.data.props.marginBottom,marginLeft:_.data.props.marginLeft,width:_.data.props.width,maxWidth:_.data.props.maxWidth,minWidth:_.data.props.minWidth})),[p,b]=R.useState(-1),y=by(e);return R.useEffect(()=>{t(_=>(_.optionsBlueprint={edges:_.optionsBlueprint.edges,nodes:uo(_.optionsBlueprint.nodes,y)},_.onChange={edges:_.onChange.edges,nodes:uo(_.onChange.nodes,y)},_))},[y]),d.jsxs(Jf,{children:[d.jsx(Pr,{id:"label",title:"Label",isOpen:p===0,toggleState:_=>b(_?0:-1),children:d.jsx(Kt,{id:"label",label:"Update Label",value:n,onChange:_=>t(m=>m.label=_),isValid:!0,errorMessage:""})}),d.jsxs(Pr,{id:"options",title:"Options",isOpen:p===1,toggleState:_=>b(_?1:-1),children:[d.jsx(Kn,{id:"dynamic-options",label:"Dynamic Options?",checked:r,onChange:_=>t(m=>m.dynamicOptions=_)}),r?d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"",data:i,onSave:_=>{t(m=>(m.optionsBlueprint=_,m.onChange={edges:m.onChange.edges,nodes:uo(m.onChange.nodes,[...y,{name:"selectedValue",type:Cg(_),isArray:!1}])},m))}}),children:"Options Blueprint"}):d.jsx("p",{children:"TODO: handle options."}),d.jsx("div",{className:"h-2"}),d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"",data:o,onSave:_=>{t(m=>m.onChange=_)}}),children:"onChange Blueprint"})]}),d.jsxs(Pr,{id:"spacing",title:"Spacing",isOpen:p===2,toggleState:_=>b(_?2:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:s,onChange:_=>t(m=>m.marginTop=_),children:Object.keys(Ve.spacing).map(_=>d.jsx("option",{value:_,children:_},_))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:a,onChange:_=>t(m=>m.marginRight=_),children:Object.keys(Ve.spacing).map(_=>d.jsx("option",{value:_,children:_},_))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:l,onChange:_=>t(m=>m.marginBottom=_),children:Object.keys(Ve.spacing).map(_=>d.jsx("option",{value:_,children:_},_))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:u,onChange:_=>t(m=>m.marginTop=_),children:Object.keys(Ve.spacing).map(_=>d.jsx("option",{value:_,children:_},_))}),d.jsx(dt,{id:"width",label:"Width",value:c,onChange:_=>t(m=>m.width=_),children:Object.keys(Ve.size).map(_=>d.jsx("option",{value:_,children:_},_))}),d.jsx(dt,{id:"max-width",label:"Max Width",value:f,onChange:_=>t(m=>m.maxWidth=_),children:Object.keys(Ve.size).map(_=>d.jsx("option",{value:_,children:_},_))}),d.jsx(dt,{id:"min-width",label:"Min Width",value:h,onChange:_=>t(m=>m.minWidth=_),children:Object.keys(Ve.size).map(_=>d.jsx("option",{value:_,children:_},_))})]})]})}function nm(e){var i;const{connectors:{connect:t,drag:n}}=Zr(),r=R.useMemo(()=>[],[]);return d.jsx(dt,{ref:o=>t(n(o)),style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},id:e.label,label:e.label,value:(i=r[0])==null?void 0:i.name,onChange:()=>{},children:r.map(o=>d.jsx("option",{children:o.name},o.name))})}const Tie={defaultProps:{label:"Select",dynamicOptions:!1,optionsBlueprint:{nodes:$r([],{name:"options",type:"any",isArray:!0}),edges:[]},options:[],onChange:{nodes:$r([{name:"selectedValue",type:"object",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:Rie}};nm.craft=Tie;function Iie(){const{id:e,actions:{setProp:t},label:n,type:r,minNumber:i,maxNumber:o,getValue:s,onChange:a,marginTop:l,marginRight:u,marginBottom:c,marginLeft:f,width:h,maxWidth:p,minWidth:b}=Zr(v=>({label:v.data.props.label,type:v.data.props.type,minNumber:v.data.props.minNumber,maxNumber:v.data.props.maxNumber,getValue:v.data.props.getValue,onChange:v.data.props.onChange,marginTop:v.data.props.marginTop,marginRight:v.data.props.marginRight,marginBottom:v.data.props.marginBottom,marginLeft:v.data.props.marginLeft,width:v.data.props.width,maxWidth:v.data.props.maxWidth,minWidth:v.data.props.minWidth})),[y,_]=R.useState(-1),m=by(e);return R.useEffect(()=>{t(v=>{v.getValue={edges:v.getValue.edges,nodes:uo(v.getValue.nodes,m,{name:"value",type:r==="text"?"string":"number",isArray:!1})},v.onChange={edges:v.onChange.edges,nodes:uo(v.onChange.nodes,[...m,{name:"field value",type:r==="text"?"string":"number",isArray:!1}])}})},[m]),d.jsxs(Jf,{children:[d.jsx(Pr,{id:"label",title:"Label",isOpen:y===0,toggleState:v=>_(v?0:-1),children:d.jsx(Kt,{id:"label",label:"Update Label",value:n,onChange:v=>t(w=>w.label=v),isValid:!0,errorMessage:""})}),d.jsxs(Pr,{id:"data",title:"Data",isOpen:y===1,toggleState:v=>_(v?1:-1),children:[d.jsx(dt,{id:"input-type",label:"Type",value:r,onChange:v=>{t(w=>(w.type=v,w.getValue.nodes=uo(w.getValue.nodes,m,{name:"value",type:v==="text"?"string":"number",isArray:!1}),w.onChange.nodes=uo(w.onChange.nodes,[...m,{name:"field value",type:v==="text"?"string":"number",isArray:!1}]),w))},children:["text","number"].map(v=>d.jsx("option",{value:v,children:v},v))}),r==="number"&&d.jsxs(d.Fragment,{children:[d.jsx(Kt,{id:"min-number",label:"Min Number",type:"number",value:i,onChange:v=>t(w=>w.minNumber=v),isValid:!0,errorMessage:""}),d.jsx(Kt,{id:"max-number",label:"Max Number",type:"number",value:o,onChange:v=>t(w=>w.maxNumber=v),isValid:!0,errorMessage:""})]}),d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"",data:s,onSave:v=>{t(w=>w.getValue=v)}}),children:"Get Value Blueprint"}),d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"",data:a,onSave:v=>{t(w=>w.onChange=v)}}),children:"onChange Blueprint"})]}),d.jsxs(Pr,{id:"spacing",title:"Spacing",isOpen:y===2,toggleState:v=>_(v?2:-1),children:[d.jsx(dt,{id:"margin-top",label:"Margin Top",value:l,onChange:v=>t(w=>w.marginTop=v),children:Object.keys(Ve.spacing).map(v=>d.jsx("option",{value:v,children:v},v))}),d.jsx(dt,{id:"margin-right",label:"Margin Right",value:u,onChange:v=>t(w=>w.marginRight=v),children:Object.keys(Ve.spacing).map(v=>d.jsx("option",{value:v,children:v},v))}),d.jsx(dt,{id:"margin-bottom",label:"Margin Bottom",value:c,onChange:v=>t(w=>w.marginBottom=v),children:Object.keys(Ve.spacing).map(v=>d.jsx("option",{value:v,children:v},v))}),d.jsx(dt,{id:"margin-left",label:"Margin Left",value:f,onChange:v=>t(w=>w.marginTop=v),children:Object.keys(Ve.spacing).map(v=>d.jsx("option",{value:v,children:v},v))}),d.jsx(dt,{id:"width",label:"Width",value:h,onChange:v=>t(w=>w.width=v),children:Object.keys(Ve.size).map(v=>d.jsx("option",{value:v,children:v},v))}),d.jsx(dt,{id:"max-width",label:"Max Width",value:p,onChange:v=>t(w=>w.maxWidth=v),children:Object.keys(Ve.size).map(v=>d.jsx("option",{value:v,children:v},v))}),d.jsx(dt,{id:"min-width",label:"Min Width",value:b,onChange:v=>t(w=>w.minWidth=v),children:Object.keys(Ve.size).map(v=>d.jsx("option",{value:v,children:v},v))})]})]})}function rm(e){const{connectors:{connect:t,drag:n}}=Zr();return d.jsx(Kt,{ref:r=>t(n(r)),style:{marginTop:Ve.spacing[e.marginTop],marginRight:Ve.spacing[e.marginRight],marginBottom:Ve.spacing[e.marginBottom],marginLeft:Ve.spacing[e.marginLeft],width:Ve.size[e.width],maxWidth:Ve.size[e.maxWidth],minWidth:Ve.size[e.minWidth]},type:e.type,minNumber:e.minNumber,maxNumber:e.maxNumber,isValid:!0,errorMessage:"",id:e.label,label:e.label,value:"",onChange:()=>{}})}const Pie={defaultProps:{label:"Select",type:"text",minNumber:0,maxNumber:100,getValue:{nodes:$r([],{name:"value",type:"string",isArray:!1}),edges:[]},onChange:{nodes:$r([{name:"field value",type:"string",isArray:!1}]),edges:[]},marginTop:"0",marginRight:"0",marginBottom:"0",marginLeft:"0",width:"auto",maxWidth:"none",minWidth:"none",local:[]},rules:{},related:{settings:Iie}};rm.craft=Pie;const Oie=()=>{const e=ln.useValue(),t=Un(e.versionId),n=R.useMemo(()=>t==null?void 0:t.data.creator.find(h=>h.name===e.creatorPage),[t,e.creatorPage]),[r,i]=R.useState("components"),[o,s]=R.useState(null),[a,l]=R.useState(null),{connectors:u}=Is(),{selected:c,actions:f}=Is((h,p)=>{const[b]=h.events.selected;let y;return b&&(y={id:b,name:h.nodes[b].data.name,settings:h.nodes[b].related&&h.nodes[b].related.settings,isDeletable:p.node(b).isDeletable()}),{selected:y}});return t?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.jsx(dt,{id:"page",label:"Page",value:e.creatorPage,onChange:o2,children:t.data.creator.map(h=>d.jsx("option",{value:h.name,children:h.name},h.name))}),d.jsxs("button",{type:"button",onClick:()=>pn(t.local_id,m5(t.data,"builder")),className:"ml-2 text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page"})]})]}),d.jsxs(dt,{id:"designer-tab",label:"",value:r,onChange:i,children:[d.jsx("option",{value:"components",children:"Components"}),d.jsx("option",{value:"details",children:"Details"}),d.jsx("option",{value:"state",children:"Page Info"})]}),d.jsx("p",{className:"mb-3",children:"This Tooling is still under heavy development, Please post any bugs on github or discord."}),r==="components"?d.jsxs(d.Fragment,{children:[d.jsx("h4",{className:"",children:"Components"}),d.jsxs("div",{className:"flex flex-col my-4",children:[d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Dl,{is:Rl,canvas:!0})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M69 153.99l187 110 187-110M256 463.99v-200"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Container"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Tl,{text:"Hi World"})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 415.5l120-320 120 320M230 303.5H74M326 239.5c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"}),d.jsx("path",{d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Nf,{placeholder:"Search...",blueprint:{nodes:$r([{name:"searchText",type:"string",isArray:!1}]),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Searchbar"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(nm,{})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Select"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(rm,{})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29L448 448"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Text Input"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(xf,{})),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"})}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"Divider"})]}),d.jsxs("div",{className:"flex items-center p-4 border",ref:h=>u.create(h,d.jsx(Sf,{isList:!1,buttons:[],blueprint:{nodes:$r(),edges:[]}})),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 mr-4",viewBox:"0 0 512 512",children:[d.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"}),d.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160M336 256H176"})]}),d.jsx("p",{className:"text-sm font-medium capitalize font-body text-white lg:text-lg md:text-base",children:"FaB"})]})]})]}):r==="details"&&c?d.jsxs(d.Fragment,{children:[c.settings&&It.createElement(c.settings),c.isDeletable?d.jsx(kt,{className:"mt-4",color:"danger",onClick:()=>{f.delete(c.id)},children:"Delete"}):null]}):r==="state"?d.jsxs(d.Fragment,{children:[d.jsx(Kf,{data:a,isOpen:a!==null,requestClose:()=>l(null),onSave:h=>{pn(t.local_id,w5(t.data,"builder",a,h)),o2(h)}}),d.jsxs("div",{className:"inline-flex rounded-md shadow-sm my-2",children:[d.jsx(kt,{color:"danger",disabled:t.data.pages.length<=1,onClick:()=>{pn(t.local_id,v5(t.data,"builder",e.creatorPage))},children:"Delete"}),d.jsx(kt,{color:"light",onClick:()=>l(e.creatorPage),children:"Rename"})]}),d.jsx(kt,{color:"light",onClick:()=>mn({type:"blueprint",title:"Page Blueprint",data:n==null?void 0:n.blueprint,onSave:h=>pn(t.local_id,b5(t.data,"builder",e.creatorPage,h))}),children:"Edit Page Blueprint"}),d.jsxs("div",{className:"flex items-center justify-between my-2 px-2",children:[d.jsx("div",{style:{display:"flex",alignItems:"center"},children:d.jsx("h5",{children:"Page State"})}),d.jsxs("button",{onClick:()=>pn(t.local_id,y5(t.data,"builder",e.creatorPage,"newState",{type:"string",isArray:!1,useTextArea:!1,options:[],inputs:[],outputType:"none",isOutputAnArray:!1})),type:"button",className:"text-brand-700 border border-brand-700 hover:bg-brand-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-brand-300 font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center me-2 dark:border-brand-500 dark:text-brand-500 dark:hover:text-white dark:focus:ring-brand-800 dark:hover:bg-brand-500",children:[d.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 18",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),d.jsx("span",{className:"sr-only",children:"Add Page State"})]})]}),d.jsx(qf,{}),d.jsx("div",{className:"pt-2 flex flex-col gap-y-2",children:n==null?void 0:n.state.map(h=>d.jsx("div",{className:"bg-neutral-50 border border-neutral-300 text-neutral-900 p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white",onClick:()=>s(h),children:d.jsxs("p",{children:[h.name," | ",h.type.type,h.type.isArray?"(Array)":""]})},h.name))}),d.jsx(S5,{isOpen:o!==null,requestClose:()=>s(null),data:o,onSave:h=>pn(t.local_id,_5(t.data,"builder",e.creatorPage,o.name,{...h,value:void 0})),onDelete:()=>{}})]}):null,r!=="state"?d.jsx(k5,{}):null]}):d.jsx(d.Fragment,{})};function C5(e){const t=Ds(()=>xt.versions.get(e||""),[e]);if(t)return{...t,data:t==null?void 0:t.data}}function $ie(){const e=ln.useValue();return C5(e.versionId)?d.jsx("aside",{className:"border-l border-neutral-500 dark:border-neutral-700 fixed top-0 right-0 z-40 w-64 h-screen transition-transform translate-x-full sm:-translate-x-0","aria-label":"Editor Sidebar",children:d.jsxs("div",{className:"h-full flex flex-col px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-neutral-950",children:[d.jsx("div",{className:"py-4 mb-4 border-b border-neutral-200 dark:border-neutral-700",children:d.jsx("span",{className:"self-center text-xl font-semibold whitespace-nowrap dark:text-white",children:"Details"})}),e.tab==="character"?d.jsx("p",{children:"Default Character data, used for types in GetCharacterData nodes and such."}):e.tab==="data"?d.jsx("p",{children:"Custom data for the system (Items, classes, etc.)"}):e.tab==="types"?d.jsx("p",{children:"The data types for everything in this system."}):e.tab==="editor"?d.jsx(Nie,{}):e.tab==="creator"&&d.jsx(Oie,{})]})}):d.jsx(d.Fragment,{})}const Mie="eyJST09UIjp7InR5cGXECHJlc29sdmVkTmFtZSI6IkNvbnRhaW5lciJ9LCJpc0NhbnZhcyI6dHJ1ZSwicHJvcHPENXNob3dQbGFjZWhvbGRlcsggZHluYW1pY1Zpc2liaWxpdHkiOmZhbHNlLCJ2yRNCbHVlcHJpbnTESG5vZGVzIjpbeyJpZCI6IjEiLOcAmCJlbnRyeSIsImRhdGHEKnBhcmFtxCtdfSwicG9zaXRpb27EGXgiOjEwMCwiecUIfX0sx0wyykxvdXRwdXTQTcQJbuYA9Wlz5QCzbGXKNGJvb2xlYW4i5AEFQXJyYegAy33SfzI1y39dLCJlZGflANXkAKrKWucBI2lzTGlzdMdN5gCS5wF6bGlzdEl0ZW0iLCJi/wEk/wEk/wEk/wEk9wEk6wCfxzNhbsR96QEf5ADg/wEe8AEebG9jYWzEDMRHSW50ZXJhY3RpdmXpAR9vblByZXPlAnP/AQf/AQf1AQfvAI5kaXNwbOQAyiJmbGV4Isw8InN0YXRpY8R0b3AiOiIwcMQgcmlnaHTJDmJvdHRvbckPbGVmyhzEUURpcmVjx09jb2x1beQCXWFsaWdu5AFXcyI6Im5vcm1hbCIsImp1c3RpZnnkA4xl5AIFImluaXRpxRtnYeUAgMR+b3dzIjowLMdNxgxtYXJnaW5U5gClIsgQUugAqckSQukArckTTOcAseQA+WFkZGluZ8ZHNMoRyEjLE8lJyxTHSsQSaGXHM2F1dG8iLCJ3aWR0aMoPbWF4SMgibm9u5AOAbWF4V8clyBJpbtElaW7PJWJhY2tncm91buQCHW5vIHN0eeUDz2JvcuUEocwUaG92zhPqAf3xBQYsImN1c+UA4nt9LCJoaWRkZW7pAp/oApQiNnk0Si1UMzV1diJdLCJsaW5rZWROxh175AMUTmR2cFBQMVVzMvsFe1RleHTuBXbHZ+kFd3VzZekFP1ZhbHXqAyn/BDL/Ayv/Ayv/BDL4BDLJIccxc3RyaW5n/wVS/wQ0LCJ05AEm5AEtc3RpbmcgdGhlIHdvcmxk5AGqb2xv5AHYYmFz5AHnZm9udFNpesR7xxLEPEHkA3LkBNDkAqXGE0RlY29yYecDm+cCUMQYVHJhbnNmb3LkAt/HF/8DYP8DYPUDYMsRzEjwA2DLFMlK8QK45QJD7gKzcGFy5gRE5Qf5+QLD9QK36wLX/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3/wK3fQ==",Die=({versionedResource:e})=>{const t=ln.useValue(),{actions:n}=Is();return R.useEffect(()=>{var i;let r=(i=e.data.creator.find(o=>o.name===t.creatorPage))==null?void 0:i.lexical;r||(r=Mie),n.deserialize(Ca.decompress(Ca.decodeBase64(r)))},[t.creatorPage]),d.jsx("div",{className:"mt-3 border-2 border-neutral-200 border-dashed rounded-lg dark:border-neutral-700",children:d.jsx(B4,{children:d.jsx(Dl,{is:Rl,canvas:!0,children:d.jsx(Tl,{text:"Testing the world"})})})})};function Lie(e){return Ds(()=>xt.systems.get(e||""),[e])}const Bie=()=>{const{id:e}=aN();let t=_m();const n=R.useMemo(()=>e?"".concat(e,"|edits"):void 0,[e]),r=C5(e),i=Un(n),o=Lie(i==null?void 0:i.reference_id),s=ln.useValue();R.useEffect(()=>{!n||n===s.versionId||ln.set(u=>({...u,versionId:n}))},[n,s]);const a=R.useMemo(()=>({Container:Rl,Text:Tl,Select:nm,TextInput:rm,FAB:Sf,Searchbar:Nf,DesignerDivider:xf}),[Rl,Tl,nm,rm,Sf,Nf,xf]),l=R.useCallback(u=>{i&&pn(i.local_id,Ij(i.data,u.serialize()))},[i,pn,Ij]);return n?i?o?d.jsx(yee,{resolver:a,onNodesChange:l,children:d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx(Sa,{title:o.name,options:[{onClick:()=>mn({type:"SaveNewVersion",title:"none",data:"none",onSave:async u=>{const c=await Ww(i);!c||!await w1("system",c.reference_id,c.local_id,!1)||r&&(await Ww(r,n),t("/library"))}}),Content:()=>d.jsx("p",{className:"block cursor-pointer py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 md:dark:text-blue-500",children:"Save Version"})}],hasSidebar:!0}),d.jsxs("div",{className:"p-4 sm:mr-64 relative flex flex-col flex-grow",children:[d.jsxs(dt,{id:"tab-selector",label:"",value:s.tab,onChange:x9,children:[d.jsx("option",{value:"character",children:"Character"}),d.jsx("option",{value:"data",children:"Data"}),d.jsx("option",{value:"types",children:"Types"}),d.jsx("option",{value:"functions",children:"Functions"}),d.jsx("option",{value:"editor",children:"Editor"}),d.jsx("option",{value:"creator",children:"Creator"})]}),s.tab==="character"?d.jsx(uie,{editsId:n,versionedResource:i}):s.tab==="data"?d.jsx(cie,{editsId:n,versionedResource:i}):s.tab==="types"?d.jsx(fie,{editsId:n,versionedResource:i}):s.tab==="functions"?d.jsx(wie,{versionedResource:i}):s.tab==="editor"?d.jsx(vie,{versionedResource:i}):s.tab==="creator"&&d.jsx(Die,{versionedResource:i})]}),d.jsx($ie,{})]})}):d.jsx(d.Fragment,{children:"Loading System..."}):d.jsx(d.Fragment,{children:"Loading Edits..."}):d.jsx(d.Fragment,{children:"id not defined..."})},j5=Ta([{name:"BardsBallad",light:{background:"#121217",brand:{50:"#fcf9f0",100:"#f9f2db",200:"#f2e1b6",300:"#eacc87",400:"#e3b667",500:"#d99736",600:"#cb802b",700:"#a86426",800:"#875025",900:"#6d4221",950:"#3b210f"},neutral:{50:"#f8f9fb",100:"#f0f1f5",200:"#d9dbe3",300:"#babdcf",400:"#9499b3",500:"#6e7499",600:"#575e7f",700:"#464d66",800:"#393d50",900:"#2e3240",950:"#191c27"},orange:{50:"#fff7eb",100:"#ffe9c6",200:"#ffcd87",300:"#ffac4a",400:"#ff8a16",500:"#e67300",600:"#c35e00",700:"#9e4c00",800:"#7a3b00",900:"#5e2f00",950:"#351a00"},red:{50:"#fff5f5",100:"#ffe5e5",200:"#ffbdbd",300:"#ff8f8f",400:"#ff5c5c",500:"#ff3030",600:"#e52626",700:"#b31f1f",800:"#8c1919",900:"#6a1414",950:"#410d0d"},blue:{50:"#f3faff",100:"#e2f3ff",200:"#bce1ff",300:"#82cbff",400:"#41b2ff",500:"#1f93e6",600:"#166eb3",700:"#125892",800:"#0f4776",900:"#0d3a5e",950:"#07233b"},green:{50:"#f3fcf5",100:"#e4f8e8",200:"#c3edcb",300:"#92d8a4",400:"#57be75",500:"#35a257",600:"#298548",700:"#236e3b",800:"#1c552f",900:"#164429",950:"#0b2617"}}},{name:"ValentinesDay",light:{background:"#442835",brand:{50:"#fff7f9",100:"#ffeef2",200:"#fed7e2",300:"#fbb6ce",400:"#f687b3",500:"#ed64a6",600:"#d53f8c",700:"#b83280",800:"#97266d",900:"#702459",950:"#521640"},neutral:{50:"#fdf7f9",100:"#faf0f3",200:"#f4d9e1",300:"#e8b8ca",400:"#d68aa8",500:"#b76d89",600:"#91536b",700:"#734256",800:"#5b3544",900:"#442835",950:"#2b1821"},orange:{50:"#fff8f1",100:"#ffe8d8",200:"#ffd0ae",300:"#ffaf7e",400:"#ff8552",500:"#f75e28",600:"#d9471a",700:"#b43716",800:"#8c2c13",900:"#6c2311",950:"#3e1409"},red:{50:"#fff5f5",100:"#ffe3e3",200:"#ffbaba",300:"#ff8989",400:"#ff5c5c",500:"#fc2626",600:"#d21f1f",700:"#aa1919",800:"#851515",900:"#661010",950:"#400909"},blue:{50:"#f5f8ff",100:"#ebf2ff",200:"#cbdcff",300:"#a2bfff",400:"#799fff",500:"#567dff",600:"#455fd4",700:"#394aa9",800:"#303b85",900:"#262e66",950:"#171a40"},green:{50:"#f5fdf7",100:"#e7f8eb",200:"#c6edcf",300:"#95dca7",400:"#5fc67d",500:"#3ca75e",600:"#2e8749",700:"#266e3d",800:"#205530",900:"#1a4226",950:"#0d2615"}}}]),Fie=()=>{let e=document.createElement("script");e.id="eruda-script",e.src="https://cdn.jsdelivr.net/npm/eruda",document.body.append(e),e.onload=()=>{eruda.init()}},zie=()=>{const e=document.getElementById("eruda-script");e&&(eruda.destroy(),e.remove())},Zf=Ta({theme:"BardsBallad",scheme:"dark",isErudaActive:!1},{onSet:(e,t)=>{cT.set("settings",e),t.isErudaActive&&!e.isErudaActive?zie():!t.isErudaActive&&e.isErudaActive&&Fie(),(e.theme!==t.theme||e.scheme!==t.scheme)&&A5()}}),Hie=async()=>{const e=await cT.get("settings");e&&Zf.set(e)};Hie();const Uie=e=>{Zf.set(t=>({...t,isErudaActive:e}))},Wie=e=>{Zf.set(t=>({...t,theme:e}))},A5=()=>{const e=j5.get(),t=Zf.get(),n=e.find(r=>r.name===t.theme);if(n){document.documentElement.style.setProperty("--background",n.light.background);for(let r in n.light.brand)document.documentElement.style.setProperty("--brand-".concat(r),n.light.brand[r]);for(let r in n.light.neutral)document.documentElement.style.setProperty("--neutral-".concat(r),n.light.neutral[r]);for(let r in n.light.orange)document.documentElement.style.setProperty("--orange-".concat(r),n.light.orange[r]);for(let r in n.light.red)document.documentElement.style.setProperty("--red-".concat(r),n.light.red[r]);for(let r in n.light.blue)document.documentElement.style.setProperty("--blue-".concat(r),n.light.blue[r]);for(let r in n.light.green)document.documentElement.style.setProperty("--green-".concat(r),n.light.green[r])}},Vie={0:"free",1:"premium",2:"fancy",3:"developer"};function qie(e){return Vie[e]||"free"}const Kie=()=>d.jsx("p",{children:"hello"}),Gie=({tabs:e,props:t})=>{var i;const[n,r]=R.useState(e[0].id);return d.jsxs("div",{className:"w-full mt-5",children:[d.jsx("div",{className:"flex space-x-2 border-b border-neutral-700",children:e.map(o=>d.jsx("button",{onClick:()=>{r(o.id)},className:"py-2 px-4 text-sm font-medium transition-colors border-brand-500 ".concat(n===o.id?"border-b-2 text-brand-500":"text-neutral-400 hover:text-brand-400"),children:o.label},o.id))}),d.jsx("div",{className:"p-4",children:((i=e.find(o=>o.id===n))==null?void 0:i.Content(t))||d.jsx(Kie,{})})]})},Yie=[{id:"profile",label:"Profile",Content:({isLoggedIn:e,user:t})=>d.jsx(d.Fragment,{children:e&&t?d.jsxs("div",{className:"my-2 flex flex-col gap-y-4 md:flex-row rtl:space-x-reverse flex-wrap",children:[d.jsxs("div",{className:"flex flex-col w-full md:w-1/2",children:[d.jsx("p",{className:"",children:"Username"}),d.jsx("p",{children:t.username})]}),d.jsxs("div",{className:"flex flex-col w-full md:w-1/2",children:[d.jsx("p",{children:"Email"}),d.jsx("p",{children:t.email})]}),d.jsxs("div",{className:"flex flex-col w-full md:w-1/2",children:[d.jsx("p",{children:"Subscription"}),d.jsx("p",{children:qie(t.role)}),t.role===0?d.jsx(kt,{color:"light",onClick:async()=>{const{url:n}=await OV();window.open(n,"_self")},children:"Subscribe"}):t.role===1?d.jsx(kt,{color:"light",onClick:async()=>{const{url:n}=await $V();window.open(n,"_self")},children:"Manage Subscription"}):d.jsx("p",{children:"Thank you for everything!"})]}),d.jsxs("div",{className:"flex flex-col w-full md:w-1/2",children:[d.jsx("p",{children:"WARNING"}),d.jsx("p",{children:"All local data is cleared (unsynced data will be lost)"}),d.jsx(kt,{color:"danger",onClick:()=>{kV()},children:"Logout"})]}),d.jsxs("div",{className:"flex flex-col w-full md:w-1/2",children:[d.jsx("p",{children:"Refresh user info"}),d.jsx("p",{children:"(ratelimited)"}),d.jsx(kt,{color:"light",onClick:()=>{},children:"Update Info"})]})]}):d.jsx(kt,{color:"light",onClick:()=>{mn({type:"authentication",title:"",data:null,onSave:()=>{}})},children:"Login / Register"})})},{id:"general",label:"General",Content:({settings:e,themes:t})=>d.jsx(dt,{id:"theme",label:"Theme",value:e.theme,onChange:Wie,children:t.map(n=>d.jsx("option",{value:n.name,children:n.name}))})},{id:"developer",label:"Developer",Content:({settings:e})=>d.jsxs(d.Fragment,{children:[d.jsxs("p",{className:"my-2",children:[d.jsx("a",{className:"underline",href:"https://eruda.liriliri.io/",target:"_blank",children:"Eruda"})," allows access to the development console on mobile."]}),d.jsx(Kn,{id:"use-eruda",label:"Load Eruda",checked:e.isErudaActive,onChange:Uie})]})}],Xie=()=>{const e=j5.useValue(),t=Zf.useValue(),{isLoggedIn:n,user:r}=nr.useValue();return d.jsxs("div",{children:[d.jsx(Sa,{title:"Settings"}),d.jsx(Gie,{tabs:Yie,props:{themes:e,settings:t,isLoggedIn:n,user:r}})]})},Pj="system-checkpoint",Jie=async()=>{const e=await En.get(Pj);console.log("pulling systems");const{checkpoint:t,documents:n}=await RV(e,20);return await En.set(Pj,t),n},Qie=async()=>{const e=await xt.systems.toArray(),t=await xt.characters.toArray(),n=rc(await yr.get("token"));if(!n)return[];const r=await En.get("synced_characters")||[],i=n.role>0,o=e.filter(l=>{if(!(l.user_id===n.id))return!1;const f=t.find(p=>p.system.local_id===l.local_id&&r.includes)!==void 0,h=!l.id&&i;return f||h}),{conflicts:s,ids:a}=await TV(o);return s},Zie=async e=>xt.systems.bulkPut(e),eoe=async()=>await xt.systems.toArray(),Oj="version-checkpoint",toe=async()=>{const e=await En.get(Oj);console.log("pulling versions");const{checkpoint:t,documents:n}=await CV(e,20);return await En.set(Oj,t),n},noe=async()=>{const e=await xt.versions.toArray(),t=await xt.characters.toArray(),n=rc(await yr.get("token"));if(!n)return[];const r=await En.get("synced_characters")||[],i=n.role>0,o=e.filter(l=>{if(!(l.user_id===n.id))return!1;const f=t.find(p=>p.system.version_id===l.local_id&&r.includes)!==void 0,h=!l.id&&i;return f||h}),{conflicts:s,ids:a}=await jV(o);return s},roe=async e=>xt.versions.bulkPut(e),ioe=async()=>await xt.versions.toArray(),$j="character-checkpoint",ooe=async()=>{const e=await En.get($j);console.log("pulling characters");const{checkpoint:t,documents:n}=await IV(e,20);return await En.set($j,t),n},soe=async()=>{const e=await xt.characters.toArray(),t=rc(await yr.get("token"));if(!t)return[];const n=t.role>0,r=await En.get("updated_characters"),i=await En.get("synced_characters")||[],o=e.filter(l=>{const u=i.includes(l.local_id),c=r.includes(l.local_id);return!!(n&&c||u&&c)}),{conflicts:s,ids:a}=await PV(o);return s},aoe=async e=>xt.characters.bulkPut(e),loe=async()=>await xt.characters.toArray(),Mj="subscription-checkpoint",uoe=async()=>{const e=await En.get(Mj);console.log("pulling subscriptions");const{checkpoint:t,documents:n}=await AV(e,20);return await En.set(Mj,t),n},coe=async()=>{const e=await xt.subscriptions.toArray(),t=await xt.characters.toArray(),n=rc(await yr.get("token"));if(!n)return[];const r=await En.get("synced_characters")||[],i=n.role>0,o=e.filter(l=>{if(!(l.user_id===n.id))return!1;const f=t.find(p=>{const b=p.system.version_id===l.version_id&&p.system.local_id===l.resource_id,y=r.includes(p.local_id);return b&&y})!==void 0,h=!l.id&&i;return f||h}),{conflicts:s,ids:a}=await NV(o);return s},doe=async e=>xt.subscriptions.bulkPut(e),foe=async()=>await xt.subscriptions.toArray(),b1=Ta({isOnline:navigator.onLine}),_y=e=>b1.set(t=>({...t,isOnline:e})),hoe=10,Dj=[{name:"Subscriptions",get:foe,bulkPut:doe,pull:uoe,push:coe},{name:"Systems",get:eoe,bulkPut:Zie,pull:Jie,push:Qie},{name:"Versions",get:ioe,bulkPut:roe,pull:toe,push:noe},{name:"Characters",get:loe,bulkPut:aoe,pull:ooe,push:soe}];$x().then(e=>{_y(e)});const N5=async()=>{try{const e=await $x(),{isLoggedIn:t}=nr.get();_y(e),e&&t&&await _1()}catch(e){console.error("Error in sync",e)}setTimeout(N5,10*1e3)};N5();async function R5(e){return e.length===0?[]:new Promise(t=>{mn({title:"Handle Conflicts",type:"handleConflicts",data:e,onSave:t})})}async function poe(e,t,n){let r=!0;for(;r;){const i=await t();console.log("sync documents",i);const o=i.flatMap(l=>{const u=n.find(h=>h.local_id===l.local_id);if(!u)return[];const c=new Date(u.updated_at).getTime(),f=new Date(l.updated_at).getTime();return c>f?{local:u,remote:l}:[]}),s=await R5(o);i.length<hoe&&(r=!1);const a=i.map(l=>s.find(u=>u.local_id===l.local_id)||l);await e(a),console.log("bulk put",i.length)}}async function goe(e,t){let n=!0;for(;n;){const r=await t();r.length===0&&(n=!1,console.log("no conflicts"));const i=await R5(r);await e(i),console.log("conflicts handled",r.length)}}const _1=async()=>{const{isOnline:e}=b1.get();if(!e)return;const t=await En.get("synced_characters")||[];await n4(t);for(let n=0;n<Dj.length;n++){const r=Dj[n];await poe(r.bulkPut,r.pull,await r.get()),await goe(r.bulkPut,r.push)}};window.addEventListener("online",async()=>{console.log("online");const e=await $x();if(_y(e),!e){console.log("not connected");return}_1()});window.addEventListener("offline",()=>{console.log("offline"),_y(!1)});const moe=()=>{const e=_m(),t=()=>{e("/settings")};return R.useEffect(()=>{MV()},[]),d.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[d.jsx("h1",{children:"Subscription Successful!"}),d.jsx("p",{children:"Thank you for subscribing to Bard's Ballad. Your subscription was processed successfully."}),d.jsx("p",{children:"We hope you enjoy all the premium features and content!"}),d.jsx("button",{onClick:t,style:{marginTop:"1rem",padding:"0.5rem 1rem",fontSize:"1rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Back to Settings"})]})},yoe=async e=>{try{if(await xt.systems.get(e.local_id))return null;const t=Vf.safeParse(e);return t.success?(await xt.systems.add(e),e):(console.log("Invalid system data:",t.error.format()),null)}catch(t){return console.log("Error saving system:",t),null}},voe=async e=>{try{if(await xt.versions.get(e.local_id))return null;const t=v1.safeParse(e);return t.success?(await xt.versions.add(e),e):(console.log("Invalid version data:",t.error.format()),null)}catch(t){return console.log("Error saving version:",t),null}},woe=({item:e})=>d.jsx("div",{className:"relative cursor-pointer flex flex-col max-w-96 p-4 tranasition-all duration-200 bg-white border rounded-xl hover:shadow-lg dark:bg-neutral-800 dark:border-neutral-700 hover:transform hover:scale-[1.02]",onClick:()=>mn({type:"marketplace_view",title:e.name,data:e,onSave:async t=>{const n=await xV(t),{baseData:r,versionData:i}=n,o=await yoe(r);if(!o)return;const s=await voe(i);s&&w1("system",o.local_id,s.local_id,!1)}}),children:d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-brand-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-xl font-bold text-white",children:e.name[0]})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h5",{className:"text-xl font-semibold text-neutral-900 truncate dark:text-white",children:e.name}),d.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:[e.creator_username," | Version ",sc(e.version)]})]})]})},e.name),boe=()=>{const[e,t]=R.useState([]),{isLoggedIn:n}=nr.useValue(),{isOnline:r}=b1.useValue();return R.useEffect(()=>{const i=async()=>{await c2.get("seen-marketplace-disclaimer")||mn({title:"",type:"marketplace_disclaimer",data:"",onSave:()=>{c2.set("seen-marketplace-disclaimer",!0)}})},o=async()=>{const s=await bV();t(s)};i(),o()},[]),r?d.jsxs("div",{children:[d.jsx(Sa,{title:"Marketplace"}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center",children:[d.jsx("img",{src:"/images/marketplace.png",alt:"Marketplace",className:"w-1/2 mb-4"}),d.jsx("h2",{className:"text-2xl font-bold",children:"Welcome to the Marketplace!"}),d.jsx("p",{className:"text-gray-600",children:"Explore and discover new systems and modules."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Featured Systems"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:e.map((i,o)=>d.jsx(woe,{item:i}))})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mt-4",children:"Featured Themes"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4"})]})]}),n&&d.jsx(Ia,{onClick:()=>mn({type:"PublishItem",title:"none",data:"none",onSave:wV})})]}):d.jsxs("div",{className:"h-full",children:[d.jsx(Sa,{title:"Marketplace"}),d.jsx("div",{className:"flex justify-center items-center p-4",children:d.jsx("h2",{className:"text-3xl",children:"Marketplace is not available while you're offline!"})})]})};window.trySync=_1;window.updateFromAuth=async()=>{const{user:e}=nr.get(),t=e?e.id:"none",n=await yr.get("deviceId")||"";Ox(t,n)};A5();const _oe=()=>(R.useEffect(()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh","".concat(t,"px"))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),d.jsx(GM,{children:d.jsx(EM,{children:d.jsxs($i,{path:"/",element:d.jsx(XV,{}),children:[d.jsx($i,{index:!0,element:d.jsx(eq,{})}),d.jsxs($i,{path:"characters",children:[d.jsx($i,{index:!0,element:d.jsx(ore,{})}),d.jsx($i,{path:":id",element:d.jsx(Hre,{})})]}),d.jsx($i,{path:"marketplace",element:d.jsx(boe,{})}),d.jsxs($i,{path:"library",children:[d.jsx($i,{index:!0,element:d.jsx(Qre,{})}),d.jsx($i,{path:"system/:id",element:d.jsx(Bie,{})})]}),d.jsx($i,{path:"settings",element:d.jsx(Xie,{})}),d.jsx($i,{path:"subscription-confirmation",element:d.jsx(moe,{})})]})})})),xoe={api_host:void 0},Soe=document.getElementById("root"),Eoe=J3(Soe);Eoe.render(d.jsx(It.StrictMode,{children:d.jsx(Zne,{apiKey:"",options:xoe,children:d.jsx(_oe,{})})}));export{e4 as W,Coe as __vite_legacy_guard};
